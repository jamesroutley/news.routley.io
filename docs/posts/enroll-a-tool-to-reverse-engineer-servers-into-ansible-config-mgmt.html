<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://enroll.sh">Original</a>
    <h1>Show HN: Enroll, a tool to reverse-engineer servers into Ansible config mgmt</h1>
    
    <div id="readability-page-1" class="page"><div>
      <div id="qs1" role="tabpanel" aria-labelledby="qs1-tab">
        <div>
          <div>
            <div>
              <pre><code id="qs1code"># Harvest â†’ Manifest in one go
enroll single-shot --harvest ./harvest --out ./ansible

# Then run Ansible locally
ansible-playbook -i &#34;localhost,&#34; -c local ./ansible/playbook.yml</code></pre>
            </div>
          </div>
          <div>
            <div>
              <p>Good for</p>
              <p>Disaster recovery snapshots, &#34;make this one host reproducible&#34;, and carving a golden role set you&#39;ll refine over time.</p>
              <hr/>
	      <p>Want templates for structured configs? Install <a href="https://git.mig5.net/mig5/jinjaturtle" target="_blank" rel="noopener noreferrer">JinjaTurtle</a> and use <code>--jinjaturtle</code> (or let it auto-detect).</p>
            </div>
          </div>
        </div>
      </div>

      <div id="qs2" role="tabpanel" aria-labelledby="qs2-tab">
        <div>
          <pre><code id="qs2code"># Remote harvest over SSH, then manifest locally
enroll single-shot \
  --remote-host myhost.example.com \
  --remote-user myuser \
  --harvest /tmp/enroll-harvest \
  --out ./ansible \
  --fqdn myhost.example.com</code></pre>
        </div>
        <p>If you don&#39;t want/need sudo on the remote host, add <code>--no-sudo</code> (expect a less complete harvest).</p>
      </div>

      <div id="qs3" role="tabpanel" aria-labelledby="qs3-tab">
        <div>
          <pre><code id="qs3code"># Multi-site mode: shared roles, host-specific state in inventory
enroll harvest --out /tmp/enroll-harvest
enroll manifest --harvest /tmp/enroll-harvest --out ./ansible --fqdn &#34;$(hostname -f)&#34;

# Run the per-host playbook
ansible-playbook ./ansible/playbooks/&#34;$(hostname -f)&#34;.yml</code></pre>
        </div>
        <p>Rule of thumb: single-site for &#34;one server, easy-to-read roles&#34;; <code>--fqdn</code> for &#34;many servers, high abstraction, fast adoption&#34;.</p>
      </div>

      <div id="qs4" role="tabpanel" aria-labelledby="qs4-tab">
        <div>
          <pre><code id="qs4code"># Compare two harvests and get a human-friendly report
enroll diff --old /path/to/harvestA --new /path/to/harvestB --format markdown

# Send a webhook when differences are detected
enroll diff \
  --old /path/to/harvestA \
  --new /path/to/harvestB \
  --webhook https://example.net/webhook \
  --webhook-format json \
  --webhook-header &#39;X-Enroll-Secret: ...&#39; \
  --exit-code</code></pre>
        </div>
      </div>
    </div></div>
  </body>
</html>
