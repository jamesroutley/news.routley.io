<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://planetscale.com/blog/its-fine-rewind-revert-a-migration-without-losing-data">Original</a>
    <h1>It’s fine, Rewind: Revert a migration without losing data</h1>
    
    <div id="readability-page-1" class="page"><div><div><p>Bad migrations happen every day and data loss can be devastating. PlanetScale’s new Rewind feature gives you the power to revert changes after a schema migration with <strong>no downtime and zero data loss</strong>. </p><a href="#what-is-rewind?"><h4 id="what-is-rewind?">What is Rewind?</h4></a><p>Have you ever made a schema change, like changing a column’s data type or dropping a table, that broke your production application causing unplanned downtime, or even worse, a full-scale outage? And once it was live, you immediately wished you could go back in time, without losing any data that was added during the broken period?</p><p>Your wish has come true. PlanetScale’s new Rewind feature allows you to revert a migration with zero data loss.</p><p>Rewind enables something never possible before: The ability to revert your database’s schema changes in less than a minute with the press of a button with no downtime or data loss. Previously, if you dropped the wrong index, running a new migration might take you a few hours to fix. Even worse, if you dropped the wrong column or table and had to restore from a backup, it would take days or weeks to roll out. And what happens to your data and your application while it is being fixed? With Rewind, you don’t need to worry about downtime or data loss.</p><p>Rewind opens the door to a new level of velocity and power for your engineering team. Along with existing PlanetScale features such as <a href="https://docs.planetscale.com/concepts/branching">Branching</a> and <a href="https://docs.planetscale.com/concepts/planetscale-workflow#deploy-requests">Deploy Requests</a>, you can make changes (and fix changes) in your database faster and safer than before. It not only saves you time, but it makes schema changes less scary because you can treat your database like you treat your code. Unless you built custom in-house tooling for your database, these workflows have not been possible before.</p><blockquote><p>We are giving away limited-edition, retro Rewind t-shirts to the first 100 people that successfully revert a schema change.</p><p>All you have to do is:</p><ul><li>Deploy a schema change</li><li>Revert it in seconds</li><li>Take a screenshot/video</li><li>Share on Twitter and tag <a href="https://twitter.com/planetscaledata">@planetscaledata</a></li></ul><p><em>This giveaway is US only while supplies last. Void where prohibited; one per household.</em></p></blockquote><a href="#how-does-it-work?"><h4 id="how-does-it-work?">How does it work?</h4></a><p>After you have completed a deploy request, you will be able to revert to a clean state of the database before the schema changes. This includes any data that may have been removed in the deploy request. Any database enrolled in the limited beta will see a “Revert changes” button available on the relevant deploy request page for 30 minutes after the changes have been deployed. Once the “Revert changes” button is selected, it is deployed immediately.</p><p>For example, if you remove a column and its associated data in a deploy request then revert with Rewind, your column and its associated data will appear again <strong>in seconds</strong>.</p><p>Rewind is possible because of <a href="https://vitess.io/docs/13.0/reference/vreplication/vreplication/">VReplication</a> in Vitess, the database clustering and management system that powers PlanetScale databases alongside MySQL. Vitess’ VReplication also powers features like <a href="https://docs.planetscale.com/concepts/database-imports">Database Imports</a>. VReplication uses a lossless sync in the background between valid states of the database. It copies data from the source to the destination table in a consistent fashion. VReplication’s implementation is unique because it allows us to go down to the MySQL transaction level, ensuring no data is lost and that your database schema returns to its previous state before the schema change. All in just seconds.</p><p>For a more in-depth look at how Rewind works, take a look at the <a href="https://planetscale.com/blog/behind-the-scenes-how-we-built-rewind">Behind the scenes: how we built Rewind blog post</a>.</p><a href="#want-to-see-it-in-action?"><h4 id="want-to-see-it-in-action?">Want to see it in action?</h4></a><p>Sign up for the limited beta to test it out yourself! <a href="https://auth.planetscale.com/sign-in">Sign up or log into PlanetScale</a> and opt into the limited beta in your <strong>database&#39;s Settings tab</strong>. In the <strong>Beta features</strong> section, select <strong>“Enroll this database in the Rewind limited beta</strong>.” Once you create a database branch with changes to your schema, deploy the deploy request, and then Rewind! </p><p>For more information, check out our <a href="https://docs.planetscale.com/concepts/deploy-requests#revert-a-schema-change">Deploy requests – Revert a schema change documentation</a>.</p><p><strong>Remember:</strong> We are giving away limited-edition, retro Rewind t-shirts to the first 100 people that successfully revert a schema change.</p><p>All you have to do is:</p><ul><li>Deploy a schema change</li><li>Revert it in seconds</li><li>Take a screenshot/video</li><li>Share on Twitter and tag <a href="https://twitter.com/planetscaledata">@planetscaledata</a></li></ul><p><em>This giveaway is US only while supplies last. Void where prohibited; one per household.</em></p><p><strong>We can’t wait to hear what you think about Rewind!</strong></p></div></div></div>
  </body>
</html>
