<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://neilzone.co.uk/2024/07/attempting-to-stop-microsoft-users-sending-reactions-to-email-from-me-by-adding-a-postfix-header/">Original</a>
    <h1>Stop Microsoft users sending &#39;reactions&#39; to email by adding a postfix header</h1>
    
    <div id="readability-page-1" class="page"><div id="content">
<article>
    <p>Over the past few months, I’ve noticed that an increasing number of replies to email that I’ve sent are “reactions”.</p>
<p>I imagine that, to the sender, or to someone in the Microsoft ecosystem, they are handled a bit liked a “thumbs-up” or “heart” reaction to a Signal message.</p>
<p>To me - as someone not in the Microsoft ecosystem - for each reaction, I get an email:</p>
<blockquote>
<p>like 	[person] reacted to your message:</p>
</blockquote>
<p>The “like” is alt-text. Because I don’t allow loading of remote content, I don’t see an image here.</p>
<p>I don’t want this.</p>

<p>Microsoft <a href="https://techcommunity.microsoft.com/t5/outlook-blog/reactions-in-outlook-public-usability-update-september-2023/ba-p/3928103">has a specific header</a> which one can add to outgoing to email:</p>
<pre tabindex="0"><code>x-ms-reactions: disallow
</code></pre><p>My understanding is that, if that header is set, Microsoft suppresses the ability in its clients to respond with a reaction.</p>
<p>It is annoying that I need to set a specific header for this.</p>
<p>If every feature required a specific header to signal that it is unwanted, that would get irritating rather rapidly.</p>
<p>But at least there <em>is</em> this header.</p>
<p>If your mail client / MUA allows you to add headers, you could do it that way.</p>
<p>If you did, you wouldn’t need to tinker with your mailserver’s config.</p>
<p>But you’d need to do it for each client you use.</p>
<p>I want it to apply to all email I send, from whatever account, and from whatever device, so I added it to my postfix configuration.</p>
<p>In <code>/etc/postfix/main.cf</code>, I have a setting:</p>
<pre tabindex="0"><code>header_checks = pcre:/etc/postfix/header_checks
</code></pre><p>So I added my new header to <code>/etc/postfix/header_checks</code>.</p>
<p>I added</p>
<pre tabindex="0"><code># add header to deal with unwanted Microsoft reactions (2024-07-16)
/^Content-Type:/i PREPEND x-ms-reactions: disallow 
</code></pre><p>(Edit: originally, I put this line before the <code>Content-Transfer-Encoding</code> header. But my mutt configuration does send that header, so I’ve switched it to go before the <code>Content-Type</code> header instead, as all my MUAs send that.)</p>
<p>and restarted postfix (<code>sudo service postfix restart</code>).</p>
<p>Then I tested it with various clients, and looked at the message headers to check that the header was being added correctly.</p>
<p>It was, so, success!</p>
<p>Now, will I get any more unwanted “reactions” email…? I’ll have to wait and see.</p>

<p>I’ve tested this with a couple of people.</p>
<p>In one case, the header enrichment happened, but the Microsoft-using recipient still had the options to send a reaction.</p>
<p>They did, but the reaction did not reach me - it never hit my mailserver.</p>
<p>Microsoft <a href="https://techcommunity.microsoft.com/t5/outlook-blog/reactions-in-outlook-public-usability-update-september-2023/ba-p/3928103">sort-of foreshadows this</a> when it says:</p>
<blockquote>
<p>Since Disallow Reactions will roll out to different Outlook clients at different cadences and not all Outlook clients will have the gray-out update immediately, we also have a second layer of protection. When an email has reactions disallowed, attempts to react to it will fail at the server side.</p>
</blockquote>
<p>My reading of this is that, even if a Microsoft client shows that reactions are available, and even if someone clicks it to send a reaction, Microsoft may still drop it silently.</p>
<p>That doesn’t feel like an ideal user experience (even if, for me, it achieves the goal of not getting a reaction email).</p>
<p>For the other Microsoft-using person, the reaction symbol was greyed out, and a hover text said “Reactions are disallowed on this message”.</p>
<p>Perhaps it does vary by Microsoft system, which again seems rather sub-optimal.</p>



  


</article>

        </div></div>
  </body>
</html>
