<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/clarkmcc/cel-rust">Original</a>
    <h1>Common Expression Language interpreter written in Rust</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a href="https://github.com/clarkmcc/cel-rust/actions/workflows/rust.yml"><img src="https://github.com/clarkmcc/cel-rust/actions/workflows/rust.yml/badge.svg" alt="Rust"/></a></p>
<p dir="auto">The <a href="https://github.com/google/cel-spec">Common Expression Language (CEL)</a> is a non-Turing complete language designed
for simplicity, speed, safety, and
portability. CEL&#39;s C-like syntax looks nearly identical to equivalent expressions in C++, Go, Java, and TypeScript. CEL
is ideal for lightweight expression evaluation when a fully sandboxed scripting language is too resource intensive.</p>
<div dir="auto" data-snippet-clipboard-copy-content="// Check whether a resource name starts with a group name.
resource.name.startsWith(&#34;/groups/&#34; + auth.claims.group)"><pre><span>// Check whether a resource name starts with a group name.</span>
<span>resource</span>.<span>name</span>.<span>startsWith</span>(<span>&#34;/groups/&#34;</span> + <span>auth</span>.<span>claims</span>.<span>group</span>)</pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="// Determine whether the request is in the permitted time window.
request.time - resource.age &lt; duration(&#34;24h&#34;)"><pre><span>// Determine whether the request is in the permitted time window.</span>
<span>request</span>.<span>time</span> <span>-</span> <span>resource</span>.<span>age</span> <span>&lt;</span> <span>duration</span>(<span>&#34;24h&#34;</span>)</pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="// Check whether all resource names in a list match a given filter.
auth.claims.email_verified &amp;&amp; resources.all(r, r.startsWith(auth.claims.email))"><pre><span>// Check whether all resource names in a list match a given filter.</span>
<span>auth</span><span>.</span><span>claims</span><span>.</span><span>email_verified</span> <span>&amp;&amp;</span> <span>resources</span><span>.</span><span>all</span><span>(</span><span>r</span><span>,</span> <span>r</span><span>.</span><span>startsWith</span><span>(</span><span>auth</span><span>.</span><span>claims</span><span>.</span><span>email</span><span>)</span><span>)</span></pre></div>

<p dir="auto">This project includes a CEL-parser and an interpreter which means that it can be used to evaluate CEL-expressions. The
library aims to be very simple to use, while still being fast, safe, and customizable.</p>
<div dir="auto" data-snippet-clipboard-copy-content="fn main() {
    let program = Program::compile(&#34;add(2, 3) == 5&#34;).unwrap();
    let mut context = Context::default();
    context.add_function(&#34;add&#34;, |a: i64, b: i64| a + b);
    let value = program.execute(&amp;context).unwrap();
    assert_eq!(value, true.into());
}"><pre><span>fn</span> <span>main</span><span>(</span><span>)</span> <span>{</span>
    <span>let</span> program = <span>Program</span><span>::</span><span>compile</span><span>(</span><span>&#34;add(2, 3) == 5&#34;</span><span>)</span><span>.</span><span>unwrap</span><span>(</span><span>)</span><span>;</span>
    <span>let</span> <span>mut</span> context = <span>Context</span><span>::</span><span>default</span><span>(</span><span>)</span><span>;</span>
    context<span>.</span><span>add_function</span><span>(</span><span>&#34;add&#34;</span><span>,</span> |<span>a</span><span>:</span> <span>i64</span><span>,</span> <span>b</span><span>:</span> <span>i64</span>| a + b<span>)</span><span>;</span>
    <span>let</span> value = program<span>.</span><span>execute</span><span>(</span><span>&amp;</span>context<span>)</span><span>.</span><span>unwrap</span><span>(</span><span>)</span><span>;</span>
    <span>assert_eq</span><span>!</span><span>(</span>value, <span>true</span>.into<span>(</span><span>)</span><span>)</span><span>;</span>
<span>}</span></pre></div>

<p dir="auto">Check out these other examples to learn how to use this library:</p>
<ul dir="auto">
<li><a href="https://www.scattered-thoughts.net/clarkmcc/cel-rust/blob/master/example/src/simple.rs">Simple</a> - A simple example of how to use the library.</li>
<li><a href="https://www.scattered-thoughts.net/clarkmcc/cel-rust/blob/master/example/src/variables.rs">Variables</a> - Passing variables and using them in your program.</li>
<li><a href="https://www.scattered-thoughts.net/clarkmcc/cel-rust/blob/master/example/src/functions.rs">Functions</a> - Defining and using custom functions in your program.</li>
<li><a href="https://www.scattered-thoughts.net/clarkmcc/cel-rust/blob/master/example/src/threads.rs">Concurrent Execution</a> - Executing the same program concurrently.</li>
</ul>
</article></div></div>
  </body>
</html>
