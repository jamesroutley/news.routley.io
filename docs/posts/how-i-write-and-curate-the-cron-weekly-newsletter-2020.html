<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://ma.ttias.be/how-to-cron-weekly-newsletter/">Original</a>
    <h1>How I write and curate the cron.weekly newsletter (2020)</h1>
    
    <div id="readability-page-1" class="page"><div>
                    <p>Every Sunday, I send out <a href="https://ma.ttias.be/cronweekly">a newsletter called cron.weekly</a> to over 10.000 subscribers. In this post, Iâ€™ll do a deep-dive into <em>how</em> those mails get delivered to subscribers.</p>
<p>Letâ€™s talk tech, workflows and curation! ðŸ”¥</p>
<h2 id="gathering-interesting-links">Gathering interesting links</h2>
<p>The first (and arguably, most important) thing to do is collect all the links to include in the newsletter.</p>
<h3 id="self-found-articles">Self-found articles</h3>
<p>Throughout the week, I bookmark every interesting link I see using <a href="https://getpocket.com/">the Pocket extension</a>.</p>
<p>A simple click in the browser and itâ€™s bookmarked for later processing. Iâ€™m pretty liberal about what I bookmark. At this stage, I donâ€™t have to read <em>every</em> article. If it looks interesting, Iâ€™ll bookmark it - curation happens later.</p>
<h3 id="submitted-by-readers">Submitted by readers</h3>
<p>Quite often I get a reply to a newsletter I send, where a reader has some follow-up or a different point of view from what I wrote. This usually comes with a couple of links for me to check out, and chances are that feedback makes it in next weeksâ€™ issue.</p>
<p><em>Side note: if you have an interesting article, do feel free to send it to me either <a href="https://twitter.com/mattiasgeniar">via Twitter</a> (my DMs are open) or via email at <code>m@ttias.be</code>.</em></p>
<h2 id="processing-the-links">Processing the links</h2>
<p>I wrote a small script that talks to the Pocket API, retrieves all the links and formats it in Markdown for me. Itâ€™s really only useful to me, but itâ€™s available on Github if youâ€™re interested: <a href="https://github.com/mattiasgeniar/generator.cronweekly.com-v2">mattiasgeniar/generator.cronweekly.com-v2</a>.</p>
<p>Mind you, it isnâ€™t the prettiest code either - but itâ€™s good enough for me.</p>
<p>The result is a <em>suggestion</em> of newsletter content, formatted in a way I can work with.</p>
<p>
    <img src="https://ma.ttias.be/content/techstack-cron-weekly/pocket-markdown-format.png" alt="Preview of the Pocket Bookmark parsing" loading="lazy"/>
</p>
<p>This saves me a lot of time preparing the <em>syntax</em> of the newsletter, as itâ€™s all written in Markdown. Pocket also has a decent <em>summary</em> of each article, that I only have to tweak slightly.</p>
<h2 id="writing-the-web-version-first">Writing the web-version first</h2>
<p>With the Pocket suggestion available in Markdown format, now begins the most time-intensive part: writing.</p>
<p>While Pocket makes good suggestions for the description of <em>projects</em>, it doesnâ€™t quite work for items in the news- or tutorials section.</p>
<p>At this point, I havenâ€™t read every link yet (I bookmark <em>a lot</em>, often just based on the title alone), about 50% gets thrown away in this step.</p>
<p>This is the stage that takes me 2-3 hours. Half of it is spent typing, the other half is reading the articles.</p>
<h2 id="generating-the-html--txt-from-the-web-version">Generating the HTML &amp; TXT from the web-version</h2>
<p>This is a step that might seem a bit backwards, but it works for my workflow: once I have the web-version available, I will use that to generate a different version for the HTML and TXT view of the newsletter.</p>
<p>The input for the conversion is the Markdown file that <a href="https://ma.ttias.be/step-by-step-guide-migrating-wordpress-to-hugo/">hugo parses</a>. It looks like this:</p>
<div><pre><code data-lang="markdown">---
title: &#39;cron.weekly issue <span>#131:</span> Ubuntu 20.04, Moloch, eBPF, xsv, desed <span>&amp;</span> more&#39;
author: mattias

date: 2020-04-26T06:50:00+01:00
publishDate: 2020-04-26T06:50:00+01:00
url: /cronweekly/issue-131/
---

Hi everyone! ðŸ‘‹

Welcome to cron.weekly issue <span>#131</span>.

Last week ...
</code></pre></div><p>I wrote a PHP converter and use it as such:</p>
<div><pre><code data-lang="bash">$ ./generate-newsletter-mail.sh -t <span>|</span> pbcopy
$ ./generate-newsletter-mail.sh -h <span>|</span> pbcopy
</code></pre></div><p>It generates the TXT version (<code>-t</code> flag) or the HTML version (<code>-h</code> flag) and copies the output to my clipboard using <code>pbcopy</code> on Mac.</p>
<p>Iâ€™ve spent a considerable amount of time optimizing both views to look good in any e-mail client. The script above generates this HTML output:</p>
<p>
    <img src="https://ma.ttias.be/content/techstack-cron-weekly/cronweekly-html-view.png" alt="HTML view of the cron.weekly newsletter" loading="lazy"/>
</p>
<p>Because the audience is <em>very technical</em>, a surprising amount of users read it in <a href="http://www.mutt.org/">Mutt</a>, a text-only client. They get this version delivered to them:</p>
<p>
    <img src="https://ma.ttias.be/content/techstack-cron-weekly/cronweekly-txt-view.png" alt="TXT view of the cron.weekly newsletter" loading="lazy"/>
</p>
<p>I tried experimenting with more ASCII art, but it renders differently on every client (since it uses your chosen font) so I dropped it altogether. Clean &amp; simple.</p>
<h2 id="3-versions-are-now-ready">3 versions are now ready</h2>
<p>At this point, I have 3 <em>output</em> versions of the newsletter ready.</p>
<ol>
<li>The web version gets published <a href="https://ma.ttias.be/cronweekly">in the archives</a> and <a href="https://ma.ttias.be/cronweekly/index.xml">the RSS feed</a></li>
<li>The HTML version for the graphical users</li>
<li>The TXT version for the die-hard fans</li>
</ol>
<p>The web-version gets published automatically at the right time, using Hugoâ€™s <code>publishDate</code> variable and a cronjob on the server, that regenerates the site every hour.</p>
<pre><code>$ crontab -l
55 * * * * cd ma.ttias.be/repo; ./update.sh
</code></pre><p>The hourly cronjob runs at 5 minutes before the hour, so the newsletter is generated on time before the mailing goes out a few minutes later.</p>
<h2 id="sending-the-newsletter">Sending the newsletter</h2>
<p>There are two important components to sending out the newsletter: the <em>client</em> and the <em>MTA</em>.</p>
<h3 id="using-mailcoach">Using Mailcoach</h3>
<p>I use a PHP tool called <a href="https://mailcoach.app/?utm_source=blog&amp;utm_medium=link&amp;utm_campaign=ma.ttias.be">Mailcoach</a> that lets me configure the newsletter, set the HTML and TXT body and send them to all subscribers.</p>
<p>In order to collect new e-mail signups, I embed the Mailcoach form on this (static) website. The POST target of the form you see <a href="https://ma.ttias.be/cronweekly">on the cron.weekly archive pages</a> points to Mailcoach, which then stores the e-mail addresses and verifies the double opt-in.</p>

<p><em>(Go give it a try, I swear it works.</em> ðŸ˜‰ <em>)</em></p>
<p>The web version of Mailcoach allows me to see previous campaigns, monitor the list growth etc.</p>
<p>
    <img src="https://ma.ttias.be/content/techstack-cron-weekly/mailcoach-web-ui.png" alt="Mailcoach newsletter UI" loading="lazy"/>
</p>
<p>I <a href="https://ma.ttias.be/cronweekly/about/#privacy-first">strongly believe in <em>no-tracking</em></a>, so there are no open- or click-rates to be shown here. Mailcoach supports that, but I donâ€™t want to track users. ðŸ˜„</p>
<p>I switched from <a href="https://ma.ttias.be/mailchimp-sendy-saved-600-year/">using Sendy</a> to Mailcoach because it allows me to easily extend it, which comes in handy a bit further down.</p>
<h3 id="using-mailgun">Using Mailgun</h3>
<p>Mailcoach, just like Sendy, can send the e-mails using Amazon SES, Mailgun, Sendmail, â€¦ Since I recently got <em>kicked off</em> Amazon SES for getting too many bounces after <a href="https://ma.ttias.be/cron-weekly-is-coming-back/">I restarted the newsletter</a> (which was my own fault), I switched to using <a href="https://www.mailgun.com/">Mailgun</a> instead.</p>
<p>Theyâ€™re pretty fast, the newsletter gets sent out in just under 10 minutes to about 10.000 subscribers.</p>
<p>I recently upgraded the Mailgun plan to the <em>Growth</em> plan for $80/month, which gives me longer log retention and a fixed IP address.</p>
<p>Since Iâ€™m now paying for Mailgun, Iâ€™ve been switching all my projects over one-by-one, including the outgoing e-mail from Gmail (a step-by-step plan to moving away from Google products, but thatâ€™s for another time).</p>
<h2 id="automating-the-tweets">Automating the tweets</h2>
<p>A few weeks ago, I extended the Mailcoach app with <a href="https://nova.laravel.com/">Laravel Nova</a> that gives me a useful admin-section straight out of the box.</p>
<p>
    <img src="https://ma.ttias.be/content/techstack-cron-weekly/laravel-nova.png" alt="Laravel Nova for curating Tweets" loading="lazy"/>
</p>
<p>I wrote some extra code to parse the latest newsletter (the TXT version), extract all the links and my comments on them and then randomly takes 20 links to share out on Twitter spread over the next week.</p>
<p>This step is mostly fully-automated. I sometimes tweak the copy a bit to make more sense in a Tweet. They are all suffixed with <code>#CronWeekly</code>, so users can mute these if they <a href="https://twitter.com/mattiasgeniar">follow me</a> and donâ€™t want to see the newsletter repeated to them on their timeline.</p>
<h2 id="the-entire-workflow">The entire workflow</h2>
<p>When sketched out, the flow looks like this:</p>
<p>
    <img src="https://ma.ttias.be/content/techstack-cron-weekly/cronweekly-workflow.png" alt="Laravel Nova for curating Tweets" loading="lazy"/>
</p>
<p>Lots of layers building on top of other layers, modifying the content in every step of the way. Itâ€™s a bit like a complex Unix pipeline, isnâ€™t it?</p>
<h2 id="goto-1">GOTO 1;</h2>
<p>And once thatâ€™s done, the whole process starts again: collect new links, curate them, send them out. ðŸ˜„</p>
<p>I regretted the weekly deadline a few years ago when <a href="https://ma.ttias.be/im-taking-break-cron-weekly/">I needed a break</a> and was near burn-out, but now that Iâ€™ve <a href="https://ma.ttias.be/time-for-change-going-independent/">quit my full-time job</a> to focus on <a href="https://ohdear.app/">Oh Dear</a>, <a href="https://dnsspy.io/">DNS Spy</a> and <a href="https://ma.ttias.be/cronweekly">the newsletter</a> I find it a lot more enjoyable again.</p>
<p>Now that the user base is large enough, I can <a href="https://ma.ttias.be/cronweekly/sponsor/">add sponsorships</a> that help pay the bills.</p>
<p>If you have any other questions about running a newsletter or the business behind it, feel free <a href="https://ma.ttias.be/contact/">to reach out</a>!</p>

                </div></div>
  </body>
</html>
