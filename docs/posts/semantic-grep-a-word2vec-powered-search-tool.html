<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/arunsupe/semantic-grep">Original</a>
    <h1>Show HN: Semantic Grep â€“ A Word2Vec-powered search tool</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">sgrep is a command-line tool that performs semantic searches on text input using word embeddings. It&#39;s designed to find semantically similar matches to the query, going beyond simple string matching. The experience is designed to be similar to grep.</p>

<p dir="auto">Search for words similar to &#34;death&#34; in Hemingway&#39;s &#34;The Old Man and the Sea&#34; with context and line numbers:</p>
<div dir="auto" data-snippet-clipboard-copy-content="curl -s &#39;https://gutenberg.ca/ebooks/hemingwaye-oldmanandthesea/hemingwaye-oldmanandthesea-00-t.txt&#39; \
    | sgrep -C 2 -n -threshold 0.55 death"><pre>curl -s <span><span>&#39;</span>https://gutenberg.ca/ebooks/hemingwaye-oldmanandthesea/hemingwaye-oldmanandthesea-00-t.txt<span>&#39;</span></span> \
    <span>|</span> sgrep -C 2 -n -threshold 0.55 death</pre></div>
<p dir="auto">Output:
<a target="_blank" rel="noopener noreferrer" href="https://github.com/arunsupe/semantic-grep/blob/main/demo/image.png"><img src="https://github.com/arunsupe/semantic-grep/raw/main/demo/image.png" alt="alt text"/></a></p>
<p dir="auto">This command:</p>
<div data-snippet-clipboard-copy-content="- Fetches the text of &#34;The Old Man and the Sea&#34; from Project Gutenberg Canada
- Pipes the text to sgrep
- Searches for words semantically similar to &#34;death&#34;
- Uses a similarity threshold of 0.55 (-threshold 0.55)
- Displays 2 lines of context before and after each match (-C 2)
- Shows line numbers (-n)"><pre><code>- Fetches the text of &#34;The Old Man and the Sea&#34; from Project Gutenberg Canada
- Pipes the text to sgrep
- Searches for words semantically similar to &#34;death&#34;
- Uses a similarity threshold of 0.55 (-threshold 0.55)
- Displays 2 lines of context before and after each match (-C 2)
- Shows line numbers (-n)
</code></pre></div>
<p dir="auto">The output will show matches with their similarity scores, highlighted words, context, and line numbers.</p>

<ul dir="auto">
<li>Semantic search using Word2Vec embeddings</li>
<li>Configurable similarity threshold</li>
<li>Context display (before and after matching lines)</li>
<li>Color-coded output for matched words and line numbers</li>
<li>Support for reading from files or standard input</li>
<li>Configurable via JSON file and command-line arguments</li>
</ul>

<p dir="auto"><strong>Binary</strong>:</p>
<ol dir="auto">
<li>Download the latest binary release</li>
<li>Download a word2vec model (see below)</li>
<li>Optionally, download the config.json to configure model location there (or do this from the command line)</li>
</ol>
<p dir="auto"><strong>From source (linux/osx)</strong>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# clone
git clone https://github.com/arunsupe/semantic-grep.git
cd semantic-grep

# build
go build -o sgrep

# download a word2vec model using this helper script (see &#34;Word2Vec Model&#34; below)
bash download-model.sh"><pre><span><span>#</span> clone</span>
git clone https://github.com/arunsupe/semantic-grep.git
<span>cd</span> semantic-grep

<span><span>#</span> build</span>
go build -o sgrep

<span><span>#</span> download a word2vec model using this helper script (see &#34;Word2Vec Model&#34; below)</span>
bash download-model.sh</pre></div>

<p dir="auto">Basic usage:</p>
<p dir="auto">./sgrep [options]  [file]</p>
<p dir="auto">If no file is specified, sgrep reads from standard input.</p>

<ul dir="auto">
<li><code>-model_path</code>: Path to the Word2Vec model file (overrides config file)</li>
<li><code>-threshold</code>: Similarity threshold for matching (default: 0.7)</li>
<li><code>-A</code>: Number of lines to display after a match</li>
<li><code>-B</code>: Number of lines to display before a match</li>
<li><code>-C</code>: Number of lines to display before and after a match</li>
<li><code>-n</code>: Print line numbers</li>
</ul>

<ul dir="auto">
<li>sgrep can be configured using a JSON file. By default, it looks for <code>config.json</code> in the current directory.</li>
</ul>
<p dir="auto">Example <code>config.json</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="{
    &#34;model_path&#34;: &#34;path/to/your/word2vec/model.bin&#34;
}"><pre>{
    <span>&#34;model_path&#34;</span>: <span><span>&#34;</span>path/to/your/word2vec/model.bin<span>&#34;</span></span>
}</pre></div>

<ul dir="auto">
<li>sgrep requires a Word2Vec model in binary format. You can use pre-trained models like Google&#39;s Word2Vec model or train your own using tools like gensim.</li>
<li>Download and unzip the .bin file locally and update the config.json.
<ul dir="auto">
<li>Google&#39;s Word2Vec: from <a href="https://github.com/mmihaltz/word2vec-GoogleNews-vectors">https://github.com/mmihaltz/word2vec-GoogleNews-vectors</a></li>
<li>A slim version: GoogleNews-vectors-negative300-SLIM.bin.gz model from <a href="https://github.com/eyaler/word2vec-slim/">https://github.com/eyaler/word2vec-slim/</a> (thanks to eyaler)</li>
</ul>
</li>
<li>download-model.sh is a simple helper script to download the small word2vec model hosted by eyaler and save it in models/googlenews-slim/ directory</li>
</ul>

<p dir="auto">Contributions are welcome! Please feel free to submit a Pull Request.</p>

<p dir="auto">This project is licensed under the MIT License - see the LICENSE file for details.</p>
</article></div></div>
  </body>
</html>
