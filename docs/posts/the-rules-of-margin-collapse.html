<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.joshwcomeau.com/css/rules-of-margin-collapse/">Original</a>
    <h1>The Rules of Margin Collapse</h1>
    
    <div id="readability-page-1" class="page"><article data-layout="tutorial"><a id="introduction"><h2>Introduction</h2></a><p>In CSS, adjacent margins can sometimes overlap. This is known as “margin collapse”, and it has a reputation for being quite dastardly.</p><p>Here&#39;s a typical example, involving two sibling paragraphs:</p><pre></pre><p>Instead of sitting 48px apart, their 24px margins merge together, occupying the same space!</p><p>This idea might sound simple, but if you&#39;ve been writing CSS for a while, you&#39;ve almost certainly been surprised when margins either don&#39;t collapse, or they collapse in weird and unexpected ways. In real-world projects, all kinds of circumstances can complicate matters.</p><p>The good news is that once we understand the rules behind this notoriously-confusing mechanism, it becomes a lot clearer, and a lot less surprising ✨.</p><p>In this tutorial, we&#39;re going to dive deep into the details and figure it out. No more being bewildered!</p><p>When margin-collapse was added to the CSS specification, the language designers made a curious choice: horizontal margins shouldn&#39;t collapse.</p><p>In the early days, CSS wasn&#39;t intended to be used for layouts. The people writing the spec were imagining headings and paragraphs, not columns and sidebars.</p><p>So that&#39;s our first rule: <em>only vertical margins collapse.</em></p><p>Here&#39;s a live-editable example. If you&#39;re using a desktop browser, pop open the developer tools and inspect the margins for yourself:</p><div><div><header><h3>Code Playground</h3></header><div><div><div><div translate="no"><p>CSS</p><p><label><div><pre aria-hidden="true"><p><span>p</span><span> </span><span>{</span><span></span></p><p><span>  </span><span>display</span><span>:</span><span> inline-block</span><span>;</span><span></span></p><p><span>  </span><span>margin-left</span><span>:</span><span> </span><span>24</span><span>px</span><span>;</span><span></span></p><p><span>  </span><span>margin-right</span><span>:</span><span> </span><span>24</span><span>px</span><span>;</span><span></span></p><p><span></span><span>}</span></p></pre></div></label></p></div></div></div></div></div></div><p>It is somewhat common to use the <code>&lt;br /&gt;</code> tag (a line-break) to increase space between block elements.</p><pre></pre><p>Regrettably, this has an adverse effect on our margins:</p><p>The <code>&lt;br /&gt;</code> tag is invisible and empty, but <em>any</em> element between two others will block margins from collapsing. Elements need to be adjacent in the DOM for their margins to collapse<span></span>.</p><p>What about when the margins are asymmetrical? Say, the top element wants 72px of space below, while the bottom element only needs 24px?</p><p>The bigger number wins.</p><p>This one feels intuitive if you think of margin as &#34;personal space&#34;. In this moment in history, it&#39;s socially responsible to keep 6 feet apart. If someone wants even more space — say, 8 feet — we&#39;ll need to keep 8 feet apart in order to satisfy both personal-space requirements.</p><p>Alright, here&#39;s where it starts to get weird. Consider the following code:</p><pre></pre><p>We&#39;re dropping our first paragraph into a containing <code>&lt;div&gt;</code>, but the margins will still collapse!</p><p>It turns out that many of us have <strong>a misconception about how margins work.</strong></p><p>Margin is meant to increase the distance between siblings. It is <em>not</em> meant to increase the gap between a child and its parent&#39;s bounding box; that&#39;s what padding is for.</p><p>Margin will always try and increase distance between siblings, <strong>even if it means <em>transferring</em> margin to the parent element!</strong> In this case, the effect is the same as if we had applied the margin to the parent <code>&lt;div&gt;</code>, not the child <code>&lt;p&gt;</code>.</p><p>“But that can&#39;t be!”, I can hear you saying. “I&#39;ve used margin before to increase the distance between the parent and the first child!”</p><p>Margins only collapse when they&#39;re <em>touching</em>. If there&#39;s any sort of gap or barrier between margins, they won&#39;t collapse.</p><p>Here are some examples of nested margins that don&#39;t collapse.</p><p>You can think of padding/border as a sort of wall; if it sits between two margins, they can&#39;t collapse, because there&#39;s an obstruction in the way.</p><p>This visualization shows padding, but the same thing happens with border.</p><p>Even 1px of padding or border will cause margins not to collapse.</p><p>So here&#39;s a curious one. Giving an element a fixed height can prevent certain margins from collapsing:</p><p>The empty space between the two margins stops them from collapsing, like a moat filled with hungry piranhas.</p><p>Note that this is on a <em>per-side basis</em>. In this example, the child&#39;s <em>top</em> margin could still collapse. But because there&#39;s some empty space below the child, its bottom margin will never collapse.</p><p>The <code>overflow</code> property creates a <em>scroll container</em>, and margins can&#39;t collapse across scroll container boundaries.</p><p>Getting into scroll containers would be too large of a detour to tackle this scenario in this blog post, though it&#39;s something we cover in depth in my <a href="https://css-for-js.dev/" rel="noopener noreferrer" target="_blank">CSS course</a>!</p></article></div>
  </body>
</html>
