<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://timsh.org/claude-inside-docker/">Original</a>
    <h1>Switching to Claude Code and VSCode Inside Docker</h1>
    
    <div id="readability-page-1" class="page"><div>

            

            <div>
                <p><a href="https://www.fractalkitty.com/author/tim/">
                                <img src="https://www.fractalkitty.com/content/images/size/w160/2025/01/wg21-2.jpg" alt="tim"/>
                            </a>
                </p>
                <div>
                    
                    <p><time datetime="2025-07-11">11 Jul 2025</time>
                            <span><span>—</span> 7 min read</span>
                    </p>
                </div>
            </div>

                <figure>
        <img srcset="/content/images/size/w320/2025/07/new-d.png 320w,
                    /content/images/size/w600/2025/07/new-d.png 600w,
                    /content/images/size/w960/2025/07/new-d.png 960w,
                    /content/images/size/w1200/2025/07/new-d.png 1200w,
                    /content/images/size/w2000/2025/07/new-d.png 2000w" sizes="(max-width: 1200px) 100vw, 1120px" src="https://www.fractalkitty.com/content/images/size/w1200/2025/07/new-d.png" alt="Switching to Claude Code + VSCode inside Docker"/>
    </figure>

        </div><section>
            <p>Last night I finished a transition from my old AI coding setup I&#39;ve been using for a while to running Claude Code in Docker using VSCode&#39;s &#34;Dev Container&#34; feature. </p><h2 id="before-and-why">Before and why</h2><p>Until yesterday I&#39;ve been using such setup: </p><ul><li>ChatGPT Plus 20$ subscription for occasional chats mostly unrelated to code, except for quickies and desperate attempts to feed o3 a bunch of code that Claude can&#39;t crack and get it all solved (mostly unsuccessful). </li><li>Cursor Pro for additional 20$ (or how do they call it these days?) - for all &#34;serious&#34; coding. </li></ul><p>Which works all right, is convenient (been stuck with Cursor since August &#39;24 and GPT since &#39;23 without actively seeking an alternative), but has a couple issues that started to bug me recently.</p><h3 id="issue-1-im-greedy-and-i-want-my-responses-fast">Issue 1: I&#39;m greedy and I want my responses fast</h3><p>Before Cursor went into drain-users stage recently, I did not use up all 500 requests / month not a single time while working on 1-2 projects during my free time (approx. 40-60 hours a month). </p><p>But after their update removing the 500 requests limit &#34;so you can enjoy unlimited requests to almost any model&#34;, I&#39;ve been extremely upset by Cursor due to their inadequate rate limits. </p><p>There is an option to switch back to a proprietary and seemingly not as profitable 500 requests pricing mode, but I don&#39;t think it&#39;ll last much longer.  Or use the free version and go out for a smoke break after every request.</p><p>Which led me to think about my spending and the satisfaction I get in return: is it still worth 40$ or is there a better way? </p><p>Well, for now I&#39;ve settled with Claude 20$ subscription and consider it a better fit for my use case for a couple of reasons: </p><ol><li>$20 is less than 40$</li><li>I still get to send a pic of a shelf with various cleaning products to some chat app on my phone and ask &#34;Which of these do I need to do X?&#34;, which works surprisingly well almost all the time</li><li>I have a similar-or-even-better web chat experience to work on stuff unrelated to code</li><li>Finally, and most importantly – I get Claude Code with:<ol><li>reasonable limits </li><li>clear token spending indication </li><li>everybody constantly says Claude Code rocks, right?</li><li>I like cli stuff in general</li><li>vs code integration makes the IDE experience essentially the same (or even a bit better) </li></ol></li></ol><p>Ok, looks like I&#39;m settled for now, end of story. Or what else? </p><h3 id="issue-2-im-trying-to-be-realistic-about-ai-agent-security">Issue 2: I&#39;m trying to be realistic about AI Agent security</h3><p>Simply put: I believe running an AI Agent that has access to your entire file system, terminal and secrets is dangerous and will eventually lead to some problems. </p><p>Think of it as if you gave access to your computer to a cheap overseas freelance dev who you don&#39;t really know and can only chat with. How does that sound? </p><p>I stumble upon llm security-related stuff every day and occasionally read some of it. And generally, the situation is not getting better. </p><p>For instance, I&#39;ve seen around 10 posts about very serious vulnerabilities in MCPs like <a href="https://www.cyberark.com/resources/threat-research-blog/poison-everywhere-no-output-from-your-mcp-server-is-safe?ref=timsh.org" rel="noreferrer">this one,</a> a few sad stories where cursor decided to delete something useful like all Ableton projects using <code>rm -rf</code> , and even threads saying that Claude <a href="https://forum.cursor.com/t/important-claude-has-learned-how-to-jailbreak-cursor/96702/2?ref=timsh.org" rel="noreferrer">learned to bypass Cursor built-in command blacklist</a> in Yolo mode.</p><p>Basically, you have a choice: either accept each single command manually (which I think is a reasonable approach but I&#39;m too lazy) or trust the above mentioned freelancer with everything you have and hope that some barriers will stop it and nothing bad will happen. </p><p>Or are there any other options?</p><h2 id="now-and-why">Now and why</h2><p>Ok, so I want to use Claude Code, but at the same time want to restrict it somehow so it can&#39;t fuck up my entire computer. </p><p>What you get from that: </p><ul><li>Claude can only access files from inside the container or in the provided volumes, mounted or not</li><li>It also most certainly can&#39;t break anything outside the container – worst case scenario is the container breaks and stops</li><li>Since the container has isolated environment, Claude doesn&#39;t have any access to your local secrets (like your SSH key) and won&#39;t be able to use any external integrations without you knowing and before you give it access </li></ul><p>Ok, sounds cool. Is it easy to set up and use? </p><p>Yes! In fact, if you already have Docker and VSCode installed locally, it will take you around 5 minutes to get started. </p><h2 id="getting-started-and-finishing-right-away">Getting started (and finishing right away)</h2><p>All right, here&#39;s what you&#39;ll need to have installed and set up in order to complete this short guide: </p><ol><li>Docker and VSCode installed</li><li>Claude paid for (whatever plan works for you)</li><li>You use Github (not relevant for the basic setup)</li></ol><p>Let&#39;s assume you have all of these and move on. </p><p>You&#39;ll need to create a folder that will serve as a root folder for both Claude and your project(s). Inside, you&#39;ll need to create a folder called <code>.devcontainer</code>, and inside of it a file <code>devcontainer.json</code>. </p><p>Copy the contents of <a href="https://github.com/tim-sha256/claude-in-docker/blob/main/.devcontainer/devcontainer.json?ref=timsh.org" rel="noreferrer">the file from Github</a> or just simply clone the repo I created and it will have both the needed structure and the file:</p><p>Open the root folder (<code>claude-in-docker</code> if you cloned the repo) in VSCode, and boom – this modal window should show up in the corner: </p><figure><img src="https://timsh.org/content/images/2025/07/Screenshot-2025-07-11-at-15.40.41.png" alt="" loading="lazy" width="940" height="256" srcset="https://timsh.org/content/images/size/w600/2025/07/Screenshot-2025-07-11-at-15.40.41.png 600w, https://timsh.org/content/images/2025/07/Screenshot-2025-07-11-at-15.40.41.png 940w" sizes="(min-width: 720px) 720px"/></figure><p>Click &#34;Reopen in Container&#34; and wait for some time. And that&#39;s it! You can check that Claude Code is installed by running <code>claude</code> command in the opened terminal: </p><figure><img src="https://timsh.org/content/images/2025/07/Screenshot-2025-07-11-at-15.42.15.png" alt="" loading="lazy" width="986" height="254" srcset="https://timsh.org/content/images/size/w600/2025/07/Screenshot-2025-07-11-at-15.42.15.png 600w, https://timsh.org/content/images/2025/07/Screenshot-2025-07-11-at-15.42.15.png 986w" sizes="(min-width: 720px) 720px"/></figure><h3 id="final-touch">Final touch</h3><p>Since you&#39;re in an isolated environment, if you try to git clone / pull / push e.t.c you&#39;ll run into an error, since your container doesn&#39;t include any credentials and doesn&#39;t have access to your local SSH keys (if you use one of them for Github authentication locally). </p><p>First thing that comes to mind is to generate a separate SSH key inside of the container and add it to your account, but I decided to go the other way and use Fine-Grained access token. </p><p>After a brief googling session I found the option that suits my (and probably your) needs:</p><ol><li>Go to <a href="https://github.com/settings/personal-access-tokens/new?ref=timsh.org">https://github.com/settings/personal-access-tokens/new</a> and create a new fine-grained token. Give it access to whichever repositories you want. </li><li>In the permissions settings, open the &#34;Repository permissions&#34; toggle, scroll to &#34;Contents&#34; and select &#34;Read and write&#34; access level. </li></ol><figure><img src="https://timsh.org/content/images/2025/07/Screenshot-2025-07-11-at-15.55.53.png" alt="" loading="lazy" width="1534" height="428" srcset="https://timsh.org/content/images/size/w600/2025/07/Screenshot-2025-07-11-at-15.55.53.png 600w, https://timsh.org/content/images/size/w1000/2025/07/Screenshot-2025-07-11-at-15.55.53.png 1000w, https://timsh.org/content/images/2025/07/Screenshot-2025-07-11-at-15.55.53.png 1534w" sizes="(min-width: 720px) 720px"/></figure><p>This single permission is enough for basic git operations (clone / pull / push e.t.c) and you&#39;ll probably never need any additional permissions if you&#39;re not some git guru. </p><p>Nice! Now Claude doesn&#39;t have an option of fucking up your GitHub account for fun. In order to add these credentials and use them in the future, you could simply clone some private repo you have access to by running this command: </p><pre><code>git clone https://&lt;USERNAME&gt;:&lt;TOKEN&gt;@github.com/&lt;USERNAME&gt;/&lt;REPO-NAME&gt;.git</code></pre><p>And then after cloning cd into the project folder and run this in order to save your credentials:</p><pre><code>git remote set-url origin https://&lt;USERNAME&gt;:&lt;TOKEN&gt;@github.com/&lt;USERNAME&gt;/&lt;REPO-NAME&gt;.git</code></pre><p>Hooray! You&#39;re all set to go and code with Claude, probably with lesser risks than before (or else why would you read this up until this point). </p><h2 id="conclusion">Conclusion</h2><p>Thanks for reading! A couple notes: </p><ul><li>I did not test 1001 different approaches and selected the best possible one. There might be a better (cheaper, more secure, yada-yada) way of doing this, though I thing this should be good enough for most people. </li><li>If you know what could be improved in this approach or guide – please consider leaving a comment below or emailing me at <a href="mailto:hello@timsh.org" rel="noreferrer">hello@timsh.org</a>.</li></ul>
        </section></div>
  </body>
</html>
