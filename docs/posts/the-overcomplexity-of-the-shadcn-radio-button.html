<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://paulmakeswebsites.com/writing/shadcn-radio-button/">Original</a>
    <h1>The Overcomplexity of the Shadcn Radio Button</h1>
    
    <div id="readability-page-1" class="page"><div>
  

  <p>The other day I was asked to update the visual design of radio buttons in a web
app at work. I figured it couldn&#39;t be that complicated. It&#39;s just a radio button
right?</p>
<pre><code><span><span><span>&lt;</span>input</span> <span>type</span><span><span>=</span><span>&#34;</span>radio<span>&#34;</span></span> <span>name</span><span><span>=</span><span>&#34;</span>beverage<span>&#34;</span></span> <span>value</span><span><span>=</span><span>&#34;</span>coffee<span>&#34;</span></span> <span>/&gt;</span></span></code></pre>
<p>Boom! Done. Radio buttons are a built-in HTML element. They&#39;ve been around for
30 years. The browser makes it easy. Time for a coffee.</p>
<h2>Enter Shadcn</h2>
<p>I dug into our codebase and realized we were using two React components from
<a href="https://ui.shadcn.com/">Shadcn</a> to power our radio buttons: <code>&lt;RadioGroup&gt;</code> and
<code>&lt;RadioGroupItem&gt;</code>.</p>
<p>For those unfamiliar with Shadcn, it&#39;s a UI framework that provides a bunch of
prebuilt UI components for use in your websites. Unlike traditional UI
frameworks like Bootstrap, you don&#39;t import it with a script tag or
<code>npm install</code>. Instead you run a command that copies the components into your
codebase.</p>
<p>Here&#39;s the code that was exported from Shadcn into our project:</p>
<pre><code><span>&#34;use client&#34;</span><span>;</span>

<span>import</span> <span>*</span> <span>as</span> React <span>from</span> <span>&#34;react&#34;</span><span>;</span>
<span>import</span> <span>*</span> <span>as</span> RadioGroupPrimitive <span>from</span> <span>&#34;@radix-ui/react-radio-group&#34;</span><span>;</span>
<span>import</span> <span>{</span> CircleIcon <span>}</span> <span>from</span> <span>&#34;lucide-react&#34;</span><span>;</span>

<span>import</span> <span>{</span> cn <span>}</span> <span>from</span> <span>&#34;@/lib/utils&#34;</span><span>;</span>

<span>function</span> <span>RadioGroup</span><span>(</span><span>{</span>
  className<span>,</span>
  <span>...</span>props
<span>}</span><span>:</span> React<span>.</span>ComponentProps<span>&lt;</span><span>typeof</span> RadioGroupPrimitive<span>.</span>Root<span>&gt;</span><span>)</span> <span>{</span>
  <span>return</span> <span>(</span>
    <span><span><span>&lt;</span><span>RadioGroupPrimitive.Root</span></span>
      <span>data-slot</span><span><span>=</span><span>&#34;</span>radio-group<span>&#34;</span></span>
      <span>className</span><span><span>=</span><span>{</span><span>cn</span><span>(</span><span>&#34;grid gap-3&#34;</span><span>,</span> className<span>)</span><span>}</span></span>
      <span><span>{</span><span>...</span>props<span>}</span></span>
    <span>/&gt;</span></span>
  <span>)</span><span>;</span>
<span>}</span>

<span>function</span> <span>RadioGroupItem</span><span>(</span><span>{</span>
  className<span>,</span>
  <span>...</span>props
<span>}</span><span>:</span> React<span>.</span>ComponentProps<span>&lt;</span><span>typeof</span> RadioGroupPrimitive<span>.</span>Item<span>&gt;</span><span>)</span> <span>{</span>
  <span>return</span> <span>(</span>
    <span><span><span>&lt;</span><span>RadioGroupPrimitive.Item</span></span>
      <span>data-slot</span><span><span>=</span><span>&#34;</span>radio-group-item<span>&#34;</span></span>
      <span>className</span><span><span>=</span><span>{</span><span>cn</span><span>(</span>
        <span>&#34;border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50&#34;</span><span>,</span>
        className<span>,</span>
      <span>)</span><span>}</span></span>
      <span><span>{</span><span>...</span>props<span>}</span></span>
    <span>&gt;</span></span><span>
      </span><span><span><span>&lt;</span><span>RadioGroupPrimitive.Indicator</span></span>
        <span>data-slot</span><span><span>=</span><span>&#34;</span>radio-group-indicator<span>&#34;</span></span>
        <span>className</span><span><span>=</span><span>&#34;</span>relative flex items-center justify-center<span>&#34;</span></span>
      <span>&gt;</span></span><span>
        </span><span><span><span>&lt;</span><span>CircleIcon</span></span> <span>className</span><span><span>=</span><span>&#34;</span>fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2<span>&#34;</span></span> <span>/&gt;</span></span><span>
      </span><span><span><span>&lt;/</span><span>RadioGroupPrimitive.Indicator</span></span><span>&gt;</span></span><span>
    </span><span><span><span>&lt;/</span><span>RadioGroupPrimitive.Item</span></span><span>&gt;</span></span>
  <span>)</span><span>;</span>
<span>}</span>

<span>export</span> <span>{</span> RadioGroup<span>,</span> RadioGroupItem <span>}</span><span>;</span></code></pre>
<p>Woof... 3 imports and 45 lines of code. And it&#39;s importing a third party icon
library just to render a circle. (Who needs CSS <code>border-radius</code> or the SVG
<code>&lt;circle&gt;</code> element when you can add a third party dependency instead?)</p>
<p>All of the styling is done by the 30 different Tailwind classes in the markup. I
should probably just tweak those to fix the styling issues.</p>
<p>But now I&#39;m distracted, annoyed, and curious. Where&#39;s the actual <code>&lt;input&gt;</code>?
What&#39;s the point of all this? Let&#39;s dig a little deeper.</p>
<h2>Enter Radix</h2>
<p>The Shadcn components import components from another library called Radix. For
those unfamiliar with Radix, it&#39;s a UI framework that provides a bunch of
prebuilt UI components...</p>
<p>Wait a second! Isn&#39;t that what I just said about Shadcn? What gives? Why do we
need both? Let&#39;s see what the Radix docs say:</p>
<blockquote>
<p>Radix Primitives is a low-level UI component library with a focus on
accessibility, customization and developer experience. You can use these
components either as the base layer of your design system, or adopt them
incrementally.</p>
</blockquote>
<p>So Radix provides unstyled components, and then Shadcn adds styles on top of
that. How does Radix work? You can see for yourself on GitHub:
<a href="https://github.com/radix-ui/primitives/blob/main/packages/react/radio-group/src/radio.tsx">https://github.com/radix-ui/...</a></p>
<p>This is getting even more complicated: 215 lines of React code importing 7 other
files. But what does it actually do?</p>
<h2>Taking a look in the browser</h2>
<p>Let&#39;s look in the browser dev tools to see if we can tell what&#39;s going on.</p>
<p><img src="https://paulmakeswebsites.com/writing/shadcn-radio-button/shadcn-radio-button.png" alt="A whole bunch of markup from browser dev tools. It renders a button wrapping a span wrapping a circle. There&#39;s also a hidden input and a whole bunch of attributes."/></p>
<p>Okay, instead of a radio input it&#39;s rendering a button with an SVG circle inside
it? Weird.</p>
<p>It&#39;s also using
<a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA">ARIA attributes</a>
to tell screen readers and other assistive tools that the button is actually a
radio button.</p>
<p>ARIA attributes allow you to change the semantic meaning of HTML elements. For
example, you can say that a button is actually a radio button. (If you wanted to
do that for some strange reason.)</p>
<p>Interestingly, here&#39;s the
<a href="https://www.w3.org/TR/using-aria/#rule1">First Rule of ARIA use</a>:</p>
<blockquote>
<p>If you <em>can</em> use a native HTML element or attribute with the semantics and
behavior you require <strong>already built in</strong>, instead of re-purposing an element
and adding an ARIA role, state or property to make it accessible, <strong>then do
so</strong>.</p>
</blockquote>
<p>Despite that, Radix is repurposing an element and adding an ARIA role instead of
using a native HTML element.</p>
<p>Finally, the component also includes a hidden <code>&lt;input type=&#34;radio&#34;&gt;</code> but only if
it&#39;s used inside of a <code>&lt;form&gt;</code> element. Weird!</p>
<p>This is getting pretty complicated to just render a radio button. Why would you
want to do this?</p>
<h2>Styling radio buttons is hard (Wait, is it?)</h2>
<p>My best guess is that Radix rebuilds the radio button from scratch in order to
make it easier to style. Radio buttons used to be difficult to style
consistently across browsers. But for several years we&#39;ve been able to style
radio buttons however we want using a few CSS tools:</p>
<ul>
<li><code>appearance: none</code> removes the radio button&#39;s default styling allowing us to
do whatever we want.</li>
<li>We can use the <code>::before</code> pseudo-element to render a &#34;dot&#34; inside of the
unstyled radio button.</li>
<li>We can use the <code>:checked</code> pseudo-class to show and hide that dot depending on
whether the radio button is checked.</li>
<li><code>border-radius: 50%</code> makes things round.</li>
</ul>
<p>Here&#39;s an example implementation:</p>
<pre><code><span>input[type=&#34;radio&#34;]</span> <span>{</span>
  
  <span>appearance</span><span>:</span> none<span>;</span>
  <span>margin</span><span>:</span> 0<span>;</span>

  
  <span>border</span><span>:</span> 1px solid black<span>;</span>
  <span>background</span><span>:</span> white<span>;</span>
  <span>border-radius</span><span>:</span> 50%<span>;</span>

  
  <span>display</span><span>:</span> inline-grid<span>;</span>
  <span>place-content</span><span>:</span> center<span>;</span>

  
  <span>&amp;::before</span> <span>{</span>
    <span>content</span><span>:</span> <span>&#34;&#34;</span><span>;</span>
    <span>width</span><span>:</span> 0.75rem<span>;</span>
    <span>height</span><span>:</span> 0.75rem<span>;</span>
    <span>border-radius</span><span>:</span> 50%<span>;</span>
  <span>}</span>

  
  <span>&amp;:checked::before</span> <span>{</span>
    <span>background</span><span>:</span> black<span>;</span>
  <span>}</span>
<span>}</span></code></pre>
<p>This doesn&#39;t require any dependencies, JavaScript, or ARIA roles. It&#39;s just an
input element with some styles. (You can do the same thing with Tailwind if
that&#39;s your jam.)</p>
<p>It does require knowledge of CSS but this isn&#39;t some arcane secret.
<a href="https://www.google.com/search?q=how+to+style+a+radio+button">Googling &#34;how to style a radio button&#34;</a>
shows several blog posts explaining these techniques. You may say this is a lot
of CSS, but the Shadcn component we were using had 30 Tailwind classes!</p>
<h2>I&#39;m not trying to convince you to write your own component styles</h2>
<p>Look, I get it. You&#39;ve got a lot going on. You&#39;re not big on CSS. You just want
to grab some prebuilt components so you can focus on the actual problem you&#39;re
solving.</p>
<p>I totally understand why people reach for component libraries like Shadcn and I
don&#39;t blame them at all. But I wish these component libraries would keep things
simple and reuse the built-in browser elements where possible.</p>
<h2>Who cares?</h2>
<p>Web development is hard. There&#39;s inherent complexity in building quality sites
that solve problems and work well across a wide range of devices and browsers.</p>
<p>But some things don&#39;t have to be hard. Browsers make things like radio buttons
easy. Let&#39;s not overcomplicate it.</p>
<p>To understand how our radio buttons work I need to understand two separate
component libraries and hundreds of lines of React.</p>
<p>Website visitors need to wait for JavaScript to load, parse, and run in order to
be able to toggle a radio button. (In my testing, just adding these components
added several KB of JS to a basic app.)</p>
<h2>It&#39;s just a radio button</h2>
<p>Why am I making such a big deal out of this? It&#39;s just a radio button.</p>
<p>But these small decisions add up to more complexity, more cognitive load, more
bugs, and worse website performance.</p>
<h2>We have strayed so far from the light</h2>
<p>Look at it. It&#39;s beautiful:</p>
<pre><code><span><span><span>&lt;</span>input</span> <span>type</span><span><span>=</span><span>&#34;</span>radio<span>&#34;</span></span> <span>name</span><span><span>=</span><span>&#34;</span>beverage<span>&#34;</span></span> <span>value</span><span><span>=</span><span>&#34;</span>coffee<span>&#34;</span></span> <span>/&gt;</span></span></code></pre>


  <div>
    <h3>Fancy a game?</h3>
    <p>Play my free daily word puzzle, <a href="https://tiledwords.com">Tiled Words</a>!</p>
  </div>
</div></div>
  </body>
</html>
