<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.stevegattuso.me/2024/03/23/comments-section.html">Original</a>
    <h1>Comments on a static website, powered by Mastodon</h1>
    
    <div id="readability-page-1" class="page"><p>
    Published on Mar 23rd, 2024.
    
  </p><div>
    

    <p>Iâ€™ve been wanting to experiment with adding a comments section to posts and pages on my website for a while now. Rather than using one of those comments-as-a-service companies, I figured a lighter-weight solution would be re-using a social tool Iâ€™m already invested in: Mastodon.</p>

<p>Iâ€™m far from the first person who has figured out how to do this. I did some research and found a lot of implementations like <a href="https://cassidyjames.com/blog/fediverse-blog-comments-mastodon/#comments">this one</a> from Cassidy Jamesâ€™ blog. The general idea is to have a visitorâ€™s browser fetch the latest replies from the public Mastodon API then render in the results with JavaScript. The results look great, but I wanted to avoid using JavaScript on my site also disliked the possibility of DDoSing my Mastodon instance with API requests if I ever have a popular blog post.</p>

<p>Instead, I threw together <a href="https://git.sr.ht/~vesto/gists/tree/main/item/mastodon_comments.rb">this Jekyll plugin</a> which fetches Mastodon replies at build-time and allows me to render them into the siteâ€™s outputted HTML. I think this is a lighter weight approach for both visitors and my Mastodon server. It comes at the cost of new comments only appearing when I re-generate my website, but I can alleviate this pretty easily with a nightly cron job.</p>

<p>Iâ€™ve had success with this using this technique for the <a href="https://webring.hackny.org/planet.html">hackNY webring</a>, which fetches webring membersâ€™ blog feeds nightly and outputs a unified feed onto a GitHub-hosted static website<sup id="fnref:0" role="doc-noteref"><a href="#fn:0" rel="footnote">1</a></sup>. Itâ€™s a clever way of keeping the simplicity of a static website while still serving dynamic content.</p>

<p>As for my comments implementation, Iâ€™ve enabled them for this page and would love it if you could help me test it by <a href="https://merveilles.town/@vesto/112145414252205604">replying to this post</a>. Iâ€™m sure there are bugs that still need to be ironed out so the more data I can get the better ðŸ˜€.</p>



  </div></div>
  </body>
</html>
