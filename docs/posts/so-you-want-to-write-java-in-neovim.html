<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://ptrtojoel.dev/posts/so-you-want-to-write-java-in-neovim/">Original</a>
    <h1>So you want to write Java in Neovim</h1>
    
    <div id="readability-page-1" class="page"><div>
    <article>
        

        

        <section>
            <p>Note: I plan on keeping this post updated if I need to add more content or change something</p>
<p><img src="https://ptrtojoel.dev/posts/so-you-want-to-write-java-in-neovim/neovim-test.png" alt="alt text"/></p>
<p>I have been doing Java in Neovim for quite a while at work, and itâ€™s been a very pleasant experience. As Neovim usage grows (especially amongst the younger crowd), I want to share how I do it.</p>
<p>I think historically it&#39;s been considered a painful experience, but with guidance, it can be very straightforward!</p>
<p>Iâ€™ll preface this by saying that if Neovim isnâ€™t your primary editor, you should first try an IDE specifically for Java (they should all have a Vim plugin):</p>
<ul>
<li>Eclipse</li>
<li>IntelliJ</li>
<li>Apache Netbeans</li>
</ul>
<p>If Neovim is your primary editor, you probably hate opening *insert IDE that turns you into snail* for a specific language, and so did I.</p>

<p>Java has one LSP option for Neovim, and thatâ€™s JDTLS (Java Development Tools Language Server) by Eclipse. You should read the project README for a high-level overview on it (including features): <a href="https://github.com/eclipse-jdtls/eclipse.jdt.ls">JDTLS GitHub</a></p>
<p>Itâ€™s a great LSP for Java, and I think itâ€™s all you need to work with Java projects. My personal workflow usually involves one tmux window with a project open and another window handling the compiling, testing etc</p>
<p><img src="https://ptrtojoel.dev/posts/so-you-want-to-write-java-in-neovim/neovim-k.png" alt="alt text"/></p>
<p>To use JDTLS in Neovim, there are two plugins you can choose from, and which you decide on depends on your preferences.</p>

<p>If you&#39;re happy accepting out-of-the-box, all-in-one setups, then <a href="https://github.com/nvim-java/nvim-java">nvim-java</a> might be for you.
It attempts to be a comprehensive solution with popular defaults, and be hassle-free when it comes to LSP, debugging, testing setups.
Itâ€™s not completely flexible, so if you need more control, you should try the next option.</p>

<p>I expect the majority to fit here, and <a href="https://github.com/mfussenegger/nvim-jdtls">nvim-jdtls</a> is the go-to Java plugin for LSP support in Neovim. You have full access to configure JDTLS, and I highly recommend reading through the available options.</p>
<p>Just remember to install <strong>JDTLS</strong> via <strong>Mason</strong>.</p>
<p>Sometimes you will need to provide a reference JAR that the LSP can hook into loading. I downloaded a Lombok JAR and added it at the JDTLS install path (you will see this in my nvim-jdtls config below), and I at least know this had to be done for Playwright under &#39;referencedLibraries&#39;.</p>

<p>Debugging can be done inside Neovim, but again, keep in mind that you <em>may</em> have a better experience in a Java-focused IDE.</p>
<p>I recommend installing <a href="https://github.com/mfussenegger/nvim-dap">nvim-dap</a> and <a href="https://github.com/rcarriga/nvim-dap-ui">nvim-dap-ui</a>.</p>
<p>You will need to install <a href="https://github.com/microsoft/java-debug">java-debug-adapter</a> from Mason OR download it and reference it in the lsp config (for nvim-jdtls only).</p>
<p><img src="https://ptrtojoel.dev/posts/so-you-want-to-write-java-in-neovim/neovim-dap.png" alt="alt text"/></p>

<p>Working with tests inside Neovim is also possible, follows a similar setup to the above.</p>
<p>You will need to install <a href="https://github.com/microsoft/vscode-java-test">java-test</a> from Mason OR download it and reference it in the lsp config (for nvim-jdtls only).</p>

<p>I will show what I have as a point of reference:</p>
<p>I imagine you are also using treesitter, lspzero etc.</p>
<p><strong>JDTLS</strong></p>
<pre data-lang="lua"><code data-lang="lua"><span>local </span><span>java_cmds </span><span>= </span><span>vim</span><span>.api.</span><span>nvim_create_augroup</span><span>(&#39;</span><span>java_cmds</span><span>&#39;, { </span><span>clear </span><span>= </span><span>true </span><span>})
</span><span>local </span><span>cache_vars </span><span>= {}
</span><span>
</span><span>local </span><span>root_files </span><span>= {
</span><span>    &#39;</span><span>.git</span><span>&#39;,
</span><span>    &#39;</span><span>mvnw</span><span>&#39;,
</span><span>    &#39;</span><span>gradlew</span><span>&#39;,
</span><span>    &#39;</span><span>pom.xml</span><span>&#39;,
</span><span>    &#39;</span><span>build.gradle</span><span>&#39;,
</span><span>    &#39;</span><span>build.sbt</span><span>&#39;
</span><span>}
</span><span>
</span><span>local </span><span>features </span><span>= {
</span><span>    </span><span>-- change this to `true` to enable codelens
</span><span>    </span><span>codelens </span><span>= </span><span>true</span><span>,
</span><span>
</span><span>    </span><span>-- change this to `true` if you have `nvim-dap`,
</span><span>    </span><span>-- `java-test` and `java-debug-adapter` installed
</span><span>    </span><span>debugger </span><span>= </span><span>true</span><span>,
</span><span>}
</span><span>
</span><span>local function </span><span>get_jdtls_paths</span><span>()
</span><span>    </span><span>if </span><span>cache_vars</span><span>.paths </span><span>then
</span><span>        </span><span>return </span><span>cache_vars</span><span>.paths
</span><span>    </span><span>end
</span><span>
</span><span>    </span><span>local </span><span>path </span><span>= {}
</span><span>
</span><span>    </span><span>path</span><span>.data_dir = </span><span>vim</span><span>.fn.</span><span>stdpath</span><span>(&#39;</span><span>cache</span><span>&#39;) .. &#39;</span><span>/nvim-jdtls</span><span>&#39;
</span><span>
</span><span>    </span><span>local </span><span>jdtls_install </span><span>= </span><span>require</span><span>(&#39;</span><span>mason-registry</span><span>&#39;)
</span><span>        .</span><span>get_package</span><span>(&#39;</span><span>jdtls</span><span>&#39;)
</span><span>        :</span><span>get_install_path</span><span>()
</span><span>
</span><span>    </span><span>path</span><span>.java_agent = </span><span>jdtls_install </span><span>.. &#39;</span><span>/lombok.jar</span><span>&#39;
</span><span>    </span><span>path</span><span>.launcher_jar = </span><span>vim</span><span>.fn.</span><span>glob</span><span>(</span><span>jdtls_install </span><span>.. &#39;</span><span>/plugins/org.eclipse.equinox.launcher_*.jar</span><span>&#39;)
</span><span>
</span><span>    </span><span>if </span><span>vim</span><span>.fn.</span><span>has</span><span>(&#39;</span><span>mac</span><span>&#39;) == </span><span>1 </span><span>then
</span><span>        </span><span>path</span><span>.platform_config = </span><span>jdtls_install </span><span>.. &#39;</span><span>/config_mac</span><span>&#39;
</span><span>    </span><span>elseif </span><span>vim</span><span>.fn.</span><span>has</span><span>(&#39;</span><span>unix</span><span>&#39;) == </span><span>1 </span><span>then
</span><span>        </span><span>path</span><span>.platform_config = </span><span>jdtls_install </span><span>.. &#39;</span><span>/config_linux</span><span>&#39;
</span><span>    </span><span>elseif </span><span>vim</span><span>.fn.</span><span>has</span><span>(&#39;</span><span>win32</span><span>&#39;) == </span><span>1 </span><span>then
</span><span>        </span><span>path</span><span>.platform_config = </span><span>jdtls_install </span><span>.. &#39;</span><span>/config_win</span><span>&#39;
</span><span>    </span><span>end
</span><span>
</span><span>    </span><span>path</span><span>.bundles = {}
</span><span>
</span><span>    </span><span>---
</span><span>    </span><span>-- Include java-test bundle if present
</span><span>    </span><span>---
</span><span>    </span><span>local </span><span>java_test_path </span><span>= </span><span>require</span><span>(&#39;</span><span>mason-registry</span><span>&#39;)
</span><span>        .</span><span>get_package</span><span>(&#39;</span><span>java-test</span><span>&#39;)
</span><span>        :</span><span>get_install_path</span><span>()
</span><span>
</span><span>    </span><span>local </span><span>java_test_bundle </span><span>= </span><span>vim</span><span>.</span><span>split</span><span>(
</span><span>        </span><span>vim</span><span>.fn.</span><span>glob</span><span>(</span><span>java_test_path </span><span>.. &#39;</span><span>/extension/server/*.jar</span><span>&#39;),
</span><span>        &#39;</span><span>\n</span><span>&#39;
</span><span>    )
</span><span>
</span><span>    </span><span>if </span><span>java_test_bundle</span><span>[</span><span>1</span><span>] ~= &#39;&#39; </span><span>then
</span><span>        </span><span>vim</span><span>.</span><span>list_extend</span><span>(</span><span>path</span><span>.bundles, </span><span>java_test_bundle</span><span>)
</span><span>    </span><span>end
</span><span>
</span><span>    </span><span>---
</span><span>    </span><span>-- Include java-debug-adapter bundle if present
</span><span>    </span><span>---
</span><span>    </span><span>local </span><span>java_debug_path </span><span>= </span><span>require</span><span>(&#39;</span><span>mason-registry</span><span>&#39;)
</span><span>        .</span><span>get_package</span><span>(&#39;</span><span>java-debug-adapter</span><span>&#39;)
</span><span>        :</span><span>get_install_path</span><span>()
</span><span>
</span><span>    </span><span>local </span><span>java_debug_bundle </span><span>= </span><span>vim</span><span>.</span><span>split</span><span>(
</span><span>        </span><span>vim</span><span>.fn.</span><span>glob</span><span>(</span><span>java_debug_path </span><span>.. &#39;</span><span>/extension/server/com.microsoft.java.debug.plugin-*.jar</span><span>&#39;),
</span><span>        &#39;</span><span>\n</span><span>&#39;
</span><span>    )
</span><span>
</span><span>    </span><span>if </span><span>java_debug_bundle</span><span>[</span><span>1</span><span>] ~= &#39;&#39; </span><span>then
</span><span>        </span><span>vim</span><span>.</span><span>list_extend</span><span>(</span><span>path</span><span>.bundles, </span><span>java_debug_bundle</span><span>)
</span><span>    </span><span>end
</span><span>
</span><span>    </span><span>---
</span><span>    </span><span>-- Useful if you&#39;re starting jdtls with a Java version that&#39;s
</span><span>    </span><span>-- different from the one the project uses.
</span><span>    </span><span>---
</span><span>    </span><span>path</span><span>.runtimes = {
</span><span>        </span><span>-- Note: the field `name` must be a valid `ExecutionEnvironment`,
</span><span>        </span><span>-- you can find the list here:
</span><span>        </span><span>-- https://github.com/eclipse/eclipse.jdt.ls/wiki/Running-the-JAVA-LS-server-from-the-command-line#initialize-request
</span><span>        </span><span>--
</span><span>        </span><span>-- This example assume you are using sdkman: https://sdkman.io
</span><span>        {
</span><span>            </span><span>name </span><span>= &#39;</span><span>JavaSE-21</span><span>&#39;,
</span><span>            </span><span>path </span><span>= </span><span>vim</span><span>.fn.</span><span>expand</span><span>(&#39;</span><span>~/.sdkman/candidates/java/21.0.2-tem</span><span>&#39;),
</span><span>        },
</span><span>        {
</span><span>            </span><span>name </span><span>= &#39;</span><span>JavaSE-23</span><span>&#39;,
</span><span>            </span><span>path </span><span>= </span><span>vim</span><span>.fn.</span><span>expand</span><span>(&#39;</span><span>~/.sdkman/candidates/java/23-tem</span><span>&#39;),
</span><span>        }
</span><span>
</span><span>    }
</span><span>
</span><span>    </span><span>cache_vars</span><span>.paths = </span><span>path
</span><span>
</span><span>    </span><span>return </span><span>path
</span><span>end
</span><span>
</span><span>local function </span><span>enable_codelens</span><span>(bufnr)
</span><span>    </span><span>pcall</span><span>(</span><span>vim</span><span>.lsp.codelens.refresh)
</span><span>
</span><span>    </span><span>vim</span><span>.api.</span><span>nvim_create_autocmd</span><span>(&#39;</span><span>BufWritePost</span><span>&#39;, {
</span><span>        </span><span>buffer </span><span>= </span><span>bufnr</span><span>,
</span><span>        </span><span>group </span><span>= </span><span>java_cmds</span><span>,
</span><span>        </span><span>desc </span><span>= &#39;</span><span>refresh codelens</span><span>&#39;,
</span><span>        </span><span>callback </span><span>= </span><span>function</span><span>()
</span><span>            </span><span>pcall</span><span>(</span><span>vim</span><span>.lsp.codelens.refresh)
</span><span>        </span><span>end</span><span>,
</span><span>    })
</span><span>end
</span><span>
</span><span>local function </span><span>enable_debugger</span><span>(bufnr)
</span><span>    </span><span>require</span><span>(&#39;</span><span>jdtls</span><span>&#39;).</span><span>setup_dap</span><span>({ </span><span>hotcodereplace </span><span>= &#39;</span><span>auto</span><span>&#39; })
</span><span>    </span><span>require</span><span>(&#39;</span><span>jdtls.dap</span><span>&#39;).</span><span>setup_dap_main_class_configs</span><span>()
</span><span>
</span><span>    </span><span>local </span><span>opts </span><span>= { </span><span>buffer </span><span>= </span><span>bufnr </span><span>}
</span><span>    </span><span>vim</span><span>.keymap.</span><span>set</span><span>(&#39;</span><span>n</span><span>&#39;, &#39;</span><span>&lt;leader&gt;df</span><span>&#39;, &#34;</span><span>&lt;cmd&gt;lua require(&#39;jdtls&#39;).test_class()&lt;cr&gt;</span><span>&#34;, </span><span>opts</span><span>)
</span><span>    </span><span>vim</span><span>.keymap.</span><span>set</span><span>(&#39;</span><span>n</span><span>&#39;, &#39;</span><span>&lt;leader&gt;dn</span><span>&#39;, &#34;</span><span>&lt;cmd&gt;lua require(&#39;jdtls&#39;).test_nearest_method()&lt;cr&gt;</span><span>&#34;, </span><span>opts</span><span>)
</span><span>end
</span><span>
</span><span>local function </span><span>jdtls_on_attach</span><span>(client, bufnr)
</span><span>    </span><span>--vim.lsp.inlay_hint(bufnr, true)
</span><span>    </span><span>if </span><span>features</span><span>.debugger </span><span>then
</span><span>        </span><span>enable_debugger</span><span>(</span><span>bufnr</span><span>)
</span><span>    </span><span>end
</span><span>
</span><span>    </span><span>if </span><span>features</span><span>.codelens </span><span>then
</span><span>        </span><span>enable_codelens</span><span>(</span><span>bufnr</span><span>)
</span><span>    </span><span>end
</span><span>
</span><span>    </span><span>-- The following mappings are based on the suggested usage of nvim-jdtls
</span><span>    </span><span>-- https://github.com/mfussenegger/nvim-jdtls#usage
</span><span>
</span><span>    </span><span>local </span><span>opts </span><span>= { </span><span>buffer </span><span>= </span><span>bufnr </span><span>}
</span><span>    </span><span>vim</span><span>.keymap.</span><span>set</span><span>(&#39;</span><span>n</span><span>&#39;, &#39;</span><span>&lt;A-o&gt;</span><span>&#39;, &#34;</span><span>&lt;cmd&gt;lua require(&#39;jdtls&#39;).organize_imports()&lt;cr&gt;</span><span>&#34;, </span><span>opts</span><span>)
</span><span>    </span><span>vim</span><span>.keymap.</span><span>set</span><span>(&#39;</span><span>n</span><span>&#39;, &#39;</span><span>crv</span><span>&#39;, &#34;</span><span>&lt;cmd&gt;lua require(&#39;jdtls&#39;).extract_variable()&lt;cr&gt;</span><span>&#34;, </span><span>opts</span><span>)
</span><span>    </span><span>vim</span><span>.keymap.</span><span>set</span><span>(&#39;</span><span>x</span><span>&#39;, &#39;</span><span>crv</span><span>&#39;, &#34;</span><span>&lt;esc&gt;&lt;cmd&gt;lua require(&#39;jdtls&#39;).extract_variable(true)&lt;cr&gt;</span><span>&#34;, </span><span>opts</span><span>)
</span><span>    </span><span>vim</span><span>.keymap.</span><span>set</span><span>(&#39;</span><span>n</span><span>&#39;, &#39;</span><span>crc</span><span>&#39;, &#34;</span><span>&lt;cmd&gt;lua require(&#39;jdtls&#39;).extract_constant()&lt;cr&gt;</span><span>&#34;, </span><span>opts</span><span>)
</span><span>    </span><span>vim</span><span>.keymap.</span><span>set</span><span>(&#39;</span><span>x</span><span>&#39;, &#39;</span><span>crc</span><span>&#39;, &#34;</span><span>&lt;esc&gt;&lt;cmd&gt;lua require(&#39;jdtls&#39;).extract_constant(true)&lt;cr&gt;</span><span>&#34;, </span><span>opts</span><span>)
</span><span>    </span><span>vim</span><span>.keymap.</span><span>set</span><span>(&#39;</span><span>x</span><span>&#39;, &#39;</span><span>crm</span><span>&#39;, &#34;</span><span>&lt;esc&gt;&lt;Cmd&gt;lua require(&#39;jdtls&#39;).extract_method(true)&lt;cr&gt;</span><span>&#34;, </span><span>opts</span><span>)
</span><span>    </span><span>vim</span><span>.keymap.</span><span>set</span><span>(&#39;</span><span>n</span><span>&#39;, &#39;</span><span>&lt;leader&gt;pjp</span><span>&#39;, &#34;</span><span>&lt;cmd&gt;lua require(&#39;jdtls&#39;).javap()&lt;cr&gt;</span><span>&#34;, </span><span>opts</span><span>)
</span><span>end
</span><span>
</span><span>local function </span><span>jdtls_setup</span><span>(event)
</span><span>    </span><span>local </span><span>jdtls </span><span>= </span><span>require</span><span>(&#39;</span><span>jdtls</span><span>&#39;)
</span><span>    </span><span>local </span><span>extendedClientCapabilities </span><span>= </span><span>jdtls</span><span>.extendedClientCapabilities;
</span><span>    </span><span>extendedClientCapabilities</span><span>.onCompletionItemSelectedCommand = &#34;</span><span>editor.action.triggerParameterHints</span><span>&#34;
</span><span>
</span><span>    </span><span>local </span><span>path </span><span>= </span><span>get_jdtls_paths</span><span>()
</span><span>    </span><span>local </span><span>data_dir </span><span>= </span><span>path</span><span>.data_dir .. &#39;</span><span>/</span><span>&#39; .. </span><span>vim</span><span>.fn.</span><span>fnamemodify</span><span>(</span><span>vim</span><span>.fn.</span><span>getcwd</span><span>(), &#39;</span><span>:p:h:t</span><span>&#39;)
</span><span>
</span><span>    </span><span>if </span><span>cache_vars</span><span>.capabilities == </span><span>nil </span><span>then
</span><span>        </span><span>jdtls</span><span>.extendedClientCapabilities.resolveAdditionalTextEditsSupport = </span><span>true
</span><span>
</span><span>        </span><span>local </span><span>ok_cmp</span><span>, </span><span>cmp_lsp </span><span>= </span><span>pcall</span><span>(</span><span>require</span><span>, &#39;</span><span>cmp_nvim_lsp</span><span>&#39;)
</span><span>        </span><span>cache_vars</span><span>.capabilities = </span><span>vim</span><span>.</span><span>tbl_deep_extend</span><span>(
</span><span>            &#39;</span><span>force</span><span>&#39;,
</span><span>            </span><span>vim</span><span>.lsp.protocol.</span><span>make_client_capabilities</span><span>(),
</span><span>            </span><span>ok_cmp </span><span>and </span><span>cmp_lsp</span><span>.</span><span>default_capabilities</span><span>() or {}
</span><span>        )
</span><span>    </span><span>end
</span><span>
</span><span>    </span><span>-- The command that starts the language server
</span><span>    </span><span>-- See: https://github.com/eclipse/eclipse.jdt.ls#running-from-the-command-line
</span><span>    </span><span>local </span><span>cmd </span><span>= {
</span><span>        &#39;</span><span>java</span><span>&#39;,
</span><span>
</span><span>        &#39;</span><span>-Declipse.application=org.eclipse.jdt.ls.core.id1</span><span>&#39;,
</span><span>        &#39;</span><span>-Dosgi.bundles.defaultStartLevel=4</span><span>&#39;,
</span><span>        &#39;</span><span>-Declipse.product=org.eclipse.jdt.ls.core.product</span><span>&#39;,
</span><span>        &#39;</span><span>-Dlog.protocol=true</span><span>&#39;,
</span><span>        &#39;</span><span>-Dlog.level=ALL</span><span>&#39;,
</span><span>        &#39;</span><span>-javaagent:</span><span>&#39; .. </span><span>path</span><span>.java_agent,
</span><span>        &#39;</span><span>-Xms1g</span><span>&#39;,
</span><span>        &#39;</span><span>--add-modules=ALL-SYSTEM</span><span>&#39;,
</span><span>        &#39;</span><span>--add-opens</span><span>&#39;,
</span><span>        &#39;</span><span>java.base/java.util=ALL-UNNAMED</span><span>&#39;,
</span><span>        &#39;</span><span>--add-opens</span><span>&#39;,
</span><span>        &#39;</span><span>java.base/java.lang=ALL-UNNAMED</span><span>&#39;,
</span><span>
</span><span>        </span><span>-- ðŸ’€
</span><span>        &#39;</span><span>-jar</span><span>&#39;,
</span><span>        </span><span>path</span><span>.launcher_jar,
</span><span>
</span><span>        </span><span>-- ðŸ’€
</span><span>        &#39;</span><span>-configuration</span><span>&#39;,
</span><span>        </span><span>path</span><span>.platform_config,
</span><span>
</span><span>        </span><span>-- ðŸ’€
</span><span>        &#39;</span><span>-data</span><span>&#39;,
</span><span>        </span><span>data_dir</span><span>,
</span><span>    }
</span><span>
</span><span>    </span><span>local </span><span>lsp_settings </span><span>= {
</span><span>        </span><span>java </span><span>= {
</span><span>            </span><span>-- jdt = {
</span><span>            </span><span>--   ls = {
</span><span>            </span><span>--     vmargs = &#34;-XX:+UseParallelGC -XX:GCTimeRatio=4 -XX:AdaptiveSizePolicyWeight=90 -Dsun.zip.disableMemoryMapping=true -Xmx1G -Xms100m&#34;
</span><span>            </span><span>--   }
</span><span>            </span><span>-- },
</span><span>            </span><span>project </span><span>= {
</span><span>                </span><span>referencedLibraries </span><span>= {
</span><span>                    </span><span>-- add any library jars here for the lsp to pick them up
</span><span>                },
</span><span>            },
</span><span>            </span><span>eclipse </span><span>= {
</span><span>                </span><span>downloadSources </span><span>= </span><span>true</span><span>,
</span><span>            },
</span><span>            </span><span>configuration </span><span>= {
</span><span>                </span><span>updateBuildConfiguration </span><span>= &#39;</span><span>interactive</span><span>&#39;,
</span><span>                </span><span>runtimes </span><span>= </span><span>path</span><span>.runtimes,
</span><span>            },
</span><span>            </span><span>maven </span><span>= {
</span><span>                </span><span>downloadSources </span><span>= </span><span>true</span><span>,
</span><span>            },
</span><span>            </span><span>implementationsCodeLens </span><span>= {
</span><span>                </span><span>enabled </span><span>= </span><span>true</span><span>,
</span><span>            },
</span><span>            </span><span>referencesCodeLens </span><span>= {
</span><span>                </span><span>enabled </span><span>= </span><span>true</span><span>,
</span><span>            },
</span><span>            </span><span>references </span><span>= {
</span><span>                </span><span>includeDecompiledSources </span><span>= </span><span>true</span><span>,
</span><span>            },
</span><span>            </span><span>inlayHints </span><span>= {
</span><span>                </span><span>enabled </span><span>= </span><span>true</span><span>,
</span><span>                </span><span>--parameterNames = {
</span><span>                </span><span>--   enabled = &#39;all&#39; -- literals, all, none
</span><span>                </span><span>--}
</span><span>            },
</span><span>            </span><span>format </span><span>= {
</span><span>                </span><span>enabled </span><span>= </span><span>true</span><span>,
</span><span>                </span><span>-- settings = {
</span><span>                </span><span>--   profile = &#39;asdf&#39;
</span><span>                </span><span>-- },
</span><span>            }
</span><span>        },
</span><span>        </span><span>signatureHelp </span><span>= {
</span><span>            </span><span>enabled </span><span>= </span><span>true</span><span>,
</span><span>        },
</span><span>        </span><span>completion </span><span>= {
</span><span>            </span><span>favoriteStaticMembers </span><span>= {
</span><span>                &#39;</span><span>org.hamcrest.MatcherAssert.assertThat</span><span>&#39;,
</span><span>                &#39;</span><span>org.hamcrest.Matchers.*</span><span>&#39;,
</span><span>                &#39;</span><span>org.hamcrest.CoreMatchers.*</span><span>&#39;,
</span><span>                &#39;</span><span>org.junit.jupiter.api.Assertions.*</span><span>&#39;,
</span><span>                &#39;</span><span>java.util.Objects.requireNonNull</span><span>&#39;,
</span><span>                &#39;</span><span>java.util.Objects.requireNonNullElse</span><span>&#39;,
</span><span>                &#39;</span><span>org.mockito.Mockito.*</span><span>&#39;,
</span><span>            },
</span><span>        },
</span><span>        </span><span>contentProvider </span><span>= {
</span><span>            </span><span>preferred </span><span>= &#39;</span><span>fernflower</span><span>&#39;,
</span><span>        },
</span><span>        </span><span>extendedClientCapabilities </span><span>= </span><span>jdtls</span><span>.extendedClientCapabilities,
</span><span>        </span><span>sources </span><span>= {
</span><span>            </span><span>organizeImports </span><span>= {
</span><span>                </span><span>starThreshold </span><span>= </span><span>9999</span><span>,
</span><span>                </span><span>staticStarThreshold </span><span>= </span><span>9999</span><span>,
</span><span>            }
</span><span>        },
</span><span>        </span><span>codeGeneration </span><span>= {
</span><span>            </span><span>toString </span><span>= {
</span><span>                </span><span>template </span><span>= &#39;</span><span>${object.className}{${member.name()}=${member.value}, ${otherMembers}}</span><span>&#39;,
</span><span>            },
</span><span>            </span><span>useBlocks </span><span>= </span><span>true</span><span>,
</span><span>        },
</span><span>    }
</span><span>
</span><span>    </span><span>-- This starts a new client &amp; server,
</span><span>    </span><span>-- or attaches to an existing client &amp; server depending on the `root_dir`.
</span><span>    </span><span>jdtls</span><span>.</span><span>start_or_attach</span><span>({
</span><span>        </span><span>cmd </span><span>= </span><span>cmd</span><span>,
</span><span>        </span><span>settings </span><span>= </span><span>lsp_settings</span><span>,
</span><span>        </span><span>on_attach </span><span>= </span><span>jdtls_on_attach</span><span>,
</span><span>        </span><span>capabilities </span><span>= </span><span>cache_vars</span><span>.capabilities,
</span><span>        </span><span>root_dir </span><span>= </span><span>jdtls</span><span>.setup.</span><span>find_root</span><span>(</span><span>root_files</span><span>),
</span><span>        </span><span>flags </span><span>= {
</span><span>            </span><span>allow_incremental_sync </span><span>= </span><span>true</span><span>,
</span><span>        },
</span><span>        </span><span>init_options </span><span>= {
</span><span>            </span><span>bundles </span><span>= </span><span>path</span><span>.bundles,
</span><span>            </span><span>extendedClientCapabilities </span><span>= </span><span>extendedClientCapabilities</span><span>,
</span><span>        },
</span><span>    })
</span><span>end
</span><span>
</span><span>vim</span><span>.api.</span><span>nvim_create_autocmd</span><span>(&#39;</span><span>FileType</span><span>&#39;, {
</span><span>    </span><span>group </span><span>= </span><span>java_cmds</span><span>,
</span><span>    </span><span>pattern </span><span>= { &#39;</span><span>java</span><span>&#39; },
</span><span>    </span><span>desc </span><span>= &#39;</span><span>Setup jdtls</span><span>&#39;,
</span><span>    </span><span>callback </span><span>= </span><span>jdtls_setup</span><span>,
</span><span>})
</span></code></pre>
<p><strong>DAP</strong></p>
<pre data-lang="lua"><code data-lang="lua"><span>local </span><span>dap </span><span>= </span><span>require</span><span>(&#39;</span><span>dap</span><span>&#39;)
</span><span>
</span><span>dap</span><span>.configurations.java = {
</span><span>    {
</span><span>        </span><span>type </span><span>= &#39;</span><span>java</span><span>&#39;,
</span><span>        </span><span>request </span><span>= &#39;</span><span>launch</span><span>&#39;,
</span><span>        </span><span>name </span><span>= &#39;</span><span>Launch Java Program</span><span>&#39;
</span><span>    },
</span><span>}
</span><span>
</span><span>vim</span><span>.fn.</span><span>sign_define</span><span>(&#39;</span><span>DapBreakpoint</span><span>&#39;,
</span><span>    {
</span><span>        </span><span>text </span><span>= &#39;</span><span>ðŸ”´</span><span>&#39;,
</span><span>        </span><span>texthl </span><span>= &#39;</span><span>DapBreakpointSymbol</span><span>&#39;,
</span><span>        </span><span>linehl </span><span>= &#39;</span><span>DapBreakpoint</span><span>&#39;,
</span><span>        </span><span>numhl </span><span>= &#39;</span><span>DapBreakpoint</span><span>&#39;
</span><span>    })
</span><span>vim</span><span>.fn.</span><span>sign_define</span><span>(&#39;</span><span>DapStopped</span><span>&#39;,
</span><span>    {
</span><span>        </span><span>texthl </span><span>= &#39;</span><span>DapStoppedSymbol</span><span>&#39;,
</span><span>        </span><span>linehl </span><span>= &#39;</span><span>CursorLine</span><span>&#39;,
</span><span>        </span><span>numhl </span><span>= &#39;</span><span>DapBreakpoint</span><span>&#39;
</span><span>    })
</span><span>
</span><span>vim</span><span>.keymap.</span><span>set</span><span>(&#39;</span><span>n</span><span>&#39;, &#39;</span><span>&lt;F5&gt;</span><span>&#39;, </span><span>function</span><span>() </span><span>require</span><span>(&#39;</span><span>dap</span><span>&#39;).</span><span>continue</span><span>() </span><span>end</span><span>)
</span><span>vim</span><span>.keymap.</span><span>set</span><span>(&#39;</span><span>n</span><span>&#39;, &#39;</span><span>&lt;F10&gt;</span><span>&#39;, </span><span>function</span><span>() </span><span>require</span><span>(&#39;</span><span>dap</span><span>&#39;).</span><span>step_over</span><span>() </span><span>end</span><span>)
</span><span>vim</span><span>.keymap.</span><span>set</span><span>(&#39;</span><span>n</span><span>&#39;, &#39;</span><span>&lt;F11&gt;</span><span>&#39;, </span><span>function</span><span>() </span><span>require</span><span>(&#39;</span><span>dap</span><span>&#39;).</span><span>step_into</span><span>() </span><span>end</span><span>)
</span><span>vim</span><span>.keymap.</span><span>set</span><span>(&#39;</span><span>n</span><span>&#39;, &#39;</span><span>&lt;F12&gt;</span><span>&#39;, </span><span>function</span><span>() </span><span>require</span><span>(&#39;</span><span>dap</span><span>&#39;).</span><span>step_out</span><span>() </span><span>end</span><span>)
</span><span>vim</span><span>.keymap.</span><span>set</span><span>(&#39;</span><span>n</span><span>&#39;, &#39;</span><span>&lt;Leader&gt;b</span><span>&#39;, </span><span>function</span><span>() </span><span>require</span><span>(&#39;</span><span>dap</span><span>&#39;).</span><span>toggle_breakpoint</span><span>() </span><span>end</span><span>)
</span><span>
</span><span>local </span><span>dapui </span><span>= </span><span>require</span><span>(&#39;</span><span>dapui</span><span>&#39;)
</span><span>dapui</span><span>.</span><span>setup</span><span>()
</span><span>
</span><span>dap</span><span>.listeners.before.attach.</span><span>dapui_config </span><span>= </span><span>function</span><span>()
</span><span>    </span><span>dapui</span><span>.</span><span>open</span><span>()
</span><span>end
</span><span>dap</span><span>.listeners.before.launch.</span><span>dapui_config </span><span>= </span><span>function</span><span>()
</span><span>    </span><span>dapui</span><span>.</span><span>open</span><span>()
</span><span>end
</span><span>dap</span><span>.listeners.before.event_terminated.</span><span>dapui_config </span><span>= </span><span>function</span><span>()
</span><span>    </span><span>--dapui.close()
</span><span>end
</span><span>dap</span><span>.listeners.before.event_exited.</span><span>dapui_config </span><span>= </span><span>function</span><span>()
</span><span>    </span><span>--dapui.close()
</span><span>end
</span><span>
</span><span>vim</span><span>.keymap.</span><span>set</span><span>(&#39;</span><span>n</span><span>&#39;, &#39;</span><span>&lt;Leader&gt;du</span><span>&#39;, </span><span>function</span><span>() </span><span>dapui</span><span>.</span><span>toggle</span><span>() </span><span>end</span><span>)
</span><span>
</span></code></pre>
<p>I hope this helps you get started working with Java in Neovim!</p>

        </section>

        

    </article>
</div></div>
  </body>
</html>
