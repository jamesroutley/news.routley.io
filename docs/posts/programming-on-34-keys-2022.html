<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://oppi.li/posts/programming_on_34_keys/">Original</a>
    <h1>Programming on 34 Keys (2022)</h1>
    
    <div id="readability-page-1" class="page"><div>
            <p>Minimizing your keyboard layout is a slippery slope. A few months
ago, I built the <a href="https://github.com/icyphox/ferricy">Ferricy</a>, a
34-key-split-ortho-ergo keyboard. The Ferricy is a fork of the <a href="https://github.com/davidphilipbarr/Sweep/tree/main/Sweep%20Bling%20MX">Ferris
Sweep MX Bling</a>.</p>
<figure>
<img src="https://u.peppe.rs/otz.jpg" alt="The Ferricy, designed by icyphox"/>
<figcaption aria-hidden="true">The Ferricy, designed by <a href="https://icyphox.sh">icyphox</a></figcaption>
</figure>
<p>My daily use consists of a bit of prose and a lot of program, my
layout has evolved accordingly.</p>

<figure>
<img src="https://u.peppe.rs/base.png" alt="Colemak with no mods"/>
<figcaption aria-hidden="true">Colemak with no mods</figcaption>
</figure>
<p>The base layer contains alphabets, four symbols and four whitespace
keys:</p>
<ul>
<li>Alphas: Stock Colemak, with no modifications whatsoever</li>
<li>Symbols: <code>. , / ;</code></li>
<li>Whitespace: tab, space, enter, backspace (from left to right)</li>
</ul>

<p>Keyboard input is complex and it is impossible to skirt around it.
You can either use a keyboard with enough keys to supply all possible
inputs (a mechanical burden), or you can use firmware to supply all
possible inputs (a cognitive burden). Layers are a cognitive burden.</p>
<p>I use 3 layers, heavily inspired by <a href="https://github.com/manna-harbour/miryoku">Miryoku</a>, but tuned
for programming. Excluding the base Colemak layer:</p>
<ul>
<li><code>NAV</code>: activated on holding <code>space</code> (left
thumb)</li>
<li><code>NUM</code>: activated on holding <code>tab</code> (left
thumb)</li>
<li><code>SYM</code>: activated on holding <code>enter</code> (right
thumb)</li>
</ul>
<h2 id="the-nav-layer">The <code>NAV</code> Layer</h2>
<p>As the name suggests, this layer is focused on navigation. Arrow keys
and the likes.</p>
<figure>
<img src="https://u.peppe.rs/nav.png" alt="NAV, on holding space"/>
<figcaption aria-hidden="true"><code>NAV</code>, on holding
<code>space</code></figcaption>
</figure>
<p>Using Vim and Colemak means you lose out on HJKL navigation. However,
on activating the <code>NAV</code> layer, the right home-row is
converted into arrow keys. In essence, by holding space, I can navigate
Vim with the home-row, or Firefox, or my PDF reader. I no longer need to
look for software that allows Vim navigation keys, because it is baked
into the firmware!</p>
<p>My Vim motions are not limited to HJKL. In fact, my Vim motions are
rarely HJKL. I tend to use <code>}</code> (next paragraph) and
<code>)</code> (next sentence) more often. As a result, these have found
their way into my <code>NAV</code> layer, over the likes of
<code>PgDown</code> and <code>End</code>. Having brackets at my index
and middle fingers is nice for programming too.</p>
<h2 id="the-sym-layer">The <code>SYM</code> Layer</h2>
<figure>
<img src="https://u.peppe.rs/sym.png" alt="SYM, on holding enter"/>
<figcaption aria-hidden="true"><code>SYM</code>, on holding
<code>enter</code></figcaption>
</figure>
<p>This layer contains all the symbols that you would find by hitting
<code>Shift</code> and a key on the number row. Probably noteworthy to
Vim users: the symbols are arranged in the form of a mirrored numpad for
exactly one reason: to move <code>$</code> to the left of
<code>^</code>. It has always annoyed me that <code>$</code> moves the
cursor to the end of the line and <code>^</code> moves it to the
beginning, but their position on a typical number row are reversed, 4
comes before 6.</p>
<h2 id="the-num-layer">The <code>NUM</code> layer</h2>
<figure>
<img src="https://u.peppe.rs/num.png" alt="NUM, on holding tab"/>
<figcaption aria-hidden="true"><code>NUM</code>, on holding
<code>tab</code></figcaption>
</figure>
<p>Another deviation from Miryoku, the numpad just feels <em>right</em>
on my <em>right</em> hand.</p>

<p>If you have been paying close attention, you might have noticed that
<code>escape</code> didn’t make it to any layer. <code>escape</code> is
too crucial to put on a non-base layer, but at the same time, not as
important to deserve a place on the base layer. That is where ZMK’s
combos come in. Combos let you tap any number of keys, and combine them
to form a single key. I have combos set up for underscore, minus, escape
and caps-word (more on caps-word later):</p>
<figure>
<img src="https://u.peppe.rs/combos.png" alt="Combos are almost piano-like"/>
<figcaption aria-hidden="true">Combos are almost piano-like</figcaption>
</figure>

<p>Inherited from Miryoku, I have home-row mods for activating
<code>Super</code>, <code>Alt</code>, <code>Shift</code>,
<code>Ctrl</code> and <code>Hyper</code>
(<code>Ctrl + Shift + Alt + Super</code>). The idea is to send
<code>T</code> on tap and <code>Ctrl</code> on hold. Home-row mods are
fairly popular, so I’ll not go into the details.</p>
<figure>
<img src="https://u.peppe.rs/homerow.png" alt="Super, Alt, Shift, Ctrl, Hyper; on the left half, and mirrored on the right half"/>
<figcaption aria-hidden="true">Super, Alt, Shift, Ctrl, Hyper; on the
left half, and mirrored on the right half</figcaption>
</figure>
<p><code>Hyper</code> bridges the gap between firmware and software. You
can never configure key combination that, opens Firefox, for example,
through firmware alone. However, with the <code>Hyper</code> key, and
some <code>sxhkd</code> magic, you can emulate that. Pressing
<code>Hyper + F</code> on a keyboard is just two keys, but the key codes
sent are <code>Ctrl + Shift + Alt + Super + F</code>. That key
combination is not intercepted by any application as a shortcut, except
for the following <code>sxhkd</code> stanza:</p>
<div id="cb1"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span>super</span> + alt + shift + ctrl + f</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span>xdotool</span> search <span>&#34;Mozilla Firefox&#34;</span> windowactivate</span></code></pre></div>
<p>Alternatively, you can intercept unused <code>F</code> keys:
<code>F13</code> through <code>F24</code>.</p>
<p>Home-row mods are mirrored on each half because it would be
impossible to hit <code>Ctrl + T</code> if not; they lie on the same
key.</p>

<p>Caps-word is a clever caps-lock, built into ZMK. Typing out constants
such as <code>PORT</code> with home-row mods would look like this:</p>
<ul>
<li>hold <code>e</code> (shift) on left hand, and tap <code>p</code> on
right hand</li>
<li>hold <code>e</code> (shift) on left hand, and tap <code>o</code> on
right hand</li>
<li>hold <code>s</code> (shift) on right hand, and tap <code>r</code> on
left hand</li>
<li>hold <code>s</code> (shift) on right hand, and tap <code>t</code> on
left hand</li>
</ul>
<p>This hold-alternate-hold dance gets tiring quickly. With caps-word,
however:</p>
<ul>
<li>toggle <code>caps_word</code></li>
<li>type out <code>p</code>, <code>o</code>, <code>r</code>,
<code>t</code></li>
<li>hit a <em>break</em> character (space, enter will do)</li>
<li>continue</li>
</ul>
<p>Caps-word automatically disables capitalization upon encountering a
breaking character, (which are space, enter or any modifier, by default)
right in the firmware!</p>

<p>34-keys has been reasonably comfortable to use, for both prose and
program. My palms do not move across the desk at all, as I reach for
keys. I mostly write Rust and Bash, and my layout has evolved to
accomodate special characters from their grammars (angled brackets and
hyphens, specifically). If you are on a similar journey, I would suggest
focusing on accuracy and comfort over speed. Speed comes with time.</p>

          </div></div>
  </body>
</html>
