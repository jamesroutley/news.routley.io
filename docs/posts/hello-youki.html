<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.utam0k.jp/en/blog/2021/12/27/youki_first_release/">Original</a>
    <h1>Hello, Youki</h1>
    
    <div id="readability-page-1" class="page"><div role="main" id="main"><article><section><h2 id="-what-is-youki">ü§î What is youki?</h2><p>Youki is a low level container runtime written in Rust that implements the <a href="https://github.com/opencontainers/runtime-spec/blob/main/spec.md">OCI Runtime Specification</a>. Simply put, youki is a commandline tool that can create containers. Other runtimes in the same category you might have heard about are <a href="https://github.com/opencontainers/runc">runc</a> and <a href="https://github.com/containers/crun">crun</a>. When you create a container using Docker or Podman the actual container creation is delegated to a tool like youki.</p><div><center><a href="https://github.com/containers/youki"><img src="https://www.utam0k.jp/en/blog/2021/12/27/youki_first_release/link_card_youki.svg"/></a></center></div><h2 id="why-another-container-runtime">Why another container runtime?</h2><p>Currently many container tools are implemented in Go which requires special handling when it comes to implementing a container runtime. Runc for example embeds a C program into its exectuable that handles setting up the namespaces as this is not possible in Go due to the multithreaded nature of the Go runtime.</p><p>On the other hand C could be used as a implementation language but this comes at the cost of memory safety and in addition C lacks high level language constructs that we have come to expect from a modern language.</p><p>Therefore while Go and C are perfectly fine languages, for this particular use case we believe that Rust with its cross section of low level control, memory safety and high level abstractions is uniquely suited for implementing a container runtime.</p><p>Youki has the potential to be faster and use less memory than runc, and therefore work in environments with tight memory usage requirements. Here is a simple benchmark of a container from creation to deletion. As with all benchmarks, this might not be representative of your own workloads</p><center><table><thead><tr><th>Runtime</th><th>Time (mean ¬± œÉ)</th><th>Range (min ‚Ä¶ max)</th></tr></thead><tbody><tr><td>youki</td><td>198.4 ms ¬± 52.1 ms</td><td>97.2 ms ‚Ä¶ 296.1 ms</td></tr><tr><td>runc</td><td>352.3 ms ¬± 53.3 ms</td><td>248.3 ms ‚Ä¶ 772.2 ms</td></tr><tr><td>crun</td><td>153.5 ms ¬± 21.6 ms</td><td>80.9 ms ‚Ä¶ 196.6 ms</td></tr></tbody></table></center><details><summary>Details about the benchmark</summary><ul><li>A command used for the benchmark<pre><code data-lang="console">$ hyperfine --prepare &#39;sudo sync; echo 3 | sudo tee /proc/sys/vm/drop_caches&#39; --warmup 10 --min-runs 100 &#39;sudo ./youki create -b tutorial a &amp;&amp; sudo ./youki start a &amp;&amp; sudo ./youki delete -f a&#39;
</code></pre></li><li>Enviroment<pre><code data-lang="console">$ ./youki info
Version           0.0.1
Kernel-Release    5.11.0-41-generic
Kernel-Version    #45-Ubuntu SMP Fri Nov 5 11:37:01 UTC 2021
Architecture      x86_64
Operating System  Ubuntu 21.04
Cores             12
Total Memory      32025
Cgroup setup      hybrid
Cgroup mounts
  blkio           /sys/fs/cgroup/blkio
  cpu             /sys/fs/cgroup/cpu,cpuacct
  cpuacct         /sys/fs/cgroup/cpu,cpuacct
  cpuset          /sys/fs/cgroup/cpuset
  devices         /sys/fs/cgroup/devices
  freezer         /sys/fs/cgroup/freezer
  hugetlb         /sys/fs/cgroup/hugetlb
  memory          /sys/fs/cgroup/memory
  net_cls         /sys/fs/cgroup/net_cls,net_prio
  net_prio        /sys/fs/cgroup/net_cls,net_prio
  perf_event      /sys/fs/cgroup/perf_event
  pids            /sys/fs/cgroup/pids
  unified         /sys/fs/cgroup/unified
CGroup v2 controllers
  cpu             detached
  cpuset          detached
  hugetlb         detached
  io              detached
  memory          detached
  pids            detached
  device          attached
Namespaces        enabled
  mount           enabled
  uts             enabled
  ipc             enabled
  user            enabled
  pid             enabled
  network         enabled
  cgroup          enabled
$ ./youki --version
youki version 0.0.1
commit: 0.0.1-0-0be33bf
$ runc -v
runc version 1.0.0-rc93
commit: 12644e614e25b05da6fd08a38ffa0cfe1903fdec
spec: 1.0.2-dev
go: go1.13.15
libseccomp: 2.5.1
$ crun --version
crun version 0.19.1.45-4cc7
commit: 4cc7fa1124cce75dc26e12186d9cbeabded2b710
spec: 1.0.0
+SYSTEMD +SELINUX +APPARMOR +CAP +SECCOMP +EBPF +CRIU +YAJL
</code></pre></li></ul></details><h2 id="implementation-status">Implementation status</h2><p>A container runtime needs to implement many features that users have come to expect from a container runtime, that have not yet been incorporated into the OCI Runtime Specification. Despite this being the first release of youki, many features have already been implemented.</p><table><thead><tr><th>Feature</th><th>Description</th><th>State</th></tr></thead><tbody><tr><td>Docker</td><td>Running via Docker</td><td>‚úÖ</td></tr><tr><td>Podman</td><td>Running via Podman</td><td>‚úÖ</td></tr><tr><td>pivot_root</td><td>Change the root directory</td><td>‚úÖ</td></tr><tr><td>Mounts</td><td>Mount files and directories to container</td><td>‚úÖ</td></tr><tr><td>Namespaces</td><td>Isolation of various resources</td><td>‚úÖ</td></tr><tr><td>Capabilities</td><td>Limiting root privileges</td><td>‚úÖ</td></tr><tr><td>Cgroups v1</td><td>Resource limitations, etc</td><td>‚úÖ</td></tr><tr><td>Cgroups v2</td><td>Improved version of v1</td><td>Support is complete except for devices. WIP on <a href="https://github.com/containers/youki/issues/78">#78</a></td></tr><tr><td>Systemd cgroup driver</td><td>Setting up a cgroup using systemd</td><td>‚úÖ</td></tr><tr><td>Seccomp</td><td>Filtering system calls</td><td>‚úÖ</td></tr><tr><td>Hooks</td><td>Add custom processing during container creation</td><td>‚úÖ</td></tr><tr><td>Rootless</td><td>Running a container without root privileges</td><td>‚úÖ</td></tr><tr><td>OCI Compliance</td><td>Compliance with OCI Runtime Spec</td><td>‚úÖ 50 out of 50 test cases passing</td></tr></tbody></table><h2 id="how-to-get-started">How to get started</h2><p>Download youki from <a href="https://github.com/containers/youki/releases/tag/v0.0.1">the release</a> page and follow the <a href="https://github.com/containers/youki#tutorial">tutorial</a>.
See <a href="https://containers.github.io/youki/">the mdbook</a> for more details.</p><h2 id="-motivation">üí™ Motivation</h2><p>Why do we keep implementing youki?</p><ul><li><p>Contribution to the container runtime community</p></li><li><p>Explore</p></li><li><p>Fun
We have fun implementing this. In fact, this might be the most important part.</p></li></ul><h2 id="-join-youki">ü§ù Join youki!</h2><p>Youki is always looking for people who want to learn about container runtimes in Rust, and for your input.</p><ul><li><a href="https://github.com/containers/youki/issues/10">Issues that allow people to post their opinions and ideas</a></li><li><a href="https://discord.gg/zHnyXKSQFD">Discord</a></li><li><a href="https://twitter.com/utam0k">@utam0k</a></li></ul><p>We also have <a href="https://github.com/containers/youki/issues?q=is%3Aopen+is%3Aissue+label%3A%22good+first+issue%22">good first issue</a> as the first way to participate in development.
If you cannot find a good first issue that fits you, please ask on Discord or Twitter.</p><h2 id="-a-short-history-of-youki">üë£ A short history of youki</h2><div><p>Studied <a href="https://github.com/oracle/railcar">railcar</a> which is implemented by Oracle and already archived</p></div><div><p>Started implementing the container runtime in Rust, which later became youki</p></div><div><p>Attracted attention of developers on <a href="https://www.reddit.com/r/programming/comments/niv8cg/youki_a_container_runtime_in_rust_passed_all_the/">Reddit</a> and elsewhere</p></div><div><p>More attention, more developers</p></div><h2 id="-acknowledgement">ü•∞ Acknowledgement</h2><p>Thanks to all the wonderful collaborators.</p><p>Thanks to the members of <a href="https://github.com/containers">containers</a> for their cooperation.</p><p>Thanks to all the people who already contributed!</p><figure><img src="https://www.utam0k.jp/en/blog/2021/12/27/youki_first_release/contributors.svg"/></figure><p>This article has been reviewed by <a href="https://github.com/Furisto">Thomas Schubart</a> and some additions have been made. Thank you very much.</p><h2 id="-conclusion">üí¨ Conclusion</h2><p>We are always eager for new contributers.
We don‚Äôt have a sponsor feature on GitHub, so please give us a star to encourage us.</p><center><a target="_blank" rel="noopener noreferrer" href="https://github.com/containers/youki" data-color-scheme="no-preference: light; light: light; dark: dark;" data-size="large" data-show-count="true" aria-label="Star containers/youki on GitHub">Star</a></center></section><span>Share on:</span><section><a href="https://disqus.com">comments powered by </a></section></article></div></div>
  </body>
</html>
