<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/mpaepper/llm_agents">Original</a>
    <h1>Build your own agents which are controlled by LLMs</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><h2 tabindex="-1" dir="auto"><a id="user-content-llm-agents" aria-hidden="true" href="#llm-agents"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>LLM Agents</h2>
<p dir="auto">Small library to build agents which are controlled by large language models (LLMs) which is heavily inspired by <a href="https://github.com/hwchase17/langchain/">langchain</a>.</p>
<p dir="auto">The goal was to get a better grasp of how such an agent works and understand it all in very few lines of code.</p>
<p dir="auto">Langchain is great, but it already has a few more files and abstraction layers, so I thought it would be nice to build the most important parts of a simple agent from scratch.</p>
<h3 tabindex="-1" dir="auto"><a id="user-content-how-it-works" aria-hidden="true" href="#how-it-works"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>How it works</h3>
<p dir="auto">The agent works like this:</p>
<ul dir="auto">
<li>It gets instructed by a prompt which tells it the basic way to solve a task using tools</li>
<li>Tools are custom build components which the agent can use
<ul dir="auto">
<li>So far, I&#39;ve implemented the ability to execute Python code in a REPL, to use the Google search and to search on Hacker News</li>
</ul>
</li>
<li>The agent runs in a loop of Thought, Action, Observation, Thought, ...
<ul dir="auto">
<li>The Thought and Action (with the Action Input to the action) are the parts which are generated by an LLM</li>
<li>The Observation is generated by using a tool (for example the print outputs of Python or the text result of a Google search)</li>
</ul>
</li>
<li>The LLM gets the new information appended to the prompt in each loop cycle and thus can act on that information</li>
<li>Once the agent has enough information it provides the final answer</li>
</ul>
<p dir="auto">For more details on how it works, check out <a href="https://www.paepper.com/blog/posts/intelligent-agents-guided-by-llms/" rel="nofollow">this blog post</a></p>
<h3 tabindex="-1" dir="auto"><a id="user-content-how-to-use-it" aria-hidden="true" href="#how-to-use-it"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>How to use it</h3>
<p dir="auto">You can install this libaray locally by running: <code>pip install -e .</code> inside it&#39;s directory after cloning it.</p>
<p dir="auto">You also need to provide the following env variables:</p>
<ul dir="auto">
<li><code>OPENAI_API_KEY</code> to use the OpenAI API (obtainable at: <a href="https://platform.openai.com/account/api-keys" rel="nofollow">https://platform.openai.com/account/api-keys</a>)</li>
<li><code>SERPAPI_API_KEY</code> to use the Google Search in case you use that tool (obtainable at: <a href="https://serpapi.com/" rel="nofollow">https://serpapi.com/</a>)</li>
</ul>
<p dir="auto">You can simply export them in bash like: <code>export OPENAI_API_KEY=&#39;sh-lsdf....&#39;</code></p>
<p dir="auto">Then you can run the script <code>python run_agent.py</code> and ask your question.</p>
<p dir="auto">To construct your own agent do it like this:</p>
<div dir="auto" data-snippet-clipboard-copy-content="from llm_agents import Agent, ChatLLM, PythonREPLTool, HackerNewsSearchTool, SerpAPITool

agent = Agent(llm=ChatLLM(), tools=[PythonREPLTool(), SerpAPITool(), HackerNewsSearchTool()])
result = agent.run(&#34;Your question to the agent&#34;)

print(f&#34;Final answer is {result}&#34;)"><pre><span>from</span> <span>llm_agents</span> <span>import</span> <span>Agent</span>, <span>ChatLLM</span>, <span>PythonREPLTool</span>, <span>HackerNewsSearchTool</span>, <span>SerpAPITool</span>

<span>agent</span> <span>=</span> <span>Agent</span>(<span>llm</span><span>=</span><span>ChatLLM</span>(), <span>tools</span><span>=</span>[<span>PythonREPLTool</span>(), <span>SerpAPITool</span>(), <span>HackerNewsSearchTool</span>()])
<span>result</span> <span>=</span> <span>agent</span>.<span>run</span>(<span>&#34;Your question to the agent&#34;</span>)

<span>print</span>(<span>f&#34;Final answer is <span><span>{</span><span>result</span><span>}</span></span>&#34;</span>)</pre></div>
<p dir="auto">Of course, you can also build your custom tools or omit tools, for exmaple if you don&#39;t want to create a SERPAPI key.</p>
</article>
          </div></div>
  </body>
</html>
