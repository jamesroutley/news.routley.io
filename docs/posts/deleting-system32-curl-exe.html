<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://daniel.haxx.se/blog/2023/04/24/deleting-system32curl-exe/">Original</a>
    <h1>Deleting System32\curl.exe</h1>
    
    <div id="readability-page-1" class="page"><div>
		
<p>Let me tell you a story about how Windows users are deleting files from their installation and as a consequence end up in tears.</p>



<h2>Background</h2>



<p>The real and actual curl tool has been <a href="https://daniel.haxx.se/blog/2018/01/13/microsoft-curls-too/" data-type="post" data-id="10663">shipped as part of Windows 10</a> and Windows 11 for many years already. It is called <code>curl.exe</code> and is located in the <code>System32</code> directory.</p>



<p><a href="https://curl.se/windows/microsoft.html">Microsoft ships</a> this bundled with its Operating system. They get the code from the curl project but Microsoft builds, tests, ships and are in all ways responsible for their operating system.</p>



<h2>NVD inflation</h2>



<p>As I have blogged about separately earlier, the next brick in the creation of this story is the fact that <a href="https://daniel.haxx.se/blog/2023/03/06/nvd-makes-up-vulnerability-severity-levels/" data-type="post" data-id="21858">National Vulnerability Database deliberately inflates the severity levels</a> of security flaws in its vast database. They believe scaremongering serves their audience.</p>



<p>In one particular case, <a href="https://curl.se/docs/CVE-2022-43552.html">CVE-2022-43552</a> was reported by the curl project in December 2022. It is a use-after-free flaw that we determined to be <strong>severity low</strong> and not higher mostly because of the very limited time window you need to make something happen for it to be exploited or abused. NVD set it to <strong>medium</strong> which admittedly was just one notch higher (this time).</p>



<p>This is not helpful.</p>



<h2>“Security scanners”</h2>



<p>Lots of Windows users everywhere runs security scanners on their systems with regular intervals in order to verify that their systems are fine. At some point after December 21, 2022, some of these scanners started to detect installations of curl that included the above mentioned CVE. <a href="https://www.tenable.com/plugins/nessus/171859/changelog">Nessus apparently started this on February 23</a>.</p>



<p>This is not helpful.</p>



<h2>Panic</h2>



<p>Lots of Windows users everywhere then started to panic when these security applications warned them about their vulnerable <code>curl.exe</code>. Many Windows users are even contractually “forced” to fix (all) such security warnings within a certain time period or risk bad consequences and penalties.</p>



<h2>How do you fix this?</h2>



<p>I have been asked numerous times about how to fix this problem. I have stressed at every opportunity that <strong>it is a horrible idea to remove the system curl or to replace it with another executable</strong>. It is very easy to download a <a href="https://curl.se/windows/">fresh curl install for Windows from the curl site</a> – but we still strongly discourage everyone from <em>replacing</em> system files.</p>



<p>But of course, far from everyone asked us. A seemingly large enough crowd has proceeded and done exactly what we would stress they should not: they deleted or replaced their <code>C:\Windows\System32\curl.exe</code>.</p>



<p>The <em>real fix</em> is of course to let Microsoft ship an update and make sure to update then. The exact update that upgrades curl to version 8.0.1 is called <a href="https://support.microsoft.com/en-gb/topic/april-11-2023-kb5025221-os-builds-19042-2846-19044-2846-and-19045-2846-b00c3356-baac-4a41-8342-7f97ec83445a">KB5025221</a> and shipped on April 11. (And yes, this is the first time you get the very latest curl release shipped in a Windows update)</p>



<p>The people who deleted or replaced the curl executable noticed that they <em>cannot upgrade</em> because the Windows update procedure detects that the Windows install has been tampered with and it refuses to continue.</p>



<p><strong>I do not know how to restore this to a state that Windows update is happy with. </strong>Presumably if you bring back curl.exe to the exact state from before it could work, but I do not know exactly what tricks people have tested and ruled out.</p>



<p>I have been pointed to responses on the Microsoft site <code>answers.microsoft.com</code> done by “helpful volunteers” that specifically recommend removing the curl.exe executable as a fix. I don’t want to help spreading that idea so I will not link to any such post. I have reported this to Microsoft contacts and I hope they can maybe edit or comment those posts soon.</p>



<h2>We are not responsible </h2>



<p>I just want to emphasize that if you install and run Windows, your friendly provider is Microsoft. You need to contact Microsoft for support and help with Windows related issues. The curl.exe you have in System32 is only provided <em>indirectly </em>by the curl project and we cannot fix this problem for you. We in fact fixed the problem in the source code already back in December 2022.</p>



<p>If you have removed curl.exe or otherwise tampered with your Windows installation, the curl project cannot help you.</p>



<h2>Credits</h2>



<p>Image by <a href="https://pixabay.com/users/alexas_fotos-686414/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1111448">Alexa</a> from <a href="https://pixabay.com//?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1111448">Pixabay</a></p>



<h2>Discussions</h2>



<p><a href="https://news.ycombinator.com/item?id=35685635#35685962">Hacker news</a></p>
	</div></div>
  </body>
</html>
