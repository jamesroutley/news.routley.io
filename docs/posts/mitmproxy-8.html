<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://mitmproxy.org/posts/releases/mitmproxy8/">Original</a>
    <h1>Mitmproxy 8</h1>
    
    <div id="readability-page-1" class="page"><div>
    <article>
    <header>
        
        <h5>18 Mar 2022<i>, Maximilian Hils
    <a href="https://twitter.com/maximilianhils">@maximilianhils</a>
</i>

</h5>
    </header>
    <section>
        <p>Weâ€™re delighted to announce the release of mitmproxy 8, a free and open source interactive HTTPS proxy. This release brings major improvements to mitmweb, our web interface, and new functionality for addon developers.</p>
<h3 id="web-ui-improvements">Web UI Improvements</h3>
<figure><img src="https://mitmproxy.org/posts/releases/mitmproxy8/mitmweb.png"/>
</figure>

<p>This release includes a whole bunch of mitmweb improvements, contributed by our fantastic Google Summer of Code 2021 student, <a href="https://twitter.com/gorogoroumaru">Toshiaki Tanaka</a>! Mitmweb now renders TCP and WebSocket flows, offers direct cURL/HTTPie/raw HTTP export, has an experimental command bar, and generally received lots of fine-tuning. On the backend, the entire codebase has been converted to TypeScript. Check out Toshiakiâ€™s <a href="https://mitmproxy.org/posts/gsoc/gsoc2021/">blog post</a> for more details!</p>
<p>We are happy to announce that we are again participating in the Google Summer of Code 2022 under the umbrella of the Honeynet project. If youâ€™d like to hack on mitmproxy supported with a nice stipend, check out <a href="https://github.com/mitmproxy/mitmproxy/issues/5048">#5048</a>!</p>
<h3 id="async-event-hooks">Async Event Hooks</h3>
<figure><img src="https://mitmproxy.org/posts/releases/mitmproxy8/async.svg"/>
</figure>

<p><a href="https://robertxiao.ca/">Robert Xiao (@nneonneo)</a> implemented all the low-level plumbing necessary for async event hooks. Addon developers can now simply make their functions <code>async</code> and donâ€™t have to worry about nasty race conditions anymore. ðŸŽ‰</p>
<h3 id="new-tls-event-hooks">New TLS Event Hooks</h3>
<figure><img src="https://mitmproxy.org/posts/releases/mitmproxy8/tls-hooks.png"/>
</figure>

<p>Mitmproxy has new event hooks to signal TLS handshake success and failure for client and server connections. This enables a few interesting use cases around certificate pinning, for example the dynamic exclusion of domains after the first interception failure. If this interests you, take a look at <a href="https://github.com/mitmproxy/mitmproxy/blob/main/examples/contrib/tls_passthrough.py">examples/contrib/tls_passthrough.py</a>!</p>
<h3 id="security-fixes">Security Fixes</h3>
<ul>
<li><a href="https://github.com/mitmproxy/mitmproxy/security/advisories/GHSA-gcx2-gvj7-pxv3">CVE-2022-24766</a>:
Fix request smuggling vulnerability reported by @zeyu2001 (@mhils).</li>
</ul>
<h3 id="full-changelog">Full Changelog</h3>
<ul>
<li>Support proxy authentication for SOCKS v5 mode (@starplanet)</li>
<li>Make it possible to ignore connections in the tls_clienthello event hook (@mhils)</li>
<li>fix some responses not being decoded properly if the encoding was uppercase (#4735, @Mattwmaster58)</li>
<li>Trigger event hooks for flows with semantically invalid requests, for example invalid content-length headers (@mhils)</li>
<li>Improve error message on TLS version mismatch (@mhils)</li>
<li>Windows: Switch to Pythonâ€™s default asyncio event loop, which increases the number of sockets
that can be processed simultaneously (@mhils)</li>
<li>Add <code>client_replay_concurrency</code> option, which allows more than one client replay request to be in-flight at a time. (@rbdixon)</li>
<li>New content view which handles gRPC/protobuf. Allows to apply custom definitions to visualize different field decodings.
Includes example addon which applies custom definitions for selected gRPC traffic (@mame82)</li>
<li>Fix a crash caused when editing string option (#4852, @rbdixon)</li>
<li>Base container image bumped to Debian 11 Bullseye (@Kriechi)</li>
<li>Upstream replays donâ€™t do CONNECT on plaintext HTTP requests (#4876, @HoffmannP)</li>
<li>Remove workarounds for old pyOpenSSL versions (#4831, @KarlParkinson)</li>
<li>Add fonts to asset filter (~a) (#4928, @elespike)</li>
<li>Fix bug that crashed when using <code>view.flows.resolve</code> (#4916, @rbdixon)</li>
<li>Fix a bug where <code>running()</code> is invoked twice on startup (#3584, @mhils)</li>
<li>Correct documentation example for User-Agent header modification (#4997, @jamesyale)</li>
<li>Fix random connection stalls (#5040, @EndUser509)</li>
<li>Add <code>n</code> new flow keybind to mitmweb (#5061, @ianklatzco)</li>
<li>Fix compatibility with BoringSSL (@pmoulton)</li>
<li>Added <code>WebSocketMessage.injected</code> flag (@Prinzhorn)</li>
<li>Add example addon for saving streamed data to individual files (@EndUser509)</li>
<li>Change connection event hooks to be blocking.
Processing will only resume once the event hook has finished. (@Prinzhorn)</li>
<li>Reintroduce <code>Flow.live</code>, which signals if a flow belongs to a currently active connection. (#4207, @mhils)</li>
<li>Speculative fix for some rare HTTP/2 connection stalls (#5158, @EndUser509)</li>
<li>Add ability to specify custom ports with LDAP authentication (#5068, @demonoidvk)</li>
<li>Add support for rotating saved streams every hour or day (@EndUser509)</li>
<li>Console Improvements on Windows (@mhils)</li>
<li>Fix processing of <code>--set</code> options (#5067, @marwinxxii)</li>
<li>Lowercase user-added header names and emit a log message to notify the user when using HTTP/2 (#4746, @mhils)</li>
<li>Exit early if there are errors on startup (#4544, @mhils)</li>
</ul>
    </section>
    
</article>

</div></div>
  </body>
</html>
