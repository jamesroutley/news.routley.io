<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.bsdhowto.ch/doh.html">Original</a>
    <h1>Why not use DNS over HTTPS (DoH)?</h1>
    
    <div id="readability-page-1" class="page">





<p><code>Last update: 2018-10-26</code></p>

<h2 id="tl;dr">tl;dr</h2>

<p>DoH is not about protecting your DNS queries from peepers. That is a
big lie. It is about making sure only one peeper can see all of your
queries.</p>

<p>Refuse to use it today: Open about:config in Firefox and set
<code>network.trr.mode</code> to <code>5</code>. This will prevent Firefox from using DoH
under all circumstances.</p>

<h2 id="What%20is%20DNS%20over%20HTTPS%20(DoH)?">What is DNS over HTTPS (DoH)?</h2>

<p>DNS over HTTPS is described in <a href="https://tools.ietf.org/html/rfc8484.html">RFC 8484</a>
as a way perform DNS by wrapping it in HTTP and additionally encrypt the
data using TLS.
Advocates of DoH stress that the transport encryption protects your DNS
queries from peepers like your ISP or your network admin at work.
Adversaries critic that all DNS queries are directed to single DNS
provider who becomes the one known peeper.</p>

<h2 id="The%20basic%20idea">The basic idea</h2>

<p>The basic idea behind new developments like DoH is to protect your DNS
queries from peepers by implementing transport encryption. The same type
of transport encryption that protects many other application protocols
like HTTP and SMTP.
This is a very good idea because DNS queries in clear text contain very
interesting meta data about the sites you communicate with over the
Internet. This can be useful information for any kind of bad guy, be it
the NSA or the cyber-criminal.</p>

<h2 id="DoH%20encrypts,%20so%20it%20must%20be%20a%20good%20thing">DoH encrypts, so it must be a good thing</h2>

<p>The public didn&#39;t care about this RFC until Mozilla announced that they
implement this new protocol in Firefox for broad field testing in
collaboration with Cloudflare. The first reactions to this were: “DNS
gets encryption? This must be good thing.“ But slowly people started to
realize what the collaboration between Mozilla and Cloudflare really
means: Cloudflare gets all your DNS queries.</p>

<h2 id="But%20Cloudflare%20has%20a%20data%20protection%20policy">But Cloudflare has a data protection policy</h2>

<p>So what? Cloudflare is a commercial company. And commercial companies,
by definition, must earn money. How does a modern company in the IT
business earn money? By selling data.</p>

<h2 id="Is%20there%20an%20alternative%20way?">Is there an alternative way?</h2>

<p>Yes, there is. It is called DNS over TLS and is specified as a proposed
standard in <a href="https://tools.ietf.org/html/rfc7858">RFC 7858</a>.  This
provides transport encryption to DNS without abusing HTTP as transport
protocol.</p>

<h2 id="Why%20are%20you%20against%20changes%20in%20DNS?">Why are you against changes in DNS?</h2>

<p>I&#39;m not. The DNS needs modernization. The DNS needs security features
that prevent the peepers from reading your DNS traffic. I&#39;m all in for
it. But DoH is NOT the answer to this.</p>

<h2 id="But%20the%20protocol%20itself%20is%20a%20good%20idea">But the protocol itself is a good idea</h2>

<p>No, it is not. Abusing HTTP as a transport protocol for DNS data adds a
unneeded complexity to the protocol. You must add a HTTP module to all
DNS servers or interact with a separated HTTP server on the same system
in order to support DoH. That is a lot of code which can contain a lot
of bugs and security flaws. Complexity is the enemy of security.</p>



</div>
  </body>
</html>
