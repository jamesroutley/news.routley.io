<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.germanvelasco.com/blog/refactoring-is-a-habit">Original</a>
    <h1>Refactoring has a price. Not refactoring has a cost. Either way, you pay</h1>
    
    <div id="readability-page-1" class="page"><div>
      <p>I recently heard this phrase:</p>

<blockquote>
  <p>Good habits have a price. Bad habits have a cost. Either way, you pay.</p>
</blockquote>

<p>That is a great life lesson. But it’s also a great lesson for our team and
codebase.</p>

<p>Refactoring is a good habit.</p>

<p>I’m talking about refactoring as <a href="https://www.germanvelasco.com/blog/finding-the-time-to-refactor#thinking-differently">test-driven development (TDD) defines it</a> – something you do with every test and feature. I’m not talking about
pausing feature work for a month so we can do refactoring.</p>

<p>In TDD, we refactor as the third step of the red-green-refactor cycle:</p>

<ul>
  <li>Red: write a test that fails</li>
  <li>Green: get the test to pass</li>
  <li>Refactor: clean up the changes. Improve design.</li>
</ul>

<p><img src="https://www.germanvelasco.com/images/red-green-refactor-def-done.png" alt="Red points to green. Work isn&#39;t done. Green points to refactor. Now work is done. Refactor points back to red."/></p>

<p>Many developers think our work is done when the code “works” (when we get to green).
After all, the tests pass. So, we’re good, right?</p>

<p>I think that misses an amazing opportunity to improve our codebase!</p>

<p>The work is not done when the code works. The work is done when the code works
<em>and</em> when we’ve made sure the changes are designed well. And to do that, we
need to refactor.</p>

<p>Of course, refactoring after every feature has a price – just like good habits.
It takes time and discipline. But people erroneously think that the alternative
is free – that <em>not</em> refactoring has no cost.</p>

<p>Yet, if we don’t refactor continuously, we eventually have to pay the cost.</p>

<p>That cost is likely imperceptible at first. So, we carry on without refactoring.
Our codebase atrophies day by day, feature by feature, every change seemingly
not affecting the whole.</p>

<p>But one day all the cruft calcifies, and the numerous incompatible changes and
features grind our progress to a halt. It is <em>suddenly</em> impossible to add new
features without breaking something else. Bugs come up faster than we can squash
them. And every feature takes longer and longer to ship as we have to verify
that nothing is breaking.</p>

<p>The cost of our bad habit accumulates until we cannot foot the bill. That’s when
we throw in the towel, declare code bankruptcy, and call for the “great
rewrite”.</p>

<p>We either refactor continuously as we build features – paying the price. Or we
slowly accumulate cruft until our codebase is impossible to change – paying the
cost.</p>

<p>Either way, you pay.</p>

    </div></div>
  </body>
</html>
