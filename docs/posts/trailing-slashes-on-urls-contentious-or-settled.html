<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.zachleat.com/web/trailing-slash/">Original</a>
    <h1>Trailing slashes on URLs: Contentious or settled?</h1>
    
    <div id="readability-page-1" class="page"><div data-role="main" id="skiplink-content"><article><div><p>After some discussion with <a href="https://whitep4nth3r.com/"><img alt="IndieWeb Avatar for https://whitep4nth3r.com/" loading="lazy" decoding="async" src="https://v1.indieweb-avatar.11ty.dev/https%3A%2F%2Fwhitep4nth3r.com%2F/" width="60" height="60"/>Salma</a> last week, I decided it was worthwhile to do a deep dive on Trailing Slashes in URLs. More specifically, which of these should I be using?</p><ul><li><code>http://zachleat.com/resource</code></li><li><code>http://zachleat.com/resource/</code></li></ul><p>I did what any curious but self-doubting person might do in this situation. I <a href="https://twitter.com/zachleat/status/1485010201937944578">posted a Twitter poll</a>. The results surprised me!</p><p>But before we go much further, letâ€™s go over the problems weâ€™re trying to solve:</p><ol><li><strong>Performance</strong>: when you leave off a trailing slash and the platform expects one (or vice versa), you get a redirect which is a performance no-no.</li><li><strong>SEO</strong>: if your content exists at two (or more!) distinct URL endpoints, it is a SEO no-no. SE-no-no. SEO-apolo-graphql-anton-ohno (I apologize for nothing). <code>*Ahem*</code>. You <em>need</em> redirects.</li><li><strong>Asset References</strong>: if your markup uses relative paths to reference assets (e.g. <code>&lt;img src=&#34;image.avif&#34;&gt;</code>), these URLs may break if your host isnâ€™t aggressive enough with redirects to a canonical home base.</li><li><a href="https://www.11ty.dev/docs/permalinks/#cool-uris-dont-change"><strong>Cool URIs Donâ€™t Change</strong></a>: we want to avoid including any file extension in our URLs.</li></ol><p>At the end, the most important piece to remember here is that <strong>consistency is king</strong>. No matter which approach you use for a specific resource (trailing slash or sans the slash), it should be the canonical version and it should be used everywhere (even when third parties link to your site). Any other non-canonical version of the URL should (ideally) redirect to the canonical version.</p><p><em>Interestingly, some of my surprise at current sentiment was that <a href="https://twitter.com/chriscoyier/status/1485079001689255936">developers sometimes use different strategies for different types of content within the same project</a>! That was something I did not expect and am curious how well that is supported by tooling.</em></p><h2 id="perspectives" tabindex="-1">Perspectives <a href="#perspectives" aria-hidden="true">#</a></h2><p>I think the leaky part of the poll in question is that there are a bunch of different perspectives to this problem:</p><ol><li>Developers, wanting to implement a personal or team preference.</li><li>App/site/framework tooling (e.g. say, uh, youâ€™re the maintainer of Eleventy)</li><li>Platform (e.g. Netlifyâ€”casting a wide net and thinking what works best across as many tools and frameworks as possible)</li></ol><p><em>Disclosure: I am both an employee of Netlify and the creator/maintainer of Eleventy.</em></p><p><a href="https://sebastienlorber.com/"><img alt="IndieWeb Avatar for https://sebastienlorber.com/" loading="lazy" decoding="async" src="https://v1.indieweb-avatar.11ty.dev/https%3A%2F%2Fsebastienlorber.com%2F/" width="60" height="60"/>Sebastien Lorber</a> has put together an <a href="https://github.com/slorber/trailing-slash-guide">incredible repository of research results</a> showing how this works on a variety of popular hosts and static site generators. Iâ€™ll reference this data throughout this post. Sebastien also included results for a variety of different configuration options on those different platforms. I simplified to platform-default behavior for this post.</p><h3 id="writing-resourceindex.html" tabindex="-1">Writing <code>resource/index.html</code> <a href="#writing-resourceindex.html" aria-hidden="true">#</a></h3><p>Gatsby, Docusaurus, NuxtJS, and Eleventy all use folder generated <code>resource/index.html</code> files to offer an easy and portable way to use trailing slashes by default.</p><p>The default filename <code>index.html</code> is a convention thatâ€™s pretty safely cemented in web history at this point. It represents the file shown when a file name is not specified in the URL. <em>Citations from <a href="https://httpd.apache.org/docs/2.4/mod/mod_dir.html#directoryindex">Apache</a>, <a href="https://docs.nginx.com/nginx/admin-guide/web-server/serving-static-content/">NGINX</a>, <a href="https://docs.litespeedtech.com/cp/cpanel/switch-apache/#what-changes-do-i-need-to-make-to-my-apache-configuration-to-make-it-work">LiteSpeed</a>, <a href="https://docs.microsoft.com/en-us/iis/configuration/system.webserver/defaultdocument/">Microsoft IIS</a>.</em></p><p>Hereâ€™s what happens when a web browser makes a request to a URL representing this content:</p><ul><li><code>/resource</code><ul><li>âœ… GitHub Pages, Netlify, and Cloudflare Pages redirect to the trailing slash <code>/resource/</code> as expected.</li><li>ğŸŸ¡ <strong>Warning:</strong> Vercel, Render, and Azure Static Web Apps: slashless <code>/resource</code> returns content but without redirects, resulting in multiple endpoints for the same content.</li></ul></li><li><code>/resource/</code><ul><li>âœ… All hosts agree that <code>/resource/</code> should return content from <code>resource/index.html</code></li></ul></li><li>ğŸ’” <strong>Warning:</strong> If youâ€™re using relative resource URLs, the assets may be missing on Vercel, Render, and Azure Static Web Apps (depending on which duplicated endpoint youâ€™ve visited).<ul><li><code>&lt;img src=&#34;image.avif&#34;&gt;</code> on <code>/resource/</code> resolves to <code>/resource/image.avif</code></li><li><code>&lt;img src=&#34;image.avif&#34;&gt;</code> on <code>/resource</code> resolves to <code>/image.avif</code></li></ul></li></ul><h3 id="writing-resource.html" tabindex="-1">Writing <code>resource.html</code> <a href="#writing-resource.html" aria-hidden="true">#</a></h3><p>Both Jekyll and Next.js take a different approach. They output <code>resource.html</code> instead of index.html files.</p><p>Hereâ€™s what happens when a web browser makes a request to a URL representing this content:</p><ul><li><code>/resource</code><ul><li>âœ… Almost everyone agrees that <code>/resource</code> should return content from <code>resource.html</code></li><li>ğŸ†˜ <strong>Warning:</strong> Confusingly Vercel is the only host tested that returns a HTTP 404 error for <code>/resource</code>.</li></ul></li><li><code>/resource/</code><ul><li>âœ… Netlify and Cloudflare Pages redirect to the slashless <code>/resource</code>.</li><li>ğŸ†˜ <strong>Warning:</strong> GitHub Pages, Vercel, and Azure Static Web Apps all return a HTTP 404 error. Iâ€™ll admit this one is a little more contentious. I wonâ€™t take a hardline hereâ€”I can see the reasoning behind it. But I do consider it better to redirect than 404.</li></ul></li></ul><h3 id="writing-both-resource.html-and-resourceindex.html" tabindex="-1">âš ï¸ Writing Both <code>resource.html</code> and <code>resource/index.html</code> <a href="#writing-both-resource.html-and-resourceindex.html" aria-hidden="true">#</a></h3><p>There exists an even edgier edge case here. What happens when <code>resource.html</code> and <code>resource/index.html</code> both exist in a project?</p><ul><li><code>/resource</code><ul><li>âœ… Everyone agrees that <code>/resource</code> should return content from <code>resource.html</code></li></ul></li><li><code>/resource/</code><ul><li>âœ… Almost everyone agrees that <code>/resource/</code> should return content from <code>resource/index.html</code></li><li>ğŸ†˜ <strong>Warning:</strong> Netlify redirects to <code>/resource</code> instead.</li></ul></li></ul><p>More seriously, I think this case actually represents a larger URL <em>usability problem</em> for the content. In this case, though pedantically and technically correct, <code>/resource</code> and <code>/resource/</code> confusingly resolve to different pieces of content. I think this should be avoided if at all possible and a <strong>tooling error</strong> is warranted. It could be argued that Netlify takes an opinionated stance here to attempt to resolve the ambiguity at a platform level.</p><div><p><img alt="IndieWeb Avatar for https://www.11ty.dev/" loading="lazy" decoding="async" src="https://v1.indieweb-avatar.11ty.dev/https%3A%2F%2Fwww.11ty.dev%2F/" width="60" height="60"/>Eleventy Specific Note</p><p>Eleventy users can rest easy: because input files <code>resource.html</code> and <code>resource/index.html</code> both write to the output directory at <code>_site/resource/index.html</code> by default, we throw a <code>DuplicatePermalinkOutputError</code> error to mitigate this for you. (You can force the issue using <code>permalink</code> if you <em>really</em> want)</p></div><h2 id="results-table" tabindex="-1">Results Table <a href="#results-table" aria-hidden="true">#</a></h2><p>Hereâ€™s a summary table of the above findings, leaving off the (in my opinion) flawed <em>Writing Both</em> case above.</p><p><strong>Legend</strong>:</p><ul><li>ğŸ†˜ HTTP 404 Error</li><li>ğŸ’” Potentially Broken Assets (e.g. <code>&lt;img src=&#34;image.avif&#34;&gt;</code>)</li><li>ğŸŸ¡ SEO Warning: Multiple endpoints for the same content</li><li>âœ… Correct, canonical or redirects to canonical</li></ul><table><thead><tr><th></th><th colspan="2"><code>resource.html</code></th><th colspan="2"><code>resource/index.html</code></th></tr><tr><th>Host</th><th><code>/resource</code></th><th><code>/resource/</code></th><th><code>/resource</code></th><th><code>/resource/</code></th></tr></thead><tbody><tr><td><a href="https://slorber.github.io/trailing-slash-guide">GitHub Pages</a></td><td>âœ…</td><td>ğŸ†˜ <code>404</code></td><td>âœ…â¡ï¸ <code>/resource/</code></td><td>âœ…</td></tr><tr><td><a href="https://trailing-slash-guide-default.netlify.app">Netlify</a></td><td>âœ…</td><td>âœ…â¡ï¸ <code>/resource</code></td><td>âœ…â¡ï¸ <code>/resource/</code></td><td>âœ…</td></tr><tr><td><a href="https://vercel-default-eight.vercel.app">Vercel</a></td><td>ğŸ†˜ <code>404</code></td><td>ğŸ†˜ <code>404</code></td><td>ğŸŸ¡ğŸ’”</td><td>âœ…</td></tr><tr><td><a href="https://trailing-slash-guide.pages.dev">Cloudflare Pages</a></td><td>âœ…</td><td>âœ…â¡ï¸ <code>/resource</code></td><td>âœ…â¡ï¸ <code>/resource/</code></td><td>âœ…</td></tr><tr><td><a href="https://trailing-slash-guide.onrender.com">Render</a></td><td>âœ…</td><td>ğŸŸ¡ğŸ’”</td><td>ğŸŸ¡ğŸ’”</td><td>âœ…</td></tr><tr><td><a href="https://polite-bay-08a23e210.azurestaticapps.net">Azure Static Web Apps</a></td><td>âœ…</td><td>ğŸ†˜ <code>404</code></td><td>ğŸŸ¡ğŸ’”</td><td>âœ…</td></tr></tbody></table><h2 id="so-what" tabindex="-1">So, what? <a href="#so-what" aria-hidden="true">#</a></h2><p>Ideally, (speaking as the maintainer of Eleventy) folks working on developer tooling should craft tools to create output that uses existing conventions and can be portable to as many hosts in as many different hosting environments as possible.</p><p>That being said, given the above information it seems clear to me that <code>resource/index.html</code> is marginally safer than <code>resource.html</code> for tooling (on the premise that resolved but duplicated content with potentially missing assets is better than a 404 error ğŸ˜…).</p><p>Whatâ€™s more, I think it is the unique job of our development tools to help diagnose and mitigate future production problems. My (very biased) opinion is that more frameworks and tools should take a harder line in preventing confusingly similar but distinct URLs in a project. It is a usability error to have <code>resource.html</code> (output to <code>/resource</code>) and <code>resource/index.html</code> (output to <code>/resource/</code>) fighting over the same URL in the same project, and we should treat it as such.</p></div></article><article></article><article><dl><dt>Previous</dt><dd><a href="https://www.zachleat.com/web/back-to-the-facepile/">Back to the Facepile, Featherweight Edition</a></dd><dt>Next</dt><dd><a href="https://www.zachleat.com/web/external-link-favicons/">CSS-only External Link Favicons</a></dd></dl></article><div id="webmentions"><details><summary>1 Bookmark</summary></details><ul><li>These are <a href="https://indieweb.org/Webmention">webmentions</a> via the <a href="https://indieweb.org/">IndieWeb</a> and <a href="https://webmention.io/">webmention.io</a>.</li></ul></div></div></div>
  </body>
</html>
