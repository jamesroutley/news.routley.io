<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://unravelweb.dev/2024/02/12/the-u-u-conundrum/">Original</a>
    <h1>The Ã¼/Ã¼ Conundrum</h1>
    
    <div id="readability-page-1" class="page"><div>
		
<p id="9c3e">I implemented search and filtering for entities on our product at epilot. The users were heavily using the feature, however, a unique issue surfaced: difficulties in filtering file names containing diacritical marks like umlauts (<code>Ã„pfel</code>,Â <code>Ã¼ber</code>,Â <code>schÃ¶n</code>, etc.).</p>



<p id="b54a">Intrigued, I delved into the logic to investigate. Initially, everything seemed in order. For instance, a file named â€œblÃ¶bâ€ was saved precisely as â€œblÃ¶bâ€ â€” no bizarre encoding alterations were apparent.</p>



<p id="0f99">Can you spot any difference between â€œblÃ¶bâ€ and â€œblÃ¶bâ€?</p>



<p id="9a66">This time instead of typing the word in the search bar, I copied it from the uploaded and saved filename, and and voilÃ , the search functioned perfectly! ğŸ¤¯. This definitely meant the file name was subtly altered upon upload, hinting at a background encoding transformation.</p>



<p id="49f9">So, as anyone would, I employed the power ofÂ <code>encodeURIComponent</code>Â to see for myself what really was different.</p>



<p>There it was! The different types of encoding forms that led to this. Now you might be wondering (<em>I was wondering too!</em>):</p>



<p><em>As if worrying about encoding wasnâ€™t enough, now weâ€™ve got to stress over its different types too ğŸ¤¦â€â™€ and wait, its 2024, and we are still grappling with Unicode character encoding problems?</em></p>



<figure><img decoding="async" width="536" height="260" src="https://unravelweb.dev/wp-content/uploads/2024/02/image.png" alt="" srcset="https://unravelweb.dev/wp-content/uploads/2024/02/image.png 536w, https://unravelweb.dev/wp-content/uploads/2024/02/image-300x146.png 300w" sizes="(max-width: 536px) 100vw, 536px"/></figure>



<p>The culprits in this case were these two contrasting encoding types:Â <code><strong>%C3%BC</strong></code>Â andÂ <code><strong>%CC%88</strong></code>, leading to the search malfunction. This is a well-known issue with NFD/NFC encoding forms.</p>



<figure><img decoding="async" src="https://unravelweb.dev/wp-content/uploads/2024/02/10kVUt4jpUmk_aS0qk0riPA.png" alt=""/></figure>



<p><em>Now imagine explaining this technical jargon that to a user!Â </em>ğŸ˜ƒ</p>



<p><a href="https://drive.google.com/file/d/1Jkp8ye47iRfDoeTaMQkkskY_BTHegj_D/view">https://drive.google.com/file/d/1Jkp8ye47iRfDoeTaMQkkskY_BTHegj_D/view</a><br/></p>



<figure><video controls="" src="https://drive.google.com/file/d/1Jkp8ye47iRfDoeTaMQkkskY_BTHegj_D/view"></video></figure>



<p>Hope it helps!</p>
	</div></div>
  </body>
</html>
