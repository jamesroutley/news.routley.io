<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.variance.co/post/alignment-is-not-free-how-a-model-silenced-our-confidence-signals">Original</a>
    <h1>Alignment is not free: How model upgrades can silence your confidence signals</h1>
    
    <div id="readability-page-1" class="page"><div id="w-node-b7369729-0a2c-bcc3-a172-35503e523a83-6bf35c4a"><div><h3>The Flattening Calibration Curve</h3><p>The post-training process for LLMs can bias behavior for language models when they encounter content that violates their safety post-training guidelines. As mentioned by OpenAI’s GPT-4 system card, model calibration rarely survives post-training, resulting in models that are extremely confident even when they’re wrong.¹ For our use case, we often see this behavior with the side effect of biasing language model outputs towards violations, which can result in wasted review times for human reviewers in an LLM-powered content moderation system.</p><figure><p><img src="https://cdn.prod.website-files.com/67ad3648c8025e1491009050/6811271d3c77ca9a3d5973c6_Screenshot%202025-04-29%20at%2012.22.47%E2%80%AFPM.png" loading="lazy" alt=""/></p><figcaption>Pre-training vs. Post-preference optimization calibration curves</figcaption></figure><p>‍</p><h3>A Working Signal on GPT-4o</h3><p>Take the below histogram of log probs sampled from a golden dataset of false positives against GPT-4o. We can see that almost all outputs have log p≈0 nats (probability ≈ 1) for outputting “true”, indicating a true violation in this dataset. </p><p>However, there are a few outliers in this dataset, almost all of which correspond to patterns of behavior we observed in our dataset when our model would stray away from formal grounded policy definitions, or hallucinations in content or policy violations.</p><figure><p><img src="https://cdn.prod.website-files.com/67ad3648c8025e1491009050/68111feba061ca9521c24b99_AD_4nXc4p0jjcR6Rel5WOPrbPVMyXUMqcbD5AT86AB_541AJjUwHlud_EtiowpQcYpipRxBuw6eN1iGK5kaIzm2uKlBDTtB6WxzLtvCecMUd84R7suLDm2T11zTiMBSnL2eejPSMxJ9eDg.png" loading="lazy" alt=""/></p></figure><figure><p><img src="https://cdn.prod.website-files.com/67ad3648c8025e1491009050/68111ff755936e54ec7fcc6c_AD_4nXf_WGGEE5lX_FFXyFRQ2Cmb6d5STGsCwEXSeWDA4NB-EU3kVFSGi1iqtlpwCelFY50XAHyOvLL-HWlb99M7XfN3GlCYsMz9Ma0crhq1joIKqgHXJr_bD1LiuoEyOcWjbpLnbWr_EA.png" loading="lazy" alt=""/></p><figcaption>The functional confidence signal in GPT-4o</figcaption></figure><p>This results in a functional enough ROC curve that’s helpful for calibrating our model to ignore these outputs, and perform tasks like flagging the content for review or suppress the output as likely spurious. </p><h3>The Upgrade That Vanished Uncertainty</h3><p>However, what we found is that after switching to <strong>GPT-4.1-mini</strong>, this signal vanishes. Although we’re still able to measure log probs for other tokens in our structured outputs, each token was 100% confident that it should return <strong>true</strong> in this dataset, which completely destroyed our signal.</p><p>Why does a smaller sibling of the same model family erase so much information? It’s possible that due to the heavy distillation that occurs to train 4-1 mini for binary decisions (such as outputting a boolean field in a structured output), the dimension is collapsed entirely: the student is taught to emit the right answer and ignore entropy at all. This results in no usable confidence signal.</p><p>We tried several other approaches to recover the lost uncertainty signal, all unsuccessful:</p><ol role="list"><li><strong>Entropy differential hypothesis</strong>: We measured entropy between content array vs. chain-of-thought mean, with the theory that hallucinated violations would be wordier/less confident. In practice, we were unable to find a signal here</li><li><strong>Span consistency check</strong>: We analyzed standard deviation of span log-probs, hoping for variation between true/false cases. In practice, both classes showed σ≈0.018 (identical).</li><li><strong>Perplexity analysis</strong>: We calculated token-level perplexity averages across all samples. In practice, we found similar metrics for every sample, safe or unsafe.</li></ol><figure><p><img src="https://cdn.prod.website-files.com/67ad3648c8025e1491009050/681120cbf8610b3e751cdedc_AD_4nXetzSu2S_9xK0QNofczekM3zzwMkkMs9-cTPxGHuJKSiM3D4edDNoMoxI-V7qnzctSc2i3DVBzfX-9vVmdIw-2A-RryWT0DICt7jJNLOG10V279Jtm-sD0B70IOVa481B-wz9k.png" loading="lazy" alt=""/></p></figure><figure><p><img src="https://cdn.prod.website-files.com/67ad3648c8025e1491009050/681120cb2227a41c208ed615_AD_4nXcaBaPhXPNafcN5IFN9V3zuKlvsVmQZldhODPwxabh9knidnxa189QXguy5ot0fb6m3xFdc2JDHc3QOI8WsF_nQuipkpNHfSr4A12v1k_0cQViGVTGAkD3uNX_JEfkawhBn_NIo.png" loading="lazy" alt=""/></p></figure><figure><p><img src="https://cdn.prod.website-files.com/67ad3648c8025e1491009050/681121ba5e41b03f25a01c07_Screenshot%202025-04-29%20at%2011.59.54%E2%80%AFAM.png" loading="lazy" alt=""/></p><figcaption>Failed attempts to recover uncertainty signals in GPT-4.1-mini</figcaption></figure><p>The net result is that we’ve lost our signal for hallucinations! All of these features rely on local entropy surviving RLHF, and we don’t have anywhere to look for these signals, requiring new heuristics for model upgrades to solve these failure cases, to re-introduce some uncertainty measures.</p><p>In response to this lost hallucination signal, we&#39;ve implemented several alternative safeguards. These new methods, such as formally requiring policy explanations to be fully grounded in actual data/quotes, are powering new features in our product towards better explainability and policy iteration, but do show how there’s more to model upgrades than simply benchmark upgrades. </p><p>Our current approach relies on more explicit controls: <strong>requiring detailed explanations from the model for each policy violation</strong>, <strong>demanding specific policy citations to ground decisions</strong>, and <strong>implementing filtering systems to catch corrupted outputs when policies are hallucinated</strong>. </p><p>However, the closed-source nature of these models significantly limits our access to internal signals beyond log probabilities. As models continue to be further distilled for efficiency, even these limited signals are fading, creating a growing challenge for reliable uncertainty detection especially when working with closed-source models.</p><h3>Alignment isn&#39;t free</h3><p>In our situation, the improvements to steerability and performance upgrades of 4.1 were worth it for customers and our internal workarounds were sufficient to actually increase precision with our latest release. A model upgrade is not merely a drop-in performance bump; it is a distributional shift that can invalidate an entire AI stack. Anyone shipping high-precision systems should log raw logits, tie heuristics to specific model versions, and invest in alternative product safeguards. Alignment makes models safer for users but simultaneously masks their own uncertainty from engineers; the burden of re-exposing that uncertainty falls on us.</p><blockquote>1. *OpenAI GPT‑4 System Card*, § 6.2 “Calibration”: “We observe that RLHF improves helpfulness but can distort the model’s probability estimates; after alignment the model tends to be over‑confident on both correct and incorrect answers.</blockquote><p>‍</p></div></div></div>
  </body>
</html>
