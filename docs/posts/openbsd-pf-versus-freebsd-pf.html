<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://mwl.io/archives/23127">Original</a>
    <h1>OpenBSD PF versus FreeBSD PF</h1>
    
    <div id="readability-page-1" class="page"><article id="post-23127">
		<!-- .entry-header -->

	
	<div>
		<p>I encountered yet another discussion about <a href="https://www.openbsd.org/faq/pf/">OpenBSD PF</a> versus <a href="https://docs.freebsd.org/en/books/handbook/firewalls/">FreeBSD PF</a>. For those who are new to the discussion: OpenBSD developers created PF in 2001, and it rapidly improved to become the most approachable open source packet filter. FreeBSD ported PF over to its kernel in 2004, with occasional updates since. Today a whole bunch of folks who don’t program echo cultish wisdom that one or the other version of PF has fallen behind, not kept up on improvements, or otherwise betrayed their community. My subtler comments have been misinterpreted, so let’s try this.</p>
<p>These claims are garbage.</p>
<p>First, and most importantly: <a href="https://freshbsd.org/freebsd/src/branch/main?q=pf+openbsd">FreeBSD PF developers work with OpenBSD devs all the time</a>, and <a href="https://freshbsd.org/openbsd/src/branch/HEAD?q=pf+freebsd">OpenBSD PF developers pull stuff from FreeBSD</a>. You get a lot of noise about certain people being jerks about the other project–and both projects absolutely have jerks. (And yes, anyone who has read my books knows that I am a cross-platform jerk.) But for the most part, folks want to work together.</p>
<p>PF is absolutely an OpenBSD creation, though, so why isn’t the OpenBSD version the Single Source of Truth? Why doesn’t FreeBSD just consider OpenBSD a vendor and pull that code in? Because the OpenBSD and FreeBSD kernels are wholly different.</p>
<p>Back when I wrote <a href="https://mwl.io/nonfiction/nope">Absolute BSD</a>, I could realistically write a single book that would basically apply to the three major open source BSDs. Yes, the various projects objected to being lumped together, but if you knew any one of them you could stumble through the others. This is no longer true. FreeBSD’s kernel uses a wholly different locking model than OpenBSD. OpenBSD’s memory protections have no equivalent in FreeBSD. These are not things you can manage with a shim layer or kernel ABI. These are big, complicated, intrusive differences. You can’t tar up one version and dump it in the other’s kernel. It won’t work. If you do a hack job of making it work, it will perform badly.</p>
<p>Yes, you can find “proof” that one PF or the other is faster under particular workloads on specific hardware. I have no doubt that some of them are not only accurate, but honest. There are other workloads, though, and other hardware, and other conditions. Regardless of who wins a particular race, the constant competition to achieve peak performance benefits everyone. I’m not going to link to any of the benchmarks, because <a href="https://mwl.io/nonfiction/wtf#l2e1">I have made my opinions on benchmarking very clear elsewhere</a>. Pick what you want and roll with it.</p>
<p>Every PF developer is trundling along, doing their best to make things work.</p>
<p>Are features missing from one or the other? Yep. I’m not going to list examples because, as the above links show, each project plucks what they find useful from the other. These things are freely given, with glad hearts, but they take time to integrate. Filling message boards with staunch declarations that <em>my team’s PF is better</em> is not only tedious, it wholly misses the point.</p>
<p>People are working together to improve the world.</p>
<p>And the PF syntax is the most approachable in all of open source Unix.</p>
<p>(Partisan fanboy comments will be mercilessly whacked.)</p>
	</div><!-- .entry-content -->

	 <!-- .entry-footer -->
</article></div>
  </body>
</html>
