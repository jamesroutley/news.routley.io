<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://oohbleh.github.io/losing-seed/">Original</a>
    <h1>An unwinnable seed of Slay the Spire</h1>
    
    <div id="readability-page-1" class="page"><div>
    <h2 id="overview">Overview</h2>
<p>In this post, I will describe a collaborative effort that proved that unwinnable <em>Slay the Spire</em> seeds exist.  This project is joint work with <a href="https://github.com/gamerpuppy">gamerpuppy</a> and <a href="https://forgottenarbiter.github.io/">ForgottenArbiter</a> and is based on the several attempts that have been made to prove unwinnability for seeds in <em>Slay the Spire</em>.</p>

<h2 id="previous-progress">Previous progress</h2>

<p>In a blog post on <a href="https://forgottenarbiter.github.io/Is-Every-Seed-Winnable/">unwinnable seeds in <em>Slay the Spire</em></a>, ForgottenArbiter outlined a detailed approach to the problem of finding an unwinnable and shared a <a href="https://github.com/ForgottenArbiter/SeedSearch/tree/hard-seeds">branch of SeedSearch</a> which looks for these seeds.  We take <em>unwinnable</em> to describe any run of <em>Slay the Spire</em> that cannot be won by any sequence of decisions allowed by the base game (ignoring glitches).  Since the random number generation of <em>Spire</em> is determined uniquely by the run seed, the player can replay a seed, alter their card play order (and thus the outcome of later deck shuffles), and make unintuitive decisions, to maximize health and other resources throughout the run.</p>

<p>By analyzing optimal cases of card draw and deck shuffling, Arbiter proved that Silent’s starting deck loses against Lagavulin on Ascension \(18+\).  The argument completely ignores damage dealt to the player and focuses entirely on the lose condition: after \(3\) of Lagavulin’s debuff turns (\(-2\) dexterity and \(-2\) strength), the player can no longer deal damage.  If the player reaches a fight against Lagavulin without directly or indirectly improving the damage of their starter deck, they lose the run.  With this in mind, he formulated the following criteria when searching for unwinnable seeds.</p>

<ol>
  <li>Play as Silent on Ascension \(18\) or higher.</li>
  <li>Forced Lagavulin elite fight on floor \(6\), with no shops or rest sites on the first five floors.</li>
  <li>No Neow bonuses, potion drops, or card rewards which help the player deal damage to Lagavulin.</li>
</ol>

<p>The “most unwinnable” seed that resulted from this search is 3LWVGX7BL which has the following properties:</p>

<ol>
  <li>Neow Options: upgrade a card, \(100\)g, remove \(2\) cards (take \(15\) damage), swap for Cursed Key</li>
  <li>Card and potions before floor \(6\):
    <ul>
      <li>{Bane, Outmaneuver, Deflect}</li>
      <li>{Outmaneuver, Accuracy, Footwork} and Essence of Steel</li>
      <li>{Deflect, Outmaneuver, Setup} and Fruit Juice</li>
      <li>{Dodge and Roll, Accuracy, Tactician}</li>
    </ul>
  </li>
  <li>Lagavulin is the first elite.</li>
  <li>Forced burning elite (with the metallicizing buff) on floor \(6\) with no shops or rest sites beforehand.</li>
  <li>?-nodes are useless except for a possibly useful card transform (Adrenaline, etc).</li>
</ol>

<p>It is likely that this seed is unwinnable.  However, it can not be ruled out as winnable without detailed information about the shuffle RNG of the fight against Lagavulin.  In <em>Slay the Spire</em>, the random number generator which controls shuffle is instantiated at the start of each combat, and it depends only on the seed and the floor number.  By playing cards in a different order on the first cycle through the deck, the player can manipulate the order in which cards are drawn on later cycles.</p>

<p>For example, it is possible to reach Lagavulin on this seed with a deck which draws as follows:</p>
<ul>
  <li>Strike+, Bane+, Defend, Strike, Survivor, Defend, Defend,</li>
  <li>Footwork, Neutralize, Ascender’s Bane, Defend, Strike,</li>
  <li>Defend, Strike, Strike, Outmaneuver, <em>shuffle…</em></li>
</ul>

<p>By playing cards in a different order, the player controls the order of cards in their draw pile, and thus can manipulate how they are shuffled in the next deck cycle.  ForgottenArbiter has shown that with this deck and perfect shuffling on future turns, the player is able to deal exactly \(113\) damage to Lagavulin (which starts with \(112\) HP) before the debuffs reduce all damage to \(0\).  Whether this shuffle can be realized by the game’s RNG has not been determined.  With access to mid-turn deck shuffling from Adrenaline as well, this becomes much more difficult to analyze.</p>

<h2 id="the-hunt-for-an-abomination-18isl35fyk4">The hunt for an abomination: 18ISL35FYK4</h2>

<p>The goal of my search was to find a seed so heinous that the proof of unwinnability can fit on an index card (e.g., it requires no combat simulation).</p>

<p><img src="https://raw.githubusercontent.com/OohBleh/OohBleh.github.io/master/_posts/heinous-map.png" alt="bad map wow" height="433px" width="547px"/></p>

<p>As an integer, this seed is \(3,431,382,150,268,629\) or \(\sim 3.4\) quadrillion, but we make no claim that this is the first seed (as a positive integer) which is unwinnable.  This seed has the following properties:</p>

<ol>
  <li>Neow only offers \(1\) removal, gold, or a swap into Cursed Key.</li>
  <li>The map forces a burning elite fight (max HP Lagavulin) on floor \(6\) with no shops or rest sites beforehand.</li>
  <li>The player encounters \(2\) or \(3\) combats and the ?-nodes are mostly unhelpful.</li>
  <li>The cards offered do not directly add any damage and are draw-neutral.</li>
</ol>

<p>For now, we will outline the computational effort that led to its discovery.  Scroll down further to see the proof of unwinnability.</p>

<h3 id="bce-before-cuda-era">BCE (Before CUDA Era)</h3>
<p>I first got involved in this search in early January 2022 not long after finding and routing an <a href="https://youtu.be/8jHTNGrreTw">Ascension 20 Heart snipe seed</a>.  I had accomplished (with glitches and some very careful RNG manipulation) the first turn-\(1\) Heart kill since the boot bug exploited <a href="https://youtu.be/4knfPJyKLYY">here</a> by ForgottenArbiter was patched.  For it, I used <a href="https://github.com/gamerpuppy/sts_seed_search">gamerpuppy’s sts_seed_search</a>, which emulates essential seed searching functions at a low level in C++.  With this library, I am able to specify which RNG calculations I want to make, and how seeds are filtered.  For speedrun-related searches in the past, I have predominantly used ForgottenArbiter’s <a href="https://github.com/ForgottenArbiter/SeedSearch">SeedSearch</a> mod, which runs through the backend of the base game and comes with an easy to use list of seed criteria.</p>

<p>I filtered based on the floor \(0\) rewards from Neow, rewards of \(5\) (or sometimes \(4\)) combats, and only filtered for maps with a forced floor \(6\) elite and no shops or rest sites beforehand.  The filter order has a large impact on the rate at which seeds are tested.</p>

<p>\(\mathbb{E}[
    	\text{time spend testing a seed} | 
        \text{ testing } \mathcal{F}
        \text{ then } \mathcal{G}
    ]
    = s + pt.\)</p>

<p>Reversing the filter order exchanges \(s,t\) and \(p,q\) in this expression.  In order to minimize the average time spent testing each seed, the optimal filter order can be found by the following observation:</p>

<p><img src="https://raw.githubusercontent.com/OohBleh/OohBleh.github.io/master/_posts/filter-efficiency.png" alt="please work prose" height="46px" width="327px"/></p>

<p>These fractional expressions can be thought of as measures of the <em>efficiency</em> of the filters \(\mathcal{F}\) and \(\mathcal{G}\), under a minor concentration hypothesis.  When \(p\) is small, the denominator term is arbitrarily close to \(1\) (as is the case with map filtering), and only the time spent on the filter matters.  Following some experiments, we arrive at the following order on the filters:</p>

<ol>
  <li>\(\mathcal{N}:\) the floor \(0\) rewards from Neow are “unhelpful”.</li>
  <li>\(\mathcal{C}(5):\) the first \(5\) card rewards do not adequately augment Silent’s damage output.</li>
  <li>\(\mathcal{P}(5):\) the potions offered from the first \(5\) combats also do not augment damage output.</li>
  <li>\(\mathcal{E}:\) Lagavulin is the first elite fought.</li>
  <li>\(\mathcal{M}:\) no shops or rest sites appear before floor \(6\), and floor \(6\) only has elite fights.</li>
</ol>

<p>For other considerations such as ?-nodes outcomes and boss relic swaps, we print out some information on each seed that passes filters \(1\) through \(5\), and test everything else manually, or with Arbiter’s SeedSearch.  Adjusting parameters many times, the hardest seed I found with this approach was 37UKXMQJQ which meets the above properties.  More precisely:</p>

<ol>
  <li>\(\mathcal{N}\): \(1\) removal, \(100\)g, and \(250\)g for some max HP, or swap into Black Star.</li>
  <li>\(\mathcal{C}(5)\):
    <ul>
      <li>{Deflect, Prepared, Outmaneuver},</li>
      <li>{Outmaneuver, Dodge and Roll, Blur},</li>
      <li>{Backflip, Concentrate, Dodge and Roll},</li>
      <li>{Concentrate, Burst, Backflip}, and</li>
      <li>{Piercing Wail, Slice, Blade Dance}.</li>
    </ul>
  </li>
  <li>\(\mathcal{P}(5)\): \(1\) skill potion from the \(5\)-th combat (always {Calculated Gamble, Tactician, Setup}).</li>
  <li>\(\mathcal{E}\) and \(\mathcal{M}\) are met, and one of the floor \(6\) elites is the “burning” elite.</li>
  <li>?-nodes: Winged Statue (\(-7\) HP for \(1\) removal), Scrap Ooze (\(5\) or \(6\) hits for Tea Set), Wheel Gremlin (always gives \(1\) removal), and combat.</li>
</ol>

<p>While I am optimistic that this seed is unwinnable, proving it would require fully simulating several combats.</p>

<p>It became clear to me that in order to find a suitable seed, one which does not require brute force calculations and much casework, I would need to also force the player to fight a buffed Lagavulin on floor \(6\), as is the case with Arbiter’s seed.  Originally, the map constraint \(\mathcal{M}\) allows only \(1\) in \(\sim 15,000\) seeds through.  For a forced burning elite with no shops or rest sites beforehand (call this filter \(\mathcal{B}\)), only \(1\) in every \(\sim 225,000\) seeds passes through.  This search ran through the first \(10\) trillions seeds in one to two weeks of frequent breaks and changes to search parameters,.  It was time for a new approach.</p>

<h3 id="the-gpu-seed-farm">the GPU seed farm</h3>

<p>After several helpful conversations with gamerpuppy, they sent me a version of the <a href="https://en.wikipedia.org/wiki/CUDA">CUDA</a> code used for finding incredible <a href="https://docs.google.com/spreadsheets/d/1A3oW0tgInXa3h5azNoES4PQsTy-VdLFvDmn_CIUrbJE">Pandora’s Box boss swaps</a>.  In short, CUDA gives the programmer direct access to the GPU’s virtual instruction set and parallel computational capability, allowing for simultaneous computation with tens of thousands of <a href="https://en.wikipedia.org/wiki/Multithreading_(computer_architecture)">threads</a>, if ran on a state-of-the-art GPU.</p>

<p>To optimize performance, we feed in the most efficient constraints into CUDA: \(\mathcal{N}\) and \(\mathcal{C}(5)\) and take special care to minimize slowdown caused by <a href="https://en.wikipedia.org/wiki/Branch_(computer_science)">branching</a>.  Any seeds that pass these filters get written to a text file which can later be fed through the C++ program for further analysis.</p>

<p>To understand the strength of the card reward filter, consider the following set of Silent cards:</p>

<p><img src="https://raw.githubusercontent.com/OohBleh/OohBleh.github.io/master/_posts/bad-silent-cards.png" alt="please work prose"/></p>

<p>With the exception of Distraction, which may give a poison or shiv-generating card, these cards cannot be used to deal direct damage to Lagavulin or to gain positive draw.  For simplicity, we will approximate the probability that a card reward lies in this set as \(1/100\).  With \(5\) card rewards potentially possible before floor \(6\), roughly \(1\) in every \(10\) billion seeds will have \(5\) consecutive bad card rewards.  Even with several optimizations, the rate at which seeds passed \(\mathcal{N}\) and \(\mathcal{C}(5)\) was insufficient to find enough seeds passing the remaining filters \(\mathcal{P}(5)\), \(\mathcal{E}\), and most importantly, \(\mathcal{B}\).</p>

<h3 id="a-final-tradeoff">A final tradeoff</h3>

<p>As a running hypothesis, I had been planning for the worst case scenario where the player has access the maximum number of combats.  Having seen hundreds of \(\mathcal{B}\) maps, I knew that a fair number of them had only \(4\)-combat paths.  If we could relax the constraint on card rewards, many more seeds would be printed to file from the CUDA code, and maybe enough of those seeds would then pass the remaining \(3\) filters.</p>

<p>Checking the first \(100\) billion seeds, I made a discovery.  As many as a third of all \(\mathcal{B}\)-maps failed to have \(5\)-combat paths, and strikingly, \(~2\%\) of all \(\mathcal{B}\) maps had only \(3\) combats before the burning elite!  Altogether, this new constraint, call it \(\mathcal{B}(3)\), is satisfied by \(1\) in every \(~9.17\) million seeds, according to the sample.  While this may not seem like a lot, changing the nature of the filters in this way effectively swaps two \(1\)-in-\(100\) filters for a single \(1\)-in-\(50\) filter.  It also reduces a great deal of branching in the CUDA code by cutting down the scope of the main loop in the card reward filter.</p>

<p>After relaxing the card constraints from \(5\) rewards to \(3\) (that is, replace \(\mathcal{C}(5)\) with \(\mathcal{C}(3)\)), the CUDA code returned a batch of about \(234\) million seeds between \(1\) quadrillion and \(6.6\) quadrillion seeds, after only \(16\) hours of runtime on a modern GPU.  Four seeds MC81APL0TK, UL8LMGQV64, 1778H44QQQP, 18ISL35FYK4 emerged after being tested against properties \(\mathcal{N}, \mathcal{C}(3), \mathcal{P}(3), \mathcal{E},\) and \(\mathcal{B}(3)\),  with only the last one having a suitably unhelpul boss relic swap and event pool.</p>

<p>Finally, we are prepared to prove this seed is unwinnable.</p>

<h2 id="proof-of-unwinnability">Proof of unwinnability</h2>

<p>Let \(\mathcal{BS} := 3,431,382,150,268,629\) (also known as 18ISL35FYK4}.  We list some useful facts about this seed.</p>

<p><strong>Fact A</strong>. As Silent on Ascension \(18\) or higher with, a normal run with seed \(\mathcal{BS}\) manually entered has the following properties.</p>
<ol>
  <li>Neow offers \(1\) card removal, gold, or a boss swap into Cursed Key.</li>
  <li>Before floor \(6\), the only ?-node outcomes are World of Goop, Golden Idol, and The Cleric, in this order.</li>
  <li>The first \(3\) combats rewards before Lagavulin are:
    <ul>
      <li>{Prepared, Dodge and Roll, Escape Plan}, gold, and no potion.</li>
      <li>{Escape Plan, Outmaneuver, Prepared}, gold, and no potion.</li>
      <li>{Prepared, Dodge and Roll, Footwork}, gold, and a Block Potion.</li>
    </ul>
  </li>
  <li>Each path to floor \(6\) encounters either \(2\) combats and \(3\) ?-nodes, or \(3\) combats and \(2\) ?-nodes.</li>
  <li>The only map node on floor \(6\) is an elite combat aganist Lagavulin with \(144\) HP.</li>
</ol>

<p>The following argument was suggested to me by Arbiter.  To prove that \(\mathcal{BS}\) is unwinnable, we divide the fight according to the times at which a deck shuffle occurs.  In between shuffles, the player can play at most \(5\) Strikes and at most \(1\) Neutralize, with damage optimized by playing the Strikes as early as possible.  In this argument, we ignore the player’s health, the energy cost of the player’s cards, and the block on Lagavulin before it is awakened.</p>

<p>For convenience, let \(k\) be the combined number of copies of Escape Plan and Prepared in the player’s deck.  We state and prove the following claims about combat on floor \(6\).</p>

<p><strong>Claim B.0</strong>.  The first deck shuffle occurs at the start of turn \(1\) and the next deck shuffle occurs, at the earliest, at the start of turn \(2\).</p>

<p>Since Silent’s deck begins with \(12\) basic cards and Ascender’s Bane, and by floor \(6\), only \(2\) card removals are possible, the player’s deck has at least \(11+k\) cards.  Furthermore, noting the relics available, at most \(7+k\) cards are drawn on turn \(1\).  So no other shuffle occurs during turn \(1\), completing the proof.</p>

<p><strong>Claim B.1</strong>.  If the player shuffles the deck at the start of turn \(t\) where \(t \geq 2\), then the next deck shuffle occurs, at the earliest, at the start of turn \(t+2\).</p>

<p>Noting that by floor \(6\), at most \(2\) removals are possible, and since Ascender’s Bane can be exhausted, it follows that combined number of cards in the player’s hand, discard pile, and draw pile is always least \(10 + k\).  Since \(t \geq 2\), turn \(t\) begins with the player drawing \(5\) cards.  Moreover, due to the limited card pool and relics, and the available potions, no cards can be played to increase the number of cards in-hand.  It follows that the player has at most \(5\) cards in-hand just before the shuffle at time \(t\).</p>

<p>Since the player has at most \(5\) cards in-hand at the start of turn \(t\), there are at least \(5+k\) cards in the draw pile.  On turns \(t\) and \(t+1\), at most \(k\) draw cards (Escape Plan and Prepared) can be played.  It follows that the player cannot shuffle the deck again during turns \(t\) and \(t+1\).</p>

<p><strong>Claim B.2</strong>.  If the player shuffles the deck during turn \(t\) where \(t \geq 2\) by playing cards, then the next deck shuffle occurs, at the earliest, during turn \(t+2\).</p>

<p>As before, note that the combined number of cards in the player’s hand, discard pile, and draw pile is always least \(10 + k\).  Note also that the player has at most \(5\) cards in-hand just before this shuffle, and at least one of these cards is a draw card.  It follows that turn \(t\) ends with one draw card and at most \(5\) non-draw cards in the discard pile.  This implies that the draw pile consists of at least \(10-5 = 5\) non-draw cards at the end of turn \(t\).  So no other shuffle occurs during turns \(t\) and \(t+1\), as desired.</p>

<p><strong>Claim C</strong>.  Suppose the player shuffles the deck on turn \(t\).  In the time after this shuffle, but before the next shuffle, the player’s damage output is bounded above by the damage dealt with the following sequence of card plays:</p>

<ul>
  <li>play \(5\) Strikes and \(1\) Neutralize on turn \(t\) if \(t = 1\), and</li>
  <li>play \(5\) Strikes on turn \(t\) and \(1\) Neutralize on turn \(t+1\).</li>
</ul>

<p>Indeed, during this time, each damage card (at most \(5\) Strikes and \(1\) Neutralize) enters the player’s hand, and thus can be played, at most once.  Starting from turn \(2\) or higher, at most \(5\) of these cards can be played on a given turn, and playing the Strikes on the earliest possible turn deals more damage.</p>

<p>To complete the proof, consider the sequence \(1 = t(1)\leq t(2)\leq \cdots\) of turns on which a shuffle occurs.  By Claims B.0, B.1, and B.2, it follows that \(t(2)\geq 2\) and \(t(i) \geq t(i-1) + 2\) for all \(i \geq 3\) such that \(t(i)\) is defined.  By Claim C, the maximum damage dealt to Lagavulin before the 3rd debuff is bounded above by the damage dealt by (1) playing \(5\) Strikes and \(1\) Neutralize on the “wake-up” turn, and (2) alternatingly on future turns playing \(5\) Strikes on even turns and \(1\) Neutralize on odd turns.  So the damage dealt to Lagavulin before the \(3\)-rd debuff is applied is</p>
<p><img src="https://raw.githubusercontent.com/OohBleh/OohBleh.github.io/master/_posts/damage-between-shuffles.png" alt="please work prose"/>.</p>
<p>Since Lagavulin’s total HP equals \(144\), \(\mathcal{BS}\) is unwinnable as Silent on Ascension \(18\) or higher.</p>

<h2 id="future-work">Future work</h2>

<p>With more powerful seedsearching tools at our disposal, we return to some questions considered by Arbiter in his <a href="https://forgottenarbiter.github.io/Is-Every-Seed-Winnable/">blog on unwinnable seeds</a>, and some other problems.  If you are interested in joining the search, take a look at the <a href="https://github.com/OohBleh/cuda-the-spire">CUDA code</a> as well as <a href="https://github.com/gamerpuppy/sts_seed_search">sts_seed_search</a>.</p>

<h3 id="what-if-the-player-gets-neows-lament">What if the player gets Neow’s Lament?</h3>

<p>As a running assumption during this project, we assumed that the unwinnable seed had to be manually entered.  A manually entered seed always offers the player \(4\) options from Neow on floor \(0\).  If instead the player were encountered our unwinnable seed 18ISL35FYK4 by chance without having reached the Act I boss on their previous run, they would be offered Neow’s Lament (or some extra max HP).  Our seed 18ISL35FYK4 would surely be winnable because the burning elite could be killing using the \(3\)-rd stack of Neow’s Lament.</p>

<p>To work around this, we could run the search for a longer time to find many seeds similar to 18ISL35FYK4, and select one which cannot avoid \(3\) combats before the fight with Lagavulin (whether this is due to the seeded RNG of ?-node outcomes or the map layout.  For example, we could find such a seed for which the ?-node outcomes are  event, event, combat, combat.  Likely this search would not take more than a week on a state-of-the-art Nvidia GPU (for compatibility with CUDA).</p>

<h3 id="what-about-other-characters">What about other characters?</h3>

<p>As Arbiter argued, it is likely that unwinnable seeds for Ironclad and Defect exist.  However, it is also likely that a proof of unwinnability would involve the shuffle RNG of fights, and perhaps a full combat simulation to test sequences of mid-combat decisions for survivability.  Other characters’ starter decks can deal damage to Lagavulin after the \(3\)-rd turn of debuffing, and exhaustively simulating more than \(10\) turns is likely impractical.  I believe that the following search criteria are likely to yield an unwinnable Ironclad seed:</p>

<ol>
  <li>\(\mathcal{N}\): transform \(1\) (receive an unhelpful card), \(100\)g, \(250\)g for any downside, and a harmful or neutral boss relic swap (Black Star, Sacred Bark, etc)</li>
  <li>\(\mathcal{C}(3)\): only offered draw-neutral skill cards and unhelpful powers</li>
  <li>\(\mathcal{P}(3)\): no potions</li>
  <li>\(\mathcal{E}\): first elite is <strong>Gremlin Nob</strong></li>
  <li>\(\mathcal{B}(3)\): no shops or rest sites before a floor \(6\) burning elite</li>
</ol>

<p>Compared to Lagavulin, Gremlin Nob…</p>
<ul>
  <li>deals more damage in a \(3\)-turn cycle,</li>
  <li>begins dealing damage on turn \(2\) regardless of the player’s decisions,</li>
  <li>penalizes playing skill cards and severely limits deck manipulation and blocking,</li>
  <li>still has at least \(106\) HP if given the max HP buff.</li>
</ul>

<p>Additionally, fights against Gremlin Nob typically last fewer turns than both Lagavulin and Three Sentries and are thus easier to simulate.</p>

<p>If the player draws Bash too late during the first deck shuffle and has an unfavorable reshuffle with their Strike cards, they are likely unable to survive Gremlin Nob’s attack for too many turns, even if they are able to enter the fight with full HP (\(80\)).  Unmitigated, Gremlin Nob deals a minimum of \(88\) damage in the first \(6\) turns.</p>

<p>For a similar reason, the Defect may also be unable to survive an unfavorable combat against a buffed Gremlin Nob.</p>

<h3 id="what-about-watcher">What about Watcher?</h3>

<p>Watcher is highly regarded as the strongest of the \(4\) characters in <em>Slay the Spire</em>.  With her starting deck alone, the player can deal \(123\) damage during the first \(2\) cycles through the deck.  This exceeds the maximum base HP of Gremlin Nob and Lagavulin, and sometimes can kill all \(3\) Sentries.</p>

<p>On the other hand, if the player is unable to play \(2\) Strikes during this time, this amount is reduced to \(99\), which is less than the minimum HP of a HP-buffed Gremlin Nob.  Remaining in wrath stance also poses a significant constraint on the player.  If the player is in wrath during a \(3\)-attack cycle, then, unmitigated, Gremlin Nob’s attacks during this time total a minimum \(112\) damage, which eclipses Watcher’s starting HP of \(61\) (Ascension \(14+\)), and the lesser of these two attacks totals \(64\) damage.</p>

<p>How many of Watcher’s skill and power cards are helpful in this particular fight?  While the answer is probably “many”, I do not believe it is “all”.  I am optimistic that even an unwinnable Watcher seed could be found in a few days of searching, and proven, with the aid of a moderately optimized, RNG-accurate combat simulator.</p>

<h3 id="are-there-unwinnable-runs-with-glitches">Are there unwinnable runs with glitches?</h3>

<p>If you watched <a href="https://youtu.be/Q7FlPBFKX_Q"><em>Slay the Spire</em> at AGDQ 2022</a> or have otherwise seen some <em>Slay the Spire</em> speedrunning, you probably know that this game has <a href="https://docs.google.com/spreadsheets/d/101K_6xxDjQH2caGApCMxgrybOScGw0VRwd5C-qYl0tA/">a lot of glitches</a>.  Using a variety of different node entry manipulation glitches, the player can:</p>

<ol>
  <li>(double node) enter \(2\) or more map nodes on the same floor,</li>
  <li>(node dupe) enter the same map node twice,</li>
  <li>(node reroll) change the combat in a duplicated combat node, and</li>
  <li>(node ladder) climb the map on multiple paths at once.</li>
</ol>

<p>By node glitches alone, the player significantly increases their chance of accessing damage-dealing cards, deck manipulation, potions, card removals, card upgrades, and shops from ?-nodes.  While it may be possible to contrive scenarios for unwinnable glitched runs, they are necessarily more scarce by several orders of magnitude.  For example, by duplicating combats, the player can turn a \(3\)-combat path into one with \(5\) or even \(6\) combats before the burning elite.  By visiting additional map nodes, the player also changes the floor number during the burning elite fight, and can improve their deck manipulation in this fashion.</p>

<p>I doubt such a seed exists.  If one does, it is unclear how one would find it, let alone prove it is unwinnable.</p>



<p>That it has taken \(3\) years since the game’s main release (and over \(4\) years since it was released for early access) to find and prove seed unwinnability is a testament to the strength of <em>Slay the Spire</em>’s balance and design.  How much further can we go?  I do not know, but I invite any interested programmer to check out the <a href="https://github.com/gamerpuppy/sts_seed_search">C++</a> and <a href="https://github.com/OohBleh/cuda-the-spire">CUDA</a> code.  Don’t be afraid to get in touch (see main blog page for contact info) and join the fun.</p>

  </div></div>
  </body>
</html>
