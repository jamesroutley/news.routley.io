<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/DaveJarvis/KeenType">Original</a>
    <h1>KeenType: Pure Java typesetting system</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto">KeenType is a modernized version of a Java-based implementation of the
<a href="https://ctan.org/tex-archive/systems/nts" rel="nofollow">New Typesetting System</a>,
which was heavily based on Donald E. Knuth&#39;s original TeX.</p>
<p dir="auto">This implementation provides a 100% pure Java library that can produce
scalable vector graphics of mathematical expressions. All required
fonts, font metrics, glyph mappings, and plain TeX files are included.</p>

<p dir="auto">Building software requires:</p>
<ul dir="auto">
<li>JDK 19</li>
<li>Gradle 7.6</li>
</ul>

<p dir="auto">After cloning this repository, build the application as follows:</p>

<p dir="auto">The compiled artifact is <code>app/build/libs/keentype.jar</code>.</p>

<p dir="auto">Run the application using any of the following commands:</p>
<div data-snippet-clipboard-copy-content="java -jar app/build/libs/keentype.jar docs/examples/sample.tex
java -jar app/build/libs/keentype.jar docs/examples/equations.tex"><pre><code>java -jar app/build/libs/keentype.jar docs/examples/sample.tex
java -jar app/build/libs/keentype.jar docs/examples/equations.tex
</code></pre></div>
<p dir="auto">Open the resulting SVG file in an SVG editor to see the results.</p>

<p dir="auto">To use KeenType as a library:</p>
<ol dir="auto">
<li>Build the project.</li>
<li>Copy <code>keentype-lib.jar</code> into your application.</li>
</ol>
<p dir="auto">Typeset an equation to SVG as follows:</p>
<div dir="auto" data-snippet-clipboard-copy-content="final var str = &#34;$\\sigma=\\sqrt{\\sum\\limits_{i=1}^{k} p_i(x_i-\\mu)^2}$&#34;;
final var typesetter = new KeenType();
final var svg = typesetter.toSvg( str );"><pre><span>final</span> <span>var</span> <span>str</span> = <span>&#34;$\\sigma=\\sqrt{\\sum\\limits_{i=1}^{k} p_i(x_i-\\mu)^2}$&#34;</span>;
<span>final</span> <span>var</span> <span>typesetter</span> = <span>new</span> <span>KeenType</span>();
<span>final</span> <span>var</span> <span>svg</span> = <span>typesetter</span>.<span>toSvg</span>( <span>str</span> );</pre></div>
<p dir="auto">The <code>svg</code> string contains an SVG document.</p>
<p dir="auto">Note that instantiating <code>KeenType</code> will load and parse Knuth&#39;s <code>plain.tex</code>
into memory. This is an expensive operation that will significantly reduce
performance if executed in a critical loop. Preferably, the instance is
reused until no longer needed. For example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="final var typesetter = new KeenType();

for( int i = 0; i &lt; 1000; i++ ) {
  System.out.println( typesetter.toSvg( equation[ i ] ) );
}"><pre><span>final</span> <span>var</span> <span>typesetter</span> = <span>new</span> <span>KeenType</span>();

<span>for</span>( <span>int</span> <span>i</span> = <span>0</span>; <span>i</span> &lt; <span>1000</span>; <span>i</span>++ ) {
  <span>System</span>.<span>out</span>.<span>println</span>( <span>typesetter</span>.<span>toSvg</span>( <span>equation</span>[ <span>i</span> ] ) );
}</pre></div>
<p dir="auto">Be sure to wrap TeX-based equations in <code>$</code> or <code>$$</code> prior to typesetting.</p>

<p dir="auto">The <a href="https://github.com/css4j/echosvg">EchoSVG</a> library is a modern fork of
Apache Batik that can rasterize SVG documents.</p>

<p dir="auto">The following image shows various equations and mathematics being typeset in
the Java-based desktop Markdown editor, <a href="https://keenwrite.com" rel="nofollow">KeenWrite</a>:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/DaveJarvis/KeenType/blob/main/docs/images/keentype-01.png"><img src="https://github.com/DaveJarvis/KeenType/raw/main/docs/images/keentype-01.png" alt="KeenType screeshot"/></a></p>

<p dir="auto">The code is organized as follows:</p>
<ul dir="auto">
<li>app -- The main application launched when running the JAR file.</li>
<li>docs -- Information about changes and source code history.</li>
<li>dvi -- Typesets into the device independent format.</li>
<li>fonts -- Unused fonts.</li>
<li>lib -- Library for converting equations to renderable SVG documents.</li>
<li>log -- Logs information to the console.</li>
<li>svg -- Typesets into the scalable vector format.</li>
<li>tex -- Implements the typesetting system (fails the <a href="http://mirrors.ctan.org/info/knuth-pdf/tex/tripman.pdf" rel="nofollow">TRIPTEST</a>).</li>
</ul>

<p dir="auto">See <a href="https://github.com/DaveJarvis/KeenType/blob/main/LICENSE.txt">LICENSE</a> for details.</p>

<p dir="auto">See <a href="https://github.com/DaveJarvis/KeenType/blob/main/docs/CHANGELOG.md">CHANGELOG.md</a> for details about the modifications
from the original implementation.</p>
</article>
          </div></div>
  </body>
</html>
