<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://eerielinux.wordpress.com/2025/05/31/installing-bsd-in-2025-part-3-a-critical-look-at-netbsds-installer/">Original</a>
    <h1>A critical look at NetBSD’s installer</h1>
    
    <div id="readability-page-1" class="page"><article id="post-5134">
	<!-- .entry-header -->

	<div>
		<p><small>
<p><strong>[New to Gemini? Have a look at my <a href="https://eerielinux.wordpress.com/gemini-faq">Gemini FAQ</a>.]</strong></p>
<p><strong>This article was bi-posted to Gemini and the Web</strong>; Gemini version is here: <code>gemini://gemini.circumlunar.space/users/kraileth/neunix/2025/installing_bsd_pt3.gmi</code></p>
</small></p>
<p>The <a href="https://eerielinux.wordpress.com/2025/03/30/installing-bsd-in-2025-part-1-a-critical-look-at-freebsds-installer/">first part</a> of this series was about FreeBSD’s installer and the <a href="https://eerielinux.wordpress.com/2025/04/27/installing-bsd-in-2025-part-2-a-critical-look-at-openbsds-installer/">second</a> covered OpenBSD’s installation program.</p>
<p>This is a longer article and it has the most images that I ever included in one. While writing the other two articles didn’t take me too long, this one has has occupied several evenings / nights over the course of about three weeks.</p>
<p>NetBSD is an OS that I installed only a couple of times over the years, so I’m not very familiar with its installer, <em>sysinst</em>. This fact was actually what led to this article (or the whole series rather): Talking to a NetBSD developer at EuroBSDcon 2023, I mentioned my impression that NetBSD was harder to install than it needed to be. He was interested in my perspective as a relative newcomer, and so I promised to take a closer look and write about it. While it certainly took me long enough, I finally get to do this. So let’s take a look at NetBSD’s installer, shall we? The version explored here is NetBSD <em>10.1</em> on <em>amd64</em>.</p>
<h2>Installing a simple graphical NetBSD system</h2>
<p>Sysinst is menu-driven like FreeBSD’s installer, but the two are quite different. This is not a direct comparison, but I’m going to mention other installers where appropriate. Like in the previous two articles, I’m going to install the OS twice: One time using the standard VGA console and once to assess how well it works over serial. Both installations will be in VMs just for the sake of convenience.</p>
<h3>Language settings</h3>
<p>The first screen that the installer presents is the language selection. If you’re used to more mainstream operating systems, you may be surprised that there’s only four languages in addition to English. But hey: Many other installers are available in English only, and if you’re somebody who’s more comfortable with German, (Castilian) Spanish, French, or Polish than with English, it’s nice to have the option!</p>
<p>I like that there’s a short introduction text at the top which briefly explains how to navigate the installer. This is very nice for newcomers! Assigning each item an alphabetic hotkey is also a great mechanic that makes navigating the installer a breeze even if there’s a lot of options (FreeBSD’s choice of numeric hotkeys is obviously inferior as soon as there are more than ten items).</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie829.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie829.png"/></a><b>Language selection</b></p>
<p>After selecting the language, the installer presents a list of supported keyboard layouts. Again, NetBSD’s installer does not offer the most comprehensive list ever, but there are some surprises. Given the relatively short list, your preferred keymap may not be available.</p>
<p>You probably wouldn’t expect that somebody invested the effort to make Icelandic available, would you? And there’s also things like “German (NEO2)”, a relatively obscure ergonomic variant (that I’ve actually used in the past before adopting BONE whith is basically NEO3). Not even FreeBSD offers NEO2, BTW. Those unusual cases are strong indicators of the NetBSD project being happy to include contributions. So if you consider making a keymap for your layout, another option in the list could probably be yours!</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie830.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie830.png"/></a><b>Keyboard layout selection</b></p>
<p>Next is the main menu that allows the user to either install a fresh system, upgrade an existing one, reboot and so on. Like in the menu before, the text at the top did not change. But it didn’t have to since once again the menu options are self-explanatory.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie831.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie831.png"/></a><b>Installer options</b></p>
<p>The next screen presents some information on the steps of the installation process and asks if that is what the user wants to do. It’s concise and to the point – I like it. It means an additional key press, but it’s helpful for newcomers.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie832.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie832.png"/></a><b>Installation process overview</b></p>
<h3>Preparing the hard disk</h3>
<p>Now sysinst needs to know the installation target. I believe a more detailed explanation at the top would be beneficial. It’s probably nitpicking to point out that “Extended partitioning” is not exactly an answer to the question “On which disk do you want to install NetBSD?”. That aside, I genuinely believe this screen could be improved. Something like “Select a single disk as the installation target or choose ‘extended partitioning’ for softraid, a logical volume manager or device encryption.” would be better. Probably mentioning that ‘wd*’ means IDE or SATA drives, ‘sd*’ is for SCSI or external USB drives and ‘ld*’ are logical drives like VirtIO drives and NVME could be helpful as well.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie833.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie833.png"/></a><b>Installation target selection</b></p>
<p>The next screen does not have any explanatory text at all – another missed opportunity. While people who install NetBSD probably know it, would it hurt to mention that MBR is the scheme that older BIOS systems expect while GPT is required for EFI systems? I guess it wouldn’t.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie834.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie834.png"/></a><b>Partitioning scheme selection</b></p>
<p>The partition options and the description text for GPT are fine.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie835.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie835.png"/></a><b>Partitioning options</b></p>
<p>The default partition layout makes sense: One big partition for /, another for swap and a tmpfs-backed one for /tmp – and of course the FAT partition that is required for EFI booting. Since splitting out /usr and /var is common, both are suggested but have a size of 0, so they won’t be used unless the proposed layout is edited.</p>
<p>In general the top text is fine. While the explanation of the plus sign is helpful, I would appreciate a hint on how to select the partition that receives the plus. It took me quite a while to find out that when defining a partition size it can simply be appended! This was not immediately obvious to me.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie836.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie836.png"/></a><b>Partition sizes and file systems</b></p>
<p>Editing partition sizes is easy enough. However the fact that giving /usr a size that is not 0 by default moves the plus sign to it even if *not* added to the size entered is quite confusing. It makes the plus mechanic appear magic even though it really isn’t. To be honest, before taking a closer look at sysinst, I assumed that it was not possible to add the plus e. g. to /home like I would have liked to do! Up until recently this was one of the things that bugged me about NetBSD’s installer. I read <em>The NetBSD Guide</em>‘s chapter on the installation and that info is not in there, either.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie837.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie837.png"/></a><b>Editing a partition size</b></p>
<p>While it’s quite common for installers to allow specifying the unit as a suffix to the size, NetBSD does this differently. Sysinst allows for changing the unit via an option in the menu. It’s definitely useful to be able to switch to GB when partitioning large drives (and I guess due to the portability aspect of NetBSD it may make sense for some architectures to allow entering sectors or cylinders for more control).</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie838.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie838.png"/></a><b>Changing input units</b></p>
<p>The drawback with NetBSD’s method is that this makes the EFI partition appear as 0 GB as it’s only 128 MB. Allowing for input sizes like ’20g’ and ‘128m’ would be more flexible. Then again setting the EFI partition’s size (or just leaving it alone altogether) before switching units of course also works. Maybe displaying the size as 0.1 or something instead of 0 in that case would still make sense?</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie839.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie839.png"/></a><b>Partition sizes now in GB</b></p>
<p>Adding more partitions is easy to do; the first menu option below the table will let you do that. Sysinst asks for a mountpoint in that case and adds the new partition to the table. Not being able to cancel the operation with ESC feels a little weird. If the box said “Mount point (leave empty to cancel)?: ” or something like that it would be clear how to abort adding another partition.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie840.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie840.png"/></a><b>Adding a custom partition</b></p>
<p>I simulated fat-fingering the input here by “accidentally” creating a “/s” partition. Much to my frustration I did not find out how to delete partitions from the table! Yes, since /usr and /var are initially of size 0, one can deduce that allocating no space to it will probably make the installer discard them. It’s details like these that make sysinst feel somewhat unfriendly and leave a negative impression.</p>
<p>I also don’t like that it’s not possible (or I was at least unable to find out how to do it) to change the mount point once the table entry is there. These two problems are also likely much worse with an MBR slice as BSD disklabels have a maximum number of partitions. If you’re doing a complex layout, better get it right the first time! It’s probably less of a problem for regular NetBSD users, but people who are new to an OS and are giving it a first try are not *that* unlikely to change their mind over the partitioning. The feeling of being unable to undo a mistake is discouraging.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie841.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie841.png"/></a><b>Two new partitions added – one as a deliberate mistake</b></p>
<p>After finishing the partitioning, an overview of the layout is presented that the user can either accept – or cancel the installation. Again as a user I can’t say that I feel in control here. This screen basically asks: “Is this ok?”. And the only option besides “yes, go ahead” is “no, let me start over completely”. How about “let me go back to the partition editor and fix one small mistake”? Why isn’t there an option to modify this layout, and can I only accept or discard it? Again, this is probably not so much a problem for people who regularly install NetBSD. As someone who does so infrequently, I’m not entirely satisfied with this.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie842.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie842.png"/></a><b>Partition layout overview</b></p>
<p>Next is another screen that gives the user the chance of “yes” and “no”. While it feels a bit redundant, I think it makes sense to make sure people are aware that at this point the changes will be written to the drive and data previously on it will be destroyed. It could probably still be another window over the last screen rather than a separate one. That’s a relatively minor point, though.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie843.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie843.png"/></a><b>Make changes to the drive?</b></p>
<h3>Writing the system to disk</h3>
<p>Acknowledging the previous question, sysinst creates the partitions and filesystem(s). Now the user gets to choose which components of the OS to install. I like the options as well as the text.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie844.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie844.png"/></a><b>Selecting the distribution sets</b></p>
<p>Now the user has to select the source for the distribution sets. The text only mentions FTP and NFS as requiring a network while this is of course the case for HTTP as well. I assume that this is because the other two are traditional sources while HTTP was added later but the text was not updated. This is of course another nit-picky one.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie845.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie845.png"/></a><b>Selecting the installation source</b></p>
<p>With the source selected, the actual installation (unpacking of the distribution sets) begins. What I find a little strange is that while there is a progress bar, it’s for every single distribution tarball <em>individually</em>. There’s no global progress displayed anywhere! And since NetBSD consists of a respectable number of sets, I actually kind of miss this. Fortunately the system is fairly slim (especially compared to many other operating systems) and so the installation doesn’t take too long (even on machines with old, slow drives).</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie846.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie846.png"/></a><b>Extracting a distribution set</b></p>
<p>When all the sets were extracted, there’s an information screen letting the user know that the new system can now be configured. While in theory the process could be streamlined and this screen be dropped, the completion of the data transfer is probably significant enough to warrant it.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie847.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie847.png"/></a><b>Set extraction complete</b></p>
<h3>System configuration</h3>
<p>The first thing that the installer lets you do to configure the system is setting a root password. While this is not technically necessary, basically everybody will want to do that, so it’s a logical choice to present it automatically.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie848.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie848.png"/></a><b>Setting the root password</b></p>
<p>Afterwards, sysinst presents a very nice configuration menu with various options that allow for convenient configuration of some basics. The “Configure additional items as needed.” would be fine – if all options were self-explanatory. For newcomers however, they aren’t. I would suggest changing “Enable xdm” to “Enable xdm (X11 display manager)”, “Enable cgd” to “Enable cgd (cryptographic disk driver)” and “Enable lvm” to “Enable lvm (logical volume manager)”.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie849.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie849.png"/></a><b>Configuration menu</b></p>
<p>You usually want to configure the network on your system. If you select the appropriate menu item, you get a list of detected interfaces to pick from. I’m going to make my usual suggestion here: Consider adding the MAC address for each interface!</p>
<p>While it’s often perfectly obvious which one you want to select, this is not always the case. I don’t know how often NetBSD is being deployed in datacenters these days, but servers often have several interfaces and it can be very beneficial for the admins to decide based on the MAC address which one is which (especially since you cannot expect penguins to be familiar with BSD interface naming!). 😉</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie850.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie850.png"/></a><b>Network interface selection</b></p>
<p>Next is selecting the network media type. Not setting it means attempting autoconfiguration. This is another case where sysinst gives me a weird feeling. From the presented information alone I have no clue if leaving it empty will cause the installer to send DHCP requests or if it’s just going to assume 1000baseT full duplex or something for the media type. Also making this a text input rather than a list to pick from automatically (pun intended) makes people wonder what the supported values are. This is not ideal from a UX perspective.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie851.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie851.png"/></a><b>Setting the network media type</b></p>
<p>Even when leaving the field empty to enable autoconfiguration, a menu pops up asking you if that’s really what you wanted to do. That feels very redundant and is another strong indication that this section of the installer could use an overhaul.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie852.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie852.png"/></a><b>Autoconfiguration?</b></p>
<p>After that, sysinst asks for the hostname of the machine. Since there’s no standard way of handling this, I always appreciate it when the installer provides a clue as to whether it expects an FQDN or the short form. As I have the habit of using the former, the first time I installed NetBSD I of course noticed my mistake in the next screen.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie853.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie853.png"/></a><b>Hostname configuration</b></p>
<p>NetBSD expects the short form for the hostname, so in the next screen it asks for the domain name. If DHCP was used, it proposes the domain name it got from it. My suggestion would be to either indicate on the previous screen that only the short form is acceptable, or to indicate that either form is and to skip this screen if an FQDN was entered as the hostname.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie854.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie854.png"/></a><b>Domain name configuration</b></p>
<p>In the next screen, sysinst will provide a summary of the network parameters and ask the user whether they are ok.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie855.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie855.png"/></a><b>Network parameter summary</b></p>
<p>If the user accepts them, the installer offers to write the configuration to disk. This is super helpful for people new to NetBSD who will certainly enjoy a working network connection before having to dig into the documentation just for that! However there might be use cases where people use an installation network to access the distfiles while the actual production network settings are different. So I guess presenting the choice to the user is the right thing to do.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie856.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie856.png"/></a><b>Make network configuration persistent?</b></p>
<p>Next is configuring the time zone. NetBSD defaults to UTC which is a sensible choice. Users who prefer localtime can select items from a list.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie857.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie857.png"/></a><b>Time zone selection step 1</b></p>
<p>If a continent was chosen in step 1 (like Europe in my case), another list of zones in that area are now presented.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie858.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie858.png"/></a><b>Time zone selection step 2</b></p>
<p>Choosing an item selects it and makes sysinst jump to the “Exit” menu item which is a nice convenience.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie859.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie859.png"/></a><b>Time zone selection step 3</b></p>
<p>Most people will not want to use only the base system, so making the <em>pkgin</em> package manager available is something that is commonly done. Luckily sysinst makes doing this really easy. In this screen, the installer allows you to configure the remote repository, protocol to use and so on.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie860.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie860.png"/></a><b>Configuring pkgin repository</b></p>
<p>Once repository access has been configured, sysinst installs pkgin and uses it to update the package summary.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie861.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie861.png"/></a><b>Fetching the package summary</b></p>
<p>When that’s done, the installer lets you know that pkgin has been successfully installed.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie862.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie862.png"/></a><b>Pkgin ready</b></p>
<p>Some people prefer to (or have to) build packages from source. Sysinst assists in installing the Pkgsrc tree on the system, too. Doing this is quite similar to the previous action: The user first needs to configure a remote source …</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie863.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie863.png"/></a><b>Preparing to fetch pkgsrc</b></p>
<p>… and then the compressed tarball is getting downloaded and extracted. Very convenient!</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie864.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie864.png"/></a><b>Fetching and installing pkgsrc</b></p>
<p>Another very common thing that a lot of people will want to do is creating an unprivileged user. This works without any fancy dialog windows by just asking for input of the name.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie865.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie865.png"/></a><b>Adding a user</b></p>
<p>It then asks whether to add the user to the wheel group, which is excellent. For newcomers (especially from Linux) I’d love to see a little explanation that this means allowing the user to use the ‘su’ command to become root. Otherwise this is fine.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie866.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie866.png"/></a><b>Add user to the wheel group?</b></p>
<p>Then you get to select which of the three shells that the base system provides to use. This works effectively.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie867.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie867.png"/></a><b>Which shell for the new user?</b></p>
<p>Finally you are asked to set the password for the user. Altogether the process is pretty bare bones as you can neither customize the home directory nor can you pick the UID or assign the user to additional groups. But you can always create (or modify) users manually after booting into the installed system, right?</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie868.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie868.png"/></a><b>Password for user</b></p>
<p>There are other options here, but they are simply on/off switches. The last item is for finishing the configuration.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie869.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie869.png"/></a><b>Finishing the configuration</b></p>
<p>The last screen after the installation gives new users some valuable advice like reading afterboot(8) (you installed the <em>man</em> set, right?) and customizing /etc/rc.conf.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie870.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie870.png"/></a><b>Installation finished</b></p>
<p>After acknowledging this, the installer returns to the main menu, where you can choose to reboot into the newly installed system.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie871.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie871.png"/></a><b>Back on the main menu for rebooting</b></p>
<h2>Installation over serial</h2>
<p>To explore more of the installer, this time I’m aiming for a more customized installation fit for a server.</p>
<p>To be able to install via serial, it’s necessary to escape to the loader prompt and then issue the command:</p>
<pre title="">consdev=com0,115200</pre>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie872.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie872.png"/></a><b>Setting the console to serial in the loader</b></p>
<p>Changing the console to serial resets the terminal screen. Now it’s possible to just ask the loader to boot the kernel regularly:</p>
<pre title="">boot</pre>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie873.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie873.png"/></a><b>Booting the installation system</b></p>
<p>Just before the installer starts, it asks for the type of terminal that is connected. It needs to know this to make the best use of available features. I’m going with <em>xterm</em> here.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie874.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie874.png"/></a><b>Terminal type selection</b></p>
<p>The first screen of the installer is the same as in the previous installation which used the video console.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie875.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie875.png"/></a><b>Language selection</b></p>
<p>The same is true for the main menu …</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie876.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie876.png"/></a><b>Sysinst main menu</b></p>
<p>… and the information screen about the installation procedure.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie877.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie877.png"/></a><b>Installation overview screen</b></p>
<p>I’ve given this machine two virtual drives, so this time I could choose which one to install to.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie878.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie878.png"/></a><b>Selecting the installation target</b></p>
<p>While for the first installation I’ve taken the straight-forward path, this time I went with the extended partitioning. This portion of the installer allows for <em>cryptographic volumes</em>, <em>virtual disk images</em>, <em>logical volume management</em> and <em>software raids</em> in addition to more complex partitioning in general. The text contains the instructions to follow and works well for that matter.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie879.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie879.png"/></a><b>Extended partitioning menu</b></p>
<p>Selecting one of the drives opens a menu with various configuration options. People who only ever go the standard path through the installer miss out on a lot of its capabilities! At least I was surprised by the many options when I first explored extended partitioning. Beforehand I considered sysinst to be quite limited, but that is obviously not the case.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie880.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie880.png"/></a><b>Configuration options for a drive</b></p>
<p>I went with “Format as RAID”, but since the drive is empty, sysinst first asks about which partitioning schema to use. Your options here are GPT, MBR or BSD disklabels.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie881.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie881.png"/></a><b>Selecting the partitioning schema</b></p>
<p>The installer went ahead and proposed a partition of type RAID for me. It would span the entire available space.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie882.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie882.png"/></a><b>Proposed RAID partition</b></p>
<p>Accepting the the partition (going with the proposal or changing the size) takes you back to the partitioning menu. A new partition <em>dk0</em> has appeared in the list and ld0’s status has changed to USED. (As a newcomer I ask myself what <em>dk</em> is, though. A search in the manpages does not solve the mystery.)</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie883.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie883.png"/></a><b>RAID partition created on the first drive</b></p>
<p>I did the same thing for the second drive and as expected, <em>dk1</em> appeared.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie884.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie884.png"/></a><b>Second RAID partition created</b></p>
<p>The next step is to select “Create Software RAID”, which opens a window with configuration options.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie885.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie885.png"/></a><b>Software RAID configuration</b></p>
<p>Selecting “Disks:” lets the user add or remove disks from the RAID array.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie886.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie886.png"/></a><b>Software RAID disk selection</b></p>
<p>Choosing “Add” allows to add members to the array. I think this is a little cumbersome, especially if you want to assemble a large RAID with several members. I would suggest getting rid of the window that’s used to add or remove disks and instead provide one where available disks can be marked as member or unused. That would streamline RAID creation.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie887.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie887.png"/></a><b>Adding a disk</b></p>
<p>After adding disks dk0 and dk1 as RAID members and not selecting any spares, the next thing to do is to choose the RAID level. Sysinst obviously does not take disk requirements into account: It offers RAID 5 even though that requires three or more disks while only two were added. So that’s another thing that could be improved.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie888.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie888.png"/></a><b>Selecting the RAID level</b></p>
<p>I went with creating a mirror. Besides selecting the disks to use and the RAID level I left everything else alone.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie889.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie889.png"/></a><b>RAID configuration complete</b></p>
<p>The RAID configuration was done, but the list does not reflect that. The text said to select “Save Changes” after configuring a RAID, so that’s what needs to be done next.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie890.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie890.png"/></a><b>RAID configured but not created, yet</b></p>
<p>What then happened again surprised me: The RAID is being built by supposedly writing parity information! This is very weird. I selected mirroring and RAID 1 <em>does not use</em> parity information – mirroring means having the same data on both drives after all! But this is probably raidctl(8)’s fault which simply calls mirrored data “parity” as well.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie891.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie891.png"/></a><b>Building RAID: Syncing…</b></p>
<p>After the sync is complete, the new <em>raid0</em> device appears in the list. According to the information it is a RAID 1 with two disks and 0 spares. It appears that what I intended to do has worked out.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie892.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie892.png"/></a><b>RAID synced</b></p>
<p>Now the RAID can be partitioned like the disks beforehand. The same menu window is used for that. This time I go with editing the partitions.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie893.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie893.png"/></a><b>Partitioning the RAID</b></p>
<p>The RAID array doesn’t contain any data, yet, so it needs a partitioning schema, first. It’s possible to use GPT or disklabels, here.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie894.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie894.png"/></a><b>Partition schema selection for the array</b></p>
<p>Going with GPT, the user is then presented with an empty partition list and the option to add partitions.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie895.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie895.png"/></a><b>Empty partition table</b></p>
<p>Adding a new partition presents the user with various options like partition type, size, mount point and so on.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie896.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie896.png"/></a><b>Adding a new partition</b></p>
<p>Other than the default FFSv2, there are various other types that you can pick from. There’s also “other type” which opens another menu with less common options like vinum, FreeBSD’s old volume manager.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie897.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie897.png"/></a><b>Partition types</b></p>
<p>I changed everything required to make this new partition be the EFI system partition required to boot from on EFI systems.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie898.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie898.png"/></a><b>Values for an EFI partition</b></p>
<p>When creating a new partition for a filesystem that is going to be mounted, mount options can be selected.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie899.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie899.png"/></a><b>Filesystem mount options</b></p>
<p>After adding a swap partition I added a third one for the root filesystem with the values shown on the screenshot below.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie900.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie900.png"/></a><b>The root partition</b></p>
<p>While doing much more comprehensive partitioning is of course possible, I don’t think it’s necessary to do that here. A simple layout on a software RAID should be fine for the test system.</p>
<p>It appears that this section of the installer was re-used from the standard partitioning path. This is why the text says “This is your last chance to change” the partitions – which is not true. Accepting the partitioning returns you to the extended partition menu from where you could just choose to edit it again. It’s a small inaccuracy, though.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie901.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie901.png"/></a><b>Partition table for raid0</b></p>
<p>The new partitions appear in the list on the main extended partitioning menu now. So everything is ready to proceed to the actual installation.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie902.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie902.png"/></a><b>Extended partitioning done</b></p>
<p>The instructions didn’t say that the latest changes need to be saved again, but if you just try to go ahead, sysinst will simply ask you if you want to save or not.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie903.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie903.png"/></a><b>Save partitioning changes?</b></p>
<p>Like in the previous installation, the next choice is the distribution sets to be installed. I’ll go for a custom installation this time.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie904.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie904.png"/></a><b>Selecting the distribution sets</b></p>
<p>The standard selection of sets is fairly minimal. I would suggest to at least include the manpages by default!</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie905.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie905.png"/></a><b>Custom installation: Standard selection of sets</b></p>
<p>I chose to install the compiler toolchain (so that Pkgsrc would be usable) as well as the manpages (of course!) and miscellaneous (simply because I have no idea what’s in it).</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie906.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie906.png"/></a><b>Custom installation: A couple more sets enabled</b></p>
<p>To not simply repeat the first installation, I’m going with HTTP as the source for the sets instead of the local medium.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie907.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie907.png"/></a><b>Installing over HTTP</b></p>
<p>This of course triggers network configuration which was only done after the installation in the previous attempt. I’m not providing screenshots of the other configuration steps as they are identical.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie908.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie908.png"/></a><b>Selecting the network interface</b></p>
<p>After the network is configured, the mirror to fetch the sets from needs to be selected.</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie909.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie909.png"/></a><b>Selecting the mirror to use</b></p>
<p>And then the installation begins! Or not, since the filesystem for some reason turns out to be read-only …</p>
<p><a href="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie910.png"><img src="https://eerielinux.wordpress.com/wp-content/uploads/2025/05/eerie910.png"/></a><b>Whoops! Disk is ro?!</b></p>
<h2>Pain points</h2>
<p>The above section ending rather abruptly is not due to any malice on my side trying to break poor little sysinst. In fact I tried to do several dozen installations over the past three weeks, trying out various setups. Truth be told: I’ve failed time and time again.</p>
<p>I didn’t mention it before, but after the first installation I wanted to show a screenshot of the graphical NetBSD system. The installation succeeded, but the system would panic during boot. Bhyve is more of a niche thing and not among the hypervisors supported by NetBSD, so I’m not complaining. But I haven’t been able to finish *any* installation after picking extended partitioning. Going with a software RAID makes the FS read-only. Trying to create a simple LVM lead to this:</p>
<pre title="">Status: Command failed
&gt; Command: lvm pvcreate -ffy /dev/rdk2
&gt; Hit enter to continue
&gt; ---
&gt; Device /dev/rdk2 not found (or ignored by filtering)</pre>
<p>I read the first few chapters of <a href="https://netbsd.org/docs/guide/en/">The NetBSD Guide</a>, hoping to better understand what I was doing wrong. It’s a good document but unfortunately pretty outdated, too. When I read “The examples from this chapter were created with NetBSD 8.0.”, I got a feeling what to expect (that version was released 7 years ago, in 2018).</p>
<p>I honestly don’t mind that the image explaining partitioning uses DOS as the other operating system in a dual-boot setup. But the guide does not even mention GPT at all! It’s all legacy MBR which is not terribly helpful for newer machines at this point. Also much to my surprise, the extended partitioning is not even covered. Yes, Software RAID, LVM and friends are covered, but only how to set them up via the CLI on a running system. Sorry, I don’t want to do that, I want to install to a more flexible means of storage than a bare disk with fixed partition sizes!</p>
<p>The system console messages appearing on the screen and messing up parts of the installer can be very annoying, too. Maybe just start sysinst on different virtual terminal to get rid of this?</p>
<p>Installing on real hardware presented me with other problems – and even standard installations can fail. On one machine it took incredibly long – the modules.txr.xz set alone took half an hour with the installation at times going to as slow writes as roughly 4 KiB/s or even stalling entirely. The base set took over 1.5 hours! I assume NetBSD might be struggling with the NVMe? To add insult to injury when it was finally done with all the sets (I had picked a full installation…), this was the result:</p>
<pre title="">Status: Command failed
&gt; Command: /sbin/fsck_ffs -p -q /dev/dk0
&gt; Hit enter to continue
&gt; ---
&gt; /dev/rdk0: BAD SUPER BLOCK: CAN&#39;T FIND SUPERBLOCK
&gt; 
&gt; /dev/rdk0: UNEXPECTED INCONSISTENCY; RUN fsck_ffs MANUALLY.</pre>
<p>I tried my luck in the opposite direction and used one of the older laptops that I have. The installer started regularly but at one point simply dropped me to a shell, saying “sysinst terminated.”</p>
<p>The error message was something along the lines of “Screen too narrow (70 + 5 &gt; 64) for menu”. I was able to solve that by connecting a VGA monitor to it, but that was unexpected nevertheless. This little experiment proved useful, though, as it revealed a portion of sysinst that I had not seen before: The installer told me that this machine didn’t provide strong entropy and gave me several options for dealing with that. It’s really nice that NetBSD did great work in that regard!</p>
<h2>Conclusion</h2>
<p>Well, after all those problems I encountered, you might expect me to condemn sysinst. I won’t. In fact I like the general workflow – minus the weird parts. Sysinst has a lot of neat ideas in addition to some quirks. As mentioned at the beginning, I like the hotkey system a lot. Trying to reserve “x” to finish a screen is one nice detail. I really like the configuration options after the installation. That part is very well done.</p>
<p>On the other hand, network autoconfiguration is weird. I miss the option to decide on configuring the system for v4 only for example. A couple of things could certainly be improved, but few things are perfect. The elephant in the room though is the major problems that I ran into. I often find myself exploring less common paths in programs, which sometimes leads to uncovering bugs. It’s not just sysinst but it happens to me often when I use something not just superficially.</p>
<p>When I sat down to concern myself with the NetBSD installer, I expected that my major critique would be that it doesn’t do ZFS – which is a shame since the availability of that filesystem is one of the things that make NetBSD appeal to me. Various other problems have definitely overshadowed this, though. I remain hopeful that these issues can be addressed, and perhaps the solution lies in clearer guidance for users. As I said, I’m not very familiar with NetBSD. But I’d like to change that fact in the long run. And ideally at some point I’d be able to say: “Of course it runs NetBSD!”</p>
<h2>What’s next?</h2>
<p>In the next article I’ll take a closer look at DragonFly BSD’s installer.</p>
			</div><!-- .entry-content -->

	<!-- .entry-footer -->

	</article></div>
  </body>
</html>
