<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/shadyfennec/stupidalloc">Original</a>
    <h1>Stupid alloc – what if memory allocation was annoying</h1>
    
    <div id="readability-page-1" class="page"><div itemprop="articleBody">
    <p>So here’s a neat trick:</p>

<div>
    
    <video controls="">
    
        <source src="/assets/images/firefoxwordle/firefoxwordle.mp4" type="video/mp4"/>
    </video>
    
    <p> If only the font was monospaced </p>
    
</div>

<p>That’s the firefox address bar! And I’m playing a full game of Wordle in it! What’s going on?
<!-- excerpt-end --></p>


<p><a href="https://github.com/dewitt/opensearch">OpenSearch</a><sup id="fnref:1" role="doc-noteref"><a href="#fn:1" rel="footnote">1</a></sup> is a spec from the mid-2000s that describes ways to communicate about search endpoints and search results. Among other things it describes:</p>
<ol>
  <li>A standard way for a website to describe how to <em>search that website</em></li>
  <li>A standard way for a website to <em>advertise its search functionality to the browser</em></li>
  <li>An extension that allows a website to <em>suggest searches</em> when a user is already searching the website from the browser.</li>
</ol>

<p>This trick relies on 1, 2, and 3. I couldn’t get 3 working in Chrome so as of now this trick only works in Firefox. <a href="http://eieio.games/whats-my-deal">Give me a shout</a> if you know how to get suggestions to work in Chrome!</p>


<p>OpenSearch details are communicated to the browser via a simple XML document that provides some metadata about the website that you’re searching for (particularly handy if your website wants to offer multiple custom search options - e.g. “search by title” and “search by director”), an endpoint that the browser should hit in order to perform a search (filling in <code>{searchTerms}</code> with whatever the user has typed) and, for the “suggestions” extension, a separate endpoint that will return search suggestions.</p>

<p>Here’s what my opensearch.xml document looks like<sup id="fnref:2" role="doc-noteref"><a href="#fn:2" rel="footnote">2</a></sup>:</p>

<details>
<summary>Click to expand</summary>
<xmp>
<?xml version="1.0" encoding="UTF-8"?>
<OpenSearchDescription xmlns="http://a9.com/-/spec/opensearch/1.1/" xmlns:moz="http://www.mozilla.org/2006/browser/search/">
  <ShortName>Searchgame</ShortName>
  <Description>Play a game in the searchbar</Description>
  <InputEncoding>[UTF-8]</InputEncoding>
  <Url type="text/html" template="http://searchgame:5000/search?q={searchTerms}" />
  <Url type="application/x-suggestions+json" template="http://searchgame:5000/game?q={searchTerms}" />
  <moz:SearchForm>http://searchgame:5000/search</moz:SearchForm>
</OpenSearchDescription>
</xmp>

<i>Forgive me for not figuring out how to make Jekyll syntax highlight my xml.</i>
</details>


<p>This document tells the browser that it can <em>search</em> my website by hitting <code>searchgame:5000/search</code> and that it can get <em>suggestions in JSON form</em> for the user’s current search by hitting <code>searchgame:5000/game</code> - in both cases setting the query parameter <code>q</code> to whatever the user has typed.</p>

<p>Opensearch also describes how to advertise these search endpoints to the browser; you just add a <code>link</code> element with <code>rel=&#34;search&#34;</code> pointing to your XML in the <code>head</code> section of your website and the browser (should) automatically hit that link and learn how to search your website.</p>


<p>None of the browsers I tried (Safari, Chrome, Firefox) seemed excited to automatically add custom search engines when visiting a website. Chrome used to automatically index search engines for websites that you visited but <a href="https://twitter.com/googlechrome/status/1504858912692084745">per this Tweet that changed last year</a> - now you have to manually activate search engines from the settings tab<sup id="fnref:3" role="doc-noteref"><a href="#fn:3" rel="footnote">3</a></sup>. Firefox requires that you <a href="https://support.mozilla.org/en-US/kb/add-or-remove-search-engine-firefox#:~:text=Search%20engine%20add%2Dons,-Many%20providers%20offer&amp;text=At%20the%20bottom%20of%20the,and%20click%20Add%20to%20Firefox.">right click the address bar</a> when on a website to add a custom opensearch-backed search engine. And I couldn’t figure out how to get Safari to add custom search engines at all!</p>

<p>Additionally, Firefox is the only browser that I tested that implemented the “suggestions” extension of the Opensearch spec. I <em>thought</em> that Chrome did (I think I’ve used the feature before) but maybe that changed when it stopped activating search engines automatically.</p>


<p>Once I taught Firefox how to search my website and retrieve search suggestions from it, it was pretty straightforward to build a little game into the searchbar. Wordle seemed like a natural fit since it’s turn-based, can be played entirely via text/emoji, and is familiar enough that most readers of this blog would recognize it.</p>

<p>The “game” itself is a tiny flask app - you can see the code <a href="https://github.com/nolenroyalty/wardle/blob/main/app.py">here</a>.</p>


<p>Originally I was planning to build some more interesting games into the address bar and put the games on a public server. However, the fact that my games would be Firefox only <em>and</em> require manual setup makes me much less excited about that idea - I’d be much more excited if I could tell folks “yeah, just type ‘searchbar.games’ into your address bar and hit tab to start playing.”</p>

<p>I also found it interesting that Chrome is moving <em>away</em> from autodiscovery of search engine. I’m a big fan of site-specific search and so the fact that it’s getting harder is disappointing to me.</p>

<p>I’ve got several more goofy ideas for game input mechanisms and another 10.5 weeks at the <a href="https://www.recurse.com/">Recurse Center</a> - I’ll be back with something else fun soon.</p>



  </div></div>
  </body>
</html>
