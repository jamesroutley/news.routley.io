<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/mvdan/sh/blob/master/cmd/shfmt/shfmt.1.scd">Original</a>
    <h1>Shfmt – format shell programs</h1>
    
    <div id="readability-page-1" class="page"><div>

    <div data-target="readme-toc.content">
      
  


        <div id="readme">
    <article itemprop="text"><p dir="auto">shfmt(1)</p>

<p dir="auto">shfmt - Format shell programs</p>

<p dir="auto"><em>shfmt</em> [flags] [path...]</p>

<p dir="auto">shfmt formats shell programs. If the only argument is a dash (<em>-</em>) or no
arguments are given, standard input will be used. If a given path is a
directory, all shell scripts found under that directory will be used.</p>
<p dir="auto">If any EditorConfig files are found, they will be used to apply formatting
options. If any parser or printer flags are given to the tool, no EditorConfig
files will be used. A default like <em>-i=0</em> can be used for this purpose.</p>
<p dir="auto">shfmt&#39;s default shell formatting was chosen to be consistent, common, and
predictable. Some aspects of the format can be configured via printer flags.</p>

<h2 dir="auto"><a id="user-content-generic-flags" aria-hidden="true" href="#generic-flags"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Generic flags</h2>
<p dir="auto"><em>-version</em>
Show version and exit.</p>
<p dir="auto"><em>-l</em>, <em>--list</em>
List files whose formatting differs from shfmt&#39;s.</p>
<p dir="auto"><em>-w</em>, <em>--write</em>
Write result to file instead of stdout.</p>
<p dir="auto"><em>-d</em>, <em>--diff</em>
Error with a diff when the formatting differs.</p>
<div dir="auto" data-snippet-clipboard-copy-content="The diff uses color when the output is a terminal.
To never use color, set a non-empty *NO_COLOR* or *TERM=dumb*.
To always use color, set a non-empty *FORCE_COLOR*."><pre>The diff uses color when the output is a terminal.
To never use color, set a non-empty *NO_COLOR* or *TERM=dumb*.
To always use color, set a non-empty *FORCE_COLOR*.</pre></div>
<p dir="auto"><em>-s</em>, <em>--simplify</em>
Simplify the code.</p>
<p dir="auto"><em>-mn</em>, <em>--minify</em>
Minify the code to reduce its size (implies <em>-s</em>).</p>
<h2 dir="auto"><a id="user-content-parser-flags" aria-hidden="true" href="#parser-flags"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Parser flags</h2>
<p dir="auto"><em>-ln</em>, <em>--language-dialect</em> 
Language dialect (<em>bash</em>/<em>posix</em>/<em>mksh</em>/<em>bats</em>, default <em>auto</em>).</p>
<div dir="auto" data-snippet-clipboard-copy-content="When set to *auto*, the language is detected from the input filename,
as long as it has a shell extension like *foo.mksh*. Otherwise, if the input
begins with a shell shebang like *#!/bin/sh*, that&#39;s used instead.
If neither come up with a result, *bash* is used as a fallback.

The filename extension *.sh* is a special case: it implies *posix*,
but may be overriden by a valid shell shebang."><pre>When set to *auto*, the language is detected from the input filename,
as long as it has a shell extension like *foo.mksh*. Otherwise, if the input
begins with a shell shebang like *#!/bin/sh*, that&#39;s used instead.
If neither come up with a result, *bash* is used as a fallback.

The filename extension *.sh* is a special case: it implies *posix*,
but may be overriden by a valid shell shebang.</pre></div>
<p dir="auto"><em>-p</em>, <em>--posix</em>
Shorthand for <em>-ln=posix</em>.</p>
<p dir="auto"><em>-filename</em> str
Provide a name for the standard input file.</p>
<h2 dir="auto"><a id="user-content-printer-flags" aria-hidden="true" href="#printer-flags"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Printer flags</h2>
<p dir="auto"><em>-i</em>, <em>--indent</em> 
Indent: <em>0</em> for tabs (default), <em>&gt;0</em> for number of spaces.</p>
<p dir="auto"><em>-bn</em>, <em>--binary-next-line</em>
Binary ops like <em>&amp;&amp;</em> and <em>|</em> may start a line.</p>
<p dir="auto"><em>-ci</em>, <em>--case-indent</em>
Switch cases will be indented.</p>
<p dir="auto"><em>-sr</em>, <em>--space-redirects</em>
Redirect operators will be followed by a space.</p>
<p dir="auto"><em>-kp</em>, <em>--keep-padding</em>
Keep column alignment paddings.</p>
<p dir="auto"><em>-fn</em>, <em>--func-next-line</em>
Function opening braces are placed on a separate line.</p>
<h2 dir="auto"><a id="user-content-utility-flags" aria-hidden="true" href="#utility-flags"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Utility flags</h2>
<p dir="auto"><em>-f</em>, <em>--find</em>
Recursively find all shell files and print the paths.</p>
<p dir="auto"><em>--to-json</em>
Print syntax tree to stdout as a typed JSON.</p>
<p dir="auto"><em>--from-json</em>
Read syntax tree from stdin as a typed JSON.</p>

<p dir="auto">Format all the scripts under the current directory, printing which are modified:</p>

<p dir="auto">For CI, one can use a variant where formatting changes are just shown as diffs:</p>

<p dir="auto">The following formatting flags closely resemble Google&#39;s shell style defined in
<a href="https://google.github.io/styleguide/shell.xml" rel="nofollow">https://google.github.io/styleguide/shell.xml</a>:</p>

<p dir="auto">Below is a sample EditorConfig file as defined by <a href="https://editorconfig.org/" rel="nofollow">https://editorconfig.org/</a>,
showing how to set any option:</p>
<div dir="auto" data-snippet-clipboard-copy-content="[*.sh]
# like -i=4
indent_style = space
indent_size = 4

shell_variant      = posix # --language-variant
binary_next_line   = true
switch_case_indent = true  # --case-indent
space_redirects    = true
keep_padding       = true
function_next_line = true  # --func-next-line

# Ignore the entire &#34;third_party&#34; directory.
[third_party/**]
ignore = true"><pre>[*.sh]
# like -i=4
indent_style = space
indent_size = 4

shell_variant      = posix # --language-variant
binary_next_line   = true
switch_case_indent = true  # --case-indent
space_redirects    = true
keep_padding       = true
function_next_line = true  # --func-next-line

# Ignore the entire &#34;third_party&#34; directory.
[third_party/**]
ignore = true</pre></div>
<p dir="auto">shfmt can also replace <em>bash -n</em> to check shell scripts for syntax errors. It is
more exhaustive, as it parses all syntax statically and requires valid UTF-8:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ echo &#39;${foo:1 2}&#39; | bash -n
$ echo &#39;${foo:1 2}&#39; | shfmt &gt;/dev/null
1:9: not a valid arithmetic operator: 2
$ echo &#39;foo=(1 2)&#39; | bash --posix -n
$ echo &#39;foo=(1 2)&#39; | shfmt -p &gt;/dev/null
1:5: arrays are a bash feature"><pre>$ echo &#39;${foo:1 2}&#39; | bash -n
$ echo &#39;${foo:1 2}&#39; | shfmt &gt;/dev/null
1:9: not a valid arithmetic operator: 2
$ echo &#39;foo=(1 2)&#39; | bash --posix -n
$ echo &#39;foo=(1 2)&#39; | shfmt -p &gt;/dev/null
1:5: arrays are a bash feature</pre></div>

<p dir="auto">Maintained by Daniel Martí <a href="mailto:mvdan@mvdan.cc">mvdan@mvdan.cc</a>, who is assisted by other open
source contributors. For more information and development, see
<a href="https://github.com/mvdan/sh">https://github.com/mvdan/sh</a>.</p>
</article>
  </div>

    </div>

  </div></div>
  </body>
</html>
