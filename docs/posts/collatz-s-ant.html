<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://gbragafibra.github.io/2025/01/08/collatz_ant2.html">Original</a>
    <h1>Collatz&#39;s Ant</h1>
    
    <div id="readability-page-1" class="page">
    
    <p>This is a brief continuation of a previous <a href="https://gbragafibra.github.io/2024/12/21/collatz_ant.html">post</a> (<a href="https://github.com/gbragafibra/collatz-ant">Repo</a>), which introduced such visualization for collatz sequences based on <a href="https://en.wikipedia.org/wiki/Langton%27s_ant">Langton’s Ant</a>.</p>

<p>Collatz’s Ant is based on the <a href="https://en.wikipedia.org/wiki/Collatz_conjecture">collatz function</a>:</p>

\[f(n) = \begin{cases}
n/2 &amp; \text{if} \quad n \equiv 0 \quad (\text{mod}\, 2) \\
3n + 1 &amp; \text{if} \quad n \equiv 1 \quad (\text{mod}\, 2) \\
\end{cases}\]

<p>and additionally, if $n \equiv 0 \, (\text{mod}\, 2)$ the ant turns 90º clockwise, else the ant turns 90º counter-clockwise. On both accounts, the state of the cell is flipped and the ant moves forward one unit. This is repeated until $n = 1$. An example of such is present in the following animation:</p>

<p><img src="https://gbragafibra.github.io/gifs/collatz_ant1.gif" alt=""/></p>

<p>Example of consecutive trajectories from $n = 10^{40}$ to $n = 10^{40} + 20$.</p>

<p><img src="https://gbragafibra.github.io/gifs/collatz_ant40.gif" alt=""/></p>

<p>And although this representation is interesting, the flipping of state can eventually lead to ambiguous scenarios where trajectories seem similar to each other through omission.</p>

<p>Given that, the following picture corresponds to the ant’s landscape (final snapshot) without state flipping for the same trajectories, along with respective stopping times. This is done by merely adding a $+1$ count to each coordinate the ant has been through.</p>

<p><img src="https://gbragafibra.github.io/gifs/collatz_ant_attractor40.png" alt=""/></p>

<h3 id="some-other-examples">Some other examples</h3>

<p>The first 100 numbers from $n = 2$ to $n = 102$.</p>

<p><img src="https://gbragafibra.github.io/gifs/collatz_ant_attractor2-102.png" alt=""/></p>

<p>From $n = 10^{9}$ to $n = 10^{9} + 100$.</p>

<p><img src="https://gbragafibra.github.io/gifs/collatz_ant_attractor9.png" alt=""/></p>

<p>From $n = 10^{20}$ to $n = 10^{20} + 100$.
<a name="ref-1"></a></p>

<p><img src="https://gbragafibra.github.io/gifs/collatz_ant_attractor20.png" alt=""/></p>

<p>From $n = 10^{200}$ to $n = 10^{200} + 10$.</p>

<p><img src="https://gbragafibra.github.io/gifs/collatz_ant_attractor200.png" alt=""/></p>

<h3 id="some-interesting-things">Some interesting things</h3>

<ul>
  <li>Very similar landscapes have the same stopping time (or similar ones), but the inverse isn’t true. An example of the inverse not being true, is present in <a href="#ref-1">this comparison between</a> $n = 10^{20} + 1$ (1st row, 2nd col) and $n = 10^{20} + 16$ (4th row, 2nd col), both with stopping times 532.</li>
</ul>

<p>If we check the similarity between both of these trajectories:</p>

<div><div><pre><code><span>import</span> <span>numpy</span> <span>as</span> <span>np</span>
<span>import</span> <span>mpmath</span>

<span>def</span> <span>collatz_seq</span><span>(</span><span>n</span><span>):</span>
    <span>seq</span> <span>=</span> <span>[]</span>
    <span>while</span> <span>n</span> <span>!=</span> <span>1</span><span>:</span>
        <span>seq</span><span>.</span><span>append</span><span>(</span><span>n</span><span>)</span>
        <span>if</span> <span>n</span> <span>%</span> <span>2</span> <span>==</span> <span>0</span><span>:</span>
        	<span>n</span> <span>/=</span> <span>2</span>
        <span>else</span><span>:</span>
        	<span>n</span> <span>=</span> <span>3</span><span>*</span><span>n</span> <span>+</span> <span>1</span>
    <span>return</span> <span>seq</span>

<span>mpmath</span><span>.</span><span>mp</span><span>.</span><span>dps</span> <span>=</span> <span>22</span>
<span>n1</span> <span>=</span> <span>mpmath</span><span>.</span><span>mpf</span><span>(</span><span>&#34;1e20&#34;</span><span>)</span> <span>+</span> <span>1</span>
<span>n2</span> <span>=</span> <span>mpmath</span><span>.</span><span>mpf</span><span>(</span><span>&#34;1e20&#34;</span><span>)</span> <span>+</span> <span>16</span>
<span>len</span><span>(</span><span>np</span><span>.</span><span>intersect1d</span><span>(</span><span>collatz_seq</span><span>(</span><span>n1</span><span>),</span> <span>collatz_seq</span><span>(</span><span>n2</span><span>)))</span>
</code></pre></div></div>

<p>If the same is done between $n = 10^{20} + 16$ and $n = 10^{20} + 20$, which have similar landscapes and the same stopping time, we get:</p>


<ul>
  <li>Furthermore, if we now look at an example of sub-trajectories converging, in this case with a difference of 5 steps between each, we can see that the landscapes are pretty similar to each other, but for the rotation (which seems to overall be of 90º). This is of course the product of the early re-orientation of the ant given those 5 extra steps.</li>
</ul>

<p>Example with $n = 18750000000000000004$ and $n = 10^{20} + 16$, the former being found after 5 reduction steps of the latter.</p>

<p><img src="https://gbragafibra.github.io/gifs/collatz_ant_attractor_rotation.png" alt=""/></p>

<p>Now with a difference of 100 steps, the landscapes still seem very similar but for a rotation of 180º.</p>

<p><img src="https://gbragafibra.github.io/gifs/collatz_ant_attractor_rotation100.png" alt=""/></p>

<p>With a difference of 200 steps, the landscapes start losing some detail relative to each other.</p>

<p><img src="https://gbragafibra.github.io/gifs/collatz_ant_attractor_rotation200.png" alt=""/></p>

<p>And with 300 steps, only a few larger-scale characteristics are now common between the two landscapes.</p>

<p><img src="https://gbragafibra.github.io/gifs/collatz_ant_attractor_rotation300.png" alt=""/></p>

<p><a href="https://gbragafibra.github.io">Back</a></p>

    


</div>
  </body>
</html>
