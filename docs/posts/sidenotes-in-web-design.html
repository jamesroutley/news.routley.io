<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://gwern.net/sidenote">Original</a>
    <h1>Sidenotes in Web Design</h1>
    
    <div id="readability-page-1" class="page"><div id="page-metadata">
        <p>In typography/design, ‘sidenotes’ place footnotes/endnotes in the margins for easier reading. I discuss design choices, HTML implementations and their pros/cons.</p>
        
        
      </div><div id="markdownBody">
        
        <div>
          <blockquote>
            <p>Sidenotes/margin notes are a typographic convention which improves on footnotes &amp; endnotes by instead putting the notes in the page margin to let the reader instantly read them without needing to refer back and forth to the end of the document (endnotes) or successive pages (footnotes spilling over).</p>
            <p>They are particularly useful for web pages, where ‘footnotes’ are de facto endnotes, and clicking back and forth to endnotes is a pain for readers. (Footnote variants, like “floating footnotes” which pop up on mouse hover, reduce the reader’s effort but don’t eliminate it.)</p>
            <p>However, they are not commonly used, perhaps because web browsers until relatively recently made it hard to implement sidenotes easily &amp; reliably. <a href="https://edwardtufte.github.io/tufte-css/" data-link-icon="ET" data-link-icon-type="text" data-url-archive="/doc/www/edwardtufte.github.io/e43d8239ed3fa1d513e2b4d071b6a7c0c8a98bff.html">Tufte-CSS</a> has popularized the idea and since then, there has been a proliferation of slightly variant approaches. I review some of the available implementations.</p>
            <p>For general users, I recommend <a href="#tufte-css">Tufte-CSS</a>: it is fast &amp; simple (using only compile-time generation of sidenotes, rendered by static HTML/CSS), popular, and easy to integrate into most website workflows. For heavy footnote users or users who want a drop-in, runtime Javascript-based solutions like <a href="#sidenotes-js"><code>sidenotes.js</code></a> may be more useful.</p>
          </blockquote>
        </div>
        <p>Sidenotes and margin notes (sometimes also called “asides”) are an alternative to <a href="https://en.wikipedia.org/wiki/Note_(typography)" data-link-icon="wikipedia" data-link-icon-type="svg">footnotes/endnotes</a> in design. Where footnotes put additional material in small sections at the bottom of the page, organized by number, and endnotes stuff them at the end of the document, sidenotes instead use the large unused left/right margin of the page.</p>
        <p>Because it’s uncomfortable to read sentences which wrap from edge to edge, particularly for large widths, requiring <a href="https://en.wikipedia.org/wiki/Line_length" data-link-icon="wikipedia" data-link-icon-type="svg">short lines</a> many documents wind up looking like a narrow river of text flowing down a vast blank map. This river of text may be studded with the occasional footnote or endnote, including ancillary material like citations or digressions or extended discussion of tricky points or anticipation of objections or just the author being witty, which require constant back and forth from the place in the text where they make sense and where they can actually be read. As a result, who ever reads endnotes in a physical book? Only the most diligent will keep a thumb in the back to actually look up endnotes, and so they are either unread or tend to be relegated to the most utilitarian uses like raw citations.</p>
        <p>The situation is even worse on the Internet, because while footnotes in a book aren’t <em>too</em> bad (as long as they stay on the same page), web pages don’t really have ‘pages’ and ‘footnotes’ wind up degrading to simply endnotes.<a href="#fn1" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
        <p>Why do we use endnotes? For the most part, we use them for citation metadata, abbreviations/definitions, and more extended discussions (often humorous). But none of these are served well online by endnotes: citation metadata is better provided as hyperlinks to fulltext, <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/dfn" id="mozdev-defn" data-link-icon="FF" data-link-icon-type="text,sans">definitions (<code>&lt;defn&gt;</code>)</a>/<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/abbr" id="mozdev-abbr" data-link-icon="FF" data-link-icon-type="text,sans">abbreviations (<code>&lt;abbr&gt;</code>)</a> have native HTML support as tooltips/popups—leaving only the extended discussions use-case.</p>
        <p><a href="https://en.wikipedia.org/wiki/Robert_Bringhurst" data-link-icon="wikipedia" data-link-icon-type="svg">Bringhurst</a> comments on the pros/cons (<em><a href="https://en.wikipedia.org/wiki/The_Elements_of_Typographic_Style" data-link-icon="wikipedia" data-link-icon-type="svg">The Elements of Typographic Style</a></em>, 2004):</p>
        <blockquote>
          <p>Footnotes are the very emblem of fussiness, but they have their uses. If they are short and infrequent, they can be made economical of space, easy to find when wanted and, when not wanted, easy to ignore. Long footnotes are inevitably a distraction: tedious to read and wearying to look at. Footnotes that extend to a second page (as some long footnotes are bound to do) are an abject failure of design.</p>
          <p>Endnotes can be just as economical of space, less trouble to design and less expensive to set, and they can comfortably run to any length. They also leave the text page clean except for a peppering of superscripts. They do, however, require the serious reader to use two bookmarks and to read with both hands as well as both eyes, swapping back and forth between the popular and the persnickety parts of the text.</p>
          <p>Sidenotes give more life and variety to the page and are the easiest of all to find and read. If carefully designed, they need not enlarge either the page or the cost of printing it. Footnotes rarely need to be larger than 8 or 9 point. Endnotes are typically set in small text sizes: 9 or 10 point. Sidenotes can be set in anything up to the same size as the main text, depending on their frequency and importance, and on the overall format of the page. If they are not too frequent, sidenotes can be set with no superscripts at all (as in this book), or with the same symbol (normally an asterisk) constantly reused, even when several notes appear on a single page.</p>
        </blockquote>
        <p>Our extended discussions ought to be made easy to read in context and not hidden away at the end of the page. Sidenotes let us reuse some of that unused margin, in a way which is comfortable to read, and which is compatible with existing documents &amp; workflows using endnotes: simply move those endnotes into the margin of the text they refer to. The user can comfortably saccade over to a sidenote instantly to skim it and back, the information density of the layout increases, it requires no exotic technologies or rewrites or user education, it has a long respectable history, and it’s just generally a good idea.</p>
        <section id="examples">
          
          <p>Some examples of sidenotes in books; Bringhurst uses sidenotes himself, of course:</p>
          <figure>
            <img alt="Bringhurst2004 example of sidenotes &amp; margin notes (in this case, it repeats the section heading)" decoding="async" height="2164" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/2004-bringhurst-theelementsoftypographicstyle-pg70-marginsidenoteexample.png" width="1400"/>
            <figcaption aria-hidden="true">
              <span><span><span>2004</span></span> example of sidenotes &amp; margin notes (in this case, it repeats the section heading)</span>
            </figcaption>
          </figure>
          <p>Sidenotes extensively used in medieval manuscripts and early modern books such as the <a href="https://en.wikipedia.org/wiki/Geneva_Bible#Format" data-link-icon="wikipedia" data-link-icon-type="svg">Geneva Bible</a> (<a href="https://github.com/raphink/geneve_1564/releases/download/2015-07-08_01/geneve_1564.pdf" data-link-icon="github" data-link-icon-type="svg" data-url-archive="/doc/www/github.com/32624e2c68b704c54f95c2e9064a4fd9dca8e4ad.pdf">first 2 pages</a>) (see also <a href="https://gwern.net/red" id="gwern-red" title="&#39;Rubrication Design Examples&#39;, Branwen 2019">rubrication</a>), or Bayle’s awe-inspiringly ambitious use of (recursive) margin/side notes:</p>
          <figure>
            <img alt="Pierre Bayle’s Historical and Critical Dictionary, demonstrating recursive footnotes/sidenotes (1737, volume 4, pg901; source: Google Books)" decoding="async" height="1984" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/1737-bayle-dictionary-vol4-pg901.jpg" title="Screenshot of Google Books (https://books.google.com/books?id=JmtXAAAAYAAJ&amp;pg=PA900), showing advanced typography in a single page which contains body text, footnotes, and (recursively) sidenotes to footnotes, of Pierre Bayle&#39;s famous Enlightenment text, the &#39;Historical and Critical Dictionary&#39; (pg900 of volume 4 of the 1737 English edition)." width="1228"/>
            <figcaption aria-hidden="true">
              <a href="https://en.wikipedia.org/wiki/Pierre_Bayle" data-link-icon="wikipedia" data-link-icon-type="svg">Pierre Bayle’s</a> <a href="https://en.wikipedia.org/wiki/Dictionnaire_Historique_et_Critique" data-link-icon="wikipedia" data-link-icon-type="svg"><em>Historical and Critical Dictionary</em></a>, demonstrating recursive footnotes/sidenotes (1737, volume 4, pg901; source: Google Books)
            </figcaption>
          </figure>
          <p>Sidenotes have been less used in more contemporary books; the best-known popularizer is <a href="https://en.wikipedia.org/wiki/Edward_Tufte" data-link-icon="wikipedia" data-link-icon-type="svg">Edward Tufte</a>:</p>
          <figure>
            <img alt="Example of Tufte’s use of sidenotes &amp; margin notes: they provide additional examples, commentary, and citation metadata for the reader in context, without forcing inscrutable lookups buried deep at the end of the chapter (or worse, book) which few readers will ever bother with. (From pg61, “Layering &amp; Separation”, Envisioning Information, Tufte1990)" decoding="async" height="1785" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/1990-tufte-envisioninginformation-pg61-sidenotes.png" width="1400"/>
            <figcaption aria-hidden="true">
              Example of Tufte’s use of sidenotes &amp; margin notes: they provide additional examples, commentary, and citation metadata for the reader in context, without forcing inscrutable lookups buried deep at the end of the chapter (or worse, book) which few readers will ever bother with. (From pg61, “Layering &amp; Separation”, <em>Envisioning Information</em><span>, <span><span>Tufte</span><span>1990</span></span>)</span>
            </figcaption>
          </figure>
          <p><a href="https://en.wikipedia.org/wiki/Donald_Knuth" data-link-icon="wikipedia" data-link-icon-type="svg">Donald Knuth</a> uses margin notes in <a href="https://en.wikipedia.org/wiki/Concrete_Mathematics" data-link-icon="wikipedia" data-link-icon-type="svg"><em>Concrete Mathematics</em></a> for a wide variety of ‘mathematical graffiti’ on the body contents: quotes from famous people or just unhappy students, jokes, criticism, questions to the reader, hints, etc. in his preprint drafts (‘fasicles’) of <a href="https://en.wikipedia.org/wiki/The_Art_of_Computer_Programming" data-link-icon="wikipedia" data-link-icon-type="svg"><em>The Art of Computer Programming</em></a> uses margin notes as a kind of index, listing keywords in the margin as reminders for indexing in the final print version. The density of keywords can make the margins interesting to read on their own; an example from <a href="https://www.antiquark.com/blogimg/fasc4b.pdf" data-link-icon="pdf" data-link-icon-type="svg" data-url-archive="/doc/www/www.antiquark.com/928f1fd791ea09f97b3484017ed1ba01475ce8e1.pdf">TAOCP: pre-fascicle 4B: “A Draft of §7.2.1.7: History of Combinatorial Generation”</a>:</p>
          <figure>
            <img alt="Margin notes showing keywords for discussion of Chinese/Indian algorithmic history in Knuth." decoding="async" height="734" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/2004-knuth-taocp-fascicle-4-b-historyofcombinatorialgeneration-iching-marginnotes.png" width="1400"/>
            <figcaption aria-hidden="true">
              Margin notes showing keywords for discussion of Chinese/Indian algorithmic history in Knuth.
            </figcaption>
          </figure>
        </section>
        <section id="implementations">
          
          <p>So, sidenotes are great. They are also easy in <span>L<span>a</span>T<span>e</span>X</span> PDFs.<a href="#fn2" id="fnref2" role="doc-noteref"><sup>2</sup></a> But how do we use them online for <em>HTML</em>?</p>
          <p>Although sidenotes are ‘just’ snippets of text to the left or right of the main text and it might seem hard to screw it up, as always, there are a lot of ways to accomplish that goal, and many ways we can enhance (or screw up) them.</p>
          <p>Do we put them on the left, right, or both sides? What of the several possible HTML elements are our sidenotes delimited as (<code>&lt;span&gt;</code>, <code>&lt;a&gt;</code>, <code>&lt;div&gt;</code>, <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/aside" data-link-icon="FF" data-link-icon-type="text,sans"><code>&lt;aside&gt;</code></a>, <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/small" data-link-icon="FF" data-link-icon-type="text,sans"><code>&lt;small&gt;</code></a>, or even <code>&lt;table&gt;</code>)? Do we use Javascript, accepting that it’ll ‘flash’ an incorrectly rendered page as the JS loads &amp; runs, and outright break for users with JS turned off (as is increasingly sensible on an ever-more-hostile Internet)? Does the user have to click or do anything to make sidenotes visible? If not, what about on mobile or tiny screens, which don’t <em>have</em> any margins worth speaking of—do they get sidenotes in any form, and if so, do they render ‘inline’ as simply part of their paragraph, or do we display them as separate blocks (‘pop-in’) and by default or after a user click? How are many sidenotes laid out, do they bump each other down the page or just overlap—it would seem that JS is necessary to avoid overlaps in most approaches, but is that too great a price? How does one add sidenotes support to an existing body of documents (typically <a href="https://en.wikipedia.org/wiki/Markdown" data-link-icon="wikipedia" data-link-icon-type="svg">Markdown</a>)? And so on.</p>
          <p>Overall, I would say that good sidenotes should: render on either both sides or the right (but not the left), use spans or links where possible, use static HTML/CSS, display by default (any user effort defeats the point!) but collapse to pop-ins (because mobile users don’t have screen real estate to spare for optional material although many authors choose expanded) with inline being an option for margin notes depending on how the writer uses them, with sidenotes overlapping as a tradeoff for not requiring JS (the author will just have to rewrite such excessive sidenote usage to avoid overlapping bugs), and endnotes in existing corpuses can be rewritten by whatever tool compiles the HTML into the appropriate span encoding.</p>
          <p>Below I compare implementations I have found, and compile a table of what seems to me to be the key parts of the sidenotes taxonomy.</p>
          <p>My recommendation is that for new or lightly-noted writings, one use Tufte-CSS-style sidenotes. For heavy sidenote use, a JS solution like <code>sidenotes.js</code> is probably necessary.</p>
          <section id="comparisons">
            <h2><a href="#comparisons" title="Link to section: § &#39;Comparisons&#39;">Comparisons</a></h2>
            <div>
              <table>
                <caption>
                  Comparison of sidenotes implementations for web pages.
                </caption>
                <colgroup>
                  <col/>
                  <col/>
                  <col/>
                  <col/>
                  <col/>
                  <col/>
                  <col/>
                  <col/>
                  <col/>
                  <col/>
                  <col/>
                  <col/>
                  <col/>
                </colgroup>
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Date</th>
                    <th>Active?</th>
                    <th>Layout</th>
                    <th>Margin?</th>
                    <th>Element</th>
                    <th>Non-JS?</th>
                    <th>No click?</th>
                    <th>Mobile Fallback</th>
                    <th>Narrow</th>
                    <th>Long Collapse?</th>
                    <th>FLOSS</th>
                    <th>Pros/Cons</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
                      <a href="#tufte-css">Tufte-CSS</a>, Dave Liepmann
                    </td>
                    <td>2014</td>
                    <td>✅</td>
                    <td><strong>→</strong></td>
                    <td>✅</td>
                    <td><code>&lt;span&gt;</code></td>
                    <td>✅</td>
                    <td>✅</td>
                    <td>Pop-in (default: collapsed)</td>
                    <td>Pop-in</td>
                    <td>❌</td>
                    <td>
                      <a href="https://en.wikipedia.org/wiki/MIT_License" data-link-icon="wikipedia" data-link-icon-type="svg">MIT</a>
                    </td>
                    <td>Static, simple, popular; buggy block elements, endnote-incompatible, limited number supported</td>
                  </tr>
                  <tr>
                    <td>
                      <a href="#sidenotes-js"><code>sidenotes.js</code></a>, Said Achmiz
                    </td>
                    <td>2019</td>
                    <td>✅</td>
                    <td><strong>↔︎</strong></td>
                    <td>✅</td>
                    <td><code>&lt;a&gt;</code></td>
                    <td>❌</td>
                    <td>✅</td>
                    <td>Pop-in</td>
                    <td>Endnotes (eg. on hover)</td>
                    <td>✅</td>
                    <td>MIT</td>
                    <td>Scales to many, Pandoc-compatible; slow, buggy.</td>
                  </tr>
                  <tr>
                    <td>
                      <a href="#sidebar-tables">sidebar</a>, Said Achmiz
                    </td>
                    <td>2020</td>
                    <td>✅</td>
                    <td><strong>→</strong></td>
                    <td>✅</td>
                    <td><code>&lt;div&gt;</code></td>
                    <td></td>
                    <td>✅</td>
                    <td>✅</td>
                    <td>Pop-in</td>
                    <td>❌</td>
                    <td>?</td>
                    <td>Static; not intended for footnotes, one-sided only (currently).</td>
                  </tr>
                  <tr>
                    <td>
                      <a href="#ink-switch">Ink &amp; Switch</a>
                    </td>
                    <td>2016</td>
                    <td>✅</td>
                    <td><strong>→</strong></td>
                    <td>✅</td>
                    <td><code>&lt;aside&gt;</code></td>
                    <td>✅</td>
                    <td>✅</td>
                    <td>Pop-in</td>
                    <td>Pop-in</td>
                    <td>❌</td>
                    <td>❌</td>
                    <td>Static; non-Free, no sidenotes.</td>
                  </tr>
                  <tr>
                    <td>
                      <a href="#robert-nystrom">Robert Nystrom</a>
                    </td>
                    <td>2014</td>
                    <td>✅</td>
                    <td><strong>→</strong></td>
                    <td>✅</td>
                    <td><code>&lt;aside&gt;</code></td>
                    <td>❌</td>
                    <td>✅</td>
                    <td>Inline</td>
                    <td>Inline</td>
                    <td>❌</td>
                    <td>❌</td>
                    <td>Offers inline fallback; custom, non-Free, requires JS.</td>
                  </tr>
                  <tr>
                    <td>
                      <a href="#matthew-butterick">Matthew Butterick</a>
                    </td>
                    <td>2013</td>
                    <td>✅</td>
                    <td><strong>←</strong></td>
                    <td>✅</td>
                    <td><code>&lt;aside&gt;</code></td>
                    <td>✅</td>
                    <td>✅</td>
                    <td>Inline</td>
                    <td>Inline</td>
                    <td>❌</td>
                    <td>❌</td>
                    <td>Static, simple, offers inline fallback; custom, non-Free, no numbering.</td>
                  </tr>
                  <tr>
                    <td>
                      <a href="#koos-looijesteijn">Koos Looijesteijn</a>
                    </td>
                    <td>2019</td>
                    <td>✅</td>
                    <td><strong>→</strong></td>
                    <td>❌</td>
                    <td><code>&lt;span&gt;</code>/<code>&lt;small&gt;</code></td>
                    <td>❌</td>
                    <td>✅</td>
                    <td>Pop-in (collapsed)</td>
                    <td>Pop-in (collapsed)</td>
                    <td>❌</td>
                    <td>❌?</td>
                    <td>App/screen-reader-compatible, searchable; relatively complex, requires JS, non-Free.</td>
                  </tr>
                  <tr>
                    <td>
                      <a href="#harvard-law-review"><em>Harvard Law Review</em></a>
                    </td>
                    <td>2016?</td>
                    <td>✅</td>
                    <td><strong>↔︎</strong></td>
                    <td>❌?</td>
                    <td><code>&lt;span&gt;</code></td>
                    <td>❌</td>
                    <td>❌</td>
                    <td>Pop-in</td>
                    <td>Pop-in</td>
                    <td>✅ (but too short! ☹)</td>
                    <td>❌</td>
                    <td>Uses both margins; custom, non-Free, requires clicks &amp; JS.</td>
                  </tr>
                  <tr>
                    <td>
                      <a href="#yale-law-journal"><em>Yale Law Journal</em></a>
                    </td>
                    <td>2017?</td>
                    <td>✅</td>
                    <td><strong>→</strong></td>
                    <td>❌?</td>
                    <td><code>&lt;div&gt;</code></td>
                    <td>❌</td>
                    <td>❌</td>
                    <td>❌</td>
                    <td>❌</td>
                    <td>✅ (but too short! ☹)</td>
                    <td>❌</td>
                    <td>Floating footnote fallback; custom, non-Free, requires clicks &amp; JS, entire site unusable on mobile.</td>
                  </tr>
                  <tr>
                    <td>
                      <a href="#knight-institute">Knight Institute</a>
                    </td>
                    <td>?</td>
                    <td>✅</td>
                    <td><strong>→</strong></td>
                    <td>❌?</td>
                    <td><code>&lt;span&gt;</code></td>
                    <td>❌</td>
                    <td>❌</td>
                    <td>Pop-in (collapsed)</td>
                    <td>Pop-in (collapsed)</td>
                    <td>✅ (but too short! ☹)</td>
                    <td>❌</td>
                    <td>Somewhat more readable than <em>Harvard</em>/<em>Yale</em>; custom, non-Free, requires clicks &amp; JS.</td>
                  </tr>
                  <tr>
                    <td>
                      <a href="#new-york"><em>New York</em></a>
                    </td>
                    <td>?</td>
                    <td>✅</td>
                    <td><strong>←</strong></td>
                    <td>❌?</td>
                    <td><code>&lt;span&gt;</code></td>
                    <td>❌</td>
                    <td>❌</td>
                    <td>Floating footnote</td>
                    <td>Floating footnote</td>
                    <td>❌</td>
                    <td>MIT?</td>
                    <td>Floating footnote fallback; left margin, requires clicks for everything, requires JS, unclear license.</td>
                  </tr>
                  <tr>
                    <td>
                      <a href="#jquery-sidenotes">jQuery.sidenotes</a>, Clark
                    </td>
                    <td>2013</td>
                    <td>❌</td>
                    <td><strong>←</strong></td>
                    <td>✅</td>
                    <td><code>&lt;a&gt;</code></td>
                    <td>❌</td>
                    <td>✅</td>
                    <td>Endnotes</td>
                    <td>Pop-in (expanded)</td>
                    <td>❌</td>
                    <td>MIT</td>
                    <td>Featureful; slow, unmaintained, limited number, only on the left?</td>
                  </tr>
                  <tr>
                    <td>
                      <a href="#sidenotes-js-correia">Sidenotes.js</a>, Correia
                    </td>
                    <td>2015</td>
                    <td>❌</td>
                    <td><strong>↔︎</strong></td>
                    <td>❌?</td>
                    <td><code>data</code></td>
                    <td>❌</td>
                    <td>❌</td>
                    <td>Slide-in</td>
                    <td>Slide-in</td>
                    <td>❌</td>
                    <td>MIT</td>
                    <td>Unique ‘slide-in’ approach; everything else.</td>
                  </tr>
                  <tr>
                    <td>
                      <a href="#the-india-forum"><em>The India Forum</em></a>
                    </td>
                    <td>?</td>
                    <td>✅</td>
                    <td><strong>→</strong></td>
                    <td>❌</td>
                    <td><code>&lt;a&gt;</code></td>
                    <td>❌</td>
                    <td>❌</td>
                    <td>Slide-in</td>
                    <td>Endnotes</td>
                    <td>❌</td>
                    <td>❌</td>
                    <td>Improved slide-in shows all footnotes; everything else.</td>
                  </tr>
                  <tr>
                    <td>
                      <a href="#tables">HTML tables</a>
                    </td>
                    <td>NA</td>
                    <td>NA</td>
                    <td><strong>↔︎</strong></td>
                    <td>✅</td>
                    <td><code>&lt;table&gt;</code></td>
                    <td>✅</td>
                    <td>✅</td>
                    <td>❌</td>
                    <td>❌</td>
                    <td>❌</td>
                    <td>✅</td>
                    <td>Static, simple; no mobile/narrow compatibility, rigid, no features, hard to write or modify.</td>
                  </tr>
                  <tr>
                    <td>
                      <a href="#annotate-molly-white">Annotate</a>, Molly White
                    </td>
                    <td>2022</td>
                    <td>✅</td>
                    <td><strong>→</strong></td>
                    <td>❌?</td>
                    <td><code>&lt;section&gt;</code>+<code>&lt;div&gt;</code></td>
                    <td>❌</td>
                    <td>✅</td>
                    <td>✅</td>
                    <td>?</td>
                    <td>❌</td>
                    <td>MIT</td>
                    <td>
                      Annotates ‘ranges’ instead of being limited to an anchor/number; due to intended <a href="https://en.wikipedia.org/wiki/Robert_Fisk" data-link-icon="wikipedia" data-link-icon-type="svg">fisking</a> use-case, can run off screen.
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </section>
          <section id="tufte-css">
            <h2><a href="#tufte-css" title="Link to section: § &#39;Tufte-CSS&#39;">Tufte-CSS</a></h2>
            <p>Experiments in using CSS3 for sidenotes date back to at least 2003, but by far the most popular implementation, and the primary inspiration for most sidenotes users, is the c. 2014 <a href="https://edwardtufte.github.io/tufte-css/#sidenotes" data-link-icon="ET" data-link-icon-type="text" data-url-archive="/doc/www/edwardtufte.github.io/e43d8239ed3fa1d513e2b4d071b6a7c0c8a98bff.html#sidenotes" title="&#39;Tufte-CSS: Sidenotes: Footnotes and Marginal Notes&#39;, Liepmann 2023">Tufte-CSS</a> (<a href="https://github.com/edwardtufte/tufte-css" data-link-icon="ET" data-link-icon-type="text">Github</a>). Tufte-CSS is outdated in respects, but does sidenotes sensibly:</p>
            <figure>
              <img alt="Tufte-CSS’s section on sidenotes/margin notes, demonstrating sidenotes/margin notes (default desktop appearance)." decoding="async" height="1785" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/2020-tuftecss-sidenotesmarginnotes.png" width="1400"/>
              <figcaption aria-hidden="true">
                Tufte-CSS’s section on sidenotes/margin notes, demonstrating sidenotes/margin notes (default desktop appearance).
              </figcaption>
            </figure>
            <figure>
              <img alt="Tufte-CSS “pop-in” sidenotes, collapsed vs uncollapsed (on a narrow window or mobile)" decoding="async" height="542" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/2020-tuftecss-sidenotesmarginnotes-mobilecollapsed.png" width="915"/>
              <figcaption aria-hidden="true">
                Tufte-CSS “pop-in” sidenotes, collapsed vs uncollapsed (on a narrow window or mobile)
              </figcaption>
            </figure>
            <p>A Tufte-CSS-formatted sidenote looks like this:</p>
            <div id="cb1">
              <pre><code><span id="cb1-1">&lt;<span>label</span><span> for=</span><span>&#34;sn-extensive-use-of-sidenotes&#34;</span><span> class=</span><span>&#34;margin-toggle sidenote-number&#34;</span>&gt;&lt;/<span>label</span>&gt;</span>
<span id="cb1-2"></span>
<span id="cb1-3">&lt;<span>input</span><span> type=</span><span>&#34;checkbox&#34;</span><span> id=</span><span>&#34;sn-extensive-use-of-sidenotes&#34;</span><span> class=</span><span>&#34;margin-toggle&#34;</span>/&gt;</span>
<span id="cb1-4"></span>
<span id="cb1-5">&lt;<span>span</span><span> class=</span><span>&#34;sidenote&#34;</span>&gt;This is a sidenote.&lt;/<span>span</span>&gt;</span></code></pre>
            </div>
            <p>By default (on desktop), the notes are floated right into the margin; no measures are taken to avoid collisions or overlaps (presumably if you have that problem, you ought to just rewrite your page or fix it yourself). On narrow windows &amp; mobile, a media-query overrides the regular CSS, so the margin notes are not floated, simply indented, and toggled. The CSS looks like:</p>
            <div id="cb2">
              <pre><code><span id="cb2-1"><span>.sidenote</span><span>,</span></span>
<span id="cb2-2"><span>.marginnote</span> {</span>
<span id="cb2-3">    <span>float</span>: <span>right</span><span>;</span></span>
<span id="cb2-4">    <span>clear</span>: <span>right</span><span>;</span></span>
<span id="cb2-5">    <span>margin-right</span>: <span>-60</span><span>%</span><span>;</span></span>
<span id="cb2-6">    <span>width</span>: <span>50</span><span>%</span><span>;</span></span>
<span id="cb2-7">    <span>margin-top</span>: <span>0.3</span><span>rem</span><span>;</span></span>
<span id="cb2-8">    <span>margin-bottom</span>: <span>0</span><span>;</span></span>
<span id="cb2-9">    <span>font-size</span>: <span>1.1</span><span>rem</span><span>;</span></span>
<span id="cb2-10">    <span>line-height</span>: <span>1.3</span><span>;</span></span>
<span id="cb2-11">    <span>vertical-align</span>: <span>baseline</span><span>;</span></span>
<span id="cb2-12">    <span>position</span>: <span>relative</span><span>;</span></span>
<span id="cb2-13">}</span>
<span id="cb2-14"></span>
<span id="cb2-15">...</span>
<span id="cb2-16">label<span>.sidenote-number</span> {</span>
<span id="cb2-17">    <span>display</span>: <span>inline</span><span>;</span></span>
<span id="cb2-18">}</span>
<span id="cb2-19"></span>
<span id="cb2-20">label<span>.margin-toggle</span><span>:not(</span><span>.sidenote-number</span><span>)</span> {</span>
<span id="cb2-21">    <span>display</span>: <span>none</span><span>;</span></span>
<span id="cb2-22">}</span>
<span id="cb2-23"></span>
<span id="cb2-24">...</span>
<span id="cb2-25">/* The mobile fallback: */</span>
<span id="cb2-26"><span>@media</span> (<span>max-width</span>: <span>760</span><span>px</span>) {</span>
<span id="cb2-27">    <span>.sidenote</span><span>,</span></span>
<span id="cb2-28">        <span>.marginnote</span> {</span>
<span id="cb2-29">            <span>display</span>: <span>none</span><span>;</span></span>
<span id="cb2-30">        }</span>
<span id="cb2-31">        <span>.margin-toggle</span><span>:checked</span> <span>+</span> <span>.sidenote</span><span>,</span></span>
<span id="cb2-32">        <span>.margin-toggle</span><span>:checked</span> <span>+</span> <span>.marginnote</span> {</span>
<span id="cb2-33">            <span>display</span>: <span>block</span><span>;</span></span>
<span id="cb2-34">            <span>float</span>: <span>left</span><span>;</span></span>
<span id="cb2-35">            <span>left</span>: <span>1</span><span>rem</span><span>;</span></span>
<span id="cb2-36">            <span>clear</span>: <span>both</span><span>;</span></span>
<span id="cb2-37">            <span>width</span>: <span>95</span><span>%</span><span>;</span></span>
<span id="cb2-38">            <span>margin</span>: <span>1</span><span>rem</span> <span>2.5</span><span>%</span><span>;</span></span>
<span id="cb2-39">            <span>vertical-align</span>: <span>baseline</span><span>;</span></span>
<span id="cb2-40">            <span>position</span>: <span>relative</span><span>;</span></span>
<span id="cb2-41">        }</span>
<span id="cb2-42">}</span></code></pre>
            </div>
            <p>Margin notes are implemented similarly to sidenotes because a margin note can just be a sidenote whose number is hidden (at the possibility of some user confusion at the ‘missing’ endnote/sidenote, fixable with further CSS tweaks using number counters).</p>
            <p>One thing to note about Tufte-CSS is that, like books, it displays sidenotes by default. Many websites experimenting with note variations throw away the greatest advantage—the effortlessness of reading sidenotes by simply saccading left/right—in favor of hassling the user and forcing them to do quite as much work by clicking various UI elements to expand/collapse notes, defeating much of the point compared to a normal hyperlinked endnote.</p>
            <p>Tufte-CSS requires no JavaScript and is pure HTML/CSS, delegating layout to the browser. It is simple, fast, supports mobile well, and widely-used—it is definitely the most popular of HTML sidenote implementations. Its disadvantages are it will not handle gracefully many complex<a href="#fn3" id="fnref3" role="doc-noteref"><sup>3</sup></a> or lengthy sidenotes (which will overlap), and Tufte-CSS-style notes are not generated by default by many systems (so some sort of rewrite step is necessary to integrate Tufte-CSS into however one actually creates one’s website).</p>
            <p>Because Tufte-CSS sidenotes/margin notes are located inline, rather than put at the end of the text like most document systems implement it (eg. Pandoc), one needs either to use JS to rewrite endnotes at runtime or to rewrite them at compile-time. Many projects generate Tufte-CSS sidenote spans directly or rewrite standard Markdown <code>&lt;a&gt;</code> endnotes to spans, such as the R packages <a href="https://cran.r-project.org/web/packages/tufte/index.html" data-link-icon="ET" data-link-icon-type="text">“tufte”</a> &amp; <a href="https://eddelbuettel.github.io/tint/" data-url-archive="/doc/www/eddelbuettel.github.io/957664909f6773b4a2a8ec20a7ff67fe933d16dd.html" title="Allaire et al 2016">“Tint Is Not Tufte: An implementation in R Markdown”</a>. For Pandoc, <a href="https://github.com/jez/pandoc-sidenote" data-link-icon="PNDC" data-link-icon-type="text,quad,sans">pandoc-sidenote</a> is a <a href="https://en.wikipedia.org/wiki/Haskell" data-link-icon="wikipedia" data-link-icon-type="svg">Haskell</a> <a href="https://pandoc.org/filters.html" data-link-icon="PNDC" data-link-icon-type="text,quad,sans">Pandoc filter</a> which rewrites Pandoc’s endnotes in Tufte-CSS-style spans, and can be used with Pandoc-based site builders like Hakyll or Jekyll (for the latter, see <a href="https://github.com/jez/tufte-pandoc-jekyll" data-link-icon="ET" data-link-icon-type="text">tufte-pandoc-jekyll</a> &amp; <a href="https://github.com/clayh53/tufte-jekyll" data-link-icon="ET" data-link-icon-type="text">tufte-jekyll</a>); <a href="https://github.com/gpaumier/gp2/commit/6f132a4cc684df807b0f3b6ad9d337e073bc3260" data-link-icon="github" data-link-icon-type="svg">Guillaume Paumier</a> &amp; <a href="https://mattwetmore.me/posts/hakyll-custom-writer" data-url-archive="/doc/www/mattwetmore.me/497c496a2e5173d40a147d5724c60dabb2b19925.html">Matt Palmer</a> have Lua versions.</p>
            <p>Tufte-CSS user examples: <a href="http://nicolasduquette.com/research.html" data-url-archive="/doc/www/nicolasduquette.com/ec9dd711761f49cc9a6e0b42c065cf0af28c70b7.html">Nicolas J. Duquette</a>, <a href="https://schmud.de/posts/2020-08-04-mother-of-mothers.html" data-url-archive="/doc/www/schmud.de/7e79d2718e09893133f95bf52c99417003529f01.html" title="The Mothers of the Mother of All Demos">David Schmudde</a>, <a href="https://digitalwords.net/about/" data-url-archive="/doc/www/digitalwords.net/75b95df3524f43bbcc1db69cb776516eb6776848.html">in Hebrew</a>, <a href="https://blog.sulami.xyz/posts/common-lisp-restarts/" data-url-archive="/doc/www/blog.sulami.xyz/1da092c478c1f23e2704fea540edab8cf6e613e0.html" title="Restarts in Common Lisp">Robin Schroer</a>, <a href="https://blog.auxon.io/2019/10/25/type-level-registers/" data-url-archive="/doc/www/blog.auxon.io/bd90c1d9fbd86cf686699792ed4c0c1a58c46544.html" title="Using Type-Level Programming in Rust to Make Safer Hardware Abstractions">Dan Pittman</a>, <a href="https://www.shapeoperator.com/2016/12/12/sunset-geometry/" data-url-archive="/doc/www/www.shapeoperator.com/8dcf2f7a3127cb59791a51645e64c060a5375621.html" title="Sunset Geometry">Jason Merrill</a>, <a href="https://andzuck.com/blog/sfw/" title="Super Free Will">Andrew Zuckerman</a>, <a href="https://taeer.bar-yam.me/blog/posts/hakyll-tikz/" data-url-archive="/doc/www/taeer.bar-yam.me/cb46b12b7b54bf5744abb7fd61d68a8ed5366c7a.html" title="Hakyll + TikZ">Taeer Bar-Yam</a>, <a href="https://risk-engineering.org/concept/Rasmussen-practical-drift" data-url-archive="/doc/www/risk-engineering.org/6b44766648fd0d81faaef77d660f36914fe8cbe5.html" title="&#39;Rasmussen and practical drift: Drift towards danger and the normalization of deviance&#39;, 2017">Eric Marsden (<em>Risk Engineering</em>)</a>, <a href="https://tomcritchlow.com/2019/11/18/yes-and/" data-url-archive="/doc/www/tomcritchlow.com/0e6068f5191d296b2066cc3ce2f2225658926559.html" title="&#39;Yes! and... How to be effective in the theatre of work&#39;, 2019">Tom Critchlow</a>, <a href="http://philcrissman.net/posts/eulers-fizzbuzz/" data-url-archive="/doc/www/philcrissman.net/2be66e7d3c5afe820d5758edaa08280ece76fe1d.html" title="Euler’s Fizzbuzz">Phil Crissman</a>.</p>
            <p>Similar approaches (some of these are more limited than Tufte-CSS; typically, authors fail to handle narrow/mobile):</p>
            <ul>
              <li>
                <p><a href="https://numinous.productions/ttft/" id="matuschak-nielsen-2019" data-link-icon="MN" data-link-icon-type="text" title="&#39;How Can We Develop Transformative Tools For Thought?&#39;, Matuschak &amp; Nielsen 2019">“How can we develop transformative tools for thought?”</a>, <a href="https://andymatuschak.org/" data-url-archive="/doc/www/andymatuschak.org/991e56a3a61f84d8cb1025af60ccfa6c60da6ccb.html">Andy Matuschak</a> &amp; <a href="https://michaelnielsen.org/" data-link-icon="MN" data-link-icon-type="text">Michael Nielsen</a> 2019 (mobile: floating footnotes)</p>
              </li>
              <li>
                <p><a href="https://www.arxiv-vanity.com/">Arxiv Vanity</a> (mobile: floating footnotes)</p>
              </li>
              <li>
                <p><a href="https://nintil.com/science-ending-frontier" data-link-icon="𝓝" data-link-icon-type="text">Nintil</a> (mobile: pop-in, expanded)</p>
              </li>
              <li>
                <p><a href="https://danilafe.com/blog/sidenotes/" data-url-archive="/doc/www/danilafe.com/f525a8a1afd129158b4da9bd105bb12b6997683f.html" title="JavaScript-Free Sidenotes in Hugo">Danila Fedorin’s</a> sidenotes (mobile: pop-in, collapsed) are inspired by Koos Looijesteijn’s approach, Fedorin’s implementation removes the JS but at the cost of guaranteeing accessibility and inheriting Tufte-CSS’s limitations on block elements/Markdown in sidenotes</p>
              </li>
              <li>
                <p><a href="https://pair-code.github.io/interpretability/text-dream/blogpost/" id="bäuerle-wexler-2020" data-url-archive="/doc/www/pair-code.github.io/c331351a690011a2a37f7ee1c75bf771f01df3a3.html" title="A visual investigation of nightmares in Sesame Street by Alex Bäuerle (@a13xba) and James Wexler (@bengiswex) of PAIR.">“What does BERT dream of?”</a> (mobile: pop-in, expanded)</p>
              </li>
              <li>
                <p><a href="https://increment.com/open-source/the-rise-of-few-maintainer-projects/" id="eghbal-2019" data-url-archive="/doc/www/increment.com/ee36c21b6f3b2364fe87eed5b67472e63aa723f2.html" title="&#39;The rise of few-maintainer projects: As casual contributions—coordinated by a handful of maintainers—become ever more prevalent, how should we reset our expectations for OSS?&#39;, Nadia Eghbal 2019"><em>Increment</em></a> (mobile: pop-in, expanded)</p>
              </li>
              <li>
                <p><a href="https://mattwilcox.net/musing/the-ineffectiveness-of-icons" data-url-archive="/doc/www/mattwilcox.net/d9de993eca3bceb7b1eb8810a3ff362b96a20c97.html" title="The ineffectiveness of lonely icons: If your target audience is a general population, you should not be using icons alone to convey anything meaningful. By doing so, you have made assumptions that are unlikely to be appropriate to a general audience.">Matt Wilcox</a>, with an unusual use of margin notes for paragraph/section <em>summaries</em>, similar to my use (mobile: pop-in, expanded)</p>
              </li>
              <li>
                <p><a href="http://glench.com/closed-source/dictionaryofnumbers/" data-url-archive="/doc/www/glench.com/4f59c13421125467f5cbe9f2cbf830d3a1415519.html">“Dictionary of Numbers”</a>, Glen Chiacchieri (mobile: ❌)</p>
              </li>
              <li>
                <p><a href="https://letters.temporarystate.net/entry/3/" data-url-archive="/doc/www/letters.temporarystate.net/633ff3d37db53263cc8fe0712441b636c3d9c708.html" title="Monospace Typography">Roman Gornitsky (The Temporary State)</a> (mobile: ❌)</p>
              </li>
              <li>
                <p><a href="https://clagnut.com/blog/2395" data-url-archive="/doc/www/clagnut.com/c62f57e42fe341a699bb99c5f473cbad5a38f37e.html" title="All you need to know about hyphenation in CSS">Richard Rutter</a> (mobile: pop-in, expanded)</p>
              </li>
              <li>
                <p><a href="https://jamesyu.org/singular/" id="yu-gpt-3-2020" data-url-archive="/doc/www/jamesyu.org/b0d639c4ec1bcf237375f7c6cf00d9bbaf30e8a9.html" title="&#39;Singular: Possible futures of the singularity&#39;, Yu &amp; GPT-3 2020">“Singular: Possible futures of the singularity”</a>, James Yu &amp; <a href="https://arxiv.org/abs/2005.14165#openai" id="brown-et-al-2020" data-link-icon="openai" data-link-icon-type="svg" data-url-archive="/doc/www/arxiv.org/90cd91e98db4f7b0b1cd57da7c3713dbe34c2146.pdf#openai" data-href-mobile="https://ar5iv.labs.arxiv.org/html/2005.14165?fallback=original#openai" title="&#39;GPT-3: Language Models are Few-Shot Learners&#39;, Brown et al 2020">GPT-3</a> (mobile: click-to-expand as a sticky pop-up)</p>
              </li>
              <li>
                <p><a href="https://vincebuffalo.com/blog/2020/08/20/the-problem-of-detecting-polygenic-selection-from-temporal-data.html" data-url-archive="/doc/www/vincebuffalo.com/ff0a25c608cc9a469d6d06ea90a7789d875ededa.html">“The Problem of Detecting Polygenic Selection from Temporal Data”</a>, Vince Buffalo (mobile: pop-in, expanded)</p>
              </li>
              <li>
                <p><a href="https://fransdejonge.com/wp-content/uploads/2010/01/sidenotes.html" data-url-archive="/doc/www/fransdejonge.com/839b30a0dcd5b99be535e7975cd76f51ff45a463.html">“How to do sidenotes in HTML documents using CSS and Javascript”</a><span>, Frans de <span><span>Jonge</span><span>2005</span></span> (an early example, with consideration of cross-browser compatibility for the era)</span></p>
              </li>
              <li>
                <p><a href="https://omar.website/posts/against-recognition/" data-url-archive="/doc/www/omar.website/41f329c0b1c01c7c073276676c141e800809f2e0.html">Omar Rizwan</a> (Hugo)</p>
              </li>
              <li>
                <p><a href="https://runyourown.social/">Darius Kazemi/Emma Winston</a> (‘margin notes’, no apparent use of numbering to support ‘sidenotes’; nice retro theme; <code>&lt;aside&gt;</code>; pop-in, expanded; no truncation/wrapping; absolute positioning offset based on div around associated paragraph, so can’t handle overlaps which leads to bugs as <a href="https://gwern.net/doc/design/typography/sidenote/2022-10-31-dariuskazemi-runyourownsocial-exampleofoverlappingsidenotesbug.png" data-link-icon="image" data-link-icon-type="svg" data-image-height="2667" data-image-width="1600">can be seen</a> in that page; apparently extraneous use of grid?)</p>
              </li>
              <li>
                <p><a href="https://verdagon.dev/blog/perfect-replayability-prototyped" id="ovadia-2022" title="&#39;Heisenbugs: The most elusive kind of bug, and how to capture them with Perfect Replayability—Eliminate heisenbugs and endless debugging sessions!&#39;, Evan Ovadia 2022-06-29">Vale</a> (notable for strange handling of mobile: the sidenotes are hidden and their footnote numbers left in place, by being moved to the end of a section and grouped in a single list while being collapsed; clicking or tapping the footnote jumps to the end-block but does <em>not</em> expand them, and they must be clicked on to expand them all.)</p>
              </li>
              <li>
                <p>examples with <strong>no mobile</strong> (❌) support:</p>
                <ul>
                  <li>
                    <a href="https://www.typography.com/blog/text-for-proofing-fonts" id="hoefler-2020" data-url-archive="/doc/www/www.typography.com/2b041cceb9decbf98ea6ee0c4d690a8e544851bc.html" title="&#39;Text for Proofing Fonts: A farewell to &lt;em&gt;The Quick Brown Fox&lt;/em&gt;&#39;, Jonathan Hoefler 2020">Hoefler&amp;Co.</a>
                  </li>
                  <li>
                    <a href="http://www.michaelpetralia.com/theartofliving_epictetus.html" data-url-archive="/doc/www/www.michaelpetralia.com/ee47655d51c43da621647c5259120b5d932171cb.html" title="The Art of Living (Epictetus circa A.D. 100), as interpreted by Sharon Lebell">Michael Petralia</a>
                  </li>
                  <li>The Morning After WordPress template’s “asides” (<a href="https://thecityasaproject.org/2020/05/a-pilgrimage-round-my-room-virtual-travel-to-the-holy-land-in-the-middle-ages/" title="A Pilgrimage Round my Room: Virtual Travel to the Holy Land in the Middle Ages">example</a>)
                  </li>
                  <li>
                    <a href="https://mazzo.li/posts/vectorized-atan2.html" data-url-archive="/doc/www/mazzo.li/0dc716142b410dc5bb3dcee57210f5b4c7566645.html" title="Speeding up atan2f by 50x">Francesco</a> (overloads <code>&lt;section&gt;</code> &amp; manually overrides list markers for numbering for one section per sidenote, with fragile grid default positioning; mobile is just desktop but made microscopic)
                  </li>
                  <li>
                    <a href="https://two-wrongs.com/markov-chains-for-queueing-systems" title="&#39;Markov Chains for Queueing Systems&#39;, kqr 2022">xkqr</a>
                  </li>
                </ul>
              </li>
            </ul>
          </section>
          <section id="sidenotes-js">
            <h2><a href="#sidenotes-js" title="Link to section: § &#39;sidenotes.js&#39;"><code>sidenotes.js</code></a></h2>
            <p><a href="https://gwern.net/static/js/sidenotes.js" data-link-icon="code" data-link-icon-type="svg"><code>sidenotes.js</code></a> was developed by <a href="https://wiki.obormot.net/">Said Achmiz</a> in 2019 for use on Gwern.net after looking at Tufte-CSS and deciding that Tufte-CSS’s simple approach (while appropriate for most users) would fail on particularly-heavily endnoted pages:</p>
            <figure>
              <img alt="Demonstration of sidenotes.js handling multiple large dense endnote annotations on Radiance." decoding="async" height="1295" loading="lazy" src="https://gwern.net/doc/cs/css/sidenotes.png" width="1400"/>
              <figcaption aria-hidden="true">
                Demonstration of <code>sidenotes.js</code> handling multiple large dense endnote annotations on <a href="https://gwern.net/doc/radiance/2002-scholz-radiance" id="scholz-2002-2" title="&#39;Radiance: A Novel&#39;, Scholz et al 2013"><em>Radiance</em></a>.
              </figcaption>
            </figure>
            <figure>
              <img alt="Pop-in of footnotes (handled by extracts.js/popins.js as a special-case of generalized annotations)." decoding="async" height="1368" loading="lazy" src="https://gwern.net/doc/design/2021-03-30-gwern-sidenotes-gwernnet-popins.png" width="685"/>
              <figcaption aria-hidden="true">
                Pop-in of footnotes (handled by <code>extracts.js</code>/<code>popins.js</code> as a special-case of generalized annotations).
              </figcaption>
            </figure>
            <p>The advantage over Tufte-css is that <code>sidenotes.js</code> ‘manually’ lays out sidenotes at runtime to minimize overlap while trying to keep sidenotes within the same window as the anchor, enabling it to handle almost arbitrarily many long endnotes without rendering any unreadable. Sidenotes/endnotes can be arbitrarily long and contain most block elements like code blocks, blockquotes, lists, images, tables, etc. While it’s at it, sidenotes are highlighted &amp; their matching anchors highlighted on hover, too-long sidenotes are partially collapsed (the user clicks to expand them). Further, it supports a custom “margin note” feature: any HTML spans of text with the class <code>marginnote</code> will be popped out of the text into the margin if there is room, or it will be left in place &amp; italicized. (I place margin notes at the beginning of paragraphs as summaries, letting users more easily skim.)</p>
            <p>The disadvantage compared to pure static HTML/CSS approaches is that the JS needs to load and copy the endnotes into sidenotes, reflow as necessary over the whole page, which is user-visible &amp; distracting; this is noticeable even putting the load in the HEAD to speed it up. It can also interact with other complicated features and while it will handle heavy note loads much better than most static approaches (most of which don’t even try to avoid errors like overlaps), it still has the occasional subtle bug.</p>
            <p>For narrow windows, other approaches can be used. On Gwern.net, I use <a href="https://gwern.net/static/js/popups.js" id="achmiz-2019" data-link-icon="code" data-link-icon-type="svg" title="&#39;&lt;code&gt;popups.js&lt;/code&gt;&#39;, Achmiz 2019">floating footnotes</a> which ‘pop up’ when the user hovers over a footnote anchor<a href="#fn4" id="fnref4" role="doc-noteref"><sup>4</sup></a>, which avoids the need to navigate to the end of the page &amp; back.</p>
            <p><code>sidenotes.js</code> assumes that the document has been generated from Pandoc Markdown and has normal Pandoc endnotes (of the form <code>&lt;a href=&#34;#fn1&#34; class=&#34;footnote-ref&#34; id=&#34;fnref1&#34; role=&#34;doc-noteref&#34;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt;</code> for the anchor, and <code>&lt;li id=&#34;fn1&#34; role=&#34;doc-endnote&#34;&gt;&lt;p&gt;Example&lt;/p&gt;&lt;/li&gt;</code> for the endnote body at the end of the document). Hence, implementing sidenotes with it requires little more than a JS import like <code>&lt;script src=&#34;/static/js/sidenotes.js&#34; async&gt;&lt;/script&gt;</code>. (This has some advantages: for example, footnotes/sidenotes remain linkable—one can link to <code>#fn1</code> or <code>#sn1</code> as desired.<a href="#fn5" id="fnref5" role="doc-noteref"><sup>5</sup></a>)</p>
            <p>Users or similar implementations:</p>
            <ul>
              <li>
                <a href="https://fantasticanachronism.com/2020/01/17/having-had-no-predecessor-to-imitate/index.html" id="menard-2020" title="Having Had No Predecessor to Imitate, He Had No Successor Capable of Imitating Him">Fantastic Anachronism</a>
              </li>
              <li>Leo Gao (eg. <a href="https://bmk.sh/2019/10/27/The-Difficulties-of-Text-Generation-with-Autoregressive-Language-Models/" data-url-archive="/doc/www/bmk.sh/8fcbeadddf8de25abf54dc7705ae3f5756fb6059.html" title="The Difficulties of Text Generation using Autoregressive Language Models: A Brief Overview">1</a>, <a href="https://bmk.sh/2020/05/29/GPT-3-A-Brief-Summary/" title="Why GPT-3 Matters">2</a>) designed his site inspired a little by Gwern.net, and uses sidenotes similarly; his approach seems to be simpler. (mobile: endnotes)
              </li>
              <li>OpenAI (eg. <a href="https://openai.com/research/how-ai-training-scales" id="mccandlish-et-al-2018" data-link-icon="openai" data-link-icon-type="svg" title="How AI Training Scales: We’ve discovered that the gradient noise scale, a simple statistical metric, predicts the parallelizability of neural network training on a wide range of tasks. Since complex tasks tend to have noisier gradients, increasingly large batch sizes are likely to become useful in the future, removing one potential limit to further growth of AI systems. More broadly, these results show that neural network training need not be considered a mysterious art, but can be rigorized and systematized.">1</a>) (mobile: endnotes)
              </li>
              <li>
                <a href="http://blog.platypope.org/2010/1/7/solving-puzzles-with-computer-science/" data-url-archive="/doc/www/blog.platypope.org/7a3fe0312ad89a34694e95c7893a9dcb568e5488.html" title="Solving puzzles with (computer) science">Marshall (Vandegrift) Bockrath</a>, from <a href="http://blog.platypope.org/2012/4/5/restore-features/" data-url-archive="/doc/www/blog.platypope.org/c5b7710e52f2b1be0c8ebef0bb3100a1b103b99e.html" title="Restoring Features">pre-2012</a>! (mobile: ❌)
              </li>
            </ul>
            
          </section>
          <section id="ink-switch">
            <h2><a href="#ink-switch" title="Link to section: § &#39;Ink &amp; Switch&#39;">Ink &amp; Switch</a></h2>
            <p><a href="https://www.inkandswitch.com/index.html" data-url-archive="/doc/www/www.inkandswitch.com/2950b5101ad7d25ba0a3066f279c555ead5c18c7.html">Ink &amp; Switch’s</a> pages like <a href="https://www.inkandswitch.com/local-first.html" id="kleppmann-et-al-2019" data-url-archive="/doc/www/www.inkandswitch.com/7b1c7b3505ade1a1ecebbd9af85f8ed37270cbeb.html" title="&#39;Local-first software: You own your data, in spite of the cloud [web]&#39;, Kleppmann et al 2019">“Local-first software: You own your data, in spite of the cloud”’s</a> 2016 static margin notes feature looks much like Tufte-CSS in using HTML/CSS to create right-aligned sidenotes, although Ink &amp; Switch eschews explicit footnote numbering and its pop-ins are uncollapsed by default.</p>
            <figure>
              <img alt="Ink &amp; Switch, “Local-first software” margin notes" decoding="async" height="771" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/2016-inkandswitch-localfirstdesign-marginnotes.png" width="1400"/>
              <figcaption aria-hidden="true">
                Ink &amp; Switch, “Local-first software” margin notes
              </figcaption>
            </figure>
            <figure>
              <img alt="Ink &amp; Switch, “Local-first software” margin notes, mobile (pop-in, default expanded)" decoding="async" height="459" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/2016-inkandswitch-localfirstdesign-marginnotes-mobile.png" width="883"/>
              <figcaption aria-hidden="true">
                Ink &amp; Switch, “Local-first software” margin notes, mobile (pop-in, default expanded)
              </figcaption>
            </figure>
            <p>Implementation-wise, it takes a noticeably different tack in which CSS features it uses. The HTML itself is just an <code>&lt;aside&gt;</code> element:</p>
            <div id="cb3">
              <pre><code><span id="cb3-1">&lt;<span>aside</span>&gt;&lt;<span>p</span>&gt;&lt;<span>a</span><span> href=</span><span>&#34;https://ourincrediblejourney.tumblr.com/&#34;</span>&gt;Our incredible journey&lt;/<span>a</span>&gt;</span>
<span id="cb3-2">    is a blog that documents startup products getting shut down after an acquisition.&lt;/<span>p</span>&gt;&lt;/<span>aside</span>&gt;</span></code></pre>
            </div>
            <p>But <a href="https://gitlab.developers.cam.ac.uk/cst/dtg/trvedata/local-first/-/commit/7a8819e817a85173af7033e64bcdcc5054b9af50?expanded=1#e74ca419c79e4a87cb170f6eb8a6c0d2719e1c73_0_726">their CSS</a> uses <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/calc" data-link-icon="FF" data-link-icon-type="text,sans"><code>calc()</code></a> extensively to create positioning &amp; readjust overlaps without JS:</p>
            <div id="cb4">
              <pre><code><span id="cb4-1">article aside<span>,</span> figcaption<span>,</span> header<span>&gt;</span><span>#byline</span> {</span>
<span id="cb4-2">  <span>--aside-offset</span>: <span>1</span><span>rem</span><span>;</span></span>
<span id="cb4-3">  <span>--aside-offset-lineheight</span>: <span>1.5</span><span>rem</span><span>;</span></span>
<span id="cb4-4">  <span>box-sizing</span>: <span>border-box</span><span>;</span></span>
<span id="cb4-5">  <span>margin-bottom</span>: <span>calc(var(</span><span>--padding</span><span>)</span> <span>*</span> <span>2</span><span>)</span><span>;</span></span>
<span id="cb4-6">  <span>padding</span>: <span>var(</span><span>--padding</span><span>)</span><span>;</span></span>
<span id="cb4-7">  <span>position</span>: <span>absolute</span><span>;</span></span>
<span id="cb4-8">  <span>right</span>: <span>0</span><span>;</span></span>
<span id="cb4-9">  <span>width</span>: <span>var(</span><span>--aside-width</span><span>)</span><span>;</span></span>
<span id="cb4-10">}</span>
<span id="cb4-11"></span>
<span id="cb4-12">aside<span>,</span> figcaption<span>,</span> figure img<span>,</span> figure video {</span>
<span id="cb4-13">  <span>border-radius</span>: <span>calc(var(</span><span>--padding</span><span>)</span><span>/</span><span>4</span><span>)</span><span>;</span></span>
<span id="cb4-14">  <span>max-width</span>: <span>100</span><span>%</span><span>;</span></span>
<span id="cb4-15">}</span>
<span id="cb4-16"></span>
<span id="cb4-17">aside<span>,</span> aside<span>&gt;*,</span> <span>#byline</span><span>,</span> <span>#byline</span> li<span>,</span> figcaption<span>,</span> figcaption<span>&gt;*,</span> blockquote footer {</span>
<span id="cb4-18">  <span>font-size</span>: <span>0.8125</span><span>rem</span><span>;</span></span>
<span id="cb4-19">  <span>font-weight</span>: <span>400</span><span>;</span></span>
<span id="cb4-20">  -ms-hyphens: <span>none</span><span>;</span></span>
<span id="cb4-21">  <span>-webkit-hyphens</span>: <span>none</span><span>;</span></span>
<span id="cb4-22">  <span>hyphens</span>: <span>none</span><span>;</span></span>
<span id="cb4-23">  <span>line-height</span>: <span>1.25</span><span>rem</span><span>;</span></span>
<span id="cb4-24">  <span>margin-bottom</span>: <span>0.5</span><span>rem</span><span>;</span></span>
<span id="cb4-25">  <span>text-align</span>: <span>left</span><span>;</span></span>
<span id="cb4-26">}</span>
<span id="cb4-27"></span>
<span id="cb4-28">...</span>
<span id="cb4-29">/* aside and figcaption nudge ---------------- */</span>
<span id="cb4-30"></span>
<span id="cb4-31">/* using these can cause overlapping of elements. if you apply to one aside, you may</span>
<span id="cb4-32">    need to apply and adjust other that precede clearing the blocks figcaption or section */</span>
<span id="cb4-33"></span>
<span id="cb4-34"><span>.move-up-1</span> {</span>
<span id="cb4-35">  <span>margin-top</span>: <span>calc(</span>(<span>var(</span><span>--aside-offset</span><span>)</span> <span>+</span> (<span>var(</span><span>--aside-offset-lineheight</span><span>)</span><span>*</span><span>1</span>))<span>/</span><span>-1</span><span>)</span><span>;</span></span>
<span id="cb4-36">}</span>
<span id="cb4-37"></span>
<span id="cb4-38"><span>.move-up-2</span> {</span>
<span id="cb4-39">  <span>margin-top</span>: <span>calc(</span>(<span>var(</span><span>--aside-offset</span><span>)</span> <span>+</span> (<span>var(</span><span>--aside-offset-lineheight</span><span>)</span><span>*</span><span>2</span>))<span>/</span><span>-1</span><span>)</span><span>;</span></span>
<span id="cb4-40">}</span>
<span id="cb4-41">...</span>
<span id="cb4-42"><span>.move-up-25</span> {</span>
<span id="cb4-43">  <span>margin-top</span>: <span>calc(</span>(<span>var(</span><span>--aside-offset</span><span>)</span> <span>+</span> (<span>var(</span><span>--aside-offset-lineheight</span><span>)</span><span>*</span><span>25</span>))<span>/</span><span>-1</span><span>)</span><span>;</span></span>
<span id="cb4-44">}</span></code></pre>
            </div>
            <p>One downside is that there is no support for numbering I can see, so they’re all margin notes. The CSS is considerably more complex and I’m not sure what the complexity gains one compared to Tufte-CSS—correctness?</p>
          </section>
          <section id="robert-nystrom">
            <h2><a href="#robert-nystrom" title="Link to section: § &#39;Robert Nystrom&#39;">Robert Nystrom</a></h2>
            <p><span>Game programmer Robert <span><span>Nystrom’s</span><span>2014</span></span> book</span> <a href="https://gameprogrammingpatterns.com/" data-link-icon="GPP" data-link-icon-type="text,tri,sans"><em>Game Programming Patterns</em></a>, makes heavy use of sidenotes implemented in HTML/CSS/JS, mostly similar to Tufte-CSS.</p>
            <figure>
              <img alt="Game Programming Patterns, desktop sidenotes" decoding="async" height="1259" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/2013-robertnystrom-gameprogrammingpatterns-doublebuffer-sidenotes.png" width="1400"/>
              <figcaption aria-hidden="true">
                <em>Game Programming Patterns</em>, desktop sidenotes
              </figcaption>
            </figure>
            <figure>
              <img alt="Game Programming Patterns, mobile (inline, expanded by default)" decoding="async" height="621" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/2013-robertnystrom-gameprogrammingpatterns-doublebuffer-sidenotes-mobile.png" width="699"/>
              <figcaption aria-hidden="true">
                <em>Game Programming Patterns</em>, mobile (inline, expanded by default)
              </figcaption>
            </figure>
            <p>He takes a different approach: sidenotes are written using the HTML <code>&lt;aside&gt;</code> element, and a <code>&lt;span&gt;</code> with each aside’s ID specifies their placement in the text; <a href="https://gameprogrammingpatterns.com/script.js" data-link-icon="GPP" data-link-icon-type="text,tri,sans">the JS</a> then moves the aside into the margin. He designed it to handle resizing below &lt;800px not by pop-in footnotes in a block, but by media-queries simply shifting the aside into the text, inline. (With no JS, the fallback is also including it inline.)</p>
            <div id="cb5">
              <pre><code><span id="cb5-1">&lt;<span>p</span>&gt;Let<span>&amp;#8217;</span>s say we want a happy face to appear on screen. Our program starts looping</span>
<span id="cb5-2">through the framebuffer, coloring pixels. What we don<span>&amp;#8217;</span>t realize is that the</span>
<span id="cb5-3">video driver is pulling from the framebuffer right as we<span>&amp;#8217;</span>re writing to it. As it</span>
<span id="cb5-4">scans across the pixels we<span>&amp;#8217;</span>ve written, our face starts to appear, but then it</span>
<span id="cb5-5">outpaces us and moves into pixels we haven<span>&amp;#8217;</span>t written yet. The result is</span>
<span id="cb5-6">&lt;<span>em</span>&gt;tearing&lt;/<span>em</span>&gt;, a hideous visual bug where you see half of something drawn on screen.&lt;/<span>p</span>&gt;</span>
<span id="cb5-7">&lt;<span>p</span>&gt;&lt;<span>span</span><span> name=</span><span>&#34;tearing&#34;</span>&gt;&lt;/<span>span</span>&gt;&lt;/<span>p</span>&gt;</span>
<span id="cb5-8">&lt;<span>p</span>&gt;&lt;<span>img</span><span> src=</span><span>&#34;images/double-buffer-tearing.png&#34;</span><span> alt=</span><span>&#34;A series of images of an in-progress frame</span></span>
<span id="cb5-9">    being rendered. A pointer writes pixels while another reads them. The reader outpaces the writer</span>
<span id="cb5-10"><span>    until it starts reading pixels that haven&#39;t been rendered yet.&#34;</span> /&gt;&lt;/<span>p</span>&gt;</span>
<span id="cb5-11">&lt;<span>aside</span><span> name=</span><span>&#34;tearing&#34;</span>&gt;</span>
<span id="cb5-12"></span>
<span id="cb5-13">&lt;<span>p</span>&gt;We start drawing pixels just as the video driver starts reading from the</span>
<span id="cb5-14">framebuffer (Fig. 1). The video driver eventually catches up to the renderer and</span>
<span id="cb5-15">then races past it to pixels we haven<span>&amp;#8217;</span>t written yet (Fig. 2). We finish drawing</span>
<span id="cb5-16">(Fig. 3), but the driver doesn<span>&amp;#8217;</span>t catch those new pixels.&lt;/<span>p</span>&gt;</span>
<span id="cb5-17">&lt;<span>p</span>&gt;The result (Fig. 4) is that the user sees half of the drawing. The name</span>
<span id="cb5-18"><span>&amp;#8220;</span>tearing<span>&amp;#8221;</span> comes from the fact that it looks like the bottom half was torn off.&lt;/<span>p</span>&gt;</span>
<span id="cb5-19">&lt;/<span>aside</span>&gt;</span></code></pre>
            </div>
            <div id="cb6">
              <pre><code><span id="cb6-1"><span>@media</span> <span>only</span> <span>screen</span> <span>and</span> (<span>min-width</span>: <span>800</span><span>px</span>) {</span>
<span id="cb6-2">  <span>.page</span> {</span>
<span id="cb6-3">    <span>padding-right</span>: <span>300</span><span>px</span><span>;</span> }</span>
<span id="cb6-4"></span>
<span id="cb6-5">  aside {</span>
<span id="cb6-6">    <span>position</span>: <span>absolute</span><span>;</span></span>
<span id="cb6-7">    <span>width</span>: <span>240</span><span>px</span><span>;</span></span>
<span id="cb6-8">    <span>right</span>: <span>30</span><span>px</span><span>;</span></span>
<span id="cb6-9">    <span>padding</span>: <span>0</span><span>;</span></span>
<span id="cb6-10">    <span>background</span>: <span>none</span><span>;</span></span>
<span id="cb6-11">    <span>border</span>: <span>none</span><span>;</span></span>
<span id="cb6-12">    <span>padding-left</span>: <span>22</span><span>px</span><span>;</span></span>
<span id="cb6-13">    <span>border-radius</span>: <span>0</span><span>;</span></span>
<span id="cb6-14">    <span>border-left</span>: <span>solid</span> <span>8</span><span>px</span> <span>#f0e9db</span><span>;</span> }</span>
<span id="cb6-15">  aside p<span>,</span> aside li {</span>
<span id="cb6-16">      <span>font</span>: <span>14</span><span>px</span>/<span>20</span><span>px</span> <span>&#34;Source Sans Pro&#34;</span><span>,</span> <span>&#34;Lucida Grande&#34;</span><span>,</span> <span>&#34;Lucida Sans Unicode&#34;</span><span>,</span> Verdana<span>,</span> <span>sans-serif</span><span>;</span> } }</span></code></pre>
            </div>
            <p>It’s unclear to me whether the JS is actually necessary, or whether inline is the best fallback for sidenotes. The use of <code>&lt;aside&gt;</code> is also a complication, as few formats include any native support for that.</p>
            <p>Nystrom’s books are an interesting read for programmers, and also have some other interesting design aspects: see <a href="https://journal.stuffwithstuff.com/2014/04/22/zero-to-95688-how-i-wrote-game-programming-patterns/" data-url-archive="/doc/www/journal.stuffwithstuff.com/fb24a3839951b3baa921cc269e62a63a28d68f3f.html">“Zero to 95,688: How I wrote <em>Game Programming Patterns</em>”</a>/<a href="https://journal.stuffwithstuff.com/2020/04/05/crafting-crafting-interpreters/" data-url-archive="/doc/www/journal.stuffwithstuff.com/d7ed7bde45193444bfe119748c2b1cc8ea054ab9.html">“Crafting <em>Crafting Interpreters</em>”</a> on the build system &amp; literate programming &amp; his hand-drawn illustration workflow; &amp; <a href="https://journal.stuffwithstuff.com/2014/11/03/bringing-my-web-book-to-print-and-ebook/">“Zero to 353 Pages: Bringing My Web Book to Print and eBook”</a> on working with EPUB &amp; typesetting the print book.</p>
          </section>
          <section id="matthew-butterick">
            <h2><a href="#matthew-butterick" title="Link to section: § &#39;Matthew Butterick&#39;">Matthew Butterick</a></h2>
            <p><a href="https://en.wikipedia.org/wiki/Matthew_Butterick" data-link-icon="wikipedia" data-link-icon-type="svg">Matthew Butterick’s</a> 2013 ebook/website <a href="https://practicaltypography.com/"><em>Practical Typography</em></a> uses margin notes, but in a sidenotes way, on the left:</p>
            <figure>
              <img alt="Margin note left in Practical Typography." decoding="async" height="932" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/2013-matthewbutterick-practicaltypography-webemailaddresses-marginnote.png" width="1400"/>
              <figcaption aria-hidden="true">
                Margin note left in <a href="https://practicaltypography.com/web-and-email-addresses.html"><em>Practical Typography</em></a>.
              </figcaption>
            </figure>
            <p>They fallback to pop-ins defaulted to expanded on narrow/mobile windows:</p>
            <figure>
              <img alt="The same margin note, on a narrow window: it now appears as a pop-in block element, but expanded without the user needing to click (as they would in Tufte-CSS)." decoding="async" height="388" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/2013-matthewbutterick-practicaltypography-webemailaddresses-marginnote-mobile.png" width="772"/>
              <figcaption aria-hidden="true">
                The same margin note, on a narrow window: it now appears as a pop-in block element, but expanded without the user needing to click (as they would in Tufte-CSS).
              </figcaption>
            </figure>
            <p>The approach is HTML/CSS, but using <code>&lt;aside&gt;</code> elements, which are styled in CSS:</p>
            <div id="cb7">
              <pre><code><span id="cb7-1">title-block<span>,</span> aside {</span>
<span id="cb7-2">    <span>display</span>: <span>block</span><span>;</span></span>
<span id="cb7-3">    <span>float</span>: <span>left</span><span>;</span></span>
<span id="cb7-4">    <span>position</span>: <span>absolute</span><span>;</span></span>
<span id="cb7-5">    <span>margin-left</span>: <span>0</span><span>;</span></span>
<span id="cb7-6">    <span>left</span>: <span>2.5</span><span>rem</span><span>;</span></span>
<span id="cb7-7">    <span>width</span>: <span>calc(</span><span>2.5</span><span>rem</span> <span>*</span> <span>3</span><span>)</span><span>;</span></span>
<span id="cb7-8">    <span>text-align</span>: <span>right</span><span>;</span></span>
<span id="cb7-9">    <span>list-style-type</span>: <span>none</span><span>;</span></span>
<span id="cb7-10">    <span>clear</span>:<span>both</span><span>;</span> <span>margin-bottom</span>: <span>1</span><span>rem</span><span>;</span></span>
<span id="cb7-11">    <span>font-variant-numeric</span>: <span>normal</span><span>;</span></span>
<span id="cb7-12">}</span>
<span id="cb7-13"></span>
<span id="cb7-14"><span>@media</span> <span>all</span> <span>and</span> (<span>min-width</span>:<span>1200</span><span>px</span>) {</span>
<span id="cb7-15">    aside {</span>
<span id="cb7-16">        <span>left</span> : <span>0</span><span>;</span></span>
<span id="cb7-17">        <span>width</span>: <span>calc(</span><span>2.5</span><span>rem</span> <span>*</span> <span>4</span><span>)</span><span>;</span></span>
<span id="cb7-18">    }</span>
<span id="cb7-19">}</span>
<span id="cb7-20"></span>
<span id="cb7-21"><span>@media</span> <span>all</span> <span>and</span> (<span>max-width</span>:<span>520</span><span>px</span>) {</span>
<span id="cb7-22">    title-block<span>,</span> aside { <span>float</span>: <span>inherit</span><span>;</span></span>
<span id="cb7-23">    <span>position</span>: <span>inherit</span><span>;</span></span>
<span id="cb7-24">    <span>width</span>: <span>100</span><span>%</span><span>;</span></span>
<span id="cb7-25">    <span>text-align</span>: <span>left</span><span>;</span>}</span>
<span id="cb7-26"></span>
<span id="cb7-27">    aside {</span>
<span id="cb7-28">        <span>background</span>: <span>#fefefe</span><span>;</span></span>
<span id="cb7-29">        <span>padding</span>: <span>0.3</span><span>rem</span> <span>0.5</span><span>rem</span><span>;</span></span>
<span id="cb7-30">        <span>width</span>: <span>90</span><span>%</span><span>;</span></span>
<span id="cb7-31">        <span>border</span>: <span>1</span><span>px</span> <span>solid</span> <span>#ccc</span><span>;</span></span>
<span id="cb7-32">        <span>border-left</span>: <span>3</span><span>px</span> <span>solid</span> <span>#ccc</span><span>;</span></span>
<span id="cb7-33">    }</span>
<span id="cb7-34"></span>
<span id="cb7-35">    aside <span>&gt;</span> p<span>:last-child</span> {</span>
<span id="cb7-36">        <span>margin-bottom</span>: <span>0</span><span>;</span></span>
<span id="cb7-37">    }</span>
<span id="cb7-38">}</span></code></pre>
            </div>
            <p>Presumably Butterick used his Racket-based <a href="https://docs.racket-lang.org/pollen/">Pollen document system</a> with custom tags, since the base system doesn’t cover notes; <a href="https://sanchom.github.io/pollen-footnotes.html" data-url-archive="/doc/www/sanchom.github.io/bcee2b4f2f0bbcf37f2f90f20cd5633e698fc93e.html">Sancho McCann</a> &amp; <a href="https://www.jonashietala.se/blog/2019/03/04/pollen_sidenotes/" data-url-archive="/doc/www/www.jonashietala.se/c1750f65797cc293b6769a6afa0988e38e5b8f27.html">Jonas Hietala</a> has documented Pollen sidenotes.</p>
          </section>
          <section id="koos-looijesteijn">
            <h2><a href="#koos-looijesteijn" title="Link to section: § &#39;Koos Looijesteijn&#39;">Koos Looijesteijn</a></h2>
            <p><a href="https://www.kooslooijesteijn.net/" data-url-archive="/doc/www/www.kooslooijesteijn.net/1dfd705c6fa765d958b938b766aa260d62631b83.html">Koos Looijesteijn’s</a> loosely Tufte-CSS-like sidenotes are right-aligned, symbol rather than number incremented, and narrow/mobile collapsed pop-ins:</p>
            <figure>
              <img alt="KL, desktop" decoding="async" height="1674" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/2019-looijesteijn-sidenotes.png" width="1344"/>
              <figcaption aria-hidden="true">
                KL, desktop
              </figcaption>
            </figure>
            <figure>
              <img alt="KL, mobile (pop-in clicked)" decoding="async" height="266" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/2019-looijesteijn-sidenotes-mobile.png" width="616"/>
              <figcaption aria-hidden="true">
                KL, mobile (pop-in clicked)
              </figcaption>
            </figure>
            <p>In <a href="https://www.kooslooijesteijn.net/blog/semantic-sidenotes" data-url-archive="/doc/www/www.kooslooijesteijn.net/8d9e1850ec45c0ce5ad67d9b8d3367253351d3c9.html">“Semantic sidenotes for the web”</a> 2019, he discusses his approach, intended to satisfy additional requirements:</p>
            <blockquote>
              <ul>
                <li>
                  <p>The span that the sidenote refers to should have a proper semantic HTML element (no abuse of elements made for other purposes)</p>
                </li>
                <li>
                  <p>The content of the sidenote should have a similarly valid HTML tag. Additionally:</p>
                  <ul>
                    <li>The sidenote content may contain span elements such as <code>&lt;a&gt;</code> and <code>&lt;em&gt;</code>.</li>
                    <li>The sidenote content may contain clickable elements that can receive keyboard focus.</li>
                    <li>The sidenote content must be stylable.</li>
                  </ul>
                </li>
                <li>
                  <p>The elements should not cause auto closing of their parent <code>&lt;p&gt;</code> tag.</p>
                </li>
                <li>
                  <p>Reader modes and apps like Pocket and RSS readers should show sidenote content in a typographically acceptable way. That means at the very least that I can’t rely on website’s CSS to place and style the elements correctly.</p>
                </li>
                <li>
                  <p>The sidenote content should be read by screen readers, in a flow that makes sense. That likely means the two parts should be placed together.</p>
                </li>
              </ul>
            </blockquote>
            <p>He came up with something initially like Tufte-CSS, but rejected pure <code>&lt;span&gt;</code>, <code>&lt;aside&gt;</code> as being not quite the right semantics, purely static as breaking reader mode/apps, and settled on JS-enhanced <code>&lt;span&gt;</code>/<code>&lt;small&gt;</code> combination.</p>
          </section>
          <section id="harvard-law-review">
            <h2><a href="#harvard-law-review" title="Link to section: § &#39;Harvard Law Review&#39;">Harvard Law Review</a></h2>
            <p>The <a href="https://en.wikipedia.org/wiki/Harvard_Law_Review" data-link-icon="wikipedia" data-link-icon-type="svg">Harvard Law Review’s</a> website has, since at least 2016, employed sidenotes, as is particularly appropriate for legal writing, which notoriously overuses footnotes for citations, precedents, and digressions. From <a href="https://harvardlawreview.org/print/vol-133/the-potential-use-test-and-the-northwest-passage/">“The Potential-Use Test and the Northwest Passage”</a> (HLR editors 2020):</p>
            <figure>
              <img alt="HLR, desktop; note the default collapse/fade" decoding="async" height="803" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/2020-harvardlawreview-sidenotes.png" width="1374"/>
              <figcaption aria-hidden="true">
                HLR, desktop; note the default collapse/fade
              </figcaption>
            </figure>
            <figure>
              <img alt="HLR, mobile (pop-in on click)" decoding="async" height="444" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/2020-harvardlawreview-sidenotes-mobile.png" width="915"/>
              <figcaption aria-hidden="true">
                HLR, mobile (pop-in on click)
              </figcaption>
            </figure>
            <p>HLR’s proprietary are bidirectional, JS-based, and collapsed pop-in on mobile; they use <code>&lt;span&gt;</code>s which are rearranged by the JS:</p>
            <div id="cb8">
              <pre><code><span id="cb8-1">Canada, on the other hand, asserts that the Northwest Passage constitutes internal waters and does</span>
<span id="cb8-2">not fall under any definition of international strait.</span>
<span id="cb8-3">&lt;<span>sup</span><span> class=</span><span>&#34;footnote-ref js-article-aside-trigger &#34;</span>&gt;&lt;<span>i</span><span> class=</span><span>&#34;ref-txt&#34;</span>&gt;2&lt;/<span>em</span>&gt;&lt;<span>i</span><span> class=</span><span>&#34;close-txt&#34;</span>&gt;<span>&amp;times;</span>&lt;/<span>em</span>&gt;&lt;/<span>sup</span>&gt;</span>
<span id="cb8-4">&lt;<span>cite</span><span> class=</span><span>&#34;article-aside footnote short-crop&#34;</span>&gt;</span>
<span id="cb8-5">    &lt;<span>span</span><span> class=</span><span>&#34;article-aside-txt&#34;</span>&gt;</span>
<span id="cb8-6">        &lt;<span>span</span><span> class=</span><span>&#34;footnote-num&#34;</span>&gt;2.&lt;/<span>span</span>&gt;</span>
<span id="cb8-7">        &lt;<span>em</span>&gt;See&lt;/<span>em</span>&gt; Territorial Sea Geographical Coordinates (Area 7) Order, SOR/1985-872 (Can.) (detailing Canada’s</span>
<span id="cb8-8">        claims to land and waters that include the Northwest Passage); Note from the Canadian Embassy, Washington, D.C.,</span>
<span id="cb8-9">        to the U.S. Department of State (June 11, 1985), &lt;<span>em</span>&gt;reprinted in&lt;/<span>em</span>&gt; 2 &lt;<span>span</span><span> class=</span><span>&#34;small-caps&#34;</span>&gt;Marion Nash (Leich),</span>
<span id="cb8-10">        Dep’t of State, Cumulative Digest of United States Practice in International Law 1981–1988&lt;/<span>span</span>&gt;, at 2047 (1994).</span>
<span id="cb8-11">    &lt;/<span>span</span>&gt;</span>
<span id="cb8-12">&lt;/<span>cite</span>&gt;</span></code></pre>
            </div>
            <p>Since it uses inline <code>&lt;span&gt;</code> in the usual Tufte-CSS, one might wonder why the JS is necessary, but checking with NoScript, one sees that without the JS, the sidenotes are all piled up on the left margin, overlapping badly, so the JS does the ‘alternating’. (Is it possible to use CSS to do this alternation automatically, removing the need for JS to do bidirectional sidenotes?)</p>
            <p>More distressingly, HLR’s sidenotes are also on default collapsed on <em>desktop</em>, trimmed at a shockingly short length—typically not even half a sentence! While collapsing long footnotes is a good idea, it’s puzzling to collapse at such a short length that literally every sidenote will be collapsed, since this again defeats the point of having sidenotes, and making it hard to see if a sidenote is worth clicking on since only the first few words are exposed so one cannot even see if the sidenote is short (merely a bit of citation) or long (a more in-depth discussion).</p>
          </section>
          <section id="yale-law-journal">
            <h2><a href="#yale-law-journal" title="Link to section: § &#39;Yale Law Journal&#39;">Yale Law Journal</a></h2>
            <p>The <a href="https://en.wikipedia.org/wiki/Yale_Law_Journal" data-link-icon="wikipedia" data-link-icon-type="svg"><em>Yale Law Journal</em></a>, like HLR, uses sidenotes in online articles like <a href="https://www.yalelawjournal.org/note/amazons-antitrust-paradox">“Amazon’s Antitrust Paradox”</a> <span>(<span><span>Khan</span><span>2017</span></span>), since at least 2016. Like HLR, all sidenotes are aggressively collapsed to near-unreadability, requiring a click to expand, whereupon they turn into floating footnotes.</span></p>
            <figure>
              <img alt="YLJ, default desktop" decoding="async" height="751" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/2017-yalelawjournal-khan-sidenotes.png" width="1364"/>
              <figcaption aria-hidden="true">
                YLJ, default desktop
              </figcaption>
            </figure>
            <figure>
              <img alt="YLJ, sidenotes clicked on to expand" decoding="async" height="529" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/2017-yalelawjournal-khan-sidenotes-expanded.png" width="1400"/>
              <figcaption aria-hidden="true">
                YLJ, sidenotes clicked on to expand
              </figcaption>
            </figure>
            <p>They are JS-based, relocating footnotes grouped at the end of the article, but inside <code>&lt;div&gt;</code> elements rather than <code>&lt;a&gt;</code> elements like usual:</p>
            <div id="cb9">
              <pre><code><span id="cb9-1">&lt;<span>div</span><span> id=</span><span>&#34;footnote_wrapper&#34;</span><span> style=</span><span>&#34;position:relative;&#34;</span>&gt;</span>
<span id="cb9-2">    &lt;<span>div</span><span> id=</span><span>&#34;footnote_1&#34;</span><span> style=</span><span>&#34;display:none;&#34;</span><span> class=</span><span>&#34;footnote_truncated&#34;</span>&gt;</span>
<span id="cb9-3">        &lt;<span>div</span><span> class=</span><span>&#34;truncated_footnote_number&#34;</span>&gt;1&lt;/<span>div</span>&gt;</span>
<span id="cb9-4">        &lt;<span>div</span><span> class=</span><span>&#34;truncated_footnote_inner&#34;</span>&gt;&lt;<span>span</span>&gt; &lt;/<span>span</span>&gt;David &lt;<span>span</span><span> class=</span><span>&#34;SpellE&#34;</span>&gt;Streitfeld&lt;/<span>span</span>&gt;,</span>
<span id="cb9-5">            &lt;<span>em</span>&gt;As Competition Wanes, Amazon Cuts Back Discounts&lt;/<span>em</span>&gt;,</span>
<span id="cb9-6">            &lt;<span>span</span><span> class=</span><span>&#34;forced_sans_reg&#34;</span>&gt;N.Y. Times&lt;/<span>span</span>&gt; (July 4, 2013), http<span>&amp;hellip;</span></span>
<span id="cb9-7">            &lt;/<span>div</span>&gt;</span>
<span id="cb9-8">    &lt;/<span>div</span>&gt;</span>
<span id="cb9-9">...&lt;/<span>div</span>&gt;</span></code></pre>
            </div>
            <p>Worse, YLJ appears to have no narrow or mobile support whatsoever—the page just gets smaller. YLJ is unreadable on mobile, requiring zooming &amp; panning.</p>
          </section>
          <section id="knight-institute">
            <h2><a href="#knight-institute" title="Link to section: § &#39;Knight Institute&#39;">Knight Institute</a></h2>
            <p>The <a href="https://knightcolumbia.org/page/about-the-knight-institute">Knight First Amendment Institute</a> of <a href="https://en.wikipedia.org/wiki/Columbia_University" data-link-icon="wikipedia" data-link-icon-type="svg">Columbia University</a> uses sidenotes somewhat like HLR/YLJ in its longform pages (eg. <a href="https://knightcolumbia.org/content/the-case-for-digital-public-infrastructure">“The Case for Digital Public Infrastructure: Harnessing past successes in public broadcasting to build community-oriented digital tools”</a><span>, <span><span>Zuckerman</span><span>2020</span></span>):</span></p>
            <figure>
              <img alt="Knight Institute sidenotes (not expanded)" decoding="async" height="704" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/2020-knightinstitute-zuckerman-sidenotes.png" width="1400"/>
              <figcaption aria-hidden="true">
                Knight Institute sidenotes (not expanded)
              </figcaption>
            </figure>
            <p>They are JS-based, right-aligned, collapsed (but with a slightly more generous length limit than HLR/YLJ), and fallback to Tufte-CSS-like pop-in blocks (default collapsed). As similar as it seems to those, Knight appears to have rolled its own JS, as the <code>site.js</code>’s implementation doesn’t have any Google/<a href="https://en.wikipedia.org/wiki/GitHub" data-link-icon="wikipedia" data-link-icon-type="svg">Github</a> hits.</p>
            <p>The fading, font size, and default collapsing of ‘long’ sidenotes are all not nearly as extreme as HLR/YLJ, so the Knight sidenotes are substantially more pleasant to read, as it’s much easier to see what sidenotes are merely a brief citation and what actually include additional commentary. (The use of buttons &amp; chevrons are also nice touches in explaining the functionality to the reader.)</p>
          </section>
          <section id="new-york">
            <h2><a href="#new-york" title="Link to section: § &#39;New York&#39;"><em>New York</em></a></h2>
            <p><a href="https://en.wikipedia.org/wiki/New_York_(magazine)" data-link-icon="wikipedia" data-link-icon-type="svg"><em>New York</em>’s</a> website CMS <a href="https://github.com/clay" data-link-icon="github" data-link-icon-type="svg">Clay/Kiln</a> (used on NYmag.com/Vulture/the Cut/Grub Street/Slate) provide JS-based left sidenotes which require hover to expose and then fall back to click-driven floating footnotes:</p>
            <figure>
              <img alt="Vulture, desktop (on hover)" decoding="async" height="312" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/2020-newyork-vulture-chrisrockinterview-sidenotes.png" width="1391"/>
              <figcaption aria-hidden="true">
                <em>Vulture</em>, desktop (on hover)
              </figcaption>
            </figure>
            <figure>
              <img alt="Vulture, mobile (after clicking)" decoding="async" height="434" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/2020-newyork-vulture-chrisrockinterview-sidenotes-mobile.png" width="598"/>
              <figcaption aria-hidden="true">
                <em>Vulture</em>, mobile (after clicking)
              </figcaption>
            </figure>
            <p>NY uses spans, but they are put at the end and then JS reveals them when the user hovers:</p>
            <div id="cb10">
              <pre><code><span id="cb10-1">&lt;<span>span</span><span> class=</span><span>&#34;clay-annotated kiln-phrase&#34;</span><span> aria-describedby=</span><span>&#34;annotation-1&#34;</span><span> tabindex=</span><span>&#34;0&#34;</span>&gt;Virgin Airlines first-class lounge&lt;/<span>span</span>&gt;</span>
<span id="cb10-2">...</span>
<span id="cb10-3">&lt;<span>div</span><span> data-uri=</span><span>&#34;www.vulture.com/_components/annotations/instances/cjg2jwsso00c23k62pm0yv0qg@published&#34;</span></span>
<span id="cb10-4"><span>     class=</span><span>&#34;annotations&#34;</span><span> data-editable=</span><span>&#34;content&#34;</span>&gt;</span>
<span id="cb10-5">    &lt;<span>span</span><span> role=</span><span>&#34;tooltip&#34;</span><span> id=</span><span>&#34;annotation-1&#34;</span><span> data-uri=</span><span>&#34;www.vulture.com/_components/annotation/instances/cjg2jx3el00c73k62em8v15xy@published&#34;</span></span>
<span id="cb10-6"><span>       class=</span><span>&#34;annotation&#34;</span><span> data-editable=</span><span>&#34;text&#34;</span>&gt;</span>
<span id="cb10-7">       Offers spa treatments, “expert mixologists”, and, at Heathrow, a “lodge and viewing deck” with an “après-ski vibe.”</span>
<span id="cb10-8">   &lt;/<span>span</span>&gt;</span>
<span id="cb10-9">&lt;/<span>div</span>&gt;</span></code></pre>
            </div>
            <p>I couldn’t find mention of sidenotes in the various Clay/Kiln Github repos but there are enough of them and it’s all complicated enough I may have missed them, so I don’t know if the relevant JS/CSS is MIT-licensed like the Clay/Kiln ecosystem generally seems to be.</p>
            <p>While floating footnotes on mobile is a justifiable choice, the rest is not, and I do not like this sidenote design at all.</p>
          </section>
          <section id="jquery-sidenotes">
            <h2><a href="#jquery-sidenotes" title="Link to section: § &#39;jQuery.sidenotes&#39;">JQuery.sidenotes</a></h2>
            <p><span>Andrew <span><span>Clark’s</span><span>2013</span></span></span> <a href="https://acdlite.github.io/jquery.sidenotes/" data-url-archive="/doc/www/acdlite.github.io/1cf5242c04b07c38d8735d308dd988c984d7486d.html">jQuery.sidenotes</a> (<a href="https://github.com/acdlite/jquery.sidenotes" data-link-icon="github" data-link-icon-type="svg">Github</a>) JS library implements sidenotes to the left, parsing Markdown endnotes; for narrow windows, it does inlined ‘pop-in’ but expanded by default; and for mobile it is just endnotes. Unusually, Clark’s demo puts sidenotes on the <em>left</em> margin (there doesn’t seem to be an option for placing on the right, or both), and includes some keybindings.</p>
            <figure>
              <img alt="jQuery.sidenotes (default desktop appearance)" decoding="async" height="1075" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/2013-clark-jquerysidenotes-sidenotes.png" width="1313"/>
              <figcaption aria-hidden="true">
                jQuery.sidenotes (default desktop appearance)
              </figcaption>
            </figure>
            <p>The pop-in appearance looks like Tufte-CSS’s.</p>
            <p>The implementation seems to take the expected approach of popping matching elements out into the margin with media queries controlling width-related behavior.</p>
            <p>Clark’s jQuery.sidenotes offers more features than usual, but I’m not sure how useful they are. It’s also quite ‘heavyweight’ in being weighed down by jQuery/NPM infrastructure. One further caveat: I think the expected format/classes of endnotes has long since changed and the library has not been updated since 2013, at least for Pandoc, so jQuery.sidenotes’s defaults will probably break for recent Markdown documents.</p>
          </section>
          <section id="sidenotes-js-correia">
            <h2><a href="#sidenotes-js-correia" title="Link to section: § &#39;Sidenotes.js, Correia&#39;">Sidenotes.js, Correia</a></h2>
            <p><span>Bruno <span><span>Correia’s</span><span>2015</span></span></span> <a href="http://bcorreia.com/projects/sidenotes.js/src/demo.html" data-url-archive="/doc/www/bcorreia.com/9391388996e15d2540a7df67121d3cd4cd9e597b.html">Sidenotes.js</a> (<a href="https://github.com/bcorreia/sidenotes.js" data-link-icon="github" data-link-icon-type="svg">Github</a>), not to be confused with Said Achmiz’s <a href="#sidenotes-js"><code>sidenotes.js</code></a>, takes an entirely different approach to both presentation &amp; encoding of sidenotes. Instead of reusing the existing margin, Sidenotes.js creates a new view by <em>sliding</em> a sticky-element ‘tab’ into view with the sidenote contents, hiding the original page:</p>
            <figure>
              <img alt="Sidenotes.js, before/after clicking on an annotated link (desktop)" decoding="async" height="1039" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/2015-correia-sidenotes-slide.png" width="1400"/>
              <figcaption aria-hidden="true">
                Sidenotes.js, before/after clicking on an annotated link (desktop)
              </figcaption>
            </figure>
            <p>On narrow or mobile, the slid-in new page just takes up the whole screen.</p>
            <p>The annotations are themselves written as <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/data-*" data-link-icon="FF" data-link-icon-type="text,sans">custom data attributes</a> on elements such as links (by default, others are supported):</p>
            <div id="cb11">
              <pre><code><span id="cb11-1"><span>&lt;p&gt;</span>While the two headsmen were engaged in making fast cords to his flukes,</span>
<span id="cb11-2">and in other ways getting the mass in readiness for towing,</span>
<span id="cb11-3">some <span>&lt;a</span></span>
<span id="cb11-4"><span>    href=</span><span>&#34;#&#34;</span></span>
<span id="cb11-5"><span>    data-sidenote=</span><span>&#34;</span><span>&amp;gt;</span><span>strong</span><span>&amp;lt;</span><span>Conversation:</span><span>&amp;gt;</span><span>/strong</span><span>&amp;lt;</span><span> the informal exchange of ideas by spoken words:</span></span>
<span id="cb11-6"><span>                   &#39;the two men were deep in conversation&#39;.&#34;</span><span>&gt;</span></span>
<span id="cb11-7">    conversation<span>&lt;/a&gt;</span></span>
<span id="cb11-8">ensued between them.<span>&lt;/p&gt;</span></span></code></pre>
            </div>
            <p>This is a unique approach entirely unlike the others and an interesting experiment, but I do not recommend it for sidenotes.</p>
          </section>
          <section id="the-india-forum">
            <h2><a href="#the-india-forum" title="Link to section: § &#39;The India Forum&#39;"><em>The India Forum</em></a></h2>
            <p><a href="https://www.theindiaforum.in/article/revolt-upper-castes" title="The Revolt of the Upper Castes"><em>The India Forum</em></a> uses jQuery for a slide-in approach but improves over Correia’s by showing all the sidenotes in a pane after clicking:</p>
            <figure>
              <img alt="TIF, after clicking on footnotes" decoding="async" height="951" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/2020-theindiaforum-revoltoftheuppercastes-sidenotes.png" width="1400"/>
              <figcaption aria-hidden="true">
                TIF, after clicking on footnotes
              </figcaption>
            </figure>
            <p>The ‘slide-in’ approach can be contrasted with the ‘slide-up’ approach used by Wikipedia:</p>
            <figure>
              <img alt="Screenshot of Artemy Vedel WP article after tapping a footnote in a mobile browser, showing a faded body and a highlighted footnote section which has ‘slid up’; this shows the footnote text (usually a brief citation) without shifting the overall layout or being too small to read." decoding="async" height="1338" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/2023-02-23-wikipedia-mobilemode-tappedfootnoteslideupexample.png" width="618"/>
              <figcaption aria-hidden="true">
                Screenshot of <a href="https://en.wikipedia.org/wiki/Artemy_Vedel" data-link-icon="wikipedia" data-link-icon-type="svg">Artemy Vedel</a> WP article after tapping a footnote in a mobile browser, showing a faded body and a highlighted footnote section which has ‘slid up’; this shows the footnote text (usually a brief citation) without shifting the overall layout or being too small to read.
              </figcaption>
            </figure>
            <p>And some other sites, like <a href="https://www.arcana.computer/">Justin Duke</a>:</p>
            <figure>
              <img alt="A tapped ‘footnote’ on Justin Duke’s website, showing how the footnote text has ‘slid up’ from the bottom in a floating/sticky element." decoding="async" height="1234" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/2023-02-23-justinduke-aboutpage-mobileslideupfootnotescreenshot.png" width="615"/>
              <figcaption aria-hidden="true">
                A tapped ‘footnote’ on Justin Duke’s website, showing how the footnote text has ‘slid up’ from the bottom in a floating/sticky element.
              </figcaption>
            </figure>
            <p>The ‘slide-in’ from left/right can make use of margin on bigger screens, but there is usually no margin on cramped mobile screens, so one faces a fundamental choice between inserting the footnote/sidenote text ‘into’ the body, usually forcing layout shift, and ‘over’ the body, obscuring some of it. (For Gwern.net, pop-ins were the only acceptable solution as they are less <a href="https://en.wikipedia.org/wiki/Mode_(user_interface)" data-link-icon="wikipedia" data-link-icon-type="svg">modal</a>: they let the reader continue navigating/reading the page, no matter how deep they drill into the recursively-linked pop-ins.)</p>
          </section>
          <section id="tables">
            <h2><a href="#tables" title="Link to section: § &#39;Tables&#39;">Tables</a></h2>
            <p><a href="https://jkorpela.fi/www/fn.html#side" data-url-archive="/doc/www/jkorpela.fi/1bc64a5a5733131c1da1a42ac1f8ddb1875e8540.html#side" title="Footnotes, endnotes, and sidenotes on Web pages: Sidenotes as an alternative">Jukka “Yucca” Korpela</a>, ~2007, demonstrates a completely different approach using HTML <em>tables</em>: define two columns with different sizes/style, and put the sidenotes in the second column.</p>
            <blockquote>
              <p>There are many possible approaches to including sidenotes on web pages. Having studied alternate methods like CSS positioning and floating, I have come to the conclusion that the simplest method gives the best results. This method consists of a two-column table, with the main text in one column, the sidenotes in the other. Using the CSS methods, it becomes awkward to control the heights of pieces of text so that each sidenote starts at the same vertical position as the main text that it relates to.</p>
            </blockquote>
            <p>Easy:</p>
            <figure>
              <img alt="Sidenotes via 2-column HTML tables." decoding="async" height="1194" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/2007-korpela-sidenotes-tablelayout.png" width="1379"/>
              <figcaption aria-hidden="true">
                Sidenotes via 2-column HTML tables.
              </figcaption>
            </figure>
            <p>This has the usual advantages/disadvantages of using tables for web design: it is fast, avoids Javascript &amp; (most) CSS complexities, and is straightforward; but it is rigid, degrades on smaller screens, difficult to write (eg. no numbering in Korpela’s examples, making them margin notes, unless the author manually adds superscripts or otherwise complicates it).</p>
            <p>I include this for its historical interest—while this strategy may have made sense in 2007, the tradeoffs now are highly unfavorable given that <a href="#tufte-css">Tufte-CSS</a> etc work, and I’m not sure anyone should use it.</p>
          </section>
          <section id="annotate-molly-white">
            <h2><a href="#annotate-molly-white" title="Link to section: § &#39;Annotate, Molly White&#39;">Annotate, Molly White</a></h2>
            <p><a href="https://github.com/molly/annotate" data-link-icon="github" data-link-icon-type="svg">“Annotate”</a> (<a href="https://molly.github.io/annotate/" data-url-archive="/doc/www/molly.github.io/da3cf94f692d30649f9c768fce60298cc3b6ff27.html">demo</a>) is a CSS+JS framework by <a href="https://en.wikipedia.org/wiki/Molly_White_(writer)" data-link-icon="wikipedia" data-link-icon-type="svg">Molly White</a>, created for her <a href="https://www.mollywhite.net/annotations/latecomers-guide-to-crypto/">“The Edited Latecomers’ Guide To Crypto”</a>, which is a heavily-commentated (side by side) fisking of an article on cryptocurrency.</p>
            <p>Perhaps because the commentary may be longer than the text &amp; complex, Annotate takes a novel approach: text+commentary pairs live in <code>&lt;section&gt;</code> elements, interleaving <code>&lt;div&gt;</code>s (possibly nested or ‘grouped’), with <code>&lt;mark&gt;</code> elements to specify highlighted ranges (eg. in yellow highlighting) for which part of the text a commentary is referring to. The CSS then uses CSS grids (row-based layout) to lay them out side by side. (Javascript is used for live highlighting/focusing of ranges when clicked on, but otherwise appears optional.)</p>
            <p>For mobile, it defaults to expanded pop-ins but does not appear to make any effort to interleave or separate pairs to ensure that the commentary for each visible highlighted range is also visible.</p>
            <figure>
              <img alt="Screenshot from its Github repo of Annotate used on “The Edited Latecomers’ Guide To Crypto”." decoding="async" height="973" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/2022-10-02-mollywhite-annotate-latecomersdesktopscreenshot.png" width="1400"/>
              <figcaption aria-hidden="true">
                Screenshot from its Github repo of Annotate used on “The Edited Latecomers’ Guide To Crypto”.
              </figcaption>
            </figure>
          </section>
          <section id="miscellaneous">
            <h2><a href="#miscellaneous" title="Link to section: § &#39;Miscellaneous&#39;">Miscellaneous</a></h2>
            <p>Some implementations are just bad ideas or not worth discussing in detail with screenshots:</p>
            <ul>
              <li>
                <p><a href="https://ilovetypography.com/2019/03/14/the-first-printed-math-books/" id="boardley-2019" data-url-archive="/doc/www/ilovetypography.com/1fad52b71b998e788c985ab0b0b2c9dd0eb8cc82.html" title="&#39;The First Printed Math Books&#39;, Boardley 2019">ILoveTypography.com</a> uses image captions &amp; margin notes which, like Tufte-CSS, are floated/outdented right, but bizarrely, it uses <em>figure captions</em>—just <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/figcaption" data-link-icon="FF" data-link-icon-type="text,sans"><code>&lt;figcaption&gt;</code></a> with a special class inside an empty <code>&lt;figure&gt;</code> with no images!</p>
                <p>This is invalid HTML, fails badly in some cases (eg. in the linked example, one margin note is almost unreadable because it overlaps with a giant pull-quote illustration), and has no advantage over a <code>&lt;span&gt;</code> that I can find; it does at least degrade gracefully into pop-in (default expanded) block elements on narrow/mobile.</p>
              </li>
              <li>
                <p><a href="https://bldgblog.com/2015/12/four-floor-war/" data-link-icon="BLDG" data-link-icon-type="text,quad,monospace" data-url-archive="/doc/www/bldgblog.com/1ece3b776c5acd51d17bf8080d18eafd863ada89.html" title="The Four-Floor War">BLDBLOG</a> generally avoids complex layout and footnotes entirely, and doesn’t have much margin to put sidenotes in, so I was surprised while reading the archives to find one post which has a left margin note, and even more surprised to check the HTML source and see that the ‘margin note’ is in fact a <em>header</em>: a <code>&lt;h6&gt;</code>.</p>
                <p>Huh‽ It turns out that the header is floated left with some gruesome CSS. Said Achmiz summaries how the Rube Goldberg contraption works:</p>
                <blockquote>
                  <p>The CSS uses absolute positioning. The nearest positioned ancestor is <code>&lt;article&gt;</code>, not <code>.entry-content</code>. Within <code>&lt;article&gt;</code>, <code>.entry-content</code> is right-floated and has a fixed width. This creates a variable-width space on the left (determined by how much horizontal space is left within <code>&lt;article</code>&gt; after that fixed width is subtracted). The sidenote <code>&lt;h6&gt;</code> is then set with <code>position:absolute</code> and <code>left:0</code>. Vertical position is left unspecified, relying on the way browsers implement absolute positioning (ie. to place an element where it would be placed if position were <code>static</code>) to put it in the right place. Fragile, unsemantic, &amp; hacky.</p>
                </blockquote>
              </li>
              <li>
                <p><a href="https://mitadmissions.org/blogs/entry/we-are-reinstating-our-sat-act-requirement-for-future-admissions-cycles/">MIT Admissions</a> uses a footnote-sidenote hybrid:</p>
                <figure>
                  <img alt="MIT Admissions blog, demonstrating fixed-floating sidenote" decoding="async" height="1027" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/2022-03-28-mitadmissions-footnotesidenote.png" width="1400"/>
                  <figcaption aria-hidden="true">
                    MIT Admissions blog, demonstrating fixed-floating sidenote
                  </figcaption>
                </figure>
                <p>Span-annotated footnote links (with the trigger text lightly highlighted in red), on hover, trigger JS to create a single sticky/floating ‘sidenote’ which is located in the bottom-right corner; hovers on other footnotes replace it with their contents. (Layout does not take into account the sidebar or anything that may already be there, and the footnote popup box simply appears over it.)</p>
                <p>For mobile/narrow windows, it uses pop-in, but not as a block element, instead, inline with red-colored brackets to delimit it:</p>
                <figure>
                  <img alt="Mobile: popins but using rubricated bracket delimiters." decoding="async" height="1225" loading="lazy" src="https://gwern.net/doc/design/typography/sidenote/2022-03-28-mitadmissions-footnotesidenote-mobilepopins-rubricated.png" width="614"/>
                  <figcaption aria-hidden="true">
                    Mobile: popins but using rubricated bracket delimiters.
                  </figcaption>
                </figure>
              </li>
              <li>
                <p><a href="https://verdagon.dev/home">Evan Ovadia</a> (<a href="https://verdagon.dev/blog/linear-types-borrowing">eg.</a>): content &amp; sidenotes are put into pairs of columns. Presumably does not handle many long sidenotes gracefully.</p>
                <p>For mobile/narrow, it collapses them as a row of numbered links to expand on click.</p>
              </li>
            </ul>
          </section>
        </section>
        <section id="see-also">
          
          <ul>
            <li>
              <a href="https://en.wikipedia.org/wiki/Project_Xanadu" data-link-icon="wikipedia" data-link-icon-type="svg">Project Xanadu</a>
            </li>
          </ul>
        </section>
        <section id="external-links">
          
          <ul>
            <li>
              <a href="https://quotebacks.net/" data-url-archive="/doc/www/quotebacks.net/48c9ea5d72678d2ee2635800af40549bd44c0117.html">Quotebacks</a> (<a href="https://tomcritchlow.com/2020/06/09/quotebacks/" data-url-archive="/doc/www/tomcritchlow.com/223a45bf84b23e4e4acb1927f69db995c398a6d8.html">“Introducing: Quotebacks—A Chrome extension to quote the web”</a>)
            </li>
            <li>
              <a href="https://skorokithakis.github.io/expounder/" data-url-archive="/doc/www/skorokithakis.github.io/cd02a501754f4820776091332111b42f1abf0666.html">“Expounder”</a>, Stavros Korokithakis (inline alternative to <a href="#mozdev-abbr"><code>&lt;abbr</code></a>/<a href="#mozdev-defn"><code>&lt;defn&gt;</code></a> tags)
            </li>
            <li>
              <a href="https://shkspr.mobi/blog/2020/07/usability-of-footnotes/" data-url-archive="/doc/www/shkspr.mobi/14ee16fb5c9c9b291fb48874e7323a9c3af22bea.html">“Usability of Footnotes”</a>; <a href="https://shkspr.mobi/blog/2020/12/a-terrible-way-to-do-footnotes-in-html/" data-url-archive="/doc/www/shkspr.mobi/a3b3331c5ae8138bafd9645b43576e0c3072e2dd.html">“A (terrible?) way to do footnotes in HTML”</a>
            </li>
            <li>
              <a href="https://ncase.me/nutshell-wip/">“Nutshell”</a><span>, Nicky <span><span>Case</span><span>2021</span></span></span>
            </li>
            <li>
              <a href="https://www.lesswrong.com/posts/A33sgjYoM4Ko9viJv/lw-beta-feature-side-comments" data-link-icon="LW" data-link-icon-type="text">“LW Beta Feature: Side-Comments”</a>
            </li>
            <li>
              <a href="https://austinkleon.substack.com/p/a-library-of-words" data-link-icon="substack" data-link-icon-type="svg" title="Austin Kleon, 2023-02-07">“A library of words: Discovering <em>Roget’s Thesaurus</em>”</a>
            </li>
          </ul>
        </section>
        
        <section id="backlinks-section">
          <a id="backlinks" href="https://gwern.net/metadata/annotation/backlink/%252Fsidenote.html" title="Reverse citations/backlinks for this page (the list of other pages which link to this page).">[Backlinks]</a>
        </section>
        <section id="link-bibliography-section">
          <a id="link-bibliography" href="https://gwern.net/metadata/annotation/link-bibliography/%252Fsidenote.html" title="Bibliography of links cited in this page (forward citations). Lazily-transcluded version at footer of page for easier scrolling.">[Link bibliography]</a>
        </section>
      </div></div>
  </body>
</html>
