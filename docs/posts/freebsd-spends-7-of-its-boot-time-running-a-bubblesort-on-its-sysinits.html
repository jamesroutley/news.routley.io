<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://twitter.com/cperciva/status/1659558311920914432">Original</a>
    <h1>FreeBSD spends 7% of its boot time running a bubblesort on its SYSINITs</h1>
    
    <div id="readability-page-1" class="page"><div role="main"><div><div><div><div data-testid="primaryColumn"><div aria-label="Home timeline" tabindex="0"><div itemscope="" itemtype="https://schema.org/Collection"><meta content="Tweet with replies" itemprop="name"/><section aria-labelledby="accessible-list-28758" role="region"><div aria-label="Timeline: Conversation"><div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1659558311920914432" itemprop="identifier"/><meta content="1" itemprop="position"/><meta content="14" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2023-05-19T13:55:09.000Z" itemprop="dateCreated"/><meta content="2023-05-19T13:55:09.000Z" itemprop="datePublished"/><meta content="https://twitter.com/cperciva/status/1659558311920914432" itemprop="url"/><meta content="https://twitter.com/cperciva/status/1659558311920914432" itemprop="mainEntityOfPage"/><article aria-labelledby="id__4ab9vezg8ys id__wmjwddplzx id__3u3lcul4vlh id__1cceb8jvudrh id__6k92r6jy8uk id__c90aqmtv18v id__s5y2781gk2 id__fenrgelcx8s id__c5hfbbn7h8 id__tq0ybez0ll id__2qjvuouthx8 id__k6ahhk2dr2i id__vk8v1yp4gvq id__e533eeid4l8 id__nrn0vp2ut6b id__xx5xrptzlgm id__86q1vei7mo5 id__3oejb1p57fg id__84grzfp1plm" role="article" tabindex="-1" data-testid="tweet"><div><div><div><div><div data-testid="Tweet-User-Avatar"><div><div><div data-testid="UserAvatar-Container-cperciva"><div><div><div><div><a href="https://twitter.com/cperciva" aria-hidden="true" role="link" tabindex="-1"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/427942491/Colin_400x400.png"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div></div><div><div><div itemprop="articleBody" data-testid="tweetTextAnnotations"><div><p><span>When the FreeBSD kernel boots in Firecracker (1 CPU, 128 MB RAM), it now spends 7% of its time running a bubblesort on its SYSINITs.

O(N^2) can bite hard when you&#39;re sorting over a thousand items.  Time to replace the bubblesort with something faster.</span></p></div></div></div></div></div></div></article></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1659569284241080321" itemprop="identifier"/><meta content="2" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2023-05-19T14:38:45.000Z" itemprop="dateCreated"/><meta content="2023-05-19T14:38:45.000Z" itemprop="datePublished"/><meta content="https://twitter.com/stefanomarinell/status/1659569284241080321" itemprop="url"/><meta content="https://twitter.com/cperciva/status/1659558311920914432" itemprop="isPartOf"/><article aria-labelledby="id__h5pmjyn0ye6 id__n0aebmanss8 id__wdopbh2700r id__x005v7kjm8b id__ccx9412gck id__cavviv144kv id__ut3n3i64eom id__vbv83xr2o6q id__w62o93m583m id__oabfwn4v0pj id__eyd6x93daxl id__626ohf9s8v id__gco5z28rqv5 id__1msptimoag4 id__mcel411f8n id__ac1p4e8tl0v id__p960v9292ee id__g2xetdtfb0a id__f2o83ok4ni9" role="article" tabindex="-1" data-testid="tweet"><div><div><div><div><div data-testid="Tweet-User-Avatar"><div><div><div data-testid="UserAvatar-Container-stefanomarinell"><div><div><div><div><a href="https://twitter.com/stefanomarinell" aria-hidden="true" role="link" tabindex="-1"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1632691876791828481/ceoU234-_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div><div><div itemprop="articleBody" data-testid="tweetTextAnnotations"><div><p><span>Well done! It would be great if all developers took into account the computational complexity of their software.</span></p></div></div></div></div></div></div></article></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1659577927665610753" itemprop="identifier"/><meta content="3" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2023-05-19T15:13:06.000Z" itemprop="dateCreated"/><meta content="2023-05-19T15:13:06.000Z" itemprop="datePublished"/><meta content="https://twitter.com/cperciva/status/1659577927665610753" itemprop="url"/><meta content="https://twitter.com/stefanomarinell/status/1659569284241080321" itemprop="isPartOf"/><article aria-labelledby="id__afdjo88xu7w id__a58jujdguy id__ddvuxyhrbw id__5bqe9v1ddow id__mj91rc7ble id__zha4ynwal9l id__gnh6pzr6mfl id__8wn5rqyuwyh id__7vur7tmyjar id__j7ax07jvqk id__gxty0akm5h9 id__ux1wvboycq id__mt6j7yvlkhm id__306prmd283v id__w4hnt75qaz id__fvmu2fm53rg id__evht1pyruof id__azyvqxuiw49 id__31phtj7e8xw" role="article" tabindex="-1" data-testid="tweet"><div><div><div><div><div data-testid="Tweet-User-Avatar"><div><div><div data-testid="UserAvatar-Container-cperciva"><div><div><div><div><a href="https://twitter.com/cperciva" aria-hidden="true" role="link" tabindex="-1"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/427942491/Colin_400x400.png"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div><div><div itemprop="articleBody" data-testid="tweetTextAnnotations"><div><p><span>To be fair, when this code was written in 1996, there were only about 30 SYSINITs being sorted.</span></p></div></div></div></div></div></div></article></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1659558943260299264" itemprop="identifier"/><meta content="4" itemprop="position"/><meta content="2" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2023-05-19T13:57:39.000Z" itemprop="dateCreated"/><meta content="2023-05-19T13:57:39.000Z" itemprop="datePublished"/><meta content="https://twitter.com/pandrewhk/status/1659558943260299264" itemprop="url"/><meta content="https://twitter.com/cperciva/status/1659558311920914432" itemprop="isPartOf"/><article aria-labelledby="id__zext0i4nma id__gtmna3gi89i id__3ql3ledlvae id__523xkry07x9 id__s3lw45zl6r id__2tdejb9pxc9 id__k7ysphrcw3 id__u4pm770smz9 id__s9ivi8qm37 id__6infq0p84f id__t27rownovk id__md3we5g07xl id__wkz6x8kkk2c id__yipouo22mra id__p8bulp8jlgh id__bcw75jf8keu id__cntsdfzjvcr id__lxd07dxqwy id__6cw0f1pidyh" role="article" tabindex="-1" data-testid="tweet"><div><div><div><div><div data-testid="Tweet-User-Avatar"><div><div><div data-testid="UserAvatar-Container-pandrewhk"><div><div><div><div><a href="https://twitter.com/pandrewhk" aria-hidden="true" role="link" tabindex="-1"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1359477974890815489/wBGOrr4J_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div><div><div itemprop="articleBody" data-testid="tweetTextAnnotations"><div><p><span>hmm it can be pre-computed after every edit, right?</span></p></div></div></div></div></div></div></article></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1659561673278226432" itemprop="identifier"/><meta content="5" itemprop="position"/><meta content="3" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2023-05-19T14:08:30.000Z" itemprop="dateCreated"/><meta content="2023-05-19T14:08:30.000Z" itemprop="datePublished"/><meta content="https://twitter.com/cperciva/status/1659561673278226432" itemprop="url"/><meta content="https://twitter.com/pandrewhk/status/1659558943260299264" itemprop="isPartOf"/><article aria-labelledby="id__161npq8rzs2 id__2ltn6rlw4dg id__nme9v99h1bs id__783snky9tsd id__l3qy5dje2ah id__o74ny7os9qf id__uufr1lchwv id__oxnf54owmx id__zhyizt92k7 id__piua8eqvqr id__ljf5jghb0f id__6bw1e2vp4ol id__s3zw5185brk id__rlpo86ja4bs id__bjtwo4s8r0u id__abz84usmt7o id__2nr5cxmbhlk id__4mv0nd57i6 id__a5z3xzytuem" role="article" tabindex="-1" data-testid="tweet"><div><div><div><div><div data-testid="Tweet-User-Avatar"><div><div><div data-testid="UserAvatar-Container-cperciva"><div><div><div><div><a href="https://twitter.com/cperciva" aria-hidden="true" role="link" tabindex="-1"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/427942491/Colin_400x400.png"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div><div><div itemprop="articleBody" data-testid="tweetTextAnnotations"><div><p><span>Theoretically we could get the linker to sort SYSINITs and then just merge the lists from kernel and modules.  I suspect quicksort will be enough though.</span></p></div></div></div></div></div></div></article></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1659560974578499586" itemprop="identifier"/><meta content="6" itemprop="position"/><meta content="3" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2023-05-19T14:05:44.000Z" itemprop="dateCreated"/><meta content="2023-05-19T14:05:44.000Z" itemprop="datePublished"/><meta content="https://twitter.com/shachaf/status/1659560974578499586" itemprop="url"/><meta content="https://twitter.com/cperciva/status/1659558311920914432" itemprop="isPartOf"/><article aria-labelledby="id__94vuycwsnwl id__f96hx9e58wp id__2d6iefk1m4w id__2017kli36xq id__69vi9s2i11 id__nnpsqx3wft id__qq2sh6uq00q id__ljmtt5et37g id__93k03c3fdxd id__l5qoszcn8kj id__mkdqcfqhyj8 id__ytcnpgzjpu id__zjlu8qkaspi id__qmaqgarl03l id__f96vx4axlrk id__38esx92bngx id__sgiimh7gcc id__nfmpnhv0f6 id__72mo63v4ufw" role="article" tabindex="-1" data-testid="tweet"><div><div><div><div><div data-testid="Tweet-User-Avatar"><div><div><div data-testid="UserAvatar-Container-shachaf"><div><div><div><div><a href="https://twitter.com/shachaf" aria-hidden="true" role="link" tabindex="-1"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1201618403372306433/nJ-IaIu-_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div><div><div itemprop="articleBody" data-testid="tweetTextAnnotations"><div><p><span>Even in the world of quadratic-time sorts, bubble sort is really very bad. I bet insertion sort would do much better in every respect (including simplicity).</span></p></div></div></div></div></div></div></article></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1659561874126413824" itemprop="identifier"/><meta content="7" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2023-05-19T14:09:18.000Z" itemprop="dateCreated"/><meta content="2023-05-19T14:09:18.000Z" itemprop="datePublished"/><meta content="https://twitter.com/cperciva/status/1659561874126413824" itemprop="url"/><meta content="https://twitter.com/shachaf/status/1659560974578499586" itemprop="isPartOf"/><article aria-labelledby="id__va62l0mgxhk id__culfczrgwtf id__f68nsyvdqu id__u3t1q7j57fq id__4aqjxzxkmqp id__n5fyzyct1ks id__ks7osvh2ifo id__m6ll3lbtkd id__a289qceone id__1qo9ipm3simj id__lpayua0r83r id__cmaqgd9otlp id__mqbfjtpdusc id__j9003cizfh9 id__09elbpl54w5t id__97u8kxpa2lm id__fsu1lfq4ydj id__mimicgkqbuq id__9qrkd3borx" role="article" tabindex="-1" data-testid="tweet"><div><div><div><div><div data-testid="Tweet-User-Avatar"><div><div><div data-testid="UserAvatar-Container-cperciva"><div><div><div><div><a href="https://twitter.com/cperciva" aria-hidden="true" role="link" tabindex="-1"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/427942491/Colin_400x400.png"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div><div><div itemprop="articleBody" data-testid="tweetTextAnnotations"><div><p><span>I would probably have just made it a selection sort.  But this hasn&#39;t been touched since 1996; I guess it was good enough at that point.</span></p></div></div></div></div></div></div></article></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1659568009021648897" itemprop="identifier"/><meta content="8" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2023-05-19T14:33:41.000Z" itemprop="dateCreated"/><meta content="2023-05-19T14:33:41.000Z" itemprop="datePublished"/><meta content="https://twitter.com/tzriggs/status/1659568009021648897" itemprop="url"/><meta content="https://twitter.com/cperciva/status/1659558311920914432" itemprop="isPartOf"/><article aria-labelledby="id__hl1dvd4yyef id__bphgqv3lu2f id__e3g3o1gv4a id__u822lbevwz id__41di3ocanm7 id__e770q168cgo id__fb7ns5wn85v id__a1c2vqnk15p id__bsq0mzylc4s id__w3nfelei3mg id__3i9p7zo6yuu id__2e9g3wwqzj3 id__k1br10k48rs id__ohybc0ldg2m id__uzzdoixolf id__gdkbnpwoox id__0k3k234m01rm id__ufgut5nz0w id__6akb1xwbwdt" role="article" tabindex="-1" data-testid="tweet"><div><div><div><div><div data-testid="Tweet-User-Avatar"><div><div><div data-testid="UserAvatar-Container-tzriggs"><div><div><div><div><a href="https://twitter.com/tzriggs" aria-hidden="true" role="link" tabindex="-1"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/1343967903926857740/ggYs1Ea7_400x400.jpg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div><div><div itemprop="articleBody" data-testid="tweetTextAnnotations"><div><p><span>How long (in seconds) is that boot process overall?</span></p></div></div></div></div></div></div></article></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1659577625289928705" itemprop="identifier"/><meta content="9" itemprop="position"/><meta content="0" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2023-05-19T15:11:53.000Z" itemprop="dateCreated"/><meta content="2023-05-19T15:11:53.000Z" itemprop="datePublished"/><meta content="https://twitter.com/cperciva/status/1659577625289928705" itemprop="url"/><meta content="https://twitter.com/tzriggs/status/1659568009021648897" itemprop="isPartOf"/><article aria-labelledby="id__cwiafq8tqsf id__vsgwpc3152 id__gsjbgp2dg7u id__z157rfobdmn id__pj7w20lt99h id__vk978sl87lj id__6inluhrb439 id__yxxqkukxp3i id__inyzblgioh id__uteqbyldeun id__2u9449nu4i7 id__9vknr42jwbe id__oqe817khlx id__pnrc0pgdb9 id__3mtw7hei35 id__klxui1kzt0p id__fcrt2wphex id__dd7yehhag9i id__xhdcnc76b8b" role="article" tabindex="-1" data-testid="tweet"><div><div><div><div><div data-testid="Tweet-User-Avatar"><div><div><div data-testid="UserAvatar-Container-cperciva"><div><div><div><div><a href="https://twitter.com/cperciva" aria-hidden="true" role="link" tabindex="-1"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/427942491/Colin_400x400.png"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div><div><div itemprop="articleBody" data-testid="tweetTextAnnotations"><div><p><span>The kernel boot (of which 7% is bubblesort) is 28 ms.</span></p></div></div></div></div></div></div></article></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1659559138886823936" itemprop="identifier"/><meta content="10" itemprop="position"/><meta content="1" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2023-05-19T13:58:26.000Z" itemprop="dateCreated"/><meta content="2023-05-19T13:58:26.000Z" itemprop="datePublished"/><meta content="https://twitter.com/bycn82/status/1659559138886823936" itemprop="url"/><meta content="https://twitter.com/cperciva/status/1659558311920914432" itemprop="isPartOf"/><article aria-labelledby="id__huf5bt0wi7v id__3u3zwbryprk id__qph2fbw6vbg id__rvfhtlezflm id__6gg5lzqaeqm id__7s2214ptc9g id__3452tagkqyh id__f2bljqjfm0v id__ht6ccp2cluh id__21772z3jdgj id__ps1tbvq1ei id__fsnzmonwws id__ofwwxuk7w1q id__p5m6h13h9i id__xabqlsbem5m id__2c7zihgzf4c id__is8so3krvi9 id__e2ygogpybiq id__clnf9zc4gpb" role="article" tabindex="-1" data-testid="tweet"><div><div><div><div><div data-testid="Tweet-User-Avatar"><div><div><div data-testid="UserAvatar-Container-bycn82"><div><div><div><div><a href="https://twitter.com/bycn82" aria-hidden="true" role="link" tabindex="-1"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/581099776499843072/MoErdzrj_400x400.png"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div><div><div itemprop="articleBody" data-testid="tweetTextAnnotations"><div><p><span>i m just curious, why it is called &#34;firecracker&#34;</span></p></div></div></div></div></div></div></article></div></div><div><div itemprop="hasPart" itemscope="" itemtype="https://schema.org/SocialMediaPosting"><meta content="1659559628672311296" itemprop="identifier"/><meta content="11" itemprop="position"/><meta content="0" itemprop="commentCount"/><meta content="" itemprop="contentRating"/><meta content="2023-05-19T14:00:23.000Z" itemprop="dateCreated"/><meta content="2023-05-19T14:00:23.000Z" itemprop="datePublished"/><meta content="https://twitter.com/Stefar77/status/1659559628672311296" itemprop="url"/><meta content="https://twitter.com/cperciva/status/1659558311920914432" itemprop="isPartOf"/><article aria-labelledby="id__bwyr646jas8 id__qewjgyxi5q8 id__a188n1gfvqb id__g6k0yir44a id__eprbuile0zq id__cqcuz0pdzon id__nlx8u62mdvp id__962ii6n5tai id__e6fmyqjtyu9 id__yocys7t0cek id__3xigfz41eo7 id__e7dv0p7wtb6 id__m2bwuyc6yzs id__17myn6u1wpl id__gdjt7iyas66 id__n48zmgziyjh id__0vztadttxd5m id__i1sufhr8fbg id__rw5w27q1lwd" role="article" tabindex="-1" data-testid="tweet"><div><div><div><div><div data-testid="Tweet-User-Avatar"><div><div><div data-testid="UserAvatar-Container-Stefar77"><div><div><div><div><a href="https://twitter.com/Stefar77" aria-hidden="true" role="link" tabindex="-1"><div><div><div><div aria-label=""><p><img alt="" draggable="true" src="https://pbs.twimg.com/profile_images/429246338543255552/_irsMTLn_400x400.jpeg"/></p></div></div></div></div></a></div></div></div></div></div></div></div></div></div><div><div itemprop="articleBody" data-testid="tweetTextAnnotations"><div><p><span>Fine as long as you don&#39;t name it systemd. ;-)</span></p></div></div></div></div></div></div></article></div></div></div></div></section></div></div></div></div></div></div></div></div>
  </body>
</html>
