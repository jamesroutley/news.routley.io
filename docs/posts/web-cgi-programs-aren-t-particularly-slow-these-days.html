<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://utcc.utoronto.ca/~cks/space/blog/web/CGINotSlow">Original</a>
    <h1>Web CGI programs aren&#39;t particularly slow these days</h1>
    
    <div id="readability-page-1" class="page"><div><h2>Web CGI programs aren&#39;t particularly slow these days</h2>

	<p><small>December 27, 2023</small></p>
</div><div><p>I recently read <a href="https://rednafi.com/go/reminiscing_cgi_scripts/">Reminiscing CGI scripts</a> (<a href="https://lobste.rs/s/jcm2am/reminiscing_cgi_scripts">via</a>), which talked
about <a href="https://en.wikipedia.org/wiki/Common_Gateway_Interface">CGI scripts</a> and in
passing mentioned that they fell out of favour for, well, let me
quote:</p>

<blockquote><p>CGI scripts have fallen out of favor primarily due to concerns related
to performance and security. [...]</p>
</blockquote>

<p>This is in one sense true. Back in the era when CGIs were pushed
aside by PHP and other more complex deployment environments like
Apache&#39;s <a href="https://perl.apache.org/">mod_perl</a> and <a href="https://modwsgi.readthedocs.io/">mod_wsgi</a>, their performance was an issue,
especially under what was then significant load. But this isn&#39;t
because CGI programs are intrinsically slow in an absolute sense;
it was because computers in the early 00s were not very powerful
and might even be heavily (over-)shared in virtual hosting environments.
When the computers acting as web servers couldn&#39;t do very much in
general, everything less you could get them to do could make a
visible difference, including not starting a separate program or
two for each request.</p>

<p>Modern computers are much faster and more powerful than the early
00s servers where PHP shoved CGIs aside; even a low end VPS is
probably as good or better, with more memory, more CPU, and almost
always a much faster disk. And unsurprisingly, CGIs have gotten a
lot faster and a lot better at handling load in absolute terms.</p>

<p>To illustrate this, I put together a very basic CGI in Python and
Go, stuck them in <a href="https://www.cs.toronto.edu/~cks/">my area on our general purpose web server</a>, and tested how fast they would
run. On our run of the mill Ubuntu web server, the Python version
took around 17 milliseconds to run and the Go version around four
milliseconds (in both cases when they&#39;d been run somewhat recently).
Because the CGIs are more or less doing nothing in both cases, this
is pretty much measuring the execution overhead of running a CGI.
A real Python CGI would take longer to start because it has more
things to import, but even then it&#39;s not necessarily terribly slow.</p>

<p>(As another data point, I have ongoing numbers for the response
time of <a href="https://utcc.utoronto.ca/~cks/space/blog/">Wandering Thoughts</a>, which is <a href="https://utcc.utoronto.ca/~cks/space/blog/web/DynamicNeedNotBeSlow">a rather complex
piece of Python normally running as a CGI</a>.
On fairly basic (virtual) hardware, it seems to average about 0.17
seconds for the front page (including things like TLS overhead),
which is down noticeably from a decade ago.)</p>

<p>Given that <a href="https://utcc.utoronto.ca/~cks/space/blog/web/CGIAttractions">CGI scripts have their attractions for modest scale
pages and sites</a>, it&#39;s useful to know that CGI
programs are not as terrible as they&#39;re often made out to be in old
sources (or people working from old sources). Using a CGI program
is a perfectly good deployment strategy for many web applications
(and <a href="https://utcc.utoronto.ca/~cks/space/blog/web/ApacheCGIsAndLocationACLs">you can take advantages of other general web server features</a>).</p>

<p>(Yes, your CGI may slow down if you&#39;re getting a hundred hits a
second. How likely is that to happen, and if it does, how critical
is the slowdown? There are some environments where you absolutely
want and need to plan for this, but also quite a number where you
don&#39;t.)</p>
</div></div>
  </body>
</html>
