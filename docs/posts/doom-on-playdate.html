<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://devforum.play.date/t/doom-on-playdate/852">Original</a>
    <h1>Doom on Playdate</h1>
    
    <div id="readability-page-1" class="page"><div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
      <meta itemprop="headline" content="Doom on Playdate"/>
      
      <meta itemprop="datePublished" content="2020-05-25T21:50:30Z"/>
        <meta itemprop="articleSection" content="Games"/>
      <meta itemprop="keywords" content=""/>
      


          <div id="post_1">
            
            <div itemprop="text">
              <p>Last week end I finally started to work on porting Doom on the Playdate.</p>
<p>This is a very early result, just to run the game, but that was the hardest part for me. Dealing with makefiles and compiler is really not my cup of tea so having the game running means that now I can focus on the game control, presentation and optimization.</p>
<p><img src="https://devforum-cdn.play.date/original/1X/ad0bca29eb788fe9bfed240366cd41ee2a4639bf.gif" alt="04" data-base62-sha1="oGPRqp9vmPbukHgOoJDHnql4w8v" width="400" height="240"/></p>
<p>This is a gif from the simulator but I got the game running on the hardware too.</p>
<p><img src="https://devforum-cdn.play.date/original/1X/7c0f0a9386f96b3029520f6f76648db93a399eb6.gif" alt="05" data-base62-sha1="hHtqNnHnN2GfthLDtz2yS3xf5Rk" width="400" height="225"/></p>
<p>The most difficult part was to deal with the linker that was complaining about some missing references in libc. After spending two evenings chasing every libc functions that might be problematic, I found out that there is some magical linker option.</p>
<p>I&#39;ve added the following line in CMakeLists.txt</p>
<p>Since the linker was complaining about the symbol end missing, I&#39;ve added it to the link_map.ld in the playdate SDK</p>
<pre><code>	.bss :
	{
		. = ALIGN(4);
		__bss_start__ = .;
		*(.bss*)
		*(COMMON)
		. = ALIGN(4);
		__bss_end__ = .;
		end = __bss_end__;

	} &gt; EXTRAM
</code></pre>
            </div>

            

            

                
          </div>
          <div id="post_2" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://devforum.play.date/u/matt"><span itemprop="name">matt</span></a>
                (gingerbeardman)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2020-05-25T22:33:56Z">
                    May 25, 2020, 10:33pm
                  </time>
                  <meta itemprop="dateModified" content="2020-05-25T22:33:56Z"/>
              <span itemprop="position">2</span>
              </span>
            </p>
            <div itemprop="text">
              <p>Nic! You&#39;re crazy. In a good way.</p>
<p>Awesome</p>
            </div>

            

            

          </div>
          <div id="post_3" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://devforum.play.date/u/ast-rsk"><span itemprop="name">ast-rsk</span></a>
                
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2020-05-25T23:07:57Z">
                    May 25, 2020, 11:07pm
                  </time>
                  <meta itemprop="dateModified" content="2020-05-25T23:07:57Z"/>
              <span itemprop="position">3</span>
              </span>
            </p>
            <p>This officially makes the playdate a viable product! If it can run doom, it&#39;s a solid device <img src="https://devforum-cdn.play.date/original/1X/3c05b67d820920114bafac96e31bfbefd6a4944d.png?v=12" title=":playdate:" alt=":playdate:" loading="lazy" width="20" height="20"/></p>

            

            

          </div>
          <div id="post_4" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://devforum.play.date/u/squirrelboy"><span itemprop="name">squirrelboy</span></a>
                (Jake White)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2020-05-25T23:25:39Z">
                    May 25, 2020, 11:25pm
                  </time>
                  <meta itemprop="dateModified" content="2020-05-25T23:25:39Z"/>
              <span itemprop="position">4</span>
              </span>
            </p>
            <p>Woah. I already wanted to make a Wolfenstein/Doom style game on this, but now even more.</p>

            

            

          </div>
          <div id="post_5" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://devforum.play.date/u/dustin"><span itemprop="name">dustin</span></a>
                (Dustin Mierau)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2020-05-26T00:00:20Z">
                    May 26, 2020, 12:00am
                  </time>
                  <meta itemprop="dateModified" content="2020-05-26T00:00:20Z"/>
              <span itemprop="position">5</span>
              </span>
            </p>
            <p><img src="https://devforum-cdn.play.date/original/1X/d04cb21f40800c547fa08bc80d3c8dff0bc580c6.png?v=12" title=":playdate_shocked:" alt=":playdate_shocked:" loading="lazy" width="20" height="20"/> <img src="https://devforum-cdn.play.date/original/1X/f444a5a65c415828c203bcb1b25076709723e907.png?v=12" title=":playdate_heart:" alt=":playdate_heart:" loading="lazy" width="20" height="20"/></p>

            

            

          </div>
          <div id="post_6" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://devforum.play.date/u/Dreezn"><span itemprop="name">Dreezn</span></a>
                (Dries Vienne)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2020-05-26T07:30:21Z">
                    May 26, 2020,  7:30am
                  </time>
                  <meta itemprop="dateModified" content="2020-05-26T07:30:21Z"/>
              <span itemprop="position">6</span>
              </span>
            </p>
            <p>I love you man.</p>

            

            

          </div>
          <div id="post_7" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://devforum.play.date/u/SamanthaZero"><span itemprop="name">SamanthaZero</span></a>
                (Samantha Kalman)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2020-05-26T08:39:28Z">
                    May 26, 2020,  8:39am
                  </time>
                  <meta itemprop="dateModified" content="2020-05-26T08:39:28Z"/>
              <span itemprop="position">7</span>
              </span>
            </p>
            <p>very cool! <img src="https://devforum.play.date/images/emoji/apple/clap.png?v=12" title=":clap:" alt=":clap:" loading="lazy" width="20" height="20"/> <img src="https://devforum.play.date/images/emoji/apple/clap.png?v=12" title=":clap:" alt=":clap:" loading="lazy" width="20" height="20"/> <img src="https://devforum.play.date/images/emoji/apple/clap.png?v=12" title=":clap:" alt=":clap:" loading="lazy" width="20" height="20"/></p>

            

            

          </div>
          <div id="post_8" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <div>
              <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://devforum.play.date/u/Nic"><span itemprop="name">Nic</span></a>
                (Nic Magnier)
              </span></p>

              <p><span>
                  <time itemprop="datePublished" datetime="2020-05-26T10:01:16Z">
                    May 26, 2020, 10:01am
                  </time>
                  <meta itemprop="dateModified" content="2020-05-26T10:01:16Z"/>
              <span itemprop="position">8</span>
              </span>
            </p></div>
            <div itemprop="text">
              <p>Wow thank you all <img src="https://devforum-cdn.play.date/original/1X/f444a5a65c415828c203bcb1b25076709723e907.png?v=12" title=":playdate_heart:" alt=":playdate_heart:" loading="lazy" width="20" height="20"/></p>
<p>But I have to say that this is possible mostly because the Doom engine is extremely well done and organized and can be easily ported. It is not a mystery why this is the game that is always ported everywhere.</p>
<p>Something I forgot to mention is that I used STM32Doom for the port which itself in based on chocolate doom. I will share the source when I am a bit further and after cleaning some code (If anyone want to source already, feel free to DM me).</p>

<p>For anyone interested, I also recommend the book from Fabien Sanglard which analyze the source code. That was the book that pick my interest in porting the game.</p>
            </div>

            

            

          </div>
          <div id="post_9" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://devforum.play.date/u/Dreezn"><span itemprop="name">Dreezn</span></a>
                (Dries Vienne)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2020-05-26T12:02:57Z">
                    May 26, 2020, 12:02pm
                  </time>
                  <meta itemprop="dateModified" content="2020-05-26T12:02:57Z"/>
              <span itemprop="position">9</span>
              </span>
            </p>
            <div itemprop="text">
              <p>Wow thanks for sharing!</p>
<p>I didn&#39;t know that book existed <img src="https://devforum-cdn.play.date/original/1X/3c05b67d820920114bafac96e31bfbefd6a4944d.png?v=12" title=":playdate:" alt=":playdate:" loading="lazy" width="20" height="20"/> . Although I never attempted porting, I dove into the source a few times to get inspiration for various clones and such. This makes my week!</p>
<p>What next steps are you planning, now that you got it up and running?</p>
            </div>

            

            

          </div>
          <div id="post_10" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://devforum.play.date/u/DJLink"><span itemprop="name">DJLink</span></a>
                (David)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2020-05-29T20:39:52Z">
                    May 29, 2020,  8:39pm
                  </time>
                  <meta itemprop="dateModified" content="2020-05-29T20:39:52Z"/>
              <span itemprop="position">10</span>
              </span>
            </p>
            <p>wow this is so cool, thanks for sharing</p>

            

            

          </div>
          <div id="post_11" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <div>
              <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://devforum.play.date/u/Nic"><span itemprop="name">Nic</span></a>
                (Nic Magnier)
              </span></p>

              <p><span>
                  <time itemprop="datePublished" datetime="2020-05-30T17:12:32Z">
                    May 30, 2020,  5:12pm
                  </time>
                  <meta itemprop="dateModified" content="2020-05-30T17:12:32Z"/>
              <span itemprop="position">11</span>
              </span>
            </p></div>
            <div itemprop="text">
              <p>I was not able to work on the port so much this week. This is still a gif of the rolling demo and this is not playable yet.</p>
<p><img src="https://devforum-cdn.play.date/original/1X/45a72288f2aaca1680556bcc2edfabb22b71cd51.gif" alt="06" data-base62-sha1="9Wb1SCfukHAEAsvNGWkQLwoF6Gl" width="400" height="240"/></p>
<p>This is still pretty rough. I tried to add controls but now the game crashes in the simulator when I try to launch the proper game. I also have a new crash on device, a totally different one. It will be (not) fun to track them down.</p>
<p><img src="https://devforum-cdn.play.date/original/1X/831f4a1754fb7fb0e96227829fa4be398b4e78a9.jpeg" alt="image" data-base62-sha1="iHXAkc5VIVpibnRjHfObJxDlL29" width="300" height="225"/></p>
<p>At least the rendering is a bit better. I use a dithering map texture which indicate which part of the screen is blue noise, ordered of just threshold. On the long term the key will be to add contrast to make some element like enemies pop more.</p>
<p><img src="https://devforum-cdn.play.date/original/1X/bd8bb0089cf2a258971e14d7d7738d44d34cbc5e.png" alt="image" data-base62-sha1="r2NwjONof7FsOhFRe46a25dlW5U" width="320" height="200"/></p>
<p>But now I went back to the blue noise rabbit hole and started to experiment generating my own blue noise textures. That will be interesting to improve the picture quality (and I have an idea that might force me to go back to my video experiments)</p>
            </div>

            

            

          </div>
          <div id="post_12" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://devforum.play.date/u/donald.hays"><span itemprop="name">donald.hays</span></a>
                (Donald Hays)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2020-05-30T23:50:22Z">
                    May 30, 2020, 11:50pm
                  </time>
                  <meta itemprop="dateModified" content="2020-05-30T23:50:22Z"/>
              <span itemprop="position">12</span>
              </span>
            </p>
            <div itemprop="text">
              <p>That is amazingly awesome.</p>
<p>I don&#39;t want to throw extra work on your plate, but this made me think about <a href="https://forums.tigsource.com/index.php?topic=40832.msg1363742#msg1363742" rel="noopener nofollow ugc">a post about dithering in Return of the Obra Dinn</a>, and how the dither pattern was rotated with the camera. Since you&#39;re working with Doom&#39;s source directly, I would imagine this means you have easy access to the camera rotation angle, yes? If so, I wonder how easy it would be to scroll the blue noise texture correspondingly, and if it would make the scene look any better or worse?</p>
            </div>

            

            

          </div>
          <div id="post_13" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://devforum.play.date/u/Nic"><span itemprop="name">Nic</span></a>
                (Nic Magnier)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2020-05-31T05:08:14Z">
                    May 31, 2020,  5:08am
                  </time>
                  <meta itemprop="dateModified" content="2020-05-31T05:08:14Z"/>
              <span itemprop="position">13</span>
              </span>
            </p>
            <p>Thatâ€™s an excellent idea!</p>

            

            

          </div>
          <div id="post_14" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <div>
              <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://devforum.play.date/u/Nic"><span itemprop="name">Nic</span></a>
                (Nic Magnier)
              </span></p>

              <p><span>
                  <time itemprop="datePublished" datetime="2020-06-01T21:27:41Z">
                    June 1, 2020,  9:27pm
                  </time>
                  <meta itemprop="dateModified" content="2020-06-01T21:27:41Z"/>
              <span itemprop="position">14</span>
              </span>
            </p></div>
            <div itemprop="text">
              <p>So if you don&#39;t go on the discord you might not have seen that Poom is kind of playable. I say kind of because I still have a lot of random crashes when navigating the menus. I am waiting to be able to debug on the simulator figure out what is the issue.</p>
<p>And because of popular demand I&#39;ve added using the crank to use the Gatling. <img src="https://devforum-cdn.play.date/original/1X/d04cb21f40800c547fa08bc80d3c8dff0bc580c6.png?v=12" title=":playdate_shocked:" alt=":playdate_shocked:" loading="lazy" width="20" height="20"/></p>
<p><img src="https://devforum-cdn.play.date/original/1X/62f76ee198cb00799bf45990690c10531b8f6d7f.gif" alt="DoomGatlingMini.2020-06-01 23_25_12" data-base62-sha1="e7uUJNqPr1l5EejChDvwKfT8oub" width="330" height="220"/></p>
<p>We also had a discussion about Chex Quest and I don&#39;t think my code can support it so I am considering switch fully to Doom Chocolate. That would be an opportunity to clean up the code I did.</p>
<p>The early results are encouraging but there is still so much to do. <img src="https://devforum-cdn.play.date/original/1X/d5fcf966698d4f0ed1188749a3aca4707508f293.png?v=12" title=":playdate_dizzy:" alt=":playdate_dizzy:" loading="lazy" width="20" height="20"/></p>
            </div>

            

            

                
          </div>
          <div id="post_15" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://devforum.play.date/u/dustin"><span itemprop="name">dustin</span></a>
                (Dustin Mierau)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2020-06-01T22:25:24Z">
                    June 1, 2020, 10:25pm
                  </time>
                  <meta itemprop="dateModified" content="2020-06-01T22:25:24Z"/>
              <span itemprop="position">15</span>
              </span>
            </p>
            <p>SO FREAKING GOOD <img src="https://devforum.play.date/images/emoji/apple/smiley.png?v=12" title=":smiley:" alt=":smiley:" loading="lazy" width="20" height="20"/></p>

            

            

          </div>
          <div id="post_16" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://devforum.play.date/u/ast-rsk"><span itemprop="name">ast-rsk</span></a>
                
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2020-06-01T23:27:32Z">
                    June 1, 2020, 11:27pm
                  </time>
                  <meta itemprop="dateModified" content="2020-06-01T23:27:32Z"/>
              <span itemprop="position">16</span>
              </span>
            </p>
            <div itemprop="text">
              <p>Incredible progress!</p>
<p>A couple friends of mine who don&#39;t know anything about playdate or that I&#39;m in the preview, individually shared your update tweet with me saying how cool it is and how the device is so unique and looks fun.</p>
            </div>

            

            

          </div>
          <div id="post_17" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://devforum.play.date/u/Drarok"><span itemprop="name">Drarok</span></a>
                
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2020-06-02T20:04:47Z">
                    June 2, 2020,  8:04pm
                  </time>
                  <meta itemprop="dateModified" content="2020-06-02T20:04:47Z"/>
              <span itemprop="position">17</span>
              </span>
            </p>
            <div itemprop="text">
              <p>This is absolutely nuts in a brilliant way.</p>
<p>How&#39;s the music sound? <img src="https://devforum.play.date/images/emoji/apple/grimacing.png?v=12" title=":grimacing:" alt=":grimacing:" loading="lazy" width="20" height="20"/></p>
            </div>

            

            

          </div>
          <div id="post_18" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://devforum.play.date/u/Nic"><span itemprop="name">Nic</span></a>
                (Nic Magnier)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2020-06-02T21:11:39Z">
                    June 2, 2020,  9:11pm
                  </time>
                  <meta itemprop="dateModified" content="2020-06-02T21:11:39Z"/>
              <span itemprop="position">18</span>
              </span>
            </p>
            <div itemprop="text">
              <p>No sound or music yet.</p>
<p>This is not my specialty so I didn&#39;t even look at it yet. Especially since this seem to have been the least portable part of the original doom. But I will come to that [art eventually.</p>
            </div>

            

            

          </div>
          <div id="post_19" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://devforum.play.date/u/HaitoH3"><span itemprop="name">HaitoH3</span></a>
                (Jason A. Huff)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2020-07-01T05:08:37Z">
                    July 1, 2020,  5:08am
                  </time>
                  <meta itemprop="dateModified" content="2020-07-01T05:08:37Z"/>
              <span itemprop="position">19</span>
              </span>
            </p>
            <p>oh man so good... i&#39;ll just start over now</p>

            

            

          </div>
          <div id="post_20" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" href="https://devforum.play.date/u/spencer"><span itemprop="name">spencer</span></a>
                (spencer cap)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2020-07-21T07:33:23Z">
                    July 21, 2020,  7:33am
                  </time>
                  <meta itemprop="dateModified" content="2020-07-21T07:33:23Z"/>
              <span itemprop="position">20</span>
              </span>
            </p>
            <p>Great job with this! would love to try out how it feels to shoot using the crank. do you have a pdx avail to play test?</p>

            

            

          </div>
    </div></div>
  </body>
</html>
