<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://ssoready.com/blog/engineering/truths-programmers-timezones/">Original</a>
    <h1>Australia/Lord_Howe is the weirdest timezone</h1>
    
    <div id="readability-page-1" class="page"><p>
            Timezones are weird. But only finitely so. Here&#39;s the exact conceptual model you should have of them.
        </p><div>
            <p>The standard trope when talking about timezones is to rattle off falsehoods
programmers believe about them. These lists are only somewhat enlightening –
it’s really hard to figure out what truth is just from the contours of
falsehood.</p>
<p>So here’s an alternative approach. I’m gonna show you some weird timezones. In
fact, the <em>weirdest</em> timezones. They’re each about as weird as timezones are
allowed to get in some way.</p>
<ul>
<li><code>Asia/Kathmandu</code> has a weird offset from UTC</li>
<li><code>Africa/Casablanca</code> doesn’t fit into the timezone model cleanly, so it’s hard-coded</li>
<li><code>America/Nuuk</code> does daylight savings at -01:00 (yes, with a negative)
<ul>
<li>and <code>Africa/Cairo</code> and <code>America/Santiago</code> do it at 24 o’clock (not 0 o’clock)</li>
</ul>
</li>
<li><code>Australia/Lord_Howe</code>, population 382 and <a href="https://en.wikipedia.org/wiki/Dryococelus_australis">some notable stick
bugs</a>, has the weirdest
daylight savings rule</li>
</ul>
<p>To learn how their weirdness is represented in software, we’ll look at the raw
timezone files that all software ultimately relies on. From there, two things
will become clear:</p>
<ul>
<li>Yeah, this stuff is weird</li>
<li>But only finitely so, because ultimately a computer’s gotta implement them</li>
</ul>
<p>But first, an aside on the calendar.</p>

<p>Unless you’re doing some fairly exotic things where you’re finding yourself
saying things like</p>
<blockquote>
<p>Oh yeah the OCR on Japanese driving licenses pops out things like “平成 8”,
that’s just <a href="https://en.wikipedia.org/wiki/Japanese_era_name">how they sometimes say
1996</a> over there. That’s why
we have this in the parser:</p>
<pre tabindex="0"><code>eras = { &#34;大正&#34;: 1912, &#34;昭和&#34;: 1926, &#34;平成&#34;: 1989 }
</code></pre><p>One of these days we’ll need to add <code>&#34;令和&#34;: 2019</code>, but it hasn’t come up yet.</p>
</blockquote>
<p>or</p>
<blockquote>
<p>We’re gonna need to set up a per-country feature flag when deciding whether
banks are closed for Eid. <a href="https://www.economist.com/middle-east-and-africa/2019/06/06/when-is-eid-al-fitr">Saudi Arabia and Iran don’t agree on when the lunar
month
starts</a>.</p>
</blockquote>
<p>Then yeah, sure, you may need to write software that knows about the Japanese or
Islamic calendar systems.</p>
<p>Cases like this are a small minority. The reality of the world is that the
Western system of timekeeping is the dominant one, and even in e.g. Japan and
the Muslim world, almost everyone who uses computers is familiar with the
Gregorian system.</p>
<p>With computers, we project the Gregorian system into the future and past, which
is called the proleptic Gregorian calendar and isn’t historically accurate but
nobody really cares except <a href="https://en.wikipedia.org/wiki/Old_Style_and_New_Style_dates">Russian revolution
nerds</a>.</p>
<p>This calendar system is pretty much good enough, and barring any <a href="https://en.wikipedia.org/wiki/French_Republican_calendar">rationalist
coups d’etat</a>, is the
one we’ll be stuck with for a long time. It does one thing well: it’s very good
at keeping the sun at the same place in the sky across the years. It doesn’t let
the months drift around the seasons like the Roman calendar did.</p>
<p>Technically, this “keep the sun roughly in the same place whenever it’s the same
time-of-day” is called “mean solar time”. And that’s why GMT, Greenwich Mean
Time, is called that way. It’s about the mean solar time of the <a href="https://en.wikipedia.org/wiki/Royal_Observatory,_Greenwich">English
observatory in
Greenwich</a>.</p>
<p>By the way, we technically don’t call it GMT anymore. Unless you’re talking
about what time people in London say it is, you probably technically mean
<a href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">UTC</a>.</p>
<p><img src="https://abstract.properties/utc.png" alt=""/></p>
<p><a href="https://en.wikipedia.org/wiki/Coordinated_Universal_Time">Coordinated Universal
Time</a> is basically
just a modern formalization of GMT. It’s useful because almost everyone on the
planet has agreed to base their clocks off of an <em>offset</em> from UTC. It’s still a
solar mean time, but the connection to Greenwich isn’t really there anymore.</p>
<p>I bring this up because you may have heard of a weird modern quirk on Pope
Gregory’s sun-following endeavors:</p>
<h2 id="leap-seconds-dont-matter">Leap seconds don’t matter</h2>
<p>The Earth’s rotation is slowing down. Days are getting longer. So you need to
correct for it if you want to keep IRL days in sync with computer days.</p>
<p>The nerd task force assigned to this problem is the <a href="https://en.wikipedia.org/wiki/International_Earth_Rotation_and_Reference_Systems_Service">International Earth
Rotation and Reference Systems
Service</a>,
which has two primary goals:</p>
<ol>
<li>Watch the Earth rotate, and report back on their findings</li>
<li>Break Wikipedia’s CSS with their long name</li>
</ol>
<figure>
<div>
<p><img src="https://abstract.properties/iers.png"/></p><figcaption>timecops</figcaption>
</div>
</figure>
<p>If the days are getting longer, and they’re doing so at a fairly unpredictable
rate, the simplest solution is to have IERS occasionally just insert an extra
second in the day to make clocks go slower. It’s called a <a href="https://en.wikipedia.org/wiki/Leap_second">leap
second</a>.</p>
<p>You should completely ignore the fact that this is a thing. It’s a cool novelty,
but it’s effectively just a detail you can ignore, because:</p>
<ol>
<li><a href="https://go.dev/play/p/9RwZu2jmlPl">It’s not like programming languages support representing 61-second minutes
anyway</a></li>
<li>You (and by you I mean your cloud provider) can just run your clocks slower
around the time of the leap second, and pretend to everyone else over
<a href="https://en.wikipedia.org/wiki/Network_Time_Protocol">NTP</a> that their clocks
are running fast. This is called leap smearing.</li>
</ol>
<p>Btw it’s called UTC (Universal Time Coordinated? huh?) because the same folks
who publish UTC also publish UT1, which is UTC sans the leap seconds. There were
other UTs before the Coordinated variant came up.</p>

<p>OK! Let’s start looking at some weird time zones, and find out how your computer
knows to represent them.</p>
<h2 id="asiakathmandu-is-on-a-weird-offset"><code>Asia/Kathmandu</code> is on a weird offset</h2>
<p>Most of the world is on a whole number of hours before or after UTC. About a
fifth the world by population is on a half-hour offset from UTC; in particular,
India is 5h30m ahead of UTC.</p>
<p>Nepal is 5h45m ahead of UTC:</p>
<div><pre tabindex="0"><code data-lang="text"><span><span>$ TZ=UTC date ; TZ=Asia/Kathmandu date
</span></span><span><span>Tue Jul 30 23:52:11 UTC 2024
</span></span><span><span>Wed Jul 31 05:37:11 +0545 2024
</span></span></code></pre></div><p>If you’re like me, you must be have at one point wondered how in the <em>world</em>
your computer knows this fact.</p>
<p>Here’s a hint:</p>
<div><pre tabindex="0"><code data-lang="text"><span><span>$ TZ=Asia/Kathmandu strace -e trace=openat date
</span></span><span><span>...
</span></span><span><span>openat(AT_FDCWD, &#34;/usr/share/zoneinfo/Asia/Kathmandu&#34;, O_RDONLY|O_CLOEXEC) = 3
</span></span><span><span>Wed Jul 31 05:40:49 +0545 2024
</span></span></code></pre></div><p>On your filesystem is a database called the IANA Timezone Database, aka tzdb or
zoneinfo. It’s a bunch of binary files, encoded in <a href="https://www.rfc-editor.org/rfc/rfc8536.html">Timezone Information
Format</a>. The names of those files
act as timezone identifiers, which is where you see strings like
<code>America/Los_Angeles</code> or <code>Europe/London</code> come from:</p>
<pre tabindex="0"><code>$ tree /usr/share/zoneinfo
...
├── America
│   ├── Los_Angeles
├── Europe
│   ├── London
...
</code></pre><p>At the very end of <code>/usr/share/zoneinfo/Asia/Kathmandu</code> is this little string:</p>
<pre tabindex="0"><code>cat /usr/share/zoneinfo/Asia/Kathmandu
...
&lt;+0545&gt;-5:45
</code></pre><p>The syntax is here pretty obtuse, but what it means is:</p>
<blockquote>
<p>Unless otherwise specified, UTC is 5h45m behind this timezone. Call this time
<code>+0545</code>.</p>
</blockquote>
<p>That’s precisely how software can figure out the time in Nepal. That’s also why
the output from <code>date</code> above has <code>+0545</code> in it.</p>
<h2 id="why-strings-like-pdt-or-cet-are-pretty-meaningless">Why strings like <code>PDT</code> or <code>CET</code> are pretty meaningless</h2>
<p>In the example above, <code>+0545</code> is called a “designator”. It’s a pretty-ish string
describing which <em>part</em> of a timezone a timestamp is in. It’s meant to be used
for outputting timestamps, and is only unambiguous if you already know what
timezone the timestamp was taken in.</p>
<p>Just <em>how</em> ambiguous are these designators? I wrote a <code>tzdump</code> script that
converts TZIF files to JSON. Here’s the top hits:</p>
<div><pre tabindex="0"><code data-lang="bash"><span><span>find -L /usr/share/zoneinfo -type f <span>\
</span></span></span><span><span><span></span>  <span>|</span> xargs -n1 ./tzdump <span>\
</span></span></span><span><span><span></span>  <span>|</span> jq -r <span>&#39;&#34;\(.ID)\t\(.Transitions[].LocalTimeType.Designation)&#34;&#39;</span> <span>\
</span></span></span><span><span><span></span>  <span>|</span> sort <span>|</span> uniq <span>|</span> sort -k <span>2</span> <span>|</span> uniq -f <span>1</span> -c <span>|</span> sort -n <span>|</span> awk <span>&#39;{ print $1 &#34;\t&#34; $3 }&#39;</span> <span>|</span> tail -r
</span></span></code></pre></div><p>The most popular designators are:</p>
<pre tabindex="0"><code>66	CST
58	CDT
56	CET
56	CEST
</code></pre><p>A total of <strong>66 timezones</strong> use <code>CST</code>, either in the past or future. Many
timezones are functionally exact clones of each other – there’s no difference
between <code>America/Phoenix</code> and
<a href="https://en.wikipedia.org/wiki/Creston,_British_Columbia"><code>America/Creston</code></a>,
but they each get their own file – but still. There’s a lot of ambiguity in
there.</p>
<p>In case you’re curious, only 33 designators are unique to a timezone. A lot more
are functionally unique, but I’m too lazy to dedupe logically-equivalent
timezones right now.</p>
<p>As an extra fun bit of trivia, designators are not strictly uppercase/numeric.
<code>ChST</code>, appearing in <code>Pacific/Saipan</code>, stands for Chamorro Standard Time. It’s
the only designator with a lowercase name. <code>CHST</code> is not taken, sadly for those
of us who love bugs.</p>
<h2 id="how-are-timezones-with-dst-represented">How are timezones with DST represented?</h2>
<p>When we looked at Kathmandu, we had this string telling us the Nepalese time
rules:</p>
<pre tabindex="0"><code>&lt;+0545&gt;-5:45
</code></pre><p>Ok, simple enough. But what about a timezone with DST transitions? The syntax
has lots of defaults (DST will be a one-hour jump, it happens at 2am by default,
etc) but <code>Europe/Athens</code> is a good example of one that uses most of the syntax:</p>
<pre tabindex="0"><code>$ cat /usr/share/zoneinfo/Europe/Athens
...
EET-2EEST,M3.5.0/3,M10.5.0/4
</code></pre><p>That syntax means:</p>
<blockquote>
<p>Standard time is called <code>EET</code>, it’s 2 hours ahead of UTC. DST is called <code>EEST</code>
(it’s 3 hours ahead, an implicit default relative to standard time). Start DST
in month <code>3</code> on the last instance of (<code>5</code>) day <code>0</code> (Sunday) in that month, at
3am local (<code>/3</code>). End DST on month <code>10</code> on the last Sunday at 4am local
(<code>5.0/4</code>).</p>
</blockquote>
<p>So yeah, your computer does a bunch of <a href="https://howardhinnant.github.io/date_algorithms.html">kind of
gnarly</a> logic to figure
out what date-and-time a timestamp corresponds to, then figures out whether it’s
inside or outside DST to figure out the current local time. Delightful.</p>
<p>In case you’re curious, the spec says “5” means “last instance of”, and “1”
means “first instance of”. But only weeks “1”, “2”, and “5” are used:</p>
<pre tabindex="0"><code>$ find -L /usr/share/zoneinfo -type f | xargs -n1 ./tzdump | jq -r &#39;if .Rules.DST == null then empty else &#34;\(.ID)\t\(.Rules.DST.Week)&#34; end&#39; | sort -k2 | uniq -f 1 -c | awk &#39;{ print $1 &#34;\t&#34; $3 }&#39;
18	1
89	2
81	5
</code></pre><p>Here’s a fun twist: on my Mac 100% of timezones either don’t have DST at all or
use this nth-instance-of-day-of-month rules to do DST switching. But inside
<code>/var/db/timezone</code> there’s different versions of tzdb. In there is a version
with other kinds of timezones in it:</p>
<pre tabindex="0"><code>$ cat /var/db/timezone/tz/2024a.1.0/zoneinfo/Africa/Casablanca
...
XXX-2&lt;+01&gt;-1,0/0,J365/23
</code></pre><p>That timezone basically means “we are perpetually on daylight savings”, because
the <code>J###</code> syntax means “<code>###</code>-th day of the year, not counting Feb 29 if there
is one” (J stands for “Julian calendar”).</p>
<p>Technically, that timezone also exercises the prefixless (i.e. without <code>M</code> or
<code>J</code>) syntax for indicating days, where <code>###</code> means “<code>###</code>-th day of year,
counting any Feb 29”. But in this case it’s a distinction without a difference.</p>
<p>(Aside: All this stuff comes from POSIX. <a href="https://www.gnu.org/software/libc/manual/html_node/TZ-Variable.html">GNU’s docs about the POSIX <code>TZ</code> env
var</a>, which
TZIF builds on, are the best I know of online for this stuff.)</p>
<p>But this is just the start of the weirdness that is <code>Africa/Casablanca</code>.</p>
<h2 id="africacasablanca-and-asiagaza-follow-the-moon-but-timezones-follow-the-sun"><code>Africa/Casablanca</code> and <code>Asia/Gaza</code> follow the moon, but timezones follow the sun</h2>
<p>The TZIF format supports three possible rules for deciding on your daylight
savings transition day:</p>
<ul>
<li>Rules like “first Tuesday of March”</li>
<li>Rules like “45th day of the year”</li>
<li>Rules like “45th day of the year, Feb 29 doesn’t count”</li>
</ul>
<p>Morocco and Gaza do their daylight savings based on Ramadan. Ramadan is a month
in the Islamic calendar. The Islamic calendar is based on the moon. The lunar
calendar isn’t a clean multiple of the solar calendar; from the Gregorian
perspective, lunar months seem to slowly “rotate” around the year, because
they’re basically on a different modulo. There’s a problem there for our heroes
at the tzdb.</p>
<p>The solution? The dumbest possible one.</p>
<p>A TZIF file ends with the footer syntax we’ve been talking about to this point.
But it <em>starts</em> with a big long list of historical data about a timezone. If a
country ever changes timezone rules, TZIF represents that by encoding the new
rule in the footer, and hard-coding all the old transitions.</p>
<p>But you can also just take these hard-coded transitions and put them into the
future. The hard-coded transitions take precedence over the footer. So the TZIF
folks:</p>
<ol>
<li>Picked a year far enough into the future (2086, as it turns out)</li>
<li>Wrote a script in
<a href="https://github.com/eggert/tz/blob/339e81d1ade620e70ecc78c2b4ec1309a6b80a2f/asia#L3494-L3512">emacs</a>
<a href="https://github.com/eggert/tz/blob/339e81d1ade620e70ecc78c2b4ec1309a6b80a2f/africa#L861-L878">lisp</a>
to calculate Ramadan</li>
<li>Use the output of that script to generate transitions for Morocco and Gaza</li>
</ol>
<p>And that’s why in practice Morocco and Gaza are just hard-coded in the tzdb,
unlike every other timezone.</p>
<p>In case you’re hoping for more fun timezones like this, I’m afraid you’re out of
luck. The others at the bottom of this list, which filters for transitions
beyond 2025, are just synonyms of Casablanca and Gaza.</p>
<pre tabindex="0"><code>$ find -L /var/db/timezone/tz/2024a.1.0/zoneinfo/ -type f | xargs -n1 ./tzdump | jq &#39;select(.Transitions[].TransitionTime &gt; 1735689600) | .ID&#39; -r | uniq -c | sort -n
  26 /var/db/timezone/tz/2024a.1.0/zoneinfo//Africa/Cairo
...
  26 /var/db/timezone/tz/2024a.1.0/zoneinfo//US/Pacific
  26 /var/db/timezone/tz/2024a.1.0/zoneinfo//WET
  26 /var/db/timezone/tz/2024a.1.0/zoneinfo//posixrules
 130 /var/db/timezone/tz/2024a.1.0/zoneinfo//Africa/Casablanca
 130 /var/db/timezone/tz/2024a.1.0/zoneinfo//Africa/El_Aaiun
 184 /var/db/timezone/tz/2024a.1.0/zoneinfo//Asia/Gaza
 184 /var/db/timezone/tz/2024a.1.0/zoneinfo//Asia/Hebron
</code></pre><p>It looks like every other timezone just has 26 transitions beyond 2025, which I
think are just there to make software that doesn’t know about the TZIF footer
transition rules be accurate a few years into the future anyway.</p>
<h2 id="americanuuk-transitions-to-dst-at--1-oclock"><code>America/Nuuk</code> transitions to DST at -1 o’clock</h2>
<p><a href="https://en.wikipedia.org/wiki/Nuuk">Nuuk</a> is in
<a href="https://en.wikipedia.org/wiki/Iceland">Greenland</a>, and is part of the <a href="https://en.wikipedia.org/wiki/Special_territories_of_members_of_the_European_Economic_Area">greater
EU cinematic
universe</a>.</p>
<p>All of Europe (idk whether this is an EU/EEZ/EFTA/CoE thing) syncs up their
daylight savings, except for <a href="https://en.wikipedia.org/wiki/Greenland">Iceland</a>,
which doesn’t do DST at all (<code>Atlantic/Reykjavik</code>, which is technically <a href="https://github.com/eggert/tz/blob/7748036bace8562b9c047f368c8eba5f35e8c4b4/backward#L226">an
alias for
<code>Africa/Abidjan</code></a>,
is basically just UTC; their rule string is just <code>GMT0</code>).</p>
<p>Most Europeans are familiar with three major timezones, which we can refer to as
<code>Europe/Lisbon</code> (western), <code>Europe/Brussels</code> (central), and <code>Europe/Athens</code>
(eastern). They’re each one hour ahead of the other, and so their timezone
transitions look like:</p>
<pre tabindex="0"><code># I&#39;m gonna space these out to highlight the symmetry,
# and also spell out the implicit &#34;/2&#34;

Europe/Lisbon:   WET0WEST ,M3.5.0/1,M10.5.0/2
Europe/Brussels: CET-1CEST,M3.5.0/2,M10.5.0/3
Europe/Athens:   EET-2EEST,M3.5.0/3,M10.5.0/4
</code></pre><p>In other words, Lisbon springs forward at 1am, Brussels at 2am, and Athens at
3am. But those times are <em>local</em>. In reality, they’re all at the same instant.</p>
<p>This makes good sense. It’s good for business that the time difference between
any two spots in Europe is always the same.</p>
<p>Greenland would like to be part of the action. Thing is, Greenland is pretty far
west of continental Europe. Whereas Lisbon’s standard time is UTC, Greenland’s
is 3 hours behind UTC. Here’s their daylight transition rules:</p>
<pre tabindex="0"><code>$ cat /var/db/timezone/tz/2024a.1.0/zoneinfo/America/Nuuk
&lt;-02&gt;2&lt;-01&gt;,M3.5.0/-1,M10.5.0/0
</code></pre><p>Take note of <code>M3.5.0/-1</code>. The first part is the standard European DST start day.
The <code>/-1</code> part? That means that instead of doing DST at like 2am (<code>/2</code>),
Greenland does it at -1 o’clock (<code>/-1</code>). The way the rules file is encoded,
daylight savings for Greenland is meant to happen on Sunday, but in fact happens
at 11pm on the Saturday before. Super weird.</p>
<p>I’m guessing this breaks software, because America/Nuuk and its aliases are one
of those timezones whose transition rules are just entirely ommitted in
<code>/usr/share/zoneinfo</code> on my Mac. They’re only available in other copies of tzdb
in <code>/var/db/timezone</code>.</p>
<h2 id="oh-americasantiago-and-africacairo-transition-at-24-oclock">Oh, <code>America/Santiago</code> and <code>Africa/Cairo</code> transition at 24 o’clock</h2>
<p>Nuuk is the earliest anyone does a transition. Santiago and Cairo are the
latest. They both do transitions at 24 o’clock? Like, the next day?</p>
<pre tabindex="0"><code>America/Santiago: &lt;-04&gt;4&lt;-03&gt;,M9.1.6/24,M4.1.6/24
</code></pre><pre tabindex="0"><code>Africa/Cairo: EET-2EEST,M4.5.5/0,M10.5.4/24
</code></pre><p>I think they’re both encoded like that because of weirdness in how the
governments define the rules. Like <code>M10.5.4/24</code> means “last Thurday of October,
24 o’clock”, which really means “the day after the last Thursday of October”.
But that’s not the same thing as “last Friday of October” if the month ends on
Thursday?</p>
<p>Both of these files are also in Mac’s list of naughty timezones that don’t go in
<code>/usr/share/zoneinfo</code>.</p>
<h2 id="australialord_howe-has-the-weirdest-dst-transition"><code>Australia/Lord_Howe</code> has the weirdest DST transition</h2>
<p>When you do a DST transition, you “spring forward” and “fall back”. <em>Surely</em>
everyone agrees it’s a <em>one-hour</em> jump, right?</p>
<p>Here’s a script to check. What is the time difference between standard and
daylight time in every timezone?</p>
<pre tabindex="0"><code>$ find -L /usr/share/zoneinfo -type f | xargs -n1 ./tzdump | jq &#39;if .Rules.DST == null then &#34;\(.ID)\t0&#34; else &#34;\(.ID)\t\(.Rules.DST.LocalTimeType.UTCOffsetSeconds - .Rules.Std.LocalTimeType.UTCOffsetSeconds)&#34; end&#39; -r | sort -n -k 2 | uniq -c -f 1 | awk &#39;{ print $1 &#34;\t&#34; $3 }&#39;

410	0
2	1800
185	3600
1	7200
</code></pre><p>Hmm. 410 timezones just don’t DST at all. 185 have a 3600-second, i.e. 1-hour,
difference. And then there are the malcontents.</p>
<p>The 7200-second, i.e. 2-hour, jump is <code>Antarctica/Troll</code>. Fitting.</p>
<pre tabindex="0"><code>&lt;+00&gt;0&lt;+02&gt;-2,M3.5.0/1,M10.5.0/3
</code></pre><p>So during the winter (i.e. the northern summer) they use Norway time? But there
are <a href="https://en.wikipedia.org/wiki/Troll_(research_station)">like 6 people over the winter at
Troll</a>? Do these 6 souls
appreciate their contribution to software esoterica? I hope they do. Apparently
they use <a href="https://github.com/eggert/tz/blob/7748036bace8562b9c047f368c8eba5f35e8c4b4/antarctica#L212-L236">like four different times during the
year</a>
down there in practice, but there’s no syntax to express that.</p>
<p>OK but the real question is what’s up with the two 1800 transitions. They’re
synonyms for each other. It’s <code>Australia/Lord_Howe</code>, which has a <strong>powerful</strong>
30-minute DST transition:</p>
<pre tabindex="0"><code>&lt;+1030&gt;-10:30&lt;+11&gt;-11,M10.1.0,M4.1.0
</code></pre><p>10h30m ahead of UTC standard, 11h DST. Love this for them. Running cron jobs on
an hourly basis doesn’t in practice have very weird interactions with DST.
Everywhere else on the planet, every 60 minutes you’re back to the same spot on
the clock.</p>
<p>Except Lord Howe Island. Heroes. On the first Sunday of October, a 60-minute
timegap only puts you halfway around the clock. All your cron jobs are now
staggered relative to the local wall clock.</p>
<p>In case you’re curious, <a href="https://en.wikipedia.org/wiki/Lord_Howe_Island">Lord Howe
Island</a> belongs to Australia. It
has 382 people at the latest census. It’s a bit of a natural paradise, and
apparently to preserve that there’s a cap of 400 tourists at a time.</p>
<p>Probably the most famous aspect of Lord Howe is <a href="https://en.wikipedia.org/wiki/Ball%27s_Pyramid">Ball’s
Pyramid</a>.</p>
<figure>
<div>
<p><img src="https://abstract.properties/balls.png"/></p><figcaption>Ball&#39;s Pyramid Memorial for Stickbugs and Software Engineers who write Timezone-related Code.</figcaption>
</div>
</figure>
<p>It’s an old collapsed volcano. It looks cool. It has some rare <a href="https://en.wikipedia.org/wiki/Ball%27s_Pyramid#Dryococelus_australis">stick
bugs</a>.</p>

<p>Timezones are weird, but finitely so. All they consist of is:</p>
<ul>
<li>An ID, e.g. <code>America/Los_Angeles</code></li>
<li>A set of hard-coded transitions, which range from the past into the future</li>
<li>A set of rules for how future transitions may happen</li>
</ul>
<p>Any given time in a timezone is just:</p>
<ul>
<li>An offset from UTC</li>
<li>With a “designator” time that doesn’t mean much</li>
<li>(This usually isn’t outputted anywhere) Whether the time is considered DST</li>
</ul>
<p>You can always uniquely identify what UTC time someone is referring to whenever
they tell you their timezone + local time + current time designator. The
timezone + designator gives you an offset, and you can apply the offset to the
local time to get UTC.</p>
<p>Like, it’s weird, it’s quirky, but it’s not like all bets are off.</p>
<p>Also:</p>
<ul>
<li>Don’t let people bully you into thinking that just because something is
complicated, it’s impossible.</li>
<li>This is because almost every standard (except ISO8601, whatever) is
just a file, and you can read it. You are smart. You can do it. Embrace
the weirdness of Greenland’s daylight savings. Believe in yourself.</li>
<li>If I were UN secretary general, I would kick out any countries that I deem
insufficiently considerate of Paul Eggert’s time.</li>
</ul>

<p>Honestly, there’s some stuff in zoneinfo that I can’t figure out. Even I have
nerd-sniping limits. Exercises for the reader.</p>
<p>These time zones have <em>hundreds</em> of hard-coded transitions out into the future.
I don’t understand why, it’s not like they all have lunar calendar stuff going
on.</p>
<ul>
<li>Asia/Jerusalem has 780 transitions in the future, out of 901 total</li>
<li>Africa/Cairo has 800 transitions in the future, out of 929 total</li>
<li>America/Nuuk has 800 transitions in the future, out of 889 total</li>
<li>America/Santiago has 800 transitions in the future, out of 931 total</li>
<li>Pacific/Easter has 800 transitions in the future, out of 911 total</li>
<li>Asia/Gaza has 982 transitions in the future, out of 1106 total</li>
</ul>
<p>They all lack a rules footer, but our friend Africa/Casablanca has a mere 132
transitions hard-coded and lacks a rules footer too. What’s up with that?</p>
<hr/>
<p>P.S. If you’re the type of weird to think this stuff is neat: email me.
<a href="mailto:ulysse.carion@ssoready.com">ulysse.carion@ssoready.com</a> ;)</p>

        </div></div>
  </body>
</html>
