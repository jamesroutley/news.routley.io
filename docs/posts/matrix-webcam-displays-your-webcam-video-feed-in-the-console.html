<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/joschuck/matrix-webcam">Original</a>
    <h1>Matrix-webcam displays your webcam video feed in the console</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto"><a href="https://github.com/joschuck/matrix-webcam/blob/main/LICENSE"><img src="https://camo.githubusercontent.com/9bf0297c48f151e7746e40ed4f4e3a4bc99d42109c635a38cdf47ce1ee9b130b/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f6a6f73636875636b2f6d61747269782d77656263616d2e737667" alt="License MIT" data-canonical-src="https://img.shields.io/github/license/joschuck/matrix-webcam.svg"/></a>
<a href="https://github.com/joschuck/matrix-webcam/issues"><img src="https://camo.githubusercontent.com/9a9b651090e02ce598166095e368edac13aca863313e91316c777f781525c31c/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6973737565732f6a6f73636875636b2f6d61747269782d77656263616d2e737667" alt="issues" data-canonical-src="https://img.shields.io/github/issues/joschuck/matrix-webcam.svg"/></a>
<a href="https://github.com/psf/black"><img src="https://camo.githubusercontent.com/d91ed7ac7abbd5a6102cbe988dd8e9ac21bde0a73d97be7603b891ad08ce3479/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f636f64652532307374796c652d626c61636b2d3030303030302e737667" alt="Code style: black" data-canonical-src="https://img.shields.io/badge/code%20style-black-000000.svg"/></a>
<a href="http://mypy-lang.org/" rel="nofollow"><img src="https://camo.githubusercontent.com/59eab954a267c6e9ff1d80e8055de43a0ad771f5e1f3779aef99d111f20bee40/687474703a2f2f7777772e6d7970792d6c616e672e6f72672f7374617469632f6d7970795f62616467652e737667" alt="Checked with mypy" data-canonical-src="http://www.mypy-lang.org/static/mypy_badge.svg"/></a></p>
<p dir="auto">This package displays your webcam video feed in the console.</p>
<p dir="auto">Take your next video conference from within the matrix!</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://raw.githubusercontent.com/joschuck/matrix-webcam/main/doc/matrix-webcam02.gif"><img src="https://raw.githubusercontent.com/joschuck/matrix-webcam/main/doc/matrix-webcam02.gif" alt="matrix-webcam demo" data-animated-image=""/></a></p>
<h2 dir="auto"><a id="user-content-running-it" aria-hidden="true" href="#running-it"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Running it</h2>
<p dir="auto">Make sure you have Python and pip installed. Installation using pip:</p>
<div data-snippet-clipboard-copy-content="$ pip install matrix-webcam  # make sure it&#39;s in your PATH for it to run, alternatively use sudo
$ matrix-webcam"><pre><code>$ pip install matrix-webcam  # make sure it&#39;s in your PATH for it to run, alternatively use sudo
$ matrix-webcam
</code></pre></div>
<p dir="auto">Installing and running it from source:</p>
<div data-snippet-clipboard-copy-content="$ git clone https://github.com/joschuck/matrix-webcam.git
$ cd matrix-webcam
$ python -m pip install .
$ matrix-webcam"><pre><code>$ git clone https://github.com/joschuck/matrix-webcam.git
$ cd matrix-webcam
$ python -m pip install .
$ matrix-webcam
</code></pre></div>
<p dir="auto">Tip: Shrink your font size, it will look even more hacky</p>
<div data-snippet-clipboard-copy-content="usage: matrix-webcam [-h] [-l LETTERS] [-p PROBABILITY] [-u UPDATES_PER_SECOND]

options:
-h, --help            show this help message and exit
-d DEVICE, --device DEVICE
                    Sets the index of the webcam if you have more than one webcam.
-l LETTERS, --letters LETTERS
                    The number of letters produced per update.
-p PROBABILITY, --probability PROBABILITY
                    1/p probability of a dispense point deactivating each tick.
-u UPDATES_PER_SECOND, --updates-per-second UPDATES_PER_SECOND
                    The number of updates to perform per second."><pre><code>usage: matrix-webcam [-h] [-l LETTERS] [-p PROBABILITY] [-u UPDATES_PER_SECOND]

options:
-h, --help            show this help message and exit
-d DEVICE, --device DEVICE
                    Sets the index of the webcam if you have more than one webcam.
-l LETTERS, --letters LETTERS
                    The number of letters produced per update.
-p PROBABILITY, --probability PROBABILITY
                    1/p probability of a dispense point deactivating each tick.
-u UPDATES_PER_SECOND, --updates-per-second UPDATES_PER_SECOND
                    The number of updates to perform per second.
</code></pre></div>
<h2 dir="auto"><a id="user-content-can-i-use-this-for-teamszoomskype-etc" aria-hidden="true" href="#can-i-use-this-for-teamszoomskype-etc"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Can I use this for Teams/Zoom/Skype etc.?</h2>
<h3 dir="auto"><a id="user-content-for-windowsmac-users" aria-hidden="true" href="#for-windowsmac-users"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>For Windows/Mac Users</h3>
<p dir="auto">Yes! You can for example use <a href="https://obsproject.com/" rel="nofollow">OBS Studio</a> ~~ together with the <a href="https://github.com/CatxFish/obs-virtual-cam">Virtual Cam plugin</a> ~~ . Notice: obs-studio have officially provided virtual camera feature since version 26.0.0 , you can use it without installing this plugin.
Then all you need to do is select the virtual webcam in Teams/Zoom/Skype.</p>
<h3 dir="auto"><a id="user-content-for-linux-users" aria-hidden="true" href="#for-linux-users"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>For Linux Users</h3>
<p dir="auto">First we need to make sure you have the <a href="https://github.com/umlaeute/v4l2loopback">v4l2loopback kernel module</a> to create V4L2 loopback devices setup.
This module allows you to create &#34;virtual video devices&#34;.
Normal (v4l2) applications will read these devices as if they were ordinary video devices, but the video will not be read from e.g. a capture card but instead it is generated by another application.
It should be available in your distro&#39;s package manager.
Under Ubuntu install it using:</p>
<div data-snippet-clipboard-copy-content="$ sudo apt install -y v4l2loopback-dkms v4l2loopback-utils"><pre><code>$ sudo apt install -y v4l2loopback-dkms v4l2loopback-utils
</code></pre></div>
<p dir="auto">Now we need to create a virtual v4l2 device (exclusive_caps=1 and YUV2 conversion is required by Chromium for the device to be recognized):</p>
<div data-snippet-clipboard-copy-content="$ sudo modprobe v4l2loopback devices=1 video_nr=42 card_label=&#34;Virtual Camera&#34; exclusive_caps=1 max_buffers=2"><pre><code>$ sudo modprobe v4l2loopback devices=1 video_nr=42 card_label=&#34;Virtual Camera&#34; exclusive_caps=1 max_buffers=2
</code></pre></div>
<p dir="auto">Now we need to find the <code>xid</code> if the terminal window we will launch <code>matrix-webcam</code> in using</p>
<div data-snippet-clipboard-copy-content="$ xdotool getactivewindow 
79869947  # sample output"><pre><code>$ xdotool getactivewindow 
79869947  # sample output
</code></pre></div>
<p dir="auto">Optionally resize the terminal window to something reasonable from another terminal and then launch matrix webcam</p>
<div data-snippet-clipboard-copy-content="$ wmctrl -i -r 79869947 -e 0,300,300,1280,720  # in another terminal (2)"><pre><code>$ wmctrl -i -r 79869947 -e 0,300,300,1280,720  # in another terminal (2)
</code></pre></div>
<p dir="auto">Now launch matrix-webcam</p>
<div data-snippet-clipboard-copy-content="$ matrix-webcam  # in the terminal that was just resized"><pre><code>$ matrix-webcam  # in the terminal that was just resized
</code></pre></div>
<p dir="auto">Now launch the virtual device in terminal (2) - you need <a href="https://gstreamer.freedesktop.org/documentation/installing/on-linux.html?gi-language=c" rel="nofollow">Gstreamer</a> for this, check the link on how to install it</p>
<div data-snippet-clipboard-copy-content="$ gst-launch-1.0 ximagesrc xid=79869947 ! video/x-raw,framerate=30/1 ! videoconvert ! video/x-raw,format=YUY2 ! v4l2sink device=/dev/video42"><pre><code>$ gst-launch-1.0 ximagesrc xid=79869947 ! video/x-raw,framerate=30/1 ! videoconvert ! video/x-raw,format=YUY2 ! v4l2sink device=/dev/video42
</code></pre></div>
<p dir="auto">That&#39;s it, your webcam should show up in Chromium, Teams, etc.!</p>
<h2 dir="auto"><a id="user-content-development" aria-hidden="true" href="#development"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Development</h2>
<p dir="auto">I&#39;d recommend creating a new virtual environment (if you are under Ubuntu install it using <code>sudo apt install python3-venv</code> using</p>
<div data-snippet-clipboard-copy-content="$ python3 -m venv venv/
$ source venv/bin/activate"><pre><code>$ python3 -m venv venv/
$ source venv/bin/activate
</code></pre></div>
<p dir="auto">Then install the dependencies using:</p>
<div data-snippet-clipboard-copy-content="$ pip install -e .[dev,deploy]"><pre><code>$ pip install -e .[dev,deploy]
</code></pre></div>
<p dir="auto">Setup pre-commit, too:</p>

<h3 dir="auto"><a id="user-content-todo" aria-hidden="true" href="#todo"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>TODO</h3>
<ul>
<li> Add Virtual webcam documentation for Linux/Gstreamer</li>
<li> add webcam selection</li>
<li> Move to opencv-python-headless</li>
<li> add tests</li>
</ul>
<h2 dir="auto"><a id="user-content-license" aria-hidden="true" href="#license"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h2>
<p dir="auto">This project is licensed under the MIT License (see the <code>LICENSE</code> file for details).</p>
</article>
          </div></div>
  </body>
</html>
