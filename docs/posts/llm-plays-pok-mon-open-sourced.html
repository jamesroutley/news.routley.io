<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/adenta/fire_red_agent">Original</a>
    <h1>Show HN: LLM plays PokÃ©mon (open sourced)</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">

<p dir="auto">This is my attempt at getting a large language model to play PokÃ©mon FireRed autonomously. My bot has rudementery capabilities to play the game, explore, battle, and respond to game events.</p>
<p dir="auto">To me, this is the future of TV. While building the bot, I felt like I was producing television more than I was programming a computer. Ultimately, I ran into some technical hurdles around programmatic input control, which led me to pause development.</p>
<p dir="auto"><a href="https://f005.backblazeb2.com/file/fire-red-agent/FIRE_RED_PROMO.mp4" rel="nofollow">Watch the demo video.</a>
<a href="https://f005.backblazeb2.com/file/fire-red-agent/HD+project+walkthrough+(taylors+version).mp4" rel="nofollow">Watch the technical deep dive.</a></p>

<ol dir="auto">
<li>Emulator Integration</li>
</ol>
<p dir="auto">I used <a href="https://www.retroarch.com" rel="nofollow">RetroArch</a> to run PokÃ©mon FireRed. I struggled with sending inputs programmatically. RetroArch has a UDP-based input system (<a href="https://docs.libretro.com/library/remote_retropad/" rel="nofollow">RetroPad</a>), but I couldn&#39;t get it to work reliably.</p>
<p dir="auto">Instead, I resorted to using <a href="https://ss64.com/mac/osascript.html" rel="nofollow">OSA Script (AppleScript)</a> to send keyboard events to the emulator, which meant the game had to be in focus. This was a huge limitation because it took over my entire computer, making background work impossible.</p>
<ol start="2" dir="auto">
<li>Game Memory Management</li>
</ol>
<p dir="auto">I stored game state in a database, treating it like a diary of the AIâ€™s experiences. The system recorded actions the AI attempted, what worked, what didnâ€™t, and adjusted accordingly.</p>
<p dir="auto">There were four different types of memories, and the AI pulled the most recent 250 to maintain context. If an action failedâ€”like trying to walk somewhere and hitting an obstacleâ€”the AI would remember and avoid making the same mistake.</p>
<ol start="3" dir="auto">
<li>Navigation &amp; Pathfinding</li>
</ol>
<p dir="auto">The AI needed to figure out where to go in the game world. I extracted map data by reading game memory from RetroArch. I then used a pathfinding algorithm to determine the best route. The AI only considered valid movement options based on tiles and available paths. If stuck, it defaulted to trying adjacent moves (e.g., &#34;walk south&#34;, &#34;walk east&#34;, etc.).</p>
<ol start="4" dir="auto">
<li>Game Text Parsing</li>
</ol>
<p dir="auto">To understand the game, the AI needed to read in-game text. Since I wasnâ€™t using direct memory extraction for text (as advised by <a href="https://pret.github.io" rel="nofollow">PRET</a>), I took screenshots at key points and processed them with OCR.</p>
<p dir="auto">This allowed the AI to understand NPC conversations, menu prompts, and other critical game events. This was super important, as it guided the LLM to know what to do next.</p>
<ol start="5" dir="auto">
<li>LLM Integration</li>
</ol>
<p dir="auto">I used OpenAIâ€™s GPT-4o to process all the gathered information and make decisions.System prompts guided the AI to avoid repeated actions (e.g., trying to pick Charmander before meeting Professor Oak multiple times). The model received structured data about current location, possible actions, game memories, and navigation options. I experimented with frequency and presence penalties to encourage varied behavior and prevent getting stuck in loops.</p>
<ol start="6" dir="auto">
<li>Battle Handling</li>
</ol>
<p dir="auto">The battle handler was quite naive. All it was doing was pressing A. if the battle lasted longer than a minute, we began sending some random inputs to get out of the battle. This was an area I wanted to improve, but my priority was getting the AI to navigate the world first.</p>
<ol start="7" dir="auto">
<li>Interaction &amp; Conversation Handling</li>
</ol>
<p dir="auto">When talking to NPCs, the AI needed to determine if it should continue the conversation or move on. The conversation handler took screenshots, extracted text, and checked whether dialogue was still ongoing.</p>
<p dir="auto">If the AI detected text, it continued pressing A. If no new text appeared, it moved on to the next part of the script.</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Important Files/Directories</h2><a id="user-content-important-filesdirectories" aria-label="Permalink: Important Files/Directories" href="#important-filesdirectories"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><strong><a href="https://github.com/adenta/fire_red_agent/tree/main/app/reasonings">Game Reasonings</a></strong>: Ruby-based type definitions (similar to Pydantic in Python)</li>
<li><strong><a href="https://github.com/adenta/fire_red_agent/tree/main/app/services/retroarch">Emulator Interaction</a></strong>: Code for interfacing with RetroArch</li>
<li><strong><a href="https://github.com/adenta/fire_red_agent/tree/main/app/services/intelligence">LLM Integration</a></strong>: API calls and prompt handling for GPT-4o</li>
<li><strong><a href="https://github.com/adenta/fire_red_agent/tree/main/app/services/game">Memory Reading</a></strong>: Tools for reading and parsing emulator RAM</li>
<li><strong><a href="https://github.com/adenta/fire_red_agent/blob/main/app/services/game/memory_maker.rb">State Persistence</a></strong>: Long-term memory management for the AI agent</li>
</ul>
<div dir="auto"><h2 tabindex="-1" dir="auto">Challenges &amp; Why I Paused Development</h2><a id="user-content-challenges--why-i-paused-development" aria-label="Permalink: Challenges &amp; Why I Paused Development" href="#challenges--why-i-paused-development"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The biggest hurdle was sending inputs to the emulator.</p>
<p dir="auto">RetroArchâ€™s UDP input (RetroPad) didnâ€™t work for me.</p>
<p dir="auto">Keyboard-based input (OSA Script) required focus, making automation impractical.</p>
<p dir="auto">Python-based solutions (like PiBoy) exist, but I prefer Ruby and struggled with existing Python tools freezing up.</p>

<p dir="auto">This project was both a nightmare and a ton of fun. As LLMs get better this is only going to get easier. I believe that Claude Plays Pokemon isn&#39;t doing any of the memory parsing I spent a ton of time, they are just streaming the memory directly to Claude 3.7 and it is figuring it out ðŸ¤¯. If you find this work interesting, feel free to fork it, modify it, and build something even better!</p>

<p dir="auto">Griffin R. â€“ Huge help on reading game memory.</p>
<p dir="auto"><a href="https://www.linkedin.com/in/graham-seamans-374baa61/" rel="nofollow">Graham Seamens</a> &amp; <a href="https://www.linkedin.com/in/p4r7h/" rel="nofollow">Parth Patil</a> â€“ Assistance with AI logic.</p>
<p dir="auto"><a href="https://pret.github.io" rel="nofollow">The PokÃ©mon ROM hacking/decompilation community</a> â€“ Without them, this wouldnâ€™t have been possible.</p>
<p dir="auto"><a href="https://github.com/adenta/fire_red_agent/blob/main/openpipe.ai">OpenPipe</a> - LLM observability.</p>
<p dir="auto">Contact</p>
<p dir="auto">You can find me on <a href="https://github.com/adenta/fire_red_agent/blob/main/linkedin.com/in/adenta">LinkedIn</a> and <a href="https://news.ycombinator.com/user?id=adenta" rel="nofollow">Hacker News</a>.</p>
</article></div></div>
  </body>
</html>
