<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://shakespeare.folger.edu/shakespeares-works/">Original</a>
    <h1>Shakespeare’s Plays, Sonnets, and Poems</h1>
    
    <div id="readability-page-1" class="page"><div role="main"><article><header><section><span><a href="https://thevaluable.dev/tags/vim/">#Vim</a></span></section></header><section><picture>
<source srcset="https://thevaluable.dev/images/2022/vim_netrw/exploring.webp" type="image/webp"/><img width="780" height="520" src="https://thevaluable.dev/images/2022/vim_netrw/exploring.jpg" alt="Let&#39;s go exploring in Vim with netrw"/></picture><p>When I began to use Vim, everybody was using <a href="https://github.com/preservim/nerdtree" target="_blank" rel="noopener">NERDTree</a>. So I followed: to navigate through my filesystem, NERDTree would be the answer for many years to come.</p><p>Nowadays, I mostly use a <a href="https://github.com/junegunn/fzf.vim" target="_blank" rel="noopener">fuzzy finder</a> to find the files I want, but a file explorer can still be useful in some situations:</p><ol><li>When I look at a new codebase. It helps to have a general overview of the filesystem, to understand the structure of the project.</li><li>When I need to create, update or delete files and directories.</li></ol><p>The more I use Vim, the more I try to get rid of my plugins, to use Vim’s native functionalities as much as possible. It’s easier than keeping track of 39093209 plugins introducing breaking changes too often. That’s why my interest for netrw grew overtime.</p><p>What’s netrw? It’s the file explorer shipped with most Vim packages. It’s still a Vim plugin, but if you didn’t compile Vim yourself, it’s likely that you have it, too.</p><p>So we’ll dive in netrw in this article. More specifically, we’ll see:</p><ul><li>Different ways to open netrw: in netrw’s window, in a new window, or in a “project drawer”.</li><li>How to browse through your files and directories.</li><li>How to change netrw’s display, and filter your filetree.</li><li>How to mark files and directories, and perform some actions on them.</li><li>How to manage files and directory: create, open, rename, and delete.</li><li>How to open files with external programs.</li><li>How to bookmark specific directories.</li><li>How to explore filetrees on remote servers from your local, comfy Vim.</li></ul><p>I assume here that you’re somehow proficient with Vim. If you don’t understand what’s happening in this article, you can look at my <a href="https://thevaluable.dev/vim-commands-beginner/">series of articles to learn Vim</a>. Also:</p><p>Are you ready to look at a different way of browsing your precious files? Let’s go, then.</p><h2 id="basics">Basics</h2><p>You can do many things with netrw, so let’s look first at the very basics. First, for netrw to work, you need to set these options as follows:</p><div><pre><code data-lang="vim"><span>:</span><span>set</span> <span>nocp</span><span>
</span><span></span><span>:</span><span>filetype</span> <span>plugin</span> <span>on</span><span>
</span></code></pre></div><p>If you use Neovim, the options above are already set correctly.</p><p>If you want to disable netrw and never speak about it again, you can set these two variables:</p><div><pre><code data-lang="vim"><span>:</span><span>let</span> <span>g</span>:<span>loaded_netrw</span>       <span>=</span> <span>0</span><span>
</span><span></span><span>:</span><span>let</span> <span>g</span>:<span>loaded_netrwPlugin</span> <span>=</span> <span>0</span><span>
</span></code></pre></div><p>Useful if you want to use another file explorer, like NERDtree or similar.</p><p>Also, if you want to read the help for a specific keystroke inside a netrw buffer, you can run <code>:help netrw-&lt;keystroke&gt;</code>. For example: <code>:help netrw-%</code>. It also works for Ex commands; for example, <code>:help netrw-:Sexplore</code></p><p>I encourage you to read the help if some keystrokes don’t work as intended. One of netrw’s big strength is its flexibility: you can customize it as you see fit, most of the time.</p><h2 id="opening-netrw">Opening netrw</h2><p>Let’s first see how we can open our file explorer.</p><h3 id="opening-in-the-current-window">Opening In the Current Window</h3><p>To open Vim directly in a netrw buffer, simply give a directory path as argument when you run <code>vim</code> in your terminal. For example:</p><p>The last slash <code>/</code> is not mandatory for opening local directories, but it is for remote ones. It’s also mandatory when you try to fetch a URL. To avoid confusion, I always add it.</p><p>Inside Vim, you can also use the <code>:edit</code> command followed by a directory name. For example, to open the directory of the file open in your current buffer, you can run:</p><p>The netrw buffer would then open in the current window, like any other buffer.</p><p>You can also use the command <code>:Explore &lt;dir&gt;</code> to open the directory <code>&lt;dir&gt;</code> in the current window. If you don’t give a <code>&lt;dir&gt;</code>, you’ll open the current file’s directory. This command would also open a split window if these two conditions are met:</p><ol><li>If the option “hidden” is not set.</li><li>If you modified the current buffer, but you didn’t save it.</li></ol><h3 id="opening-in-a-split-window">Opening In a Split Window</h3><p>If you don’t want to open a netrw buffer in your current window, you can also summon it in a split window:</p><table><tbody><tr><th>Command</th><th>Description</th></tr><tr><td><code>:&lt;size&gt;Sexplore &lt;dir&gt;</code></td><td>Create a horizontal split window above the current window, of size <code>&lt;size&gt;</code>, and open the <code>&lt;dir&gt;</code> in a netrw buffer.</td></tr><tr><td><code>:&lt;size&gt;Hexplore &lt;dir&gt;</code></td><td>Create a horizontal split window below the current window, of size <code>&lt;size&gt;</code>, and open the <code>&lt;dir&gt;</code> in a netrw buffer.</td></tr><tr><td><code>:&lt;size&gt;Vexplore &lt;dir&gt;</code></td><td>Create a vertical split window on the left of the current window, of size <code>&lt;size&gt;</code>, and open the <code>&lt;dir&gt;</code> in a netrw buffer.</td></tr><tr><td><code>:&lt;size&gt;Vexplore! &lt;dir&gt;</code></td><td>Create a vertical split window on the right of the current window, of size <code>&lt;size&gt;</code>, and open the <code>&lt;dir&gt;</code> in a netrw buffer.</td></tr><tr><td><code>:Texplore &lt;dir&gt;</code></td><td>Open a window and a netrw buffer (browsing <code>&lt;dir&gt;</code>) in a new tab.</td></tr></tbody></table><p>If you don’t give any directory <code>&lt;dir&gt;</code> for the commands above, netrw will open the current file’s directory.</p><p>As you can see, you can specify the size of the window you want to open. For example, <code>:20Vex</code> will open netrw in a new window on the right, with a size of 20. If you don’t specify anything, the window will take half the current window. It’s exactly the same behavior as regular Vim splits.</p><p>If you want to open your netrw windows with a fixed size, you can set the global option <code>g:netrw_winsize</code>. For example:</p><p>Additionally, after opening a new file buffer using netrw, you can switch back and forth between netrw and the file buffer with the command <code>:Rexplore</code>.</p><p>Finally, if you want to open Vim’s current working directory (the one displayed when you run <code>:pwd</code>), you can use a simple user command:</p><div><pre><code data-lang="vim"><span>command</span><span>!</span> <span>Oexplore</span> <span>exe</span> <span>&#39;Explore&#39;</span> <span>getcwd</span><span>()</span><span>
</span></code></pre></div><p>If you want to know more about Vim user commands, I covered that in <a href="https://thevaluable.dev/vim-expert/" target="_blank" rel="noopener">one of my article ;to learn Vim from the ground up</a>.</p><div><p><i></i>Vim help</p><p><code>:help netrw-explore</code></p></div><h3 id="opening-a-project-drawer">Opening a Project Drawer</h3><p>Window splitting in Vim is a great feature. It’s useful to copy and paste from one buffer to another, comparing two files, or… opening netrw.</p><p>But when you compare the behavior of netrw to other “project drawer” from other editors, it might seem odd that the file selected opens in the file explorer’s window. In most editors, this “project drawer” is a special, independent, and smaller window, often opened on the left side. Any file you’d open in there would then pop up in a new window, or in a new tab.</p><p>The following commands try to replicate this behavior:</p><table><tbody><tr><th>Command</th><th>Description</th></tr><tr><td><code>:&lt;size&gt;Lexplore &lt;dir&gt;</code></td><td>Toggle a vertical netrw window of size <code>&lt;size&gt;</code>. Add a bang <code>!</code> to open it on the right end side.</td></tr></tbody></table><p>This command has some peculiar qualities:</p><ul><li>The window takes the full height of Vim, even if you have other horizontal split windows open.</li><li>When you try to open a file, a buffer will be created in the window you called netrw from, not in the window where the netrw’s buffer is.</li></ul><p>In short, it behaves more like these “project drawers” I’ve mentioned above. But even if it looks tempting to replicate what you might already know from other editor, I would recommend you not to use this command.</p><p>Vim has a specific window splitting system. The new window opened by <code>:Lexplore</code> is different, and make things a bit more confusing. For example, if you have already multiple split windows, in what window should the file you’ve selected be displayed? The one you come from? What was it? Or should it be the closest one to the netrw window?</p><p>Additionally, by trying to make this window special, it introduces some weird bugs, at least On My Machine™. For example, when moving from the netrw window to another window with another buffer, the netrw buffer would suddenly open there too, inexplicably.</p><p>Another nasty side effect: after running <code>:Lexplore</code>, any file you’ll then try to open with netrw, whether you used <code>:Lexplore</code> or not, will always open in the last window you came from, not in the netrw window. Internally, <code>:Lexplore</code> set the global option <code>g:netrw_chgwin</code> to the window you come from, <em>silently</em>.</p><p>The mighty Drew Neil speaks about all of these inconveniences and more in one of his article, <a href="http://vimcasts.org/blog/2013/01/oil-and-vinegar-split-windows-and-project-drawer/" target="_blank" rel="noopener">Oil and Vinegar - split window and the project drawer</a>.</p><p>If you really want to open your file in another window, you can use one of the following keystroke instead of relying on <code>:Lexplore</code>:</p><table><tbody><tr><th>Keystroke</th><th>Description</th></tr><tr><td><code>P</code></td><td>Open the file under the cursor in the previously accessed window.</td></tr><tr><td><code>&lt;count&gt;C</code></td><td>Open the file in the window with ID <code>&lt;count&gt;</code>. Open in the current window if no <code>&lt;count&gt;</code> specified.</td></tr></tbody></table><p>You can also run a couple of Ex commands:</p><table><tbody><tr><th>Ex command</th><th>Description</th></tr><tr><td><code>:NetrwC</code></td><td>Set <code>g:netrw_chgwin</code> to the current window.</td></tr><tr><td><code>:NetrwC win#&lt;number&gt;</code></td><td>Set <code>g:netrw_chgwin</code> to the window number <code>&lt;number&gt;</code>.</td></tr></tbody></table><p>The easiest way to open your file in the window you come from is to use <code>P</code>. You can also use <code>2C</code> if you have only two window open, and you’ve opened netrw’s window last.</p><p>Finally, to reset the global variable <code>g:netrw_chgwin</code>, you can run <code>let g:netrw_chgwin=-1</code>.</p><div><p><i></i>Vim help</p><div><ul><li><code>:help netrw-P</code></li><li><code>:help netrw-C</code></li></ul></div></div><h2 id="browsing">Browsing</h2><p>Let’s see now how we can effectively browse in our filesystem with netrw.</p><h3 id="basics-1">Basics</h3><p>Here are the basic keystrokes we can use to browse our filesystem:</p><table><tbody><tr><th>Keystroke</th><th>Description</th></tr><tr><td><code>ENTER</code></td><td>Open a buffer with the file (or directory) under the cursor in netrw’s window.</td></tr><tr><td><code>o</code></td><td><code>O</code>pen the file (or directory) under the cursor in a new horizontally split window.</td></tr><tr><td><code>v</code></td><td>Open the file (or directory) under the cursor in a new <code>v</code>ertically split window.</td></tr><tr><td><code>t</code></td><td>Open the file (or directory) under the cursor in a new <code>t</code>ab.</td></tr><tr><td><code>-</code></td><td>Go up one directory level.</td></tr><tr><td><code>P</code></td><td>Open the file in the <code>p</code>reviously focused window.</td></tr><tr><td><code>p</code></td><td>Open the file in the <code>p</code>review window.</td></tr></tbody></table><h3 id="managing-the-display">Managing the Display</h3><p>Here are some useful NORMAL mode keystrokes to manage the display of your files and directories. You can make some of them global by setting the corresponding global variable.</p><table><tbody><tr><th>Keystroke</th><th>Description</th><th>Global variable</th><th>Example</th></tr><tr><td><code>CTRL-l</code></td><td>Refresh the directory <code>l</code>isting.</td><td><ul><li></li></ul></td><td><ul><li></li></ul></td></tr><tr><td><code>i</code></td><td>Cycle through different listing display styles: “thin”, “long”, “wide”, and “tree”.</td><td><code>g:netrw_liststyle</code></td><td><code>let g:netrw_liststyle=0</code> (0 for “thin”, 1 for “long”, 2 for “wide”, 3 for “tree”).</td></tr><tr><td><code>I</code></td><td>Toggle the banner on top.</td><td><code>g:netrw_banner</code></td><td><code>let g:netrw_banner=0</code></td></tr><tr><td><code>s</code></td><td>Switch sorting between name, time, and size.</td><td><ul><li></li></ul></td><td><ul><li></li></ul></td></tr><tr><td><code>r</code></td><td>Sort in <code>r</code>everse order.</td><td><ul><li></li></ul></td><td><ul><li></li></ul></td></tr><tr><td><code>qf</code></td><td>Display file’s size and timestamp of last modification.</td><td><ul><li></li></ul></td><td><ul><li></li></ul></td></tr></tbody></table><h3 id="filtering-the-display">Filtering the Display</h3><p>What about keeping only what we need in our netrw window?</p><table><tbody><tr><th>Keystroke</th><th>Description</th></tr><tr><td><code>gh</code></td><td>Toggle showing or hiding dotfiles.</td></tr><tr><td><code>a</code></td><td>Cycle through three hiding modes determined by a regex.</td></tr></tbody></table><p>If you want something more elaborate than <code>gh</code>, the keystroke <code>a</code> is here for you. It can hide or show files and directories using a regex; this regex is the value of the global variable <code>g:netrw_list_hide</code>.</p><p>Hitting <code>a</code> will cycle through three different display:</p><ol><li>Display everything.</li><li>Hide the files matching the regex.</li><li>Show only the files matching the regex.</li></ol><p>For example, to hide all JPG and PDF images, you can run:</p><div><pre><code data-lang="vim"><span>:</span><span>let</span> <span>g</span>:<span>netrw_list_hide</span><span>=</span><span>&#34;\.pdf$,\.jpg$&#34;</span><span>
</span></code></pre></div><p>It’s also possible to hide every file specified in the <code>.gitignore</code> file, by adding the return of the function <code>netrw_gitignore#Hide()</code> to the hide list.</p><p>For example, to hide all PDF files, MD files, and files specified in <code>.gitignore</code>:</p><div><pre><code data-lang="vim"><span>:</span><span>let</span> <span>g</span>:<span>netrw_list_hide</span><span>=</span><span>&#34;\.pdf$,\.jpg$,&#34;</span>.<span>netrw_gitignore</span>#<span>Hide</span><span>()</span><span>
</span></code></pre></div><p>Last important thing: all marked files are considered part of the hide list. We’ll speak about marked files just below in this article.</p><h3 id="listing-the-browsing-history">Listing the Browsing History</h3><p>The browsing history is updated when you… browse in a netrw buffer. What a surprise!</p><p>You can move through the history of directories visited using these keystrokes:</p><table><tbody><tr><th>Keystroke</th><th>Description</th></tr><tr><td><code>u</code></td><td>Go to the preview directory.</td></tr><tr><td><code>U</code></td><td>Go to the next directory.</td></tr></tbody></table><p>You can control the count of history’s entries by setting the global variable <code>g:netrw_dirhistmax</code>. The default is 10.</p><p>By default, netrw will write its history in the file <code>.netrwhist</code>, in the first directory of the “runtimepath”. If you want to change this directory, you can set a value to the variable <code>g:netrw_home</code>.</p><h2 id="marking-files-and-directories">Marking Files And Directories</h2><p>We saw that marked files are automatically part of the hide list when hitting the keystroke <code>a</code> in a netrw window. But what are these marked files?</p><p>They’re simply files you’ve marked using specific marking keystrokes. Many netrw keystrokes and commands will act on the files marked.</p><p>These marked files end up in two different lists:</p><ol><li>In a global marked file list. There’s only one marked file list available.</li><li>In a local buffer marked file list. Each directory has one, so each directory has its own list of marked files.</li></ol><p>So, how to mark (or un-mark) files? Here are some keystrokes to do so manually:</p><table><tbody><tr><th>Keystroke</th><th>Description</th></tr><tr><td><code>mf</code></td><td>Toggle the marking of the file or directory under the cursor.</td></tr><tr><td><code>mF</code></td><td>Un-mark all the marked files in the current directory.</td></tr><tr><td><code>mu</code></td><td>Un-mark all the marked files in every directory.</td></tr><tr><td><code>mr</code></td><td>Open a prompt inviting you to enter a regex, and mark all the files matching it.</td></tr></tbody></table><p>You can also use the following command:</p><table><tbody><tr><th>Command</th><th>Description</th></tr><tr><td><code>:MF &lt;pattern&gt;</code></td><td>Mark a list of files depending on the pattern <code>&lt;pattern&gt;</code>.</td></tr></tbody></table><p>Notice that these regexes accept shell-style globs.</p><p>You can also mark the files which are already in another Vim list:</p><table><tbody><tr><th>Keystroke</th><th>Description</th></tr><tr><td><code>qL</code></td><td>Mark all the files part of the <code>l</code>ocation list.</td></tr><tr><td><code>qF</code></td><td>Mark all the files part of the quick<code>f</code>ix list.</td></tr><tr><td><code>mA</code></td><td>Mark all the files part of the <code>a</code>rgument list.</td></tr><tr><td><code>ma</code></td><td>Move marked files to the <code>a</code>rgument list.</td></tr><tr><td><code>cb</code></td><td>Move marked files to the <code>b</code>uffer list.</td></tr><tr><td><code>cB</code></td><td>Mark all the files part of the <code>b</code>uffer list.</td></tr></tbody></table><p>Weirdly enough, there’s no keystroke available to display the list of all marked files. But you can run the following command to do so:</p><div><pre><code data-lang="vim"><span>:</span><span>echo</span> <span>netrw</span>#<span>Expose</span><span>(</span><span>&#34;netrwmarkfilelist&#34;</span><span>)</span><span>
</span></code></pre></div><p>Even better: you can create a user command you can then map to a keystroke, if you want to. If you wonder what’s a user command, I’ve covered that in <a href="https://thevaluable.dev/vim-expert/">this article</a>.</p><p>Finally, here are some interesting keystrokes to act directly on the marked files:</p><table><tbody><tr><th>Keystroke</th><th>Description</th></tr><tr><td><code>mv</code></td><td>Prompt the user to enter a Vimscript command operating on all marked files, one at a time. Use <code>%</code> as filename placeholder.</td></tr><tr><td><code>mx</code></td><td>Prompt the user to enter a shell command operating on all marked files, one at a time. Use <code>%</code> as filename placeholder.</td></tr><tr><td><code>mX</code></td><td>Apply a shell command on every file at once.</td></tr><tr><td><code>mz</code></td><td>Compress (or uncompress) marked files.</td></tr><tr><td><code>mg</code></td><td>Apply Vimgrep to the marked files.</td></tr><tr><td><code>ms</code></td><td>Source all marked files.</td></tr></tbody></table><p>We’ll see many more ways to operate on marked files below.</p><h2 id="managing-files-and-directories">Managing Files and Directories</h2><p>We have now multiple options to open and display our files and directories using netrw. Next, let’s see how to manage our filetree by adding or deleting elements.</p><h3 id="creating-and-deleting">Creating and Deleting</h3><p>Here are the keystrokes you can use in a netrw window to add or delete files or directories. Under the hood, netrw will run specific shell commands to operate on the files of your liking; you can change these commands by setting a value to the corresponding global variables below.</p><table><tbody><tr><th>Keystroke</th><th>Description</th><th>Global variable</th></tr><tr><td><code>d</code></td><td>Create a directory.</td><td><code>g:netrw_localmkdir</code></td></tr><tr><td><code>%</code></td><td>Create a new file (when the buffer created is saved).</td><td><ul><li></li></ul></td></tr><tr><td><code>D</code></td><td>Delete the file (or empty directory) under the cursor.</td><td><code>g:netrw_rm_cmd</code> (for files) and <code>g:netrw_localrmdir</code> (for directories).</td></tr></tbody></table><p>By default, you won’t be able to remove non-empty directory. You can however decide to always delete directories recursively, by running:</p><div><pre><code data-lang="vim"><span>let</span> <span>g</span>:<span>netrw_localrmdir</span><span>=</span><span>&#39;rm -r&#39;</span><span>
</span></code></pre></div><p>The keystroke <code>D</code> will also delete all marked files.</p><h3 id="renaming-files-or-directory">Renaming Files or Directory</h3><p>What about renaming what we already have?</p><table><tbody><tr><th>Keystroke</th><th>Description</th><th>Global variable</th></tr><tr><td><code>R</code></td><td>Rename (or move) files and directories. It’s also possible to modify its path to move it.</td><td><code>g:netrw_rename_cmd</code></td></tr></tbody></table><p>This keystroke will also try to rename all marked files.</p><p>There is no problem to use this keystroke locally, but there’s a big caveat when used on remote files. In that case, it will copy the file first, and then delete it. The two operations are independent; if the copy fail and the delete succeed, you’ll lose the file.</p><p>We’ll see the remote possibilities of netrw below.</p><h3 id="copying-files">Copying Files</h3><p>Copying files or directories require three steps:</p><ol><li>Select the target directory (where the files need to be copied) with the keystroke <code>mt</code>. If the banner is visible, the target path will be displayed there.</li><li>Mark the files you want to copy with <code>mf</code>.</li><li>Hit <code>mc</code> to effectively <code>c</code>opy the files.</li></ol><p>By default, netrw use the command <code>cp</code> under the hood. If it doesn’t work, a message will point out what variable you need to set to use a different the command.</p><h3 id="moving-files">Moving Files</h3><p>In netrw, moving files or copying them is a similar operation.</p><p>Again, a word of caution: if you move remote files, they’ll be first copied and then deleted. You’ll lose your files if the copy operation fails and the delete operation succeed.</p><p>Here are the three steps to move our files:</p><ol><li>Select the target directory (where the files need to be copied) with the keystroke <code>mt</code>. If the banner is visible, the target path will be displayed there.</li><li>Mark the files you want to copy with <code>mf</code>.</li><li>Hit <code>mm</code> to <code>m</code>ove the files.</li></ol><p>By default, netrw use the command <code>cp</code> under the hood. If it doesn’t work, a message will point out what variable you need to set to change this command.</p><h3 id="file-permissions">File Permissions</h3><p>Using netrw, you can also change the file <code>p</code>ermissions using the keystroke <code>gp</code>. It uses the CLI “chmod” under the hood; if you want to change it, you need to give a value to the variable <code>g:netrw_chgperm</code>.</p><h2 id="opening-files-with-external-applications">Opening Files with External Applications</h2><p>If you want to open a specific file using an external application, here are some keystrokes to do so:</p><table><tbody><tr><th>Keystroke</th><th>Description</th></tr><tr><td><code>x</code></td><td>Open the file under the cursor with the user’s preferred application.</td></tr><tr><td><code>X</code></td><td>Prompt for arguments, then use your shell to call the executable file under the cursor with the arguments.</td></tr><tr><td><code>gx</code></td><td>Can be used in any type of buffer (netrw and file buffers) to open the file (or URL) under the cursor with the user’s preferred application.</td></tr></tbody></table><p>The keystroke <code>gx</code> is handy to open a URL from your buffer while editing. I use it all the time!</p><p>By default, netrw uses an application which can open user’s preferred applications, like <a href="https://linux.die.net/man/1/xdg-open" target="_blank" rel="noopener">xdg-open</a> for example. You can change it by setting a value to <code>g:netrw_browsex_viewer</code>. For example:</p><div><pre><code data-lang="vim"><span>:</span><span>let</span> <span>g</span>:<span>netrw_browsex_viewer</span><span>=</span><span>&#34;xdg-open&#34;</span>`<span>
</span></code></pre></div><p>If you set the value of this global variable to <code>-</code> (<code>let g:netrw_browsex_viewer=&#39;-&#39;</code>), then netrw will try to run a function depending on the extension of the file. For example, if you try to open an HTML file, the function <code>NFH_html()</code> will be invoked, with the filepath as argument. You can then write some code in the body of the function to specify how to open the file.</p><p>You can find many examples in this file: <code>$VIMRUNTIME/autoload/netrwFileHandlers.vim</code>. If you don’t know where your Vim runtime is (or what’s the Vim runtimepath), you can look <a href="https://thevaluable.dev/vim-runtime-guide-example/">at this article</a>.</p><p>Additionally, you can set different global variables to customize this functionality:</p><table><tbody><tr><th>Variable</th><th>Description</th></tr><tr><td><code>g:netrw_gx</code></td><td>Control how <code>gx</code> picks up the text under the cursor. The default is <code>&lt;cfile&gt;</code>.</td></tr><tr><td><code>g:netrw_nogx</code></td><td>Disable the <code>gx</code> keystroke for non-netrw buffers.</td></tr><tr><td><code>g:netrw_suppress_gx_mesg</code></td><td>Display messages from the browser open in Vim. Default is 0 (disabled).</td></tr></tbody></table><h2 id="bookmarking">Bookmarking</h2><p>We also have the possibility to bookmark our favorite directories in netrw. Here are the most useful keystrokes to do so:</p><table><tbody><tr><th>Keystroke</th><th>Description</th><th>Marked files?</th></tr><tr><td><code>mb</code></td><td>Bookmark the currently browsed directory.</td><td>Bookmark the all marked files.</td></tr><tr><td><code>mB</code></td><td>Delete the last bookmark.</td><td>Delete all the marked files from the bookmarks.</td></tr><tr><td><code>qb</code></td><td>List all bookmarks</td><td><ul><li></li></ul></td></tr><tr><td><code>&lt;count&gt;gb</code></td><td><code>G</code>o back to the bookmark number <code>&lt;count&gt;</code>.</td><td><ul><li></li></ul></td></tr></tbody></table><p>All the bookmarks are written in the file <code>.netrwbook</code>. This file is located by default in the first directory of the <a href="https://thevaluable.dev/vim-runtime-guide-example/">runtimepath</a>. Similarly to the history, you can also set the variable <code>g:netrw_home</code> to change the directory of <code>.netrwbook</code>.</p><p>You can also use the following Ex commands to manage your bookmarks:</p><table><tbody><tr><th>Ex command</th><th>In netrw buffer</th><th>Not in netrw buffer</th></tr><tr><td><code>:NetrwMB</code></td><td>Bookmark file or directory under the cursor.</td><td>Bookmark the current file open in the buffer.</td></tr><tr><td><code>:NetrwMB &lt;files_or_dirs&gt;</code></td><td>Bookmark files and directories <code>&lt;files_or_dirs&gt;</code></td><td><ul><li></li></ul></td><td><ul><li></li></ul></td></tr></tbody></table><p>If you run <code>:NetrwMB</code> with marked files, they’ll also be all bookmarked.</p><h2 id="remote-operations-and-protocols">Remote Operations and Protocols</h2><p>We’ve seen in details how to manage our files and directories using netrw on a local computer. We can also use it to explore and manage the file systems on remote computers, via SCP or FTP!</p><p>There are two categories of operations we can do on these remote files and directories:</p><ol><li>Read and write.</li><li>Only read.</li></ol><p>Keep in mind that writing on a remote system is potentially destructive.</p><p>Under the hood, netrw use the file <code>netrw.vim</code> in <code>$VIMRUNTIME/autoload/netrw.vim</code>. It uses autocommands to intercept read and write for URL-like filenames.</p><p>This file <code>netrw.vim</code> is mainly a wrapper sending commands to external program, like <code>ftp</code> or <code>scp</code>. You can also read using other protocols (like HTTP), but writing and browsing a remote filesystem is always done via FTP or SCP.</p><p>Our netrw will read and write from temporary files copied from the remote system on the local computer. For Unix-like system (including Linux), these files will end up in the <code>/tmp</code> directory.</p><p>We can use all the commands we’ve seen until now on remote files, too. There are two important differences, however:</p><ol><li>As I mentioned already, if you want to move remote files or directories, you’ll need to do a copy first and then a delete. If the copy fails and the delete succeed, the file or directory will be deleted from the system. Copying manually the file first, and then deleting the files in a second step is safer.</li><li>If you want to overwrite the command used by the keystroke <code>d</code> (to create a directory), you need to assign a value to <code>g:netrw_mkdir_cmd</code>, not <code>g:netrw_localmkdir</code>. The same logic apply for other operations; for example, to remove a directory: <code>g:netrw_rmdir_cmd</code> for a remote system, <code>g:netrw_localrmdir</code> for a local one.</li></ol><p>To open a remote directory, you can use the following command:</p><div><pre><code data-lang="bash">vim &lt;protocol&gt;://&lt;user&gt;@&lt;hostname&gt;/&lt;path&gt;/
</code></pre></div><p>As we said earlier, the <code>&lt;protocol&gt;</code> can be “scp”, “ftp”, “http”…</p><p>As often, depending on the protocol you’re using, netrw will internally call a shell command to access the directory.</p><div><p><i></i>Vim help</p><p><code>:help netrw-protocol</code></p></div><h3 id="using-scp">Using SCP</h3><p>What’s SCP? It’s a protocol to exchange files between clients and servers using SSH. As a result, the exchanges are authenticated and encrypted.</p><p>Using the pattern we’ve seen just above, if I want to open my home directory on my remote server from my local computer, I can simply run the following:</p><div><pre><code data-lang="bash">vim scp://hypnos@185.193.160.40/
</code></pre></div><p>A netrw window will then open, browsing the home directory of the user <code>hypnos</code> on my server with IP <code>185.183.160.40</code>. Even better: if you use OpenSSH, you can write this kind of configuration in your <code>$HOME/.ssh/config</code> file:</p><div><pre><code data-lang="text">Host server
     HostName 185.193.160.40
     User hypnos
</code></pre></div><p>If you don’t want to enter your password 3892 times while browsing, you can log to your remote server using one of your local SSH key. If you’re on a *nix machine, look at <code>man ssh-copy-id</code> for more details.</p><p>We can also directly open a file with, for example, the command <code>vim scp://server/myfile</code>.</p><p>Speaking of files, we can also use the usual Ex commands inside Vim to edit, read or write them. For example:</p><table><tbody><tr><th>Example</th><th>Description</th></tr><tr><td><code>:e scp://user@ip/myfile</code></td><td>Edit the file <code>myfile</code> in the current window.</td></tr><tr><td><code>:r scp://user@ip/myfile</code></td><td>Insert the content of <code>myfile</code> in the current buffer.</td></tr><tr><td><code>:w scp://user@ip/myfile</code></td><td>Write the content of the current buffer into <code>myfile</code>. Useful to copy a file from your local to your remote server!</td></tr></tbody></table><div><p><i></i>Vim help</p><div><ul><li><code>:help netrw-externapp</code></li><li><code>:help netrw-transparent</code></li><li><code>:help netrw-ex</code></li><li><code>:netrw-ssh-hack</code></li></ul></div></div><h3 id="using-ftp">Using FTP</h3><p>You can also open files using the FTP protocol. Since this protocol is not secure at all (a third party can intercept the data, including username and password), I’d recommend you to use the SFTP protocol (for SSH FTP) instead.</p><p>On the surface it works similarly than the <code>SCP</code> protocol. Just call a URL like <code>vim sftp://user@ip/myfile</code> for example, and you’re good to go.</p><p>There are two potential drawbacks, however:</p><ul><li>It’s significantly slower than SCP.</li><li>Some FTP implementations are noisy and add some junk to the filenames. You’ll need to write a function <code>NetReadFixup</code> to clean them up automatically.</li></ul><p>The benefit? You can do many more operations on files using SFTP compared to SCP.</p><p>You can also write a <code>.netrc</code> file (probably located in your home directory) to specify your favorite way to connect to a remote via FTP.</p><h3 id="obtaining-a-file">Obtaining a File</h3><p>While browsing, you can use the <code>O</code> keystroke to fetch the remote file under the cursor. Vim won’t open it in a new buffer. If some files are marked, they’ll all be fetched.</p><p>These files are copied to the Vim’s working directory. To display the <code>p</code>ath of this <code>w</code>orking <code>d</code>irectory, you can run <code>:pwd</code>.</p><h3 id="reading-via-http">Reading via HTTP</h3><p>Using netrw, we can also fetch some content from HTTP. For example, try to run the following in Vim:</p><div><pre><code data-lang="vim"><span>:</span><span>e</span> <span>http</span>:<span>//</span><span>www</span>.<span>google</span>.<span>com</span>/`<span>
</span></code></pre></div><p>Congratulation! You’re reading Google’s HTML.</p><p>If you try to write the file, netrw will try to upload it back to the remote URL. On my machine, it runs the command <code>curl -T http://www.google.com</code>, but it might be different on yours.</p><p>You can also use <code>:r &lt;URL&gt;/</code> to insert in the current buffer, instead of opening a new one</p><h2 id="customizing-mapping">Customizing Mapping</h2><p>The easiest way to customize netrw keystrokes is to declare your new mapping in the folder <code>ftplugin</code>. Again, if you wonder what it is, I’ve written about the <a href="https://thevaluable.dev/vim-runtime-guide-example/">Vim’s runtimepath here</a>.</p><p>For example, if you want to toggle the netrw banner by hitting <code>B</code> instead of <code>I</code>, you can add the following to the file <code>$HOME/.vim/ftplugin/netrw.vim</code> (or <code>$XDG_CONFIG_HOME/nvim/ftplugin/netrw.vim</code> for Neovim):</p><div><pre><code data-lang="vim"><span>map</span> <span>&lt;</span><span>buffer</span><span>&gt;</span> <span>&lt;</span><span>silent</span><span>&gt;</span> <span>B</span> <span>I</span><span>
</span></code></pre></div><p>It works because all netrw buffers have the filetype “netrw”.</p><h2 id="master-of-browsing">Master of Browsing</h2><p>There are many other ways to customize netrw, but I think I’ve covered enough here to answer most needs.</p><p>What did we see in this article?</p><ul><li>We can open the help for specific netrw <code>&lt;keystroke&gt;</code> by running the Ex command <code>:help netrw-&lt;keystroke&gt;</code>. It also works for Ex commands.</li><li>There is a command to open Netrw wherever you want, depending of the current window: on the side or on top of it.</li><li>You can go back and forth in netrw’s browsing history using <code>u</code> and <code>U</code>.</li><li>It’s possible to mark files and directories. The usual keystrokes will then act on these files.</li><li>Using netrw, we can create, delete, rename, or move files and directories.</li><li>It’s also possible to open files using external applications or commands.</li><li>Bookmarking directories can be a good way to open quickly whatever you need.</li><li>One of the most powerful feature of netrw allows us to open remote filesystems using SCP or FTP.</li></ul><p>The native plugin netrw might not be the most stable or the most complete file manager out there, but, to me, it’s enough for the daily operations we all do on our precious files.</p><div><p><i></i>Vim help</p><p><code>:help netrw-quickmap</code></p></div></section></article></div></div>
  </body>
</html>
