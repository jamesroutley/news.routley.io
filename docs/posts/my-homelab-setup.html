<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://arslan.io/2024/09/10/my-homelab-setup/">Original</a>
    <h1>My Homelab Setup</h1>
    
    <div id="readability-page-1" class="page"><div>
    <div>
            <article>
                    <header>
                        
                            <p>I replaced my existing Homelab setup from the ground up with Unifi&#39;s latest Gateways, Switches APs, and Cameras. Here is what I did and how it ended up. </p>
                            <figure>
        <img srcset="/content/images/size/w300/2024/09/L1004906-1.jpeg 300w,
                    /content/images/size/w720/2024/09/L1004906-1.jpeg 720w,
                    /content/images/size/w960/2024/09/L1004906-1.jpeg 960w,
                    /content/images/size/w1200/2024/09/L1004906-1.jpeg 1200w,
                    /content/images/size/w2000/2024/09/L1004906-1.jpeg 2000w,
                    /content/images/2024/09/L1004906-1.jpeg" sizes="(max-width: 1200px) 100vw, 1200px" src="https://arslan.io/content/images/size/w1200/2024/09/L1004906-1.jpeg" alt="My Homelab Setup"/>
    </figure>
                    </header>

                <section>
                    <p>It&#39;s been almost four years since I moved to my current house. I knew my concrete home would be a big challenge if I didn&#39;t deploy multiple APs to every floor or room. Concrete walls cut out Wi-Fi signals more than dry walls.</p><p>I wanted several Ubiquiti devices, but obtaining them in Turkey was hard. I also didn&#39;t have any time. But there was one easily obtainable brand, TP-Link&#39;s Omada product line. So I fully went in. I bought a Router, Controller, a 24 PoE Switch, and 5-6 APs. I also got a set of Dahua cameras (PoE-powered). All this was at the beginning of 2021. However, my dream of using Unifi devices was still alive and never extinguished.</p><figure><img src="https://arslan.io/content/images/2024/09/L1004954-2.jpeg" alt="" loading="lazy" width="2000" height="1329" srcset="https://arslan.io/content/images/size/w600/2024/09/L1004954-2.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/L1004954-2.jpeg 1000w, https://arslan.io/content/images/size/w1600/2024/09/L1004954-2.jpeg 1600w, https://arslan.io/content/images/2024/09/L1004954-2.jpeg 2000w" sizes="(min-width: 720px) 720px"/></figure><p>Moving forward, I&#39;ve discovered that buying Ubiquiti devices nowadays is possible. A close friend also showcased the latest Unifi cameras, the Unifi Network, and the Protect applications (the UI for managing Ubiquiti devices and Cameras) at his home. I knew it was time to switch.</p><p>This is a<strong> 5,600+ word article </strong>with tons of details. Grab a coffee ☕️ , and let&#39;s dive into it!</p><h2 id="router-and-controller">Router and Controller</h2><figure><img src="https://arslan.io/content/images/2024/09/L1004927.jpeg" alt="" loading="lazy" width="2000" height="1329" srcset="https://arslan.io/content/images/size/w600/2024/09/L1004927.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/L1004927.jpeg 1000w, https://arslan.io/content/images/size/w1600/2024/09/L1004927.jpeg 1600w, https://arslan.io/content/images/2024/09/L1004927.jpeg 2000w" sizes="(min-width: 1200px) 1200px"/></figure><p>First, I had to replace my Router and Controller. Unifi has several products. Because I already had a Rack in my attic, I went with the <a href="https://eu.store.ui.com/eu/en/category/all-unifi-cloud-gateways/products/udm-se?ref=arslan.io" rel="noreferrer"><strong>Unifi Dream Machine - Special Edition (UDM-SE)</strong></a>. There are several reasons why I specifically chose this:</p><ul><li>I wanted 10GbE WAN and SPF output to be futureproof.</li><li>I plan to purchase Unifi Cameras but not the NVR (it would be overkill). The UDM-SE has a 3.5&#34; slot for an HDD that can store a month&#39;s worth of camera footage. That&#39;s enough for me.</li><li>The UDM-SE has PoE switches (compared to Dream Machine Pro (UDM-PRO)). I won&#39;t use them, but I wanted a backup in case my main switch fails.</li><li>I can buy UDM-SE and UDM-Pro here in Turkey. </li><li>It has an additional 128 GB SSD for detection recordings, which is lacking in the UDM-Pro. </li></ul><p>The Dream Machine is an excellent value because it is a Router, a Controller for all my Unifi devices, and an NVR for my cameras. Like my TP-Link router, it also supports multi-WAN—more on that later. (<em>For the record, I would buy the <code>Dream Machine Pro Max</code> gateway if I could find them, but they don&#39;t sell them here in Turkey</em>)</p><h3 id="switch">Switch</h3><figure><img src="https://arslan.io/content/images/2024/09/L1004951.jpeg" alt="" loading="lazy" width="2000" height="1329" srcset="https://arslan.io/content/images/size/w600/2024/09/L1004951.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/L1004951.jpeg 1000w, https://arslan.io/content/images/size/w1600/2024/09/L1004951.jpeg 1600w, https://arslan.io/content/images/2024/09/L1004951.jpeg 2000w" sizes="(min-width: 1200px) 1200px"/><figcaption><span>Unlike other switches from Unifi, the </span><code spellcheck="false"><span>Switch Pro Max 24 PoE</span></code><span> ports are horizontally aligned, making it easier to plug cables from the patch panel.</span></figcaption></figure><p>Next comes the Switch. I have in total four switches, each with a different purpose. Let&#39;s start with the main switch. Like my previous devices, I picked up a 24-port Switch, the <a href="https://eu.store.ui.com/eu/en/category/all-switching/products/usw-pro-max-24-poe?ref=arslan.io" rel="noreferrer"><strong>Pro Max 24 PoE</strong></a>. Here are the reasons:</p><ul><li>It has 16 PoE++ and 8 PoE+ ports, 8 of which are 2.5Gbe and the rest 1Gbe. There are a lot of PoEs, but we&#39;ll need them.</li><li>I plan to deploy Unifi&#39;s U7 APs. These are the most up-to-date APs and support Wi-Fi 7 (using 6GHz). This means, in theory, they can support up to 5.7Gbps data rate. These APs need to be powered by a 2.5Gbe uplink to get it. The <code>Pro Max 24 PoE</code> are 8 of them.</li><li>I&#39;ll use six PoE-powered Unifi cameras (some with PoE extenders via switches) and six U7 APs. I have seven rooms with several wall keystones. In addition, I have several devices (NAS, Printer, Home Assistant, etc.). All these need to be terminated, and 24 Ports are just right.</li><li>Unlike other switches, the Ports are all horizontally aligned. This makes patching easier and makes it look better from a patch panel.</li></ul><p>I also have several <a href="https://eu.store.ui.com/eu/en/category/switching-utility/products/usw-flex?ref=arslan.io" rel="noreferrer">Switch Flex&#39;s</a>. This flexible 5-port, Layer 2 PoE switch is for indoor and outdoor use and can be powered with PoE++. It allows us to use multiple devices with a single RJ45 cable. This switch is so valuable. First, it&#39;s outdoor rated; second, it&#39;s a must if you don&#39;t have an RJ45 cable for every camera. </p><figure><img src="https://arslan.io/content/images/2024/09/L1005004.jpeg" alt="" loading="lazy" width="2000" height="1329" srcset="https://arslan.io/content/images/size/w600/2024/09/L1005004.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/L1005004.jpeg 1000w, https://arslan.io/content/images/size/w1600/2024/09/L1005004.jpeg 1600w, https://arslan.io/content/images/2024/09/L1005004.jpeg 2000w" sizes="(min-width: 720px) 720px"/><figcaption><span>The Switch Flex is extremely handy for outdoor usage, especially for deploying multiple PoE powered Cameras with a single RJ45, PoE++ powered cable.</span></figcaption></figure><p>Finally, I have a <a href="https://eu.store.ui.com/eu/en/category/switching-utility/products/usw-lite-8-poe?ref=arslan.io" rel="noreferrer">Lite 8 Poe switch</a>. It&#39;s an 8-port, Layer 2 PoE switch with four GbE PoE+ and four GbE ports. This switch is deployed in my living room (I tried to wire all devices I could do) for these devices:</p><ul><li>PlayStation 5</li><li>XBOX Series X</li><li>Nintendo Switch</li><li>Sony TV</li><li>Apple TV4K</li><li>U7 AP</li></ul><p>The only caveat with this switch is that it doesn&#39;t support 2.5GbE. However, I had to get something, so it&#39;s okay for now. </p><h4 id="switch-assignments">Switch assignments</h4><p>Because the <code>Pro Max 24 PoE</code> has different kinds of ports based on 2.5Gbe or PoE++; I had to devise a good plan to lay out the keystone jacks and assign my various APs and Cameras efficiently. Two rules were vital for me:</p><ul><li>APs need at least 2.5GBe. I&#39;ll explain more about my APs in the next section, but all my APs support Wi-Fi 6, and if linked to a 2.5GBe port, they can support significantly higher speeds when clients use the 6 GHz band.</li><li>Switch Flex needs to be on PoE++. This is important because they will power down the line of other Cameras, so we must ensure they use the maximum power. Cameras don&#39;t need a lot of bandwidth, so 1GBe is good enough for them (most 2K cameras at most use 100 Mbps btw).</li></ul><p>Here is a diagram I sketched before I worked on patching my keystone panel:</p><figure><img src="https://arslan.io/content/images/2024/09/ScreenShot-2024-09-09-09.30.27@2x.png" alt="" loading="lazy" width="2000" height="1304" srcset="https://arslan.io/content/images/size/w600/2024/09/ScreenShot-2024-09-09-09.30.27@2x.png 600w, https://arslan.io/content/images/size/w1000/2024/09/ScreenShot-2024-09-09-09.30.27@2x.png 1000w, https://arslan.io/content/images/size/w1600/2024/09/ScreenShot-2024-09-09-09.30.27@2x.png 1600w, https://arslan.io/content/images/2024/09/ScreenShot-2024-09-09-09.30.27@2x.png 2000w" sizes="(min-width: 1200px) 1200px"/><figcaption><span>My current port assignment for the </span><code spellcheck="false"><span>Switch Pro Max 24 PoE</span></code><span> switch.</span></figcaption></figure><h3 id="aps">APs</h3><p>Part of using Unifi is also using their excellent APs (Access Points). But the challenge for me is deploying them in my concrete house. My house has concrete walls and floors. However, some rooms are divided by <a href="https://en.wikipedia.org/wiki/Autoclaved_aerated_concrete?ref=arslan.io" rel="noreferrer">&#34;Autoclaved aerated concrete&#34;</a> bricks (they are called <a href="https://www.xella.co.uk/en_GB/Ytong-building-blocks?ref=arslan.io" rel="noreferrer">Ytong</a> here in Turkey because a company made them very famous).</p><p>Fortunately, these are good at letting Wi-Fi signals through the walls, but reinforced concrete is the opposite. You can expect a single wall to <a href="https://www.reddit.com/r/askscience/comments/17zp69/what_type_of_building_materials_are_wifi/?ref=arslan.io" rel="noreferrer">cut off 20dB</a> of Power. It&#39;s like a Faraday cage. The second problem is that my house is like a townhouse that goes vertically. I have three floors, and there is another concrete slab between each floor.</p><figure><img src="https://arslan.io/content/images/2024/09/L1004981.jpeg" alt="" loading="lazy" width="2000" height="1500" srcset="https://arslan.io/content/images/size/w600/2024/09/L1004981.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/L1004981.jpeg 1000w, https://arslan.io/content/images/size/w1600/2024/09/L1004981.jpeg 1600w, https://arslan.io/content/images/2024/09/L1004981.jpeg 2000w" sizes="(min-width: 720px) 720px"/><figcaption><span>The U7 Pro Wall mounted to the Wall.</span></figcaption></figure><p>Hence, the optimal solution is to deploy multiple APs per floor but lower the Transmission Power so clients always pick up the nearest AP. Having explained the problem, here is the list of APs I&#39;ve got for my house:</p><ul><li>3 x <a href="https://eu.store.ui.com/eu/en/category/all-wifi/products/u7-pro?ref=arslan.io" rel="noreferrer"><strong>U7 Pro</strong> </a>(and a spare for backup)</li><li>3 x <a href="https://eu.store.ui.com/eu/en/category/all-wifi/products/u7-pro-wall?ref=arslan.io" rel="noreferrer"><strong>U7 Pro Wall</strong></a></li></ul><p>I had a few places where the Pros were more suitable and a few places where the Pro Wall was suitable. I also got a spare U7 Pro in case some of my APs fail. I deployed them in various ways. Some are mounted to the wall, and for some, I 3D-printed custom stands (<em>I even designed one myself; more on this later</em>). </p><figure><div><div><p><img src="https://arslan.io/content/images/2024/09/L1005003.jpeg" width="2000" height="1329" loading="lazy" alt="" srcset="https://arslan.io/content/images/size/w600/2024/09/L1005003.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/L1005003.jpeg 1000w, https://arslan.io/content/images/size/w1600/2024/09/L1005003.jpeg 1600w, https://arslan.io/content/images/size/w2400/2024/09/L1005003.jpeg 2400w" sizes="(min-width: 720px) 720px"/></p><p><img src="https://arslan.io/content/images/2024/09/L1004988.jpeg" width="2000" height="3012" loading="lazy" alt="" srcset="https://arslan.io/content/images/size/w600/2024/09/L1004988.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/L1004988.jpeg 1000w, https://arslan.io/content/images/size/w1600/2024/09/L1004988.jpeg 1600w, https://arslan.io/content/images/size/w2400/2024/09/L1004988.jpeg 2400w" sizes="(min-width: 720px) 720px"/></p></div><div><p><img src="https://arslan.io/content/images/2024/09/L1004992.jpeg" width="2000" height="1329" loading="lazy" alt="" srcset="https://arslan.io/content/images/size/w600/2024/09/L1004992.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/L1004992.jpeg 1000w, https://arslan.io/content/images/size/w1600/2024/09/L1004992.jpeg 1600w, https://arslan.io/content/images/size/w2400/2024/09/L1004992.jpeg 2400w" sizes="(min-width: 720px) 720px"/></p><p><img src="https://arslan.io/content/images/2024/09/L1004979.jpeg" width="2000" height="1329" loading="lazy" alt="" srcset="https://arslan.io/content/images/size/w600/2024/09/L1004979.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/L1004979.jpeg 1000w, https://arslan.io/content/images/size/w1600/2024/09/L1004979.jpeg 1600w, https://arslan.io/content/images/size/w2400/2024/09/L1004979.jpeg 2400w" sizes="(min-width: 720px) 720px"/></p></div></div><figcaption><p><span>Unifi&#39;s AP&#39;s can be installed in various ways. Even though some of the use cases here are not the optimal, it works for us.</span></p></figcaption></figure><p>Unifi has several tools that allow you to simulate the strength of a Wi-Fi signal. You can upload your layout, draw the lines, and define the wall types (concrete, drywall, etc..). After that, you can start placing all your devices. Based on the wall type shows how much the signals propagate. Here, you can see that in 2.4 GHz, it&#39;s well covered (I also optimized the Wi-Fi channels for each Band; more on this later)</p><figure><div><div><p><img src="https://arslan.io/content/images/2024/09/ss-2024-09-07-164702.png" width="1772" height="1246" loading="lazy" alt="" srcset="https://arslan.io/content/images/size/w600/2024/09/ss-2024-09-07-164702.png 600w, https://arslan.io/content/images/size/w1000/2024/09/ss-2024-09-07-164702.png 1000w, https://arslan.io/content/images/size/w1600/2024/09/ss-2024-09-07-164702.png 1600w, https://arslan.io/content/images/2024/09/ss-2024-09-07-164702.png 1772w" sizes="(min-width: 720px) 720px"/></p><p><img src="https://arslan.io/content/images/2024/09/ss-2024-09-07-164949.png" width="1362" height="1320" loading="lazy" alt="" srcset="https://arslan.io/content/images/size/w600/2024/09/ss-2024-09-07-164949.png 600w, https://arslan.io/content/images/size/w1000/2024/09/ss-2024-09-07-164949.png 1000w, https://arslan.io/content/images/2024/09/ss-2024-09-07-164949.png 1362w" sizes="(min-width: 720px) 720px"/></p><p><img src="https://arslan.io/content/images/2024/09/ss-2024-09-07-164928.png" width="1514" height="1256" loading="lazy" alt="" srcset="https://arslan.io/content/images/size/w600/2024/09/ss-2024-09-07-164928.png 600w, https://arslan.io/content/images/size/w1000/2024/09/ss-2024-09-07-164928.png 1000w, https://arslan.io/content/images/2024/09/ss-2024-09-07-164928.png 1514w" sizes="(min-width: 720px) 720px"/></p></div></div></figure><p>The great thing about this is that you can also locate your device and see where it was deployed. This is for big installations with hundreds of APs, Cameras, and Switches. Nevertheless, it&#39;s a cool feature.</p><h3 id="configuring-ssids">Configuring SSIDs</h3><p>I have multiple SSIDs configured. Previously, I had SSIDs per Wi-Fi bandwidth (2.4 GHz and 5GHz). Now that all my APs also have support for 6GHz, I thought this was not suitable. Instead, I created three different SSIDs:</p><figure><img src="https://arslan.io/content/images/2024/09/ScreenShot-2024-09-08-14.50.15@2x.png" alt="" loading="lazy" width="1902" height="548" srcset="https://arslan.io/content/images/size/w600/2024/09/ScreenShot-2024-09-08-14.50.15@2x.png 600w, https://arslan.io/content/images/size/w1000/2024/09/ScreenShot-2024-09-08-14.50.15@2x.png 1000w, https://arslan.io/content/images/size/w1600/2024/09/ScreenShot-2024-09-08-14.50.15@2x.png 1600w, https://arslan.io/content/images/2024/09/ScreenShot-2024-09-08-14.50.15@2x.png 1902w" sizes="(min-width: 720px) 720px"/></figure><p>Here is how they work:</p><ul><li><strong>Takayama</strong>: This is the backbone of our home. All wireless devices are connected here.</li><li><strong>Osaka</strong>: We have a guest network. Guests cannot access any devices in our house, and I limit their speed to prevent rogue clients from using my household internet. </li><li><strong>Hiroshima</strong>: I haven&#39;t yet configured this one, but I plan to configure my various Smart Hubs, TVs, Robot Vacuum Cleaners, and other Wireless devices I don&#39;t trust.  This will use a dedicated VLAN. </li></ul><p>Note that these are configured with VLANs (the <code>Network</code> columns show the VLAN names). Hence, we&#39;ll have to configure both of them together. I&#39;ll explain VLANs later in the blog post. </p><h3 id="wi-fi-radio-and-channel-optimization">Wi-Fi Radio and Channel optimization</h3><p>Deploying the APs isn&#39;t sometimes enough. Unifi does good work of automatically optimizing channel distribution. However, knowing that my house is a mix of brick and concrete walls, I improved it by assigning the band channels manually and changing the transmission powers. I have two APs on each floor, and all APs are in the opposite order (see the photos above). The best ideal way is to use non-overlapping channel numbers. For the 2.4 GHz band, we can only use 1, 6, and 11 (preferred). Hence, I came up with the assignment:</p><figure><img src="https://arslan.io/content/images/2024/09/ss-2024-09-07-170936.png" alt="" loading="lazy" width="2000" height="581" srcset="https://arslan.io/content/images/size/w600/2024/09/ss-2024-09-07-170936.png 600w, https://arslan.io/content/images/size/w1000/2024/09/ss-2024-09-07-170936.png 1000w, https://arslan.io/content/images/size/w1600/2024/09/ss-2024-09-07-170936.png 1600w, https://arslan.io/content/images/2024/09/ss-2024-09-07-170936.png 2000w" sizes="(min-width: 720px) 720px"/><figcaption><span>The Channel and TX Power assignments for each AP.</span></figcaption></figure><p>For example, on the ground floor, we have my <code>AP-Office</code> and <code>AP-Gym</code> installed. Hence, they are on the same floor, that&#39;s why one has the channel <code>1</code> and the other one <code>11</code>. However, above my office room, we have <code>AP-Living Room</code>. That&#39;s why we have to choose the channel <code>6</code> so it doesn&#39;t overlap with the <code>AP-Office</code>. </p><p>Finally, I&#39;ve changed the TX power to be <code>Low</code> for every single AP. This immensely helps clients to drop when they go to another room or switch floors. The biggest problem with the 2.4 GHz band is that it&#39;s like a parasite and very good at passing through a lot of walls. Hence, it also causes a lot of interference. By changing it to <code>Low</code>, we&#39;re not only a good citizen in our neighborhood, we also get the optimal environment for clients that use the 2.4 GHz band.</p><p>Here, you can see that right now, the AP density is in excellent condition, and clients have a good signal to the various APs: </p><figure><img src="https://arslan.io/content/images/2024/09/ss-2024-09-07-170904.png" alt="" loading="lazy" width="2000" height="834" srcset="https://arslan.io/content/images/size/w600/2024/09/ss-2024-09-07-170904.png 600w, https://arslan.io/content/images/size/w1000/2024/09/ss-2024-09-07-170904.png 1000w, https://arslan.io/content/images/size/w1600/2024/09/ss-2024-09-07-170904.png 1600w, https://arslan.io/content/images/2024/09/ss-2024-09-07-170904.png 2000w" sizes="(min-width: 720px) 720px"/><figcaption><span>Here&#39;s the AP density graph. The green dots are clients. Only one client is in poor condition, our car (a Tesla Model Y). I suspect it&#39;s because the Car is parked outside, and I&#39;ve set the AP&#39;s TX low. But that&#39;s a good compromise because it&#39;s only used for software updates.</span></figcaption></figure><p>I did something similar for the 5 GHz and 6 GHz bands. However, the rules are not as strict as for the 2.4 GHz. Hence, I changed only the transmission power for those and enabled the channel assignments to <code>auto</code>. Unifi recently released a new Software upgrade that shows all the channels and bandwidth assignments. </p><p>It&#39;s also essential to use an optimized Channel Width. The channel width defines how much data you can pull in. However, the wider the channel, the more interference you&#39;ll see, which means packet loss and instability. Hence, in my network, I have these settings:</p><ul><li><strong>2.4 GHz</strong>: 20 MHz</li><li><strong>5 GHz</strong>: 40 MHz</li><li><strong>6 GHz</strong>: 160 MHz</li></ul><p>However, increasing the width gives you more speed out of your APs. Given that my ISP speed is capped at 50 Mbps, I was good with lower but more stable settings. (<em>My ISP is currently updating our infrastructure and laying out Fiber cables, so this will change</em>) </p><p>You can see the final result of channel configurations here: </p><figure><img src="https://arslan.io/content/images/2024/09/ScreenShot-2024-09-08-14.02.01@2x.png" alt="" loading="lazy" width="2000" height="1096" srcset="https://arslan.io/content/images/size/w600/2024/09/ScreenShot-2024-09-08-14.02.01@2x.png 600w, https://arslan.io/content/images/size/w1000/2024/09/ScreenShot-2024-09-08-14.02.01@2x.png 1000w, https://arslan.io/content/images/size/w1600/2024/09/ScreenShot-2024-09-08-14.02.01@2x.png 1600w, https://arslan.io/content/images/size/w2400/2024/09/ScreenShot-2024-09-08-14.02.01@2x.png 2400w" sizes="(min-width: 720px) 720px"/></figure><p>Lastly, another important detail is that all my APs are wired (powered by PoE). Hence, because all of them are wired, <code>Wireless Meshing</code> is <strong>disabled</strong> for me. Wireless meshing is needed if the APs are not wired to the router; hence, they need to create a wireless backhaul. We don&#39;t need it. </p><h4 id="designing-a-desk-stand-for-the-unifi-u7-pro-wall">Designing a desk stand for the Unifi U7 Pro Wall</h4><p>I wasn&#39;t sure if I wanted the Pro Wall installed on the walls in two places in my house. Those were concrete walls, and just putting holes there was challenging. Unifi sells a <a href="https://store.ui.com/us/en/category/wifi-wall/products/uacc-u7-pro-wall-ts?variant=uacc-u7-pro-wall-ts&amp;ref=arslan.io" rel="noreferrer">table stand for the U7 Pro Wall</a>, but is always out of stock.</p><figure><div><div><p><img src="https://arslan.io/content/images/2024/09/IMG_9489.jpeg" width="960" height="1280" loading="lazy" alt="" srcset="https://arslan.io/content/images/size/w600/2024/09/IMG_9489.jpeg 600w, https://arslan.io/content/images/2024/09/IMG_9489.jpeg 960w" sizes="(min-width: 720px) 720px"/></p><p><img src="https://arslan.io/content/images/2024/09/IMG_9491.jpeg" width="1280" height="960" loading="lazy" alt="" srcset="https://arslan.io/content/images/size/w600/2024/09/IMG_9491.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/IMG_9491.jpeg 1000w, https://arslan.io/content/images/2024/09/IMG_9491.jpeg 1280w" sizes="(min-width: 720px) 720px"/></p></div><div><p><img src="https://arslan.io/content/images/2024/09/IMG_9494.jpeg" width="1280" height="960" loading="lazy" alt="" srcset="https://arslan.io/content/images/size/w600/2024/09/IMG_9494.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/IMG_9494.jpeg 1000w, https://arslan.io/content/images/2024/09/IMG_9494.jpeg 1280w" sizes="(min-width: 720px) 720px"/></p><p><img src="https://arslan.io/content/images/2024/09/L1003425-1.jpeg" width="1280" height="813" loading="lazy" alt="" srcset="https://arslan.io/content/images/size/w600/2024/09/L1003425-1.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/L1003425-1.jpeg 1000w, https://arslan.io/content/images/2024/09/L1003425-1.jpeg 1280w" sizes="(min-width: 720px) 720px"/></p></div></div><figcaption><p><span>U7 Pro Wall Stand Desk</span></p></figcaption></figure><p>So, I decided to design it myself. After a few iterations, I developed a design that allowed me to reuse the Pro Wall&#39;s metal plate. It looks great, and I made it available for anyone to download and use freely. </p><div>
            <div>
                <p><img src="https://arslan.io/content/images/2024/09/L1005003-1.jpeg" width="4000" height="2657" loading="lazy"/></p><p>
                    <h4><span>Unifi U7 Pro Wall Desk Stand</span></h4>
                </p>
                

                <p><span>A stand to place your U7 Pro Wall on a desktop or shelf. </span></p>
                
                    <p><a href="https://www.printables.com/model/960363-unifi-u7-pro-wall-desk-stand?ref=arslan.io" target="_blank" rel="noopener noreferrer"><span>Download STL Model</span></a>
                
            </p></div>
        </div><h3 id="cameras">Cameras</h3><p>I replaced my existing Dahua cameras with Unifi ones. There were several reasons, but the biggest one is the ease of operation and integration. Second, the Dahua cameras (bullet, 2k) were not the best. Two failed over the years, and I wouldn&#39;t say I liked configuring them via their built-in UI. I was also using Synology&#39;s Surveillance software as an NVR. Even though it worked, its detection algorithm and many other things were not that great. </p><figure><img src="https://arslan.io/content/images/2024/09/IMG_9622-1.jpeg" alt="" loading="lazy" width="2000" height="2667" srcset="https://arslan.io/content/images/size/w600/2024/09/IMG_9622-1.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/IMG_9622-1.jpeg 1000w, https://arslan.io/content/images/size/w1600/2024/09/IMG_9622-1.jpeg 1600w, https://arslan.io/content/images/2024/09/IMG_9622-1.jpeg 2000w" sizes="(min-width: 720px) 720px"/><figcaption><span>The various cameras I got from Unifi</span></figcaption></figure><p>My friend who went to Ubiquiti was very happy with his purchases of Unifi cameras. So, I decided it was time to upgrade my camera system. Here is the list of cameras I got:</p><ul><li>2 x <a href="https://eu.store.ui.com/eu/en/category/all-cameras-nvrs/products/uvc-g5-pro?ref=arslan.io" rel="noreferrer"><strong>G5 Pro</strong> </a>with 2 x <a href="https://eu.store.ui.com/eu/en/category/cameras-bullet/products/uacc-g5-enhancer?variant=uacc-g5-enhancer&amp;ref=arslan.io" rel="noreferrer"><strong>G5 Pro Enhancer</strong></a></li><li>4 x <a href="https://eu.store.ui.com/eu/en/category/cameras-dome-turret/products/uvc-g5-turret-ultra?variant=uvc-g5-turret-ultra&amp;ref=arslan.io" rel="noreferrer"><strong>G5 Turret Ultra</strong></a></li></ul><p>The G5 Pros are 4K, and Turret Ultras are 2 K. I also got the enhancers for the Pros, which add floodlight integration. I ensured that the Pros were installed in the most sensitive places of my house and the rest around its perimeter.</p><figure><img src="https://arslan.io/content/images/2024/09/L1005006.jpeg" alt="" loading="lazy" width="2000" height="1329" srcset="https://arslan.io/content/images/size/w600/2024/09/L1005006.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/L1005006.jpeg 1000w, https://arslan.io/content/images/size/w1600/2024/09/L1005006.jpeg 1600w, https://arslan.io/content/images/2024/09/L1005006.jpeg 2000w" sizes="(min-width: 720px) 720px"/><figcaption><span>The G5 Turret Ultra provides has a microphone and a wide angle view of the area, providing a good compromise between image quality and price. </span></figcaption></figure><p>So far, everything works as expected. One thing to note is that all these Cameras don&#39;t go straight to the Switch. I also deployed two <strong>Switch Flexs.</strong> These are outdoor-rated PoE-powered switches that can power other PoE devices. This was excellent because, in some places, I only had a single cable deployed from my Switch. So, I could <code>fan-out</code> use a single port for multiple cameras. This is possible because of PoE++ ports. High-watt output ports allow you to power multiple devices with a single port. This was something I discovered late in the game.</p><h3 id="rack-setup">Rack setup</h3><figure><img src="https://arslan.io/content/images/2024/09/L1004941.jpeg" alt="" loading="lazy" width="2000" height="2102" srcset="https://arslan.io/content/images/size/w600/2024/09/L1004941.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/L1004941.jpeg 1000w, https://arslan.io/content/images/size/w1600/2024/09/L1004941.jpeg 1600w, https://arslan.io/content/images/2024/09/L1004941.jpeg 2000w" sizes="(min-width: 720px) 720px"/><figcaption><span>My 12U Rack</span></figcaption></figure><p>I have a 12U rack, though only half of it is being used. Because my rack has an enclosure with wheels, it&#39;s pretty useful because I have my NAS (Synology), Home Assistant Hub, PDU, and many other things at the bottom. There is a 9-port 2U, Schuko PDU, at the back. All my devices in the rack are terminated at this PDU. Then, the PDU is plugged into my UPS. </p><figure><img src="https://arslan.io/content/images/2024/09/201B74C4-CDCC-4748-B5CD-2B7A61607E63_1_105_c.jpeg" alt="" loading="lazy" width="1024" height="768" srcset="https://arslan.io/content/images/size/w600/2024/09/201B74C4-CDCC-4748-B5CD-2B7A61607E63_1_105_c.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/201B74C4-CDCC-4748-B5CD-2B7A61607E63_1_105_c.jpeg 1000w, https://arslan.io/content/images/2024/09/201B74C4-CDCC-4748-B5CD-2B7A61607E63_1_105_c.jpeg 1024w" sizes="(min-width: 720px) 720px"/></figure><p>I plan to replace my Synology NAS with a Rack-based version, but only if I find something I like. So far, the existing options are expensive and not worth it (at least for me). </p><figure><img src="https://arslan.io/content/images/2024/09/L1004973.jpeg" alt="" loading="lazy" width="2000" height="1329" srcset="https://arslan.io/content/images/size/w600/2024/09/L1004973.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/L1004973.jpeg 1000w, https://arslan.io/content/images/size/w1600/2024/09/L1004973.jpeg 1600w, https://arslan.io/content/images/2024/09/L1004973.jpeg 2000w" sizes="(min-width: 720px) 720px"/><figcaption><span>A 3kVA UPS from a local company</span></figcaption></figure><p>A 3kVA UPS tower <strong>powers all the devices in the Rack</strong> (including the NAS and various hubs). However, I bought the UPS 3.5 years ago, and it&#39;s unfortunately dying. I must replace the battery; however, I&#39;m also considering purchasing a rack-mounted UPS from APC. Two things that I need with a UPS are:</p><p>1. USB cable support can send signals to my NAS and other devices if there is a power outage so they can shut themselves down gracefully. </p><p>2. A bypass switch to<strong> </strong>remove the UPS system from the circuit for servicing or maintenance or if it is no longer working correctly.</p><p>Besides that, I used several Unifi Rack accessories. Some were must-have, some were nice to have, and some were just for aesthetic reasons. Let me explain them:</p><figure><img src="https://arslan.io/content/images/2024/09/rack-desc.jpeg" alt="" loading="lazy" width="2000" height="1054" srcset="https://arslan.io/content/images/size/w600/2024/09/rack-desc.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/rack-desc.jpeg 1000w, https://arslan.io/content/images/size/w1600/2024/09/rack-desc.jpeg 1600w, https://arslan.io/content/images/2024/09/rack-desc.jpeg 2000w"/></figure><ul><li><strong>Two Brush Panels</strong>: These are for freeform cables that don&#39;t terminate at the Patch Panel, such as SFP cables between switches, Modem cables, or temporary devices. They are nice to have, but two are overkill. I bought them for aesthetic reasons.</li><li><strong>One OCD panel:</strong> This is purely for aesthetic reasons, to keep the front unified. </li><li><strong>A 24-Port patch panel:</strong> This is a must have. All my camera, outdoor, and indoor RJ45 cables terminate here. I also have a few inline couplers. A patch panel is the backbone of a good rack.</li><li><strong>Etherlightning Patch cables</strong>: They are used purely for aesthetic reasons. They keep the Rack tidy. However, because they are so short, they don&#39;t obstruct the ports, which has the slight advantage of improving rack maintenance.</li><li><strong>RJ45 Dust Covers</strong>: Protects from elements and aesthetically looks nice.</li><li><strong>Keystone Blank Patches</strong>: If you don&#39;t use them, there are blank holes, and I don&#39;t like the look. Again, this is purely for aesthetic reasons.</li></ul><figure><img src="https://arslan.io/content/images/2024/09/L1004917.jpeg" alt="" loading="lazy" width="2000" height="1328" srcset="https://arslan.io/content/images/size/w600/2024/09/L1004917.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/L1004917.jpeg 1000w, https://arslan.io/content/images/size/w1600/2024/09/L1004917.jpeg 1600w, https://arslan.io/content/images/2024/09/L1004917.jpeg 2000w" sizes="(min-width: 720px) 720px"/><figcaption><span>The Etherlighting Patch Cables were created specially to be used with the Pro Max switches with LED support. Because of the translucent socket it&#39;s able to reflect the LED colors.</span></figcaption></figure><h3 id="topology-and-naming-devices">Topology and naming devices</h3><p>A nit thing, but I prefixed the name of all my AP&#39;s with <code>AP-</code> and all my cameras with <code>CAM-</code>. This makes it extremely easy to understand the device type while configuring a setting.</p><figure><img src="https://arslan.io/content/images/2024/09/ScreenShot-2024-09-10-10.25.18@2x.png" alt="" loading="lazy" width="2000" height="1033" srcset="https://arslan.io/content/images/size/w600/2024/09/ScreenShot-2024-09-10-10.25.18@2x.png 600w, https://arslan.io/content/images/size/w1000/2024/09/ScreenShot-2024-09-10-10.25.18@2x.png 1000w, https://arslan.io/content/images/size/w1600/2024/09/ScreenShot-2024-09-10-10.25.18@2x.png 1600w, https://arslan.io/content/images/size/w2400/2024/09/ScreenShot-2024-09-10-10.25.18@2x.png 2400w"/><figcaption><span>All my Unifi devices</span></figcaption></figure><p>Another important detail I had to change was the STP Priority of my various switches. It&#39;s crucial to avoid Network loops. Network loops happen when multiple paths exist between two points in a network. This leads to data continuously circulating and potentially causing significant issues such as performance degradation, unexpected port blockages, complete network outages, and device crashes.<strong> </strong>It&#39;s like a recursive stack overflow bug in software applications. </p><figure><img src="https://arslan.io/content/images/2024/09/ss-2024-09-07-165552.png" alt="" loading="lazy" width="2000" height="1253" srcset="https://arslan.io/content/images/size/w600/2024/09/ss-2024-09-07-165552.png 600w, https://arslan.io/content/images/size/w1000/2024/09/ss-2024-09-07-165552.png 1000w, https://arslan.io/content/images/size/w1600/2024/09/ss-2024-09-07-165552.png 1600w, https://arslan.io/content/images/2024/09/ss-2024-09-07-165552.png 2000w" sizes="(min-width: 720px) 720px"/><figcaption><span>The current topology</span></figcaption></figure><p>In my case, my main 24-Port switch has a Priority of <code>4096</code> (the lower it is, the more it&#39;s preferred) and my other switch, the Lite 8 Poe, which I use in my living room for our Game Consoles and TV boxes, has a priority of <code>32768</code>.</p><h3 id="dual-wan-settings">Dual WAN settings</h3><p>I have two ADSL connections coming to me. They are both from the same ISP, so they&#39;re unused for backup. Because the maximum speed I can obtain is around 50 Mbps, it&#39;s not enough for the whole family. So, one WAN powers my office and my devices, and the second WAN powers the rest of the home. </p><figure><img src="https://arslan.io/content/images/2024/09/ScreenShot-2024-09-08-14.18.00@2x.png" alt="" loading="lazy" width="2000" height="1205" srcset="https://arslan.io/content/images/size/w600/2024/09/ScreenShot-2024-09-08-14.18.00@2x.png 600w, https://arslan.io/content/images/size/w1000/2024/09/ScreenShot-2024-09-08-14.18.00@2x.png 1000w, https://arslan.io/content/images/size/w1600/2024/09/ScreenShot-2024-09-08-14.18.00@2x.png 1600w, https://arslan.io/content/images/2024/09/ScreenShot-2024-09-08-14.18.00@2x.png 2000w" sizes="(min-width: 720px) 720px"/></figure><p>By default, all devices go to the Primary WAN, but I added routing that routes specific devices to the Secondary WAN. This way, I can ensure that the devices I use always use the second one. And if the Secondary WAN fails, it automatically fallbacks to the Primary. </p><figure><img src="https://arslan.io/content/images/2024/09/ScreenShot-2024-09-08-14.27.18@2x.png" alt="" loading="lazy" width="1834" height="962" srcset="https://arslan.io/content/images/size/w600/2024/09/ScreenShot-2024-09-08-14.27.18@2x.png 600w, https://arslan.io/content/images/size/w1000/2024/09/ScreenShot-2024-09-08-14.27.18@2x.png 1000w, https://arslan.io/content/images/size/w1600/2024/09/ScreenShot-2024-09-08-14.27.18@2x.png 1600w, https://arslan.io/content/images/2024/09/ScreenShot-2024-09-08-14.27.18@2x.png 1834w" sizes="(min-width: 720px) 720px"/></figure><p>Making sure that by default, all devices that use the primary WAN has the benefit that no guest or new device will <strong>not</strong> <strong>congest</strong> the secondary WAN. </p><h3 id="vlan">VLAN</h3><p>A good network setup involves separating devices into their virtual network. This is done by creating VLANs and assigning ports or devices to these VLANs. You can go crazy here and add a lot of things. For me, I wanted to start small. Luckily, there is a great YouTube channel that explains these settings nicely, I recommend it as I&#39;ve learned a lot from it: <a href="https://www.youtube.com/watch?v=krhsZWnAxVc&amp;ref=arslan.io">https://www.youtube.com/watch?v=krhsZWnAxVc</a></p><p>Here are the current VLANs I set up:</p><figure><img src="https://arslan.io/content/images/2024/09/ScreenShot-2024-09-08-19.10.50@2x-2.png" alt="" loading="lazy" width="1908" height="566" srcset="https://arslan.io/content/images/size/w600/2024/09/ScreenShot-2024-09-08-19.10.50@2x-2.png 600w, https://arslan.io/content/images/size/w1000/2024/09/ScreenShot-2024-09-08-19.10.50@2x-2.png 1000w, https://arslan.io/content/images/size/w1600/2024/09/ScreenShot-2024-09-08-19.10.50@2x-2.png 1600w, https://arslan.io/content/images/2024/09/ScreenShot-2024-09-08-19.10.50@2x-2.png 1908w" sizes="(min-width: 720px) 720px"/></figure><p>Again, you can go crazy here, but keeping a clean state is tough once the number of clients increases. So, how do I use them:</p><ul><li><strong>Default</strong>: This is my main network. My MacBooks, iPads, iPhones, Switches, APs, etc., all go into this network. Some people split this into two VLANs and add another <code>Secure</code> VLAN which is used to isolate the gateway, AP, and switches from their other devices. I considered this overkill, so I didn&#39;t choose that option. </li><li><strong>Guest</strong>: I don&#39;t have any wired or wireless device that uses this network; however, people connecting to the Guest network are put into this network. The guest network is isolated and cannot reach other networks.</li><li><strong>IoT</strong>: Anything I don&#39;t trust or might be an attack surface goes into this, including Robot Vacuum Cleaners, Espresso Machines, Smart Hubs, Tesla Chargers, Game Consoles, TVs, etc. With smart appliances being so popular, this is especially important. IoT devices can reach the Internet but not other devices unless I allow them. </li><li><strong>Camera</strong>: As the name says, this only contains the PoE Cameras. </li></ul><p>All VLANs have a dedicated subnet with around ~249 usable IPs, which is good enough for household use. </p><figure><img src="https://arslan.io/content/images/2024/09/ScreenShot-2024-09-08-19.56.13@2x.png" alt="" loading="lazy" width="1344" height="744" srcset="https://arslan.io/content/images/size/w600/2024/09/ScreenShot-2024-09-08-19.56.13@2x.png 600w, https://arslan.io/content/images/size/w1000/2024/09/ScreenShot-2024-09-08-19.56.13@2x.png 1000w, https://arslan.io/content/images/2024/09/ScreenShot-2024-09-08-19.56.13@2x.png 1344w" sizes="(min-width: 720px) 720px"/><figcaption><span>A simple Firewall rule that blocks my TV to the Internet</span></figcaption></figure><p>Of course, just adding VLAN is not enough. What matters is the firewall rules that define what VLAN can or cannot do. This is an advanced topic, and there are many Blog Posts and YouTube videos about it, but to give a recap, I have these in place:</p><ul><li>Default VLAN can access all VLANs.</li><li>Block inter-vlan routing. No VLAN can see each other. For example, if a rogue device in the IoT device is compromised, they won&#39;t be able to access my different networks. This is an issue, though, if, for example, I want my HomeAssistant Hub to detect devices on other VLANs. Hence, I need to add explicit ALLOW rules for every single device. </li><li>Block access to gateways from each VLAN. Devices can still access the gateway addresses from other VLANs; hence, we must create custom firewall rules to allow them access. So, say if we have an IoT device with an IP <code>192.168.30.56</code> it won&#39;t be able to access <code>192.168.10.1</code> or <code>192.168.40.1</code>. The gateway address is our Unifi Controller interface, so this is just an extra caution. </li><li>Limit the speed of Guests. I had a few instances where guest clients would consume all my bandwidth; that&#39;s a no-go for me. </li><li>Block specific devices to the Internet. For example, my Sony TV cannot access the internet, and I only enable it occasionally to check if there is any FW update. I use an Apple TV 4K box, which I trust more than my TV.</li></ul><h3 id="dns-settings">DNS settings</h3><p>One thing I did that was a nice improvement was to assign local DNS names to some of my devices, such as my Synology NAS and HomeAssistant Hub. The idea here is to assign them fixed IPs and then create a DNS record by using a domain name that belongs to you (or anything else you want to use):</p><figure><img src="https://arslan.io/content/images/2024/09/ScreenShot-2024-09-09-10.26.41@2x.png" alt="" loading="lazy" width="1500" height="728" srcset="https://arslan.io/content/images/size/w600/2024/09/ScreenShot-2024-09-09-10.26.41@2x.png 600w, https://arslan.io/content/images/size/w1000/2024/09/ScreenShot-2024-09-09-10.26.41@2x.png 1000w, https://arslan.io/content/images/2024/09/ScreenShot-2024-09-09-10.26.41@2x.png 1500w" sizes="(min-width: 720px) 720px"/></figure><p>However, it&#39;s important to understand what I mean <code>fixed IP</code>. I use the DHCP server, and each VLAN Network is masked with <code>/24</code>, which gives me <code>249</code> usable IPs. That&#39;s more than enough for us. After plugging your device, the DHCP server assigns an IP from the usable ports. This IP can be fixed in the settings, so the device always uses it:</p><figure><img src="https://arslan.io/content/images/2024/09/ScreenShot-2024-09-09-10.32.57@2x.png" alt="" loading="lazy" width="856" height="676" srcset="https://arslan.io/content/images/size/w600/2024/09/ScreenShot-2024-09-09-10.32.57@2x.png 600w, https://arslan.io/content/images/2024/09/ScreenShot-2024-09-09-10.32.57@2x.png 856w" sizes="(min-width: 720px) 720px"/><figcaption><span>My Synology NAS has a fixed IP, with a local DNS record. That way, I can easily type </span><code spellcheck="false"><span>nas.arslan.io</span></code><span> in my browser, and it&#39;ll open my NAS without having to remember the IP.</span></figcaption></figure><p>This is different from setting a fixed, static IP from the device. Never do that. Instead, let your router assign the IP and fix it inside your network.  After setting it up, you can verify if via <code>dig</code> and see that the local domain resolves to your fixed IP:</p><figure><pre><code>$ dig +noall +answer nas.arslan.io @192.168.10.1
nas.arslan.io.          0       IN      A       192.168.10.26</code></pre><figcaption><p><span>My gateway IP is </span><code spellcheck="false"><span>192.168.10.1</span></code><span>, hence we target it to resolve our DNS name.</span></p></figcaption></figure><h3 id="tools">Tools </h3><p>No Homelab project is finished without having to build a custom cable. Some companies do custom cabling (which is super dope), but I wanted to learn it myself because I sometimes need cable somewhere in the house. </p><p>To build the rack, I had to terminate a few outdoor RJ45 cables. Another thing I always wanted to fix was my old patch panel. Unfortunately, when we built the house 4-5 years ago, my contractor terminated all RJ45 cables directly at the wall without giving extra space. This meant I had to create extra hops and extend all the terminating cables again. </p><p>We did that before, but the contractors made the same mistakes and used short cables. Because of that, it was always a hassle to move my rack around. I decided to redo every single cable.</p><figure><div><div><p><img src="https://arslan.io/content/images/2024/09/IMG_0339.jpeg" width="2000" height="2667" loading="lazy" alt="" srcset="https://arslan.io/content/images/size/w600/2024/09/IMG_0339.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/IMG_0339.jpeg 1000w, https://arslan.io/content/images/size/w1600/2024/09/IMG_0339.jpeg 1600w, https://arslan.io/content/images/size/w2400/2024/09/IMG_0339.jpeg 2400w" sizes="(min-width: 720px) 720px"/></p><p><img src="https://arslan.io/content/images/2024/09/IMG_0338.jpeg" width="2000" height="2667" loading="lazy" alt="" srcset="https://arslan.io/content/images/size/w600/2024/09/IMG_0338.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/IMG_0338.jpeg 1000w, https://arslan.io/content/images/size/w1600/2024/09/IMG_0338.jpeg 1600w, https://arslan.io/content/images/size/w2400/2024/09/IMG_0338.jpeg 2400w" sizes="(min-width: 720px) 720px"/></p></div></div><figcaption><p><span>Multiple new cables to extend the RJ45 cables that terminate at the wall (you can see a glimpse in the second picture)</span></p></figcaption></figure><p>This was the most challenging part of the whole homelab project. At one end was a keystone jack (female part), and on the end was an RJ45 socket (male part).  So I needed two tools—one tool for punching down cables into the Keystone jack and another one to crimp RJ45 cables.</p><figure><div><div><p><img src="https://arslan.io/content/images/2024/09/IMG_0310.jpeg" width="2000" height="2667" loading="lazy" alt="" srcset="https://arslan.io/content/images/size/w600/2024/09/IMG_0310.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/IMG_0310.jpeg 1000w, https://arslan.io/content/images/size/w1600/2024/09/IMG_0310.jpeg 1600w, https://arslan.io/content/images/size/w2400/2024/09/IMG_0310.jpeg 2400w" sizes="(min-width: 720px) 720px"/></p><p><img src="https://arslan.io/content/images/2024/09/IMG_0309.jpeg" width="2000" height="2667" loading="lazy" alt="" srcset="https://arslan.io/content/images/size/w600/2024/09/IMG_0309.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/IMG_0309.jpeg 1000w, https://arslan.io/content/images/size/w1600/2024/09/IMG_0309.jpeg 1600w, https://arslan.io/content/images/size/w2400/2024/09/IMG_0309.jpeg 2400w" sizes="(min-width: 720px) 720px"/></p></div></div><figcaption><p><span>The first tool is a Punchdown tool from Oring Networking. It simultaneously punches down all 8 cables. The second tool is a Crimping tool for the RJ45 sockets. </span></p></figcaption></figure><p>Now, having these tools is nice and good, but the most challenging part wasn&#39;t using them but rearranging the color-coded cables into a specific order before we could punch them down. And if you made a single error on both ends, you had to redo it.</p><figure><div><div><p><img src="https://arslan.io/content/images/2024/09/IMG_0297.jpeg" width="2000" height="2667" loading="lazy" alt="" srcset="https://arslan.io/content/images/size/w600/2024/09/IMG_0297.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/IMG_0297.jpeg 1000w, https://arslan.io/content/images/size/w1600/2024/09/IMG_0297.jpeg 1600w, https://arslan.io/content/images/size/w2400/2024/09/IMG_0297.jpeg 2400w" sizes="(min-width: 720px) 720px"/></p><p><img src="https://arslan.io/content/images/2024/09/IMG_0298.jpeg" width="2000" height="2667" loading="lazy" alt="" srcset="https://arslan.io/content/images/size/w600/2024/09/IMG_0298.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/IMG_0298.jpeg 1000w, https://arslan.io/content/images/size/w1600/2024/09/IMG_0298.jpeg 1600w, https://arslan.io/content/images/size/w2400/2024/09/IMG_0298.jpeg 2400w" sizes="(min-width: 720px) 720px"/></p></div></div><figcaption><p><span>Here you can see the color coded cables and the correct wiring. There are two standards btw, we use the 568B standard as it&#39;s more modern, and that&#39;s what I use throughout my house.</span></p></figcaption></figure><p>I also had to verify that it works after creating a single cable. You might think I have an Ethernet port somewhere that I plug in and see if two devices are connected. But there is a better way. Numerous devices enable you to verify whether you have correctly wired the RJ45 color-coded cables. Here is a small video of a tool that I use. It&#39;s a basic no-name device that I purchased from my local supplier. </p><figure data-kg-thumbnail="https://arslan.io/content/media/2024/09/IMG_0381_thumb.jpg" data-kg-custom-thumbnail="">
            <div>
                <video src="https://arslan.io/content/media/2024/09/IMG_0381.mp4" poster="https://img.spacergif.org/v1/1920x1080/0a/spacer.png" width="1920" height="1080" playsinline="" preload="metadata"></video>
                
                <div>
                    <div>
                        <p>
                        
                        <span>0:00</span></p><p>
                            /<span>0:11</span>
                        </p>
                        </div>
                </div>
            </div>
            
        </figure><p>Finally, if you have so many cables, it&#39;ll be hard to understand which cable goes to which room or camera. So, the best way is to label them consistently and efficiently. There are many ways of doing that. The best and most expensive way is to use a heat shrink tube. I didn&#39;t have that, but I purchased a Dymo Label printer (model: LabelManager 420P) and used it extensively to label all my cables. </p><figure><div><div><p><img src="https://arslan.io/content/images/2024/09/IMG_0301.jpeg" width="2000" height="2667" loading="lazy" alt="" srcset="https://arslan.io/content/images/size/w600/2024/09/IMG_0301.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/IMG_0301.jpeg 1000w, https://arslan.io/content/images/size/w1600/2024/09/IMG_0301.jpeg 1600w, https://arslan.io/content/images/size/w2400/2024/09/IMG_0301.jpeg 2400w" sizes="(min-width: 720px) 720px"/></p><p><img src="https://arslan.io/content/images/2024/09/camphoto_33463914.jpeg" width="2000" height="2667" loading="lazy" alt="" srcset="https://arslan.io/content/images/size/w600/2024/09/camphoto_33463914.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/camphoto_33463914.jpeg 1000w, https://arslan.io/content/images/size/w1600/2024/09/camphoto_33463914.jpeg 1600w, https://arslan.io/content/images/size/w2400/2024/09/camphoto_33463914.jpeg 2400w" sizes="(min-width: 720px) 720px"/></p></div></div><figcaption><p><span>I used a Dymo LabelManager 420P to print labels for all my new cables. The labels are wrapped around the cables. It does the work and makes it easy to understand the source and destination.</span></p></figcaption></figure><p>After labeling all the cables, I terminated them at my Keystone Patch Panel. All the wires are neatly held together with zip-locks (I know there are better ways of doing this, but this works for me).</p><figure><img src="https://arslan.io/content/images/2024/09/L1004948-1.jpeg" alt="" loading="lazy" width="2000" height="1328" srcset="https://arslan.io/content/images/size/w600/2024/09/L1004948-1.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/L1004948-1.jpeg 1000w, https://arslan.io/content/images/size/w1600/2024/09/L1004948-1.jpeg 1600w, https://arslan.io/content/images/2024/09/L1004948-1.jpeg 2000w" sizes="(min-width: 720px) 720px"/></figure><h3 id="pricing">Pricing</h3><p>Here is the list of things I purchased and how much I paid for them. There are a few things I didn&#39;t show you in the blog post, such as various patch cables that I bought as spare backups in case I need them. </p><p>One crucial detail is that I bought from several countries and marketplaces, so the prices differ significantly from those of the Unifi store. I also paid for customs because I imported some via Amazon.de or Amazon.com. I live in Ankara, Turkey, and our import taxes are quite high. Because of that, the prices you&#39;ll see are higher than if you buy it directly from Unifi. </p><figure><img src="https://arslan.io/content/images/2024/09/IMG_9226.jpeg" alt="" loading="lazy" width="2000" height="2667" srcset="https://arslan.io/content/images/size/w600/2024/09/IMG_9226.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/IMG_9226.jpeg 1000w, https://arslan.io/content/images/size/w1600/2024/09/IMG_9226.jpeg 1600w, https://arslan.io/content/images/2024/09/IMG_9226.jpeg 2000w" sizes="(min-width: 720px) 720px"/></figure><ul><li><strong>2,296.73 €</strong> (date: 16.07.2024)<ul><li>1 x Dream Machine Special Edition </li><li>1 x Switch Pro Max 24 PoE</li><li>4 x U7 Pro (U7-Pro) (one is spare)</li></ul></li><li><strong>403.97 €</strong> (date: 11.07.2024)<ul><li>2 x Switch Flex</li><li>1 x Lite 8 Poe</li></ul></li><li><strong>1447.04 €</strong> (date: 12.07.2024)<ul><li>2 x G5 Pro</li><li>2 x G5 Pro Enhancer</li><li>4 x G5 Turret Ultra</li></ul></li><li><strong>1015.97</strong> <strong>€</strong> (date: 12.07.2024)<ul><li>3 x U7 Pro Wall</li><li>24-Port Blank Keystone Patch Panel</li><li>2 x 10 Gbps SFP+ Direct Attach Cable</li><li>1 SFP to RJ45 Adapter (1G)</li><li>15 x UniFi Ethernet Patch Cable (White/Blue/Black / 0.3 m)</li><li>10 x UniFi Ethernet Patch Cable (White/Blue / 0.1 m)</li><li>RJ45 Dust Cover, 24-Pack</li><li>Keystone Blank Insert, 24-pack</li><li>1U Blank Panel</li><li>2 x 1U Brush Panel</li></ul></li><ul><li>UniFi Etherlighting Patch Cable (0.15 m (24-pack)</li></ul></ul><p><strong>Total</strong>:  <strong>5,203.71 Euro (</strong><em>$5,751.24</em><strong>). </strong><em>Note for future readers: the prices might differ based on exchange ratios; these are approximates.</em></p><p>I spent around  ~<strong>$5750</strong> for all my devices and accessories. This includes 7 APs,  6 PoE cameras, and several switches. I rebuilt it from scratch, and my house is big. Here, you can see why people say Unifi is expensive. If you used other brands, this would cost you 2x or 3x less. However, none of them provide a user experience for Unifi. Quality and well-made, well-designed goods have a price. For me, it&#39;s worth it.</p><h2 id="future-plans">Future plans</h2><p>When I told a few friends that I finished my homelab project, they laughed and said, &#34;A homelab project is never finished&#34;. That&#39;s even true of what I have done so far. There are, of course, a few things that are nice to have and a few things I plan to work on:</p><ul><li>I need to replace my UPS. As I said earlier, it is old and needs to be replaced. I could replace the battery, but the UPS doesn&#39;t give me confidence and lacks features (such as USB support and bypass). Hence, I&#39;ll probably replace it with a rack-based one.</li><li>Add an NUC. I currently run a few things on my Synology; I have a dedicated HomeAssistant Hub. But sometimes, it would be cool if I had a dedicated <a href="https://en.wikipedia.org/wiki/Next_Unit_of_Computing?ref=arslan.io" rel="noreferrer">NUC</a> or a small server. </li><li>I want to replace my existing NAS with a rack-based version. I love my Synology and have had no issues so far. But having a rack-based NAS would complete my rack. However, I&#39;ve heard Synology&#39;s Rack-based versions are not worth it as they are expensive, but we&#39;ll see.</li><li>Update the Lite 8 PoE switch with a 2.5 GBe one, so I can use the full speed of my U7 Pro Wall. It&#39;s a bonus if it has a PoE input port.</li><li>Mount some APs to the wall for increased security and a streamlined look. Even though the desk stand I designed looks nice, I think having it on the wall is a better option.</li></ul><h2 id="verdict">Verdict</h2><p>It took me around three months to finish this project. Of course, I had this plan for many years, but I&#39;m glad I followed through with it.  I had a few hiccups. Two things that stuck with me were:</p><ul><li>There is no PPPoE setup when using the iPhone or iPad app. I didn&#39;t realize that, but my modem is used in bridge mode, so I need to enter the credentials. However, the iPhone or iPad apps wouldn&#39;t allow it. I plugged my controller into my old switch to fix it and started the installation process from there.</li><li>I had a few power outages. In one case, the Switch didn&#39;t come back online. I thought it was dead. It fixed itself after I unplugged the power cable and put it back. I honestly thought the Switch was dead. I later read that Ubiquit devices are poorly handling power outages. </li></ul><p>However, besides these two things, everything else was superb.</p><figure><img src="https://arslan.io/content/images/2024/09/ScreenShot-2024-09-08-20.08.19@2x.png" alt="" loading="lazy" width="2000" height="928" srcset="https://arslan.io/content/images/size/w600/2024/09/ScreenShot-2024-09-08-20.08.19@2x.png 600w, https://arslan.io/content/images/size/w1000/2024/09/ScreenShot-2024-09-08-20.08.19@2x.png 1000w, https://arslan.io/content/images/size/w1600/2024/09/ScreenShot-2024-09-08-20.08.19@2x.png 1600w, https://arslan.io/content/images/2024/09/ScreenShot-2024-09-08-20.08.19@2x.png 2000w" sizes="(min-width: 720px) 720px"/><figcaption><span>All Ubiquiti devices currently used in my Homelab</span></figcaption></figure><p>So far, the UI and user experience have been great. The devices update themselves seamlessly every night (if there are any updates); I can immediately see what&#39;s happening and which client uses the most bandwidth. I can easily create Firewall rules and change policies. </p><p>I especially like how easy it is to change the context, such as from the list of devices to a Switch, then from there to the Port manager, and so on. For example, the Unifi iOS App has aa AR mode; if you scan the switches or devices, it&#39;ll create an overlay of the devices onto each port. It&#39;s genius.</p><figure><img src="https://arslan.io/content/images/2024/09/6E7461E8-82BD-4412-9EF9-18880B2DF850_1_201_a.jpeg" alt="" loading="lazy" width="2000" height="1003" srcset="https://arslan.io/content/images/size/w600/2024/09/6E7461E8-82BD-4412-9EF9-18880B2DF850_1_201_a.jpeg 600w, https://arslan.io/content/images/size/w1000/2024/09/6E7461E8-82BD-4412-9EF9-18880B2DF850_1_201_a.jpeg 1000w, https://arslan.io/content/images/size/w1600/2024/09/6E7461E8-82BD-4412-9EF9-18880B2DF850_1_201_a.jpeg 1600w, https://arslan.io/content/images/2024/09/6E7461E8-82BD-4412-9EF9-18880B2DF850_1_201_a.jpeg 2190w" sizes="(min-width: 720px) 720px"/><figcaption><span>The AR feature of the Unifi iOS App allows you to see which port is used by which device. </span></figcaption></figure><p>The UI flows with you, and I missed such a user experience. It&#39;s a breath of air.</p><figure><img src="https://arslan.io/content/images/2024/09/ScreenShot-2024-09-08-20.00.02@2x.png" alt="" loading="lazy" width="2000" height="1571" srcset="https://arslan.io/content/images/size/w600/2024/09/ScreenShot-2024-09-08-20.00.02@2x.png 600w, https://arslan.io/content/images/size/w1000/2024/09/ScreenShot-2024-09-08-20.00.02@2x.png 1000w, https://arslan.io/content/images/size/w1600/2024/09/ScreenShot-2024-09-08-20.00.02@2x.png 1600w, https://arslan.io/content/images/2024/09/ScreenShot-2024-09-08-20.00.02@2x.png 2000w"/><figcaption><span>The Unifi Controller has a well design control interface.</span></figcaption></figure><p>Thanks for reading so far. If you have any questions, email me (see my <a href="https://arslan.io/about/" rel="noreferrer">About</a> page for more details) or send me a tweet.</p><p><em>I want to give thanks to Cihangir Savaş, Can Doğancı, Harun Yazar, and Nursena Uzar for helping me build my Homelab Project from scratch and sourcing the components.</em></p>
                    
                </section>


                
            </article>
    </div>
</div></div>
  </body>
</html>
