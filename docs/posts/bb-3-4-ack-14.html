<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.sligocki.com//2024/05/22/bb-3-4-a14.html">Original</a>
    <h1>BB(3, 4) &gt; Ack(14)</h1>
    
    <div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p>Pavel has found a 3-state 4-symbol TM which can compute an “Ackermann-level” function and halts with exactly</p><p>

\[(2 \uparrow^{15} 5) + 14\]

</p><p>non-zero symbols on the tape. With a number this large, Knuth up-arrow format is becoming a bit awkward, so we can approximate this bound as:</p><p>

\[BB(3, 4) &gt; Ack(14)\]

</p><p>where \(Ack(14)\) is the 14th <a href="https://mathworld.wolfram.com/AckermannNumber.html">Ackermann number</a> defined as:</p><p>

\[Ack(n) = n \uparrow^n n\]

</p><p>As far as I know, this is the first TM found “in the wild” that is able to simulate an Ackermann-level function.</p>

<h2 id="the-machine">The Machine</h2>

<p><code>1RB3LB1RZ2RA_2LC3RB1LC2RA_3RB1LB3LC2RC</code></p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>A</td>
      <td>1RB</td>
      <td>3LB</td>
      <td>1RZ</td>
      <td>2RA</td>
    </tr>
    <tr>
      <td>B</td>
      <td>2LC</td>
      <td>3RB</td>
      <td>1LC</td>
      <td>2RA</td>
    </tr>
    <tr>
      <td>C</td>
      <td>3RB</td>
      <td>1LB</td>
      <td>3LC</td>
      <td>2RC</td>
    </tr>
  </tbody>
</table>

<p>It halts with final configuration</p><p>

\[0^\infty \;\; 3^{2 g_{15}^{3}(0) + 1} \;\; 2^{16} \;\; 1 \;\; \text{ Z&gt; } \;\; 0^\infty\]

</p><p>which leaves exactly</p><p>

\[\sigma = 2 g_{15}^{3}(0) + 18 = (2 \uparrow^{15} 5) + 14\]

</p><p>non-zero symbols on the tape. (The function \(g_k(m)\) will be defined below).</p>

<h3 id="attribution">Attribution</h3>

<p>This TM was discovered by Pavel Kropitz (@uni) and shared <a href="https://discord.com/channels/960643023006490684/1095740122139480195/1233140768768524358">on Discord</a> on 25 Apr 2024. His code was not able to specify a human-readable bound on the TM score and it was simply specified as <code>Halt(SuperPowers(13))</code> indicating 13 layers of inductive rules needed to prove it. He began a validation of this result using my new “Inductive Proof Validator” (see discussion at end of article).</p>

<p>I completed this validation and was able to extract the precise definition of \(g_k^n(m)\) on 20 May 2024 (<a href="https://discord.com/channels/960643023006490684/1095740122139480195/1242186781672341514">Discord link</a>) and used that to get a bound of \(\sigma &gt; 2 \uparrow^{15} 3\).</p>

<p>Matthew House (@LegionMammal978) discovered on 22 May 2024 (<a href="https://discord.com/channels/960643023006490684/1095740122139480195/1242864786379771985">Discord link</a>) the remarkably simple closed form evaluation:</p><p>

\[g_k^n(0) = \frac{ 2 \uparrow^k (n+2) }{2} - 2\]

</p><p>which led me to rewrite this article with exact values for \(\sigma\)!</p>

<h2 id="analysis">Analysis</h2>

<p>Let</p><p>

\[B(k, n, m) = 0^\infty \;\; 3^{2m+1} \;\; 2^k \;\; \text{ A&gt; } \;\; 1^n\]

</p><p>then we can prove that</p><p>

\[\begin{array}{lcl}
  0^\infty \;\; \text{A&gt;} \;\; 0^\infty &amp; \xrightarrow{241} &amp; B(16, 3, 0) \;\; 2 \;\; 0^\infty \\
  B(k, n, m) &amp; \to &amp; B(k, 0, g_{k-1}^n(m)) &amp; \text{if } k \ge 1 \\
  B(k, 0, m) \;\; 2 &amp; \xrightarrow{1} &amp; 0^\infty \;\; 3^{2m+1} \;\; 2^k \;\; 1 \;\; \text{Z&gt;} \\
\end{array}\]

</p><p>where</p><p>

\[\begin{array}{l}
  g_0(m) &amp; = &amp; m + 1 \\
  g_{k+1}(m) &amp; = &amp; g_k^{2m+2}(0) \\
\end{array}\]

</p><h3 id="proof-by-double-induction">Proof by Double Induction</h3>

<p>This TM is remarkably simple in the sense that its behavior can be almost completely described by one single rule:</p><p>

\[B(k, n, m) \to B(k, 0, g_{k-1}^n(m))\]

</p><p>but that rule is a whopper requiring double induction to prove!</p>

<hr/>

<p>Lemma 1: For all \(k \ge 1\):</p><p>

\[3 \;\; 2^k \;\; \text{&lt;B} \;\; \xrightarrow{2k+1} \;\; 2^k \;\; \text{&lt;B} \;\; 1\]

</p><p>Corollary 2: For all \(k \ge 1, m \ge 0\):</p><p>

\[3^m \;\; 2^k \;\; \text{&lt;B} \;\; \xrightarrow{(2k+1)m} \;\; 2^k \;\; \text{&lt;B} \;\; 1^m\]

</p><p>Proofs left as an exercise to the reader.</p>

<hr/>

<p>Theorem 3: For all \(k \ge 1, n \ge 0, m \ge 0\):</p><p>

\[B(k, n, m) \to B(k, 0, g_{k-1}^n(m))\]

</p><p>Proof by Induction on \(k\):</p>

<ul>
  <li>Base Case (\(k = 1\))
    <ul>
      <li>Goal: \(\forall n,m \ge 0: B(1, n+1, m) \to B(1, 0, g_0^{n+1}(m))\)</li>
      <li>Proof by induction on \(n\). Left as an exercise to the reader.</li>
    </ul>
  </li>
  <li>Induction Case
    <ul>
      <li>Assume \(H_k: \forall n,m \ge 0: B(k, n, m) \to B(k, 0, g_k^n(m))\)</li>
      <li>Goal: \(\forall n,m \ge 0: B(k+1, n, m) \to B(k+1, 0, g_{k+1}^n(m))\)</li>
      <li>
        <p>Proof by induction on \(n\):</p>

        <ul>
          <li>Base Case (\(n = 0\))
            <ul>
              <li>Trivially true because \(g_{k-1}^0(m) = m\), so \(B(k, n, m) = B(k, 0, g_{k-1}^n(m))\)</li>
            </ul>
          </li>
          <li>Induction Case
            <ul>
              <li>Assume \(H_n: \forall m \ge 0: B(k+1, n, m) \to B(k+1, 0, g_{k+1}^n(m))\)</li>
              <li>Goal: \(\forall m \ge 0: B(k+1, n+1, m) \to B(k+1, 0, g_{k+1}^{n+1}(m))\)</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul><p>

\[\begin{array}{lcl}
B(k+1, n+1, m) &amp; = &amp;
  0^\infty \;\; 3^{2m+1} \;\; 2^{k+1} \;\; \text{A&gt;} \;\; 1^{n+1} \\
&amp; \xrightarrow{1} &amp;
  0^\infty \;\; 3^{2m+1} \;\; 2^{k+1} \;\; \text{&lt;B} \;\; 3 \;\; 1^n \\
&amp; \xrightarrow{(2k+3)(2m+1)} &amp;
  0^\infty \;\; 2^{k+1} \;\; \text{&lt;B} \;\; 1^{2m+1} \;\; 3 \;\; 1^n
    &amp; \text{by Corollary 2} \\
&amp; \xrightarrow{2k+2} &amp;
  0^\infty \;\; 3 \;\; 2^k \;\; \text{A&gt;} \;\; 1^{2m+2} \;\; 3 \;\; 1^n \\
&amp; = &amp; B(k, 2m+2, 0) \;\; 3 \;\; 1^n \\
&amp; \to &amp; B(k, 0, g_k^{2m+2}(0)) \;\; 3 \;\; 1^n
    &amp; \text{by Ind. Hyp. } H_k \\
&amp; = &amp;
  0^\infty \;\; 3^{g_k^{2m+2}(0)} \;\; 2^k \;\; \text{A&gt;} \;\; 3 \;\; 1^n \\
&amp; \xrightarrow{1} &amp;
  0^\infty \;\; 3^{g_k^{2m+2}(0)} \;\; 2^{k+1} \;\; \text{A&gt;} \;\; 1^n \\
&amp; = &amp; B(k+1, n, g_k^{2m+2}(0)) = B(k+1, n, g_{k+1}(m)) \\
&amp; \to &amp; B(k+1, 0, g_{k+1}^n(g_{k+1}(m)))
    &amp; \text{by Ind. Hyp. } H_n \\
&amp; = &amp; B(k+1, 0, g_{k+1}^{n+1}(m)) \\
\end{array}\]

</p><p>QED</p>

<h3 id="exact-values">Exact Values</h3>

<p>Through what appears to be a remarkable series of coincidences, there is a relatively simple closed form evaluation of \(g_k\) using only Knuth up-arrows and arithmetic:</p>

<p>Theorem: For all \(k \ge 0, m \ge 0\):</p><p>

\[2 g_{k+1}(m) + 4 = 2 \uparrow^k (2m+4)\]

</p><p>(where we define \(a \uparrow^0 b = ab\))</p>

<p>Proof by Induction on \(k\):</p>

<ul>
  <li>Base case (\(k = 0\)):</li>
</ul><p>

\[\begin{array}{l}
  g_1(m)        &amp; = &amp; g_0^{2m+2}(0) &amp; = &amp; 2m+2 \\
  2 g_1(m) + 4  &amp; = &amp; 2 (2m+2) + 4 &amp; = &amp; 4m + 8 &amp; = &amp; 2 \uparrow^0 (2m+4) \\
\end{array}\]

</p><ul>
  <li>Inductive case: Assume \(\forall m \ge 0: 2 g_{k+1}(m) + 4 = 2 \uparrow^k (2m+4)\):</li>
</ul><p>

\[\begin{array}{l}
  2 g_{k+1}(m) + 4    &amp; = &amp; 2 \uparrow^k (2m+4) \\
  2 g_{k+1}^n(m) + 4  &amp; = &amp; (2 \uparrow^k)^n (2m+4) \\
  2 g_{k+2}(m) + 4    &amp; = &amp; g_{k+1}^{2m+2}(0) = (2 \uparrow^k)^{2m+2} 4 = (2 \uparrow^k)^{2m+2} (2 \uparrow^k 2) \\
                      &amp; = &amp; 2 \uparrow^{k+1} (2m+4) \\
\end{array}\]

</p><p>QED</p>

<p>Note: This depends upon the coincidence that \(2 \uparrow^k 2 = 4\) for all \(k\). If the parameters had been slightly different and we’d ended up with \((2 \uparrow^k)^{2m+2} 5\) above, I don’t think it would have been possible to get a closed form expression.</p>

<p>Corollary: For all \(k \ge 0, n \ge 0\):</p><p>

\[2 g_k^n(0) + 4 = 2 \uparrow^k (n+2)\]

</p><p>From which it follows directly that:</p><p>

\[\sigma = 2 g_{15}^{3}(0) + 18 = (2 \uparrow^{15} 5) + 14\]

</p><h2 id="permutations">Permutations</h2><p>

\[\begin{array}{lcl}
  0^\infty \;\; \text{B&gt;} \;\; 0^\infty &amp; \xrightarrow{86} &amp; B(7, 3, 0) \;\; 2 \;\; 0^\infty \\
  0^\infty \;\; \text{C&gt;} \;\; 0^\infty &amp; \xrightarrow{20} &amp; B(1, 3, 0) \;\; 2 \;\; 0^\infty \\
\end{array}\]

</p><p>Therefore, we can see that if we switch to:</p>
<ul>
  <li>Starting in state <code>B</code>, the TM halts with a score of \(\sigma_B = 2 g_6^3(0) + 9 = (2 \uparrow^6 5) + 5\)</li>
  <li>Starting in state <code>C</code>, the TM halts with a score of \(\sigma_C = 2 g_0^3(0) + 3 = (2 \uparrow^0 5) - 1 = 9\) (which it does at step 72).</li>
</ul>

<p>This first permutation (start state <code>B</code>) appears to be the second best known BB(3, 4) TM. Converted into TNF it is:</p>

<p><code>1RB3RB1LC2LA_2LA2RB1LB3RA_3LA1RZ1LC2RA</code></p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>A</td>
      <td>1RB</td>
      <td>3RB</td>
      <td>1LC</td>
      <td>2LA</td>
    </tr>
    <tr>
      <td>B</td>
      <td>2LA</td>
      <td>2RB</td>
      <td>1LB</td>
      <td>3RA</td>
    </tr>
    <tr>
      <td>C</td>
      <td>3LA</td>
      <td>1RZ</td>
      <td>1LC</td>
      <td>2RA</td>
    </tr>
  </tbody>
</table>

<h2 id="not-collatz">Not Collatz</h2>

<p>One interesting thing about this TM is how surprisingly simple it is. For example, the fact that it does not have any Collatz-like rules (rules which act differently depending on the remainder of some value). Is this the end of the domination of Collatz-like TMs? It is far too early to know, but my guess is that there are Collatz-like Ackermann-level TMs waiting for us, but we are not seeing them right away because of selection bias. Perhaps this was the first Ackermann-level TM found because it is simple enough to be proven halting without having to implement modular arithmetic on Ackermann-level functions.</p>

<h2 id="inductive-proof-validator">Inductive Proof Validator</h2>

<p>This TM was the perfect test case for an “inductive proof” validator I am currently developing. The goal of this project is to develop a standardized certificate format for “inductive proofs” (an umbrella term for all the sort of forward-reasoning, rule-based analyses that are ubiquitous on this blog). The idea is that anyone with an “inductive decider” could write out their rules in this format and then this validator can check these proofs. The system is still very clunky and not ready for prime time, but I have been able (with a little elbow grease) to use it to prove the behavior of many TMs including <a href="https://github.com/sligocki/busy-beaver/blob/49864afd99263b6f18bec0dee028a3b56aa70936/rust/src/validator.rs#L978">this one</a>.</p>





  </div>
</article>

      </div>
    </div></div>
  </body>
</html>
