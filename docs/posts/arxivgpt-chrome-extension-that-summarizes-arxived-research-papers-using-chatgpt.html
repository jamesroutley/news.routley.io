<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/hunkimForks/chatgpt-arxiv-extension">Original</a>
    <h1>ArxivGPT: Chrome extension that summarizes arxived research papers using ChatGPT</h1>
    
    <div id="readability-page-1" class="page"><div>
  <p>I typically start new front-end prototypes with a single HTML file that I view using a <code>file://</code> URL.
I enjoy this practice of incrementally growing my projects, so I’ll keep working in that single file for as long as I can.
Once it becomes unwieldy, I’ll split out the CSS and JavaScript into dedicated files.
Then when manual DOM manipulation gets too complex, I’ll reach for a front-end framework.
Until recently though, I wasn’t sure how to make this step feel incremental.
Most framework installations recommend <code>npm install</code>, which means my project will now depend on NodeJS.
Some frameworks have a hosted CDN option, but I’m similarly uncomfortable accepting that infrastructural dependency.
Ideally, I’d just grab the framework files, import them from my JavaScript, and then carry on with my <code>file://</code> URL.</p>

<p>Well, creating that ideal setup was easier than I expected.
My first key discovery was the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script/type/importmap"><code>&lt;script type=importmap&gt;</code></a> element.
Import maps let you write JavaScript modules that depend on named packages without using a bundler.
The end result is a SPA that feels modern and standard, but without the <a href="https://www.solidjs.com/tutorial/introduction_basics">need for a compilation step</a>:</p>

<div><div><pre><code><span>&lt;!DOCTYPE html&gt;</span>
<span>&lt;script </span><span>type=</span><span>importmap</span><span>&gt;</span>
  <span>{</span>
    <span>&#34;</span><span>imports</span><span>&#34;</span><span>:</span> <span>{</span>
      <span>&#34;</span><span>solid-js</span><span>&#34;</span><span>:</span> <span>&#34;</span><span>/node_modules/solid-js/dist/solid.js</span><span>&#34;</span><span>,</span>
      <span>&#34;</span><span>solid-js/html</span><span>&#34;</span><span>:</span> <span>&#34;</span><span>/node_modules/solid-js/html/dist/html.js</span><span>&#34;</span><span>,</span>
      <span>&#34;</span><span>solid-js/web</span><span>&#34;</span><span>:</span> <span>&#34;</span><span>/node_modules/solid-js/web/dist/web.js</span><span>&#34;</span>
    <span>}</span>
  <span>}</span>
<span>&lt;/script&gt;</span>
<span>&lt;script </span><span>type=</span><span>module</span><span>&gt;</span>
  <span>// standard import declarations thanks to the import map above</span>
  <span>import</span> <span>html</span> <span>from</span> <span>&#39;</span><span>solid-js/html</span><span>&#39;</span>
  <span>import</span> <span>{</span> <span>render</span> <span>}</span> <span>from</span> <span>&#39;</span><span>solid-js/web</span><span>&#39;</span>

  <span>const</span> <span>HelloWorld</span> <span>=</span> <span>()</span> <span>=&gt;</span> <span>{</span>
    <span>// tagged template literals feel close enough to JSX (the defacto standard)</span>
    <span>return</span> <span>html</span><span>`&lt;div&gt;Hello World!&lt;/div&gt;`</span>
  <span>}</span>

  <span>render</span><span>(</span><span>HelloWorld</span><span>,</span> <span>document</span><span>.</span><span>getElementById</span><span>(</span><span>&#39;</span><span>app</span><span>&#39;</span><span>))</span>
<span>&lt;/script&gt;</span>
<span>&lt;main</span> <span>id=</span><span>app</span><span>&gt;&lt;/main&gt;</span>
</code></pre></div></div>

<p>That’s almost all of it.
This HTML file can be interpreted by most modern browsers, but it references files in <code>/node_modules/solid-js</code> which must be installed.
I <em>could</em> do this with <code>npm install</code>, but it’s surprisingly straightforward to download the package directly:</p>

<div><div><pre><code>download-package<span>()</span> <span>{</span>
  <span>set</span> <span>-eo</span> pipefail
  <span>local </span><span>PACKAGE_NAME</span><span>=</span><span>$1</span>
  <span>local </span><span>PACKAGE_VERSION</span><span>=</span><span>$2</span>
  <span>local </span><span>PACKAGE_CHECKSUM</span><span>=</span><span>$3</span>
  <span>local </span><span>PACKAGE_FILE</span><span>=</span><span>&#34;</span><span>$PACKAGE_NAME</span><span>-</span><span>$PACKAGE_VERSION</span><span>.tgz&#34;</span>

  <span># download the tarball from NPM&#39;s registry</span>
  <span>mkdir</span> <span>-p</span> <span>&#34;node_modules/</span><span>$PACKAGE_NAME</span><span>&#34;</span>
  curl <span>&#34;https://registry.npmjs.org/</span><span>$PACKAGE_NAME</span><span>/-/</span><span>$PACKAGE_FILE</span><span>&#34;</span> <span>&gt;</span> <span>&#34;node_modules/</span><span>$PACKAGE_FILE</span><span>&#34;</span>

  <span># verify the tarball&#39;s SHA512 checksum</span>
  <span>local </span><span>PACKAGE_SHA</span><span>=</span><span>`</span>shasum <span>-b</span> <span>-a</span> 512 <span>&#34;node_modules/</span><span>$PACKAGE_FILE</span><span>&#34;</span> | <span>awk</span> <span>&#39;{ print $1 }&#39;</span> | xxd <span>-r</span> <span>-p</span> | <span>base64</span><span>`</span>
  <span>[</span> <span>&#34;</span><span>$PACKAGE_SHA</span><span>&#34;</span> <span>==</span> <span>&#34;</span><span>$PACKAGE_CHECKSUM</span><span>&#34;</span> <span>]</span>

  <span># uncompress the package into a directory matching its name</span>
  <span>gunzip</span> <span>-dc</span> <span>&#34;node_modules/</span><span>$PACKAGE_FILE</span><span>&#34;</span> | <span>tar</span> <span>-xf</span> - <span>--strip-components</span> 1 <span>-C</span> <span>&#34;node_modules/</span><span>$PACKAGE_NAME</span><span>&#34;</span>
<span>}</span>

<span># install by manually providing metadata from https://registry.npmjs.org/solid-js</span>
download-package solid-js 1.6.6 <span>&#34;5x33mEbPI8QLuywvFjQP4krjWDr8xiYFgZx9KCBH7b0ZzypQCHaUubob7bK6i+1u6nhaAqhWtvXS587Kb8DShA==&#34;</span>
</code></pre></div></div>

<p>That’s all of it: my bundler-free setup for writing modern JavaScript apps.
When I need to add a dependency, I invoke <code>download-package</code> and then declare it in the import map.
I like this setup because it feels like I’m only using the bits of the NodeJS ecosystem that I need right now.
Later in the project, I could opt into more of what NodeJS has to offer, but it’s neat that I’m not forced into it just to use a UI framework.</p>


</div></div>
  </body>
</html>
