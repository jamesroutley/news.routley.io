<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://discuss.python.org/t/pep-810-explicit-lazy-imports/104131?page=23">Original</a>
    <h1>Python Steering Council unanimously accepts &#34;PEP 810, Explicit lazy imports&#34;</h1>
    
    <div id="readability-page-1" class="page"><div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
      <meta itemprop="headline" content="PEP 810: Explicit lazy imports"/>
      
      <meta itemprop="datePublished" content="2025-10-03T11:50:19Z"/>
        <meta itemprop="articleSection" content="PEPs"/>
      <meta itemprop="keywords" content=""/>
      

          <meta itemprop="text" content=":waving_hand: Hi everyone, 
We are very exited to share with you PEP 810: Explicit lazy imports: We’re proposing an opt-in lazy import syntax that defers module loading until first use, aiming for faster startup, lower m&amp;hellip;"/>

          <div id="post_450" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p>



              <span>
                  <time itemprop="datePublished" datetime="2025-10-28T08:45:55Z">
                    October 28, 2025,  8:45am
                  </time>
                  <meta itemprop="dateModified" content="2025-10-28T08:45:55Z"/>
              <span itemprop="position">450</span>
              </span>
            </p>
            <div itemprop="text">
              
<p>How about checking <code>sys.modules</code>? You could do that in a subprocess as part of your unit tests.</p>
<pre data-code-wrap="python"><code>&gt;&gt;&gt; lazy import email
&gt;&gt;&gt; import sys
&gt;&gt;&gt; sys.modules[&#39;email&#39;]
Traceback (most recent call last):
  File &#34;&lt;console&gt;&#34;, line 1, in &lt;module&gt;
KeyError: &#39;email&#39;
&gt;&gt;&gt; email
&lt;module &#39;email&#39; from &#39;/lib/python315.zip/email/__init__.pyc&#39;&gt;
&gt;&gt;&gt; sys.modules[&#39;email&#39;]
&lt;module &#39;email&#39; from &#39;/lib/python315.zip/email/__init__.pyc&#39;&gt;
</code></pre>
            </div>

            


            
          </div>
          <div id="post_452" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" rel="nofollow" href="https://discuss.python.org/u/mikeshardmind"><span itemprop="name">mikeshardmind</span></a>
                (Michael H)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2025-10-28T17:39:13Z">
                    October 28, 2025,  5:39pm
                  </time>
                  <meta itemprop="dateModified" content="2025-10-28T17:39:13Z"/>
              <span itemprop="position">452</span>
              </span>
            </p>
            <div itemprop="text">
              
<p>I don’t think there’s a good way to do this automatically on behalf of users, because it requires knowing whether or not their use intended to import.</p>
<p>I maintain different internal tools at work, some where we eagerly import things, including intentionally triggering lazy loaders in scipy, because it’s part of a long lived internal api, so we’d rather pay a predictable extra cost on startup to not have the first api request that hits a lazy code path be slower, but others where we want everything not used to not be imported (internal, frequently used cli tools. We don’t want our nondev users of these tools feeling like these are sluggish to respond and have to wait for someone else to fix it for them)</p>
<p>In terms of ensuring certain things are lazy or eager, once you define the behavior that’s desirable for your use case, you can write tests for it so long as it’s possible to introspect the lazy objects. The pep authors have made changes that address it being possible to check if you have the actual object or the deferal of the object, so as long as that remains the case, after whatever changes are required during implementation and acceptance, my answer to this would be to write a test for this if you have to care.</p>
<p>I’d be mildly in favor of a function in importlib that the only purpose of was to give a yes or no on if a module has been eagerly imported or not yet if it’s undesirable to have users poking at this themselves (it might be prudent to allow the implementation details to not be guaranteed on this in case issues arise later)</p>
            </div>

            


            
          </div>
          <div id="post_453" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" rel="nofollow" href="https://discuss.python.org/u/brettcannon"><span itemprop="name">brettcannon</span></a>
                (Brett Cannon)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2025-10-28T18:35:29Z">
                    October 28, 2025,  6:35pm
                  </time>
                  <meta itemprop="dateModified" content="2025-10-28T18:35:29Z"/>
              <span itemprop="position">453</span>
              </span>
            </p>
            <div itemprop="text">
              
<p>If the lazy module type gets exposed in <code>types</code> then I would expect an <code>isinstance()</code> check to be enough to determine if a module has been reified or not.</p>
            </div>

            


            
          </div>
          <div id="post_454" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" rel="nofollow" href="https://discuss.python.org/u/dg-pb"><span itemprop="name">dg-pb</span></a>
                (dg-pb)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2025-10-28T20:18:25Z">
                    October 28, 2025,  8:18pm
                  </time>
                  <meta itemprop="dateModified" content="2025-10-28T20:18:25Z"/>
              <span itemprop="position">454</span>
              </span>
            </p>
            <div itemprop="text">
              
<p>Thank you for your patience and civility.</p>

<p>Don’t think I am stopping this thread.</p>
<p>In any case, I have opened <a href="https://discuss.python.org/t/alternative-path-for-explicit-lazy-imports/104608">Alternative path for explicit lazy imports</a> with complete lay out.</p>
<p>If anyone wants to discuss anything that I have said in this thread, please reply there, so not to take any more space here.</p>
            </div>

            

                

            
          </div>
          <div id="post_455" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" rel="nofollow" href="https://discuss.python.org/u/JoBe"><span itemprop="name">JoBe</span></a>
                (jobe)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2025-10-30T10:05:06Z">
                    October 30, 2025, 10:05am
                  </time>
                  <meta itemprop="dateModified" content="2025-10-30T10:05:06Z"/>
              <span itemprop="position">455</span>
              </span>
            </p>
            <p>Perhaps the slow-mode (8h per post) can be removed now that there is a different threat, as to allow the natural discussion of <strong>PEP 810</strong> (not other ideas) to continue?</p>

            


            
          </div>
          <div id="post_456" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" rel="nofollow" href="https://discuss.python.org/u/ambv"><span itemprop="name">ambv</span></a>
                (Łukasz Langa)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2025-10-30T10:34:27Z">
                    October 30, 2025, 10:34am
                  </time>
                  <meta itemprop="dateModified" content="2025-10-30T10:34:27Z"/>
              <span itemprop="position">456</span>
              </span>
            </p>
            <p>Done, let’s see how it goes.</p>

            


            
          </div>
          <div id="post_457" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" rel="nofollow" href="https://discuss.python.org/u/jamestwebber"><span itemprop="name">jamestwebber</span></a>
                (James Webber)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2025-10-30T13:31:38Z">
                    October 30, 2025,  1:31pm
                  </time>
                  <meta itemprop="dateModified" content="2025-10-30T13:31:38Z"/>
              <span itemprop="position">457</span>
              </span>
            </p>
            

            


            
          </div>
          <div id="post_458" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" rel="nofollow" href="https://discuss.python.org/u/nas"><span itemprop="name">nas</span></a>
                (Neil Schemenauer)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2025-10-30T16:40:26Z">
                    October 30, 2025,  4:40pm
                  </time>
                  <meta itemprop="dateModified" content="2025-10-30T16:40:26Z"/>
              <span itemprop="position">458</span>
              </span>
            </p>
            <div itemprop="text">
              <p>I have a couple questions about what should be suggested best practice for library authors.  First, if I want to add lazy import functionality to my library but still support old versions of Python, how could I do it?  There is no <code>__future__</code> import and even if I put the lazy import inside a <code>if sys.version &gt; (X, Y):</code> block, I would guess you still get a syntax error.</p>
<p>It would be nice if we could have a recommended way to do this and it’s not too clunky.  Or, do we think using global lazy import control is sufficient?  To me, it seems better that libraries are able to opt-in to the feature yet still be usable by old Python versions.  If we had <code>importlib.lazy_import_module()</code> then we could use that.</p>
<p>A related question would be what is our advice about making a library work with <code>-X lazy_imports=&lt;mode&gt;</code> set to either <code>all</code> or <code>none</code>.  My gut feeling is it would be best practice if libraries work with either mode.  Ideally you would have CI tests that run tests in both modes.  However, one thing that seems likely to trip that up is circular imports.  In my experience, a lazy import is a convenient way to break the circularity.  However, it would break if you set the global mode to <code>none</code>.</p>
<p>This might be solvable with another function, e.g. have both <code>importlib.lazy_import_module()</code> and <code>importlib.maybe_lazy_import_module()</code>.  If I’m breaking circular imports, I can use the function where laziness doesn’t get disabled by the global mode.</p>
            </div>

            


            
          </div>
          <div id="post_459" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" rel="nofollow" href="https://discuss.python.org/u/ImogenBits"><span itemprop="name">ImogenBits</span></a>
                (Imogen)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2025-10-30T17:03:10Z">
                    October 30, 2025,  5:03pm
                  </time>
                  <meta itemprop="dateModified" content="2025-10-30T17:03:10Z"/>
              <span itemprop="position">459</span>
              </span>
            </p>
            <div itemprop="text">
              
<p>That’s the idea behind the <code>__lazy_modules__</code> dunder. If you want to have lazy imports in 3.15 and eager in older versions, you can just use the syntax of regular imports and add the modules you want to be lazy to the list. Older versions will just ignore the variable while 3.15 recognises it as enabling lazy imports without any new syntax.</p>
<p>Regarding working with the global flags: I don’t think the intent is that libraries work with the flags set arbitrarily. The idea behind the flags is that if you have some tightly controlled setup where you can somehow guarantee that everything works lazily/eagerly then you can use them, but in general you don’t touch them. There are plenty of perfectly legitimate coding practices that break if you force the import to be lazy or eager.</p>
<p>I don’t think we need functions that differentiate between “lazy but only if the global flag isn’t set” abd “actually always lazy”. If you’re using the flag you’re intentionally changing the semantics of what your libraries want. It might end up working fine in your use case, but it shouldn’t be encouraged to defensively code around that.</p>
            </div>

            


            
          </div>
          <div id="post_460" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" rel="nofollow" href="https://discuss.python.org/u/nas"><span itemprop="name">nas</span></a>
                (Neil Schemenauer)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2025-10-30T17:31:11Z">
                    October 30, 2025,  5:31pm
                  </time>
                  <meta itemprop="dateModified" content="2025-10-30T17:31:11Z"/>
              <span itemprop="position">460</span>
              </span>
            </p>
            <div itemprop="text">
              
<p>Ah, I see.  It’s a long PEP, to be fair. <img src="https://emoji.discourse-cdn.com/apple/wink.png?v=15" title=":wink:" alt=":wink:" loading="lazy" width="20" height="20"/> That seems like a good solution.</p>
            </div>

            


            
          </div>
          <div id="post_461" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" rel="nofollow" href="https://discuss.python.org/u/hprodh"><span itemprop="name">hprodh</span></a>
                (hprodh)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2025-10-30T19:52:40Z">
                    October 30, 2025,  7:52pm
                  </time>
                  <meta itemprop="dateModified" content="2025-10-30T19:52:40Z"/>
              <span itemprop="position">461</span>
              </span>
            </p>
            <div itemprop="text">
              <p>The <code>__lazy__</code> attribute could also fit this, assuming paths are resolved at lazy initialization eagerly, a module could have a <code>__lazy__.py</code> file that is eagerly executed, thus providing mitigability of eager checks and lazy heavy ops.</p>
<p>Also this</p>

<p>could be</p>
<pre data-code-wrap="python"><code>assert hasattr(mod, &#39;__lazy__&#39;)
</code></pre>
            </div>

            


            
          </div>
          <div id="post_462" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" rel="nofollow" href="https://discuss.python.org/u/Jost"><span itemprop="name">Jost</span></a>
                (Jost Migenda)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2025-10-30T22:57:03Z">
                    October 30, 2025, 10:57pm
                  </time>
                  <meta itemprop="dateModified" content="2025-10-30T22:57:03Z"/>
              <span itemprop="position">462</span>
              </span>
            </p>
            <div itemprop="text">
              
<p>They are not. See “<a href="https://peps.python.org/pep-0810/#making-lazy-imports-find-the-module-without-loading-it" rel="noopener nofollow ugc">Making <code>lazy</code> imports find the module without loading it</a>” under the Rejected Ideas section for the detailed reasoning.</p>
            </div>

            


            
          </div>
          <div id="post_463" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" rel="nofollow" href="https://discuss.python.org/u/ABa"><span itemprop="name">ABa</span></a>
                (Arno Baumfalk)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2025-11-03T13:55:13Z">
                    November 3, 2025,  1:55pm
                  </time>
                  <meta itemprop="dateModified" content="2025-11-03T13:55:13Z"/>
              <span itemprop="position">463</span>
              </span>
            </p>
            <div itemprop="text">
              <p>Just a short idea concerning library support of lazy imports.</p>
<p>Something like</p>
<p><code>if is_imported_lazily():</code></p>
            </div>

            


            
          </div>
          <div id="post_464" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" rel="nofollow" href="https://discuss.python.org/u/kapinga"><span itemprop="name">kapinga</span></a>
                (Jon Harding)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2025-11-03T14:17:15Z">
                    November 3, 2025,  2:17pm
                  </time>
                  <meta itemprop="dateModified" content="2025-11-03T14:17:15Z"/>
              <span itemprop="position">464</span>
              </span>
            </p>
            <div itemprop="text">
              
<p>I’ll quote my earlier post on this topic (which, to be fair, was almost 300 posts ago!)</p>

<p>And if you’re worried about users turning on the “global lazy imports” option, the pep makes clear this is a “you broke it, you fix it” problem and not something library authors need to concern themselves with supporting.</p>
<p>(And the fact that you can check the type of imported modules without reifying gives you ways to do runtime checking of import types if you’re really paranoid.)</p>
            </div>

            


            
          </div>
          <div id="post_465" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" rel="nofollow" href="https://discuss.python.org/u/ferdnyc"><span itemprop="name">ferdnyc</span></a>
                (FeRD (Frank Dana))
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2025-11-03T14:37:03Z">
                    November 3, 2025,  2:37pm
                  </time>
                  <meta itemprop="dateModified" content="2025-11-03T14:37:03Z"/>
              <span itemprop="position">465</span>
              </span>
            </p>
            <div itemprop="text">
              

<p>And the chance of causing unexpected problems when attempting to enforce those requirements programmatically is high enough to make such enforcement a bad idea, IMHO. Like how calling <code>sys.exit(1)</code> when user code imports an “internal-use only module” that’s not meant to be imported directly may <em>seem</em> like a good idea, <a href="https://discuss.python.org/t/guidance-on-importability-of-installed-modules/25422">but it crashes <code>pydoc -k</code> scans</a>.</p>
            </div>

            


            
          </div>
          <div id="post_466" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" rel="nofollow" href="https://discuss.python.org/u/barry"><span itemprop="name">barry</span></a>
                (Barry Warsaw)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2025-11-03T16:21:21Z">
                    November 3, 2025,  4:21pm
                  </time>
                  <meta itemprop="dateModified" content="2025-11-03T16:21:21Z"/>
              <span itemprop="position">466</span>
              </span>
            </p>
            <div itemprop="text">
              <p>Dear PEP 810 authors.  The Steering Council is happy to unanimously accept “PEP 810, Explicit lazy imports”.  Congratulations!  We appreciate the way you were able to build on and improve the previously discussed (and rejected) attempt at lazy imports as proposed in PEP 690.</p>
<p>We have recommendations about some of the PEP’s details, a few suggestions for filling a couple of small gaps, and we have made decisions on the alternatives that you’ve left to the SC, all of which I’ll outline below.  If you have any questions, please do reach out to the SC for clarification, either here, on the SC tracker, or in office hours.</p>
<p>Use <code>lazy</code> as the keyword.  We debated many of the given alternatives (and some we came up with ourselves), and ultimately agreed with the PEP’s choice of the <code>lazy</code> keyword.  The closest challenger was <code>defer</code>, but once we tried to use that in all the places where the term is visible, we ultimately didn’t think it was as good an overall fit.  The same was true with all the other alternative keywords we could come up with, so… <strong><code>lazy</code> it is</strong>!</p>
<p>What about <code>from foo lazy import bar</code>?  <strong>Nope!</strong>  We like that in both module imports and <code>from</code>-imports that the <code>lazy</code> keyword is the first thing on the line.  It helps to visually recognize lazy imports of both varieties.</p>
<p>Leveraging a subclass of dict.  We don’t see a need for this complicated alternative; please add this to the rejected ideas.</p>
<p>Allowing <code>’*’</code> in <code>__lazy_modules__</code>.  We agree with the rationale for rejecting this idea; it can always be added later if needed.</p>
<p>One thing that the PEP does not mention is <code>.pth</code> files, which the <a href="https://docs.python.org/3/library/site.html">site.py</a> module processes, and which has some special handling for lines that begin with the string <code>&#39;import&#39;</code> followed by a space or tab.  It doesn’t make much sense for <code>.pth</code> files to support lazy imports, so we suggest that the PEP explicitly says that this special handling in <code>.pth</code> files will not be adapted to handle lazy imports.</p>
<p>There currently is no way to get the active filter mode, so please add a <code>sys.get_lazy_imports()</code> function.  Also, do you think appending <code>_mode</code> to their names makes the purpose of these functions clearer?  We leave that up to the PEP authors.</p>
<p>The PEP should be explicit about the precedence order between the different ways to set the mode, i.e. <code>$PYTHON_LAZY_IMPORTS=&lt;mode&gt;</code>, <code>-X lazy_imports=&lt;mode&gt;</code>, and <code>sys.set_lazy_imports()</code>.  In all expectation, it will follow the same precedence order as other similar settings, but the PEP should be explicit.</p>
<p>We agree that the PEP should take no position on any style recommendations for sorting lazy imports.  While we generally like the idea of grouping lazy imports together, let’s leave that up to the linters and auto-formatters to decide the details.</p>
<p>That should just about cover it.  Again, thank you for your work on this, as it’s been a feature so many in the Python community have wanted for so long.  Given the earlier attempts and existing workarounds, we think this strikes exactly the right balance.</p>
<p>-Barry, on behalf of the Python Steering Council</p>



            </div>

            

                

            
          </div>
          <div id="post_467" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" rel="nofollow" href="https://discuss.python.org/u/szr"><span itemprop="name">szr</span></a>
                (Shlomo)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2025-11-03T18:20:21Z">
                    November 3, 2025,  6:20pm
                  </time>
                  <meta itemprop="dateModified" content="2025-11-03T18:27:51Z"/>
              <span itemprop="position">467</span>
              </span>
            </p>
            <p>Congrats! Looking forward to using this feature!</p>

            


            
          </div>
    </div></div>
  </body>
</html>
