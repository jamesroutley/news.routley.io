<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://matthewfelgate.wordpress.com/2022/12/14/turn-the-radio-volume-down-for-adverts-and-djs-talking/">Original</a>
    <h1>Turn the radio volume down for adverts and DJs talking</h1>
    
    <div id="readability-page-1" class="page"><article id="post-766">
			<!-- .entry-header -->		<!-- .entry-meta -->
	
	<div>
		
<p>A script for automatically lowering the volume during radio advertisements and DJ announcements and turns the volume back up when songs are playing. It controls a <a href="https://www.sonos.com/">Sonos</a> speaker using the <a href="https://pypi.org/project/soco-cli/">Soco-cli</a> Python library when <a href="https://tunein.com/">Tunein </a>is being used.</p>


<div><pre title=""># Radio control.
# Sets volume low when radio is not playing a song (Talking or Ad Break) on TuneIn.
# Docs https://github.com/avantrec/soco-cli/blob/v0.4.52/README.md
import time
from soco_cli import api

quiet_volume = &#34;15&#34; # Volume for Advertising breaks or Talking.

# Get current volume to set volume to after we have turned it down
exit_code, previous_volume, error = api.run_command(&#34;Main Office&#34;, &#34;volume&#34;)
print(&#34;Starting volume is &#34;, previous_volume)

while(True):

    # See if someone has changed the volume and record that
    exit_code, current_volume, error = api.run_command(&#34;Main Office&#34;, &#34;volume&#34;)
    if int(current_volume) &gt; int(quiet_volume):
        previous_volume = current_volume
        print(&#34;Volume changed to &#34;, previous_volume)

    # Find what song if any is playing
    exit_code, output, error = api.run_command(&#34;Main Office&#34;, &#34;track&#34;)
    print(output)

    # See if track details have an artist which tells us a song is playing
    if &#34;Artist&#34; in output:
        print (&#34;Playing a song. Set volume to&#34;, previous_volume,&#34;.&#34;)
        exit_code, new_volume, error = api.run_command(&#34;Main Office&#34;, &#34;volume&#34;, previous_volume)
    else:
        print (&#34;Not playing a song. Set volume to&#34;, quiet_volume)
        exit_code, text, error = api.run_command(&#34;Main Office&#34;, &#34;volume&#34;, quiet_volume)

    time.sleep(5)
</pre></div>			
			
				</div><!-- .entry-content -->

	<!-- .entry-footer -->

	<div>
			<!-- .entry-auhtor -->
		<p><strong>Published</strong>
			<time datetime="2022-12-14T21:06:31+00:00">December 14, 2022</time><time datetime="2022-12-14T21:08:27+00:00">December 14, 2022</time>		</p><!-- .site-posted-on -->
	</div>
</article></div>
  </body>
</html>
