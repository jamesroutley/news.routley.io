<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/openziti/goroutine-analyzer">Original</a>
    <h1>Show HN: Goroutine-analyzer: A visual goroutine stack dump debugging tool</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<h2 dir="auto"><a id="user-content-overview" aria-hidden="true" href="#overview"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Overview</h2>
<p dir="auto">This is a GUI tool for helping analyze golang goroutine dumps. It has the following features:</p>
<ul dir="auto">
<li>Working with multiple dumps</li>
<li>Grouping, extracting or hiding similar goroutines, either manually or automatically</li>
<li>Regex based grouping</li>
</ul>
<p dir="auto">The tool was written to support production deployments of <a href="https://github.com/openziti/ziti">OpenZiti</a>.
It works well together with the <a href="https://github.com/openziti/agent">agent library</a> which supports
debugging operations such as extracting stackdumps and getting pprof dumps.</p>
<p dir="auto">The tool is written in Java for expediency on the UI front.</p>
<h2 dir="auto"><a id="user-content-installation" aria-hidden="true" href="#installation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h2>
<p dir="auto">Installers can be downloaded for the latest release at <a href="https://github.com/openziti/goroutine-analyzer/releases/latest">https://github.com/openziti/goroutine-analyzer/releases/latest</a></p>
<p dir="auto">The following are available:</p>
<ul dir="auto">
<li>Windows x64</li>
<li>MacOS x64
<ul dir="auto">
<li>MacOS M1 support will be provided once GitHub actions provides M1 runners. In the meantime, you can use an
application bundle or just clone and run.</li>
</ul>
</li>
<li>Linux .deb
<ul dir="auto">
<li>rpm builds are currently unavailable as GitHub actions only provides ubuntu runners. If anyone is interested
an appimage build would probably be straightforward to add.</li>
</ul>
</li>
<li>Application bundles with start scripts if Java is pre-installed on your system</li>
</ul>
<p dir="auto">The application can also be run from source by cloning the repository and running <code>./gradlew run</code>. I run with
Java 17, but it will likely work with older versions as well.</p>
<h2 dir="auto"><a id="user-content-how-to-use" aria-hidden="true" href="#how-to-use"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How to use</h2>
<h3 dir="auto"><a id="user-content-opening-stack-dumps" aria-hidden="true" href="#opening-stack-dumps"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Opening Stack Dumps</h3>
<p dir="auto">Stack dumps can be opened from the file system. Multiple can be selected, and more can be added to the open set at any
time.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/openziti/goroutine-analyzer/blob/main/doc/opening.png"><img src="https://github.com/openziti/goroutine-analyzer/raw/main/doc/opening.png" alt="Open Dialog" title="Open Dialog"/></a></p>
<p dir="auto">Once opened, the stack dumps will be shown unfiltered. Here the set of routines has been expanded. Whatever
goroutine group or individual goroutine has been selected will be shown in the window on the right.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/openziti/goroutine-analyzer/blob/main/doc/initial-view.png"><img src="https://github.com/openziti/goroutine-analyzer/raw/main/doc/initial-view.png" alt="Initial View" title="Initial View"/></a></p>
<h3 dir="auto"><a id="user-content-auto-sorting-goroutines" aria-hidden="true" href="#auto-sorting-goroutines"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Auto-Sorting Goroutines</h3>
<p dir="auto">Usually the first thing I&#39;ll do when looking at a stack dump is to group all the similar gorotines together. This
can be done as follows:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/openziti/goroutine-analyzer/blob/main/doc/extract-duplicated.png"><img src="https://github.com/openziti/goroutine-analyzer/raw/main/doc/extract-duplicated.png" alt="Extracting Duplicated Goroutines" title="Extracting Duplicated Goroutines"/></a></p>
<p dir="auto">When the operation is complete, you&#39;ll see anything which is duplicated pulled out into its own group. Any unique
goroutines will be left in the initial routines view.</p>
<p dir="auto">In order to group goroutines, they are compared ignoring any object pointers. As long as the methods and line numbers
match up, they will be considered equivalent.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/openziti/goroutine-analyzer/blob/main/doc/extract-duplicated-results.png"><img src="https://github.com/openziti/goroutine-analyzer/raw/main/doc/extract-duplicated-results.png" alt="Extract Duplicates Results" title="Extract Duplicates Results"/></a></p>
<h3 dir="auto"><a id="user-content-filtering" aria-hidden="true" href="#filtering"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Filtering</h3>
<p dir="auto">Sometimes you want to find all goroutines related to a given package, method or pointer. You can do this with a filter.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/openziti/goroutine-analyzer/blob/main/doc/create-filter.png"><img src="https://github.com/openziti/goroutine-analyzer/raw/main/doc/create-filter.png" alt="Create Filter Option" title="Create Filter Option"/></a></p>
<p dir="auto">A filter is specified using a regular expression and will be matched against the full text of each goroutine.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/openziti/goroutine-analyzer/blob/main/doc/create-filter-2.png"><img src="https://github.com/openziti/goroutine-analyzer/raw/main/doc/create-filter-2.png" alt="Create Filter" title="Create Filter"/></a></p>
<p dir="auto">Any goroutines matching the regular expression will be placed into their own group.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/openziti/goroutine-analyzer/blob/main/doc/filter-result.png"><img src="https://github.com/openziti/goroutine-analyzer/raw/main/doc/filter-result.png" alt="Create Filter Result" title="Create Filter Result"/></a></p>
<p dir="auto">After the filter is created, it can be edited or deleted.</p>
<h3 dir="auto"><a id="user-content-other-operations" aria-hidden="true" href="#other-operations"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Other Operations</h3>
<p dir="auto">In addition, if you&#39;re trying to narrow things down iteratively, you can select individual goroutines and perform
the following operations.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/openziti/goroutine-analyzer/blob/main/doc/stack-options.png"><img src="https://github.com/openziti/goroutine-analyzer/raw/main/doc/stack-options.png" alt="Other Operations" title="Other Operations"/></a></p>
<ul dir="auto">
<li><code>Group Goroutines Like This</code> - find other goroutines like this and put them in a group, leaving them in the routines group</li>
<li><code>Hide Goroutine</code> - hide this goroutine from view. Display of hidden goroutines can be toggle on and off at the group level</li>
<li><code>Unide Goroutine</code> - show this goroutine again. Only displays for hidden goroutines</li>
<li><code>Hide Goroutines Like This</code> - hides all goroutines matching this one</li>
<li><code>Separate Goroutines Like This</code> - acts like the group option except that the goroutines are also removed from the current group.</li>
</ul>
<h2 dir="auto"><a id="user-content-thank-you" aria-hidden="true" href="#thank-you"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Thank you</h2>
<p dir="auto">This tool was inspired by the following:</p>
<ul dir="auto">
<li><a href="https://github.com/mkbrv/tda">TDA (thread dump analyzer)</a> - Original version at <a href="https://java.net/projects/tda" rel="nofollow">https://java.net/projects/tda</a> doesn&#39;t seem to be available anymore</li>
<li><a href="https://github.com/linuxerwang/goroutine-inspect">goroutine-inspect</a></li>
</ul>
<p dir="auto">The build was helped along by <a href="https://github.com/sualeh/build-jpackage">this very helpful example repo from GitHub user sualeh</a></p>
</article>
          </div></div>
  </body>
</html>
