<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://makojs.dev/blog/mako-open-sourced">Original</a>
    <h1>Mako – fast, production-grade web bundler based on Rust</h1>
    
    <div id="readability-page-1" class="page"><article>
      
<p><em>2024-06-28 by <a href="https://github.com/sorrycc">sorrycc</a></em></p>
<p>中文版: <a href="https://jesusgollonet.com/posts/mako-open-sourced_zh-CN">《Mako 开源了》</a>。</p>
<p><img src="https://img.alicdn.com/imgextra/i4/O1CN01CK3ElF1kFaFzFBUiA_!!6000000004654-0-tps-1200-662.jpg" alt=""/></p>
<p>Hi, I am sorrycc, one of the main maintainers of Mako, and also the creator of Umi, Dva, Father, and other libraries. I am thrilled to announce that Mako is finally open source, the Github url is <a href="https://github.com/umijs/mako/">https://github.com/umijs/mako/</a> , and I’m excited to formally introduce it to you today.</p>
<h2 id="what-is-mako%3F" tabindex="-1">What is Mako? <a href="#what-is-mako%3F">
          <span aria-hidden="true">#</span>
        </a></h2>
<img src="https://img.alicdn.com/imgextra/i4/O1CN01dvFN0j1e2rYBJpJGJ_!!6000000003814-2-tps-2048-2048.png_240x240.jpg" width="120" height="120"/>
<p>Mako is an “extremely fast” and “production-grade” front-end build tool, based on Rust.</p>
<p>The “extremely fast” aspect was our initial motivation for starting the Mako project. Without build speed issues, Mako would not have been necessary. Refer to the Benchmark section below for some data, and we are constantly exploring even faster build speed solutions. The “production-grade” label comes from the fact that since 2023.11.24, Mako has been officially released internally at Ant Group. It has been validated with engineering practices on thousands of projects and all used npm packages and their versions. It has been implemented in hundreds of projects, serving various platforms and business scenarios internally, including management backends, mini-programs, H5 mobile, low-code, marketing, component libraries, component packaging, Serverless Functions, etc., demonstrating fully production-grade capabilities.</p>
<p>You can visit <a href="https://makojs.dev/docs/features">https://makojs.dev/docs/features</a> to learn more about Mako’s features.</p>
<h2 id="how-did-mako-come-about%3F" tabindex="-1">How did Mako come about? <a href="#how-did-mako-come-about%3F">
          <span aria-hidden="true">#</span>
        </a></h2>
<p>Last year (2023.3), our team launched 3 projects, Rust, SSR, and AIG, and we took on the Rust direction to tackle build performance issues. Our team has been exploring faster build speed solutions, including <a href="https://umijs.org/blog/mfsu-faster-than-vite">MFSU</a>, which optimizes build speed within Webpack. However, this had certain limitations. We sought a thorough solution through Rust.</p>
<p><img src="https://img.alicdn.com/imgextra/i2/O1CN01GDA0FY1mgixV0oGkA_!!6000000004984-2-tps-2772-1330.png_1200x1200.jpg" alt=""/></p>
<p>You might wonder why we didn’t use existing Rust tools but decided to create one ourselves. The reasons are complex. For instance, 1) the maturity level of community libraries and their compatibility with Ant’s needs, we researched all the community Rust build solutions before starting, ultimately deciding on creating our own, 2) having control, due to business reasons, build tools at Ant require a lot of customization, and this proved true as we found many matching needs after internal release, 3) the modern meta-frameworks require compilation-time frameworks, in addition to build, they also have a lot of compilation needs, especially in SSR &amp; RSC scenarios, for example, RSC scenarios required 4 builds internally, 4) the need to learn Rust and for team growth, modern frontend tools are all written in Rust, and we would fall behind if we did not advance.</p>
<p><img src="https://img.alicdn.com/imgextra/i3/O1CN012T9Nlo1WVFBDT64dK_!!6000000002793-2-tps-2090-854.png" alt=""/></p>
<p>The timeline above is for Mako. Mako kicked off in 2023.3, had its first usable version by 2023.7, was internally released at Ant in 2023.11, and was open-sourced by 2024.6. We initially had 3 members with zero Rust experience, with team members, especially the virtual team, coming and going, learning Rust while digesting build knowledge and working on Mako was challenging, but fortunately, we succeeded and learned a lot in the process. We would like to thank the pioneers in the build domain like Webpack, Farm, and Rspack, as well as ChatGPT.</p>
<h2 id="speed" tabindex="-1">Speed <a href="#speed">
          <span aria-hidden="true">#</span>
        </a></h2>
<p>Mako has put a lot of effort into speed. Below is some Benchmark data.</p>
<p><img src="https://img.alicdn.com/imgextra/i1/O1CN01Ibymuk1xrDoNp2jBg_!!6000000006496-2-tps-2018-340.png" alt=""/></p>
<p>The Benchmark ran on a project that Turbopack also tests, on a Mac Book Pro M2 Max. It includes dimensions such as dev cold start time, root node and leaf node HMR time, production Build build time, and JS bundle size. (Note: Farm was not tried successfully using API mode, so no HMR data was generated; RsBuild had some issues upgrading to 0.7, so it’s still on 0.6 for now. RsBuild 0.7 might be a bit faster.)</p>
<p>If you’re interested, feel free to clone the repository and try it out yourself.</p>
<pre tabindex="0"><code><span><span>$</span><span> git</span><span> clone</span><span> git@github.com:umijs/benchmark.git</span></span>
<span><span>$</span><span> cd</span><span> benchmark</span></span>
<span><span>$</span><span> pnpm</span><span> i</span></span>
<span><span>$</span><span> pnpm</span><span> run</span><span> setup</span></span>
<span><span>$</span><span> pnpm</span><span> benchmark</span></span>
<span></span></code></pre>
<p>Here’s how we compare to our previous selves.</p>
<p><img src="https://img.alicdn.com/imgextra/i4/O1CN01UkKwZd1nsv7biyZKf_!!6000000005146-1-tps-825-365.gif" alt=""/></p>
<p>For Ant Design Pro full project build, Webpack takes 16s, Mako takes 3.9s, a 4x speed improvement.</p>
<p><img src="https://img.alicdn.com/imgextra/i3/O1CN0180np4N1oZyLr5911c_!!6000000005240-1-tps-1340-610.gif" alt=""/></p>
<p>For Ant Design Pro full project build, Mako is almost always real-time hot updates.</p>
<p><img src="https://img.alicdn.com/imgextra/i2/O1CN01LpdES21tqWkFN9mCg_!!6000000005953-1-tps-960-540.gif" alt=""/></p>
<p>Intranet Hybrid framework Smallfish project build, based on RSC (React Server Components), scaffold project, build time reduced from 36.7s to 1.2s. It looks a bit exaggerated, but these are real data.</p>
<p><img src="https://img.alicdn.com/imgextra/i3/O1CN01L1HteO1uPKqayzb0u_!!6000000006029-2-tps-1538-494.png" alt=""/></p>
<p>These are more examples of speed improvements on such RSC projects.</p>
<p><img src="https://img.alicdn.com/imgextra/i2/O1CN01bzKzwO1gnEtk9Z8pN_!!6000000004186-2-tps-2198-852.png" alt=""/></p>
<p>Additionally, Mako also has an experimental SSU feature, similar to the previous MFSU implementation, which does packaging and caching of dependencies. Depending on the ratio of source code to dependencies, it can achieve a 10-50x speed boost in Dev hot start-up. Currently, it can be enabled with the <code>SSU=true</code> environment variable.</p>
<h2 id="how-to-participate%3F" tabindex="-1">How to participate? <a href="#how-to-participate%3F">
          <span aria-hidden="true">#</span>
        </a></h2>
<p>If you want to experience Mako, you can create a Mako + React project with a single command using the scaffolding tool.</p>
<pre tabindex="0"><code><span><span>$</span><span> npm</span><span> create</span><span> mako</span></span>
<span></span></code></pre>
<p>If you’re a Umi user, it’s very simple to experience Mako!</p>
<pre tabindex="0"><code><span><span># Make sure your version is 4.2.0 or above</span></span>
<span><span>$</span><span> npx</span><span> umi</span><span> -v</span></span>
<span><span>4.2.0</span></span>
<span><span># Enable Mako configuration</span></span>
<span><span>$</span><span> npx</span><span> umi</span><span> config</span><span> set</span><span> mako</span><span> {}</span></span>
<span><span># Run build or other commands</span></span>
<span><span>$</span><span> npx</span><span> umi</span><span> build</span></span>
<span></span></code></pre>
<p>If you want to discuss issues or suggestions about Mako, you can scan the QR code to join our WeChat group. (If it’s expired or the group is full, please go to <a href="https://makojs.dev/docs/feedback">https://makojs.dev/docs/feedback</a> for a new QR code.)</p>
<img src="https://img.alicdn.com/imgextra/i1/O1CN01kKspME1FdAZ4cQ1F5_!!6000000000509-0-tps-1050-1671.jpg_240x240.jpg" width="120"/>
<p>Or click the following link to join our Telegram group.</p>
<p><a href="https://t.me/+EN3fycCw3TI1NDA1">https://t.me/+EN3fycCw3TI1NDA1</a></p>
<p>Also, you’re welcome to subscribe to Mako updates via RSS. We’ll post the latest news about Mako and high-quality technical articles related to building.</p>
<p><a href="https://makojs.dev/rss.xml">https://makojs.dev/rss.xml</a></p>
<p>If you want to get involved in Mako’s open source, you can visit <a href="https://github.com/umijs/mako">https://github.com/umijs/mako</a> and <a href="https://makojs.dev/docs/contributing">CONTRIBUTING document</a> to learn more. Anyone who has submitted Bugfix or Feature PRs can choose to join Mako’s developer DingTalk group.</p>
<p>If you plan to deeply promote and apply Mako in your company, or develop based on Mako, you can contact us (<a href="mailto:sorrycc@gmail.com">mailto:sorrycc@gmail.com</a>) for discussion. We can provide the relevant training, consulting, and more timely support services.</p>
<img src="https://img.alicdn.com/imgextra/i4/O1CN01uWRI3O1Dy7RzGO3fy_!!6000000000284-1-tps-320-224.gif" width="160"/>
<h2 id="live-q%26a" tabindex="-1">Live Q&amp;A <a href="#live-q%26a">
          <span aria-hidden="true">#</span>
        </a></h2>
<p>Tonight (June 28, 2024) at 9 PM, we’ll be hosting a live Q&amp;A on Bilibili, reservation link available at <a href="https://t.bilibili.com/947260122376175622">https://t.bilibili.com/947260122376175622</a>. We welcome everyone to participate, and you can ask anything about Mako. If you have questions about Mako, you can fill in the questionnaire in advance at <a href="https://docs.qq.com/form/page/DY2Z6VndTRXBpR1Nh">https://docs.qq.com/form/page/DY2Z6VndTRXBpR1Nh</a>.</p>
<h2 id="acknowledgements" tabindex="-1">Acknowledgements <a href="#acknowledgements">
          <span aria-hidden="true">#</span>
        </a></h2>
<p>The release of Mako would not have been possible without each contributor, especially since most of them have participated in their spare time. Thank you!</p>
<ul>
<li>Those who have submitted code to Mako: <a href="https://github.com/hedeng9">hedeng</a>, <a href="https://github.com/jiesia">jiesia</a>, <a href="https://github.com/Maple0817">Maple0817</a>, <a href="https://github.com/vagusX">vagusX</a>, <a href="https://github.com/chessl">chessl</a>, <a href="https://github.com/HiLanXiao">HiLanXiao</a>, <a href="https://github.com/JackGuiYang12">JackGuiYang12</a>, <a href="https://github.com/zhangpanweb">zhangpanweb</a>, <a href="https://github.com/ctts">ctts</a>, <a href="https://github.com/goo-yyh">goo-yyh</a>, <a href="https://github.com/whyer11">whyer11</a></li>
<li>Those who are still actively participating in the development of Mako: <a href="https://github.com/PeachScript">PeachScript</a>, <a href="https://github.com/stormslowly">stormslowly</a>, <a href="https://github.com/xusd320">xusd320</a>, <a href="https://github.com/LovePlayCode">LovePlayCode</a>, <a href="https://github.com/Jinbao1001">Jinbao1001</a>, <a href="https://github.com/sorrycc">sorrycc</a></li>
<li>Community members who used Mako in the early stages and provided suggestions: <a href="https://github.com/xiaohuoni">xiaohuoni</a>, <a href="https://github.com/xierenyuan">xierenyuan</a></li>
<li>The initiator of the project: <a href="https://github.com/afc163">afc163</a></li>
<li>Logo designer: <a href="https://github.com/golevkadesign">golevkadesign</a></li>
<li>The stylish landing page’s PD, designers, and developers: <a href="https://github.com/bupthly">bupthly</a>, 亿元, <a href="https://github.com/Wu-kung">Wu-kung</a></li>
</ul>
<p>And many authors of the community’s dependencies libraries!</p>
<ul>
<li><a href="https://github.com/webpack/webpack">webpack</a>, which inspired lots of ideas of Mako.</li>
<li><a href="https://github.com/swc-project/swc">swc</a> by <a href="https://github.com/kdy1">@kdy1</a>, which powered the parsing, transforming and code generation of Mako.</li>
<li><a href="https://github.com/farm-fe/farm">farm</a> by <a href="https://github.com/wre232114">@brightwu</a>, which inspired the tree shaking, plugin system and others of Mako.</li>
<li><a href="https://github.com/web-infra-dev/rspack">rspack</a>, which inspired the tree shaking of Mako.</li>
<li><a href="https://github.com/oxc-project/oxc-resolver">oxc-resolver</a> by <a href="https://github.com/Boshen">@Boshen</a> which powered the resolver of Mako.</li>
<li><a href="https://github.com/oxc-project/oxc/">Oxc</a> by <a href="https://github.com/Boshen">@Boshen</a> from which We learned a lot about how to develop efficiently with Rust.</li>
<li><a href="https://github.com/biomejs/biome">biome</a> by <a href="https://github.com/ematipico">@ematipico</a> from which We learned a lot about how to develop efficiently with Rust.</li>
</ul>

      
      
    </article></div>
  </body>
</html>
