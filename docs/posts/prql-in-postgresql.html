<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/kaspermarstal/plprql">Original</a>
    <h1>Show HN: PRQL in PostgreSQL</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><a href="https://github.com/kaspermarstal/plprql/actions/workflows/ci.yml"><img src="https://github.com/kaspermarstal/plprql/actions/workflows/ci.yml/badge.svg" alt="Linux"/></a> <a href="https://github.com/kaspermarstal/plprql/actions/workflows/package.yml"><img src="https://github.com/kaspermarstal/plprql/actions/workflows/package.yml/badge.svg" alt="Linux"/></a></p>

<p dir="auto">PL/PRQL is a PostgreSQL extension that lets you write functions with PRQL. The extension supports PostgreSQL v12-16 on Linux and macOS.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-what-is-prql" aria-hidden="true" tabindex="-1" href="#what-is-prql"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>What is PRQL?</h2>
<p dir="auto">PRQL (Pipelined Relational Query Language) is an open-source query language for data manipulation and analysis that compiles to SQL. PRQL introduces a pipeline concept (similar to Unix pipes) where data is transformed line-by-line. The sequential series of transformations reduces the complexity often encountered with nested SQL queries and makes your data manipulation logic easier to read and write.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-key-features" aria-hidden="true" tabindex="-1" href="#key-features"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Key features</h2>
<ul dir="auto">
<li><a href="#functions">Write functions with PRQL</a> - Useful for large analytical queries</li>
<li><a href="#prql-compiler">PRQL compiler</a> - Useful for development and debugging</li>
<li><a href="#inline-execution">Inline execution</a> - Useful for prototyping and custom queries in ORMs</li>
</ul>
<h3 tabindex="-1" dir="auto"><a id="user-content-functions" aria-hidden="true" tabindex="-1" href="#functions"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Functions</h3>
<p dir="auto">PRQL shines when your SQL queries becomes very long and complex. You can manage this complexity by porting your most impressive SQL incantations to PRQL functions, which can then be used in dashboards, business logic or other database code. For example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="create function match_stats(int) returns table(player text, kd_ratio float) as $$
  from matches
  filter match_id == $1
  group player (
    aggregate {
      total_kills = sum kills,
      total_deaths = sum deaths
    }
  )
  filter total_deaths &gt; 0
  derive kd_ratio = total_kills / total_deaths
  select { player, kd_ratio }
$$ language plprql;

select * from match_stats(1001)
    
 player  | kd_ratio 
---------+----------
 Player1 |    0.625
 Player2 |      1.6
(2 rows)"><pre><span>create</span> <span>function</span> <span>match_stats</span>(<span>int</span>) returns table(player <span>text</span>, kd_ratio float) <span>as</span> $$
  <span>from</span> matches
  filter match_id <span>==</span> $<span>1</span>
  group player (
    aggregate {
      total_kills <span>=</span> sum kills,
      total_deaths <span>=</span> sum deaths
    }
  )
  filter total_deaths <span>&gt;</span> <span>0</span>
  derive kd_ratio <span>=</span> total_kills <span>/</span> total_deaths
  <span>select</span> { player, kd_ratio }
$$ language plprql;

<span>select</span> <span>*</span> <span>from</span> match_stats(<span>1001</span>)
    
 player  | kd_ratio 
<span><span>--</span>-------+----------</span>
 Player1 |    <span>0</span>.<span>625</span>
 Player2 |      <span>1</span>.<span>6</span>
(<span>2</span> rows)</pre></div>
<p dir="auto">This is similar to how PL/Python, PL/Javascript, and PL/Rust are implemented.</p>
<h3 tabindex="-1" dir="auto"><a id="user-content-prql-compiler" aria-hidden="true" tabindex="-1" href="#prql-compiler"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>PRQL Compiler</h3>
<p dir="auto">You can use the PRQL compiler to see the SQL statements that PostgreSQL executes under the hood. You compile PRQL to SQL with the <code>prql_to_sql()</code> function:</p>
<div dir="auto" data-snippet-clipboard-copy-content="select prql_to_sql(...); -- statements above omitted for brevity

 prql_to_sql 
-------------
WITH table_0 AS (
  SELECT
    player,
    COALESCE(SUM(kills), 0) AS _expr_0,
    COALESCE(SUM(deaths), 0) AS _expr_1
  FROM
    matches
  WHERE
    match_id = $1
  GROUP BY
    player
)
SELECT
  player,
  _expr_0 / _expr_1 AS kd_ratio
FROM
  table_0
WHERE
  _expr_1 &gt; 0
-- Generated by PRQL compiler version:0.11.1 (https://prql-lang.org)
(1 row)"><pre><span>select</span> prql_to_sql(...); <span><span>--</span> statements above omitted for brevity</span>

 prql_to_sql 
<span><span>--</span>-----------</span>
WITH table_0 <span>AS</span> (
  <span>SELECT</span>
    player,
    COALESCE(<span>SUM</span>(kills), <span>0</span>) <span>AS</span> _expr_0,
    COALESCE(<span>SUM</span>(deaths), <span>0</span>) <span>AS</span> _expr_1
  <span>FROM</span>
    matches
  <span>WHERE</span>
    match_id <span>=</span> $<span>1</span>
  <span>GROUP BY</span>
    player
)
<span>SELECT</span>
  player,
  _expr_0 <span>/</span> _expr_1 <span>AS</span> kd_ratio
<span>FROM</span>
  table_0
<span>WHERE</span>
  _expr_1 <span>&gt;</span> <span>0</span>
<span><span>--</span> Generated by PRQL compiler version:0.11.1 (https://prql-lang.org)</span>
(<span>1</span> row)</pre></div>
<h3 tabindex="-1" dir="auto"><a id="user-content-inline-execution" aria-hidden="true" tabindex="-1" href="#inline-execution"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Inline Execution</h3>
<p dir="auto">You can run PRQL code directly with the <code>prql</code> function. This is useful for e.g. custom queries in ORMs:</p>
<div dir="auto" data-snippet-clipboard-copy-content="select prql(&#39;from matches | filter player == &#39;&#39;Player1&#39;&#39;&#39;) 
as (id int, match_id int, round int, player text, kills int, deaths int) 
limit 2;

 id | match_id | round | player  | kills | deaths 
----+----------+-------+---------+-------+--------
  1 |     1001 |     1 | Player1 |     4 |      1
  3 |     1001 |     2 | Player1 |     1 |      7
(2 rows)
 
-- Same as above, but returns cursor
select prql(&#39;from matches | filter player == &#39;&#39;Player1&#39;&#39;&#39;, &#39;player1_cursor&#39;);
fetch 2 from player1_cursor;"><pre><span>select</span> prql(<span><span>&#39;</span>from matches | filter player == <span>&#39;</span><span>&#39;</span>Player1<span>&#39;</span><span>&#39;</span><span>&#39;</span></span>) 
<span>as</span> (id <span>int</span>, match_id <span>int</span>, round <span>int</span>, player <span>text</span>, kills <span>int</span>, deaths <span>int</span>) 
<span>limit</span> <span>2</span>;

 id | match_id | round | player  | kills | deaths 
<span><span>--</span>--+----------+-------+---------+-------+--------</span>
  <span>1</span> |     <span>1001</span> |     <span>1</span> | Player1 |     <span>4</span> |      <span>1</span>
  <span>3</span> |     <span>1001</span> |     <span>2</span> | Player1 |     <span>1</span> |      <span>7</span>
(<span>2</span> rows)
 
<span><span>--</span> Same as above, but returns cursor</span>
select prql(<span><span>&#39;</span>from matches | filter player == <span>&#39;</span><span>&#39;</span>Player1<span>&#39;</span><span>&#39;</span><span>&#39;</span></span>, <span><span>&#39;</span>player1_cursor<span>&#39;</span></span>);
fetch <span>2</span> <span>from</span> player1_cursor;</pre></div>
<p dir="auto">For more information on the design of the extension, see the <a href="https://blog.jacobvosmaer.nl/kaspermarstal/plprql/blob/main/DESIGN.md">design document</a>.</p>
<p dir="auto">For more information on PRQL, visit the PRQL <a href="https://prql-lang.org/" rel="nofollow">website</a>, <a href="https://prql-lang.org/playground/" rel="nofollow">playground</a> or <a href="https://github.com/PRQL/prql">repository</a>.</p>
<div dir="auto"><p dir="auto"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p>
<p dir="auto">PRQL supports <code>select</code> statements only. <code>insert</code>, <code>update</code>, and <code>delete</code> statements, and your other database code, will continue to live in vanilla SQL, ORMs, or other database frameworks.</p>
</div>
<h2 tabindex="-1" dir="auto"><a id="user-content-getting-started" aria-hidden="true" tabindex="-1" href="#getting-started"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Getting Started</h2>
<h3 tabindex="-1" dir="auto"><a id="user-content-install-from-source" aria-hidden="true" tabindex="-1" href="#install-from-source"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Install From Source</h3>
<p dir="auto">Follow either of these steps to install from source:</p>
<ul dir="auto">
<li>
<p dir="auto">Download and execute the <code>install.sh</code> bash script:</p>
<div dir="auto" data-snippet-clipboard-copy-content="curl --proto &#39;=https&#39; --tlsv1.2 -sSf https://raw.githubusercontent.com/kaspermarstal/plprql/main/scripts/install.sh | bash"><pre>curl --proto &#39;=https&#39; --tlsv1.2 -sSf https://raw.githubusercontent.com/kaspermarstal/plprql/main/scripts/install.sh <span>|</span> bash</pre></div>
<p dir="auto">This will install the tip of the main branch using <code>pg_config</code> on your path.</p>
</li>
<li>
<p dir="auto">You can customize the PostgreSQL installation and/or the PL/PRQL version using the <code>--pg-config</code> and <code>--revision</code> flags:</p>
<div dir="auto" data-snippet-clipboard-copy-content="curl --proto &#39;=https&#39; --tlsv1.2 -sSf https://raw.githubusercontent.com/kaspermarstal/plprql/main/scripts/install.sh &gt; install.sh
chmod +x ./install.sh
./install.sh --pg-version /usr/bin/pg_config --revision 186faea"><pre>curl --proto &#39;=https&#39; --tlsv1.2 -sSf https://raw.githubusercontent.com/kaspermarstal/plprql/main/scripts/install.sh <span>&gt;</span> install.sh
chmod +x ./install.sh
./install.sh --pg-version /usr/bin/pg_config --revision 186faea</pre></div>
</li>
</ul>
<h3 tabindex="-1" dir="auto"><a id="user-content-set-up-development-environment" aria-hidden="true" tabindex="-1" href="#set-up-development-environment"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Set Up Development Environment</h3>
<p dir="auto">Follow these steps to set up your development environment:</p>
<ol dir="auto">
<li>
<p dir="auto">Install <code>cargo-pgrx</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="cargo install --locked --version=0.11.3 cargo-pgrx"><pre>cargo install --locked --version=0.11.3 cargo-pgrx</pre></div>
<p dir="auto">The version of <code>cargo-pgrx</code> must match the version of <code>pgrx</code> in <code>plprql/Cargo.toml</code>.</p>
</li>
<li>
<p dir="auto">Initialize <code>pgrx</code> for your system.</p>
<div dir="auto" data-snippet-clipboard-copy-content="cargo pgrx init --pg16 &lt;PG16&gt;"><pre>cargo pgrx init --pg16 <span>&lt;</span>PG16<span>&gt;</span></pre></div>
<p dir="auto">where <code>&lt;PG16&gt;</code> is the path to your system installation&#39;s <code>pg_config</code> tool (typically <code>/usr/bin/pg_config</code>). Supported versions are PostgreSQL v12-16. You can also run <code>cargo pgrx init</code> and have <code>pgrx</code> download, install, and compile PostgreSQL v12-16. These installations are managed by <code>pgrx</code> and used for development and testing. Individual <code>pgrx</code>-managed installations can be installed using e.g. <code>cargo pgrx init --pg16 download</code>.</p>
</li>
<li>
<p dir="auto">Clone this repository and <code>cd</code> into root directory.</p>
<div dir="auto" data-snippet-clipboard-copy-content="git clone https://github.com/kaspermarstal/plprql"><pre>git clone https://github.com/kaspermarstal/plprql</pre></div>
</li>
<li>
<p dir="auto">Install the extension to the PostgreSQL specified by
the <code>pg_config</code> currently on your <code>$PATH</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="cd plprql/plprql
cargo pgrx install --release"><pre><span>cd</span> plprql/plprql
cargo pgrx install --release</pre></div>
<p dir="auto">You can target a specific PostgreSQL installation by providing the path of another <code>pg_config</code> using the <code>-c</code> flag.</p>
</li>
<li>
<p dir="auto">Fire up your system PostgreSQL installation and start writing functions right away! You can also try out PL/PRQL in an installation managed by <code>pgrx</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ cargo pgrx run pg16
psql&gt; create extension plprql;
psql&gt; create function match_stats(int) 
      returns table(total_kills real, total_deaths real) as $$
        from rounds
        filter match_id == $1
        aggregate {
          total_kills = sum kills,
          total_deaths = sum deaths
        }
      $$ language plprql
psql&gt; select match_stats(1);"><pre>$ cargo pgrx run pg16
psql<span>&gt;</span> create extension plprql;
psql<span>&gt;</span> create function match_stats(int) 
      returns table(total_kills real, total_deaths real) as $$
        from rounds
        filter match_id <span>==</span> $1
        aggregate {
          total_kills = sum kills,
          total_deaths = sum deaths
        }
      $$ language plprql
psql<span>&gt;</span> select match_stats(1);</pre></div>
</li>
</ol>
<h2 tabindex="-1" dir="auto"><a id="user-content-running-tests" aria-hidden="true" tabindex="-1" href="#running-tests"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Running Tests</h2>
<p dir="auto">You can run tests using <code>cargo pgrx test pg16</code>. Unit tests are in the main <code>plprql</code> crate while integration tests are in the <code>plprql-tests</code> crate. From the root source directory:</p>
<div dir="auto" data-snippet-clipboard-copy-content="cd plprql &amp;&amp; echo &#34;\q&#34; | cargo pgrx run pg16 &amp;&amp; cargo test --no-default-features --features pg16
cd ../plprql-tests &amp;&amp; echo &#34;\q&#34; | cargo pgrx run pg16 &amp;&amp; cargo test --no-default-features --features pg16"><pre><span>cd</span> plprql <span>&amp;&amp;</span> <span>echo</span> <span><span>&#34;</span>\q<span>&#34;</span></span> <span>|</span> cargo pgrx run pg16 <span>&amp;&amp;</span> cargo test --no-default-features --features pg16
<span>cd</span> ../plprql-tests <span>&amp;&amp;</span> <span>echo</span> <span><span>&#34;</span>\q<span>&#34;</span></span> <span>|</span> cargo pgrx run pg16 <span>&amp;&amp;</span> cargo test --no-default-features --features pg16</pre></div>
<p dir="auto">Supported PostgreSQL versions are <code>pg12</code>, <code>pg13</code>, <code>pg14</code>, <code>pg15</code>, and <code>pg16</code>.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-license" aria-hidden="true" tabindex="-1" href="#license"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>License</h2>
<p dir="auto">Apache 2.0 License</p>
</article></div></div>
  </body>
</html>
