<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.theregister.com/2023/09/24/tcp_congestion_control_internet/">Original</a>
    <h1>TCP&#39;s congestion control saved the internet</h1>
    
    <div id="readability-page-1" class="page"><div id="body">
<p><span>Systems Approach</span> With the annual SIGCOMM conference taking place this month, we observed that congestion control still gets an hour in the program, 35 years after the first paper on TCP congestion control was published. So it seems like a good time to appreciate just how much the success of the internet has depended on its approach to managing congestion.</p>
<p>Following my recent <a target="_blank" rel="nofollow" href="https://peertube.roundpond.net/w/1hSTyT2J4cKrLaoU3sJeqT">talk</a> and <a target="_blank" href="https://www.theregister.com/2023/06/28/60_years_of_networking/">article</a> on 60 years of networking, which focused almost entirely on the internet and ARPANET, I received quite a few comments about various networking technologies that were competing for ascendancy at the same time.</p>
<p>These included the OSI stack (anyone remember CLNP and TP4?), the Coloured Book protocols (including the Cambridge Ring), and of course ATM (Asynchronous Transfer Mode) which was actually the first networking protocol on which I worked in depth. It’s hard to fathom now, but in the 1980s I was one of many people who thought that ATM might be the packet switching technology to take over the world.</p>
<blockquote>

<p>I rate congestion control as one of the key factors that enabled the internet to progress from moderate to global scale</p>
</blockquote>
<p>ATM proponents used to refer to existing technologies such as Ethernet and TCP/IP as “legacy” protocols that could, if necessary, be carried over the global ATM network once it was established. One of my fond memories from those days is of Steve Deering (a pioneer of IP networking) boldly (and correctly) stating that ATM would never be successful enough to even be a legacy protocol.</p>
<p>One reason I skipped over these other protocols when earlier retelling the history of networking was simply to save space – it’s a little-known fact that my Systems Approach colleague Larry Peterson and I aim for brevity, especially since receiving a <a target="_blank" rel="nofollow" href="https://www.amazon.com/gp/customer-reviews/R1IVEX207N7WY8/ref=cm_cr_arp_d_rvw_ttl?ie=UTF8&amp;ASIN=B004VF6216">one-star review</a> on Amazon that called our book “a wall of text.” But I was also focused on how we got to the internet of today, where TCP/IP has effectively out-competed other protocol suites to achieve global (<a target="_blank" href="https://www.theregister.com/2021/12/28/cloud_native_principles_wireless_networks/">or near-global</a>) penetration.</p>

    

<p>There are many theories about why TCP/IP was more successful than its contemporaries, and they are not readily testable. Most likely, there were many factors that played into the success of the internet protocols. But I rate congestion control as one of the key factors that enabled the internet to progress from moderate to global scale.</p>

        


        

<p>It is also an interesting study in how the particular architectural choices made in the 1970s proved themselves over the subsequent decades.</p>
<h3>Distributed resource management</h3>
<p>In David Clark’s paper [<a target="_blank" rel="nofollow" href="http://ccr.sigcomm.org/archive/1995/jan95/ccr-9501-clark.pdf">PDF</a>] “The Design Philosophy of the DARPA Internet Protocols,&#34; a stated design goal is: “The internet architecture must permit distributed management of its resources.” There are many different implications of that goal, but the way that Jacobson and Karels [<a target="_blank" rel="nofollow" href="https://ee.lbl.gov/papers/congavoid.pdf">PDF</a>] first implemented congestion control in TCP is a good example of taking that principle to heart.</p>
<p>Their approach also embraces another design goal of the internet: accommodate many different types of networks. Taken together, these principles pretty much rule out the possibility of any sort of network-based admission control, a sharp contrast to networks such as ATM, which assumed that a request for resources would be made from an end-system to the network before data could flow.</p>
<p>Part of the “accommodate many types of networks” philosophy is that you can’t assume that all networks have admission control. Couple that with distributed management of resources and you end up with congestion control being something that end-systems have to handle, which is exactly what Jacobson and Karels did with their initial changes to TCP.</p>
<blockquote>

<p>We’re trying to get millions of end-systems to cooperatively share the bandwidth of bottleneck links in some fair way</p>
</blockquote>
<p>The history of TCP congestion control is long enough to fill a book (<a target="_blank" rel="nofollow" href="https://tcpcc.systemsapproach.org/">and we did</a>) but the work done at Berkeley from 1996 to 1998 casts a long shadow, with Jacobson’s <a target="_blank" rel="nofollow" href="https://dl.acm.org/doi/10.1145/52324.52356">1988 SIGCOMM paper</a> ranking among the most cited networking papers of all time.</p>
<p>Slow-start, AIMD (additive increase, multiplicative decrease), RTT estimation, and the use of packet loss as a congestion signal were all in that paper, laying the groundwork for the following decades of congestion control research. One reason for that paper&#39;s influence, I believe, is that the foundation it laid was solid, while it left plenty of room for future improvements–as we see in the continued efforts to improve congestion control today.</p>

        

<p>And the problem is fundamentally hard: we’re trying to get millions of end-systems that have no direct contact with each other to cooperatively share the bandwidth of bottleneck links in some moderately fair way using only the information that can be gleaned by sending packets into the network and observing when and whether they reach their destination.</p>

<p>Arguably one of the biggest leaps forward after 1988 was the realization by Brakmo and Peterson (yes, that guy) that packet loss wasn&#39;t the only signal of congestion: so too was increasing delay. This was the basis for the 1994 <a target="_blank" rel="nofollow" href="https://dl.acm.org/doi/10.1145/190809.190317">TCP Vegas paper</a>, and the idea of using delay rather than loss alone was quite controversial at the time.</p>
<p>However, Vegas kicked off a new trend in congestion control research, inspiring many other efforts to take delay into account as an early indicator of congestion before loss occurs. Data center TCP (<a target="_blank" rel="nofollow" href="https://dl.acm.org/doi/10.1145/1851275.1851192">DCTCP</a>) and Google’s <a target="_blank" rel="nofollow" href="https://github.com/google/bbr">BBR</a> are two examples.</p>
<p>One reason that I give credit to congestion control algorithms in explaining the success of the internet is that the path to failure of the internet was clearly on display in 1986. Jacobson describes some of the early congestion collapse episodes, which saw throughput fall by three orders of magnitude.</p>
<p>When I joined Cisco in 1995 we were still hearing customer stories about catastrophic congestion episodes. The same year Bob Metcalfe, inventor of Ethernet and <a target="_blank" href="https://www.theregister.com/2023/03/23/turing_award_goes_to_robert/">recent Turing Award winner</a>, famously predicted that the internet would collapse as consumer internet access and the rise of the web drove rapid growth in traffic. It didn’t.</p>

        

<p>Congestion control has continued to evolve, with the QUIC protocol, for example, offering both better mechanisms for detecting congestion and the option of experimenting with multiple congestion control algorithms. And some congestion control has moved into the application layer, eg: Dynamic Adaptive Streaming over HTTP (<a target="_blank" rel="nofollow" href="https://www.theregister.com/2012/09/09/mpeg_dash_web_vid_spec/">DASH</a>).</p>
<ul>

<li><a href="https://www.theregister.com/2023/08/16/datacenter_east_west_security/">Why securing East-West network traffic is so important – and how it can be done</a></li>

<li><a href="https://www.theregister.com/2023/04/25/building_private_5g/">Building your own private 5G is as easy as Wi-Fi</a></li>

<li><a href="https://www.theregister.com/2022/10/07/quic_tcp_replacement/">If you need a TCP replacement, you won&#39;t find a QUIC one</a></li>

<li><a href="https://www.theregister.com/2022/08/26/network_edge/">The internet&#39;s edge routers are all so different. What if we unified them with software?</a></li>
</ul>
<p>An interesting side effect of the congestion episodes of the 1980s and 1990s was that we observed that small buffers were sometimes the cause of congestion collapse. An <a target="_blank" rel="nofollow" href="https://dl.acm.org/doi/10.1145/205511.205520">influential paper</a> by Villamizar and Song showed that TCP performance dropped when the amount of buffering was less than the average delay × bandwidth product of the flows.</p>
<p>Unfortunately, the result only held for very small numbers of flows (as was acknowledged in the paper) but it was widely interpreted as an inviolable rule that influenced the next several years of router design.</p>
<p>This was finally debunked by the buffer sizing work of <a target="_blank" rel="nofollow" href="https://dl.acm.org/doi/10.1145/1015467.1015499">Appenzeller <em>et al</em></a> in 2004, but not before the unfortunate phenomenon of <a target="_blank" rel="nofollow" href="https://www.bufferbloat.net/projects/">Bufferbloat</a> – truly excessive buffer sizes leading to massive queuing delays – had made it into millions of low-end routers. The <a target="_blank" rel="nofollow" href="https://www.waveform.com/tools/bufferbloat">self-test</a> for Bufferbloat in your home network is worth a look.</p>
<p>So, while we don’t get to go back and run controlled experiments to see exactly how the internet came to succeed while other protocol suites fell by the wayside, we can at least see that the internet avoided potential failure because of the timely way congestion control was added.</p>
<p>It was relatively easy in 1986 to experiment with new ideas by tweaking the code in a couple of end-systems, and then push the effective solution out to a wide set of systems. Nothing inside the network had to change. It almost certainly helped that the set of operating systems that needed to be changed and the community of people who could make those changes was small enough to see widespread deployment of the initial BSD-based algorithms of Jacobson and Karels.</p>
<p>It seems clear that there is no such thing as the perfect congestion control approach, which is why we continue to see new papers on the topic 35 years after Jacobson’s. But the internet&#39;s architecture has fostered the environment in which effective solutions can be tested and deployed to achieve distributed management of shared resources.</p>
<p>In my view that’s a great testament to the quality of that architecture. ®</p>
                                
                    </div></div>
  </body>
</html>
