<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.arduino.cc/2022/08/02/introducing-multitasking-to-arduino/">Original</a>
    <h1>Introducing multitasking to Arduino</h1>
    
    <div id="readability-page-1" class="page"><div id="post-32072">
<h3>Introducing multitasking to Arduino</h3>
<p> — <span>August 2nd, 2022</span>
</p>
<div>
<figure><p><img loading="lazy" width="1024" height="559" src="https://blog.arduino.cc/wp-content/uploads/2022/08/multitask-arduino-blogpost-1024x559.png" alt="" srcset="https://blog.arduino.cc/wp-content/uploads/2022/08/multitask-arduino-blogpost-1024x559.png 1024w, https://blog.arduino.cc/wp-content/uploads/2022/08/multitask-arduino-blogpost-300x164.png 300w, https://blog.arduino.cc/wp-content/uploads/2022/08/multitask-arduino-blogpost-768x419.png 768w, https://blog.arduino.cc/wp-content/uploads/2022/08/multitask-arduino-blogpost-1536x838.png 1536w, https://blog.arduino.cc/wp-content/uploads/2022/08/multitask-arduino-blogpost-2048x1117.png 2048w" sizes="(max-width: 1024px) 100vw, 1024px"/></p></figure>
<p>With the increased capabilities of Arduino and other microcontroller boards, including faster clocks or even multiple cores, the need to <strong>handle multiple tasks simultaneously</strong> arises more often than in the past. For instance, you often want to control motors, update a display and detect user interactions at the same time, or perform tasks that have different timing or wait for external events.</p>
<p>The traditional way to do this is to <strong>write non-blocking code</strong> so that the loop() function can run as fast as possible, updating state variables and calling the millis() function to ensure proper timing (see the <a href="https://www.arduino.cc/en/Tutorial/BuiltInExamples/BlinkWithoutDelay">“Blink without delay”</a> example to learn more). This approach leads to bloated code, though, which is hard to debug and maintain, and also does not support multiple cores.</p>
<p>The <a href="https://docs.arduino.cc/tutorials/generic/multiple-blinks">Scheduler library</a> already allows writing code in a cleaner way by splitting the sketch in multiple loop functions, so that each one can focus on a specific task. However, this approach is called cooperative multitasking, which means you still need to avoid blocking commands yourself. Also, it does not support multiple cores and even if it did it doesn’t protect you from accessing the same variables from multiple threads. Last but not least, it’s based on the traditional “busy loop” paradigm, which doesn’t really help for low power applications where you want to have threads rest as much as possible while waiting for an event or incoming data.</p>
<h2>How to add multitasking to Arduino?</h2>
<p>The goal is to <strong>define a standardized API</strong> that can be ported across all architectures and that, in line with the Arduino philosophy, <strong>will make complex things easy for anyone</strong>. Multitasking is a hard concept, so here we have plenty of margin to bring the Arduino approach to make this available to everyone.</p>
<p>We’re asking our technical community to <a href="https://github.com/arduino/language/discussions/2">join the discussion on GitHub</a>, and we’re sharing our API proposal along with a fully working implementation as well. Let us know your thoughts and let’s work together to finalize this new feature!</p>
<p>This community discussion is hosted within the <a href="https://github.com/arduino/language">brand new repository</a>, which is the new home for the evolution of the Arduino language.</p>
<section>


<p>
<small>

You can follow any responses to this entry through the <a href="https://blog.arduino.cc/2022/08/02/introducing-multitasking-to-arduino/feed/">RSS 2.0</a> feed.
You can <a href="#respond">leave a response</a>, or <a href="https://blog.arduino.cc/2022/08/02/introducing-multitasking-to-arduino/trackback/" rel="trackback">trackback</a> from your own site.
</small>
</p>
</section>
</div>
</div></div>
  </body>
</html>
