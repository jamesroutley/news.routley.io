<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/pgEdge/spock">Original</a>
    <h1>Show HN: Open source, logical multi-master PostgreSQL replication</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a href="https://github.com/pgEdge/spock/actions/workflows/spockbench.yml"><img src="https://github.com/pgEdge/spock/actions/workflows/spockbench.yml/badge.svg" alt="Regression Tests and Spockbench"/></a></p>

<ul dir="auto">
<li><a href="https://blog.veitheller.de/pgEdge/spock/blob/main/README.md#building-the-spock-extension">Building the Spock Extension</a></li>
<li><a href="https://blog.veitheller.de/pgEdge/spock/blob/main/README.md#building-the-spock-documentation">Building the Spock Documentation</a></li>
<li><a href="https://blog.veitheller.de/pgEdge/spock/blob/main/README.md#basic-configuration-and-usage">Basic Configuration and Usage</a></li>
<li><a href="https://blog.veitheller.de/pgEdge/spock/blob/main/docs/upgrading_spock.md">Upgrading a Spock Installation</a></li>
<li><a href="https://blog.veitheller.de/pgEdge/spock/blob/main/docs/install_spock.md#advanced-configuration-options-for-spock">Advanced Configuration Options</a></li>
<li><a href="https://blog.veitheller.de/pgEdge/spock/blob/main/docs/managing/index.md">Spock Management Features</a></li>
<li><a href="https://blog.veitheller.de/pgEdge/spock/blob/main/docs/modify/index.md">Modifying a Cluster</a></li>
<li><a href="https://blog.veitheller.de/pgEdge/spock/blob/main/docs/monitoring/index.md">Monitoring your Cluster</a></li>
<li><a href="https://blog.veitheller.de/pgEdge/spock/blob/main/docs/spock_functions/index.md">Spock Functions</a></li>
<li><a href="https://blog.veitheller.de/pgEdge/spock/blob/main/docs/modify/spockctrl/index.md">Using spockctrl Management Functions</a></li>
<li><a href="https://blog.veitheller.de/pgEdge/spock/blob/main/docs/spock_release_notes.md">Release Notes</a></li>
<li><a href="https://blog.veitheller.de/pgEdge/spock/blob/main/docs/limitations.md">Limitations</a></li>
<li><a href="https://blog.veitheller.de/pgEdge/spock/blob/main/docs/FAQ.md">FAQ</a></li>
</ul>
<div dir="auto"><h2 tabindex="-1" dir="auto">Spock Multi-Master Replication for PostgreSQL - Prerequisites and Requirements</h2><a id="user-content-spock-multi-master-replication-for-postgresql---prerequisites-and-requirements" aria-label="Permalink: Spock Multi-Master Replication for PostgreSQL - Prerequisites and Requirements" href="#spock-multi-master-replication-for-postgresql---prerequisites-and-requirements"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The Spock extension provides multi-master replication for PostgreSQL versions 15 and later.  Take the following requirements into consideration as you design your cluster:</p>
<ul dir="auto">
<li>
<p dir="auto">You will need to install the <code>Spock</code> extension on each node in your cluster.  If you&#39;re performing a major version upgrade, the old node can be running a recent version of pgLogical2 before upgrading it to become a Spock node.</p>
</li>
<li>
<p dir="auto">On each node in your cluster, tables must have the same name and reside in the same schema. To check the table name and schema name of an existing table, you can connect to the database with <a href="https://www.postgresql.org/docs/17/app-psql.html" rel="nofollow">psql</a> and use the <code>\d</code> meta-command:</p>
</li>
</ul>
<p dir="auto"><code>SELECT schemaname, tablename FROM pg_tables ORDER BY schemaname, tablename;</code></p>
<p dir="auto">For example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="lcdb=# \d
               List of relations
 Schema |      Name      |   Type   |  Owner
--------+----------------+----------+----------
 public | table_a        | table    | ec2-user
 public | table_a_id_seq | sequence | ec2-user
 public | table_b        | table    | ec2-user
 public | table_b_id_seq | sequence | ec2-user
 public | table_c        | table    | ec2-user
 public | table_c_id_seq | sequence | ec2-user
(6 rows)
"><pre>lcdb<span>=</span><span><span>#</span> \d</span>
               List of relations
 Schema |      Name      |   Type   |  Owner
<span><span>--</span>------+----------------+----------+----------</span>
 public | table_a        | table    | ec2<span>-</span>user
 public | table_a_id_seq | sequence | ec2<span>-</span>user
 public | table_b        | table    | ec2<span>-</span>user
 public | table_b_id_seq | sequence | ec2<span>-</span>user
 public | table_c        | table    | ec2<span>-</span>user
 public | table_c_id_seq | sequence | ec2<span>-</span>user
(<span>6</span> rows)
</pre></div>
<ul dir="auto">
<li>Each table must also have the same columns and primary keys, with the same data types in each column.  To review detailed information for all tables within a specific schema, connect to the database with psql and use the <code>\d schema_name.*</code> command; for example:</li>
</ul>
<div dir="auto" data-snippet-clipboard-copy-content="lcdb=# \d public.*
                                   Table &#34;public.table_a&#34;
   Column   |           Type           | Collation | Nullable |           Default
------------+--------------------------+-----------+----------+------------------------------
 id         | bigint                   |           | not null | generated always as identity
 name       | text                     |           | not null |
 qty        | integer                  |           | not null |
 created_at | timestamp with time zone |           | not null | now()
Indexes:
    &#34;table_a_pkey&#34; PRIMARY KEY, btree (id)

                       Sequence &#34;public.table_a_id_seq&#34;
  Type  | Start | Minimum |       Maximum       | Increment | Cycles? | Cache
--------+-------+---------+---------------------+-----------+---------+-------
 bigint |     1 |       1 | 9223372036854775807 |         1 | no      |     1
Sequence for identity column: public.table_a.id

     Index &#34;public.table_a_pkey&#34;
 Column |  Type  | Key? | Definition
--------+--------+------+------------
 id     | bigint | yes  | id
primary key, btree, for table &#34;public.table_a&#34;
..."><pre>lcdb<span>=</span><span><span>#</span> \d public.*</span>
                                   Table <span><span>&#34;</span>public.table_a<span>&#34;</span></span>
   Column   |           Type           | Collation | Nullable |           Default
<span><span>--</span>----------+--------------------------+-----------+----------+------------------------------</span>
 id         | <span>bigint</span>                   |           | <span>not null</span> | generated always <span>as</span> identity
 name       | <span>text</span>                     |           | <span>not null</span> |
 qty        | <span>integer</span>                  |           | <span>not null</span> |
 created_at | <span>timestamp with time zone</span> |           | <span>not null</span> | now()
Indexes:
    <span><span>&#34;</span>table_a_pkey<span>&#34;</span></span> <span>PRIMARY KEY</span>, btree (id)

                       Sequence <span><span>&#34;</span>public.table_a_id_seq<span>&#34;</span></span>
  Type  | Start | Minimum |       Maximum       | Increment | Cycles? | Cache
<span><span>--</span>------+-------+---------+---------------------+-----------+---------+-------</span>
 <span>bigint</span> |     <span>1</span> |       <span>1</span> | <span>9223372036854775807</span> |         <span>1</span> | no      |     <span>1</span>
Sequence for identity column: <span>public</span>.<span>table_a</span>.id

     Index <span><span>&#34;</span>public.table_a_pkey<span>&#34;</span></span>
 Column |  Type  | Key? | Definition
<span><span>--</span>------+--------+------+------------</span>
 id     | <span>bigint</span> | yes  | id
<span>primary key</span>, btree, for table <span><span>&#34;</span>public.table_a<span>&#34;</span></span>
...</pre></div>
<ul dir="auto">
<li><code>CHECK</code> constraints and <code>NOT NULL</code> constraints must be the same or more permissive on any standby node that acts only as a subscriber.</li>
</ul>
<p dir="auto">For more information about the Spock extension&#39;s advanced functionality, visit <a href="https://blog.veitheller.de/pgEdge/spock/blob/main/docs/features.md">here</a>.</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Building the Spock Extension</h2><a id="user-content-building-the-spock-extension" aria-label="Permalink: Building the Spock Extension" href="#building-the-spock-extension"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You will need to build the Spock extension on a patched PostgreSQL source tree to which you have applied version-specific <code>.diff</code> files from the <code>spock/patches/Postgres-version</code> directory. The high-level steps to build Postgres and the spock extension are:</p>
<ol dir="auto">
<li>
<p dir="auto">Get the <a href="https://www.postgresql.org/docs/current/install-getsource.html" rel="nofollow">Postgres source</a>.</p>
</li>
<li>
<p dir="auto">Copy the patch files to the base repository; the patches for each Postgres version are in a version-specific subdirectory of the <a href="https://github.com/pgEdge/spock/tree/main/patches">spock repo</a>.  Then, apply each patch, use the command:</p>
</li>
</ol>
<p dir="auto"><code>patch -p1 &lt; path_to_patch/patch_name</code></p>
<p dir="auto">Note that you must apply the patches in the numerical order designated by their prefixes in the <code>spock</code> repository (for example, <code>pg16-015-patch-name</code>, then <code>pg16-020-patch-name</code>, then <code>pg16-025-patch-name</code>).</p>
<ol start="3" dir="auto">
<li>
<p dir="auto"><code>configure</code>, <code>make</code>, and <code>make install</code> the Postgres server as described in the <a href="https://www.postgresql.org/docs/current/install-make.html" rel="nofollow">PostgreSQL documentation</a>.</p>
</li>
<li>
<p dir="auto">When the build completes, add the location of your <code>pg_config</code> file to your <code>PATH</code> variable:</p>
</li>
</ol>
<p dir="auto"><code>export PATH=path_to_pg_config_file</code></p>
<ol start="5" dir="auto">
<li>
<p dir="auto">Then, clone the <code>pgedge/spock</code> repository:</p>
<p dir="auto"><code>git clone https://github.com/pgEdge/spock.git</code></p>
</li>
<li>
<p dir="auto">Next, <code>make</code> and then <code>make-install</code> spock.</p>
</li>
<li>
<p dir="auto">Then, update your Postgres <code>postgresql.conf</code> file, setting:</p>
<div dir="auto" data-snippet-clipboard-copy-content="shared_preload_libraries = &#39;spock&#39;
track_commit_timestamp = on # needed for conflict resolution"><pre>shared_preload_libraries = <span><span>&#39;</span>spock<span>&#39;</span></span>
track_commit_timestamp = on <span><span>#</span> needed for conflict resolution</span></pre></div>
</li>
<li>
<p dir="auto">Then, connect to the server and use the <code>CREATE EXTENSION</code> command to create the spock extension on each node in the database you wish to replicate:</p>
<p dir="auto"><code>CREATE EXTENSION spock;</code></p>
</li>
</ol>
<div dir="auto"><h2 tabindex="-1" dir="auto">Building the Spock Documentation</h2><a id="user-content-building-the-spock-documentation" aria-label="Permalink: Building the Spock Documentation" href="#building-the-spock-documentation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The Spock documentation uses <a href="https://www.mkdocs.org" rel="nofollow">MkDocs</a> with the <a href="https://squidfunk.github.io/mkdocs-material/" rel="nofollow">Material theme</a> to generate styled static HTML documentation from Markdown files in the <code>docs</code> directory.</p>
<p dir="auto">To build the documentation, and run a development server for live previewing:</p>
<ol dir="auto">
<li>
<p dir="auto">Create a Python virtual environment:</p>
<div dir="auto" data-snippet-clipboard-copy-content="python3 -m venv spock-docs-venv"><pre>python3 -m venv spock-docs-venv</pre></div>
</li>
<li>
<p dir="auto">Activate the virtual environment:</p>
<div dir="auto" data-snippet-clipboard-copy-content="source spock-docs-venv/bin/activate"><pre><span>source</span> spock-docs-venv/bin/activate</pre></div>
</li>
<li>
<p dir="auto">Install MkDocs:</p>
<div dir="auto" data-snippet-clipboard-copy-content="pip install mkdocs mkdocs-material"><pre>pip install mkdocs mkdocs-material</pre></div>
</li>
<li>
<p dir="auto">Run the local MkDocs server for testing:</p>
<div dir="auto" data-snippet-clipboard-copy-content="mkdocs serve
INFO    -  Building documentation...
INFO    -  Multirepo plugin importing docs...
INFO    -  Cleaning site directory
INFO    -  Multirepo plugin is cleaning up temp_dir/
INFO    -  Documentation built in 0.18 seconds
INFO    -  [14:32:14] Watching paths for changes: &#39;docs&#39;, &#39;mkdocs.yml&#39;
INFO    -  [14:32:14] Serving on http://127.0.0.1:8000/"><pre>mkdocs serve
INFO    -  Building documentation...
INFO    -  Multirepo plugin importing docs...
INFO    -  Cleaning site directory
INFO    -  Multirepo plugin is cleaning up temp_dir/
INFO    -  Documentation built <span>in</span> 0.18 seconds
INFO    -  [14:32:14] Watching paths <span>for</span> changes: <span><span>&#39;</span>docs<span>&#39;</span></span>, <span><span>&#39;</span>mkdocs.yml<span>&#39;</span></span>
INFO    -  [14:32:14] Serving on http://127.0.0.1:8000/</pre></div>
</li>
</ol>
<div dir="auto"><h3 tabindex="-1" dir="auto">Basic Configuration and Usage</h3><a id="user-content-basic-configuration-and-usage" aria-label="Permalink: Basic Configuration and Usage" href="#basic-configuration-and-usage"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Before configuring a replication cluster, you will need to perform the following steps on each node of the cluster:</p>
<ul dir="auto">
<li>build Postgres and Spock, and create the Spock extension.</li>
<li>initialize identical databases.</li>
<li>modify the <code>postgresql.conf</code> file to support logical decoding automatic DDL replication.</li>
<li>modify the <code>pg_hba.conf</code> file and any firewalls to ensure you have connectivity between nodes.</li>
</ul>
<p dir="auto"><strong>Configuration Settings</strong></p>
<p dir="auto">Modify the <code>postgresql.conf</code> file, adding:</p>
<div data-snippet-clipboard-copy-content="wal_level = &#39;logical&#39;
max_worker_processes = 10   # one per database needed on provider node
                            # one per node needed on subscriber node
max_replication_slots = 10  # one per node needed on provider node
max_wal_senders = 10        # one per node needed on provider node
shared_preload_libraries = &#39;spock&#39;
track_commit_timestamp = on # needed for conflict resolution"><pre><code>wal_level = &#39;logical&#39;
max_worker_processes = 10   # one per database needed on provider node
                            # one per node needed on subscriber node
max_replication_slots = 10  # one per node needed on provider node
max_wal_senders = 10        # one per node needed on provider node
shared_preload_libraries = &#39;spock&#39;
track_commit_timestamp = on # needed for conflict resolution
</code></pre></div>
<p dir="auto">You&#39;ll also want to enable automatic ddl replication on each node; add these GUCs to the <code>postgresql.conf</code> file as well:</p>
<div data-snippet-clipboard-copy-content="spock.enable_ddl_replication=on
spock.include_ddl_repset=on"><pre><code>spock.enable_ddl_replication=on
spock.include_ddl_repset=on
</code></pre></div>
<p dir="auto">You also need to configure your <code>pg_hba.conf</code> file to allow connections between your nodes and ensure that firewalls do not block access. Logical replication connections are treated by <code>pg_hba.conf</code> as regular connections to the provider database.</p>
<p dir="auto">After modifying the configuration files, restart the Postgres server; for example:</p>
<p dir="auto"><code>pg_ctl -D /path/to/data_directory restart</code></p>
<p dir="auto"><strong>Configuring Replication</strong></p>
<p dir="auto">First, we&#39;ll invoke the <code>spock.node_create</code> command on each node in the cluster.  For example, the following command creates a node named <code>n1</code> that can be accessed via the connection string specified with the <code>dsn</code> variable:</p>
<div data-snippet-clipboard-copy-content="SELECT spock.node_create(
    node_name := &#39;n1&#39;,
    dsn := &#39;host=10.0.0.5 port=5432 dbname=acctg&#39;
);"><pre><code>SELECT spock.node_create(
    node_name := &#39;n1&#39;,
    dsn := &#39;host=10.0.0.5 port=5432 dbname=acctg&#39;
);
</code></pre></div>
<p dir="auto">Use the following command to create a node named n2:</p>
<div data-snippet-clipboard-copy-content="SELECT spock.node_create(
    node_name := &#39;n2&#39;,
    dsn := &#39;host=10.0.0.7 port=5432 dbname=acctg&#39;
);"><pre><code>SELECT spock.node_create(
    node_name := &#39;n2&#39;,
    dsn := &#39;host=10.0.0.7 port=5432 dbname=acctg&#39;
);
</code></pre></div>
<p dir="auto">Next, create the subscriptions between the nodes. Since this is multi-master replication, each node acts as both a subscriber and provider. The first command creates a subscription between <code>n1</code> and <code>n2</code>:</p>
<div data-snippet-clipboard-copy-content="SELECT spock.sub_create(
    subscription_name := &#39;sub_n1n2&#39;,
    provider_dsn := &#39;host=10.0.0.7 port=5432 dbname=acctg&#39;
);"><pre><code>SELECT spock.sub_create(
    subscription_name := &#39;sub_n1n2&#39;,
    provider_dsn := &#39;host=10.0.0.7 port=5432 dbname=acctg&#39;
);
</code></pre></div>
<p dir="auto">The command invoked on <code>n1</code> specifies the subscription name (<code>sub_n1n2</code>) and the connection string for the node it is subscribing to (<code>n2</code>).  Next, create a subscription on <code>n2</code> that connects to <code>n1</code>:</p>
<div data-snippet-clipboard-copy-content="SELECT spock.sub_create(
    subscription_name := &#39;sub_n2n1&#39;,
    provider_dsn := &#39;host=10.0.0.5 port=5432 dbname=acctg&#39;
);"><pre><code>SELECT spock.sub_create(
    subscription_name := &#39;sub_n2n1&#39;,
    provider_dsn := &#39;host=10.0.0.5 port=5432 dbname=acctg&#39;
);
</code></pre></div>
<p dir="auto">To start replication, we&#39;ll add tables with <a href="https://www.postgresql.org/docs/current/pgbench.html" rel="nofollow">pgbench</a>; since we enabled automatic ddl replication, we&#39;ll add the tables on <code>n1</code>, and they&#39;ll automatically propagate to <code>n2</code>:</p>
<div data-snippet-clipboard-copy-content="/path to pgbench/pgbench -i -s 10 acctg"><pre><code>/path to pgbench/pgbench -i -s 10 acctg
</code></pre></div>
<p dir="auto">Then, to confirm replication, you can connect to both <code>n1</code> and <code>n2</code> with psql and check for pgbench tables.</p>
<div data-snippet-clipboard-copy-content="psql (17.x)
Type &#34;help&#34; for help.

bench=# \dt
               List of relations
 Schema |       Name        | Type  |  Owner
--------+-------------------+-------+---------
 public | pgbench_accounts  | table | postgres
 public | pgbench_branches  | table | postgres
 public | pgbench_history   | table | postgres
 public | pgbench_tellers   | table | postgres
(4 rows)"><pre><code>psql (17.x)
Type &#34;help&#34; for help.

bench=# \dt
               List of relations
 Schema |       Name        | Type  |  Owner
--------+-------------------+-------+---------
 public | pgbench_accounts  | table | postgres
 public | pgbench_branches  | table | postgres
 public | pgbench_history   | table | postgres
 public | pgbench_tellers   | table | postgres
(4 rows)
</code></pre></div>
<p dir="auto"><strong>Deploying Spock Clusters in Containers and with Ansible</strong></p>
<p dir="auto">The pgEdge Github sites hosts repositories that contain artifacts that you can use to simplify spock cluster deployment; for more information, visit:</p>
<ul dir="auto">
<li><a href="https://github.com/pgEdge/pgedge-ansible">Deploying spock with Ansible</a></li>
<li><a href="https://docs.pgedge.com/container" rel="nofollow">Deploying spock in a Container</a></li>
</ul>

<p dir="auto">You cannot roll back an upgrade because of changes to the catalog tables; before starting an upgrade, make sure you have a current backup of your cluster so you can recreate the original cluster if needed.</p>
<p dir="auto">Then, to upgrade the version of spock that you use to manage your replication cluster, you can remove, build, and upgrade the spock extension like you would any other <a href="https://www.postgresql.org/docs/17/extend-extensions.html#EXTEND-EXTENSIONS-UPDATES" rel="nofollow">PostgreSQL extension</a>.</p>
<p dir="auto">To review the spock license, visit <a href="https://blog.veitheller.de/pgEdge/spock/blob/main/LICENSE.md">here</a>.</p>
</article></div></div>
  </body>
</html>
