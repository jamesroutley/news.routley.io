<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://spectrum.ieee.org/data-center-energy-consumption">Original</a>
    <h1>Reworking 30 lines of Linux code could cut power use by up to 30 percent</h1>
    
    <div id="readability-page-1" class="page"><div data-headline="Data Centers Can Slash Power Needs With One Coding Tweak"><div><p>Much of the world’s web traffic is routed through <a href="https://spectrum.ieee.org/tag/data-centers" target="_self"><u>data centers</u></a>, which also fuel power-guzzling <a href="https://spectrum.ieee.org/topic/artificial-intelligence/" target="_self"><u>artificial intelligence (AI)</u></a> applications. In the U.S. alone, <a href="https://www.energy.gov/articles/doe-releases-new-report-evaluating-increase-electricity-demand-data-centers" rel="noopener noreferrer" target="_blank"><u>data centers consumed around 4 percent of the country’s total electricity in 2023</u></a>, and that number is projected to rise up to 12 percent by 2028.</p><p>Some researchers are thinking big, formulating innovative schemes to <a href="https://spectrum.ieee.org/data-centers-designed-for-tropics" target="_self"><u>make data centers more sustainable</u></a>. Others, like <a href="https://cs.uwaterloo.ca/~mkarsten/" rel="noopener noreferrer" target="_blank"><u>Martin Karsten</u></a>, a professor of systems and networking at the <a href="https://uwaterloo.ca/" rel="noopener noreferrer" target="_blank"><u>University of Waterloo</u></a> in <a href="https://spectrum.ieee.org/tag/canada">Canada</a>, are enhancing current methods in the tiniest of ways to reduce <a href="https://spectrum.ieee.org/tag/data-center-energy">data center energy</a> consumption.</p><p>Karsten and his former master’s student, Peter Cai, uncovered inefficiencies in how the <a href="https://spectrum.ieee.org/tag/linux" target="_self"><u>Linux</u></a> <a href="https://spectrum.ieee.org/tag/operating-system">operating system</a> (OS) processes <a href="https://spectrum.ieee.org/tag/network-traffic">network traffic</a> at the kernel level: The <a href="https://www.redhat.com/en/topics/linux/what-is-the-linux-kernel" rel="noopener noreferrer" target="_blank"><u>Linux kernel</u></a> is the “seed” or core of the OS, managing communication and resources such as memory between the hardware and processes.</p><p>In the case of <a href="https://spectrum.ieee.org/tag/data-centers">data centers</a>, these processes entail figuring out where to send segments of information called “data packets” transmitted over the network. When the network receives a new packet, it triggers an interrupt request. The kernel sends this request to the CPU, which then puts its current task on hold to process the packet.</p><p>The OS also periodically polls the network to check for incoming packets before an interrupt request fires. This <a href="https://docs.kernel.org/networking/napi.html#poll" rel="noopener noreferrer" target="_blank"><u>busy polling</u></a> mechanism minimizes delays in network traffic processing at the cost of CPU power consumption. During low traffic conditions in particular, polling continues even without packets to process, leading to needless energy usage.</p><p>Karsten decided to optimize this approach. “Instead of always waiting for a fixed period of time, we dynamically wait based on what we know is going on in the application,” he says. He devised a technique such that busy polling happens during high network traffic periods, with unnecessary interrupt requests suspended. When network traffic dies down, interrupt-based delivery resumes. “That makes the resulting mechanism much more efficient and flexible,” he adds.</p><h2>Optimizing <a href="https://spectrum.ieee.org/tag/linux">Linux</a> for <a href="https://spectrum.ieee.org/tag/energy-efficiency">Energy Efficiency</a></h2><p>Putting theory into practice, Karsten partnered with <a href="https://blog.dama.to/about/" rel="noopener noreferrer" target="_blank"><u>Joe Damato</u></a>, a distinguished engineer at <a href="https://spectrum.ieee.org/tag/cloud-computing">cloud computing</a> services provider <a href="https://www.fastly.com/" rel="noopener noreferrer" target="_blank"><u>Fastly</u></a> and frequent Linux kernel contributor, to develop the changes. It turns out they didn’t have to write any new code.</p><p>“It’s really just reorganizing the way in which the data flow and the data processing is happening,” says Damato. “We piggyback on existing code in the Linux kernel, and we change the order in which things operate.”</p><p>That change led to around 30 lines of reworked code. They tested the functionality and performance of their modifications on different scenarios and workloads, and found that the kernel improvements can decrease power consumption by up to 30 percent.</p><p>This energy savings comes with a caveat. “It is sort of a best case because the 30 percent applies to the network stack or communication part of it,” Karsten explains. “If an application primarily does that, then it will see 30 percent improvement. If the application does a lot of other things and only occasionally uses the network, then the 30 percent will shrink to a smaller value.”</p><p>The altered code can especially benefit network-dominant applications like data centers whose traffic levels fluctuate during the day, because the change is automatic and dynamic based on network traffic load. Such a small code snippet could also have a huge cascading impact, with some reports noting that Linux is widely used by a majority of <a href="https://w3techs.com/technologies/breakdown/os-linux/data_center" rel="noopener noreferrer" target="_blank"><u>data center providers</u></a> and <a href="https://w3techs.com/technologies/details/os-linux" rel="noopener noreferrer" target="_blank"><u>websites</u></a>.</p><h2>Linux Kernel Update Goes Live</h2><p>The <a href="https://web.git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=80b6f094756f" rel="noopener noreferrer" target="_blank"><u>code</u></a> has been implemented as part of the <a href="https://kernelnewbies.org/Linux_6.13#NAPI_suspension_for_more_efficient_networking" rel="noopener noreferrer" target="_blank"><u>Linux kernel release version 6.13</u></a> in January. Karsten and Cai also published a related <a href="https://dl.acm.org/doi/abs/10.1145/3626780" rel="noopener noreferrer" target="_blank"><u>paper</u></a> in the <a href="https://dl.acm.org/toc/pomacs/2023/7/3" rel="noopener noreferrer" target="_blank"><u><em>Proceedings of the ACM on Measurement and Analysis of Computing Systems</em></u></a> in 2023 and presented it at the <a href="https://www.sigmetrics.org/sigmetrics2024/" rel="noopener noreferrer" target="_blank"><u>ACM SIGMETRICS 2024</u></a> conference.</p><p>Damato hopes to spread the word about their work at upcoming Linux kernel networking conferences this year. He’s also planning to add support for a similar mechanism in Fastly’s <a href="https://github.com/h2o" rel="noopener noreferrer" target="_blank"><u>H2O server</u></a>.</p><p>And because Linux is <a href="https://spectrum.ieee.org/tag/open-source" target="_self"><u>open source</u></a>, Damato hopes others would follow their lead. “Whether you use <a href="https://spectrum.ieee.org/tag/nginx">nginx</a> or Apache or whatever it happens to be as your web server, you’ll be able to use some of the code we put out there to help inspire and direct you into how you might implement the same thing for your web server.”</p><p>For Karsten, this work has motivated him to take on <a href="https://spectrum.ieee.org/tag/sustainability" target="_self"><u>sustainability</u></a> and <a href="https://spectrum.ieee.org/green-software" target="_self"><u>software efficiency</u></a> as his next research agenda.</p><p>“When I grew up in computer science in the 90s, everybody was concerned about efficiency. Because computers were small, they just had a small amount of memory. They were slow, so you had to worry about every cycle and every byte,” he says. “Somehow in the last 20 years, this has gotten lost. Everybody’s completely gung-ho about performance without any regard for efficiency or resource consumption. I think it’s time to pivot, where we can find ways to make things a little more efficient.”</p></div></div></div>
  </body>
</html>
