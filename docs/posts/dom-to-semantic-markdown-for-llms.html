<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/romansky/dom-to-semantic-markdown">Original</a>
    <h1>Show HN: DOM to Semantic Markdown â€“ For LLMs</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a href="https://github.com/romansku/dom-to-semantic-markdown/actions/workflows/ci.yml"><img src="https://github.com/romansky/dom-to-semantic-markdown/actions/workflows/ci.yml/badge.svg" alt="CI"/></a>
<a href="https://badge.fury.io/js/dom-to-semantic-markdown" rel="nofollow"><img src="https://camo.githubusercontent.com/ccb34feda3afb709eaa3677eb22e9e7e7151dcc811d66a910d7355d92b95c8bf/68747470733a2f2f62616467652e667572792e696f2f6a732f646f6d2d746f2d73656d616e7469632d6d61726b646f776e2e737667" alt="npm version" data-canonical-src="https://badge.fury.io/js/dom-to-semantic-markdown.svg"/></a>
<a href="https://opensource.org/licenses/MIT" rel="nofollow"><img src="https://camo.githubusercontent.com/6552afb9038154d801c50b6e55a76db78a6787a8d6e2b5252a44864503c52887/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d4d49542d626c75652e737667" alt="License: ISC" data-canonical-src="https://img.shields.io/badge/License-MIT-blue.svg"/></a></p>
<p dir="auto">Convert HTML DOM to Semantic Markdown for use in LLMs (Large Language Models).</p>

<ul dir="auto">
<li><a href="#why-dom-to-semantic-markdown">Why DOM to Semantic Markdown?</a></li>
<li><a href="#features">Features</a></li>
<li><a href="#semantic-format">Semantic Format</a></li>
<li><a href="#use-cases">Use Cases</a></li>
<li><a href="#tools">Tools</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#api">API</a></li>
<li><a href="#contributing">Contributing</a></li>
<li><a href="#license">License</a></li>
</ul>
<div dir="auto"><h2 tabindex="-1" dir="auto">Why DOM to Semantic Markdown?</h2><a id="user-content-why-dom-to-semantic-markdown" aria-label="Permalink: Why DOM to Semantic Markdown?" href="#why-dom-to-semantic-markdown"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">DOM to Semantic Markdown addresses several key challenges in extracting web content for LLMs:</p>
<ol dir="auto">
<li>
<p dir="auto"><strong>Maximizing Semantic Information</strong>: Preserves the semantic structure of web content, unlike traditional HTML-to-text conversion.</p>
</li>
<li>
<p dir="auto"><strong>Token Efficiency</strong>: Produces a concise yet information-rich format, reducing token usage compared to verbose HTML.</p>
</li>
<li>
<p dir="auto"><strong>Preserving Metadata</strong>: Retains essential metadata like links, image descriptions, and structural information.</p>
</li>
<li>
<p dir="auto"><strong>Semantic Clarity</strong>: Converts web content to a format more easily &#34;understandable&#34; for LLMs, enhancing their processing and reasoning capabilities.</p>
</li>
</ol>

<ul dir="auto">
<li>HTML to Semantic Markdown AST conversion</li>
<li>Detection and extraction of main content</li>
<li>Semantic structure preservation (e.g., <code>&lt;header&gt;</code>, <code>&lt;footer&gt;</code>, <code>&lt;nav&gt;</code>)</li>
<li>Metadata capture for images, tables, and other rich media elements</li>
<li>URL refification for token optimization</li>
<li>Customizable conversion options</li>
<li>Browser and Node.js support</li>
</ul>

<p dir="auto">DOM to Semantic Markdown&#39;s format captures rich web content structure:</p>
<ul dir="auto">
<li>Preserves HTML semantic tags (<code>&lt;header&gt;</code>, <code>&lt;footer&gt;</code>, <code>&lt;nav&gt;</code>, <code>&lt;aside&gt;</code>, etc.)</li>
<li>Captures image metadata (alt text, dimensions, etc.)</li>
<li>Maintains table structures and data relationships</li>
<li>Preserves link destinations while optimizing for token efficiency</li>
</ul>

<ol dir="auto">
<li>
<p dir="auto"><strong>Content-Focused Q&amp;A</strong>: Extract main content for focused question-answering tasks.</p>
</li>
<li>
<p dir="auto"><strong>Full-Page Analysis</strong>: Convert entire web pages for comprehensive site analysis.</p>
</li>
<li>
<p dir="auto"><strong>Rich Media Understanding</strong>: Preserve image descriptions and table structures for visual or structured data tasks.</p>
</li>
<li>
<p dir="auto"><strong>SEO and Content Auditing</strong>: Analyze page structure and content distribution across semantic sections.</p>
</li>
</ol>

<div dir="auto"><h3 tabindex="-1" dir="auto">Abstract Syntax Tree (AST)</h3><a id="user-content-abstract-syntax-tree-ast" aria-label="Permalink: Abstract Syntax Tree (AST)" href="#abstract-syntax-tree-ast"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>Enables programmatic content manipulation and analysis.</li>
<li>Facilitates advanced filtering, restructuring, and content transformation.</li>
</ul>
<p dir="auto">Example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="import { htmlToMarkdownAST, findInMarkdownAST } from &#39;dom-to-semantic-markdown&#39;;

const html = &#39;&lt;div&gt;&lt;h1&gt;Title&lt;/h1&gt;&lt;p&gt;Content&lt;/p&gt;&lt;/div&gt;&#39;;
const ast = htmlToMarkdownAST(html);

const headingNode = findInMarkdownAST(ast, node =&gt; node.type === &#39;heading&#39; &amp;&amp; node.level === 1);
console.log(headingNode); // { type: &#39;heading&#39;, level: 1, content: &#39;Title&#39; }"><pre><span>import</span> <span>{</span> <span>htmlToMarkdownAST</span><span>,</span> <span>findInMarkdownAST</span> <span>}</span> <span>from</span> <span>&#39;dom-to-semantic-markdown&#39;</span><span>;</span>

<span>const</span> <span>html</span> <span>=</span> <span>&#39;&lt;div&gt;&lt;h1&gt;Title&lt;/h1&gt;&lt;p&gt;Content&lt;/p&gt;&lt;/div&gt;&#39;</span><span>;</span>
<span>const</span> <span>ast</span> <span>=</span> <span>htmlToMarkdownAST</span><span>(</span><span>html</span><span>)</span><span>;</span>

<span>const</span> <span>headingNode</span> <span>=</span> <span>findInMarkdownAST</span><span>(</span><span>ast</span><span>,</span> <span>node</span> <span>=&gt;</span> <span>node</span><span>.</span><span>type</span> <span>===</span> <span>&#39;heading&#39;</span> <span>&amp;&amp;</span> <span>node</span><span>.</span><span>level</span> <span>===</span> <span>1</span><span>)</span><span>;</span>
<span>console</span><span>.</span><span>log</span><span>(</span><span>headingNode</span><span>)</span><span>;</span> <span>// { type: &#39;heading&#39;, level: 1, content: &#39;Title&#39; }</span></pre></div>

<ul dir="auto">
<li>Converts long URLs into shorter, token-efficient references.</li>
<li>Preserves link information while reducing token count.</li>
</ul>
<p dir="auto">Example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="import { convertHtmlToMarkdown } from &#39;dom-to-semantic-markdown&#39;;

const html = &#39;&lt;a href=&#34;https://example.com/very/long/url&#34;&gt;Link&lt;/a&gt;&#39;;
const markdown = convertHtmlToMarkdown(html, { refifyUrls: true });
console.log(markdown);
// Output: [Link](ref1)
// ref1: https://example.com/very/long/url"><pre><span>import</span> <span>{</span> <span>convertHtmlToMarkdown</span> <span>}</span> <span>from</span> <span>&#39;dom-to-semantic-markdown&#39;</span><span>;</span>

<span>const</span> <span>html</span> <span>=</span> <span>&#39;&lt;a href=&#34;https://example.com/very/long/url&#34;&gt;Link&lt;/a&gt;&#39;</span><span>;</span>
<span>const</span> <span>markdown</span> <span>=</span> <span>convertHtmlToMarkdown</span><span>(</span><span>html</span><span>,</span> <span>{</span> <span>refifyUrls</span>: <span>true</span> <span>}</span><span>)</span><span>;</span>
<span>console</span><span>.</span><span>log</span><span>(</span><span>markdown</span><span>)</span><span>;</span>
<span>// Output: [Link](ref1)</span>
<span>// ref1: https://example.com/very/long/url</span></pre></div>

<ul dir="auto">
<li>Automatically identifies the primary content section of a webpage.</li>
<li>Focuses on relevant information, excluding boilerplate content when not needed.</li>
</ul>
<p dir="auto">Example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="import { convertHtmlToMarkdown } from &#39;dom-to-semantic-markdown&#39;;

const html = `
  &lt;header&gt;Site Header&lt;/header&gt;
  &lt;main&gt;&lt;h1&gt;Main Content&lt;/h1&gt;&lt;p&gt;Important stuff.&lt;/p&gt;&lt;/main&gt;
  &lt;footer&gt;Site Footer&lt;/footer&gt;
`;
const markdown = convertHtmlToMarkdown(html, { extractMainContent: true });
console.log(markdown);
// Output: # Main Content
//
// Important stuff."><pre><span>import</span> <span>{</span> <span>convertHtmlToMarkdown</span> <span>}</span> <span>from</span> <span>&#39;dom-to-semantic-markdown&#39;</span><span>;</span>

<span>const</span> <span>html</span> <span>=</span> <span>`</span>
<span>  &lt;header&gt;Site Header&lt;/header&gt;</span>
<span>  &lt;main&gt;&lt;h1&gt;Main Content&lt;/h1&gt;&lt;p&gt;Important stuff.&lt;/p&gt;&lt;/main&gt;</span>
<span>  &lt;footer&gt;Site Footer&lt;/footer&gt;</span>
<span>`</span><span>;</span>
<span>const</span> <span>markdown</span> <span>=</span> <span>convertHtmlToMarkdown</span><span>(</span><span>html</span><span>,</span> <span>{</span> <span>extractMainContent</span>: <span>true</span> <span>}</span><span>)</span><span>;</span>
<span>console</span><span>.</span><span>log</span><span>(</span><span>markdown</span><span>)</span><span>;</span>
<span>// Output: # Main Content</span>
<span>//</span>
<span>// Important stuff.</span></pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="npm install dom-to-semantic-markdown"><pre>npm install dom-to-semantic-markdown</pre></div>


<div dir="auto" data-snippet-clipboard-copy-content="import { convertHtmlToMarkdown } from &#39;dom-to-semantic-markdown&#39;;

const html = &#39;&lt;h1&gt;Hello, World!&lt;/h1&gt;&lt;p&gt;This is a &lt;strong&gt;test&lt;/strong&gt;.&lt;/p&gt;&#39;;
const markdown = convertHtmlToMarkdown(html);
console.log(markdown);"><pre><span>import</span> <span>{</span> <span>convertHtmlToMarkdown</span> <span>}</span> <span>from</span> <span>&#39;dom-to-semantic-markdown&#39;</span><span>;</span>

<span>const</span> <span>html</span> <span>=</span> <span>&#39;&lt;h1&gt;Hello, World!&lt;/h1&gt;&lt;p&gt;This is a &lt;strong&gt;test&lt;/strong&gt;.&lt;/p&gt;&#39;</span><span>;</span>
<span>const</span> <span>markdown</span> <span>=</span> <span>convertHtmlToMarkdown</span><span>(</span><span>html</span><span>)</span><span>;</span>
<span>console</span><span>.</span><span>log</span><span>(</span><span>markdown</span><span>)</span><span>;</span></pre></div>
<p dir="auto"><a href="https://github.com/romansky/dom-to-semantic-markdown/blob/main/examples/browser.html">full browser example</a></p>

<div dir="auto" data-snippet-clipboard-copy-content="const { convertHtmlToMarkdown } = require(&#39;dom-to-semantic-markdown&#39;);
const jsdom = require(&#39;jsdom&#39;);
const { JSDOM } = jsdom;

const html = &#39;&lt;h1&gt;Hello, World!&lt;/h1&gt;&lt;p&gt;This is a &lt;strong&gt;test&lt;/strong&gt;.&lt;/p&gt;&#39;;
const dom = new JSDOM(html);
const markdown = convertHtmlToMarkdown(html, { overrideDOMParser: dom.window.DOMParser });
console.log(markdown);"><pre><span>const</span> <span>{</span> convertHtmlToMarkdown <span>}</span> <span>=</span> <span>require</span><span>(</span><span>&#39;dom-to-semantic-markdown&#39;</span><span>)</span><span>;</span>
<span>const</span> <span>jsdom</span> <span>=</span> <span>require</span><span>(</span><span>&#39;jsdom&#39;</span><span>)</span><span>;</span>
<span>const</span> <span>{</span> <span>JSDOM</span> <span>}</span> <span>=</span> <span>jsdom</span><span>;</span>

<span>const</span> <span>html</span> <span>=</span> <span>&#39;&lt;h1&gt;Hello, World!&lt;/h1&gt;&lt;p&gt;This is a &lt;strong&gt;test&lt;/strong&gt;.&lt;/p&gt;&#39;</span><span>;</span>
<span>const</span> <span>dom</span> <span>=</span> <span>new</span> <span>JSDOM</span><span>(</span><span>html</span><span>)</span><span>;</span>
<span>const</span> <span>markdown</span> <span>=</span> <span>convertHtmlToMarkdown</span><span>(</span><span>html</span><span>,</span> <span>{</span> <span>overrideDOMParser</span>: <span>dom</span><span>.</span><span>window</span><span>.</span><span>DOMParser</span> <span>}</span><span>)</span><span>;</span>
<span>console</span><span>.</span><span>log</span><span>(</span><span>markdown</span><span>)</span><span>;</span></pre></div>
<p dir="auto"><a href="https://github.com/romansky/dom-to-semantic-markdown/blob/main/examples/node">full node example</a></p>

<div dir="auto"><h3 tabindex="-1" dir="auto"><code>convertHtmlToMarkdown(html: string, options?: ConversionOptions): string</code></h3><a id="user-content-converthtmltomarkdownhtml-string-options-conversionoptions-string" aria-label="Permalink: convertHtmlToMarkdown(html: string, options?: ConversionOptions): string" href="#converthtmltomarkdownhtml-string-options-conversionoptions-string"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Converts an HTML string to Semantic Markdown.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto"><code>convertElementToMarkdown(element: Element, options?: ConversionOptions): string</code></h3><a id="user-content-convertelementtomarkdownelement-element-options-conversionoptions-string" aria-label="Permalink: convertElementToMarkdown(element: Element, options?: ConversionOptions): string" href="#convertelementtomarkdownelement-element-options-conversionoptions-string"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Converts an HTML Element to Semantic Markdown.</p>

<ul dir="auto">
<li><code>websiteDomain?: string</code>: The domain of the website being converted.</li>
<li><code>extractMainContent?: boolean</code>: Whether to extract only the main content of the page.</li>
<li><code>refifyUrls?: boolean</code>: Whether to convert URLs to reference-style links.</li>
<li><code>debug?: boolean</code>: Enable debug logging.</li>
<li><code>overrideDOMParser?: DOMParser</code>: Custom DOMParser for Node.js environments.</li>
</ul>

<p dir="auto">Contributions to DOM to Semantic Markdown are welcome!</p>

<p dir="auto">This project is licensed under the MIT License. See the <a href="https://github.com/romansky/dom-to-semantic-markdown/blob/main/LICENSE">LICENSE</a> file for details.</p>
</article></div></div>
  </body>
</html>
