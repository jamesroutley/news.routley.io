<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/ezyang/codemcp">Original</a>
    <h1>Show HN: Codemcp – Claude Code for Claude Pro subscribers – ditch API bills</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">Make Claude Desktop a pair programming assistant by installing codemcp.  With
it, you can directly ask Claude to implement features, fix bugs and do
refactors on a codebase on your computer; Claude will directly edit files and
run tests.  Say goodbye to copying code in and out of Claude&#39;s chat window!</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/ezyang/codemcp/blob/main/static/screenshot.png?raw=true"><img src="https://github.com/ezyang/codemcp/raw/main/static/screenshot.png?raw=true" alt="Screenshot of Claude Desktop with codemcp"/></a></p>
<p dir="auto">codemcp offers similar functionality to other AI coding software (Claude Code,
Cursor, Cline, Aider), but it occupies a unique point in the design space:</p>
<ol dir="auto">
<li>
<p dir="auto">It&#39;s intended to be used with Claude Pro, Anthropic&#39;s $20/mo subscription
offering.  <strong>Say goodbye to giant API bills</strong>.  (Say hello to time-based rate
limits.)</p>
</li>
<li>
<p dir="auto">It&#39;s built around <strong>safe agentic AI</strong> by providing a limited set of tools
that helpful, honest and harmless LLMs are unlikely to misuse, and enforcing
best practices like use of Git version control to ensure all code changes
can be rolled back.  As a result, you can safely <strong>unleash the AI</strong> and
only evaluate at the end if you want to accept the changes or not.</p>
</li>
<li>
<p dir="auto">It&#39;s <strong>IDE agnostic</strong>: you ask Claude to make changes, it makes them, and
then you can use your favorite IDE setup to review the changes and make
further edits.</p>
</li>
</ol>

<p dir="auto">First, <a href="https://docs.astral.sh/uv/getting-started/installation/" rel="nofollow">install uv</a>
and <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git" rel="nofollow">install
git</a>, if they
are not installed already (on Windows, if you installed Git, I recommend
rebooting).</p>
<p dir="auto">Then, in <code>claude_desktop_config.json</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="{
  &#34;mcpServers&#34;: {
    &#34;codemcp&#34;: {
      &#34;command&#34;: &#34;/Users/&lt;username&gt;/.local/bin/uvx&#34;,
      &#34;args&#34;: [
        &#34;--from&#34;,
        &#34;git+https://github.com/ezyang/codemcp@prod&#34;,
        &#34;codemcp&#34;
      ]
    }
  }
}"><pre>{
  <span>&#34;mcpServers&#34;</span>: {
    <span>&#34;codemcp&#34;</span>: {
      <span>&#34;command&#34;</span>: <span><span>&#34;</span>/Users/&lt;username&gt;/.local/bin/uvx<span>&#34;</span></span>,
      <span>&#34;args&#34;</span>: [
        <span><span>&#34;</span>--from<span>&#34;</span></span>,
        <span><span>&#34;</span>git+https://github.com/ezyang/codemcp@prod<span>&#34;</span></span>,
        <span><span>&#34;</span>codemcp<span>&#34;</span></span>
      ]
    }
  }
}</pre></div>
<p dir="auto">On Windows, double backslashes are necessary for the path:</p>
<div data-snippet-clipboard-copy-content="C:\\Users\\&lt;username&gt;\\.local\\bin\\uvx.exe"><pre><code>C:\\Users\\&lt;username&gt;\\.local\\bin\\uvx.exe
</code></pre></div>
<p dir="auto">If the MCP successfully loaded, a hammer icon will appear and when you click
it &#34;codemcp&#34; will be visible.</p>
<p dir="auto">Pro tip: If the server fails to load, go to Settings &gt; Developer &gt; codemcp &gt;
Logs to look at the MCP logs, they&#39;re very helpful for debugging.</p>
<p dir="auto">Pro tip: if on Windows, the logs say &#34;Git executable not found. Ensure that
Git is installed and available&#34;, and you <em>just</em> installed Git, reboot your
machine (the PATH update hasn&#39;t propagated.)  If this still doesn&#39;t work, open
System Properties &gt; Environment Variables &gt; System variables &gt; Path and ensure
there is an entry for Git.</p>
<p dir="auto">Pro tip: if you like to live dangerously, you can change <code>prod</code> to <code>main</code>.  If
you want to pin to a specific release, replace it with <code>0.3.0</code> or similar.</p>
<p dir="auto">Pro tip: it is supported to specify only <code>uvx</code> as the command, but uvx must be
in your global PATH (not just added via a shell profile); on OS X, this is
typically not the case if you used the self installer (unless you installed
into a system location like <code>/usr/local/bin</code>).</p>

<p dir="auto">First, you must create a <code>codemcp.toml</code> file in the Git repository checkout
you want to work on.  If you want the agent to be able to do things like run
your formatter or run tests, add the commands to execute them in the commands
section (note: these commands need to appropriately setup any virtual
environment they need):</p>
<div dir="auto" data-snippet-clipboard-copy-content="format = [&#34;./run_format.sh&#34;]
test = [&#34;./run_test.sh&#34;]"><pre><span>format</span> = [<span><span>&#34;</span>./run_format.sh<span>&#34;</span></span>]
<span>test</span> = [<span><span>&#34;</span>./run_test.sh<span>&#34;</span></span>]</pre></div>
<p dir="auto">Next, in Claude Desktop, we recommend creating a Project and putting this in
the Project Instructions:</p>
<div data-snippet-clipboard-copy-content="Initialize codemcp with $PROJECT_DIR"><pre><code>Initialize codemcp with $PROJECT_DIR
</code></pre></div>
<p dir="auto">Where <code>$PROJECT_DIR</code> is the path to the project you want to work on.</p>
<p dir="auto">Then chat with Claude about what changes you want to make to the project.
Every time codemcp makes a change to your code, it will generate a commit.</p>
<p dir="auto">To see some sample transcripts using this tool, check out:</p>
<ul dir="auto">
<li><a href="https://claude.ai/share/a229d291-6800-4cb8-a0df-896a47602ca0" rel="nofollow">Implement a new feature</a></li>
<li><a href="https://claude.ai/share/2b7161ef-5683-4261-ad45-fabc3708f950" rel="nofollow">Fix failing tests</a></li>
<li><a href="https://claude.ai/share/f005b43c-a657-43e5-ad9f-4714a5cd746f" rel="nofollow">Do a refactor</a></li>
</ul>
<p dir="auto">codemcp will generate a commit per chat and amend it as it is working on your feature.</p>

<ul dir="auto">
<li>
<p dir="auto">When you get rate limited, take the time to do something else (review
Claude&#39;s code, review someone else&#39;s code, make plans, do some meetings)</p>
</li>
<li>
<p dir="auto">This is <em>not</em> an autonomous agent.  At minimum, you have to intervene after
every chat to review the changes and request the next change.  While you
<em>can</em> ask for a long list of things to be done in a single chat, you will
likely hit Claude Desktop&#39;s output limit and have to manually &#34;continue&#34; the
agent anyway.  Embrace it, and use the interruptions to make sure Claude is
doing the right thing.</p>
</li>
<li>
<p dir="auto">When Claude goes off the rails, it costs you time rather than dollars.
Behave accordingly: if time is the bottleneck, watch Claude&#39;s incremental
output carefully.</p>
</li>
</ul>

<p dir="auto">Here are all the config options supported by <code>codemcp.toml</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="project_prompt = &#34;&#34;&#34;
Before beginning work on this feature, write a short haiku.  Do this only once.
&#34;&#34;&#34;

[commands]
format = [&#34;./run_format.sh&#34;]
test = [&#34;./run_test.sh&#34;]"><pre><span>project_prompt</span> = <span><span>&#34;&#34;&#34;</span></span>
<span>Before beginning work on this feature, write a short haiku.  Do this only once.</span>
<span><span>&#34;&#34;&#34;</span></span>

[<span>commands</span>]
<span>format</span> = [<span><span>&#34;</span>./run_format.sh<span>&#34;</span></span>]
<span>test</span> = [<span><span>&#34;</span>./run_test.sh<span>&#34;</span></span>]</pre></div>
<p dir="auto">The <code>project_prompt</code> will be loaded when you initialize the project in chats.</p>
<p dir="auto">The <code>commands</code> section allows you to configure commands for specific tools.  The
names are told to the LLM, who will decide when it wants to run them.  You can add
instructions how to use tools in the <code>project_prompt</code>; we also support a more verbose
syntax where you can give specific instructions on a tool-by-tool basis:</p>
<div data-snippet-clipboard-copy-content="[commands.test]
command = [&#34;./run_test.sh&#34;]
doc = &#34;Accepts a pytest-style test selector as an argument to run a specific test.&#34;"><pre><code>[commands.test]
command = [&#34;./run_test.sh&#34;]
doc = &#34;Accepts a pytest-style test selector as an argument to run a specific test.&#34;
</code></pre></div>

<p dir="auto">To run the server with inspector, use:</p>
<div data-snippet-clipboard-copy-content="PYTHONPATH=. mcp dev codemcp/__main__.py"><pre><code>PYTHONPATH=. mcp dev codemcp/__main__.py
</code></pre></div>
<p dir="auto">Logs are written to <code>~/.codemcp/codemcp.log</code>. The log level can be set in a global configuration file at <code>~/.codemcprc</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="[logger]
verbosity = &#34;INFO&#34;  # Can be DEBUG, INFO, WARNING, ERROR, or CRITICAL"><pre>[<span>logger</span>]
<span>verbosity</span> = <span><span>&#34;</span>INFO<span>&#34;</span></span>  <span><span>#</span> Can be DEBUG, INFO, WARNING, ERROR, or CRITICAL</span></pre></div>
<p dir="auto">Logging is not configurable on a per project basis, but this shouldn&#39;t matter
much because it&#39;s difficult to use Claude Desktop in parallel on multiple
projects anyway.</p>

<p dir="auto">See <a href="https://github.com/ezyang/codemcp/blob/main/CONTRIBUTING.md">CONTRIBUTING.md</a>.</p>
</article></div></div>
  </body>
</html>
