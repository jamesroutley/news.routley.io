<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.gentoo.org/news/2024/02/04/x86-64-v3.html">Original</a>
    <h1>Gentoo x86-64-v3 binary packages available</h1>
    
    <div id="readability-page-1" class="page"><div>
      <div>
        <div id="content">
          

<p><a href="https://www.gentoo.org/news/2024/02/04/x86-64-v3.html">
  <img src="https://www.gentoo.org/assets/img/news/2024/larry-packages-small.png" alt="Larry the cow with packages"/>
</a></p>

<p>End of December 2023 we already made our <a href="https://www.gentoo.org/news/2023/12/29/Gentoo-binary.html">official
announcement of binary Gentoo package hosting</a>. The initial package set for amd64 was and is 
base-line x86-64, i.e., it should work on any 64bit Intel or AMD machine. Now, we are happy to
announce that there is also a separate package set using the <a href="https://en.wikipedia.org/wiki/X86-64#Microarchitecture_levels"><b>extended 
x86-64-v3 ISA</b> (i.e., microarchitecture level)</a>
available for the same software. If your hardware supports it, use it and enjoy the speed-up! 
<a href="https://www.gentoo.org/news/2024/02/04/x86-64-v3.html">Read on for more details…</a></p>

<!--more-->

<h2 id="questions--answers">Questions &amp; Answers</h2>

<h3 id="how-can-i-check-if-my-machine-supports-x86-64-v3">How can I check if my machine supports x86-64-v3?</h3>

<p>The easiest way to do this is to use glibc’s dynamic linker:</p>
<div><div><pre><code>larry@noumea ~ $ ld.so --help
Usage: ld.so [OPTION]... EXECUTABLE-FILE [ARGS-FOR-PROGRAM...]
You have invoked &#39;ld.so&#39;, the program interpreter for dynamically-linked
ELF programs.  Usually, the program interpreter is invoked automatically
when a dynamically-linked executable is started.
[...]
[...]

Subdirectories of glibc-hwcaps directories, in priority order:
  x86-64-v4
  x86-64-v3 (supported, searched)
  x86-64-v2 (supported, searched)
larry@noumea ~ $ 
</code></pre></div></div>
<p>As you can see, this laptop supports x86-64-v2 and x86-64-v3, but not x86-64-v4.</p>

<h3 id="how-do-i-use-the-new-x86-64-v3-packages">How do I use the new x86-64-v3 packages?</h3>

<p>On your amd64 machine, edit the configuration file in <code>/etc/portage/binrepos.conf/</code>
that defines the URI from where the packages are downloaded, and replace <code>x86-64</code> with
<code>x86-64-v3</code>. E.g., if you have so far</p>
<div><div><pre><code>sync-uri = https://ftp.fau.de/gentoo/releases/amd64/binpackages/17.1/x86-64/
</code></pre></div></div>
<p>then you change the URI to</p>
<div><div><pre><code>sync-uri = https://ftp.fau.de/gentoo/releases/amd64/binpackages/17.1/x86-64-v3/
</code></pre></div></div>
<p>That’s all.</p>

<h3 id="why-dont-you-have-x86-64-v4-packages">Why don’t you have x86-64-v4 packages?</h3>

<p>There’s not yet enough hardware and people out there that could use them.</p>

<p>We could start building such packages at any time (our build host is new and 
shiny), but for now we recommend you build from source and use your
own CFLAGS then. After all, if your machine supports x86-64-v4, it’s definitely fast…</p>

<h3 id="why-is-there-recently-so-much-noise-about-x86-64-v3-support-in-linux-distros">Why is there recently so much noise about x86-64-v3 support in Linux distros?</h3>

<p>Beats us. The ISA is 9 years old (just the tag x86-64-v3 was slapped onto
it recently), so you’d think binaries would have been generated by now. 
With Gentoo you could’ve done (and probably have done) it all the time.</p>

<p>That said, in some processor lines (i.e. Atom), support for this instruction
set was introduced rather late (2021).</p>

        </div>
      </div>
    </div></div>
  </body>
</html>
