<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://community.openstreetmap.org/t/new-osm-file-format-30-smaller-than-pbf-5x-faster-to-import/137151">Original</a>
    <h1>New OSM file format: 30% smaller than PBF, 5x faster to import</h1>
    
    <div id="readability-page-1" class="page"><div itemscope="" itemtype="http://schema.org/DiscussionForumPosting">
      <meta itemprop="headline" content="New OSM file format: 30% smaller than PBF, 5x faster to import"/>
      
      <meta itemprop="datePublished" content="2025-10-23T15:25:22Z"/>
        <meta itemprop="articleSection" content="General talk"/>
      <meta itemprop="keywords" content="geodesk, gol"/>
      


          <div id="post_1">
            <div>
              

                

              <p><span>
                  <time datetime="2025-10-23T15:25:22Z">
                    October 23, 2025,  3:25pm
                  </time>
                  <meta itemprop="dateModified" content="2025-10-23T15:39:00Z"/>
              <span itemprop="position">1</span>
              </span>
            </p></div>
            <div itemprop="text">
              <p>The OSM dataset is huge, and keeps growing every day. Great news, of course, but sometimes the sheer volume can be overwhelming – there are just gobs and <em>gobs</em> of data!</p>
<p>Hence, we created GOB (“Geo-Object Bundle”), a new file format that makes tackling OSM data faster and easier. It’s a companion format to our now-familiar <a href="https://wiki.openstreetmap.org/wiki/Geographic_Object_Library">Geo-Object Library</a> (essentially, a tightly-compressed GOL with its indexes stripped).</p>
<p>To support this new format, GOL Tool 2.1 has two new commands: <code>save</code> GOLs as GOBs and <code>load</code> GOBs into a GOL (Of course, like all of the GeoDesk Toolkit, the GOL Tool is free &amp; open-source).</p>
<div><a href="https://community-cdn.openstreetmap.org/uploads/default/original/3X/6/3/63cb08ad6b5f33578da3f529982ccd975caba949.jpeg" data-download-href="https://community-cdn.openstreetmap.org/uploads/default/63cb08ad6b5f33578da3f529982ccd975caba949" title="GOB Tiling &amp; Size Statistics"><img src="https://community-cdn.openstreetmap.org/uploads/default/optimized/3X/6/3/63cb08ad6b5f33578da3f529982ccd975caba949_2_690x358.jpeg" alt="GOB Tiling &amp; Size Statistics" data-base62-sha1="eeOgB0dnd7f5NRTE9l9cGzuDQvL" width="690" height="358" srcset="https://community-cdn.openstreetmap.org/uploads/default/optimized/3X/6/3/63cb08ad6b5f33578da3f529982ccd975caba949_2_690x358.jpeg, https://community-cdn.openstreetmap.org/uploads/default/optimized/3X/6/3/63cb08ad6b5f33578da3f529982ccd975caba949_2_1035x537.jpeg 1.5x, https://community-cdn.openstreetmap.org/uploads/default/optimized/3X/6/3/63cb08ad6b5f33578da3f529982ccd975caba949_2_1380x716.jpeg 2x" data-dominant-color="AFA6A4"/></a></div>

<ul>
<li>
<p>GOB files are on average half the size of a GOL, and <strong>30% smaller</strong> than <a href="https://wiki.openstreetmap.org/wiki/PBF_Format">PBFs</a>.</p>
</li>
<li>
<p>Importing a GOB is <strong>5 times faster</strong> than building a GOL from a PBF. A modern system loads a planet-size GOB into a GOL in 3 minutes. The speed advantage grows more pronounced on memory-constrained machines: <code>gol build</code> starts paging heavily with less than 32 GB of RAM, whereas <code>gol load</code> requires minimal resources (even a decade-old laptop loads the whole planet in under an hour).</p>
</li>
<li>
<p>GOBs are organized into tiles, so it’s easy to extract regional subsets (basically at file-copy speed) and stitch them back together; that makes GOB a convenient format for archiving and distributing geodata.</p>
</li>
</ul>
<p><em>The image above shows some of the tiling structure, which mimics that of tile renderers. On the left, the smallest squares are zoom 6, the right shows the most granular level (zoom 12). A typical planet GOB has about 60,000 tiles.</em></p>
<p>Below are some size statistics for the planet file and popular regional extracts (without metadata):</p>
<pre><code>                PBF      GOL               GOB
Planet      65.4 GB  93.6 GB  +43.1%   46.0 GB  -29.7%
California  1.18 GB  1.59 GB  +35.0%    770 MB  -36.5%
France      4.54 GB  5.89 GB  +29.7%   2.84 GB  -36.3%
Germany     4.29 GB  5.92 GB  +38.0%   2.67 GB  -37.5%
Italy       1.96 GB  2.63 GB  +34.0%   1.34 GB  -31.6%
Japan       2.13 GB  2.91 GB  +36.1%   1.34 GB  -37.0%
Poland      1.84 GB  2.72 GB  +47.6%   1.29 GB  -29.7%
Switzerland  487 MB   634 MB  +30.1%    311 MB  -36.2%
</code></pre>
<p>Dense, well-mapped areas tend to compress best as GOB. Less complete regions are below average in terms of GOB’s size advantage (GOBs for Brazil and China are only 23% smaller).</p>

<p>Just like GOLs, GOBs don’t store:</p>
<ul>
<li>
<p>metadata (timestamp of last edit, changeset, username, etc.)</p>
</li>
<li>
<p>history (each GOB is a snapshot of the OSM dataset)</p>
</li>
</ul>
<p>Therefore, it is not intended for editing, but for archival and distribution.</p>

<p>You will need GOL Tool 2.1 or above (<a href="https://www.geodesk.com/download" rel="noopener nofollow ugc">download</a>).</p>
<p>To export a GOL as a GOB:</p>
<pre data-code-wrap="bash"><code>gol save &lt;gol-file&gt; [&lt;gob-file&gt;]
</code></pre>
<p>If <code>&lt;gob-file&gt;</code> is omitted, it uses the same base name as the GOL. The <code>.gol</code> and <code>.gob</code> extensions are optional.</p>
<p>To limit the export to a specific area, use the <code>--area</code> (<code>-a</code>) option. You can specify a (multi)polygon as WKT, GeoJSON or simple coordinates (<code>lon,lat</code> pairs, rings are closed automatically), either directly or as a file. If no file extension is given, <code>.wkt</code> is assumed.</p>
<p>For example:</p>
<pre data-code-wrap="bash"><code>gol save world bodensee -a 9.55,47.4,8.78,47.66,9.01,47.88,9.85,47.58,9.82,47.46 
</code></pre>
<p>exports the tiles covering the region around the <a href="https://www.openstreetmap.org/relation/1156846">Bodensee</a> (Lake Constance).</p>
<p>To import tiles into a GOL:</p>
<pre data-code-wrap="bash"><code>gol load &lt;gol-file&gt; [&lt;gob-file&gt;]
</code></pre>
<p>As with <code>save</code>, if <code>&lt;gob-file&gt;</code> is omitted, the base name of the GOL is used. If the GOL does not exist, it is created. To load just a specific region, restrict it with the <code>-a</code> option.</p>
<pre data-code-wrap="bash"><code>gol load japan -a shikoku
</code></pre>
<p>loads tiles from <code>japan.gob</code> into <code>japan.gol</code> (creating it if it doesn’t yet exist), but only those intersecting the area defined in <code>shikoku.wkt</code>.</p>

<ul>
<li><a href="https://openplanetdata.com/" rel="noopener nofollow ugc">Open Planet Data</a> publishes the full planet as a GOB (&lt; 50 GB, updated daily).</li>
</ul>

<p>This is still a work in progress, so the format may change. I’m experimenting with different compression algos beyond zlib to make it even tighter and faster (zstd didn’t yield any significant gains). I’m also in the process of enabling <code>gol load</code> to download a GOB directly from a URL and build the GOL in the background, which would bring the wall-clock import time to zero.</p>
<p>As always, questions/feedback are welcome! Please stop on by <a href="https://github.com/clarisma">on Github</a> and <a href="https://en.osm.town/@geodesk" rel="noopener nofollow ugc">@geodesk@en.osm.town</a>.</p>
            </div>

            

          </div>
          <div id="post_2" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" rel="nofollow" href="https://community.openstreetmap.org/u/iandees"><span itemprop="name">iandees</span></a>
                (Ian Dees)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2025-10-23T15:28:07Z">
                    October 23, 2025,  3:28pm
                  </time>
                  <meta itemprop="dateModified" content="2025-10-23T15:28:07Z"/>
              <span itemprop="position">2</span>
              </span>
            </p>
            <p>What’s a GOL?</p>

            

          </div>
          <div id="post_3" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" rel="nofollow" href="https://community.openstreetmap.org/u/GeoDeskTeam"><span itemprop="name">GeoDeskTeam</span></a>
                (GeoDesk Team)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2025-10-23T15:31:52Z">
                    October 23, 2025,  3:31pm
                  </time>
                  <meta itemprop="dateModified" content="2025-10-23T15:31:52Z"/>
              <span itemprop="position">3</span>
              </span>
            </p>
            <p>GOL = <a href="https://wiki.openstreetmap.org/wiki/Geo-Object_Library">Geo-Object Library</a> (a compact single-file database for OSM features)</p>

            

          </div>
          <div id="post_4" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" rel="nofollow" href="https://community.openstreetmap.org/u/Marcos_Dione"><span itemprop="name">Marcos_Dione</span></a>
                (Marcos Dione)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2025-10-23T18:48:25Z">
                    October 23, 2025,  6:48pm
                  </time>
                  <meta itemprop="dateModified" content="2025-10-23T18:48:25Z"/>
              <span itemprop="position">4</span>
              </span>
            </p>
            <div itemprop="text">
              

<p>So, it’s a given format (GOL), stripped of everything that can be generated from the rest of the data (the indexes), then compressed, and it imports into the original format (GOL) 5x times faster than importing from another format [but only to <em>that</em> format] [probably because it just decompresses and generates the indexes].</p>
            </div>

            

          </div>
          <div id="post_5" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" rel="nofollow" href="https://community.openstreetmap.org/u/GeoDeskTeam"><span itemprop="name">GeoDeskTeam</span></a>
                (GeoDesk Team)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2025-10-23T19:24:24Z">
                    October 23, 2025,  7:24pm
                  </time>
                  <meta itemprop="dateModified" content="2025-10-23T19:24:24Z"/>
              <span itemprop="position">5</span>
              </span>
            </p>
            <div itemprop="text">
              <p>Yes, in a nutshell (plus the ability to load/extract specific areas).</p>
<p>This is especially useful for OSM-based applications hosted on a low-power virtual server (e.g. 2 cores, 8 GB RAM). Loading a GOL from a GOB requires far less memory than building from a PBF (for which the process needs to keep a node index in memory to assemble the geometries of ways, or else it will start paging furiously). On that kind of machine, the speed increase will be closer to 15x.</p>
<p>From a GOL, you can then export to other formats (GeoJSON, WKT, CSV, OSM-XML), or perform queries using a Python script or C++/Java application.</p>
            </div>

            

          </div>
          <div id="post_6" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" rel="nofollow" href="https://community.openstreetmap.org/u/pnorman"><span itemprop="name">pnorman</span></a>
                (Paul Norman)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2025-10-24T10:01:16Z">
                    October 24, 2025, 10:01am
                  </time>
                  <meta itemprop="dateModified" content="2025-10-24T10:01:16Z"/>
              <span itemprop="position">6</span>
              </span>
            </p>
            <div itemprop="text">
              <p>It sounds like GOB is an intermediate format for your library which reduces data stored or transferred at the cost of some CPU time, is that correct?</p>
<p>What software outside of GOL can currently read or write GOB? Can any of the standard libraries people use read it and create geometries?</p>
            </div>

            

          </div>
          <div id="post_7" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" rel="nofollow" href="https://community.openstreetmap.org/u/CommanderStorm"><span itemprop="name">CommanderStorm</span></a>
                (Commander Storm)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2025-10-24T10:30:29Z">
                    October 24, 2025, 10:30am
                  </time>
                  <meta itemprop="dateModified" content="2025-10-24T10:30:29Z"/>
              <span itemprop="position">7</span>
              </span>
            </p>
            <div itemprop="text">
              <p>Could you go into more detail how the format works?</p>
<p>I was unable to find a higher level overview in the docs or on GitHub.</p>
<p>Here is our research, in case you are intetersted: <a href="https://arxiv.org/pdf/2508.10791" rel="noopener nofollow ugc">https://arxiv.org/pdf/2508.10791</a></p>
            </div>

            

          </div>
          <div id="post_8" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" rel="nofollow" href="https://community.openstreetmap.org/u/GeoDeskTeam"><span itemprop="name">GeoDeskTeam</span></a>
                (GeoDesk Team)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2025-10-24T14:05:40Z">
                    October 24, 2025,  2:05pm
                  </time>
                  <meta itemprop="dateModified" content="2025-10-24T14:05:40Z"/>
              <span itemprop="position">8</span>
              </span>
            </p>
            <div itemprop="text">
              <p>Yes, GOB is a companion format to GOL:</p>
<ul>
<li>
<p>GOL is a single-file database. It is uncompressed and indexed for fast queries (~100 GB for the planet)</p>
</li>
<li>
<p>GOB is for archival and distribution. Only the essential data is stored, in a tightly-compressed layout, then compressed further with zlib (~50 GB for the planet)</p>
</li>
</ul>
<p>The hardest part of working with OSM data as a data consumer is assembling OSM elements into geometries. Since ways store <em>references</em> to nodes rather than actual coordinates, this requires a lookup strategy that turns node IDs into longitude/latitude. The typical approach is a hashmap for smaller sets, or a dense array for the full planet.</p>
<p>(Old news to you, of course – just summarizing for other readers).</p>
<p>Keeping the node coordinates in a dense array takes up close to 100 GB. The GOL Tool uses a different indexing approach that brings this down to about 25 GB, but that’s still too heavy for most laptops or virtual servers (<code>gol build</code> won’t run out of memory, but it will take several hours due to paging).</p>
<p>So those users can now download a GOB (which contains the ways with their geometries fully resolved, and relations with optimized member references) and turn it into a GOL, with minimal RAM needed. Basically, <code>gol load</code> reads the required tiles from the GOB, unzips them, transforms them into a layout suitable for querying, indexes the features, and writes the tiles into the GOL.</p>
<p>At this point, only the GOL Tool supports GOBs. In theory, the tiles within a GOB could be exported directly into other formats, but it’s unlikely I’ll implement that capability, since it’s fast to turn a GOB back into a GOL (which already supports multiple export formats).</p>
<p>If there’s enough interest, I may refactor the GOB functionality from the GOL Tool codebase into a separate library (I’d prefer to keep it out of <a href="https://github.com/clarisma/libgeodesk/"><code>libgeodesk</code></a>, which is meant to be lightweight).</p>
<p>As a side note, at some point I’d like to propose GOL as an alternative input format for <a href="https://github.com/osm2pgsql-dev/osm2pgsql"><code>osm2pgsql</code></a>. This should shave at least a third off the import time (and making it feasible to run on low-end hardware), while only adding 200 KB to the executable size. Since you’re a key contributor, I’d love to know your thoughts.</p>
            </div>

            

          </div>
          <div id="post_9" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" rel="nofollow" href="https://community.openstreetmap.org/u/GeoDeskTeam"><span itemprop="name">GeoDeskTeam</span></a>
                (GeoDesk Team)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2025-10-24T14:09:52Z">
                    October 24, 2025,  2:09pm
                  </time>
                  <meta itemprop="dateModified" content="2025-10-24T14:09:52Z"/>
              <span itemprop="position">9</span>
              </span>
            </p>
            <div itemprop="text">
              <p>Thanks for posting the research paper, I’ll have a more thorough read-through later. The SIMD and GPU-based accelerations sound fascinating.</p>
<p>I haven’t yet published a technical spec for the GOL/GOB file formats. I will do this eventually, since this will be essential to get more developers involved in the project.</p>
<p>Here’s a high-level overview:</p>
<p>The basic file structure is broken into tiles (contiguous chunks of storage up to 1 GB in size, typically 500 KB to 4 MB). The tiling scheme is the same as commonly used by tile servers: a single square that covers the world in Mercator projection at zoom 0, recursively divided into quadrants. There’s one important difference: whereas tile servers produce MVTs/PNGs for every tile at a given zoom level, the tiling in a GOL is <em>sparse</em>. In low-density areas such as oceans and deserts, tiling stops at level 4 or possibly 6, whereas in dense urban area, tile granularity can go up to level 12. That’s why a typical planet-size GOL stores about 50K tiles instead of millions.</p>
<p>A recurring theme is the design around locality of reference, cutting down not only IO, but also access to main memory, by defining structures that maximize use of CPU caches.</p>
<p>Tiles themselves are divided into “hot” and “cold” zones, attempting to keep frequently accessed data together, and also ensuring that features that are spatially close and/or related thematically are placed in contiguous storage locations. This reduces the number of pages that need to be loaded to perform queries. On the other hand, an SQL-based database that treats individual features as rows essentially stores them wherever there is space. Even though SSDs don’t have seek costs in the traditional sense, most still perform dramatically better on sequential reads, and a tighter layout means more data can be cached in memory.</p>
<p>For low-level storage, both GOL and GOB use similar techniques as MVT, e.g. delta-encoded LEB128 for coordinates. GOL/GOB also extensively de-duplicate structures. For example, a tile of a city might contain thousands of palm trees, or buildings of the same type. These can share a common tag-table. The same goes for strings. (A traditional database typically stores a separate set of tags for each feature, leading to needless bloat, especially if stored columnar.)</p>
<p>Here are some performance stats (10x2.3 Haswell Xeon, 32 GB, PCI3 NVMe):</p>
<ul>
<li>
<p>Find all Italian restaurants (points and polygons) in the U.S. (based on a detailed admin-area polygon), using a planet-wide dataset (i.e. <code>world(&#34;na[amenity=restaurant][cuisine=italian]&#34;).within(usa)</code>): 52 milliseconds</p>
</li>
<li>
<p>Measure the length of all canals in a bounding-box covering 500 square-km: 47 micro-seconds</p>
</li>
<li>
<p>Find all features in a bounding-box spanning multiple city blocks: 3 micro-seconds</p>
</li>
</ul>
<p>Results are fairly consistent across the 3 toolkits, with Java about 50% slower for polygon-restrained queries. Measurements are median timings based on a mixed-workload simulation (so large portions of at least the indexes will be in cache).</p>
<p>Further optimizations could possibly gain another 20% speedup (e.g. SIMD instructions for bbox checks). As far as the data structures themselves, I typically don’t design for particular CPU architectures, because that field is evolving so rapidly. The general trend in CPUs is heavily multi-core, and this benefits the GOL design. A regional query can easily span 100+ tiles, these can be processed by multiple cores in parallel.</p>
            </div>

            

          </div>
          <div id="post_10" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" rel="nofollow" href="https://community.openstreetmap.org/u/pnorman"><span itemprop="name">pnorman</span></a>
                (Paul Norman)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2025-10-24T16:01:12Z">
                    October 24, 2025,  4:01pm
                  </time>
                  <meta itemprop="dateModified" content="2025-10-24T16:01:12Z"/>
              <span itemprop="position">10</span>
              </span>
            </p>
            <div itemprop="text">
              
<p>We support whatever libosmium supports and don’t do any parsing of different file formats within OSM.</p>
<p>I haven’t done any recent measurements but I can’t see any file format cutting a third of the import time. Far less than a third of the time is spent reading the file. Most of the time is spent in Postgres or building geometries.</p>
<p>I have found osm2pgsql feasible to run on any hardware that can handle the resulting database. osm2pgsql is designed to create databases for certain uses, and those uses tend to require more RAM/IOPS than osm2pgsql.</p>
            </div>

            

          </div>
          <div id="post_11" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" rel="nofollow" href="https://community.openstreetmap.org/u/lonvia"><span itemprop="name">lonvia</span></a>
                (Lonvia)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2025-10-24T18:47:05Z">
                    October 24, 2025,  6:47pm
                  </time>
                  <meta itemprop="dateModified" content="2025-10-24T18:47:05Z"/>
              <span itemprop="position">11</span>
              </span>
            </p>
            <div itemprop="text">
              <p>Do you have a technical specification of the file format? Note that I’m not interested in how the GOL tool works but how the data is practically stored in the file. Ideally you have a specification somewhere that is detailed enough that in theory one could write a parser for the format.</p>
<p>Not that I want to write another parser. What you propose sounds really interesting and I just want to understand how it works. From your description I take it that the format rearranges the data (the tile-base processing) and it very much sounds that the conversion from pbf is lossy in more ways than just “dropping metadata”. Both can be very reasonable design choices but might also limit the way in which the data can be processed. So it might be really useful for some use-cases and less ideal for others. But that is really hard to judge without having more technical details.</p>
            </div>

            

          </div>
          <div id="post_12" itemprop="comment" itemscope="" itemtype="http://schema.org/Comment">
            <p><span itemprop="author" itemscope="" itemtype="http://schema.org/Person">
                <a itemprop="url" rel="nofollow" href="https://community.openstreetmap.org/u/0235"><span itemprop="name">0235</span></a>
                (0235)
              </span>



              <span>
                  <time itemprop="datePublished" datetime="2025-10-24T18:47:06Z">
                    October 24, 2025,  6:47pm
                  </time>
                  <meta itemprop="dateModified" content="2025-10-24T18:47:06Z"/>
              <span itemprop="position">12</span>
              </span>
            </p>
            <p>Will you be releasing an official Torrent for this data?</p>

            

          </div>
    </div></div>
  </body>
</html>
