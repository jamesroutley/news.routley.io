<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/meribold/btry">Original</a>
    <h1>Show HN: A (marginally) useful x86-64 ELF executable in 466 bytes</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto">A battery status program for x86-64 Linux laptops in the form of a 466-byte ELF
executable.</p>

<div data-snippet-clipboard-copy-content="$ btry
30.6 Wh / 31.1 Wh (98%)"><pre><code>$ btry
30.6 Wh / 31.1 Wh (98%)
</code></pre></div>
<p dir="auto">Sometimes there are no <code>energy_now</code> and <code>energy_full</code> files, but <code>charge_*</code> files instead
(at least on my ThinkPad X220).  If this is the case, <code>btry</code> prints ampere hours instead
of watt hours.</p>
<div data-snippet-clipboard-copy-content="$ btry
2.2 Ah / 2.8 Ah (78%)"><pre><code>$ btry
2.2 Ah / 2.8 Ah (78%)
</code></pre></div>

<div data-snippet-clipboard-copy-content="base64 -d &lt;&lt;EOF | unxz -Fraw --lzma2=dict=4K &gt; btry
4AHRAWYAAD+R1tX9PhIqx7s6AgikVMEPsJf5Lf5g4xQNjMWNtO8HAveeDflMxgfGZN5pxN98AvJONoWtSD
3r/2fD8+pTo1z0Wmg8ckBXn37pnLqK7VPWLb6BuravlyX2UUroOamQkHpZS1FigDpKLb5Edf65UkxNpkoi
3iWRZwSsxUJ2HMKXYSgHwzeQFS4Zfij1QBNGWzg/UDubHHOVEamwVkYhsUN2am8QESfmLAf7Oi0zmMplZY
6KYRLvkIb8gXo6+Ap0MRH4nDrbevK5bYvv5Vi4hwOHLxcqLdj+xDcfvl2IKPHCj+h9kzXdcGxZDxGKxty3
pP8F9vzzu988KhqPckjE3ijWuBgpzsoTiuHy8hscYCjmR3Dj6JY34rMYfBTqx/R0xNidKjWtm2mdFbS6u2
EBiQyywVp1incoC3VxC/T2Qo5iNSsEpPc30Li9mW374HzQJDJNZNrCtp4bkvJnNxjeU3BdYhiv7XwA
EOF"><pre><code>base64 -d &lt;&lt;EOF | unxz -Fraw --lzma2=dict=4K &gt; btry
4AHRAWYAAD+R1tX9PhIqx7s6AgikVMEPsJf5Lf5g4xQNjMWNtO8HAveeDflMxgfGZN5pxN98AvJONoWtSD
3r/2fD8+pTo1z0Wmg8ckBXn37pnLqK7VPWLb6BuravlyX2UUroOamQkHpZS1FigDpKLb5Edf65UkxNpkoi
3iWRZwSsxUJ2HMKXYSgHwzeQFS4Zfij1QBNGWzg/UDubHHOVEamwVkYhsUN2am8QESfmLAf7Oi0zmMplZY
6KYRLvkIb8gXo6+Ap0MRH4nDrbevK5bYvv5Vi4hwOHLxcqLdj+xDcfvl2IKPHCj+h9kzXdcGxZDxGKxty3
pP8F9vzzu988KhqPckjE3ijWuBgpzsoTiuHy8hscYCjmR3Dj6JY34rMYfBTqx/R0xNidKjWtm2mdFbS6u2
EBiQyywVp1incoC3VxC/T2Qo5iNSsEpPc30Li9mW374HzQJDJNZNrCtp4bkvJnNxjeU3BdYhiv7XwA
EOF
</code></pre></div>
<p dir="auto">Then make the program executable: <code>chmod +x btry</code>.</p>

<ul dir="auto">
<li>Anything that&#39;s not x86-64 and Linux is definitely not supported.</li>
<li>I don&#39;t know how standard/portable the <code>/sys/class/power_supply/BAT0</code> path used
actually is.</li>
<li>If neither an <code>energy_full</code> nor a <code>charge_full</code> file exists in
<code>/sys/class/power_supply/BAT0</code>, an infinite loop results.</li>
<li>Some laptops (for example the ThinkPad T480) have two batteries; this isn&#39;t supported
by <code>btry</code>.</li>
</ul>




<p dir="auto">No.</p>

<p dir="auto">When my ThinkPad X220 is plugged in at the time I wake it from suspend mode, I get the
<code>charge_now</code> file.  When it is not plugged in I get the <code>energy_now</code> file.  At least I
think that&#39;s how it works.</p>
</article></div></div>
  </body>
</html>
