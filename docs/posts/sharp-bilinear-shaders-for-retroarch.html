<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/rsn8887/Sharp-Bilinear-Shaders">Original</a>
    <h1>Sharp-Bilinear Shaders for Retroarch</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
          <article itemprop="text">
<p dir="auto">This is a collection of shaders for sharp pixels without pixel wobble and minimal blurring in RetroArch/Libretro, based on TheMaister&#39;s work.</p>
<p dir="auto">The following shaders are included:</p>
<ul dir="auto">
<li>&#34;sharp-bilinear-2x-prescale&#34;</li>
</ul>
<p dir="auto">This shader does a fixed 2x integer prescale resulting in a small amount of image blurring but no pixelwobble. This is a simple two-pass shader configuration. First, an integer 2x prescale is applied, followed by a bilinear scaling to fullscreen.</p>
<ul dir="auto">
<li>&#34;sharp-bilinear-simple&#34;</li>
</ul>
<p dir="auto">This shader does an automatic optimum integer prescale (2x, 3x, 4x etc.), depending on game and screen resolution. I recommend this shader since the autoscaling results in sharper images for some games than the fixed 2x prescale.</p>
<ul dir="auto">
<li>&#34;sharp-bilinear-scanlines&#34;</li>
</ul>
<p dir="auto">same as above, but with an overlay of black scanlines (half of each game pixel, vertically is a scanline)</p>
<p dir="auto">All these shader configurations give sharp pixels with zero pixel wobble in all games.</p>
<p dir="auto">Compared to the &#34;video smoothing=ON&#34; setting with no shaders, pixels are less blurry. Compared to the &#34;video smoothing=OFF&#34; setting with no shaders, the pixels do not change shape/wobble as they move across the screen.</p>
<h2 dir="auto"><a id="user-content-installation" aria-hidden="true" href="#installation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h2>
<p dir="auto">To install this shader in RetroPie:</p>
<ul dir="auto">
<li>Copy the contents of the included &#34;Copy_To_RetroPie&#34; folder to /opt/retropie/emulators/retroarch/shader/</li>
<li>open the RetroPie-Setup menu and choose &#34;Edit RetroPie/RetroArch Configurations&#34;-&gt; &#34;configure basic libretro emulator options&#34;-&gt; &#34;configure default options for all libretro emulators&#34;</li>
<li>set &#34;Video Shader Enable&#34; to &#34;True&#34;</li>
<li>set &#34;Video Shader File&#34; to &#34;sharp-bilinear-xxxxx.glslp,&#34; choosing xxxxx depending on your preference.</li>
</ul>
<h2 dir="auto"><a id="user-content-example-images" aria-hidden="true" href="#example-images"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example Images</h2>
<p dir="auto">shader &#34;sharp-bilinear-simple.glslp&#34; on:
<a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/2b18df4bb04dcf9852b3da4bfc7f27c2b093f81513e148a6ca8d5967e7fd1526/68747470733a2f2f696d6167652e6962622e636f2f6855346b39352f776974685f7368616465722e706e67"><img src="https://camo.githubusercontent.com/2b18df4bb04dcf9852b3da4bfc7f27c2b093f81513e148a6ca8d5967e7fd1526/68747470733a2f2f696d6167652e6962622e636f2f6855346b39352f776974685f7368616465722e706e67" alt="" data-canonical-src="https://image.ibb.co/hU4k95/with_shader.png"/></a></p>
<p dir="auto">shader off, smoothing on (too much blur):
<a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/5b2434062e9249bdbe9c37e9819bedd93afc6d3b0e98a9034e53493096074480/68747470733a2f2f696d6167652e6962622e636f2f6a687a44776b2f776974686f75745f7368616465722e706e67"><img src="https://camo.githubusercontent.com/5b2434062e9249bdbe9c37e9819bedd93afc6d3b0e98a9034e53493096074480/68747470733a2f2f696d6167652e6962622e636f2f6a687a44776b2f776974686f75745f7368616465722e706e67" alt="" data-canonical-src="https://image.ibb.co/jhzDwk/without_shader.png"/></a></p>
<p dir="auto">shader off, smoothing off:
<a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/803b23dd0ca00fba416e5710c3d3a59b68216b8b32f4d3a106534abdcf3f2884/68747470733a2f2f696d6167652e6962622e636f2f6e487a6f776b2f6e6f5f7368616465725f736d6f6f7468696e675f6f66662e706e67"><img src="https://camo.githubusercontent.com/803b23dd0ca00fba416e5710c3d3a59b68216b8b32f4d3a106534abdcf3f2884/68747470733a2f2f696d6167652e6962622e636f2f6e487a6f776b2f6e6f5f7368616465725f736d6f6f7468696e675f6f66662e706e67" alt="" data-canonical-src="https://image.ibb.co/nHzowk/no_shader_smoothing_off.png"/></a></p>
<p dir="auto">On first glance, the above looks sharp and good, but looking at a detail, we can see pixel wobble that happens if no shader is used. The pixels along the black diagonal should all be the same, square shape, but some of them appear rectangular:
<a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/a9812962e3b3d315547b32a8499bbdcd2b05f659b3df5203f83d4019334f71ad/68747470733a2f2f696d6167652e6962622e636f2f687461784e512f6e6f5f7368616465725f736d6f6f7468696e675f6f66665f64657461696c2e706e67"><img src="https://camo.githubusercontent.com/a9812962e3b3d315547b32a8499bbdcd2b05f659b3df5203f83d4019334f71ad/68747470733a2f2f696d6167652e6962622e636f2f687461784e512f6e6f5f7368616465725f736d6f6f7468696e675f6f66665f64657461696c2e706e67" alt="" data-canonical-src="https://image.ibb.co/htaxNQ/no_shader_smoothing_off_detail.png"/></a></p>
<p dir="auto">Compare the above detail to the result with the shader on:
<a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/3cf7ffa73e6b9c4a1daeab76f15726acde0e0644d9879e4bb334264f15883101/68747470733a2f2f696d6167652e6962622e636f2f6872525870352f776974685f7368616465725f64657461696c2e706e67"><img src="https://camo.githubusercontent.com/3cf7ffa73e6b9c4a1daeab76f15726acde0e0644d9879e4bb334264f15883101/68747470733a2f2f696d6167652e6962622e636f2f6872525870352f776974685f7368616465725f64657461696c2e706e67" alt="" data-canonical-src="https://image.ibb.co/hrRXp5/with_shader_detail.png"/></a></p>
<p dir="auto">Now all pixels have the same shape, at the cost of a slight reduction in sharpness.</p>
<h2 dir="auto"><a id="user-content-performance" aria-hidden="true" href="#performance"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Performance</h2>
<p dir="auto">The calculations done by these shaders are trivial. Using any of these shaders with RetroPie on a Raspberry Pi 3 in 1080p full HD resolution, Street Fighter 3 Third Strike (libretro-fba) runs at a steady 60 fps.</p>
<h2 dir="auto"><a id="user-content-improvements-compared-to-retrosharp-bilinear-from-the-libretro-repository" aria-hidden="true" href="#improvements-compared-to-retrosharp-bilinear-from-the-libretro-repository"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Improvements compared to &#34;retro/sharp-bilinear&#34; from the Libretro repository</h2>
<ul dir="auto">
<li>There&#39;s a small improvement that makes sharp-bilinear-simple work better with vertical games (shmups etc.). The autoscale is calculated separately for both the horizontal and vertical dimension, e.g. the integer prescale could be 4 for the horizontal, and 2 for the vertical. The original sharp-bilinear only used the vertical dimension to calculate the auto-prescale, and then used the same integer for both x and y.</li>
<li>The autoscaling factors are pre-calculated in the vertex shader, instead of re-calculating for every pixel.</li>
<li>The sharp-bilinear-2x-prescale filter is very simple compared to all the others. It is a simple shader config that applies two passes of the stock.glsl &#34;Null shader,&#34; and therefore contains almost no calculations, and should be extremely fast.</li>
</ul>
</article>
        </div></div>
  </body>
</html>
