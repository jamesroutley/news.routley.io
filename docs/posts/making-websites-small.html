<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://santurcesoftware.com/making-web-sites-small">Original</a>
    <h1>Making Websites Small</h1>
    
    <div id="readability-page-1" class="page"><p>Sitting on my development workstation with fiber internet it&#39;s easy to forget that there is a large number of users that are browsing
the same websites as I am, however they are using an underpowered mobile device over a 3G network.
Navigating to a local legal firm&#39;s website which displays basic information and marketing material, opening up a network tab shows over 19<code>MB</code> of resources being pulled down to render. It&#39;s eye-opening to fire up the dev tools and with the network tab use throttle to emulate a 3G connection and watch the <i>dozens</i> of seconds pass before a website in 2021 can render some contact information for a straightforward service near me.</p><p>I encourage you to type in &#34;Dentist near me&#34;, &#34;Lawyer near me&#34;, &#34;Pizza near me&#34;, &#34;CPA near me&#34;, etc, into google for local services, and as you click into a few - watch the network tab as it pulls in enough data to have my unlimited mobile plan charge overage fees. While it&#39;s fairly common to see extreme examples in most modern social media sites where advertising and user interaction is the focus, where you can open up your network tab and watch as your network goes until infinity or you finally exit out (or quit social media). It&#39;s a bigger tragedy that local services and company sites are settling for a solution to displaying services offered, contact information, and marketing material that requires potential customers to be loading a dozen or more megabytes of resources.</p><p>Most places will probably not have to go any further than optimizing their images to shrink a site by an order of magnitude.</p><p>There&#39;s a million ways to skin the cat of image resizing, whether you&#39;re using photoshop, <a href="https://www.gimp.org/">gimp</a> or a command line utility.
We like to use imagemagick when ever possible.</p><div><p>Now that we have images that are the correct size, or at least closer to the target display size, we can address the type of image we&#39;re using.
Except for animated images, we use webp (`cwebp`) to accomplish a reduction in the size of our images.</p><pre>                    <code>
sudo apt-get install webp
cd /mywebapp/static/img/
mkdir webp        
for file in *.{jpg,png,jpeg}; do cwebp -q 60 ${file} -o webp/${file}.webp; done;
                    </code>
                    </pre><p>We&#39;ll need to make sure our <code>img</code> tags are updated to point to <code>/webp/filename.jpg.webp</code> now, but depending on how aggregious our file type was we have saved ourselves a ton of bandwidth.
A local dentist office near me renders a 900x1000 PNG file that is originally 1500x1750 and weighing in at 3<code>MB</code>! The webp version of the same size is ~79<code>KB</code>.
Resizing our image to 1000x1152 shrinks our PNG down to 1.5<code>MB</code>, and finally running cwebp to convert it to a webp we&#39;re down to 49<code>KB</code>.</p><p>The last bit in your control is to ask yourself if your design needs a 1000px image or an image at all. The answer to the latter part is often yes, but the size has an impact on the weight of your website and is often no. You don&#39;t need to see a 3<code>MB</code>-&gt;50<code>KB</code> reduction for this to make a difference, shaving off a few hundred <code>KB</code> per image when you have a handful of them to load can amount to a meaningful impact to your users in aggregate.</p><hr/><h3>CSS, Fonts and Javascript Imports</h3><p>There are a lot of hard realities of customer requirements that may get in the way of knocking down the number of dependencies and resources you find yourself loading, but there are a few opportunities to reduce the bandwidth it brings. The examples below are commonly found issues, but some may apply to your use cases more than others.</p><ul><li>Do you really need 150<code>KB</code> of Font resources to display two 16x16 icons?</li><li>Do we need 500<code>KB</code> of javascript to display a static view of our business on google maps?</li><li>Is everything minified?</li><li>Do you like a metric or do you need a metric?</li><li>Are we using gzip?</li><li>Do we really need more than a <code>MB</code> of CSS to render a web site (Looking at you wordpress)?</li></ul><p>There are a lot of times when using things like `material icons extended` is used by habit when an application requires one or two icons,
loading a 150<code>KB</code> font file to display 1<code>KB</code> of images can be avoided with simply supplying the icon as a static image.</p><hr/><p>If you have your company located on a static google map frame, you&#39;re loading a javascript file that is probably a few times larger than all of your sites pertinent content and information
in order to avoid creating an image of this with a clickable link to jump your user out to google maps or <a href="https://www.openstreetmap.org/">Open Street Map</a>.
So create a small (webp) of your desired map and shave off a few hundred <code>KB</code> and some processing power that can be better spent elsewhere.</p><hr/><p>Minify your files! Use Minified files! Gzip your bits over the wire! All of these things should be able to be done quickly and if you find yourself
relying on large 3rd party files that aren&#39;t minified, consider retrieving them to be minified and served from your server.</p><hr/><p>If you are using <code>gtag</code> for google analytics, facebook signal, or whatever else front end tracking mechanism you&#39;re using you are making me download hundreds of <code>KB</code> of javascript for something that I don&#39;t want and quite possibly you actually <i>don&#39;t</i> either. What are you tracking? Do you want to see page views? Do you care how many times you showed up in google or bing search results this week? Are you tracking how long a user is on your page before going to the shopping cart? What facebook demographic is the person visiting my local dentist&#39;s office? Which pages are users leaving our site without a completed transaction? According to facebook, what is my target audience for a local pizza place? There are probably a million more metrics that we can ask about, but for the most common that small businesses and local services want to know, how many times am I coming up on search results, how many people are visiting the page, and which promotions are directing traffic to their site.</p><p><a href="https://search.google.com/search-console">Google Search Console</a> will provide insights into performance on google search without any front end
dependencies. <a href="https://www.bing.com/webmasters">Bing web master</a> Provides similar functionality and pretty performance charts.
Both of their UIs are intuitive enough for non technical users to access and make sense of.</p><p>Server side analytics are usually more than enough to get a fairly accurate look into URLs visited to find out overall page views and which atrocious
utm_* codes were visited the most. The technology stack you have is going to greatly impact the implementation details for server side analytics,
<a href="https://goaccess.io/">Go Access</a> provides a rich dashboard for server side analytics, page views and query values or look into
<a href="https://prometheus.io/">Prometheus</a> and <a href="https://grafana.com/">Grafana</a>.</p><hr/><p>There are also bad habits out there of including all of jquery in place of using a few <code>document.getElementById</code> or
<code>document.querySelector</code> calls, grabbing all of bootstrap in order to get row and column css classes instead of just grabbing
<code>bootstrap-grid.min.css</code> or <a href="https://getbootstrap.com/docs/4.1/getting-started/contents/#css-files">just what they actually need</a>
or using wordpress. Use the <a href="https://developer.chrome.com/docs/devtools/coverage/">Coverage Tool</a> to find javascript we&#39;re
making clients download that we aren&#39;t actually utilizing.</p><hr/><p>Chrome dev-tools now have a CSS Overview which you can use to find unused declarations that you can simply remove from your page.</p><hr/><h3>Less <i>IS</i> More</h3><p>For lots of people, we learned this from navigating to a myspace page with an mp3, two videos, and a dozen flashing gifs that took as long to load as it did for it to become responsive enough to figure out how the hell to turn them off. This phenomenon still applies today when you navigate to a business page and find yourself greeted with a <code>75vh</code> image carousel, social media links and banners, a subscribe card, a &#34;Chat Now!&#34; banner with a GPT bot typing, xyz.com wants to know you location, or a prompt for cookies just to scroll, click and grumble through to read the services, hours, contact information, pricing and location.</p><p>Having a site that conveys the services and information instantly on any device under poor network conditions allows more of your message to be seen by users and potential customers quicker. There is an endless number of clever things you can do to decrease the size of your page loads, but making a direct and lightweight initial design will always yield the best results.</p><p>Uncluttering your resources and your design also has a noticeable effect on accessibility. When pertinent information on the site is more distilled it becomes much easier to lay out the idea and information using properly formed and organized html tags to attain a perfect accessibility score using devtools <a href="https://developers.google.com/web/tools/lighthouse">Light house</a>
and folks with disabilities that benefit from this use and need local service and businesses like anyone else.</p><p>Hopefully your next project shows up on <a href="https://1mb.club/">The 1MB Club</a></p><p><b>Happy Hacking!</b></p></div></div>
  </body>
</html>
