<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/tidwall/jj">Original</a>
    <h1>Jj: JSON Stream Editor</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><p dir="auto">
<a target="_blank" rel="noopener noreferrer" href="https://www.datadoodad.com/tidwall/jj/blob/master/logo.png"><img src="https://www.datadoodad.com/tidwall/jj/raw/master/logo.png" width="108" height="78" alt="JJ"/></a>
</p>
<p dir="auto">JJ is a command line utility that provides a <a href="#performance">fast</a> and simple way to retrieve or update values from JSON documents.
It&#39;s powered by <a href="https://github.com/tidwall/gjson">GJSON</a> and <a href="https://github.com/tidwall/sjson">SJSON</a> under the hood.</p>
<p dir="auto">It&#39;s <a href="#performance">fast</a> because it avoids parsing irrelevant sections of json, skipping over values that do not apply, and aborts as soon as the target value has been found or updated.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-getting-started" aria-hidden="true" href="#getting-started"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Getting started</h2>
<h2 tabindex="-1" dir="auto"><a id="user-content-install" aria-hidden="true" href="#install"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Install</h2>
<h3 tabindex="-1" dir="auto"><a id="user-content-mac-homebrew" aria-hidden="true" href="#mac-homebrew"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Mac (Homebrew)</h3>
<div data-snippet-clipboard-copy-content="brew install tidwall/jj/jj"><pre><code>brew install tidwall/jj/jj
</code></pre></div>
<h3 tabindex="-1" dir="auto"><a id="user-content-build" aria-hidden="true" href="#build"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Build</h3>

<p dir="auto">Or <a href="https://github.com/tidwall/jj/releases">download a pre-built binary</a> for Linux, OSX, Windows, or FreeBSD.</p>
<h3 tabindex="-1" dir="auto"><a id="user-content-usage" aria-hidden="true" href="#usage"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Usage</h3>
<div data-snippet-clipboard-copy-content="$ jj -h

usage: jj [-v value] [-purOD] [-i infile] [-o outfile] keypath

examples: jj keypath                      read value from stdin
      or: jj -i infile keypath            read value from infile
      or: jj -v value keypath             edit value
      or: jj -v value -o outfile keypath  edit value and write to outfile

options:
      -v value             Edit JSON key path value
      -p                   Make json pretty, keypath is optional
      -u                   Make json ugly, keypath is optional
      -r                   Use raw values, otherwise types are auto-detected
      -n                   Do not output color or extra formatting
      -O                   Performance boost for value updates
      -D                   Delete the value at the specified key path
      -l                   Output array values on multiple lines
      -i infile            Use input file instead of stdin
      -o outfile           Use output file instead of stdout
      keypath              JSON key path (like &#34;name.last&#34;)"><pre><code>$ jj -h

usage: jj [-v value] [-purOD] [-i infile] [-o outfile] keypath

examples: jj keypath                      read value from stdin
      or: jj -i infile keypath            read value from infile
      or: jj -v value keypath             edit value
      or: jj -v value -o outfile keypath  edit value and write to outfile

options:
      -v value             Edit JSON key path value
      -p                   Make json pretty, keypath is optional
      -u                   Make json ugly, keypath is optional
      -r                   Use raw values, otherwise types are auto-detected
      -n                   Do not output color or extra formatting
      -O                   Performance boost for value updates
      -D                   Delete the value at the specified key path
      -l                   Output array values on multiple lines
      -i infile            Use input file instead of stdin
      -o outfile           Use output file instead of stdout
      keypath              JSON key path (like &#34;name.last&#34;)
</code></pre></div>
<h2 tabindex="-1" dir="auto"><a id="user-content-examples" aria-hidden="true" href="#examples"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Examples</h2>
<h3 tabindex="-1" dir="auto"><a id="user-content-getting-a-value" aria-hidden="true" href="#getting-a-value"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Getting a value</h3>
<p dir="auto">JJ uses a <a href="https://github.com/tidwall/gjson#path-syntax">path syntax</a> for finding values.</p>
<p dir="auto">Get a string:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ echo &#39;{&#34;name&#34;:{&#34;first&#34;:&#34;Tom&#34;,&#34;last&#34;:&#34;Smith&#34;}}&#39; | jj name.last
Smith"><pre>$ <span>echo</span> <span><span>&#39;</span>{&#34;name&#34;:{&#34;first&#34;:&#34;Tom&#34;,&#34;last&#34;:&#34;Smith&#34;}}<span>&#39;</span></span> <span>|</span> jj name.last
Smith</pre></div>
<p dir="auto">Get a block of JSON:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ echo &#39;{&#34;name&#34;:{&#34;first&#34;:&#34;Tom&#34;,&#34;last&#34;:&#34;Smith&#34;}}&#39; | jj name
{&#34;first&#34;:&#34;Tom&#34;,&#34;last&#34;:&#34;Smith&#34;}"><pre>$ <span>echo</span> <span><span>&#39;</span>{&#34;name&#34;:{&#34;first&#34;:&#34;Tom&#34;,&#34;last&#34;:&#34;Smith&#34;}}<span>&#39;</span></span> <span>|</span> jj name
{<span><span>&#34;</span>first<span>&#34;</span></span>:<span><span>&#34;</span>Tom<span>&#34;</span></span>,<span><span>&#34;</span>last<span>&#34;</span></span>:<span><span>&#34;</span>Smith<span>&#34;</span></span>}</pre></div>
<p dir="auto">Try to get a non-existent key:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ echo &#39;{&#34;name&#34;:{&#34;first&#34;:&#34;Tom&#34;,&#34;last&#34;:&#34;Smith&#34;}}&#39; | jj name.middle
null"><pre>$ <span>echo</span> <span><span>&#39;</span>{&#34;name&#34;:{&#34;first&#34;:&#34;Tom&#34;,&#34;last&#34;:&#34;Smith&#34;}}<span>&#39;</span></span> <span>|</span> jj name.middle
null</pre></div>
<p dir="auto">Get the raw string value:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ echo &#39;{&#34;name&#34;:{&#34;first&#34;:&#34;Tom&#34;,&#34;last&#34;:&#34;Smith&#34;}}&#39; | jj -r name.last
&#34;Smith&#34;"><pre>$ <span>echo</span> <span><span>&#39;</span>{&#34;name&#34;:{&#34;first&#34;:&#34;Tom&#34;,&#34;last&#34;:&#34;Smith&#34;}}<span>&#39;</span></span> <span>|</span> jj -r name.last
<span><span>&#34;</span>Smith<span>&#34;</span></span></pre></div>
<p dir="auto">Get an array value by index:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ echo &#39;{&#34;friends&#34;:[&#34;Tom&#34;,&#34;Jane&#34;,&#34;Carol&#34;]}&#39; | jj friends.1
Jane"><pre>$ <span>echo</span> <span><span>&#39;</span>{&#34;friends&#34;:[&#34;Tom&#34;,&#34;Jane&#34;,&#34;Carol&#34;]}<span>&#39;</span></span> <span>|</span> jj friends.1
Jane</pre></div>
<h2 tabindex="-1" dir="auto"><a id="user-content-json-lines" aria-hidden="true" href="#json-lines"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>JSON Lines</h2>
<p dir="auto">There&#39;s support for <a href="http://jsonlines.org/" rel="nofollow">JSON Lines</a> using the <code>..</code> path prefix.
Which when specified, treats the multi-lined document as an array.</p>
<p dir="auto">For example:</p>
<div data-snippet-clipboard-copy-content="{&#34;name&#34;: &#34;Gilbert&#34;, &#34;age&#34;: 61}
{&#34;name&#34;: &#34;Alexa&#34;, &#34;age&#34;: 34}
{&#34;name&#34;: &#34;May&#34;, &#34;age&#34;: 57}"><pre><code>{&#34;name&#34;: &#34;Gilbert&#34;, &#34;age&#34;: 61}
{&#34;name&#34;: &#34;Alexa&#34;, &#34;age&#34;: 34}
{&#34;name&#34;: &#34;May&#34;, &#34;age&#34;: 57}
</code></pre></div>
<div data-snippet-clipboard-copy-content="..#                   &gt;&gt; 4
..1                   &gt;&gt; {&#34;name&#34;: &#34;Alexa&#34;, &#34;age&#34;: 34}
..#.name              &gt;&gt; [&#34;Gilbert&#34;,&#34;Alexa&#34;,&#34;May&#34;]
..#[name=&#34;May&#34;].age   &gt;&gt; 57"><pre><code>..#                   &gt;&gt; 4
..1                   &gt;&gt; {&#34;name&#34;: &#34;Alexa&#34;, &#34;age&#34;: 34}
..#.name              &gt;&gt; [&#34;Gilbert&#34;,&#34;Alexa&#34;,&#34;May&#34;]
..#[name=&#34;May&#34;].age   &gt;&gt; 57
</code></pre></div>
<h3 tabindex="-1" dir="auto"><a id="user-content-setting-a-value" aria-hidden="true" href="#setting-a-value"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Setting a value</h3>
<p dir="auto">The <a href="https://github.com/tidwall/sjson#path-syntax">path syntax</a> for setting values has a couple of tiny differences than for getting values.</p>
<p dir="auto">The <code>-v value</code> option is auto-detected as a Number, Boolean, Null, or String.
You can override the auto-detection and input raw JSON by including the <code>-r</code> option.
This is useful for raw JSON blocks such as object, arrays, or premarshalled strings.</p>
<p dir="auto">Update a value:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ echo &#39;{&#34;name&#34;:{&#34;first&#34;:&#34;Tom&#34;,&#34;last&#34;:&#34;Smith&#34;}}&#39; | jj -v Andy name.first
{&#34;name&#34;:{&#34;first&#34;:&#34;Andy&#34;,&#34;last&#34;:&#34;Smith&#34;}}"><pre>$ <span>echo</span> <span><span>&#39;</span>{&#34;name&#34;:{&#34;first&#34;:&#34;Tom&#34;,&#34;last&#34;:&#34;Smith&#34;}}<span>&#39;</span></span> <span>|</span> jj -v Andy name.first
{<span><span>&#34;</span>name<span>&#34;</span></span>:{<span><span>&#34;</span>first<span>&#34;</span></span>:<span><span>&#34;</span>Andy<span>&#34;</span></span>,<span><span>&#34;</span>last<span>&#34;</span></span>:<span><span>&#34;</span>Smith<span>&#34;</span></span>}}</pre></div>
<p dir="auto">Set a new value:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ echo &#39;{&#34;name&#34;:{&#34;first&#34;:&#34;Tom&#34;,&#34;last&#34;:&#34;Smith&#34;}}&#39; | jj -v 46 age
{&#34;age&#34;:46,&#34;name&#34;:{&#34;first&#34;:&#34;Tom&#34;,&#34;last&#34;:&#34;Smith&#34;}}"><pre>$ <span>echo</span> <span><span>&#39;</span>{&#34;name&#34;:{&#34;first&#34;:&#34;Tom&#34;,&#34;last&#34;:&#34;Smith&#34;}}<span>&#39;</span></span> <span>|</span> jj -v 46 age
{<span><span>&#34;</span>age<span>&#34;</span></span>:46,<span><span>&#34;</span>name<span>&#34;</span></span>:{<span><span>&#34;</span>first<span>&#34;</span></span>:<span><span>&#34;</span>Tom<span>&#34;</span></span>,<span><span>&#34;</span>last<span>&#34;</span></span>:<span><span>&#34;</span>Smith<span>&#34;</span></span>}}</pre></div>
<p dir="auto">Set a new nested value:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ echo &#39;{&#34;name&#34;:{&#34;first&#34;:&#34;Tom&#34;,&#34;last&#34;:&#34;Smith&#34;}}&#39; | jj -v relax task.today
{&#34;task&#34;:{&#34;today&#34;:&#34;relax&#34;},&#34;name&#34;:{&#34;first&#34;:&#34;Tom&#34;,&#34;last&#34;:&#34;Smith&#34;}}"><pre>$ <span>echo</span> <span><span>&#39;</span>{&#34;name&#34;:{&#34;first&#34;:&#34;Tom&#34;,&#34;last&#34;:&#34;Smith&#34;}}<span>&#39;</span></span> <span>|</span> jj -v relax task.today
{<span><span>&#34;</span>task<span>&#34;</span></span>:{<span><span>&#34;</span>today<span>&#34;</span></span>:<span><span>&#34;</span>relax<span>&#34;</span></span>},<span><span>&#34;</span>name<span>&#34;</span></span>:{<span><span>&#34;</span>first<span>&#34;</span></span>:<span><span>&#34;</span>Tom<span>&#34;</span></span>,<span><span>&#34;</span>last<span>&#34;</span></span>:<span><span>&#34;</span>Smith<span>&#34;</span></span>}}</pre></div>
<p dir="auto">Replace an array value by index:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ echo &#39;{&#34;friends&#34;:[&#34;Tom&#34;,&#34;Jane&#34;,&#34;Carol&#34;]}&#39; | jj -v Andy friends.1
{&#34;friends&#34;:[&#34;Tom&#34;,&#34;Andy&#34;,&#34;Carol&#34;]}"><pre>$ <span>echo</span> <span><span>&#39;</span>{&#34;friends&#34;:[&#34;Tom&#34;,&#34;Jane&#34;,&#34;Carol&#34;]}<span>&#39;</span></span> <span>|</span> jj -v Andy friends.1
{<span><span>&#34;</span>friends<span>&#34;</span></span>:[<span><span>&#34;</span>Tom<span>&#34;</span></span>,<span><span>&#34;</span>Andy<span>&#34;</span></span>,<span><span>&#34;</span>Carol<span>&#34;</span></span>]}</pre></div>
<p dir="auto">Append an array:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ echo &#39;{&#34;friends&#34;:[&#34;Tom&#34;,&#34;Jane&#34;,&#34;Carol&#34;]}&#39; | jj -v Andy friends.-1
{&#34;friends&#34;:[&#34;Tom&#34;,&#34;Andy&#34;,&#34;Carol&#34;,&#34;Andy&#34;]}"><pre>$ <span>echo</span> <span><span>&#39;</span>{&#34;friends&#34;:[&#34;Tom&#34;,&#34;Jane&#34;,&#34;Carol&#34;]}<span>&#39;</span></span> <span>|</span> jj -v Andy friends.-1
{<span><span>&#34;</span>friends<span>&#34;</span></span>:[<span><span>&#34;</span>Tom<span>&#34;</span></span>,<span><span>&#34;</span>Andy<span>&#34;</span></span>,<span><span>&#34;</span>Carol<span>&#34;</span></span>,<span><span>&#34;</span>Andy<span>&#34;</span></span>]}</pre></div>
<p dir="auto">Set an array value that&#39;s past the bounds:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ echo &#39;{&#34;friends&#34;:[&#34;Tom&#34;,&#34;Jane&#34;,&#34;Carol&#34;]}&#39; | jj -v Andy friends.5
{&#34;friends&#34;:[&#34;Tom&#34;,&#34;Andy&#34;,&#34;Carol&#34;,null,null,&#34;Andy&#34;]}"><pre>$ <span>echo</span> <span><span>&#39;</span>{&#34;friends&#34;:[&#34;Tom&#34;,&#34;Jane&#34;,&#34;Carol&#34;]}<span>&#39;</span></span> <span>|</span> jj -v Andy friends.5
{<span><span>&#34;</span>friends<span>&#34;</span></span>:[<span><span>&#34;</span>Tom<span>&#34;</span></span>,<span><span>&#34;</span>Andy<span>&#34;</span></span>,<span><span>&#34;</span>Carol<span>&#34;</span></span>,null,null,<span><span>&#34;</span>Andy<span>&#34;</span></span>]}</pre></div>
<p dir="auto">Set a raw block of JSON:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ echo &#39;{&#34;name&#34;:&#34;Carol&#34;}&#39; | jj -r -v &#39;[&#34;Tom&#34;,&#34;Andy&#34;]&#39; friends
{&#34;friends&#34;:[&#34;Tom&#34;,&#34;Andy&#34;],&#34;name&#34;:&#34;Carol&#34;}"><pre>$ <span>echo</span> <span><span>&#39;</span>{&#34;name&#34;:&#34;Carol&#34;}<span>&#39;</span></span> <span>|</span> jj -r -v <span><span>&#39;</span>[&#34;Tom&#34;,&#34;Andy&#34;]<span>&#39;</span></span> friends
{<span><span>&#34;</span>friends<span>&#34;</span></span>:[<span><span>&#34;</span>Tom<span>&#34;</span></span>,<span><span>&#34;</span>Andy<span>&#34;</span></span>],<span><span>&#34;</span>name<span>&#34;</span></span>:<span><span>&#34;</span>Carol<span>&#34;</span></span>}</pre></div>
<p dir="auto">Start new JSON document:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ echo &#39;&#39; | jj -v &#39;Sam&#39; name.first
{&#34;name&#34;:{&#34;first&#34;:&#34;Sam&#34;}}"><pre>$ <span>echo</span> <span><span>&#39;</span><span>&#39;</span></span> <span>|</span> jj -v <span><span>&#39;</span>Sam<span>&#39;</span></span> name.first
{<span><span>&#34;</span>name<span>&#34;</span></span>:{<span><span>&#34;</span>first<span>&#34;</span></span>:<span><span>&#34;</span>Sam<span>&#34;</span></span>}}</pre></div>
<h3 tabindex="-1" dir="auto"><a id="user-content-deleting-a-value" aria-hidden="true" href="#deleting-a-value"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Deleting a value</h3>
<p dir="auto">Delete a value:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ echo &#39;{&#34;age&#34;:46,&#34;name&#34;:{&#34;first&#34;:&#34;Tom&#34;,&#34;last&#34;:&#34;Smith&#34;}}&#39; | jj -D age
{&#34;name&#34;:{&#34;first&#34;:&#34;Tom&#34;,&#34;last&#34;:&#34;Smith&#34;}}"><pre>$ <span>echo</span> <span><span>&#39;</span>{&#34;age&#34;:46,&#34;name&#34;:{&#34;first&#34;:&#34;Tom&#34;,&#34;last&#34;:&#34;Smith&#34;}}<span>&#39;</span></span> <span>|</span> jj -D age
{<span><span>&#34;</span>name<span>&#34;</span></span>:{<span><span>&#34;</span>first<span>&#34;</span></span>:<span><span>&#34;</span>Tom<span>&#34;</span></span>,<span><span>&#34;</span>last<span>&#34;</span></span>:<span><span>&#34;</span>Smith<span>&#34;</span></span>}}</pre></div>
<p dir="auto">Delete an array value by index:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ echo &#39;{&#34;friends&#34;:[&#34;Andy&#34;,&#34;Carol&#34;]}&#39; | jj -D friends.0
{&#34;friends&#34;:[&#34;Carol&#34;]}"><pre>$ <span>echo</span> <span><span>&#39;</span>{&#34;friends&#34;:[&#34;Andy&#34;,&#34;Carol&#34;]}<span>&#39;</span></span> <span>|</span> jj -D friends.0
{<span><span>&#34;</span>friends<span>&#34;</span></span>:[<span><span>&#34;</span>Carol<span>&#34;</span></span>]}</pre></div>
<p dir="auto">Delete last item in array:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ echo &#39;{&#34;friends&#34;:[&#34;Andy&#34;,&#34;Carol&#34;]}&#39; | jj -D friends.-1
{&#34;friends&#34;:[&#34;Andy&#34;]}"><pre>$ <span>echo</span> <span><span>&#39;</span>{&#34;friends&#34;:[&#34;Andy&#34;,&#34;Carol&#34;]}<span>&#39;</span></span> <span>|</span> jj -D friends.-1
{<span><span>&#34;</span>friends<span>&#34;</span></span>:[<span><span>&#34;</span>Andy<span>&#34;</span></span>]}</pre></div>
<h3 tabindex="-1" dir="auto"><a id="user-content-optimistically-update-a-value" aria-hidden="true" href="#optimistically-update-a-value"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Optimistically update a value</h3>
<p dir="auto">The <code>-O</code> option can be used when the caller expects that a value at the
specified keypath already exists.</p>
<p dir="auto">Using this option can speed up an operation by as much as 6x, but
slow down as much as 20% when the value does not exist.</p>
<p dir="auto">For example:</p>
<div data-snippet-clipboard-copy-content="echo &#39;{&#34;name&#34;:{&#34;first&#34;:&#34;Tom&#34;,&#34;last&#34;:&#34;Smith&#34;}}&#39; | jj -v Tim -O name.first"><pre><code>echo &#39;{&#34;name&#34;:{&#34;first&#34;:&#34;Tom&#34;,&#34;last&#34;:&#34;Smith&#34;}}&#39; | jj -v Tim -O name.first
</code></pre></div>
<p dir="auto">The <code>-O</code> tells jj that the <code>name.first</code> likely exists so try a fasttrack operation first.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-pretty-printing" aria-hidden="true" href="#pretty-printing"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Pretty printing</h2>
<p dir="auto">The <code>-p</code> flag will make the output json pretty.</p>
<div data-snippet-clipboard-copy-content="$ echo &#39;{&#34;name&#34;:{&#34;first&#34;:&#34;Tom&#34;,&#34;last&#34;:&#34;Smith&#34;}}&#39; | jj -p name
{
  &#34;first&#34;: &#34;Tom&#34;,
  &#34;last&#34;: &#34;Smith&#34;
}"><pre><code>$ echo &#39;{&#34;name&#34;:{&#34;first&#34;:&#34;Tom&#34;,&#34;last&#34;:&#34;Smith&#34;}}&#39; | jj -p name
{
  &#34;first&#34;: &#34;Tom&#34;,
  &#34;last&#34;: &#34;Smith&#34;
}
</code></pre></div>
<p dir="auto">Also the keypath is optional when the <code>-p</code> flag is specified, allowing for the entire json document to be made pretty.</p>
<div data-snippet-clipboard-copy-content="$ echo &#39;{&#34;name&#34;:{&#34;first&#34;:&#34;Tom&#34;,&#34;last&#34;:&#34;Smith&#34;}}&#39; | jj -p
{
  &#34;name&#34;: {
    &#34;first&#34;: &#34;Tom&#34;,
    &#34;last&#34;: &#34;Smith&#34;
  }
}"><pre><code>$ echo &#39;{&#34;name&#34;:{&#34;first&#34;:&#34;Tom&#34;,&#34;last&#34;:&#34;Smith&#34;}}&#39; | jj -p
{
  &#34;name&#34;: {
    &#34;first&#34;: &#34;Tom&#34;,
    &#34;last&#34;: &#34;Smith&#34;
  }
}
</code></pre></div>
<h2 tabindex="-1" dir="auto"><a id="user-content-ugly-printing" aria-hidden="true" href="#ugly-printing"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Ugly printing</h2>
<p dir="auto">The <code>-u</code> flag will compress the json into the fewest characters possible by squashing newlines and spaces.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-performance" aria-hidden="true" href="#performance"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Performance</h2>
<p dir="auto">A quick comparison of jj to <a href="https://stedolan.github.io/jq/" rel="nofollow">jq</a>. The test <a href="https://github.com/tidwall/sf-city-lots-json">json file</a> is 180MB file of 206,560 city parcels in San Francisco.</p>
<p dir="auto"><em>Tested on a 2015 Macbook Pro running jq 1.5 and jj 1.0.0</em></p>
<h4 tabindex="-1" dir="auto"><a id="user-content-get-the-lot-number-for-the-parcel-at-index-10000" aria-hidden="true" href="#get-the-lot-number-for-the-parcel-at-index-10000"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Get the lot number for the parcel at index 10000</h4>
<p dir="auto">jq:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ time cat citylots.json | jq -cM .features[10000].properties.LOT_NUM
&#34;091&#34;

real    0m5.486s
user    0m4.870s
sys     0m0.686s"><pre>$ <span>time</span> cat citylots.json <span>|</span> jq -cM .features[10000].properties.LOT_NUM
<span><span>&#34;</span>091<span>&#34;</span></span>

real    0m5.486s
user    0m4.870s
sys     0m0.686s</pre></div>
<p dir="auto">jj:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ time cat citylots.json | jj -r features.10000.properties.LOT_NUM
&#34;091&#34;

real    0m0.354s
user    0m0.161s
sys     0m0.321s"><pre>$ <span>time</span> cat citylots.json <span>|</span> jj -r features.10000.properties.LOT_NUM
<span><span>&#34;</span>091<span>&#34;</span></span>

real    0m0.354s
user    0m0.161s
sys     0m0.321s</pre></div>
<h4 tabindex="-1" dir="auto"><a id="user-content-update-the-lot-number-for-the-parcel-at-index-10000" aria-hidden="true" href="#update-the-lot-number-for-the-parcel-at-index-10000"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Update the lot number for the parcel at index 10000</h4>
<p dir="auto">jq:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ time cat citylots.json | jq -cM &#39;.features[10000].properties.LOT_NUM=&#34;12A&#34;&#39; &gt; /dev/null

real    0m13.579s
user    0m16.484s
sys     0m1.310s"><pre>$ <span>time</span> cat citylots.json <span>|</span> jq -cM <span><span>&#39;</span>.features[10000].properties.LOT_NUM=&#34;12A&#34;<span>&#39;</span></span> <span>&gt;</span> /dev/null

real    0m13.579s
user    0m16.484s
sys     0m1.310s</pre></div>
<p dir="auto">jj:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ time cat citylots.json | jj -O -v 12A features.10000.properties.LOT_NUM &gt; /dev/null

real    0m0.431s
user	0m0.201s
sys     0m0.295s"><pre>$ <span>time</span> cat citylots.json <span>|</span> jj -O -v 12A features.10000.properties.LOT_NUM <span>&gt;</span> /dev/null

real    0m0.431s
user	0m0.201s
sys     0m0.295s</pre></div>
<h2 tabindex="-1" dir="auto"><a id="user-content-contact" aria-hidden="true" href="#contact"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Contact</h2>
<p dir="auto">Josh Baker <a href="http://twitter.com/tidwall" rel="nofollow">@tidwall</a></p>
<h2 tabindex="-1" dir="auto"><a id="user-content-license" aria-hidden="true" href="#license"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>License</h2>
<p dir="auto">JJ source code is available under the MIT <a href="https://www.datadoodad.com/tidwall/jj/blob/master/LICENSE">License</a>.</p>
</article>
          </div></div>
  </body>
</html>
