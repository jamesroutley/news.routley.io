<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/phiresky/ripgrep-all">Original</a>
    <h1>Rga: Ripgrep, but also search in PDFs, E-Books, Office documents, zip, etc.</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">rga is a line-oriented search tool that allows you to look for a regex in a multitude of file types. rga wraps the awesome <a href="https://github.com/BurntSushi/ripgrep">ripgrep</a> and enables it to search in pdf, docx, sqlite, jpg, movie subtitles (mkv, mp4), etc.</p>
<p dir="auto"><a href="https://github.com/phiresky/ripgrep-all"><img src="https://camo.githubusercontent.com/5387fa8d96e5760861f378b36c0e6f1d84c5b0dafbe2e8354e6adfac80ac0e40/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f7265706f2d6769746875622e636f6d2532467068697265736b79253246726970677265702d2d616c6c2d696e666f726d6174696f6e616c2e737667" alt="github repo" data-canonical-src="https://img.shields.io/badge/repo-github.com%2Fphiresky%2Fripgrep--all-informational.svg"/></a>
<a href="https://crates.io/crates/ripgrep-all" rel="nofollow"><img src="https://camo.githubusercontent.com/c1fff664a51d2e626f4f3bef813fd10430ce1b0daa5c61c78f5eb17cb677a4a6/68747470733a2f2f696d672e736869656c64732e696f2f6372617465732f762f726970677265702d616c6c2e737667" alt="Crates.io" data-canonical-src="https://img.shields.io/crates/v/ripgrep-all.svg"/></a>
<a href="https://www.reddit.com/r/rustjerk/top/?sort=top&amp;t=all" rel="nofollow"><img src="https://camo.githubusercontent.com/00f69a4f5b9b22f7c302c1c3ebe8da26b76918c2364925b862bda41de264c4d4/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f636f6e63757272656e63792d666561726c6573732d737563636573732e737667" alt="fearless concurrency" data-canonical-src="https://img.shields.io/badge/concurrency-fearless-success.svg"/></a></p>
<p dir="auto">For more detail, see this introductory blogpost: <a href="https://phiresky.github.io/blog/2019/rga--ripgrep-for-zip-targz-docx-odt-epub-jpg/" rel="nofollow">https://phiresky.github.io/blog/2019/rga--ripgrep-for-zip-targz-docx-odt-epub-jpg/</a></p>
<p dir="auto">rga will recursively descend into archives and match text in every file type it knows.</p>
<p dir="auto">Here is an <a href="https://github.com/phiresky/ripgrep-all/tree/master/exampledir/demo">example directory</a> with different file types:</p>
<div data-snippet-clipboard-copy-content="demo/
├── greeting.mkv
├── hello.odt
├── hello.sqlite3
└── somearchive.zip
├── dir
│ ├── greeting.docx
│ └── inner.tar.gz
│ └── greeting.pdf
└── greeting.epub"><pre><code>demo/
├── greeting.mkv
├── hello.odt
├── hello.sqlite3
└── somearchive.zip
├── dir
│ ├── greeting.docx
│ └── inner.tar.gz
│ └── greeting.pdf
└── greeting.epub
</code></pre></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/phiresky/ripgrep-all/blob/master/doc/demodir.png"><img src="https://github.com/phiresky/ripgrep-all/raw/master/doc/demodir.png" alt="rga output"/></a></p>

<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/phiresky/ripgrep-all/blob/master/doc/rga-fzf.gif"><img src="https://github.com/phiresky/ripgrep-all/raw/master/doc/rga-fzf.gif" alt="rga-fzf" data-animated-image=""/></a></p>
<p dir="auto">See <a href="https://github.com/phiresky/ripgrep-all/wiki/fzf-Integration">the wiki</a> for instructions of integrating rga with fzf.</p>

<p dir="auto">Linux x64, macOS and Windows binaries are available <a href="https://github.com/phiresky/ripgrep-all/releases/latest">in GitHub Releases</a>.</p>


<p dir="auto"><code>pacman -S ripgrep-all</code></p>

<p dir="auto"><code>nix-env -iA nixpkgs.ripgrep-all</code></p>

<p dir="auto">download the <a href="https://github.com/phiresky/ripgrep-all/releases/latest">rga binary</a> and get the dependencies like this:</p>
<p dir="auto"><code>apt install ripgrep pandoc poppler-utils ffmpeg</code></p>
<p dir="auto">If ripgrep is not included in your package sources, get it from <a href="https://github.com/BurntSushi/ripgrep/releases">here</a>.</p>
<p dir="auto">rga will search for all binaries it calls in $PATH and the directory itself is in.</p>

<p dir="auto">Note that installing via <a href="https://chocolatey.org/packages/ripgrep-all" rel="nofollow">chocolatey</a> or <a href="https://github.com/ScoopInstaller/Main/blob/master/bucket/rga.json">scoop</a> is the only supported download method. If you download the binary from releases manually, you will not get the dependencies (for example pdftotext from poppler).</p>
<p dir="auto">If you get an error like <code>VCRUNTIME140.DLL could not be found</code>, you need to install <a href="https://support.microsoft.com/en-us/help/2977003/the-latest-supported-visual-c-downloads" rel="nofollow">vc_redist.x64.exe</a>.</p>

<div data-snippet-clipboard-copy-content="choco install ripgrep-all"><pre><code>choco install ripgrep-all
</code></pre></div>



<p dir="auto"><code>rga</code> can be installed with <a href="https://formulae.brew.sh/formula/ripgrep-all#default" rel="nofollow">Homebrew</a>:</p>
<p dir="auto"><code>brew install rga</code></p>
<p dir="auto">To install the dependencies that are each not strictly necessary but very useful:</p>
<p dir="auto"><code>brew install pandoc poppler ffmpeg</code></p>

<p dir="auto"><code>rga</code> can also be installed on macOS via <a href="https://ports.macports.org/port/ripgrep-all/" rel="nofollow">MacPorts</a>:</p>
<p dir="auto"><code>sudo port install ripgrep-all</code></p>

<p dir="auto">rga should compile with stable Rust (v1.75.0+, check with <code>rustc --version</code>). To build it, run the following (or the equivalent in your OS):</p>
<div data-snippet-clipboard-copy-content="~$ apt install build-essential pandoc poppler-utils ffmpeg ripgrep cargo
~$ cargo install --locked ripgrep_all
~$ rga --version    # this should work now"><pre><code>~$ apt install build-essential pandoc poppler-utils ffmpeg ripgrep cargo
~$ cargo install --locked ripgrep_all
~$ rga --version    # this should work now
</code></pre></div>

<p dir="auto">rga works with <em>adapters</em> that adapt various file formats. It comes with a few adapters integrated:</p>

<p dir="auto">You can also add <strong>custom adapters</strong>. See <a href="https://github.com/phiresky/ripgrep-all/wiki">the wiki</a> for more information.</p>

<p dir="auto">Adapters:</p>
<ul dir="auto">
<li>
<p dir="auto"><strong>pandoc</strong>
Uses pandoc to convert binary/unreadable text documents to plain markdown-like text
Runs: pandoc --from= --to=plain --wrap=none --markdown-headings=atx</p>
</li>
<li>
<p dir="auto"><strong>poppler</strong>
Uses pdftotext (from poppler-utils) to extract plain text from PDF files
Runs: pdftotext - -</p>
</li>
<li>
<p dir="auto"><strong>postprocpagebreaks</strong>
Adds the page number to each line for an input file that specifies page breaks as ascii page break character.
Mainly to be used internally by the poppler adapter.</p>
</li>
<li>
<p dir="auto"><strong>ffmpeg</strong>
Uses ffmpeg to extract video metadata/chapters, subtitles, lyrics, and other metadata</p>
</li>
<li>
<p dir="auto"><strong>zip</strong>
Reads a zip file as a stream and recurses down into its contents</p>
</li>
<li>
<p dir="auto"><strong>decompress</strong>
Reads compressed file as a stream and runs a different extractor on the contents.</p>
</li>
<li>
<p dir="auto"><strong>tar</strong>
Reads a tar file as a stream and recurses down into its contents</p>
</li>
<li>
<p dir="auto"><strong>sqlite</strong>
Uses sqlite bindings to convert sqlite databases into a simple plain text format</p>
</li>
</ul>
<p dir="auto">The following adapters are disabled by default, and can be enabled using &#39;--rga-adapters=+foo,bar&#39;:</p>
<ul dir="auto">
<li><strong>mail</strong>
Reads mailbox/mail files and runs extractors on the contents and attachments.</li>
</ul>

<blockquote>
<p dir="auto">rga [RGA OPTIONS] [RG OPTIONS] PATTERN [PATH ...]</p>
</blockquote>

<p dir="auto"><strong>--rga-accurate</strong></p>
<blockquote>
<p dir="auto">Use more accurate but slower matching by mime type</p>
</blockquote>
<blockquote>
<p dir="auto">By default, rga will match files using file extensions. Some programs,
such as sqlite3, don&#39;t care about the file extension at all, so users
sometimes use any or no extension at all. With this flag, rga will try
to detect the mime type of input files using the magic bytes (similar
to the `file` utility), and use that to choose the adapter.
Detection is only done on the first 8KiB of the file, since we can&#39;t
always seek on the input (in archives).</p>
</blockquote>
<p dir="auto"><strong>--rga-no-cache</strong></p>
<blockquote>
<p dir="auto">Disable caching of results</p>
</blockquote>
<blockquote>
<p dir="auto">By default, rga caches the extracted text, if it is small enough, to a
database in ${XDG_CACHE_DIR-~/.cache}/ripgrep-all on Linux,
<em>~/Library/Caches/ripgrep-all</em> on macOS, or
C:\Users\username\AppData\Local\ripgrep-all on Windows. This way,
repeated searches on the same set of files will be much faster. If you
pass this flag, all caching will be disabled.</p>
</blockquote>
<p dir="auto"><strong>-h</strong>, <strong>--help</strong></p>
<blockquote>
<p dir="auto">Prints help information</p>
</blockquote>
<p dir="auto"><strong>--rga-list-adapters</strong></p>
<blockquote>
<p dir="auto">List all known adapters</p>
</blockquote>
<p dir="auto"><strong>--rga-print-config-schema</strong></p>
<blockquote>
<p dir="auto">Print the JSON Schema of the configuration file</p>
</blockquote>
<p dir="auto"><strong>--rg-help</strong></p>
<blockquote>
<p dir="auto">Show help for ripgrep itself</p>
</blockquote>
<p dir="auto"><strong>--rg-version</strong></p>
<blockquote>
<p dir="auto">Show version of ripgrep itself</p>
</blockquote>
<p dir="auto"><strong>-V</strong>, <strong>--version</strong></p>
<blockquote>
<p dir="auto">Prints version information</p>
</blockquote>

<p dir="auto"><strong>--rga-adapters=</strong>&lt;adapters&gt;...</p>
<blockquote>
<p dir="auto">Change which adapters to use and in which priority order (descending)</p>
</blockquote>
<blockquote>
<p dir="auto">&#34;foo,bar&#34; means use only adapters foo and bar. &#34;-bar,baz&#34; means
use all default adapters except for bar and baz. &#34;+bar,baz&#34; means
use all default adapters and also bar and baz.</p>
</blockquote>
<p dir="auto"><strong>--rga-cache-compression-level=</strong>&lt;compression-level&gt;</p>
<blockquote>
<p dir="auto">ZSTD compression level to apply to adapter outputs before storing in
cache db</p>
</blockquote>
<blockquote>
<p dir="auto">Ranges from 1 - 22 [default: 12]</p>
</blockquote>
<p dir="auto"><strong>--rga-config-file=</strong>&lt;config-file-path&gt;</p>
<p dir="auto"><strong>--rga-max-archive-recursion=</strong>&lt;max-archive-recursion&gt;</p>
<blockquote>
<p dir="auto">Maximum nestedness of archives to recurse into [default: 5]</p>
</blockquote>
<p dir="auto"><strong>--rga-cache-max-blob-len=</strong>&lt;max-blob-len&gt;</p>
<blockquote>
<p dir="auto">Max compressed size to cache</p>
</blockquote>
<blockquote>
<p dir="auto">Longest byte length (after compression) to store in cache. Longer
adapter outputs will not be cached and recomputed every time.</p>
</blockquote>
<blockquote>
<p dir="auto">Allowed suffixes on command line: k M G [default: 2000000]</p>
</blockquote>
<p dir="auto"><strong>--rga-cache-path=</strong>&lt;path&gt;</p>
<blockquote>
<p dir="auto">Path to store cache db [default: /home/phire/.cache/ripgrep-all]</p>
</blockquote>
<p dir="auto"><strong>-h</strong> shows a concise overview, <strong>--help</strong> shows more detail and
advanced options.</p>
<p dir="auto">All other options not shown here are passed directly to rg, especially
[PATTERN] and [PATH ...]</p>


<p dir="auto">The config file location leverage the mechanisms defined by</p>
<ul dir="auto">
<li>the <a href="https://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html" rel="nofollow">XDG base directory</a> and
the <a href="https://www.freedesktop.org/wiki/Software/xdg-user-dirs/" rel="nofollow">XDG user directory</a> specifications on Linux (ex: <code>~/.config/ripgrep-all/config.jsonc</code>)</li>
<li>the <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/dd378457.aspx" rel="nofollow">Known Folder</a> API on Windows (ex:  <code>C:\Users\Alice\AppData\Roaming\ripgrep-all/config.jsonc</code>)</li>
<li>the <a href="https://developer.apple.com/library/content/documentation/FileManagement/Conceptual/FileSystemProgrammingGuide/FileSystemOverview/FileSystemOverview.html#//apple_ref/doc/uid/TP40010672-CH2-SW6" rel="nofollow">Standard Directories</a>
guidelines on macOS (ex: <code>~/Library/Application Support/ripgrep-all/config.jsonc</code>)</li>
</ul>

<p dir="auto">To enable debug logging:</p>
<div dir="auto" data-snippet-clipboard-copy-content="export RUST_LOG=debug
export RUST_BACKTRACE=1"><pre><span>export</span> RUST_LOG=debug
<span>export</span> RUST_BACKTRACE=1</pre></div>
<p dir="auto">Also remember to disable caching with <code>--rga-no-cache</code> or clear the cache
(<code>~/Library/Caches/rga</code> on macOS, <code>~/.cache/rga</code> on other Unixes,
or <code>C:\Users\username\AppData\Local\rga</code> on Windows)
to debug the adapters.</p>

<p dir="auto">You can use the provided <a href="https://github.com/phiresky/ripgrep-all/blob/master/flake.nix"><code>flake.nix</code></a> to setup all build- and
run-time dependencies:</p>
<ol dir="auto">
<li>Enable <a href="https://wiki.nixos.org/wiki/Flakes" rel="nofollow">Flakes</a> in your Nix configuration.</li>
<li>Add <a href="https://direnv.net/" rel="nofollow"><code>direnv</code></a> to your profile:
<code>nix profile install nixpkgs#direnv</code></li>
<li><code>cd</code> into the directory where you have cloned this directory.</li>
<li>Allow use of <a href="https://github.com/phiresky/ripgrep-all/blob/master/.envrc"><code>.envrc</code></a>: <code>direnv allow</code></li>
<li>After the dependencies have been installed, your shell will now have all of
the necessary development dependencies.</li>
</ol>
</article></div></div>
  </body>
</html>
