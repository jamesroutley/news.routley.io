<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://pbt.dev/blog/quine/">Original</a>
    <h1>An interactive quine</h1>
    
    <div id="readability-page-1" class="page"><article>
    
    

    <p>At the Recurse Center, I thought a lot about computers. In a group I
        facilitated, the subject of the <a href="https://en.wikipedia.org/wiki/Dynabook">Dynabook</a> came up: Alan
        Kay and Adele Goldberg’s vision for a programmable personal computer.
        When I read the paper it was remarkable to me: Here was a computer that
        was so simple, a child could learn it, but so powerful a child could
        learn how to <em>program</em> it.</p>

        <h2 id="as-easy-as-view-source">As Easy As View-Source</h2>
        <p>When I was a child, I learned how to build websites by copying other
        people’s code. Code obfuscation was not so common back then, so when I
        clicked “View Source” I could get to where all the source code was. I
        could copy it and (maybe) have it running on my own website.</p>
        <p>It’s that immediacy that got me into coding. Not an IDE, not even
        syntax highlighting! Just the ability to easily peek behind the
        curtain.</p>
        <p>I don’t think modern software looks like this anymore. These days I
        find it hard to open up source code, even though the tooling is much
        better. Simple things are abstracted over and over again for the sake of
        making code easier to write, but at the expense of making it much harder
        to read.</p>
        <h2 id="quines">Quines</h2>
        <p>I’ve always been fascinated by the concept of a <em>quine</em>: A
        computer program whose output is its own source code, or in other words,
        a computer program whose purpose is to reproduce itself. A lifeform in
        code form.</p>
        <p>It’s not accurate to describe this as an HTML quine, because to make
        this work involves HTML, CSS, and JavaScript.</p>
        <p>An HTML/CSS quine has been <a href="https://secretgeek.github.io/html_wysiwyg/html.html">done
        before</a>, so I wanted to up the ante: it would be an
        <strong><em>interactive quine</em></strong> that could change its own
        source code and accept input.</p>
        <p>Naturally, the quine takes the shape of a todo list. Like a todo
        list, it lets you mark tasks as done; it lets you create new ones; and
        it lets you delete your tasks. This is all done through a user interface
        that allows you to manipulate an underlying data structure.</p>
        <p>The difference here is that the underlying data structure is the very
        source code of the program itself.</p>
        <p>Saving your todos becomes an act of copying and pasting the source
        code to a file on your computer (But there’s even a built-in save
        button.) Exporting your todos to HTML becomes an act of… copying the
        HTML.</p>
        <p>And most importantly, you can figure out how it all works. I’ve left
        some comments in the code, an attempt at literate programming.</p>
        <h2 id="a-constructive-quine">A constructive quine</h2>
        <p>To me, coding up this quine was a lot easier to wrap my head around
        than a standard <a href="https://en.wikipedia.org/wiki/Quine_(computing)#Constructive_quines">constructive
        quine</a>. A constructive quine has a <strong>template</strong> that
        contains some formatting instructions, and <strong>code</strong> that
        prints according to the format string.</p>
        <p>This quine works similarly, but the “template” here is the HTML file
        itself, and the construction code walks the entire HTML source tree and
        reproduces tags using information it gets from the HTML DOM. (Finally,
        some CSS is added for formatting and to make the script and styles
        visible.) I did have to write my HTML in a constrained style for
        this.</p>
        <p>When I added interactivity, I made sure that the code to construct
        the quine would apply again after every interaction. I make use of a
        WeakMap to make sure that I don’t walk through nodes I’ve already
        seen.</p>
        <h2 id="discussion">Discussion</h2>
        <p><strong>Contenteditable does a lot of heavy lifting:</strong> For
        those who don’t know, contenteditable is an attribute that allows you to
        make the contents of an HTML element editable. It’s a form of WYSIWYG
        editing that goes back all the way to the days of Dreamweaver.</p>
        <p><strong>HTML does a lot of heavy lifting:</strong> Scripts and styles
        are not hidden by default, especially if embedded into the page. They
        are HTML elements like anything else, they are just hidden by default
        through styling! You can even edit the stylesheet of the quine,
        including removing the rules that make the quine a quine!</p>
        <p><strong>Literate programming and understandable programming:</strong>
        We have to make our code readable. A culture where we do not read code
        leads to exploits, it leads to wrong assumptions, it leads to
        illiteracy!</p>
        <p><strong>As Easy As View-Source?:</strong> View source means you can
        read what the code does. And when I got the code for the quine working,
        I found myself able to really understand what exactly was going on. I
        wish that it was the same to interact with any computing system.</p>
  </article></div>
  </body>
</html>
