<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://alexanderell.is/posts/numbers-game/">Original</a>
    <h1>“I don&#39;t know the numbers”: a math puzzle</h1>
    
    <div id="readability-page-1" class="page"><section id="wrapper">
            <article>
                <header>
                    
                    
                    <h2>
                    May 8, 2022
                    · 2748 words
                    · 13 minutes read
                      <span>
                            
                      </span>
                    </h2>
                </header>
                
                <section id="post-body">
                    <p>I saw a math puzzle the other day on <a href="https://news.ycombinator.com/item?id=31293611">Hacker News</a>. It reads as follows:</p>
<blockquote>
<p>Two numbers are chosen randomly, both are positive integers smaller than 100. Sandy is told the sum of the numbers, while Peter is told the product of the numbers.</p>
<p>Then, this dialog occurs between Sandy and Peter:</p>
<p>Peter: I don’t know the numbers. </p>
<p>Peter: I do know the numbers.</p>
<p>What are the numbers?</p>
</blockquote>
<p>At first glance this looks impenetrable, but I’d encourage you to give it a think if you’d like to. I’ll be walking through exactly how it works and how to solve it (with the help of a computer).</p>
<p><em>Spoilers below, be warned</em></p>
<hr/>
<p>Again, at first glance, it doesn’t look like any of this information would be helpful, but the trick is that each time they say they don’t know the answer, the other party is able to narrow down the options for what the numbers could be. If you do this enough times, there’s only one pair of numbers left, at which point Peter knows the answer.</p>
<p>I found it helpful to think about this in a few different ways. First, let’s say we have a list of all of the pairs of numbers - we can think about those as our candidates. To simplify, let’s say that the order doesn’t matter (<code>(1, 2)</code> is the same as <code>(2, 1)</code>) and we just keep track of one of the duplicates.</p>
<div><pre><code data-lang="python">
candidates: [
  (<span>1</span>, <span>1</span>),
  (<span>1</span>, <span>2</span>),
  (<span>1</span>, <span>3</span>),
  (<span>1</span>, <span>4</span>),
  <span>.</span><span>.</span><span>.</span>
  (<span>99</span>, <span>99</span>)
]

</code></pre></div><p>Let’s also imagine a big representation of all of the possible <strong>sums</strong> and <strong>products</strong> and the pairs of numbers that make up those sums and products. Let’s say they’re maps, where the keys are the sums/products and the values are lists of the pairs that make up those sums/products. Furthermore, let’s say that both Sandy and Peter have full knowledge of these maps.</p>
<div><pre><code data-lang="python">
sums: {
  <span>2</span>: [(<span>1</span>, <span>1</span>)],  <span># The only pair that adds up to 2 is (1, 1)</span>
  <span>3</span>: [(<span>1</span>, <span>2</span>)],
  <span>4</span>: [(<span>1</span>, <span>3</span>), (<span>2</span>, <span>2</span>)],  <span># For 4, we have two pairs: (1, 3) and (2, 2)</span>
  <span>5</span>: [(<span>1</span>, <span>4</span>), (<span>2</span>, <span>3</span>)],
  <span>6</span>: [(<span>1</span>, <span>5</span>), (<span>2</span>, <span>4</span>), (<span>3</span>, <span>3</span>)],
  <span># And so on.</span>
  <span>.</span><span>.</span><span>.</span>
  <span>198</span>: [(<span>99</span>, <span>99</span>)]
}

products: {
  <span>1</span>: [(<span>1</span>, <span>1</span>)],  <span># The only pair that multiply together to make 1 is (1, 1)</span>
  <span>2</span>: [(<span>1</span>, <span>2</span>)],
  <span>3</span>: [(<span>1</span>, <span>3</span>)],
  <span>4</span>: [(<span>1</span>, <span>4</span>), (<span>2</span>, <span>2</span>)],  <span># For 4, we have two pairs: (1, 4) and (2, 2)</span>
  <span># And so on.</span>
  <span>.</span><span>.</span><span>.</span>
  <span>9801</span>: [(<span>99</span>, <span>99</span>)]
}

</code></pre></div><p>The trick is in those entries that are only made up of a single pair.</p>
<p>Let’s look at Peter first. Peter knows the product of the two numbers. Peter can look up this product in the <code>products</code> map - if there is only one pair that makes up that product, then those <em>must</em> be the numbers! When Peter tells us that he doesn’t know the numbers, it means that the product <em>must not be any product that only has one pair</em>. This means that every time Peter doesn’t know, we can remove each pair that is the only pair for a product, and those pairs can be removed from the list of potential candidates.</p>
<p>Let’s look at those above lists and Peter’s first claim. At the start, we have a full list of candidate pairs, a full <code>sums</code> map, and a full <code>products</code> map. Because Peter knows the product, when he says “I don’t know the numbers”, it means that he looked at the possible pairs that made up this product and found multiple potential pairs - otherwise he would immediately know the numbers. This means that we can then disqualify products that are made up of one pair. <code>1</code> as a product, for instance, is only made from multiplying the pair <code>(1, 1)</code>. Since we know that Peter doesn’t immediately know it as the solution, it means that it can’t be <code>(1, 1)</code>.</p>
<p>Similarly, if the product was <code>9801</code>, Peter would have immediately known the pair was <code>(99, 99)</code>. Because he can’t yet say for certain, it means that the numbers must not be <code>(99, 99)</code>.</p>
<p>We’re able to now remove all candidates that were the only factors that made up a product. For the first round, this is notably <code>1</code> times each prime and each prime multiplied by another prime that results in a number greater than 100. Importantly, we can also remove them and their products/sums from the <code>products</code> map <em>and</em> the <code>sums</code> map.</p>
<div><pre><code data-lang="python">
<span># After culling the candidates from the first round</span>
candidates: [
  (<span>̶</span><span>1</span><span>̶</span>,<span>̶</span> <span>̶</span><span>1</span><span>̶</span>)<span>̶</span>,<span>̶</span>
  (<span>̶</span><span>1</span><span>̶</span>,<span>̶</span> <span>̶</span><span>2</span><span>̶</span>)<span>̶</span>,<span>̶</span>
  (<span>̶</span><span>1</span><span>̶</span>,<span>̶</span> <span>̶</span><span>3</span><span>̶</span>)<span>̶</span><span>̶</span>,<span>̶</span>
  (<span>1</span>, <span>4</span>),
  <span>.</span><span>.</span><span>.</span>
  (<span>̶</span><span>9</span><span>̶</span><span>9</span><span>̶</span>,<span>̶</span> <span>̶</span><span>9</span><span>̶</span><span>9</span><span>̶</span>)<span>̶</span>
 ]

sums: {
  <span>2</span><span>̶</span>:<span>̶</span> <span>̶</span>[<span>̶</span>(<span>̶</span><span>1</span><span>̶</span>,<span>̶</span> <span>̶</span><span>1</span><span>̶</span>)<span>̶</span>]<span>̶</span>,
  <span>3</span><span>̶</span>:<span>̶</span> <span>̶</span>[<span>̶</span>(<span>̶</span><span>1</span><span>̶</span>,<span>̶</span> <span>̶</span><span>2</span><span>̶</span>)<span>̶</span>]<span>̶</span>,
  <span>4</span>: [(<span>̶</span><span>1</span><span>̶</span>,<span>̶</span> <span>̶</span><span>3</span><span>̶</span>)<span>̶</span>, (<span>2</span>, <span>2</span>)],
  <span>5</span>: [(<span>1</span>, <span>4</span>), (<span>2</span>, <span>3</span>)],
  <span>6</span>: [(<span>̶</span><span>1</span><span>̶</span>,<span>̶</span> <span>̶</span><span>5</span><span>̶</span>)<span>̶</span>, (<span>2</span>, <span>4</span>), (<span>3</span>, <span>3</span>)],
  <span># And so on.</span>
  <span>.</span><span>.</span><span>.</span>
  <span>198</span>: [(<span>99</span>, <span>99</span>)]
}

products: {
  <span>1</span><span>̶</span>:<span>̶</span> <span>̶</span>[<span>̶</span>(<span>̶</span><span>1</span><span>̶</span>,<span>̶</span> <span>̶</span><span>1</span><span>̶</span>)<span>̶</span>]<span>̶</span>,<span>̶</span>
  <span>2</span><span>̶</span>:<span>̶</span> <span>̶</span>[<span>̶</span>(<span>̶</span><span>1</span><span>̶</span>,<span>̶</span> <span>̶</span><span>2</span><span>̶</span>)<span>̶</span>]<span>̶</span>,<span>̶</span>
  <span>3</span><span>̶</span>:<span>̶</span> <span>̶</span>[<span>̶</span>(<span>̶</span><span>1</span><span>̶</span>,<span>̶</span> <span>̶</span><span>3</span><span>̶</span>)<span>̶</span>]<span>̶</span>,<span>̶</span>
  <span>4</span>: [(<span>1</span>, <span>4</span>), (<span>2</span>, <span>2</span>)],
  <span># And so on.</span>
  <span>.</span><span>.</span><span>.</span>
  <span>9</span><span>̶</span><span>8</span><span>̶</span><span>0</span><span>̶</span><span>1</span><span>̶</span>:<span>̶</span> <span>̶</span>[<span>̶</span>(<span>̶</span><span>9</span><span>̶</span><span>9</span><span>̶</span>,<span>̶</span> <span>̶</span><span>9</span><span>̶</span><span>9</span><span>̶</span>)<span>̶</span>]<span>̶</span>
}

<span># Note: the above uses strikethrough code - if it looks funny on your screen, I apologize!</span>
<span># In that case, the culling is an exercise left to the reader.</span>

</code></pre></div><p>This is the trick. Because the space of possible candidates has been reduced, it means the possible candidates that make up each sum and product have also been reduced. Let’s look at the updated <code>candidates</code>, <code>sums</code>, and <code>products</code>, filling in a few more previously omitted values:</p>
<div><pre><code data-lang="python">
candidates: [
  (<span>1</span>, <span>4</span>),
  (<span>1</span>, <span>6</span>),
  (<span>1</span>, <span>8</span>),
  <span>.</span><span>.</span><span>.</span>
  (<span>88</span>, <span>90</span>)
]

sums: {
  <span>4</span>: [(<span>2</span>, <span>2</span>)],
  <span>5</span>: [(<span>1</span>, <span>4</span>), (<span>2</span>, <span>3</span>)],
  <span>6</span>: [(<span>2</span>, <span>4</span>), (<span>3</span>, <span>3</span>)],
  <span># And so on.</span>
  <span>.</span><span>.</span><span>.</span>
  <span>178</span>: [(<span>88</span>, <span>90</span>)]
}

products: {
  <span>4</span>: [(<span>1</span>, <span>4</span>), (<span>2</span>, <span>2</span>)],  <span># For 4, we have two pairs: (1, 4) and (2, 2)</span>
  <span># And so on.</span>
  <span>.</span><span>.</span><span>.</span>
  <span>7920</span>: [(<span>88</span>, <span>90</span>), (<span>80</span>, <span>99</span>)]
}

</code></pre></div><p>Now, it’s Sandy’s turn to say that she doesn’t know the numbers. Because Sandy knows the <strong>sum</strong>, again it must mean that the sum can’t be any sum with only one pair as an option in <code>sums</code>, so we can again cull those pairs. In the updated <code>sums</code> structure, we can see that 4 is now only made up of a single candidate pair, <code>(2, 2)</code>. If the sum was 4, Sandy would know immediately what the pair was, but since she doesn’t, it means the pair cannot be <code>(2, 2)</code>, and we can remove it from the candidates.</p>
<p>Every round, we’re disqualifying potential candidates. Because we’re also able to remove them from the <code>sums</code> and <code>products</code> as potential options, it means that each protagonist is working on a new collection every time, giving a little more information every time they say they don’t know the number.</p>
<p>This pattern will continue, with a certain number of options being removed every time. At some point, Peter finally says that he does know the numbers - finally, there is only one product left with one potential pair, and that is the answer. Importantly, it has to go down to a single product - otherwise there would be multiple answers! That’s why this version has Peter claiming to know after 14 rounds, because it limits the answer to a single pair (although there are other options - see later).</p>
<hr/>
<p>This would be a little rough to do by hand, but luckily we can have the computer do it for us.</p>
</section>
            </article>

            

            

            

            

        </section></div>
  </body>
</html>
