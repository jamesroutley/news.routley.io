<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/C-Naoki/image-stitcher">Original</a>
    <h1>Show HN: Fast and Exact Algorithm for Image Merging</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><div dir="auto"><a id="user-content-image-stitcher" aria-label="Permalink: image-stitcher" href="#image-stitcher"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="https://www.python.org/downloads/release/python-390/" rel="nofollow"><img src="https://camo.githubusercontent.com/067bfbd6b45e87f5aceb63a0e83a1b3403ce6910b5a01c12c84eed6fa6e4274d/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f507974686f6e2d332e31302d677265656e2e737667" alt="Python 3.10" data-canonical-src="https://img.shields.io/badge/Python-3.10-green.svg"/></a>
<a href="https://opensource.org/licenses/MIT" rel="nofollow"><img src="https://camo.githubusercontent.com/6cd0120cc4c5ac11d28b2c60f76033b52db98dac641de3b2644bb054b449d60c/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d4d49542d79656c6c6f772e737667" alt="License: MIT" data-canonical-src="https://img.shields.io/badge/License-MIT-yellow.svg"/></a>
<a href="https://zenn.dev/naoki0103/articles/image-stitcher-application" rel="nofollow"><img src="https://camo.githubusercontent.com/ef720357cffe2ced181e44b515aedc77083c4531e2eadd7d30a58101eecdcbf0/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f2546302539462539332539415a656e6e2d646f63756d656e746174696f6e2d696e666f726d6174696f6e616c2e737667" alt="RubyDoc" data-canonical-src="https://img.shields.io/badge/%F0%9F%93%9AZenn-documentation-informational.svg"/></a></p>
<p dir="auto">This is a python implementation for stitching images by automatically searching for overlap region.</p>
<ul dir="auto">
<li><a href="#-usage">👨‍💻 Usage</a></li>
<li><a href="#-preview-of-results">🎯 Preview of results</a></li>
<li><a href="#-main-idea">🧠 Main Idea</a></li>
<li><a href="#%EF%B8%8F-support">🙋‍♂️ Support</a></li>
<li><a href="#%EF%B8%8F-contact">✉️ Contact</a></li>
</ul>
<div dir="auto"><h2 tabindex="-1" dir="auto">👨‍💻 Usage</h2><a id="user-content--usage" aria-label="Permalink: 👨‍💻 Usage" href="#-usage"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto" data-snippet-clipboard-copy-content="from src.main import main
from src.utils.visualizer import result_visualize

merged_image, cand = main(
    image1=image1,              # The first image to be combined
    image2=image2,              # The second image to be combined
    min_overlap=(5, 5),         # The minimum overlap region
    verbose=False,              # Whether to print the log
)
result_visualize(
    image1=image1,              # The first image to be combined
    image2=image2,              # The second image to be combined
    merged_image=merged_image,  # The output image
    cand=cand,                  # The parameters
)"><pre><span>from</span> <span>src</span>.<span>main</span> <span>import</span> <span>main</span>
<span>from</span> <span>src</span>.<span>utils</span>.<span>visualizer</span> <span>import</span> <span>result_visualize</span>

<span>merged_image</span>, <span>cand</span> <span>=</span> <span>main</span>(
    <span>image1</span><span>=</span><span>image1</span>,              <span># The first image to be combined</span>
    <span>image2</span><span>=</span><span>image2</span>,              <span># The second image to be combined</span>
    <span>min_overlap</span><span>=</span>(<span>5</span>, <span>5</span>),         <span># The minimum overlap region</span>
    <span>verbose</span><span>=</span><span>False</span>,              <span># Whether to print the log</span>
)
<span>result_visualize</span>(
    <span>image1</span><span>=</span><span>image1</span>,              <span># The first image to be combined</span>
    <span>image2</span><span>=</span><span>image2</span>,              <span># The second image to be combined</span>
    <span>merged_image</span><span>=</span><span>merged_image</span>,  <span># The output image</span>
    <span>cand</span><span>=</span><span>cand</span>,                  <span># The parameters</span>
)</pre></div>
<div dir="auto"><h2 tabindex="-1" dir="auto">🎯 Preview of results</h2><a id="user-content--preview-of-results" aria-label="Permalink: 🎯 Preview of results" href="#-preview-of-results"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The results using <a href="https://www.cs.toronto.edu/~kriz/cifar.html" rel="nofollow"><code>CIFAR-10</code></a> are shown below. I would refer you to <a href="https://github.com/C-Naoki/image-stitcher/blob/main/notebooks/tutorial.ipynb"><code>tutorial.ipynb</code></a> for detailed results.</p>
<p dir="auto">
<a target="_blank" rel="noopener noreferrer" href="https://jackcarrick.net/C-Naoki/image-stitcher/blob/main/docs/assets/input.png"><img src="https://jackcarrick.net/C-Naoki/image-stitcher/raw/main/docs/assets/input.png" alt=""/></a>
</p>
<p dir="auto">
<a target="_blank" rel="noopener noreferrer" href="https://jackcarrick.net/C-Naoki/image-stitcher/blob/main/docs/assets/rotated.png"><img src="https://jackcarrick.net/C-Naoki/image-stitcher/raw/main/docs/assets/rotated.png" alt=""/></a>
</p>
<p dir="auto">
<a target="_blank" rel="noopener noreferrer" href="https://jackcarrick.net/C-Naoki/image-stitcher/blob/main/docs/assets/result.png"><img src="https://jackcarrick.net/C-Naoki/image-stitcher/raw/main/docs/assets/result.png" alt=""/></a>
</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">🧠 Main Idea</h2><a id="user-content--main-idea" aria-label="Permalink: 🧠 Main Idea" href="#-main-idea"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">
<a target="_blank" rel="noopener noreferrer" href="https://jackcarrick.net/C-Naoki/image-stitcher/blob/main/docs/assets/case1.png"><img src="https://jackcarrick.net/C-Naoki/image-stitcher/raw/main/docs/assets/case1.png" width="500" alt=""/></a>
</p>
<p dir="auto">This application is designed based on the overlap region&#39;s width <math-renderer data-static-url="https://github.githubassets.com/static" data-run-id="34647a265e547ec1bdb4fb8d8fd40c75">$w_c$</math-renderer> and height <math-renderer data-static-url="https://github.githubassets.com/static" data-run-id="34647a265e547ec1bdb4fb8d8fd40c75">$h_c$</math-renderer>. Thanks to this idea, we can simply limit the search space, thus preventing it from capturing overly small, suboptimal overlap region.</p>
<p dir="auto">
<a target="_blank" rel="noopener noreferrer" href="https://jackcarrick.net/C-Naoki/image-stitcher/blob/main/docs/assets/case2.png"><img src="https://jackcarrick.net/C-Naoki/image-stitcher/raw/main/docs/assets/case2.png" width="500" alt=""/></a>
</p>
<p dir="auto">However, the above approach is not always applicable, specifically when <math-renderer data-static-url="https://github.githubassets.com/static" data-run-id="34647a265e547ec1bdb4fb8d8fd40c75">$\min(h_1, h_2) &amp;lt; h_c$</math-renderer> or <math-renderer data-static-url="https://github.githubassets.com/static" data-run-id="34647a265e547ec1bdb4fb8d8fd40c75">$\min(w_1, w_2) &amp;lt; w_c$</math-renderer>. To address this issue, I change the perspective of <math-renderer data-static-url="https://github.githubassets.com/static" data-run-id="34647a265e547ec1bdb4fb8d8fd40c75">$w_c$</math-renderer> and <math-renderer data-static-url="https://github.githubassets.com/static" data-run-id="34647a265e547ec1bdb4fb8d8fd40c75">$h_c$</math-renderer> like the above figure. Therefore, this application can handle images of arbitrary sizes.</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">🙋‍♂️ Support</h2><a id="user-content-️-support" aria-label="Permalink: 🙋‍♂️ Support" href="#️-support"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">💙 If you like this app, give it a ⭐ and share it with friends!</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">✉️ Contact</h2><a id="user-content-️-contact" aria-label="Permalink: ✉️ Contact" href="#️-contact"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">💥 For questions or issues, feel free to open an <a href="https://github.com/C-Naoki/image-stitcher/issues">issue</a>. I appreciate your feedback and look forward to hearing from you!</p>
</article></div></div>
  </body>
</html>
