<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://tonsky.me/blog/syntax-highlighting/">Original</a>
    <h1>I am sorry, but everyone is getting syntax highlighting wrong</h1>
    
    
<img src="https://tonsky.me/blog/syntax-highlighting/cover.webp"><p>Syntax highlighting is a tool. It can help you read code faster. Find things quicker. Orient yourself in a large file.</p>
<p>Like any tool, it can be used correctly or incorrectly. Let’s see how to use syntax highlighting to help you work.</p>
<h1 id="christmas-lights-diarrhea">Christmas Lights Diarrhea</h1>
<p>Most color themes have a unique bright color for literally everything: one for variables, another for language keywords, constants, punctuation, functions, classes, calls, comments, etc.</p>
<p>Sometimes it gets so bad one can’t see the base text color: everything is highlighted. What’s the base text color here?</p>
<figure>
<img src="https://tonsky.me/blog/syntax-highlighting/diarrhea.webp"></figure>
<p>The problem with that is, if everything is highlighted, nothing stands out. Your eye adapts and considers it a new norm: everything is bright and shiny, and instead of getting separated, it all blends together.</p>
<p>Here’s a quick test. Try to find the function definition here:</p>
<figure>
<img src="https://tonsky.me/blog/syntax-highlighting/definitions_bad.webp"></figure>
<p>and here:</p>
<figure>
<img src="https://tonsky.me/blog/syntax-highlighting/definitions_good.webp"></figure>
<p>See what I mean?</p>
<p>So yeah, unfortunately, you can’t just highlight everything. You have to make decisions: what is more important, what is less. What should stand out, what shouldn’t.</p>
<p>Highlighting everything is like assigning “top priority” to every task in Linear. It only works if most of the tasks have lesser priorities.</p>
<p class="loud">If everything is highlighted, nothing is highlighted.</p>
<h1 id="enough-colors-to-remember">Enough colors to remember</h1>
<p>There are two main use-cases you want your color theme to address:</p>
<ol start="1">
  <li>Look at something and tell what it is by its color (you can tell by reading text, yes, but why do you need syntax highlighting then?)</li>
  <li>Search for something. You want to know what to look for (which color).</li>
</ol>
<p>1 is a direct index lookup: color → type of thing.</p>
<p>2 is a reverse lookup: type of thing → color.</p>
<p>Truth is, most people don’t do these lookups at all. They might think they do, but in reality, they don’t.</p>
<p>Let me illustrate. Before:</p>
<figure>
<img src="https://tonsky.me/blog/syntax-highlighting/change_before.webp"></figure>
<p>After:</p>
<figure>
<img src="https://tonsky.me/blog/syntax-highlighting/change_after.webp"></figure>
<p>Can you see it? I misspelled <code>return</code> for <code>retunr</code> and its color switched from red to purple.</p>
<p>I can’t.</p>
<p>Here’s another test. Close your eyes (not yet! Finish this sentence first) and try to remember what color your color theme uses for class names?</p>
<p>Can you?</p>
<p>If the answer for both questions is “no”, then your color theme is <em>not functional</em>. It might give you comfort (as in—I feel safe. If it’s highlighted, it’s probably code) but you can’t use it as a tool. It doesn’t <em>help</em> you.</p>
<p>What’s the solution? Have an absolute minimum of colors. So little that they all fit in your head at once. For example, my color theme, Alabaster, only uses four:</p>
<ul>
  <li>Green for strings</li>
  <li>Purple for constants</li>
  <li>Yellow for comments</li>
  <li>Light blue for top-level definitions</li>
</ul>
<p>That’s it! And I was able to type it all from memory, too. This minimalism allows me to actually do lookups: if I’m looking for a string, I know it will be green. If I’m looking at something yellow, I know it’s a comment.</p>
<p class="loud">Limit the number of different colors to what you can remember.</p>
<p>If you swap green and purple in my editor, it’ll be a catastrophe. If somebody swapped colors in yours, would you even notice?</p>
<h1 id="what-should-you-highlight">What should you highlight?</h1>
<p>Something there isn’t a lot of. Remember—we want highlights to stand out. That’s why I don’t highlight variables or function calls—they are everywhere, your code is probably 75% variable names and function calls.</p>
<p>I do highlight constants (numbers, strings). These are usually used more sparingly and often are reference points—a lot of logic paths start from constants.</p>
<p>Top-level definitions are another good idea. They give you an idea of a structure quickly.</p>
<p>Punctuation: it helps to separate names from syntax a little bit, and you care about names first, especially when quickly scanning code.</p>
<p>Please, please don’t highlight language keywords. <code>class</code>, <code>function</code>, <code>if</code>, <code>else</code>stuff like this. You rarely look for them: “where’s that if” is a valid question, but you will be looking not at the <code>if</code> the keyword, but at the condition after it. The condition is the important, distinguishing part. The keyword is not.</p>
<p class="loud">Highlight names and constants. Grey out punctuation. Don’t highlight language keywords.</p>
<h1 id="comments-are-important">Comments are important</h1>
<p>The tradition of using grey for comments comes from the times when people were paid by line. If you have something like</p>
<figure>
<img src="https://tonsky.me/blog/syntax-highlighting/javadoc.webp"></figure>
<p>of course you would want to grey it out! This is bullshit text that doesn’t add anything and was written to be ignored.</p>
<p>But for good comments, the situation is opposite. Good comments ADD to the code. They explain something that couldn’t be expressed directly. They are <em>important</em>.</p>
<figure>
<img src="https://tonsky.me/blog/syntax-highlighting/yellow_comments.webp"></figure>
<p>So here’s another controversial idea:</p>
<p class="loud">Comments should be highlighted, not hidden away.</p>
<p>Use bold colors, draw attention to them. Don’t shy away. If somebody took the time to tell you something, then you want to read it.</p>
<h1 id="two-types-of-comments">Two types of comments</h1>
<p>Another secret nobody is talking about is that there are two types of comments:</p>
<ol start="1">
  <li>Explanations</li>
  <li>Disabled code</li>
</ol>
<p>Most languages don’t distinguish between those, so there’s not much you can do syntax-wise. Sometimes there’s a convention (e.g. <code>--</code> vs <code>/* */</code> in SQL), then use it!</p>
<p>Here’s a real example from Clojure codebase that makes perfect use of two types of comments:</p>
<figure>
<img src="https://tonsky.me/blog/syntax-highlighting/two_types_of_comments.webp"><figcaption>Disabled code is gray, explanation is bright yellow</figcaption></figure>
<h1 id="light-or-dark">Light or dark?</h1>
<p>Per statistics, 70% of developers prefer dark themes. Being in the other 30%, that question always puzzled me. Why?</p>
<p>And I think I have an answer. Here’s a typical dark theme:</p>
<figure>
<img src="https://tonsky.me/blog/syntax-highlighting/vscode_default_dark@2x.webp"></figure>
<p>and here’s a light one:</p>
<figure>
<img src="https://tonsky.me/blog/syntax-highlighting/vscode_default_light@2x.webp"></figure>
<p>On the latter one, colors are way less vibrant. Here, I picked them out for you:</p>
<figure>
<img src="https://tonsky.me/blog/syntax-highlighting/vscode_colors@2x.png"><figcaption>Notice how many colors there are. No one can remember that many.</figcaption></figure>
<p>This is because dark colors are in general less distinguishable and more muddy. Look at Hue scale as we move brightness down:</p>
<figure>
<img src="https://tonsky.me/blog/syntax-highlighting/brightness_hue@2x.webp"></figure>
<p>Basically, in the dark part of the spectrum, you just get fewer colors to play with. There’s no “dark yellow” or good-looking “dark teal”.</p>
<p>Nothing can be done here. There are no magic colors hiding somewhere that have both good contrast on a white background and look good at the same time. By choosing a light theme, you are dooming yourself to a very limited, bad-looking, barely distinguishable set of dark colors.</p>
<p>So it makes sense. Dark themes do look better. Or rather: light ones can’t look good. Science ¯\_(ツ)_/¯</p>
<p>But!</p>
<p>But.</p>
<p>There is one trick you can do, that I don’t see a lot of. Use background colors! Compare:</p>
<figure>
<img src="https://tonsky.me/blog/syntax-highlighting/bg_highlight@2x.png"></figure>
<p>The first one has nice colors, but the contrast is too low: letters become hard to read.</p>
<p>The second one has good contrast, but you can barely see colors.</p>
<p>The last one has <em>both</em>: high contrast and clean, vibrant colors. Lighter colors are readable even on a white background since they fill a lot more area. Text is the same brightness as in the second example, yet it gives the impression of clearer color. It’s all upside, really.</p>
<p>UI designers know about this trick for a while, but I rarely see it applied in code editors:</p>
<figure>
<img src="https://tonsky.me/blog/syntax-highlighting/badge.png"></figure>
<p>If your editor supports choosing background color, give it a try. It might open light themes for you.</p>
<h1 id="bold-and-italics">Bold and italics</h1>
<p>Don’t use. This goes into the same category as too many colors. It’s just another way to highlight something, and you don’t need too many, because you can’t highlight everything.</p>
<p>In theory, you might try to <em>replace</em> colors with typography. Would that work? I don’t know. I haven’t seen any examples.</p>
<figure>
<img src="https://tonsky.me/blog/syntax-highlighting/typography.png"><figcaption>Using italics and bold instead of colors</figcaption></figure>
<h1 id="myth-of-number-based-perfection">Myth of number-based perfection</h1>
<p>Some themes pay too much attention to be scientifically uniform. Like, all colors have the same exact lightness, and hues are distributed evenly on a circle.</p>
<p>This could be nice (to know if you have OCR), but in practice, it doesn’t work as well as it sounds:</p>
<figure>
<img src="https://tonsky.me/blog/syntax-highlighting/balanced.png"><figcaption>OkLab l=0.7473 c=0.1253 h=0, 45, 90, 135, 180, 225, 270, 315</figcaption></figure>
<p>The idea of highlighting is to make things stand out. If you make all colors the same lightness and chroma, they will look very similar to each other, and it’ll be hard to tell them apart.</p>
<p>Our eyes are way more sensitive to differences in lightness than in color, and we should use it, not try to negate it.</p>
<h1 id="lets-design-a-color-theme-together">Let’s design a color theme together</h1>
<p>Let’s apply these principles step by step and see where it leads us. We start with the theme from the start of this post:</p>
<figure>
<img src="https://tonsky.me/blog/syntax-highlighting/dyi00.png"></figure>
<p>First, let’s remove highlighting from language keywords and re-introduce base text color:</p>
<figure>
<img src="https://tonsky.me/blog/syntax-highlighting/dyi10.png"></figure>
<p>Next, we remove color from variable usage:</p>
<figure>
<img src="https://tonsky.me/blog/syntax-highlighting/dyi20.png"></figure>
<p>and from function/method invocation:</p>
<figure>
<img src="https://tonsky.me/blog/syntax-highlighting/dyi30.png"></figure>
<p>The thinking is that your code is mostly references to variables and method invocation. If we highlight those, we’ll have to highlight more than 75% of your code.</p>
<p>Notice that we’ve kept variable declarations. These are not as ubiquitous and help you quickly answer a common question: where does thing thing come from?</p>
<p>Next, let’s tone down punctuation:</p>
<figure>
<img src="https://tonsky.me/blog/syntax-highlighting/dyi40.png"></figure>
<p>I prefer to dim it a little bit because it helps names stand out more. Names alone can give you the general idea of what’s going on, and the exact configuration of brackets is rarely equally important.</p>
<p>But you might roll with base color punctuation, too:</p>
<figure>
<img src="https://tonsky.me/blog/syntax-highlighting/dyi40_alt.png"></figure>
<p>Okay, getting close. Let’s highlight comments:</p>
<figure>
<img src="https://tonsky.me/blog/syntax-highlighting/dyi50.png"></figure>
<p>We don’t use red here because you usually need it for squiggly lines and errors.</p>
<p>This is still one color too many, so I unify numbers and strings to both use green:</p>
<figure>
<img src="https://tonsky.me/blog/syntax-highlighting/dyi60.png"></figure>
<p>Finally, let’s rotate colors a bit. We want to respect nesting logic, so function declarations should be brighter (yellow) than variable declarations (blue).</p>
<figure>
<img src="https://tonsky.me/blog/syntax-highlighting/dyi70.png"></figure>
<p>Compare with what we started:</p>
<figure>
<img src="https://tonsky.me/blog/syntax-highlighting/dyi00.png"></figure>
<p>In my opinion, we got a much more workable color theme: it’s easier on the eyes and helps you find stuff faster.</p>
<h1 id="shameless-plug-time">Shameless plug time</h1>
<p>I’ve been applying these principles for <a href="https://github.com/tonsky/vscode-theme-alabaster/commit/5c840f5fb57e5cd0dce93ac8c450495bdb0a2658">about 8 years now</a>.</p>
<p>I call this theme Alabaster and I’ve built it a couple of times for the editors I used:</p>
<ul>
  <li><a href="https://github.com/tonsky/vscode-theme-alabaster">VS Code</a></li>
  <li><a href="https://github.com/tonsky/intellij-alabaster">JetBrains IDEs</a></li>
  <li><a href="https://github.com/tonsky/sublime-scheme-alabaster">Sublime Text</a> (<a href="https://github.com/tonsky/clojure-sublimed/?tab=readme-ov-file#color-scheme">twice</a>)</li>
</ul>
<p>It’s also been ported to many other editors and terminals; the most complete list is <a href="https://github.com/tonsky/sublime-scheme-alabaster?tab=readme-ov-file#variations-1">probably here</a>. If your editor is not on the list, try searching for it by name—it might be built-in already! I always wondered where these color themes come from, and now I became an author of one (and I still don’t know).</p>
<p>Feel free to use Alabaster as is or build your own theme using the principles outlined in the article—either is fine by me.</p>
<p>As for the principles themselves, they worked out fantastically for me. I’ve never wanted to go back, and just one look at any “traditional” color theme gives me a scare now.</p>
<p>I <em>suspect</em> that the only reason we don’t see more restrained color themes is that people never really thought about it. Well, this is your wake-up call. I hope this will inspire people to use color more deliberately and to change the default way we build and use color themes.</p>


  </body>
</html>
