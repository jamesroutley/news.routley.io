<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/cvilsmeier/sqinn-go">Original</a>
    <h1>Show HN: Sqinn-Go is a Golang library for accessing SQLite databases in pure Go</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/cvilsmeier/sqinn-go/blob/master/logo-200.png"><img src="https://github.com/cvilsmeier/sqinn-go/raw/master/logo-200.png" alt="Sqinn" title="Sqinn"/></a></p>
<p dir="auto"><a href="http://godoc.org/github.com/cvilsmeier/sqinn-go/sqinn" rel="nofollow"><img src="https://camo.githubusercontent.com/2b6c60d9f2993465c65ce8b826b7ff035c9a29da1434b48adcb1f93bca98aec1/68747470733a2f2f676f646f632e6f72672f6769746875622e636f6d2f6376696c736d656965722f7371696e6e2d676f2f7371696e6e3f7374617475732e737667" alt="GoDoc Reference" data-canonical-src="https://godoc.org/github.com/cvilsmeier/sqinn-go/sqinn?status.svg"/></a>
<a href="https://goreportcard.com/report/github.com/cvilsmeier/sqinn-go" rel="nofollow"><img src="https://camo.githubusercontent.com/9ea2011d5e15f51d8aae0418369f0b54b261e260b38fb18872b02736b5ffc949/68747470733a2f2f676f7265706f7274636172642e636f6d2f62616467652f6769746875622e636f6d2f6376696c736d656965722f7371696e6e2d676f" alt="Go Report Card" data-canonical-src="https://goreportcard.com/badge/github.com/cvilsmeier/sqinn-go"/></a>
<a href="https://travis-ci.org/cvilsmeier/sqinn-go" rel="nofollow"><img src="https://camo.githubusercontent.com/a88708c84ec12de8626b79cbf64337c83a7f8d2a7bafef9ffebb58f7dcfda46c/68747470733a2f2f6170692e7472617669732d63692e636f6d2f6376696c736d656965722f7371696e6e2d676f2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://api.travis-ci.com/cvilsmeier/sqinn-go.svg?branch=master"/></a>
<a href="http://unlicense.org/" rel="nofollow"><img src="https://camo.githubusercontent.com/a0f44681d578ce545f4614325d26eac4036b273d21a61de5293af355cb969bac/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d556e6c6963656e73652d626c75652e737667" alt="License: Unlicense" data-canonical-src="https://img.shields.io/badge/license-Unlicense-blue.svg"/></a>
<a href="https://github.com/avelino/awesome-go"><img src="https://camo.githubusercontent.com/e5d3197f63169393ee5695f496402136b412d5e3b1d77dc5aa80805fdd5e7edb/68747470733a2f2f617765736f6d652e72652f6d656e74696f6e65642d62616467652e737667" alt="Mentioned in Awesome Go" data-canonical-src="https://awesome.re/mentioned-badge.svg"/></a></p>
<p dir="auto">Sqinn-Go is a Go (Golang) library for accessing SQLite databases in pure Go.
It uses Sqinn <a href="https://github.com/cvilsmeier/sqinn">https://github.com/cvilsmeier/sqinn</a> under the hood.
It starts Sqinn as a child process (<code>os/exec</code>) and communicates with
Sqinn over stdin/stdout/stderr. The Sqinn child process then does the SQLite
work.</p>
<p dir="auto">If you want SQLite but do not want cgo, Sqinn-Go can be a solution.</p>
<h2 tabindex="-1" id="user-content-usage" dir="auto"><a href="#usage">Usage<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<div data-snippet-clipboard-copy-content="$ go get -u github.com/cvilsmeier/sqinn-go/sqinn"><pre><code>$ go get -u github.com/cvilsmeier/sqinn-go/sqinn
</code></pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="import &#34;github.com/cvilsmeier/sqinn-go/sqinn&#34;

// Simple sqinn-go usage. Error handling is left out for brevity.
func main() {

	// Launch sqinn. Terminate at program exit.
	sq, _ := sqinn.Launch(sqinn.Options{})
	defer sq.Terminate()

	// Open database. Close when we&#39;re done.
	sq.Open(&#34;./users.db&#34;)
	defer sq.Close()

	// Create a table.
	sq.ExecOne(&#34;CREATE TABLE users (id INTEGER PRIMARY KEY NOT NULL, name VARCHAR)&#34;)

	// Insert users.
	sq.ExecOne(&#34;INSERT INTO users (id, name) VALUES (1, &#39;Alice&#39;)&#34;)
	sq.ExecOne(&#34;INSERT INTO users (id, name) VALUES (2, &#39;Bob&#39;)&#34;)

	// Query users.
	rows, _ := sq.Query(&#34;SELECT id, name FROM users ORDER BY id&#34;, nil, []byte{sqinn.ValInt, sqinn.ValText})
	for _, row := range rows {
		fmt.Printf(&#34;id=%d, name=%s\n&#34;, row.Values[0].AsInt(), row.Values[1].AsString())
	}

	// Output:
	// id=1, name=Alice
	// id=2, name=Bob
}"><pre><span>import</span> <span>&#34;github.com/cvilsmeier/sqinn-go/sqinn&#34;</span>

<span>// Simple sqinn-go usage. Error handling is left out for brevity.</span>
<span>func</span> <span>main</span>() {

	<span>// Launch sqinn. Terminate at program exit.</span>
	<span>sq</span>, <span>_</span> <span>:=</span> <span>sqinn</span>.<span>Launch</span>(sqinn.<span>Options</span>{})
	<span>defer</span> <span>sq</span>.<span>Terminate</span>()

	<span>// Open database. Close when we&#39;re done.</span>
	<span>sq</span>.<span>Open</span>(<span>&#34;./users.db&#34;</span>)
	<span>defer</span> <span>sq</span>.<span>Close</span>()

	<span>// Create a table.</span>
	<span>sq</span>.<span>ExecOne</span>(<span>&#34;CREATE TABLE users (id INTEGER PRIMARY KEY NOT NULL, name VARCHAR)&#34;</span>)

	<span>// Insert users.</span>
	<span>sq</span>.<span>ExecOne</span>(<span>&#34;INSERT INTO users (id, name) VALUES (1, &#39;Alice&#39;)&#34;</span>)
	<span>sq</span>.<span>ExecOne</span>(<span>&#34;INSERT INTO users (id, name) VALUES (2, &#39;Bob&#39;)&#34;</span>)

	<span>// Query users.</span>
	<span>rows</span>, <span>_</span> <span>:=</span> <span>sq</span>.<span>Query</span>(<span>&#34;SELECT id, name FROM users ORDER BY id&#34;</span>, <span>nil</span>, []<span>byte</span>{<span>sqinn</span>.<span>ValInt</span>, <span>sqinn</span>.<span>ValText</span>})
	<span>for</span> <span>_</span>, <span>row</span> <span>:=</span> <span>range</span> <span>rows</span> {
		<span>fmt</span>.<span>Printf</span>(<span>&#34;id=%d, name=%s<span>\n</span>&#34;</span>, <span>row</span>.<span>Values</span>[<span>0</span>].<span>AsInt</span>(), <span>row</span>.<span>Values</span>[<span>1</span>].<span>AsString</span>())
	}

	<span>// Output:</span>
	<span>// id=1, name=Alice</span>
	<span>// id=2, name=Bob</span>
}</pre></div>
<p dir="auto">Before running that program, Sqinn must be installed on your system. The
most convenient way is to download a pre-built executable from
<a href="https://github.com/cvilsmeier/sqinn/releases">https://github.com/cvilsmeier/sqinn/releases</a> and put it somewhere on
your <code>$PATH</code>, or <code>%PATH%</code> on Windows.</p>
<p dir="auto">If you want to store the Sqinn binary in a non-PATH folder, you must
specify it when opening a Sqinn connection:</p>
<div dir="auto" data-snippet-clipboard-copy-content="    // take from environment...
    sq, _ := sqinn.New(sqinn.Options{
        SqinnPath: os.Getenv(&#34;SQINN_PATH&#34;),
    })

    // ...or set path directly
    sq, _ := sqinn.New(sqinn.Options{
        SqinnPath: &#34;/path/to/sqinn&#34;,
    })"><pre>    <span>// take from environment...</span>
    <span>sq</span>, <span>_</span> <span>:=</span> <span>sqinn</span>.<span>New</span>(sqinn.<span>Options</span>{
        <span>SqinnPath</span>: <span>os</span>.<span>Getenv</span>(<span>&#34;SQINN_PATH&#34;</span>),
    })

    <span>// ...or set path directly</span>
    <span>sq</span>, <span>_</span> <span>:=</span> <span>sqinn</span>.<span>New</span>(sqinn.<span>Options</span>{
        <span>SqinnPath</span>: <span>&#34;/path/to/sqinn&#34;</span>,
    })</pre></div>
<p dir="auto">If do not want to use a pre-built Sqinn binary, you can compile Sqinn
yourself. See <a href="https://github.com/cvilsmeier/sqinn">https://github.com/cvilsmeier/sqinn</a> for instructions.</p>
<p dir="auto">For more usage examples, see file <code>sqinn/sqinn_examples_test.go</code>.</p>
<h2 tabindex="-1" id="user-content-pros-and-cons" dir="auto"><a href="#pros-and-cons">Pros and Cons<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<h3 tabindex="-1" id="user-content-advantages" dir="auto"><a href="#advantages">Advantages<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<ul dir="auto">
<li>No need to have gcc installed on development machines.</li>
<li>Go cross compilation works.</li>
<li>Faster build speed than cgo (1s vs 3s for sample program).</li>
<li>Smaller binary size than cgo (2MB vs 10MB for sample program).</li>
</ul>
<h3 tabindex="-1" id="user-content-disadvantages" dir="auto"><a href="#disadvantages">Disadvantages<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<ul dir="auto">
<li>No built-in connection pooling.</li>
<li>Sqinn-Go is not a Golang <code>database/sql</code> Driver.</li>
<li>Sqinn covers only a subset of SQLite&#39;s C APIs.</li>
</ul>
<h2 tabindex="-1" id="user-content-performance" dir="auto"><a href="#performance">Performance<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<p dir="auto">Performance tests show that Sqinn-Go performance is comparable to cgo
solutions, depending on the use case.</p>
<p dir="auto">For benchmarks I used <code>github.com/mattn/go-sqlite3</code> and <code>crawshaw.io/sqlite</code>.
Numbers are given in milliseconds, lower numbers are better.</p>
<div data-snippet-clipboard-copy-content="                   mattn  crawshaw     sqinn
simple/insert       2901      2140      1563
simple/query        2239      1287      1390
complex/insert      2066      1817      1683
complex/query       1458      1129      1338
many/N=10             97        78       134
many/N=100           246       194       276
many/N=1000         1797      1240      1436
large/N=2000         119        87       341
large/N=4000         361       322       760
large/N=8000         701       650      1531
concurrent/N=2      1332       865       951    
concurrent/N=4      1505       989      1207    
concurrent/N=8      2347      1557      2044     "><pre><code>                   mattn  crawshaw     sqinn
simple/insert       2901      2140      1563
simple/query        2239      1287      1390
complex/insert      2066      1817      1683
complex/query       1458      1129      1338
many/N=10             97        78       134
many/N=100           246       194       276
many/N=1000         1797      1240      1436
large/N=2000         119        87       341
large/N=4000         361       322       760
large/N=8000         701       650      1531
concurrent/N=2      1332       865       951    
concurrent/N=4      1505       989      1207    
concurrent/N=8      2347      1557      2044     
</code></pre></div>
<p dir="auto">See <a href="https://github.com/cvilsmeier/sqinn-go-bench">https://github.com/cvilsmeier/sqinn-go-bench</a> for details.</p>
<h2 tabindex="-1" id="user-content-testing" dir="auto"><a href="#testing">Testing<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<p dir="auto">Sqinn-Go comes with a large set of automated unit tests. Follow these steps to
execute all tests on linux_amd64:</p>
<p dir="auto">Download and Install Sqinn</p>
<div data-snippet-clipboard-copy-content="$ cd $HOME
$ curl -sL https://github.com/cvilsmeier/sqinn/releases/download/v1.1.6/sqinn-dist-1.1.6.tar.gz | tar xz
$ export SQINN_PATH=$HOME/sqinn-dist-1.1.6/linux_amd64/sqinn"><pre><code>$ cd $HOME
$ curl -sL https://github.com/cvilsmeier/sqinn/releases/download/v1.1.6/sqinn-dist-1.1.6.tar.gz | tar xz
$ export SQINN_PATH=$HOME/sqinn-dist-1.1.6/linux_amd64/sqinn
</code></pre></div>
<p dir="auto">Get and test Sqinn-Go</p>
<div data-snippet-clipboard-copy-content="$ go get -v -u github.com/cvilsmeier/sqinn-go/sqinn
$ go test github.com/cvilsmeier/sqinn-go/sqinn"><pre><code>$ go get -v -u github.com/cvilsmeier/sqinn-go/sqinn
$ go test github.com/cvilsmeier/sqinn-go/sqinn
</code></pre></div>
<p dir="auto">Check test coverage</p>
<div data-snippet-clipboard-copy-content="$ go test github.com/cvilsmeier/sqinn-go/sqinn -coverprofile=./cover.out
$ go tool cover -func=./cover.out
$ go tool cover -html=./cover.out"><pre><code>$ go test github.com/cvilsmeier/sqinn-go/sqinn -coverprofile=./cover.out
$ go tool cover -func=./cover.out
$ go tool cover -html=./cover.out
</code></pre></div>
<p dir="auto">Test coverage is ~85% (as of 2021-03-27)</p>
<h2 tabindex="-1" id="user-content-discussion" dir="auto"><a href="#discussion">Discussion<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<h3 tabindex="-1" id="user-content-pure-go-almost" dir="auto"><a href="#pure-go-almost">Pure Go, almost<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">Sqinn-Go is pure Go, as it does not use cgo, nor does it depend on third-party
cgo packages. However, Sqinn-Go has a runtime dependency on Sqinn, which is a
program written in C. Sqinn has to be installed separately on each machine
where a Sqinn-Go application is executing. For this to work, Sqinn has to be
compiled for every target platform. As an alternative, pre-built Sqinn binaries
for common platforms can be downloaded from the Sqinn releases page
<a href="https://github.com/cvilsmeier/sqinn/releases">https://github.com/cvilsmeier/sqinn/releases</a>.</p>
<h3 tabindex="-1" id="user-content-no-databasesql-driver" dir="auto"><a href="#no-databasesql-driver">No database/sql driver<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">Database/sql is Go&#39;s default abstraction layer for SQL databases. It is widely
used and there are many third-party packages built on top of it. Sqinn-Go does
not implement the database/sql interfaces. The reason is that the sql package
provides low-level function calls to prepare statements, bind parameters, fetch
column values, and so on. Sqinn could do that, too. But, since for every
function call, Sqinn-Go has to make a inter-process communication
request/response roundtrip to a sqinn child process, this would be very slow.
Instead, Sqinn-Go provides higher-level Exec/Query interfaces that should be
used in favor of low-level fine-grained functions.</p>
<h3 tabindex="-1" id="user-content-concurrency" dir="auto"><a href="#concurrency">Concurrency<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">Sqinn/Sqinn-Go performs well in non-concurrent as well as concurrent settings,
as shown in the Performance section. However, a single Sqinn instance
should only be called from one goroutine. Exceptions are the Exec and Query
methods, these are mutex&#39;ed and goroutine safe. But, since Sqinn is inherently
single-threaded, Exec and Query requests are served one-after-another.</p>
<p dir="auto">If you want true concurrency at the database level, you can spin up multiple
Sqinn instances. You may even implement a connection pool. But be aware that
when accessing a SQLite database concurrently, the dreaded SQLITE_BUSY error
might occur. The PRAGMA busy_timeout might help to avoid SQLITE_BUSY errors.</p>
<p dir="auto">We recommend the following: Have one Sqinn instance. You may call Exec/Query on
that single Sqinn instance from as many goroutines as you want. For
long-running tasks (VACUUM, BACKUP, etc), spin up a second Sqinn instance on
demand, and terminate it once the long-running work is done. Use PRAGMA
busy_timeout to avoid SQLITE_BUSY.</p>
<h3 tabindex="-1" id="user-content-only-one-active-statement-at-a-time" dir="auto"><a href="#only-one-active-statement-at-a-time">Only one active statement at a time<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">A Sqinn instance allows only one active statement at a time. A statement is
<em>active</em> from the time it is prepared until it is finalized.  Before preparing
a new statement, you have to finalize the current statement first, otherwise
Sqinn will respond with an error.</p>
<p dir="auto">This is why we recommend using Exec/Query: These methods do a complete
prepare-finalize cycle and the caller can be sure that, once Exec/Query
returns, no active statements are hanging around.</p>
<h2 tabindex="-1" id="user-content-changelog" dir="auto"><a href="#changelog">Changelog<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<h3 tabindex="-1" id="user-content-v112-2021-05-27" dir="auto"><a href="#v112-2021-05-27">v1.1.2 (2021-05-27)<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<ul dir="auto">
<li>Fixed negative int32 marshalling</li>
</ul>
<h3 tabindex="-1" id="user-content-v111-2021-03-27" dir="auto"><a href="#v111-2021-03-27">v1.1.1 (2021-03-27)<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<ul dir="auto">
<li>Added more docs for Values</li>
<li>Added example for handling NULL values</li>
<li>Added example for sqlite specialties</li>
</ul>
<h3 tabindex="-1" id="user-content-v110-2020-06-14" dir="auto"><a href="#v110-2020-06-14">v1.1.0 (2020-06-14)<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<ul dir="auto">
<li>Use IEEE 745 encoding for float64 values, needs sqinn v1.1.0 or higher.</li>
</ul>
<h3 tabindex="-1" id="user-content-v100-2020-06-10" dir="auto"><a href="#v100-2020-06-10">v1.0.0 (2020-06-10)<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<ul dir="auto">
<li>First version.</li>
</ul>
<h2 tabindex="-1" id="user-content-license" dir="auto"><a href="#license">License<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<p dir="auto">This is free and unencumbered software released into the public domain.</p>
<p dir="auto">Anyone is free to copy, modify, publish, use, compile, sell, or distribute this
software, either in source code form or as a compiled binary, for any purpose,
commercial or non-commercial, and by any means.</p>
<p dir="auto">In jurisdictions that recognize copyright laws, the author or authors of this
software dedicate any and all copyright interest in the software to the public
domain. We make this dedication for the benefit of the public at large and to
the detriment of our heirs and successors. We intend this dedication to be an
overt act of relinquishment in perpetuity of all present and future rights to
this software under copyright law.</p>
<p dir="auto">THE SOFTWARE IS PROVIDED &#34;AS IS&#34;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<p dir="auto">For more information, please refer to <a href="https://unlicense.org" rel="nofollow">https://unlicense.org</a></p>
</article>
          </div></div>
  </body>
</html>
