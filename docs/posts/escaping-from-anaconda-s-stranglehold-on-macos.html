<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://paulromer.net/escaping-from-anaconda/">Original</a>
    <h1>Escaping from Anaconda&#39;s Stranglehold on macOS</h1>
    
    <div id="readability-page-1" class="page"><div>
    <p>If you teach a course that requires Python, you’ve encountered students on macOS who are trapped by Anaconda. Typically, they were told to install Anaconda in a first course on Python or data analytics. After that course is over, they discover that they can’t get an official version of Python to run.</p>
<p>Many of these students have not used the command line. Many do not understand the difference between a text editor and a word processor. If they ask ChatGPT for help, it responds with instructions that they do not understand and that wouldn’t work anyway. In my experience, most give up.</p>
<p>This post gives them a simple way to recover the ability to run an official version of Python. It requires neither commands from the terminal nor edits to files. All that’s required is to drag and drop a file.</p>
<p>Students who are trapped by Anaconda are not interested in the arcane details of shells and profiles. And for good reason. They have other things to learn first. With them in mind, I offer detailed instructions and don’t explain.</p>

<video controls="" preload="metadata">
  <source src="images/home.mp4" type="video/mp4"/>
  <source src="images/home.webm" type="video/webm"/>
  <p>Your browser doesn&#39;t seem to support HTML5 video. So here is
    a <a href="https://paulromer.net/escaping-from-anaconda/images/home.mp4">link to an MP4 version of the video</a> that you can download and and watch using your own video player.</p>
</video>
<h2 id="2-click-on-the-column-heading-name-to-make-the--symbol-point-up">2. Click on the Column Heading “Name” to Make the ^ Symbol Point Up</h2>
<video controls="" preload="metadata">
  <source src="images/sort_alpha.mp4" type="video/mp4"/>
  <source src="images/sort_alpha.webm" type="video/webm"/>
  <p>Your browser doesn&#39;t seem to support HTML5 video. So here is
    a <a href="https://paulromer.net/escaping-from-anaconda/images/sort_alpha.mp4">link to an MP4 version of the video</a> that you can download and and watch using your own video player.</p>
</video>
<p>When this symbol points up, the file you need to find will be close to the top.</p>
<h2 id="3-press-shift-command-">3. Press <code>Shift, Command, .</code></h2>
<p>Click into the Finder window that shows the Home folder. Press these three keys at the same time: <code>Shift, Command, .</code></p>
<p><img src="https://paulromer.net/escaping-from-anaconda/images/keyboard.png"/>
</p>
<p>Files and folders with names that start with a period are hidden by default. Pressing these three keys toggles on and off the option to display them.</p>
<video controls="" preload="metadata">
  <source src="images/hide_show.mp4" type="video/mp4"/>
  <source src="images/hide_show.webm" type="video/webm"/>
  <p>Your browser doesn&#39;t seem to support HTML5 video. So here is
    a <a href="https://paulromer.net/escaping-from-anaconda/images/hide_show.mp4">link to an MP4 version of the video</a> that you can download and and watch using your own video player.</p>
</video>
<h2 id="4-locate-the-file-named-zshrc">4. Locate the File Named <code>.zshrc</code></h2>
<p>Finder uses a gray typeface to display names that start with a period. If this makes it hard for you to read the filenames, there are two ways to make the text bigger, hence easier to read:</p>
<p>a) In a Finder window, press all three keys: <code>Command, Shift, +</code>. (To undo this change, press <code>Command, Shift, -</code>.</p>
<p>b) Click on the Apple icon in the upper left corner of your screen; select <code>System Settings</code>; into the search box type “Display”; then select an option that increases the size of the display size for text.</p>
<p>With big text, here is the default Finder display when for the Home folder for someone named Sarah Jones:</p>
<p><img src="https://paulromer.net/escaping-from-anaconda/images/hidden.png"/>
</p>
<p>Here is what it looks like after pressing the three keys that turn on the display option for hidden files and folders:</p>
<p><img src="https://paulromer.net/escaping-from-anaconda/images/not_hidden.png"/>
</p>
<p>You may not have a folder called <code>anaconda3</code>. That’s ok. All that matters is that you see a file named <code>.zshrc</code>. If you don’t, skip to the Troubleshooting section at the end.</p>
<h2 id="5-drag-zshrc-to-your-desktop">5. Drag <code>.zshrc</code> To Your Desktop</h2>
<p>In Finder, you can drag a file to a new location by placing your cursor over the name of the file, pressing down on your mouse or trackpad and holding the press as you move the cursor over a new location, then lifting your finger to drop the file.</p>
<p>The video below shows several ways to move the file back and forth between the Home folder and the Desktop.</p>
<video controls="" preload="metadata">
  <source src="images/drag_drop.mp4" type="video/mp4"/>
  <source src="images/drag_drop.webm" type="video/webm"/>
  <p>Your browser doesn&#39;t seem to support HTML5 video. So here is
    a <a href="https://paulromer.net/escaping-from-anaconda/images/drag_drop.mp4">link to an MP4 version of the video</a> that you can download and and watch using your own video player.</p>
</video>
<h2 id="6-thats-it">6. That’s It</h2>
<p>If you haven’t already done so, download and run an installer from <a href="https://python.org/downloads" target="_blank" rel="noreferrer"></a><a href="https://python.org/downloads">https://python.org/downloads</a>. See the section “Managing Official Python on macOS” for some tips.</p>
<p>If the <code>.zshrc</code> file is not in your home folder, the code that Anaconda uses to take over your computer will not run, so any official Python will work as advertised.</p>
<h2 id="7-switching-back">7. Switching Back</h2>
<p>Suppose you are taking one course where you have to use the official version of Python (and its package manager, <code>pip</code>), and a second course which requires that you use the Anaconda distribution (and its package manager, <code>conda</code>). What can you do?</p>
<p>Just drag the <code>.zshrc</code> file back and forth between your home directory and the <code>Desktop</code> where you hide it.</p>
<ul>
<li>
<p>When <code>.zshrc</code> is in your home folder, you can start the Anaconda version of Python.</p>
</li>
<li>
<p>When you hide <code>.zshrc</code> on your <code>Desktop</code>, you can start an official version of Python.</p>
</li>
</ul>
<h2 id="8-can-you-use-both-at-the-same-time">8. Can You Use Both at the Same Time?</h2>
<p>Yes.</p>
<p>You don’t need to shut down a running version of official Python to start a new session with the Anaconda version, or vice versa.</p>
<p>All that matters is the location of the <code>.zshrc</code> file when you start a Python session. Moving the file has no effect on a session that is already running.</p>
<h2 id="9-will-you-keep-using-both">9. Will You Keep Using Both?</h2>
<p>Probably not.</p>
<p>When I started learning Python in 2019, I followed the conventional wisdom and installed Anaconda on my MacBook. I soon discovered that this was a mistake. Anaconda may have advantages for some users in some circumstances, but it just got in the way when I was trying to learn.</p>
<p>Once I got official versions of Python running, I stopped using Anaconda and never went back.</p>
<h2 id="10-what-changes-when-you-are-free">10. What Changes When You Are Free</h2>
<p>For the target readers of this post, here is what changes when you break free of Anaconda:</p>
<ul>
<li>
<p>You can install and run several versions of Python.</p>
<p>Compared to Anaconda, Python versions install quickly. Try several.</p>
</li>
<li>
<p>You can always return to a clean, known state.</p>
<p>It is easy to delete any version of Python and reinstall. This frees you to experiment.</p>
</li>
<li>
<p>For each project, you can create a single <code>requirements.txt</code> file that lists all the libraries it uses.</p>
<p>After you start fresh, you can use a single <code>pip</code> command to install all the libraries listed in one of these files.</p>
</li>
<li>
<p>You will not be forced to work inside something known as a “virtual environment.”</p>
<p>There is a lot to learn when you are getting started. Try out virtual environments later, when you are ready. If you do not know how to</p>
<ul>
<li>edit a file,</li>
<li>run a command from the terminal, and</li>
<li>have pip install libraries from a <code>requirements.txt</code> file,</li>
</ul>
<p>you are not ready.</p>
</li>
</ul>
<hr/>
<details>
<summary>Managing Official Python on macOS</summary>
<h2 id="a-installing">a) Installing</h2>
<p>Always download versions marked as “macOS 64-bit universal2 installer.”</p>
<p>At the end, of the installation process, always double-click to run these two commands:</p>
<ul>
<li><code>Update Shell Profile.command</code></li>
<li><code>Install Certificates.command</code></li>
</ul>
<video controls="" preload="metadata">
  <source src="images/commands.mp4" type="video/mp4"/>
  <source src="images/commands.webm" type="video/webm"/>
  <p>Your browser doesn&#39;t seem to support HTML5 video. So here is
    a <a href="https://paulromer.net/escaping-from-anaconda/images/commands.mp4">link to an MP4 version of the video</a> that you can download and and watch using your own video player.</p>
</video>
<h2 id="b-viewing">b) Viewing</h2>
<p>Drag the <code>Python.framework</code> folder to the Finder Sidebar. This makes it easy to see the versions of Python that you have installed.</p>
<video controls="" preload="metadata">
  <source src="images/python_framework.mp4" type="video/mp4"/>
  <source src="images/python_framework.webm" type="video/webm"/>
  <p>Your browser doesn&#39;t seem to support HTML5 video. So here is
    a <a href="https://paulromer.net/escaping-from-anaconda/images/python_framework.mp4">link to an MP4 version of the video</a> that you can download and and watch using your own video player.</p>
</video>
<h2 id="c-deleting">c) Deleting</h2>
<p>When you want to delete a version of Python, select a version from the Finder display of the <code>Python.framework</code> folder. For example, the folder named <code>3.10</code> is a version. Press <code>Command + Delete</code> and authenticate by entering your password or using biometrics.</p>
<h2 id="d-starting-fresh">d) Starting Fresh</h2>
<p>python3.11 and python3.12 are examples of major versions.</p>
<p>python3.12.4 and python3.12.5 are minor versions.</p>
<p>To be sure to start over from a clean slate, delete a major version of Python, then reinstall it. Delete first even if you are updating to a new minor version. For example, if you have python3.12.4 installed, delete the <code>3.12</code> folder then install python3.12.5.</p>
</details>
<hr/>
<details>
  <summary>Troubleshooting the Fix </summary>
<p>Here are some reasons why you might not be able to use the fix that involves dragging the <code>.zshrc</code> file to your desktop, together with some suggestions about what you might do instead.</p>
<h2 id="a-no-zshrc-file-because-your-software-is-out-of-date">A. No <code>.zshrc</code> file because your software is out of date</h2>
<p>One reason why you might not have a <code>.zshrc</code> file is because your version of Anaconda and macOS are out of date.
In 2019, the terminal for macOS switched to a shell program called <code>zsh</code>. Prior to that, it used <code>bash</code> and injected the code it uses to take over your computer into a file called <code>.bash-profile</code>.</p>
<ul>
<li>
<p>Use the three-key-combination to display any hidden files in your Home folder. If your software is years out of date, you may find a file called <code>.bash_profile</code> in your Home folder. You could try moving it to another folder, but doing so might break other programs that you have installed.</p>
</li>
<li>
<p>A better solution is to use the program called <code>TextEdit</code> that comes with macOS to examine and edit this file. To open <code>.bash_profile</code> using <code>TextEdit</code>, in Finder, right-click on the name of the file, then select the “Open With” option. Before you make any changes, save a backup copy of the file.</p>
<p>The image below shows the code that Anaconda injected into <code>.bash-profile</code> back in 2019. Notice that the Anaconda code is delimited by lines that contain <code>&gt;&gt;&gt; conda</code> and <code>&lt;&lt;&lt; conda</code>. Look for code like this in <code>.bash-profile</code>. Delete the lines between any such delimiters. Because lines that start with the character <code>#</code> are comments, it is harmless to leave them. Leave any other code and save the file where it is, in your Home folder. This may break Anaconda, but it will let the official version of Python run.</p>
</li>
</ul>
<p><img src="https://paulromer.net/escaping-from-anaconda/images/.bash-profile.png"/>
</p>
<ul>
<li>
<p>The best approach is to update your version of macOS. If you are given the option to “Upgrade Your Shell to zsh”, you should agree. If you are told that <code>zsh</code> is your new default shell, that’s a good sign. This might be enough. Try to run an official version of Python.</p>
</li>
<li>
<p>If, after updating macOS, an official Python runs but Anaconda is broken, you could try doing without Anaconda. If you decide that you want to fix Anaconda, you should update the version you have or install a new version. Then you will have a <code>.zshrc</code> file in your home folder. It will have the that Anaconda injects to take over your computer. You can now follow the instructions from above to turn Anaconda on and off by moving this file.</p>
</li>
</ul>
<h2 id="b-no-zshrc-file-because-you-intentionally-kept-the-bash-shell">B. No <code>.zshrc</code> file because you intentionally kept the <code>bash</code> shell</h2>
<p>Dragging the <code>.zshrc</code> file out of your home folder will work only if <code>zsh</code> is the shell for macOS. It has been the default shell since 2019. If, after 5 years, you are still procrastinating about switching to <code>zsh</code>, your version of macOS is probably out of date. If you care about security, you should update macOS.</p>
<p>Then, if macOS is up-to-date, and you still want to rely on its out-of-date version of <code>bash</code>, follow the instructions from part A of Troubleshooting for editing <code>.bash-profile</code>.</p>
<p>If you are a sophisticated user who prefers some other shell to <code>zsh</code>, should be able to figure out how to adjust these instructions to work with your preferred shell.</p>
<h2 id="c-some-other-program-has-added-commands-to-zshrc">C. Some other program has added commands to <code>.zshrc</code></h2>
<p>Most programs you install do not write to the <code>.zshrc</code> file. Besides Anaconda, the one type of program that is likely to put code there is a plugin that customizes the <code>zsh</code> shell. If, after moving the <code>.zshrc</code> file, you discover that some other program no longer works, you should use <code>TextEdit</code> to examine <code>.zshrc</code>. Make a backup copy. If there is code there that you want to run, edit the <code>.zshrc</code> file to remove the lines from Anaconda. Save the file to your home folder. Restore the lines from Anaconda if you want to enable it again.</p>
<h2 id="d-you-have-added-your-own-commands-to-zshrc">D. You have added your own commands to <code>.zshrc</code></h2>
<p>The reason to move <code>.zshrc</code> is to keep commands that Anaconda puts there from running automatically. If you put commands that you want to run automatically into this file, you can use <code>TextEdit</code> or any other text editor to edit the file to remove the lines added by Anaconda but keep the lines you want to run. Save the file in its current location. Restore the deleted lines if you want to enable Anaconda again.</p>
</details>
  </div></div>
  </body>
</html>
