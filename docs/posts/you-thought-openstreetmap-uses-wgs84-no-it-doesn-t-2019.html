<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.openstreetmap.org/user/StephaneP/diary/390290">Original</a>
    <h1>You thought OpenStreetMap uses WGS84? No it doesn&#39;t (2019)</h1>
    
    <div id="readability-page-1" class="page"><div xml:lang="en" lang="en">
    <h2 id="more-precisely-the-wgs84-datum-is-not-used-everywhere">More precisely, the WGS84 Datum is not used everywhere.</h2>

<p>Here is some background:</p>

<ul>
  <li>
    <p>The <a href="https://en.wikipedia.org/wiki/World_Geodetic_System" rel="nofollow noopener noreferrer">WGS84</a> Coordinate Reference System uses an ITRF datum, locked with the Earth’s rotation.</p>
  </li>
  <li>
    <p>The tectonic plates we’re living on, are moving, up to 70 to 80 mm/year for the Australian plate, 20 to 25 mm/year for the Eurasian one.</p>
  </li>
  <li>
    <p>The tectonic plates have internal distortions (we do ignore them here)</p>
  </li>
</ul>

<p>If you have a very accurate GNSS receiver which shows you WGS84 coordinates, and place it on a survey mark, because this mark moves, you won’t get the same coordinates year after year. If you surveyed a mark in Australia 13 years ago, today’s coordinates are 1 meter off. So, accurate WGS84 coordinates are not accurate at all if you don’t know the epoch, just as a time value is unuseful if you don’t know the time zone.
Working with dynamic coordinates would be a nightmare for the surveyors. To make their life easier they use a datum associated with their continental plate, locked at a point in time. And for a few decades now, many countries have chosen an ITRF datum and “locked” it at a specific date. With such a datum, the coordinates of survey marks remain the same over the years.</p>

<ul>
  <li>
    <p>USA is using <a href="https://en.wikipedia.org/wiki/North_American_Datum" rel="nofollow noopener noreferrer">NAD83</a></p>
  </li>
  <li>
    <p>Australian is using <a href="https://en.wikipedia.org/wiki/Geocentric_Datum_of_Australia_1994" rel="nofollow noopener noreferrer">GDA94</a> (ITRS epoch 1994.0)</p>
  </li>
  <li>
    <p>Europe is using <a href="https://en.wikipedia.org/wiki/European_Terrestrial_Reference_System_1989" rel="nofollow noopener noreferrer">ETRS89</a> (ITRS epoch 1993.0)</p>
  </li>
  <li>
    <p>France (in europe) is using <a href="https://fr.wikipedia.org/wiki/R%C3%A9seau_g%C3%A9od%C3%A9sique_fran%C3%A7ais" rel="nofollow noopener noreferrer">RGF93</a>, a more accurate ETRS89 realization. We consider that RGF93 = ETRS89.</p>
  </li>
</ul>

<h2 id="you-could-object-this-is-not-an-osm-problem--we-use-gpx-trace-aerial-imagery-opendata-sets-all-with-wgs84-coordinates">You could object this is not an OSM problem : we use gpx trace, aerial imagery, opendata sets, all with WGS84 coordinates!</h2>

<ul>
  <li>
    <p>At first, don’t forget that a WGS84 datum without epoch can’t be accurate at a submeter level.</p>
  </li>
  <li>
    <p>Secondly, if you use a standard GNSS receiver, it doesn’t matter, as your accuracy is too low (3 to 5 meters). If you use RTK, like I <a href="https://www.openstreetmap.org/user/StephaneP/diary/368656" rel="nofollow noopener noreferrer">do</a>, your datum is the one used by the base station, and it’s usually plated-fixed.</p>
  </li>
  <li>
    <p>Thirdly, if your aerial imagery has a low resolution like 50cm/pixel, it will be very difficult to see small details.</p>
  </li>
</ul>

<p>However, we have more and more high-res imagery. In some places, you can see some survey marks and check the coordinates. Let’s go to Australia, next to the Mount Stromlo Observatory. This <a href="https://www.openstreetmap.org/node/6514708097" rel="nofollow noopener noreferrer">node</a> is a GNSS antenna, part of the <a href="http://www.igs.org/about" rel="nofollow noopener noreferrer">IGS</a> network.
You can go to the <a href="http://www.ga.gov.au/ngrs/gnss/ngcp_station_details_from_map.jsp?stationId=43304&amp;oheightno=0&amp;coordId=61778&amp;datum=GDA94&amp;isPopup=yes" rel="nofollow noopener noreferrer">Geoscience Australia website</a>  to find the GDA94 coordinates of this antenna and enter them in JOSM with the “Lat Lon Tool”.
Then, if you switch between the 3 good imagery (ACTmapi Imagery 2017, ACTmapi Imagery 2018, LPI Nsw Imagery), you will see that the antenna, the node with the GDA94 coordinates, and the 3 imagery layers, are aligned:
<img src="http://www.stemani.fr/public/Osm/stromlo.jpg" alt="Stromlo GNSS Antenna (GDA94 coordinates)"/></p>

<p>Ok, but what are the WGS84/IRTF coordinates for this antenna? Luckily, you can download the data from this <a href="ftp://cddis.nasa.gov/gnss/data/daily/" rel="nofollow noopener noreferrer">GNSS station</a> and process them with a <a href="https://en.wikipedia.org/wiki/Precise_Point_Positioning" rel="nofollow noopener noreferrer">PPP</a> software. The Australian online <a href="http://www.ga.gov.au/bin/gps.pl" rel="nofollow noopener noreferrer">AUSPOS</a> service gives you the PPP results with GDA94, GDA2020 and IRTF (@epoch data) coordinates. Here are the locations, more than 1.5m to north-east:
!! <img src="http://www.stemani.fr/public/Osm/stromlo_irtf14_gda94.jpg" alt="Stromlo GNSS Antenna (GDA94, GDA2020, IRTF coordinates)"/></p>

<p>The conclusion is that these imageries are not using an IRTF datum, but the local one: GDA94. Therefore <strong>any OSM data created using these layers are not in WGS84</strong>.</p>

<p>Now let’s go to France, to this node : <a href="https://www.openstreetmap.org/node/670517301" rel="nofollow noopener noreferrer">https://www.openstreetmap.org/node/670517301</a></p>

<p>This is a survey mark with coordinates using <a href="http://geodesie.ign.fr/fiches/index.php?module=e&amp;action=fichepdf&amp;source=carte&amp;sit_no=6904601" rel="nofollow noopener noreferrer">RGF93 datum</a> and the accuracy is better than 10cm.
<img src="http://www.stemani.fr/public/Osm/charly.jpg" alt="survey_point near Charly"/>
The alignment is good. We can say that this imagery layer use RGF93, not WGS84, or we would have seen a 70 to 80 cm offset. I’ve checked check some other survey marks in the country…all aerial imagery are RGF93/ETRS89.</p>

<p>This is our first problem: <strong>Some OSM data are not using WGS84 coordinates ; the offset could be as high as 2 meters.</strong></p>

<p>Our second issue is: <strong>How do we guarantee a good accuracy over the years?</strong></p>

<p>Here are a couple of options.</p>

<ol>
  <li>We keep using local datums.
    <ul>
      <li>
        <p>This is simple, but we don’t want too many datums: perhaps we should select a single datum for each tectonic plate.</p>
      </li>
      <li>
        <p>Aerial imageries with the same local datum remain aligned.</p>
      </li>
      <li>
        <p>We should inform data consumers, so that they can decide to convert the coordinates to WGS84 if they want to.</p>
      </li>
      <li>
        <p>We will need to move a lot of data when a new datum replaces an old one (more on that later)</p>
      </li>
    </ul>
  </li>
  <li>We convert all data to an ITRF datum.
    <ul>
      <li>
        <p>We must convert data with local datum (Australia, France, …) to WGS84. This is not an easy task, but this is feasible with a <a href="https://www.unavco.org/software/geodetic-utilities/plate-motion-calculator/plate-motion-calculator.html#models" rel="nofollow noopener noreferrer">plate motion model</a>.</p>
      </li>
      <li>
        <p>The date a node is created in OSM doesn’t inform about the original epoch.</p>
      </li>
      <li>
        <p>Should we keep the old aerial imageries to their original location, or transform them to today’s location? It could be difficult for the editors (Josm, ID, …) to do this if there is a translation and a rotation.</p>
      </li>
      <li>
        <p>When you load data in an editor, it should check all nodes coordinates, find the epochs, and dynamicaly move them to the actual localization with an Helmert transformation. It would be the same problem if you want to reuse the data. Another way is to create a bot which moves all the nodes in the database regularly (twice a year?).</p>
      </li>
      <li>
        <p>Prone to errors</p>
      </li>
    </ul>
  </li>
</ol>

<p>Whatever the decision is, we should check what is the real datum of all high-res imagery. To do so we need more reference points that are visible on one or more imagery. These could be a survey mark on the ground with public and accurate coordinates, or a GNSS antenna on or near the ground (we can’t use an object on a roof) with observation data freely available. I’ve already started a list on the <a href="https://wiki.openstreetmap.org/wiki/Survey_points_on_aerial_imagery" rel="nofollow noopener noreferrer">wiki</a>, feel free to add more reference points. A new tag on these nodes would be useful.</p>

<p>Let’s go back to Australia: The Auspos service provides GNSS coordinates with 3 datums : GDA94, WGS84 and GDA2020. What is the last one? As you know, the Australian plate is moving pretty fast. In 2020 the offset between GDA94 and the real location will be more than 1.8 meters. They decided they will use a new datum from 2020: <a href="http://www.gda2020.com.au/" rel="nofollow noopener noreferrer">GDA2020</a>
It means that new high-res aerial imagery in this country will have a big offset relative to the old imagery.
They will use a dynamic reference frame too, but I’m not sure it will be used by the GIS world: <a href="https://icsm.gov.au/australian-terrestrial-reference-frame" rel="nofollow noopener noreferrer">ATRF</a></p>

<p>Another country will change its datum : the U.S.A., with the plate-fixed <a href="https://www.ngs.noaa.gov/datums/newdatums/index.shtml" rel="nofollow noopener noreferrer">NATRF2022</a>, in replacement of NAD83.</p>

<h2 id="summary">Summary:</h2>

<ul>
  <li>
    <p>On Earth, everything is moving, up to 80mm/year.</p>
  </li>
  <li>
    <p>A fix point on a tectonic plate will see its WGS84 coordinates changing over the years, but the same point have static coordinates with a plate-fixed local datum.</p>
  </li>
  <li>
    <p>WGS84 coordinates without epoch can’t be accurate.</p>
  </li>
  <li>
    <p>Contrary to what is stated, not all OSM data are using a WGS84 datum. In some country, the offset could be as high as 1.8 meters.</p>
  </li>
  <li>
    <p>Some aerial imagery are not using a WGS84 coordinate reference system, but a local datum.</p>
  </li>
  <li>
    <p>What should OSM do? Keep the dynamic WGS84 coordinates, or use some local datums as the surveyor’s world do?</p>
  </li>
</ul>

<p>Thank you to <a href="https://www.openstreetmap.org/user/naomap" rel="nofollow noopener noreferrer">naomap</a> for his help with the translation.</p>


  </div></div>
  </body>
</html>
