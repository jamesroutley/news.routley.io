<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/mrdoob/three.js/wiki/Three.js-Shading-Language">Original</a>
    <h1>Three.js Shading Language</h1>
    
    <div id="readability-page-1" class="page"><div data-view-component="true">          <div id="wiki-body">
              <div>
                <div><h2>Introduction</h2><a id="user-content-introduction" aria-label="Permalink: Introduction" href="#introduction"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div><h3>Why TSL?</h3><a id="user-content-why-tsl" aria-label="Permalink: Why TSL?" href="#why-tsl"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p>Creating shaders has always been an advanced step for most developers, many game creators have never created GLSL code from scratch. The shader graph solution adopted today by the industry has allowed developers more focused on dynamics to create the necessary graphic effects to meet the demands of their projects.</p>
<p>The aim of the project is to create an easy-to-use, even if for this we need to create complexity behind, this happened initially with <code>Renderer</code> and now with the <code>TSL</code>.</p>
<p>Other benefits that TSL brings besides simplifying shading creation is keeping the <code>renderer agnostic</code>, while all the complexity of a material can be imported into different modules and use <code>tree shaking</code> without breaking during the process.</p>
<div><h3>Example</h3><a id="user-content-example" aria-label="Permalink: Example" href="#example"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p>A <code>detail map</code> makes things look more real in games. It adds tiny details like cracks or bumps to surfaces, like walls. In this example we will scale uv to improve details when seen up close and multiply with a base texture.</p>
<div><h4>Old</h4><a id="user-content-old" aria-label="Permalink: Old" href="#old"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p>This is how we would achieve that using <code>.onBeforeCompile()</code>:</p>
<div data-snippet-clipboard-copy-content="const material = new THREE.MeshStandardMaterial();
material.map = colorMap;
material.onBeforeCompile = ( shader ) =&gt; {

	shader.uniforms.detailMap = { value: detailMap };

	let token = &#39;#define STANDARD&#39;;

	let insert = /* glsl */`
		uniform sampler2D detailMap;
	`;

	shader.fragmentShader = shader.fragmentShader.replace( token, token + insert );

	token = &#39;#include &lt;map_fragment&gt;&#39;;

	insert = /* glsl */`
		diffuseColor *= texture2D( detailMap, vMapUv * 10.0 );
	`;

	shader.fragmentShader = shader.fragmentShader.replace( token, token + insert );

};"><pre><span>const</span> <span>material</span> <span>=</span> <span>new</span> <span>THREE</span><span>.</span><span>MeshStandardMaterial</span><span>(</span><span>)</span><span>;</span>
<span>material</span><span>.</span><span>map</span> <span>=</span> <span>colorMap</span><span>;</span>
<span>material</span><span>.</span><span>onBeforeCompile</span> <span>=</span> <span>(</span> <span>shader</span> <span>)</span> <span>=&gt;</span> <span>{</span>

	<span>shader</span><span>.</span><span>uniforms</span><span>.</span><span>detailMap</span> <span>=</span> <span>{</span> <span>value</span>: <span>detailMap</span> <span>}</span><span>;</span>

	<span>let</span> <span>token</span> <span>=</span> <span>&#39;#define STANDARD&#39;</span><span>;</span>

	<span>let</span> <span>insert</span> <span>=</span> <span>/* glsl */</span><span>`</span>
<span>		uniform sampler2D detailMap;</span>
<span>	`</span><span>;</span>

	<span>shader</span><span>.</span><span>fragmentShader</span> <span>=</span> <span>shader</span><span>.</span><span>fragmentShader</span><span>.</span><span>replace</span><span>(</span> <span>token</span><span>,</span> <span>token</span> <span>+</span> <span>insert</span> <span>)</span><span>;</span>

	<span>token</span> <span>=</span> <span>&#39;#include &lt;map_fragment&gt;&#39;</span><span>;</span>

	<span>insert</span> <span>=</span> <span>/* glsl */</span><span>`</span>
<span>		diffuseColor *= texture2D( detailMap, vMapUv * 10.0 );</span>
<span>	`</span><span>;</span>

	<span>shader</span><span>.</span><span>fragmentShader</span> <span>=</span> <span>shader</span><span>.</span><span>fragmentShader</span><span>.</span><span>replace</span><span>(</span> <span>token</span><span>,</span> <span>token</span> <span>+</span> <span>insert</span> <span>)</span><span>;</span>

<span>}</span><span>;</span></pre></div>
<p>Any simple change from this makes the code increasingly complicated using <code>.onBeforeCompile</code>, the result we have today in the community is that we have countless types of parametric materials that do not communicate with each other, and that need to be updated periodically to be operating, limiting the creativity to create unique materials reusing modules in a simple way.</p>
<div><h4>New</h4><a id="user-content-new" aria-label="Permalink: New" href="#new"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p>With <code>TSL</code> the code would look like this:</p>
<div data-snippet-clipboard-copy-content="import { texture, uv } from &#39;three/tsl&#39;;

const detail = texture( detailMap, uv().mul( 10 ) );

const material = new MeshStandardNodeMaterial();
material.colorNode = texture( colorMap ).mul( detail );"><pre><span>import</span> <span>{</span> <span>texture</span><span>,</span> <span>uv</span> <span>}</span> <span>from</span> <span>&#39;three/tsl&#39;</span><span>;</span>

<span>const</span> <span>detail</span> <span>=</span> <span>texture</span><span>(</span> <span>detailMap</span><span>,</span> <span>uv</span><span>(</span><span>)</span><span>.</span><span>mul</span><span>(</span> <span>10</span> <span>)</span> <span>)</span><span>;</span>

<span>const</span> <span>material</span> <span>=</span> <span>new</span> <span>MeshStandardNodeMaterial</span><span>(</span><span>)</span><span>;</span>
<span>material</span><span>.</span><span>colorNode</span> <span>=</span> <span>texture</span><span>(</span> <span>colorMap</span> <span>)</span><span>.</span><span>mul</span><span>(</span> <span>detail</span> <span>)</span><span>;</span></pre></div>
<p><code>TSL</code> is also capable of encoding code into different outputs such as <code>WGSL</code>/<code>GLSL</code> - <code>WebGPU</code>/<code>WebGL</code>, in addition to optimizing the shader graph automatically and through codes that can be inserted within each <code>Node</code>. This allows the developer to focus on productivity and leave the graphical management part to the <code>Node System</code>.</p>
<p>Another important feature of a graph shader is that we will no longer need to care about the sequence in which components are created, because the <code>Node System</code> will only declare and include it once.</p>
<p>Let&#39;s say that you import <code>positionWorld</code> into your code, even if another component uses it, the calculations performed to obtain <code>position world</code> will only be performed once, as is the case with any other renderer component such as: <code>normalWorld</code>, <code>modelPosition</code>, etc.</p>
<div><h3>Architeture</h3><a id="user-content-architeture" aria-label="Permalink: Architeture" href="#architeture"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p>All <code>TSL</code> component is created from a <code>Node</code>. The <code>Node</code> allows it to communicate with any other, value conversions can be automatic or manual, a <code>Node</code> can receive the output value expected by the parent <code>Node</code> and modify its own output snippet.</p>
<p>Since they are all components are extended from the <code>Node</code> class, it is possible to modulate them using <code>tree shaking</code>. In the shader construction process, the <code>Node</code> will have important information such as <code>geometry</code>, <code>material</code>, <code>renderer</code> as well as the <code>backend</code>, which can influence the type and value of output.</p>
<p>The build process is based on three pillars: <code>setup</code>, <code>analyze</code> and <code>generate</code>.</p>
<table role="table">
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>setup</code></td>
<td>Use <code>TSL</code> to create a completely customized code for the <code>Node</code> output. The <code>Node</code> can use many others within itself, have countless inputs, but there will always be a single output.</td>
</tr>
<tr>
<td><code>analyze</code></td>
<td>This proccess will check the <code>nodes</code> that were created in order to create useful information for <code>generate</code> the snippet, such as the need to create or not a cache/variable for optimizing a node.</td>
</tr>
<tr>
<td><code>generate</code></td>
<td>An output of <code>string</code> will be sent to each <code>node</code> independently, the node will also be able to create code in the flow, supporting multiple lines.</td>
</tr>
</tbody>
</table>
<p><code>Node</code> also have a native update process invoked by the <code>update()</code> function, these events be called by <code>frame</code>, <code>render call</code> and <code>object draw</code>.</p>
<p>It is also possible to serialize or deserialize a <code>Node</code> using <code>serialize()</code> and <code>deserialize()</code> functions.</p>
<div><h2>Constants and explicit conversions</h2><a id="user-content-constants-and-explicit-conversions" aria-label="Permalink: Constants and explicit conversions" href="#constants-and-explicit-conversions"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p>Input functions can be used to create contants and do explicit conversions.</p>
<blockquote>
<p>Conversions are also performed automatically if the output and input are of different types.</p>
</blockquote>
<table role="table">
<thead>
<tr>
<th>Name</th>
<th>Returns a constant or convertion of type:</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>float( node | number )</code></td>
<td><code>float</code></td>
</tr>
<tr>
<td><code>int( node | number )</code></td>
<td><code>int</code></td>
</tr>
<tr>
<td><code>uint( node | number )</code></td>
<td><code>uint</code></td>
</tr>
<tr>
<td><code>bool( node | value )</code></td>
<td><code>boolean</code></td>
</tr>
<tr>
<td><code>color( node | hex | r,g,b )</code></td>
<td><code>color</code></td>
</tr>
<tr>
<td><code>vec2( node | Vector2 | x,y )</code></td>
<td><code>vec2</code></td>
</tr>
<tr>
<td><code>vec3( node | Vector3 | x,y,z )</code></td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>vec4( node | Vector4 | x,y,z,w )</code></td>
<td><code>vec4</code></td>
</tr>
<tr>
<td><code>mat2( node | Matrix2 | a,b,c,d )</code></td>
<td><code>mat2</code></td>
</tr>
<tr>
<td><code>mat3( node | Matrix3 | a,b,c,d,e,f,g,h,i )</code></td>
<td><code>mat3</code></td>
</tr>
<tr>
<td><code>mat4( node | Matrix4 | a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p )</code></td>
<td><code>mat4</code></td>
</tr>
<tr>
<td>Advanced</td>
<td></td>
</tr>
<tr>
<td><code>ivec2( node | x,y )</code></td>
<td><code>ivec2</code></td>
</tr>
<tr>
<td><code>ivec3( node | x,y,z )</code></td>
<td><code>ivec3</code></td>
</tr>
<tr>
<td><code>ivec4( node | x,y,z,w )</code></td>
<td><code>ivec4</code></td>
</tr>
<tr>
<td><code>uvec2( node | x,y )</code></td>
<td><code>uvec2</code></td>
</tr>
<tr>
<td><code>uvec3( node | x,y,z )</code></td>
<td><code>uvec3</code></td>
</tr>
<tr>
<td><code>uvec4( node | x,y,z,w )</code></td>
<td><code>uvec4</code></td>
</tr>
<tr>
<td><code>bvec2( node | x,y )</code></td>
<td><code>bvec2</code></td>
</tr>
<tr>
<td><code>bvec3( node | x,y,z )</code></td>
<td><code>bvec3</code></td>
</tr>
<tr>
<td><code>bvec4( node | x,y,z,w )</code></td>
<td><code>bvec4</code></td>
</tr>
<tr>
<td><code>imat2( node | Matrix2 | a,b,c,d )</code></td>
<td><code>imat2</code></td>
</tr>
<tr>
<td><code>imat3( node | Matrix3 | a,b,c,d,e,f,g,h,i)</code></td>
<td><code>imat3</code></td>
</tr>
<tr>
<td><code>imat4( node | Matrix4 | a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p )</code></td>
<td><code>imat4</code></td>
</tr>
<tr>
<td><code>umat2( node | Matrix2 | a,b,c,d )</code></td>
<td><code>umat2</code></td>
</tr>
<tr>
<td><code>umat3( node | Matrix3 | a,b,c,d,e,f,g,h,i )</code></td>
<td><code>umat3</code></td>
</tr>
<tr>
<td><code>umat4( node | Matrix4 | a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p )</code></td>
<td><code>umat4</code></td>
</tr>
<tr>
<td><code>bmat2( node | Matrix2 | a,b,c,d )</code></td>
<td><code>bmat2</code></td>
</tr>
<tr>
<td><code>bmat3( node | Matrix3 | a,b,c,d,e,f,g,h,i )</code></td>
<td><code>bmat3</code></td>
</tr>
<tr>
<td><code>bmat4( node | Matrix4 | a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p )</code></td>
<td><code>bmat4</code></td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div data-snippet-clipboard-copy-content="import { color, vec2, positionWorld } from &#39;three/tsl&#39;;

// constant
material.colorNode = color( 0x0066ff );

// conversion
material.colorNode = vec2( positionWorld ); // result positionWorld.xy"><pre><span>import</span> <span>{</span> <span>color</span><span>,</span> <span>vec2</span><span>,</span> <span>positionWorld</span> <span>}</span> <span>from</span> <span>&#39;three/tsl&#39;</span><span>;</span>

<span>// constant</span>
<span>material</span><span>.</span><span>colorNode</span> <span>=</span> <span>color</span><span>(</span> <span>0x0066ff</span> <span>)</span><span>;</span>

<span>// conversion</span>
<span>material</span><span>.</span><span>colorNode</span> <span>=</span> <span>vec2</span><span>(</span> <span>positionWorld</span> <span>)</span><span>;</span> <span>// result positionWorld.xy</span></pre></div>
<div><h2>Conversion</h2><a id="user-content-conversion" aria-label="Permalink: Conversion" href="#conversion"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p>It is also possible to perform conversions using the <code>method chain</code>:</p>
<table role="table">
<thead>
<tr>
<th>Name</th>
<th>Returns a constant or conversion of type:</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>.toFloat()</code></td>
<td><code>float</code></td>
</tr>
<tr>
<td><code>.toInt()</code></td>
<td><code>int</code></td>
</tr>
<tr>
<td><code>.toUint()</code></td>
<td><code>uint</code></td>
</tr>
<tr>
<td><code>.toBool()</code></td>
<td><code>boolean</code></td>
</tr>
<tr>
<td><code>.toColor()</code></td>
<td><code>color</code></td>
</tr>
<tr>
<td><code>.toVec2()</code></td>
<td><code>vec2</code></td>
</tr>
<tr>
<td><code>.toVec3()</code></td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>.toVec4()</code></td>
<td><code>vec4</code></td>
</tr>
<tr>
<td><code>.toMat2()</code></td>
<td><code>mat2</code></td>
</tr>
<tr>
<td><code>.toMat3()</code></td>
<td><code>mat3</code></td>
</tr>
<tr>
<td><code>.toMat4()</code></td>
<td><code>mat4</code></td>
</tr>
<tr>
<td>Advanced</td>
<td></td>
</tr>
<tr>
<td><code>.toIvec2()</code></td>
<td><code>ivec2</code></td>
</tr>
<tr>
<td><code>.toIvec3()</code></td>
<td><code>ivec3</code></td>
</tr>
<tr>
<td><code>.toIvec4()</code></td>
<td><code>ivec4</code></td>
</tr>
<tr>
<td><code>.toUvec2()</code></td>
<td><code>uvec2</code></td>
</tr>
<tr>
<td><code>.toUvec3()</code></td>
<td><code>uvec3</code></td>
</tr>
<tr>
<td><code>.toUvec4()</code></td>
<td><code>uvec4</code></td>
</tr>
<tr>
<td><code>.toBvec2()</code></td>
<td><code>bvec2</code></td>
</tr>
<tr>
<td><code>.toBvec3()</code></td>
<td><code>bvec3</code></td>
</tr>
<tr>
<td><code>.toBvec4()</code></td>
<td><code>bvec4</code></td>
</tr>
<tr>
<td><code>.toImat2()</code></td>
<td><code>imat2</code></td>
</tr>
<tr>
<td><code>.toImat3()</code></td>
<td><code>imat3</code></td>
</tr>
<tr>
<td><code>.toImat4()</code></td>
<td><code>imat4</code></td>
</tr>
<tr>
<td><code>.toUmat2()</code></td>
<td><code>umat2</code></td>
</tr>
<tr>
<td><code>.toUmat3()</code></td>
<td><code>umat3</code></td>
</tr>
<tr>
<td><code>.toUmat4()</code></td>
<td><code>umat4</code></td>
</tr>
<tr>
<td><code>.toBmat2()</code></td>
<td><code>bmat2</code></td>
</tr>
<tr>
<td><code>.toBmat3()</code></td>
<td><code>bmat3</code></td>
</tr>
<tr>
<td><code>.toBmat4()</code></td>
<td><code>bmat4</code></td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div data-snippet-clipboard-copy-content="import { positionWorld } from &#39;three/tsl&#39;;

// conversion
material.colorNode = positionWorld.toVec2(); // result positionWorld.xy"><pre><span>import</span> <span>{</span> <span>positionWorld</span> <span>}</span> <span>from</span> <span>&#39;three/tsl&#39;</span><span>;</span>

<span>// conversion</span>
<span>material</span><span>.</span><span>colorNode</span> <span>=</span> <span>positionWorld</span><span>.</span><span>toVec2</span><span>(</span><span>)</span><span>;</span> <span>// result positionWorld.xy</span></pre></div>
<div><h2>Uniform</h2><a id="user-content-uniform" aria-label="Permalink: Uniform" href="#uniform"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p>Uniforms are useful to update values of variables like colors, lighting, or transformations without having to recreate the shader program. They are the true variables from a CPU&#39;s point of view.</p>
<table role="table">
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>uniform( boolean | number | Color | Vector2 | Vector3 | Vector4 | Matrix3 | Matrix4, type = null )</code></td>
<td>Dynamic values.</td>
</tr>
</tbody>
</table>
<p>It is also possible to create update events on <code>uniforms</code>, which can be defined by the user:</p>
<table role="table">
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>.onObjectUpdate( function )</code></td>
<td>It will be updated every time an object like <code>Mesh</code> is rendered with this <code>node</code> in <code>Material</code>.</td>
</tr>
<tr>
<td><code>.onRenderUpdate( function )</code></td>
<td>It will be updated once per render, common and shared materials, fog, tone mapping, etc.</td>
</tr>
<tr>
<td><code>.onFrameUpdate( function )</code></td>
<td>It will be updated only once per frame, recommended for values ​​that will be updated only once per frame, regardless of when <code>render pass</code> the frame has, cases like <code>timer</code> for example.</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div data-snippet-clipboard-copy-content="const posY = uniform( mesh.position.y );

// it&#39;s possible use posY.value to update manualy the value
posY.value = mesh.position.y;

// or using event to be done automatically
// { object } will be the current rendering object
posY.onObjectUpdate( ( { object } ) =&gt; object.position.y );

material.colorNode = posY;"><pre><span>const</span> <span>posY</span> <span>=</span> <span>uniform</span><span>(</span> <span>mesh</span><span>.</span><span>position</span><span>.</span><span>y</span> <span>)</span><span>;</span>

<span>// it&#39;s possible use posY.value to update manualy the value</span>
<span>posY</span><span>.</span><span>value</span> <span>=</span> <span>mesh</span><span>.</span><span>position</span><span>.</span><span>y</span><span>;</span>

<span>// or using event to be done automatically</span>
<span>// { object } will be the current rendering object</span>
<span>posY</span><span>.</span><span>onObjectUpdate</span><span>(</span> <span>(</span> <span>{</span> object <span>}</span> <span>)</span> <span>=&gt;</span> <span>object</span><span>.</span><span>position</span><span>.</span><span>y</span> <span>)</span><span>;</span>

<span>material</span><span>.</span><span>colorNode</span> <span>=</span> <span>posY</span><span>;</span></pre></div>
<div><h2>Method chaining</h2><a id="user-content-method-chaining" aria-label="Permalink: Method chaining" href="#method-chaining"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p><code>Method chaining</code> will only be including operators, converters, math and some core functions. These functions, however, can be used on any <code>node</code>.</p>
<p>Example:</p>
<div data-snippet-clipboard-copy-content="// it will invert the texture color
material.colorNode = texture( map ).rgb.oneMinus();"><pre><span>// it will invert the texture color</span>
<span>material</span><span>.</span><span>colorNode</span> <span>=</span> <span>texture</span><span>(</span> <span>map</span> <span>)</span><span>.</span><span>rgb</span><span>.</span><span>oneMinus</span><span>(</span><span>)</span><span>;</span></pre></div>
<div><h2>Swizzle</h2><a id="user-content-swizzle" aria-label="Permalink: Swizzle" href="#swizzle"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p>Swizzling is the technique that allows you to access, reorder, or duplicate the components of a vector using a specific notation within TSL. This is done by combining the identifiers:</p>
<div data-snippet-clipboard-copy-content="const original = vec3( 1.0, 2.0, 3.0 ); // (x, y, z)
const swizzled = original.zyx; // swizzled = (3.0, 2.0, 1.0)"><pre><span>const</span> <span>original</span> <span>=</span> <span>vec3</span><span>(</span> <span>1.0</span><span>,</span> <span>2.0</span><span>,</span> <span>3.0</span> <span>)</span><span>;</span> <span>// (x, y, z)</span>
<span>const</span> <span>swizzled</span> <span>=</span> <span>original</span><span>.</span><span>zyx</span><span>;</span> <span>// swizzled = (3.0, 2.0, 1.0)</span></pre></div>
<p>It&#39;s possible use <code>xyzw</code>, <code>rgba</code> or <code>stpq</code>.</p>
<div><h2>Operators</h2><a id="user-content-operators" aria-label="Permalink: Operators" href="#operators"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<table role="table">
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>.add( node | value, ... )</code></td>
<td>Return the addition of two or more value.</td>
</tr>
<tr>
<td><code>.sub( node | value )</code></td>
<td>Return the subraction of two or more value.</td>
</tr>
<tr>
<td><code>.mul( node | value )</code></td>
<td>Return the multiplication of two or more value.</td>
</tr>
<tr>
<td><code>.div( node | value )</code></td>
<td>Return the division of two or more value.</td>
</tr>
<tr>
<td><code>.assign( node | value )</code></td>
<td>Assign one or more value to a and return the same.</td>
</tr>
<tr>
<td><code>.remainder( node | value )</code></td>
<td>Computes the remainder of dividing the first node by the second.</td>
</tr>
<tr>
<td><code>.equal( node | value )</code></td>
<td>Checks if two nodes are equal.</td>
</tr>
<tr>
<td><code>.notEqual( node | value )</code></td>
<td>Checks if two nodes are not equal.</td>
</tr>
<tr>
<td><code>.lessThan( node | value )</code></td>
<td>Checks if the first node is less than the second.</td>
</tr>
<tr>
<td><code>.greaterThan( node | value )</code></td>
<td>Checks if the first node is greater than the second.</td>
</tr>
<tr>
<td><code>.lessThanEqual( node | value )</code></td>
<td>Checks if the first node is less than or equal to the second.</td>
</tr>
<tr>
<td><code>.greaterThanEqual( node | value )</code></td>
<td>Checks if the first node is greater than or equal to the second.</td>
</tr>
<tr>
<td><code>.and( node | value )</code></td>
<td>Performs logical AND on two nodes.</td>
</tr>
<tr>
<td><code>.or( node | value )</code></td>
<td>Performs logical OR on two nodes.</td>
</tr>
<tr>
<td><code>.not( node | value )</code></td>
<td>Performs logical NOT on a node.</td>
</tr>
<tr>
<td><code>.xor( node | value )</code></td>
<td>Performs logical XOR on two nodes.</td>
</tr>
<tr>
<td><code>.bitAnd( node | value )</code></td>
<td>Performs bitwise AND on two nodes.</td>
</tr>
<tr>
<td><code>.bitNot( node | value )</code></td>
<td>Performs bitwise NOT on a node.</td>
</tr>
<tr>
<td><code>.bitOr( node | value )</code></td>
<td>Performs bitwise OR on two nodes.</td>
</tr>
<tr>
<td><code>.bitXor( node | value )</code></td>
<td>Performs bitwise XOR on two nodes.</td>
</tr>
<tr>
<td><code>.shiftLeft( node | value )</code></td>
<td>Shifts a node to the left.</td>
</tr>
<tr>
<td><code>.shiftRight( node | value )</code></td>
<td>Shifts a node to the right.</td>
</tr>
</tbody>
</table>
<div data-snippet-clipboard-copy-content="const a = float( 1 );
const b = float( 2 );

const result = a.add( b ); // output: 3"><pre><span>const</span> <span>a</span> <span>=</span> <span>float</span><span>(</span> <span>1</span> <span>)</span><span>;</span>
<span>const</span> <span>b</span> <span>=</span> <span>float</span><span>(</span> <span>2</span> <span>)</span><span>;</span>

<span>const</span> <span>result</span> <span>=</span> <span>a</span><span>.</span><span>add</span><span>(</span> <span>b</span> <span>)</span><span>;</span> <span>// output: 3</span></pre></div>
<div><h2>Function</h2><a id="user-content-function" aria-label="Permalink: Function" href="#function"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div><h3><code>tslFn( function )</code></h3><a id="user-content-tslfn-function-" aria-label="Permalink: tslFn( function )" href="#tslfn-function-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p>It is possible to use classic JS functions or a <code>tslFn()</code> interface. The main difference is that <code>tslFn()</code> creates a controllable environment, allowing the use of <code>stack</code> where you can use <code>assign</code> and <code>conditional</code>, while the classic function only allows inline approaches.</p>
<p>Example:</p>
<div data-snippet-clipboard-copy-content="// tsl function
const oscSine = tslFn( ( [ timer = timerGlobal ] ) =&gt; {

	return timer.add( 0.75 ).mul( Math.PI * 2 ).sin().mul( 0.5 ).add( 0.5 );

} );

// inline function
export const oscSine = ( timer = timerGlobal ) =&gt; timer.add( 0.75 ).mul( Math.PI * 2 ).sin().mul( 0.5 ).add( 0.5 );"><pre><span>// tsl function</span>
<span>const</span> <span>oscSine</span> <span>=</span> <span>tslFn</span><span>(</span> <span>(</span> <span>[</span> <span>timer</span> <span>=</span> <span>timerGlobal</span> <span>]</span> <span>)</span> <span>=&gt;</span> <span>{</span>

	<span>return</span> <span>timer</span><span>.</span><span>add</span><span>(</span> <span>0.75</span> <span>)</span><span>.</span><span>mul</span><span>(</span> <span>Math</span><span>.</span><span>PI</span> <span>*</span> <span>2</span> <span>)</span><span>.</span><span>sin</span><span>(</span><span>)</span><span>.</span><span>mul</span><span>(</span> <span>0.5</span> <span>)</span><span>.</span><span>add</span><span>(</span> <span>0.5</span> <span>)</span><span>;</span>

<span>}</span> <span>)</span><span>;</span>

<span>// inline function</span>
<span>export</span> <span>const</span> <span>oscSine</span> <span>=</span> <span>(</span> <span>timer</span> <span>=</span> <span>timerGlobal</span> <span>)</span> <span>=&gt;</span> <span>timer</span><span>.</span><span>add</span><span>(</span> <span>0.75</span> <span>)</span><span>.</span><span>mul</span><span>(</span> <span>Math</span><span>.</span><span>PI</span> <span>*</span> <span>2</span> <span>)</span><span>.</span><span>sin</span><span>(</span><span>)</span><span>.</span><span>mul</span><span>(</span> <span>0.5</span> <span>)</span><span>.</span><span>add</span><span>(</span> <span>0.5</span> <span>)</span><span>;</span></pre></div>
<blockquote>
<p>Both above can be called with <code>oscSin( value  )</code>.</p>
</blockquote>
<p>TSL allows the entry of parameters as objects, this is useful in functions that have many optional arguments.</p>
<p>Example:</p>
<div data-snippet-clipboard-copy-content="const oscSine = tslFn( ( { timer = timerGlobal } ) =&gt; {

	return timer.add( 0.75 ).mul( Math.PI * 2 ).sin().mul( 0.5 ).add( 0.5 );

} );

const value = oscSine( { timer: value } );"><pre><span>const</span> <span>oscSine</span> <span>=</span> <span>tslFn</span><span>(</span> <span>(</span> <span>{</span> timer <span>=</span> <span>timerGlobal</span> <span>}</span> <span>)</span> <span>=&gt;</span> <span>{</span>

	<span>return</span> <span>timer</span><span>.</span><span>add</span><span>(</span> <span>0.75</span> <span>)</span><span>.</span><span>mul</span><span>(</span> <span>Math</span><span>.</span><span>PI</span> <span>*</span> <span>2</span> <span>)</span><span>.</span><span>sin</span><span>(</span><span>)</span><span>.</span><span>mul</span><span>(</span> <span>0.5</span> <span>)</span><span>.</span><span>add</span><span>(</span> <span>0.5</span> <span>)</span><span>;</span>

<span>}</span> <span>)</span><span>;</span>

<span>const</span> <span>value</span> <span>=</span> <span>oscSine</span><span>(</span> <span>{</span> <span>timer</span>: <span>value</span> <span>}</span> <span>)</span><span>;</span></pre></div>
<blockquote>
<p>If you want to use an export function compatible with <code>tree shaking</code>, remember to use <code>/*@__PURE__*/</code></p>
</blockquote>
<div data-snippet-clipboard-copy-content="export const oscSawtooth = /*@__PURE__*/ tslFn( ( [ timer = timerGlobal ] ) =&gt; timer.fract() );"><pre><span>export</span> <span>const</span> <span>oscSawtooth</span> <span>=</span> <span>/*@__PURE__*/</span> <span>tslFn</span><span>(</span> <span>(</span> <span>[</span> <span>timer</span> <span>=</span> <span>timerGlobal</span> <span>]</span> <span>)</span> <span>=&gt;</span> <span>timer</span><span>.</span><span>fract</span><span>(</span><span>)</span> <span>)</span><span>;</span></pre></div>
<div><h2>Math</h2><a id="user-content-math" aria-label="Permalink: Math" href="#math"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<table role="table">
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>PI</code></td>
<td>The value of π (pi).</td>
</tr>
<tr>
<td><code>PI2</code></td>
<td>The value of 2π (two pi).</td>
</tr>
<tr>
<td><code>EPSION</code></td>
<td>A small value used to handle floating-point precision errors.</td>
</tr>
<tr>
<td><code>INFINITY</code></td>
<td>Represent infinity.</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td><code>abs( x )</code></td>
<td>Return the absolute value of the parameter.</td>
</tr>
<tr>
<td><code>acos( x )</code></td>
<td>Return the arccosine of the parameter.</td>
</tr>
<tr>
<td><code>all( x )</code></td>
<td>Return true if all components of x are true.</td>
</tr>
<tr>
<td><code>any( x )</code></td>
<td>Return true if any component of x is true.</td>
</tr>
<tr>
<td><code>asin( x )</code></td>
<td>Return the arcsine of the parameter.</td>
</tr>
<tr>
<td><code>atan( x )</code></td>
<td>Return the arc-tangent of the parameters.</td>
</tr>
<tr>
<td><code>atan2( y, x )</code></td>
<td>Return the arc-tangent of the quotient of its arguments.</td>
</tr>
<tr>
<td><code>bitcast( x, y )</code></td>
<td>Reinterpret the bits of a value as a different type.</td>
</tr>
<tr>
<td><code>cbrt( x )</code></td>
<td>Return the cube root of the parameter.</td>
</tr>
<tr>
<td><code>ceil( x )</code></td>
<td>Find the nearest integer that is greater than or equal to the parameter.</td>
</tr>
<tr>
<td><code>clamp( x, min, max )</code></td>
<td>Constrain a value to lie between two further values.</td>
</tr>
<tr>
<td><code>cos( x )</code></td>
<td>Return the cosine of the parameter.</td>
</tr>
<tr>
<td><code>cross( x, y )</code></td>
<td>Calculate the cross product of two vectors.</td>
</tr>
<tr>
<td><code>dFdx( p )</code></td>
<td>Return the partial derivative of an argument with respect to x.</td>
</tr>
<tr>
<td><code>dFdy( p )</code></td>
<td>Return the partial derivative of an argument with respect to y.</td>
</tr>
<tr>
<td><code>degrees( radians )</code></td>
<td>Convert a quantity in radians to degrees.</td>
</tr>
<tr>
<td><code>difference( x, y )</code></td>
<td>Calculate the absolute difference between two values.</td>
</tr>
<tr>
<td><code>distance( x, y )</code></td>
<td>Calculate the distance between two points.</td>
</tr>
<tr>
<td><code>dot( x, y )</code></td>
<td>Calculate the dot product of two vectors.</td>
</tr>
<tr>
<td><code>equals( x, y )</code></td>
<td>Return true if x equals y.</td>
</tr>
<tr>
<td><code>exp( x )</code></td>
<td>Return the natural exponentiation of the parameter.</td>
</tr>
<tr>
<td><code>exp2( x )</code></td>
<td>Return 2 raised to the power of the parameter.</td>
</tr>
<tr>
<td><code>faceforward( N, I, Nref )</code></td>
<td>Return a vector pointing in the same direction as another.</td>
</tr>
<tr>
<td><code>floor( x )</code></td>
<td>Find the nearest integer less than or equal to the parameter.</td>
</tr>
<tr>
<td><code>fract( x )</code></td>
<td>Compute the fractional part of the argument.</td>
</tr>
<tr>
<td><code>fwidth( x )</code></td>
<td>Return the sum of the absolute derivatives in x and y.</td>
</tr>
<tr>
<td><code>inverseSqrt( x )</code></td>
<td>Return the inverse of the square root of the parameter.</td>
</tr>
<tr>
<td><code>invert( x )</code></td>
<td>Invert an alpha parameter ( 1. - x ).</td>
</tr>
<tr>
<td><code>length( x )</code></td>
<td>Calculate the length of a vector.</td>
</tr>
<tr>
<td><code>lengthSq( x )</code></td>
<td>Calculate the squared length of a vector.</td>
</tr>
<tr>
<td><code>log( x )</code></td>
<td>Return the natural logarithm of the parameter.</td>
</tr>
<tr>
<td><code>log2( x )</code></td>
<td>Return the base 2 logarithm of the parameter.</td>
</tr>
<tr>
<td><code>max( x, y )</code></td>
<td>Return the greater of two values.</td>
</tr>
<tr>
<td><code>min( x, y )</code></td>
<td>Return the lesser of two values.</td>
</tr>
<tr>
<td><code>mix( x, y, a )</code></td>
<td>Linearly interpolate between two values.</td>
</tr>
<tr>
<td><code>negate( x )</code></td>
<td>Negate the value of the parameter ( -x ).</td>
</tr>
<tr>
<td><code>normalize( x )</code></td>
<td>Calculate the unit vector in the same direction as the original vector.</td>
</tr>
<tr>
<td><code>oneMinus( x )</code></td>
<td>Return 1 minus the parameter.</td>
</tr>
<tr>
<td><code>pow( x, y )</code></td>
<td>Return the value of the first parameter raised to the power of the second.</td>
</tr>
<tr>
<td><code>pow2( x )</code></td>
<td>Return the square of the parameter.</td>
</tr>
<tr>
<td><code>pow3( x )</code></td>
<td>Return the cube of the parameter.</td>
</tr>
<tr>
<td><code>pow4( x )</code></td>
<td>Return the fourth power of the parameter.</td>
</tr>
<tr>
<td><code>radians( degrees )</code></td>
<td>Convert a quantity in degrees to radians.</td>
</tr>
<tr>
<td><code>reciprocal( x )</code></td>
<td>Return the reciprocal of the parameter (1/x).</td>
</tr>
<tr>
<td><code>reflect( I, N )</code></td>
<td>Calculate the reflection direction for an incident vector.</td>
</tr>
<tr>
<td><code>refract( I, N, eta )</code></td>
<td>Calculate the refraction direction for an incident vector.</td>
</tr>
<tr>
<td><code>round( x )</code></td>
<td>Round the parameter to the nearest integer.</td>
</tr>
<tr>
<td><code>saturate( x )</code></td>
<td>Constrain a value between 0 and 1.</td>
</tr>
<tr>
<td><code>sign( x )</code></td>
<td>Extract the sign of the parameter.</td>
</tr>
<tr>
<td><code>sin( x )</code></td>
<td>Return the sine of the parameter.</td>
</tr>
<tr>
<td><code>smoothstep( e0, e1, x )</code></td>
<td>Perform Hermite interpolation between two values.</td>
</tr>
<tr>
<td><code>sqrt( x )</code></td>
<td>Return the square root of the parameter.</td>
</tr>
<tr>
<td><code>step( edge, x )</code></td>
<td>Generate a step function by comparing two values.</td>
</tr>
<tr>
<td><code>tan( x )</code></td>
<td>Return the tangent of the parameter.</td>
</tr>
<tr>
<td><code>transformDirection( dir, matrix )</code></td>
<td>Transform the direction of a vector by a matrix and then normalize the result.</td>
</tr>
<tr>
<td><code>trunc( x )</code></td>
<td>Truncate the parameter, removing the fractional part.</td>
</tr>
</tbody>
</table>
<div data-snippet-clipboard-copy-content="const value = float( -1 );

// It&#39;s possible use `value.abs()` too.
const positiveValue = abs( value ); // output: 1"><pre><span>const</span> <span>value</span> <span>=</span> <span>float</span><span>(</span> <span>-</span><span>1</span> <span>)</span><span>;</span>

<span>// It&#39;s possible use `value.abs()` too.</span>
<span>const</span> <span>positiveValue</span> <span>=</span> <span>abs</span><span>(</span> <span>value</span> <span>)</span><span>;</span> <span>// output: 1</span></pre></div>
<div><h2>Texture</h2><a id="user-content-texture" aria-label="Permalink: Texture" href="#texture"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<table role="table">
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>texture( texture, uv = uv(), level = null )</code></td>
<td>Retrieves texels from a texture.</td>
<td><code>vec4</code></td>
</tr>
<tr>
<td><code>cubeTexture( texture, uvw = reflectVector, level = null )</code></td>
<td>Retrieves texels from a cube texture.</td>
<td><code>vec4</code></td>
</tr>
<tr>
<td><code>triplanarTexture( textureX, textureY = null, textureZ = null, scale = float( 1 ), position = positionLocal, normal = normalLocal )</code></td>
<td>Computes texture using triplanar mapping based on provided parameters.</td>
<td><code>vec4</code></td>
</tr>
</tbody>
</table>
<div><h2>Attributes</h2><a id="user-content-attributes" aria-label="Permalink: Attributes" href="#attributes"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<table role="table">
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>attribute( name, type = null, default = null )</code></td>
<td>Getting geometry attribute using name and type.</td>
<td><code>any</code></td>
</tr>
<tr>
<td><code>uv( index = 0 )</code></td>
<td>UV attribute named <code>uv + index</code>.</td>
<td><code>vec2</code></td>
</tr>
<tr>
<td><code>vertexColor( index = 0 )</code></td>
<td>Vertex color node for the specified index.</td>
<td><code>color</code></td>
</tr>
</tbody>
</table>
<div><h2>Position</h2><a id="user-content-position" aria-label="Permalink: Position" href="#position"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<table role="table">
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>positionGeometry</code></td>
<td>Position attribute of geometry.</td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>positionLocal</code></td>
<td>Local variable for position.</td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>positionWorld</code></td>
<td>World position.</td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>positionWorldDirection</code></td>
<td>Normalized world direction.</td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>positionView</code></td>
<td>View position.</td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>positionViewDirection</code></td>
<td>Normalized view direction.</td>
<td><code>vec3</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p><code>positionLocal</code> represents the position after modifications made by <code>skinning</code>, <code>morpher</code>, etc.</p>
</blockquote>
<div><h2>Normal</h2><a id="user-content-normal" aria-label="Permalink: Normal" href="#normal"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<table role="table">
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>normalGeometry</code></td>
<td>Normal attribute of geometry.</td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>normalLocal</code></td>
<td>Local variable for normal.</td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>normalView</code></td>
<td>Normalized view normal.</td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>normalWorld</code></td>
<td>Normalized world normal.</td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>transformedNormalView</code></td>
<td>Transformed normal in view space.</td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>transformedNormalWorld</code></td>
<td>Normalized transformed normal in world space.</td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>transformedClearcoatNormalView</code></td>
<td>Transformed clearcoat normal in view space.</td>
<td><code>vec3</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p><code>transformed*</code> represents the normal after modifications made by <code>skinning</code>, <code>morpher</code>, etc.</p>
</blockquote>
<div><h2>Tangent</h2><a id="user-content-tangent" aria-label="Permalink: Tangent" href="#tangent"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<table role="table">
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>tangentGeometry</code></td>
<td>Tangent attribute of geometry.</td>
<td><code>vec4</code></td>
</tr>
<tr>
<td><code>tangentLocal</code></td>
<td>Local variable for tangent.</td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>tangentView</code></td>
<td>Normalized view tangent.</td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>tangentWorld</code></td>
<td>Normalized world tangent.</td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>transformedTangentView</code></td>
<td>Transformed tangent in view space.</td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>transformedTangentWorld</code></td>
<td>Normalized transformed tangent in world space.</td>
<td><code>vec3</code></td>
</tr>
</tbody>
</table>
<div><h3>Bitangent</h3><a id="user-content-bitangent" aria-label="Permalink: Bitangent" href="#bitangent"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<table role="table">
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bitangentGeometry</code></td>
<td>Normalized bitangent in geometry space.</td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>bitangentLocal</code></td>
<td>Normalized bitangent in local space.</td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>bitangentView</code></td>
<td>Normalized bitangent in view space.</td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>bitangentWorld</code></td>
<td>Normalized bitangent in world space.</td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>transformedBitangentView</code></td>
<td>Normalized transformed bitangent in view space.</td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>transformedBitangentWorld</code></td>
<td>Normalized transformed bitangent in world space.</td>
<td><code>vec3</code></td>
</tr>
</tbody>
</table>
<div><h2>Camera</h2><a id="user-content-camera" aria-label="Permalink: Camera" href="#camera"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<table role="table">
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>cameraNear</code></td>
<td>Near plane distance of the camera.</td>
<td><code>float</code></td>
</tr>
<tr>
<td><code>cameraFar</code></td>
<td>Far plane distance of the camera.</td>
<td><code>float</code></td>
</tr>
<tr>
<td><code>cameraLogDepth</code></td>
<td>Logarithmic depth value for the camera.</td>
<td><code>float</code></td>
</tr>
<tr>
<td><code>cameraProjectionMatrix</code></td>
<td>Projection matrix of the camera.</td>
<td><code>mat4</code></td>
</tr>
<tr>
<td><code>cameraProjectionMatrixInverse</code></td>
<td>Inverse projection matrix of the camera.</td>
<td><code>mat4</code></td>
</tr>
<tr>
<td><code>cameraViewMatrix</code></td>
<td>View matrix of the camera.</td>
<td><code>mat4</code></td>
</tr>
<tr>
<td><code>cameraWorldMatrix</code></td>
<td>World matrix of the camera.</td>
<td><code>mat4</code></td>
</tr>
<tr>
<td><code>cameraNormalMatrix</code></td>
<td>Normal matrix of the camera.</td>
<td><code>mat3</code></td>
</tr>
<tr>
<td><code>cameraPosition</code></td>
<td>World position of the camera.</td>
<td><code>vec3</code></td>
</tr>
</tbody>
</table>
<div><h2>Model</h2><a id="user-content-model" aria-label="Permalink: Model" href="#model"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<table role="table">
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>modelDirection</code></td>
<td>Direction of the model.</td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>modelViewMatrix</code></td>
<td>View matrix of the model.</td>
<td><code>mat4</code></td>
</tr>
<tr>
<td><code>modelNormalMatrix</code></td>
<td>Normal matrix of the model.</td>
<td><code>mat4</code></td>
</tr>
<tr>
<td><code>modelWorldMatrix</code></td>
<td>World matrix of the model.</td>
<td><code>mat4</code></td>
</tr>
<tr>
<td><code>modelPosition</code></td>
<td>Position of the model.</td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>modelScale</code></td>
<td>Scale of the model.</td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>modelViewPosition</code></td>
<td>View position of the model.</td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>modelWorldMatrixInverse</code></td>
<td>Inverse world matrix of the model.</td>
<td><code>mat4</code></td>
</tr>
</tbody>
</table>
<div><h2>Reflect</h2><a id="user-content-reflect" aria-label="Permalink: Reflect" href="#reflect"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<table role="table">
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>reflectView</code></td>
<td>Computes reflection direction in view space.</td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>reflectVector</code></td>
<td>Transforms the reflection direction to world space.</td>
<td><code>vec3</code></td>
</tr>
</tbody>
</table>
<div><h2>UV Utils</h2><a id="user-content-uv-utils" aria-label="Permalink: UV Utils" href="#uv-utils"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<table role="table">
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>matcapUV</code></td>
<td>UV coordinates for matcap material computation.</td>
<td><code>vec2</code></td>
</tr>
<tr>
<td><code>rotateUV( uv, rotation, centerNode = vec2( 0.5 ) )</code></td>
<td>Rotates UV coordinates around a center point.</td>
<td><code>vec2</code></td>
</tr>
<tr>
<td><code>spritesheetUV( count, uv = uv(), frame = float( 0 ) )</code></td>
<td>Computes UV coordinates for a sprite sheet based on the number of frames, UV coordinates, and frame index.</td>
<td><code>vec2</code></td>
</tr>
<tr>
<td><code>equirectUV( direction = positionWorldDirection )</code></td>
<td>Computes UV coordinates for equirectangular mapping based on the direction vector.</td>
<td><code>vec2</code></td>
</tr>
</tbody>
</table>
<div><h2>Interpolation</h2><a id="user-content-interpolation" aria-label="Permalink: Interpolation" href="#interpolation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<table role="table">
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>remap( node, inLow, inHigh, outLow = float( 0 ), outHigh = float( 1 ) )</code></td>
<td>Remaps a value from one range to another.</td>
<td><code>any</code></td>
</tr>
<tr>
<td><code>remapClamp( node, inLow, inHigh, outLow = float( 0 ), outHigh = float( 1 ) )</code></td>
<td>Remaps a value from one range to another, with clamping.</td>
<td><code>any</code></td>
</tr>
</tbody>
</table>
<div><h2>Random</h2><a id="user-content-random" aria-label="Permalink: Random" href="#random"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<table role="table">
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>hash( seed )</code></td>
<td>Generates a hash value in the range [ 0, 1 ] from the given seed.</td>
<td><code>float</code></td>
</tr>
<tr>
<td><code>range( min, max )</code></td>
<td>Generates a range <code>attribute</code> of values between min and max. Attribute randomization is useful when you want to randomize values ​​between instances and not between pixels.</td>
<td><code>any</code></td>
</tr>
</tbody>
</table>
<div><h2>Oscillator</h2><a id="user-content-oscillator" aria-label="Permalink: Oscillator" href="#oscillator"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<table role="table">
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>oscSine( timer = timerGlobal )</code></td>
<td>Generates a sine wave oscillation based on a timer.</td>
<td><code>float</code></td>
</tr>
<tr>
<td><code>oscSquare( timer = timerGlobal )</code></td>
<td>Generates a square wave oscillation based on a timer.</td>
<td><code>float</code></td>
</tr>
<tr>
<td><code>oscTriangle( timer = timerGlobal )</code></td>
<td>Generates a triangle wave oscillation based on a timer.</td>
<td><code>float</code></td>
</tr>
<tr>
<td><code>oscSawtooth( timer = timerGlobal )</code></td>
<td>Generates a sawtooth wave oscillation based on a timer.</td>
<td><code>float</code></td>
</tr>
</tbody>
</table>
<div><h2>Packing</h2><a id="user-content-packing" aria-label="Permalink: Packing" href="#packing"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<table role="table">
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>directionToColor( value )</code></td>
<td>Converts direction vector to color.</td>
<td><code>color</code></td>
</tr>
<tr>
<td><code>colorToDirection( value )</code></td>
<td>Converts color to direction vector.</td>
<td><code>vec3</code></td>
</tr>
</tbody>
</table>
<div><h2>Functions</h2><a id="user-content-functions" aria-label="Permalink: Functions" href="#functions"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div><h3><code>.toVar( name = null )</code></h3><a id="user-content-tovar-name--null-" aria-label="Permalink: .toVar( name = null )" href="#tovar-name--null-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p>To create a variable from a node use <code>.toVar()</code>.</p>
<p>The first parameter is used to add a name to it, otherwise the node system will name it automatically, it can be useful in debugging or access using <code>wgslFn</code>.</p>
<div data-snippet-clipboard-copy-content="const uvScaled = uv().mul( 10 ).toVar();

material.colorNode = texture( map, uvScaled );"><pre><span>const</span> <span>uvScaled</span> <span>=</span> <span>uv</span><span>(</span><span>)</span><span>.</span><span>mul</span><span>(</span> <span>10</span> <span>)</span><span>.</span><span>toVar</span><span>(</span><span>)</span><span>;</span>

<span>material</span><span>.</span><span>colorNode</span> <span>=</span> <span>texture</span><span>(</span> <span>map</span><span>,</span> <span>uvScaled</span> <span>)</span><span>;</span></pre></div>
<hr/>
<div><h3><code>varying( node, name = null )</code></h3><a id="user-content-varying-node-name--null-" aria-label="Permalink: varying( node, name = null )" href="#varying-node-name--null-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p>Let&#39;s suppose you want to optimize some calculation in the <code>vertex stage</code> but are using it in a slot like <code>material.colorNode</code>.</p>
<p>For example:</p>
<div data-snippet-clipboard-copy-content="// multiplication will be executed in vertex stage
const normalView = varying( modelNormalMatrix.mul( normalLocal ) );

// normalize will be executed in fragment stage
// because .colorNode is fragment stage slot as default
material.colorNode = normalView.normalize();"><pre><span>// multiplication will be executed in vertex stage</span>
<span>const</span> <span>normalView</span> <span>=</span> <span>varying</span><span>(</span> <span>modelNormalMatrix</span><span>.</span><span>mul</span><span>(</span> <span>normalLocal</span> <span>)</span> <span>)</span><span>;</span>

<span>// normalize will be executed in fragment stage</span>
<span>// because .colorNode is fragment stage slot as default</span>
<span>material</span><span>.</span><span>colorNode</span> <span>=</span> <span>normalView</span><span>.</span><span>normalize</span><span>(</span><span>)</span><span>;</span></pre></div>
<p>The first parameter of <code>varying</code> <code>modelNormalMatrix.mul( normalLocal )</code> will be executed in <code>vertex stage</code>, and the return from <code>varying()</code> will be a <code>varying</code> as we are used in WGSL/GLSL, this can optimize extra calculations in the <code>fragment stage</code>. The second parameter allows you to add a custom name to <code>varying</code>.</p>
<p>If <code>varying()</code> is added only to <code>.positionNode</code>, it will only return a simple variable and varying will not be created.</p>
<div><h2>Transitioning common GLSL properties to TSL</h2><a id="user-content-transitioning-common-glsl-properties-to-tsl" aria-label="Permalink: Transitioning common GLSL properties to TSL" href="#transitioning-common-glsl-properties-to-tsl"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<table role="table">
<thead>
<tr>
<th>GLSL</th>
<th>TSL</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>position</code></td>
<td><code>positionGeometry</code></td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>transformed</code></td>
<td><code>positionLocal</code></td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>transformedNormal</code></td>
<td><code>normalLocal</code></td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>vWorldPosition</code></td>
<td><code>positionWorld</code></td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>vColor</code></td>
<td><code>vertexColor()</code></td>
<td><code>vec3</code></td>
</tr>
<tr>
<td>
<code>vUv</code> | <code>uv</code>
</td>
<td><code>uv()</code></td>
<td><code>vec2</code></td>
</tr>
<tr>
<td><code>vNormal</code></td>
<td><code>normalView</code></td>
<td><code>vec3</code></td>
</tr>
<tr>
<td><code>viewMatrix</code></td>
<td><code>cameraViewMatrix</code></td>
<td><code>mat4</code></td>
</tr>
<tr>
<td><code>modelMatrix</code></td>
<td><code>modelWorldMatrix</code></td>
<td><code>mat4</code></td>
</tr>
<tr>
<td><code>modelViewMatrix</code></td>
<td><code>modelViewMatrix</code></td>
<td><code>mat4</code></td>
</tr>
<tr>
<td><code>projectionMatrix</code></td>
<td><code>cameraProjectionMatrix</code></td>
<td><code>mat4</code></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>diffuseColor</code></td>
<td><code>material.colorNode</code></td>
<td><code>vec4</code></td>
</tr>
<tr>
<td><code>gl_FragColor</code></td>
<td><code>material.fragmentNode</code></td>
<td><code>vec4</code></td>
</tr>
</tbody>
</table>

              </div>

          </div>
</div></div>
  </body>
</html>
