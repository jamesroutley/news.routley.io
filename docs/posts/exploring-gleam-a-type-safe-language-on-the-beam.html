<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://christopher.engineering/en/blog/gleam-overview/">Original</a>
    <h1>Exploring Gleam, a type-safe language on the BEAM</h1>
    
    <div id="readability-page-1" class="page"><div>   <p>If you know me, you’d probably say, “Omg Chris, yet another new language???!!!“.
The truth is, this is the only way I found to keep my motivation as a software
engineer. A new language means a new way of both building and thinking. I’m
trying to stay open-minded when it comes to my craft. I’ll just get the best out
of this new experience and move on. In this article, I’m going to talk about
Gleam, how I found it, and why I’m already LOVING it.</p>
<p><img src="https://christopher.engineering/_astro/gleam-banner.CSmos0T3_Z2gg4CB.webp" alt="Pink star representing Gleam&#39;s logo, followed by the label &#39;Gleam&#39;" width="1200" height="630" loading="lazy" decoding="async"/></p><h2 id="how-i-heard-about-gleam">How I heard about Gleam?</h2>
<p>Gleam V1 launched on March 4th 2024. As a
<a href="https://youtu.be/0sxXyLJe2N8?si=0ExH3E5ViqdEGlMM&amp;t=12">built different engineer</a>,
I found out about it back in November 2023, when I started being seriously
interested in Elixir.</p>
<p>The thing that always kind of put me off regarding Elixir was the dynamic
typing. I’m a static typing person; it solves a LOT of common issues in my
day-to-day job and provides cool benefits like:</p>
<ul>
<li>Less runtime errors, since the compiler YELLS at you when something is wrong
about your code structure.</li>
<li>Trust in what goes to production, since it was approved by the boss (the
compiler).</li>
<li>Code with typing indications is often (not always, but still, often) clearer
and easier to understand. If the documentation is incomplete or non-existent,
you still have something to go by, and new engineers can start contributing
faster.</li>
<li>Coding by thinking about the data structure FIRST, and then, the
implementation matches my thinking process.</li>
</ul>
<p>Anyway, you get it, I a type-sexual.</p>
<p>So, one day, I was googling “Static typing elixir”, and I saw
<a href="https://gleam.run">Gleam</a> in the results. What did I do? I just ignored the
thing and moved on.</p>
<p><strong>WHY ?</strong></p>
<p>Because I’m more mature than ever. Like look, I did my due diligence on Gleam:
adoption, use cases, versions (it was on v0.something), and I wasn’t impressed.
I thought that Gleam was super early, a cool gimmick, an experimental toy, but
it stayed somewhere in my brain, in the box where I put the stuff I might get
into, but not RIGHT NOW.</p>
<p><img src="https://christopher.engineering/_astro/things-to-learn.CBPM5iSX_ng9Ue.webp" alt="Drawing representing the things I want to keep an eye on vs the things that are requiring my immediate attention, Gleam falls into the things I want to keep an eye on category" width="2943" height="1206" loading="lazy" decoding="async"/></p><h2 id="what-gleam-brings-to-the-table">What Gleam brings to the table</h2>
<p>Fast forward, it’s March 1st, 2024:
<a href="https://gleam.run/news/gleam-version-1/">Gleam is officially on V1</a>. I read the
changelog, I get the SDK to play with the language and folks… the vibes are
IMMACULATE. I’m starting to regret the time I had the occasion to be involved
super early (I know it’s dumb), but as they (idk who’s “they”) said, better late
than never.</p>
<p>I’ll go through the features I love the most and tell you what I like, and what
can be better.</p>
<h3 id="types-and-structures">Types and structures</h3>
<p>I think it’s BEAUTIFUL, like:</p>
<pre tabindex="0" data-language="gleam"><code><span><span>type</span><span> Vehicle</span><span> {</span></span>
<span><span>  Car</span><span>(</span><span>make: </span><span>String</span><span>, </span><span>brand: </span><span>String</span><span>)</span></span>
<span><span>  Skateboard</span><span>(</span><span>brand: </span><span>String</span><span>)</span></span>
<span><span>  Spaceship</span><span>(</span><span>year: </span><span>Int</span><span>)</span></span>
<span><span>}</span></span>
<span></span></code></pre>
<p>What you’re seeing here is a Gleam <code>custom type</code> or <code>Record</code>, with <code>Vehicle</code>
being the type’s name, <code>Car</code>, <code>Skateboard</code>, and <code>Spaceship</code> being the
constructors available for this type. This is basically a tagged union, or if
you prefer, some sort of enumeration, where each member gets its own set of
attributes. It’s being used like:</p>
<pre tabindex="0" data-language="gleam"><code><span><span>let</span><span> my_car </span><span>=</span><span> Car</span><span>(</span><span>&#34;Honda&#34;</span><span>, </span><span>&#34;Civic&#34;</span><span>)</span></span>
<span></span></code></pre>
<p>and it allows pretty cool structures, like this cute pattern matching:</p>
<pre tabindex="0" data-language="gleam"><code><span><span>fn</span><span> get_driving_requirements</span><span>(</span><span>vehicule: </span><span>Vehicle</span><span>) </span><span>-&gt;</span><span> String</span><span> {</span></span>
<span><span>  case</span><span> vehicule {</span></span>
<span><span>    Car</span><span>(make, brand) </span><span>-&gt;</span></span>
<span><span>      &#34;To drive the car &#34;</span></span>
<span><span>      &lt;&gt;</span><span> make</span></span>
<span><span>      &lt;&gt;</span><span> &#34; &#34;</span></span>
<span><span>      &lt;&gt;</span><span> brand</span></span>
<span><span>      &lt;&gt;</span><span> &#34;, your need a driver licence.&#34;</span></span>
<span><span>    Skateboard</span><span>(brand) </span><span>-&gt;</span><span> &#34;Anybody can ride a &#34;</span><span> &lt;&gt;</span><span> brand </span><span>&lt;&gt;</span><span> &#34; skateboard!&#34;</span></span>
<span><span>    Spaceship</span><span>(</span><span>_</span><span>) </span><span>-&gt;</span><span> &#34;You need to be a NASA astronaut for that!&#34;</span></span>
<span><span>  }</span></span>
<span><span>}</span></span>
<span></span></code></pre>
<p>Let’s spend some time on the function above:</p>
<ol>
<li><code>get_driving_requirements</code> takes only one <code>Vehicle</code> type argument and returns
a <code>String</code>. Both Gleam’s compiler and LSP will let you know if any of those
conditions are not respected. Specifying what a function returns in Gleam is
optional; due to type inference, Gleam will understand it anyway.</li>
<li>In the function’s body, you can see the <code>case</code> structure. This is how you
perform pattern matching, which is essentially a switch control on steroids.
Using a <code>case</code>, you can execute code path if a specific pattern is matched
for a given variable. It’s pretty crazy how deeply you leverage this
technique. In my example, I check every possible constructor for the
<code>vehicle</code> variable. Once again, the tooling will alert you if your pattern
matching is not exhaustive (safety first!).</li>
</ol>
<p>It’s super expressive, the code is concise and elegant (to me).</p>
<h3 id="gleams-tooling">Gleam’s tooling…</h3>
<p>…is CRAZY. Like, crazy CRAZY. I spent so much time in the cursed lands of
Javascript that I forgot grass could be THIS green elsewhere. The only thing you
need to do it to install the <code>gleam</code> CLI. To do so, I used
<a href="https://asdf-vm.com/">asdf</a>, but you can do the same using any other package
manager like Homebrew. What does the <code>gleam</code> command do? Check this out:</p>
<pre tabindex="0" data-language="bash"><code><span><span>❯</span><span> gleam</span></span>
<span><span>gleam</span><span> 1.2.0-rc1</span></span>
<span></span>
<span><span>Usage:</span><span> gleam</span><span> &lt;</span><span>COMMAN</span><span>D</span><span>&gt;</span></span>
<span></span>
<span><span>Commands:</span></span>
<span><span>  add</span><span>      Add</span><span> new</span><span> project</span><span> dependencies</span></span>
<span><span>  build</span><span>    Build</span><span> the</span><span> project</span></span>
<span><span>  check</span><span>    Type</span><span> check</span><span> the</span><span> project</span></span>
<span><span>  clean</span><span>    Clean</span><span> build</span><span> artifacts</span></span>
<span><span>  deps</span><span>     Work</span><span> with</span><span> dependency</span><span> packages</span></span>
<span><span>  docs</span><span>     Render</span><span> HTML</span><span> documentation</span></span>
<span><span>  export</span><span>   Export something useful from the Gleam project</span></span>
<span><span>  fix</span><span>      Rewrite</span><span> deprecated</span><span> Gleam</span><span> code</span></span>
<span><span>  format</span><span>   Format</span><span> source</span><span> code</span></span>
<span><span>  help</span><span>     Print</span><span> this</span><span> message</span><span> or</span><span> the</span><span> help</span><span> of</span><span> the</span><span> given</span><span> subcommand</span><span>(</span><span>s</span><span>)</span></span>
<span><span>  hex</span><span>      Work</span><span> with</span><span> the</span><span> Hex</span><span> package</span><span> manager</span></span>
<span><span>  lsp</span><span>      Run</span><span> the</span><span> language</span><span> server,</span><span> to</span><span> be</span><span> used</span><span> by</span><span> editors</span></span>
<span><span>  new</span><span>      Create</span><span> a</span><span> new</span><span> project</span></span>
<span><span>  publish</span><span>  Publish</span><span> the</span><span> project</span><span> to</span><span> the</span><span> Hex</span><span> package</span><span> manager</span></span>
<span><span>  remove</span><span>   Remove</span><span> project</span><span> dependencies</span></span>
<span><span>  run</span><span>      Run</span><span> the</span><span> project</span></span>
<span><span>  shell</span><span>    Start</span><span> an</span><span> Erlang</span><span> shell</span></span>
<span><span>  test</span><span>     Run</span><span> the</span><span> project</span><span> tests</span></span>
<span><span>  update</span><span>   Update</span><span> dependency</span><span> packages</span><span> to</span><span> their</span><span> latest</span><span> versions</span></span>
<span></span>
<span><span>Options:</span></span>
<span><span>  -h,</span><span> --help</span><span>     Print</span><span> help</span></span>
<span><span>  -V,</span><span> --version</span><span>  Print</span><span> version</span></span>
<span></span></code></pre>
<ul>
<li>package manager ➡️ <code>gleam add</code></li>
<li>repl ➡️ <code>gleam shell</code></li>
<li>test runner ➡️ <code>gleam test</code></li>
<li>formatter ➡️ <code>gleam format</code></li>
<li>lsp ➡️ <code>gleam lsp</code></li>
<li>and more…</li>
</ul>
<p>All you need to get started with Gleam is already in this CLI. You dont’t have
ANYTHING else check, there’s ZERO decision paralysis: THIS-IS-WHAT-WE-WANT.
Javascript makes you pick a tool among hundred of options, for each tool
provided in Gleam’s CLI.</p>
<p>One more thing: each language version comes bundled with its own set of tools;
to prevent tooling incompabilities.</p>
<p>Let’s reuse the previous example:</p>
<pre tabindex="0" data-language="gleam"><code><span><span>import</span><span> gleam</span><span>/</span><span>io</span></span>
<span></span>
<span><span>/// This is some type related to type Vehicle</span></span>
<span><span>type</span><span> Vehicle</span><span> {</span></span>
<span><span>  /// Car type used for... a car I guess...</span></span>
<span><span>  Car</span><span>(</span><span>make: </span><span>String</span><span>, </span><span>brand: </span><span>String</span><span>)</span></span>
<span><span>  Skateboard</span><span>(</span><span>brand: </span><span>String</span><span>)</span></span>
<span><span>  Spaceship</span><span>(</span><span>year: </span><span>Int</span><span>)</span></span>
<span><span>}</span></span>
<span></span>
<span><span>fn</span><span> get_driving_requirements</span><span>(</span><span>vehicle: </span><span>Vehicle</span><span>) </span><span>-&gt;</span><span> String</span><span> {</span></span>
<span><span>  case</span><span> vehicle {</span></span>
<span><span>    Car</span><span>(make, brand) </span><span>-&gt;</span></span>
<span><span>      &#34;To drive the car &#34;</span></span>
<span><span>      &lt;&gt;</span><span> make</span></span>
<span><span>      &lt;&gt;</span><span> &#34; &#34;</span></span>
<span><span>      &lt;&gt;</span><span> brand</span></span>
<span><span>      &lt;&gt;</span><span> &#34;, your need a driver licence.&#34;</span></span>
<span><span>    Spaceship</span><span>(</span><span>_</span><span>) </span><span>-&gt;</span><span> &#34;You need to be a NASA astronaut for that!&#34;</span></span>
<span><span>    Skateboard</span><span>(brand) </span><span>-&gt;</span><span> &#34;Anybody can ride a &#34;</span><span> &lt;&gt;</span><span> brand </span><span>&lt;&gt;</span><span> &#34; skateboard!&#34;</span></span>
<span><span>  }</span></span>
<span><span>}</span></span>
<span></span>
<span><span>pub</span><span> fn</span><span> main</span><span>() {</span></span>
<span><span>  get_driving_requirements</span><span>(</span><span>Car</span><span>(</span><span>make: </span><span>&#34;Hyundai&#34;</span><span>, </span><span>brand: </span><span>&#34;Kona&#34;</span><span>))</span></span>
<span><span>  io.</span><span>println</span><span>(</span><span>&#34;Hello from gl_playground!&#34;</span><span>)</span></span>
<span><span>}</span></span>
<span></span></code></pre>
<p>When I hover my mouse <code>vehcule</code> in my function body, I’m seeing:</p>
<p><img src="https://christopher.engineering/_astro/lsp-example-1.DnMdKRE2_zvw3v.webp" alt="Screenshot showing when you hover on vehicule, your texte editor show your types and documentation thanks to the LSP." width="1694" height="450" loading="lazy" decoding="async"/></p><p>LSP is capable of getting both type and documentation related to the variable.
Another exemple if, what happens when I hover on the <code>Car</code> constructor:</p>
<p><img src="https://christopher.engineering/_astro/lsp-example-2.DRJwV_aI_Z1lhYEl.webp" alt="Screenshot showing when you hover on Car, the LSP shows the custom type name and the constructor&#39;s documentation" width="1432" height="410" loading="lazy" decoding="async"/></p><p>Here, the LSP shows both the parent custom type’name and the associated
documentation.</p>
<p>One last example, when I hover on <code>brand</code>, for the code block executed when
<code>Skateboard</code> is matched:</p>
<p><img src="https://christopher.engineering/_astro/lsp-example-3.DTLffvNX_Z1iSOR0.webp" alt="Screenshot showing that when your hover on brand, it shows the variable type" width="1790" height="980" loading="lazy" decoding="async"/></p><p>The LSP understands that <code>brand</code> is the first attribute in <code>Skateboard</code>.</p>
<p>This is the attention to details that makes you love an ecosystem. It helps you
ship quality code, and it drives the language adoption up: this is a true
win-win situation.</p>
<h3 id="otp-implementation">OTP implementation</h3>
<p>Earlier, I told you that Gleam runs on the
<a href="https://en.wikipedia.org/wiki/BEAM_(Erlang_virtual_machine)">BEAM</a> (never
said that tbh). BEAM means Erlang, and Erlang means OTP. Please, sit down and
relax, cuz I’m about to try to tell you what OTP is about.</p>
<blockquote>
<p>OTP (Open Telecom Platform) is an architecture (and some kind of philosophy)
for building fault-tolerant and highly concurrent software. The key principle
is to divide a program into small execution units called <em>processes</em>
(unrelated to OS processes) and making those processes communicate through
message passing. Those processes can die at any time for any reason, so OTP
advise you to put them under a supervision tree, so that a supervisor (which
is also a process) can restart them. Erlang and Elixir give the developer the
abstractions needed to build on top of OTP, with the BEAM allowing you to run
MILLIONS of processes, even on a tiny server.</p>
</blockquote>
<p><img src="https://christopher.engineering/_astro/big-brain-opt-meme.DmwjBMXb_Z1Wneqo.webp" alt="Big brain meme with &#39;Me when I explain OTP&#39; as a legend" width="568" height="500" loading="lazy" decoding="async"/></p><p>Dang, I really gave my everything on this one, but now you kind of know what OTP
is. That being said, Gleam also has its own OTP primitives, using an
<a href="https://github.com/gleam-lang/otp">external official package</a>. The abstraction
I used the most is the <code>actor</code> (btw, you should learn about the actor model;
this thing is CRAZY). Let me show you how this works:</p>
<pre tabindex="0" data-language="gleam"><code><span><span>import</span><span> gleam</span><span>/</span><span>io</span></span>
<span><span>import</span><span> gleam</span><span>/</span><span>int</span></span>
<span><span>import</span><span> gleam</span><span>/</span><span>erlang</span><span>/</span><span>process.{</span><span>type</span><span> Subject</span><span>}</span></span>
<span><span>import</span><span> gleam</span><span>/</span><span>otp</span><span>/</span><span>actor</span></span>
<span></span>
<span><span>type</span><span> AsyncTaskMessage</span><span> {</span></span>
<span><span>  Increment</span><span>(</span><span>reply_to: </span><span>Subject</span><span>(</span><span>Int</span><span>))</span></span>
<span><span>  Decrement</span><span>(</span><span>reply_to: </span><span>Subject</span><span>(</span><span>Int</span><span>))</span></span>
<span><span>}</span></span>
<span></span>
<span><span>fn</span><span> handle_async_task</span><span>(</span><span>message: </span><span>AsyncTaskMessage</span><span>, </span><span>state: </span><span>Int</span><span>) {</span></span>
<span><span>  case</span><span> message {</span></span>
<span><span>    Increment</span><span>(client) </span><span>-&gt;</span><span> {</span></span>
<span><span>      let</span><span> new_value </span><span>=</span><span> state </span><span>+</span><span> 1</span></span>
<span><span>      process.</span><span>send</span><span>(client, new_value)</span></span>
<span><span>      actor.</span><span>continue</span><span>(new_value)</span></span>
<span><span>    }</span></span>
<span><span>    Decrement</span><span>(client) </span><span>-&gt;</span><span> {</span></span>
<span><span>      let</span><span> new_value </span><span>=</span><span> state </span><span>-</span><span> 1</span></span>
<span><span>      process.</span><span>send</span><span>(client, new_value)</span></span>
<span><span>      actor.</span><span>continue</span><span>(new_value)</span></span>
<span><span>    }</span></span>
<span><span>  }</span></span>
<span><span>}</span></span>
<span></span>
<span><span>fn</span><span> start_async_task</span><span>(</span><span>state: </span><span>Int</span><span>) {</span></span>
<span><span>  actor.</span><span>start</span><span>(state, handle_async_task)</span></span>
<span><span>}</span></span>
<span></span>
<span><span>fn</span><span> main</span><span>() {</span></span>
<span><span>  let</span><span> assert</span><span> Ok</span><span>(actor) </span><span>=</span><span> start_async_task</span><span>(</span><span>0</span><span>)</span></span>
<span><span>  let</span><span> response </span><span>=</span><span> actor.</span><span>call</span><span>(actor, </span><span>fn</span><span>(subject) { </span><span>Increment</span><span>(subject) }, </span><span>10_000</span><span>)</span></span>
<span><span>  io.</span><span>println</span><span>(</span><span>&#34;New value: &#34;</span><span> &lt;&gt;</span><span> int.</span><span>to_string</span><span>(response))</span></span>
<span><span>}</span></span>
<span></span></code></pre>
<p>For a Gleam actor, you need a few things:</p>
<ol>
<li>A custom type for all kind of messages your actor can receive. It’s called
<code>AsyncTaskMessage</code> in this example.</li>
<li>A function which takes a message and a state (the state being whatever you’d
like) and returns a new state, or something indicating that the task should
end. This is <code>handle_async_task</code> in our example.</li>
<li>A function starting everything. In our example this is the <code>start_async</code>
function.</li>
</ol>
<p>With all of these pieces, you get a new stateful process that can live on its
own. You can send messages for it to do… stuffs, I guess. Yeah, I know the
demo is kind of lame, BUT it shows you how powerful Gleam’s type system is when
coupled with OTP. You cannot send any message to your process that isn’t
type-checked <strong>AT COMPILE TIME</strong>!</p>
<p>Something less cool, is the fact that OTP isn’t fully ported to Gleam. Few
features, like
<a href="https://medium.com/@StevenLeiva1/elixir-process-registries-a27f813d94e3">Registries</a>
are missing…</p>
<h3 id="lustre-a-curious-web-framework">Lustre, a curious web framework</h3>
<p><strong>YEAH, I KNOW</strong>, another new web framework. You have to understand, a new
language needs that kind of popular tooling. Some people (web devs) are waiting
for it. <a href="https://hexdocs.pm/lustre/4.2.4/">Lustre</a> is a Gleam web framework.
It’s been around in Gleam ecosystem for a long time and I think, is mature in
Gleam’s context.</p>
<p>I didn’t tried it yet, (it should be one of my next article), but we’re talking
about a tech with a lot of cool features:</p>
<ul>
<li>It’s isomorphic, it’s running on both backend and frontend.</li>
<li>It’s heavily inspired from <a href="https://elm-lang.org/">Elm</a>, this scary thing we
got from weed smoking Haskell geniuses (this is a compliment, huge respect for
them).</li>
<li>It’s opinionated, from an app to another, you supposed to see the same
conventions and code structure.</li>
</ul>
<p>I’ll let you check <a href="https://hexdocs.pm/lustre/4.2.4/">the documentation</a> and see
if it’s something that you’d be interrested in.</p>
<h3 id="javascript-interoperability">Javascript, interoperability</h3>
<p><img src="https://christopher.engineering/_astro/gleam-js.BZ_mi_eg_PHtwa.svg" alt="Edit show both Gleam&#39;s and Javascript logo" width="2105" height="2016" loading="lazy" decoding="async"/></p><p>I JUST TOLD YOU!!! Gleam has a web framework and it’s ISOMORPHIC. How does it
run on web? It runs because Gleam can transpile to Javascript. This is an
interesting strategy. They are trying to convince the easiest crowd: Javascript
developers. Those people (me, I’m “these people”) are tired of Typescript /
Javascript nonsense. They’re looking for simplicity, robustness and Gleam has
all the tool they need for that. There’s few players in this space, like
<a href="https://reasonml.github.io/">ReasonML</a> and
<a href="https://rescript-lang.org/">ReScript</a>.</p>
<p>Check the code below:</p>
<pre tabindex="0" data-language="gleam"><code><span><span>import</span><span> gleam</span><span>/</span><span>io</span></span>
<span></span>
<span><span>type</span><span> Vehicle</span><span> {</span></span>
<span><span>  Car</span><span>(</span><span>make: </span><span>String</span><span>, </span><span>brand: </span><span>String</span><span>)</span></span>
<span><span>  Skateboard</span><span>(</span><span>brand: </span><span>String</span><span>)</span></span>
<span><span>  Spaceship</span><span>(</span><span>year: </span><span>Int</span><span>)</span></span>
<span><span>}</span></span>
<span></span>
<span><span>fn</span><span> get_driving_requirements</span><span>(</span><span>vehicle: </span><span>Vehicle</span><span>) </span><span>-&gt;</span><span> String</span><span> {</span></span>
<span><span>  case</span><span> vehicle {</span></span>
<span><span>    Car</span><span>(make, brand) </span><span>-&gt;</span></span>
<span><span>      &#34;To drive the car &#34;</span></span>
<span><span>      &lt;&gt;</span><span> make</span></span>
<span><span>      &lt;&gt;</span><span> &#34; &#34;</span></span>
<span><span>      &lt;&gt;</span><span> brand</span></span>
<span><span>      &lt;&gt;</span><span> &#34;, your need a driver licence.&#34;</span></span>
<span><span>    Spaceship</span><span>(</span><span>_</span><span>) </span><span>-&gt;</span><span> &#34;You need to be a NASA astronaut for that!&#34;</span></span>
<span><span>    Skateboard</span><span>(brand) </span><span>-&gt;</span><span> &#34;Anybody can ride a &#34;</span><span> &lt;&gt;</span><span> brand </span><span>&lt;&gt;</span><span> &#34; skateboard!&#34;</span></span>
<span><span>  }</span></span>
<span><span>}</span></span>
<span></span>
<span><span>pub</span><span> fn</span><span> main</span><span>() {</span></span>
<span><span>  Car</span><span>(</span><span>make: </span><span>&#34;Hyundai&#34;</span><span>, </span><span>brand: </span><span>&#34;Kona&#34;</span><span>)</span></span>
<span><span>  |&gt;</span><span> get_driving_requirements</span><span>()</span></span>
<span><span>  |&gt;</span><span> io.</span><span>println</span><span>()</span></span>
<span><span>}</span></span>
<span></span></code></pre>
<p>This snippet is quite at exposing Gleam’s key features, there’s types, pattern
matching, pipe operator… See below the Javascript output after running
<code>gleam build --target javascript</code>:</p>
<pre tabindex="0" data-language="javascript"><code><span><span>import</span><span> *</span><span> as</span><span> $io </span><span>from</span><span> &#34;../gleam_stdlib/gleam/io.mjs&#34;</span><span>;</span></span>
<span><span>import</span><span> { CustomType </span><span>as</span><span> $CustomType } </span><span>from</span><span> &#34;./gleam.mjs&#34;</span><span>;</span></span>
<span></span>
<span><span>class</span><span> Car</span><span> extends</span><span> $CustomType</span><span> {</span></span>
<span><span>  constructor</span><span>(</span><span>make</span><span>, </span><span>brand</span><span>) {</span></span>
<span><span>    super</span><span>();</span></span>
<span><span>    this</span><span>.make </span><span>=</span><span> make;</span></span>
<span><span>    this</span><span>.brand </span><span>=</span><span> brand;</span></span>
<span><span>  }</span></span>
<span><span>}</span></span>
<span></span>
<span><span>class</span><span> Skateboard</span><span> extends</span><span> $CustomType</span><span> {</span></span>
<span><span>  constructor</span><span>(</span><span>brand</span><span>) {</span></span>
<span><span>    super</span><span>();</span></span>
<span><span>    this</span><span>.brand </span><span>=</span><span> brand;</span></span>
<span><span>  }</span></span>
<span><span>}</span></span>
<span></span>
<span><span>class</span><span> Spaceship</span><span> extends</span><span> $CustomType</span><span> {</span></span>
<span><span>  constructor</span><span>(</span><span>year</span><span>) {</span></span>
<span><span>    super</span><span>();</span></span>
<span><span>    this</span><span>.year </span><span>=</span><span> year;</span></span>
<span><span>  }</span></span>
<span><span>}</span></span>
<span></span>
<span><span>function</span><span> get_driving_requirements</span><span>(</span><span>vehicle</span><span>) {</span></span>
<span><span>  if</span><span> (vehicle </span><span>instanceof</span><span> Car</span><span>) {</span></span>
<span><span>    let</span><span> make </span><span>=</span><span> vehicle.make;</span></span>
<span><span>    let</span><span> brand </span><span>=</span><span> vehicle.brand;</span></span>
<span><span>    return</span><span> (</span></span>
<span><span>      &#34;To drive the car &#34;</span><span> +</span><span> make </span><span>+</span><span> &#34; &#34;</span><span> +</span><span> brand </span><span>+</span><span> &#34;, your need a driver licence.&#34;</span></span>
<span><span>    );</span></span>
<span><span>  } </span><span>else</span><span> if</span><span> (vehicle </span><span>instanceof</span><span> Spaceship</span><span>) {</span></span>
<span><span>    return</span><span> &#34;You need to be a NASA astronaut for that!&#34;</span><span>;</span></span>
<span><span>  } </span><span>else</span><span> {</span></span>
<span><span>    let</span><span> brand </span><span>=</span><span> vehicle.brand;</span></span>
<span><span>    return</span><span> &#34;Anybody can ride a &#34;</span><span> +</span><span> brand </span><span>+</span><span> &#34; skateboard!&#34;</span><span>;</span></span>
<span><span>  }</span></span>
<span><span>}</span></span>
<span></span>
<span><span>export</span><span> function</span><span> main</span><span>() {</span></span>
<span><span>  let</span><span> _pipe </span><span>=</span><span> new</span><span> Car</span><span>(</span><span>&#34;Hyundai&#34;</span><span>, </span><span>&#34;Kona&#34;</span><span>);</span></span>
<span><span>  let</span><span> _pipe$1 </span><span>=</span><span> get_driving_requirements</span><span>(_pipe);</span></span>
<span><span>  return</span><span> $io.</span><span>println</span><span>(_pipe$1);</span></span>
<span><span>}</span></span>
<span></span></code></pre>
<p>The JS code you’re getting is super understandable. You can read it, debug it
and understand how Gleam transforms Gleam code into Javascript code. There are
two important imports:</p>
<ol>
<li><code>$io</code>, which is library that matches what we have in the std lib <code>gleam/io</code>.</li>
<li><code>CustomType</code>, which is a class imported from <code>prelude.mjs</code>, that contains
stuff Gleam needs when operating in a Javascript context.</li>
</ol>
<h2 id="whats-next-with-gleam">What’s next with Gleam</h2>
<p>We spoke briefly about everything interesting with Gleam. As you may have
noticed, there’s nothing that I dislike, for now. I’ll keep experimenting while
doing <a href="https://app.codecrafters.io/join?via=Christopher2K">CodeCrafters puzzles</a>
(sponsored link). I’m currently building my own Redis with Gleam. Hit me up on
Twitter or Twitch if you want to talk about it.</p>  </div></div>
  </body>
</html>
