<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.antoyo.xyz/rustc_codegen_gcc-progress-report-10">Original</a>
    <h1>Rustc_codegen_GCC can now bootstrap rustc</h1>
    
    <div id="readability-page-1" class="page"><div>

        <div>
<h2 id="what_is_rustc_codegen_gcc">What is rustc_codegen_gcc?</h2>
<div>
<p><a href="https://github.com/rust-lang/rustc_codegen_gcc">rustc_codegen_gcc</a> is a
GCC codegen for rustc, meaning that it can be loaded by the existing
rustc frontend, but benefits from GCC by having more architectures
supported and having access to GCC’s optimizations.</p>
</div>
</div>
<div>
<h2 id="gcc_patches_status">GCC patches status</h2>
<div>
<p>No progress on the review of my GCC patches this month.</p>
<p>I did some work that will result in patches when they’re ready:</p>

</div>
</div>
<div>
<h2 id="state_of_rustc_codegen_gcc">State of rustc_codegen_gcc</h2>
<div>
<p>Here’s what has been done this month:</p>

<p>As you may have guessed from the title of this blog post, the GCC codegen has made enough progress to be able to compile rustc itself!
That’s a huge milestone!</p>
<p>I was able to compile rustc using the GCC codegen and use the resulting rustc to compile a Hello World!</p>
<p>Thanks to bjorn3 who helped me a lot by testing the process of compiling rustc with the GCC codegen, reporting the errors encountered to me, helping me to fix some of those and answering my questions!</p>
<p>The SIMD work is not over, but a good part of it was done. I implemented enough of it to allow bootstrapping the compiler.</p>
<div>
<h3 id="ui_tests_progress">UI tests progress</h3>
<p>Here are the results of running the UI tests in the <a href="https://github.com/rust-lang/rustc_codegen_gcc/runs/5772606543?check_suite_focus=true#step:17:9349">CI</a>:</p>
<table>
<colgroup>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<thead>
<tr>
<th>Category</th>
<th>Last Month</th>
<th>This Month</th>
<th>Delta</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>Passed</p></td>
<td><p>4542</p></td>
<td><p>4598</p></td>
<td><p>+56</p></td>
</tr>
<tr>
<td><p>Failed</p></td>
<td><p>49</p></td>
<td><p>64</p></td>
<td><p>+15</p></td>
</tr>
</tbody>
</table>
<p>More tests are failing now because I enabled the tests for SIMD which were disabled before.
Some other tests are disabled and I will enable them when I start working on the features they test.</p>
<p>For the next month, I’ll continue working on SIMD support and perhaps start working on unwinding support.</p>
</div>
</div>
</div>
<div>
<h2 id="how_to_contribute">How to contribute</h2>
<div>
<div>
<h3 id="rustc_codegen_gcc"><code>rustc_codegen_gcc</code></h3>
<p>If you want to help on the project itself, please do the following:</p>
<div>
<ol>
<li>
<p>Run the tests locally.</p>
</li>
<li>
<p>Choose a test that fails.</p>
</li>
<li>
<p>Investigate why it fails.</p>
</li>
<li>
<p>Fix the problem.</p>
</li>
</ol>
</div>
<p>Even if you can’t fix the problem, your investigation could help, so
if you enjoy staring at assembly code, have fun!</p>
</div>
<div>
<h3 id="crates_and_rustc">Crates and rustc</h3>
<p>If you would like to contribute on adding support for Rust on
currently unsupported platforms, you can help by adding the support
for those platforms in some crates like <code>libc</code> and <code>object</code> and also
in the rust compiler itself.</p>
</div>
<div>
<h3 id="test_this_project">Test this project</h3>
<p>Otherwise, you can test this project on new platforms and also compare
the assembly with LLVM to see if some optimization is missing.</p>
</div>
<div>
<h3 id="good_first_issue">Good first issue</h3>
<p>Finally, another good way to help is to look at <a href="https://github.com/rust-lang/rustc_codegen_gcc/issues?q=is%3Aissue+is%3Aopen+label%3A%22good+first+issue%22">good first issues</a>. Those are issues that should be easier to start with.</p>
</div>
</div>
</div>
<div>
<h2 id="thanks_for_your_support">Thanks for your support!</h2>
<div>
<p>I wanted to personally thank all the people that sponsor this project:
your support is very much appreciated.</p>
<p>A special thanks to the following sponsors:</p>
<div>
<ul>
<li>
<p>saethlin</p>
</li>
<li>
<p>embark-studios</p>
</li>
<li>
<p>Traverse-Research</p>
</li>
<li>
<p>Thomas Colliers</p>
</li>
<li>
<p>Shnatsel</p>
</li>
</ul>
</div>
<p>A big thank you to bjorn3 for his help, contributions and reviews.
And a big thank you to lqd and <a href="https://github.com/GuillaumeGomez">GuillaumeGomez</a> for answering my
questions about rustc’s internals.
Another big thank you to Commeownist for his contributions.</p>
<p>Also, a big thank you to the rest of my sponsors:</p>
<div>
<ul>
<li>
<p>kpp</p>
</li>
<li>
<p>0x7CFE</p>
</li>
<li>
<p>repi</p>
</li>
<li>
<p>nevi-me</p>
</li>
<li>
<p>oleid</p>
</li>
<li>
<p>acshi</p>
</li>
<li>
<p>joshtriplett</p>
</li>
<li>
<p>djc</p>
</li>
<li>
<p>TimNN</p>
</li>
<li>
<p>sdroege</p>
</li>
<li>
<p>pcn</p>
</li>
<li>
<p>alanfalloon</p>
</li>
<li>
<p>steven-joruk</p>
</li>
<li>
<p>davidlattimore</p>
</li>
<li>
<p>Nehliin</p>
</li>
<li>
<p>colelawrence</p>
</li>
<li>
<p>zmanian</p>
</li>
<li>
<p>alexkirsz</p>
</li>
<li>
<p>regiontog</p>
</li>
<li>
<p>berkus</p>
</li>
<li>
<p>wezm</p>
</li>
<li>
<p>belzael</p>
</li>
<li>
<p>vincentdephily</p>
</li>
<li>
<p>mexus</p>
</li>
<li>
<p>jam1garner</p>
</li>
<li>
<p>yvt</p>
</li>
<li>
<p>Shoeboxam</p>
</li>
<li>
<p>evanrichter</p>
</li>
<li>
<p>stuhood</p>
</li>
<li>
<p>yerke</p>
</li>
<li>
<p>bes</p>
</li>
<li>
<p>raymanfx</p>
</li>
<li>
<p>seanpianka</p>
</li>
<li>
<p>srijs</p>
</li>
<li>
<p>kkysen</p>
</li>
<li>
<p>messense</p>
</li>
<li>
<p>riking</p>
</li>
<li>
<p>rafaelcaricio</p>
</li>
<li>
<p>Lemmih</p>
</li>
<li>
<p>memoryruins</p>
</li>
<li>
<p>pthariensflame</p>
</li>
<li>
<p>senden9</p>
</li>
<li>
<p>Hofer-Julian</p>
</li>
<li>
<p>robjtede</p>
</li>
<li>
<p>Jonas Platte</p>
</li>
<li>
<p>spike grobstein</p>
</li>
<li>
<p>Oliver Marshall</p>
</li>
<li>
<p>Sam Harrington</p>
</li>
<li>
<p>Jonas</p>
</li>
<li>
<p>Jeff Muizelaar</p>
</li>
<li>
<p>Chris Butler</p>
</li>
<li>
<p>sierrafiveseven</p>
</li>
<li>
<p>Joseph Garvin</p>
</li>
<li>
<p>icewind</p>
</li>
<li>
<p>Sebastian Zivota</p>
</li>
<li>
<p>Oskar Nehlin</p>
</li>
<li>
<p>Nicolas Barbier</p>
</li>
<li>
<p>Daniel</p>
</li>
<li>
<p>Justin Ossevoort</p>
</li>
<li>
<p>sstadick</p>
</li>
<li>
<p>luizirber</p>
</li>
<li>
<p>kiyoshigawa</p>
</li>
<li>
<p>robinmoussu</p>
</li>
<li>
<p>Daniel Sheehan</p>
</li>
</ul>
</div>
<p>and a few others who preferred to stay anonymous.</p>
</div>
</div>

    </div></div>
  </body>
</html>
