<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://xenodium.com/a-chatgpt-emacs-shell/">Original</a>
    <h1>A ChatGPT Emacs Shell</h1>
    
    <div id="readability-page-1" class="page"><div id="text-a-chatgpt-emacs-shell">
<p>
I had been meaning to give <a href="https://openai.com/blog/chatgpt">ChatGPT</a> a go. Preferably from Emacs. As an <a href="https://www.gnu.org/software/emacs/manual/html_mono/eshell.html">eshell</a> fan, ChatGPT just seemed like the perfect fit for a shell interface sorts. With that in mind, I set out to wire ChatGPT out with Emacs&#39;s general command interpreter (<a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Shell-Prompts.html">comint</a>).
</p>

<p>
I had no previous experience building anything comint-related, so I figured I could just take a peak at an existing comint-derived mode to achieve a similar purpose. <code>inferior-emacs-lisp-mode</code> (<a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Lisp-Interaction.html">ielm</a>) seemed to fit the bill just fine, so I borrowed quite a bit to assemble a basic shell experience.
</p>

<p>
From then on, it was mostly about sending each request over to the ChatGPT API to get a response. For now, I&#39;m relying on <a href="https://curl.se/docs/manpage.html">curl</a> to make each request. The invocation is fairly straightforward:
</p>

<div>
<pre>curl <span>&#34;https://api.openai.com/v1/chat/completions&#34;</span> <span>\</span>
     -H <span>&#34;Authorization: Bearer YOUR_OPENAI_KEY&#34;</span> <span>\</span>
     -H <span>&#34;Content-Type: application/json&#34;</span> <span>\</span>
     -d <span>&#34;{</span>
<span>     \&#34;model\&#34;: \&#34;gpt-3.5-turbo\&#34;,</span>
<span>     \&#34;messages\&#34;: [{\&#34;role\&#34;: \&#34;user\&#34;, \&#34;content\&#34;: \&#34;YOUR PROMPT\&#34;}]</span>
<span>     }&#34;</span>
</pre>
</div>

<p>
There are two bits of information needed in each request. The API key, which you must get from <a href="https://openai.com/">OpenAI</a>, and the prompt text itself (i.e. whatever you want ChatGPT to help you with). The results are not too shabby.
</p>


<p><img src="https://xenodium.com/images/a-chatgpt-emacs-shell/chatgpt.webp" alt="chatgpt.webp" width="80%"/>
</p>

<p>
I&#39;ve uploaded the code to github as a tiny <a href="https://github.com/xenodium/chatgpt-shell">chatgpt-shell</a> package. It&#39;s a little experimental and rough still, but hey it does the job for now. Head over to <a href="https://github.com/xenodium/chatgpt-shell">github</a> to take a look. The latest iteration handles multiline prompts and basic code highlighting.
</p>

<p>
Let&#39;s see where it all goes. Pull requests for improvements totally welcome ;-)
</p>
</div></div>
  </body>
</html>
