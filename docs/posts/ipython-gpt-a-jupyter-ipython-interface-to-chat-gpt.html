<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/santiagobasulto/ipython-gpt">Original</a>
    <h1>Show HN: IPython-GPT, a Jupyter/IPython Interface to Chat GPT</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto">This extension allows you to use ChatGPT directly from your Jupyter Notebook or IPython Shell (<a href="https://github.com/santiagobasulto/ipython-gpt/blob/master/Demo.ipynb">Demo</a>).</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/872296/232230454-44529ea4-920e-4294-9d61-550771a4a95e.png"><img width="900" alt="IPython GPT, a Jupyter/IPython interface for Chat GPT" src="https://user-images.githubusercontent.com/872296/232230454-44529ea4-920e-4294-9d61-550771a4a95e.png"/></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/872296/232230492-9bc50342-9d78-4adb-8168-2f94fcbc3b73.png"><img width="900" alt="IPython GPT, a Jupyter/IPython interface for Chat GPT" src="https://user-images.githubusercontent.com/872296/232230492-9bc50342-9d78-4adb-8168-2f94fcbc3b73.png"/></a></p>
<p dir="auto"><strong>Important!</strong> This is a very early and raw version, I have a lot of things to improve regarding code quality and missing functionality.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-installation" aria-hidden="true" href="#installation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Installation</h2>

<p dir="auto">Then in your notebook or ipython shell:</p>

<h2 tabindex="-1" dir="auto"><a id="user-content-setup" aria-hidden="true" href="#setup"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Setup</h2>
<p dir="auto">You must first generate an API key at OpenAI (<a href="https://platform.openai.com/account/api-keys" rel="nofollow">https://platform.openai.com/account/api-keys</a>) and set is an environment variable <code>OPENAI_API_KEY</code>. You can do it by modifying your <code>.bashrc/.zshrc</code> or starting jupyter with it:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ OPENAI_API_KEY=[YOUR-KEY] jupyter lab
# ...
$ OPENAI_API_KEY=[YOUR-KEY] ipython"><pre>$ OPENAI_API_KEY=[YOUR-KEY] jupyter lab
<span><span>#</span> ...</span>
$ OPENAI_API_KEY=[YOUR-KEY] ipython</pre></div>
<p dir="auto">There are a few other ways to set the API KEY, but the envvar is the recommended one.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-chatgpt-api" aria-hidden="true" href="#chatgpt-api"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>ChatGPT API</h2>
<p dir="auto">The command <code>%%chat</code> interfaces with ChatGPT. It accepts multiple parameters (see Usage). Here&#39;s an example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="%%chat --max-tokens=25

What&#39;s the purpose of life?
...

&gt;&gt;&gt; CHAT RESPONSE"><pre><span>%</span><span>%</span><span>chat</span> <span>-</span><span>-</span><span>max</span><span>-</span><span>tokens</span><span>=</span><span>25</span>

<span>What</span>&#39;<span>s</span> <span>the</span> <span>purpose</span> <span>of</span> <span>life</span>?
...

<span>&gt;&gt;</span><span>&gt;</span> <span>CHAT</span> <span>RESPONSE</span></pre></div>
<p dir="auto"><strong>Important</strong> by default, the <code>%%chat</code> command preserves the conversation to give the Agent some context, in the same way that ChatGPT works. You can &#34;reset&#34; its status passing the flag <code>--reset-conversation</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="%%chat --reset-conversation

How can I avoid pandas using scientific notation in outputs, and do it globally?
...
...
&gt;&gt;&gt; CHAT RESPONSE"><pre><span>%</span><span>%</span><span>chat</span> <span>-</span><span>-</span><span>reset</span><span>-</span><span>conversation</span>

<span>How</span> <span>can</span> <span>I</span> <span>avoid</span> <span>pandas</span> <span>using</span> <span>scientific</span> <span>notation</span> <span>in</span> <span>outputs</span>, <span>and</span> <span>do</span> <span>it</span> <span>globally</span>?
...
...
<span>&gt;&gt;</span><span>&gt;</span> <span>CHAT</span> <span>RESPONSE</span></pre></div>
<h2 tabindex="-1" dir="auto"><a id="user-content-agents-role-system-message-and-other-chat-parameters" aria-hidden="true" href="#agents-role-system-message-and-other-chat-parameters"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Agent&#39;s role (system message) and other chat parameters</h2>
<p dir="auto">By default, the Chat is started with the role: <em>&#34;You&#39;re a python data science coding assistant&#34;</em>. You can change that by passing something different in your first <code>%%chat</code>:</p>
<div data-snippet-clipboard-copy-content="%%chat --system-message=&#34;You&#39;re a R Data Science assistant&#34;

Your message..."><pre lang="ipython"><code>%%chat --system-message=&#34;You&#39;re a R Data Science assistant&#34;

Your message...
</code></pre></div>
<p dir="auto">Once the conversation has started, you can&#39;t change the original message, as the context is preserved. To do so, you must reset the conversation:</p>
<div data-snippet-clipboard-copy-content="%%chat --system-message=&#34;You&#39;re a R Data Science assistant&#34; --reset-conversation

Your message..."><pre lang="ipython"><code>%%chat --system-message=&#34;You&#39;re a R Data Science assistant&#34; --reset-conversation

Your message...
</code></pre></div>
<h2 tabindex="-1" dir="auto"><a id="user-content-setting-global-config" aria-hidden="true" href="#setting-global-config"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Setting global config</h2>
<p dir="auto">You can change the defaults using the <code>%chat_config</code> line magic:</p>
<div data-snippet-clipboard-copy-content="%chat_config --system-message=&#34;You&#39;re an R data scientist coding assistant specialized in visualizations&#34; --model &#34;other model&#34; --reset-conversation"><pre lang="ipython"><code>%chat_config --system-message=&#34;You&#39;re an R data scientist coding assistant specialized in visualizations&#34; --model &#34;other model&#34; --reset-conversation
</code></pre></div>
<p dir="auto">Invoke it without parameters to see the defaults set:</p>
<div dir="auto" data-snippet-clipboard-copy-content="%chat_config
...

&gt;&gt;&gt;
##### Conf set:

* **Default model**: gpt-3.5-turbo
* **Default system message**: You&#39;re a python data science coding assistant
* **Chat history length**: 0"><pre><span>%</span><span>chat_config</span>
...

<span>&gt;&gt;</span><span>&gt;</span>
<span>##### Conf set:</span>

<span>*</span> <span>**</span><span>Default</span> <span>model</span><span>**</span>: <span>gpt</span><span>-</span><span>3.5</span><span>-</span><span>turbo</span>
<span>*</span> <span>**</span><span>Default</span> <span>system</span> <span>message</span><span>**</span>: <span>You</span>&#39;<span>re</span> <span>a</span> <span>python</span> <span>data</span> <span>science</span> <span>coding</span> <span>assistant</span>
<span>*</span> <span>**</span><span>Chat</span> <span>history</span> <span>length</span><span>**</span>: <span>0</span></pre></div>
<h2 tabindex="-1" dir="auto"><a id="user-content-other-methods" aria-hidden="true" href="#other-methods"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Other methods</h2>
<h4 tabindex="-1" dir="auto"><a id="user-content-display-available-models" aria-hidden="true" href="#display-available-models"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Display available models</h4>
<p dir="auto">Usage:</p>
<div dir="auto" data-snippet-clipboard-copy-content="%chat_models [--all-models]"><pre>%chat_models [--all-models]</pre></div>

<h5 tabindex="-1" dir="auto"><a id="user-content-available-models" aria-hidden="true" href="#available-models"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Available models:</h5>
<div data-snippet-clipboard-copy-content="- gpt-3.5-turbo-0301
- gpt-3.5-turbo"><pre><code>- gpt-3.5-turbo-0301
- gpt-3.5-turbo
</code></pre></div>
<h4 tabindex="-1" dir="auto"><a id="user-content-display-usage-and-accepted-parameters" aria-hidden="true" href="#display-usage-and-accepted-parameters"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Display usage and accepted parameters</h4>
<div dir="auto" data-snippet-clipboard-copy-content="%reload_ext ipython_gpt
%chat_help
...


    usage: ipykernel_launcher.py [-h] [--openai-api-key OPENAI_API_KEY]
                                 [--reset-conversation]
                                 [--system-message SYSTEM_MESSAGE]
                                 [--no-system-message] [--model MODEL]
                                 [--temperature TEMPERATURE]
                                 [--max-tokens MAX_TOKENS] [--all-models]
"><pre><span>%</span><span>reload_ext</span> <span>ipython_gpt</span>
<span>%</span><span>chat_help</span>
...


    <span>usage</span>: <span>ipykernel_launcher</span>.<span>py</span> [<span>-</span><span>h</span>] [<span>-</span><span>-</span><span>openai</span><span>-</span><span>api</span><span>-</span><span>key</span> <span>OPENAI_API_KEY</span>]
                                 [<span>-</span><span>-</span><span>reset</span><span>-</span><span>conversation</span>]
                                 [<span>-</span><span>-</span><span>system</span><span>-</span><span>message</span> <span>SYSTEM_MESSAGE</span>]
                                 [<span>-</span><span>-</span><span>no</span><span>-</span><span>system</span><span>-</span><span>message</span>] [<span>-</span><span>-</span><span>model</span> <span>MODEL</span>]
                                 [<span>-</span><span>-</span><span>temperature</span> <span>TEMPERATURE</span>]
                                 [<span>-</span><span>-</span><span>max</span><span>-</span><span>tokens</span> <span>MAX_TOKENS</span>] [<span>-</span><span>-</span><span>all</span><span>-</span><span>models</span>]</pre></div>
<h2 tabindex="-1" dir="auto"><a id="user-content-alternative-authentication" aria-hidden="true" href="#alternative-authentication"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Alternative authentication</h2>
<p dir="auto">Aside from setting the environment variable, you can also set <code>OPENAI_API_KEY</code> as a global variable in your notebook, or pass it directly as a parameter in any method ``--openai-api-key=YOUR-KEY`.</p>
<p dir="auto">These alternative methods are NOT recommended, as you might leak your API Key in the notebooks&#39; history, stored in <code>.ipynb_checkpoints</code>.</p>
</article>
          </div></div>
  </body>
</html>
