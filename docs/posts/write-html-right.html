<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="http://lofi.limo/blog/write-html-right">Original</a>
    <h1>Write HTML Right</h1>
    
    <div id="readability-page-1" class="page">
<nav>
Nav:
<a href="http://lofi.limo/">lofi.limo</a>
&gt;
<a href="http://lofi.limo/blog">garage blog</a>
</nav>

<header>

<img id="avatar" width="46" height="46" src="http://lofi.limo/blog/images/avatar.jpeg" alt="Aaron D. Parks smirks knowingly as his eyes meet the camera"/>
<p id="dateline">June 10, 2022

</p><p>
Share:
<a target="_blank" href="https://twitter.com/intent/tweet?text=I+just+read+this+interesting+article+on+the+Lofi+Limo+Garage+Blog%3A&amp;url=https%3A%2F%2Flofi.limo%2Fblog%2Fwrite-html-right">Twitter</a>
<a target="_blank" href="https://www.reddit.com/submit?title=Write+HTML+Right&amp;url=https%3A%2F%2Flofi.limo%2Fblog%2Fwrite-html-right">Reddit</a>
<a target="_blank" href="https://facebook.com/sharer.php?p%5Btitle%5D=Write+HTML+Right&amp;u=https%3A%2F%2Flofi.limo%2Fblog%2Fwrite-html-right">Facebook</a>
<a target="_blank" href="https://www.linkedin.com/shareArticle?title=Write+HTML+Right&amp;url=https%3A%2F%2Flofi.limo%2Fblog%2Fwrite-html-right">Linkedin</a>
<a target="_blank" href="https://t.me/share/url?text=I+just+read+this+interesting+article+on+the+Lofi+Limo+Garage+Blog%3A&amp;url=https%3A%2F%2Flofi.limo%2Fblog%2Fwrite-html-right">Telegram</a>
</p></header>
<p>
A few years ago, I found out I&#39;d been tying my shoes wrong for my entire life.
I thought laces came undone easily and didn&#39;t usually look very good.
At least that&#39;s how mine were, and I never paid much attention to anyone
else&#39;s.
It took a couple of weeks to re-train my hands but now I have bows in my
laces that look good and rarely come undone.

</p><p>
Even with a lot of help from a good text editor, writing HTML can be a drag.
Nice documents end up as tag-swamps with little bits of content perched
atop hills of tabs.
Editing them becomes a test of patience and we get sick at the thought of
having to look at our once-loved text.
It doesn&#39;t have to be like this!
There&#39;s a lightweight, easygoing way to write HTML that&#39;s been around since
the beginning of the web.

</p><h2>Background</h2>

<p>
Way back when the web was just getting started, <code>troff</code> was a
very popular UNIX typesetting package.
<code>troff</code> took marked-up text as input and produced output suitable
for a typesetter or PostScript printer.
Figure 1 shows the beginning of an article marked up for <code>troff</code>.

</p><figure>
<figcaption>Figure 1. A <code>troff</code> document.</figcaption>
<pre><span>.TL</span>
Building a Streaming Music Service with Phoenix and Elixir
<span>.PP</span>
I thought it would be nice to make a streaming music service focused on
bringing lo-fi artists and listeners together.
Early on, I built a series of prototypes to explore with a small group of
listeners and artists.
Since this is a technical article, I&#39;ll jump right into the requirements we
arrived at, though I&#39;d love to also write an article on the strategies
and principles that guided our exploration.
<span>.SH</span>
Requirements
<span>.PP</span>
We liked a loose retro-computing aesthetic with a looping background that
changed from time to time.
We preferred having every listener hear the same song and see the same
background at the same time.
And we liked the idea of sprinkling some &#34;bumpers&#34; or other DJ announcements
between the songs.
</pre>
</figure>

<p>
We see that <code>troff</code> mark-up is quick and easy to write.
There&#39;s very little mark-up needed and it fits around the text rather than
expecting the text to fit around it.
It also plays nice with any text editor: there&#39;s no need for syntax
highlighting, help with balancing tags, or help with indentation.
In fact, <code>troff</code> authors usually started each sentence on a new
line — a practice that made it easier to wrangle text on ancient
paper terminals with <code>ed</code> (back before it got a <u>vi</u>sual mode
for glass terminals and became <code>vi</code>).

</p><p>
With the web came the need (or desire) to write HTML.
The explosive growth of the web community brought lots of new faces to the
Internet and we mostly learned HTML from each other, not from UNIX graybeards
who knew <code>troff</code>.
Figure 2 is the sort of example we learned from.
Its mark-up mirrors the browser&#39;s internal representation of the element tree.

</p><figure>
<figcaption>Figure 2. An HTML document in the common style.</figcaption>
<pre>&lt;!DOCTYPE html&gt;
&lt;html&gt;
	&lt;head&gt;
		&lt;title&gt;
			Building a Streaming Music Service with Phoenix
			and Elixir
		&lt;/title&gt;
	&lt;/head&gt;
	&lt;body&gt;
		&lt;h1&gt;
			Building a Streaming Music Service with Phoenix
			and Elixir
		&lt;/h1&gt;
		&lt;p&gt;
			I thought it would be nice to make a streaming music
			service focused on bringing lo-fi artists and
			listeners together.
			Early on, I built a series of prototypes to explore
			with a small group of listeners and artists.
			Since this is a technical article, I&#39;ll jump right
			into the requirements we arrived at, though I&#39;d
			love to also write an article on the strategies and
			principles that guided our exploration.
		&lt;/p&gt;
		&lt;h2&gt;Requirements&lt;/h2&gt;
		&lt;p&gt;
			We liked a loose retro-computing aesthetic with a
			looping background that changed from time to time.
			We preferred having every listener hear the same
			song at the same time.
			And we liked the idea of sprinkling some &#34;bumpers&#34;
			or other DJ announcements between the songs.
		&lt;/p&gt;
	&lt;/body&gt;
&lt;/html&gt;
</pre>
</figure>

<p>
This style has a lot of mark-up compared to Figure 1, especially if we
count the whitespace introduced by the practice of using indentation to
illustrate the element tree and keep track of matching tags.
Our article takes longer to type and covers more screen, but it has increased
only in bulk — not value.
It&#39;s a fine didactic trick for introductory tutorials, but it had no right
to become codified as “best” practice; we wouldn&#39;t model residential
building codes on a child&#39;s birdhouse.

</p><p>
Figure 3 shows the same article again, marked up in a style that is more
concise and respectful of the text — like <code>troff</code>.

</p><figure>
<figcaption>
Figure 3. An HTML document in the <code>troff</code> style.
</figcaption>
<pre>&lt;!DOCTYPE html&gt;
&lt;title&gt;Building a Streaming Music Service with Phoenix and Elixir&lt;/title&gt;

&lt;h1&gt;Building a Streaming Music Service with Phoenix and Elixir&lt;/h1&gt;

&lt;p&gt;
I thought it would be nice to make a streaming music service focused on
bringing lo-fi artists and listeners together.
Early on, I built a series of prototypes to explore with a small group of
listeners and artists.
Since this is a technical article, I&#39;ll jump right into the requirements we
arrived at, though I&#39;d love to also write an article on the strategies
and principles that guided our exploration.

&lt;h2&gt;Requirements&lt;/h2&gt;

&lt;p&gt;
We liked a loose retro-computing aesthetic with a looping background that
changed from time to time.
We preferred having every listener hear the same song and see the same
background at the same time.
And we liked the idea of sprinkling some &#34;bumpers&#34; or other DJ announcements
between the songs.
</pre>
</figure>

<p>
Wouldn&#39;t this be a more pleasant way to write HTML?
Our text would stand out better from the mark-up and we wouldn&#39;t wear our
fingers out typing tags.
Editing would be easier and we&#39;d need less support from sophisticated text
editors.

</p><p>
This is proper, conformant HTML we can send straight to the browser without
processing, filtering, or compiling it.
Let&#39;s take a closer look!

</p><h2>Tags and Elements</h2>

<p>
Most of us learned to write mark-up for each and every element we wanted
in our document and we learned to balance our tags around each element&#39;s
content.
XML and XHTML doubled down on this vain rigidity, but thankfully finer
sensibilities have since prevailed.

</p><p>
Not only was this effort not necessary, it actually harmed the readability of
the marked-up text and made it harder to edit.
And it didn&#39;t help the machines any, either!
Web browsers can unambiguously parse and render conforming documents which
omit certain tags.
This isn&#39;t a cutting-edge feature: it goes back at least to the the
<a target="_blank" href="http://datatracker.ietf.org/doc/html/rfc1866">original
HTML RFC</a> from November of 1995.

</p><h2>Document Structure</h2>

<p>
The <a target="_blank" href="http://html.spec.whatwg.org/">HTML Standard</a> tells
us that a document has four required elements and that both the start and end
tags may be omitted for three of them.

</p><p>
An HTML document always has as its root an <code>html</code> element.
We can leave out both tags without any confusion.
Likewise, every document has as the sole contents of its root element one
<code>head</code> element and one <code>body</code> element, in that order.
Any content which can only go in the <code>body</code> (and not in the
<code>head</code>) unambiguously indicates the division between the two
elements.
So, that&#39;s four more tags we can leave out.

</p><p>
This dispenses with almost all of the usual boilerplate.
All we really have to have is the document-type declaration and a
<code>title</code>.
Figure 4 shows document with just what&#39;s absolutely required.

</p><figure>
<figcaption>Figure 4. A minimal HTML document.</figcaption>
<pre>&lt;!DOCTYPE html&gt;
&lt;title&gt;Minimal document&lt;/title&gt;
</pre>
</figure>

<h2>Paragraphs</h2>

<p>
Body text can&#39;t just wander around on its own; it needs to be put into
containing elements.
For prose and also for many other types of text, <code>p</code> elements are
the handiest.
There&#39;s not an unambiguous way to infer the start of a <code>p</code> element,
so we have to provide the start tag.
However, any content which cannot go in a <code>p</code> element
(most other block-display elements, for example) implies the end of its
content, so we can usually leave off the end tag.

</p><p>
Starting each sentence in a paragraph on its own line (like back in
the <code>troff</code> days) makes it easier to rearrange the sentences in a
paragraph — something I do more often than I would have expected.
If you hard-wrap your text, starting each sentence on its own line also
limits the area affected by edits within a sentence.

</p><p>
Leaving a blank line between paragraphs or other content that functions
like a paragraph (a figure or small table, for example) aids navigation and
helps us grab appropriate chunks for structural re-arrangement.
More generally, using vertical white-space in preference to horizontal
white-space lets the text run to a comfortable length even on small
screens (or in small windows) and it obviates indentation joggling during
structural re-arrangement.
It also encourages the mark-up to serve the text — as it should — rather than
making the text serve the markup.
Figure 5 shows a couple of paragraphs in this style.

</p><figure>
<figcaption>Figure 5. Paragraphs.</figcaption>
<pre>&lt;p&gt;
This is my take on streaming music for work and study time.
I’ve always liked to listen to music while I’m at my desk.
As soon as I was introduced to lo-fi I knew it was just the thing for when
I’m writing code and I’ve been into it ever since.
I think by talking with listeners and artists I can figure out how to make
a better place for lo-fi folks to get together.

&lt;p&gt;
As a listener, “better” starts with practical stuff: get in and get listening
quick, mute when you need to.
But it’s not all business… retro styling and huge, moody backgrounds set the
stage.
I curate the playlist for lots of mellow vibes, sometimes with a touch of
melancholy but more often with a bounce of optimism.
</pre>
</figure>

<p>
The <code>img</code> element can be used in two ways: displayed inline (a
logo or emoji inline with text, for example) or displayed as a block (an
illustration or diagram between paragraphs of text, for example).
Because it can be used <em>within</em> a paragraph, its presence does
<em>not</em> imply the end of a paragraph.

</p><p>
To mark up an image to be shown as a block between paragraphs of text,
we could explicitly close the preceding paragraph with an end tag.
My preference, however, is to wrap such images either in their own
paragraphs or in <code>figure</code> elements if they&#39;re to get captions
or special styling.
Figure 6 shows an image figure with a caption.

</p><figure>
<figcaption>Figure 6. An image as a figure.</figcaption>
<pre>&lt;figure&gt;
&lt;figcaption&gt;Figure 1. An animated winking face.&lt;/figcaption&gt;
&lt;img src=wink.gif alt=&#34;Pixelation adds a retro feel to the emoji.&#34;&gt;
&lt;/figure&gt;
</pre>
</figure>

<h2>Lists</h2>

<p>
A list is the most clear and concise way to structure and present certain
types of information.
We can omit the end tags for <code>li</code>, <code>dt</code>, and
<code>dd</code> elements as long as they&#39;re followed by something that can&#39;t
go in a list item (another list item, for example).

</p><p>
Figure 7 shows a tiny list that we can treat like a single paragraph, setting
it apart from its neighbors with blank lines.

</p><figure>
<figcaption>Figure 7. A menu list.</figcaption>
<pre>&lt;menu&gt;
&lt;li&gt;&lt;a href=prev.html&gt;Previous page&lt;/a&gt;
&lt;li&gt;&lt;a href=toc.html&gt;Table of contents&lt;/a&gt;
&lt;li&gt;&lt;a href=next.html&gt;Next page&lt;/a&gt;
&lt;/menu&gt;
</pre>
</figure>

<p>
For lists with more complex items or groups of related items, we can treat
each item or group of items as a paragraph and set them off from one another
with blank lines.
This additional vertical white-space will help us navigate the document and
grab chunks of the list for easy re-arranging.
Figure 8 shows a definition list where each term has multiple definition
items and the terms are separated by blank lines.

</p><figure>
<figcaption>Figure 8. A definition list.</figcaption>
<pre>&lt;dl&gt;

&lt;dt&gt;HP 35665A Installation and Verification Guide
&lt;dd&gt;Part number 35665-90029
&lt;dd&gt;Describes how to install the instrument and perform operational and
performance verification tests. The tests are very extensive and require
additional instruments and tools.
&lt;dd&gt;I found a &lt;a href=35665-90029.pdf&gt;scan&lt;/a&gt; of this document on the
Internet. I checked that all of the pages appear to be present and tidied
it up for printing.

&lt;dt&gt;HP 35665A Quick Start Guide
&lt;dd&gt;Part number 35665-90035
&lt;dd&gt;Introduces the controls of the instrument and walks through some
example tasks to get the user comfortable making measurements.
&lt;dd&gt;I found a &lt;a href=35665-90035.pdf&gt;scan&lt;/a&gt; of this document on the
Internet. I checked that all of the pages appear to be present and tidied
it up for printing.

&lt;/dl&gt;
</pre>
</figure>

<p>
For this list, I thought it better to forego my usual practice of starting each
sentence on its own line.
Don&#39;t be afraid to develop your own style or to adapt it to suit each document
or section of a document.

</p><h2>Tables</h2>

<p>
HTML tables weren&#39;t standardized in the original HTML RFC.
Six months later, though, they had
<a target="_blank" href="http://datatracker.ietf.org/doc/html/rfc1942">their own
RFC</a>.
It&#39;s good that we have them, because a table is often the most accessible and
versatile way to communicate data.
We can omit the end tags for <code>tr</code>, <code>th</code>, and
<code>td</code> elements when they&#39;re followed by content that doesn&#39;t
belong in them (usually another row, header cell, or data cell).

</p><p>
Figure 9 shows a tiny table that we can treat as if it were its own paragraph.
We&#39;ll separate it from its neighbors with blank lines and start each row
on its own line.

</p><figure>
<figcaption>Figure 9. A simple table.</figcaption>
<pre>&lt;table&gt;
&lt;tr&gt;&lt;th&gt;Treasure&lt;th&gt;Points for taking
&lt;tr&gt;&lt;td&gt;Huge diamond&lt;td&gt;10
&lt;tr&gt;&lt;td&gt;Bag of coins&lt;td&gt;10
&lt;/table&gt;
</pre>
</figure>

<p>
We can make a complex table like the one in Figure 10 easier to navigate and
edit by treating each row as a paragraph.
We&#39;ll separate the rows with blank lines and start each <em>column</em> on
its own line.

</p><figure>
<figcaption>Figure 10. A complex table.</figcaption>
<pre>&lt;table&gt;

&lt;tr&gt;
&lt;th&gt;Tone control
&lt;th&gt;Lower corner
&lt;th&gt;Upper corner
&lt;th&gt;Peak response
&lt;th&gt;File

&lt;tr&gt;
&lt;td&gt;Maximum
&lt;td&gt;643Hz
&lt;td&gt;4,770Hz
&lt;td&gt;13dB
&lt;td&gt;&lt;a href=FRTONMAX.DAT&gt;FRTONMAX.DAT&lt;/a&gt;

&lt;tr&gt;
&lt;td&gt;Middle
&lt;td&gt;328Hz
&lt;td&gt;2,000Hz
&lt;td&gt;7.5dB
&lt;td&gt;&lt;a href=FRTONMID.DAT&gt;FRTONMID.DAT&lt;/a&gt;

&lt;tr&gt;
&lt;td&gt;Minimum
&lt;td&gt;205Hz
&lt;td&gt;1,449Hz
&lt;td&gt;3.5dB
&lt;td&gt;&lt;a href=FRTONMIN.DAT&gt;FRTONMIN.DAT&lt;/a&gt;

&lt;/table&gt;
</pre>
</figure>

<h2>Attributes</h2>

<p>
We can leave the quotes off of attribute values as long as the value doesn&#39;t
contain a quote (single or double), equal-sign, gator, back-tick, or
whitespace.
Oh, and as long as the value is not the empty string (that would be ambiguous).

</p><p>
Between the attributes, we can put not just spaces but also newlines or tabs.
In other words, a start tag may be split across lines.
This is particularly handy for elements on which we&#39;d like to set many
attributes, such as <code>img</code>.
We can also put newlines and tabs inside quoted attribute values as long as
their values are allowed to contain those characters.
This is especially nice for attributes with long values, like <code>alt</code>.
Figure 11 shows both of these techniques used to mark up an image depicting
a complex diagram.

</p><figure>
<figcaption>Figure 11. An <code>img</code> tag.</figcaption>
<pre>&lt;img width=500 height=600 src=entity-relationships.png
alt=&#34;
An entity relationship diagram shows seven entity types, their properties,
and the relationships between them.
An audio play has a single property: the time at which it started.
It has one and only one audio item.
An audio item has a single property: its duration.
It has zero or one songs, zero or one bumpers, and one and only one media.
A song has three properties: its title, the name of the artist, and an URL to
be shown while it is playing.
It has one and only one audio item.
A bumper has one property: its name.
It has one and only one audio item.
A media has two properties: its type and file name.
It has zero or one audio items and zero or one backgrounds.
A background has three properties: its title, the name of the artist, and an
URL to be shown while it is playing.
It has one and only on media.
It has zero or more background plays.
A background play has two properties: the time at which it started and its
duration.
It has one and only one background.
&#34;&gt;
</pre>
</figure>

<p>
It used to be the case that URL parsers would remove newlines and tabs,
so we could split long URLs across lines and even format their query
parameters nicely with tabs.
Unfortunately, this was taken advantage of for data exfiltration via
HTML injection and we no longer have this nice thing as URL parsers have
been made more strict to prevent this kind of attack.

</p><h2>Bringing it Together</h2>

<p>
Omitting tags and tabs is one clever tactic serving the strategy of
minimizing mark-up and making it serve the text.
Of even greater benefit is selecting good elements to use and leaving out
any that aren&#39;t pulling their weight.

</p><p>
If the text of a document is pure prose, all that is <em>required</em> of us
is to mark up its paragraphs with <code>p</code> tags.
Anything we do beyond this is embellishment and we should make sure each
thing we do pays us back for the mental and physical effort it demands.

</p><p>
Using <code>h1</code> and <code>h2</code> tags to mark up a document&#39;s title
and section headings makes the document more accessible and easier to style,
makes the mark-up easier to follow, and makes it easier for machines to
discern the structure of the document.

</p><p>
Including the author&#39;s contact information on a page shows readers how to
ask questions, offer corrections, and generally socialize with the author
and have a good time.
This is important human stuff.
The <code>address</code> element is semantically appropriate for this
information and it gives us a good way to get ahold of its content for
styling.

</p><p>
If a document needs photos, drawings, or listings to illustrate its points,
we can use <code>img</code> or <code>pre</code> elements for the task.
If there are only one or two such elements, we can wrap an image in its own
paragraph or leave a <code>pre</code> element bare.
If there are a lot of figures that are referred to by name or that
would benefit from being styled specially, we can use <code>figure</code> and
<code>figcaption</code> elements to wrap and describe them.

</p><p>
Don&#39;t be shy about using phrasing content elements like
<code>code</code>, <code>em</code>, <code>sup</code>, or <code>sub</code>
as needed.
They supply important clues to help the reader make sense of the text.

</p><p>
The minimal mark-up described so far is usually enough to work with when it
comes time to style the document.
In cases where we can&#39;t write a clever-enough CSS selector, we can add a
<code>class</code> attribute to one or more elements.
If it&#39;s just a one-off, I might even use the <code>style</code> attribute.

</p><p>
Styling is not mere ornamentation — at least it shouldn&#39;t be.
If the element tree isn&#39;t deep enough to support styling the document
<em>needs</em>, it&#39;s time to break down and add an element just for styling.
Try to use appropriate semantic elements where possible, and fall back to
<code>div</code> and <code>span</code> only as a last resort.

</p><h2>Conclusion</h2>

<p>
I hope I&#39;ve persuaded you to write good HTML from now on.
Failing that, I hope I&#39;ve at least expressed myself well enough to get you
thinking about it.
You can view the source of this document to see how these principles play
out (or don&#39;t!) in practice.

</p><p>
Oh!
I almost forgot.
The right way to tie your shoes is with a square knot.
It&#39;s easy to confuse this with the granny knot, which is the wrong way.
The square knot is a simple and sound knot with many uses.
The granny knot is an unsound knot whose only known uses are to make your
shoelaces look crooked and to trip you.

</p><p>
If you&#39;d be interested in seeing a deeper dive on any of the topics I touched
on in this article, please let me know.
In particular, I feel like there&#39;s a lot more to be said about styling,
images, and scripting.
But I&#39;ll let you be my guide!

</p><p>
If you have any questions, comments, or corrections please don&#39;t hesitate
to drop me a line.

</p><address>
Aaron D. Parks</address>






</div>
  </body>
</html>
