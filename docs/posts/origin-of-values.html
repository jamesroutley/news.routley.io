<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://leema.org/2022/06/25/origin-of-values/">Original</a>
    <h1>Origin of Values</h1>
    
    <div id="readability-page-1" class="page"><div id="page">
	<p><a href="#content">Skip to content</a></p><!-- #masthead -->

	<div id="content">
		<div>

	<div id="primary">
		<main id="main" role="main">

		
			
<article id="post-254">

	<!-- .entry-header -->

	
	<div>
		
<h2>Where do Failures Come From?</h2>



<p>Once programmers have gained a certain amount of experience, most of us realize that failures and invalid data are brought to production systems by the stork. But where does the stork get them?</p>



<p>Leema Failure types already include a concept of tracing the origin of the failure. If a failure originates in one function, we want to be able to see where that failure originated if we try to use it as a value. If <code>response.body</code> in the <code>fetch_qty</code> function has invalid JSON, this should be an immediate failure that Leema should identify before attempting to call <code>subtract_items</code>.</p>



<p><code>func fetch_qty:Int :: client:ApiClient item_id:Str -&gt;</code></p>



<h2>Some Failures are Latent</h2>



<p>However, sometimes a value may be valid in one context and invalid in another. In this case, a quantity of 0 or even 5 in <code>fetch_qty</code> is perfectly valid. It’s only until we combine the quantity with the number of items to subtract that we know if both of these values are valid. Was it strictly bad inputs? Was there a previous calculation that was wrong? When debugging cases like this, it’s often helpful to know where the component values of a calculation came from.</p>



<p><code>func fetch_qty:Int :: client:ApiClient item_id:Str -&gt;</code></p>



<p>In this case, it’s fairly obvious where <code>initial_qty</code> comes from. But where did <code>num_items</code> come from? Leema should be able to trace the origin of both of these values to where they originated. In this case, the failure should report that <code>initial_qty</code> originated in the last line of function <code>fetch_qty</code> and should also report the origin of <code>num_items</code>.</p>
			</div><!-- .entry-content -->

	<!-- .entry-footer -->

</article><!-- #post-## -->


	<nav aria-label="Posts">
		<h2>Post navigation</h2>
		
	</nav>	<!-- .entry-auhtor -->

			
<!-- #comments -->

		
		</main><!-- #main -->
	</div><!-- #primary -->


<!-- #secondary -->

			<!-- #colophon -->

		</div><!-- .col-width -->
	</div><!-- #content -->

</div></div>
  </body>
</html>
