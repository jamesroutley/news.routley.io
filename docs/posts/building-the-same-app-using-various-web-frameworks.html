<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://eugeneyan.com/writing/web-frameworks/">Original</a>
    <h1>Building the same app using various web frameworks</h1>
    
    <div id="readability-page-1" class="page"><div>
<p>Recently, I’ve been wondering if I should migrate from my current web app stack (FastAPI, HTML, CSS, and a sprinkle of JavaScript) to a modern web framework. I was particularly interested in FastHTML, Next.js, and Svelte.</p>
<ul>
<li><strong>FastHTML</strong>: <a href="https://x.com/search?q=fasthtml&amp;src=typed_query" target="_blank">Many folks</a> have started building with it since Jeremy Howard <a href="https://x.com/jeremyphoward/status/1818036923304456492" target="_blank">launched</a> it a month ago. Its goal is to enable modern web applications in pure Python.</li>
<li><strong>Next.js</strong>: I’ve come across several apps built with it such as <a href="https://github.com/calcom/cal.com" target="_blank">cal.com</a> and <a href="https://github.com/Nutlope/roomGPT" target="_blank">roomGPT</a>. It has a large ecosystem and is popular for building production-grade web apps.</li>
<li><strong>SvelteKit</strong>: This lightweight framework has been popular with devs (<a href="https://survey.stackoverflow.co/2024/technology/#2-web-frameworks-and-technologies" target="_blank">Stack Overflow</a>, <a href="https://tsh.io/state-of-frontend/#which-of-the-following-frameworks-would-you-like-to-learn-in-the-future" target="_blank">TSH</a>, <a href="https://2022.stateofjs.com/en-US/libraries/front-end-frameworks/" target="_blank">State of JS</a>) and my friend Swyx (<a href="https://www.swyx.io/svelte-why" target="_blank">Why I Enjoy Svelte</a>) over the past few years.</li>
</ul>
<p>To learn more about these frameworks, I built the same web app using each of them. The app, which I’m calling “Look at Your Data”, allows users to:</p>
<ul>
<li><code>Upload</code> a CSV file to initialize an SQLite database table</li>
<li><code>View</code> the table in the web browser</li>
<li><code>Update</code> individual fields in the table</li>
<li><code>Delete</code> individual rows in the table</li>
<li><code>Download</code> the updated table data as a new CSV file</li>
</ul>
<p>By implementing these <a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete" target="_blank">CRUD</a> (Create, Read, Update, Delete) operations in each framework, I hope to get a sense of each framework’s unique features and the associated developer experience. To keep things simple, I’ll use SQLite as the database. As a baseline, I’ll start by building the app with what I’m familiar with—FastAPI.</p>
<p><img src="https://eugeneyan.com/assets/poll.jpg" loading="lazy" title="Polls on Twitter and LinkedIn" alt="Polls on Twitter and LinkedIn"/></p>
<p>I ran polls on the three frameworks on <a href="https://x.com/eugeneyan/status/1828447283811402006" target="_blank">Twitter</a> and <a href="https://www.linkedin.com/posts/eugeneyan_if-you-were-building-a-small-web-app-today-activity-7234224078675439617-HX75" target="_blank">LinkedIn</a></p>
<h2 id="fastapi--jinja--html--css--javascript">FastAPI + Jinja + HTML + CSS + JavaScript</h2>
<p>Building the app with FastAPI is fairly straightforward (<a href="https://github.com/eugeneyan/framework-comparison/tree/main/fastapi" target="_blank">code</a>). The key components are:</p>
<ul>
<li><code>main.py</code>: Routes for uploading/downloading data, updating fields, deleting rows</li>
<li><code>index.html</code>: The HTML document that defines the scripts, table, and buttons.</li>
<li><code>style.css</code>: Visual styling such as column widths, word wrap, scrolling.</li>
<li><code>script.js</code>: Client-side functionality for uploading the CSV, loading data for display, updating/deleting rows, and downloading the updated data as CSV.</li>
</ul>
<p><img src="https://eugeneyan.com/assets/fastapi.jpg" loading="lazy" title="FastAPI app structure" alt="FastAPI app structure"/></p>
<p>Here’s what the web app looks like. While it’s not much to look at aesthetically, it meets our requirements above. I’ve deliberately kept visual styling to a minimum (for the current and later apps) to keep the focus on the frameworks and functionality instead of design.</p>
<p><img src="https://eugeneyan.com/assets/fastapi-app.jpg" loading="lazy" title="FastAPI web app" alt="FastAPI web app"/></p>
<h2 id="fasthtml">FastHTML</h2>
<p>To learn FastHTML, I started by consulting the <a href="https://docs.fastht.ml" target="_blank">docs</a> and building a simple <a href="https://github.com/eugeneyan/framework-comparison/blob/main/.learning/fasthtml/todo.py" target="_blank">ToDo app</a> via this <a href="https://docs.fastht.ml/tutorials/by_example.html#full-example-1---todo-app" target="_blank">walkthrough</a>. For help with unfamiliar components, I relied on Cursor by providing links to relevant docs such as <a href="https://docs.fastht.ml/explains/explaining_xt_components.html" target="_blank">ft components</a>, <a href="https://docs.fastht.ml/api/components.html" target="_blank">htmx</a>, <a href="https://docs.fastht.ml/api/pico.html" target="_blank">pico.css</a> as context. With FastHTML, I could implement the entire app within a single <code>main.py</code> and a small <code>style.css</code> (<a href="https://github.com/eugeneyan/framework-comparison/tree/main/fasthtml" target="_blank">code</a>).</p>
<p><img src="https://eugeneyan.com/assets/fasthtml.jpg" loading="lazy" title="FastHTML app structure" alt="FastHTML app structure"/></p>
<p>Here’s how the app looks.</p>
<p><img src="https://eugeneyan.com/assets/fasthtml-app.jpg" loading="lazy" title="FastHTML web app" alt="FastHTML web app"/></p>
<p>After my first iteration above, Hamel graciously offered to pair-program with me to build the app from scratch. He also invited Jeremy Howard—the creator of FastHTML himself—to join us. They taught me several tricks, such as providing Cursor with LLM-friendly documentation for FastHTML (<a href="https://docs.fastht.ml/llms-ctx.txt" target="_blank">llms-ctx.txt</a>) and FastLite (<a href="https://answerdotai.github.io/fastlite/index.html.md" target="_blank">html.md</a>). They also shared a <a href="https://hypermedia.systems" target="_blank">great resource</a> on building simpler apps with htmx and Hyperview. Jeremy even took the time to demonstrate how to build the app in just <a href="https://gist.github.com/jph00/0590da374a11b8def808c1821abdd42a" target="_blank">50 lines of code</a>!</p>
<div><div><pre><code><span>from</span> <span>fasthtml.common</span> <span>import</span> <span>*</span>

<span>db</span> <span>=</span> <span>database</span><span>(</span><span>&#39;:memory:&#39;</span><span>)</span>
<span>tbl</span> <span>=</span> <span>None</span>
<span>hdrs</span> <span>=</span> <span>(</span><span>Style</span><span>(</span><span>&#39;&#39;&#39;
button,input { margin: 0 1rem; }
[role=&#34;group&#34;] { border: 1px solid #ccc; }
&#39;&#39;&#39;</span><span>),</span> <span>)</span>
<span>app</span><span>,</span> <span>rt</span> <span>=</span> <span>fast_app</span><span>(</span><span>live</span><span>=</span><span>True</span><span>,</span> <span>hdrs</span><span>=</span><span>hdrs</span><span>)</span>

<span>@</span><span>rt</span><span>(</span><span>&#34;/&#34;</span><span>)</span>
<span>async</span> <span>def</span> <span>get</span><span>():</span>
    <span>return</span> <span>Titled</span><span>(</span><span>&#34;CSV Uploader&#34;</span><span>,</span>
        <span>Group</span><span>(</span>
            <span>Input</span><span>(</span><span>type</span><span>=</span><span>&#34;file&#34;</span><span>,</span> <span>name</span><span>=</span><span>&#34;csv_file&#34;</span><span>,</span> <span>accept</span><span>=</span><span>&#34;.csv&#34;</span><span>),</span>
            <span>Button</span><span>(</span><span>&#34;Upload&#34;</span><span>,</span> <span>hx_post</span><span>=</span><span>&#34;/upload&#34;</span><span>,</span> <span>hx_target</span><span>=</span><span>&#34;#results&#34;</span><span>,</span>
                   <span>hx_encoding</span><span>=</span><span>&#34;multipart/form-data&#34;</span><span>,</span> <span>hx_include</span><span>=</span><span>&#39;previous input&#39;</span><span>),</span>
            <span>A</span><span>(</span><span>&#39;Download&#39;</span><span>,</span> <span>href</span><span>=</span><span>&#39;/download&#39;</span><span>,</span> <span>type</span><span>=</span><span>&#34;button&#34;</span><span>)</span>
        <span>),</span>
        <span>Div</span><span>(</span><span>id</span><span>=</span><span>&#34;results&#34;</span><span>))</span>

<span>def</span> <span>render_row</span><span>(</span><span>row</span><span>):</span>
    <span>vals</span> <span>=</span> <span>[</span><span>Td</span><span>(</span><span>Input</span><span>(</span><span>value</span><span>=</span><span>v</span><span>,</span> <span>name</span><span>=</span><span>k</span><span>))</span> <span>for</span> <span>k</span><span>,</span><span>v</span> <span>in</span> <span>row</span><span>.</span><span>items</span><span>()]</span>
    <span>vals</span><span>.</span><span>append</span><span>(</span><span>Td</span><span>(</span><span>Group</span><span>(</span><span>Button</span><span>(</span><span>&#39;delete&#39;</span><span>,</span> <span>hx_get</span><span>=</span><span>remove</span><span>.</span><span>rt</span><span>(</span><span>id</span><span>=</span><span>row</span><span>[</span><span>&#39;id&#39;</span><span>])),</span>
                   <span>Button</span><span>(</span><span>&#39;update&#39;</span><span>,</span> <span>hx_post</span><span>=</span><span>&#39;/update&#39;</span><span>,</span> <span>hx_include</span><span>=</span><span>&#34;closest tr&#34;</span><span>))))</span>
    <span>return</span> <span>Tr</span><span>(</span><span>*</span><span>vals</span><span>,</span> <span>hx_target</span><span>=</span><span>&#39;closest tr&#39;</span><span>,</span> <span>hx_swap</span><span>=</span><span>&#39;outerHTML&#39;</span><span>)</span>

<span>@</span><span>rt</span>
<span>async</span> <span>def</span> <span>download</span><span>():</span>
    <span>csv_data</span> <span>=</span> <span>[</span><span>&#34;,&#34;</span><span>.</span><span>join</span><span>(</span><span>map</span><span>(</span><span>str</span><span>,</span> <span>tbl</span><span>.</span><span>columns_dict</span><span>))]</span>
    <span>csv_data</span> <span>+=</span> <span>[</span><span>&#34;,&#34;</span><span>.</span><span>join</span><span>(</span><span>map</span><span>(</span><span>str</span><span>,</span> <span>row</span><span>.</span><span>values</span><span>()))</span> <span>for</span> <span>row</span> <span>in</span> <span>tbl</span><span>()]</span>
    <span>headers</span> <span>=</span> <span>{</span><span>&#39;Content-Disposition&#39;</span><span>:</span> <span>&#39;attachment; filename=&#34;data.csv&#34;&#39;</span><span>}</span>
    <span>return</span> <span>Response</span><span>(</span><span>&#34;</span><span>\n</span><span>&#34;</span><span>.</span><span>join</span><span>(</span><span>csv_data</span><span>),</span> <span>media_type</span><span>=</span><span>&#34;text/csv&#34;</span><span>,</span> <span>headers</span><span>=</span><span>headers</span><span>)</span>

<span>@</span><span>rt</span><span>(</span><span>&#39;/update&#39;</span><span>)</span>
<span>def</span> <span>post</span><span>(</span><span>d</span><span>:</span><span>dict</span><span>):</span> <span>return</span> <span>render_row</span><span>(</span><span>tbl</span><span>.</span><span>update</span><span>(</span><span>d</span><span>))</span>

<span>@</span><span>rt</span>
<span>def</span> <span>remove</span><span>(</span><span>id</span><span>:</span><span>int</span><span>):</span> <span>tbl</span><span>.</span><span>delete</span><span>(</span><span>id</span><span>)</span>

<span>@</span><span>rt</span><span>(</span><span>&#34;/upload&#34;</span><span>)</span>
<span>async</span> <span>def</span> <span>post</span><span>(</span><span>csv_file</span><span>:</span> <span>UploadFile</span><span>):</span>
    <span>global</span> <span>tbl</span>
    <span>if</span> <span>not</span> <span>csv_file</span><span>.</span><span>filename</span><span>.</span><span>endswith</span><span>(</span><span>&#39;.csv&#39;</span><span>):</span> <span>return</span> <span>&#34;Please upload a CSV file&#34;</span>
    <span>tbl</span> <span>=</span> <span>db</span><span>.</span><span>import_file</span><span>(</span><span>&#39;test&#39;</span><span>,</span> <span>await</span> <span>csv_file</span><span>.</span><span>read</span><span>(),</span> <span>pk</span><span>=</span><span>&#39;id&#39;</span><span>)</span>
    <span>header</span> <span>=</span> <span>Tr</span><span>(</span><span>*</span><span>map</span><span>(</span><span>Th</span><span>,</span> <span>tbl</span><span>.</span><span>columns_dict</span><span>))</span>
    <span>vals</span> <span>=</span> <span>[</span><span>render_row</span><span>(</span><span>row</span><span>)</span> <span>for</span> <span>row</span> <span>in</span> <span>tbl</span><span>()]</span>
    <span>return</span> <span>Table</span><span>(</span><span>Thead</span><span>(</span><span>header</span><span>),</span> <span>Tbody</span><span>(</span><span>*</span><span>vals</span><span>))</span>

<span>serve</span><span>()</span>
</code></pre></div></div>
<p>And here’s how Jeremy’s app looks:</p>
<p><img src="https://eugeneyan.com/assets/fasthtml-app-jeremy.jpg" loading="lazy" title="Jeremy&#39;s version of the FastHTML app" alt="Jeremy&#39;s version of the FastHTML app"/></p>
<h2 id="nextjs">Next.JS</h2>
<p>To learn Next.js, I did the <a href="https://nextjs.org/learn/react-foundations" target="_blank">React Foundations</a> and <a href="https://nextjs.org/learn/dashboard-app" target="_blank">Next.js</a> tutorials. The latter teaches the basics of Next.js through bite-sized, hands-on lessons that build up to a dashboard app. With 16 chapters in the Next.js tutorial, learning and coding along can take some time. Nonetheless, I recommend persisting till at least Chapter 12 on transforming data (in the Next.js tutorial), and enjoyed the gentle learning curve and practical projects.</p>
<p>Here’s how I created the Next.js app template:</p>
<div><div><pre><code>npx create-next-app@latest
</code></pre></div></div>
<p>Building the same app in Next.js requires considerably more code than the Python versions (<a href="https://github.com/eugeneyan/framework-comparison/tree/main/nextjs" target="_blank">code</a>). Nonetheless, I found its organization intuitive:</p>
<ul>
<li><code>api</code>: Routes for the data table (GET, PUT, DELETE) and file upload/download</li>
<li><code>pages.tsx</code> and <code>layout.tsx</code>: Page-specific and common user interface components</li>
<li><code>components</code>: Reusable React components like table and upload/download buttons</li>
<li><code>lib</code>: Utility functions; in this case, there was a single function for SQLite</li>
</ul>
<p><img src="https://eugeneyan.com/assets/next.jpg" loading="lazy" title="Next.js app structure" alt="Next.js app structure"/></p>
<p>And here’s how the web app looks. The built-in <a href="https://tailwindcss.com" target="_blank">Tailwind CSS</a> integration makes the app look a bit more polished compared to the barebones FastAPI and FastHTML apps.</p>
<p><img src="https://eugeneyan.com/assets/next-app.jpg" loading="lazy" title="Next.js web app" alt="Next.js web app"/></p>
<h2 id="sveltekit">SvelteKit</h2>
<p>To learn Svelte, I went through part of their <a href="https://learn.svelte.dev/tutorial/welcome-to-svelte" target="_blank">tutorial</a> that comes with an online interpreter. The tutorial has four parts: (i) Basic Svelte, (ii) Advanced Svelte, (iii) Basic SvelteKit, and (iv) Advanced SvelteKit. I completed the sections on basic Svelte and basic SvelteKit and jumped into building the app (<a href="https://github.com/eugeneyan/framework-comparison/tree/main/svelte" target="_blank">code</a>).</p>
<p>To create the SvelteKit app template, I ran the following:</p>
<div><div><pre><code>npm create svelte@latest my-app
</code></pre></div></div>
<p>Like Next.js, the template for SvelteKit has several directories and moving parts:</p>
<ul>
<li><code>components</code>: Reusable Svelte components such as data table and upload buttons</li>
<li><code>api.ts</code> and <code>db.ts</code>: Functions for the API to fetch, update, and delete data (<code>api.ts</code>) as well as query and run updates on the SQLite database (<code>db.ts</code>)</li>
<li><code>routes</code>: Routes for table (GET), rows (PUT, DELETE), and upload/download</li>
<li><code>+page.svelte</code>: Main page of the application</li>
<li><code>app.html</code>: Entry point and main HTML file</li>
</ul>
<p><img src="https://eugeneyan.com/assets/svelte.jpg" loading="lazy" title="SvelteKit app structure" alt="SvelteKit app structure"/></p>
<p>Here’s how the app looks. One slight deviation: I played with combining the “choose file” and “upload” functionality into a single button, thus removing the “Upload CSV” button.</p>
<p><img src="https://eugeneyan.com/assets/svelte-app.jpg" loading="lazy" title="SvelteKit web app" alt="SvelteKit web app"/></p>
<h2 id="fastapi--svelte">FastAPI + Svelte</h2>
<p>I also took a stab at building an app with FastAPI as the backend and Svelte for the frontend (<a href="https://github.com/eugeneyan/framework-comparison/tree/main/fastapi+svelte" target="_blank">code</a>). All functionality and APIs resided in <code>main.py</code> while frontend UI and API interactions were handled by <code>+page.svelte</code> and <code>api.ts</code> respectively. To run the app, I had to start both the FastAPI server and the Svelte development server.</p>
<p><img src="https://eugeneyan.com/assets/fastapi-svelte.jpg" loading="lazy" title="FastAPI + Svelte app structure" alt="FastAPI + Svelte app structure"/></p>
<p>And here’s what the web app looks like. (I reverted the upload functionality to match the original FastAPI app that had a separate “Upload CSV” button.)</p>
<p><img src="https://eugeneyan.com/assets/fastapi-svelte-app.jpg" loading="lazy" title="FastAPI + Svelte web app" alt="FastAPI + Svelte web app"/></p>
<p>The main challenge here was coordinating communication between both servers during development. In a production setting, the Svelte app would be compiled and served statically with API requests sent to the FastAPI backend.</p>
<p>• • •</p>
<h2 id="aside-how-will-coding-assistants-influence-builders">Aside: How will coding assistants influence builders?</h2>
<p>This exercise got me thinking about how coding assistants—powered by LLMs trained on internet data—could influence the choices we make as builders. For example, would LLM-based coding assistants be as effective with niche or newer frameworks such as Svelte and FastHTML? While the tweet below may be an exaggeration, it raises a valid concern.</p>
<blockquote>
<p>It brings me no pleasure to say this, but Svelte is dead because LLM base models are better at writing React. — <a href="https://x.com/jessmartin/status/1822026807643910149" target="_blank">Jess Martin</a></p>
</blockquote>
<p>Given React and Next’s wider use and longer history, it’s likely most LLMs are trained on more React and Next code than Svelte code. Ditto for FastHTML. This could lead to coding assistants being more effective when working with and suggesting code for established frameworks such as FastAPI, React, and Next.js.</p>
<p>As an anecdote, I had an easier time using Cursor + Claude to build the app in FastAPI and Next.js, and a harder time with FastHTML and SvelteKit. Since FastHTML is barely a couple weeks old (at the time of writing), its code and docs likely hasn’t made its way into the training data of most LLMs yet, explaining their limited proficiency with FastHTML.</p>
<p>To address this issue, Jeremy Howard (creator of FastHTML) has made the effort to provide <a href="https://docs.fastht.ml/llms.txt" target="_blank">llms.txt</a> and <a href="https://docs.fastht.ml/llms-ctx.txt" target="_blank">llms-ctx.txt</a> that have been optimized for in-context learning. Similarly, Rich Harris (who works on Svelte at Vercel) <a href="https://x.com/Rich_Harris/status/1832793044216582605" target="_blank">plans</a> to publish more LLM-friendly documentation for Svelte. Victor Dibia has also <a href="https://newsletter.victordibia.com/i/106997987/developer-habits-driven-by-generative-ai" target="_blank">written</a> about how coding assistants may affect developer habits and choices, and how we need to write docs for both humans and machines.</p>
<p>Time will tell how effective these efforts are in addressing the cold-start problem for newer or more niche frameworks in coding assistants.</p>
<p>• • •</p>
<p>This was a fun exercise to gain familiarity with FastHTML, Next.js, and SvelteKit. All the code can be found <a href="https://github.com/eugeneyan/framework-comparison" target="_blank">here</a>. (I’m a beginner in frontend so please forgive any bad practices!) Personally, I’m looking forward to building more with TypeScript, which I haven’t used extensively since building <a href="http://applyingml.com" target="_blank">ApplyingML.com</a> years ago.</p>
<p>What resources have you found useful in learning how to build with Next.js or Svelte? Please comment below or <a href="https://twitter.com/eugeneyan">dm me</a>!</p>
</div></div>
  </body>
</html>
