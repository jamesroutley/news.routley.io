<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://dx.tips/the-end-of-localhost">Original</a>
    <h1>The End of Localhost</h1>
    
    <div id="readability-page-1" class="page"><div id="post-content-wrapper"><p><strong>Dev environments should be cattle, not pets</strong>. It looks likely that in future, most development will <em>not</em> be done on <code>localhost</code>, the most precious pet of all.</p>
<hr/>
<p><strong>Make the ultimate developer experience wishlist</strong> for the average rich-country developer in 2030:</p>
<ul>
<li>Fast gigabit internet is <em>cheap</em> and <em>everywhere</em> (5G or mesh wifi)</li>
<li>Dev machines (laptops, tablets, VR) are <em>cheap</em> and have multiday battery life</li>
<li>Your apps build in a second <em>regardless of scale</em>, with tests and staging environments/deploy previews ~instantly live after every keystroke</li>
<li>Your personal dev environment travels with you no matter which device you use</li>
<li>Any app&#39;s environmental dependencies - everything from a HTTPS cert to a sanitized, sandboxed fork of the production database - are immediately available to any teammate ramping up to contribute any feature. No docs, no runbook.</li>
<li>You can go from idea to first customer in a weekend, using a combination of low-code builders and backends-as-a-service</li>
<li>You can scale up from MVP to unicorn in weeks, using one of the serverless or &#34;new Heroku&#34; platforms, and auth/payments/database/communication needs handled by world-class SaaS teams</li>
</ul>
<p>You will notice that most of these items enable (even <em>require</em>) you to run things &#34;live&#34; on the cloud, not <code>localhost</code>.</p>
<p>Perhaps most importantly, the time wasted fixing bugs between dev and prod environments <strong>goes from 1-4 hours a week down to 0</strong>, if you can simply eliminate the discrepancy between dev and prod.</p>
<blockquote>
<p>Aside: Realistically, you will always have <em>some</em> discrepancy between &#34;staging&#34; and production environments, but the distance between them should be much smaller than between dev and prod. For example, working on  <code>https</code> is always a pain in <code>localhost</code> but is a requirement on prod.</p>
</blockquote>
<p>To <a target="_blank" href="https://www.wired.com/2012/04/ff-andreessen/">paraphrase Bob Metcalfe</a>, if the browser reduced operating systems to &#34;a poorly debugged set of device drivers&#34;, then <strong>the cloud is reducing the dev machine to a poorly debugged set of environment mocks</strong>.</p>
<p><img src="https://cdn.hashnode.com/res/hashnode/image/upload/v1654705265316/mTPjVacfU.png?auto=compress,format&amp;format=webp" alt="image.png"/></p>
<p>That&#39;s it, that&#39;s the blogpost. The rest of this article is working out subpoints, examples, trends, and anecdata.</p>
<h2 id="heading-but-i-need-to-code-on-a-plane">But I Need To Code on a Plane?</h2>
<p>Maybe stop flying so much. Or get a good audiobook and rest your eyes. Maybe even talk to your neighbor! (if they seem social)</p>
<h2 id="heading-the-future-is-just-not-evenly-distributed-argument">The &#34;Future is Just Not Evenly Distributed&#34; Argument</h2>
<p>Many Bigcos who have invested in their developer productivity already work entirely in the cloud. This will be news to some of you, and old hat to others, so I didn&#39;t know how much emphasis to place on this.</p>
<p>But to my knowledge, this is the first time anyone has collected public info about Bigco dev environments in one place:</p>
<ul>
<li><strong>Google Cider</strong> is Google&#39;s web IDE that &#34;mounts the enormous Piper file system and provides a super tight integration with internal review, build and testing tools&#34; without downloading any source code to the local machine (<a target="_blank" href="https://www.quora.com/What-does-Googles-web-IDE-look-like">source</a>, <a target="_blank" href="https://medium.com/codesphere-cloud/why-online-coding-is-the-future-e7b9a255f77f">source</a>) </li>
<li><strong>FB On-Demand</strong> is Facebook&#39;s way to do &#34;on-demand&#34; environment provisioning that create a live feature preview with more fidelity than local. At FB, &#34;<a target="_blank" href="https://twitter.com/gwenshap/status/1533956840240779264?s=20&amp;t=FBNMNXzv8v6vwAdSzkTxDw">local development did not exist</a>&#34;. (<a target="_blank" href="https://twitter.com/threepointone/status/1533971160005738496">FB alum tweet</a>, <a target="_blank" href="https://news.ycombinator.com/item?id=29164556">YC startup clone</a>)</li>
<li><strong>Tesla</strong> moved from local to cloud for their vehicle OS development (<a target="_blank" href="https://twitter.com/charmcgi/status/1534182983837618176">source</a>)</li>
<li><strong>Palantir</strong> moved to remote ephemeral workspaces (<a target="_blank" href="https://blog.palantir.com/the-benefits-of-remote-ephemeral-workspaces-1a1251ed6e53">source</a>, thanks <a target="_blank" href="https://twitter.com/bpmct/status/1533932035147980802?s=20&amp;t=FBNMNXzv8v6vwAdSzkTxDw">Ben Potter</a>)</li>
<li><strong>Shopify</strong> is &#34;moving the majority of our developers into our cloud development environment, called Spin.&#34;  (<a target="_blank" href="https://shopify.engineering/cloud-load-modular-code-shopify-2022">source</a>, thanks <a target="_blank" href="https://twitter.com/davidstosik/status/1533981379209613312?s=20&amp;t=shjhKXR3Gtrtr54iSqHPnA">David Stosik</a>)</li>
<li><strong>Github</strong> &#34;left our macOS model behind and moved to Codespaces for the majority of <a href="http://GitHub.com" target="_blank">GitHub.com</a> development&#34;. (<a target="_blank" href="https://github.blog/2021-08-11-githubs-engineering-team-moved-codespaces">source</a>, <a target="_blank" href="https://twitter.com/swyx/status/1436602844216500227">podcast</a>)</li>
</ul>
<p>The standard response to bringing up a bunch of Bigcos is &#34;sure, but does it work for my small team?&#34;</p>
<p>The answer is invariably &#34;maybe yes, but also probably not in this current form&#34;, because most of these moves were done after sizable internal investment and take advantage of lots of proprietary infrastructure. However, as this tech commoditizes, we&#39;ll see more and more of it spread out as we find commonalities among audience subsets.</p>
<p>The obvious first part of commoditizing preview environments has already been done - one of Netlify&#39;s early innovations was making <a target="_blank" href="https://www.netlify.com/products/deploy-previews/">deploy previews for frontend projects</a> ubiquitous. Virtually every docs site now uses some form of deploy preview system, and Jamstack apps can also use them for their release process (<a target="_blank" href="https://twitter.com/philhawksworth/status/1149664004681240577">example</a>). With <a target="_blank" href="https://changelog.com/founderstalk/85">database branching</a> becoming increasingly common, this workflow will make its way further and further up the stack. Let&#39;s look at this stack next...</p>
<h2 id="heading-jobs-to-be-done-of-localhost">Jobs to Be Done of Localhost</h2>
<p>In <a target="_blank" href="https://twitter.com/swyx/status/1533910738942562304">my original tweet</a> calling out this trend I actually conflated different usages of local development (as <a target="_blank" href="https://twitter.com/anildash/status/1534177596593917954">Anil Dash observed</a>):</p>
<ul>
<li>Editing code in a local IDE</li>
<li>Running code cloned to a local file directory</li>
<li>Spinning up a local database instance/cluster of services to code against</li>
</ul>
<p>Conveniently, they are all under attack (did i miss any? please let me know):</p>
<ul>
<li>Editing code and Running code remotely: GitHub Codespaces, Replit, <a href="http://Coder.com" target="_blank">Coder.com</a>, CodeSandbox, Gitpod</li>
<li>Editing code locally while it runs on a Remote server: VSCode + <a target="_blank" href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azurevirtualmachines">Azure VMs</a> or VSCode + <a target="_blank" href="https://dev.to/aws/how-to-live-stream-meetups-on-twitch-without-any-special-equipment-56cb">Amazon Workspaces</a> or <a target="_blank" href="https://www.jetbrains.com/fleet/">Jetbrains Fleet</a> &#34;Distributed IDE&#34; or <a target="_blank" href="https://twitter.com/rberrelleza/status/1534241206514749441?s=20&amp;t=sNeNXfaWqhc2VzuUnSZ7uw">Okteto Sync</a></li>
<li>Editing code while it runs in a lightweight <a target="_blank" href="https://tinyclouds.org/javascript_containers">JavaScript container</a> in the browser: Stackblitz</li>
<li>Running code remotely: <a target="_blank" href="https://www.brev.dev/">Brev.dev</a></li>
<li>Staging resources to code against: Planetscale <a target="_blank" href="https://docs.planetscale.com/concepts/branching">Branches</a>, Stripe <a target="_blank" href="https://stripe.com/docs/keys#test-live-modes">Test mode keys</a>, Railway <a target="_blank" href="https://docs.railway.app/develop/environments#ephemeral-environments">Ephemeral Environments</a>, <a target="_blank" href="https://www.okteto.com/">Okteto environments</a></li>
</ul>
<p>So no matter what you&#39;re doing in <code>localhost</code>, there&#39;s probably a well-funded startup or Amazon/Microsoft tool that does it better in the cloud.</p>
<h2 id="heading-the-inevitability-argument">The Inevitability Argument</h2>
<p>One of the ironic tensions of humanity is that we <strong>say</strong> we want free will, privacy, self sufficiency and decentralization, but our <strong>actions</strong> tend toward the hive mind, convenience, interdependence and central infrastructure. My theory for this is that social psychology, economics and technology are very powerful centralizing forces.</p>
<ul>
<li>There are a long list of critical life essentials on which we are not self sufficient. Many historians mark agriculture as a starting point of civilization - meaning that <em>centralizing our food source</em> helped us move past a subsistence agriculture. Water supply and sanitation centralized <a target="_blank" href="https://en.wikipedia.org/wiki/History_of_water_supply_and_sanitation">in the 1700s</a>. Electricity has basically been centralized from the start.</li>
<li>Closer to modern times we&#39;re also seeing everything we use move to the cloud, from movies/TV (from huge VHS and DVD libraries to a monthly Netflix/Disney/HBO subscription), games (from box games to free-to-play MOBAs and MMORPGs, Google Stadia, xCloud and PS Now), and knowledge (from Encyclopaedia to Wikipedia)</li>
<li>Even in the B2B domain: <ul>
<li>Salesforce&#39;s &#34;no software&#34; move to SaaS was just the first in a long history of moving every imaginable application to the cloud</li>
<li>Box and Dropbox moved file storage to the cloud</li>
<li>Docusign/Hellosign moved <em>legal contracts</em> to the cloud</li>
<li>GAE/AWS/Azure moved the datacenter to the cloud</li>
<li>Most recently <a target="_blank" href="https://www.producthunt.com/stories/suhail-doshi-s-new-company-mighty-is-a-faster-browser-streamed-from-the-cloud">Suhail Doshi&#39;s Mighty app</a> is moving even the <em>browser</em> to the cloud</li>
</ul>
</li>
</ul>
<p>To argue <em>against</em> <code>localhost</code> eventually going the way of the Dodo is to do the developer equivalent of asserting that most people want to run their own generators or grow their own food.</p>
<h2 id="heading-the-outer-vs-inner-loop-argument">The Outer vs Inner Loop Argument</h2>
<p>You might argue that developers take so much pride in their tools that they will go out of their way to be self sufficient in them. And yet:</p>
<ul>
<li>Every <a target="_blank" href="https://hn.algolia.com/?dateRange=all&amp;page=0&amp;prefix=false&amp;query=status.slack.com&amp;sort=byPopularity&amp;type=story">Slack</a> and <a target="_blank" href="https://hn.algolia.com/?dateRange=all&amp;page=0&amp;prefix=true&amp;query=github%20is%20down&amp;sort=byPopularity&amp;type=story">GitHub</a> outage is basically celebrated as a Developer &#34;Snow Day&#34; (unscheduled holiday due to acts of god)</li>
<li>Most companies run separate Build/CI/CD infrastructure anyway - in other words most apps don&#39;t get <em>deployed</em> without first going through some cloud infra as part of the critical path</li>
</ul>
<p>I will grant that there&#39;s a difference between &#34;We use CircleCI&#34; and &#34;Let&#39;s kill localhost&#34;. The term of art the industry has adopted to describe this difference in dev tooling is the <a target="_blank" href="https://twitter.com/beyang/status/1530589936361119744">Dev &#34;Outer Loop&#34; vs &#34;Inner Loop&#34;</a> - the Outer Loop taking the git commit as the atomic unit of developer productivity, and the Inner Loop being all the developer activity that happens <em>between</em> commits.</p>
<p>So, to use those terms - we&#39;re fine with the cloud taking the slow Outer Loop, but people are concerned about network latency affecting the much faster Inner Loop.</p>
<ul>
<li>With Sourcegraph, developers are effectively saying a remote service can do a better job of <em>searching</em> their code than they can locally</li>
<li>With GitHub Copilot, even <em>autocomplete</em> is being made better by being cloud-enabled</li>
</ul>
<p>The degree to which the cloud can eat the Inner Loop is probably a question of reliability and latency - we are more than happy to hand over slow activities that take minutes, but nobody will tolerate 300ms latencies to see the result of a keystroke.</p>
<blockquote>
<p>Aside: It&#39;s probably worth a future essay breaking down the various components of the Inner Loop, as there are orders of magnitude differences in the latency of various activities we undertake and so different ideal solutions for each.</p>
</blockquote>
<h2 id="heading-the-potential-of-edge-compute">The Potential of Edge Compute</h2>
<p>Ultralow latency is the domain of edge compute, and likely the final frontier of how the cloud can eat that &#34;last mile&#34; of the developer Inner Loop.</p>
<p>Anil Dash, CEO of Glitch, <a target="_blank" href="https://twitter.com/anildash/status/1534177596593917954?s=20">put it best</a>:</p>
<blockquote>
<p>I think it’s more likely the rise of tech like CRDTs &amp; edge compute will blur the lines of what we actually think of as “local”.</p>
</blockquote>
<p>Cloudflare folks working on Cloudflare workers <a target="_blank" href="https://twitter.com/threepointone/status/1533914337290735616?s=20&amp;t=FBNMNXzv8v6vwAdSzkTxDw">also agree</a>:</p>
<blockquote>
<p>&#34;wrangler dev&#34; <strong>actually runs the worker on the edge</strong>, and we use localhost as a proxy. it means you have access to resources/secrets from your real environment, and we implement copy-on-write on stuff like durable objects that gets discarded once your shut down your session</p>
</blockquote>
<p>While not as low-latency, serverless folks like <a target="_blank" href="https://twitter.com/timallenwagner/status/1534200123252584449">Tim Wagner</a> (creator of AWS Lambda), <a target="_blank" href="https://twitter.com/emrahsamdan/status/1533912205594353676?s=20&amp;t=FBNMNXzv8v6vwAdSzkTxDw">Emrah Samdan</a> (PM @ <a href="http://Serverless.com" target="_blank">Serverless.com</a>), and <a target="_blank" href="https://twitter.com/tudor_g/status/1534443433846358016?s=21&amp;t=Af93P2lzKTPECID5Y0q2KA">Tudor Golubenco</a> (CTO Xata) also have a lot of sympathy with this because of how easy it is to provision/scale serverless resources. </p>
<h2 id="heading-pushback-its-still-not-good-enough">Pushback: It&#39;s Still Not Good Enough</h2>
<p><strong>Don&#39;t get overexcited here</strong>. My caution on judging this movement with today&#39;s technology is that for this to succeed, provisioning must feel so cheap as to be &#34;throwaway&#34; - even a latency of 10 seconds to spin up a preview environment is too long for me, though your mileage may vary.</p>
<p>It takes a second to deploy a frontend preview with <a target="_blank" href="https://www.netlify.com/blog/2018/08/14/announcing-netlify-drop-the-simplicity-of-bitballoon-with-the-added-power-of-netlify/">Netlify Drop</a> and ~10 seconds with the Netlify CLI, but I still habitually use localhost for development because my iteration cycle is in <em>milliseconds</em>. I can and have moved part of that workflow to remote tools like Codesandbox, Gitpod and Stackblitz, but none of them are fully capable of replicating the full set of dependencies that I need for fullstack development. In fact, after one <a target="_blank" href="https://www.learnwithjason.dev/how-to-use-netlify-identity-and-netlify-functions">particularly bad livestream</a>, I resolved to always use <a target="_blank" href="https://news.ycombinator.com/item?id=19615546">Netlify Dev</a> (the Netlify local dev solution I used to work on) because the iteration loop of git-push-and-wait-for-deploy was so agonizingly slow (I had the same pain with <a target="_blank" href="https://www.youtube.com/watch?v=VA3TFymZlW4">AWS Amplify</a>).</p>
<p>Other similar sentiments:</p>
<blockquote>
<p>Localhost has been attempted to be killed for eons, until the network is as fast as my disk, and can the “remoteness” of it can disappear entirely, localhost is here to stay. (<a target="_blank" href="https://twitter.com/nickhudkins/status/1534344248987897856?s=21&amp;t=XrMtpxYKXroVa45238TsGA">tweet</a>)</p>
<p>Currently we have local development with impossible physics: assets that load immediately, APIs that respond in under a millisecond. So if dev goes to the cloud because the latency is acceptable, then we are finding a middle point that is acceptable for both devs and real users. (<a target="_blank" href="https://twitter.com/royalicing/status/1534289848370352128?s=21&amp;t=XrMtpxYKXroVa45238TsGA">tweet</a>)</p>
</blockquote>
<p>But surely you can see that the latency question is a question of letting the Moore&#39;s law equivalent of cloud commoditizing infrastructure take its course. If it&#39;s not good enough today, then wait 5 years and check back again.</p>
<h2 id="heading-other-notable-responses">Other Notable responses</h2>
<p>People have very extreme:</p>
<ul>
<li>positive views<ul>
<li>&#34;General purpose computation on your own machine is probably going to be illegal in 20 years. It will be our greatest accomplishment if we can liberate even 1% of humanity from this soul-stifling metaverse. We increasingly are moving from stone age to bronze age computing. We need a bronze age collapse and the beginning of iron-age computing. In particular, we need computing that escapes the massive centralized palace economy model, even if only for 1% of humanity.&#34; (<a target="_blank" href="https://twitter.com/wolftivy/status/1533934249673228288?s=20&amp;t=FBNMNXzv8v6vwAdSzkTxDw">tweet</a>)</li>
<li>&#34;This is already the case in many big companies and killing local dev is going to be a huge win for developers.&#34; (<a target="_blank" href="https://twitter.com/roopakv/status/1533916592085422080?s=20&amp;t=FBNMNXzv8v6vwAdSzkTxDw">Roopak from Bolt</a>)</li>
</ul>
</li>
<li>and negative views<ul>
<li>&#34;You pry localhost from my cold dead hands!&#34; (<a target="_blank" href="https://twitter.com/coolpatiens/status/1533958291931512832?s=20&amp;t=FBNMNXzv8v6vwAdSzkTxDw">tweet</a>)</li>
<li>&#34;Out of my cold dead hands. This is the final step in the road to the inescapable surveillance dystopia.&#34; (<a target="_blank" href="https://twitter.com/zetalyrae/status/1533920071130955776">tweet</a>)</li>
<li>&#34;Nobody wondering whether it&#39;s a good idea to hand over what small power we have left as devs to a few private platforms.&#34; (<a target="_blank" href="https://twitter.com/sgwil/status/1534068485273305089?s=20&amp;t=FBNMNXzv8v6vwAdSzkTxDw">tweet</a>)</li>
</ul>
</li>
</ul>
<p><strong>Dan Abramov</strong> predicted this happens in <a target="_blank" href="https://twitter.com/dan_abramov/status/1533912835096465408?s=20&amp;t=FBNMNXzv8v6vwAdSzkTxDw">5 years</a>, not 10.</p>
<p><strong>Paul Biggar</strong> <a target="_blank" href="https://twitter.com/paulbiggar/status/1534185221955932161">sees</a> a few drivers:</p>
<blockquote>
<ul>
<li>production is harder and harder to replicate locally</li>
<li>it&#39;s cheaper to pay for cloud dev machines than expensive laptops each year</li>
<li><p>services with high scale (eg Spanner) don&#39;t behave the same on localhost anyway - you just have an emulator </p>
<p>Pretty sure we&#39;re going to do fewer things locally and a lot more developing directly against the cloud in the future</p>
</li>
</ul>
</blockquote>
<p><strong>Patrick Mckenzie</strong> <a target="_blank" href="https://twitter.com/patio11/status/1533958144090460161?s=20&amp;t=FBNMNXzv8v6vwAdSzkTxDw">says</a>: </p>
<blockquote>
<p>It seems to me like all the bits needed to do this are already abundantly available and it’s waiting for a) one solid product team and, crucially, b) becoming The Right Way To Do It for one language/platform that rockets to mainstream success.</p>
<p>You’d want the “curl dockerinthecloudlets.go” to be the first line in all the tutorials and for that to be the last time users ever think about compute substrate or networking.</p>
</blockquote>
<h2 id="heading-further-reading">Further Reading</h2>
<ul>
<li><a target="_blank" href="https://github.com/readme/guides/developer-onboarding"><strong>James Turnbull</strong></a>: &#34;I was speaking to the CEO of a developer tools company earlier this year. He told me that the biggest obstacle to contribution is his local development environment.&#34; </li>
<li><a target="_blank" href="https://twitter.com/juliusgb2k/status/1534154613682757635?s=20&amp;t=oquJNGbOl2U8ZLfTR_fMUA"><strong>Julius Gamanyi</strong></a> : Wardley mapping of the Cloud IDE workspace <a href="https://juliusgamanyi.com/2018/03/16/learning-to-map-cloud-ides-developer-workspaces-fast-time-to-first-line-of-code/" target="_blank">juliusgamanyi.com/2018/03/16/learning-to-ma..</a></li>
</ul>
</div></div>
  </body>
</html>
