<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/dbos-inc/dbos-transact-java">Original</a>
    <h1>Show HN: DBOS Java ‚Äì Postgres-Backed Durable Workflows</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<hr/>

<p dir="auto">DBOS provides lightweight durable workflows built on top of Postgres.
Essentially, it helps you write long-lived, reliable code that can survive crashes, restarts, and failures without losing state or duplicating work.</p>
<p dir="auto">As your workflows run, DBOS checkpoints each step they take in a Postgres database.
When a process stops (fails, intentionally suspends, or a machine dies), your program can recover from those checkpoints to restore its exact state and continue from where it left off, as if nothing happened.</p>
<p dir="auto">In practice, this makes it easier to build reliable systems for use cases like AI agents, data synchronization, payments, or anything that takes minutes, days, or weeks to complete.
Rather than bolting on ad-hoc retry logic and database checkpoints, DBOS workflows give you one consistent model for ensuring your programs can recover from any failure from exactly where they left off.</p>
<p dir="auto">This library contains all you need to add durable workflows to your program: there&#39;s no separate service or orchestrator or any external dependencies except Postgres.
Because it&#39;s just a library, you can incrementally add it to your projects, and it works out of the box with frameworks like Spring.
And because it&#39;s built on Postgres, it natively supports all the tooling you&#39;re familiar with (backups, GUIs, CLI tools) and works with any Postgres provider.</p>

<details open=""><summary><strong>üíæ Durable Workflows</strong></summary>

<p dir="auto">Workflows make your program <strong>durable</strong> by checkpointing its state in Postgres.
If your program ever fails, when it restarts all your workflows will automatically resume from the last completed step.</p>
<p dir="auto">You add durable workflows to your existing Java program in just a few lines of code by registering ordinary functions as workflows and steps:</p>
<div dir="auto" data-snippet-clipboard-copy-content="
interface Example {
    public void workflow();
}

class ExampleImpl implements Example {

    private void stepOne() {
        System.out.println(&#34;Step one completed!&#34;);
    }

    private void stepTwo() {
        System.out.println(&#34;Step two completed!&#34;);
    }

    @Workflow()
    public void workflow() {
        DBOS.runStep(() -&gt; stepOne(), &#34;stepOne&#34;);
        DBOS.runStep(() -&gt; stepTwo(), &#34;stepTwo&#34;);
    }
}"><pre><span>interface</span> <span>Example</span> {
    <span>public</span> <span>void</span> <span>workflow</span>();
}

<span>class</span> <span>ExampleImpl</span> <span>implements</span> <span>Example</span> {

    <span>private</span> <span>void</span> <span>stepOne</span>() {
        <span>System</span>.<span>out</span>.<span>println</span>(<span>&#34;Step one completed!&#34;</span>);
    }

    <span>private</span> <span>void</span> <span>stepTwo</span>() {
        <span>System</span>.<span>out</span>.<span>println</span>(<span>&#34;Step two completed!&#34;</span>);
    }

    <span>@</span><span>Workflow</span>()
    <span>public</span> <span>void</span> <span>workflow</span>() {
        <span>DBOS</span>.<span>runStep</span>(() -&gt; <span>stepOne</span>(), <span>&#34;stepOne&#34;</span>);
        <span>DBOS</span>.<span>runStep</span>(() -&gt; <span>stepTwo</span>(), <span>&#34;stepTwo&#34;</span>);
    }
}</pre></div>
<p dir="auto">Workflows are particularly useful for</p>
<ul dir="auto">
<li>Orchestrating business processes so they seamlessly recover from any failure.</li>
<li>Building observable and fault-tolerant data pipelines.</li>
<li>Operating an AI agent, or any application that relies on unreliable or non-deterministic APIs.</li>
</ul>
<p dir="auto"><a href="https://github.com/dbos-inc/dbos-transact-java/blob/main">Read more <g-emoji alias="arrow_upper_right">‚ÜóÔ∏è</g-emoji></a></p>
</details>
<details><summary><strong>üìí Asynchronous execution </strong></summary>

<p dir="auto">You can run your workflows asynchronously without making any changes to their interface or implementation.</p>
<p dir="auto">This is ideal for long-running background workflows: you code can return at a later point and check the status for completion and/or retrieve the result.</p>
<div dir="auto" data-snippet-clipboard-copy-content="var handle = DBOS.startWorkflow(()-&gt;example.exampleWorkflow(&#34;HelloDBOS&#34;));
result = handle.getResult();"><pre><span>var</span> <span>handle</span> = <span>DBOS</span>.<span>startWorkflow</span>(()-&gt;<span>example</span>.<span>exampleWorkflow</span>(<span>&#34;HelloDBOS&#34;</span>));
<span>result</span> = <span>handle</span>.<span>getResult</span>();</pre></div>
<p dir="auto"><a href="https://docs.dbos.dev/java/tutorials/workflow-tutorial#starting-workflows-in-the-background" rel="nofollow">Read more <g-emoji alias="arrow_upper_right">‚ÜóÔ∏è</g-emoji></a></p>
</details>
<details><summary><strong>üìí Durable Queues</strong></summary>

<p dir="auto">DBOS queues help you <strong>durably</strong> run distributed tasks.
You can enqueue a task from a durable workflow and one of your processes will pick it up for execution.
DBOS manages the execution of your tasks: it guarantees that tasks complete, and that their callers get their results without needing to resubmit them, even if your application is interrupted.</p>
<p dir="auto">Queues also provide flow control, so you can limit the concurrency of your tasks on a per-queue or per-process basis.
You can also set timeouts for tasks, rate limit how often queued tasks are executed, deduplicate tasks, or prioritize tasks.</p>
<p dir="auto">You can add queues to your workflows in just a couple lines of code.
They don&#39;t require a separate queueing service or message broker‚Äîjust Postgres.</p>
<div dir="auto" data-snippet-clipboard-copy-content=" public void queuedTasks() {
    for (int i = 0; i &lt; 3; i++) {
        String workflowId = &#34;child&#34; + i;
        var options = new StartWorkflowOptions(workflowId).withQueue(q);
        List&lt;WorkflowHandle&lt;String&gt;&gt; handles = new ArrayList&lt;&gt;();
        handles.add(DBOS.startWorkflow(()-&gt;simpleService.childWorkflow(workflowId), options));
    }

    for (int i = 0 ; i &lt; 3 ; i++) {
        String workflowId = &#34;child&#34;+i;
        var h = DBOS.retrieveWorkflow(workflowId);
        System.out.println(h.getResult());
    }
}

// In your main
var queue = new Queue(&#34;exampleQueue&#34;);
DBOS.registerQueue(queue);"><pre> <span>public</span> <span>void</span> <span>queuedTasks</span>() {
    <span>for</span> (<span>int</span> <span>i</span> = <span>0</span>; <span>i</span> &lt; <span>3</span>; <span>i</span>++) {
        <span>String</span> <span>workflowId</span> = <span>&#34;child&#34;</span> + <span>i</span>;
        <span>var</span> <span>options</span> = <span>new</span> <span>StartWorkflowOptions</span>(<span>workflowId</span>).<span>withQueue</span>(<span>q</span>);
        <span>List</span>&lt;<span>WorkflowHandle</span>&lt;<span>String</span>&gt;&gt; <span>handles</span> = <span>new</span> <span>ArrayList</span>&lt;&gt;();
        <span>handles</span>.<span>add</span>(<span>DBOS</span>.<span>startWorkflow</span>(()-&gt;<span>simpleService</span>.<span>childWorkflow</span>(<span>workflowId</span>), <span>options</span>));
    }

    <span>for</span> (<span>int</span> <span>i</span> = <span>0</span> ; <span>i</span> &lt; <span>3</span> ; <span>i</span>++) {
        <span>String</span> <span>workflowId</span> = <span>&#34;child&#34;</span>+<span>i</span>;
        <span>var</span> <span>h</span> = <span>DBOS</span>.<span>retrieveWorkflow</span>(<span>workflowId</span>);
        <span>System</span>.<span>out</span>.<span>println</span>(<span>h</span>.<span>getResult</span>());
    }
}

<span>// In your main</span>
<span>var</span> <span>queue</span> = <span>new</span> <span>Queue</span>(<span>&#34;exampleQueue&#34;</span>);
<span>DBOS</span>.<span>registerQueue</span>(<span>queue</span>);</pre></div>
<p dir="auto"><a href="https://docs.dbos.dev/java/tutorials/queue-tutorial" rel="nofollow">Read more <g-emoji alias="arrow_upper_right">‚ÜóÔ∏è</g-emoji></a></p>
</details>
<details><summary><strong>üìÖ Durable Scheduling</strong></summary>

<p dir="auto">Schedule workflows using cron syntax, or use durable sleep to pause workflows for as long as you like (even days or weeks) before executing.</p>
<p dir="auto">You can schedule a workflow using a single annotation:</p>
<div dir="auto" data-snippet-clipboard-copy-content="
public class SchedulerImpl implements Scheduler {
    
    @Workflow(name = &#34;every5Second&#34;)
    @Scheduled(cron = &#34;0/5 * * * * ?&#34;)
    public void every5Second(Instant schedule , Instant actual) {
        log.info(&#34;Executed workflow  &#34;+  schedule.toString() + &#34;   &#34; + actual.toString()) ;
    }
}

// In your main
DBOS.registerWorkflows(Scheduler.class, new SchedulerImpl());"><pre><span>public</span> <span>class</span> <span>SchedulerImpl</span> <span>implements</span> <span>Scheduler</span> {
    
    <span>@</span><span>Workflow</span>(<span>name</span> = <span>&#34;every5Second&#34;</span>)
    <span>@</span><span>Scheduled</span>(<span>cron</span> = <span>&#34;0/5 * * * * ?&#34;</span>)
    <span>public</span> <span>void</span> <span>every5Second</span>(<span>Instant</span> <span>schedule</span> , <span>Instant</span> <span>actual</span>) {
        <span>log</span>.<span>info</span>(<span>&#34;Executed workflow  &#34;</span>+  <span>schedule</span>.<span>toString</span>() + <span>&#34;   &#34;</span> + <span>actual</span>.<span>toString</span>()) ;
    }
}

<span>// In your main</span>
<span>DBOS</span>.<span>registerWorkflows</span>(<span>Scheduler</span>.<span>class</span>, <span>new</span> <span>SchedulerImpl</span>());</pre></div>
<p dir="auto"><a href="https://docs.dbos.dev/java/tutorials/scheduled-workflows" rel="nofollow">Read more <g-emoji alias="arrow_upper_right">‚ÜóÔ∏è</g-emoji></a></p>
</details>
<details><summary><strong>üì´ Durable Notifications</strong></summary>

<p dir="auto">Pause your workflow executions until a notification is received, or emit events from your workflow to send progress updates to external clients.
All notifications are stored in Postgres, so they can be sent and received with exactly-once semantics.
Set durable timeouts when waiting for events, so you can wait for as long as you like (even days or weeks) through interruptions or restarts, then resume once a notification arrives or the timeout is reached.</p>
<p dir="auto">For example, build a reliable billing workflow that durably waits for a notification from a payments service, processing it exactly-once:</p>
<div dir="auto" data-snippet-clipboard-copy-content="@Workflow(name = &#34;billing&#34;)
public void billingWorkflow() {
    // Calculate the charge, then submit the bill to a payments service
    String paymentStatus = (String) DBOS.recv(PAYMENT_STATUS, paymentServiceTimeout);
    if (paymentStatus.equals(&#34;paid&#34;)) {
        // handle paid
    } else {
        // handle not paid
    }
}

@Workflow(name = &#34;payment&#34;) 
public void payment(String targetWorkflowId) {
    DBOS.send(targetWorkflowId, PAYMENT_STATUS, &#34;paid&#34;) ;
}
      "><pre><span>@</span><span>Workflow</span>(<span>name</span> = <span>&#34;billing&#34;</span>)
<span>public</span> <span>void</span> <span>billingWorkflow</span>() {
    <span>// Calculate the charge, then submit the bill to a payments service</span>
    <span>String</span> <span>paymentStatus</span> = (<span>String</span>) <span>DBOS</span>.<span>recv</span>(<span>PAYMENT_STATUS</span>, <span>paymentServiceTimeout</span>);
    <span>if</span> (<span>paymentStatus</span>.<span>equals</span>(<span>&#34;paid&#34;</span>)) {
        <span>// handle paid</span>
    } <span>else</span> {
        <span>// handle not paid</span>
    }
}

<span>@</span><span>Workflow</span>(<span>name</span> = <span>&#34;payment&#34;</span>) 
<span>public</span> <span>void</span> <span>payment</span>(<span>String</span> <span>targetWorkflowId</span>) {
    <span>DBOS</span>.<span>send</span>(<span>targetWorkflowId</span>, <span>PAYMENT_STATUS</span>, <span>&#34;paid&#34;</span>) ;
}
      </pre></div>
</details>

<p dir="auto">To get started, follow the <a href="https://docs.dbos.dev/quickstart?language=java" rel="nofollow">quickstart</a> to install this open-source library and connect it to a Postgres database.
Then, check out the <a href="https://docs.dbos.dev/java/programming-guide" rel="nofollow">programming guide</a> to learn how to build with durable workflows and queues.</p>

<p dir="auto"><a href="https://docs.dbos.dev" rel="nofollow">https://docs.dbos.dev</a></p>

<p dir="auto"><a href="https://docs.dbos.dev/examples" rel="nofollow">https://docs.dbos.dev/examples</a></p>

<details><summary><strong>DBOS vs. Temporal</strong></summary>

<p dir="auto">Both DBOS and Temporal provide durable execution, but DBOS is implemented in a lightweight Postgres-backed library whereas Temporal is implemented in an externally orchestrated server.</p>
<p dir="auto">You can add DBOS to your program by installing the open-source library, connecting it to Postgres, and annotating workflows and steps.
By contrast, to add Temporal to your program, you must rearchitect your program to move your workflows and steps (activities) to a Temporal worker, configure a Temporal server to orchestrate those workflows, and access your workflows only through a Temporal client.
<a href="https://docs.dbos.dev/explanations/comparing-temporal" rel="nofollow">This page</a> makes the comparison in more detail.</p>
</details>

<p dir="auto">If you want to ask questions or hang out with the community, join us on <a href="https://discord.gg/fMwQjeW5zg" rel="nofollow">Discord</a>!
If you see a bug or have a feature request, don&#39;t hesitate to open an issue here on GitHub.
If you&#39;re interested in contributing, check out our <a href="https://github.com/dbos-inc/dbos-transact-java/blob/main/CONTRIBUTING.md">contributions guide</a>.</p>
</article></div></div>
  </body>
</html>
