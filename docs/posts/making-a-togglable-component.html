<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://justinacho.bearblog.dev/making-a-togglable-component/">Original</a>
    <h1>Making a togglable component</h1>
    
    <div id="readability-page-1" class="page"><div><p>Components can be easily made to toggle from hidden to shown if we have a wrapper component that controls the visibility. In my use case, I want to manage the visibility of a login form, but it can really be anything.</p>
<p>In order to build a Togglable component, I used the <code>useState</code> hook to add a <code>visible</code> state variable.</p>
<ul>
<li><code>useState</code> takes an initial state and returns two values, the current state and a function that updates the state. For example, in our Togglable component:</li>
</ul>
<div><pre><span></span><span>const</span><span> </span><span>[</span><span>visible</span><span>,</span><span> </span><span>setVisible</span><span>]</span><span> </span><span>=</span><span> </span><span>useState</span><span>(</span><span>false</span><span>);</span>
</pre></div>
<ul>
<li><code>visible</code> keeps track of whether or not our login form is visible. When our page with this component is first rendered, our login form should not be visible so <code>visible</code> is first set to <code>false</code>.</li>
<li><code>setVisible</code> is used whenever we want to update the visibility of the form. In our example, we want to show the form when the <code>Sign in</code> button is clicked. We can write a function to toggle the visibility:</li>
</ul>
<div><pre><span></span><span>const</span><span> </span><span>toggleVisibility</span><span> </span><span>=</span><span> </span><span>()</span><span> </span><span>=&gt;</span><span> </span><span>{</span>
<span>    </span><span>setVisible</span><span>(</span><span>!</span><span>visible</span><span>);</span>
<span>  </span><span>};</span>
</pre></div>
<p>We can then define two variables <code>hideWhenVisible</code> and <code>showWhenVisible</code> to store the appropriate CSS style for <code>display</code> depending on the state of <code>visible</code>:</p>
<div><pre><span></span><span>const</span><span> </span><span>hideWhenVisible</span><span> </span><span>=</span><span> </span><span>{</span><span> </span><span>display</span><span>:</span><span> </span><span>visible</span><span> </span><span>?</span><span> </span><span>&#39;none&#39;</span><span> </span><span>:</span><span> </span><span>&#39;&#39;</span><span> </span><span>}</span><span> </span>
<span>const</span><span> </span><span>showWhenVisible</span><span> </span><span>=</span><span> </span><span>{</span><span> </span><span>display</span><span>:</span><span> </span><span>visible</span><span> </span><span>?</span><span> </span><span>&#39;&#39;</span><span> </span><span>:</span><span> </span><span>&#39;none&#39;</span><span> </span><span>}</span>
</pre></div>
<p>Our Togglable component will take in a props object that has <code>props.buttonLabel</code> and <code>props.children</code>. The text for the button that does the toggling is passed down through the Togglable component&#39;s <code>buttonLabel</code> attribute. <code>props.children</code> is the component wrapped by the Togglable component. For example:</p>
<div><pre><span></span><span>&lt;</span><span>Togglable</span><span> </span><span>buttonLabel</span><span>=</span><span>&#39;Sign in&#39;</span><span>&gt;</span>
<span>  </span><span>&lt;</span><span>LoginForm</span><span> </span><span>/&gt;</span>
<span>&lt;/</span><span>Togglable</span><span>&gt;</span>
</pre></div>
<p>It&#39;s interesting to note here that React components can take on two forms: <code>&lt;Togglable&gt;{children}&lt;/Togglable&gt;</code> or <code>&lt;LoginForm/&gt;</code>. The first is useful when wrapping another component and we can access that child component through <code>props.children</code> or when we don&#39;t need child components, we just use the second form.</p>
<p>The code for <code>Togglable.jsx</code> look like this:</p>
<div><pre><span></span><span>import</span><span> </span><span>{</span><span> </span><span>useState</span><span> </span><span>}</span><span> </span><span>from</span><span> </span><span>&#34;react&#34;</span><span>;</span>

<span>export</span><span> </span><span>const</span><span> </span><span>Togglable</span><span> </span><span>=</span><span> </span><span>(</span><span> </span><span>props</span><span> </span><span>)</span><span> </span><span>=&gt;</span><span> </span><span>{</span>
<span>  </span><span>const</span><span> </span><span>[</span><span>visible</span><span>,</span><span> </span><span>setVisible</span><span>]</span><span> </span><span>=</span><span> </span><span>useState</span><span>(</span><span>false</span><span>);</span>

<span>  </span><span>const</span><span> </span><span>hideWhenVisible</span><span> </span><span>=</span><span> </span><span>{</span><span> </span><span>display</span><span>:</span><span> </span><span>visible</span><span> </span><span>?</span><span> </span><span>&#34;none&#34;</span><span> </span><span>:</span><span> </span><span>&#34;&#34;</span><span> </span><span>};</span>
<span>  </span><span>const</span><span> </span><span>showWhenVisible</span><span> </span><span>=</span><span> </span><span>{</span><span> </span><span>display</span><span>:</span><span> </span><span>visible</span><span> </span><span>?</span><span> </span><span>&#34;&#34;</span><span> </span><span>:</span><span> </span><span>&#34;none&#34;</span><span> </span><span>};</span>

<span>  </span><span>const</span><span> </span><span>toggleVisibility</span><span> </span><span>=</span><span> </span><span>()</span><span> </span><span>=&gt;</span><span> </span><span>{</span>
<span>    </span><span>setVisible</span><span>(</span><span>!</span><span>visible</span><span>);</span>
<span>  </span><span>};</span>

<span>  </span><span>return</span><span> </span><span>(</span>
<span>    </span><span>&lt;</span><span>div</span><span>&gt;</span>
<span>      </span><span>&lt;</span><span>div</span><span> </span><span>style</span><span>=</span><span>{</span><span>hideWhenVisible</span><span>}&gt;</span>
<span>        </span><span>&lt;</span><span>button</span><span> </span><span>onClick</span><span>=</span><span>{</span><span>toggleVisibility</span><span>}&gt;{</span><span>props</span><span>.</span><span>buttonLabel</span><span>}&lt;/</span><span>button</span><span>&gt;</span>
<span>      </span><span>&lt;/</span><span>div</span><span>&gt;</span>
<span>      </span><span>&lt;</span><span>div</span><span> </span><span>style</span><span>=</span><span>{</span><span>showWhenVisible</span><span>}&gt;</span>
<span>        </span><span>{</span><span>props</span><span>.</span><span>children</span><span>}</span>
<span>        </span><span>&lt;</span><span>button</span><span> </span><span>onClick</span><span>=</span><span>{</span><span>toggleVisibility</span><span>}&gt;</span><span>cancel</span><span>&lt;/</span><span>button</span><span>&gt;</span>
<span>      </span><span>&lt;/</span><span>div</span><span>&gt;</span>
<span>    </span><span>&lt;/</span><span>div</span><span>&gt;</span>
<span>  </span><span>);</span>
<span>});</span>
</pre></div>
<p>The <code>toggleVisibility</code> function is called when <code>props.buttonLabel</code> in my case, &#34;Sign in&#34;, is clicked or when &#34;cancel&#34; is clicked.</p>
<p>Demonstrated here:</p>
<p><img alt="toggling" src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExcnA2ZnpoamZhazdpNHhuZzAxcTZibHp6YzB0dzFpeWZrYXc3eTB3diZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/Uk3mzH0202XHcf722h/giphy-downsized-large.gif"/></p>
</div></div>
  </body>
</html>
