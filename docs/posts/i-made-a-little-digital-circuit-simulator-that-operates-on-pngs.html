<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/lynnpepin/reso">Original</a>
    <h1>Show HN: I made a little digital circuit simulator that operates on PNGs</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
          <article itemprop="text">
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/lynnpepin/reso/blob/master/reso_logo.gif"><img src="https://github.com/lynnpepin/reso/raw/master/reso_logo.gif" alt="Reso logo"/></a></p>
<p dir="auto">Reso is a low-level circuit design language and simulator, inspired by things like Redstone, Conway&#39;s Game of Life, and Wireworld.</p>
<p dir="auto"><strong>What is Reso?</strong></p>
<ul dir="auto">
<li>Reso is a digital logic circuit graphical programming language!</li>
<li>Reso is a digital logic circuit simulator.</li>
<li>Reso program outputs other Reso programs.</li>
<li>Reso is <em>not</em> a cellular automata, despite similarities.</li>
<li>Reso is <em>not</em> useful or good yet, but I hope you can still have fun with it.</li>
</ul>
<p dir="auto">An input program is a circuit described by a (bitmap) image. When a Reso program is ran through the Reso simulator, it outputs another valid Reso program! Things get interesting when you iterate this process.</p>
<p dir="auto">While the simulator acts like a pure function, for performance reasons, it maintains state between iterations.</p>
<p dir="auto">Because images are valid circuits, you can copy-and-paste smaller components to build up more complex circuits using your favorite image editor!</p>
<p dir="auto">This implementation is (1) slow (it&#39;s in Python!) and (2) not-interactive (you can&#39;t edit circuits live!) I hope you can have fun with this despite those limitations. :)</p>
<h2 dir="auto"><a id="user-content-installation" aria-hidden="true" href="#installation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h2>
<p dir="auto">TODO -- I should list the packages and Python version here!</p>
<p dir="auto">It is recommended to run <code>git clone</code> with flag <code>--depth 1</code> since the examples, slides, etc. in this repository made it a bit heavy.</p>
<h2 dir="auto"><a id="user-content-usage" aria-hidden="true" href="#usage"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h2>
<p dir="auto">This implementation of Reso supports command line usage. Input is a single image, and outputs are iterations of the Reso simulation of the circuit described in the first image.</p>
<h3 dir="auto"><a id="user-content-command-line" aria-hidden="true" href="#command-line"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Command line</h3>
<p dir="auto">Here&#39;s an example: Load <code>~/helloworld.png</code>, <em>iterate</em> (<code>-n</code>) 12 times, and <em>save</em> (<code>-s</code>) the results to <code>~/hello_00.png</code>, <code>~/hello_01.png</code>, ... <code>~/hello_04.png</code>, printing information <em>verbosely</em> (<code>-v</code>) along the way:</p>
<div data-snippet-clipboard-copy-content="python3 reso.py ~/helloworld.png -n 12 -s hello_ -v"><pre><code>python3 reso.py ~/helloworld.png -n 12 -s hello_ -v
</code></pre></div>
<p dir="auto">If you only wanted to save the end result, add the &#34;-o&#34; flag, as such:</p>
<div data-snippet-clipboard-copy-content="python3 reso.py ~/helloworld.png -n 12 -s hello_ -v -o"><pre><code>python3 reso.py ~/helloworld.png -n 12 -s hello_ -v -o
</code></pre></div>
<p dir="auto">And here is the full command-line usage:</p>
<div data-snippet-clipboard-copy-content="usage: reso.py load_location [--numiter NUMITER] [--save SAVE] [--outputlast] [--verbose]    

positional arguments:
  load_location         Location to load image from

other arguments:
  --save SAVE, -s SAVE  Prefix to save images to.
  --numiter ITERATE, -n ITERATE
                        iterate the reso board n times. Defaults to 1.
  --outputlast, -o      Only save the final iteration of the board.
  --verbose, -v         Print extra information; useful for debugging.
"><pre><code>usage: reso.py load_location [--numiter NUMITER] [--save SAVE] [--outputlast] [--verbose]    

positional arguments:
  load_location         Location to load image from

other arguments:
  --save SAVE, -s SAVE  Prefix to save images to.
  --numiter ITERATE, -n ITERATE
                        iterate the reso board n times. Defaults to 1.
  --outputlast, -o      Only save the final iteration of the board.
  --verbose, -v         Print extra information; useful for debugging.

</code></pre></div>
<h3 dir="auto"><a id="user-content-palette" aria-hidden="true" href="#palette"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Palette</h3>
<p dir="auto">The palette is an important part of Reso! You can define a circuit using an image. Any pixel with a color in this palette of eight colors has semantic meaning, any other color doesn&#39;t.</p>
<table>
<thead>
<tr>
<th>Color</th>
<th>Meaning</th>
<th>Hex code</th>
</tr>
</thead>
<tbody>
<tr>
<td>Bright orange</td>
<td>Orange wire (on)</td>
<td><code>#ff8000</code></td>
</tr>
<tr>
<td>Dark  orange</td>
<td>Orange wire (off)</td>
<td><code>#804000</code></td>
</tr>
<tr>
<td>Bright sapphire</td>
<td>Sapphire wire (on)</td>
<td><code>#0080ff</code></td>
</tr>
<tr>
<td>Dark sapphire</td>
<td>Sapphire wire (off)</td>
<td><code>#004080</code></td>
</tr>
<tr>
<td>Bright lime</td>
<td>Lime wire (on)</td>
<td><code>#80ff00</code></td>
</tr>
<tr>
<td>Dark lime</td>
<td>Lime wire (off)</td>
<td><code>#408000</code></td>
</tr>
<tr>
<td>Bright purple</td>
<td>Output (node to wire)</td>
<td><code>#8000ff</code></td>
</tr>
<tr>
<td>Dark purple</td>
<td>Input (wire to node)</td>
<td><code>#400080</code></td>
</tr>
<tr>
<td>Bright teal</td>
<td>XOR logic node</td>
<td><code>#00ff80</code></td>
</tr>
<tr>
<td>Dark teal</td>
<td>AND logic node</td>
<td><code>#008040</code></td>
</tr>
</tbody>
</table>
<p dir="auto">For backwards compatibility with new functionality, we reserve a total of 48 colors. (This is by convention and is not enforced by the Reso simulator.)</p>
<p dir="auto"><em>A brief description of how programs run:</em> <strong>Wires</strong> push their signals through <strong>input nodes</strong>. There are three different colors of wire (orange, sapphire, and lime). Input nodes pass these signals to <strong>logic nodes</strong> and <strong>output nodes</strong>. Logic nodes are used to calculate the &#39;AND&#39; or &#39;XOR&#39; of every input signal, and push these on to <strong>output nodes</strong>. The output nodes act as one big <em>OR</em> gate, pushing the new signals out to wires.</p>
<p dir="auto">The colors of different wires don&#39;t have any significance. They exist to make it easier to wire in 2D space, and to make it easier to keep track of which wire is which.</p>
<p dir="auto">Here&#39;s the full palette of colors that we consider &#34;reserved&#34;. Other colors are &#39;whitespace&#39;, i.e. will not have any semantic significance.</p>
<table>
<thead>
<tr>
<th>Hue</th>
<th>Saturated (1)</th>
<th>Dark (2)</th>
<th>Light (3)</th>
<th>Unsaturated (4)</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Red (R)</strong></td>
<td><code>#ff0000</code></td>
<td><code>#800000</code></td>
<td><code>#ff8080</code></td>
<td><code>#804040</code></td>
</tr>
<tr>
<td><strong>Yellow (Y)</strong></td>
<td><code>#ffff00</code></td>
<td><code>#808000</code></td>
<td><code>#ffff80</code></td>
<td><code>#808040</code></td>
</tr>
<tr>
<td><strong>Green (G)</strong></td>
<td><code>#00ff00</code></td>
<td><code>#008000</code></td>
<td><code>#80ff80</code></td>
<td><code>#408040</code></td>
</tr>
<tr>
<td><strong>Cyan (C)</strong></td>
<td><code>#00ffff</code></td>
<td><code>#008080</code></td>
<td><code>#80ffff</code></td>
<td><code>#408080</code></td>
</tr>
<tr>
<td><strong>Blue (B)</strong></td>
<td><code>#0000ff</code></td>
<td><code>#000080</code></td>
<td><code>#8080ff</code></td>
<td><code>#404080</code></td>
</tr>
<tr>
<td><strong>Magenta (M)</strong></td>
<td><code>#ff00ff</code></td>
<td><code>#800080</code></td>
<td><code>#ff80ff</code></td>
<td><code>#804080</code></td>
</tr>
<tr>
<td><strong>Orange (O)</strong></td>
<td><code>#ff8000</code></td>
<td><code>#804000</code></td>
<td><code>#ffc080</code></td>
<td><code>#806040</code></td>
</tr>
<tr>
<td><strong>Lime (L)</strong></td>
<td><code>#80ff00</code></td>
<td><code>#408000</code></td>
<td><code>#c0ff80</code></td>
<td><code>#608040</code></td>
</tr>
<tr>
<td><strong>Teal (T)</strong></td>
<td><code>#00ff80</code></td>
<td><code>#008040</code></td>
<td><code>#80ffc0</code></td>
<td><code>#408060</code></td>
</tr>
<tr>
<td><strong>Sapphire (S)</strong></td>
<td><code>#0080ff</code></td>
<td><code>#004080</code></td>
<td><code>#80c0ff</code></td>
<td><code>#406080</code></td>
</tr>
<tr>
<td><strong>Purple (P)</strong></td>
<td><code>#8000ff</code></td>
<td><code>#400080</code></td>
<td><code>#c080ff</code></td>
<td><code>#604080</code></td>
</tr>
<tr>
<td><strong>Violet (V)</strong></td>
<td><code>#ff0080</code></td>
<td><code>#800040</code></td>
<td><code>#ff80c0</code></td>
<td><code>#804060</code></td>
</tr>
</tbody>
</table>
<p dir="auto">(Note: Don&#39;t sample directly from your web-browser! They don&#39;t always render colors reliably.)</p>
<h2 dir="auto"><a id="user-content-examples" aria-hidden="true" href="#examples"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Examples</h2>
<p dir="auto">The Reso logo is actually a complete circuit in-and-of itself! Here is a small gif that explains what&#39;s going on, animated at 1/4th the speed (that is, one update every 2000ms):</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/lynnpepin/reso/blob/master/logo/reso_logo_explained.gif"><img src="https://github.com/lynnpepin/reso/raw/master/logo/reso_logo_explained.gif" alt="This is Reso gif"/></a></p>
<h2 dir="auto"><a id="user-content-things-to-be-done" aria-hidden="true" href="#things-to-be-done"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Things to be done:</h2>
<p dir="auto">Despite all the tests and documentation, Reso is a proof-of-concept and there&#39;s a lot to be done before this could even be a little useful!</p>
<p dir="auto">Here are some neat ideas:</p>
<p dir="auto"><strong>Flag to map to nearby colors:</strong> I&#39;ve been having a weird issue with some versions of The GIMP, where colors are saved or picked incorrectly. Reso requires precise colors (e.g. <code>#ff8000</code> is a valid color but <code>#ff8800</code> is not.) Perhaps a flag to consider only the ~4 or so most-significant-bits per pixel, or to map colors within a certain range to their nearest one in the palette, would be useful?</p>
<p dir="auto"><strong>Export to GIF option:</strong> Self explanatory! No more fiddling with GIMP or ffmpeg.</p>
<p dir="auto"><strong>Transferrable compiled graphs:</strong> Reso is really a graph computation model of a logical circuit, and images are a way to define that graph. I want to better decouple that model, and make this a repository a better reference implementation.</p>
<p dir="auto">Specifically, we consider pixels to represent logical &#34;resels&#34; which can also be represented textually, and regions of resels represent elements, which are represented internally as a graph implemented with Python dictionaries. But this graph isn&#39;t a standard, so a compiled graph can&#39;t be transferred between implementations.</p>
<p dir="auto"><strong>GUI and interactivity:</strong> Some kind of GUI would be nifty too, rather than requiring expertise in some external graphical application. An interactive, Javascript webpage would make this a lot easier to mess around with, huh?</p>
<p dir="auto"><strong>Speed:</strong> This is also really slow. Might reimplement in Rust when I get around to learning it!</p>
<p dir="auto"><strong>Port to a faster language:</strong> Porting this to a faster language would be great. I think Rust would be fun (both because I want to learn it, and because there&#39;s some &#34;Web Assembly&#34; thing that makes me think it&#39;s easier to put Rust in the web than, say, C or C++.)</p>
<h2 dir="auto"><a id="user-content-see-also" aria-hidden="true" href="#see-also"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>See Also</h2>
<p dir="auto">Here are a list of similar projects that I am aware of. Please make an issue or PR if you have something else to share!</p>
<ul dir="auto">
<li>Several sandbox videogames which have turing-complete circuit languages that empower the player to automate their world:
<ul dir="auto">
<li>Minecraft&#39;s <em>Redstone</em> was the primary inspiration for this.</li>
<li>Terraria (Minecraft&#39;s 2D analogue) has a similar logic-gate wiring mechanism.</li>
<li>Hempuli is one of my favorite game devs, and seeing their development on <a href="https://en.wikipedia.org/wiki/Baba_Is_You" rel="nofollow">Baba Is You</a> kept my brain on the right track for this.</li>
<li>Various other open-world sandbox games: Factorio, No Man&#39;s Sky, Dwarf Fortress, and others!</li>
</ul>
</li>
<li><a href="https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life" rel="nofollow">Conway&#39;s Game of Life</a> -- A Turing-complete zero-player-game. By far the most popular cellular automata. Rest in Peace John Conway.</li>
<li><a href="https://en.wikipedia.org/wiki/Wireworld" rel="nofollow">Wireworld</a> -- Another cellular automata in which it is easy to implement logic circuits.</li>
<li><a href="https://en.wikipedia.org/wiki/Brian%27s_Brain" rel="nofollow">Brian&#39;s Brain</a> -- A cellular automaton similar to the previous.</li>
<li><a href="https://realhet.wordpress.com/2015/09/02/bitmap-logic-simulator/" rel="nofollow">Bitmap Logic Simulator</a> -- I&#39;m not sure how this works, but check it out! It&#39;s a similar idea.</li>
</ul>
</article>
        </div></div>
  </body>
</html>
