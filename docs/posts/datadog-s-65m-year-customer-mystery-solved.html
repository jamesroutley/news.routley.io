<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.pragmaticengineer.com/datadog-65m-year-customer-mystery/">Original</a>
    <h1>Datadog&#39;s $65M/year customer mystery solved</h1>
    
    <div id="readability-page-1" class="page"><div role="main">
    <article>

        

        <section id="content">
            <p><em>The internet has been speculating the past few days on which crypto company spent $65M on Datadog in 2022. I confirmed it was Coinbase, and here are the details of what happened. Originally published on 11 May 2023.</em></p><p><em>üëã Hi, this is </em><a href="https://twitter.com/gergelyorosz?ref=blog.pragmaticengineer.com"><em>Gergely</em></a><em> with a bonus, free issue of the Pragmatic Engineer Newsletter. We cover one out of six topics in today‚Äôs subscriber-only <a href="https://newsletter.pragmaticengineer.com/p/the-scoop-47?ref=blog.pragmaticengineer.com">The Scoop issue</a>. To get full newsletters twice a week, </em><a href="https://newsletter.pragmaticengineer.com/about?ref=blog.pragmaticengineer.com"><em>subscribe here</em></a><em>.</em></p><p>Datadog is a leading observability tooling provider which went public in 2019, with a current market cap of $28B. The company made $1.67B revenue in 2022, circa $140M per month. On an earnings call a week ago, on 4 May, the CFO mentioned a ‚Äúlarge upfront bill that did not recur,‚Äù saying:</p><blockquote>‚ÄúBillings were $511 million, up 15% year-over-year. We had a large upfront bill for a client in Q1 2022 that did not recur at the same level or timing in Q1 2023. Pro forma for this client, billings growth was in the low 30s percent year-over-year.‚Äù</blockquote><p>If you‚Äôre like me, you‚Äôd probably skim over this detail, as it‚Äôs 15% here, 30% there. However, analysts attend these calls whose bread and butter is crunching the numbers and figuring out what a company might be trying to hide. A JP Morgan stock analyst did just this, quickly crunching numbers and asking the question:</p><blockquote>‚ÄúDavid, looking at the math on this large upfront bill that did not recur, it seems to be about $65 million, if I&#39;m running that correctly. Can you possibly shed a little more light?‚Äú</blockquote><p>Datadog‚Äôs CFO, David Obstler gave more details:</p><blockquote>‚ÄúThat was a crypto company which continues to be a customer of ours. But that was an early optimizer. We had always talked about some of the industries that were most affected and optimized.‚Äú</blockquote><p>So, who is this mysterious crypto company? Investor Turner Novak <a href="https://twitter.com/TurnerNovak/status/1654577231937544192?s=20&amp;ref=blog.pragmaticengineer.com" rel="noopener noreferrer nofollow">speculated</a> that it‚Äôs Coinbase:</p><figure><img src="https://blog.pragmaticengineer.com/content/images/2023/05/Screenshot-2023-05-11-at-12.38.28.png" alt="" loading="lazy" width="1182" height="1114" srcset="https://blog.pragmaticengineer.com/content/images/size/w600/2023/05/Screenshot-2023-05-11-at-12.38.28.png 600w, https://blog.pragmaticengineer.com/content/images/size/w1000/2023/05/Screenshot-2023-05-11-at-12.38.28.png 1000w, https://blog.pragmaticengineer.com/content/images/2023/05/Screenshot-2023-05-11-at-12.38.28.png 1182w" sizes="(min-width: 720px) 720px"/></figure><p>He added he doesn‚Äôt know for certain that it is Coinbase, as other crypto companies have also raised silly amounts of money in the past several years.</p><p>So, did Coinbase spend $65M on Datadog in 2022? Online there‚Äôs no shortage of theories, or people pretending to be Coinbase employees, such as this anonymous commenter on Hacker News, <a href="https://news.ycombinator.com/item?id=35866061&amp;ref=blog.pragmaticengineer.com" rel="noopener noreferrer nofollow">claiming</a> that the $65M was for a 3-year upfront payment (which information I could not verify). I wanted to find the truth, so I tracked down software engineers at the company. And I got my answer:</p><p><strong>Yes. Coinbase spent $65M with Datadog in 2021, and this was their due bill for that year. </strong>I can confirm this, having talked with both current and former software engineers at Coinbase who shared details of what happened.</p><p>Here‚Äôs how Datadog‚Äôs CEO explained, on the earnings call on what happened:</p><blockquote>‚ÄúThis is one of those situations where this customer was in an industry that got pretty much decimated over the past year. And their own business was cut in three or four, in terms of the revenue. And when that&#39;s the case, we really work with customers to restructure their contracts with us. We want to be part of the solution for them, not part of the problem (...) We restructure their contract, so we keep them as a happy customer for many more years and do a deal that works for everyone with their business profile.‚Äù</blockquote><p>And here‚Äôs what actually happened, as I understand from talking with engineers at Coinbase.</p><p>Coinbase had an incredible 2021 and did not have to care about costs. The company went public in June that year, and was valued at an eye-popping $86B. In comparison, nearly two years later the company is valued around $14B, a 75% decline.</p><p>During the boom, trading volumes were surging, beating record after record, and Coinbase could barely keep up. Here‚Äôs how Coinbase CEO Brian Amstrong summarized it:</p><blockquote>‚ÄúSo, obviously 2021 was just an incredible year for Coinbase, the kind of thing that you see very rarely in your lifetime, in a business career (...) We hit an all time high in our monthly transacting users of 11.4 million, which is 4x year-over-year, 400% pretty incredible.‚Äù</blockquote><p>Following the IPO in summer 2021, nobody at the company cared about infra costs; the only focus was growth. The company racked up huge bills for the likes of AWS, Snowflake, and also Datadog. And so, the $65M bill was for Datadog, for 2021. Coinbase settled the bill in Q1 2022.</p><p><strong>In early 2022 Coinbase suddenly needed to cut back infra spending. </strong>The crypto industry hit a sudden chill, affecting Coinbase‚Äôs business. As revenue dried up, the company turned its attention to reducing its overly high costs.</p><p>For observability, Coinbase spun up a dedicated team with the goal of moving off of Datadog, and onto a Grafana/Prometheus/Clickhouse stack. A quick summary of these technologies:</p><p><a href="https://prometheus.io/?ref=blog.pragmaticengineer.com" rel="noopener noreferrer nofollow"><strong>Prometheus</strong></a><strong>: a time series database. </strong>A very popular open-source solution for systems and services monitoring. Prometheus collects metrics from configured targets (services) at given intervals. It evaluates rules and can trigger alerts. It‚Äôs mostly written in Go, with some Java, Python and Ruby parts. Prometheus stores time series in-memory and on storage (HDD or SSD), using an efficient and custom format, and supports <a href="https://en.wikipedia.org/wiki/Shard_(database_architecture)?ref=blog.pragmaticengineer.com" rel="noopener noreferrer nofollow">sharding</a> and <a href="https://en.wikipedia.org/wiki/Federated_database_system?ref=blog.pragmaticengineer.com" rel="noopener noreferrer nofollow">federation</a>.</p><p>Prometheus <a href="https://www.cncf.io/projects/prometheus/?ref=blog.pragmaticengineer.com" rel="noopener noreferrer nofollow">is part</a> of the Cloud Native Foundation, membership of which indicates that it‚Äôs safe to build on top of Prometheus, as it‚Äôs actively maintained and will continue to be.</p><p>Prometheus can be self-hosted, but several cloud providers also offer managed Prometheus services: both Google Cloud and AWS have this service in production, while Azure has it in preview.</p><p><a href="https://grafana.com/?ref=blog.pragmaticengineer.com" rel="noopener noreferrer nofollow"><strong>Grafana</strong></a><strong>: the frontend for visualizing metrics. </strong>Grafana is a popular source analytics and monitoring visualization solution. If you need to display or dive into metrics or alerts, it‚Äôs the go-to tool, and widely used across tech companies. When I was at Uber, Grafana powered many of our graphs. Here‚Äôs an example of Grafana dashboards you can <a href="https://play.grafana.org/d/000000012/grafana-play-home?orgId=1&amp;ref=blog.pragmaticengineer.com" rel="noopener noreferrer nofollow">try out</a>:</p><figure><img src="https://blog.pragmaticengineer.com/content/images/2023/05/Screenshot-2023-05-11-at-13.59.06.png" alt="Example Grafana dashboards. Source: Grafana.org" loading="lazy" width="1928" height="1618" srcset="https://blog.pragmaticengineer.com/content/images/size/w600/2023/05/Screenshot-2023-05-11-at-13.59.06.png 600w, https://blog.pragmaticengineer.com/content/images/size/w1000/2023/05/Screenshot-2023-05-11-at-13.59.06.png 1000w, https://blog.pragmaticengineer.com/content/images/size/w1600/2023/05/Screenshot-2023-05-11-at-13.59.06.png 1600w, https://blog.pragmaticengineer.com/content/images/2023/05/Screenshot-2023-05-11-at-13.59.06.png 1928w" sizes="(min-width: 720px) 720px"/><figcaption><em>Example Grafana dashboards. Source: </em><a rel="noopener noreferrer nofollow" href="https://play.grafana.org/d/000000012/grafana-play-home?orgId=1&amp;ref=blog.pragmaticengineer.com"><em>Grafana.org</em></a></figcaption></figure><p><a href="https://clickhouse.com/?ref=blog.pragmaticengineer.com" rel="noopener noreferrer nofollow"><strong>Clickhouse</strong></a>: log management. A fast and open-source column-oriented database management system, which is a popular choice for log management. Clickhouse is written predominantly in C++, and is widely used across the industry. For example, Cloudflare uses Clickhouse to store all its DNS and HTTP logs ‚Äì which is more than 10M rows per second! ‚Äì and Uber uses Clickhouse as its central logging platform.</p><p>Coinbase spun up its in-house approach without the main goal of saving costs, but to have full control and ownership of observability. Observability and reliability is a major differentiator for Coinbase, as it gives a competitive advantage over rivals.</p><p>However, with the crypto market cooling, costs became a major focus, and it was clear the in-house Grafana/Prometheus solution was much cheaper. The Coinbase team had been double-writing the new stack for months, confirming everything worked well, and ironing out any issues.</p><p><em>We cover approaches like double-writing in the issue </em><a href="https://newsletter.pragmaticengineer.com/p/migrations?ref=blog.pragmaticengineer.com" rel="noopener noreferrer nofollow"><em>Migrations done well</em></a><em>.</em></p><p>So Coinbase was ready to pull the plug on Datadog, but Datadog saved its customer relationship at the last minute by making Coinbase a very appealing deal it could not refuse. In future, the bill for Datadog would be nowhere near the $65M of 2021. As Brian Amstrong said of the crypto market during 2021, a $65M bill is the kind of thing you see very rarely in a business career.</p><p>I asked an engineer at Coinbase who used the in-house stack and Datadog how they felt about the decision to stay on Datadog. They said it was ultimately the right decision, considering the reasonable costs, and the superior Datadog development experience.</p><p>Coinbase could <em>eventually</em> have engineered a similar experience in-house. However, to provide a similarly seamless developer experience, would have likely taken tens of engineering years.</p><p><strong>‚ÄúExpensive‚Äù in observability tooling is relative. </strong>Let‚Äôs assume that today Coinbase ‚Äúonly‚Äù spends, say, $10M per year on Datadog. Is this too much? Looking at the headline number, it‚Äôs tempting to think so.</p><p>However, let‚Äôs look a level deeper. A platform like Datadog helps prevent outages, detects them instantly, and mitigates them faster. In 2022, Coinbase had 17 outages, totalling about 12 hours of downtime. The company‚Äôs daily average revenue is around $9M/day, based on their 2022 earnings.</p><p>Assume that Datadog cuts the number of outages by half, by preventing them with early monitoring. That would mean that without Datadog, we‚Äôd look at 24 hours‚Äô worth of downtime, not 12. Let‚Äôs also assume that using Datadog results in mitigating outages 50% faster than without - thanks to being able to connect health metrics with logs, debug faster, pinpoint the root cause and mitigate faster. In that case, without Datadog, we could be looking at 36 hours worth of total downtime, versus the 12 hours with Datadog. To put it in numbers: the company would make around $9M in revenue it would otherwise lose, Now that $10M/year fee practically pays for itself!</p><p><strong>What can we learn from Coinbase‚Äôs cost reduction exercise? </strong>Vendors are tight-lipped about their customers reducing spend, and it is a lucky coincidence that Datadog gave enough hints to find out who their big ‚Äúearly optimizer‚Äù customer was, and find out more details. But is the story of Coinbase a one-off?</p><p>I‚Äôm not sure that it is. Three months ago, I covered the trend that <a href="https://newsletter.pragmaticengineer.com/p/vendor-spend-cuts?ref=blog.pragmaticengineer.com" rel="noopener noreferrer nofollow">Tech companies are aggressively cutting back on vendor spend</a> - and two months later, The Wall Street Journal also <a href="https://www.wsj.com/articles/corporate-technology-under-new-scrutiny-amid-recession-fears-a69c6583?ref=blog.pragmaticengineer.com" rel="noopener noreferrer nofollow">reported</a> on the same topic. Coinbase, to me, seems to have been early to the cost optimizing trend. However, look closely at the <a href="https://newsletter.pragmaticengineer.com/p/vendor-spend-cuts?ref=blog.pragmaticengineer.com" rel="noopener noreferrer nofollow">responses</a> I gathered, and ‚ÄúAWS‚Äù and ‚ÄúDatadog‚Äù are the two most mentioned vendors as targets for cost savings. This is simply because infra and observability costs tend to be the highest and AWS is the leader for cloud infra, and Datadog the leader for observability.</p><p>Datadog CEO Olivier Pomel confirmed that this type of optimization is happening across all of their customers, saying:</p><blockquote>‚ÄúWhen we look at our data, when we look at what we hear from the hyperscalers also, we also listen carefully to their commentary on what they foresee in the near future, we don&#39;t see anything that gives us confidence that we can call an end to optimization in the next quarter or the quarter after that. So as far as our guidance goes and our plan for the year, we assume that this is going to continue at a similar level for the rest of the year.‚Äù</blockquote><p>I have since confirmed several large companies with thousands of engineers building their own Grafana/Prometheus stack, planning to migrate off of their current observability vendor and operate the observability stack themselves. But why is this?</p><p><strong>Above $2-5M/year annual spend is where bringing a vendor in-house tends to come up. </strong>And this is because it is around this number where the cost of hiring a whole team to do what a vendor is doing can <em>theoretically</em> make sense.</p><p>As a rule of thumb, you can get infra costs much lower than what vendors charge. This is because both the vendor, and you are probably using the same Cloud infrastructure provider, which is usually AWS, GCP or Azure. However, you would need to hire and staff a dedicated engineering team to build and run that infra.</p><p>So, from a cost perspective, this is the math problem you need to solve. At what point does is this equation become true:</p><p>$infra_cost + $platform_team_cost &lt; $current_vendor_costs</p><p>In this question, $platform_team_costs will be above $1M, and sometimes above $2M. This is because you need to have a team of 4-5 engineers, plus a manager, and their average total compensation will be somewhere between $150-400K/year, depending on your cost basis.</p><p>So when you have a bill that is above $2-3M/year, it can start to look tempting to build, rather than buy. The economics of this decision start to get down to how high of a margin is the vendor charging on top of raw infra? The curious question with Coinbase is: did they consider building, when talking about such a huge projected cost that could justify having a team?</p><p>In the case of Coinbase, building in-house following a $65M bill was a clear no-brainer. They could hire a team of 10 senior and staff-level engineers in the Bay Area, and still have this team cost less than $5M/year. And they then only need to budget for the infra costs, which they can presumably bring down to low double digits per year.</p><p>Coinbase planned to move off Datadog, but ended up staying. However, it is not the only larger tech company thinking about bringing observability in house. I have another exclusive which even Datadog might not be aware of, yet. This report is about Shopify and its plan to move off Datadog. But could recent layoffs change things? I cover details on this topic in <a href="https://newsletter.pragmaticengineer.com/p/the-scoop-47?ref=blog.pragmaticengineer.com" rel="noopener noreferrer nofollow">the full The Scoop</a>.</p><p><em>This was one out of the five topics covered in this week‚Äôs The Scoop. A lot of what I share in The Scoop is exclusive to this publication, meaning it‚Äôs not been covered in any other media outlet before and you‚Äôre the first to read about it.</em></p><p><em>The full The Scoop edition additionally covers:</em></p><ol><li><strong>Will Shopify migrate onto an in-house observability tool? </strong>Shopify decided to build its own observability platform and migrate off Datadog. This plan looked certain until Shopify cut the very engineering teams that built its new platform. What happens next?<strong> <em>Exclusive</em></strong>.</li><li><strong>Microsoft cuts its compensation targets</strong>. Almost exactly a year ago, Microsoft employees received a welcome surprise: they could expect higher-than-usual compensation increases. Yesterday, another unexpected email came, but its contents were the opposite of last year‚Äôs. I talked with managers and engineers at the tech giant for their reaction to disappointing compensation news. <strong><em>Exclusive</em></strong>.</li><li><strong>Shopify letting go most staff in Germany. </strong>As part of cutting 20% of staff, most people in Germany were made redundant. These layoffs happened a week before a Works Council election in Germany. Is this unlucky timing, or is there more behind the move?<strong> <em>Exclusive</em></strong>.</li><li><strong>Senior compensation trending down in Ukraine. </strong>Ukraine is one of the few countries for which we have access to nationwide data, through job site Djinni. Data for the first part of this year are in, and they point to something not seen recently: senior engineers are making less. Is this a local trend, or could we see it happening in other countries?<strong> </strong><em>Analysis</em>.</li><li><strong>A follow-up to this week‚Äôs public tech company compensation article</strong>. Why was Netflix lower down the list than many software engineers expected? Plus, new details about Roblox and why Jack Dorsey‚Äôs total compensation is $2.75. <em>Follow-up.</em></li></ol><p><a href="https://newsletter.pragmaticengineer.com/p/the-scoop-47?ref=blog.pragmaticengineer.com" rel="noopener noreferrer nofollow">Read the full The Scoop here.</a></p>


            <!-- Newsletter -->
            <p>
              <a href="https://newsletter.pragmaticengineer.com/about">Subscribe to my weekly newsletter</a> to get articles like this in your inbox. It&#39;s a pretty good read - and the <a href="https://substack.com/top/technology">#1 tech newsletter</a> on Substack.
            </p>
            
        </section>

        
    </article>
</div></div>
  </body>
</html>
