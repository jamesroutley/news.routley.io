<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/oasislinux/oasis">Original</a>
    <h1>Oasis: Small statically-linked Linux system</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto"><a href="https://builds.sr.ht/~mcf/oasis/commits/.build.yml" rel="nofollow"><img src="https://camo.githubusercontent.com/8231ba5bde71c2466dac52013d839f718741334fd7803ec0159fecbff408cb15/68747470733a2f2f6275696c64732e73722e68742f7e6d63662f6f617369732f636f6d6d6974732f2e6275696c642e796d6c2e737667" alt="builds.sr.ht status" data-canonical-src="https://builds.sr.ht/~mcf/oasis/commits/.build.yml.svg"/></a></p>
<p dir="auto">oasis is a small linux system.</p>
<p dir="auto">It is probably quite a bit different from other Linux-based operating
systems you might be familiar with, and is probably better compared
to a BSD.</p>
<p dir="auto">There are many features that distinguish it from other operating
systems:</p>
<ul dir="auto">
<li>Completely <strong>statically linked</strong>.</li>
</ul>
<p dir="auto">All software in the base system is linked statically, including the
display server (<a href="https://github.com/michaelforney/velox">velox</a>) and web browser (<a href="https://www.netsurf-browser.org" rel="nofollow">netsurf</a>). Compared to
dynamic linking, this is a simpler mechanism which eliminates
problems with upgrading libraries, and results in completely
self-contained binaries that can easily be copied to other systems.</p>
<ul dir="auto">
<li><strong>Fast builds</strong> that are <strong>100% reproducible</strong>.</li>
</ul>
<p dir="auto">All packages are built with <a href="https://github.com/michaelforney/samurai">samurai</a>, using build manifests generated
by <a href="https://github.com/oasislinux/oasis/blob/master/pkg/nasm/gen.lua">Lua scripts</a>. This involves considerable up-front packaging
cost, but minimal maintenance cost, and offers numerous advantages,
including near optimal build times, predictable and reproducible
builds, reduced build-time dependencies, and incremental builds
even across package boundaries.</p>
<ul dir="auto">
<li><strong>Minimal bootstrap dependencies</strong>.</li>
</ul>
<p dir="auto">Any POSIX system with git, lua, curl, a sha256 utility, standard
compression utilities, and an <code>x86_64-linux-musl</code> cross compiler
can be used to bootstrap oasis. This makes it trivial to cross-compile,
even from non-Linux systems such as macOS or OpenBSD.</p>
<ul dir="auto">
<li><strong>BearSSL</strong> is the system TLS and crypto library.</li>
</ul>
<p dir="auto">BearSSL is incredibly small and well written, but is not widely
adopted. Through the use of libcurl, which now has native BearSSL
support, and <a href="https://sr.ht/~mcf/libtls-bearssl" rel="nofollow">libtls-bearssl</a>, an alternative implementation of
libtls based on BearSSL, oasis uses BearSSL throughout the system.
Only a <a href="https://github.com/oasislinux/oasis/issues/14" data-hovercard-type="issue" data-hovercard-url="/oasislinux/oasis/issues/14/hovercard">few optional packages</a> still require LibreSSL.</p>
<ul dir="auto">
<li><strong>No package manager</strong>.</li>
</ul>
<p dir="auto">Instead, you configure a set of <a href="https://github.com/oasislinux/oasis/blob/master/config.def.lua#L12-L15">specifications</a> of what files from
which packages to include on your system, and the build system
writes the resulting filesystem tree into a git repository. This
can then be merged into <code>/</code>, or pulled from another machine.</p>
<ul dir="auto">
<li>Integrates well with <strong>OS-agnostic package systems</strong>.</li>
</ul>
<p dir="auto">Although the aim is to provide a complete system, there is a lot
of free software out there, a lot of which does not match up well
to our goals. Rather than trying to build and maintain yet another
repository with thousands of packages, oasis works well with <a href="https://github.com/oasislinux/oasis/wiki/pkgsrc">pkgsrc</a>
and <a href="https://nixos.org/nix" rel="nofollow">nix</a>. This makes it easy to extend your system with software
you might need, while keeping the base system small and focused.</p>
<ul dir="auto">
<li>Extremely <strong>simple system configuration</strong>.</li>
</ul>
<p dir="auto">A guiding principle is that the <code>/etc</code> directory should be simple
enough for system administrators to understand completely and
customize appropriately. The most complex file in the default
configuration is the system initialization script, <a href="https://github.com/oasislinux/etc/blob/master/rc.init"><code>/etc/rc.init</code></a>,
at only 16 lines.</p>
<ul dir="auto">
<li>Mostly <strong>ISO C conformant</strong>.</li>
</ul>
<p dir="auto">A major goal of oasis is to build with <a href="https://sr.ht/~mcf/cproc" rel="nofollow">cproc</a>, a C compiler which
is much stricter about the ISO C standard than gcc or clang, and
orders of magnitude smaller. Although this is a <a href="https://github.com/oasislinux/oasis/issues/13" data-hovercard-type="issue" data-hovercard-url="/oasislinux/oasis/issues/13/hovercard">work-in-progress
effort</a>, all core packages, and most others, build successfully
with cproc.</p>
<h2 dir="auto"><a id="user-content-principles" aria-hidden="true" href="#principles"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Principles</h2>
<ul dir="auto">
<li>Software complexity should be measured by including all transitive
dependencies.</li>
<li>Executables should be linked statically.</li>
<li>Software components should allow for easy customization and/or
modification.</li>
<li>Package sources should be referenced through a URL or git submodule,
but not included directly.</li>
<li><code>/etc</code> should be simple enough to be understood in its entirety.</li>
<li>Patches should be well organized, have good descriptions, and
should always apply cleanly.</li>
</ul>
<h2 dir="auto"><a id="user-content-install" aria-hidden="true" href="#install"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Install</h2>
<p dir="auto">An install guide can be found on the <a href="https://github.com/michaelforney/oasis/wiki">wiki</a>.</p>
<p dir="auto">However, keep in mind that oasis is an ambitious project, and there
is still a lot of work to do. Users should be comfortable building
their own kernel and tinkering with their system when things go wrong.
If you do run into trouble, I&#39;m always happy to help you out.</p>
<h2 dir="auto"><a id="user-content-qemu" aria-hidden="true" href="#qemu"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>QEMU</h2>
<p dir="auto">If you&#39;d like to give oasis a try without installing it yourself,
there is a QEMU image available <a href="https://patchouli.sr.ht/builds.sr.ht/artifacts/~mcf/356456/5af47a3cf086151c/oasis-qemu.tar.xz" rel="nofollow">here</a>.</p>
<p dir="auto">Inside the archive are the root filesystem, a Linux kernel, and a
script to launch qemu. There is also <code>README.md</code> with some information
about how to use it. In short, use <code>./run</code> to launch in graphical
mode, and <code>./run -s</code> to launch in serial mode.</p>
<h2 dir="auto"><a id="user-content-software" aria-hidden="true" href="#software"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Software</h2>
<p dir="auto">oasis uses smaller and simpler implementations of libraries and
tools whenever possible:</p>
<ul dir="auto">
<li>musl instead of glibc</li>
<li>sbase instead of coreutils</li>
<li>ubase instead of util-linux</li>
<li>pigz instead of gzip</li>
<li>mandoc instead of man-db</li>
<li>bearssl instead of openssl</li>
<li>oksh instead of bash</li>
<li>sdhcp instead of dhclient or dhcpcd</li>
<li>vis instead of vim or emacs</li>
<li>byacc instead of bison</li>
<li>perp and sinit instead of sysvinit or systemd</li>
<li>netsurf instead of chromium or firefox</li>
<li>samurai instead of ninja</li>
<li>velox instead of Xorg</li>
<li>netbsd-curses instead of ncurses</li>
</ul>
<p dir="auto">These packages are grouped into logical <a href="https://github.com/oasislinux/oasis/blob/master/sets.lua">sets</a>, and the full list
is available in the <a href="https://github.com/oasislinux/oasis/blob/master/pkg">pkg</a> directory.</p>
<p dir="auto">If your favorite software is missing, keep in mind that you can
likely still install it via pkgsrc or nix.</p>
<h2 dir="auto"><a id="user-content-contact" aria-hidden="true" href="#contact"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Contact</h2>
<p dir="auto">There is a mailing list at
<a href="mailto:~mcf/oasis@lists.sr.ht">~mcf/oasis@lists.sr.ht</a>, and an IRC
channel at #oasis on libera.chat.
Feel free to use them for questions, patches, or general discussion.</p>
</article>
          </div></div>
  </body>
</html>
