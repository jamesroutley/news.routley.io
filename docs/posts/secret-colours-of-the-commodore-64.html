<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.aaronbell.com/secret-colours-of-the-commodore-64/">Original</a>
    <h1>Secret Colours of the Commodore 64</h1>
    
    <div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p>In 1991 I was fourteen years old. It would be fair to say I was obsessed with computers. I proudly owned a brown ‘breadbox’ Commodore 64 with an exotic upgrade - an Oceanic 5.25” disk drive:</p>

<p><img src="https://the.scapegoat.dev/content/images/2017/03/Commodore-64-Breadbox-1024x680.jpg" alt="c64 breadbox"/></p>

<p><img src="https://the.scapegoat.dev/content/images/2017/03/OC-118N_OVP_Back_Bamse.jpg" alt="Oceanic disk drive box"/></p>

<p>In May that year, I was reading COMMODORE FORMAT and devouring the C64 game reviews. Suddenly I read a caption that stuck with me for <em>years</em> afterward. Underneath a screenshot of a colourful robotic dragon, it read:</p>

<p><em>Hold on… You can’t get this colour on a 64! Well, you can if you swap pale green and cyan 50 times a second!</em></p>

<p>This was astonishing to me.</p>

<p>Thanks to the wonder of the internets and the passion of some great magazine archivists, we can excavate the exact page at which I goggled, long ago:</p>

<p><img src="https://the.scapegoat.dev/content/images/2016/10/dragon-quote.png" alt="Dragon Breed review picture and caption"/></p>

<p>This was freaky. When you owned any 8-bit computer, you became intimately familiar with its colour scheme. This simple photograph blew my mind. That blue colour <strong>just wasn’t possible.</strong></p>

<p>According to the caption, by presenting two colours to the eye and alternating them quickly enough, a whole new colour emerged. What would this new, secret colour look like on your crappy early-90s CRT television? The screenshot was only a hint. Would it glow? Would it flicker?</p>

<p>Twenty-six years later, I found out the answer.</p>

<p>This article is all about <strong>colour switching</strong> on the Commodore 64. There are <strong>interactive examples</strong> to play with below. I haven’t found anything else on the topic, so it’s possible this is the only resource on the subject.</p>



<p>The story has been updated since first posting on 22 March 2017.</p>

<ul>
  <li>This article did well on <em>Hacker News</em>, reaching #2 on the front page. There are some <a href="https://news.ycombinator.com/item?id=13935590">amazing comment threads you should go and read</a>.</li>
  <li>It also hit reddit in many places, reaching #2 on <em>r/programming</em>. Those <a href="https://www.reddit.com/r/programming/comments/610vyn/secret_colours_of_the_commodore_64/">comments are excellent also</a>.</li>
  <li>The co-author of C64 <em>Dragon Breed</em>, Ashley Routledge read the story and took the time to <a href="https://www.aaronbell.com/secret-colours-of-the-commodore-64/#comment-3221439823">comment with his memories</a>!</li>
</ul>

<p>Now - back to the story. Let’s take a moment to understand why secret colours were such a big deal.</p>



<p>Palettes were important.</p>

<p>A typical 8-bit computer could only display <strong>sixteen colours</strong>. Those colours were fixed in hardware when the computer was designed.</p>

<p>This meant the palette defined fixed boundaries for your computer. It constrained how the visuals looked and felt. It fundamentally differentiated the Commodore 64, from the ZX Spectrum, from the Apple II, from the Amstrad CPC. You could instantly tell which computer was responsible given a screenshot.</p>

<p>As you’d expect, hardware palette design was crucially important. With only sixteen colours to work with, digital artists needed carefully-chosen tones to help them represent the real world.</p>

<p>It didn’t always go well. Pity the garish palette wired into the <a href="https://en.wikipedia.org/wiki/List_of_8-bit_computer_hardware_palettes#ZX_Spectrum">Sinclair ZX Spectrum</a>, which produced visuals like a hot shit aneurysm:</p>

<p><img src="https://the.scapegoat.dev/content/images/2017/04/head-over-heels-zx-spectrum-1.png" alt="Spectrum loading screen"/></p>

<p>As it happened, the Commodore engineers did a great job. The pic below shows the palette at the top left. The rest of the image explores the pleasing gradients possible with the C64:</p>

<p><img src="https://the.scapegoat.dev/content/images/2017/03/c64pal-1.png" alt="C64 palette by Sven Ruthner"/></p>

<p><em>Image credit: Sven Ruthner, <a href="https://twitter.com/the_ptoing">@the_ptoing</a> for <a href="http://pixeljoint.com/2010/10/18/3300/Pixel_Art_Challenge-_Commodore_4.htm">pixeljoint.com</a>. Thanks Dennis Busch!</em></p>

<p>Notice that:</p>

<ul>
  <li>It has <strong>earthy tones</strong> that match real-world objects. Compare with the hue explosion of the Speccy.</li>
  <li>It has <strong>many shades of grey</strong>. This lets you render monochrome images as well as things like metal. Finally the neutral grey shades can be slotted into <em>ramps</em> with other colours to blend them together - you can see these on the right.</li>
</ul>

<p>So C64 owners were accustomed to screens like this:</p>

<p><img src="https://the.scapegoat.dev/content/images/2017/03/hunters_moon.gif" alt="Hunter&#39;s Moon loading screen"/></p>

<p><img src="https://the.scapegoat.dev/content/images/2017/03/citadel.gif" alt="CITADEL loading screen"/></p>

<p>The pixellated images above would look much better - more subtly blended - on your typical fuzzy CRT television.</p>

<p>After years of obsessively looking at it, this palette is firmly embedded in my mind. The colours are immediately recognisable. They resonate with the frequency of nostalgia, and make my brain tingle. I actually use these colours as my <a href="https://github.com/air">avatar on Github</a>:</p>

<p><img src="https://the.scapegoat.dev/content/images/2017/03/github.png" alt="github profile"/></p>

<p>With this in mind, the idea that you could break this boundary and invent <em>new, secret colours</em> on the C64 - and trick the eye into seeing something that didn’t exist - that was high wizardry.</p>



<p>If you swap two colours rapidly enough - say at 50 or 60 frames per second - you can fool the eye into seeing something that isn’t there. On a machine with sixteen colours, just one or two extra can add a lot to a scene.</p>

<p>Since today we all live in the future and you are reading a fully programmable document on a supercomputer, let’s try it.</p>

<h2 id="simple-demo">Simple demo</h2>



<p>Here’s a square flipping between two colours - red and blue - every second.</p>





<p><strong>Click or tap on the square to alternate the colours at 60fps</strong> (or specifically, the maximum refresh rate of your current browser and display. It would be cool to see this on a 144Hz refresh monitor).</p>

<p>Notice how a third colour appears? <em>That shade of purple is not being displayed.</em> Only red and blue are appearing - your eye is fooled into seeing a colour that isn’t there. I promise I’m not cheating. That’s colour switching in action.</p>

<p><strong>Hit the square again to slow it down and check.</strong></p>

<h2 id="dragon-breed-demo">Dragon Breed demo</h2>

<p>So way back in 1991, I was intrigued by that review but never actually owned the game. What did <em>Dragon Breed</em> actually look like?</p>

<p>First of all, it turns out that fancy colour switching isn’t used in the game at all until you hit the end of STAGE 3, when a robot dragon boss shows up glowing in that weird cyan.</p>

<p><em>Sidebar: One interesting reference is to check out the original arcade game. Since we live in the future, you can <a href="http://www.playretrogames.com/5470-dragon-breed">play the Dragon Breed arcade in your browser right now</a> (hit the power button, wait for boot, press 5 to insert coin then 1 to start). That’s pretty mind-blowing. Unfortunately to see the dragon we’re interested in, you’ll have to play to the end of STAGE 3. Good luck with that.</em></p>

<p>So surely someone’s captured this effect on a C64 <a href="https://en.wikipedia.org/wiki/Longplay_(video_games)">longplay</a> video? Well after some digging I found our famous robot dragon boss on Youtube (audio warning):</p>

<iframe width="420" height="315" src="https://www.youtube.com/embed/jpfT7Lhn5rE?start=153" frameborder="0" allowfullscreen=""></iframe>

<p>There are two problems with this video. Because it’s captured at 30fps,</p>

<ol>
  <li>It looks like shit. The sprites flicker distractingly, and</li>
  <li>The colour switching effect is completely lost.</li>
</ol>

<p>If you were to play the game on an emulator at 50/60fps, the effect is convincing.</p>

<p><strong>Update:</strong> the uploader of the video above saw this article and re-uploaded at 50fps! Thank you <em>einokeino303</em>. Check out the difference (note, you need to <strong>click the gear and set quality to 720p50</strong>):</p>

<iframe width="420" height="315" src="https://www.youtube.com/embed/S_9Q0uBAvL0?start=776" frameborder="0" allowfullscreen=""></iframe>

<p><em>Sidebar: A note on frames per second. The European PAL C64 updated at 50fps, whereas the US NTSC systems updated at 60fps (<a href="http://unusedino.de/ec64/technical/misc/vic656x/pal-ntsc.html">reference</a>). Weird huh? This means the effect would be slightly more convincing on a US machine.</em></p>

<p>Can we show the Dragon Breed effect on a web page? Well, let’s play through to STAGE 3 (using cheats, phew) and screencap the boss in a couple of frames side by side:</p>



<p>Next, with a bit of JavaScript we can alternate the images and see the original effect at 60fps. On a phone, you might need to zoom out a bit first. Again, <strong>tap or click to slow down or activate the colour switching</strong>:</p>





<p>Look at the three images all together - a totally new colour has emerged!</p>

<p>Also notice the flickery dragon tail: this is a limitation of sprites on the C64. The hardware didn’t support enough sprites to give the player six tail segments <strong>and</strong> render all the enemies; so only three are displayed at a time and alternated every frame, producing the flickery side-effect.</p>

<p>We did it! We recreated Dragon Breed colour switching in the browser. Are we done?</p>

<h2 id="palette-demo">Palette demo</h2>

<p>Nope. If those two colours can be combined, what other combinations are possible? Put another way, what is the set of all possible secret colours on a given machine?</p>

<p>Let’s find out. Put on your shades for this one! We’re going to generate every unique pair of colours possible on the Commodore 64 in one glorious epilepsy-bomb. <strong>Again, tap or click to switch modes</strong>:</p>

<canvas id="canvas" width="1000" height="920"></canvas>



<p>Pretty cool huh? It looks like the tartan for the clan McPuke.</p>

<p>Bear in mind every flickering square above is a unique pair of colours. I highlighted the combination that’s used in Dragon Breed by giving it a border.</p>

<h3 id="why-do-some-squares-flicker">Why do some squares flicker?</h3>

<p>Notice that some combinations have a nasty strobe effect and will definitely make you feel ill. But <em>not all of them</em>.</p>

<p>Why do some combinations work so well? It all depends on <strong>brightness</strong>. Two colours of equal brightness will blend perfectly; whereas say black and white will flicker violently.</p>

<p>With switching in fast mode, find a blended colour that you like. Now tap to slow it down and see which two colours are mixing to give you that hue.</p>

<h2 id="the-end">The End</h2>

<p>And that is the story of how I read about secret C64 colours in 1991, and then twenty-six years later finally got to see them. If you’re still interested and have functioning eyes, read on for bonus content.</p>



<p>Do you know any other games - for any computer - that use this approach? If so, <strong>let me know in the comments</strong>.</p>

<p>I’m collecting examples in the appendix below. I’d love to know if the Speccy ever did this…</p>



<ul>
  <li>Check out <a href="http://www.lemon64.com/?game_id=765">Dragon Breed on Lemon64</a>, a great games database.</li>
</ul>



<p>Before the internet, computer magazines were the only way you found out what was happening in the world of technology. It’s difficult to describe how exciting it was to get your issue of <a href="https://en.wikipedia.org/wiki/Zzap!64">ZZAP! 64</a> or <a href="https://en.wikipedia.org/wiki/Commodore_Format">COMMODORE FORMAT</a> and read reviews of all the new games, or check out adverts for the peripherals you’d beg your parents/Santa for.</p>

<p>For maximum nostalgia, here are the full pages of that Dragon Breed review from COMMODORE FORMAT:</p>





<p>This is a list of every reference to 8-bit colour switching I’ve found on the web.</p>

<ul>
  <li>COMMODORE FORMAT issue 5, <a href="https://archive.org/stream/commodore-format-magazine-05/Commodore_Format_Issue_05_1991_02#page/n83/mode/2up">Dragon Breed review</a>:
    <ul>
      <li>“Extra colours are achieved using colour switching, where pixels are assigned alternate colours every 50th of a second. This gives the impression of a completely new shade!”</li>
    </ul>
  </li>
  <li>COMMODORE FORMAT issue 13, <a href="https://archive.org/stream/commodore-format-magazine-13/Commodore_Format_Issue_13_1991_10#page/n49/mode/2up">Q&amp;A</a>:
    <ul>
      <li>“There’s no way to increase the number of colours in the 64’s palette, but there are clever software routines to give the impression of more colours. Activision’s <em>Dragon Breed</em> uses very rapid colour switching to give an intermediate tone, and PD coders have produced a <a href="http://www.studiostyle.sk/dmagic/gallery/gfxmodes.htm">‘Fli-Pic’</a> facility which enables you to use more than four colours per char block.”</li>
    </ul>
  </li>
  <li>COMMODORE FORMAT issue 32, <a href="https://archive.org/stream/commodore-format-magazine-32/Commodore_Format_Issue_32_1993_05#page/n35/mode/2up">Mayhem in Monsterland</a> developer diary:
    <ul>
      <li>“As with our background graphics we wanted more than the C64’s 16 colours for sprites. However, we can’t use the same method of colour mixing that we’re using for the level graphics (see CF28) because we haven’t got enough sprite colours. So I added a different colour mixing routine for the sprites. This rapidly flashes between two colours (of equal brightness) to create new shades.”</li>
    </ul>
  </li>
  <li>C64.com’s <a href="http://www.c64.com/interviews/routledge.html">interview with the Dragon Breed programmer, Ashley Routledge</a>:
    <ul>
      <li>“I especially recall the dragon with that strange shade of blue/cyan.”</li>
    </ul>
  </li>
</ul>



<p>In writing the programs for this article I discovered it’s pretty awkward to get two images to flip at 60fps without visual artifacts.</p>

<ul>
  <li>GIFs (true GIFs, not <a href="http://blog.imgur.com/2014/10/09/introducing-gifv/">GIFV</a>) are too slow for 60fps.</li>
  <li>Manipulating a <em>backgroundImage</em> works but flickers like hell.</li>
</ul>

<p>To make this work you need to create a couple of <em>Image</em> objects, set their <em>src</em> attribute and wait for them to completely load (using an event) before starting your animation loop. Phew! If you need this, view source for this article or <a href="https://gist.github.com/air/61d6a8510924664e8cde">check out this gist</a>.</p>

<p>OK that’s really it! Thanks for reading. If you’ve enjoyed this I’d love to hear from you below.</p>

  </div>
  
  
</article>

      </div>
    </div></div>
  </body>
</html>
