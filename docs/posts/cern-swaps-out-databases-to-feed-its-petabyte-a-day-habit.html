<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.theregister.com/2023/09/18/lhc_infrastructure_monitoring/">Original</a>
    <h1>CERN swaps out databases to feed its petabyte-a-day habit</h1>
    
    <div id="readability-page-1" class="page"><div id="body">
<p>Europe&#39;s particle accelerator at CERN spews out around a petabyte of data daily, which means monitoring the computing infrastructure that processes the data is crucial.</p>
<p>CERN&#39;s main activities are based on the Large Hadron Collider (LHC), which propels sub-atomic particles around a 27km circuit, 100 meters underground, then smashes them into each other under the guise of eight distinct experiments. Among them is the <a target="_blank" href="https://home.cern/science/experiments/cms">CMS experiment</a>, which aims to spot the particles responsible for dark matter, among other things.</p>
<p>Like other experiments, CMS shut down for a period of upgrades from 2018 to 2022, and restarted in July last year for the three-year Run 3 period in which scientists will increase the beam energy and sample physics data at a higher rate.</p>

    

<p>In preparation, four big LHC experiments performed major upgrades to their data readout and selection systems, with new detector systems and computing infrastructure. The changes will allow them to collect significantly larger data samples of higher quality than previous runs.</p>

        


        

<p>But Brij Kishor Jashal, a scientist in the CMS collaboration, told <em>The Register</em> that his team were currently aggregating 30 terabytes over a 30-day period to monitor their computing infrastructure performance.</p>
<p>&#34;Entering the new era for our Run 3 operation, we will see more and more scaling of the storage as well as the data. One of our main jobs is to ensure that we are able to meet all this demand and cater to the requirements of users and manage the storage,&#34; he said.</p>

        

<p>&#34;After the pandemic, we have started our Run 3 operations, which creates higher luminosity, which generates much more data. But in addition to that, the four experiments have had a major upgrade to their detectors.&#34;</p>
<p>The back-end system monitoring the infrastructure that supports the physics data had been based on the time series database InfluxDB and the monitoring database Prometheus.</p>
<p>Cornell University&#39;s Valentin Kuznetsov, a member of the CMS team, said in a statement: &#34;We were searching for alternative solutions following performance issues with Prometheus and InfluxDB.&#34;</p>

        

<p>Jashal said the system had problems with scalability and reliability.</p>
<p>&#34;As we were increasing the detail on our data points we started to experience some reliability issues as well as the performance issue, in terms of how much resources of the virtual machines, and the services being used.&#34;</p>
<ul>

<li><a href="https://www.theregister.com/2023/05/30/newly_observed_higgs_boson_decay/">CERN spots Higgs boson decay breaking the rules</a></li>

<li><a href="https://www.theregister.com/2023/05/02/world_wide_web_30th_anniversary/">CERN celebrates 30 years since releasing the web to the public domain</a></li>

<li><a href="https://www.theregister.com/2022/12/12/cern_lhc_antimatter/">Galactic anti-nuclei travelers could help illuminate dark matter</a></li>

<li><a href="https://www.theregister.com/2022/12/08/cern_fermilab_almalinux/">CERN, Fermilab particle boffins bet on AlmaLinux for big science</a></li>
</ul>
<p>In search for an alternative, the CMS monitoring team came across VictoriaMetrics, a San Francisco startup built around an open source wide column time series database, via a Medium post by CTO and co-founder Aliaksandr Valialkin.</p>
<p>Speaking to <em>The Register</em>, Roman Khavronenko, co-founder of VictoriaMetrics, said the previous system had experienced problems with high cardinality, which refers to the level of repeated values – and high churn data – where applications can be redeployed multiple times over new instances.</p>
<p>Implementing VictoriaMetrics as backend storage for Prometheus, the CMS monitoring team progressed to using the solution as front-end storage to replace InfluxDB and Prometheus, helping remove cardinality issues, the company said in a statement.</p>
<p>Jashal told <em>The Register</em>: &#34;We are quite happy with how our deployment clusters and services are performing. We have not yet hit any limits in terms of scalability. We now run the services in high availability mode in our Kubernetes clusters, adding another reliability in the services.&#34;</p>
<p>The system runs in CERN&#39;s own datacenter, an OpenStack service run on clusters of x86 machines.</p>
<p>InfluxDB <a target="_blank" href="https://www.influxdata.com/blog/time-series-data-cardinality-influxdb/#:~:text=In%20order%20to%20avoid%20cardinality,InfluxDB%20creates%20a%20schema%20automatically.">said in March this year</a> it had solved the cardinality issue with a new IOx storage engine. &#34;For a long time, cardinality was the proverbial &#39;rock-in-the-shoe&#39; for InfluxDB. Sure, it still ran, but not as comfortably as it could. With the InfluxDB IOx engine, performance is front and center, and with cardinality no longer the problem it once was, InfluxDB can ingest and analyze large workloads in real time,&#34; it said. ®</p>                                
                    </div></div>
  </body>
</html>
