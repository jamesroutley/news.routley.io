<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/thiswillbeyourgithub/AnkiAIUtils">Original</a>
    <h1>Show HN: Anki AI Utils</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">A powerful suite of AI-powered tools to enhance your <a href="https://en.wikipedia.org/wiki/Anki_(software)" rel="nofollow">Anki</a> flashcard learning experience by automatically improving cards you struggle with, tested through medical school. For example think of it like this: every time you fail a card you get a ChatGPT explanation, a Dall-E illustration, mnemonics, etc but supporting your own mnemonics.</p>
<p dir="auto"><strong>Check out my other Anki and AI related projects on my <a href="https://github.com/thiswillbeyourgithub">GitHub profile</a>!</strong></p>

<p dir="auto"><strong>Those scripts make it so that every failed note will automatically have new fields containing explanations, mnemonics, and illustrations.</strong> This is done in a way that respects <strong>your own mnemonics</strong>, can even use the <a href="https://en.wikipedia.org/wiki/Mnemonic_major_system" rel="nofollow">major system</a>, and has <strong>many</strong> more features.</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Developer&#39;s note / call for help</h2><a id="user-content-developers-note--call-for-help" aria-label="Permalink: Developer&#39;s note / call for help" href="#developers-note--call-for-help"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This collection of scripts is the culmination of my efforts to contributes the AI features I wish existed when I started medical school. All scripts should be working but I released them hastily after documenting them heavily with the help of <a href="https://aider.chat/" rel="nofollow">aider</a>. It is possible that some aspects of the documentation is slightly off or imprecise. It is also possible that some of the scripts where slighly broken during the release process. In any case, <strong>by releasing this project made with love and care my hope is to motivate others to package it into addons.</strong> I have too little time to learn how to package those scripts into addons and make the appropriate GUI so any help is absolutely welcome.</p>

<ul dir="auto">
<li>
<p dir="auto"><strong>Adaptive Learning</strong>: Uses <a href="https://en.wikipedia.org/wiki/Semantic_similarity" rel="nofollow">semantic similarity</a> to dynamically match your cards with the most relevant examples from your training datasets. The more examples you add, the better it gets!</p>
</li>
<li>
<p dir="auto"><strong>Personalized Memory Hooks</strong>: Reuses consistent mnemonics from your custom collection, building a personalized memory system. Includes a dedicated tool to help create and manage your mnemonic library.</p>
</li>
<li>
<p dir="auto"><strong>Automation Ready</strong>: Run programmatically - for example, use cron to automatically enhance cards you struggled with yesterday, making them easier to remember through images, mnemonics, and explanations.</p>
</li>
<li>
<p dir="auto"><strong>Universal Compatibility</strong>: Modifies Anki notes directly in-place, working seamlessly across all Anki clients (Windows, Mac, Linux, Android, iOS). Extensive logging ensures you can track changes and rollback if needed.</p>
</li>
<li>
<p dir="auto"><strong>Provider Agnostic</strong>: Supports all LLM providers and models through LiteLLM, letting you choose the best option for your needs.</p>
</li>
<li>
<p dir="auto"><strong>Infinitely Extensible</strong>: Add as many examples as you want to your training datasets - the semantic filtering automatically picks the most relevant ones for each card.</p>
</li>
</ul>


<p dir="auto">Creates custom mnemonic images for your cards using AI image generation. It:</p>
<ul dir="auto">
<li>Analyzes card content to identify key concepts</li>
<li>Generates creative visual memory hooks</li>
<li>Preserves a history of generated images</li>
<li>Supports both DALL-E2, DALL-E3 and Stable Diffusion</li>
<li>Automatically formats images for optimal display (centered, proper sizing)</li>
<li>Handles multiple images per card with consistent layout</li>
</ul>
<p dir="auto">Perfect for visual learners or complex topics that benefit from imagery.</p>
<details>
<summary>
Click to see an example
</summary>
<p dir="auto">For example, I had this French flashcard:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/thiswillbeyourgithub/AnkiAIUtils/blob/public/screenshots/illustrator_fever.png"><img src="https://github.com/thiswillbeyourgithub/AnkiAIUtils/raw/public/screenshots/illustrator_fever.png" alt=""/></a></p>
<details>
<summary>Click here if you can&#39;t read French</summary>
<p dir="auto">Here&#39;s the note content translated to English:</p>
<div data-snippet-clipboard-copy-content="Diagnostic criteria for simple febrile seizures:
- Age greater than 1 year
- Seizure occurring with fever above 38°C (100.4°F)
- Symmetrical motor manifestations lasting less than 15 minutes and without deficit
- Single seizure per febrile episode
- Less than 3 episodes in total"><pre><code>Diagnostic criteria for simple febrile seizures:
- Age greater than 1 year
- Seizure occurring with fever above 38°C (100.4°F)
- Symmetrical motor manifestations lasting less than 15 minutes and without deficit
- Single seizure per febrile episode
- Less than 3 episodes in total
</code></pre></div>
</details>
<p dir="auto"><code>illustrator.py</code> generated to me this image:
<a target="_blank" rel="noopener noreferrer" href="https://github.com/thiswillbeyourgithub/AnkiAIUtils/blob/public/screenshots/illustrator_fever_generated.png"><img src="https://github.com/thiswillbeyourgithub/AnkiAIUtils/raw/public/screenshots/illustrator_fever_generated.png" alt=""/></a></p>
<p dir="auto">As well as this text content to understand its thought process: (Note that this part is always in English no matter the original language)</p>
<div data-snippet-clipboard-copy-content="Topic: &#39;Diagnostic criteria for a simple febrile seizure&#39;
Anchors: &#39;Febrile / Fever: a fireplace (sounds like febrile)&#39;
Phonetic: &#39;1 as T link in thai, tea, tie; 3 as M link in mow, my, meh; 8 as F link in fire, faux, few; 5 as L link in low, lee, lie&#39;
Remarks:
* The criteria are specific and should be presented in a way that is easy to remember.
Step by step decomposition:
* Age over 1 year: a toddler holding a teacup (T for 1)
* Seizure with fever over 38°C: a thermometer with flames around it (F for 8)
* Symmetric motor manifestations lasting less than 15 minutes without deficit: a clock showing 15 minutes with two identical figurines moving symmetrically on either side
* 1 unique seizure per febrile episode: a single lightning bolt striking a fireplace (fireplace for fever)
* Less than 3 episodes in total: three thermometers, but only two showing a high temperature
Imagining:
* A toddler holding a teacup, standing next to a fireplace with a single lightning bolt striking it.
* Above the fireplace, a clock showing 15 minutes with two identical figurines moving symmetrically.
* Next to the toddler, a thermometer surrounded by flames, and three thermometers, two of which show high temperatures.
Subject: &#39;a toddler holding a teacup next to a fireplace struck by a single lightning bolt, a clock showing 15 minutes with symmetric figurines, a flaming thermometer, and three thermometers with two showing high temperatures&#39;
Description words: &#39;educational, colorful, engaging, vivid, detailed&#39;
Style: &#39;illustration&#39;
Realism: &#39;semi-realistic&#39;
a toddler holding a teacup next to a fireplace struck by a single lightning bolt, a clock showing 15 minutes with symmetric figurines, a flaming thermometer, and three thermometers with two showing high temperatures, educational, colorful, engaging, vivid, detailed, illustration, semi-realistic

[DATE:09/04/2024 VERSION:2.5 LLMMODEL:openai/gpt-4-0125-preview IMAGEMODEL:openai/dall-e-3]"><pre><code>Topic: &#39;Diagnostic criteria for a simple febrile seizure&#39;
Anchors: &#39;Febrile / Fever: a fireplace (sounds like febrile)&#39;
Phonetic: &#39;1 as T link in thai, tea, tie; 3 as M link in mow, my, meh; 8 as F link in fire, faux, few; 5 as L link in low, lee, lie&#39;
Remarks:
* The criteria are specific and should be presented in a way that is easy to remember.
Step by step decomposition:
* Age over 1 year: a toddler holding a teacup (T for 1)
* Seizure with fever over 38°C: a thermometer with flames around it (F for 8)
* Symmetric motor manifestations lasting less than 15 minutes without deficit: a clock showing 15 minutes with two identical figurines moving symmetrically on either side
* 1 unique seizure per febrile episode: a single lightning bolt striking a fireplace (fireplace for fever)
* Less than 3 episodes in total: three thermometers, but only two showing a high temperature
Imagining:
* A toddler holding a teacup, standing next to a fireplace with a single lightning bolt striking it.
* Above the fireplace, a clock showing 15 minutes with two identical figurines moving symmetrically.
* Next to the toddler, a thermometer surrounded by flames, and three thermometers, two of which show high temperatures.
Subject: &#39;a toddler holding a teacup next to a fireplace struck by a single lightning bolt, a clock showing 15 minutes with symmetric figurines, a flaming thermometer, and three thermometers with two showing high temperatures&#39;
Description words: &#39;educational, colorful, engaging, vivid, detailed&#39;
Style: &#39;illustration&#39;
Realism: &#39;semi-realistic&#39;
a toddler holding a teacup next to a fireplace struck by a single lightning bolt, a clock showing 15 minutes with symmetric figurines, a flaming thermometer, and three thermometers with two showing high temperatures, educational, colorful, engaging, vivid, detailed, illustration, semi-realistic

[DATE:09/04/2024 VERSION:2.5 LLMMODEL:openai/gpt-4-0125-preview IMAGEMODEL:openai/dall-e-3]
</code></pre></div>
</details>

<p dir="auto">An intelligent tool that rephrases your flashcards while preserving their core meaning and structure. It helps when:</p>
<ul dir="auto">
<li>Cards are poorly worded or unclear</li>
<li>You want to vary the phrasing to strengthen recall</li>
<li>Cards need to be more concise or natural sounding</li>
<li>Your preferred card format has evolved over time</li>
</ul>
<p dir="auto">The tool uses LLMs to reformulate content while carefully preserving cloze deletions and media. This is especially valuable for long-term Anki users - for example, during medical school, your idea of what makes a &#34;perfect&#34; flashcard often evolves after a few semesters. The Reformulator lets you easily update all your older cards to match your current preferred format and style.</p>
<details>
<summary>
Click to see an example
</summary>
<p dir="auto">For example, given this poorly worded flashcard:</p>
<div data-snippet-clipboard-copy-content="bilateral and symmetric alveolar syndrome, perihilar, often with effusion, what to consider?
{{c1::APE}}"><pre><code>bilateral and symmetric alveolar syndrome, perihilar, often with effusion, what to consider?
{{c1::APE}}
</code></pre></div>
<p dir="auto">The reformulator would improve it to:</p>
<div data-snippet-clipboard-copy-content="What should be considered in presence of bilateral and symmetric alveolar syndrome, perihilar, often with effusion?
{{c1::In case of bilateral and symmetric alveolar syndrome, perihilar, often with effusion, one should consider APE.}}"><pre><code>What should be considered in presence of bilateral and symmetric alveolar syndrome, perihilar, often with effusion?
{{c1::In case of bilateral and symmetric alveolar syndrome, perihilar, often with effusion, one should consider APE.}}
</code></pre></div>
<p dir="auto">Note how the reformulation:</p>
<ul dir="auto">
<li>Makes the question grammatically complete and clear</li>
<li>Structures it as a proper question</li>
<li>Makes the answer self-contained by repeating key context</li>
<li>Preserves the exact medical terminology</li>
<li>Maintains the cloze deletion format</li>
</ul>
</details>

<p dir="auto">Generates memorable mnemonics tailored to your cards by:</p>
<ul dir="auto">
<li>Creating multiple mnemonic options per card</li>
<li>Using proven memory techniques like the <a href="https://en.wikipedia.org/wiki/Mnemonic_major_system" rel="nofollow">Major System</a></li>
<li>Incorporating your existing memory anchors</li>
<li>Preserving context and accuracy</li>
</ul>
<p dir="auto">Helps create lasting memory connections, especially for numbers and sequences.</p>
<details>
<summary>
Click to see an example
</summary>
<p dir="auto">The mnemonics made for the card above about infant fever ended up with this content in the AnkiMnemonics field:</p>
<hr/>
<ol dir="auto">
<li>&#39;Heureux Hephaistos fébrile tend sa banane unique près du feu&#39;</li>
</ol>
<hr/>
</details>

<p dir="auto">Provides clear, detailed explanations when you struggle with cards by:</p>
<ul dir="auto">
<li>Breaking down complex concepts</li>
<li>Highlighting key relationships</li>
<li>Adding helpful context</li>
<li>Using analogies and examples</li>
</ul>
<p dir="auto">Particularly useful for understanding why you got a card wrong and filling knowledge gaps.</p>
<details>
<summary>
Click to see an example
</summary>
<p dir="auto">The mnemonics made for the card above about infant fever ended up with this content in the AnkiExplainer field (I translated it french to English for universal documentation):</p>
<hr/>
<ul dir="auto">
<li><b>EXPLANATION</b> A simple febrile seizure is characterized by its uniqueness and brevity during a febrile episode, which helps distinguish it from complex seizures or other neurological disorders.</li>
</ul>
<hr/>
</details>

<p dir="auto">A lightweight interactive CLI tool for quick mnemonic generation that:</p>
<ul dir="auto">
<li>Takes a concept and finds semantically similar existing mnemonics</li>
<li>Generates multiple new mnemonic options using LLMs</li>
<li>Lets you choose from generated options with vim-style navigation</li>
<li>Automatically saves selected mnemonics for future reference</li>
<li>Works independently of Anki, perfect for brainstorming sessions</li>
</ul>
<p dir="auto">Unlike the Mnemonics Creator which processes Anki cards in batch, this tool provides an interactive interface for generating mnemonics one concept at a time. Those new mnemonics can automatically be added to a dataset file that can readily be used by the other tools. This allows rapidly tailoring the scripts to your own imagination.</p>

<details>
<summary>
Click to read more
</summary>
<div dir="auto"><h3 tabindex="-1" dir="auto">What are the core benefits of those tools?</h3><a id="user-content-what-are-the-core-benefits-of-those-tools" aria-label="Permalink: What are the core benefits of those tools?" href="#what-are-the-core-benefits-of-those-tools"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Basically if you run these tools each evening on cards you failed that day it will steadily improve your deck quality and learning effectiveness:</p>
<ul dir="auto">
<li>Automatically enhance cards you struggle with</li>
<li>Save time on manual card improvements</li>
<li>Create stronger memory connections</li>
<li>Track improvements with detailed history</li>
<li>Preserve card structure while enhancing content</li>
</ul>

<p dir="auto">The Major System is a powerful memory technique that converts numbers into consonant sounds, which can then be turned into memorable words. For example:</p>
<ul dir="auto">
<li>0 = S sound (as in &#34;sea&#34;)</li>
<li>1 = T sound (as in &#34;tea&#34;)</li>
<li>2 = N sound (as in &#34;new&#34;)</li>
<li>etc.</li>
</ul>
<p dir="auto">This makes it easier to remember numbers by turning them into words. For example, &#34;92&#34; could become &#34;pen&#34; (P=9, N=2).</p>
<p dir="auto">You can read more about it <a href="https://en.wikipedia.org/wiki/Mnemonic_major_system" rel="nofollow">on wikipedia</a></p>

<p dir="auto">Memory anchors are existing associations you already know well that can be used to create new memories. For example, if you already strongly associate &#34;Napoleon&#34; with &#34;France&#34;, you can use Napoleon as an anchor when learning new facts about French history.</p>
<p dir="auto">The tools can use your personal set of memory anchors to generate mnemonics that build on your existing knowledge.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Which LLM providers are supported?</h3><a id="user-content-which-llm-providers-are-supported" aria-label="Permalink: Which LLM providers are supported?" href="#which-llm-providers-are-supported"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The tools use <a href="https://docs.litellm.ai/docs/" rel="nofollow">LiteLLM</a> which provides a unified interface to virtually any LLM provider including:</p>
<ul dir="auto">
<li>OpenAI</li>
<li>Anthropic</li>
<li>Google</li>
<li>OpenRouter</li>
<li>Azure</li>
<li>AWS Bedrock</li>
<li>Local models</li>
<li>And many more</li>
</ul>
<p dir="auto">Just specify the model in LiteLLM format (e.g. &#34;openai/gpt-4&#34; or &#34;anthropic/claude-3-opus&#34;) and it will handle the rest.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">What languages are supported?</h3><a id="user-content-what-languages-are-supported" aria-label="Permalink: What languages are supported?" href="#what-languages-are-supported"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The tools work in any language supported by the LLM you choose to use. Since these scripts support virtually all LLM providers through LiteLLM, you can use any model that works well with your language. For example:</p>
<ul dir="auto">
<li>OpenAI&#39;s models support 100+ languages</li>
<li>Anthropic&#39;s Claude supports 100+ languages</li>
<li>You can use local models specifically trained for your language</li>
<li>etc.</li>
</ul>
<p dir="auto">The tools will preserve all language-specific formatting, including:</p>
<ul dir="auto">
<li>Right-to-left text</li>
<li>Special characters and diacritics</li>
<li>Language-specific punctuation</li>
<li>etc.</li>
</ul>
<div dir="auto"><h3 tabindex="-1" dir="auto">How do the Mnemonics Work?</h3><a id="user-content-how-do-the-mnemonics-work" aria-label="Permalink: How do the Mnemonics Work?" href="#how-do-the-mnemonics-work"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The mnemonics tools use several proven memory techniques:</p>
<ul dir="auto">
<li><a href="https://en.wikipedia.org/wiki/Mnemonic_major_system" rel="nofollow">Major System</a> for numbers</li>
<li>Vivid imagery and visualization</li>
<li>Personal memory anchors</li>
<li>Phonetic similarities</li>
<li>Humor and absurdity</li>
<li>Story-based connections</li>
</ul>
<p dir="auto">This creates memorable associations that help strengthen recall while preserving accuracy.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Where can I find example datasets for each tool?</h3><a id="user-content-where-can-i-find-example-datasets-for-each-tool" aria-label="Permalink: Where can I find example datasets for each tool?" href="#where-can-i-find-example-datasets-for-each-tool"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The <code>examples/</code> folder contains training datasets and example files for each tool. While these were originally written in French and hastily translated to English, they provide good templates for creating your own datasets. Check the Example Files section below for details on each file.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">What&#39;s the future of this project?</h3><a id="user-content-whats-the-future-of-this-project" aria-label="Permalink: What&#39;s the future of this project?" href="#whats-the-future-of-this-project"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This toolkit was developed and battle-tested while studying tens of thousands of Anki cards during medical school. It proved invaluable for maintaining and enhancing a large flashcard collection during intense study periods.</p>
<p dir="auto">However, as research commitments have grown, I now have limited time to transform these scripts into a more user-friendly package. The tools work well but need:</p>
<ul dir="auto">
<li>Packaging as a proper Anki addon</li>
<li>Installation via PyPI</li>
<li>Code deduplication and cleanup</li>
<li>Better documentation</li>
</ul>
<p dir="auto">I&#39;m actively looking for contributors of all skill levels to help make these tools more accessible to the wider Anki community. Whether you&#39;re a seasoned developer or just getting started, all contributions are welcome! I can provide guidance and direction based on extensive experience with the codebase, while you help with the technical aspects of packaging and distribution.</p>
<p dir="auto">Check out the detailed roadmap below to see what needs improving. If you&#39;re interested in helping transform these battle-tested scripts into a polished Anki addon, please don&#39;t hesitate to reach out - I&#39;m always happy to chat and help you get started!</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Why is there code duplication across the tools?</h3><a id="user-content-why-is-there-code-duplication-across-the-tools" aria-label="Permalink: Why is there code duplication across the tools?" href="#why-is-there-code-duplication-across-the-tools"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This project evolved organically alongside my Python skills while solving real needs during medical school. Each tool was developed independently when needed, prioritizing functionality over code elegance. While they all work reliably, there&#39;s significant opportunity to unify their codebases around a common API.</p>
<p dir="auto">I can provide detailed guidance on refactoring and consolidating the code, but lack the time to implement these changes myself. Check the roadmap below if you&#39;re interested in helping streamline the codebase while preserving its battle-tested functionality.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">When Should I Use Each Tool?</h3><a id="user-content-when-should-i-use-each-tool" aria-label="Permalink: When Should I Use Each Tool?" href="#when-should-i-use-each-tool"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><strong>Mnemonics Creator</strong>: Best for memorizing numbers, sequences, lists, and abstract concepts</li>
<li><strong>Illustrator</strong>: Ideal for visual learners and complex topics that benefit from imagery</li>
<li><strong>Reformulator</strong>: Use when card wording is unclear or you want variety in phrasing. Don&#39;t worry about running it on well-formatted cards - the LLM is trained to recognize and preserve cards that already follow best practices, avoiding unnecessary changes that could disrupt your learning</li>
<li><strong>Explainer</strong>: Great for understanding why you got a card wrong and filling knowledge gaps</li>
<li><strong>Mnemonics Helper</strong>: Simple script to quickly ask an LLM to come up with new mnemonics by taking into accountsthe <a href="https://en.wikipedia.org/wiki/Semantic_similarity" rel="nofollow">semantic similarity</a> of the new subject vs your previous mnemonics.</li>
</ul>
<div dir="auto"><h3 tabindex="-1" dir="auto">What happens if I run a script multiple times on the same card?</h3><a id="user-content-what-happens-if-i-run-a-script-multiple-times-on-the-same-card" aria-label="Permalink: What happens if I run a script multiple times on the same card?" href="#what-happens-if-i-run-a-script-multiple-times-on-the-same-card"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">For most tools (Mnemonics Creator, Illustrator, Explainer), the previous content will be preserved in a collapsible HTML section using the <code>&lt;details&gt;</code> and <code>&lt;summary&gt;</code> tags. The new content appears above this section. This makes it easy to:</p>
<ul dir="auto">
<li>See the latest generated content first</li>
<li>Access previous versions by expanding the collapsible sections</li>
<li>Track how the card evolved over time</li>
</ul>
<p dir="auto">The Reformulator works differently - it replaces the content of the original field directly, but saves all previous versions and metadata in a separate <code>AnkiReformulator</code> field. This preserves the card&#39;s readability while maintaining a complete history.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">How can I track which cards were modified?</h3><a id="user-content-how-can-i-track-which-cards-were-modified" aria-label="Permalink: How can I track which cards were modified?" href="#how-can-i-track-which-cards-were-modified"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Each tool meticulously tracks modifications through tags and metadata to ensure transparency and reversibility. For example, when a tool processes a card, it adds a dated tag like <code>AnkiIllustrator::done::02/07/2023</code>. This makes it easy to:</p>
<ul dir="auto">
<li>Quickly identify which cards were modified by each tool</li>
<li>Track when modifications were made</li>
<li>Find cards that haven&#39;t been processed yet</li>
<li>Rollback changes if needed (especially with the Reformulator)</li>
</ul>
<p dir="auto">You can use these tags in the Anki browser to assess how many cards could benefit from each tool and review the modifications made. Note that notes for which a script failed will have a tag added to it. For example <code>AnkiI ::failed</code>.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">How much does it cost to run these tools?</h3><a id="user-content-how-much-does-it-cost-to-run-these-tools" aria-label="Permalink: How much does it cost to run these tools?" href="#how-much-does-it-cost-to-run-these-tools"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The cost depends on your usage patterns and which features you enable:</p>
<ul dir="auto">
<li>Start small with a few cards to get comfortable with each tool</li>
<li>Built-in safeguards prevent accidental overspending:
<ul dir="auto">
<li>Maximum cards per run can be limited</li>
<li>Cost tracking per script is stored in the database</li>
<li>Failed API calls don&#39;t count towards your quota</li>
<li>You can set hard spending limits</li>
</ul>
</li>
<li>Typical costs per card:
<ul dir="auto">
<li>Reformulator: ~$0.02-0.04 (text only)</li>
<li>Mnemonics: ~$0.02-0.04 (text only)</li>
<li>Explainer: ~$0.03-0.06 (more complex reasoning)</li>
<li>Illustrator: ~$0.02 + image cost ($0.04-0.12 per image)</li>
</ul>
</li>
</ul>
<p dir="auto">The database tracks total spending per script, making it easy to budget and monitor costs. You can also use cheaper models for initial testing before scaling up to more capable ones.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Can I use these tools on mobile?</h3><a id="user-content-can-i-use-these-tools-on-mobile" aria-label="Permalink: Can I use these tools on mobile?" href="#can-i-use-these-tools-on-mobile"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">While you need to run the scripts themselves from a computer (not your phone), all changes are made directly to your Anki notes. This means:</p>
<ul dir="auto">
<li>Run the scripts from your computer/server</li>
<li>Sync Anki on your computer</li>
<li>The improved cards will appear on AnkiMobile/AnkiDroid after syncing</li>
<li>All generated content (reformulations, mnemonics, images, etc.) works perfectly on mobile</li>
</ul>

<p dir="auto">The <code>examples/</code> folder contains example files to help you get started. Note that these examples were originally written in French (except for system prompts) and were quickly translated to English - some examples may not make perfect sense but should still demonstrate the basic usage:</p>
<ul dir="auto">
<li><code>anki_ai_utils_tmux_launcher.sh</code>: A tmux-based launcher script I used every morning to automatically process cards I struggled with the previous day</li>
<li><code>anchors.json</code>: Example memory anchors mapping file</li>
<li><code>dataset_anchors.txt</code>: Training examples for memory anchor processing</li>
<li><code>explainer_dataset.txt</code>: Examples for the Explainer tool</li>
<li><code>illustrator_dataset.txt</code>: Training data for image generation</li>
<li><code>illustrator_sanitize_dataset.txt</code>: Examples for sanitizing image prompts</li>
<li><code>mnemonics_dataset.txt</code>: Training data for mnemonic generation</li>
<li><code>reformulator_dataset.txt</code>: Examples for card reformulation</li>
<li><code>string_formatting.py</code>: Handles cloze deletions and text formatting</li>
</ul>
<div dir="auto"><h3 tabindex="-1" dir="auto">What&#39;s the format of dataset files?</h3><a id="user-content-whats-the-format-of-dataset-files" aria-label="Permalink: What&#39;s the format of dataset files?" href="#whats-the-format-of-dataset-files"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Dataset files (like <code>explainer_dataset.txt</code>, <code>reformulator_dataset.txt</code>, etc.) are simple text files where messages are separated by <code>----</code>. The first message is assumed to be a system prompt, followed by alternating user and assistant messages. This format mirrors a typical LLM conversation flow while remaining easy to read and edit.</p>
</details>

<details>
<summary>
Click to read more
</summary>

<p dir="auto">The Reformulator can be run from the command line:</p>
<div dir="auto" data-snippet-clipboard-copy-content="python reformulator.py \
    --query &#34;(rated:2:1 OR rated:2:2) -is:suspended&#34; \
    --dataset_path &#34;data/reformulator_dataset.txt&#34; \
    --string_formatting &#34;data/string_formatting.py&#34; \
    --ntfy_url &#34;ntfy.sh/YOUR_TOPIC&#34; \
    --main_field_index 0 \
    --llm &#34;openai/gpt-4&#34; \
    --embedding_model &#34;openai/text-embedding-3-small&#34; \
    --max_token 4000 \
    --llm_temp 0"><pre>python reformulator.py \
    --query <span><span>&#34;</span>(rated:2:1 OR rated:2:2) -is:suspended<span>&#34;</span></span> \
    --dataset_path <span><span>&#34;</span>data/reformulator_dataset.txt<span>&#34;</span></span> \
    --string_formatting <span><span>&#34;</span>data/string_formatting.py<span>&#34;</span></span> \
    --ntfy_url <span><span>&#34;</span>ntfy.sh/YOUR_TOPIC<span>&#34;</span></span> \
    --main_field_index 0 \
    --llm <span><span>&#34;</span>openai/gpt-4<span>&#34;</span></span> \
    --embedding_model <span><span>&#34;</span>openai/text-embedding-3-small<span>&#34;</span></span> \
    --max_token 4000 \
    --llm_temp 0</pre></div>
<p dir="auto">Key arguments:</p>
<ul dir="auto">
<li><code>query</code>: Anki browser query to select cards (defaults to recently failed cards)</li>
<li><code>dataset_path</code>: Example prompts for reformulation</li>
<li><code>string_formatting</code>: Custom text formatting functions</li>
<li><code>ntfy_url</code>: Optional notifications via ntfy.sh</li>
<li><code>main_field_index</code>: Index of the field to reformulate (0 for first field)</li>
<li><code>llm</code>: LLM model to use in litellm format</li>
<li><code>embedding_model</code>: Model for semantic similarity search</li>
<li><code>max_token</code>: Maximum tokens per query</li>
<li><code>llm_temp</code>: LLM temperature (0 for consistent output)</li>
</ul>
<p dir="auto">Additional options:</p>
<ul dir="auto">
<li><code>--debug</code>: Enable debug mode</li>
<li><code>--force</code>: Process cards even if already reformulated</li>
<li><code>--print_db_then_exit</code>: Display database contents and exit</li>
<li><code>--parallel</code>: Number of parallel processes (default 4)</li>
<li><code>--exclude_media</code>: Skip cards containing media</li>
<li><code>--mode</code>: Either &#39;reformulate&#39; or &#39;reset&#39; to restore original content. Note that the &#39;reset&#39; feature is not absolutely guaranteed to work, but if things go wrong there are tons of logs on purpose to make sure you don&#39;t lose anything.</li>
</ul>

<p dir="auto">The Mnemonics Creator can be run from the command line:</p>
<div dir="auto" data-snippet-clipboard-copy-content="python mnemonics.py \
    --field_names &#34;body&#34; \
    --query &#34;(rated:2:1 OR rated:2:2) -is:suspended&#34; \
    --memory_anchors_file &#34;data/anchors.json&#34; \
    --dataset_path &#34;data/mnemonics_dataset.txt&#34; \
    --string_formatting &#34;data/string_formatting.py&#34; \
    --ntfy_url &#34;ntfy.sh/YOUR_TOPIC&#34; \
    --llm &#34;openrouter/anthropic/claude-3-sonnet&#34; \
    --embedding_model &#34;openai/text-embedding-3-small&#34; \
    --n_mnemonic 1"><pre>python mnemonics.py \
    --field_names <span><span>&#34;</span>body<span>&#34;</span></span> \
    --query <span><span>&#34;</span>(rated:2:1 OR rated:2:2) -is:suspended<span>&#34;</span></span> \
    --memory_anchors_file <span><span>&#34;</span>data/anchors.json<span>&#34;</span></span> \
    --dataset_path <span><span>&#34;</span>data/mnemonics_dataset.txt<span>&#34;</span></span> \
    --string_formatting <span><span>&#34;</span>data/string_formatting.py<span>&#34;</span></span> \
    --ntfy_url <span><span>&#34;</span>ntfy.sh/YOUR_TOPIC<span>&#34;</span></span> \
    --llm <span><span>&#34;</span>openrouter/anthropic/claude-3-sonnet<span>&#34;</span></span> \
    --embedding_model <span><span>&#34;</span>openai/text-embedding-3-small<span>&#34;</span></span> \
    --n_mnemonic 1</pre></div>
<p dir="auto">Key arguments:</p>
<ul dir="auto">
<li><code>field_names</code>: Comma-separated list of note fields to analyze</li>
<li><code>query</code>: Anki browser query to select cards (defaults to recently failed cards)</li>
<li><code>memory_anchors_file</code>: JSON file mapping concepts to memory anchors</li>
<li><code>dataset_path</code>: Example prompts for mnemonic generation</li>
<li><code>string_formatting</code>: Custom text formatting functions</li>
<li><code>ntfy_url</code>: Optional notifications via ntfy.sh</li>
<li><code>llm</code>: LLM model to use in litellm format</li>
<li><code>embedding_model</code>: Model for semantic similarity search</li>
<li><code>n_mnemonic</code>: Number of mnemonics to generate per card</li>
</ul>
<p dir="auto">Additional options:</p>
<ul dir="auto">
<li><code>--debug</code>: Enable debug mode</li>
<li><code>--force</code>: Process cards even if they already have mnemonics</li>
<li><code>--note_mode</code>: Don&#39;t count cards of the same note twice</li>
<li><code>--do_sync</code>: Sync Anki before and after processing</li>
</ul>

<p dir="auto">The Mnemonics Creator CLI provides an interactive interface for generating mnemonics:</p>
<div dir="auto" data-snippet-clipboard-copy-content="python mnemonics_creator.py \
    --top_k 100 \
    --n_gen 10 \
    --model &#34;openrouter/anthropic/claude-3-sonnet&#34; \
    --embed_model &#34;openai/text-embedding-3-small&#34;"><pre>python mnemonics_creator.py \
    --top_k 100 \
    --n_gen 10 \
    --model <span><span>&#34;</span>openrouter/anthropic/claude-3-sonnet<span>&#34;</span></span> \
    --embed_model <span><span>&#34;</span>openai/text-embedding-3-small<span>&#34;</span></span></pre></div>
<p dir="auto">Key arguments:</p>
<ul dir="auto">
<li><code>top_k</code>: Number of similar existing mnemonics to use as examples (default: 100)</li>
<li><code>n_gen</code>: Number of new mnemonics to generate per query (default: 10)</li>
<li><code>model</code>: LLM model to use in litellm format</li>
<li><code>embed_model</code>: Model for semantic similarity search</li>
<li><code>query</code>: Optional initial query to process</li>
<li><code>gui</code>: Enable GUI interface (not yet implemented)</li>
</ul>
<p dir="auto">The CLI provides an interactive interface where you can:</p>
<ul dir="auto">
<li>Enter concepts to generate mnemonics for</li>
<li>See similar existing mnemonics as context</li>
<li>Choose from multiple generated options</li>
<li>Navigate with vim-style keys (j/k) or numbers</li>
<li>Save selected mnemonics to your collection</li>
</ul>

<p dir="auto">The Explainer can be run from the command line:</p>
<div dir="auto" data-snippet-clipboard-copy-content="python explainer.py \
    --field_names &#34;body&#34; \
    --query &#34;(rated:2:1 OR rated:2:2) -is:suspended&#34; \
    --dataset_path &#34;data/explainer_dataset.txt&#34; \
    --string_formatting &#34;data/string_formatting.py&#34; \
    --ntfy_url &#34;ntfy.sh/YOUR_TOPIC&#34; \
    --llm &#34;openrouter/anthropic/claude-3-sonnet&#34; \
    --embedding_model &#34;openai/text-embedding-3-small&#34; \
    --llm_max_token 3000"><pre>python explainer.py \
    --field_names <span><span>&#34;</span>body<span>&#34;</span></span> \
    --query <span><span>&#34;</span>(rated:2:1 OR rated:2:2) -is:suspended<span>&#34;</span></span> \
    --dataset_path <span><span>&#34;</span>data/explainer_dataset.txt<span>&#34;</span></span> \
    --string_formatting <span><span>&#34;</span>data/string_formatting.py<span>&#34;</span></span> \
    --ntfy_url <span><span>&#34;</span>ntfy.sh/YOUR_TOPIC<span>&#34;</span></span> \
    --llm <span><span>&#34;</span>openrouter/anthropic/claude-3-sonnet<span>&#34;</span></span> \
    --embedding_model <span><span>&#34;</span>openai/text-embedding-3-small<span>&#34;</span></span> \
    --llm_max_token 3000</pre></div>
<p dir="auto">Key arguments:</p>
<ul dir="auto">
<li><code>field_names</code>: Comma-separated list of note fields to analyze</li>
<li><code>query</code>: Anki browser query to select cards (defaults to recently failed cards)</li>
<li><code>dataset_path</code>: Example prompts for generating explanations</li>
<li><code>string_formatting</code>: Custom text formatting functions</li>
<li><code>ntfy_url</code>: Optional notifications via ntfy.sh</li>
<li><code>llm</code>: LLM model to use in litellm format</li>
<li><code>embedding_model</code>: Model for semantic similarity search</li>
<li><code>llm_max_token</code>: Maximum tokens per query</li>
</ul>
<p dir="auto">Additional options:</p>
<ul dir="auto">
<li><code>--debug</code>: Enable debug mode</li>
<li><code>--force</code>: Process cards even if they already have explanations</li>
<li><code>--note_mode</code>: Don&#39;t count cards of the same note twice</li>
<li><code>--do_sync</code>: Sync Anki before and after processing</li>
</ul>

<p dir="auto">The Illustrator can be run from the command line:</p>
<div dir="auto" data-snippet-clipboard-copy-content="python illustrator.py \
    --field_names &#34;front,back&#34; \
    --query &#34;(rated:2:1 OR rated:2:2) -is:suspended&#34; \
    --memory_anchors_file &#34;data/anchors.json&#34; \
    --dataset_path &#34;data/illustrator_dataset.txt&#34; \
    --dataset_sanitize_path &#34;data/illustrator_sanitize.txt&#34; \
    --string_formatting &#34;data/string_formatting.py&#34; \
    --ntfy_url &#34;ntfy.sh/YOUR_TOPIC&#34; \
    --n_image 1"><pre>python illustrator.py \
    --field_names <span><span>&#34;</span>front,back<span>&#34;</span></span> \
    --query <span><span>&#34;</span>(rated:2:1 OR rated:2:2) -is:suspended<span>&#34;</span></span> \
    --memory_anchors_file <span><span>&#34;</span>data/anchors.json<span>&#34;</span></span> \
    --dataset_path <span><span>&#34;</span>data/illustrator_dataset.txt<span>&#34;</span></span> \
    --dataset_sanitize_path <span><span>&#34;</span>data/illustrator_sanitize.txt<span>&#34;</span></span> \
    --string_formatting <span><span>&#34;</span>data/string_formatting.py<span>&#34;</span></span> \
    --ntfy_url <span><span>&#34;</span>ntfy.sh/YOUR_TOPIC<span>&#34;</span></span> \
    --n_image 1</pre></div>
<p dir="auto">Key arguments:</p>
<ul dir="auto">
<li><code>field_names</code>: Comma-separated list of note fields to analyze</li>
<li><code>query</code>: Anki browser query to select cards (defaults to recently failed cards)</li>
<li><code>memory_anchors_file</code>: JSON file mapping concepts to memory anchors</li>
<li><code>dataset_path</code>: Example prompts for image generation</li>
<li><code>dataset_sanitize_path</code>: Examples for sanitizing unsafe prompts</li>
<li><code>string_formatting</code>: Custom text formatting functions</li>
<li><code>ntfy_url</code>: Optional notifications via ntfy.sh</li>
<li><code>n_image</code>: Number of images to generate per card</li>
</ul>
<p dir="auto">Additional options:</p>
<ul dir="auto">
<li><code>--debug</code>: Enable debug mode</li>
<li><code>--force</code>: Process cards even if they already have illustrations</li>
<li><code>--disable_notif</code>: Disable ntfy.sh notifications</li>
</ul>
</details>

<details>
<summary>
Click to read more
</summary>
<p dir="auto"><i>This TODO list is maintained automatically by <a href="https://github.com/thiswillbeyourgithub/MdXLogseqTODOSync">MdXLogseqTODOSync</a></i></p>

<ul dir="auto">
<li>turn those scripts into addons</li>
<li>

</li>
<li>use beartype everywhere</li>
<li>add an arg to include tags or not in the LLM context for a given note, as otherwise the LLM can get confused by some acronyms
<ul dir="auto">
<li>but with a regex arg to keep only the tags that match the regex. This way we can keep only a portion of them for the LLM</li>
</ul>
</li>
<li>store all inference in a compressed sqlite db instead of a json. It gets too large</li>
<li>add check that we indeed removed all the done tags</li>
<li>actually there&#39;s no need to store the &#34;Done&#34; tags because all important info is stored in the field</li>
<li>use xml formatting for the examples
<ul dir="auto">
<li>make use of  tags too</li>
</ul>
</li>
<li>make it installable with a setup.py on pypi</li>
<li>add images to illustrate the benefits of using each</li>
<li>do a unique class that could be used to unify all those codes
<ul dir="auto">
<li>arguments:
<ul dir="auto">
<li>name (to differentiate each children: for example &#34;illustrator&#34;)</li>
<li>string_format (can be overloaded)</li>
<li>in the init, check that indeed there is a version attribute</li>
</ul>
</li>
</ul>
</li>
<li>use toml instead of json, it allows setting comments too</li>
<li>tell user how much time each answer took</li>
<li></li>
<li>

<ul dir="auto">
<li>Add keybindings
<ul dir="auto">
<li>binding e to edit a proposition</li>
</ul>
</li>
</ul>
</li>
<li>

</li>
<li>use an llm to extract numbers
<ul dir="auto">
<li>ask it to do quick transformations like turn 48h into 2 days, modify units, etc,</li>
</ul>
</li>
<li>add support for note containing media like audio, images etc</li>
<li>add a mode without actually creating images. This could be used like a mnemonics after all.</li>
<li></li>
<li>

</li>
<li>Add 5 to 10 example for the LLM of how to manage media like iimages etc then add support for them</li>
<li>make it work with specific fstring template for field replacement. Otherwise it can only reformulate a single field
<ul dir="auto">
<li>better: add an arg to specify the single output field, and an arg to specify a comma separated list of input fields</li>
</ul>
</li>
<li></li>
<li>

</li>
<li>compute all embeddings at the start, making it faster</li>
<li>it&#39;s actually quite terrible. Use one LLM call to ask for which follow up questions to ask, then another LLM call to answer each using async
<ul dir="auto">
<li>save each new question answer as a <details> tag to make it easy to access on phones by touching the field</details></li>
</ul>
</li>
<li></li>
<li>

</li>
<li>comment out the mnemonics that dont respect the rule of adding the subject first</li>
<li>understand why it sometimes hangs during a run</li>
<li>make it distinguish &#39;has to appear in plain&#39; vs &#39;has to appear as mnemonic&#39;?</li>
<li></li>
<li>

</li>
<li>use an eval llm like in <a href="https://wdoc.readthedocs.io/en/latest/" rel="nofollow">wdoc</a> to better filer an anki query
<ul dir="auto">
<li>actually wdoc can already be used for that! Maybe it should be converted into an addon?</li>
</ul>
</li>
<li></li>
<li>

</li>
<li>always prepend tags by ankitagger: but customizable</li>
<li>always sort those tags by alphabetical order</li>
<li>add modes:
<ul dir="auto">
<li>mode &#34;predefined&#34;: the user gives a list of tags and the LLM finds which to apply to each note given a query
<ul dir="auto">
<li>loop over each note and ask it to generate tags</li>
</ul>
</li>
</ul>
</li>
<li>arg for image support if media found
<ul dir="auto">
<li>if the card contains an image, it should be hashed, then a cached call to a func that asks a vision model to describe the type of image, then use the embedding of this answer to suggest the appropriate tags to suggest to the LLM for classification</li>
</ul>
</li>
</ul>


<p dir="auto">This project makes heavy use of <a href="https://git.foosoft.net/alex/anki-connect" rel="nofollow">AnkiConnect</a> to interact with Anki.</p>
</details>
</article></div></div>
  </body>
</html>
