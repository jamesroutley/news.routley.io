<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://rome.tools/blog/2023/05/10/rome12_1/">Original</a>
    <h1>Rome v12.1: a Rust-based linter formatter for TypeScript, JSX and JSON</h1>
    
    <div id="readability-page-1" class="page"><div><main><main><p>Stage 3 decorators, VCS support, new lint rules and more.</p><p>Rome v12.1.0 brings support for the new Stage 3 decorators, VCS support and new lint rules!</p><description-end></description-end><p>You can upgrade Rome by running the following command:</p><pre><code><span>npm</span> <span>install</span> --save-dev --save-exact rome@12.1.0
<span>pnpm</span> update --save-exact rome@12.1.0
<span>yarn</span> upgrade <span>--exact</span> rome@12.1.0</code></pre><p>Or install the <a href="https://marketplace.visualstudio.com/items?itemName=rome.rome">VS Code extension</a> to integrate Rome into your editor.</p><h2 id="stage-3-decorators">Stage 3 decorators<a href="#stage-3-decorators" aria-hidden="true" tabindex="-1"></a></h2><p>The new version of decorators was promoted to Stage 3, and now Rome is able to parse them and format them!</p><p>Now you’ll be able to use most of your frameworks, and all lint rules will work out of the box!</p><div><div><h4>Before</h4><pre><code>@<span>Column</span><span>(</span>

<span>)</span>
<span>class</span> <span>name</span> <span>{</span>
    <span>id</span><span>:</span> something
<span>}</span></code></pre></div><div><h4>Formatted</h4><pre><code>@<span>Column</span><span>(</span><span>)</span>
<span>class</span> <span>name</span> <span>{</span>
    <span>id</span><span>:</span> something<span>;</span>
<span>}</span>
</code></pre></div></div><p>Huge thank you to <a href="https://github.com/denbezrukov"><code>Denis Bezrukov</code></a> for his amazing work! He alone implemented the parsing and the formatting!</p><h2 id="built-in-vcs-support">Built in VCS support<a href="#built-in-vcs-support" aria-hidden="true" tabindex="-1"></a></h2><p>With this release, Rome is now able to integrate itself with your VCS! The set of features and clients available is very small, but with time we will be able to ship more features!</p><p>In this release, only <code>git</code> is supported, and you’ll be able to ignore files and directories inside the <code>.gitignore</code> file:</p><pre><code><span>{</span>
  <span>&#34;vcs&#34;</span><span>:</span> <span>{</span>
    <span>&#34;enabled&#34;</span><span>:</span> <span>true</span><span>,</span>
    <span>&#34;clientKind&#34;</span><span>:</span> <span>&#34;git&#34;</span><span>,</span>
    <span>&#34;useIgnoreFile&#34;</span><span>:</span> <span>true</span>
  <span>}</span>
<span>}</span></code></pre><p>With this configuration, will import the paths specified in the <code>.gitignore</code> file and won’t process them!</p><h2 id="more-rules">More rules!<a href="#more-rules" aria-hidden="true" tabindex="-1"></a></h2><p>Many new rules have been stabilised and promoted:</p><ul><li><a href="https://docs.rome.tools/lint/rules/noNoninteractiveElementToInteractiveRole">lint/a11y/noNoninteractiveElementToInteractiveRole</a></li><li><a href="https://docs.rome.tools/lint/rules/noRedundantAlt">lint/a11y/noRedundantAlt</a></li><li><a href="https://docs.rome.tools/lint/rules/noSvgWithoutTitle">lint/a11y/noSvgWithoutTitle</a></li><li><a href="https://docs.rome.tools/lint/rules/useAriaPropsForRole">lint/a11y/useAriaPropsForRole</a></li><li><a href="https://docs.rome.tools/lint/rules/useIframeTitle">lint/a11y/useIframeTitle</a></li><li><a href="https://docs.rome.tools/lint/rules/useMediaCaption">lint/a11y/useMediaCaption</a></li><li><a href="https://docs.rome.tools/lint/rules/useValidAriaProps">lint/a11y/useValidAriaProps</a></li><li><a href="https://docs.rome.tools/lint/rules/useValidLang">lint/a11y/useValidLang</a></li><li><a href="https://docs.rome.tools/lint/rules/noExtraSemicolon">lint/complexity/noExtraSemicolon</a></li><li><a href="https://docs.rome.tools/lint/rules/noUselessCatch">lint/complexity/noUselessCatch</a></li><li><a href="https://docs.rome.tools/lint/rules/noUselessConstructor">lint/complexity/noUselessConstructor</a></li><li><a href="https://docs.rome.tools/lint/rules/noUselessLabel">lint/complexity/noUselessLabel</a></li><li><a href="https://docs.rome.tools/lint/rules/noUselessRename">lint/complexity/noUselessRename</a></li><li><a href="https://docs.rome.tools/lint/rules/noUselessSwitchCase">lint/complexity/noUselessSwitchCase</a></li><li><a href="https://docs.rome.tools/lint/rules/noWith">lint/complexity/noWith</a></li><li><a href="https://docs.rome.tools/lint/rules/noGlobalObjectCalls">lint/correctness/noGlobalObjectCalls</a></li><li><a href="https://docs.rome.tools/lint/rules/noInnerDeclarations">lint/correctness/noInnerDeclarations</a></li><li><a href="https://docs.rome.tools/lint/rules/noInvalidConstructorSuper">lint/correctness/noInvalidConstructorSuper</a></li><li><a href="https://docs.rome.tools/lint/rules/noSwitchDeclarations">lint/correctness/noSwitchDeclarations</a></li><li><a href="https://rome.tools/docs/lint/rules/noUnreachableSuper">lint/correctness/noUnreachableSuper</a></li><li><a href="https://docs.rome.tools/lint/rules/noUnsafeOptionalChaining">lint/correctness/noUnsafeOptionalChaining</a></li><li><a href="https://docs.rome.tools/lint/rules/noUnusedLabels">lint/correctness/noUnusedLabels</a></li><li><a href="https://docs.rome.tools/lint/rules/useYield">lint/correctness/useYield</a></li><li><a href="https://docs.rome.tools/lint/rules/noCommaOperator">lint/style/noCommaOperator</a></li><li><a href="https://docs.rome.tools/lint/rules/noInferrableTypes">lint/style/noInferrableTypes</a></li><li><a href="https://docs.rome.tools/lint/rules/noNamespace">lint/style/noNamespace</a></li><li><a href="https://docs.rome.tools/lint/rules/noParameterAssign">lint/style/noParameterAssign</a></li><li><a href="https://docs.rome.tools/lint/rules/noParameterProperties">lint/style/noParameterProperties</a></li><li><a href="https://docs.rome.tools/lint/rules/noRestrictedGlobals">lint/style/noRestrictedGlobals</a></li><li><a href="https://docs.rome.tools/lint/rules/noAssignInExpressions">lint/suspicious/noAssignInExpressions</a></li><li><a href="https://docs.rome.tools/lint/rules/noClassAssign">lint/suspicious/noClassAssign</a></li><li><a href="https://docs.rome.tools/lint/rules/noConfusingLabels">lint/suspicious/noConfusingLabels</a></li><li><a href="https://docs.rome.tools/lint/rules/noDuplicateCase">lint/suspicious/noDuplicateCase</a></li><li><a href="https://docs.rome.tools/lint/rules/noDuplicateClassMembers">lint/suspicious/noDuplicateClassMembers</a></li><li><a href="https://docs.rome.tools/lint/rules/noPrototypeBuiltins">lint/suspicious/noPrototypeBuiltins</a></li><li><a href="https://docs.rome.tools/lint/rules/noRedeclare">lint/suspicious/noRedeclare</a></li><li><a href="https://docs.rome.tools/lint/rules/noSelfCompare">lint/suspicious/noSelfCompare</a></li><li><a href="https://docs.rome.tools/lint/rules/useNamespaceKeyword">lint/suspicious/useNamespaceKeyword</a></li></ul><p>Huge thanks to:</p><ul><li><a href="https://github.com/orgs/rome/people/Conaclos">Conaclos</a> for writing many of these new and promoted rules, and driving the majority of the efforts in the linter!</li><li><a href="https://github.com/orgs/rome/people/nissy-dev">nissy-dev</a> for refactoring many rules, making them more clear with better diagnostics!</li><li><a href="https://github.com/orgs/rome/people/unvalley">unvalley</a> for implementing most of the accessibility rules!</li></ul><h2 id="rome-check-via-stdin"><code>rome check</code> via <code>stdin</code><a href="#rome-check-via-stdin" aria-hidden="true" tabindex="-1"></a></h2><p>You can now check your code via standard input. This was feature available to the command <code>rome format</code>, and you can now use this very feature via <code>rome check</code>!</p><p>A code like this</p><pre><code><span>echo</span> <span>&#34;a == 3&#34;</span> <span>|</span> <span>cargo</span> rome-cli-dev check --stdin-file-path<span>=</span>file.js</code></pre><p>Will result in following output in <code>stderr</code>:</p><pre><code>file.js lint/suspicious/noDoubleEquals  FIXABLE  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  ✖ Use === instead of ==

  ℹ == is only allowed when comparing against null

  ℹ Using === may be unsafe if you are relying on type coercion

  ℹ Suggested fix: Use ===

    1 │ a·===·3
      │     +

file.js format ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  ℹ Formatter would have printed the following content:

    1 │ a·==·3;
      │       +
</code></pre><p>Instead, we added the <code>--apply</code> (or <code>--apply-unsafe</code>), we will see a different output.</p><pre><code><span>echo</span> <span>&#34;a == 3&#34;</span> <span>|</span> <span>cargo</span> rome-cli-dev check <span>--apply</span> --stdin-file-path<span>=</span>file.js</code></pre><p>In <code>stdout</code> we will have the new output</p><pre><code>a <span>==</span> <span>3</span><span>;</span>
</code></pre><p>Notice the <code>;</code> at the end, which was added by the formatter</p><p>And in <code>stderr</code>, we will have the following output</p><pre><code>file.js lint/suspicious/noDoubleEquals  FIXABLE  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

  ✖ Use === instead of ==

  ℹ == is only allowed when comparing against null

  ℹ Using === may be unsafe if you are relying on type coercion

  ℹ Suggested fix: Use ===

    1 │ a·===·3;
      │     +
</code></pre><h2 id="new-rome-migrate-command">New <code>rome migrate</code> command<a href="#new-rome-migrate-command" aria-hidden="true" tabindex="-1"></a></h2><p>Use this command to update your configuration file in case there breaking changes!</p><p>For the time being, there aren’t breaking changes! But, in the future there are, use this command to migrate <code>rome.json</code>, without the hassle!</p><h2 id="new-help-prompt">New help prompt<a href="#new-help-prompt" aria-hidden="true" tabindex="-1"></a></h2><p>The CLI now uses a new library, which is able to generate output from the source code. This resulted in a new help prompt!</p><pre><code>Run the formatter on a set of files.

Usage: [--write] &lt;PATH&gt;...

Available positional items:
    &lt;PATH&gt;  Single file, single path or list of paths

Available options:
        --indent-style &lt;tab|space&gt;  The indent style.
        --indent-size &lt;NUMBER&gt;  The size of the indentation, 2 by default
        --line-width &lt;NUMBER&gt;  What&#39;s the max width of a line. Defaults to 80.
        --quote-style &lt;double|single&gt;  The style for quotes. Defaults to double.
        --quote-properties &lt;preserve|as-needed&gt;  When properties in objects are quoted. Defaults to
                       asNeeded.
        --trailing-comma &lt;all|es5|none&gt;  Print trailing commas wherever possible in multi-line
                       comma-separated syntactic structures. Defaults to &#34;all&#34;.
        --semicolons &lt;always|as-needed&gt;  Whether the formatter prints semicolons for all statements
                       or only in for statements where it is necessary because of ASI.
        --vcs-client-kind &lt;git&gt;  The kind of client.
        --vcs-enabled &lt;true|false&gt;  Whether Rome should integrate itself with the VCS client
        --vcs-use-ignore-file &lt;true|false&gt;  Whether Rome should use the VCS ignore file. When [true],
                       Rome will ignore the files specified in the ignore file.
        --vcs-root &lt;PATH&gt;  The folder where Rome should check for VCS files. By default, Rome will
                       use the same folder where `rome.json` was found. If Rome can&#39;t fine the
                       configuration, it will attempt to use the current working directory. If no
                       current working directory can&#39;t be found, Rome won&#39;t use the VCS integration.
        --files-max-size &lt;NUMBER&gt;  The maximum allowed size for source code files in bytes. Files
                       above this limit will be ignored for performance reason. Defaults to 1 MiB
        --stdin-file-path &lt;PATH&gt;  A file name with its extension to pass when reading from standard
                       in, e.g. echo &#39;let a;&#39; | rome format --stdin-file-path=file.js&#34;
        --colors &lt;off|force&gt;  Set the formatting mode for markup: &#34;off&#34; prints everything as plain
                       text, &#34;force&#34; forces the formatting of markup using ANSI even if the console
                       output is determined to be incompatible
        --use-server   Connect to a running instance of the Rome daemon server.
        --verbose      Print additional verbose advices on diagnostics
        --config-path &lt;PATH&gt;  Set the filesystem path to the directory of the rome.json configuration
                       file
        --max-diagnostics &lt;NUMBER&gt;  Cap the amount of diagnostics displayed (default: 20)
        --skip-errors  Skip over files containing syntax errors instead of emitting an error
                       diagnostic.
        --json         Reports information using the JSON format
        --write
    -h, --help         Prints help information</code></pre></main></main></div></div>
  </body>
</html>
