<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/enzet/map-machine">Original</a>
    <h1>Map Machine: Python renderer for OpenStreetMap with custom icons</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">The <strong>Map Machine</strong> project consists of</p>
<ul dir="auto">
<li>a Python <a href="http://openstreetmap.org" rel="nofollow">OpenStreetMap</a> renderer:
<ul dir="auto">
<li>SVG <a href="#map-generation">map generation</a>,</li>
<li>SVG and PNG <a href="#tile-generation">tile generation</a>,</li>
</ul>
</li>
<li>the <a href="#r%C3%B6ntgen-icon-set">Röntgen</a> icon set: unique CC-BY 4.0 map icons.</li>
</ul>
<p dir="auto">The idea behind the Map Machine project is to <strong>show all the richness of the OpenStreetMap data</strong>: to have a possibility to display any map feature represented by OpenStreetMap data tags by means of colors, shapes, and icons. Map Machine is created both for map contributors: to display all changes one made on the map even if they are small, and for map users: to dig down into the map and find every detail that was mapped.</p>
<p dir="auto">Unlike standard OpenStreetMap layers, <strong>Map Machine is a playground for experiments</strong> where one can easily try to support any unsupported tag, proposed tagging scheme, tags with little or even single usage, deprecated ones that are still in use.</p>
<p dir="auto">Map Machine is intended to be highly configurable, so it can generate precise but messy maps for OSM contributors as well as pretty and clean maps for OSM users. It can also use some slow algorithms for experimental features.</p>
<p dir="auto">See</p>
<ul dir="auto">
<li><a href="#installation">installation instructions</a>,</li>
<li><a href="#map-features">map features</a>,</li>
<li><a href="#use-r%C3%B6ntgen-as-josm-map-paint-style">using Röntgen as JOSM style</a>.</li>
</ul>

<div dir="auto" data-snippet-clipboard-copy-content="map-machine render -b 2.284,48.860,2.290,48.865"><pre>map-machine render -b 2.284,48.860,2.290,48.865</pre></div>
<p dir="auto">will automatically download OSM data and render an SVG map of the specified area to <code>out/map.svg</code>. See <a href="#map-generation">Map generation</a>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="map-machine tile -b 2.361,48.871,2.368,48.875"><pre>map-machine tile -b 2.361,48.871,2.368,48.875</pre></div>
<p dir="auto">will automatically download OSM data and render PNG tiles that cover the specified area to the <code>out/tiles</code> directory. See <a href="#tile-generation">Tile generation</a>.</p>

<p dir="auto">The central feature of the project is the Röntgen icon set. It is a set of monochrome 14 × 14 px pixel-aligned icons specially created for the Map Machine project. Unlike the Map Machine source code, which is under the MIT license, all icons are under the <a href="http://creativecommons.org/licenses/by/4.0/" rel="nofollow">CC BY</a> license. So, with the appropriate credit the icon set can be used outside the project. Some icons can be used as emoji symbols.</p>
<p dir="auto">All icons tend to support a common design style, which is heavily inspired by <a href="https://github.com/mapbox/maki">Maki</a>, <a href="https://github.com/gmgeo/osmic">Osmic</a>, and <a href="https://github.com/ideditor/temaki">Temaki</a>.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/enzet/map-machine/blob/main/doc/grid.svg"><img src="https://github.com/enzet/map-machine/raw/main/doc/grid.svg" alt="Icons"/></a></p>
<p dir="auto">Feel free to request new icons via issues for whatever you want to see on the map. No matter how frequently the tag is used in OpenStreetMap since the final goal is to cover all tags. However, commonly used tags have priority, other things being equal.</p>
<p dir="auto">Generate an icon grid and sets of individual icons with <code>map-machine icons</code>. It will update the <code>doc/grid.svg</code> file, and create SVG files in the <code>out/icons_by_id</code> directory where files are named using shape identifiers (e.g. <code>power_tower_portal_2_level.svg</code>) and in the <code>icons_by_name</code> directory where files are named using shape names (e.g. <code>Röntgen portal two-level transmission tower.svg</code>). Files from the last directory are used in the OpenStreetMap wiki (e.g. <a href="https://wiki.openstreetmap.org/wiki/File:R%C3%B6ntgen_portal_two-level_transmission_tower.svg" rel="nofollow"><code>File:Röntgen_portal_two-level_transmission_tower.svg</code></a>).</p>


<p dir="auto">Map Machine uses icons to visualize tags for nodes and areas. But unlike other renderers, Map Machine can use more than one icon to visualize an entity and can use colors to visualize <a href="https://wiki.openstreetmap.org/wiki/Key:colour" rel="nofollow"><code>colour</code></a> value or other entity properties (like <a href="https://wiki.openstreetmap.org/wiki/Key:material" rel="nofollow"><code>material</code></a> or <a href="https://wiki.openstreetmap.org/wiki/Key:genus" rel="nofollow"><code>genus</code></a>).</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Isometric building shapes</h3><a id="user-content-isometric-building-shapes" aria-label="Permalink: Isometric building shapes" href="#isometric-building-shapes"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">With <code>--buildings isometric</code> or <code>--buildings isometric-no-parts</code> (not set by default), buildings are drawn using isometric shapes for walls and shade in proportion to <a href="https://wiki.openstreetmap.org/wiki/Key:building:levels" rel="nofollow"><code>building:levels</code></a>, <a href="https://wiki.openstreetmap.org/wiki/Key:building:min_level" rel="nofollow"><code>building:min_level</code></a>, <a href="https://wiki.openstreetmap.org/wiki/Key:height" rel="nofollow"><code>height</code></a>, and <a href="https://wiki.openstreetmap.org/wiki/Key:min_height" rel="nofollow"><code>min_height</code></a> values.</p>

<div dir="auto" data-snippet-clipboard-copy-content="map-machine render -c -26.19049,28.05605 -s 600,400 --buildings isometric"><pre>map-machine render -c -26.19049,28.05605 -s 600,400 --buildings isometric</pre></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/enzet/map-machine/blob/main/doc/buildings.svg"><img src="https://github.com/enzet/map-machine/raw/main/doc/buildings.svg" alt="3D buildings"/></a></p>

<p dir="auto">To determine the road width Map Machine uses the <a href="https://wiki.openstreetmap.org/wiki/Key:width" rel="nofollow"><code>width</code></a> tag value or estimates it based on the <a href="https://wiki.openstreetmap.org/wiki/Key:lanes" rel="nofollow"><code>lanes</code></a> value. If lane value is specified, it also draws lane separators. This map style is highly inspired by Christoph Hormann&#39;s post <a href="http://blog.imagico.de/navigating-the-maze-part-2/" rel="nofollow">Navigating the Maze</a>.</p>

<div dir="auto" data-snippet-clipboard-copy-content="map-machine render -c 47.61224,-122.33866 -s 600,400"><pre>map-machine render -c 47.61224,-122.33866 -s 600,400</pre></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/enzet/map-machine/blob/main/doc/lanes.svg"><img src="https://github.com/enzet/map-machine/raw/main/doc/lanes.svg" alt="Road lanes"/></a></p>

<p dir="auto">Visualization of tree leaf types (broadleaved or needle-leaved) and genus or taxon by means of icon shapes and leaf cycles (deciduous or evergreen) by means of color.</p>

<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/enzet/map-machine/blob/main/doc/trees.svg"><img src="https://github.com/enzet/map-machine/raw/main/doc/trees.svg" alt="Trees"/></a></p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Viewpoint and camera direction</h3><a id="user-content-viewpoint-and-camera-direction" aria-label="Permalink: Viewpoint and camera direction" href="#viewpoint-and-camera-direction"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="https://wiki.openstreetmap.org/wiki/Key:direction" rel="nofollow"><code>direction</code></a> tag values for <a href="https://wiki.openstreetmap.org/wiki/Key:tourism" rel="nofollow"><code>tourism</code></a> = <a href="https://wiki.openstreetmap.org/wiki/Tag:tourism=viewpoint" rel="nofollow"><code>viewpoint</code></a> and <a href="https://wiki.openstreetmap.org/wiki/Key:camera:direction" rel="nofollow"><code>camera:direction</code></a> for <a href="https://wiki.openstreetmap.org/wiki/Key:man_made" rel="nofollow"><code>man_made</code></a> = <a href="https://wiki.openstreetmap.org/wiki/Tag:man_made=surveillance" rel="nofollow"><code>surveillance</code></a> are rendered with sectors displaying the direction and angle (15º if angle is not specified) or the whole circle for panorama view. Radial gradient is used for surveillance and inverted radial gradient is used for viewpoints.</p>

<div dir="auto" data-snippet-clipboard-copy-content="map-machine render -c 52.50892,13.3244 -s 600,400 -z 18.5"><pre>map-machine render -c 52.50892,13.3244 -s 600,400 -z 18.5</pre></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/enzet/map-machine/blob/main/doc/surveillance.svg"><img src="https://github.com/enzet/map-machine/raw/main/doc/surveillance.svg" alt="Surveillance"/></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/enzet/map-machine/blob/main/doc/viewpoints.svg"><img src="https://github.com/enzet/map-machine/raw/main/doc/viewpoints.svg" alt="Viewpoints"/></a></p>

<p dir="auto">Visualize <a href="https://wiki.openstreetmap.org/wiki/Key:design" rel="nofollow"><code>design</code></a> values used with <a href="https://wiki.openstreetmap.org/wiki/Key:power" rel="nofollow"><code>power</code></a> = <a href="https://wiki.openstreetmap.org/wiki/Tag:power=tower" rel="nofollow"><code>tower</code></a> and <a href="https://wiki.openstreetmap.org/wiki/Key:power" rel="nofollow"><code>power</code></a> = <a href="https://wiki.openstreetmap.org/wiki/Tag:power=pole" rel="nofollow"><code>pole</code></a> tags. <code>design</code> has more than 1 million usages in OpenStreetMap.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/enzet/map-machine/blob/main/doc/icons_power.svg"><img src="https://github.com/enzet/map-machine/raw/main/doc/icons_power.svg" alt="Power tower design"/></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/enzet/map-machine/blob/main/doc/power.svg"><img src="https://github.com/enzet/map-machine/raw/main/doc/power.svg" alt="Power tower design"/></a></p>

<p dir="auto">Map icons have <a href="https://wiki.openstreetmap.org/wiki/Key:colour" rel="nofollow"><code>colour</code></a> tag value if it is present, otherwise, icons are displayed with dark grey color by default, purple color for shop nodes, red color for emergency features, and special colors for natural features. Map Machine also takes into account <a href="https://wiki.openstreetmap.org/wiki/Key:building:colour" rel="nofollow"><code>building:colour</code></a>, <a href="https://wiki.openstreetmap.org/wiki/Key:roof:colour" rel="nofollow"><code>roof:colour</code></a> and other <code>*:colour</code> tags, and uses the <a href="https://wiki.openstreetmap.org/wiki/Key:colour" rel="nofollow"><code>colour</code></a> tag value to paint subway lines.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/enzet/map-machine/blob/main/doc/colors.svg"><img src="https://github.com/enzet/map-machine/raw/main/doc/colors.svg" alt="Building colors"/></a></p>

<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/enzet/map-machine/blob/main/doc/icons_emergency.svg"><img src="https://github.com/enzet/map-machine/raw/main/doc/icons_emergency.svg" alt="Emergency"/></a></p>

<p dir="auto">Japanese maps usually use <a href="https://en.wikipedia.org/wiki/List_of_Japanese_map_symbols" rel="nofollow">special symbols</a> called <em>chizukigou</em> (地図記号) which are different from standard map symbols used in other countries. They can be enabled with <code>--country jp</code> option.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/enzet/map-machine/blob/main/doc/icons_japanese.svg"><img src="https://github.com/enzet/map-machine/raw/main/doc/icons_japanese.svg" alt="Japanese map symbols"/></a></p>

<p dir="auto">Draw indoor features specifying level with <code>--level</code> option. Possible values are numbers (e.g. <code>1</code>, <code>0.5</code>), lists of number separated by <code>;</code> (e.g. <code>1;2;4;4.5</code>), <code>all</code>, <code>overground</code>, and <code>underground</code>. The default value is not <code>all</code>, but <code>overground</code>, so underground objects are not shown on the map if <code>--level</code> option is not specified.</p>

<div dir="auto" data-snippet-clipboard-copy-content="map-machine render -c 4.5978,-74.07507 -s 600,400 -z 19.5 --level 0"><pre>map-machine render -c 4.5978,-74.07507 -s 600,400 -z 19.5 --level 0</pre></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/enzet/map-machine/blob/main/doc/indoor.svg"><img src="https://github.com/enzet/map-machine/raw/main/doc/indoor.svg" alt="Indoor"/></a></p>

<p dir="auto">One of the key features of Map Machine is constructing icons from several shapes.</p>

<p dir="auto">For <a href="https://wiki.openstreetmap.org/wiki/Key:man_made" rel="nofollow"><code>man_made</code></a> = <a href="https://wiki.openstreetmap.org/wiki/Tag:man_made=mast" rel="nofollow"><code>mast</code></a> distinguish types (communication, lighting, monitoring, and siren) and construction (freestanding or lattice, and using of guys) are rendered by combining 7 unique icon shapes.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/enzet/map-machine/blob/main/doc/mast.svg"><img src="https://github.com/enzet/map-machine/raw/main/doc/mast.svg" alt="Mast types"/></a></p>

<p dir="auto">For <a href="https://wiki.openstreetmap.org/wiki/Key:natural" rel="nofollow"><code>natural</code></a> = <a href="https://wiki.openstreetmap.org/wiki/Tag:natural=volcano" rel="nofollow"><code>volcano</code></a> status (active, dormant, extinct, or unspecified) and type (stratovolcano, shield, or scoria) are rendered by combining 7 unique icon shapes.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/enzet/map-machine/blob/main/doc/volcano.svg"><img src="https://github.com/enzet/map-machine/raw/main/doc/volcano.svg" alt="Volcano types"/></a></p>


<p dir="auto">Visualize element creation time with <code>--mode time</code>.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/enzet/map-machine/blob/main/doc/time.svg"><img src="https://github.com/enzet/map-machine/raw/main/doc/time.svg" alt="Creation time mode"/></a></p>

<p dir="auto">Every way and node displayed with the random color picked for each author with <code>--mode author</code>.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/enzet/map-machine/blob/main/doc/author.svg"><img src="https://github.com/enzet/map-machine/raw/main/doc/author.svg" alt="Author mode"/></a></p>

<p dir="auto">Requirements: Python 3.9.</p>
<ul dir="auto">
<li>Install the <a href="https://www.cairographics.org/download/" rel="nofollow">cairo 2D graphic library</a>,</li>
<li>install the <a href="https://libgeos.org" rel="nofollow">GEOS library</a>,</li>
<li>install the Python packages with the command:</li>
</ul>
<div dir="auto" data-snippet-clipboard-copy-content="pip install git+https://github.com/enzet/map-machine"><pre>pip install git+https://github.com/enzet/map-machine</pre></div>
<p dir="auto">For more detailed instructions, see <a href="https://github.com/enzet/map-machine/blob/main/doc/INSTALL.md">instructions</a>.</p>

<p dir="auto">The <code>render</code> command is used to generate an SVG map from OpenStreetMap data. You can run it using:</p>
<div dir="auto" data-snippet-clipboard-copy-content="map-machine render \
    -b &lt;min longitude&gt;,&lt;min latitude&gt;,&lt;max longitude&gt;,&lt;max latitude&gt; \
    -o &lt;output file name&gt; \
    -z &lt;OSM zoom level&gt; \
    &lt;other arguments&gt;"><pre>map-machine render \
    -b <span>&lt;</span>min longitude<span>&gt;</span>,<span>&lt;</span>min latitude<span>&gt;</span>,<span>&lt;</span>max longitude<span>&gt;</span>,<span>&lt;</span>max latitude<span>&gt;</span> \
    -o <span>&lt;</span>output file name<span>&gt;</span> \
    -z <span>&lt;</span>OSM zoom level<span>&gt;</span> \
    <span>&lt;</span>other arguments<span>&gt;</span></pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="map-machine render \
    --boundary-box 2.284,48.860,2.290,48.865 \
    --output out/esplanade_du_trocadéro.svg"><pre>map-machine render \
    --boundary-box 2.284,48.860,2.290,48.865 \
    --output out/esplanade_du_trocadéro.svg</pre></div>
<p dir="auto">will download OSM data to <code>cache/2.284,48.860,2.290,48.865.osm</code> and render an SVG map of the specified area to <code>out/esplanade_du_trocadéro.svg</code>.</p>

<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><span><code>-i</code></span>, <span><code>--input</code></span> <code>&lt;path&gt;</code></td>
<td>input XML file name or names (if not specified, file will be downloaded using the OpenStreetMap API)</td>
</tr>
<tr>
<td><span><code>-o</code></span>, <span><code>--output</code></span> <code>&lt;path&gt;</code></td>
<td>output SVG file name, default value: <code>out/map.svg</code></td>
</tr>
<tr>
<td><span><code>-b</code></span>, <span><code>--boundary-box</code></span> <code>&lt;lon1&gt;,&lt;lat1&gt;,&lt;lon2&gt;,&lt;lat2&gt;</code></td>
<td>geo boundary box</td>
</tr>
<tr>
<td><span><code>--cache</code></span> <code>&lt;path&gt;</code></td>
<td>path for temporary OSM files, default value: <code>cache</code></td>
</tr>
<tr>
<td><span><code>-z</code></span>, <span><code>--zoom</code></span> <code>&lt;float&gt;</code></td>
<td>OSM zoom level, default value: 18.0</td>
</tr>
<tr>
<td><span><code>-c</code></span>, <span><code>--coordinates</code></span> <code>&lt;latitude&gt;,&lt;longitude&gt;</code></td>
<td>coordinates of any location inside the tile</td>
</tr>
<tr>
<td><span><code>-s</code></span>, <span><code>--size</code></span> <code>&lt;width&gt;,&lt;height&gt;</code></td>
<td>resulted image size</td>
</tr>
</tbody>
</table>
<p dir="auto">plus <a href="#map-options">map configuration options</a></p>

<p dir="auto">Command <code>tile</code> is used to generate PNG tiles for <a href="https://wiki.openstreetmap.org/wiki/Slippy_Map" rel="nofollow">slippy maps</a>. To use them, run <a href="#tile-server">Map Machine tile server</a>.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><span><code>-c</code></span>, <span><code>--coordinates</code></span> <code>&lt;latitude&gt;,&lt;longitude&gt;</code></td>
<td>coordinates of any location inside the tile</td>
</tr>
<tr>
<td><span><code>-t</code></span>, <span><code>--tile</code></span> <code>&lt;zoom level&gt;/&lt;x&gt;/&lt;y&gt;</code></td>
<td>tile specification</td>
</tr>
<tr>
<td><span><code>--cache</code></span> <code>&lt;path&gt;</code></td>
<td>path for temporary OSM files, default value: <code>cache</code></td>
</tr>
<tr>
<td><span><code>-b</code></span>, <span><code>--boundary-box</code></span> <code>&lt;lon1&gt;,&lt;lat1&gt;,&lt;lon2&gt;,&lt;lat2&gt;</code></td>
<td>construct the minimum amount of tiles that cover the requested boundary box</td>
</tr>
<tr>
<td><span><code>-z</code></span>, <span><code>--zoom</code></span> <code>&lt;range&gt;</code></td>
<td>OSM zoom levels; can be list of numbers or ranges, e.g. <code>16-18</code>, <code>16,17,18</code>, or <code>16,18-20</code>, default value: <code>18</code></td>
</tr>
<tr>
<td><span><code>-i</code></span>, <span><code>--input</code></span> <code>&lt;path&gt;</code></td>
<td>input OSM XML file name (if not specified, the file will be downloaded using the OpenStreetMap API)</td>
</tr>
</tbody>
</table>
<p dir="auto">plus <a href="#map-options">map configuration options</a></p>

<p dir="auto">Specify the tile coordinates:</p>
<div dir="auto" data-snippet-clipboard-copy-content="map-machine tile --tile &lt;OSM zoom level&gt;/&lt;x&gt;/&lt;y&gt;"><pre>map-machine tile --tile <span>&lt;</span>OSM zoom level<span>&gt;</span>/<span>&lt;</span>x<span>&gt;</span>/<span>&lt;</span>y<span>&gt;</span></pre></div>
<p dir="auto">or specify any geographical coordinates inside a tile:</p>
<div dir="auto" data-snippet-clipboard-copy-content="map-machine tile \
    --coordinates &lt;latitude&gt;,&lt;longitude&gt; \
    --zoom &lt;OSM zoom levels&gt;"><pre>map-machine tile \
    --coordinates <span>&lt;</span>latitude<span>&gt;</span>,<span>&lt;</span>longitude<span>&gt;</span> \
    --zoom <span>&lt;</span>OSM zoom levels<span>&gt;</span></pre></div>
<p dir="auto">The tile will be stored as an SVG file <code>out/tiles/tile_&lt;zoom level&gt;_&lt;x&gt;_&lt;y&gt;.svg</code> and a PNG file <code>out/tiles/tile_&lt;zoom level&gt;_&lt;x&gt;_&lt;y&gt;.svg</code>, where <code>x</code> and <code>y</code> are tile coordinates. The <code>--zoom</code> option will be ignored if it is used with the <code>--tile</code> option.</p>
<p dir="auto">Example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="map-machine tile -c 55.7510637,37.6270761 -z 18"><pre>map-machine tile -c 55.7510637,37.6270761 -z 18</pre></div>
<p dir="auto">will generate an SVG file <code>out/tiles/tile_18_158471_81953.svg</code> and a PNG file <code>out/tiles/tile_18_158471_81953.png</code>.</p>

<p dir="auto">Specify the boundary box to get the minimal set of tiles that covers the area:</p>
<div dir="auto" data-snippet-clipboard-copy-content="map-machine tile \
    --boundary-box &lt;min longitude&gt;,&lt;min latitude&gt;,&lt;max longitude&gt;,&lt;max latitude&gt; \
    --zoom &lt;OSM zoom levels&gt;"><pre>map-machine tile \
    --boundary-box <span>&lt;</span>min longitude<span>&gt;</span>,<span>&lt;</span>min latitude<span>&gt;</span>,<span>&lt;</span>max longitude<span>&gt;</span>,<span>&lt;</span>max latitude<span>&gt;</span> \
    --zoom <span>&lt;</span>OSM zoom levels<span>&gt;</span></pre></div>
<p dir="auto">The boundary box will be extended to the boundaries of the minimal tileset that covers the area, then it will be extended a bit more to avoid some artifacts on the edges rounded to 3 digits after the decimal point. The map with the new boundary box coordinates will be written to the cache directory as SVG and PNG files. All tiles will be stored as SVG files <code>out/tiles/tile_&lt;zoom level&gt;_&lt;x&gt;_&lt;y&gt;.svg</code> and PNG files <code>out/tiles/tile_&lt;zoom level&gt;_&lt;x&gt;_&lt;y&gt;.svg</code>, where <code>x</code> and <code>y</code> are tile coordinates.</p>
<p dir="auto">Example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="map-machine tile -b 2.361,48.871,2.368,48.875"><pre>map-machine tile -b 2.361,48.871,2.368,48.875</pre></div>
<p dir="auto">will generate 36 PNG tiles at zoom level 18 from tile 18/132791/90164 all the way to 18/132796/90169 and two cached files <code>cache/2.360,48.869,2.370,48.877_18.svg</code> and <code>cache/2.360,48.869,2.370,48.877_18.png</code>.</p>

<p dir="auto">The <code>server</code> command is used to run a tile server for slippy maps.</p>

<p dir="auto">Stop server interrupting the process with <kbd>Ctrl</kbd> + <kbd>C</kbd>.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><span><code>--cache</code></span> <code>&lt;path&gt;</code></td>
<td>path for temporary OSM files, default value: <code>cache</code></td>
</tr>
<tr>
<td><span><code>--port</code></span> <code>&lt;integer&gt;</code></td>
<td>port number, default value: 8080</td>
</tr>
</tbody>
</table>

<p dir="auto">Create a minimal amount of tiles that cover specified boundary box for zoom levels 16, 17, 18, and 19:</p>
<div dir="auto" data-snippet-clipboard-copy-content="map-machine tile -b 2.364,48.854,2.367,48.857 -z 16-19"><pre>map-machine tile -b 2.364,48.854,2.367,48.857 -z 16-19</pre></div>
<p dir="auto">Run tile server on 127.0.0.1:8080:</p>

<p dir="auto">Use JavaScript code for <a href="https://leafletjs.com/" rel="nofollow">Leaflet</a>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="var map = L.map(&#39;mapid&#39;).setView([48.8555, 2.3655], 18);

L.tileLayer(&#39;http://127.0.0.1:8080/tiles/{z}/{x}/{y}&#39;, {
    maxZoom: 19,
    attribution: &#39;Map data &amp;copy; &#39; +
        &#39;&lt;a href=&#34;https://www.openstreetmap.org/copyright&#34;&gt;OpenStreetMap&lt;/a&gt; &#39; +
        &#39;contributors, imagery &amp;copy; &#39; +
        &#39;&lt;a href=&#34;https:/github.com/enzet/map-machine&#34;&gt;Map Machine&lt;/a&gt;&#39;,
    id: &#39;map_machine&#39;,
    tileSize: 256,
    zoomOffset: 0
}).addTo(map);"><pre><span>var</span> <span>map</span> <span>=</span> <span>L</span><span>.</span><span>map</span><span>(</span><span>&#39;mapid&#39;</span><span>)</span><span>.</span><span>setView</span><span>(</span><span>[</span><span>48.8555</span><span>,</span> <span>2.3655</span><span>]</span><span>,</span> <span>18</span><span>)</span><span>;</span>

<span>L</span><span>.</span><span>tileLayer</span><span>(</span><span>&#39;http://127.0.0.1:8080/tiles/{z}/{x}/{y}&#39;</span><span>,</span> <span>{</span>
    <span>maxZoom</span>: <span>19</span><span>,</span>
    <span>attribution</span>: <span>&#39;Map data &amp;copy; &#39;</span> <span>+</span>
        <span>&#39;&lt;a href=&#34;https://www.openstreetmap.org/copyright&#34;&gt;OpenStreetMap&lt;/a&gt; &#39;</span> <span>+</span>
        <span>&#39;contributors, imagery &amp;copy; &#39;</span> <span>+</span>
        <span>&#39;&lt;a href=&#34;https:/github.com/enzet/map-machine&#34;&gt;Map Machine&lt;/a&gt;&#39;</span><span>,</span>
    <span>id</span>: <span>&#39;map_machine&#39;</span><span>,</span>
    <span>tileSize</span>: <span>256</span><span>,</span>
    <span>zoomOffset</span>: <span>0</span>
<span>}</span><span>)</span><span>.</span><span>addTo</span><span>(</span><span>map</span><span>)</span><span>;</span></pre></div>
<p dir="auto">HTML code:</p>
<div dir="auto" data-snippet-clipboard-copy-content="&lt;div id=&#34;mapid&#34; style=&#34;width: 1000px; height: 600px;&#34;&gt;&lt;/div&gt;"><pre><span>&lt;</span><span>div</span> <span>id</span>=&#34;<span>mapid</span>&#34; <span>style</span>=&#34;<span>width: 1000px; height: 600px;</span>&#34;<span>&gt;</span><span>&lt;/</span><span>div</span><span>&gt;</span></pre></div>

<p dir="auto">Map configuration options used by <code>render</code> and <code>tile</code> commands:</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><span><code>--scheme</code></span> <code>&lt;id&gt; or &lt;path&gt;</code></td>
<td>scheme identifier (look for <code>&lt;id&gt;.yml</code> file) or path to a YAML scheme file, default value: <code>default</code></td>
</tr>
<tr>
<td><span><code>--buildings</code></span> <code>&lt;mode&gt;</code></td>
<td>building drawing mode: no, flat, isometric, isometric-no-parts, default value: <code>flat</code></td>
</tr>
<tr>
<td><span><code>--mode</code></span> <code>&lt;string&gt;</code></td>
<td>map drawing mode: normal, author, time, white, black, default value: <code>normal</code></td>
</tr>
<tr>
<td><span><code>--overlap</code></span> <code>&lt;integer&gt;</code></td>
<td>how many pixels should be left around icons and text, default value: 12</td>
</tr>
<tr>
<td><span><code>--labels</code></span> <code>&lt;string&gt;</code></td>
<td>label drawing mode: no, main, all, address, default value: <code>main</code></td>
</tr>
<tr>
<td><span><code>--level</code></span></td>
<td>display only this floor level, default value: <code>overground</code></td>
</tr>
<tr>
<td><span><code>--seed</code></span> <code>&lt;string&gt;</code></td>
<td>seed for random</td>
</tr>
<tr>
<td><span><code>--tooltips</code></span></td>
<td>add tooltips with tags for icons in SVG files</td>
</tr>
<tr>
<td><span><code>--country</code></span></td>
<td>two-letter code (ISO 3166-1 alpha-2) of country, that should be used for location restrictions, default value: <code>world</code></td>
</tr>
<tr>
<td><span><code>--ignore-level-matching</code></span></td>
<td>draw all map features ignoring the current level</td>
</tr>
<tr>
<td><span><code>--roofs</code></span></td>
<td>draw building roofs, set by default</td>
</tr>
<tr>
<td><span><code>--building-colors</code></span></td>
<td>paint walls (if isometric mode is enabled) and roofs with specified colors</td>
</tr>
<tr>
<td><span><code>--show-overlapped</code></span></td>
<td>show hidden nodes with a dot</td>
</tr>
</tbody>
</table>

<p dir="auto">The <code>mapcss</code> command can be used to generate a MapCSS scheme. <code>map-machine mapcss</code> will create an <code>out/map_machine_mapcss</code> directory with simple MapCSS 0.2 scheme adding icons from the Röntgen icon set to nodes and areas: <code>.mapcss</code> file and directory with icons.</p>
<p dir="auto">To create a MapCSS style with Map Machine style also for ways and relations, run <code>map-machine mapcss --ways</code>.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><span><code>--icons</code></span></td>
<td>add icons for nodes and areas, set by default</td>
</tr>
<tr>
<td><span><code>--ways</code></span></td>
<td>add style for ways and relations</td>
</tr>
<tr>
<td><span><code>--lifecycle</code></span></td>
<td>add icons for lifecycle tags; be careful: this will increase the number of node and area selectors by 9 times, set by default</td>
</tr>
</tbody>
</table>
<div dir="auto"><h3 tabindex="-1" dir="auto">Use Röntgen as JOSM map paint style</h3><a id="user-content-use-röntgen-as-josm-map-paint-style" aria-label="Permalink: Use Röntgen as JOSM map paint style" href="#use-röntgen-as-josm-map-paint-style"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>Run <code>map-machine mapcss</code>.</li>
<li>Open <a href="https://josm.openstreetmap.de/" rel="nofollow">JOSM</a>.</li>
<li>Go to <kbd>Preferences</kbd> → Third tab on the left → <kbd>Map Paint Styles</kbd>.</li>
<li>Active styles: press <kbd>+</kbd>.</li>
<li>URL / File: set path to <code>out/map_machine_mapcss/map_machine.mapcss</code>.</li>
</ul>
<p dir="auto">To enable/disable the Map Machine map paint style go to <kbd>View</kbd> → <kbd>Map Paint Styles</kbd> → <kbd>Map Machine</kbd>.</p>

<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/enzet/map-machine/blob/main/doc/josm.png"><img src="https://github.com/enzet/map-machine/raw/main/doc/josm.png" alt="JOSM example"/></a></p>
<p dir="auto">Example of using Röntgen icons on top of the Mapnik style in JOSM. Map Paint Styles look like this:</p>
<ul dir="auto">
<li>✓ Mapnik (true)</li>
<li>✓ Map Machine</li>
</ul>
</article></div></div>
  </body>
</html>
