<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://sir68k.re/posts/rh1-firmware-available/">Original</a>
    <h1>Custom Firmware for the MZ-RH1 – Ready for Testing</h1>
    
    <div id="readability-page-1" class="page"><div itemprop="articleBody">
      <p><img src="https://sir68k.re/posts/rh1-firmware-available/images/cfw.jpeg" alt="Custom firmware on the MZ-RH1!"/></p>
<p>A while ago I wrote about my early experiments with modifying the firmware of the Sony MZ-RH1, mainly driven by one long-standing annoyance: not being able to see track titles on the unit itself during playback. That post demonstrated a proof-of-concept, which was not ready for release.</p>
<p>This time, things are a bit more serious. I’ve now completed the first public release of custom firmware for the MZ-RH1!</p>

<p>The headline feature is exactly what started this whole journey:
You can now see track titles directly on the RH1’s OLED displays during playback, without needing the remote.</p>
<p>This works for both standard MD and Hi-MD discs.
Seeing titles scroll by on the main unit also feels incredibly right; to me this is how the device was always meant to work.</p>
<p>There are, however, some limitations:</p>
<p>The display controller only supports Latin characters, which is a hardware limitation we can’t bypass in software.</p>
<p>As a compromise, for MD discs that use half-width Katakana, the firmware will display a romanized version of the track name instead. I know that this is not ideal, but it’s a step up from relying entirely on the remote.</p>

<p><img src="https://sir68k.re/posts/rh1-firmware-available/images/playmode.jpeg" alt="Track control on the MZ-RH1"/></p>
<p>A small quality-of-life improvement:
We now have basic track control options in the main unit menu, including things like repeat and shuffle modes - features that were previously only accessible through the remote.</p>
<p>The goal here is to make the RH1 feel more self-contained and less like it’s missing half its brain when the remote isn’t plugged in.</p>

<p>Getting features working was only half the work. The other half was making sure people can actually install this firmware without turning their RH1 into bricks.</p>
<p>The original Sony firmware does not include any official firmware flashing functionality. To make this possible, I had to reverse engineer the undocumented flash interface of the CXD2687, figure out how to correctly unlock it, erase sectors, and safely rewrite them.</p>
<p>To help people upgrade, I built an easy-to-use WebUSB-based installer (linked on the bottom of this post). The installer performs extensive validation before and after flashing to minimize the risk of corruption. A lot of the development time went into testing edge cases and, yes, nervously experimenting on my own devices first :P</p>

<p>One of the biggest breakthroughs I had during this project helped make custom firmware far less scary.</p>
<p>I’ve identified working JTAG access on the RH1, and even more importantly, discovered a boot ROM mode that can be enabled by bridging two GPIO lines on the mainboard
(<strong>HSALF / TP8232 / R853</strong> and <strong>WDT / SL901</strong>) to ground.</p>
<p>Concretely, the boot ROM allows us to take control of the MCU over USB and execute our own flashing code, which means we now have a practical way to recover devices that would otherwise be considered bricked. I was so happy when I discovered this, as it allowed me to recover one of my RH1’s that I bricked during testing, and also be much more risky in my tests. This feature got used quite a lot in my testing, and because of it I was able to make significant progress.</p>
<p>In other words: we have a small safety net.</p>

<p>This release is just a foundation, solving two major issues that I had. There are many more firmware improvements I want to explore - usability tweaks, deeper control, and features that make the RH1 feel even more like the high-end recorder it always deserved to be.
Of course, doing this takes time, and as I’m busy with other projects, you might have to wait.</p>
<p>To avoid myself being a bottleneck, I’ve released all my code and work as open source. This enables others to contributed, or even make their own firmware.</p>
<p>It’s been a long road from “wouldn’t it be nice if…” to actually running custom code on this thing, but we’re finally here.</p>
<p>Have a wonderful MD-day,


</p>

<ul>
<li><strong>Programming Tool</strong>: <a href="https://sir68k.re/rh1/fw/flasher.html">MZ-RH1 WebUSB Flasher</a></li>
<li><strong>Custom Firmware Build</strong>: <a href="https://sir68k.re/rh1/fw/fw_rh1_1.1r3.bin">fw_rh1_1.1r3.bin</a></li>
<li><strong>Source Code</strong>: <a href="https://github.com/Sir68k/cfw-mz-rh1">GitHub</a></li>
</ul>
<p>Thank you!</p>

    </div></div>
  </body>
</html>
