<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://me.micahrl.com/blog/svg-triangle-of-compromise/">Original</a>
    <h1>SVG Triangle of Compromise</h1>
    
    <div id="readability-page-1" class="page"><div id="content">
  
  <section>

    

    

    

    

    <div>
      

<div>
  <p>
  This is a short update on 2024-07-29 after some discussion on
  <a href="https://news.ycombinator.com/item?id=41070709">Hacker News</a> and Mastodon.
  It turns out that I was wrong about the original thrust of my post ðŸ˜….
  I will make an update, but it&#39;s not ready yet
  (I told my boss that I need to poast but he still wanted me to work today).
  The short version: SVGs with <code>&lt;use&gt;</code> tags offer a no compromise solution.
  Scott Jehl made a
  <a href="https://scottjehl.com/posts/svgtopia/">great interactive demo of this</a>.
  Thanks to everyone on HN and to Scott for the feedback!
</p></div>


<div>
  <p>
  If you&#39;re reading this via the
  <a href="https://me.micahrl.com/webfeeds/">web feed</a> (RSS),
  I recommend <a href="https://me.micahrl.com/blog/svg-triangle-of-compromise/">viewing it on the web</a> instead,
  as I&#39;m using <code>&lt;svg&gt;</code> elements
  as well as some feed-reader-unfriendly CSS and JavaScript in this post.
</p></div>


<div>
  
  <ul>
  <li><strong>2024-07-29</strong>: Add a note about pending updates and a link to Scott Jehl&#39;s <code>&lt;use&gt;</code> demo</li>
  <li><strong>2024-07-25</strong>: Add list of properties to each subheading, show <code>&lt;use&gt;</code> tags</li>
</ul>

</div>









<p>With SVGs on the web, you get to choose any <strong>two</strong>:</p>

<ul>
  <li>
    <span>Stylable</span>:
    can be colored with CSS (including foreground, background, <code>:hover</code> states, etc)
  </li>
  <li>
    <span>Cacheable</span>:
    load once, use on other pages is free
  </li>
  <li>
    <span>Dimensional</span>:
    has an intrinsic width and height
  </li>
</ul>

<!--A hidden SVG element is used to define the SVGs that will be displayed on the page-->


<!--In an SVG order matters - items defined first are on the bottom and can drawn on top of by items that come later-->
<p>
<svg id="compromise-diagram" width="500" height="400" xmlns="http://www.w3.org/2000/svg">
  <rect width="100%" height="100%"></rect>

  <circle cx="200" cy="150" r="100"></circle>
  <text x="130" y="130" fill="black">stylable</text>

  <circle cx="300" cy="150" r="100"></circle>
  <text x="310" y="130" fill="black">cacheable</text>

  <circle cx="250" cy="250" r="100"></circle>
  <text x="200" y="280" fill="black">dimensional</text>

  <line x1="250" y1="120" x2="275" y2="20" stroke="black"></line>
  <text x="280" y="20" fill="black"><tspan>&lt;iframe&gt;</tspan> with inline <tspan>&lt;svg&gt;</tspan> tag</text>

  <line x1="290" y1="225" x2="395" y2="340" stroke="black"></line>
  <text x="400" y="350" fill="black"><tspan>&lt;img&gt;</tspan> tag</text>

  <line x1="200" y1="220" x2="95" y2="295" stroke="black"></line>
  <text x="30" y="300" fill="black"><tspan>&lt;svg&gt;</tspan> tag</text>

  <line x1="250" y1="185" x2="415" y2="245" stroke="black"></line>
  <text x="420" y="250" fill="black">nothing ðŸ™ƒ</text>

  <g>
    <circle cx="250" cy="180" r="160" fill="none"></circle>
    <line x1="120" y1="320" x2="380" y2="40"></line>
  </g>
</svg>
</p>



<h2>Referencing SVGs from an <code>&lt;img&gt;</code> element</h2>

<ul>
  <li>
    <svg><use href="#icon-times"></use></svg>
    <span>stylable</span>
  </li>
  <li>
    <svg><use href="#icon-check"></use></svg>
    <span>cacheable</span>
  </li>
  <li>
    <svg><use href="#icon-check"></use></svg>
    <span>dimensional</span>
  </li>
</ul>

<p>
  An SVG referenced via an <code>&lt;img&gt;</code> tag works like any other image.
  If you load the same image on multiple pages, it will be cached and not re-downloaded.
  It can be used without specifying width and height to be displayed at its natural size,
  or with only one of the two specified for it to be displayed proportionally,
  or can be made to automatically fit its container.
  Other image types like PNG or JPEG files only support being referenced this way in the first place.
</p>

<h2>Displaying an SVG via an <code>&lt;svg&gt;</code> tag</h2>

<ul>
  <li>
    <svg><use href="#icon-check"></use></svg>
    <span>stylable</span>
  </li>
  <li>
    <svg><use href="#icon-times"></use></svg>
    <span>cacheable</span>
  </li>
  <li>
    <svg><use href="#icon-check"></use></svg>
    <span>dimensional</span>
  </li>
</ul>

<p>
  An SVG defined via an <code>&lt;svg&gt;</code> can have its objects styled with CSS.
  The CSS properties that apply to SVGs are sometimes different than those that apply to HTML elements,
  like <code>fill</code> instead of <code>color</code>,
  but it&#39;s all CSS in the end,
  and you can use the same stylesheet to style SVG elements along with the rest of your page.
</p>

<p>
  An SVG defined this way has another advantage:
  it can use the <code>currentColor</code> value for its <code>fill</code> and <code>stroke</code> properties,
  which means that it will automatically inherit the
  <span>
    text 
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
<title>finder</title>
<path d="M17.788 24.32c-0-0.001-0-0.003-0-0.004 0 0.001 0 0.003 0 0.004z"></path>
<path d="M17.831 25.454c-0-0.007-0.001-0.015-0.001-0.022 0 0.007 0.001 0.015 0.001 0.022z"></path>
<path d="M17.807 24.885c-0-0.006-0-0.011-0.001-0.017 0 0.006 0 0.011 0.001 0.017z"></path>
<path d="M30 0h-28c-1.1 0-2 0.9-2 2v28c0 1.1 0.9 2 2 2h15.432c0.001 0 0.003 0 0.004 0s0.003-0 0.004-0h12.56c1.1 0 2-0.9 2-2v-28c0-1.1-0.9-2-2-2zM6 7c0-0.552 0.448-1 1-1s1 0.448 1 1v2c0 0.552-0.448 1-1 1s-1-0.448-1-1v-2zM30 30h-11.721c-0.209-1.315-0.341-2.671-0.418-3.988 0 0.004 0 0.007 0.001 0.011-0.616 0.067-1.237 0.102-1.862 0.102-4.177 0-8.199-1.52-11.328-4.281-0.466-0.411-0.51-1.122-0.099-1.588s1.122-0.51 1.588-0.099c2.717 2.398 6.211 3.718 9.839 3.718 0.596 0 1.189-0.036 1.776-0.107-0.069-3.694 0.215-6.622 0.22-6.669 0.028-0.281-0.064-0.561-0.254-0.77s-0.459-0.329-0.741-0.329h-2.974c0.043-1.082 0.159-2.932 0.467-5.006 0.589-3.961 1.625-7.055 3.005-8.994h12.502v28z"></path>
<path d="M25 10c-0.552 0-1-0.448-1-1v-2c0-0.552 0.448-1 1-1s1 0.448 1 1v2c0 0.552-0.448 1-1 1z"></path>
<path d="M16.89 26.101c-0.114 0.006-0.228 0.011-0.342 0.014 0.114-0.004 0.228-0.008 0.342-0.014z"></path>
<path d="M16 26.125c0.147 0 0.293-0.002 0.439-0.006-0.146 0.004-0.292 0.006-0.439 0.006z"></path>
<path d="M16.846 23.85c0.024-0.001 0.049-0.003 0.073-0.004-0.024 0.002-0.049 0.003-0.073 0.004z"></path>
<path d="M16.409 23.869c0.034-0.001 0.067-0.002 0.101-0.003-0.034 0.001-0.067 0.003-0.101 0.003z"></path>
<path d="M27.427 20.256c-0.411-0.466-1.122-0.51-1.588-0.099-2.27 2.004-5.083 3.254-8.063 3.612 0.013 0.727 0.040 1.484 0.086 2.255 3.499-0.382 6.806-1.832 9.466-4.18 0.466-0.411 0.51-1.122 0.099-1.588z"></path>
<path d="M17.859 26.023c-0.144 0.016-0.288 0.029-0.433 0.041 0.145-0.012 0.289-0.026 0.433-0.041z"></path>
<path d="M17.359 26.070c-0.122 0.010-0.244 0.018-0.367 0.025 0.122-0.007 0.245-0.015 0.367-0.025z"></path>
</svg>

 color
  </span>
  of its parent element.
</p>

<p>
  The shapes support <code>:hover</code> states and other CSS pseudo-classes, too.
  In fact, they can have styling dynamically applied via JavaScript just like any other element!
  It&#39;s implemented in the diagram above,
  try hovering over any of the text labels.
</p>

<p>
  Of course, placing the SVG inline to the HTML means it cannot be cached,
  any more than a <code>&lt;p&gt;</code> or a <code>&lt;div&gt;</code>
  is cached when it&#39;s repeated on multiple pages.
  This is almost never a problem with text,
  which tends to be very small and not be repeated on multiple pages,
  but might waste bandwidth if used for SVGs used often, like a logo or icon.
</p>

<h2>Displaying an <code>&lt;iframe&gt;</code> with an <code>&lt;svg&gt;</code> inside it</h2>

<ul>
  <li>
    <svg><use href="#icon-check"></use></svg>
    <span>stylable</span>
  </li>
  <li>
    <svg><use href="#icon-check"></use></svg>
    <span>cacheable</span>
  </li>
  <li>
    <svg><use href="#icon-times"></use></svg>
    <span>dimensional</span>
  </li>
</ul>

<p>
  It&#39;s too bad that an inline <code>&lt;svg&gt;</code> cannot be cached,
  because it would be nice to be able to style logos and icons with CSS,
  and those are the things that are most likely to be repeated on multiple pages.
</p>

<p>
  To solve this, we could create an HTML file that contains only the <code>&lt;svg&gt;</code> tag,
  and reference it on the site via an <code>&lt;iframe&gt;</code>.
  This solves the cachability problem, but introduces a new one:
  an <code>&lt;iframe&gt;</code> does not have an intrinsic width or height,
  at least as far as the browser can tell before rendering it.
</p>

<p>
  You can hack around this dimensionality problem by
  measuring the <code>&lt;iframe&gt;</code> in JavaScript after it has loaded,
  although this requires JavaScript and causes a
  <a href="https://en.wikipedia.org/wiki/Flash_of_unstyled_content">flash of unstyled content</a>
  and an extra reflow.
  You could even measure it in advance and store its dimensions somehow,
  so that your site can set <code>width</code> and <code>height</code> on the <code>&lt;iframe&gt;</code> tag,
  depending on your requirements.
</p>

<p>
  Apparently I think this is pretty neat, though,
  because I have <a href="https://me.micahrl.com/tags/iframes/">referenced iframes a few times before</a>,
  and I&#39;ve <a href="https://me.micahrl.com/blog/archiving-tweets-to-html/">run into the dimensionality problem with iframes</a>
  in the past.
</p>

<h2>Other options</h2>

<p>
  It&#39;s also worth mentioning a few other ways to reference SVGs:
</p>

<ul>
  <li>
    You could create two SVG files, one for the normal state and one for the hover state,
    reference them via <code>&lt;img&gt;</code> tags,
    and swap them via CSS when the user hovers over the element.
    At least as of the time of this writing,
    this is what I do for my site logo in the header.
    This works well if all you need are the two states of hover and normal.
  </li>
  <li>
    You could use
    <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/object">the <code>&lt;object&gt;</code> tag</a>,
    which is like an <code>&lt;iframe&gt;</code> but for multimedia objects like SVGs.
    It has the same dimensionality problem as the <code>&lt;iframe&gt;</code> tag,
    and is not stylable with CSS from the parent document,
    but can be manipulated with JavaScript from the parent.
  </li>
  <li>
    If you&#39;re using an SVG for an icon multiple times on the same page,
    you can embed an <code>&lt;svg&gt;</code> tag with the icon inline in the HTML,
    and use a <code>&lt;use&gt;</code> tag to reference individual symbols from it.
    I do this on this page for
    the check- and x- mark icons
    <svg><use href="#icon-check"></use></svg> and <svg><use href="#icon-times"></use></svg>.
    This mitigates the cachability problem for icons used more than once on the same page,
    like say a trash can icon on a list of items,
    but the icons are still not cacheable accross pages.
    (One way to achieve full cacheability is to fetch the SVG via JavaScript and inject it into the page.)
  </li>
</ul>

    </div>

    
  </section>
    </div></div>
  </body>
</html>
