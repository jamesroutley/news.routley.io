<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.righto.com/2022/06/x-ray-reverse-engineering-hybrid-module.html">Original</a>
    <h1>X-ray reverse-engineering a hybrid module from 1960s Apollo test equipment</h1>
    
    <div id="readability-page-1" class="page"><div id="post-body-2120562166226480149" itemprop="description articleBody">


<p>In this blog post, I reverse-engineer a hybrid module that was used for ground-testing of equipment from the Apollo space program.
But first, some background.
During the Apollo missions to the Moon, NASA could send digital messages to the spacecraft from the ground.
These data messages could perform specific tasks: control spacecraft equipment by activating relays,
send commands directly to the Apollo Guidance Computer, or even set the spacecraft&#39;s clock.
Onboard the Command Module, these messages were decoded by the Up-Data Link, a drab bluish box (below) mounted in the equipment bay. </p>
<p><a href="https://static.righto.com/images/apollo-module39/updata-box.jpg"><img alt="The Up-Data Link (UDL) was installed on the Apollo Command Module." height="299" src="https://static.righto.com/images/apollo-module39/updata-box-w500.jpg" title="The Up-Data Link (UDL) was installed on the Apollo Command Module." width="500"/></a></p><p>The Up-Data Link (UDL) was installed on the Apollo Command Module.</p>
<p>To ensure a successful mission, all the systems of Apollo were thoroughly tested on the ground before flight.
The Up-Data Link was tested with the box below, labeled &#34;Up-Data Link Confidence Test Set&#34;.
Our friend Marcel obtained this box at a scrapyard, so we set out to make it work, but unfortunately it had no documentation and a few missing components.
After reverse-engineering its complex circuitry and performing some repairs,
we figured out how it works:
The test box read a command from paper tape, encoded it for radio transmission using phase-shift keying, fed the signal into the up-data link box,
and then verified that the up-data link box took the proper action.
The transmitted message was shown on the display, while the red and green status lights indicated if the operation was decoded successfully.
Thus, the test box provided an automated system for exercising the functions of the up-data link.</p>
<p><a href="https://static.righto.com/images/apollo-module39/box.jpg"><img alt="The up-data test box is a heavy rack-mounted box full of circuitry. The wiring on top is for our reverse-engineering, plugged into the box&#39;s numerous test points." height="375" src="https://static.righto.com/images/apollo-module39/box-w500.jpg" title="The up-data test box is a heavy rack-mounted box full of circuitry. The wiring on top is for our reverse-engineering, plugged into the box&#39;s numerous test points." width="500"/></a></p><p>The up-data test box is a heavy rack-mounted box full of circuitry. The wiring on top is for our reverse-engineering, plugged into the box&#39;s numerous test points.</p>
<p>The construction of the test box was very unusual from a modern perspective.
The box was constructed from 25 printed-circuit boards,
with the boards connected by a tangled backplane of point-to-point wiring.
Each board held up to 18 gray rectangular modules,
blocks that look a bit like relays but contain electronic circuitry.
These modules were built by Motorola and had labels that indicated the type of module; the photo below shows some of these compact modules, each 1.5&#34; long.
On the underside of the module, 13 pins in two unequal rows were plugged into a socket on the circuit board.</p>
<p><a href="https://static.righto.com/images/apollo-module39/modules.jpg"><img alt="Some of the Motorola modules: 2/2G&amp;2/1G, LD, 2P/3G, and LP FF. The printing for the part numbers smudges very easily." height="465" src="https://static.righto.com/images/apollo-module39/modules-w500.jpg" title="Some of the Motorola modules: 2/2G&amp;2/1G, LD, 2P/3G, and LP FF. The printing for the part numbers smudges very easily." width="500"/></a></p><p>Some of the Motorola modules: 2/2G&amp;2/1G, LD, 2P/3G, and LP FF. The printing for the part numbers smudges very easily.</p>
<p>Why would a complex electronic box be built from modules instead of integrated circuits?
The invention of the integrated circuit in 1958 led to an electronic revolution, but in the mid-1960s integrated circuits were still expensive and rare.
An alternative was small hybrid modules that functioned as building blocks: logic gates, flip flops, op-amps, and other circuits.
Instead of a silicon chip, these hybrid modules contained discrete transistors, resistors, capacitors, and other components.</p>
<!-- Electronic Modules Corporation, Electronics 1964-04-19 p153 -->

<p>I could find no documentation on these Motorola modules, or even a mention of them, despite my best efforts with Google and Bitsavers.
However, the modules could be easily removed from the sockets for experimentation, with the unexpected convenience that the 0.200&#34; pin spacing is compatible with modern solderless breadboards.
For most of the modules, I could determine their function by probing them with test signals, in combination with examining their surrounding circuitry, which showed
standardized +6 and -6 volt power supply connections.
The modules had simple logic functions hinted at by the labels: for instance, the &#34;LP FF&#34; was a (low-power? low-performance?) flip flop while &#34;2/2G &amp; 2/1G&#34; indicated a module with two 2-input NAND gates and two 1-input gates (i.e. inverters).</p>
<p>However, some of the box&#39;s circuitry was analog, and these modules were harder to decipher,
especially the circuitry that encoded the binary output as a phase-shift keying (PSK) signal.
Digital data could not be transmitted directly to the spacecraft, but needed to be encoded as an analog waveform for radio transmission.
In particular, the digital up-data message was encoded using phase-shift keying (PSK), flipping a 2-kilohertz sine wave to indicate a 0 or a 1.
In other words, a phase of 0° indicated a 1 bit while a phase of 180° represented a 0 bit.<span id="fnref:transmission"><a href="#fn:transmission">1</a></span></p>
<p><a href="https://static.righto.com/images/apollo-module39/psk.jpg"><img alt="This vintage diagram shows how a binary signal is encoded as an audio signal using phase-shift keying (PSK). &#34;kc&#34; indicataes kilocycles; the unit &#34;Hertz&#34; was made the standard in 1960 but &#34;cycles&#34; remained for years. " height="375" src="https://static.righto.com/images/apollo-module39/psk-w500.jpg" title="This vintage diagram shows how a binary signal is encoded as an audio signal using phase-shift keying (PSK). &#34;kc&#34; indicataes kilocycles; the unit &#34;Hertz&#34; was made the standard in 1960 but &#34;cycles&#34; remained for years. " width="500"/></a></p><p>This vintage diagram shows how a binary signal is encoded as an audio signal using phase-shift keying (PSK). &#34;kc&#34; indicataes kilocycles; the unit &#34;Hertz&#34; was made the standard in 1960 but &#34;cycles&#34; remained for years. </p>
<p>The up-data test box required two boards to perform the PSK modulation and inconveniently a couple of key components (probably high-quality tunable inductors) had
been removed when the box was scrapped, making it hard to understand the circuitry.
One module sat at the heart of the PSK circuitry, helping to shape the square-wave signals into smooth sine waves. 
This module had the label &#34;-3.9V&#34; and sure enough it produced -3.9 volts, but it contained additional mysterious circuits (and unexpectedly the -3.9 volt output wasn&#39;t used).
The mystery circuits appeared to be resistor-capacitor networks. CuriousMarc has a vintage HP resistor-inductor-capacitor meter, capable of measuring series or parallel circuits, but it clicked and flashed its lights unsuccessfully before giving up on the -3.9V module.</p>
<p><a href="https://static.righto.com/images/apollo-module39/board-a2.jpg"><img alt="The &#34;=3.9V&#34; module is in the center of this board. The module has been removed from the socket to make its label visible. The large black rectangle is a transformer. Selecting a particular winding provides the phase inversion for PSK." height="443" src="https://static.righto.com/images/apollo-module39/board-a2-w500.jpg" title="The &#34;=3.9V&#34; module is in the center of this board. The module has been removed from the socket to make its label visible. The large black rectangle is a transformer. Selecting a particular winding provides the phase inversion for PSK." width="500"/></a></p><p>The &#34;=3.9V&#34; module is in the center of this board. The module has been removed from the socket to make its label visible. The large black rectangle is a transformer. Selecting a particular winding provides the phase inversion for PSK.</p>
<p>We figured that X-rays might reveal the secrets of the module and John McMaster kindly agreed to X-ray the module.
The photo below gives an X-ray view of the module from the side, showing the internal components and the pins at the bottom.
The module&#39;s plastic packaging is visible as a ghostly gray, not blocking X-rays to the extent of the metal wiring.
Two printed-circuit boards are visible, one at the top and one at the bottom, with components mounted vertically,
a technique known as <a href="https://en.wikipedia.org/wiki/Printed_circuit_board#Cordwood_construction">cordwood construction</a>.
This construction was used in the 1960s when dense packing of components was required, with the cylindrical components stacked together like wooden logs.</p>
<p><a href="https://static.righto.com/images/apollo-module39/xray-side.jpg"><img alt="X-ray image of the module from the side. Composite of three images." height="351" src="https://static.righto.com/images/apollo-module39/xray-side-w600.jpg" title="X-ray image of the module from the side. Composite of three images." width="600"/></a></p><p>X-ray image of the module from the side. Composite of three images.</p>
<p>Some of the components have distinctive appearances in their X-ray images. The carbon composition resistors are gray cylinders with leads.<span id="fnref:resistor"><a href="#fn:resistor">2</a></span>
The Zener diode&#39;s internal construction is visible as a ghostly S-shaped spring, as shown below. The opaque cylinders are capacitors, probably with rolled plates blocking the X-rays.
The U-shaped rectangular component near the left is a capacitor, probably a metalized film capacitor.
The diagram below compares X-ray images and physical cross-sections of Zener diodes and resistors.</p>
<p><a href="https://static.righto.com/images/apollo-module39/comparison.jpg"><img alt="X-ray images and cross-sections of Zener diodes and carbon composition resistors. The cross-section components are similar but not identical to the X-ray components. Cross-section photos copyright Eric Schlaepfer and Windell Oskay." height="247" src="https://static.righto.com/images/apollo-module39/comparison-w600.jpg" title="X-ray images and cross-sections of Zener diodes and carbon composition resistors. The cross-section components are similar but not identical to the X-ray components. Cross-section photos copyright Eric Schlaepfer and Windell Oskay." width="600"/></a></p><p>X-ray images and cross-sections of Zener diodes and carbon composition resistors. The cross-section components are similar but not identical to the X-ray components. Cross-section photos copyright Eric Schlaepfer and Windell Oskay.</p>
<p>An X-ray image from the bottom of the module provides a different perspective.
The pins are at the top and bottom of the image, slightly angled with circles at each end where they are connected to the circuit boards. 
The cylindrical components show up as circles: larger circles for the capacitors, and smaller circles for the resistors.
The important feature of this viewpoint is that it shows the PCB connections between the components, although there is inconvenient ambiguity about whether a trace is on the
top or the bottom circuit board. The image also reveals mysterious text such as J65 and H66. These are probably labels etched into the copper of the circuit boards for
identification.</p>
<p><a href="https://static.righto.com/images/apollo-module39/xray-bottom.jpg"><img alt="X-ray image of the module from the bottom. Composite of three images." height="254" src="https://static.righto.com/images/apollo-module39/xray-bottom-w600.jpg" title="X-ray image of the module from the bottom. Composite of three images." width="600"/></a></p><p>X-ray image of the module from the bottom. Composite of three images.</p>
<p>A tilted view of the module helps to resolve the ambiguity, separating traces on the top circuit board from traces on the bottom circuit board.
It still took me some pondering to sort out the internal structure. (A CT scan would figure out the 3-D representation automatically, but this was a regular 2-D X-ray machine.)</p>
<p><a href="https://static.righto.com/images/apollo-module39/xray-tilted.jpg"><img alt="Tilted X-ray image of the module." height="297" src="https://static.righto.com/images/apollo-module39/xray-tilted-w400.jpg" title="Tilted X-ray image of the module." width="400"/></a></p><p>Tilted X-ray image of the module.</p>
<p>The 3-D model below shows my interpretation of the X-rays images. The module&#39;s 13 pins are connected to both the top and bottom circuit boards, as are the cylindrical components.
(The square capacitor is an exception, with both connections to the top board.)
The traces on the circuit boards create the circuit.</p>
<p><a href="https://static.righto.com/images/apollo-module39/module-labeled.jpg"><img alt="A 3-D representation of the interior of the module, created with OpenSCAD. I don&#39;t guarantee that it&#39;s 100% accurate." height="325" src="https://static.righto.com/images/apollo-module39/module-labeled-w500.jpg" title="A 3-D representation of the interior of the module, created with OpenSCAD. I don&#39;t guarantee that it&#39;s 100% accurate." width="500"/></a></p><p>A 3-D representation of the interior of the module, created with OpenSCAD. I don&#39;t guarantee that it&#39;s 100% accurate.</p>
<p>I created the schematic diagram below to match the X-ray images. 
Prior to the X-rays, we had figured out most of the schematic by probing the module, but there were a few surprises.
The most important discovery was the series-parallel structure of R1, C1, and C2, where we had only expected a single resistor and capacitor.<span id="fnref:r6"><a href="#fn:r6">3</a></span>
(This complex topology is why CuriousMarc&#39;s Hewlett-Packard device was unable to determine the capacitance.)
Another important X-ray observation was that the construction of C2 was different from the other capacitors, so it probably had a very different capacitance, which turned out to be nanofarads vs microfarads.
Once I understood the circuit topology, I could probe the circuit with signals of different frequencies and determine the approximate component values.</p>
<p><a href="https://static.righto.com/images/apollo-module39/schematic.jpg"><img alt="A schematic diagram of the module. Component values are from curve-fitting to oscilloscope traces, so they&#39;re probably off by at least 10%." height="263" src="https://static.righto.com/images/apollo-module39/schematic-w400.jpg" title="A schematic diagram of the module. Component values are from curve-fitting to oscilloscope traces, so they&#39;re probably off by at least 10%." width="400"/></a></p><p>A schematic diagram of the module. Component values are from curve-fitting to oscilloscope traces, so they&#39;re probably off by at least 10%.</p>
<p>We&#39;re still developing a rigorous explanation of the module&#39;s function in the box.
To summarize, the module helps convert 1-kilohertz and 2-kilohertz square waves into sine waves to produce the PSK output.
Through trial and error, CuriousMarc determined the right inductors to make the circuit resonate at these frequencies.
The R-C circuits in the module pass a small &#34;kick&#34; when the square wave switches, enough to keep the resonance going, but not so big that it distorts the sine wave.
Strangely, the eponymous -3.9V Zener reference isn&#39;t used.</p>
<h2>Conclusion</h2>
<p>The X-ray images cleared up several mysteries about the modules. 
First, we learned that the modules used cordwood construction, rather than a single PCB or point-to-point wiring.
Next, the X-rays revealed a couple of unexpected components and helped us figure out the circuit technology.
Finally, we could see the internal structure of some components, which we weren&#39;t expecting to be visible.
The main lesson I learned for future X-rays is to take shots from multiple angles to help resolve 3-D ambiguities.</p>
<p>I&#39;m curious about whether these Motorola modules were part of a comprehensive prototyping product.
We&#39;ve looked at a lot of Apollo hardware and have never seen these modules elsewhere. I haven&#39;t been able to find any reference to them.
The construction seems like a flexible system designed for prototyping; the modules, the circuit boards, the plastic frames to hold them, the connectors, and the chassis
all seem designed to work together.
It gives the impression of a well-thought-out system for building electronic hardware in the 1960s, but apparently it vanished without a trace (except for this box).
If any readers know more about these modules, please let me know.</p>
<p>As for the -3.9V module specifically,
what was the original purpose of this module and why did the designers use it in the up-data test box?
I can understand selling logic gates and flip flops as generic components, but this module seems much too specialized to be a standard product.
On the other hand, a custom module would just require new PCBs—a small investment compared to designing a new integrated circuit—so
producing custom modules seems very practical.
But that raises the question of why they would custom-design a -3.9 volt module for the up-data test box and then not use its Zener circuit.
My current hypothesis is that the -3.9 volt module was designed for an earlier revision of the up-data test box but that functionality turned out to be not used.</p>
<p>If you want more background on the Up-data Test Box, I have some Twitter threads:
<a href="https://twitter.com/kenshirriff/status/1432411774985195527">power-up</a>,
<a href="https://twitter.com/kenshirriff/status/1434947848605290497">modules</a>,
<a href="https://twitter.com/kenshirriff/status/1434245713651658752">paper tape reader</a>, and
<a href="https://twitter.com/kenshirriff/status/1511106558930817030">clock circuit</a>.
Also see CuriousMarc&#39;s video on the box:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/VReePQJRRI0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<p>We plan to connect the up-data test box to the up-data link box and see if they work together.
Then, we hope to create the full signal path: the up-data test box to a transmitter, and then the S-band transponder to the up-data link box, so we can transmit messages
via radio (albeit over a few feet rather than to the Moon).
I announce my latest blog posts on Twitter, so follow me <a href="https://twitter.com/kenshirriff">@kenshirriff</a> for updates. I also have an <a href="https://www.righto.com/feeds/posts/default">RSS feed</a>.
Many thanks to <a href="https://siliconpr0n.org/">John McMaster</a> for X-raying the module and to Marcel for providing the up-data test box.
Cross-section photos courtesy of Windell Oskay and Eric Schlaepfer, from the upcoming book <a href="https://nostarch.com/open-circuits">Open Circuits</a>, which you should check out.</p>
<h2>Notes and references</h2>


</div></div>
  </body>
</html>
