<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/cryptocode/bio">Original</a>
    <h1>Bio â€“ Experimental Lisp dialect, written in Zig</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/34946442/143932794-213c6eaa-76ca-4f98-985f-345d1fc8e925.png"><img src="https://user-images.githubusercontent.com/34946442/143932794-213c6eaa-76ca-4f98-985f-345d1fc8e925.png" width="100" height="100"/></a></p>
<p dir="auto">Bio is an experimental Lisp dialect similar to Scheme, with an interpreter written in <a href="https://ziglang.org" rel="nofollow">Zig</a></p>
<p dir="auto">Features include macros, garbage collection, error handling, a module facility, destructuring, and a standard library.</p>
<p dir="auto">Example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(filter
    (quicksort &#39;(5 40 1 -3 2) &lt;)
        (Î» (x) (&gt;= x 0)))

(1 2 5 40)"><pre>(filter
    (quicksort <span>&#39;</span>(<span>5</span> <span>40</span> <span>1</span> -3 <span>2</span>) &lt;)
        (Î» (x) (<span>&gt;=</span> x <span>0</span>)))

(<span>1</span> <span>2</span> <span>5</span> <span>40</span>)</pre></div>
<p dir="auto">The core of Bio is lambda expressions, from which the standard library builds syntax like <code>type</code> and <code>fun</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="; Create a composite type. This is sugar for `(var Point (lambda (x y) ... (self)))`
(type Point (x y) 
    (fun area () (* x y)))

; Make an instance of Point
(var pt (Point 5 7))

; Call a member function. All this is just syntax sugar based on a lambda
; returning its own environment.
(print &#34;Area:&#34; (pt (area)) &#39;\n)

Area: 35"><pre><span><span>;</span> Create a composite type. This is sugar for `(var Point (lambda (x y) ... (self)))`</span>
(type Point (x y) 
    (fun area () (<span>*</span> x y)))

<span><span>;</span> Make an instance of Point</span>
(var pt (Point <span>5</span> <span>7</span>))

<span><span>;</span> Call a member function. All this is just syntax sugar based on a lambda</span>
<span><span>;</span> returning its own environment.</span>
(print <span><span>&#34;</span>Area:<span>&#34;</span></span> (pt (area)) <span>&#39;\n</span>)

Area: 35</pre></div>
<p dir="auto">The documentation, like the language, is work in progress. For up-to-date examples, I recommend studying <code>std.lisp</code>, <code>test.lisp</code> and the files in the <code>examples</code> directory.</p>

<ul dir="auto">
<li><a href="#building-and-running">Building and running</a>
<ul dir="auto">
<li><a href="#running-tests">Running tests</a></li>
</ul>
</li>
<li><a href="#language-reference">Language Reference</a>
<ul dir="auto">
<li><a href="#naming-conventions">Naming conventions</a></li>
<li><a href="#intrinsics">Intrinsics</a>
<ul dir="auto">
<li><a href="#nil">nil</a></li>
<li><a href="#t-and-f">#t and #f</a></li>
<li><a href="#-and-value">#! and #value</a></li>
<li><a href="#typename">typename</a></li>
<li><a href="#number-symbol-list-bool-callable-error">number? symbol? list? bool? callable? error?</a></li>
<li><a href="#var-and-define">var and define</a></li>
<li><a href="#vars">vars</a></li>
<li><a href="#set-and-unset">set! and unset!</a></li>
<li><a href="#arithmetic-functions">arithmetic functions</a></li>
<li><a href="#equality">equality</a></li>
<li><a href="#order">order</a></li>
<li><a href="#env-and-gc">env and gc</a></li>
<li><a href="#lambda-and-%CE%BB">fun, lambda and Î»</a></li>
<li><a href="#type">type</a></li>
<li><a href="#macro">macro</a></li>
<li><a href="#macroexpand">macroexpand</a></li>
<li><a href="#self-and-environment-lookups">self and environment lookups</a></li>
<li><a href="#rest">&amp;rest</a></li>
<li><a href="#quote">quote</a></li>
<li><a href="#quasiquote">quasiquote</a></li>
<li><a href="#unquote">unquote</a></li>
<li><a href="#unquote-splicing">unquote-splicing</a></li>
<li><a href="#eval">eval</a></li>
<li><a href="#apply">apply</a></li>
<li><a href="#gensym">gensym</a></li>
<li><a href="#if">if</a></li>
<li><a href="#cond">cond</a></li>
<li><a href="#loop">loop</a></li>
<li><a href="#begin">begin</a></li>
<li><a href="#try">try</a></li>
<li><a href="#error">error</a></li>
<li><a href="#print">print</a></li>
<li><a href="#as">as</a></li>
<li><a href="#list">list</a></li>
<li><a href="#append">append</a></li>
<li><a href="#range">range</a></li>
<li><a href="#len">len</a></li>
<li><a href="#string">string</a></li>
<li><a href="#import">import</a></li>
<li><a href="#assert">assert</a></li>
<li><a href="#exit">exit</a></li>
<li><a href="#debug-verbose">debug-verbose</a></li>
<li><a href="#mathpi-and-mathe">math.pi and math.e</a></li>
<li><a href="#mathfloor">math.floor</a></li>
<li><a href="#stringsplit">string.split</a></li>
</ul>
</li>
<li><a href="#standard-library">Standard library</a>
<ul dir="auto">
<li><a href="#car-cdr-caar-cadr-cddr-caddr-last-nth">car, cdr, caar, cadr, cddr, caddr, last, nth</a></li>
<li><a href="#cons">cons</a></li>
<li><a href="#nil-1">nil?</a></li>
<li><a href="#atom">atom?</a></li>
<li><a href="#bool">bool?</a></li>
<li><a href="#relational-functions">relational functions</a></li>
<li><a href="#logical-functions">logical functions</a></li>
<li><a href="#let-macro">let macro</a></li>
<li><a href="#filter">filter</a></li>
<li><a href="#map">map</a></li>
<li><a href="#quicksort">quicksort</a></li>
<li><a href="#while-macro">while macro</a></li>
<li><a href="#listiterate-and-each">list.iterate and each</a></li>
<li><a href="#reduce-with">reduce-with</a></li>
<li><a href="#each-pair">each-pair</a></li>
<li><a href="#matrix-functions">matrix functions</a></li>
<li><a href="#hashmap">hashmap</a></li>
<li><a href="#ioread-number">io.read-number</a></li>
<li><a href="#typename-1">typename</a></li>
<li><a href="#timenow">time.now</a></li>
<li><a href="#double-quote">double-quote</a></li>
<li><a href="#inc-and-dec">inc! and dec!</a></li>
<li><a href="#file-io-and-stdinstdout">file i/o and stdin/stdout</a></li>
<li><a href="#mathodd-matheven-odd-items-and-even-items">math.odd? math.even? odd-items and even-items</a></li>
<li><a href="#mathabs">math.abs</a></li>
<li><a href="#mathpow">math.pow</a></li>
<li><a href="#mathaverage">math.average</a></li>
<li><a href="#mathsqrt">math.sqrt</a></li>
<li><a href="#mathsafe-div">math.safe-div</a></li>
<li><a href="#mathmake-random-generator-and-mathrandom-list">math.make-random-generator and math.random-list</a></li>
<li><a href="#mathfib-and-mathfact">math.fib and math.fact</a></li>
<li><a href="#y">Y</a></li>
</ul>
</li>
<li><a href="#modules">Modules</a>
<ul dir="auto">
<li><a href="#module-example">Module example</a></li>
</ul>
</li>
</ul>
</li>
</ul>

<p dir="auto">Clone the repository and cd to the root directory.</p>
<p dir="auto">You&#39;ll need a recent <a href="https://ziglang.org/download/" rel="nofollow">master build of Zig</a></p>
<p dir="auto">Last tested with Zig version <code>0.13.0-dev.60+d841f84b8</code></p>
<p dir="auto"><strong>Build</strong></p>

<p dir="auto"><strong>Run the REPL:</strong></p>

<p dir="auto"><strong>Run a Bio source file:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="zig-out/bin run examples/triangles.lisp"><pre>zig-out/bin run examples/triangles.lisp</pre></div>
<p dir="auto">You can also use <code>import</code> to evaluate files from the REPL, e.g. <code>(import &#34;examples/albums.lisp&#34;)</code></p>

<p dir="auto">The test suite in <code>test.lisp</code> can be evaluated with <code>zig test src/main.zig</code> or <code>./bio run test.lisp</code></p>

<p dir="auto">A Bio program consists of one or more s-expressions. An s-expression is recursively defined as being either</p>
<ol dir="auto">
<li>an atom</li>
<li>a list, which may contain lists and atoms</li>
</ol>
<p dir="auto">An atom is either a 64-bit floating point number, or a symbol. A symbol is any sequence of utf8 code points that is not a valid number. Symbols serve as strings when the symbol is enclosed in double-quotes, such as <code>&#34;This is a symbol&#34;</code>. Bio does not have a separate string type; the term string is simply used to denote a symbol serving as a string.</p>

<ul dir="auto">
<li>Predicates have a question mark suffix, such as <code>atom?</code></li>
<li>Destructive actions have an exclamation point suffix, such as <code>set!</code></li>
<li>Sentinels are prefixed with an ampersand, such as <code>&amp;rest</code></li>
<li>Symbols with special meaning are prefixed <code>#</code>, such as <code>#t</code></li>
<li>Identifiers are kebab-case, while composite types such as modules are PascalCase</li>
</ul>

<p dir="auto">Intrinsics are built-in functions, macros, and symbols implemented by the interpreter. They are building blocks for the standard library and user programs.</p>

<p dir="auto">A symbol representing the absence of a value. Note that <code>nil</code> and <code>&#39;()</code> are considered equal.</p>

<p dir="auto">Symbols representing true and false, respectively. Note that <code>nil</code> coerces to <code>#f</code>.</p>

<p dir="auto">A symbol representing the last top-level expression evaluation.</p>
<p dir="auto">Example:</p>


<p dir="auto">The <code>#value</code> symbol contains the value returned by a <em>tried</em> expression. This usually removes the need to use a temporary variable when you need to both check for errors <em>and</em> use the result.</p>
<p dir="auto">The <code>#!</code> symbol contains the error after a <code>try</code> expression. If no error occurs, this is set to <code>nil</code>.</p>
<div data-snippet-clipboard-copy-content="(try (math.safe-div (io.read-number) (io.read-number))
    (print &#34;The doubled result is: &#34; (* 2 #value))
    (print &#34;Failed: &#34; #!))"><pre><code>(try (math.safe-div (io.read-number) (io.read-number))
    (print &#34;The doubled result is: &#34; (* 2 #value))
    (print &#34;Failed: &#34; #!))
</code></pre></div>

<p dir="auto">The &#39;typename&#39; functions returns a string representation of the type. The most specific classification is returned, so <code>(typename #t)</code> is &#34;bool&#34;, even though #t is also a symbol.</p>
<div dir="auto" data-snippet-clipboard-copy-content="(typename &#39;a)
&#34;symbol&#34;

(typename math.pi)
&#34;number&#34;

(typename #t)
&#34;bool&#34;

(typename &#39;(a b c))
&#34;list&#34;

(typename +)
&#34;function&#34;"><pre>(typename <span>&#39;a</span>)
<span><span>&#34;</span>symbol<span>&#34;</span></span>

(typename math.pi)
<span><span>&#34;</span>number<span>&#34;</span></span>

(typename <span>#t</span>)
<span><span>&#34;</span>bool<span>&#34;</span></span>

(typename <span>&#39;</span>(a b c))
<span><span>&#34;</span>list<span>&#34;</span></span>

(typename +)
<span><span>&#34;</span>function<span>&#34;</span></span></pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">number? symbol? list? bool? callable? error?</h3><a id="user-content-number-symbol-list-bool-callable-error" aria-label="Permalink: number? symbol? list? bool? callable? error?" href="#number-symbol-list-bool-callable-error"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Predicates to determine expression types. There&#39;s also an <code>atom?</code> predicate in the standard library.</p>
<p dir="auto">These all return #t</p>
<div dir="auto" data-snippet-clipboard-copy-content="(number? -5.7)
(number? x)
(symbol? &#39;x)
(symbol? #t)
(bool? #t)
(bool? #f)
(list? &#39;(abc))
(callable? +)
(error? (math.safe-div 4 0))"><pre>(<span>number?</span> -5.7)
(<span>number?</span> x)
(<span>symbol?</span> <span>&#39;x</span>)
(<span>symbol?</span> <span>#t</span>)
(bool? <span>#t</span>)
(bool? <span>#f</span>)
(<span>list?</span> <span>&#39;</span>(abc))
(callable? +)
(error? (math.safe-div <span>4</span> <span>0</span>))</pre></div>

<p dir="auto">&#39;var&#39; creates a variable binding in the <em>current</em> environment. The binding will fail if it already exists in the current environment. The <code>define</code> function is just an alias to <code>var</code></p>
<p dir="auto">Variable names can be any utf8 sequence that doesn&#39;t start with a number, &#34; and &#39;. Variable names are case-sensitive.</p>
<div dir="auto" data-snippet-clipboard-copy-content="(var x 5)
(define y 5)
(var name (io.read-line))
(var double (lambda (val) (* 2 val)))
(var ðŸ˜€ &#34;Smiley&#34;)
(print ðŸ˜€)
&#34;Smiley&#34;"><pre>(var x <span>5</span>)
(<span>define</span> <span>y</span> 5)
(var name (io.read-line))
(var double (<span>lambda</span> (<span>val</span>) (<span>*</span> <span>2</span> val)))
(var ðŸ˜€ <span><span>&#34;</span>Smiley<span>&#34;</span></span>)
(print ðŸ˜€)
<span><span>&#34;</span>Smiley<span>&#34;</span></span></pre></div>
<p dir="auto">Local variables:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(var x 2)
(var y 2)
(var z 2)
(var some-function (lambda (x)

    ; Allowed, y is not in the local scope
    (var y 10)

    ; Not allowed, x is a formal in the same scope
    ; (var x 10)

    (print x y z)
))

&gt; (some-function 3)
3 10 2"><pre>(var x <span>2</span>)
(var y <span>2</span>)
(var z <span>2</span>)
(var some-function (<span>lambda</span> (<span>x</span>)

    <span><span>;</span> Allowed, y is not in the local scope</span>
    (var y <span>10</span>)

    <span><span>;</span> Not allowed, x is a formal in the same scope</span>
    <span><span>;</span> (var x 10)</span>

    (print x y z)
))

&gt; (some-function <span>3</span>)
3 10 2</pre></div>

<p dir="auto">A list can be destructured into variables using <code>vars</code></p>
<div dir="auto" data-snippet-clipboard-copy-content="(var stuff &#39;(1 2 3))
(vars a b c stuff)
(assert (= a 1))
(assert (= b 2))
(assert (= c 3))"><pre>(var stuff <span>&#39;</span>(<span>1</span> <span>2</span> <span>3</span>))
(vars a b c stuff)
(assert (<span>=</span> a <span>1</span>))
(assert (<span>=</span> b <span>2</span>))
(assert (<span>=</span> c <span>3</span>))</pre></div>

<p dir="auto">Changes the value of an existing binding (values themselves are immutable). The binding is searched from current to root scope.</p>
<div dir="auto" data-snippet-clipboard-copy-content="; Define x, then update it
(var x 5)
(set! x 10)

; Be evil and redefine + to mean -
(set! + -)
(+ 10 2)
8

; Remove binding, allowing it to be defined again
(unset! x)
(var x &#39;hey)"><pre><span><span>;</span> Define x, then update it</span>
(var x <span>5</span>)
(<span>set!</span> x <span>10</span>)

<span><span>;</span> Be evil and redefine + to mean -</span>
(<span>set!</span> <span>+</span> -)
(<span>+</span> <span>10</span> <span>2</span>)
8

<span><span>;</span> Remove binding, allowing it to be defined again</span>
(unset! x)
(var x <span>&#39;hey</span>)</pre></div>
<p dir="auto">You can optionally pass a specific environment for the binding being set as the first argument:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(type Point (x y)
    (fun area () (* x y)))

(var pt (Point 5 7))
(print &#34;Area:&#34; (pt (area)) &#39;\n)

Area: 35

; Change x by passing the pt environment to set!
(set! pt x 6)
(print &#34;Area:&#34; (pt (area)) &#39;\n)

Area: 42"><pre>(type Point (x y)
    (fun area () (<span>*</span> x y)))

(var pt (Point <span>5</span> <span>7</span>))
(print <span><span>&#34;</span>Area:<span>&#34;</span></span> (pt (area)) <span>&#39;\n</span>)

Area: 35

<span><span>;</span> Change x by passing the pt environment to set!</span>
(<span>set!</span> pt x <span>6</span>)
(print <span><span>&#34;</span>Area:<span>&#34;</span></span> (pt (area)) <span>&#39;\n</span>)

Area: 42</pre></div>

<p dir="auto">The arithmetic functions work on floating-point numbers. Unlike infix notation, any number of arguments can be given.</p>
<div dir="auto" data-snippet-clipboard-copy-content="(+ -3 5)
2

(/ 2 (* 10 (+ math.pi 2 3 (- 2 3))))
0.028004957675577865

; pi symbol is same as math.pi (tip: this is available with Option+P if you&#39;re on a mac)
(define circumference (Î» (x) (* 2 Ï€ x)))"><pre>(<span>+</span> -3 <span>5</span>)
2

(<span>/</span> <span>2</span> (<span>*</span> <span>10</span> (<span>+</span> math.pi <span>2</span> <span>3</span> (<span>-</span> <span>2</span> <span>3</span>))))
0.028004957675577865

<span><span>;</span> pi symbol is same as math.pi (tip: this is available with Option+P if you&#39;re on a mac)</span>
(<span>define</span> <span>circumference</span> (Î» (x) (<span>*</span> <span>2</span> Ï€ x)))</pre></div>
<p dir="auto">Additional math functions are available in the standard library.</p>

<p dir="auto">The <code>=</code> and <code>~=</code> functions check for exact and approximate equality. The approximate case is only for numeric operands and accepts a third argument to override the tolerance (epsilon is by default 1e-7)</p>
<div dir="auto" data-snippet-clipboard-copy-content="(= x 5)
(= &#39;(1 2 3 4) nums)
(= &#39;(1 3) (odd-items nums))
(~= a b 0.0005)"><pre>(<span>=</span> x <span>5</span>)
(<span>=</span> <span>&#39;</span>(<span>1</span> <span>2</span> <span>3</span> <span>4</span>) nums)
(<span>=</span> <span>&#39;</span>(<span>1</span> <span>3</span>) (odd-items nums))
(~= a b <span>0.0005</span>)</pre></div>
<p dir="auto">Exact equality is implemented in terms of the <code>order</code> function, allowing nested lists to be compared.</p>

<p dir="auto">The <code>order</code> function returns 0, -1, 1 do indicate if the first argument is equal, less than or greater than the second argument. All expression types are supported.</p>
<p dir="auto">Lists are recursively compared. If list lengths differ, the shorter one is considered smaller. Empty lists and <code>nil</code> are considered equal, otherwise <code>nil</code> is always considered smaller.</p>
<div dir="auto" data-snippet-clipboard-copy-content="(order 100 200)
-1

(order &#39;def &#39;abc)
1

(order &#39;(1 2 3) &#39;(0 1 2))
1

(order &#39;(1 2) &#39;(0 1 2))
-1

(order 6 (* 2 3))
0"><pre>(order <span>100</span> <span>200</span>)
-1

(order <span>&#39;def</span> <span>&#39;abc</span>)
1

(order <span>&#39;</span>(<span>1</span> <span>2</span> <span>3</span>) <span>&#39;</span>(<span>0</span> <span>1</span> <span>2</span>))
1

(order <span>&#39;</span>(<span>1</span> <span>2</span>) <span>&#39;</span>(<span>0</span> <span>1</span> <span>2</span>))
-1

(order <span>6</span> (<span>*</span> <span>2</span> <span>3</span>))
0</pre></div>
<p dir="auto">Standard library functions such as <code>&lt;</code> are implemented in terms of <code>order</code>.</p>

<p dir="auto"><code>env</code> prints the content of the current environment.</p>
<div data-snippet-clipboard-copy-content="&gt; (env)
Environment for global: Env@10db4b000
    import = &lt;function&gt;, env *Env@0
    exit = &lt;function&gt;, env *Env@0
    gc = &lt;function&gt;, env *Env@0
    #f = #f, env *Env@0
    #t = #t, env *Env@0
    #? = #t, env *Env@0
    nil = nil, env *Env@0
    ..."><pre><code>&gt; (env)
Environment for global: Env@10db4b000
    import = &lt;function&gt;, env *Env@0
    exit = &lt;function&gt;, env *Env@0
    gc = &lt;function&gt;, env *Env@0
    #f = #f, env *Env@0
    #t = #t, env *Env@0
    #? = #t, env *Env@0
    nil = nil, env *Env@0
    ...
</code></pre></div>
<p dir="auto">The garbage collector runs periodically, though the criteria and extent are intentionally left undefined by this language reference.</p>

<p dir="auto">Creating functions in Bio can be done either with <code>fun</code> or <code>lambda</code>. The <code>fun</code> function is just a convenience macro that expands to a lambda definition.</p>
<div dir="auto" data-snippet-clipboard-copy-content="&gt; (fun square (x) (* x x))
&gt; (square 5)
25"><pre>&gt; (fun square (x) (<span>*</span> x x))
&gt; (square <span>5</span>)
25</pre></div>
<p dir="auto">Below is the equivalent lambda definition:</p>
<div dir="auto" data-snippet-clipboard-copy-content="&gt; (var square (lambda (x) (* x x)))
&gt; (square 5)
25"><pre>&gt; (var square (<span>lambda</span> (<span>x</span>) (<span>*</span> x x)))
&gt; (square <span>5</span>)
25</pre></div>
<p dir="auto">Direct application without binding to a variable:</p>
<div dir="auto" data-snippet-clipboard-copy-content="&gt; ((lambda (x) (* x x)) 5)
25"><pre>&gt; ((<span>lambda</span> (<span>x</span>) (<span>*</span> x x)) <span>5</span>)
25</pre></div>
<p dir="auto">The lambda symbol can be used in place of the lambda identifier</p>
<div dir="auto" data-snippet-clipboard-copy-content="(var doubler (Î» (x) (* 2 x)))"><pre>(var doubler (Î» (x) (<span>*</span> <span>2</span> x)))</pre></div>
<p dir="auto">A lambda invocation has its own environment, and the parent environment is the one that existed when the lambda was defined. In other words, Bio is lexically scoped.</p>

<p dir="auto">A type expression is syntax sugar for functions returning their own environment. This is useful when making composite types.</p>
<div dir="auto" data-snippet-clipboard-copy-content="(type Point (x y)
    (fun area () (* x y))
)

(var pt (Point 5 7))
(print &#34;Area:&#34; (pt (area)) &#39;\n)

; Change x by passing the pt environment to set!
(set! pt x 6)
(print &#34;Area:&#34; (pt (area)) &#39;\n)"><pre>(type Point (x y)
    (fun area () (<span>*</span> x y))
)

(var pt (Point <span>5</span> <span>7</span>))
(print <span><span>&#34;</span>Area:<span>&#34;</span></span> (pt (area)) <span>&#39;\n</span>)

<span><span>;</span> Change x by passing the pt environment to set!</span>
(<span>set!</span> pt x <span>6</span>)
(print <span><span>&#34;</span>Area:<span>&#34;</span></span> (pt (area)) <span>&#39;\n</span>)</pre></div>
<p dir="auto">Composite types can contain local variables and other functions, just like regular lambda expression.</p>

<p dir="auto">This function creates a macro.</p>
<p dir="auto">Unlike lambdas, arguments are not evaluated when the macro is invoked. Instead, they&#39;re evaluated if and when the body does so. Note
that eager evaluation of macro arguments can be forced by placed <code>&amp;eval</code> in front of the formal parameter.</p>
<p dir="auto">When the macro is invoked, the body is evaluated. The returned expression (which represents Bio code) is then evaluated as the final result.</p>
<div dir="auto" data-snippet-clipboard-copy-content="(var print-with-label (macro (label &amp;rest values)
	`(print label &#34;: &#34; ,@values)
))

(print-with-label Primes 2 3 5 7)

Primes: 2 3 5 7"><pre>(var print-with-label (<span>macro</span> (label &amp;rest values)
	`(print label <span><span>&#34;</span>: <span>&#34;</span></span> ,@values)
))

(print-with-label Primes <span>2</span> <span>3</span> <span>5</span> <span>7</span>)

Primes: 2 3 5 7</pre></div>
<p dir="auto">A macro invocation has its own environment, and the parent environment is the current one. This is different from lambdas whose parent environment is the one in which the lambda was defined.</p>

<p dir="auto">You can stop the evaluation of the code returned from a macro by wrapping it in <code>macroexpand</code></p>
<p dir="auto">Consider a typical swap macro:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(var swap (macro (a b)
    `(let ((temp ,a))
       (set! ,a ,b)
       (set! ,b temp))))"><pre>(var swap (<span>macro</span> (a b)
    `(<span>let</span> ((temp ,a))
       (<span>set!</span> ,a ,b)
       (<span>set!</span> ,b temp))))</pre></div>
<p dir="auto">Here&#39;s a typical usage example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(let ((x 3) (y 7))
    (swap x y)
    (print &#34;Swapped:&#34; x y &#34;\n&#34;)
)

Swapped: 7 3"><pre>(<span>let</span> ((x <span>3</span>) (y <span>7</span>))
    (swap x y)
    (print <span><span>&#34;</span>Swapped:<span>&#34;</span></span> x y <span><span>&#34;</span><span>\n</span><span>&#34;</span></span>)
)

Swapped: 7 3</pre></div>
<p dir="auto">But now we wanna see how the macro is expanded as code instead:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(let ((x 5) (y 8))
    (print &#34;Macro expansion:&#34; (macroexpand (swap x y)) &#34;\n&#34;)
)

Macro expansion: (let ((temp x)) (set! x y) (set! y temp))"><pre>(<span>let</span> ((x <span>5</span>) (y <span>8</span>))
    (print <span><span>&#34;</span>Macro expansion:<span>&#34;</span></span> (macroexpand (swap x y)) <span><span>&#34;</span><span>\n</span><span>&#34;</span></span>)
)

Macro expansion: (<span>let</span> ((temp x)) (<span>set!</span> x y) (<span>set!</span> y temp))</pre></div>
<p dir="auto">Of course, you can store away the expansion for later invocation, or just evaluate the expansion directly:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(let ((x 5) (y 8))
    (eval (macroexpand (swap x y)))
    (print &#34;Swapped:&#34; x y &#34;\n&#34;)
)

Swapped: 8 5"><pre>(<span>let</span> ((x <span>5</span>) (y <span>8</span>))
    (eval (macroexpand (swap x y)))
    (print <span><span>&#34;</span>Swapped:<span>&#34;</span></span> x y <span><span>&#34;</span><span>\n</span><span>&#34;</span></span>)
)

Swapped: 8 5</pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">self and environment lookups</h3><a id="user-content-self-and-environment-lookups" aria-label="Permalink: self and environment lookups" href="#self-and-environment-lookups"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The <code>self</code> function returns the current environment as an expression. This can then be used as a function to perform lookups in that environment. This enables composite data types with their own functions, as well as modules. The distinction is purely conceptual.</p>
<p dir="auto">A top-level <code>(self)</code> call will return the root environment as an expression:</p>
<div dir="auto" data-snippet-clipboard-copy-content="&gt; (self)
&lt;env&gt;

&gt; ((self) +)
&lt;function&gt;

&gt; ((self) (+ 1 2))
3

&gt; (((self) +) 1 2)
3"><pre>&gt; (self)
&lt;env&gt;

&gt; ((self) +)
&lt;function&gt;

&gt; ((self) (<span>+</span> <span>1</span> <span>2</span>))
3

&gt; (((self) +) <span>1</span> <span>2</span>)
3</pre></div>
<p dir="auto">As you can see, when an environment is placed in the first position of a list, it changes which environment the following argument is looked up in.</p>
<p dir="auto">The argument can either be a symbol, or a list which will be interpreted in the context of the new environment.</p>
<p dir="auto">Use cases of <code>self</code> include modules, composite data types, polymorphic behavior, and enabling duck-typed interfaces/protocols.</p>
<p dir="auto">See <a href="#modules">Modules</a> for more information and an example.</p>

<p dir="auto">A sentinel symbol causing the rest of the arguments to be delivered as a single list argument. This enables variadic functions and macros.</p>

<p dir="auto">The <code>quote</code> function and the <code>&#39;</code> shorthand returns the argument unevaluated.</p>
<div dir="auto" data-snippet-clipboard-copy-content="&gt; (quote a)
a

&gt; &#39;a
a

&gt; &#39;(a b 1 2)
(a b 1 2)
"><pre>&gt; (<span>quote</span> <span>a</span>)
a

&gt; <span>&#39;a</span>
a

&gt; <span>&#39;</span>(a b <span>1</span> <span>2</span>)
(a b <span>1</span> <span>2</span>)
</pre></div>

<p dir="auto">The <code>quasiquote</code> function and the ` shorthand returns the argument unevaluated. Unlike <code>quote</code>, however, it allows arguments to be selectively evaluated using <code>unquote</code> and <code>unquote-splicing</code></p>
<div dir="auto" data-snippet-clipboard-copy-content="; Evaluate one of the list items
&gt; (quasiquote (1 2 (unquote (+ 1 2)) 4))
(1 2 3 4)

; Same thing using shorthand notation
&gt; `(1 2 ,(+ 1 2) 4)
(1 2 3 4)

; Use unquote-splicing to make a larger list of primes:
&gt; (var primes &#39;(2 3 5 7 11 13))
&gt; `(,@primes 17 19 23)
(2 3 5 7 11 13 17 19 23)"><pre><span><span>;</span> Evaluate one of the list items</span>
&gt; (<span>quasiquote</span> (<span>1</span> <span>2</span> (<span>unquote</span> (<span>+</span> <span>1</span> <span>2</span>)) <span>4</span>))
(<span>1</span> <span>2</span> <span>3</span> <span>4</span>)

<span><span>;</span> Same thing using shorthand notation</span>
&gt; `(<span>1</span> <span>2</span> ,(<span>+</span> <span>1</span> <span>2</span>) <span>4</span>)
(<span>1</span> <span>2</span> <span>3</span> <span>4</span>)

<span><span>;</span> Use unquote-splicing to make a larger list of primes:</span>
&gt; (var primes <span>&#39;</span>(<span>2</span> <span>3</span> <span>5</span> <span>7</span> <span>11</span> <span>13</span>))
&gt; `(,@primes <span>17</span> <span>19</span> <span>23</span>)
(<span>2</span> <span>3</span> <span>5</span> <span>7</span> <span>11</span> <span>13</span> <span>17</span> <span>19</span> <span>23</span>)</pre></div>
<p dir="auto">Quasi quotation is commonly used to make templates in macros, but it has uses in regular functions as well.</p>

<p dir="auto">In the context of a quasiquote, evaluate the argument. The shorthand version is <code>,</code></p>

<p dir="auto">In the context of a quasiquote, evaluate the elements of the list and place the result in the enclosing list. The shorthand version is <code>,@</code></p>

<p dir="auto">Evaluates all arguments, leaving the last evaluation as the result. If quote and quasiquote expressions are encountered, these are unquoted before evaluation.</p>
<div dir="auto" data-snippet-clipboard-copy-content="(eval &#39;(+ 1 2))
3

(var expr &#39;(* 2 3))"><pre>(eval <span>&#39;</span>(<span>+</span> <span>1</span> <span>2</span>))
3

(var expr <span>&#39;</span>(<span>*</span> <span>2</span> <span>3</span>))</pre></div>

<p dir="auto">Evaluates the given function with the given argument list. The last argument must be a list argument. Any preceding arguments are prepended to that list. This means that <code>(apply + 1 &#39;(2 3))</code> is equivalent to <code>(apply + &#39;(1 2 3))</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="&gt; (apply + 5 2 1 &#39;(10 20))
38

&gt; (var list-of-numbers &#39;(1 2 3 4))
&gt; (apply * list-of-numbers)
24

&gt; +
&lt;function&gt;

&gt; (apply #? &#39;(5 2))
7"><pre>&gt; (<span>apply</span> <span>+</span> <span>5</span> <span>2</span> <span>1</span> <span>&#39;</span>(<span>10</span> <span>20</span>))
38

&gt; (var list-of-numbers <span>&#39;</span>(<span>1</span> <span>2</span> <span>3</span> <span>4</span>))
&gt; (<span>apply</span> <span>*</span> list-of-numbers)
24

&gt; <span>+</span>
&lt;function&gt;

&gt; (<span>apply</span> #? <span>&#39;</span>(<span>5</span> <span>2</span>))
7</pre></div>
<p dir="auto">Using <code>apply</code> is mostly useful when arguments are given as a list and the function at hand expects arguments to be passed individually.</p>

<p dir="auto">Generates a unique symbol.</p>
<div dir="auto" data-snippet-clipboard-copy-content="&gt; (gensym)
gensym_1

&gt; (gensym)
gensym_2"><pre>&gt; (gensym)
gensym_1

&gt; (gensym)
gensym_2</pre></div>

<p dir="auto">The <code>if</code> expression evaluates the first argument. If true, then the second argument is evaluated, otherwise the third (optional) argument is evaluated. Each branch can have multiple expressions using constructs such as <code>begin</code> or <code>let</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="(if (&lt; x 10) &#39;Yes &#39;No)

(var res (if (math.odd? x) &#39;Odd &#39;Even))"><pre>(<span>if</span> (<span>&lt;</span> x <span>10</span>) <span>&#39;Yes</span> <span>&#39;No</span>)

(var res (<span>if</span> (math.odd? x) <span>&#39;Odd</span> <span>&#39;Even</span>))</pre></div>
<p dir="auto">Here&#39;s a list of if expressions from <code>examples/fizzbuzz-if.lisp</code>, none of which have an else branch:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(if (= 0 x) (print &#34;Fizz&#34;))
(if (= 0 y) (print &#34;Buzz&#34;))
(if (and (!= 0 x) (!= 0 y)) (print i))"><pre>(<span>if</span> (<span>=</span> <span>0</span> x) (print <span><span>&#34;</span>Fizz<span>&#34;</span></span>))
(<span>if</span> (<span>=</span> <span>0</span> y) (print <span><span>&#34;</span>Buzz<span>&#34;</span></span>))
(<span>if</span> (<span>and</span> (!= <span>0</span> x) (!= <span>0</span> y)) (print i))</pre></div>

<p dir="auto">The <code>cond</code> expression is useful when if/else conditions lead to deep nesting. It takes a variable number of predicate/body pairs, and ends with an else clause. The else clause is <em>required</em> and consists only of the body. It must be the last entry in the cond expression.</p>
<p dir="auto">Here&#39;s the cond expression from <code>examples/fizzbuzz-cond.lisp</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(cond
    ((and (= 0 x) (= 0 y)) (print &#34;FizzBuzz&#34; &#34;\n&#34;))
    ((= 0 x) (print &#34;Fizz&#34; &#34;\n&#34;))
    ((= 0 y) (print &#34;Buzz&#34; &#34;\n&#34;))
    ((print i &#34;\n&#34;))
)"><pre>(<span>cond</span>
    ((<span>and</span> (<span>=</span> <span>0</span> x) (<span>=</span> <span>0</span> y)) (print <span><span>&#34;</span>FizzBuzz<span>&#34;</span></span> <span><span>&#34;</span><span>\n</span><span>&#34;</span></span>))
    ((<span>=</span> <span>0</span> x) (print <span><span>&#34;</span>Fizz<span>&#34;</span></span> <span><span>&#34;</span><span>\n</span><span>&#34;</span></span>))
    ((<span>=</span> <span>0</span> y) (print <span><span>&#34;</span>Buzz<span>&#34;</span></span> <span><span>&#34;</span><span>\n</span><span>&#34;</span></span>))
    ((print i <span><span>&#34;</span><span>\n</span><span>&#34;</span></span>))
)</pre></div>

<p dir="auto">The <code>loop</code> function loops from n to m, or until &amp;break is encountered</p>
<p dir="auto">The current iteration is optionally available in the given induction variable.</p>
<div dir="auto" data-snippet-clipboard-copy-content="; loops 10 times
(loop &#39;(0 10) (print &#39;Hi\n))

; loops 10 times counting down
(loop &#39;(10 0) (print &#39;Hi\n))

; loops 10 times, current iteration count goes into the idx variable
; the current iteration is available in the idx variable (you can call it anything)
(loop &#39;idx &#39;(0 10) (print &#34;Hi #&#34; idx &#34;\n&#34;))

; loops forever until &amp;break is encountered
(loop &#39;idx &#39;() (print &#34;Hi #&#34; idx &#34;\n&#34;) (if (= idx 4) &amp;break))"><pre><span><span>;</span> loops 10 times</span>
(loop <span>&#39;</span>(<span>0</span> <span>10</span>) (print <span>&#39;Hi</span>\n))

<span><span>;</span> loops 10 times counting down</span>
(loop <span>&#39;</span>(<span>10</span> <span>0</span>) (print <span>&#39;Hi</span>\n))

<span><span>;</span> loops 10 times, current iteration count goes into the idx variable</span>
<span><span>;</span> the current iteration is available in the idx variable (you can call it anything)</span>
(loop <span>&#39;idx</span> <span>&#39;</span>(<span>0</span> <span>10</span>) (print <span><span>&#34;</span>Hi #<span>&#34;</span></span> idx <span><span>&#34;</span><span>\n</span><span>&#34;</span></span>))

<span><span>;</span> loops forever until &amp;break is encountered</span>
(loop <span>&#39;idx</span> <span>&#39;()</span> (print <span><span>&#34;</span>Hi #<span>&#34;</span></span> idx <span><span>&#34;</span><span>\n</span><span>&#34;</span></span>) (<span>if</span> (<span>=</span> idx <span>4</span>) &amp;break))</pre></div>

<p dir="auto">Evaluates a list of expressions and returns the last one as the result. This is useful when more than one expression needs to be evaluated, like in the branches of the <code>if</code> function:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(if (&lt; i 10)
    (begin
        (var x 5)
        (set! x (+ x 1))
        (print (* x 2))
    )
)

12"><pre>(<span>if</span> (<span>&lt;</span> i <span>10</span>)
    (<span>begin</span>
        (var x <span>5</span>)
        (<span>set!</span> x (<span>+</span> x <span>1</span>))
        (print (<span>*</span> x <span>2</span>))
    )
)

12</pre></div>

<p dir="auto">The <code>try</code> function evaluates the first argument. If the result is not an error expression, then the second argument is evaluated (the success branch), otherwise the third argument is evaluated (the error branch). The error branch is optional (in which case <code>nil</code> will be returned; add an error branch if you want to propagate the error.)</p>
<p dir="auto">It&#39;s often necessary to know the value of the tried expression if it succeeds. This can be done using an intermediary variable, or by looking up the <code>#value</code> symbol:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(try (math.safe-div 6 2)
    (if (= #value 3)
        (print &#34;As expected!\n&#34;)
    )
)"><pre>(try (math.safe-div <span>6</span> <span>2</span>)
    (<span>if</span> (<span>=</span> #value <span>3</span>)
        (print <span><span>&#34;</span>As expected!<span>\n</span><span>&#34;</span></span>)
    )
)</pre></div>
<p dir="auto">The error expression is available through the <code>#!</code> symbol, used here by the error branch:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(try (math.safe-div 6 2)
    (if (= #value 3)
        (print &#34;As expected!\n&#34;)
    )
    (print &#34;Could not divide: &#34; #!)
)"><pre>(try (math.safe-div <span>6</span> <span>2</span>)
    (<span>if</span> (<span>=</span> #value <span>3</span>)
        (print <span><span>&#34;</span>As expected!<span>\n</span><span>&#34;</span></span>)
    )
    (print <span><span>&#34;</span>Could not divide: <span>&#34;</span></span> #!)
)</pre></div>
<p dir="auto">A function that may fail does not have to be used in a try function:</p>
<div dir="auto" data-snippet-clipboard-copy-content="&gt; (var res (math.safe-div x y))
3.5

&gt; (math.safe-div x 0)
Division by zero"><pre>&gt; (var res (math.safe-div x y))
3.5

&gt; (math.safe-div x <span>0</span>)
Division by zero</pre></div>
<p dir="auto">You can also use <code>try</code> after the fact:</p>
<div dir="auto" data-snippet-clipboard-copy-content="&gt; (var res (math.safe-div x 0))
&gt; (try (math.safe-div 1 0) #t `(string &#34;Not good: &#34; ,#!))
Not good: Division by zero"><pre>&gt; (var res (math.safe-div x <span>0</span>))
&gt; (try (math.safe-div <span>1</span> <span>0</span>) <span>#t</span> `(string <span><span>&#34;</span>Not good: <span>&#34;</span></span> ,#!))
Not good: Division by zero</pre></div>

<p dir="auto">The <code>error</code> function creates a new error expression.</p>
<div dir="auto" data-snippet-clipboard-copy-content="(var fail-if-ten (lambda (x)
    (if (= x 10)
        (error &#34;10 is not allowed&#34;)
        #t
    )
))

(try (fail-if-ten 10)
    &#34;All good&#34;
    (begin
        (print &#34;Something went terribly wrong!\n&#34;)
        #!
    )
)

Something went terribly wrong!
10 is not allowed"><pre>(var fail-if-ten (<span>lambda</span> (<span>x</span>)
    (<span>if</span> (<span>=</span> x <span>10</span>)
        (error <span><span>&#34;</span>10 is not allowed<span>&#34;</span></span>)
        <span>#t</span>
    )
))

(try (fail-if-ten <span>10</span>)
    <span><span>&#34;</span>All good<span>&#34;</span></span>
    (<span>begin</span>
        (print <span><span>&#34;</span>Something went terribly wrong!<span>\n</span><span>&#34;</span></span>)
        #!
    )
)

Something went terribly wrong!
10 is <span>not</span> allowed</pre></div>
<p dir="auto">Notice how the <code>try</code> expression propagates the error by putting <code>#!</code> as the last expression in the error case.</p>
<p dir="auto">Errors don&#39;t have to be symbols, any expression will do.</p>

<p dir="auto"><code>print</code> prints one or more expressions separated by a space. Combine <code>print</code> with <code>string</code> if you need to print verbatim (without spaces between expressions)</p>
<div dir="auto" data-snippet-clipboard-copy-content="(print &#34;What&#39;s your name?&#34;)
(var name (io.read-line))

(print &#34;What&#39;s your age?&#34;)
(var age (as number (io.read-line)))

(print &#34;Hi&#34; name (if (&gt; age 80) &#34;... you&#39;re quite old&#34; &#34;&#34;))"><pre>(print <span><span>&#34;</span>What&#39;s your name?<span>&#34;</span></span>)
(var name (io.read-line))

(print <span><span>&#34;</span>What&#39;s your age?<span>&#34;</span></span>)
(var age (as number (io.read-line)))

(print <span><span>&#34;</span>Hi<span>&#34;</span></span> name (<span>if</span> (<span>&gt;</span> age <span>80</span>) <span><span>&#34;</span>... you&#39;re quite old<span>&#34;</span></span> <span><span>&#34;</span><span>&#34;</span></span>))</pre></div>
<p dir="auto">IO examples work best if you put them in a file and then use <code>(import &#34;thename.lisp&#34;)</code> or <code>bio run thename.lisp</code></p>
<p dir="auto">See also the <code>io.</code> functions in the standard library.</p>

<p dir="auto">The <code>as</code> function converts an expression from one type to another. If a conversion is not supported, <code>nil</code> is returned.</p>
<p dir="auto">The target conversion is either <code>number</code>, <code>symbol</code>, or <code>list</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="(var age (as number (io.read-line)))
(assert (= &#39;(5) (as list 5)))
(as symbol mynumber)
(set! age (as symbol age))"><pre>(var age (as number (io.read-line)))
(assert (<span>=</span> <span>&#39;</span>(<span>5</span>) (as <span>list</span> <span>5</span>)))
(as symbol mynumber)
(<span>set!</span> age (as symbol age))</pre></div>

<p dir="auto">Creates a new list from its arguments. Quoting can be used to create lists without evaluating the expressions.</p>
<div dir="auto" data-snippet-clipboard-copy-content="&gt; (var x 3)
&gt; (list 1 2 x)
(1 2 3)

&gt; &#39;(1 2 x)
(1 2 x)"><pre>&gt; (var x <span>3</span>)
&gt; (<span>list</span> <span>1</span> <span>2</span> x)
(<span>1</span> <span>2</span> <span>3</span>)

&gt; <span>&#39;</span>(<span>1</span> <span>2</span> x)
(<span>1</span> <span>2</span> x)</pre></div>

<p dir="auto">Creates a new list from its arguments. List arguments are spliced into the new list.</p>
<div dir="auto" data-snippet-clipboard-copy-content="&gt; (append &#39;(a b c) &#39;(d e f (g h)))
(a b c d e f (g h))

&gt; (append &#39;a &#39;b 1 2 (+ 1 2))
(a b 1 2 3)"><pre>&gt; (<span>append</span> <span>&#39;</span>(a b c) <span>&#39;</span>(d e f (g h)))
(a b c d e f (g h))

&gt; (<span>append</span> <span>&#39;a</span> <span>&#39;b</span> <span>1</span> <span>2</span> (<span>+</span> <span>1</span> <span>2</span>))
(a b <span>1</span> <span>2</span> <span>3</span>)</pre></div>

<p dir="auto">The <code>range</code> function is the building block for querying lists, and is used to build standard library functions such as <code>car</code> and <code>cdr</code>.</p>
<ul dir="auto">
<li>If called with no arguments, the first expression in a list is returned.</li>
<li>If called with one argument, a list containing the sublist from <code>start</code> to end-of-list is returned.</li>
<li>If called with two arguments, a list containing the sublist from <code>start</code> to <code>end</code> (exclusive) is returned.</li>
</ul>
<p dir="auto">Negative indices are end-of-list relative. <code>nil</code> is returned if any indices are out of range.</p>
<div dir="auto" data-snippet-clipboard-copy-content="&gt; (var letters &#39;(a b c d e))
(a b c d e)

&gt; (range letters)
a

&gt; (range letters -1)
(e)

&gt; (range (range letters -1))
e

&gt; (range letters 2)
(c d e)

&gt; (range letters 2 4)
(c d)

&gt; (range letters -4 -2)
(c d)
"><pre>&gt; (var letters <span>&#39;</span>(a b c d e))
(a b c d e)

&gt; (range letters)
a

&gt; (range letters -1)
(e)

&gt; (range (range letters -1))
e

&gt; (range letters <span>2</span>)
(c d e)

&gt; (range letters <span>2</span> <span>4</span>)
(c d)

&gt; (range letters -4 -2)
(c d)
</pre></div>

<p dir="auto">The length of a list (in item count) or symbol (in bytes)</p>


<p dir="auto">Creates a symbol by concatenating the <em>rendering</em> of its arguments.</p>
<div dir="auto" data-snippet-clipboard-copy-content="&gt; (var message (string &#34;The value is &#34; x))
The value is 5

&gt; (string &#34;An error occurred : &#34; #!)
An error occurred : Division by zero"><pre>&gt; (var message (string <span><span>&#34;</span>The value is <span>&#34;</span></span> x))
The value is 5

&gt; (string <span><span>&#34;</span>An error occurred : <span>&#34;</span></span> #!)
An error occurred : Division by zero</pre></div>

<p dir="auto">Reads and evaluates the given file. The path can be relative or absolute.</p>
<div dir="auto" data-snippet-clipboard-copy-content="(import &#34;examples/albums.lisp&#34;)"><pre>(import <span><span>&#34;</span>examples/albums.lisp<span>&#34;</span></span>)</pre></div>

<p dir="auto">Checks if the expression evaluates to #t. If not, an error is printed and the process is terminated. Evaluates to #t if successful.</p>
<div dir="auto" data-snippet-clipboard-copy-content="(assert (= &#39;(a b c 1 2 3) mylist))"><pre>(assert (<span>=</span> <span>&#39;</span>(a b c <span>1</span> <span>2</span> <span>3</span>) mylist))</pre></div>

<p dir="auto">Exits the process with an optional exit code (default is 0)</p>


<p dir="auto">Toggles the verbosity flag. When on, some details are printed during evaluation, such as <code>nil</code> results and quasiquote expansions.</p>

<p dir="auto">The values of Ï€ and Euler&#39;s number respectively. The symbol <code>Ï€</code> is an alias to <code>pi</code> in the Math module.</p>

<p dir="auto">Returns the largest integer less than or equal to the argument.</p>
<div dir="auto" data-snippet-clipboard-copy-content="(var math (Math))
(math (floor (math pi)))
3"><pre>(var math (Math))
(math (<span>floor</span> (math pi)))
3</pre></div>

<p dir="auto">Given one or more delimiters, tokenizes the input symbol and produces a list of symbols.</p>
<div dir="auto" data-snippet-clipboard-copy-content="(assert (= (string.split &#34;&#34; &#34;,&#34;) &#39;()))
(assert (= (string.split &#34;a&#34; &#34;,&#34;) &#39;(a)))
(assert (= (string.split &#34;a,b,c&#34; &#34;,&#34;) &#39;(a b c)))
(assert (= (string.split &#34;a,b,c,&#34; &#34;,&#34;) &#39;(a b c)))
(assert (= (string.split &#34;a,b;c,&#34; &#34;,;&#34;) &#39;(a b c)))
(assert (= (string.split &#34; &#34; &#34;,&#34;) (list &#34; &#34;)))"><pre>(assert (<span>=</span> (string.split <span><span>&#34;</span><span>&#34;</span></span> <span><span>&#34;</span>,<span>&#34;</span></span>) <span>&#39;()</span>))
(assert (<span>=</span> (string.split <span><span>&#34;</span>a<span>&#34;</span></span> <span><span>&#34;</span>,<span>&#34;</span></span>) <span>&#39;</span>(a)))
(assert (<span>=</span> (string.split <span><span>&#34;</span>a,b,c<span>&#34;</span></span> <span><span>&#34;</span>,<span>&#34;</span></span>) <span>&#39;</span>(a b c)))
(assert (<span>=</span> (string.split <span><span>&#34;</span>a,b,c,<span>&#34;</span></span> <span><span>&#34;</span>,<span>&#34;</span></span>) <span>&#39;</span>(a b c)))
(assert (<span>=</span> (string.split <span><span>&#34;</span>a,b;c,<span>&#34;</span></span> <span><span>&#34;</span>,;<span>&#34;</span></span>) <span>&#39;</span>(a b c)))
(assert (<span>=</span> (string.split <span><span>&#34;</span> <span>&#34;</span></span> <span><span>&#34;</span>,<span>&#34;</span></span>) (<span>list</span> <span><span>&#34;</span> <span>&#34;</span></span>)))</pre></div>

<p dir="auto">The standard library is a file called <code>std.lisp</code> that&#39;s loaded and evaluated when the interpreter starts.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">car, cdr, caar, cadr, cddr, caddr, last, nth</h3><a id="user-content-car-cdr-caar-cadr-cddr-caddr-last-nth" aria-label="Permalink: car, cdr, caar, cadr, cddr, caddr, last, nth" href="#car-cdr-caar-cadr-cddr-caddr-last-nth"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">These functions treat a list as pairs in the classical Lisp sense. <code>car</code> returns the first list item, while <code>cdr</code> returns the rest of the list. <code>last</code> returns the last list item.</p>
<div dir="auto" data-snippet-clipboard-copy-content="(var nums &#39;(1 2 3 4))
(assert (= 1 (car nums)))
(assert (= 2 (cadr nums)))
(assert (= 3 (caddr nums)))
(assert (= 4 (last nums)))
(assert (= 3 (nth 2 nums)))
(assert (nil? (nth 100 nums)))
"><pre>(var nums <span>&#39;</span>(<span>1</span> <span>2</span> <span>3</span> <span>4</span>))
(assert (<span>=</span> <span>1</span> (<span>car</span> nums)))
(assert (<span>=</span> <span>2</span> (<span>cadr</span> nums)))
(assert (<span>=</span> <span>3</span> (<span>caddr</span> nums)))
(assert (<span>=</span> <span>4</span> (last nums)))
(assert (<span>=</span> <span>3</span> (nth <span>2</span> nums)))
(assert (nil? (nth <span>100</span> nums)))
</pre></div>

<p dir="auto">Prepends an item to a list:</p>
<div dir="auto" data-snippet-clipboard-copy-content="&gt; (cons &#39;a &#39;(b c))
(a b c)

"><pre>&gt; (<span>cons</span> <span>&#39;a</span> <span>&#39;</span>(b c))
(a b c)

</pre></div>

<p dir="auto">True if the argument is <code>nil</code> or an empty list.</p>

<p dir="auto">True if the argument is a number or a symbol (in other words, not a list)</p>

<p dir="auto">True if the argument is <code>#t</code> or <code>#f</code></p>

<p dir="auto">The relation functions are <code>&lt;=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>!=</code> in addition to the intrinsic <code>=</code></p>

<p dir="auto">The <code>and</code> and <code>or</code> macros perform the usual shortcut evaluation. The <code>not</code> function checks if the argument is false. If so, the result is then <code>#t</code>, otherwise it&#39;s <code>#f</code></p>

<p dir="auto">Local bindings can be created with a <code>lambda</code> expression. If the only reason to create a lambda is to have local variables, then the <code>let</code> macro is more convenient.</p>
<div dir="auto" data-snippet-clipboard-copy-content="(var x 10)
(var y 20)

(let ((x 5) (y 6))
    (+ x y)
)

11"><pre>(var x <span>10</span>)
(var y <span>20</span>)

(<span>let</span> ((x <span>5</span>) (y <span>6</span>))
    (<span>+</span> x y)
)

11</pre></div>

<p dir="auto">Filters a list.</p>
<div dir="auto" data-snippet-clipboard-copy-content="&gt; (filter (lambda (x) (&lt; x 5)) &#39;(3 9 5 8 2 4 7))
(3 2 4)"><pre>&gt; (filter (<span>lambda</span> (<span>x</span>) (<span>&lt;</span> x <span>5</span>)) <span>&#39;</span>(<span>3</span> <span>9</span> <span>5</span> <span>8</span> <span>2</span> <span>4</span> <span>7</span>))
(<span>3</span> <span>2</span> <span>4</span>)</pre></div>

<p dir="auto">Applies a function over one or more lists.</p>
<div dir="auto" data-snippet-clipboard-copy-content="; Create a list of sums taking operands from three lists
&gt; (map + &#39;(0 2 5) &#39;(1 2 3) &#39;(1 2 3))
(2 6 11)

; Double every element in a list
&gt; (map (Î» (x) (* 2 x)) &#39;(1 2 3))
(2 4 6)

; A list of pairs with the order reversed
&gt; (map (Î» (x y) (list y x)) &#39;(a b c) &#39;(1 2 3))
((1 a) (2 b) (3 c))"><pre><span><span>;</span> Create a list of sums taking operands from three lists</span>
&gt; (<span>map</span> <span>+</span> <span>&#39;</span>(<span>0</span> <span>2</span> <span>5</span>) <span>&#39;</span>(<span>1</span> <span>2</span> <span>3</span>) <span>&#39;</span>(<span>1</span> <span>2</span> <span>3</span>))
(<span>2</span> <span>6</span> <span>11</span>)

<span><span>;</span> Double every element in a list</span>
&gt; (<span>map</span> (Î» (x) (<span>*</span> <span>2</span> x)) <span>&#39;</span>(<span>1</span> <span>2</span> <span>3</span>))
(<span>2</span> <span>4</span> <span>6</span>)

<span><span>;</span> A list of pairs with the order reversed</span>
&gt; (<span>map</span> (Î» (x y) (<span>list</span> y x)) <span>&#39;</span>(a b c) <span>&#39;</span>(<span>1</span> <span>2</span> <span>3</span>))
((<span>1</span> a) (<span>2</span> b) (<span>3</span> c))</pre></div>

<p dir="auto">Sorts a list using the supplied comparator function. The following example sorts the same list in ascending and descending order by passing <code>&lt;</code> and <code>&gt;</code> as the comparator functions. In the ascending example, we also filter out negative numbers:</p>
<div dir="auto" data-snippet-clipboard-copy-content="&gt; (filter
    (quicksort &#39;(5 40 1 -3 2) &lt;)
    (Î» (x) (&gt;= x 0)))
(1 2 5 40)

&gt; (quicksort &#39;(5 40 1 -3 2) &gt;)
(40 5 2 1 -3)
"><pre>&gt; (filter
    (quicksort <span>&#39;</span>(<span>5</span> <span>40</span> <span>1</span> -3 <span>2</span>) &lt;)
    (Î» (x) (<span>&gt;=</span> x <span>0</span>)))
(<span>1</span> <span>2</span> <span>5</span> <span>40</span>)

&gt; (quicksort <span>&#39;</span>(<span>5</span> <span>40</span> <span>1</span> -3 <span>2</span>) &gt;)
(<span>40</span> <span>5</span> <span>2</span> <span>1</span> -3)
</pre></div>
<p dir="auto">You can also pass a lambda to do your own ordering. See the <strong>albums</strong> example file for an example of doing this to sort albums.</p>

<p dir="auto">Expands to a tail-recursive function running a body while the predicate holds:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(while (&lt; c 10000000)
    (print &#34;Value is now &#34; c &#34;\n&#34;)
    (inc! c)
)"><pre>(while (<span>&lt;</span> c <span>10000000</span>)
    (print <span><span>&#34;</span>Value is now <span>&#34;</span></span> c <span><span>&#34;</span><span>\n</span><span>&#34;</span></span>)
    (inc! c)
)</pre></div>

<p dir="auto">The <code>list.iterate</code> function allows for convenient iteration of lists. The first argument is a list. The second argument is a function that&#39;s called for every item in the list, with the item as an argument. <code>each</code> is an alias to this function.</p>
<div dir="auto" data-snippet-clipboard-copy-content="; Print all numbers
(each lots-of-numbers print)

; Create a new list of numbers, with double the values
(var result &#39;())
(each nums (lambda (item)
    (set! result (append result (* 2 item)))
))

(2 4 6 8 10 12)"><pre><span><span>;</span> Print all numbers</span>
(each lots-of-numbers print)

<span><span>;</span> Create a new list of numbers, with double the values</span>
(var result <span>&#39;()</span>)
(each nums (<span>lambda</span> (<span>item</span>)
    (<span>set!</span> result (<span>append</span> result (<span>*</span> <span>2</span> item)))
))

(<span>2</span> <span>4</span> <span>6</span> <span>8</span> <span>10</span> <span>12</span>)</pre></div>

<p dir="auto">Signature: <code>(reduce-with initial fn op list)</code></p>
<p dir="auto">Calls <code>op</code> on every item in <code>list</code>, but only after applying the function <code>fn</code> to the item.</p>
<div dir="auto" data-snippet-clipboard-copy-content="(reduce-with 0 (lambda (x) (+ x 1)) + &#39;(1 2 3))

9"><pre>(reduce-with <span>0</span> (<span>lambda</span> (<span>x</span>) (<span>+</span> x <span>1</span>)) <span>+</span> <span>&#39;</span>(<span>1</span> <span>2</span> <span>3</span>))

9</pre></div>
<p dir="auto">This works like this:</p>
<ul dir="auto">
<li>start with the list <code>&#39;(1 2 3)</code></li>
<li>apply the lambda which adds 1 to each element, leaving <code>&#39;(2 3 4)</code></li>
<li>reduce to a single number <code>9</code> using <code>+</code> with the initial number <code>0</code></li>
</ul>

<p dir="auto">Calls a supplied lambda with each consecutive pair in a list.</p>
<div dir="auto" data-snippet-clipboard-copy-content="; Pair iteration where each pair 1 5, 3 3 and 4 2 all sum to 6
(each-pair &#39;(1 5 3 3 4 2)
    (Î» (a b)
        (assert (= 6 (+ a b)))))"><pre><span><span>;</span> Pair iteration where each pair 1 5, 3 3 and 4 2 all sum to 6</span>
(each-pair <span>&#39;</span>(<span>1</span> <span>5</span> <span>3</span> <span>3</span> <span>4</span> <span>2</span>)
    (Î» (a b)
        (assert (<span>=</span> <span>6</span> (<span>+</span> a b)))))</pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="; Multidimensional list (matrix) access
(var M &#39;(((10 11 12) (13 14 15)) ((16 17 18) (19 20 21))))
(assert (= 20 (matrix-at M 1 1 1)))
(assert (= nil (matrix-at M 1 1 100)))
(assert (= &#39;(10 11 12) (matrix-at M 0 0)))

(var M2 &#39;( (1 2 3 4) (a b c d)))
(assert (= &#39;c (matrix-at M2 1 2)))

; Update matrix; the old value is returned
(assert (= &#39;c (matrix-set! M2 &#39;x 1 2)))
(assert (= &#39;x (matrix-at M2 1 2)))

; Trying to set a value outside the matrix returns an error
(assert (error? (try (matrix-set! M2 0 200 2) #t #!)))"><pre><span><span>;</span> Multidimensional list (matrix) access</span>
(var M <span>&#39;</span>(((<span>10</span> <span>11</span> <span>12</span>) (<span>13</span> <span>14</span> <span>15</span>)) ((<span>16</span> <span>17</span> <span>18</span>) (<span>19</span> <span>20</span> <span>21</span>))))
(assert (<span>=</span> <span>20</span> (matrix-at M <span>1</span> <span>1</span> <span>1</span>)))
(assert (<span>=</span> <span>nil</span> (matrix-at M <span>1</span> <span>1</span> <span>100</span>)))
(assert (<span>=</span> <span>&#39;</span>(<span>10</span> <span>11</span> <span>12</span>) (matrix-at M <span>0</span> <span>0</span>)))

(var M2 <span>&#39;</span>( (<span>1</span> <span>2</span> <span>3</span> <span>4</span>) (a b c d)))
(assert (<span>=</span> <span>&#39;c</span> (matrix-at M2 <span>1</span> <span>2</span>)))

<span><span>;</span> Update matrix; the old value is returned</span>
(assert (<span>=</span> <span>&#39;c</span> (matrix-set! M2 <span>&#39;x</span> <span>1</span> <span>2</span>)))
(assert (<span>=</span> <span>&#39;x</span> (matrix-at M2 <span>1</span> <span>2</span>)))

<span><span>;</span> Trying to set a value outside the matrix returns an error</span>
(assert (error? (try (matrix-set! M2 <span>0</span> <span>200</span> <span>2</span>) <span>#t</span> #!)))</pre></div>

<p dir="auto">The are numerous hashmap related functions available:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(var mymap (hashmap.new (&#34;1&#34; 2) (3 4)))
(assert (hashmap? mymap))
(assert (= (len mymap) 2))
(hashmap.put mymap 5 6)
(hashmap.put mymap 7 &#34;Initial entry&#34;)
(var initial-entry (hashmap.put mymap 7 &#34;Another entry&#34;))
(assert (= initial-entry &#34;Initial entry&#34;))
(assert (= (len mymap) 4))
(assert (= (hashmap.get mymap 7) &#34;Another entry&#34;))
(hashmap.remove mymap 7)
(assert (= (hashmap.get mymap 7) nil))
(assert (= (len mymap) 3))

(var keys &#39;())
(var vals &#39;())
(hashmap.iterate mymap (Î» (k v)
    (item-append! keys k)
    (item-append! vals v)
))
(assert (= &#39;(1 3 5) keys))
(assert (= &#39;(2 4 6) vals))

(var count-removed (hashmap.clear mymap))
(assert (= count-removed 3))
(assert (= (len mymap) 0))

; k -&gt; &#39;()
(var hmlist (hashmap.new))
(hashmap.append! hmlist &#39;a 1)
(hashmap.append! hmlist &#39;a 2)
(assert (= (hashmap.get hmlist &#39;a) &#39;(1 2)))

; The &#39;a entry exists, so the lambda is called, which updates the list
(hashmap.put-or-apply hmlist &#39;a 3 (Î» (list)
    (assert (= list &#39;(1 2)))
    (item-append! list 3)
))

(assert (= (hashmap.get hmlist &#39;a) &#39;(1 2 3)))
(assert (= (hashmap.maybe-put hmlist &#39;a &#39;(5 5 5)) &#39;(1 2 3)))
(assert (= (hashmap.maybe-put hmlist &#39;b &#39;(5 5 5)) &#39;(5 5 5)))

(assert (contains? hmlist &#39;a))
(assert (not (contains? hmlist &#39;not-there)))"><pre>(var mymap (hashmap.new (<span><span>&#34;</span>1<span>&#34;</span></span> <span>2</span>) (<span>3</span> <span>4</span>)))
(assert (hashmap? mymap))
(assert (<span>=</span> (len mymap) <span>2</span>))
(hashmap.put mymap <span>5</span> <span>6</span>)
(hashmap.put mymap <span>7</span> <span><span>&#34;</span>Initial entry<span>&#34;</span></span>)
(var initial-entry (hashmap.put mymap <span>7</span> <span><span>&#34;</span>Another entry<span>&#34;</span></span>))
(assert (<span>=</span> initial-entry <span><span>&#34;</span>Initial entry<span>&#34;</span></span>))
(assert (<span>=</span> (len mymap) <span>4</span>))
(assert (<span>=</span> (hashmap.get mymap <span>7</span>) <span><span>&#34;</span>Another entry<span>&#34;</span></span>))
(hashmap.remove mymap <span>7</span>)
(assert (<span>=</span> (hashmap.get mymap <span>7</span>) nil))
(assert (<span>=</span> (len mymap) <span>3</span>))

(var keys <span>&#39;()</span>)
(var vals <span>&#39;()</span>)
(hashmap.iterate mymap (Î» (k v)
    (item-append! keys k)
    (item-append! vals v)
))
(assert (<span>=</span> <span>&#39;</span>(<span>1</span> <span>3</span> <span>5</span>) keys))
(assert (<span>=</span> <span>&#39;</span>(<span>2</span> <span>4</span> <span>6</span>) vals))

(var count-removed (hashmap.clear mymap))
(assert (<span>=</span> count-removed <span>3</span>))
(assert (<span>=</span> (len mymap) <span>0</span>))

<span><span>;</span> k -&gt; &#39;()</span>
(var hmlist (hashmap.new))
(hashmap.append! hmlist <span>&#39;a</span> <span>1</span>)
(hashmap.append! hmlist <span>&#39;a</span> <span>2</span>)
(assert (<span>=</span> (hashmap.get hmlist <span>&#39;a</span>) <span>&#39;</span>(<span>1</span> <span>2</span>)))

<span><span>;</span> The &#39;a entry exists, so the lambda is called, which updates the list</span>
(hashmap.put-or-apply hmlist <span>&#39;a</span> <span>3</span> (Î» (list)
    (assert (<span>=</span> <span>list</span> <span>&#39;</span>(<span>1</span> <span>2</span>)))
    (item-append! <span>list</span> <span>3</span>)
))

(assert (<span>=</span> (hashmap.get hmlist <span>&#39;a</span>) <span>&#39;</span>(<span>1</span> <span>2</span> <span>3</span>)))
(assert (<span>=</span> (hashmap.maybe-put hmlist <span>&#39;a</span> <span>&#39;</span>(<span>5</span> <span>5</span> <span>5</span>)) <span>&#39;</span>(<span>1</span> <span>2</span> <span>3</span>)))
(assert (<span>=</span> (hashmap.maybe-put hmlist <span>&#39;b</span> <span>&#39;</span>(<span>5</span> <span>5</span> <span>5</span>)) <span>&#39;</span>(<span>5</span> <span>5</span> <span>5</span>)))

(assert (contains? hmlist <span>&#39;a</span>))
(assert (<span>not</span> (contains? hmlist <span>&#39;not-there</span>)))</pre></div>

<p dir="auto">Read a number from stdin.</p>
<p dir="auto">If input is not a number, an <code>error</code> expression is returned.</p>

<p dir="auto">Returns the type name of its argument</p>
<div dir="auto" data-snippet-clipboard-copy-content="&gt;(define x 5)
&gt;(typename x)
number

&gt;(typename &#39;x)
symbol"><pre>&gt;(<span>define</span> <span>x</span> 5)
&gt;(typename x)
number

&gt;(typename <span>&#39;x</span>)
symbol</pre></div>

<p dir="auto">Returns the current time in milliseconds since unix epoch:</p>
<div dir="auto" data-snippet-clipboard-copy-content="&gt;(time.now)
1618413357184"><pre>&gt;(time.now)
1618413357184</pre></div>

<p dir="auto">Renders the argument and wraps the result in double-quotes.</p>
<div dir="auto" data-snippet-clipboard-copy-content="&gt; (double-quote name)
&#34;Joanna&#34;

&gt; (double-quote 5)
&#34;5&#34;

&gt; (double-quote (+ 2 3))
&#34;5&#34;"><pre>&gt; (double-quote name)
<span><span>&#34;</span>Joanna<span>&#34;</span></span>

&gt; (double-quote <span>5</span>)
<span><span>&#34;</span>5<span>&#34;</span></span>

&gt; (double-quote (<span>+</span> <span>2</span> <span>3</span>))
<span><span>&#34;</span>5<span>&#34;</span></span></pre></div>

<p dir="auto">Increments and decrements</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">file i/o and stdin/stdout</h3><a id="user-content-file-io-and-stdinstdout" aria-label="Permalink: file i/o and stdin/stdout" href="#file-io-and-stdinstdout"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">A file is opened with <code>io.open-file</code>, which takes a relative or absolute path name as an argument. The file is then closed with <code>io.close-file</code>. Currently, line oriented reading and writing is supported.</p>
<div dir="auto" data-snippet-clipboard-copy-content="(var report (io.open-file &#34;report.csv&#34;))
(io.read-line report)
(io.write-line report &#34;a new line is appended&#34;)
(io.close-file report)"><pre>(var report (io.open-file <span><span>&#34;</span>report.csv<span>&#34;</span></span>))
(io.read-line report)
(io.write-line report <span><span>&#34;</span>a new line is appended<span>&#34;</span></span>)
(io.close-file report)</pre></div>
<p dir="auto"><code>io.read-line</code> returns the <em>error</em> expression &#34;EOF&#34; if end of the file is reached.</p>
<p dir="auto"><code>io.read-line</code> and <code>io.write-line</code> without a file argument reads and writes to stdin and stdout respectively.</p>
<p dir="auto"><code>io.read-byte</code> reads one byte at a time from a file.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">math.odd? math.even? odd-items and even-items</h3><a id="user-content-mathodd-matheven-odd-items-and-even-items" aria-label="Permalink: math.odd? math.even? odd-items and even-items" href="#mathodd-matheven-odd-items-and-even-items"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><code>math.odd?</code> and <code>math.even?</code> determine if a number is odd or even, respectively.</p>
<p dir="auto"><code>odd-items</code> and <code>even-items</code> create a list with odd- and even indexed items respectively. These functions are 1 based.</p>
<div dir="auto" data-snippet-clipboard-copy-content="&gt;(math.odd? 5)
#t

&gt; (odd-items &#39;(a b c d e f g))
(a c e g)"><pre>&gt;(math.odd? <span>5</span>)
#t

&gt; (odd-items <span>&#39;</span>(a b c d e f g))
(a c e g)</pre></div>

<p dir="auto">Returns the absolute value of the argument.</p>


<p dir="auto">Calculates <code>x^y</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="&gt;(math.pow 2 32)
4294967296"><pre>&gt;(math.pow <span>2</span> <span>32</span>)
4294967296</pre></div>

<p dir="auto">The average of a list of numbers</p>

<p dir="auto">Calculate the square root using Newton&#39;s method</p>
<div dir="auto" data-snippet-clipboard-copy-content="&gt;(math.sqrt 986)
31.40063693621559"><pre>&gt;(math.sqrt <span>986</span>)
31.40063693621559</pre></div>

<p dir="auto">Divides the first argument by the second. If the divisor is zero, the result is an error.</p>
<div dir="auto" data-snippet-clipboard-copy-content="(try (safe-div 6 2)
    (if (= #value 3)
        (print &#34;As expected!\n&#34;)
    )
)"><pre>(try (safe-div <span>6</span> <span>2</span>)
    (<span>if</span> (<span>=</span> #value <span>3</span>)
        (print <span><span>&#34;</span>As expected!<span>\n</span><span>&#34;</span></span>)
    )
)</pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">math.make-random-generator and math.random-list</h3><a id="user-content-mathmake-random-generator-and-mathrandom-list" aria-label="Permalink: math.make-random-generator and math.random-list" href="#mathmake-random-generator-and-mathrandom-list"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Given a seed, <code>math.make-random-generator</code> creates a linear congruent random number generator.</p>
<p dir="auto">Example using current Unix epoch as seed:</p>
<div dir="auto" data-snippet-clipboard-copy-content="&gt;(var rng (math.make-random-generator 0))

&gt;(rng)
362807296

&gt;(rng)
1965043776"><pre>&gt;(var rng (math.make-random-generator <span>0</span>))

&gt;(rng)
362807296

&gt;(rng)
1965043776</pre></div>
<p dir="auto">Given a random number generator, <code>math.random-list</code> generates a list of <code>n</code> random numbers:</p>
<div dir="auto" data-snippet-clipboard-copy-content="&gt;(var rng (math.make-random-generator 0))

&gt;(math.random-list rng 10)
(1055406848 752570112 91411200 3016512 1968096889 765038592 339902464 1666232384 1888402176 197119744)"><pre>&gt;(var rng (math.make-random-generator <span>0</span>))

&gt;(math.random-list rng <span>10</span>)
(<span>1055406848</span> <span>752570112</span> <span>91411200</span> <span>3016512</span> <span>1968096889</span> <span>765038592</span> <span>339902464</span> <span>1666232384</span> <span>1888402176</span> <span>197119744</span>)</pre></div>

<p dir="auto">Recursive Fibonacci and factorial functions (note: as Bio doesn&#39;t support arbitrary precision numbers yet, it can only handle relatively small inputs)</p>

<p dir="auto">The Y fixpoint combinator (technically, the Z combinator as Bio is applicative)</p>
<div dir="auto" data-snippet-clipboard-copy-content="&gt; (var ! (Y (lambda (r) (lambda (x) (if (&lt; x 2) 1 (* x (r (- x 1))))))))
&gt; (! 5)

120"><pre>&gt; (var ! (Y (<span>lambda</span> (<span>r</span>) (<span>lambda</span> (<span>x</span>) (<span>if</span> (<span>&lt;</span> x <span>2</span>) <span>1</span> (<span>*</span> x (r (<span>-</span> x <span>1</span>))))))))
&gt; (! <span>5</span>)

120</pre></div>

<p dir="auto">A Bio module is a module <em>by convention</em>, somewhat similar to classical Javascript modules:</p>
<ol dir="auto">
<li>A <code>mod-&lt;modulename&gt;.lisp</code> file with the contents wrapped in a lambda call</li>
<li>The last expression is <code>(self)</code>, making the environment available to the importer</li>
<li>The following definitions are available:
<ul dir="auto">
<li>module-name, a string describing the module</li>
<li>module-version, a list of numbers signifying major, major, and patch</li>
<li>module-description, an <em>optional</em> description of the module</li>
</ul>
</li>
</ol>

<p dir="auto">A Bio module is a module <em>by convention</em>, somewhat similar to classical Javascript modules:</p>
<ol dir="auto">
<li>A <code>mod-&lt;modulename&gt;.lisp</code> file with the contents wrapped in a lambda call</li>
<li>The last expression is <code>(self)</code>, making the environment available to the importer</li>
<li>The following definitions are available:
<ul dir="auto">
<li>module-name, a string describing the module</li>
<li>module-version, a list of numbers signifying major, major, and patch</li>
<li>module-description, an <em>optional</em> description of the module</li>
</ul>
</li>
</ol>

<p dir="auto">The examples directory contains a sample module called <code>mod-pos.lisp</code></p>
<p dir="auto">To use the module in a REPL:</p>
<div dir="auto" data-snippet-clipboard-copy-content="bio&gt;  (var Point (import &#34;examples/mod-pos.lisp&#34;))
&lt;env&gt;

bio&gt;  (var pt (Point (new-point 2 5.4)))
&lt;env&gt;

bio&gt; (pt x)
2

bio&gt; (pt y)
5.4

bio&gt; (pt (as-string))
2 5.4

bio&gt; (var loc (Point (new-location 100.5 200.5)))
&lt;env&gt;

bio&gt; (loc x)
100.5

bio&gt; (loc y)
200.5

bio&gt; (loc (as-string))
100.5Â° N  200.5Â° E
"><pre>bio&gt;  (var Point (import <span><span>&#34;</span>examples/mod-pos.lisp<span>&#34;</span></span>))
&lt;env&gt;

bio&gt;  (var pt (Point (new-point <span>2</span> <span>5.4</span>)))
&lt;env&gt;

bio&gt; (pt x)
2

bio&gt; (pt y)
5.4

bio&gt; (pt (as-string))
2 5.4

bio&gt; (var loc (Point (new-location <span>100.5</span> <span>200.5</span>)))
&lt;env&gt;

bio&gt; (loc x)
100.5

bio&gt; (loc y)
200.5

bio&gt; (loc (as-string))
100.5Â° N  200.5Â° E
</pre></div>
</article></div></div>
  </body>
</html>
