<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://johnscolaro.xyz/blog/log-by-time-not-by-count">Original</a>
    <h1>Log by time, not by count</h1>
    
    <div id="readability-page-1" class="page"><article><p><time datetime="2025-07-20">July 20, 2025</time></p><p>&#34;How to Log&#34; is a surprisingly deep topic in software engineering with many different viewpoints, and they&#39;re almost all valid in different situations. I&#39;m going to argue that when processing lots of events, it&#39;s best to log every X seconds, rather than every X messages. This is a simple concept, but I&#39;ve never seen it written down before.</p>
<p>Let&#39;s quickly look at some pseudocode to understand what I mean.</p>
<p><strong>Count-based logging</strong></p>
<pre><code>num_events_processed = <span>0</span>

<span>while</span> <span>True</span>:
    event = read_event_from_queue()
    process_event(event)
    num_events_processed += <span>1</span>

    <span>if</span> num_events_processed % <span>1_000</span> == <span>0</span>:
        module_logger.info(<span>&#34;Processed 1000 events.&#34;</span>)
</code></pre>
<p><strong>Time-based logging</strong></p>
<pre><code>last_time_logged = time.time()
num_events_processed_since_last_log = <span>0</span>

<span>while</span> <span>True</span>:
    event = read_event_from_queue()
    process_event(event)
    num_events_processed_since_last_log += <span>1</span>

    current_time = time.time()
    <span>if</span> current_time - last_time_logged &gt;= <span>1.0</span>:
        module_logger.info(<span>f&#34;Processed <span>{num_events_processed_since_last_log}</span> events.&#34;</span>)
        num_events_processed_since_last_log = <span>0</span>
        last_time_logged = current_time
</code></pre>
<p>Default to writing time based logging.</p>
<h2>Log rate should be consistent</h2>
<p>If you log too much:</p>
<ul>
<li>Time spent logging is time you aren&#39;t spending processing events. You slow your system down when it&#39;s at peak load.</li>
<li>Lots of useless logs are costly to consume and retain.</li>
<li>Lots of useless logs slow down searching through the logs, reducing observability.</li>
</ul>
<p>And if you don&#39;t log enough:</p>
<ul>
<li>You might not know if your application is even running!</li>
<li>Low observability.</li>
</ul>
<p>The problem with logging every X messages is that there isn&#39;t a good value for X. Your application might process millions of messages per second in production, but only ~5 each second when running locally for testing. You should emit logs at a constant rate in both these cases, and time-based logging provides that.</p></article></div>
  </body>
</html>
