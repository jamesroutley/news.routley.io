<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.collabora.com/news-and-blog/news-and-events/pipewire-bluetooth-support-status-update.html">Original</a>
    <h1>PipeWire: Bluetooth Support Status Update</h1>
    
    <div id="readability-page-1" class="page"><div>
<p>Over the last two years, Bluetooth® audio support has steadily grown in PipeWire and has become a featureful, stable, conformant, open source Bluetooth® audio stack implementation.</p>
<p>Testimony to that is the fact that, as of last week (April 21), Bluetooth® A2DP audio has been <a href="https://launchstudio.bluetooth.com/ListingDetails/151765" target="_blank" rel="noopener">qualified on the Steam Deck using PipeWire and WirePlumber.</a> This means that it is now able to pass the conformance test suite from the Bluetooth SIG and will work against other qualified implementations.</p>
<p>The audio portion of Bluetooth® is split in 2 main categories: one for the stereo and (mostly) uni-directional sound (A2DP profile), and the other for the mono and bi-directional sound (HFP profile). With all the development work that has taken place, here&#39;s a look at where things stand.</p>
<h3>Stereo audio: A2DP</h3>
<p>A2DP stands for <em>Advanced Audio Distribution Profile</em> and it uses the ACL (<em>Asynchronous Connection-Less</em>) channel. It is typically used for the streaming of music content from a stereo music player to headphones or speakers.</p>
<p>The mandatory codec, SBC (SubBand Codec), is a low-complexity, fast, lossy codec that was designed with Bluetooth® bandwidth and processing power limitations in mind. One of its capabilities is that it can dynamically adjust the bitrate. In its default configuration, however, it provides low sound quality.</p>
<p>This can be improved by configuring this codec with better settings, which is proposed by PipeWire as the SBC-XQ configuration, shown in the audio settings of your preferred desktop environment.</p>
<p>In the past few years, though, other codecs with better sound quality have also appeared:</p>
<ul>
<li>AptX (LL, HD): a proprietary codec from Qualcomm (formerly CSR).</li>
<li>LDAC: a proprietary codec from Sony.</li>
<li>AAC: Advanced Audio Coding (also known as MPEG-2 Part 7).</li>
<li>FastStream: a low latency bi-directionnal version of SBC.</li>
</ul>
<p>As these codecs are not part of the A2DP standard, usage of them greatly depends on the codecs supported by the remote device.</p>
<p>In PipeWire, thanks to its plugin-based architecture, these codecs are supported and are automatically built as plugins when the respective development library is available, i.e.:</p>
<ul>
<li>libsbc for FastStream</li>
<li>fdk-aac for AAC</li>
<li>libfreeaptx for AptX</li>
<li>libldacbt-enc and libldacbt-abr for LDAC</li>
</ul>
<p>While A2DP officially only supports uni-directional stereo sound, both FastStream and AptX-LL codecs add bi-directional sound capabilities to it, allowing headset microphones to be used in parallel to the stereo stream running to the headphones.</p>
<h3>Mono audio and telephony: HFP</h3>
<p>HFP stands for <em>Hands-Free Profile</em> and it uses the SCO (<em>Synchronous Connection-Oriented</em>) channel.</p>
<p>This profile is mainly used for communication purposes, enabling headsets and hands-free kits. When used in combination with oFono, PipeWire can also use this profile to communicate with a phone&#39;s modem.</p>
<p>Two codecs are available for HFP:</p>
<ul>
<li>The mandatory CVSD for narrow band speech connection, where encoding/decoding is performed in the Bluetooth® chipset.</li>
<li>mSBC (Modified SBC) for wide band speech connection, which uses the SBC codec with a specific, fixed configuration. It requires support both from the Linux kernel and the Bluetooth® chipset, which is all automatically detected by PipeWire before making this codec available.</li>
</ul>
<p>Apart from sound streaming and unlike A2DP, HFP also requires PipeWire to interact with the remote device using AT commands.</p>
<p>The part that enables this interaction can be provided by different backends. There is a native backend for simple interaction with a headset or a phone (where not all AT commands are implemented) and there is also support for using an external daemon like oFono to provide telephony support (i.e. to interact with a modem and make phone calls directly).</p>
<p>The native backend is typically used to provide bi-directional headset audio during meetings/calls on a computer.</p>
<h3>What comes next?</h3>
<p>Of course, development doesn&#39;t stop here. There are still several things to fix and new features to support as the industry moves forward.</p>
<p>One particular feature that we are looking at next, is the addition of the LC3 codec (Low Complexity Communication Codec).</p>
<p>LC3 is the successor of SBC for use in the LE (Low Energy) Audio profile, a new profile that was added in Bluetooth® 5.2. This profile is meant to improve battery life, enable audio broadcasting to multiple devices and also support hearing aids.</p>
<p>Bear in mind, though, that supporting this whole new profile requires work underneath PipeWire, in BlueZ, but until that is ready we can also use LC3 on the A2DP profile and be prepared for LE Audio when the rest of the stack is ready to support it.</p>

<!-- Related Blogs -->



<!-- end of Related Blogs -->





<!-- Optional comments block -->

<!-- end of Optional comments block -->

</div></div>
  </body>
</html>
