<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://mnopqr1.github.io/2022/02/20/update-on-git-with-two-idens.html">Original</a>
    <h1>How to use Github with two identities, simplified</h1>
    
    <div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p>After my previous post on how to work with two or more different Github accounts on the same machine, <a href="https://evalapply.org">Aditya Athalye</a> suggested the following simplified method, that uses the <code>includeIf</code> directive of git config files. Let me explain.</p>

<p>This method <strong>assumes</strong> that you have:</p>
<ul>
  <li>two accounts called <code>account1</code> and <code>account2</code> and that you have [set up SSH identities] for each of these accounts,</li>
  <li><a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent">generated SSH keys and added them to the appropriate account</a>, storing the keys in the files <code>~/.ssh/id_ed25519_account1</code> and <code>~/.ssh/id_ed25519_account2</code>, respectively.</li>
</ul>

<p>Now <strong>my goal</strong> is to make <code>git</code> recognize automatically that any repository that is a subfolder of <code>~/github-account1/</code> belongs to <code>account1</code>, and should use that accountâ€™s SSH, and the same for <code>account2</code>.</p>

<ol>
  <li>In <code>~/.gitconfig</code>, I put:
    <div><div><pre><code> [user]
     email = my_default_email@domain.ext
     name = My Full Name
 [includeIf &#34;gitdir:~/github-account1&#34;]
     path = ~/.gitconfig-account1
 [includeIf &#34;gitdir:~/github-account2&#34;]
     path = ~/.gitconfig-account2
</code></pre></div>    </div>
    <p>What this does is, it tells git: if my repository is a subfolder of <code>~/github-account1</code>, go look in the config file <code>~/.github-account1</code>, and the same for <code>account2</code>.</p>
  </li>
  <li>Then, in the file <code>~/.gitconfig-account1</code>, I put:
    <div><div><pre><code> [core]
     sshCommand = ssh -o IdentitiesOnly=yes -i ~/.ssh/id_ed25519_account1 -F /dev/null
 [user]
     email = specific_email_account1@domain.ext 
</code></pre></div>    </div>
    <p>and similarly for the file <code>~/.gitconfig-account2</code>.</p>
  </li>
  <li>Now if I want to clone a repository as <code>account1</code>, I only need to <code>cd ~/github-account1</code> and <code>git clone</code> the repository from there. If I then do stuff (commit, push) from that repository, git will know that it needs to authenticate using the SSH key from <code>account1</code>.</li>
</ol>

<p>Thanks again to <a href="https://evalapply.org">Aditya Athalye</a> for suggesting this simplified method!</p>


  </div>
</article>

      </div>
    </div></div>
  </body>
</html>
