<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.meain.io/2022/terminal-drag-and-drop/">Original</a>
    <h1>Drag and Drop from Terminal</h1>
    
    <div id="readability-page-1" class="page"><div>
      

<p> Feb 23, 2022 . 2 min </p>



<p>I have built up a pretty good workflow in the terminal. The main thing that I was missing until now was an easy way to drag and drop the files that I am looking at in a terminal to other apps.</p>
<p>So far, whenever I wanted to share a file from the terminal I would open up a GUI file browser, navigate to that directory, find the file and then drag and drop it. Not anymore.
I recently was able to cobble together a pretty good(IMO) for dragging and dropping files to GUI applications and thought I would share.</p>
<p><video src="https://meain.io/blog-videos/videos/dnd.mp4" controls="">Drag and drop workflow</video></p>
<p>Here is what is happening in the video. I am in a project repo in which I have listed the files in the current directory using <code>ls</code>.
Now I just double-click on the file that I want to share, it bring up a thing (<code>dragon</code>) from which I can just drag and drop into slack.</p>
<p>Now let us see how to get this workflow.
The main tool that is helping with this is <a href="https://github.com/mwh/dragon">dragon</a>. Here is how you use it:</p>
<pre><code>dragon <span>&lt;</span>filename<span>&gt;</span></code></pre>
<p>Using the above will open a window from which you can drag and drop. You can pass <code>-x</code> to close it automatically after you share one item.</p>
<p>It is already great on its own, but let&#39;s wire it up so that we can bring this up when we double-click on a filename.
This is done using tmux.</p>
<pre><code>bind -n DoubleClick1Pane run-shell &#34;dragon -x &#39;#{pane_current_path}/#{mouse_word}&#39;&#34;
</code></pre>
<p>What is happening here is that when you double-click on something, tmux end up calling dragon with <code>pane_current_path</code>(pwd of current shell) + <code>/</code> + <code>mouse_word</code>(whitespace separated piece of text under cursor) which ends up as path to the file.
<em>You can probably have it be more intelligent by separately passing it onto a script that only adds <code>pane_current_path</code> if and only if <code>mouse_word</code> is not a file or even search backwards/forwards for that file, but I just went with a simpler implementation as I will be mostly selecting after typing ls.</em></p>
<p>Another possibility is that you can just wire it up with <a href="https://github.com/ranger/ranger">ranger</a> or <a href="https://github.com/gokcehan/lf">lf</a> and open dragon up like that.</p>
<p>I do end up taking and sharing a lot of screenshots, and so I have a special case for that.
Every time I take a screenshot, the path is automatically copied to my clipboard. Now, in my wm (<a href="https://github.com/i3/i3">i3</a>), I have a keybinding that will open up the path in clipboard with dragon. Here is the code for that:</p>
<pre><code>bindsym $mod+Mod1+Control+Shift+l exec &#34;dragon -x $(pbpaste)&#34;
</code></pre>
<p>With this, after I take a screenshot I can press <code>$mod+Mod1+Control+Shift+l</code> and have that window to share it.
<em>About the keybinding, it actually ends up as tab+shift+l for me after remappings for those wondering how on earth I am remembering/pressing them</em></p>
<p><strong>BONUS</strong>: The above explained setup is Linux only, but if you are on macOS, I was using something really hacky with hammerspoon to do something similar: <a href="https://github.com/meain/dotfiles/blob/master/hammerspoon/.config/hammerspoon/slackdrop.lua">https://github.com/meain/dotfiles/blob/master/hammerspoon/.config/hammerspoon/slackdrop.lua</a> .
This essentially just end up emulating the keybindings necessary to upload a file (from path in clipboard) from the slack UI.</p>
<p>And that is it. Enjoy sticking to just a terminal.</p>


<p><a href="https://blog.meain.io/">‚Üê Home</a></p>

    </div></div>
  </body>
</html>
