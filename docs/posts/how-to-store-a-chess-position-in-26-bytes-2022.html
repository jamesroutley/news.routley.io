<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://ezzeriesa.notion.site/How-to-store-a-chess-position-in-26-bytes-using-bit-level-magic-df1fdb5364eb42fdac11eb23b25e9605">Original</a>
    <h1>How to store a chess position in 26 bytes (2022)</h1>
    
    <div id="readability-page-1" class="page"><div><p id="e07b95c2-cdaa-48a9-82b2-49506bc9c38e"><em>Author&#39;s note: This post was adapted from a presentation at the </em><em><a href="https://www.recurse.com">Recurse Center</a></em><em>. Hacker News comments </em><em><a href="https://news.ycombinator.com/item?id=37525348">here</a></em><em>.</em></p><div dir="ltr"><figure id="d286047d-b8c7-4a24-b45d-79dba4f3c030"><a href="https://ezzeriesa.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Ffa5ba4f7-9639-494b-af8d-a02f18a9a01a%2FUntitled.png?table=block&amp;id=d286047d-b8c7-4a24-b45d-79dba4f3c030&amp;userId=&amp;cache=v2"><img src="https://ezzeriesa.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Ffa5ba4f7-9639-494b-af8d-a02f18a9a01a%2FUntitled.png?table=block&amp;id=d286047d-b8c7-4a24-b45d-79dba4f3c030&amp;userId=&amp;cache=v2"/></a></figure></div><p id="75626a80-7e01-4d8f-b097-e903c7658826">I couldn’t help but wonder - is this really the case?</p><p id="3a49b9c5-4345-46bb-b963-b62c008d4d45">There are 32 pieces on a chess board. Here we line them up side-by-side.</p><div dir="ltr"><figure id="ad853419-3d00-42f1-85e5-be317f70fbf7"><a href="https://ezzeriesa.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fc033a19e-0bd7-4479-bdf9-6bc55f6ac553%2FUntitled.png?table=block&amp;id=ad853419-3d00-42f1-85e5-be317f70fbf7&amp;userId=&amp;cache=v2"><img src="https://ezzeriesa.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fc033a19e-0bd7-4479-bdf9-6bc55f6ac553%2FUntitled.png?table=block&amp;id=ad853419-3d00-42f1-85e5-be317f70fbf7&amp;userId=&amp;cache=v2"/></a></figure></div><p id="20551ec7-35e3-411b-b79b-9b2af54c32ec">Each piece can occupy one of 64 squares. Let’s denote each piece by a number between 0 and 63 to represent the respective square.</p><div dir="ltr"><figure id="50d9f16d-5480-4c16-90a8-08fdfd1ce6b3"><a href="https://ezzeriesa.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F89fa1f44-63a3-42d5-b81a-13595ce895b6%2FUntitled.png?table=block&amp;id=50d9f16d-5480-4c16-90a8-08fdfd1ce6b3&amp;userId=&amp;cache=v2"><img src="https://ezzeriesa.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F89fa1f44-63a3-42d5-b81a-13595ce895b6%2FUntitled.png?table=block&amp;id=50d9f16d-5480-4c16-90a8-08fdfd1ce6b3&amp;userId=&amp;cache=v2"/></a></figure></div><p id="1424b30a-ca74-493a-b7df-5f680fc83d15">Since each position takes up 6 bits (<span data-token-index="0" contenteditable="false"><span></span><span><span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>6</mn></msup><mo>=</mo><mn>64</mn></mrow><annotation encoding="application/x-tex">2^6 = 64</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span>2</span><span><span><span><span><span><span></span><span><span>6</span></span></span></span></span></span></span></span><span></span><span>=</span><span></span></span><span><span></span><span>64</span></span></span></span></span><span>﻿</span></span>), multiplying 6 bits by 32 pieces gives us 192 bits / <strong>24 bytes</strong> (1 byte = 8 bits).</p><p id="da13f86c-d33c-41d5-a019-ad021cdb4243">Of course, it’s rarely that simple <a href="https://ezzeriesa.notion.site/How-to-store-a-chess-position-in-26-bytes-using-bit-level-magic-df1fdb5364eb42fdac11eb23b25e9605?pvs=21">[1]</a>.</p><p dir="auto"><h3 id="5cdc8ec1-6569-49e6-8647-4b27771922b7">Captures</h3></p><p id="46e4d1db-9ca9-4e4a-bc30-65d4f6d03e67">In addition to positions, we need to keep track of captured pieces as these pieces do not appear on the board.</p><div dir="ltr"><figure id="ab9477c8-2304-4d3f-a7b1-17e619b5ecf7"><a href="https://ezzeriesa.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F75aebd70-afcb-403b-b4df-452408cfad62%2FUntitled.png?table=block&amp;id=ab9477c8-2304-4d3f-a7b1-17e619b5ecf7&amp;userId=&amp;cache=v2"><img src="https://ezzeriesa.notion.site/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F75aebd70-afcb-403b-b4df-452408cfad62%2FUntitled.png?table=block&amp;id=ab9477c8-2304-4d3f-a7b1-17e619b5ecf7&amp;userId=&amp;cache=v2"/></a></figure></div><p dir="auto"><h3 id="b061dfe7-6e2e-47ef-8577-d6cb0264347f">Castling availability</h3></p></div></div>
  </body>
</html>
