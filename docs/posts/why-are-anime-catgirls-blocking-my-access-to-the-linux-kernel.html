<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://lock.cmpxchg8b.com/anubis.html">Original</a>
    <h1>Why are anime catgirls blocking my access to the Linux kernel?</h1>
    
    <div id="readability-page-1" class="page">

<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#intro" id="toc-intro">Intro</a></li>
<li><a href="#problem" id="toc-problem">Problem</a></li>
<li><a href="#numbers" id="toc-numbers">Numbers</a></li>
<li><a href="#alternatives" id="toc-alternatives">Alternatives</a></li>
<li><a href="#workarounds" id="toc-workarounds">Workarounds</a></li>
<li><a href="#notes" id="toc-notes">Notes</a></li>
</ul>
</nav>
<p><em>Hey‚Ä¶ quick question, why are anime catgirls blocking my access to
the Linux kernel?</em></p>
<section id="intro">
<h2>Intro</h2>
<p>I‚Äôve started running into more sites recently that deploy <a href="https://github.com/TecharoHQ/anubis">Anubis</a>, a sort of hybrid
art project slash network countermeasure. The project ‚Äúweighs the souls‚Äù
of HTTP requests to help protect the web from AI crawlers.</p>
<p>If you‚Äôve seen anime catgirl avatars when visiting a new website,
that‚Äôs Anubis.</p>
<blockquote>
<figure>
<img src="https://rgoswami.me/posts/parameter-passing-nwchem-rtdb/img/anubis.png" alt="A website blocked with Anubis"/>
<figcaption aria-hidden="true">A website blocked with
Anubis</figcaption>
</figure>
</blockquote>
<p>I‚Äôm sympathetic to the cause ‚Äì I host this blog on a single core
128MB VPS, I can tell you some stories about aggressive crawlers!</p>
<p>Anubis recently started blocking how I access <a href="https://git.kernel.org/">git.kernel.org</a> and <a href="https://lore.kernel.org">lore.kernel.org</a>. Those sites host the
<a href="https://en.wikipedia.org/wiki/LKML">Linux Kernel Mailing
List</a> archive and the kernel git repositories. As far as I know I do
have a soul, I just wasn‚Äôt using a desktop browser‚Ä¶ so how exactly is my
soul being weighed?</p>
<blockquote>
<p>Note: Linux has Tux üêß, OpenBSD has Puffy üê°, SuSE has Geeko ü¶é and
Microsoft has Bob ü§ì‚Ä¶ nothing wrong with mascots! üò∏</p>
</blockquote>
</section>
<section id="problem">
<h2>Problem</h2>
<p>The traditional solution to blocking nuisance crawlers is to use a
combination of <a href="https://en.wikipedia.org/wiki/Rate_limiting">rate limiting</a> and
<a href="https://en.wikipedia.org/wiki/Captcha">CAPTCHAs</a>. The
CAPTCHA forces vistors to solve a problem designed to be very difficult
for computers but trivial for humans. This isn‚Äôt perfect of course, we
can debate the accessibility tradeoffs and weaknesses, but conceptually
the idea makes some sense.</p>
<p>Anubis ‚Äì confusingly ‚Äì inverts this idea. It insists visitors solve a
problem trivial for computers, but impossible for humans. Visitors are
asked to brute force a value that when appended to a challenge string,
causes it‚Äôs SHA-256 to begin with a few zero nibbles.</p>
<blockquote>
<div id="cb1"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>    calcString <span>:=</span> fmt<span>.</span>Sprintf<span>(</span><span>&#34;%s%d&#34;</span><span>,</span> challenge<span>,</span> nonce<span>)</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    calculated <span>:=</span> internal<span>.</span>SHA256sum<span>(</span>calcString<span>)</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span>if</span> subtle<span>.</span>ConstantTimeCompare<span>([]</span><span>byte</span><span>(</span>response<span>),</span> <span>[]</span><span>byte</span><span>(</span>calculated<span>))</span> <span>!=</span> <span>1</span> <span>{</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>        <span>// ...</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span>}</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span>// compare the leading zeroes</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span>if</span> <span>!</span>strings<span>.</span>HasPrefix<span>(</span>response<span>,</span> strings<span>.</span>Repeat<span>(</span><span>&#34;0&#34;</span><span>,</span> rule<span>.</span>Challenge<span>.</span>Difficulty<span>))</span> <span>{</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>        <span>// ...</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span>}</span></span></code></pre></div>
<p>source: <a href="https://github.com/TecharoHQ/anubis/blob/e8dfff635015d6c906dddd49cb0eaf591326092a/lib/challenge/proofofwork/proofofwork.go#L66">lib/challenge/proofofwork/proofofwork.go#L66</a></p>
</blockquote>
<p>If that sounds familiar, it‚Äôs because it‚Äôs similar to how bitcoin
mining works. Anubis is not literally mining cryptocurrency, but it
<em>is</em> similar in concept to other projects that do exactly that,
perhaps most famously <a href="https://torrentfreak.com/the-pirate-bay-website-runs-a-cryptocurrency-miner-170916/">Coinhive</a>
and <a href="https://github.com/JSEcoin/website/blob/master/README.md">JSECoin</a>.</p>
<p>So how do some useless SHA-256 operations prove you‚Äôre not a bot? The
argument goes that this simply makes it too expensive to crawl your
website.</p>
<figure>
<img src="https://rgoswami.me/posts/parameter-passing-nwchem-rtdb/img/datacenter.png" alt="The typical datacenter used by an AI crawler"/>
<figcaption aria-hidden="true">The typical datacenter used by an AI
crawler</figcaption>
</figure>
<p>This‚Ä¶ makes no sense to me. Almost by definition, an AI vendor will
have a datacenter full of compute capacity. It feels like this solution
has the problem backwards, effectively only limiting access to those
<em>without</em> resources or trying to conserve them.</p>
</section>
<section id="numbers">
<h2>Numbers</h2>
<p>Let‚Äôs assume the argument has some merit and math out the claims.</p>
<p>We can see that with the default Anubis configuration, a typical
website visitor will have to solve a challenge with a difficulty of
4.</p>
<blockquote>
<div id="cb2"><pre><code><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span>// DefaultDifficulty is the default &#34;difficulty&#34; (number of leading zeroes)</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span>// that must be met by the client in order to pass the challenge.</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span>const</span> DefaultDifficulty <span>=</span> <span>4</span></span></code></pre></div>
<p>source: <a href="https://github.com/TecharoHQ/anubis/blob/main/anubis.go#L32">anubis.go</a></p>
</blockquote>
<p>This means that a visitor must make the first 4 hex digits of the
challenge hash be zero, so 16 bits (4 digits, one nibble each).
Therefore, you can expect to mine a suitable <code>nonce</code> within
2^16 SHA-256 operations.</p>
<p>If every single github star on the anubis project represents a
website that has deployed Anubis, how much would the cloud services bill
be to mine enough tokens to crawl every single website?</p>
<blockquote>
<figure>
<img src="https://rgoswami.me/posts/parameter-passing-nwchem-rtdb/img/anubisgithub.png" alt="Anubis Project Stars"/>
<figcaption aria-hidden="true">Anubis Project Stars</figcaption>
</figure>
</blockquote>
<blockquote>
<div id="cb3"><pre><code><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span>// CookieDefaultExpirationTime is the amount of time before the cookie/JWT expires.</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span>const</span> CookieDefaultExpirationTime <span>=</span> <span>7</span> <span>*</span> <span>24</span> <span>*</span> time<span>.</span>Hour</span></code></pre></div>
<p>source: <a href="https://rgoswami.me/anubis.go">https://github.com/TecharoHQ/anubis/blob/main/anubis.go#L32</a></p>
</blockquote>
<p>At the time of writing, Anubis has 11,508 github stars.</p>
<p>The default configuration means mining one token gets you access for
7 days <small>(although I think this expiration check is broken, see
below)</small>, so we need 11,508 * 2^16 SHA-256 operations per week,
how expensive is that?</p>
<p>To get some numbers, I started an <code>e2-micro</code> vm on Google
Compute Engine, and ran <code>openssl speed</code>. This is what you get
in the <a href="https://cloud.google.com/free/docs/free-cloud-features#compute">free
tier</a>.</p>
<pre><code>$ openssl speed sha256
Doing sha256 for 3s on 16 size blocks: 6915549 sha256&#39;s in 3.00s
Doing sha256 for 3s on 64 size blocks: 4631718 sha256&#39;s in 3.00s
Doing sha256 for 3s on 256 size blocks: 393694 sha256&#39;s in 3.21s
Doing sha256 for 3s on 1024 size blocks: 100123 sha256&#39;s in 3.00s
Doing sha256 for 3s on 8192 size blocks: 13300 sha256&#39;s in 2.98s
Doing sha256 for 3s on 16384 size blocks: 7137 sha256&#39;s in 2.99s
version: 3.0.17
built on: Tue Aug  5 07:09:41 2025 UTC
options: bn(64,64)
compiler: gcc -fPIC -pthread -m64 ...
The &#39;numbers&#39; are in 1000s of bytes per second processed.
type             16 bytes     64 bytes    256 bytes   1024 bytes   8192 bytes  16384 bytes
sha256           36882.93k    98809.98k    31397.40k    34175.32k    36561.61k    39107.90k</code></pre>
<p>It looks like we can test about 2^21 every second, perhaps a bit more
if we used both SMT sibling cores. This amount of compute is simply too
cheap to even be worth billing for.</p>
<p>So (11508 websites * 2^16 sha256 operations) / 2^21, that‚Äôs about 6
minutes to mine enough tokens for every single Anubis deployment in the
world. That means the cost of unrestricted crawler access to the
internet for a week is approximately $0.</p>
<p>In fact, I don‚Äôt think we reach a single cent per month in compute
costs until several million sites have deployed Anubis.</p>
<p>I‚Äôm just not convinced this math works‚Ä¶ this is <em>literally</em>
nothing for a souless AI vendor with a monthly cloud services budget in
the 8 figures. However, the cost for real soul-owning humans with
limited access to compute is high ‚Äì the Anubis forums are full of
complaints like these:</p>
<blockquote>
<figure>
<img src="https://rgoswami.me/posts/parameter-passing-nwchem-rtdb/img/anubisslow.png" alt="The discussion forums are full of users on limited devices complaining"/>
<figcaption aria-hidden="true">The discussion forums are full of users
on limited devices complaining</figcaption>
</figure>
</blockquote>
</section>
<section id="alternatives">
<h2>Alternatives</h2>
<p>Anubis cites <a href="https://en.wikipedia.org/wiki/Hashcash#Applications">hashcash</a>
as the primary inspiration for their design, an anti-spam solution from
the 90s that was never widely adopted.</p>
<p>The idea of ‚Äúweighing souls‚Äù reminded me of another anti-spam
solution from the 90s‚Ä¶ believe it or not, there was once a company that
used poetry to block spam!</p>
<p><a href="https://web.archive.org/web/20030210085930/http://habeas.com/services/swe.htm">Habeas</a>
would license short haikus to companies to embed in email headers. They
would then aggressively sue anyone who reproduced their poetry <a href="https://web.archive.org/web/20030207155559/http://www.habeas.com/faq/index.htm#5">without
a license</a>. The idea was you can safely deliver any email with their
header, because it was too legally risky to use it in spam.</p>
<p>Here‚Äôs a <a href="https://web.archive.org/web/20021220112749/http://www.habeas.com/about/haiku.htm">sample
haiku</a>:</p>
<blockquote>
<p>winter into spring </p>
</blockquote>
<p>Was this a good idea? I don‚Äôt know, but they really did <a href="https://www.theregister.com/2003/04/04/habeas_sues_haiku_abusers/">sue
a few spammers</a>!</p>
</section>
<section id="workarounds">
<h2>Workarounds</h2>
<p>So you‚Äôre trying to read LKML, but catgirl says no‚Ä¶ is there a
solution?</p>
<p>My issue is I don‚Äôt want to use a desktop browser to mine the
required value, so how can I get the auth cookie?</p>
<p>If we look at the response with <code>curl</code>, we can see the
challenge in the HTTP headers:</p>
<pre><code>$ curl -I https://lore.kernel.org/
HTTP/2 200
server: nginx
set-cookie: techaro.lol-anubis-auth=; Path=/
set-cookie: techaro.lol-anubis-cookie-test-if-you-block-this-anubis-wont-work=5d737f0600ff2dd; Path=/</code></pre>
<p>That <code>techaro.lol-anubis-cookie</code> is the challenge, here is
a quick C program to mine an acceptable token:</p>
<div id="cb6"><pre><code><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span>#include </span><span>&lt;stdio.h&gt;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span>#include </span><span>&lt;string.h&gt;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span>#include </span><span>&lt;openssl/sha.h&gt;</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span>#pragma GCC diagnostic ignored &#34;-Wdeprecated-declarations&#34;</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span>int</span> main<span>(</span><span>int</span> argc<span>,</span> <span>char</span> <span>**</span>argv<span>)</span> <span>{</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span>unsigned</span> <span>char</span> hash<span>[</span>SHA256_DIGEST_LENGTH<span>];</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span>int</span> difficulty <span>=</span> <span>4</span><span>;</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span>char</span> <span>*</span>message<span>;</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    SHA256_CTX base<span>;</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span>if</span> <span>(</span>argc <span>&lt;</span> <span>2</span><span>)</span> <span>{</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>        fprintf<span>(</span>stderr<span>,</span> <span>&#34;usage: </span><span>%s</span><span> challenge</span><span>\n</span><span>&#34;</span><span>,</span> <span>*</span>argv<span>);</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>        <span>return</span> <span>1</span><span>;</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    <span>}</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    message <span>=</span> argv<span>[</span><span>1</span><span>];</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>    SHA256_Init<span>(&amp;</span>base<span>);</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>    SHA256_Update<span>(&amp;</span>base<span>,</span> message<span>,</span> strlen<span>(</span>message<span>));</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>    <span>for</span> <span>(</span><span>int</span> i <span>=</span> <span>0</span><span>;</span> i <span>&lt;</span> <span>1</span> <span>&lt;&lt;</span> <span>18</span><span>;</span> i<span>++)</span> <span>{</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>        <span>char</span> nonce<span>[</span><span>16</span><span>];</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>        SHA256_CTX ctx <span>=</span> base<span>;</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>        SHA256_Update<span>(&amp;</span>ctx<span>,</span> nonce<span>,</span> snprintf<span>(</span>nonce<span>,</span> <span>sizeof</span><span>(</span>nonce<span>),</span> <span>&#34;</span><span>%d</span><span>&#34;</span><span>,</span> i<span>));</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>        SHA256_Final<span>(</span>hash<span>,</span> <span>&amp;</span>ctx<span>);</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>        <span>for</span> <span>(</span><span>int</span> j <span>=</span> <span>0</span><span>;</span> j <span>&lt;</span> SHA256_DIGEST_LENGTH<span>;</span> j<span>++)</span> <span>{</span></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>            <span>if</span> <span>(</span>hash<span>[</span>j<span>]</span> <span>!=</span> <span>0</span><span>)</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>                <span>break</span><span>;</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>            <span>if</span> <span>(</span>j <span>&lt;</span> <span>(</span>difficulty <span>&gt;&gt;</span> <span>1</span><span>)</span> <span>-</span> <span>1</span><span>)</span></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>                <span>continue</span><span>;</span></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>            <span>// Looks good</span></span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>            puts<span>(</span>nonce<span>);</span></span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>            <span>return</span> <span>0</span><span>;</span></span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>        <span>}</span></span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>    <span>}</span></span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>    <span>return</span> <span>1</span><span>;</span></span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a><span>}</span></span></code></pre></div>
<p>Let‚Äôs run that and see what it says‚Ä¶</p>
<pre><code>$ gcc -Ofast -march=native anubis-miner.c -lcrypto -o anubis-miner
$ time ./anubis-miner 5d737f0600ff2dd
47224

real    0m0.017s
user    0m0.016s
sys     0m0.000s</code></pre>
<p>Looks okay, let‚Äôs verify that solution is correct:</p>
<pre><code>$ printf &#34;5d737f0600ff2dd%d&#34; 47224 | sha256sum
000043f7c4392a781a04419a7cb503089ebcf3164e2b1d4258b3e6c15b8b07f1  -</code></pre>
<p>It seems valid, so now we can get a signed auth cookie by sending
back the value we mined:</p>
<pre><code>$ curl -I --cookie &#34;techaro.lol-anubis-cookie-test-if-you-block-this-anubis-wont-work=5d737f0600ff2dd&#34; \
    &#39;https://lore.kernel.org/.within.website/x/cmd/anubis/api/pass-challenge?response=000043f7c4392a781a04419a7
cb503089ebcf3164e2b1d4258b3e6c15b8b07f1&amp;nonce=47224&amp;redir=/&amp;elapsedTime=0&#39;
HTTP/2 302
server: nginx
location: /
set-cookie: techaro.lol-anubis-auth=eyJhbGciOiJFZERTQSIsInR5cCI6IkpXVCJ9.eyJhY3Rpb24iO...OTYifQ...;</code></pre>
<p>Success, this cookie is now valid for 1 week of access. Let‚Äôs
validate what it sent us, the actual schema is visible in the code:</p>
<blockquote>
<div id="cb10"><pre><code><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>    claims<span>[</span><span>&#34;iat&#34;</span><span>]</span> <span>=</span> time<span>.</span>Now<span>().</span>Unix<span>()</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    claims<span>[</span><span>&#34;nbf&#34;</span><span>]</span> <span>=</span> time<span>.</span>Now<span>().</span>Add<span>(-</span><span>1</span> <span>*</span> time<span>.</span>Minute<span>).</span>Unix<span>()</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    claims<span>[</span><span>&#34;exp&#34;</span><span>]</span> <span>=</span> time<span>.</span>Now<span>().</span>Add<span>(</span>s<span>.</span>opts<span>.</span>CookieExpiration<span>).</span>Unix<span>()</span></span></code></pre></div>
<p>source: <a href="https://github.com/TecharoHQ/anubis/blob/e8dfff635015d6c906dddd49cb0eaf591326092a/lib/http.go#L312">lib/http.go</a></p>
</blockquote>
<p>We can examine this auth token and see what Anubis gave us‚Ä¶</p>
<pre><code>$ base64 -d &lt;&lt;&lt; eyJhbGciOiJFZERTQSIsInR5cCI6IkpXVCJ9 | jq
{
  &#34;alg&#34;: &#34;EdDSA&#34;,
  &#34;typ&#34;: &#34;JWT&#34;
}
$ base64 -d &lt;&lt;&lt; eyJhY3Rpb24iO...OTYifQ== | jq
{
  &#34;action&#34;: &#34;CHALLENGE&#34;,
  &#34;challenge&#34;: &#34;5d737f0600ff2dd&#34;,
  &#34;exp&#34;: 1756185722,
  &#34;iat&#34;: 1755580922,
  &#34;method&#34;: &#34;fast&#34;,
  &#34;nbf&#34;: 1755580862,
  &#34;policyRule&#34;: &#34;dbf942088788cc96&#34;
}</code></pre>
<p>It looks like <code>exp</code> is the expiry date, so
<code>1756185722</code>, which is‚Ä¶</p>
<pre><code>$ date --date @1756185722
Mon Aug 25 22:22:02 PDT 2025</code></pre>
<p>Yep, about 7 days from the date I requested it. You can now place
that into a cookie file for <code>curl</code>,<code>lynx</code> etc.</p>
<blockquote>
<p>Interestingly, sending the same request the next day got me a new
signed cookie!?</p>
<p>This seems like a bug ‚Äì exchanging a mined token for an auth cookie
should immediately remove the challenge from the store, or there is a <a href="https://en.wikipedia.org/wiki/Double-spending">double spend</a>
vulnerability.</p>
<p>This error benefits me, I have to mine less tokens, but I‚Äôll open an
issue üòá</p>
<p>Update: wow, <a href="https://github.com/TecharoHQ/anubis/pull/1003">fixed</a> just a
few minutes after opening an issue by the maintainer!</p>
</blockquote>
<p>This dance to get access is just a minor annoyance for me, but I
question how it proves I‚Äôm not a bot. These steps can be trivially and
cheaply automated.</p>
<p>I think the end result is just an internet resource I need is a
little harder to access, and we have to waste a small amount of
energy.</p>
</section>
<section id="notes">
<h2>Notes</h2>
<ul>
<li>I wrote this article with my own puny brain, I didn‚Äôt use any AI. I
know there are <em>endashes</em> (they‚Äôre <strong>not</strong>
emdashes!) ‚Äì I have a habit of writing two consecutive dashes, which <a href="https://pandoc.org/demo/example33/7.1-typography.html">pandoc</a>
converts into <a href="https://unicode-explorer.com/c/2013">U+2013</a>.</li>
<li>This post is a bit critical of a small well-intentioned project, so
I felt obliged to email the maintainer to discuss it before posting it
online. I didn‚Äôt hear back.</li>
</ul>
</section>



</div>
  </body>
</html>
