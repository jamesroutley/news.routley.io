<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://alan.norbauer.com/articles/browser-debugging-tricks">Original</a>
    <h1>Debugging tricks in the browser</h1>
    
    <div id="readability-page-1" class="page"><article><section><p>A list of useful, not-obvious hacks to get the most out of your browser’s<sup><a href="#user-content-fn-1" id="user-content-fnref-1" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup> debugger. Assumes an intermediate-level-or-higher understanding of the developer tools.</p>
<section><h2 id="advanced-conditional-breakpoints"><a href="#advanced-conditional-breakpoints">Advanced Conditional Breakpoints</a></h2><p>By using expressions that have side effects in places you wouldn’t expect, we can squeeze more functionality out of basic features like conditional breakpoints.</p><section><h3 id="logpoints--tracepoints"><a href="#logpoints--tracepoints">Logpoints / Tracepoints</a></h3><p>For example, we can <code>console.log</code> in breakpoints. Logpoints are breakpoints that log to the console without pausing execution. While Microsoft Edge has had logpoints built-in for a while and Chrome just added them in v73, Firefox does not. But, we can use conditional breakpoints to simulate them in any browser.</p><p><img alt="Conditional Breakpoint - console.log" loading="lazy" width="756" height="337" decoding="async" data-nimg="1" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconditional-breakpoint-console-log.2d18d3e4.gif&amp;w=828&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconditional-breakpoint-console-log.2d18d3e4.gif&amp;w=1920&amp;q=75 2x" src="https://alan.norbauer.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconditional-breakpoint-console-log.2d18d3e4.gif&amp;w=1920&amp;q=75"/></p><p>Use <code>console.count</code> instead of <code>console.log</code> if you also want a running count of how many times the line is executed.</p><p>UPDATE (May 2020): All the major browsers now directly support logpoints/tracepoints (<a href="https://developers.google.com/web/updates/2019/01/devtools#logpoints" alt="Chrome Logpoints Documentation">Chrome Logpoints</a>, <a href="https://docs.microsoft.com/en-us/microsoft-edge/devtools-guide/debugger#breakpoints" alt="Edge Tracepoint Documentation">Edge Tracepoints</a>, <a href="https://developer.mozilla.org/en-US/docs/Tools/Debugger/Set_a_logpoint" alt="Firefox Logpoint Documentation">Firefox Logpoints</a>)</p><section><h4 id="watch-pane"><a href="#watch-pane">Watch Pane</a></h4><p>You can also use <code>console.log</code> in the watch pane. For example, to dump a snapshot of <code>localStorage</code> everytime your application pauses in the debugger, you can create a <code>console.table(localStorage)</code> watch:</p><p><img alt="console.table in watch pane" loading="lazy" width="431" height="131" decoding="async" data-nimg="1" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconsole-table-in-watch.03919d55.png&amp;w=640&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconsole-table-in-watch.03919d55.png&amp;w=1080&amp;q=75 2x" src="https://alan.norbauer.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconsole-table-in-watch.03919d55.png&amp;w=1080&amp;q=75"/></p><p>Or to execute an expression after DOM mutation, set a DOM mutation breakpoint (in the Element Inspector):
<img alt="DOM Mutation Breakpoint" loading="lazy" width="830" height="456" decoding="async" data-nimg="1" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconditional-breakpoint-DOM-mutation-chrome.27f07619.png&amp;w=1080&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconditional-breakpoint-DOM-mutation-chrome.27f07619.png&amp;w=1920&amp;q=75 2x" src="https://alan.norbauer.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconditional-breakpoint-DOM-mutation-chrome.27f07619.png&amp;w=1920&amp;q=75"/></p><p>And then add your watch expression, e.g. to record a snapshot of the DOM: <code>(window.doms = window.doms || []).push(document.documentElement.outerHTML)</code>. Now, after any DOM subtree modification, the debugger will pause execution and the new DOM snapshot will be at the end of the <code>window.doms</code> array. (There is no way to create a DOM mutation breakpoint that doesn’t pause execution.)</p></section><section><h4 id="tracing-callstacks"><a href="#tracing-callstacks">Tracing Callstacks</a></h4><p>Let’s say you have a function that shows a loading spinner and a function that hides it, but somewhere in your code you’re calling the show method without a matching hide call. How can you find the source of the unpaired show call? Use <code>console.trace</code> in a conditional breakpoint in the show method, run your code, find the last stack trace for the show method and click the caller to go to the code:</p><p><img alt="console.trace in conditional breakpoint" loading="lazy" width="622" height="639" decoding="async" data-nimg="1" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconsole-trace-find-stack.d107e89c.gif&amp;w=640&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconsole-trace-find-stack.d107e89c.gif&amp;w=1920&amp;q=75 2x" src="https://alan.norbauer.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconsole-trace-find-stack.d107e89c.gif&amp;w=1920&amp;q=75"/></p></section></section><section><h3 id="changing-program-behavior"><a href="#changing-program-behavior">Changing Program Behavior</a></h3><p>By using expressions that have side effects on program behavior, we can change program behavior on the fly, right in the browser.</p><p>For example, you can override the param to the <code>getPerson</code> function, <code>id</code>. Since <code>id=1</code> evaluates to true, this conditional breakpoint would pause the debugger. To prevent that, append <code>, false</code> to the expression.</p><p><img alt="Conditional Breakpoint - parameter override" loading="lazy" width="756" height="337" decoding="async" data-nimg="1" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconditional-breakpoint-parameter-override.375af5d5.gif&amp;w=828&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconditional-breakpoint-parameter-override.375af5d5.gif&amp;w=1920&amp;q=75 2x" src="https://alan.norbauer.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconditional-breakpoint-parameter-override.375af5d5.gif&amp;w=1920&amp;q=75"/></p></section><section><h3 id="quick-and-dirty-performance-profiling"><a href="#quick-and-dirty-performance-profiling">Quick and Dirty Performance Profiling</a></h3><p>You shouldn’t muddy your performance profiling with things like conditional breakpoint evaluation time, but if you want a quick and dirty measurement of how long something takes to run, you can use the console timing API in conditional breakpoints. In your starting point set a breakpoint with the condition <code>console.time(&#39;label&#39;)</code> and at the end point set a breakpoint with the condition <code>console.timeEnd(&#39;label&#39;)</code>. Everytime the thing you’re measuring runs, the browser will log to the console how long it takes.</p><p><img alt="Conditional Breakpoint - performance profile" loading="lazy" width="745" height="505" decoding="async" data-nimg="1" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconsole-time-performance-profile.9b494665.gif&amp;w=750&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconsole-time-performance-profile.9b494665.gif&amp;w=1920&amp;q=75 2x" src="https://alan.norbauer.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconsole-time-performance-profile.9b494665.gif&amp;w=1920&amp;q=75"/></p></section><section><h3 id="using-function-arity"><a href="#using-function-arity">Using Function Arity</a></h3><section><h4 id="break-on-number-of-arguments"><a href="#break-on-number-of-arguments">Break on Number of Arguments</a></h4><p>Only pause when the current function is called with 3 arguments: <code>arguments.callee.length === 3</code></p><p>Useful when you have an overloaded function that has optional parameters.</p><p><img alt="Conditional Breakpoint - argument length" loading="lazy" width="798" height="337" decoding="async" data-nimg="1" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconditional-breakpoint-argument-length.eedb2e1c.gif&amp;w=828&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconditional-breakpoint-argument-length.eedb2e1c.gif&amp;w=1920&amp;q=75 2x" src="https://alan.norbauer.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconditional-breakpoint-argument-length.eedb2e1c.gif&amp;w=1920&amp;q=75"/></p></section><section><h4 id="break-on-function-arity-mismatch"><a href="#break-on-function-arity-mismatch">Break on Function Arity Mismatch</a></h4><p>Only pause when the current function is called with the wrong number of arguments: <code>(arguments.callee.length) != arguments.length</code></p><p><img alt="Conditional Breakpoint - arity check" loading="lazy" width="749" height="230" decoding="async" data-nimg="1" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconditional-breakpoint-arity-check.70c0a60c.gif&amp;w=750&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconditional-breakpoint-arity-check.70c0a60c.gif&amp;w=1920&amp;q=75 2x" src="https://alan.norbauer.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconditional-breakpoint-arity-check.70c0a60c.gif&amp;w=1920&amp;q=75"/></p><p>Useful when finding bugs in function call sites.</p></section></section><section><h3 id="using-time"><a href="#using-time">Using Time</a></h3><section><h4 id="skip-page-load"><a href="#skip-page-load">Skip Page Load</a></h4><p>Don’t pause until 5 seconds after page load:
<code>performance.now() &gt; 5000</code></p><p>Useful when you want to set a breakpoint but you’re only interested in pausing execution after initial page load.</p></section><section><h4 id="skip-n-seconds"><a href="#skip-n-seconds">Skip N Seconds</a></h4><p>Don’t pause execution if the breakpoint is hit in the next 5 seconds, but pause anytime after: <code>window.baseline = window.baseline || Date.now(), (Date.now() - window.baseline) &gt; 5000</code></p><p>Reset the counter from the console anytime you’d like: <code>window.baseline = Date.now()</code></p></section></section><section><h3 id="using-css"><a href="#using-css">Using CSS</a></h3><p>Pause based on computed CSS values, e.g. only pause execution when the document body has a red background color: <code>window.getComputedStyle(document.body).backgroundColor === &#34;rgb(255,0,0)&#34;</code></p></section><section><h3 id="even-calls-only"><a href="#even-calls-only">Even Calls Only</a></h3><p>Only pause every other time the line is executed:
<code>window.counter = window.counter || 0, window.counter % 2 === 0</code></p></section><section><h3 id="break-on-sample"><a href="#break-on-sample">Break on Sample</a></h3><p>Only break on a random sample of executions of the line, e.g. only break 1 out of every 10 times the line is executed:
<code>Math.random() &lt; 0.1</code></p></section><section><h3 id="never-pause-here"><a href="#never-pause-here">Never Pause Here</a></h3><img data-no-style="true" alt="Chrome" loading="lazy" width="40" height="40" decoding="async" data-nimg="1" src="https://alan.norbauer.com/_next/static/media/chrome.2d2a19fd.svg"/><p>When you right-click the gutter and select “Never Pause Here,” Chrome creates a conditional breakpoint that is <code>false</code> and never passes. This makes it so that the debugger will never pause on this line.</p><p><img alt="Never Pause Here" loading="lazy" width="282" height="158" decoding="async" data-nimg="1" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fnever-pause-here.a4010ee4.png&amp;w=384&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fnever-pause-here.a4010ee4.png&amp;w=640&amp;q=75 2x" src="https://alan.norbauer.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fnever-pause-here.a4010ee4.png&amp;w=640&amp;q=75"/>
<img alt="Never Pause Here Result" loading="lazy" width="324" height="86" decoding="async" data-nimg="1" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fnever-pause-here-result.32dc71c3.png&amp;w=384&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fnever-pause-here-result.32dc71c3.png&amp;w=750&amp;q=75 2x" src="https://alan.norbauer.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fnever-pause-here-result.32dc71c3.png&amp;w=750&amp;q=75"/></p><p>Useful when you want to exempt a line from XHR breakpoints, ignore an exception that is being thrown, etc.</p></section><section><h3 id="automatic-instance-ids"><a href="#automatic-instance-ids">Automatic Instance IDs</a></h3><p>Automatically assign a unique ID to every instance of a class by setting this conditional breakpoint in the constructor: <code>(window.instances = window.instances || []).push(this)</code></p><p>Then to retrieve the unique ID: <code>window.instances.indexOf(instance)</code> (e.g. <code>window.instances.indexOf(this)</code> when in a class method)</p></section><section><h3 id="programmatically-toggle"><a href="#programmatically-toggle">Programmatically Toggle</a></h3><p>Use a global boolean to gate one or more conditional breakpoints:</p><p><img alt="Boolean gate" loading="lazy" width="949" height="121" decoding="async" data-nimg="1" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconditional-breakpoint-gated.d32764ce.png&amp;w=1080&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconditional-breakpoint-gated.d32764ce.png&amp;w=1920&amp;q=75 2x" src="https://alan.norbauer.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconditional-breakpoint-gated.d32764ce.png&amp;w=1920&amp;q=75"/></p><p>Then programmatically toggle the boolean, e.g.</p><ul>
<li>manually, from the console<!-- -->
<div data-bright-theme="dracula" data-bright-mode="dark"><pre><code><p><span><span data-bright-ln="1">1</span><span>window.enableBreakpoints </span><span>= </span><span>true</span><span>;</span><br/></span></p></code></pre></div><div data-bright-theme="Firefox Light" data-bright-mode="light"><pre><code><p><span><span data-bright-ln="1">1</span><span>window</span><span>.</span><span>enableBreakpoints </span><span>= </span><span>true</span><span>;</span><br/></span></p></code></pre></div>
</li>
<li>from other breakpoints
<img alt="Boolean gate - enable from other breakpoint" loading="lazy" width="880" height="128" decoding="async" data-nimg="1" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconditional-breakpoint-gated-enable-from-breakpoint.1c568b6e.png&amp;w=1080&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconditional-breakpoint-gated-enable-from-breakpoint.1c568b6e.png&amp;w=1920&amp;q=75 2x" src="https://alan.norbauer.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fconditional-breakpoint-gated-enable-from-breakpoint.1c568b6e.png&amp;w=1920&amp;q=75"/></li>
<li>from a timer on the console<!-- -->
<div data-bright-theme="dracula" data-bright-mode="dark"><pre><code><p><span><span data-bright-ln="1">1</span><span>setTimeout</span><span>(() </span><span>=&gt;</span><span> (window.enableBreakpoints </span><span>= </span><span>true</span><span>), </span><span>5000</span><span>);</span><br/></span></p></code></pre></div><div data-bright-theme="Firefox Light" data-bright-mode="light"><pre><code><p><span><span data-bright-ln="1">1</span><span>setTimeout</span><span>(() </span><span>=&gt; </span><span>(</span><span>window</span><span>.</span><span>enableBreakpoints </span><span>= </span><span>true</span><span>)</span><span>, </span><span>5000</span><span>)</span><span>;</span><br/></span></p></code></pre></div>
</li>
<li>etc</li>
</ul></section></section>
<section><h2 id="monitor-class-calls"><a href="#monitor-class-calls">monitor() class Calls</a></h2><img data-no-style="true" alt="Chrome" loading="lazy" width="40" height="40" decoding="async" data-nimg="1" src="https://alan.norbauer.com/_next/static/media/chrome.2d2a19fd.svg"/><p>You can use Chrome’s <code>monitor</code> command line method to easily trace all calls to class methods. E.g. given a class <code>Dog</code></p><div data-bright-theme="dracula" data-bright-mode="dark"><pre><code><p><span><span data-bright-ln="1">1</span><span>class </span><span>Dog</span><span> {</span><br/></span></p><p><span><span data-bright-ln="2">2</span><span>  bark</span><span>(</span><span>count</span><span>) {</span><br/></span></p><p><span><span data-bright-ln="3">3</span><span>    /* ... */</span><br/></span></p><p><span><span data-bright-ln="4">4</span><span>  }</span><br/></span></p><p><span><span data-bright-ln="5">5</span><span>}</span><br/></span></p></code></pre></div><div data-bright-theme="Firefox Light" data-bright-mode="light"><pre><code><p><span><span data-bright-ln="1">1</span><span>class </span><span>Dog </span><span>{</span><br/></span></p><p><span><span data-bright-ln="2">2</span><span>  bark</span><span>(</span><span>count</span><span>) {</span><br/></span></p><p><span><span data-bright-ln="3">3</span><span>    /* ... */</span><br/></span></p><p><span><span data-bright-ln="4">4</span><span>  }</span><br/></span></p><p><span><span data-bright-ln="5">5</span><span>}</span><br/></span></p></code></pre></div><p>If we want to know all calls made to all instances of <code>Dog</code>, paste this into the command line:</p><div data-bright-theme="dracula" data-bright-mode="dark"><pre><code><p><span><span data-bright-ln="1">1</span><span>var</span><span> p </span><span>= </span><span>Dog</span><span>.prototype;</span><br/></span></p><p><span><span data-bright-ln="2">2</span><span>Object.</span><span>getOwnPropertyNames</span><span>(p).</span><span>forEach</span><span>((</span><span>k</span><span>) </span><span>=&gt; </span><span>monitor</span><span>(p[k]));</span><br/></span></p></code></pre></div><div data-bright-theme="Firefox Light" data-bright-mode="light"><pre><code><p><span><span data-bright-ln="1">1</span><span>var </span><span>p </span><span>= </span><span>Dog</span><span>.</span><span>prototype;</span><br/></span></p><p><span><span data-bright-ln="2">2</span><span>Object</span><span>.</span><span>getOwnPropertyNames</span><span>(</span><span>p</span><span>).</span><span>forEach</span><span>((</span><span>k</span><span>) </span><span>=&gt; </span><span>monitor</span><span>(</span><span>p</span><span>[</span><span>k</span><span>]))</span><span>;</span><br/></span></p></code></pre></div><p>and you’ll get output in the console:</p><div data-bright-theme="dracula" data-bright-mode="dark"><pre><code><p><span><span>&gt; function bark called with arguments: 2</span><br/></span></p></code></pre></div><div data-bright-theme="Firefox Light" data-bright-mode="light"><pre><code><p><span><span>&gt; function bark called with arguments: 2</span><br/></span></p></code></pre></div><p>You can use <code>debug</code> instead of <code>monitor</code> if you want to pause execution on any method calls (instead of just logging to the console).</p><section><h3 id="from-a-specific-instance"><a href="#from-a-specific-instance">From a Specific Instance</a></h3><img data-no-style="true" alt="Chrome" loading="lazy" width="40" height="40" decoding="async" data-nimg="1" src="https://alan.norbauer.com/_next/static/media/chrome.2d2a19fd.svg"/><p>If you don’t know the class but you have an instance:</p><div data-bright-theme="dracula" data-bright-mode="dark"><pre><code><p><span><span data-bright-ln="1">1</span><span>var</span><span> p </span><span>=</span><span> instance.constructor.prototype;</span><br/></span></p><p><span><span data-bright-ln="2">2</span><span>Object.</span><span>getOwnPropertyNames</span><span>(p).</span><span>forEach</span><span>((</span><span>k</span><span>) </span><span>=&gt; </span><span>monitor</span><span>(p[k]));</span><br/></span></p></code></pre></div><div data-bright-theme="Firefox Light" data-bright-mode="light"><pre><code><p><span><span data-bright-ln="1">1</span><span>var </span><span>p </span><span>= </span><span>instance</span><span>.</span><span>constructor</span><span>.</span><span>prototype;</span><br/></span></p><p><span><span data-bright-ln="2">2</span><span>Object</span><span>.</span><span>getOwnPropertyNames</span><span>(</span><span>p</span><span>).</span><span>forEach</span><span>((</span><span>k</span><span>) </span><span>=&gt; </span><span>monitor</span><span>(</span><span>p</span><span>[</span><span>k</span><span>]))</span><span>;</span><br/></span></p></code></pre></div><p>Useful when you’d like to write a function that does this for any instance of any class (instead of just <code>Dog</code>)</p></section></section>
<section><h2 id="call-and-debug-a-function"><a href="#call-and-debug-a-function">Call and Debug a Function</a></h2><p>Before calling the function you want to debug in the console, call <code>debugger</code>. E.g. given:</p><div data-bright-theme="dracula" data-bright-mode="dark"><pre><code><p><span><span data-bright-ln="1">1</span><span>function </span><span>fn</span><span>() {</span><br/></span></p><p><span><span data-bright-ln="2">2</span><span>  /* ... */</span><br/></span></p><p><span><span data-bright-ln="3">3</span><span>}</span><br/></span></p></code></pre></div><div data-bright-theme="Firefox Light" data-bright-mode="light"><pre><code><p><span><span data-bright-ln="1">1</span><span>function </span><span>fn</span><span>() {</span><br/></span></p><p><span><span data-bright-ln="2">2</span><span>  /* ... */</span><br/></span></p><p><span><span data-bright-ln="3">3</span><span>}</span><br/></span></p></code></pre></div><p>From your console:</p><p>And then “Step into next function call” to debug the implementation of <code>fn</code>.</p><p>Useful when you don’t feel like finding the definition of <code>fn</code> and adding a breakpoint manually or if <code>fn</code> is dynamically bound to a function and you don’t know where the source is.</p><p>In Chrome you can also optionally call <code>debug(fn)</code> on the command line and the debugger will pause execution inside <code>fn</code> every time it is called.</p></section>
<section><h2 id="pause-execution-on-url-change"><a href="#pause-execution-on-url-change">Pause Execution on URL Change</a></h2><p>To pause execution before a single-page application modifies the URL (i.e. some routing event happens):</p><div data-bright-theme="dracula" data-bright-mode="dark"><pre><code><p><span><span data-bright-ln="1">1</span><span>const </span><span>dbg </span><span>=</span><span> () </span><span>=&gt;</span><span> {</span><br/></span></p><p><span><span data-bright-ln="2">2</span><span>  debugger</span><span>;</span><br/></span></p><p><span><span data-bright-ln="3">3</span><span>};</span><br/></span></p><p><span><span data-bright-ln="4">4</span><span>history.pushState </span><span>=</span><span> dbg;</span><br/></span></p><p><span><span data-bright-ln="5">5</span><span>history.replaceState </span><span>=</span><span> dbg;</span><br/></span></p><p><span><span data-bright-ln="6">6</span><span>window.onhashchange </span><span>=</span><span> dbg;</span><br/></span></p><p><span><span data-bright-ln="7">7</span><span>window.onpopstate </span><span>=</span><span> dbg;</span><br/></span></p></code></pre></div><div data-bright-theme="Firefox Light" data-bright-mode="light"><pre><code><p><span><span data-bright-ln="1">1</span><span>const </span><span>dbg </span><span>= () </span><span>=&gt; </span><span>{</span><br/></span></p><p><span><span data-bright-ln="2">2</span><span>  debugger</span><span>;</span><br/></span></p><p><span><span data-bright-ln="3">3</span><span>}</span><span>;</span><br/></span></p><p><span><span data-bright-ln="4">4</span><span>history</span><span>.</span><span>pushState </span><span>= </span><span>dbg</span><span>;</span><br/></span></p><p><span><span data-bright-ln="5">5</span><span>history</span><span>.</span><span>replaceState </span><span>= </span><span>dbg</span><span>;</span><br/></span></p><p><span><span data-bright-ln="6">6</span><span>window</span><span>.</span><span>onhashchange </span><span>= </span><span>dbg</span><span>;</span><br/></span></p><p><span><span data-bright-ln="7">7</span><span>window</span><span>.</span><span>onpopstate </span><span>= </span><span>dbg</span><span>;</span><br/></span></p></code></pre></div><p>Creating a version of <code>dbg</code> that pauses execution without breaking navigation is an exercise left up to the reader.</p><p>Also, note that this doesn’t handle when code calls <code>window.location.replace/assign</code> directly because the page will immediately unload after the assignment, so there is nothing to debug. If you still want to see the source of these redirects (and debug your state at the time of redirect), in Chrome you can <code>debug</code> the relevant methods:</p><div data-bright-theme="dracula" data-bright-mode="dark"><pre><code><p><span><span data-bright-ln="1">1</span><span>debug</span><span>(window.location.replace);</span><br/></span></p><p><span><span data-bright-ln="2">2</span><span>debug</span><span>(window.location.assign);</span><br/></span></p></code></pre></div><div data-bright-theme="Firefox Light" data-bright-mode="light"><pre><code><p><span><span data-bright-ln="1">1</span><span>debug</span><span>(</span><span>window</span><span>.</span><span>location</span><span>.</span><span>replace</span><span>)</span><span>;</span><br/></span></p><p><span><span data-bright-ln="2">2</span><span>debug</span><span>(</span><span>window</span><span>.</span><span>location</span><span>.</span><span>assign</span><span>)</span><span>;</span><br/></span></p></code></pre></div></section>
<section><h2 id="debugging-property-reads"><a href="#debugging-property-reads">Debugging Property Reads</a></h2><p>If you have an oject and want to know whenever a property is read on it, use an object getter with a <code>debugger</code> call. For example, convert <code>{configOption: true}</code> to <code>{get configOption() { debugger; return true; }}</code> (either in the original source code or using a conditional breakpoint).</p><p>Useful when you’re passing in some configuration options to something and you’d like to see how they get used.</p></section>
<section><h2 id="use-copy"><a href="#use-copy">Use copy()</a></h2><img data-no-style="true" alt="Chrome" loading="lazy" width="40" height="40" decoding="async" data-nimg="1" src="https://alan.norbauer.com/_next/static/media/chrome.2d2a19fd.svg"/><img data-no-style="true" alt="Firefox" loading="lazy" width="40" height="40" decoding="async" data-nimg="1" src="https://alan.norbauer.com/_next/static/media/firefox.583d9a58.svg"/><p>You can copy interest information out of the browser directly to your clipboard without any string truncation using the <code>copy()</code> console API. Some interesting things you might want to copy:</p><ul>
<li>Snapshot of the current DOM: <code>copy(document.documentElement.outerHTML)</code></li>
<li>Metadata about resources (e.g. images): <code>copy(performance.getEntriesByType(&#34;resource&#34;))</code></li>
<li>A large JSON blob, formatted: <code>copy(JSON.parse(blob))</code></li>
<li>A dump of your localStorage: <code>copy(localStorage)</code></li>
<li>Etc.</li>
</ul></section>
<section><h2 id="debugging-htmlcss"><a href="#debugging-htmlcss">Debugging HTML/CSS</a></h2><p>The JS console can be helpful when diagnosing problems with your HTML/CSS.</p><section><h3 id="inspect-the-dom-with-js-disabled"><a href="#inspect-the-dom-with-js-disabled">Inspect the DOM with JS Disabled</a></h3><p>When in the DOM inspector press ctrl+\ (Chrome/Windows) to pause JS execution at any time. This allows you to inspect a snapshot of the DOM without worrying about JS mutating the DOM or events (e.g. mouseover) causing the DOM to change from underneath you.</p></section><section><h3 id="inspect-an-elusive-element"><a href="#inspect-an-elusive-element">Inspect an Elusive Element</a></h3><p>Let’s say you want to inspect a DOM element that only conditionally appears. Inspecting said element requires moving your mouse to it, but when you try to, it disappears:</p><p><img alt="Elusive element" loading="lazy" width="668" height="99" decoding="async" data-nimg="1" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Felusive-element.495b0945.gif&amp;w=750&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Felusive-element.495b0945.gif&amp;w=1920&amp;q=75 2x" src="https://alan.norbauer.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Felusive-element.495b0945.gif&amp;w=1920&amp;q=75"/></p><p>To inspect the element you can paste this into your console: <code>setTimeout(function() { debugger; }, 5000);</code>. This gives you 5 seconds to trigger the UI, and then once the 5 second timer is up, JS execution will pause and nothing will make your element disappear. You are free to move your mouse to the dev tools without losing the element:</p><p><img alt="Elusive element - inspected" loading="lazy" width="815" height="717" decoding="async" data-nimg="1" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Felusive-element-inspected.f5f036b4.gif&amp;w=828&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Felusive-element-inspected.f5f036b4.gif&amp;w=1920&amp;q=75 2x" src="https://alan.norbauer.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Felusive-element-inspected.f5f036b4.gif&amp;w=1920&amp;q=75"/></p><p>While JS execution is paused you can inspect the element, edit its CSS, execute commands in the JS console, etc.</p><p>Useful when inspecting DOM that is dependent on specific cursor position, focus, etc.</p></section><section><h3 id="record-snapshots-of-the-dom"><a href="#record-snapshots-of-the-dom">Record Snapshots of the DOM</a></h3><p>To grab a copy of the DOM in its current state:</p><div data-bright-theme="dracula" data-bright-mode="dark"><pre><code><p><span><span data-bright-ln="1">1</span><span>copy</span><span>(document.documentElement.outerHTML);</span><br/></span></p></code></pre></div><div data-bright-theme="Firefox Light" data-bright-mode="light"><pre><code><p><span><span data-bright-ln="1">1</span><span>copy</span><span>(</span><span>document</span><span>.</span><span>documentElement</span><span>.</span><span>outerHTML</span><span>)</span><span>;</span><br/></span></p></code></pre></div><p>To record a snapshot of the DOM every second:</p><div data-bright-theme="dracula" data-bright-mode="dark"><pre><code><p><span><span data-bright-ln="1">1</span><span>doms </span><span>=</span><span> [];</span><br/></span></p><p><span><span data-bright-ln="2">2</span><span>setInterval</span><span>(() </span><span>=&gt;</span><span> {</span><br/></span></p><p><span><span data-bright-ln="3">3</span><span>  const</span><span> domStr </span><span>=</span><span> document.documentElement.outerHTML;</span><br/></span></p><p><span><span data-bright-ln="4">4</span><span>  doms.</span><span>push</span><span>(domStr);</span><br/></span></p><p><span><span data-bright-ln="5">5</span><span>}, </span><span>1000</span><span>);</span><br/></span></p></code></pre></div><div data-bright-theme="Firefox Light" data-bright-mode="light"><pre><code><p><span><span data-bright-ln="1">1</span><span>doms </span><span>= []</span><span>;</span><br/></span></p><p><span><span data-bright-ln="2">2</span><span>setInterval</span><span>(() </span><span>=&gt; </span><span>{</span><br/></span></p><p><span><span data-bright-ln="3">3</span><span>  const </span><span>domStr </span><span>= </span><span>document</span><span>.</span><span>documentElement</span><span>.</span><span>outerHTML</span><span>;</span><br/></span></p><p><span><span data-bright-ln="4">4</span><span>  doms</span><span>.</span><span>push</span><span>(</span><span>domStr</span><span>)</span><span>;</span><br/></span></p><p><span><span data-bright-ln="5">5</span><span>}</span><span>, </span><span>1000</span><span>)</span><span>;</span><br/></span></p></code></pre></div><p>Or just dump it to the console:</p><div data-bright-theme="dracula" data-bright-mode="dark"><pre><code><p><span><span data-bright-ln="1">1</span><span>setInterval</span><span>(() </span><span>=&gt;</span><span> {</span><br/></span></p><p><span><span data-bright-ln="2">2</span><span>  const</span><span> domStr </span><span>=</span><span> document.documentElement.outerHTML;</span><br/></span></p><p><span><span data-bright-ln="3">3</span><span>  console.</span><span>log</span><span>(</span><span>&#34;</span><span>snapshotting DOM: </span><span>&#34;</span><span>, domStr);</span><br/></span></p><p><span><span data-bright-ln="4">4</span><span>}, </span><span>1000</span><span>);</span><br/></span></p></code></pre></div><div data-bright-theme="Firefox Light" data-bright-mode="light"><pre><code><p><span><span data-bright-ln="1">1</span><span>setInterval</span><span>(() </span><span>=&gt; </span><span>{</span><br/></span></p><p><span><span data-bright-ln="2">2</span><span>  const </span><span>domStr </span><span>= </span><span>document</span><span>.</span><span>documentElement</span><span>.</span><span>outerHTML</span><span>;</span><br/></span></p><p><span><span data-bright-ln="3">3</span><span>  console</span><span>.</span><span>log</span><span>(</span><span>&#34;snapshotting DOM: &#34;</span><span>, </span><span>domStr</span><span>)</span><span>;</span><br/></span></p><p><span><span data-bright-ln="4">4</span><span>}</span><span>, </span><span>1000</span><span>)</span><span>;</span><br/></span></p></code></pre></div></section><section><h3 id="monitor-focused-element"><a href="#monitor-focused-element">Monitor Focused Element</a></h3><div data-bright-theme="dracula" data-bright-mode="dark"><pre><code><p><span><span data-bright-ln="1">1</span><span>(</span><span>function</span><span> () {</span><br/></span></p><p><span><span data-bright-ln="2">2</span><span>  let</span><span> last </span><span>=</span><span> document.activeElement;</span><br/></span></p><p><span><span data-bright-ln="3">3</span><span>  setInterval</span><span>(() </span><span>=&gt;</span><span> {</span><br/></span></p><p><span><span data-bright-ln="4">4</span><span>    if</span><span> (document.activeElement </span><span>!==</span><span> last) {</span><br/></span></p><p><span><span data-bright-ln="5">5</span><span>      last </span><span>=</span><span> document.activeElement;</span><br/></span></p><p><span><span data-bright-ln="6">6</span><span>      console.</span><span>log</span><span>(</span><span>&#34;</span><span>Focus changed to: </span><span>&#34;</span><span>, last);</span><br/></span></p><p><span><span data-bright-ln="7">7</span><span>    }</span><br/></span></p><p><span><span data-bright-ln="8">8</span><span>  }, </span><span>100</span><span>);</span><br/></span></p><p><span><span data-bright-ln="9">9</span><span>})();</span><br/></span></p></code></pre></div><div data-bright-theme="Firefox Light" data-bright-mode="light"><pre><code><p><span><span data-bright-ln="1">1</span><span>(</span><span>function </span><span>() {</span><br/></span></p><p><span><span data-bright-ln="2">2</span><span>  let </span><span>last </span><span>= </span><span>document</span><span>.</span><span>activeElement</span><span>;</span><br/></span></p><p><span><span data-bright-ln="3">3</span><span>  setInterval</span><span>(() </span><span>=&gt; </span><span>{</span><br/></span></p><p><span><span data-bright-ln="4">4</span><span>    if </span><span>(</span><span>document</span><span>.</span><span>activeElement </span><span>!== </span><span>last</span><span>) {</span><br/></span></p><p><span><span data-bright-ln="5">5</span><span>      last </span><span>= </span><span>document</span><span>.</span><span>activeElement</span><span>;</span><br/></span></p><p><span><span data-bright-ln="6">6</span><span>      console</span><span>.</span><span>log</span><span>(</span><span>&#34;Focus changed to: &#34;</span><span>, </span><span>last</span><span>)</span><span>;</span><br/></span></p><p><span><span data-bright-ln="7">7</span><span>    }</span><br/></span></p><p><span><span data-bright-ln="8">8</span><span>  }</span><span>, </span><span>100</span><span>)</span><span>;</span><br/></span></p><p><span><span data-bright-ln="9">9</span><span>})()</span><span>;</span><br/></span></p></code></pre></div><p><img alt="Monitor focused element" loading="lazy" width="891" height="443" decoding="async" data-nimg="1" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fmonitor-focus.b9692b99.gif&amp;w=1080&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fmonitor-focus.b9692b99.gif&amp;w=1920&amp;q=75 2x" src="https://alan.norbauer.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fmonitor-focus.b9692b99.gif&amp;w=1920&amp;q=75"/></p></section><section><h3 id="find-bold-elements"><a href="#find-bold-elements">Find Bold Elements</a></h3><div data-bright-theme="dracula" data-bright-mode="dark"><pre><code><p><span><span data-bright-ln="1">1</span><span>const </span><span>isBold </span><span>=</span><span> (</span><span>e</span><span>) </span><span>=&gt;</span><span> {</span><br/></span></p><p><span><span data-bright-ln="2">2</span><span>  let</span><span> w </span><span>=</span><span> window.</span><span>getComputedStyle</span><span>(e).fontWeight;</span><br/></span></p><p><span><span data-bright-ln="3">3</span><span>  return</span><span> w </span><span>=== </span><span>&#34;</span><span>bold</span><span>&#34; </span><span>||</span><span> w </span><span>=== </span><span>&#34;</span><span>700</span><span>&#34;</span><span>;</span><br/></span></p><p><span><span data-bright-ln="4">4</span><span>};</span><br/></span></p><p><span><span data-bright-ln="5">5</span><span>Array.</span><span>from</span><span>(document.</span><span>querySelectorAll</span><span>(</span><span>&#34;</span><span>*</span><span>&#34;</span><span>)).</span><span>filter</span><span>(isBold);</span><br/></span></p></code></pre></div><div data-bright-theme="Firefox Light" data-bright-mode="light"><pre><code><p><span><span data-bright-ln="1">1</span><span>const </span><span>isBold </span><span>= (</span><span>e</span><span>) </span><span>=&gt; </span><span>{</span><br/></span></p><p><span><span data-bright-ln="2">2</span><span>  let </span><span>w </span><span>= </span><span>window</span><span>.</span><span>getComputedStyle</span><span>(</span><span>e</span><span>).</span><span>fontWeight</span><span>;</span><br/></span></p><p><span><span data-bright-ln="3">3</span><span>  return </span><span>w </span><span>=== </span><span>&#34;bold&#34; </span><span>|| </span><span>w </span><span>=== </span><span>&#34;700&#34;</span><span>;</span><br/></span></p><p><span><span data-bright-ln="4">4</span><span>}</span><span>;</span><br/></span></p><p><span><span data-bright-ln="5">5</span><span>Array</span><span>.</span><span>from</span><span>(</span><span>document</span><span>.</span><span>querySelectorAll</span><span>(</span><span>&#34;*&#34;</span><span>)).</span><span>filter</span><span>(</span><span>isBold</span><span>)</span><span>;</span><br/></span></p></code></pre></div><section><h4 id="just-descendants"><a href="#just-descendants">Just Descendants</a></h4><p>Or just descendants of the element currently selected in the inspector:</p><div data-bright-theme="dracula" data-bright-mode="dark"><pre><code><p><span><span data-bright-ln="1">1</span><span>Array.</span><span>from</span><span>($0.</span><span>querySelectorAll</span><span>(</span><span>&#34;</span><span>*</span><span>&#34;</span><span>)).</span><span>filter</span><span>(isBold);</span><br/></span></p></code></pre></div><div data-bright-theme="Firefox Light" data-bright-mode="light"><pre><code><p><span><span data-bright-ln="1">1</span><span>Array</span><span>.</span><span>from</span><span>(</span><span>$0</span><span>.</span><span>querySelectorAll</span><span>(</span><span>&#34;*&#34;</span><span>)).</span><span>filter</span><span>(</span><span>isBold</span><span>)</span><span>;</span><br/></span></p></code></pre></div></section></section><section><h3 id="reference-currently-selected-element"><a href="#reference-currently-selected-element">Reference Currently Selected Element</a></h3><p><code>$0</code> in the console is an automatic reference to the currently selected element in the element inspector.</p><section><h4 id="previous-elements"><a href="#previous-elements">Previous Elements</a></h4><img data-no-style="true" alt="Chrome" loading="lazy" width="40" height="40" decoding="async" data-nimg="1" src="https://alan.norbauer.com/_next/static/media/chrome.2d2a19fd.svg"/><img data-no-style="true" alt="Edge" loading="lazy" width="40" height="40" decoding="async" data-nimg="1" src="https://alan.norbauer.com/_next/static/media/edge.c22c90ce.svg"/><p>In Chrome and Edge you can access the element you last inspected with <code>$1</code>, the element before that with <code>$2</code>, etc.</p></section><section><h4 id="get-event-listeners"><a href="#get-event-listeners">Get Event Listeners</a></h4><img data-no-style="true" alt="Chrome" loading="lazy" width="40" height="40" decoding="async" data-nimg="1" src="https://alan.norbauer.com/_next/static/media/chrome.2d2a19fd.svg"/><p>In Chrome you can inspect the event listeners of the currently selected element: <code>getEventListeners($0)</code>, e.g.</p><p><img alt="getEventListeners" loading="lazy" width="757" height="402" decoding="async" data-nimg="1" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2FgetEventListeners.4ae6f43e.png&amp;w=828&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2FgetEventListeners.4ae6f43e.png&amp;w=1920&amp;q=75 2x" src="https://alan.norbauer.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2FgetEventListeners.4ae6f43e.png&amp;w=1920&amp;q=75"/></p></section></section><section><h3 id="monitor-events-for-element"><a href="#monitor-events-for-element">Monitor Events for Element</a></h3><img data-no-style="true" alt="Chrome" loading="lazy" width="40" height="40" decoding="async" data-nimg="1" src="https://alan.norbauer.com/_next/static/media/chrome.2d2a19fd.svg"/><p>Debug all events for selected element: <code>monitorEvents($0)</code></p><p>Debug specific events for selected element: <code>monitorEvents($0, [&#34;control&#34;, &#34;key&#34;])</code></p><p><img alt="monitorEvents" loading="lazy" width="891" height="569" decoding="async" data-nimg="1" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2FmonitorEvents.a03f9e53.gif&amp;w=1080&amp;q=75 1x, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2FmonitorEvents.a03f9e53.gif&amp;w=1920&amp;q=75 2x" src="https://alan.norbauer.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2FmonitorEvents.a03f9e53.gif&amp;w=1920&amp;q=75"/></p></section></section>
</section></article></div>
  </body>
</html>
