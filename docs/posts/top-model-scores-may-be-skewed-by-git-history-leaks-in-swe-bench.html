<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/SWE-bench/SWE-bench/issues/465">Original</a>
    <h1>Top model scores may be skewed by Git history leaks in SWE-bench</h1>
    
    <div id="readability-page-1" class="page"><div id="issue-body-viewer" data-testid="issue-body-viewer"><div data-testid="markdown-body" data-team-hovercards-enabled="true" data-turbolinks="false"><div><p dir="auto">We&#39;ve identified multiple loopholes with SWE Bench Verified where agents may look at future repository state (by querying it directly or through a variety of methods), and cases in which future repository state includes either solutions or detailed approaches to solving problems (commit messages and more).</p>
<h3 dir="auto">Examples:</h3>
<p dir="auto">A trajectory with Claude 4 Sonnet, <a href="https://github.com/pytest-dev/pytest/pull/6202" data-hovercard-type="pull_request" data-hovercard-url="/pytest-dev/pytest/pull/6202/hovercard"><code>Pytest-dev__pytest-6202</code></a> (<a href="https://gist.github.com/jacobkahn/bd77c69d34040a9e9b10d56baa669a10">complete output here</a>), the agent uses <code>git log --all</code> which leaks future commits that directly fix the issue:</p>
<blockquote>
<p dir="auto">&lt;antml:parameter name=&#34;command&#34;&gt;cd /testbed &amp;&amp; git log --oneline --all | grep -i &#34;bracket|parametrize|modpath&#34; | head -10&lt;/antml:parameter&gt;</p>
</blockquote>
<p dir="auto">The results of which directly reveal the fix:</p>
<div data-snippet-clipboard-copy-content="    Fix incorrect result of getmodpath method.
diff --git a/src/_pytest/python.py b/src/_pytest/python.py
index b8b365ad3..734a92f9b 100644
--- a/src/_pytest/python.py
+++ b/src/_pytest/python.py
@@ -285,8 +285,7 @@ class PyobjMixin(PyobjContext):
                     break
             parts.append(name)
         parts.reverse()
-        s = &#34;.&#34;.join(parts)
-        return s.replace(&#34;.[&#34;, &#34;[&#34;)
+        return &#34;.&#34;.join(parts)"><pre><code>    Fix incorrect result of getmodpath method.
diff --git a/src/_pytest/python.py b/src/_pytest/python.py
index b8b365ad3..734a92f9b 100644
--- a/src/_pytest/python.py
+++ b/src/_pytest/python.py
@@ -285,8 +285,7 @@ class PyobjMixin(PyobjContext):
                     break
             parts.append(name)
         parts.reverse()
-        s = &#34;.&#34;.join(parts)
-        return s.replace(&#34;.[&#34;, &#34;[&#34;)
+        return &#34;.&#34;.join(parts)
</code></pre></div>
<p dir="auto">Qwen3-Coder 480B (<code>20250805-openhands-Qwen3-Coder-480B-A35B-Instruct</code>) also has several cases of looking ahead: some examples include <code>django__django-13513</code> (<a href="https://gist.github.com/jacobkahn/7eb86d9cfda451c88e9f5e4f9dddff84">complete output here</a>) uses <code>git log grep=[issue ID]</code> which directly reveals the fix PR which is in the future repo state (future commits).</p>
<blockquote>
<p dir="auto">Running command: cd /workspace/django__django__3.2 &amp;&amp; �[1m�[91mgit log�[0m --oneline --grep=&#34;31926&#34; -i</p>
</blockquote>
<p dir="auto">In another Qwen3-Coder trajectory, <code>Django__django-15572</code>, (<a href="https://gist.github.com/jacobkahn/5ffc328617b30ed570bdfa6a14804b2a">complete output here</a>) where the model specifically finds the commit containing the fix: <a href="https://github.com/django/django/pull/15572/commits">62739b6e2630e37faa68a86a59fad135cc788cd7</a></p>
<blockquote>
<p dir="auto">Command <code>cd /workspace/django__django__4.1 &amp;&amp; �[1m�[91mgit log�[0m --oneline --grep=&#34;33628&#34; �[92m--all�[0m</code> executed with exit code 0.</p>
</blockquote>
<p dir="auto">There are other examples of leakage found in trajectories from GLM 4.5, Qwen3-Coder 30B (<code>20250805-openhands-Qwen3-Coder-30B-A3B-Instruct</code>), and other models.</p>
<p dir="auto">Mitigation will be to properly remove future repository state and any artifacts that contain information the agent could use (reflogs, branches, origins, tags, and more):</p>
<ul dir="auto">
<li>remove origins (branch names can reveal information about fixes)</li>
<li>remove all branches <code>git log --all</code> can be used to query them, plus branches that are tracking a remote origin might contain information about future commits even after a <code>git reset --hard</code></li>
<li>remove the reflog (<code>git reflog</code>) can leak future commit messages that could detail approaches for solutions</li>
</ul>
<p dir="auto">The team (<a data-hovercard-type="user" data-hovercard-url="/users/felixkreuk/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/felixkreuk">@felixkreuk</a>, <a data-hovercard-type="user" data-hovercard-url="/users/UniverseFly/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/UniverseFly">@UniverseFly</a>, <a data-hovercard-type="user" data-hovercard-url="/users/jlko/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jlko">@jlko</a>, <a data-hovercard-type="user" data-hovercard-url="/users/2dot71mily/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/2dot71mily">@2dot71mily</a> and others) will add more details as to findings here and below. We&#39;re still assessing broader impact on evaluations and understanding trajectories for sources of leakage.</p></div></div><div><!--$--><p><span data-direction="ne" role="tooltip" aria-hidden="true" id=":R4daklmb:">UniverseFly, FL33TW00D, bwasti, 2dot71mily, ngoyal2707 and 82 more</span><span data-direction="ne" role="tooltip" aria-hidden="true" id=":R4taklmb:">carbocation, jobs62, JMLX42, philiptaron, lovasoa and 32 more</span><span data-direction="ne" role="tooltip" aria-hidden="true" id=":R5laklmb:">dpedchenko, init27, Zacharias030, shauryr, jain-essential and 12 more</span><span data-direction="ne" role="tooltip" aria-hidden="true" id=":R65aklmb:">bwasti, ngoyal2707, aman-17, FloofCat, jetjodh and 21 more</span></p><!--/$--></div></div></div>
  </body>
</html>
