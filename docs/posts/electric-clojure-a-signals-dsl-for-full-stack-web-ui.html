<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/hyperfiddle/electric">Original</a>
    <h1>Electric Clojure – A signals DSL for full-stack web UI</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto">Electric (formerly known as Photon) is a <strong>reactive and network-aware Clojure/Script DSL</strong> that fully abstracts over client/server state sync at the programming language layer, in order to achieve <strong>strong composition</strong> across the frontend/backend boundary in dynamic web apps. With Electric, backend expressions (i.e. queries) and frontend expressions (i.e. views) compose directly. There is no incidental network divide. The Electric macros will, at compile time, perform deep graph analysis of your hollistic program&#39;s data flow in order to transparently partition and distribute it across the client/server distributed system. There is no client/server dichotomy from the programmer&#39;s perspective. All IO and effects are managed.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/hyperfiddle/electric/blob/master/docs/electric-explainer-5.png"><img src="https://github.com/hyperfiddle/electric/raw/master/docs/electric-explainer-5.png" alt=""/></a></p>
<p dir="auto"><em>Figure: This is not RPC or client-side ORM. The Electric compiler performs deep graph analysis of your unified frontend/backend program to automatically determine the optimal network cut, and then compile it into separate client and server target programs that cooperate and anticipate each other&#39;s needs.</em></p>
<ul dir="auto">
<li>
<p dir="auto"><strong>Fully reactive:</strong> unlike javascript frameworks, in Electric, reactivity is built directly into the programming language itself. Reactive-if, reactive-for, reactive try/catch. When everything is reactive, it feels like nothing is reactive. No observables! No async types! No function coloring problem! De-load your mind and relax.</p>
</li>
<li>
<p dir="auto"><strong>Multi-tier</strong>: frontend and backend are defined in the same expression, same function, same file. It&#39;s not code sharing, it&#39;s code <em>splitting</em>. Let the compiler infer the boundary from your code, instead of contorting your code — nay, your entire architecture — to fit the boundary.</p>
</li>
<li>
<p dir="auto"><strong>Network-transparent</strong>: Electric closures close over server and client scope bindings, all in the same expression. The Electric compiler uses compile-time static knowledge of your source code to slice your expressions into client and server portions. Right through closures, loops and deeply nested function calls.</p>
</li>
<li>
<p dir="auto"><strong>Strong composition:</strong> Network-transparent Electric functions are true functions. They follow function laws and work at the Clojure/Script REPL. You have lambda, recursion, HOFs, closures, dynamic scope, macros, etc: the full undamaged composition power of Lisp. Goodbye &#34;functional core imperative shell&#34;; with Electric the <em>entire system is a function</em>.</p>
</li>
<li>
<p dir="auto"><strong>Multiplayer-native:</strong> everything is automatically multiplayer, 0 LOC cost.</p>
</li>
</ul>
<p dir="auto">Our mission is to raise the abstraction ceiling in web development in the same way that garbage collection did for functional programming, paving the way for something new.</p>
<h2 dir="auto"><a id="user-content-demos" aria-hidden="true" href="#demos"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Demos</h2>
<ul dir="auto">
<li><a href="https://hyperfiddle.notion.site/Photon-progress-Dec-2022-5416dda526e24e5ab7ccb7eb48c797ed" rel="nofollow">Photon progress update Dec 2022</a></li>
<li><a href="https://hyperfiddle.notion.site/Photon-progress-June-2022-57aee367c20e45b3b80366d1abe4fbc3" rel="nofollow">Photon progress update June 2022</a></li>
</ul>
<h2 dir="auto"><a id="user-content-how-it-works" aria-hidden="true" href="#how-it-works"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How it works</h2>
<ul dir="auto">
<li><a href="https://hyperfiddle.notion.site/UIs-are-streaming-DAGs-e181461681a8452bb9c7a9f10f507991" rel="nofollow">UIs are streaming DAGs (2022)</a></li>
<li><a href="https://hyperfiddle.notion.site/Reactive-Clojure-You-don-t-need-a-web-framework-you-need-a-web-language-44b5bfa526be4af282863f34fa1cfffc" rel="nofollow">You don&#39;t need a web framework, you need a web language (2021)</a></li>
</ul>
<h2 dir="auto"><a id="user-content-dependency" aria-hidden="true" href="#dependency"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Dependency</h2>
<div dir="auto" data-snippet-clipboard-copy-content="; stable
{:deps {com.hyperfiddle/electric {:mvn/version &#34;v2-alpha-0-g40c3384e&#34;}}}"><pre><span><span>;</span> stable</span>
{<span>:deps</span> {com.hyperfiddle/electric {<span>:mvn/version</span> <span><span>&#34;</span>v2-alpha-0-g40c3384e<span>&#34;</span></span>}}}</pre></div>
<ul dir="auto">
<li>Production ready for, let&#39;s say back office apps, after 8 months of private user testing and extreme dogfooding in the Hyperfiddle sister project.</li>
<li>As a maturity indicator, the only low level bug in recent memory was a hash collision triggered by scrolling a server-paginated grid over thousands of server-streamed elements.</li>
<li>Stack traces aren&#39;t great; we do have async stack traces already but they need work</li>
</ul>
<p dir="auto">Current development priorities:</p>
<ul dir="auto">
<li>developer experience improvements</li>
<li>network planner improvements</li>
<li>language semantics improvements</li>
</ul>
<p dir="auto">To date we have focused on correct semantics over syntax and performance. Now that we are useful in production, we are using production learnings to drive our priorities.</p>
<h2 dir="auto"><a id="user-content-community" aria-hidden="true" href="#community"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Community</h2>
<ul dir="auto">
<li>#hyperfiddle @ clojurians.net for support</li>
<li>follow <a href="https://twitter.com/dustingetz" rel="nofollow">https://twitter.com/dustingetz</a> for progress updates</li>
</ul>
<h2 dir="auto"><a id="user-content-getting-started" aria-hidden="true" href="#getting-started"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Getting Started</h2>
<p dir="auto">Standalone starter repo to fork:</p>
<ul dir="auto">
<li><a href="https://github.com/hyperfiddle/electric-starter-app">https://github.com/hyperfiddle/electric-starter-app</a></li>
</ul>
<p dir="auto">Demos, examples, tutorials are in this repo, see <a href="https://github.com/hyperfiddle/photon/tree/master/src-docs/user">src-docs/user/</a>.</p>
<ul dir="auto">
<li><code>clj -A:dev -X user/main</code> serves demos at <code>http://localhost:8080</code></li>
<li><code>dev</code> alias;  <code>(user/main)</code> compiles assets and serves app. see <a href="https://github.com/hyperfiddle/photon/blob/master/src-dev/user.clj">src-dev/user.clj</a> &amp; <a href="https://github.com/hyperfiddle/photon/blob/master/src-dev/user.cljs">user.cljs</a></li>
</ul>
<h2 dir="auto"><a id="user-content-ide-setup" aria-hidden="true" href="#ide-setup"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>IDE setup</h2>
<ul dir="auto">
<li><a href="https://github.com/hyperfiddle/electric/blob/master/docs/ide_emacs.md">docs/ide_emacs.md</a></li>
<li><a href="https://github.com/hyperfiddle/electric/blob/master/docs/ide_cursive.md">docs/ide_cursive.md</a></li>
</ul>
<h2 dir="auto"><a id="user-content-clojure-compat-matrix" aria-hidden="true" href="#clojure-compat-matrix"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Clojure compat matrix</h2>
<p dir="auto">We target full Clojure/Script compatibility (say 99%). That means you can take a pre-existing Clojure snippet and copy/paste it into an Electric function body and it will &#34;work&#34; and produce the correct result. Including host interop syntax, use of pre-existing macros, etc.</p>
<p dir="auto">Gaps:</p>
<ul dir="auto">
<li>no variable e/fn arity yet</li>
<li>no recursion yet - see workaround in <a href="https://github.com/hyperfiddle/electric/blob/master/src-docs/user/photon/photon_recursion.cljc">src-docs/user/photon/photon_recursion</a></li>
<li>reactive multimethods</li>
<li>reactive protocols</li>
<li>...</li>
</ul>
<h2 dir="auto"><a id="user-content-errors-and-issues" aria-hidden="true" href="#errors-and-issues"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Errors and issues</h2>
<ul dir="auto">
<li>Requires -Xss2m to compile. The default of 1m ThreadStackSize is exceeded by the Electric compiler due to large macroexpansions resulting in false StackOverflowError during analysis.</li>
<li>:eval opcode - probably interop syntax, or a macro like assert that expands to interop syntax</li>
<li><code>Unbound var.</code> Usually means wrong peer, i.e. accessed server-only var on client</li>
</ul>
</article>
          </div></div>
  </body>
</html>
