<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/ggerganov/whisper.cpp/releases/tag/v1.4.0">Original</a>
    <h1>Whisper.cpp v1.4.0</h1>
    
    <div id="readability-page-1" class="page"><div data-pjax="true" data-test-selector="body-content" data-view-component="true"><h2>Overview</h2>
<p>This is a new major release adding <strong>integer quantization</strong> and <strong>partial GPU (NVIDIA)</strong> support</p>
<h3>Integer quantization</h3>
<p>This allows the <code>ggml</code> Whisper models to be converted from the default 16-bit floating point weights to 4, 5 or 8 bit integer weights.</p>
<ul>
<li>Supported quantization modes: <code>Q4_0</code>, <code>Q4_1</code>, <code>Q4_2</code>, <code>Q5_0</code>, <code>Q5_1</code>, <code>Q8_0</code></li>
<li>Implementation details: <a data-error-text="Failed to load title" data-id="1600168706" data-permission-text="Title is private" data-url="https://github.com/ggerganov/whisper.cpp/issues/540" data-hovercard-type="pull_request" data-hovercard-url="/ggerganov/whisper.cpp/pull/540/hovercard" href="https://github.com/ggerganov/whisper.cpp/pull/540">#540</a></li>
<li>Usage instructions: <a href="https://github.com/ggerganov/whisper.cpp#quantization">README</a></li>
<li>All WASM examples now support <code>Q5</code> quantized models: <a href="https://whisper.ggerganov.com" rel="nofollow">https://whisper.ggerganov.com</a></li>
</ul>
<p>Here is a quantitative evaluation of the different quantization modes applied to the <a href="https://github.com/facebookresearch/llama">LLaMA</a> and <a href="https://github.com/BlinkDL/RWKV-LM">RWKV</a> large language models. These results can give an impression about the expected quality, size and speed for quantized Whisper models:</p>
<h4>LLaMA quantization (measured on M1 Pro)</h4>
<table>
<thead>
<tr>
<th>Model</th>
<th>Measure</th>
<th>F16</th>
<th>Q4_0</th>
<th>Q4_1</th>
<th>Q4_2</th>
<th>Q5_0</th>
<th>Q5_1</th>
<th>Q8_0</th>
</tr>
</thead>
<tbody>
<tr>
<td>7B</td>
<td>perplexity</td>
<td>5.9565</td>
<td>6.2103</td>
<td>6.1286</td>
<td>6.1698</td>
<td>6.0139</td>
<td>5.9934</td>
<td>5.9571</td>
</tr>
<tr>
<td>7B</td>
<td>file size</td>
<td>13.0G</td>
<td>4.0G</td>
<td>4.8G</td>
<td>4.0G</td>
<td>4.4G</td>
<td>4.8G</td>
<td>7.1G</td>
</tr>
<tr>
<td>7B</td>
<td>ms/tok @ 4th</td>
<td>128</td>
<td>56</td>
<td>61</td>
<td>84</td>
<td>91</td>
<td>95</td>
<td>75</td>
</tr>
<tr>
<td>7B</td>
<td>ms/tok @ 8th</td>
<td>128</td>
<td>47</td>
<td>55</td>
<td>48</td>
<td>53</td>
<td>59</td>
<td>75</td>
</tr>
<tr>
<td>7B</td>
<td>bits/weight</td>
<td>16.0</td>
<td>5.0</td>
<td>6.0</td>
<td>5.0</td>
<td>5.5</td>
<td>6.0</td>
<td>9.0</td>
</tr>
<tr>
<td>13B</td>
<td>perplexity</td>
<td>5.2455</td>
<td>5.3748</td>
<td>5.3471</td>
<td>5.3433</td>
<td>5.2768</td>
<td>5.2582</td>
<td>5.2458</td>
</tr>
<tr>
<td>13B</td>
<td>file size</td>
<td>25.0G</td>
<td>7.6G</td>
<td>9.1G</td>
<td>7.6G</td>
<td>8.4G</td>
<td>9.1G</td>
<td>14G</td>
</tr>
<tr>
<td>13B</td>
<td>ms/tok @ 4th</td>
<td>239</td>
<td>104</td>
<td>113</td>
<td>160</td>
<td>176</td>
<td>185</td>
<td>141</td>
</tr>
<tr>
<td>13B</td>
<td>ms/tok @ 8th</td>
<td>240</td>
<td>85</td>
<td>99</td>
<td>97</td>
<td>108</td>
<td>117</td>
<td>147</td>
</tr>
<tr>
<td>13B</td>
<td>bits/weight</td>
<td>16.0</td>
<td>5.0</td>
<td>6.0</td>
<td>5.0</td>
<td>5.5</td>
<td>6.0</td>
<td>9.0</td>
</tr>
</tbody>
</table>
<p>ref: <a href="https://github.com/ggerganov/llama.cpp#quantization">https://github.com/ggerganov/llama.cpp#quantization</a></p>
<h4>RWKV quantization</h4>
<table>
<thead>
<tr>
<th>Format</th>
<th>Perplexity (169M)</th>
<th>Latency, ms (1.5B)</th>
<th>File size, GB (1.5B)</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Q4_0</code></td>
<td>17.507</td>
<td><em>76</em></td>
<td><strong>1.53</strong></td>
</tr>
<tr>
<td><code>Q4_1</code></td>
<td>17.187</td>
<td><strong>72</strong></td>
<td>1.68</td>
</tr>
<tr>
<td><code>Q4_2</code></td>
<td>17.060</td>
<td>85</td>
<td><strong>1.53</strong></td>
</tr>
<tr>
<td><code>Q5_0</code></td>
<td>16.194</td>
<td>78</td>
<td><em>1.60</em></td>
</tr>
<tr>
<td><code>Q5_1</code></td>
<td>15.851</td>
<td>81</td>
<td>1.68</td>
</tr>
<tr>
<td><code>Q8_0</code></td>
<td><em>15.652</em></td>
<td>89</td>
<td>2.13</td>
</tr>
<tr>
<td><code>FP16</code></td>
<td><strong>15.623</strong></td>
<td>117</td>
<td>2.82</td>
</tr>
<tr>
<td><code>FP32</code></td>
<td><strong>15.623</strong></td>
<td>198</td>
<td>5.64</td>
</tr>
</tbody>
</table>
<p>ref: <a data-error-text="Failed to load title" data-id="1670492004" data-permission-text="Title is private" data-url="https://github.com/ggerganov/ggml/issues/89" data-hovercard-type="issue" data-hovercard-url="/ggerganov/ggml/issues/89/hovercard?comment_id=1528781992&amp;comment_type=issue_comment" href="https://github.com/ggerganov/ggml/issues/89#issuecomment-1528781992">ggerganov/ggml#89 (comment)</a></p>
<p>This feature is possible thanks to the many contributions in the <a href="https://github.com/ggerganov/llama.cpp">llama.cpp</a> project: <a href="https://github.com/users/ggerganov/projects/2">https://github.com/users/ggerganov/projects/2</a></p>
<h3>GPU support via cuBLAS</h3>
<p>Using cuBLAS results mainly in improved Encoder inference speed. I haven&#39;t done proper timings, but one can expect at least 2-3 times faster Encoder evaluation with modern NVIDIA GPU cards compared to CPU-only processing. Feel free to post your Encoder benchmarks in issue <a data-error-text="Failed to load title" data-id="1422794711" data-permission-text="Title is private" data-url="https://github.com/ggerganov/whisper.cpp/issues/89" data-hovercard-type="issue" data-hovercard-url="/ggerganov/whisper.cpp/issues/89/hovercard" href="https://github.com/ggerganov/whisper.cpp/issues/89">#89</a>.</p>
<ul>
<li>Implementation details: <a data-error-text="Failed to load title" data-id="1689623785" data-permission-text="Title is private" data-url="https://github.com/ggerganov/whisper.cpp/issues/834" data-hovercard-type="pull_request" data-hovercard-url="/ggerganov/whisper.cpp/pull/834/hovercard" href="https://github.com/ggerganov/whisper.cpp/pull/834">#834</a></li>
<li>Usage instructions: <a href="https://github.com/ggerganov/whisper.cpp#nvidia-gpu-support-via-cublas">README</a></li>
</ul>
<p>This is another feature made possible by the <a href="https://github.com/ggerganov/llama.cpp">llama.cpp</a> project. Special recognition to <a data-hovercard-type="user" data-hovercard-url="/users/slaren/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/slaren">@slaren</a> for putting almost all of this work together</p>
<hr/>
<p>This release remains in &#34;beta&#34; stage as I haven&#39;t verified that everything works as expected.</p>
<h2>What&#39;s Changed</h2>
<ul>
<li>Updated escape_double_quotes() Function by <a data-hovercard-type="user" data-hovercard-url="/users/tauseefmohammed2/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/tauseefmohammed2">@tauseefmohammed2</a> in <a data-error-text="Failed to load title" data-id="1670305972" data-permission-text="Title is private" data-url="https://github.com/ggerganov/whisper.cpp/issues/776" data-hovercard-type="pull_request" data-hovercard-url="/ggerganov/whisper.cpp/pull/776/hovercard" href="https://github.com/ggerganov/whisper.cpp/pull/776">#776</a></li>
<li>examples : add missing #include  by <a data-hovercard-type="user" data-hovercard-url="/users/pH5/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/pH5">@pH5</a> in <a data-error-text="Failed to load title" data-id="1674217312" data-permission-text="Title is private" data-url="https://github.com/ggerganov/whisper.cpp/issues/798" data-hovercard-type="pull_request" data-hovercard-url="/ggerganov/whisper.cpp/pull/798/hovercard" href="https://github.com/ggerganov/whisper.cpp/pull/798">#798</a></li>
<li>Flush upon finishing inference by <a data-hovercard-type="user" data-hovercard-url="/users/tarasglek/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/tarasglek">@tarasglek</a> in <a data-error-text="Failed to load title" data-id="1677629852" data-permission-text="Title is private" data-url="https://github.com/ggerganov/whisper.cpp/issues/811" data-hovercard-type="pull_request" data-hovercard-url="/ggerganov/whisper.cpp/pull/811/hovercard" href="https://github.com/ggerganov/whisper.cpp/pull/811">#811</a></li>
<li>Escape quotes in csv output by <a data-hovercard-type="user" data-hovercard-url="/users/laytan/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/laytan">@laytan</a> in <a data-error-text="Failed to load title" data-id="1679806505" data-permission-text="Title is private" data-url="https://github.com/ggerganov/whisper.cpp/issues/815" data-hovercard-type="pull_request" data-hovercard-url="/ggerganov/whisper.cpp/pull/815/hovercard" href="https://github.com/ggerganov/whisper.cpp/pull/815">#815</a></li>
<li>C++11style by <a data-hovercard-type="user" data-hovercard-url="/users/wuyudi/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/wuyudi">@wuyudi</a> in <a data-error-text="Failed to load title" data-id="1669589288" data-permission-text="Title is private" data-url="https://github.com/ggerganov/whisper.cpp/issues/768" data-hovercard-type="pull_request" data-hovercard-url="/ggerganov/whisper.cpp/pull/768/hovercard" href="https://github.com/ggerganov/whisper.cpp/pull/768">#768</a></li>
<li>Optionally allow a Core ML build of Whisper to work with or without Core ML models by <a data-hovercard-type="user" data-hovercard-url="/users/Canis-UK/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Canis-UK">@Canis-UK</a> in <a data-error-text="Failed to load title" data-id="1678841983" data-permission-text="Title is private" data-url="https://github.com/ggerganov/whisper.cpp/issues/812" data-hovercard-type="pull_request" data-hovercard-url="/ggerganov/whisper.cpp/pull/812/hovercard" href="https://github.com/ggerganov/whisper.cpp/pull/812">#812</a></li>
<li>add some tips about in the readme of the android project folder by <a data-hovercard-type="user" data-hovercard-url="/users/Zolliner/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Zolliner">@Zolliner</a> in <a data-error-text="Failed to load title" data-id="1679898367" data-permission-text="Title is private" data-url="https://github.com/ggerganov/whisper.cpp/issues/816" data-hovercard-type="pull_request" data-hovercard-url="/ggerganov/whisper.cpp/pull/816/hovercard" href="https://github.com/ggerganov/whisper.cpp/pull/816">#816</a></li>
<li>whisper: Use correct seek_end when offset is used by <a data-hovercard-type="user" data-hovercard-url="/users/ThijsRay/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ThijsRay">@ThijsRay</a> in <a data-error-text="Failed to load title" data-id="1689547302" data-permission-text="Title is private" data-url="https://github.com/ggerganov/whisper.cpp/issues/833" data-hovercard-type="pull_request" data-hovercard-url="/ggerganov/whisper.cpp/pull/833/hovercard" href="https://github.com/ggerganov/whisper.cpp/pull/833">#833</a></li>
<li>ggml : fix 32-bit ARM NEON by <a data-hovercard-type="user" data-hovercard-url="/users/ggerganov/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ggerganov">@ggerganov</a> in <a data-error-text="Failed to load title" data-id="1689648884" data-permission-text="Title is private" data-url="https://github.com/ggerganov/whisper.cpp/issues/836" data-hovercard-type="pull_request" data-hovercard-url="/ggerganov/whisper.cpp/pull/836/hovercard" href="https://github.com/ggerganov/whisper.cpp/pull/836">#836</a></li>
<li>Add CUDA support via cuBLAS by <a data-hovercard-type="user" data-hovercard-url="/users/ggerganov/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ggerganov">@ggerganov</a> in <a data-error-text="Failed to load title" data-id="1689623785" data-permission-text="Title is private" data-url="https://github.com/ggerganov/whisper.cpp/issues/834" data-hovercard-type="pull_request" data-hovercard-url="/ggerganov/whisper.cpp/pull/834/hovercard" href="https://github.com/ggerganov/whisper.cpp/pull/834">#834</a></li>
<li>Integer quantisation support by <a data-hovercard-type="user" data-hovercard-url="/users/ggerganov/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ggerganov">@ggerganov</a> in <a data-error-text="Failed to load title" data-id="1600168706" data-permission-text="Title is private" data-url="https://github.com/ggerganov/whisper.cpp/issues/540" data-hovercard-type="pull_request" data-hovercard-url="/ggerganov/whisper.cpp/pull/540/hovercard" href="https://github.com/ggerganov/whisper.cpp/pull/540">#540</a></li>
</ul>
<h2>New Contributors</h2>
<ul>
<li><a data-hovercard-type="user" data-hovercard-url="/users/tauseefmohammed2/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/tauseefmohammed2">@tauseefmohammed2</a> made their first contribution in <a data-error-text="Failed to load title" data-id="1670305972" data-permission-text="Title is private" data-url="https://github.com/ggerganov/whisper.cpp/issues/776" data-hovercard-type="pull_request" data-hovercard-url="/ggerganov/whisper.cpp/pull/776/hovercard" href="https://github.com/ggerganov/whisper.cpp/pull/776">#776</a></li>
<li><a data-hovercard-type="user" data-hovercard-url="/users/pH5/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/pH5">@pH5</a> made their first contribution in <a data-error-text="Failed to load title" data-id="1674217312" data-permission-text="Title is private" data-url="https://github.com/ggerganov/whisper.cpp/issues/798" data-hovercard-type="pull_request" data-hovercard-url="/ggerganov/whisper.cpp/pull/798/hovercard" href="https://github.com/ggerganov/whisper.cpp/pull/798">#798</a></li>
<li><a data-hovercard-type="user" data-hovercard-url="/users/tarasglek/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/tarasglek">@tarasglek</a> made their first contribution in <a data-error-text="Failed to load title" data-id="1677629852" data-permission-text="Title is private" data-url="https://github.com/ggerganov/whisper.cpp/issues/811" data-hovercard-type="pull_request" data-hovercard-url="/ggerganov/whisper.cpp/pull/811/hovercard" href="https://github.com/ggerganov/whisper.cpp/pull/811">#811</a></li>
<li><a data-hovercard-type="user" data-hovercard-url="/users/laytan/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/laytan">@laytan</a> made their first contribution in <a data-error-text="Failed to load title" data-id="1679806505" data-permission-text="Title is private" data-url="https://github.com/ggerganov/whisper.cpp/issues/815" data-hovercard-type="pull_request" data-hovercard-url="/ggerganov/whisper.cpp/pull/815/hovercard" href="https://github.com/ggerganov/whisper.cpp/pull/815">#815</a></li>
<li><a data-hovercard-type="user" data-hovercard-url="/users/wuyudi/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/wuyudi">@wuyudi</a> made their first contribution in <a data-error-text="Failed to load title" data-id="1669589288" data-permission-text="Title is private" data-url="https://github.com/ggerganov/whisper.cpp/issues/768" data-hovercard-type="pull_request" data-hovercard-url="/ggerganov/whisper.cpp/pull/768/hovercard" href="https://github.com/ggerganov/whisper.cpp/pull/768">#768</a></li>
<li><a data-hovercard-type="user" data-hovercard-url="/users/Canis-UK/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Canis-UK">@Canis-UK</a> made their first contribution in <a data-error-text="Failed to load title" data-id="1678841983" data-permission-text="Title is private" data-url="https://github.com/ggerganov/whisper.cpp/issues/812" data-hovercard-type="pull_request" data-hovercard-url="/ggerganov/whisper.cpp/pull/812/hovercard" href="https://github.com/ggerganov/whisper.cpp/pull/812">#812</a></li>
<li><a data-hovercard-type="user" data-hovercard-url="/users/Zolliner/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Zolliner">@Zolliner</a> made their first contribution in <a data-error-text="Failed to load title" data-id="1679898367" data-permission-text="Title is private" data-url="https://github.com/ggerganov/whisper.cpp/issues/816" data-hovercard-type="pull_request" data-hovercard-url="/ggerganov/whisper.cpp/pull/816/hovercard" href="https://github.com/ggerganov/whisper.cpp/pull/816">#816</a></li>
<li><a data-hovercard-type="user" data-hovercard-url="/users/ThijsRay/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ThijsRay">@ThijsRay</a> made their first contribution in <a data-error-text="Failed to load title" data-id="1689547302" data-permission-text="Title is private" data-url="https://github.com/ggerganov/whisper.cpp/issues/833" data-hovercard-type="pull_request" data-hovercard-url="/ggerganov/whisper.cpp/pull/833/hovercard" href="https://github.com/ggerganov/whisper.cpp/pull/833">#833</a></li>
</ul>
<p><strong>Full Changelog</strong>: <a href="https://github.com/ggerganov/whisper.cpp/compare/v1.3.0...v1.4.0"><tt>v1.3.0...v1.4.0</tt></a></p></div></div>
  </body>
</html>
