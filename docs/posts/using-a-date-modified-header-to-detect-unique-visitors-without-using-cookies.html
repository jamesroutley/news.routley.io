<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://notes.normally.com/cookieless-unique-visitor-counts/">Original</a>
    <h1>Using a date-modified header to detect unique visitors without using cookies</h1>
    
    <div id="readability-page-1" class="page"><article>
    

    <div>
        <h4 id="how-do-you-distinguish-unique-visits-without-using-cookies">How do you distinguish unique visits without using cookies? </h4><p>For most cookie-based solutions, it&#39;s easy: Store a unique identifier (UID) in a cookie on your computer, so we can identify you when you return. But if there&#39;s no cookie, there&#39;s no UID... or so you&#39;d think.</p><p>Many privacy-focused analytics services will generate and store a UID on the server instead of saving it in a cookie - based on a hash of your <a href="https://whatmyuseragent.com/">User Agent</a>, IP, Location, Date etc. This &#34;fingerprint&#34; is stored in a database and checked every time you visit the site to see if you&#39;ve visited it before. To improve privacy, it can be washed from the database once it&#39;s served it&#39;s purpose e.g. on a daily basis. Some analytics services simply rely on the page referrer being on the same domain as your current URL.</p><h4 id="privacy-issues">Privacy issues</h4><p>Previous experiments at Normally have revealed that linking data points in a database in any way, such as with a UID, Â has the potential to reveal someone&#39;s identity. Connecting just few data points such as the city, time and visited pages could tell us more than we need to know about that visitor and sometimes lead to their identification in the real world.</p><p>While building <a href="https://withcabin.com">Cabin</a>, we didn&#39;t want to use UIDs at all, and the referrer couldn&#39;t be relied upon in all browsers (some browsers and extensions can hide it). So we came up with a different approach.</p><h4 id="the-solution">The solution</h4><p>Our solution doesn&#39;t require a database or anything stored on the server side. It even works in the oldest browsers. Here&#39;s how: </p><p>When the browser pings our server from a website for the first time, we send back a response with a header set to <code>Cache-Control: no-cache</code>, telling the browser to store the request in its cache but <strong>revalidate it with the origin server</strong> before each use. But most importantly, we send a header which is a date set to the beginning of each day: </p><p><code>last-modified: Wed, 30 Nov 2022 00:00:00 GMT</code></p><p>From now on, every time this request is made again, the server receives the date and adjusts it by <strong>one second</strong>, and returns it to the browser:</p><p><code>last-modified: Wed, 30 Nov 2022 00:00:01 GMT</code></p><p>This way, the server can calculate the distance in seconds since midnight to give us a visit count. </p><!--kg-card-begin: html--><p>The visit count is encoded <b>within the date</b> stored in the cached request on the visitor&#39;s machine.</p><!--kg-card-end: html--><figure><img src="https://notes.normally.com/content/images/2022/11/date-modified--1-.png" alt="" loading="lazy" width="1552" height="1120" srcset="https://notes.normally.com/content/images/size/w600/2022/11/date-modified--1-.png 600w, https://notes.normally.com/content/images/size/w1000/2022/11/date-modified--1-.png 1000w, https://notes.normally.com/content/images/2022/11/date-modified--1-.png 1552w" sizes="(min-width: 720px) 720px"/></figure><p>See this in action here ðŸ‘‰ <a href="https://lastmodified.normally.com/">demo</a> </p><h4 id="counting-bounces-too">Counting bounces too</h4><p>A bounce is when a visitor lands on your page and leaves that same page without visiting another page on your site. We can distinguish unique visitors (an empty <code>last-modified</code>), but we can also leverage our counter to sum bounces during the day by assuming a unique visit <em>is</em> a bounce until we receive the second request. Following requests are then ignored.</p><h6 id="first-visit">First visit:</h6><!--kg-card-begin: html--><pre>visits		uniques		bounces
+1		+1		+1
</pre><!--kg-card-end: html--><h6 id="second-visit">Second visit:</h6><!--kg-card-begin: html--><pre>visits		uniques		bounces
+1		0		-1
</pre><!--kg-card-end: html--><h6 id="subsequent-visits">Subsequent visits:</h6><!--kg-card-begin: html--><pre>visits		uniques		bounces
+1		0		0
</pre><!--kg-card-end: html--><h4 id="conclusion">Conclusion</h4><p>Although these headers aren&#39;t intended for this, we are only updating and observing them on the server in line with browser standards.</p><p>This is <strong>great for privacy</strong> as we don&#39;t need to use cookies, IP addresses, fingerprinting or unique identifiers. In our tests, this method proved durable enough to be the most reliable method of counting unique visitors without using cookies.</p><p>We use this method in <a href="https://withcabin.com">Cabin</a>, our Privacy-first, carbon-conscious web analytics. Cabin is also compliant with all privacy laws. It&#39;s simple, lightweight, and enables you to track carbon emissions across your site. It&#39;s a great alternative to Google Analytics. Sign up for a free account to see it in action.</p><figure><a href="https://withcabin.com/"><div><p>Cabin | Privacy-first, Google Analytics alternative</p><p>No cookies, no consent banners, no ad networks, 100% GDPR &amp; CCPA compliant, low footprint web analytics. The best alternative to Google Analytics.</p><p><img src="https://withcabin.com/favicon.ico" alt=""/></p></div><p><img src="https://withcabin.com/withcabin.com-social.jpg" alt=""/></p></a></figure><h5 id="about-the-author">About the Author</h5><p>Nic Mulvaney is Director of Applied Technologies at <a href="https://normally.com">Normally</a>. </p><hr/><!--kg-card-begin: html--><!--kg-card-end: html-->
    </div>

    

</article></div>
  </body>
</html>
