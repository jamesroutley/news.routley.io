<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.petercollingridge.co.uk/blog/mathematics-toys-and-games/dobble/">Original</a>
    <h1>Dobble (The Mathematics Of) (2018)</h1>
    
    <div id="readability-page-1" class="page"><article>
        


    
        
            <h2>Introduction</h2>
        
    
        
            <div>
    <div>
        


    
        
            <section>
                <div><p><a href="https://rulesofplay.co.uk/products/dobble"><i>Dobble</i></a> (also called <a href="https://boardgamegeek.com/boardgame/63268/spot-it"><i>Spot It!</i></a>), is a card game that uses special circular cards, each with a number (8 in the standard pack, 6 in the kids pack) of symbols or image. There are various ways to play, but they all the games involve finding which symbol is common to two cards. The cards are designed so that any two cards will always have one symbol in common.</p><p>This got us wondering: how you could design a deck that way?</p></div>
            </section>
        
    

    </div>
    <div>
        


    
        
            <section>
                <img alt="Three Dobble for kids cards" height="224" src="https://media.petercollingridge.co.uk/images/IMG_2778.width-300.jpg" width="300"/>
            </section>
        
    

    </div>
</div>
        
    
        
            <section>
                <div><p>More formally:</p><ul><li>Given $n$ different symbols, how many cards can you make, and how many symbols should be on each card?</li><li>Given $s$ symbols per card, how many cards can you make and how many different symbols do you need?</li><li>If you want to make $k$ cards, how many symbols do you need on each card, and how many in total?</li></ul><p>The requirements for the cards are:</p></div>
            </section>
        
    
        
            <section>
                <p><i>Requirement 1: every card has exactly one symbol in common with every other card.</i></p>
            </section>
        
    
        
            <section>
                <div><p>After playing around for a while, I realised that, contrary to my expectation, there&#39;s probably no simple formula for the number of symbols and cards. Instead, there is quite a lot of room for exploration. A couple of weeks later, someone asked one of these exact questions on a Facebook group called <a href="https://www.facebook.com/groups/1923323131245618/permalink/2292863077624953/"><i>Actually good math problems</i></a> (it&#39;s a closed group, so you have to join to see the post).</p><p>No answer was given on the group, but someone posted links (included at the end of this post) to articles on pairwise balanced design and incidence geometry, so it seems there is real mathematical value in some of these concepts. This article however, is about my more empirical exploration.</p></div>
            </section>
        
    
        
            <h2>Starting simple</h2>
        
    
        
            <section>
                <div><p>To get a handle on the problem, I started playing about, starting with the simplest situation and gradually building up. I found it easiest to vary the total number of symbols, which I&#39;ll call $n$. I recommend trying to create some decks with small values of $n$.</p><p>With <b>one symbol</b>, e.g. $\{A\}$, you can have one card: a card with the symbol $A$. Technically, given the requirements above, you could have infinite cards, each with just an $A$ on it, so we&#39;ll add a requirement.</p><p><i>Requirement 4: each card must be unique.</i></p><p>With <b>two symbols</b>, $\{A, B\}$, you can still only have one card: one with the symbols $A$ and $B$ on it (which I&#39;ll write as $AB$). Technically we could instead have just a card with an $A$ or just a card with a $B$, but we&#39;ll add another requirement.</p><p><i>Requirement 5: given $n$ symbols, each symbol must appear on at least one card.</i></p></div>
            </section>
        
    
        
            <section>
                <p><h3>Smallest non-trivial deck</h3></p>
            </section>
        
    
        
            <div>
    <div>
        


    
        
            <section>
                <div><p>With <b>three symbols</b>, $\{A, B, C\}$, we have something more interesting: three cards, each with two symbols: $AB$, $AC$ and $BC$. You can even arrange them a bit like dominos, joined by their common symbols.</p><p>Is there something special about the number three?</p></div>
            </section>
        
    

    </div>
    <p>
        


    
        
            <section>
                <svg viewBox="-75 -42 150 92">
<g transform="translate(0 -30)">
  <rect x="-36" y="-12" width="72" height="24" rx="8" ry="8"></rect>
  <text x="-18" y="0">A</text>
  <text x="18" y="0">B</text>
</g>
<g transform="rotate(120) translate(0 -30)">
  <rect x="-36" y="-12" width="72" height="24" rx="8" ry="8"></rect>
  <text x="-18" y="0">B</text>
  <text x="18" y="0">C</text>
</g>
<g transform="rotate(240) translate(0 -30)">
  <rect x="-36" y="-12" width="72" height="24" rx="8" ry="8"></rect>
  <text x="-18" y="0">C</text>
  <text x="18" y="0">A</text>
</g>
</svg>
            </section>
        
    

    </p>
</div>
        
    
        
            <section>
                <p><h3>A trivial general solution</h3></p>
            </section>
        
    
        
            <div>
    <div>
        


    
        
            <section>
                <div><p>With <b>four symbols</b>, you could have three cards: $AB$, $AC$ and $AD$. However, since Dobble involve spotting the common symbols between cards, this would make the game trivial (because the common symbol would always be the same). It also makes the problem less interesting, because we can can always create $n - 1$ cards this way. So we&#39;ll add final(ish) requirement.</p><p><i>Requirement 6: there should not be one symbol common to all cards.</i></p></div>
            </section>
        
    

    </div>
    <p>
        


    
        
            <section>
                <svg viewBox="-70 -70 160 140">
<g transform="translate(5)">
  <rect x="0" y="-12" width="72" height="24" rx="8" ry="8"></rect>
  <text x="18" y="0">A</text>
  <text x="54" y="0">B</text>
</g>
<g transform="rotate(120) translate(5)">
  <rect x="0" y="-12" width="72" height="24" rx="8" ry="8"></rect>
  <text x="18" y="0">A</text>
  <text x="54" y="0">C</text>
</g>
<g transform="rotate(240) translate(5)">
  <rect x="0" y="-12" width="72" height="24" rx="8" ry="8"></rect>
  <text x="18" y="0">A</text>
  <text x="54" y="0">D</text>
</g>
</svg>
            </section>
        
    

    </p>
</div>
        
    
        
            <section>
                <div><p>I worded the requirement so we can still have decks of one card. With this requirement our only solution is a deck of one card: $ABCD$. We need more than two symbols per card because <i>with two symbols per card, three cards most you can have</i>. I&#39;ll explain this later, but if you play about with the symbols for a while this should soon become clear. It relates to the fact that with three cards, each card has two symbols and each symbol appears on two cards.</p><h3>The pigeonhole principle</h3></div>
            </section>
        
    
        
            <div>
    <div>
        


    
        
            <section>
                <p>For $n = 4$, we need to have at least three symbols per card. But with three symbols per card there are six positions in which to put four symbols, so we can&#39;t avoid an overlap of two symbols .</p>
            </section>
        
    

    </div>
    <p>
        


    
        
            <section>
                <svg viewBox="-32 0 160 52">
  <rect x="0" y="0" width="72" height="24" rx="8" ry="8"></rect>
  <text x="12" y="12">A</text>
  <text fill="red" x="36" y="12">B</text>
  <text fill="red" x="60" y="12">C</text>
  <rect x="24" y="28" width="72" height="24" rx="8" ry="8"></rect>
  <text fill="red" x="36" y="40">B</text>
  <text fill="red" x="60" y="40">C</text>
  <text x="84" y="40">D</text>
</svg>
            </section>
        
    

    </p>
</div>
        
    
        
            <section>
                <p>This is an example of the pigeonhole principle, which is an obvious-sounding idea that is surprisingly useful in many contexts. It states that:</p>
            </section>
        
    
        
            <section>
                <blockquote>If $n$ items are put into $m$ containers, with $n &gt; m$, then at least one container must contain more than one item.</blockquote>
            </section>
        
    
        
            <div>
    <div>
        


    
        
            <section>
                <p>With <b>five symbols</b> we now have &#34;space&#34; for three symbols per card with an overlap of one, for example: $ABC$ and $CDE$. Technically, this fails to meet requirement 6, since $C$ is common to all two cards, so I decided to alter requirement 6 slightly. This isn&#39;t really necessary, but I think it makes the graphs slightly nicer later.</p>
            </section>
        
    

    </div>
    <p>
        


    
        
            <section>
                <svg viewBox="-20 0 160 52">
  <rect x="0" y="0" width="72" height="24" rx="8" ry="8"></rect>
  <text x="12" y="12">A</text>
  <text x="36" y="12">B</text>
  <text x="60" y="12">C</text>
  <rect x="48" y="28" width="72" height="24" rx="8" ry="8"></rect>
  <text x="60" y="40">C</text>
  <text x="84" y="40">D</text>
  <text x="108" y="40">E</text>
</svg>
            </section>
        
    

    </p>
</div>
        
    
        
            <section>
                <p><i>Requirement 6 (amended): there should not be one symbol common to all cards if $n &gt; 2$.</i></p>
            </section>
        
    
        
            <h2>Triangular numbers</h2>
        
    
        
            <div>
    <div>
        


    
        
            <section>
                <div><p>With five symbols, three symbols per card works because the first card provides three symbols, whilst the second provides two additional symbols and one to overlap. More generally, if we have $s$ symbols per card, then we can make two cards when the number of symbols is:</p><p>$\qquad k = 2, n = s + (s - 1) = 2s - 1$</p></div>
            </section>
        
    

    </div>
    <p>
        


    
        
            <section>
                <svg viewBox="0 0 144 52">
    <rect x="0" y="0" width="120" height="24" rx="8" ry="8"></rect>
    <rect x="0" y="28" width="120" height="24" rx="8" ry="8"></rect>
    <text x="12" y="12">A</text>
    <text x="12" y="40">A</text>
    <text x="36" y="12">B</text>
    <text x="60" y="12">C</text>
    <text x="84" y="40">D</text>
    <text x="108" y="40">E</text>
    <line x1="6" y1="20" x2="66" y2="20"></line>
    <line x1="78" y1="48" x2="114" y2="48"></line>
</svg>
            </section>
        
    

    </p>
</div>
        
    
        
            <div>
    <div>
        


    
        
            <section>
                <div><p>With <b>six symbols</b>, we can go one better. The first card gives us three symbols, the second adds two more, and the third add another. In general, if we have $s$ symbols per card, then we will be able to make three cards when the number of symbols is:</p><p>$\qquad k = 3, n = s + (s - 1) + (s - 2) = 3s - 3$</p></div>
            </section>
        
    

    </div>
    <p>
        


    
        
            <section>
                <svg viewBox="0 0 144 80">
    <rect x="0" y="0" width="144" height="24" rx="8" ry="8"></rect>
    <rect x="0" y="28" width="144" height="24" rx="8" ry="8"></rect>
    <rect x="0" y="56" width="144" height="24" rx="8" ry="8"></rect>
    <text x="12" y="12">A</text>
    <text x="12" y="40">A</text>
    <text x="36" y="12">B</text>
    <text x="36" y="68">B</text>
    <text x="60" y="12">C</text>
    <text x="84" y="40">D</text>
    <text x="84" y="68">D</text>
    <text x="108" y="40">E</text>
    <text x="132" y="68">F</text>
    <line x1="6" y1="20" x2="66" y2="20"></line>
    <line x1="78" y1="48" x2="114" y2="48"></line>
    <line x1="126" y1="76" x2="138" y2="76"></line>
</svg>
            </section>
        
    

    </p>
</div>
        
    
        
            <section>
                <div><p>We can generalise further to get a value for any $k$. Every time we add a card, we add $s$ symbols minus one symbol to match each existing card, which gives us:</p><p>$\qquad n = sk - (1 + 2 + \text{...} + (k - 1))$</p></div>
            </section>
        
    
        
            <div>
    <div>
        


    
        
            <section>
                <div><p>The sum of the numbers $1 + 2 + \text{...} + k$ are the <a href="https://en.wikipedia.org/wiki/Triangular_number">triangular numbers</a>, so called because they are the number of items required to build triangles of different sizes. They are generated by the formula:</p><p>$\qquad T(k) = \dfrac{k(k + 1)}{2}$</p></div>
            </section>
        
    

    </div>
    <p>
        


    
        
            <section>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="-50 -10 100 80">    
    <g font-size="0.8em">
        <circle cx="0" cy="0" r="9"></circle>
        <circle cx="-10" cy="20" r="9"></circle>
        <circle cx="10" cy="20" r="9"></circle>
        <circle cx="0" cy="40" r="9"></circle>
        <circle cx="-20" cy="40" r="9"></circle>
        <circle cx="20" cy="40" r="9"></circle>
        <circle cx="-30" cy="60" r="9"></circle>
        <circle cx="-10" cy="60" r="9"></circle>
        <circle cx="10" cy="60" r="9"></circle>
        <circle cx="30" cy="60" r="9"></circle>
    </g>
    <g font-size="0.8em">
        <text x="0" y="0">1</text>
        <text x="-10" y="20">2</text>
        <text x="10" y="20">3</text>
        <text x="0" y="40">4</text>
        <text x="-20" y="40">5</text>
        <text x="20" y="40">6</text>
        <text x="-30" y="60">7</text>
        <text x="-10" y="60">8</text>
        <text x="10" y="60">9</text>
        <text x="30" y="60">10</text>
    </g>
</svg>
            </section>
        
    

    </p>
</div>
        
    
        
            <section>
                <p>Substituting in the equation for triangular numbers, we get:</p>
            </section>
        
    
        
            <section>
                <p>$
\qquad\begin{align}
n &amp;= sk - T(\color{blue}{k - 1}) \\
n &amp;= sk - \frac{\color{blue}{(k - 1)}(\color{blue}{(k - 1)} + 1)}{2} \\
n &amp;= sk - \frac{k(k - 1)}{2}
\end{align}
$</p>
            </section>
        
    
        
            <div>
    <div>
        


    
        
            <section>
                <p>We might expect that if $n$ is the triangular number $T(s)$, then we could have $s$ cards, e.g. three cards with three symbols each. In fact, we can go one better. When we have $s$ cards, $s - 1$ symbols are matched on each card. In other words, each card has exactly one unmatched symbol. We can therefore create a new card using these $s$ unmatched symbols ($CEF$ in the diagram). If we sum the new symbols added by each card, we get $3 + 2 + 1 + 0 = 6$.</p>
            </section>
        
    

    </div>
    <p>
        


    
        
            <section>
                <svg viewBox="0 0 144 108">
    <rect x="0" y="0" width="144" height="24" rx="8" ry="8"></rect>
    <rect x="0" y="28" width="144" height="24" rx="8" ry="8"></rect>
    <rect x="0" y="56" width="144" height="24" rx="8" ry="8"></rect>
    <rect x="0" y="84" width="144" height="24" rx="8" ry="8"></rect>
    <text x="12" y="12">A</text>
    <text x="12" y="40">A</text>
    <text x="36" y="12">B</text>
    <text x="36" y="68">B</text>
    <text x="60" y="12">C</text>
    <text x="60" y="96">C</text>
    <text x="84" y="40">D</text>
    <text x="84" y="68">D</text>
    <text x="108" y="40">E</text>
    <text x="108" y="96">E</text>
    <text x="132" y="68">F</text>
    <text x="132" y="96">F</text>
</svg>
            </section>
        
    

    </p>
</div>
        
    
        
            <section>
                <p>We can verify the number of cards algebraically by rearranging the above formula to find an equation for $k$ when $n$ is a triangular number.</p>
            </section>
        
    
        
            <section>
                <p>$
\qquad\begin{align}
T(s) &amp;= sk - T(k - 1) \\
\frac{s(s + 1)}{2} &amp;= sk - \frac{k(k - 1)}{2} \\
s^2 + s &amp;= 2sk - k^2 + k \\
k^2 + k(-2s - 1) + s^2 +s &amp;= 0 \\
\end{align}
$</p>
            </section>
        
    
        
            <section>
                <p>Which is a quadratic with solutions with coefficients $a = 1$, $b = -2s - 1$, $c = s^2 +s$. If you solve for $k$, you get $k = \dfrac{2s + 1 \pm 1}{2}$. In other words $k = s$ and $k = s + 1$. So when $n$ is a triangular number you can have $s$ cards, but you can also have $s + 1$ cards.</p>
            </section>
        
    
        
            <section>
                <blockquote><b>Conclusion:</b> With $s$ symbols per card we can create $s + 1$ cards using $\dfrac{s(s+1)}{2}$ symbols in total.</blockquote>
            </section>
        
    
        
            <section>
                <p>Note that this does require that $s &gt; 1$ because whilst one card does have one unmatched symbol, we can&#39;t add a second card with that unmatched symbol because we&#39;d end up with two cards the same. It does work with $s = 2$ giving $k = 3$ and $n = 3$, which was the previous best deck.</p>
            </section>
        
    
        
            <section>
                <div><h3>Making matrices</h3><p>Another way to understand why triangular numbers work well is to make a matrix of cards, showing which symbols they share.</p></div>
            </section>
        
    
        
            <div>
    <div>
        


    
        
            <section>
                <p>We can line up each card in rows and columns, then for each cell in the table, we write the one symbol that is common to the cards for that row and that column. The diagonal is blocked out since we don&#39;t compare cards to themselves. This table forms two triangles of symbols, one above and one below the diagonal. We only need to look at one triangle since comparing, say, card $ABC$ to card $ADE$ is the same as comparing card $ADE$ to card $ABC$.</p>
            </section>
        
    

    </div>
    <p>
        


    
        
            <section>
                <svg viewBox="-20 0 160 120">
    <g>
        <rect x="40" y="40" width="20" height="20"></rect>
        <rect x="60" y="60" width="20" height="20"></rect>
        <rect x="80" y="80" width="20" height="20"></rect>
        <rect x="100" y="100" width="20" height="20"></rect>
    </g>

    <path fill-opacity="0.85" d="M40 40 H120 V120z"></path>
    <path fill-opacity="0.85" d="M40 40 V120 H120z"></path>
        
    <g>
        <line x1="0" y1="40" x2="120" y2="40"></line>
        <line x1="0" y1="60" x2="120" y2="60"></line>
        <line x1="0" y1="80" x2="120" y2="80"></line>
        <line x1="0" y1="100" x2="120" y2="100"></line>
        <line x1="40" y1="0" x2="40" y2="120"></line>
        <line x1="60" y1="0" x2="60" y2="120"></line>
        <line x1="80" y1="0" x2="80" y2="120"></line>
        <line x1="100" y1="0" x2="100" y2="120"></line>
    </g>
        
    <g>
        <text x="20" y="50">ABC</text>
        <text x="20" y="70">ADE</text>
        <text x="20" y="90">BDF</text>
        <text x="20" y="110">CEF</text>
        <text transform="translate(50 20) rotate(-90)" x="0" y="0">ABC</text>
        <text transform="translate(70 20) rotate(-90)" x="0" y="0">ADE</text>
        <text transform="translate(90 20) rotate(-90)" x="0" y="0">BDF</text>
        <text transform="translate(110 20) rotate(-90)" x="0" y="0">CEF</text>
    
  <g fill="white">
        <text x="70" y="50">A</text>
        <text x="90" y="50">B</text>
        <text x="110" y="50">C</text>
        <text x="90" y="70">D</text>
        <text x="110" y="70">E</text>
        <text x="110" y="90">F</text>
        <text x="50" y="70">A</text>
        <text x="50" y="90">B</text>
        <text x="50" y="110">C</text>
        <text x="70" y="90">D</text>
        <text x="70" y="110">E</text>
        <text x="90" y="110">F</text>
    </g>
  </g>
</svg>
            </section>
        
    

    </p>
</div>
        
    
        
            <section>
                <p>With this arrangement each row and each column spells out the symbols on that card. In addition, each triangle above or below the diagonal, contains each symbols once. This gives us a method to create $n$ cards:</p>
            </section>
        
    
        
            <section>
                <div><ol><li>Create an $n \times n$ table.</li><li>Block out the diagonal.</li><li>Fill in the lower triangle of the table with different symbols.</li><li>Read along the columns and rows to get the symbols for each card.</li></ol></div>
            </section>
        
    
        
            <section>
                <p>The problem with this method is that requires a lot of symbols. The real Dobble deck has 55 cards, which would require having 54 symbols on each card and a total of 1485 different symbols. Because we put each symbol in the table once each symbol is only used twice. Can we be more efficient by having symbols appear on more than two cards?</p>
            </section>
        
    
        
            <h2>Maximising symbol repetition</h2>
        
    
        
            <div>
    <div>
        


    
        
            <section>
                <p>So far, when creating cards we have chosen to match symbols that have not yet been matched. But what if we make the first three cards all share the same symbol. The first thing to notice is that with $s = 3$, when now need $n$ to be at least <b>seven symbols</b>: one repeated symbol and three lots of two symbols.</p>
            </section>
        
    

    </div>
    <p>
        


    
        
            <section>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 168 80">
    <g>
        <rect y="0" width="168" height="24" rx="8" ry="8"></rect>
        <rect y="28" width="168" height="24" rx="8" ry="8"></rect>
        <rect y="56" width="168" height="24" rx="8" ry="8"></rect>
    </g>

    <g>
        <text x="12" y="12">A</text>
        <text x="36" y="12">B</text>
        <text x="60" y="12">C</text>
        <text x="12" y="40">A</text>
        <text x="84" y="40">D</text>
        <text x="108" y="40">E</text>
        <text x="12" y="68">A</text>
        <text x="132" y="68">F</text>
        <text x="156" y="68">G</text>
    </g>
</svg>
            </section>
        
    

    </p>
</div>
        
    
        
            <div>
    <div>
        


    
        
            <section>
                <p>Can we add a fourth card matching the same symbol? This would require $n = 9$. But, in order to meet requirement 5 we need at least one card that doesn&#39;t have an $A$. And that means that for the fifth card we need to match symbols on four cards, where those cards have no symbol in common with each other except $A$, and we can only pick three symbols. In other words, with $s = 3$, each symbol can only be repeated three times.</p>
            </section>
        
    

    </div>
    <p>
        


    
        
            <section>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="-1 0 218 137">
    <g>
        <rect y="0" width="216" height="24" rx="8" ry="8"></rect>
        <rect y="28" width="216" height="24" rx="8" ry="8"></rect>
        <rect y="56" width="216" height="24" rx="8" ry="8"></rect>
        <rect y="84" width="216" height="24" rx="8" ry="8"></rect>
        <rect y="112" width="216" height="24" rx="8" ry="8"></rect>
    </g>

    <g>
        <text x="12" y="12">A</text>
        <text x="36" y="12">B</text>
        <text x="60" y="12">C</text>
        <text x="12" y="40">A</text>
        <text x="84" y="40">D</text>
        <text x="108" y="40">E</text>
        <text x="12" y="68">A</text>
        <text x="132" y="68">F</text>
        <text x="156" y="68">G</text>
        <text x="12" y="96">A</text>
        <text x="180" y="96">H</text>
        <text x="204" y="96">I</text>
        <text x="36" y="124">B</text>
        <text x="84" y="124">D</text>
        <text x="132" y="124">F</text>
        <text x="180" y="124">H</text>
    </g>
</svg>
            </section>
        
    

    </p>
</div>
        
    
        
            <section>
                <blockquote><b>Conclusion:</b> If each card has $s$ symbols, then each symbol can occur at most $s$ times.</blockquote>
            </section>
        
    
        
            <div>
    <div>
        


    
        
            <section>
                <p>So instead of repeating $A$ again, we create two more cards with a $B$ and two more cards with a $C$ to give a total of seven cards. In doing so, we also end up repeating the remain symbols, so each one occurs exactly three times. This also gets us our biggest deck yet - almost double what we got with six symbols.</p>
            </section>
        
    

    </div>
    <p>
        


    
        
            <section>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 168 108">
    <g>
        <rect y="0" width="168" height="24" rx="8" ry="8"></rect>
        <rect y="28" width="168" height="24" rx="8" ry="8"></rect>
        <rect y="56" width="168" height="24" rx="8" ry="8"></rect>
        <rect y="84" width="168" height="24" rx="8" ry="8"></rect>
    </g>

    <g>
        <text x="36" y="12">B</text>
        <text x="84" y="12">D</text>
        <text x="132" y="12">F</text>
        <text x="36" y="40">B</text>
        <text x="108" y="40">E</text>
        <text x="156" y="40">G</text>
        <text x="60" y="68">C</text>
        <text x="84" y="68">D</text>
        <text x="156" y="68">G</text>
        <text x="60" y="96">C</text>
        <text x="108" y="96">E</text>
        <text x="132" y="96">F</text>
    </g>
</svg>
            </section>
        
    

    </p>
</div>
        
    
        
            <section>
                <p>If we use the triangular number method to get seven cards, we need 21 symbols, each appearing on two cards. This new arrangement uses a third of the number of symbols by having each symbol appear on three cards.</p>
            </section>
        
    
        
            <section>
                <p><h3>Dobble numbers</h3></p>
            </section>
        
    
        
            <div>
    <div>
        


    
        
            <section>
                <div><p>Seven symbols is the sweet spot for $s = 3$ because it allows each symbol to appear the maximum three times. You view this as splitting the symbols into the first one, $A$, and then three groups of two, $\{BC\}, \{DE\}, \{FG\}$. Alternatively you can view this as the first card, followed by three groups of two cards in which the symbols on the first card ($A$, $B$ and $C$) are repeated twice each.</p><p>The image shows the seven cards in rows, with the seven symbols in columns. If you move your mouse over a card, all its symbols are highlighted on all cards (so exactly one symbol should be highlighted on each other card).</p></div>
            </section>
        
    

    </div>
    <p>
        


    
        
            <section>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 168 192">
    <g>
    <rect id="card1" x="0" y="0" width="168" height="24" rx="8" ry="8"></rect>
    <rect id="card2" x="0" y="28" width="168" height="24" rx="8" ry="8"></rect>
    <rect id="card3" x="0" y="56" width="168" height="24" rx="8" ry="8"></rect>
    <rect id="card4" x="0" y="84" width="168" height="24" rx="8" ry="8"></rect>
    <rect id="card5" x="0" y="112" width="168" height="24" rx="8" ry="8"></rect>
    <rect id="card6" x="0" y="140" width="168" height="24" rx="8" ry="8"></rect>
    <rect id="card7" x="0" y="168" width="168" height="24" rx="8" ry="8"></rect>
    </g>

    <g>
    <text x="12" y="12">A</text>
    <text x="12" y="40">A</text>
    <text x="12" y="68">A</text>
    </g>
    <g>
    <text x="36" y="12">B</text>
    <text x="36" y="96">B</text>
    <text x="36" y="124">B</text>
    </g>
    <g>
    <text x="60" y="12">C</text>
    <text x="60" y="152">C</text>
    <text x="60" y="180">C</text>
    </g>
    <g>
    <text x="84" y="40">D</text>
    <text x="84" y="96">D</text>
    <text x="84" y="152">D</text>
    </g>
    <g>
    <text x="108" y="40">E</text>
    <text x="108" y="124">E</text>
    <text x="108" y="180">E</text>
    </g>
    <g>
    <text x="132" y="68">F</text>
    <text x="132" y="96">F</text>
    <text x="132" y="180">F</text>
    </g>
    <g>
    <text x="156" y="68">G</text>
    <text x="156" y="124">G</text>
    <text x="156" y="152">G</text>
    </g>

    <g>
    <line x1="0" x2="168" y1="26" y2="26"></line>
    <line x1="0" x2="168" y1="82" y2="82"></line>
    <line x1="0" x2="168" y1="138" y2="138"></line>
    <line x1="72" x2="72" y1="0" y2="192"></line>
    <line x1="120" x2="120" y1="0" y2="192"></line>
    </g>
</svg>
            </section>
        
    

    </p>
</div>
        
    
        
            <div>
    <div>
        


    
        
            <section>
                <div><p>In general, with $s$ symbols per card, the most symbols, $n$, and also the most number of cards we can have, $k$, is one plus $s$ lots of $s - 1$.</p><p>$n = k = 1 + s(s - 1) = s^2 - s + 1$</p><p>I call these <b>Dobble numbers</b>, $D(s)$. The first few Dobble numbers are 1, 3, 7, 13, and 21. They are all odd, since $s(s - 1)$ is always even.</p><p>Here&#39;s the example with <b>13 symbols</b>, leading to 13 cards with four symbols per card. The lines show how I split the cards and symbols into groups ($ABCD$, $EFG$, $HIJ$ and $KLM$).</p></div>
            </section>
        
    

    </div>
    <p>
        


    
        
            <section>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 312 360">
    <g>
        <rect id="card13-1" x="0" y="0" width="312" height="24" rx="8" ry="8"></rect>
        <rect id="card13-2" x="0" y="28" width="312" height="24" rx="8" ry="8"></rect>
        <rect id="card13-3" x="0" y="56" width="312" height="24" rx="8" ry="8"></rect>
        <rect id="card13-4" x="0" y="84" width="312" height="24" rx="8" ry="8"></rect>
        <rect id="card13-5" x="0" y="112" width="312" height="24" rx="8" ry="8"></rect>
        <rect id="card13-6" x="0" y="140" width="312" height="24" rx="8" ry="8"></rect>
        <rect id="card13-7" x="0" y="168" width="312" height="24" rx="8" ry="8"></rect>
        <rect id="card13-8" x="0" y="196" width="312" height="24" rx="8" ry="8"></rect>
        <rect id="card13-9" x="0" y="224" width="312" height="24" rx="8" ry="8"></rect>
        <rect id="card13-10" x="0" y="252" width="312" height="24" rx="8" ry="8"></rect>
        <rect id="card13-11" x="0" y="280" width="312" height="24" rx="8" ry="8"></rect>
        <rect id="card13-12" x="0" y="308" width="312" height="24" rx="8" ry="8"></rect>
        <rect id="card13-13" x="0" y="336" width="312" height="24" rx="8" ry="8"></rect>
    </g>
            
    <g>
        <text x="12" y="12">A</text>
        <text x="12" y="40">A</text>
        <text x="12" y="68">A</text>
        <text x="12" y="96">A</text>
    </g>
    <g>
        <text x="36" y="12">B</text>
        <text x="36" y="124">B</text>
        <text x="36" y="152">B</text>
        <text x="36" y="180">B</text>
    </g>
    <g>
        <text x="60" y="12">C</text>
        <text x="60" y="208">C</text>
        <text x="60" y="236">C</text>
        <text x="60" y="264">C</text>
    </g>
    <g>
        <text x="84" y="12">D</text>
        <text x="84" y="292">D</text>
        <text x="84" y="320">D</text>
        <text x="84" y="348">D</text>
    </g>
    <g>
        <text x="108" y="40">E</text>
        <text x="108" y="124">E</text>
        <text x="108" y="208">E</text>
        <text x="108" y="292">E</text>
    </g>
    <g>
        <text x="132" y="40">F</text>
        <text x="132" y="152">F</text>
        <text x="132" y="236">F</text>
        <text x="132" y="320">F</text>
    </g>
    <g>
        <text x="156" y="40">G</text>
        <text x="156" y="180">G</text>
        <text x="156" y="264">G</text>
        <text x="156" y="348">G</text>
    </g>
    <g>
        <text x="180" y="68">H</text>
        <text x="180" y="124">H</text>
        <text x="180" y="264">H</text>
        <text x="180" y="320">H</text>
    </g>
    <g>
        <text x="204" y="68">I</text>
        <text x="204" y="152">I</text>
        <text x="204" y="208">I</text>
        <text x="204" y="348">I</text>
    </g>
    <g>
        <text x="228" y="68">J</text>
        <text x="228" y="180">J</text>
        <text x="228" y="236">J</text>
        <text x="228" y="292">J</text>
    </g>
    <g>
        <text x="252" y="96">K</text>
        <text x="252" y="124">K</text>
        <text x="252" y="236">K</text>
        <text x="252" y="348">K</text>
    </g>
    <g>
        <text x="276" y="96">L</text>
        <text x="276" y="152">L</text>
        <text x="276" y="264">L</text>
        <text x="276" y="292">L</text>
    </g>
    <g>
        <text x="300" y="96">M</text>
        <text x="300" y="180">M</text>
        <text x="300" y="208">M</text>
        <text x="300" y="320">M</text>
    </g>
    
    <g>
        <line x1="0" x2="312" y1="26" y2="26"></line>
        <line x1="0" x2="312" y1="110" y2="110"></line>
        <line x1="0" x2="312" y1="194" y2="194"></line>
        <line x1="0" x2="312" y1="278" y2="278"></line>
        <line x1="96" x2="96" y1="0" y2="360"></line>
        <line x1="168" x2="168" y1="0" y2="360"></line>
        <line x1="240" x2="240" y1="0" y2="360"></line>
    </g>
</svg>
            </section>
        
    

    </p>
</div>
        
    
        
            <section>
                <blockquote>
<b>Conclusion:</b> If each card has $s$ symbols, then we can make $k = s^2 - s + 1$ cards. Each symbol will appear $s$ times and the number of different symbols will equal $k$.
</blockquote>
            </section>
        
    
        
            <section>
                <p>I&#39;m not 100% sure that you can always build a deck of this size, but pretty sure you can&#39;t build one larger. Either way, we can get an equation for $s$ in terms of $k$, using the quadratic formula, with $a = 1$, $b = -1$ and $c = 1 - k$.</p>
            </section>
        
    
        
            <section>
                <blockquote>
<b>Conclusion:</b> For $k$ cards, the minimum number of symbols per card is $s = \left\lfloor \dfrac{1 + \sqrt{4k - 3}}{2} \right\rfloor$.
</blockquote>
            </section>
        
    
        
            <section>
                <p>Where $\lfloor n \rfloor$ means &#34;round $n$ down to the nearest whole number.</p>
            </section>
        
    
        
            <div>
    <div>
        


    
        
            <section>
                <p>What I call the Dobble numbers are called <a href="https://oeis.org/A002061">sequence A002061</a> in the Online Encyclopedia of Integer Sequences. The page gives a long list of properties for this sequence. One interesting property which appears completely unrelated, is that this sequence of numbers occurs along the diagonal if you write the positive integer in a grid, starting in the middle and spiralling out.</p>
            </section>
        
    

    </div>
    <p>
        


    
        
            <section>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="-70 -55 140 110">      
    <path d="M0 0 h20 v20 h-40 v-40 h60 v60 h-80 v-80"></path>
    <path d="M-45 -45 L45 45"></path>

    <g>
        <text x="0" y="0">1</text>
        <text x="20" y="0">2</text>
        <text x="20" y="20">3</text>
        <text x="0" y="20">4</text>
        <text x="-20" y="20">5</text>
        <text x="-20" y="0">6</text>
        <text x="-20" y="-20">7</text>
        <text x="0" y="-20">8</text>
        <text x="20" y="-20">9</text>
        <text x="40" y="-20">10</text>
        <text x="40" y="0">11</text>
        <text x="40" y="20">12</text>
        <text x="40" y="40">13</text>
        <text x="20" y="40">14</text>
        <text x="0" y="40">15</text>
        <text x="-20" y="40">16</text>
        <text x="-40" y="40">17</text>
        <text x="-40" y="20">18</text>
        <text x="-40" y="0">19</text>
        <text x="-40" y="-20">20</text>
        <text x="-40" y="-40">21</text>
    </g>
</svg>
            </section>
        
    

    </p>
</div>
        
    
        
            <section>
                <div><h2>An unexpected sidestep into geometry</h2><p>So far, with the possible except of the spiral above, this has been a problem of combinatorics which seems logical given the nature of the problem. However, the discussion on Facebook suggested a geometric interpretation. The terminology is a little intimidating, but it&#39;s basically describing the same problem using points and lines.</p><h3>Incidence geometry and linear spaces</h3><p>We can represent each symbol as a point and each card as a line. Points that lie on a line then represent symbols on a card. Now the problem is one of <a href="https://en.wikipedia.org/wiki/Incidence_geometry">incidence geometry</a>: the study of which points lie on which lines. A <a href="https://en.wikipedia.org/wiki/Incidence_geometry#Partial_linear_spaces">linear space</a> is an incidence structure where:</p><ol><li>Every pair of distinct points determines exactly one line.</li><li>Every line contains at least two distinct points.</li></ol><p>Rule 1 corresponds to the requirement that no two cards are the same. Rule 2 corresponds to the fact that we want cards to have at least two symbols. The requirements for Dobble are more stringent, but this is enough for now.</p></div>
            </section>
        
    
        
            <div>
    <div>
        


    
        
            <section>
                <p>The simplest non-trivial linear space consists of three points and corresponds nicely to how we arranged the three cards like dominos. If you mouse over a point, the two lines it&#39;s connected to are highlighted; if you mouse over a line, the two points that lie on it are highlighted.</p>
            </section>
        
    

    </div>
    <p>
        


    
        
            <section>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="-20 -16 140 120">
    <line id="card-3-1" x1="0" y1="0" x2="100" y2="0"></line>
    <line id="card-3-2" x1="0" y1="0" x2="50" y2="86"></line>
    <line id="card-3-3" x1="100" y1="0" x2="50" y2="86"></line>
    
    <line x1="0" y1="0" x2="100" y2="0"></line>
    <line x1="0" y1="0" x2="50" y2="86"></line>
    <line x1="100" y1="0" x2="50" y2="86"></line>

    <g id="symbol-3A">
        <circle cx="0" cy="0" r="3"></circle>
        <text x="-8" y="-8">A</text>
    </g>

    <g id="symbol-3B">
        <circle cx="100" cy="0" r="3"></circle>
        <text x="108" y="-8">B</text>
    </g>

    <g id="symbol-3C">
        <circle cx="50" cy="86" r="3"></circle>
        <text x="50" y="96">C</text>
    </g>
</svg>
            </section>
        
    

    </p>
</div>
        
    
        
            <div>
    <div>
        


    
        
            <section>
                <p>You can build similar diagrams with four, five and six points. The fact that line $BDF$ is a circle in the diagram with six points is a side-effect of drawing the diagram in 2D. In terms of the geometry, there is no difference between any of the lines.</p>
            </section>
        
    

    </div>
    <p>
        


    
        
            <section>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="-20 -16 290 180">
    <g transform="translate(62.5)">
        <line x1="0" y1="20" x2="120" y2="20"></line>
        <line x1="0" y1="20" x2="120" y2="20"></line>

        <circle cx="0" cy="20" r="3"></circle>
        <circle cx="40" cy="20" r="3"></circle>
        <circle cx="80" cy="20" r="3"></circle>
        <circle cx="120" cy="20" r="3"></circle>
        
        <text x="0" y="10">A</text>
        <text x="40" y="10">B</text>
        <text x="80" y="10">C</text>
        <text x="120" y="10">D</text>
    </g>

    <g transform="translate(0 60)">
        <line id="card-5-1" x1="50" y1="0" x2="0" y2="86"></line>
        <line id="card-5-2" x1="50" y1="0" x2="100" y2="86"></line>
        
        <line x1="50" y1="0" x2="0" y2="86"></line>
        <line x1="50" y1="0" x2="100" y2="86"></line>
    
        <g id="symbol-5A">
            <circle cx="50" cy="0" r="3"></circle>
            <text x="50" y="-10">A</text>
        </g>
    
        <g id="symbol-5B">
            <circle cx="25" cy="43" r="3"></circle>
            <text x="15" y="43">B</text>
        </g>
    
        <g id="symbol-5C">
            <circle cx="0" cy="86" r="3"></circle>
            <text x="-10" y="86">C</text>
        </g>
        
        <g id="symbol-5D">
            <circle cx="75" cy="43" r="3"></circle>
            <text x="85" y="43">D</text>
        </g>
    
        <g id="symbol-5E">
            <circle cx="100" cy="86" r="3"></circle>
            <text x="110" y="86">E</text>
        </g>
    </g>

    <g transform="translate(150 60)">
        <line id="card-6-1" x1="50" y1="0" x2="0" y2="86"></line>
        <line id="card-6-2" x1="50" y1="0" x2="100" y2="86"></line>
        <line id="card-6-3" x1="0" y1="86" x2="100" y2="86"></line>
        
        <line x1="50" y1="0" x2="0" y2="86"></line>
        <line x1="50" y1="0" x2="100" y2="86"></line>
        <line x1="0" y1="86" x2="100" y2="86"></line>
        
        <circle id="card-6-4" cx="50" cy="57.13" r="28.87"></circle>
        <circle cx="50" cy="57.13" r="28.87"></circle>
    
        <g id="symbol-6A">
            <circle cx="50" cy="0" r="3"></circle>
            <text x="50" y="-10">A</text>
        </g>
    
        <g id="symbol-6B">
            <circle cx="25" cy="43" r="3"></circle>
            <text x="15" y="43">B</text>
        </g>
    
        <g id="symbol-6C">
            <circle cx="0" cy="86" r="3"></circle>
            <text x="-10" y="86">C</text>
        </g>
        
        <g id="symbol-6D">
            <circle cx="75" cy="43" r="3"></circle>
            <text x="85" y="43">D</text>
        </g>
    
        <g id="symbol-6E">
            <circle cx="100" cy="86" r="3"></circle>
            <text x="110" y="86">E</text>
        </g>

        <g id="symbol-6F">
            <circle cx="50" cy="86" r="3"></circle>
            <text x="50" y="96">F</text>
        </g>
    </g>
</svg>
            </section>
        
    

    </p>
</div>
        
    
        
            <section>
                <div><h3>Projective planes</h3><p>We can make the rules more stringent by considering <a href="https://en.wikipedia.org/wiki/Projective_plane">projective planes</a>. These are linear spaces where:</p><ol><li>Every pair of distinct lines meet in exactly one point.</li><li>There exist four points, no three of which lie on the same line.</li></ol><p>The first rule corresponds to the key rule for Dobble, namely every card should share at least one symbol with every other card. The second rule is there to rule out situations where all the points lie on the same line.</p></div>
            </section>
        
    
        
            <div>
    <div>
        


    
        
            <section>
                <p>The most famous projective plane is called the <a href="https://en.wikipedia.org/wiki/Fano_plane">Fano plane</a>, which is famous enough that I&#39;d seen before (in <i>Professor Stewart&#39;s incredible numbers).</i> The plane consists of seven lines and seven points. Every line goes through three points and every point lies on three lines. It has all sorts of interesting properties and symmetries.</p>
            </section>
        
    

    </div>
    <p>
        


    
        
            <section>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="-30 -16 160 120">
    <circle id="card-7-4" cx="50" cy="57.1" r="28.9"></circle>
    <circle cx="50" cy="57.1" r="28.9"></circle>

    <line id="card-7-1" x1="50" y1="0" x2="0" y2="86"></line>
    <line id="card-7-2" x1="50" y1="0" x2="100" y2="86"></line>
    <line id="card-7-3" x1="0" y1="86" x2="100" y2="86"></line>
    <line id="card-7-5" x1="50" y1="0" x2="50" y2="86"></line>
    <line id="card-7-6" x1="25" y1="43" x2="100" y2="86"></line>
    <line id="card-7-7" x1="0" y1="86" x2="75" y2="43"></line>

    <line x1="50" y1="0" x2="0" y2="86"></line>
    <line x1="50" y1="0" x2="100" y2="86"></line>
    <line x1="0" y1="86" x2="100" y2="86"></line>
    <line x1="50" y1="0" x2="50" y2="86"></line>
    <line x1="25" y1="43" x2="100" y2="86"></line>
    <line x1="0" y1="86" x2="75" y2="43"></line>

    <g id="symbol-7A">
        <circle cx="50" cy="0" r="3"></circle>
        <text x="50" y="-10">A</text>
    </g>

    <g id="symbol-7B">
        <circle cx="25" cy="43" r="3"></circle>
        <text x="15" y="43">B</text>
    </g>

    <g id="symbol-7C">
        <circle cx="0" cy="86" r="3"></circle>
        <text x="-10" y="86">C</text>
    </g>
    
    <g id="symbol-7D">
        <circle cx="75" cy="43" r="3"></circle>
        <text x="85" y="43">D</text>
    </g>

    <g id="symbol-7E">
        <circle cx="100" cy="86" r="3"></circle>
        <text x="110" y="86">E</text>
    </g>

    <g id="symbol-7F">
        <circle cx="50" cy="86" r="3"></circle>
        <text x="50" y="96">F</text>
    </g>

    <g id="symbol-7G">
        <circle cx="50" cy="57.1" r="3"></circle>
        <text x="44" y="46">G</text>
    </g>
</svg>
            </section>
        
    

    </p>
</div>
        
    
        
            <div>
    <div>
        


    
        
            <section>
                <p>Projective planes all consists of $n^2 + n + 1$ points where $n$ is the number of points ($s$) on a line minus 1. If you plug $s - 1$ into this you get the number of points is $s^2 - s + 1$, just like the rule I discovered. On the <a href="https://en.wikipedia.org/wiki/Projective_plane#A_finite_example">Wikipedia page on projective planes</a> there is a matrix representing a projective plane with 13 points which looks just like to the diagram I made for 13 cards of four symbols. Unfortunately, I don&#39;t think there is a nice diagram for arranging 13 points and 13 lines.</p>
            </section>
        
    

    </div>
    <div>
        


    
        
            <section>
                <img alt="Matrix for projective plane of 13 points" height="244" src="https://media.petercollingridge.co.uk/images/Screen_Shot_2018-10-19_at_21.35.27.width-300.png" width="300"/>
            </section>
        
    

    </div>
</div>
        
    
        
            <h2>Larger decks</h2>
        
    
        
            <section>
                <p>Getting back to the empirical approach, we can continue to increase the number of symbols to see if any more patterns emerge.</p>
            </section>
        
    
        
            <div>
    <div>
        


    
        
            <section>
                <p>With <b>eight</b> symbols, we have a similar situations as with four symbols. We need more than three symbols per card because three symbols are maxed out by seven cards. But with four symbols, two cards don&#39;t cover all the symbols (requirement 5), and with three cards, there&#39;s not enough symbols. With five or more symbols, the overlap between two cards is too great.</p>
            </section>
        
    

    </div>
    <p>
        


    
        
            <section>
                <svg viewBox="-1 0 218 81">
    <rect x="0" y="0" width="192" height="24" rx="8" ry="8"></rect>
    <rect x="0" y="28" width="192" height="24" rx="8" ry="8"></rect>
    <rect x="0" y="56" width="192" height="24" rx="8" ry="8"></rect>
    <text x="12" y="12">A</text>
    <text x="36" y="12">B</text>
    <text x="60" y="12">C</text>
    <text x="84" y="12">D</text>
    <text x="12" y="40">A</text>
    <text x="108" y="40">E</text>
    <text x="132" y="40">F</text>
    <text x="156" y="40">G</text>
    <text x="36" y="68">B</text>
    <text x="108" y="68">E</text>
    <text x="180" y="68">H</text>
    <text x="204" y="68">I</text>
</svg>
            </section>
        
    

    </p>
</div>
        
    
        
            <div>
    <div>
        


    
        
            <section>
                <p>With <b>nine symbols</b> we do now have space for three cards of four symbols.</p>
            </section>
        
    

    </div>
    <p>
        


    
        
            <section>
                <svg viewBox="-1 0 218 81">
    <rect x="0" y="0" width="216" height="24" rx="8" ry="8"></rect>
    <rect x="0" y="28" width="216" height="24" rx="8" ry="8"></rect>
    <rect x="0" y="56" width="216" height="24" rx="8" ry="8"></rect>
    <text x="12" y="12">A</text>
    <text x="36" y="12">B</text>
    <text x="60" y="12">C</text>
    <text x="84" y="12">D</text>
    <text x="12" y="40">A</text>
    <text x="108" y="40">E</text>
    <text x="132" y="40">F</text>
    <text x="156" y="40">G</text>
    <text x="36" y="68">B</text>
    <text x="108" y="68">E</text>
    <text x="180" y="68">H</text>
    <text x="204" y="68">I</text>
</svg>
            </section>
        
    

    </p>
</div>
        
    
        
            <div>
    <div>
        


    
        
            <section>
                <p>With <b>ten symbols</b> we have the fifth triangular number, and so can get five cards of four symbols. Since this is a triangular number each symbol appears on exactly two cards.</p>
            </section>
        
    

    </div>
    <p>
        


    
        
            <section>
                <svg viewBox="0 0 160 140">
    <g>
        <rect x="40" y="40" width="20" height="20"></rect>
        <rect x="60" y="60" width="20" height="20"></rect>
        <rect x="80" y="80" width="20" height="20"></rect>
        <rect x="100" y="100" width="20" height="20"></rect>
        <rect x="120" y="120" width="20" height="20"></rect>
    </g>
        
    <g>
        <line y1="40" x2="140" y2="40"></line>
        <line y1="60" x2="140" y2="60"></line>
        <line y1="80" x2="140" y2="80"></line>
        <line y1="100" x2="140" y2="100"></line>
        <line y1="120" x2="140" y2="120"></line>
        <line x1="40" x2="40" y2="140"></line>
        <line x1="60" x2="60" y2="140"></line>
        <line x1="80" x2="80" y2="140"></line>
        <line x1="100" x2="100" y2="140"></line>
        <line x1="120" x2="120" y2="140"></line>
    </g>
        
    <g>
        <text x="20" y="50">ABCD</text>
        <text x="20" y="70">AEFG</text>
        <text x="20" y="90">BEHI</text>
        <text x="20" y="110">CFHJ</text>
        <text x="20" y="130">DGIJ</text>
        <text transform="translate(50 20) rotate(-90)">ABCD</text>
        <text transform="translate(70 20) rotate(-90)">AEFG</text>
        <text transform="translate(90 20) rotate(-90)">BEHI</text>
        <text transform="translate(110 20) rotate(-90)">CFHJ</text>
        <text transform="translate(130 20) rotate(-90)">DGIJ</text>
    
        <text x="70" y="50">A</text>
        <text x="90" y="50">B</text>
        <text x="110" y="50">C</text>
        <text x="130" y="50">D</text>
        <text x="90" y="70">E</text>
        <text x="110" y="70">F</text>
        <text x="130" y="70">G</text>
        <text x="110" y="90">H</text>
        <text x="130" y="90">I</text>
        <text x="130" y="110">J</text>
        <text x="50" y="70">A</text>
        <text x="50" y="90">B</text>
        <text x="50" y="110">C</text>
        <text x="50" y="130">D</text>
        <text x="70" y="90">E</text>
        <text x="70" y="110">F</text>
        <text x="70" y="130">G</text>
        <text x="90" y="110">H</text>
        <text x="90" y="130">I</text>
        <text x="110" y="130">J</text>
    </g>
</svg>
            </section>
        
    

    </p>
</div>
        
    
        
            <section>
                <p>We can keep going, plotting the results on a graph. Notice the series of peaks at the Dobble numbers, each one having $k = n$.</p>
            </section>
        
    
        
            <section>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 300">

    <text y="289.5" x="312.0">Total symbols (n)</text>
    <text y="134.0" x="0" transform="translate(15.5) rotate(-90, 0, 134.0)">Maximum number of cards (k)</text>
    <line y1="257.5" x2="583.5" x1="40.5" y2="257.5"></line>
    <line y1="257.5" x2="40.5" x1="40.5" y2="10.5"></line>
    <g>
        <g>
            <text y="272" x="40.5">1</text>
            <text y="272" x="66.4">2</text>
            <text y="272" x="92.2">3</text>
            <text y="272" x="118.1">4</text>
            <text y="272" x="143.9">5</text>
            <text y="272" x="169.8">6</text>
            <text y="272" x="195.6">7</text>
            <text y="272" x="221.5">8</text>
            <text y="272" x="247.4">9</text>
            <text y="272" x="273.2">10</text>
            <text y="272" x="299.1">11</text>
            <text y="272" x="324.9">12</text>
            <text y="272" x="350.8">13</text>
            <text y="272" x="376.6">14</text>
            <text y="272" x="402.5">15</text>
            <text y="272" x="428.4">16</text>
            <text y="272" x="454.2">17</text>
            <text y="272" x="480.1">18</text>
            <text y="272" x="505.9">19</text>
            <text y="272" x="531.8">20</text>
            <text y="272" x="557.6">21</text>
            <text y="272" x="583.5">22</text>
        </g>
        <g>
            <text y="260.5" x="36">1</text>
            <text y="211.1" x="36">5</text>
            <text y="161.7" x="36">9</text>
            <text y="112.3" x="36">13</text>
            <text y="62.9" x="36">17</text>
            <text y="13.5" x="36">21</text>
        </g>
    </g>
    <g>
        <line y1="257.5" x2="66.5" x1="66.5" y2="10.5"></line>
        <line y1="257.5" x2="92.5" x1="92.5" y2="10.5"></line>
        <line y1="257.5" x2="118.5" x1="118.5" y2="10.5"></line>
        <line y1="257.5" x2="143.5" x1="143.5" y2="10.5"></line>
        <line y1="257.5" x2="169.5" x1="169.5" y2="10.5"></line>
        <line y1="257.5" x2="195.5" x1="195.5" y2="10.5"></line>
        <line y1="257.5" x2="221.5" x1="221.5" y2="10.5"></line>
        <line y1="257.5" x2="247.5" x1="247.5" y2="10.5"></line>
        <line y1="257.5" x2="273.5" x1="273.5" y2="10.5"></line>
        <line y1="257.5" x2="299.5" x1="299.5" y2="10.5"></line>
        <line y1="257.5" x2="324.5" x1="324.5" y2="10.5"></line>
        <line y1="257.5" x2="350.5" x1="350.5" y2="10.5"></line>
        <line y1="257.5" x2="376.5" x1="376.5" y2="10.5"></line>
        <line y1="257.5" x2="402.5" x1="402.5" y2="10.5"></line>
        <line y1="257.5" x2="428.5" x1="428.5" y2="10.5"></line>
        <line y1="257.5" x2="454.5" x1="454.5" y2="10.5"></line>
        <line y1="257.5" x2="480.5" x1="480.5" y2="10.5"></line>
        <line y1="257.5" x2="505.5" x1="505.5" y2="10.5"></line>
        <line y1="257.5" x2="531.5" x1="531.5" y2="10.5"></line>
        <line y1="257.5" x2="557.5" x1="557.5" y2="10.5"></line>
        <line y1="257.5" x2="583.5" x1="583.5" y2="10.5"></line>

        <line y1="208.5" x2="583.5" x1="40.5" y2="208.5"></line>
        <line y1="158.5" x2="583.5" x1="40.5" y2="158.5"></line>
        <line y1="109.5" x2="583.5" x1="40.5" y2="109.5"></line>
        <line y1="59.5" x2="583.5" x1="40.5" y2="59.5"></line>
        <line y1="10.5" x2="583.5" x1="40.5" y2="10.5"></line>
    </g>
    <path d="M40.5,257.5 66.4,257.5 92.2,232.8 118.1,257.5 143.9,245.2 169.8,220.4 195.6,183.4 221.5,257.5 247.4,232.8 273.2,208.1 299.1,195.8 324.9,158.7 350.8,109.3 376.6,220.4 402.5,195.8 428.4,195.8 454.2,183.4 480.1,158.7 505.9,146.4 531.8,72.2 557.6,10.5 583.5,183.4"></path>
</svg>
            </section>
        
    
        
            <section>
                <div><h3>Dobble plus one</h3><p>Following each Dobble number, when $n = D(s) + 1$, the value of $k$ crashes. For the first three &#34;Dobble plus one&#34; numbers ($2$, $4$ and $8$), the deck size is one. With <b>14 symbols</b> we finally have enough symbols to scrape four cards together.</p><p>The numbers $2$, $4$ and $8$ are also powers of two. With <b>16 symbols</b>, we have the first power of two, which is not a &#34;Dobble plus one&#34; number. With 16 symbols we can make six cards, which is a lot better than one. However we can also make six cards with with <b>15 symbols</b> (a triangular number). This is the only example so far where increasing $n$ doesn&#39;t increase $k$ other than the &#34;Dobble plus one&#34; numbers. So it seems that it&#39;s hard to make decks when $n$ is a power of two.</p></div>
            </section>
        
    
        
            <section>
                <div><h3>Symbol repetition</h3><p>Another interesting parameter to look at is the mean number of times each symbol appears in a deck, $r$. For example with nine symbols, we had the cards $ABCD$, $AEFG$ and $BEHI$. So $A$, $B$ and $E$ appear twice, while the remaining six symbols appear once. Therefore $r = \frac{3 \times 2 + 6 \times 1}{9} = \frac{4}{3}$.</p></div>
            </section>
        
    
        
            <section>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 300">
    <text y="289.5" x="309.5">Total symbols (n)</text>
    <text y="134.0" x="0" transform="translate(15.5) rotate(-90, 0, 134.0)">Mean symbol repeats (r)</text>
    <line y1="257.5" x2="583.5" x1="35.5" y2="257.5"></line>
    <line y1="257.5" x2="35.5" x1="35.5" y2="10.5"></line>
    <g>
        <g>
            <text y="272" x="35.5">1</text>
            <text y="272" x="61.5952380952">2</text>
            <text y="272" x="87.6904761905">3</text>
            <text y="272" x="113.785714286">4</text>
            <text y="272" x="139.880952381">5</text>
            <text y="272" x="165.976190476">6</text>
            <text y="272" x="192.071428571">7</text>
            <text y="272" x="218.166666667">8</text>
            <text y="272" x="244.261904762">9</text>
            <text y="272" x="270.357142857">10</text>
            <text y="272" x="296.452380952">11</text>
            <text y="272" x="322.547619048">12</text>
            <text y="272" x="348.642857143">13</text>
            <text y="272" x="374.738095238">14</text>
            <text y="272" x="400.833333333">15</text>
            <text y="272" x="426.928571429">16</text>
            <text y="272" x="453.023809524">17</text>
            <text y="272" x="479.119047619">18</text>
            <text y="272" x="505.214285714">19</text>
            <text y="272" x="531.30952381">20</text>
            <text y="272" x="557.404761905">21</text>
            <text y="272" x="583.5">22</text>
        </g>
        <g>
            <text y="260.5" x="32.5">1</text>
            <text y="198.75" x="32.5">2</text>
            <text y="137.0" x="32.5">3</text>
            <text y="75.25" x="32.5">4</text>
            <text y="13.5" x="32.5">5</text>
        </g>
    </g>
    <g>
        <line y1="257.5" x2="61.5" x1="61.5" y2="10.5"></line>
        <line y1="257.5" x2="87.5" x1="87.5" y2="10.5"></line>
        <line y1="257.5" x2="113.5" x1="113.5" y2="10.5"></line>
        <line y1="257.5" x2="139.5" x1="139.5" y2="10.5"></line>
        <line y1="257.5" x2="165.5" x1="165.5" y2="10.5"></line>
        <line y1="257.5" x2="192.5" x1="192.5" y2="10.5"></line>
        <line y1="257.5" x2="218.5" x1="218.5" y2="10.5"></line>
        <line y1="257.5" x2="244.5" x1="244.5" y2="10.5"></line>
        <line y1="257.5" x2="270.5" x1="270.5" y2="10.5"></line>
        <line y1="257.5" x2="296.5" x1="296.5" y2="10.5"></line>
        <line y1="257.5" x2="322.5" x1="322.5" y2="10.5"></line>
        <line y1="257.5" x2="348.5" x1="348.5" y2="10.5"></line>
        <line y1="257.5" x2="374.5" x1="374.5" y2="10.5"></line>
        <line y1="257.5" x2="400.5" x1="400.5" y2="10.5"></line>
        <line y1="257.5" x2="426.5" x1="426.5" y2="10.5"></line>
        <line y1="257.5" x2="453.5" x1="453.5" y2="10.5"></line>
        <line y1="257.5" x2="479.5" x1="479.5" y2="10.5"></line>
        <line y1="257.5" x2="505.5" x1="505.5" y2="10.5"></line>
        <line y1="257.5" x2="531.5" x1="531.5" y2="10.5"></line>
        <line y1="257.5" x2="557.5" x1="557.5" y2="10.5"></line>
        <line y1="257.5" x2="583.5" x1="583.5" y2="10.5"></line>

        <line y1="195.5" x2="583.5" x1="35.5" y2="195.5"></line>
        <line y1="134.5" x2="583.5" x1="35.5" y2="134.5"></line>
        <line y1="72.5" x2="583.5" x1="35.5" y2="72.5"></line>
        <line y1="10.5" x2="583.5" x1="35.5" y2="10.5"></line>
    </g>
    <path stroke="#0060e5" d="M35.5,257.5 61.6,257.5 87.7,195.8 113.8,257.5 139.9,245.2 166.0,195.8 192.1,134.0 218.2,257.5 244.3,236.9 270.4,195.8 296.5,184.5 322.5,134.0 348.6,72.2 374.7,231.0 400.8,195.8 426.9,203.5 453.0,192.1 479.1,164.9 505.2,156.8 531.3,72.2 557.4,10.5 583.5,201.4"></path>
</svg>
            </section>
        
    
        
            <section>
                <div><p>Perhaps unsurprisingly, this graph has a similar shape to before since the more cards in a deck, the more each symbol is repeated. One small difference is that now there is a dip at $n = 16$ rather than a flat line. A more interesting trend becomes apparent when we look at values for which $r$ is an integer.</p><p>We already know when $n$ is a triangular number, $r = 2$, and when $n$ is the Dobble number, $D(s)$, $r = s$ ($21$ is both a triangular number and a Dobble number, but the Dobble number wins out since we want the largest deck). The first four powers of two, $1$, $2$, $4$ and $8$, all have one card, so $r = 1$.</p><h3>Dobble minus one</h3></div>
            </section>
        
    
        
            <div>
    <div>
        


    
        
            <section>
                <p>There is one other type of number that has an integer value for $r$: the &#34;Dobble minus one&#34; numbers. When $n$ one less than a Dobble number, the number of repeats is one less than for that Dobble number, i.e if $n = D(s) - 1$, then $r = s - 1$.</p>
            </section>
        
    

    </div>
    <div>
        


    
        
            <section>
                <div><ul><li>With $n = D(2) - 1 = 2$, $r = 1$</li><li>With $n = D(3) - 1 = 6$, $r = 2$</li><li>With $n = D(4) - 1 = 12$, $r = 3$</li><li>With $n = D(5) - 1 = 20$, $r = 4$</li></ul></div>
            </section>
        
    

    </div>
</div>
        
    
        
            <section>
                <div><p>This is just an empirical observation, based on these four (five if you include $D(1) - 1 = 0$) values. I don&#39;t have yet have any proof or any sense of the logic for why this might be the case (assuming the pattern holds).</p><p>The total number of symbols in a deck is equal to the number of symbols multiplied by the average number of repeats. So if this pattern does hold, the total number of symbols in these decks, $N$, is:</p></div>
            </section>
        
    
        
            <section>
                <p>$\qquad \begin{align}
N &amp;= (D(s) - 1) \cdot (s - 1) \\
N &amp;= (s^2 - s) \cdot (s - 1) \\
N &amp;= s^3 - 2s^2 + s
\end{align}$</p>
            </section>
        
    
        
            <section>
                <p>The number of cards in a deck, $k$, is equal to the total number of symbols divided by the number of symbols per card:</p>
            </section>
        
    
        
            <section>
                <p>$\qquad \begin{align}
k &amp;=\dfrac{N}{s} \\
k &amp;=\dfrac{s^3 - 2s^2 + s}{s} \\
k &amp;= s^2 - 2s + 1 \\
k &amp;= (s - 1)^2
\end{align}$</p>
            </section>
        
    
        
            <section>
                <blockquote>
<b>Conjecture:</b> If the number of symbols, $n$, is in the form $s(s - 1)$, then $k = (s - 1)^2$.
<p>e.g  $n = 12 = 4 \times 3$, so $k = 3^2 = 9$</p>
</blockquote>
            </section>
        
    
        
            <h2>Finding large decks</h2>
        
    
        
            <section>
                <p>Once the deck size gets into the teens, it becomes hard to be sure that you&#39;ve found the best solution using pen and paper. So I built a tool to help me. It keeps track of which cards you&#39;ve matched and stops you from adding symbols found on matched cards. This means a lot of the works is done for you and often only have to worry about picking the correct first symbol for each card.</p>
            </section>
        
    
        
            <section>
                <div id="app">
    <div>
        <p><label for="num-symbols-slider">Total number of symbols (n = {{ numSymbols }})</label>
            
        </p>
        <p><label for="card-symbols-slider">Symbols per card (s = {{ cardSymbols }})</label>
            
        </p>
        </div>

    <p>Click on the letters to add or remove them from a card.</p>

    <svg xmlns="http://www.w3.org/2000/svg" width="680" :height="svgHeight">
        <g :transform="getTranslation(0)">
            <text :x="getSymbolX(symbol)" y="-8" v-for="symbol in allSymbols">
                {{ symbolCount[symbol] || 0 }}
            </text>
        </g>
        <g id="new-card" :transform="getTranslation(0)">
            <rect v-bind:class="{ failed: cardFailed }" x="0" y="0" :width="cardWidth" height="24" rx="8" ry="8"></rect>
            <text :x="getSymbolX(symbol)" y="13" v-bind:class="{ selected: newCard[symbol] }" v-on:click="toggleSymbol(symbol)" v-show="showSymbol(symbol)" v-for="symbol in allSymbols">
                    {{ symbol }}
            </text>
        </g>
        <g v-for="(card, index) in cards" :transform="getTranslation(index + 1)" v-bind:class="{ matching: matchingCards[card.join(&#39;&#39;)] }">
            <rect :width="cardWidth" height="24" rx="8" ry="8"></rect>
            <text x="-20" :y="14">{{ index + 1}}</text>
            <text :x="getSymbolX(symbol)" y="13" v-bind:class="{ selected: newCard[symbol] }" v-for="symbol in card">
                    {{ symbol }}
            </text>
            <text :x="getSymbolX(numSymbols) - 5" :y="16" v-on:click="removeCard(index)"></text>
        </g>
    </svg>
</div>
            </section>
        
    
        
            <section>
                <p>To find even larger decks I tried to write a program to find decks by brute force, trying all valid solutions. Sadly, I think it worked in $O(n!)$ time or worse, so by the time I reached $n = 12$ it was taking too long to run. There&#39;s probably a lot I could do to improve its efficiency, but I think I need a more clever strategy to get anything useful. I think that looking at the number of times each symbol is repeated as the deck is built might yield something, but I haven&#39;t worked out the specifics.</p>
            </section>
        
    
        
            <h2>The actual game</h2>
        
    
        
            <section>
                <p>The real game of Dobble has 55 cards with eight symbols on each card. The eighth Dobble number is $D(8) = 8^2 - 8 + 1 = 57$ so they could have had two more cards. I guess they decided 57 didn&#39;t seem like such a nice number. Presumably there are then 15 ($8 + 7$) symbols that appear only seven times. The Dobble Kids version has six symbols per card and &#34;30 cards with more than 30 paper animals&#34;. More than 30 paper animals must refer to the fact that there are 31 ($D(6)$) different symbols.</p>
            </section>
        
    
        
            <h2>Useful links</h2>
        
    
        
            <div>
    <div>
        


    
        
            <section>
                <p>Here are various links I came across whilst researching this topic. I didn&#39;t really use any of them to write this article; I&#39;ve mainly put them here so I can remember what I should read when I get the chance. I&#39;ve noticed that a quite a lot of articles have since been written on the subject of Dobble, but none quite like this I think.</p>
            </section>
        
    

    </div>
    <div>
        


    
        
            <section>
                <div><ol><li><a href="http://thewessens.net/ClassroomApps/Main/finitegeometry.html?topic=geometry&amp;id=19">The mathematics of Dobble</a></li><li><a href="https://www.maa.org/sites/default/files/pdf/horizons/PolsterApril2015.pdf">The Intersection Game</a></li><li><a href="https://puzzlewocky.com/games/the-math-of-spot-it/">Puzzlewocky</a></li><li><a href="http://www.maths.qmul.ac.uk/~lsoicher/designtheory.org/library/encyc/topics/pbd.pdf">Pairwise balanced designs (pdf)</a></li><li><a href="https://math.stackexchange.com/questions/442043/covering-with-most-possible-equal-size-subsets-having-pairwise-singleton-interse">Math Stack Exchange question</a></li><li><a href="https://en.wikipedia.org/wiki/Incidence_geometry">Incidence geometry on Wikipedia</a></li></ol></div>
            </section>
        
    

    </div>
</div>
        
    

    </article></div>
  </body>
</html>
