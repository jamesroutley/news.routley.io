<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://research.google/blog/heuristics-on-the-high-seas-mathematical-optimization-for-cargo-ships/">Original</a>
    <h1>Mathematical Optimization for Cargo Ships</h1>
    
    <div id="readability-page-1" class="page"><div data-gt-publish-date="20240604">
                    
                    


<section>
    
    <p data-block-key="68lqm">Look around you. Chances are that something in your line of sight sailed on a cargo ship. 90% of the world&#39;s goods travel over the ocean, often on cargo vessels mammoth in scale: a quarter mile long, weighing 250,000 tons, holding 12,000 containers of goods collectively worth a billion dollars. Unlike airplanes, trains, and trucks, cargo ships are in nearly constant operation, following cyclical routes across oceans.</p>


    
</section>

                    
                    
    

<!-- mode: '' -->


  
    
    
    <picture>
      
      
      <source media="(min-width: 768px)" srcset="https://storage.googleapis.com/gweb-research2023-media/images/HighSeas-1-Shipping.width-800.png" alt="HighSeas-1-Shipping"/>
      
      <img src="https://storage.googleapis.com/gweb-research2023-media/images/HighSeas-1-Shipping.width-800.png" alt="HighSeas-1-Shipping" loading="lazy"/>
      
        <p data-block-key="tt6ht"><i>A &#34;post-Panamax&#34; container ship, so named because it&#39;s too large to fit in the Panama Canal. Image source:</i> <a href="https://en.wikipedia.org/wiki/List_of_largest_container_ships" target="_blank" rel="noopener noreferrer"><i>Wikipedia</i></a><i>, licensed under</i> <a href="https://creativecommons.org/licenses/by-sa/4.0" target="_blank" rel="noopener noreferrer"><i>CC BY-SA 4.0</i></a><i>.</i></p>
      
    </picture>
  



                    
                    


<section>
    
    <div>
        <p data-block-key="68lqm">But, what are the best, most efficient routes for these ships? To a computer scientist, this is a graph theory problem; to a business analyst, a supply chain problem. Done poorly, containers linger at ports, ships idle offshore unable to berth, and ultimately, products become pricier as the flow of physical items becomes slower and unpredictable. Every container shipping company needs to solve these challenges, but they are typically solved separately. Combining them multiplies the complexity, and, to the best of our knowledge, is a problem that has never been solved at the scale required by the largest container operations (500 vessels and 1500 ports).</p><p data-block-key="2787n">Google&#39;s <a href="https://research.google/teams/operations-research/">Operations Research team</a> is proud to announce the <a href="https://developers.google.com/optimization/service/shipping/network_design" target="_blank" rel="noopener noreferrer">Shipping Network Design API</a>, which implements a new solution to this problem. Our approach scales better, enabling solutions to world-scale supply chain problems, while being faster than any known previous attempts. It is able to double the profit of a container shipper, deliver 13% more containers, and do so with 15% fewer vessels. Read on to see how we did it.</p>
    </div>


    
</section>

                    
                    


<section>
    
    <p>
        <h2 data-block-key="68lqm">Background</h2>
    </p>


    
</section>

                    
                    


<section>
    
    <div>
        <p data-block-key="68lqm">There are three components to the Liner Shipping Network Design and Scheduling Problem (LSNDSP). <i>Network design</i> determines the order in which vessels visit ports, <i>network scheduling</i> determines the times they arrive and leave, and <i>container routing</i> chooses the journey that containers take from origin to destination. Every container shipping company needs to solve all three challenges, but they are typically solved sequentially. Solving them all simultaneously is more difficult but is also more likely to discover better solutions.</p><p data-block-key="72d9c">Solutions to network design create <i>service lines</i> that a small set of vessels follow: for instance, sailing between eastern Asia, through the Suez canal, and to southern Europe. These service lines are published with dates, so that shippers can know when and where to have their containers ready at port.</p>
    </div>


    
</section>

                    
                    
    

<!-- mode: '' -->


  
    
    
    <picture>
      
      
      <source media="(min-width: 768px)" srcset="https://storage.googleapis.com/gweb-research2023-media/images/HighSeas-2-Routes.width-800.png" alt="HighSeas-2-Routes"/>
      
      <img src="https://storage.googleapis.com/gweb-research2023-media/images/HighSeas-2-Routes.width-800.png" alt="HighSeas-2-Routes" loading="lazy"/>
      
        <p data-block-key="tt6ht"><i>Part of a network design for a hypothetical ocean shipper, showing how vessels might cycle between nine ports.</i></p>
      
    </picture>
  



                    
                    


<section>
    
    <div>
        <p data-block-key="68lqm">Container vessels can&#39;t dock at ports whenever they like; they have pre-arranged berthing slots. As they approach a port, they linger at an <i>anchorage area</i>, an offshore location where they can drop anchor until their berth becomes free. When a port is congested, vessels may end up staying in the anchorage area for hours or days. And so the precise network schedule of the vessels becomes important: not just what day to dock, but what hour, and whether to increase velocity to arrive at a particular time (or conversely, to decrease velocity to save fuel).</p><p data-block-key="bv1uf">Once the vessel docks at the port, cranes offload the containers into stacks, and then load other containers onto the vessels for the next leg of the voyage. If the vessel falls behind schedule, it will sometimes <i>cut-and-run</i>: leaving the port before all the intended containers have been loaded, relying on later vessels to pick up the containers. When a container spends time at an intermediate port en route from origin to destination, it’s called <i>transshipment</i>. This multiplies further the number of possible solutions to LSNDSP. Transshipment is just one of several constraints that come into play when generating container routes.</p>
    </div>


    
</section>

                    
                    
    

<!-- mode: '' -->


  
    
    
    <picture>
      
      
      <source media="(min-width: 768px)" srcset="https://storage.googleapis.com/gweb-research2023-media/images/HighSeas-3-Cranes.width-800.jpg" alt="HighSeas-3-Cranes"/>
      
      <img src="https://storage.googleapis.com/gweb-research2023-media/images/HighSeas-3-Cranes.width-800.jpg" alt="HighSeas-3-Cranes" loading="lazy"/>
      
        <p data-block-key="tt6ht"><i>A container vessel berthed at port, underneath the cranes that load and unload containers. Image is</i> <a href="https://www.rawpixel.com/image/4021490/photo-image-water-delivery" target="_blank" rel="noopener noreferrer"><i>in the public domain</i></a><i>.</i></p>
      
    </picture>
  



                    
                    


<section>
    
    <p data-block-key="68lqm">Solving these three problems — network design, network scheduling, and container routing — at scale involves a staggeringly large search space.</p>


    
</section>

                    
                    


<section>
    
    <p>
        <h2 data-block-key="68lqm">Methods</h2>
    </p>


    
</section>

                    
                    


<section>
    
    <div>
        <p data-block-key="68lqm">Every optimization problem has three components: <i>variables</i> (e.g., ships and ports), <i>constraints</i> on those variables (e.g., a ship can fit only so many containers onboard), and an <i>objective function</i> to be minimized or maximized (e.g., maximize the number of containers shipped). The variables and constraints are often represented as a matrix in which the columns are the variables and the rows are the constraints.</p><p data-block-key="botcu">A common technique to decompose such large problems is <i>column generation</i>, in which only a subset of the variables are considered at first, and then new variables — that is, new columns — are generated to more closely approximate the original problem. To help manage this, we developed a software library that analyzes the problem and predicts which columns are best to generate. This library will be open sourced via <a href="https://developers.google.com/optimization/math_opt" target="_blank" rel="noopener noreferrer">MathOpt</a>, our mathematical programming framework.</p><p data-block-key="8rlga">With this in hand, we defined two basic approaches to solve the problem:</p><ol><li data-block-key="5e3k8"><i>Double Column Generation</i></li><li data-block-key="fns36"><i>CP-SAT</i></li></ol><p data-block-key="9k8sa">These two approaches enabled us to find provably optimal solutions, but they only scaled well to small and medium sized problems. To improve their scalability, we applied a heuristic strategy using two variants of <i>local search</i> in which we examine neighborhoods around existing solutions to find opportunities for improvements.</p><ol><li data-block-key="427e"><i>Large neighborhood search</i></li><li data-block-key="8l14q"><i>Variable neighborhood search</i></li></ol><p data-block-key="fqgg2">With both of these approaches, we made use of incrementalism: locking down promising portions of a solution so that we could start from a known good solution to make it better.</p><p data-block-key="f76v7">Finally, we also took into consideration transit times. Previous attempts to solve this problem didn&#39;t take transit times into account, since they make the problem much more difficult to solve. We found that inclusion of transit times significantly improved the solution quality.</p>
    </div>


    
</section>

                    
                    
    

<!-- mode: '' -->


  
    <div>
      <video playsinline="" muted="true" loop="true" preload="auto">
        <source src="https://storage.googleapis.com/gweb-research2023-media/media/HighSeas-6-Cartoon.mp4" type="video/mp4"/>
      </video>
      <div aria-label="Video Play/pause">
        <p><span>play silent looping video</span>
          <span>pause silent looping video</span>
        </p>
        
      </div>
      
      <p data-block-key="6y6cr">A small modification to the network discovered with neighborhood search can affect shipping profits. In this example, the model might suggest a new connection that makes it possible to ship containers between ports that weren’t previously connected.</p>
      
    </div>
  



                    
                    


<section>
    
    <p>
        <h2 data-block-key="68lqm">Results</h2>
    </p>


    
</section>

                    
                    


<section>
    
    <div>
        <p data-block-key="68lqm">To quantify the performance of our solutions, we use <a href="https://github.com/blof/LINERLIB" target="_blank" rel="noopener noreferrer">LINERLIB</a>, an industry benchmark for shipping network design problems, including container shipping scenarios: fleets, ports, and container demands. We tested our solution on three scenarios: WorldSmall, EuropeAsia, and the beastly WorldLarge, the latter of which contains 500 vessels, 200 ports, and nearly 140,000 containers.</p><p data-block-key="2gbpi">Below is the comparison of five LINERLIB scenarios.</p>
    </div>


    
</section>

                    
                    
    

<!-- mode: '' -->


  
    
    
    <picture>
      
      
      <source media="(min-width: 768px)" srcset="https://storage.googleapis.com/gweb-research2023-media/images/HighSeas-4b-ContainersVVessels.width-800.png" alt="HighSeas-4b-ContainersVVessels"/>
      
      <img src="https://storage.googleapis.com/gweb-research2023-media/images/HighSeas-4b-ContainersVVessels.width-800.png" alt="HighSeas-4b-ContainersVVessels" loading="lazy"/>
      
        <p data-block-key="tt6ht"><i>A comparison of our solutions to the previously best known solutions. The size of the bubble corresponds to the number of ports, indicating the scale of the problem. Our solutions consistently reduce the number of vessels needed for a given volume of containers.</i></p>
      
    </picture>
  



                    
                    


<section>
    
    <div>
        <p data-block-key="68lqm">In any optimization scenario, it&#39;s important to specify the objective. Want to maximize the number of containers shipped? Easy: throw more ships at the problem, ballooning operating costs. Want to minimize the number of vessels used? Again, easy: have one ship deliver every container in the world, with ludicrously long delivery times.</p><p data-block-key="dvc2p">The LINERLIB benchmark balances these by calculating the estimated <i>profit</i>: the revenue from on-time deliveries minus the costs of sailing and handling containers at port. The next figure depicts how our solution&#39;s profit compares to previous attempts.</p>
    </div>


    
</section>

                    
                    
    

<!-- mode: '' -->


  
    
    
    <picture>
      
      
      <source media="(min-width: 768px)" srcset="https://storage.googleapis.com/gweb-research2023-media/images/HighSeas-5-Profit.width-800.png" alt="HighSeas-5-Profit"/>
      
      <img src="https://storage.googleapis.com/gweb-research2023-media/images/HighSeas-5-Profit.width-800.png" alt="HighSeas-5-Profit" loading="lazy"/>
      
        <p data-block-key="tt6ht"><i>Improvements in weekly profit from our solutions compared to the previously best available solutions. Profits are based on the economic assumptions in the LINERLIB dataset.</i></p>
      
    </picture>
  



                    
                    


<section>
    
    <p data-block-key="68lqm">Compared to the baseline, our method was able to route more containers with fewer vessels. For each of the LINERLIB scenarios, our solutions improved the overall efficiency, increasing the throughput (35% more containers for WorldSmall, 14% for EuropeAsia, 35% for Pacific, 32% for Mediterranean) while using fewer vessels (7%, 15%, 4%, and 23% respectively). Based on the economic assumptions in LINERLIB, our solutions also improved projected profit margins considerably.</p>


    
</section>

                    
                    


<section>
    
    <p>
        <h2 data-block-key="68lqm">Conclusion</h2>
    </p>


    
</section>

                    
                    


<section>
    
    <div>
        <p data-block-key="68lqm">As our results show, the careful selection of advanced optimization techniques can have a remarkable effect on the efficiency of shipping networks. We believe our method is the first able to solve the network design and scheduling problem at the scale of WorldLarge. You can examine our results in more detail on our <a href="https://developers.google.com/optimization/service/shipping/benchmarks/lsndsp" target="_blank" rel="noopener noreferrer">benchmark page</a>. We hope that this work will inspire additional research into this domain with the goal of building more efficient and smooth global supply chains.</p><p data-block-key="51ghj">The <a href="https://developers.google.com/optimization/service/shipping/network_design" target="_blank" rel="noopener noreferrer">Shipping Network Design API</a> is one of a set of <a href="https://developers.google.com/optimization/service" target="_blank" rel="noopener noreferrer">Operations Research APIs</a> that we&#39;ll be adding to in the future as we look for other industries to optimize.</p>
    </div>


    
</section>

                    
                </div></div>
  </body>
</html>
