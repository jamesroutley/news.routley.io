<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://ishadeed.com/article/rebuild-featured-news-modern-css/">Original</a>
    <h1>Rebuilding a featured news section with modern CSS: Vox news</h1>
    
    <div id="readability-page-1" class="page"><div>
		
		<p>Looking at a layout at first glance might imply that it’s easy and straightforward to build. The moment you start building the initial layout, you will face challenges that you didn’t think about in your initial look at the design.</p>

<p>In this article, I will rethink how to build the featured news section on Vox.com and try to see if modern CSS will be helpful or not. For example, do we need to use container queries? Or fluid sizing? That’s the goal of this article. It’s a journey as I think aloud about building a layout that seems simple.</p>

<h2 id="table-of-contents">Table of contents</h2>

<ul>
  <li><a href="#analyzing-the-section">Analyzing the section</a></li>
  <li><a href="#changes-from-the-large-to-medium">Changes from the large to medium</a></li>
  <li><a href="#changes-from-medium-to-small">Changes from medium to small</a></li>
  <li><a href="#building-the-main-layout">Building the main layout</a>

    <ul>
      <li><a href="#the-medium-viewport-size">The medium viewport size</a></li>
      <li><a href="#the-large-viewport-size">The large viewport size</a></li>
    </ul>
  </li>
  <li><a href="#card-component">Card component</a></li>
  <li><a href="#a-look-at-a-few-details-on-vox-layout">A look at a few details on Vox layout</a>

    <ul>
      <li><a href="#card-thumbnail">Card thumbnail</a></li>
      <li><a href="#card-title-size">Card title size</a></li>
      <li><a href="#separator">Separator</a></li>
    </ul>
  </li>
  <li><a href="#rethinking-the-card-with-modern-css">Rethinking the card with modern CSS</a>

    <ul>
      <li><a href="#card-meta-font-family">Card meta font family</a></li>
      <li><a href="#default-card-style">Default card style</a></li>
      <li><a href="#horizontal-style">Horizontal style</a></li>
      <li><a href="#card-thumbnail-aspect-ratio">Card thumbnail aspect ratio</a></li>
      <li><a href="#card-horizontal-style">Card horizontal style</a></li>
      <li><a href="#featured-style">Featured style</a></li>
      <li><a href="#plain-card">Plain card</a></li>
      <li><a href="#spacing-and-separators">Spacing and separators</a></li>
      <li><a href="#container-units">Container units</a></li>
      <li><a href="#text-balancing">Text balancing</a></li>
    </ul>
  </li>
  <li><a href="#outro">Outro</a></li>
</ul>

<h2 id="analyzing-the-section">Analyzing the section</h2>

<figure>
    
        <img src="https://ishadeed.com/assets/featured-section/featured-section-desktop.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>In the largest viewport, we have a 3 columns layout. Two of the columns take 25% of the width, and the middle one takes 50%. Here is a visual that shows them:</p>

<figure>
    
        <img src="https://ishadeed.com/assets/featured-section/featured-section-cols.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>Now that we have an idea about the columns, let’s take a look at the components within them.</p>

<figure>
    
        <img src="https://ishadeed.com/assets/featured-section/featured-section.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>It might look a bit confusing to spot the differences, but I will walk you through each change so we can have an idea about what’s changing on each viewport size.</p>

<h2 id="changes-from-the-large-to-medium">Changes from the large to medium</h2>

<figure>
    
        <img src="https://ishadeed.com/assets/featured-section/featured-section-larger-medium-changes.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<ul>
  <li>Featured section: almost the same, but with a different font size that is changing based on the viewport width.</li>
  <li>Blue section: the font size of each card title got smaller.</li>
  <li>Pink section:
    <ul>
      <li>The first article’s thumb is hidden.</li>
      <li>Layout is changed from one column to three columns.</li>
      <li>Adding a separator at the top of the section.</li>
    </ul>
  </li>
</ul>

<h2 id="changes-from-medium-to-small">Changes from medium to small</h2>

<figure>
    
        <img src="https://ishadeed.com/assets/featured-section/featured-section-medium-small-changes.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<ul>
  <li>All articles will switch to the horizontal style with the thumbnail shown for each one.</li>
  <li>The featured article will become horizontal, but with a larger thumbnail to differentiate it from the rest of the articles.</li>
</ul>

<p>With that in mind, we have a basic outline of how the layout is behaving on different viewport sizes. The next step is to build the layout and handle the ordering of the columns.</p>

<h2 id="building-the-main-layout">Building the main layout</h2>
<p>In vox.com, CSS flexbox is being used to handle the layout. I’m not a fan of using flexbox for such a purpose as this feels more like a CSS grid use case. I believe the Vox team used flexbox since it was better supported at the time of building the layout.</p>

<figure>
    
        <img src="https://ishadeed.com/assets/featured-section/vox-flexbox-col.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<div><div><pre><code><span>@media</span> <span>(</span><span>min-width</span><span>:</span> <span>880px</span><span>)</span>
    <span>.</span><span>c-newspaper__column</span> <span>{</span>
        <span>width</span><span>:</span> <span>22.5%</span><span>;</span>
        <span>padding</span><span>:</span> <span>0</span> <span>16px</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div></div>

<p>The CSS above is responsible for the following:</p>
<ul>
  <li>Setting the width of the column. Using <code>width</code> property for that works fine, but we can also use the <code>flex</code> property.</li>
  <li>Adding padding on the left and right sides is an old way to introduce a gap between columns. Now we have the <code>gap</code> property!</li>
</ul>

<p>We can use the <code>flex</code> property like this:</p>

<div><div><pre><code><span>@media</span> <span>(</span><span>min-width</span><span>:</span> <span>880px</span><span>)</span>
    <span>.</span><span>c-newspaper__column</span> <span>{</span>
        <span>flex</span><span>:</span> <span>0</span> <span>0</span> <span>22.5%</span><span>;</span>
        <span>padding</span><span>:</span> <span>0</span> <span>16px</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div></div>

<p>..but the good news is that we don’t have to use flexbox.</p>

<p>Nowadays, CSS grid has excellent browser support and it’s easier to deal with the sizing and spacing. Also, I’m an advocate of using <a href="https://ishadeed.com/article/grid-layout-flexbox-components/">grid for layouts and flexbox for components</a>.</p>

<p>Consider the following HTML markup:</p>

<div><div><pre><code><span>&lt;div</span> <span>class=</span><span>&#34;c-newspaper&#34;</span><span>&gt;</span>
    <span>&lt;!-- Featured column --&gt;</span>
    <span>&lt;div</span> <span>class=</span><span>&#34;c-newspaper__col&#34;</span><span>&gt;</span>1<span>&lt;/div&gt;</span>
    
    <span>&lt;!-- Other columns --&gt;</span>
    <span>&lt;div</span> <span>class=</span><span>&#34;c-newspaper__col&#34;</span><span>&gt;</span>2<span>&lt;/div&gt;</span>
    <span>&lt;div</span> <span>class=</span><span>&#34;c-newspaper__col&#34;</span><span>&gt;</span>3<span>&lt;/div&gt;</span>
<span>&lt;/div&gt;</span>
</code></pre></div></div>

<p>I added numbers for illustrating how each layout column will be reordered on different viewport sizes.</p>

<figure>
    
        <img src="https://ishadeed.com/assets/featured-section/featured-section-cols-ordering.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>CSS grid sounds perfect for the above, right?</p>

<p>First, we need to set up the grid for all sizes.</p>

<div><div><pre><code><span>.c-newspaper</span> <span>{</span>
    <span>display</span><span>:</span> <span>grid</span><span>;</span>
    <span>grid-template-columns</span><span>:</span> <span>1</span><span>fr</span><span>;</span>
    <span>gap</span><span>:</span> <span>1rem</span><span>;</span>
<span>}</span>

<span>@media</span> <span>(</span><span>min-width</span><span>:</span> <span>550px</span><span>)</span> <span>{</span>
    <span>.c-newspaper</span> <span>{</span>
        <span>grid-template-columns</span><span>:</span> <span>1</span><span>fr</span> <span>1</span><span>fr</span> <span>1</span><span>fr</span><span>;</span>
    <span>}</span>
<span>}</span>

<span>@media</span> <span>(</span><span>min-width</span><span>:</span> <span>880px</span><span>)</span> <span>{</span>
    <span>.c-newspaper</span> <span>{</span>
        <span>grid-template-columns</span><span>:</span> <span>1</span><span>fr</span> <span>2</span><span>fr</span> <span>1</span><span>fr</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div></div>

<p>A few things to keep in mind:</p>
<ul>
  <li>Initially, the grid has only one column. I used CSS grid to get the benefit of the <code>gap</code> property for spacing.</li>
  <li>When the viewport width is <code>550px</code> or larger, the grid will have 3 columns. The same happens on the larger viewport <code>880px</code>, but the second column is double the size of its sibling columns.</li>
</ul>

<p>The vox.com styles for the columns are built with the <code>order</code> property to reposition the columns on different sizes.</p>

<div><div><pre><code><span>@media</span> <span>(</span><span>min-width</span><span>:</span> <span>880px</span><span>)</span> <span>{</span>
    <span>.c-newspaper__column</span><span>:first-child</span> <span>{</span>
        <span>order</span><span>:</span> <span>1</span><span>;</span>
    <span>}</span>
    
    <span>.c-newspaper__column</span><span>:last-child</span> <span>{</span>
        <span>order</span><span>:</span> <span>3</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div></div>

<p>With CSS grid, the above isn’t needed at all as we can reorder the layout by positioning an element on any grid lines we want.</p>

<p>Let’s explore how to place the layout columns with CSS grid.</p>

<h3 id="the-medium-viewport-size">The medium viewport size</h3>
<p>We need to position the columns as per the viewport width. For the medium size:</p>
<ul>
  <li>The first column is placed from line 2 to line 4.</li>
  <li>The second column is placed from line 1 to line 2.</li>
  <li>The third column is placed from line 1 to line 4 (spanning the full width).</li>
</ul>

<div><div><pre><code><span>@media</span> <span>(</span><span>min-width</span><span>:</span> <span>550px</span><span>)</span> <span>{</span>
    <span>.c-newspaper</span> <span>{</span>
        <span>grid-template-columns</span><span>:</span> <span>1</span><span>fr</span> <span>1</span><span>fr</span> <span>1</span><span>fr</span><span>;</span>
    <span>}</span>
    
    <span>.c-newspaper__col</span><span>:first-child</span> <span>{</span>
        <span>grid-column</span><span>:</span> <span>2</span><span>/</span><span>4</span><span>;</span>
    <span>}</span>
  
    <span>.c-newspaper__col</span><span>:nth-child</span><span>(</span><span>2</span><span>)</span> <span>{</span>
        <span>grid-column</span><span>:</span> <span>1</span><span>/</span><span>2</span><span>;</span>
        <span>grid-row</span><span>:</span> <span>1</span><span>;</span>
    <span>}</span>
  
    <span>.c-newspaper__col</span><span>:last-child</span> <span>{</span>
        <span>display</span><span>:</span> <span>flex</span><span>;</span>
        <span>grid-column</span><span>:</span> <span>1</span><span>/</span><span>4</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div></div>

<figure>
    
        <img src="https://ishadeed.com/assets/featured-section/featured-section-grid-medium.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<h3 id="the-large-viewport-size">The large viewport size</h3>
<p>And for the large size, remember that the second column is now <code>2fr</code>, so it will have to double the size of the side column.</p>

<ul>
  <li>The first column is placed from line 2 to line 3.</li>
  <li>The second line stays within the same placement.</li>
  <li>The last column is placed from line 3 to line 4.</li>
</ul>

<div><div><pre><code><span>@media</span> <span>(</span><span>min-width</span><span>:</span> <span>880px</span><span>)</span> <span>{</span>
    <span>.c-newspaper</span> <span>{</span>
        <span>grid-template-columns</span><span>:</span> <span>1</span><span>fr</span> <span>2</span><span>fr</span> <span>1</span><span>fr</span><span>;</span>
    <span>}</span>
    
    <span>.c-newspaper__col</span><span>:first-child</span> <span>{</span>
        <span>grid-column</span><span>:</span> <span>2</span><span>/</span><span>3</span><span>;</span>
    <span>}</span>
  
    <span>.c-newspaper__col</span><span>:last-child</span> <span>{</span>
        <span>grid-column</span><span>:</span> <span>3</span><span>/</span><span>4</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div></div>

<figure>
    
        <img src="https://ishadeed.com/assets/featured-section/featured-section-grid-large.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p><a href="https://codepen.io/shadeed/pen/wvYWvKe/498487335c4865fa0e5f0aa794022d43?editors=0100">A visual demo</a></p>

<p>Now that we have a working grid, we can start thinking about the inner components and how to build them.</p>

<h2 id="card-component">Card component</h2>
<p>This is the core focus of this article, the card component. I compiled a visual of all the variations we have:</p>

<figure>
    
        <img src="https://ishadeed.com/assets/featured-section/card-component-variations.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>All of those can live within the featured section but with a different design variation for each card.</p>

<p>Let’s take the default card as an example:</p>

<figure>
    
        <img src="https://ishadeed.com/assets/featured-section/card-stack-thumb.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>In vox.com HTML, the card has the following CSS classes:</p>

<div><div><pre><code><span>&lt;div</span> <span>class=</span><span>&#34;c-entry-box--compact c-entry-box--compact--article c-entry-box--compact--hero c-entry-box--compact--2&#34;</span><span>&gt;&lt;/div&gt;</span>
</code></pre></div></div>

<p>That is a long list of CSS classes, and the class name itself is lengthy, too.</p>

<h2 id="a-look-at-a-few-details-on-vox-layout">A look at a few details on Vox layout</h2>

<h3 id="card-thumbnail">Card thumbnail</h3>
<p>The card component is built in a way that uses a lot of variation classes. For example, here is how the thumbnail is hidden in the plain card:</p>

<div><div><pre><code><span>.c-entry-box--compact--7</span> <span>.c-entry-box--compact__image-wrapper</span> <span>{</span>
    <span>display</span><span>:</span> <span>none</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<figure>
    
        <img src="https://ishadeed.com/assets/featured-section/card-thumb.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>A custom variation class is used <strong>for every single</strong> card in the featured section. In total, the CSS looks like this:</p>

<figure>
    
        <img src="https://ishadeed.com/assets/featured-section/card-thumb-2.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>That is too much, I think.</p>

<h3 id="card-title-size">Card title size</h3>
<p>The title size for the default card is <code>20px</code> and <code>16px</code> for the plain card (without a thumbnail).</p>

<figure>
    
        <img src="https://ishadeed.com/assets/featured-section/card-font-size.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>Here is how that is handled on vox.com:</p>

<div><div><pre><code><span>@media</span> <span>(</span><span>min-width</span><span>:</span> <span>880px</span><span>)</span>
    <span>.</span><span>c-newspaper</span> <span>.</span><span>c-entry-box--compact__title</span> <span>{</span>
        <span>font-size</span><span>:</span> <span>.9em</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div></div>

<p>The <code>.c-newspaper</code> is the main element that contains all the cards, so using it like that to tag the title element doesn’t look right to me. What if that needs to be used in another container that doesn’t have the class <code>.c-newsppaper</code>?</p>

<h3 id="separator">Separator</h3>

<figure>
    
        <img src="https://ishadeed.com/assets/featured-section/card-bottom-border.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>There is a line separate between cards. It’s being handled in the CSS like this:</p>

<div><div><pre><code><span>.c-newspaper</span> <span>.c-entry-box--compact</span> <span>{</span>
    <span>border-bottom</span><span>:</span> <span>1px</span> <span>solid</span> <span>#d1d1d1</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>Two things that don’t look good to me here:</p>
<ul>
  <li>Using <code>.c-newspaper</code> element to select the card.</li>
  <li>Adding the separator directly to the card itself. This is a conditional style that isn’t related to the card.</li>
</ul>

<h2 id="rethinking-the-card-with-modern-css">Rethinking the card with modern CSS</h2>

<figure>
    
        <img src="https://ishadeed.com/assets/featured-section/featured-section-thinking.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>The main motivation for this article is the card component. When I started thinking about it, I got the idea to use some or all of these features:</p>
<ul>
  <li>CSS grid</li>
  <li>aspect-ratio</li>
  <li>text wrap balancing</li>
  <li>CSS :has</li>
  <li>Fluid sizing and spacing</li>
  <li>Size container queries</li>
  <li>Style container queries</li>
</ul>

<p>I already explored using CSS grid for the main layout. Here is what the HTML markup looks like:</p>

<div><div><pre><code><span>&lt;div</span> <span>class=</span><span>&#34;c-newspaper&#34;</span><span>&gt;</span>
    <span>&lt;div</span> <span>class=</span><span>&#34;c-newspaper__col&#34;</span><span>&gt;</span>
        <span>&lt;div</span> <span>class=</span><span>&#34;c-newspaper__item&#34;</span><span>&gt;</span>
            <span>&lt;article</span> <span>class=</span><span>&#34;c-card&#34;</span><span>&gt;</span>
                <span>&lt;!-- Card component --&gt;</span>
            <span>&lt;/article&gt;</span>
        <span>&lt;/div&gt;</span>
        <span>&lt;div</span> <span>class=</span><span>&#34;c-newspaper__item&#34;</span><span>&gt;&lt;/div&gt;</span>
        <span>&lt;div</span> <span>class=</span><span>&#34;c-newspaper__item&#34;</span><span>&gt;&lt;/div&gt;</span>
    <span>&lt;/div&gt;</span>
    <span>&lt;!-- Other columns --&gt;</span>
<span>&lt;/div&gt;</span>
</code></pre></div></div>

<p>The card component lives within the <code>.c-newspaper__item</code>, which acts as the card container.</p>

<p>Generally speaking, I like to wrap the component in an abstract container. This is useful for:</p>
<ul>
  <li>Adding borders</li>
  <li>Controlling the spacing</li>
  <li>Works well for size container queries</li>
</ul>

<h3 id="card-meta-font-family">Card meta font family</h3>
<p>When the card component is within the featured section, the font family of the author’s name is different. To do that, we can check if the following container query works, and if yes, the font will be applied.</p>

<div><div><pre><code><span>@container</span> <span>main</span> <span>(</span><span>min-width</span><span>:</span> <span>1px</span><span>)</span> <span>{</span>
    <span>.c-card__meta</span> <span>{</span>
        <span>font-family</span><span>:</span> <span>&#34;Playfair Display&#34;</span><span>,</span> <span>serif</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div></div>

<h3 id="default-card-style">Default card style</h3>
<p>We need to set a default card style that we can style. In this case, both the horizontal and stacked styles are used equally, but I will assume that the stacked card is used more, just for the sake of the article.</p>

<div><div><pre><code><span>&lt;article</span> <span>class=</span><span>&#34;c-card&#34;</span><span>&gt;</span>
    <span>&lt;div</span> <span>class=</span><span>&#34;c-card__thumb&#34;</span><span>&gt;&lt;/div&gt;</span>
    <span>&lt;div</span> <span>class=</span><span>&#34;c-card__content&#34;</span><span>&gt;</span>
        <span>&lt;h3</span> <span>class=</span><span>&#34;c-card__title&#34;</span><span>&gt;&lt;/h3&gt;</span>
        <span>&lt;p</span> <span>class=</span><span>&#34;c-card__tease&#34;</span><span>&gt;&lt;/p&gt;</span>
        <span>&lt;p</span> <span>class=</span><span>&#34;c-card__meta&#34;</span><span>&gt;&lt;/p&gt;</span>
    <span>&lt;/div&gt;</span>
<span>&lt;/article&gt;</span>
</code></pre></div></div>

<figure>
    
        <img src="https://ishadeed.com/assets/featured-section/card-stack-thumb.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>Cool! Let’s from there for the rest of the variations.</p>

<h3 id="horizontal-style">Horizontal style</h3>
<p>The card will flip to the horizontal style when its container is larger than <code>300px</code> and the CSS variable <code>--horizontal: true</code> has been set on the container.</p>

<div><div><pre><code><span>&lt;div</span> <span>class=</span><span>&#34;c-newspaper__item&#34;</span> <span>style=</span><span>&#34;--horizontal: true;&#34;</span><span>&gt;</span>
    <span>&lt;article</span> <span>class=</span><span>&#34;c-card&#34;</span><span>&gt;&lt;/article&gt;</span>
<span>&lt;/div&gt;</span>
</code></pre></div></div>

<div><div><pre><code><span>.c-newspaper__item</span> <span>{</span>
    <span>container-type</span><span>:</span> <span>inline-size</span><span>;</span>
    <span>container-name</span><span>:</span> <span>card</span><span>;</span>
<span>}</span>

<span>@container</span> <span>card</span> <span>(</span><span>min-width</span><span>:</span> <span>300px</span><span>)</span> <span>and</span> <span>style</span><span>(</span><span>--horizontal</span><span>:</span> <span>true</span><span>)</span> <span>{</span>
    <span>.c-card</span> <span>{</span>
        <span>display</span><span>:</span> <span>flex</span><span>;</span>
        <span>gap</span><span>:</span> <span>1rem</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div></div>

<p>Notice that I combined a <strong>size and a style</strong> container query. The size query works based on the container width. While the style query works by checking if the CSS variable is there.</p>

<figure>
    
        <img src="https://ishadeed.com/assets/featured-section/card-default-to-horizontal.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>We also have the same variation but with the card thumbnail positioned being flipped. We can do that via the <code>order</code> property.</p>

<p>To query that, we need to add the variable <code>--flipped: true</code>.</p>

<div><div><pre><code><span>&lt;div</span> <span>class=</span><span>&#34;c-newspaper__item&#34;</span>
    <span>style=</span><span>&#34;--horizontal: true; 
           --flipped: true&#34;</span><span>&gt;</span>
<span>&lt;/div&gt;</span>
</code></pre></div></div>

<p>At first, I tried the following CSS but it didn’t work as expected. It’s not possible to merge two container queries for different containers. In my case, the containers are <strong>main and card</strong>.</p>

<div><div><pre><code><span>/* That didn&#39;t work */</span>
<span>@container</span> <span>main</span> <span>(</span><span>min-width</span><span>:</span> <span>550px</span><span>)</span> <span>and</span> <span>card</span> <span>style</span><span>(</span><span>--flipped</span><span>:</span> <span>true</span><span>)</span> <span>{</span> <span>}</span>
</code></pre></div></div>

<p>After reading <a href="https://drafts.csswg.org/css-contain-3/#container-rule">the spec</a>, I noticed the following:</p>

<blockquote>
  <p>While it is not possible to query multiple containers in a single container query, that can be achieved by nesting multiple queries:</p>
</blockquote>

<p>I nested the <strong>style query</strong> inside another container query. In plain words, that is like saying:</p>

<blockquote>
  <p>When the container <strong>main</strong> width is equal to or larger than 550px <strong>and</strong> the CSS variable –flipped is set on the cards container, apply the following CSS.</p>
</blockquote>

<div><div><pre><code><span>.wrapper</span> <span>{</span>
    <span>max-width</span><span>:</span> <span>1120px</span><span>;</span>
    <span>margin</span><span>:</span> <span>1rem</span> <span>auto</span><span>;</span>
    <span>padding-inline</span><span>:</span> <span>1rem</span><span>;</span>
    <span>container-name</span><span>:</span> <span>main</span><span>;</span>
    <span>container-type</span><span>:</span> <span>inline-size</span><span>;</span>
<span>}</span>

<span>@container</span> <span>main</span> <span>(</span><span>min-width</span><span>:</span> <span>550px</span><span>)</span> <span>{</span>
    <span>@container</span> <span>card</span> <span>style</span><span>(</span><span>--flipped</span><span>:</span> <span>true</span><span>)</span> <span>{</span>
        <span>.c-card__thumb</span> <span>{</span>
            <span>order</span><span>:</span> <span>2</span><span>;</span>
        <span>}</span>
    <span>}</span>
<span>}</span>
</code></pre></div></div>

<figure>
    
        <img src="https://ishadeed.com/assets/featured-section/card-default-to-horizontal-2.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>To learn more about container queries, here are a few write-ups on the topic:</p>
<ul>
  <li><a href="https://ishadeed.com/article/say-hello-to-css-container-queries/">Say Hello To CSS Container Queries</a></li>
  <li><a href="https://ishadeed.com/article/css-container-style-queries/">CSS Style Queries</a></li>
</ul>

<h3 id="card-thumbnail-aspect-ratio">Card thumbnail aspect ratio</h3>
<p>The current way of implementing ting the card thumbnail doesn’t account for when there is an image with a different aspect ratio. We can use the CSS <code>aspect-ratio</code> property to force the card thumb to have the same aspect ratio.</p>

<p>Let’s assume that I added a large image that has a different aspect ratio. We’ll end up with something like this:</p>

<figure>
    
        <img src="https://ishadeed.com/assets/featured-section/card-thumb-aspect-ratio.jpg" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>To avoid that, we can define an aspect ratio:</p>

<div><div><pre><code><span>.c-card__thumb</span> <span>img</span> <span>{</span>
    <span>aspect-ratio</span><span>:</span> <span>5</span><span>/</span><span>3</span><span>;</span>
    <span>object-fit</span><span>:</span> <span>cover</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>If you are interested to learn more about aspect ratio, I <a href="https://ishadeed.com/article/css-aspect-ratio/">wrote an article</a> about that.</p>

<h3 id="card-horizontal-style">Card horizontal style</h3>
<p>On vox.com, the horizontal card style was built in a way that feels a bit unnecessary.</p>

<div><div><pre><code><span>/* CSS from vox.com */</span>
<span>.c-entry-box--compact__image-wrapper</span> <span>{</span>
    <span>width</span><span>:</span> <span>30%</span><span>;</span>
<span>}</span>

<span>.c-entry-box--compact__body</span> <span>{</span>
    <span>flex-grow</span><span>:</span> <span>1</span><span>;</span>
    <span>width</span><span>:</span> <span>70%</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>Why is that? I guess that is to avoid having such a UI behavior:</p>

<figure>
    
        <img src="https://ishadeed.com/assets/featured-section/card-horizontal-broken.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>Notice that I mentioned “UI behavior”, not a bug. The above is a default behavior for flexbox. We need to force the image to have a fixed and consistent size.</p>

<div><div><pre><code><span>.c-entry-box--compact__image-wrapper</span> <span>{</span>
    <span>flex</span><span>:</span> <span>0</span> <span>0</span> <span>30%</span><span>;</span>
<span>}</span>

<span>.c-entry-box--compact__body</span> <span>{</span>
    <span>flex-grow</span><span>:</span> <span>1</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>We can fix that by simply using the flex property. No need to use the <code>width</code>.</p>

<h3 id="featured-style">Featured style</h3>
<p>The featured card is displayed horizontally when the container width is small and will change to the stacked styles on larger sizes. In this case, the thumbnail becomes larger and takes 50% of the width.</p>

<p>Here is a comparison between a default horizontal style and the featured one.</p>

<figure>
    
        <img src="https://ishadeed.com/assets/featured-section/card-featured-cases.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>When the container width becomes larger, the card style will become stacked.</p>

<figure>
    
        <img src="https://ishadeed.com/assets/featured-section/card-featured-cases-2.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>To implement that, I used the <code>--featured</code> variable on the card’s container.</p>

<div><div><pre><code><span>&lt;div</span> <span>class=</span><span>&#34;c-newspaper__item&#34;</span>
    <span>style=</span><span>&#34;--featured: true;&#34;</span><span>&gt;</span>
<span>&lt;/div&gt;</span>
</code></pre></div></div>

<p>Firstly, I added the horizontal style as default.</p>
<ul>
  <li>Added <code>flex</code> to turn on the horizontal design.</li>
  <li>The card thumb takes <code>50%</code> of the available width.</li>
  <li>Changed the font family to a serif font and a larger size, as per the design.</li>
</ul>

<div><div><pre><code><span>@container</span> <span>style</span><span>(</span><span>--featured</span><span>:</span> <span>true</span><span>)</span> <span>{</span>
    <span>.c-card</span> <span>{</span>
        <span>display</span><span>:</span> <span>flex</span><span>;</span>
        <span>gap</span><span>:</span> <span>1rem</span><span>;</span>
    <span>}</span>

    <span>.c-card__thumb</span> <span>{</span>
        <span>flex</span><span>:</span> <span>0</span> <span>0</span> <span>50%</span><span>;</span>
    <span>}</span>
  
    <span>.c-card__tease</span> <span>{</span>
        <span>font-family</span><span>:</span> <span>&#34;Playfair Display&#34;</span><span>,</span> <span>serif</span><span>;</span>
        <span>font-size</span><span>:</span> <span>19px</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div></div>

<p>When the container size gets larger, the browser will apply the stacked styling to the card.</p>

<div><div><pre><code><span>@container</span> <span>main</span> <span>(</span><span>min-width</span><span>:</span> <span>550px</span><span>)</span> <span>{</span>
    <span>@container</span> <span>card</span> <span>style</span><span>(</span><span>--featured</span><span>:</span> <span>true</span><span>)</span> <span>{</span>
        <span>.c-card</span> <span>{</span>
            <span>flex-direction</span><span>:</span> <span>column</span><span>;</span>
            <span>gap</span><span>:</span> <span>0</span><span>;</span>
        <span>}</span>

        <span>.c-card__title</span> <span>{</span>
            <span>font-size</span><span>:</span> <span>calc</span><span>(</span><span>1rem</span> <span>+</span> <span>2.5</span><span>cqw</span><span>);</span>
        <span>}</span>

        <span>.c-card__content</span> <span>{</span>
            <span>text-align</span><span>:</span> <span>center</span><span>;</span>
        <span>}</span>
        
        <span>.c-card__thumb</span> <span>{</span>
            <span>flex</span><span>:</span> <span>initial</span><span>;</span>
        <span>}</span>
    <span>}</span>
<span>}</span>
</code></pre></div></div>

<h3 id="plain-card">Plain card</h3>
<p>In this variation, the font size gets smaller. That happens when the image is hidden. At first, I thought about using CSS <code>:has</code> to check if the card thumb is displayed or not.</p>

<figure>
    
        <img src="https://ishadeed.com/assets/featured-section/card-font-size.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>In vox.com, the card thumb is hidden via CSS, so it’s not possible to use <code>:has</code> as it will be valid even if the thumb is hidden.</p>

<div><div><pre><code><span>&lt;article</span> <span>class=</span><span>&#34;c-card&#34;</span><span>&gt;</span>
    <span>&lt;div</span> <span>class=</span><span>&#34;c-card__thumb&#34;</span><span>&gt;&lt;/div&gt;</span>
    <span>&lt;div</span> <span>class=</span><span>&#34;c-card__content&#34;</span><span>&gt;&lt;/div&gt;</span>
<span>&lt;/article&gt;</span>
</code></pre></div></div>

<div><div><pre><code><span>.c-card__thumb</span> <span>{</span>
    <span>display</span><span>:</span> <span>none</span><span>;</span>
<span>}</span>

<span>/* This will always work. */</span>
<span>.c-card</span><span>:has</span><span>(</span><span>.c-card__thumb</span><span>)</span> <span>.c-card__title</span> <span>{</span>
    <span>font-size</span><span>:</span> <span>19px</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>If the image can be conditionally added via Javascript, then we can use <code>:has</code>. Otherwise, I will default to a style query.</p>

<div><div><pre><code><span>@container</span> <span>main</span> <span>(</span><span>min-width</span><span>:</span> <span>550px</span><span>)</span> <span>{</span>
    <span>@container</span> <span>card</span> <span>style</span><span>(</span><span>--compact</span><span>:</span> <span>2</span><span>)</span> <span>{</span>
        <span>.c-card__title</span> <span>{</span>
            <span>font-size</span><span>:</span> <span>19px</span><span>;</span>
        <span>}</span>
    <span>}</span>
<span>}</span>
</code></pre></div></div>

<h3 id="spacing-and-separators">Spacing and separators</h3>
<p>The current way in vox.com to handle the spacing is by adding padding directly to the card. I don’t prefer that. The card styles shouldn’t depend on where it lives. The spacing should be added to the card’s wrapper instead.</p>

<figure>
    
        <img src="https://ishadeed.com/assets/featured-section/spacing-layout-1.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>To make things easier, I added a CSS variable <code>--gap</code> to each column.</p>

<div><div><pre><code><span>.c-newspaper__col</span> <span>{</span>
  <span>--gap</span><span>:</span> <span>20px</span><span>;</span>
  <span>display</span><span>:</span> <span>flex</span><span>;</span>
  <span>flex-direction</span><span>:</span> <span>column</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>I added a <code>margin-block</code> to each card wrapper.</p>
<ul>
  <li>On small viewports, there are no separators.</li>
  <li>When the size is medium, there are separates for the first two columns, and one border for the last one.</li>
</ul>

<p>The CSS property <code>margin-block</code> is a logical property that means both <code>margin-top</code> and <code>margin-bottom</code>.</p>

<div><div><pre><code><span>@media</span> <span>(</span><span>min-width</span><span>:</span> <span>550px</span><span>)</span> <span>{</span>
  <span>.c-newspaper__item</span><span>:not</span><span>(</span><span>:last-child</span><span>)</span><span>:after</span> <span>{</span>
    <span>content</span><span>:</span> <span>&#34;&#34;</span><span>;</span>
    <span>display</span><span>:</span> <span>block</span><span>;</span>
    <span>height</span><span>:</span> <span>1px</span><span>;</span>
    <span>background-color</span><span>:</span> <span>lightgrey</span><span>;</span>
    <span>margin-block</span><span>:</span> <span>var</span><span>(</span><span>--gap</span><span>);</span>
  <span>}</span>
  
  <span>.c-newspaper__col</span><span>:last-child</span> <span>{</span>
    <span>border-top</span><span>:</span> <span>1px</span> <span>solid</span> <span>lightgrey</span><span>;</span>
    <span>padding-top</span><span>:</span> <span>var</span><span>(</span><span>--gap</span><span>);</span>
  <span>}</span>
<span>}</span>

<span>@media</span> <span>(</span><span>min-width</span><span>:</span> <span>880px</span><span>)</span> <span>{</span>
  <span>.c-newspaper__col</span><span>:last-child</span> <span>{</span>
    <span>padding-top</span><span>:</span> <span>0</span><span>;</span>
    <span>border-top</span><span>:</span> <span>0</span><span>;</span>
  <span>}</span>
  
  <span>/* Add separators to the last column */</span>
  <span>.c-newspaper__col</span><span>:last-child</span> <span>.c-newspaper__item</span><span>:not</span><span>(</span><span>:last-child</span><span>)</span><span>:after</span> <span>{</span>
    <span>content</span><span>:</span> <span>&#34;&#34;</span><span>;</span>
    <span>display</span><span>:</span> <span>block</span><span>;</span>
    <span>height</span><span>:</span> <span>1px</span><span>;</span>
    <span>background-color</span><span>:</span> <span>lightgrey</span><span>;</span>
    <span>margin-block</span><span>:</span> <span>var</span><span>(</span><span>--gap</span><span>);</span>
  <span>}</span>
<span>}</span>
</code></pre></div></div>

<figure>
    
        <img src="https://ishadeed.com/assets/featured-section/layout-spacing.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>You might be thinking, why not use <code>gap</code>? The reason is that I won’t use modern CSS for the sake of using it. It’s not useful here because:</p>
<ul>
  <li>it only works for one part of the spacing, and I have to use <code>margin-top</code> with it.</li>
  <li>I wish there is a native CSS way to add borders, just like the CSS property <code>column-rule</code> in <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/column-rule">CSS columns</a>.</li>
</ul>

<h3 id="container-units">Container units</h3>
<p>One thing that I like about container queries is the ability to use container units. They are like viewport units but for a specific container. Isn’t that powerful?</p>

<div><div><pre><code><span>@container</span> <span>main</span> <span>(</span><span>min-width</span><span>:</span> <span>550px</span><span>)</span> <span>{</span>
    <span>@container</span> <span>card</span> <span>style</span><span>(</span><span>--featured</span><span>:</span> <span>true</span><span>)</span> <span>{</span>
        <span>.c-card__title</span> <span>{</span>
            <span>font-size</span><span>:</span> <span>clamp</span><span>(</span><span>1rem</span><span>,</span> <span>6</span><span>cqw</span><span>,</span> <span>2rem</span><span>);</span>
        <span>}</span>
    <span>}</span>
<span>}</span>
</code></pre></div></div>

<figure>
    
        <img src="https://ishadeed.com/assets/featured-section/dynamic-font-sizing.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>Learn more about <a href="https://ishadeed.com/article/container-query-units/">container query units</a>.</p>

<h3 id="text-balancing">Text balancing</h3>
<p>Recently, I wrote about the new CSS feature <code>text-wrap: balance</code>, which is still in Chrome Canary only at the time of writing this article.</p>

<figure>
    
        <img src="https://ishadeed.com/assets/featured-section/css-text-wrap-balance-3.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>In the layout that I’m building, we can leverage that for all the text content. It can make the layout look more organized.</p>

<video controls="">
    <source src="../../assets/featured-section/text-wrap-balance.mp4" type="video/mp4"/>
</video>

<p>Learn more about <a href="https://ishadeed.com/article/css-text-wrap-balance/">text wrap balancing</a>.</p>

<h2 id="final-demo">Final demo</h2>
<p>You can play <a href="https://cdpn.io/pen/debug/NWOdJVd/c65292968aa48890b107e6525b2e4a3b">here</a> with the final demo. I recommend checking that on Chrome Canary.</p>

<p>Disclaimer: the design isn’t identical to Vox, this demo focuses more on the layout and components implementation.</p>

<h2 id="outro">Outro</h2>
<p>One of the things that force me to learn and explore CSS is the curiosity to see how other folks build things. I enjoy that process and learn a lot while doing so. I hope you found the article helpful.</p>

<p>Do you have a question or feedback? Please feel free to ping me on Twitter <a href="https://twitter.com/shadeed9">@shadeed9</a>.</p>

	</div></div>
  </body>
</html>
