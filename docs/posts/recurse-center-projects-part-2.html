<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.jacobvosmaer.nl/0019-recurse-projects-part-2/">Original</a>
    <h1>Recurse Center projects, part 2</h1>
    
    <div id="readability-page-1" class="page"><div><p><i><a href="https://scanalyst.fourmilab.ch/t/">Jacob Vosmaer&#39;s blog</a></i></p>

<p>2024-02-02</p>

<p>The end of my <a href="https://www.recurse.com/">Recurse</a> batch is nearing and I would like to follow up my <a href="https://scanalyst.fourmilab.ch/0012-recurse-projects/">previous post</a> with another look at what I have been working on since then.</p>

<p>Update: also see <a href="https://scanalyst.fourmilab.ch/0021-recurse-projects-part-3/">part 3</a>.</p>

<h2><a id="static-site">Blog static site generator</a></h2>

<p>This blog uses a static site generator I wrote myself, mostly in Ruby using
<a href="https://docs.ruby-lang.org/en/3.3/ERB.html">ERB</a>. The posts
themselves are written in
<a href="https://daringfireball.net/projects/markdown/">Markdown</a> and I
compile them with Gruber&#39;s original Markdown.pl Perl script. I host the site on
Amazon S3 behind Amazon Cloudfront.</p>

<p>I created this blog years ago but I never got in the habit of posting much. Recurse encouraged me to start writing again.
As I revived the blog, I did the following work on the site generator:</p>

<ul>
<li>Moved it from <code>notes.jacobvosmaer.nl</code> to <code>blog.jacobvosmaer.nl</code></li>
<li>Updated styling (yes, this plain-looking site does have styling)</li>
<li>Added a <a href="http://localhost:8080/recurse.html">tag</a> system</li>
<li>Added an <a href="https://scanalyst.fourmilab.ch/atom.xml">atom feed</a></li>
<li>Added support for non-Markdown content such as image files</li>
<li>Added post dates (they were just numbered before)</li>
<li>Added multi-threading to speed up the build</li>
<li>Added a &#34;hidden&#34; post status, that allows me to proof-read and ask for feedback before the post gets published on the blog index</li>
</ul>

<p>Thanks to Ruby&#39;s compactness the total amount of code I have to maintain is not that large.</p>

<pre><code>
% wc -l build deploy new *.erb
    144 build
      4 deploy
     27 new
     17 atom.xml.erb
     27 index.html.erb
    219 total
</code></pre>

<h2>Publishing my MIDI parser library</h2>

<p>Ever since I got into embedded programming I have been using my own C <a href="https://en.wikipedia.org/wiki/MIDI">MIDI</a> parser. Not because the world needed another MIDI parser but because I enjoyed building one. While at Recurse I have finally <a href="https://gitlab.com/jacobvosmaer/midiparser">published</a> this code as a standalone library. For more information, see the <a href="https://scanalyst.fourmilab.ch/0018-midi-parser/">blog post</a> I wrote about it.</p>

<h2><a id="cryptopals">Cryptopals</a></h2>

<p>It seems to be popular among Recurse participants to form study groups that work through some kind of online curriculum or book together. I can understand why but in my first six weeks at Recurse I did not see a group I wanted to join because I did not have a click with any of the topics. I also could not think of any book or course to start my own group around.</p>

<p>In the second half of my batch however, a fellow participant started a group to work on the <a href="https://cryptopals.com/">Cryptopals challenges</a> and I thought I would give it a shot. I thought the exercises looked familiar and I later realized that I already did the first 8 challenges 10 years ago when it was still called the &#34;Matasano Crypto Challenge&#34;. This time around I made it to Challenge 20.</p>

<p>The Cryptopals challenges are a set of exercises designed to give the &#34;student&#34; a better understanding of how attacks on cryptography work. You can sometimes read articles about how another weaknes in AES-123-XYZ has been found but actually exploiting the weakness gives you a much better understanding. It feels similar to the difference between nodding along while reading a math book  and actually doing the exercises.</p>

<p>It seems to be customary to do Cryptopals in a programming language you are not fluent in, so that you get better at using that language as a side effect. I have my doubts about this idea because some of the challenges are difficult enough without worrying about how to use your language. Still, I did the challenges in C, in which I would   rate myself as well above &#34;beginner&#34; but not &#34;fluent&#34;.</p>

<p>Some of the exercises are proper code breaking, while others are more like stepping stones to prepare you for the code breaking. For example, you often start with a blob of binary data, handed to you in <a href="https://en.wikipedia.org/wiki/Base64">Base64</a> encoding. One of the first stepping stones is making sure you know how to decode Base64 in the programming environment you are working in. I had way too much fun writing my own Base64 decoder. Modern languages either have a Base64 decoder in their standard library or they make it easy to install one. I am still confused by how to integrate C libraries so I wrote my own Base64 parser. Later challenges rely on OpenSSL: there I did use the library after figuring out the necessary <code>LDFLAGS</code>, <code>LDLIBS</code> and <code>CFLAGS</code> incantations.</p>

<p>The best part for me was the code breaking, especially <a href="https://cryptopals.com/sets/2">challenges 12-14, 16</a> and <a href="https://cryptopals.com/sets/3/challenges/17">17</a>. As mentioned above I have not progressed beyond Challenge 20 but I assume/hope there are more cool challenges after that. Challenge <a href="https://cryptopals.com/sets/2/challenges/14">14</a> became a kind of friendly competition among our group because it can be interpreted at different levels of hardness, and there is a large spread of how computationally efficient you can solve it. After solving the &#34;easy&#34; variant (which was hard enough for me) I went back to it twice, once to solve the hard variant and once more to make it 40 times faster. I would not have gone back without learning from my peers that my previous solution could be improved on.</p>

<p>Apart from the code breaking I enjoyed the opportunity to do more practical work with C as a general purpose programming language (i.e. outside the domain of embedded programming). In particular I got quicker at adding unit tests to my code. </p>

<details><summary>Here is an example, collapsed for brevity.</summary>

<pre><code>
struct session *parsekv(u8 *in, int size) {
  u8 *end = in + size;
  struct session *s = sessionalloc();
  while (in &lt; end)
    parsefield(&amp;in, end, &#34;email=&#34;, parsestring, &amp;s-&gt;email) ||
        parsefield(&amp;in, end, &#34;uid=&#34;, parsestring, &amp;s-&gt;uid) ||
        parsefield(&amp;in, end, &#34;role=&#34;, parsestring, &amp;s-&gt;role) ||
        parsefield(&amp;in, end, &#34;&#34;, discard, 0);
  return s;
}

void expectequalstr(char *expect, char *actual, char *context) {
  if (strcmp(expect, actual))
    error(&#34;%s: want %s, got %s&#34;, context, expect, actual);
}

void testparsekv(void) {
  struct {
    char *in;
    int size;
    struct session out;
  } * t,
      tests[] = {
          {0, 0, {&#34;&#34;, &#34;&#34;, &#34;&#34;}},
          {&#34;email=foo@bar.com&#34;, -1, {&#34;foo@bar.com&#34;, &#34;&#34;, &#34;&#34;}},
          {&#34;role=admin&#34;, -1, {&#34;&#34;, &#34;&#34;, &#34;admin&#34;}},
          {&#34;role=ad\x00min&#34;, 11, {&#34;&#34;, &#34;&#34;, &#34;admin&#34;}},
          {&#34;role=admin&amp;email=foo1@bar.com&#34;, -1, {&#34;foo1@bar.com&#34;, &#34;&#34;, &#34;admin&#34;}},
          {&#34;uid=1234&#34;, -1, {&#34;&#34;, &#34;1234&#34;, &#34;&#34;}},
          {&#34;role=admin&amp;uid=123&amp;email=foo1@bar.com&#34;,
           -1,
           {&#34;foo1@bar.com&#34;, &#34;123&#34;, &#34;admin&#34;}},
          {&#34;garbage=field&amp;email=hello@example.com&#34;,
           -1,
           {&#34;hello@example.com&#34;, &#34;&#34;, &#34;&#34;}},
          {&#34;email=hello1@example.com&amp;garbage=field&#34;,
           -1,
           {&#34;hello1@example.com&#34;, &#34;&#34;, &#34;&#34;}},
      };
  for (t = tests; t &lt; endof(tests); t++) {
    struct session *s;
    if (t-&gt;size &lt; 0)
      t-&gt;size = strlen(t-&gt;in);
    if (!(s = parsekv((u8 *)t-&gt;in, t-&gt;size)))
      error(&#34;expected pointer to session, got null&#34;);
    expectequalstr(t-&gt;out.email, s-&gt;email, &#34;email&#34;);
    expectequalstr(t-&gt;out.uid, s-&gt;uid, &#34;uid&#34;);
    expectequalstr(t-&gt;out.role, s-&gt;role, &#34;role&#34;);
    sessionfree(s);
  }
}
</code></pre>

</details>

<p>I just call these test from the <code>main</code> function because they are so fast. That way I do not even need a &#34;test framework&#34; of some sort.</p>

<p>The biggest downside of Cryptopals has been the need to not spoil it for others. I did not put my solutions online because of that. This makes it harder to share things I learned such as the testing above. Also, because I got so excited I got too far ahead of the group; the weekly meetings were discussing the challenges at a pace that was too slow for me. I managed to have some nice conversations with others at Recurse who got further ahead but the overall experience was still a bit lonely.</p>

<p>I am glad I joined this group. The code breaking challenges are exciting, they seem &#34;real&#34; and they are often very ingenious. Doing the challenges at the same time as my peers created a shared experience and sense of camaraderie.</p>

<h2>More</h2>

<p>I wanted to talk about a few more things I worked on but this post feels long enough for now. Update: you can continue reading in <a href="https://scanalyst.fourmilab.ch/0021-recurse-projects-part-3/">part 3</a>.</p>
<p>Tags:
<a href="https://scanalyst.fourmilab.ch/t/recurse.html">recurse</a>
</p><details><summary>Edit history</summary><table>
<tbody><tr><td>2024-02-08</td><td></td><td>0012, 0019: add forward references</td></tr>
<tr><td>2024-02-08</td><td></td><td>Start writing 0021 recurse projects part 3</td></tr>
<tr><td>2024-02-07</td><td></td><td>0019 add cryptopals anchor</td></tr>
<tr><td>2024-02-02</td><td></td><td>0019 style/grammar, tests from main</td></tr>
<tr><td>2024-02-02</td><td></td><td>Publish 0019</td></tr>
<tr><td>2024-02-02</td><td></td><td>Some improvements after proofreading</td></tr>
<tr><td>2024-02-02</td><td></td><td>Start writing 0019 recurse projects part 2</td></tr>
</tbody></table></details><p><a href="https://scanalyst.fourmilab.ch/t/">Back</a></p>
</div></div>
  </body>
</html>
