<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/squint-cljs/cherry">Original</a>
    <h1>Cherry: ClojureScript to ES6 Compiler</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><h2 dir="auto"><a id="user-content-cherry-cherries" aria-hidden="true" href="#cherry-cherries"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Cherry <g-emoji alias="cherries" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f352.png">üçí</g-emoji></h2>
<p dir="auto">Experimental ClojureScript to ES6 module compiler.</p>
<p dir="auto">Reducing friction between ClojureScript and JS tooling.</p>
<blockquote>
<p dir="auto"><g-emoji alias="warning" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png">‚ö†Ô∏è</g-emoji> This project is an experiment and not recommended to be used in
production. It currently has many bugs and will undergo many breaking changes.</p>
</blockquote>
<p dir="auto">Also check out <a href="https://github.com/squint-cljs/squint">Squint</a> which
is a CLJS <em>syntax</em> to JS compiler.</p>
<h2 dir="auto"><a id="user-content-quickstart" aria-hidden="true" href="#quickstart"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Quickstart</h2>
<p dir="auto">Although it&#39;s early days and far from complete, you&#39;re welcome to try out cherry and submit issues.</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ mkdir cherry-test &amp;&amp; cd cherry-test
$ npm init -y
$ npm install cherry-cljs@latest"><pre>$ mkdir cherry-test <span>&amp;&amp;</span> <span>cd</span> cherry-test
$ npm init -y
$ npm install cherry-cljs@latest</pre></div>
<p dir="auto">Create a <code>.cljs</code> file, e.g. <code>example.cljs</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(ns example
  (:require [&#34;fs&#34; :as fs]
            [&#34;url&#34; :refer [fileURLToPath]]))

(prn (fs/existsSync (fileURLToPath js/import.meta.url)))

(defn foo [{:keys [a b c]}]
  (+ a b c))

(js/console.log (foo {:a 1 :b 2 :c 3}))"><pre>(<span>ns</span> <span>example</span>
  (<span>:require</span> [<span><span>&#34;</span>fs<span>&#34;</span></span> <span>:as</span> fs]
            [<span><span>&#34;</span>url<span>&#34;</span></span> <span>:refer</span> [fileURLToPath]]))

(<span>prn</span> (<span>fs/existsSync</span> (<span>fileURLToPath</span> js/import.meta.url)))

(<span>defn</span> <span>foo</span> [{<span>:keys</span> [a b c]}]
  (<span>+</span> a b c))

(<span>js/console.log</span> (<span>foo</span> {<span>:a</span> <span>1</span> <span>:b</span> <span>2</span> <span>:c</span> <span>3</span>}))</pre></div>
<p dir="auto">Then compile and run (<code>run</code> does both):</p>
<div data-snippet-clipboard-copy-content="$ npx cherry run example.cljs
true
6"><pre><code>$ npx cherry run example.cljs
true
6
</code></pre></div>
<p dir="auto">Run <code>npx cherry --help</code> to see all command line options.</p>
<h2 dir="auto"><a id="user-content-examples" aria-hidden="true" href="#examples"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Examples</h2>
<p dir="auto">A few examples of currenly working projects compiled by cherry:</p>
<ul dir="auto">
<li><a href="https://squint-cljs.github.io/cherry/" rel="nofollow">playground</a></li>
<li><a href="https://squint-cljs.github.io/cherry/examples/wordle/index.html" rel="nofollow">wordle</a></li>
<li><a href="https://squint-cljs.github.io/cherry/examples/react/index.html" rel="nofollow">react</a></li>
<li><a href="https://github.com/squint-cljs/cherry/blob/main/examples/vite">vite</a></li>
<li><a href="https://github.com/borkdude/cherry-action-example">cherry-action-example</a></li>
</ul>
<p dir="auto">See the <a href="https://github.com/squint-cljs/cherry/blob/main/examples">examples</a> directory for more.</p>
<h2 dir="auto"><a id="user-content-project-goals" aria-hidden="true" href="#project-goals"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Project goals</h2>
<p dir="auto">Goals of cherry:</p>
<ul dir="auto">
<li>Compile <code>.cljs</code> files on the fly into ES6-compatible <code>.mjs</code> files.</li>
<li>Compiler will be available on NPM and can be used from JS tooling, but isn&#39;t
part of the compiled output unless explicitly used.</li>
<li>Compiled JS files are fairly readable and have source map support for
debugging</li>
<li>Compiled JS files are linked to one shared NPM module <code>&#34;cherry-cljs&#34;</code> which
contains <code>cljs.core.js</code>, <code>cljs.string</code>, etc.  such that libraries written in
cherry can be compiled and hosted on NPM, while all sharing the same
standard library and data structures. See <a href="https://twitter.com/borkdude/status/1549830159326404616" rel="nofollow">this
tweet</a> on how that
looks.</li>
<li>Output linked to older versions of cherry will work with newer
versions of cherry: i.e. &#39;binary&#39; compatibility.</li>
<li>Light-weight and fast: heavy lifting such as optimizations are expected to be
done by JS tooling</li>
<li>No dependency on Google Closure: this project will use it for bootstrapping
itself (by using the CLJS compiler), but users of this project won&#39;t see any
<code>goog.*</code> stuff.</li>
<li>Macro support</li>
<li>REPL support</li>
<li>Async/await support. See <a href="https://twitter.com/borkdude/status/1549843802604638209" rel="nofollow">this tweet</a> for a demo.</li>
<li>Native support for JS object destructuring: <code>[^:js {:keys [a b]} #js {:a 1 :b 2}]</code></li>
<li>Native support for JSX via <code>#jsx</code> reader tag. See <a href="https://github.com/squint-cljs/cherry/blob/main/examples/jsx/pages/component.cljs">example</a>.</li>
</ul>
<p dir="auto">Cherry may introduce new constructs such as <code>js/await</code> which won&#39;t be compatible
with current CLJS. Also it might not support all features that CLJS offers. As
such, using existing libraries from the CLJS ecosystem or compiling Cherry CLJS
code with the CLJS compiler may become challenging. However, some results of
this experiment may end up as improvements in the CLJS compiler if they turn out
to be of value.</p>
<p dir="auto">See <a href="https://www.dropbox.com/s/955jgzy6hgpx67r/dcd2022-cljs-reimagined.pdf?dl=0" rel="nofollow">slides</a> of a presentation given at Dutch Clojure Days 2022 about cherry and squint.</p>
<p dir="auto">Depending on interest both from people working on this and the broader
community, the above goals may or may not be pursued. If you are interested in
maturing cherry, please submit
<a href="https://github.com/squint-cljs/cherry/issues">issues</a> for bug reports or share
your thoughts on <a href="https://github.com/squint-cljs/cherry/discussions">Github
Discussions</a>.</p>
<p dir="auto">Cherry started out as a fork of
<a href="https://github.com/arohner/scriptjure">Scriptjure</a>. Currently it&#39;s being
reworked to meet the above goals.</p>





<h2 dir="auto"><a id="user-content-development" aria-hidden="true" href="#development"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Development</h2>
<div dir="auto" data-snippet-clipboard-copy-content="$ git clone git@github.com:squint-cljs/cherry.git --recursive
$ cd cherry
$ bb dev"><pre>$ git clone git@github.com:squint-cljs/cherry.git --recursive
$ <span>cd</span> cherry
$ bb dev</pre></div>

<p dir="auto">Cherry is licensed under the EPL, the same as Clojure core and <a href="https://github.com/arohner/scriptjure">Scriptjure</a>. See epl-v10.html in the root directory for more information.</p>
</article>
          </div></div>
  </body>
</html>
