<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://engineering.kablamo.com.au/posts/2023/media-queries-and-responsive-design/">Original</a>
    <h1>Media Queries and Responsive Design</h1>
    
    <div id="readability-page-1" class="page"><div><p><span><span>
      <span></span>
  <img alt="cardImage" title="" src="https://joaoabbottgribben.bearblog.dev/static/087ac0b4d9363915e4a58f8a6d07f64a/37523/cardImage.png" srcset="/static/087ac0b4d9363915e4a58f8a6d07f64a/6f3f2/cardImage.png 256w,
/static/087ac0b4d9363915e4a58f8a6d07f64a/01e7c/cardImage.png 512w,
/static/087ac0b4d9363915e4a58f8a6d07f64a/37523/cardImage.png 720w" sizes="(max-width: 720px) 100vw, 720px" loading="lazy" decoding="async"/>
    </span></span></p><h2>What is a Media Query?</h2>
<p>Media queries are a CSS language feature which allow an author to conditionally apply CSS rules according to characteristics of the device or window in which an application is being viewed. Most commonly, these might be according to the viewport width allowing CSS authors to create components and layouts that are <em>responsive</em> to the size of the window or device that they are being viewed in. But this may also extend to whether a user prefers light or dark mode, or even a user&#39;s accessibility preferences, plus many more properties.</p>
<h2>What is Responsive Design?</h2>
<p>With the rise of so many different device types and screen sizes, it has become increasingly important for web applications to provide a more tailored visual presentation to users, optimised for the screen size of their preferred interaction methods.</p>
<p>Responsive design can be accomplished through a combination of techniques including conditionally applying CSS rules with media queries, <a href="https://web.dev/cq-stable/" target="_blank" rel="noopener noreferrer">container queries</a>, and choosing layouts which are flexible according to the content that they hold (such as flexbox or grid). We&#39;re going to focus on media queries and responsive layouts in this article, but container queries are something to <a href="https://youtu.be/gCNMyYr7F6w" target="_blank" rel="noopener noreferrer">keep in mind</a> too as the <a href="https://caniuse.com/css-container-queries" target="_blank" rel="noopener noreferrer">long tail of browser support</a> increases. As of writing, they&#39;re not yet ready for prime-time, but can be used for <a href="https://developer.mozilla.org/en-US/docs/Glossary/Progressive_Enhancement" target="_blank" rel="noopener noreferrer">progressive enhancement</a>.</p>
<h2>What is Mobile-First Design?</h2>
<p>Mobile-first design is a principle which may be employed when designing and building responsive web applications. Ideally, this approach should be used as a guiding principle at all stages of the process - from beginning to end. For design, this means that the first iteration of a wireframe or UI design should focus on the mobile experience before moving on to wider viewport sizes.</p>
<p>Although you could approach web applications from the other direction (wide-first), it is a much easier process to reorganise components visually as more screen real estate becomes available than it is to try cramming components into a smaller screen space.</p>
<p>A similar rule applies to the development process too. In general, you should write markup and styling for the base-case (narrowest screens) and, where necessary, progressively apply conditional styles for wider screens.</p>
<p>Whilst you could approach this from the other direction, or use a mixture of narrow-first and wide-first approaches, this can make your styling more difficult to comprehend and increases the mental load for others when reviewing or maintaining. Of course, there are exceptions where writing a small number of wide-first rules is simpler, so use your discretion.</p>
<h2>CSS Pixels vs. Device Pixels</h2>
<p>When Apple launched the iPhone 4 in 2011, it was the first major smartphone to employ a high density display. Earlier iPhones had a display resolution of 320x480px, and when the iPhone was introduced with its so-called &#34;<a href="https://en.wikipedia.org/wiki/Retina_display" target="_blank" rel="noopener noreferrer">Retina Display</a>&#34; — doubling the resolution to 640x960px with the same physical display width — it presented a challenge. Not wanting users to be confronted with a situation where they constantly ask themselves, &#34;What is this, a website for ants?&#34;, an ingenious solution was devised whereby the iPhone 4 would follow CSS rules as if it was still a 320x480px device, and simply render at double the density. This allowed existing websites to function as-intended without requiring any code changes - a common theme you will find when new technologies are introduced for the web.</p>
<p>From this, the terms CSS pixels and device pixels were created.</p>
<p>The W3C CSS specification <a href="https://drafts.csswg.org/css-values-3/#device-pixel" target="_blank" rel="noopener noreferrer">defines device pixels</a> as:</p>
<blockquote>
<p>A device pixel is the smallest unit of area on the device output capable of displaying its full range of colors.</p>
</blockquote>
<p>CSS pixels (also known as logical pixels or reference pixels) are <a href="https://drafts.csswg.org/css-values-3/#reference-pixel" target="_blank" rel="noopener noreferrer">defined by the W3C CSS specification</a> as:</p>
<blockquote>
<p>The reference pixel is the visual angle of one pixel on a device with a device pixel density of 96dpi and a distance from the reader of an arm&#39;s length. For a nominal arm&#39;s length of 28 inches, the visual angle is therefore about 0.0213 degrees. For reading at arm&#39;s length, 1px thus corresponds to about 0.26 mm (1/96 inch).</p>
</blockquote>
<p>The 96 DPI rule for a reference pixel is not always strictly adhered to, and may vary depending on device type and typical viewing distance.</p>
<p>The device pixel ratio (or dppx) is the one-dimensional factor for how many device pixels are used per CSS pixel. Device pixel ratios are generally integers (e.g. 1, 2, 3) as this makes scaling simpler, but not always (e.g. 1.25, 1.5, etc.).</p>
<h2>How Do I Make My Site Responsive?</h2>
<p>By default, mobile browsers will assume that a website has not been designed to accomomdate the narrower viewport of such a device. For backwards compatibility, these browsers may render a site as if the screen were larger and then downscale to fit in the smaller screen. This is not an ideal experience, with a user frequently needing to zoom and pan around a page, but allows the site to function mostly as it was originally created.</p>
<p>To tell the browser that a site is providing an optimised experience for all viewport sizes, you can include the following meta tag in the document <code>&lt;head&gt;</code>:</p>
<pre><div><p><span>&lt;</span><span>meta</span><span> </span><span>name</span><span>=</span><span>&#34;</span><span>viewport</span><span>&#34;</span><span> </span><span>content</span><span>=</span><span>&#34;</span><span>width=device-width, initial-scale=1</span><span>&#34;</span><span> </span><span>/&gt;</span><span></span></p></div></pre>
<h3>Non-Rectangular Displays</h3>
<p>Some devices nowadays have rounded corners or display occlusions (such as a display notch, camera holepunch, or software overlays) which mean that the entire rectangle is not &#34;safe&#34; to utilise for content as it may be partially or wholly obscured.</p>
<p>By default, browsers on such devices will display content within a &#34;safe&#34; inscribed rectangle and vertical or horizontal bars matching the document background.</p>
<p>There are ways to allow content to extend into this area and avoid the ugliness of <a href="https://en.wikipedia.org/wiki/Letterboxing_(filming)" target="_blank" rel="noopener noreferrer">letterboxing</a> and <a href="https://en.wikipedia.org/wiki/Pillarbox" target="_blank" rel="noopener noreferrer">pillarboxing</a>, but this is a more advanced feature that isn&#39;t required.</p>
<!-- -->
<details><summary></summary><p>To opt out of the default letterboxing and pillarboxing and declare that your application can <a href="https://webkit.org/blog/7929/designing-websites-for-iphone-x/" target="_blank" rel="noopener noreferrer">appropriately deal with safe and unsafe areas</a> of the screen, you may include the following meta tag instead:</p><pre><div><p><span>&lt;</span><span>meta</span><span> </span><span>name</span><span>=</span><span>&#34;</span><span>viewport</span><span>&#34;</span><span> </span><span>content</span><span>=</span><span>&#34;</span><span>width=device-width, initial-scale=1, viewport-fit=cover</span><span>&#34;</span><span> </span><span>/&gt;</span><span></span></p></div></pre></details>
<h3>Text Sizing</h3>
<p>Mobile browsers may also artificially inflate font sizes to make text more readable. If your site already provides appropriately sized text, you can include the following CSS to disable this behaviour:</p>
<pre><div><p><span>  </span><span>-moz-text-size-adjust</span><span>:</span><span> none</span><span>;</span><span></span></p></div><div><p><span>  </span><span>-webkit-text-size-adjust</span><span>:</span><span> none</span><span>;</span><span></span></p></div></pre>
<p>Whilst there is no mandated minimum size for text in accessibility standards, <code>16px</code> is a good minimum for most circumstances.</p>
<p>For input fields, browsers may zoom in when focusing if the <code>font-size</code> is less than <code>16px</code>. There are methods to disable this behaviour, such as setting a <code>maximum-scale=1.0</code> in the meta viewport declaration, but this is strongly advised against as this may interfere with users who rely on zooming. A better solution is just to make sure that the <code>font-size</code> is at least <code>16px</code>.</p>
<h2>What are Breakpoints?</h2>
<p>A breakpoint in styling refers to a point at which conditional style rules stop or start applying to the page in response to viewport size. Most commonly, this will refer to a <code>min-width</code> or <code>max-width</code>, but can also apply to <code>height</code> too.</p>
<p>In media queries, these breakpoints (<code>768px</code>, <code>479px</code>) will be used something like this:</p>
<pre><div><p><span>@media</span><span> </span><span>(</span><span>min-width</span><span>:</span><span> </span><span>768</span><span>px</span><span>)</span><span> </span><span>{</span><span></span></p></div><div><p><span>  // Conditional styles here for width &gt;= </span><span>768</span><span>px</span><span></span></p></div><div><p><span></span><span>@media</span><span> </span><span>(</span><span>max-width</span><span>:</span><span> </span><span>479</span><span>px</span><span>)</span><span> </span><span>{</span><span></span></p></div><div><p><span>  // Conditional styles here for width &lt;= </span><span>479</span><span>px</span><span></span></p></div></pre>
<p>When following the principle of mobile-first design, most of the time <code>min-width</code> media queries should be used.</p>
<p>It is also important to note that <code>min-*</code> and <code>max-*</code> queries apply to an <strong>inclusive</strong> range, so when defining styles either side of a breakpoint, you should not use the same pixel value.</p>
<p>It is also important to note that when zooming in on a page, the viewport size in CSS pixels may change along with the apparent device pixel ratio. This can lead to scenarios where a viewport may actually behave as if its lengths are fractional values.</p>
<pre><div><p><span>@media</span><span> </span><span>(</span><span>max-width</span><span>:</span><span> </span><span>479</span><span>px</span><span>)</span><span> </span><span>{</span><span></span></p></div><div><p><span>  // Conditional styles here for width &lt;= </span><span>479</span><span>px</span><span></span></p></div><div><p><span></span><span>@media</span><span> </span><span>(</span><span>min-width</span><span>:</span><span> </span><span>480</span><span>px</span><span>)</span><span> </span><span>{</span><span></span></p></div><div><p><span>  // Conditional styles here for width &gt;= </span><span>480</span><span>px</span><span></span></p></div></pre>
<p>In the example above, if the viewport were (as a result of zooming) to report as <code>479.5px</code>, neither of the conditional rule blocks would apply. Instead, an extra fractional value of <code>0.98px</code> is usually applied to the <code>max-width</code> query, e.g.</p>
<pre><div><p><span>@media</span><span> </span><span>(</span><span>max-width</span><span>:</span><span> </span><span>479.98</span><span>px</span><span>)</span><span> </span><span>{</span><span></span></p></div><div><p><span>  // Conditional styles here for width &lt; </span><span>480</span><span>px</span><span></span></p></div><div><p><span></span><span>@media</span><span> </span><span>(</span><span>min-width</span><span>:</span><span> </span><span>480</span><span>px</span><span>)</span><span> </span><span>{</span><span></span></p></div><div><p><span>  // Conditional styles here for width &gt;= </span><span>480</span><span>px</span><span></span></p></div></pre>
<p>Why <code>0.98px</code> specifically? <code>0.02px</code> is the smallest division of a CSS pixel that an earlier version of Safari supported. See <a href="https://bugs.webkit.org/show_bug.cgi?id=178261" target="_blank" rel="noopener noreferrer">WebKit bug #178261</a>.</p>
<p>CSS has introduced in the <a href="https://www.w3.org/TR/mediaqueries-4/#mq-ranges" target="_blank" rel="noopener noreferrer">Media Queries Level 4 spec</a> the concept of a range query, where the operators <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, and <code>&gt;=</code> may be used for more expressive conditions, including both inclusive and exclusive ranges. As of writing these are now <a href="https://caniuse.com/css-media-range-syntax" target="_blank" rel="noopener noreferrer">supported in all major evergreen browsers</a>, however, the long tail for support on platforms like iOS is not yet sufficient.</p>
<pre><div><p><span>  // Conditional styles here for width &lt; </span><span>480</span><span>px</span><span></span></p></div><div><p><span></span><span>@media</span><span> </span><span>(</span><span>width &gt;= </span><span>480</span><span>px</span><span>)</span><span> </span><span>{</span><span></span></p></div><div><p><span>  // Conditional styles here for width &gt;= </span><span>480</span><span>px</span><span></span></p></div></pre>
<h2>What Breakpoints Should I Pick?</h2>
<p>This is a question that gets asked fairly frequently, but to be frank it does not matter too much these days as long as a web application works reasonably for all screen sizes in between your chosen breakpoints. You also don&#39;t want to choose too many, or too few.</p>
<p>When the iPhone first launched in 2007, it had a screen resolution of 320x480px. By convention, all smartphones since have had a viewport width of at least 320 CSS pixels. When building a responsive website, you should at least cater for devices at this width.</p>
<p>More recently, the web is becoming more accessible to a class of devices which fit a more classic form-factor, called <a href="https://en.wikipedia.org/wiki/Feature_phone" target="_blank" rel="noopener noreferrer">feature phones</a>, as well as wearable technologies. These devices will generally have a viewport width less than 320px.</p>
<details><summary><div><p>Show Apple Watch adaptations</p><svg width="12" height="8" viewBox="0 0 12 8" version="1.1"><path fill="currentColor" fill-rule="evenodd" d="M10.6.6 6 5.2 1.4.6 0 2l6 6 6-6z"></path></svg></div></summary><p>Some devices, like the Apple Watch will behave as if they have a 320px viewport to allow compatibility with websites not specifically optimised for extremely small viewports. If you want to declare that you do handle narrower viewports for the Apple watch, include the following meta tag in the document <code>&lt;head&gt;</code>:</p><pre><div><p><span>&lt;</span><span>meta</span><span> </span><span>name</span><span>=</span><span>&#34;</span><span>disable-adaptations</span><span>&#34;</span><span> </span><span>content</span><span>=</span><span>&#34;</span><span>watch</span><span>&#34;</span><span> </span><span>/&gt;</span><span></span></p></div></pre></details>
<p>If you&#39;re using a design system or component library (e.g. <a href="https://mui.com/material-ui/customization/breakpoints/" target="_blank" rel="noopener noreferrer">Material UI</a>, <a href="https://getbootstrap.com/docs/5.0/layout/breakpoints/" target="_blank" rel="noopener noreferrer">Bootstrap</a>, etc.) that supplies its own default breakpoints for you, you may find it beneficial to stick to those.</p>
<p>If you&#39;re choosing your own breakpoints though, there are some historically relevant breakpoints that may serve as inspiration:</p>
<ul>
<li>320px - <code>320px</code> being the minimum smartphone viewport width</li>
<li>480px - Approximate boundary between smartphone and tablet</li>
<li>768px - The original iPad had a resolution of 768x1024px</li>
<li>1024px - as above</li>
<li>1280px - Standard width for a 16:9 720p (HD) display</li>
</ul>
<p>It is generally a good idea to name your breakpoints. However, <strong><em>PLEASE</em></strong> do not be tempted to call them names like &#39;mobile&#39;, &#39;tablet&#39;, and &#39;desktop&#39;. Whilst in the early days of tablets, the boundaries between mobile, tablet, and desktop were clearer, there are now such a wide range of devices and viewport sizes, that the lines between these devices are blurred. Nowadays we have foldable phones with screen sizes larger than some tablets, and tablet screens that put desktop and laptop screens to shame.</p>
<p>Referring to a particular range as &#39;tablet&#39;, or &#39;desktop&#39; can allow you to fall into the trap of building and designing for a single type of device (e.g. assuming &#39;mobile&#39; or &#39;tablet&#39; viewports will always use touch screen). Instead, you should focus on building experiences which work on a wide range of devices.</p>
<h2>Responsive Layout Techniques</h2>
<p>There are two CSS layout algorithms in particular that lend themselves particularly well to responsive design:</p>
<ul>
<li>Flexbox</li>
<li>CSS Grid</li>
</ul>
<h3>Flexbox</h3>
<p>Flexbox is a CSS layout algorithm which allows us to specify how child elements are arranged on a page. This control applies in a particular direction (called the flex axis).</p>
<p>Although flexbox can be used to render multiple lines (with wrapping), the contents elements from one line do not change how elements are arranged on other lines. This means that unless the widths of flex items are set explicitly, from line-to-line their arrangement may not be consistent. If this is required, CSS Grid may be more appropriate.</p>
<h4>Flex Wrap</h4>
<p>Flexbox may be used without media queries and instead relying on the <code>flex-wrap</code> attribute to allow content to span multiple times across the cross-axis as the content size determines. Setting <code>flex-wrap: wrap</code> will mean that content wraps below (<code>flex-direction: row</code>) or to the right (<code>flex-direction: column</code>). You may also set <code>flex-wrap: wrap-reverse</code> so that content wraps above or to the left.</p>
<h4>Flex Direction</h4>
<p>Very frequently, a design may call for content to be arranged vertically for narrow viewports where horizontal space is at a premium, but for wider viewports with more screen real estate this may change to content being arranged horizontally.</p>
<pre><div><p><span></span><span>@media</span><span> </span><span>(</span><span>min-width</span><span>:</span><span> </span><span>768</span><span>px</span><span>)</span><span> </span><span>{</span><span></span></p></div></pre>
<details><summary></summary><p>For a long time, media queries needed to be defined at the top-level, but this can increase the maintenance burden when related rules are not colocated in large stylesheets. At the time of writing, this is <a href="https://caniuse.com/css-nesting" target="_blank" rel="noopener noreferrer">not yet widely supported in browsers</a>, but many tools and preprocessors allow this.</p><pre><div><p><span>  </span><span>@media</span><span> </span><span>(</span><span>min-width</span><span>:</span><span> </span><span>768</span><span>px</span><span>)</span><span> </span><span>{</span><span></span></p></div></pre></details>
<h3>Grid</h3>
<p>Grid is a CSS layout algorithm which allows us to specify how child elements are arranged on a page. Grid allows a developer to specify how elements arranged amongst rows and columns.</p>
<p>There is overlap with flexbox in terms of what kind of layouts can be achieved, although there are significant differences. With a grid layout, grid items are constrained and aligned according to grid tracks across both the horizontal and vertical axes.</p>
<p>Below are just a few examples of common layout techniques which pair well with responsive design.</p>
<h4>Columns</h4>
<!-- -->
<p>Designers will often work to a 12-column grid (or 4-column for narrow viewports). You can replicate this model in CSS using <code>grid-template-columns</code>. In combination with your breakpoints, this can allow you to easily assign classes that make an element span a particular number of columns.</p>
<p>You can see an illustration of the underlying grid system (including gap) here:</p>

<details><summary></summary><pre><div><p><span>  </span><span>grid-template-columns</span><span>:</span><span> </span><span>repeat</span><span>(</span><span>4</span><span>,</span><span> </span><span>minmax</span><span>(</span><span>auto</span><span>,</span><span> </span><span>1</span><span>fr</span><span>)</span><span>)</span><span>;</span><span></span></p></div><div><p><span>  </span><span>grid-column</span><span>:</span><span> auto </span><span>/</span><span> span </span><span>var</span><span>(</span><span>--grid-columns</span><span>)</span><span>;</span><span></span></p></div><div><p><span>  </span><span>grid-column</span><span>:</span><span> auto </span><span>/</span><span> span </span><span>1</span><span>;</span><span></span></p></div><div><p><span>  </span><span>grid-column</span><span>:</span><span> auto </span><span>/</span><span> span </span><span>2</span><span>;</span><span></span></p></div><div><p><span>  </span><span>grid-column</span><span>:</span><span> auto </span><span>/</span><span> span </span><span>3</span><span>;</span><span></span></p></div><div><p><span>  </span><span>grid-column</span><span>:</span><span> auto </span><span>/</span><span> span </span><span>4</span><span>;</span><span></span></p></div><div><p><span></span><span>@media</span><span> </span><span>(</span><span>min-width</span><span>:</span><span> </span><span>768</span><span>px</span><span>)</span><span> </span><span>{</span><span></span></p></div><div><p><span>    </span><span>grid-column</span><span>:</span><span> auto </span><span>/</span><span> span </span><span>1</span><span>;</span><span></span></p></div><div><p><span>    </span><span>grid-column</span><span>:</span><span> auto </span><span>/</span><span> span </span><span>2</span><span>;</span><span></span></p></div><div><p><span>    </span><span>grid-column</span><span>:</span><span> auto </span><span>/</span><span> span </span><span>11</span><span>;</span><span></span></p></div><div><p><span>    </span><span>grid-column</span><span>:</span><span> auto </span><span>/</span><span> span </span><span>12</span><span>;</span><span></span></p></div></pre><pre><div><p><span>&lt;</span><span>div</span><span> </span><span>class</span><span>=</span><span>&#34;</span><span>grid-columns</span><span>&#34;</span><span>&gt;</span><span></span></p></div><div><p><span>  </span><span>&lt;</span><span>div</span><span> </span><span>class</span><span>=</span><span>&#34;</span><span>col</span><span>&#34;</span><span>&gt;</span><span>This is always full width</span><span>&lt;/</span><span>div</span><span>&gt;</span><span></span></p></div><div><p><span>  </span><span>&lt;</span><span>div</span><span> </span><span>class</span><span>=</span><span>&#34;</span><span>col col-med-6</span><span>&#34;</span><span>&gt;</span><span>This is full width by default, but only 50% from 768px and wider.</span><span>&lt;/</span><span>div</span><span>&gt;</span><span></span></p></div><div><p><span>  </span><span>&lt;</span><span>div</span><span> </span><span>class</span><span>=</span><span>&#34;</span><span>col-min-2 col-med-3</span><span>&#34;</span><span>&gt;</span><span>This is 50% width by default and 25% from 768px and wider.</span><span>&lt;/</span><span>div</span><span>&gt;</span><span></span></p></div><div><p><span>  </span><span>&lt;</span><span>div</span><span> </span><span>class</span><span>=</span><span>&#34;</span><span>col-min-2 col-med-3</span><span>&#34;</span><span>&gt;</span><span>This is 50% width by default and 25% from 768px and wider.</span><span>&lt;/</span><span>div</span><span>&gt;</span><span></span></p></div></pre></details>
<p>The examples above only showcase a fraction of what is possible with this layout technique. Una Kravets of Google has shared some interactive examples of this on the <a href="https://web.dev/one-line-layouts/#06-12-span-grid-grid-template-columns-repeat12,-1fr" target="_blank" rel="noopener noreferrer">One Line Layouts dev site</a>. Note that the examples in this blog use <code>minmax(auto, 1fr)</code> rather than <code>1fr</code> to account for <code>gap</code>.</p>
<h4>RAM (repeat, auto, minmax)</h4>
<p>Another grid layout technique is often called RAM (repeat, auto, minmax). I would encourage you to check out the <a href="https://web.dev/one-line-layouts/#07-ram-repeat,-auto,-minmax-grid-template-columnsauto-fit,-minmaxlessbasegreater,-1fr" target="_blank" rel="noopener noreferrer">interactive examples</a> on the One Line Layouts dev site.</p>
<p>RAM is most useful when you don&#39;t know in advance how many columns you need for your grid and instead prefer to let the size of content determine that, within some preset boundaries. <code>auto-fit</code> and <code>auto-fill</code> work similarly, with the exception of what happens when there are fewer items than would fill a single row.</p>
<pre><div><p><span>// Grid items will always be at least 150px wide</span><span>,</span><span></span></p></div><div><p><span>// and will stretch to fill all available space</span></p></div><div><p><span>  </span><span>grid-template-columns</span><span>:</span><span> </span><span>repeat</span><span>(</span><span>auto-fit</span><span>,</span><span> </span><span>minmax</span><span>(</span><span>150</span><span>px</span><span>,</span><span> </span><span>1</span><span>fr</span><span>)</span><span>)</span><span>;</span><span></span></p></div><div><p><span></span><span>// Grid items will always be at least 150px wide</span><span>,</span><span></span></p></div><div><p><span>// and will stretch until there is enough room</span></p></div><div><p><span>// </span><span>(</span><span>if any</span><span>)</span><span> to add matching empty grid tracks</span></p></div><div><p><span>  </span><span>grid-template-columns</span><span>:</span><span> </span><span>repeat</span><span>(</span><span>auto-fill</span><span>,</span><span> </span><span>minmax</span><span>(</span><span>150</span><span>px</span><span>,</span><span> </span><span>1</span><span>fr</span><span>)</span><span>)</span><span>;</span><span></span></p></div></pre>
<h4>Grid Template Areas</h4>
<p>Grid Template Areas is one of the most powerful tools for responsive layouts, allowing you to arrange elements onto a grid in an intuitive manner.</p>
<p>As an example, we might have a layout with a header, main section, sidebar, and footer, which all arrange vertically for narrow viewports. Using <code>grid-template-areas</code> in combination with <code>grid-template-columns</code> and <code>grid-template-rows</code> though, we can rearrange these same elements into a grid pattern with the same markup.</p>
<details><summary></summary><pre><div><p><span>  </span><span>grid-template-rows</span><span>:</span><span> auto </span><span>1</span><span>fr</span><span> auto auto</span><span>;</span><span></span></p></div><div><p><span></span><span>@media</span><span> </span><span>(</span><span>min-width</span><span>:</span><span> </span><span>768</span><span>px</span><span>)</span><span> </span><span>{</span><span></span></p></div><div><p><span>    </span><span>grid-template-columns</span><span>:</span><span> </span><span>1</span><span>fr</span><span> </span><span>200</span><span>px</span><span>;</span><span></span></p></div><div><p><span>    </span><span>grid-template-rows</span><span>:</span><span> auto </span><span>1</span><span>fr</span><span> auto</span><span>;</span><span></span></p></div></pre><pre><div><p><span>  </span><span>&lt;</span><span>header</span><span> </span><span>class</span><span>=</span><span>&#34;</span><span>header</span><span>&#34;</span><span>&gt;</span><span>Header</span><span>&lt;/</span><span>header</span><span>&gt;</span><span></span></p></div><div><p><span>  </span><span>&lt;</span><span>main</span><span> </span><span>class</span><span>=</span><span>&#34;</span><span>main</span><span>&#34;</span><span>&gt;</span><span>Main</span><span>&lt;/</span><span>main</span><span>&gt;</span><span></span></p></div><div><p><span>  </span><span>&lt;</span><span>aside</span><span> </span><span>class</span><span>=</span><span>&#34;</span><span>sidebar</span><span>&#34;</span><span>&gt;</span><span>Sidebar</span><span>&lt;/</span><span>aside</span><span>&gt;</span><span></span></p></div><div><p><span>  </span><span>&lt;</span><span>footer</span><span> </span><span>class</span><span>=</span><span>&#34;</span><span>footer</span><span>&#34;</span><span>&gt;</span><span>Footer</span><span>&lt;/</span><span>footer</span><span>&gt;</span><span></span></p></div></pre></details>
<p>The above example will produce something like this:</p>
<!-- -->

<h2>Responsive Images</h2>
<p>With high density displays, using an image sized according to CSS pixels rather than device pixels can result in lower quality than a user might expect, and can be especially jarring next to text or vector resources that appear sharp. Therefore, it can make sense to supply users with higher density images.</p>
<p>If it is at all possible, use vector-based images (SVG). Rather than specifying a raster of pixels, vectors describe the process to draw something to a screen, and this process may be scaled up/down to any screen size remaining sharp throughout. Vector images are generally suitable for simple illustrations, icons, or logos. They are not suitable for photographs.</p>
<figure><span><span>
      <span></span>
  <img alt="Reddit meme from r/ProgrammerHumor depicting a classrom across 2 panels. First panel shows a
note being passed from a designer to a developer labelled SVG. Second panel shows the opened SVG
note containing a PNG and the developer looking frustrated toward the
designer" title="" src="https://joaoabbottgribben.bearblog.dev/static/77c81a367e9ca0310f863cc8fd638c20/88632/svg-with-embedded-png.jpg" srcset="/static/77c81a367e9ca0310f863cc8fd638c20/e4a55/svg-with-embedded-png.jpg 256w,
/static/77c81a367e9ca0310f863cc8fd638c20/36dd4/svg-with-embedded-png.jpg 512w,
/static/77c81a367e9ca0310f863cc8fd638c20/88632/svg-with-embedded-png.jpg 778w" sizes="(max-width: 778px) 100vw, 778px" loading="lazy" decoding="async"/>
    </span></span><figcaption><p>Image source: <a href="https://www.reddit.com/r/ProgrammerHumor/comments/sa6ls7/svg/" target="_blank" rel="noopener noreferrer">Reddit</a></p></figcaption></figure>
<p>For raster images there are a few ways of specifying multiple image sources for high density displays allowing the browser to choose what is best for a given device.</p>
<p>For statically sized images, you can specify an <code>&lt;img&gt;</code> with <code>srcset</code> using x-descriptors (which specify the optimum device pixel ratio). If you have an icon or logo, for example, that displays at 44px wide, you might create a number of different renditions of that image and specify something like:</p>
<pre><div><p><span>    /path/to/img-66w.png  1.5x,</span></p></div></pre>
<p>Importantly, these x-descriptors act only as a hint, and a device may still choose a lower resolution version for a variety of reasons (such as a user opting in to bandwidth-saving provisions).</p>
<p>A similar technique may be employed for <code>background-image</code> using <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/image/image-set" target="_blank" rel="noopener noreferrer"><code>image-set()</code></a> (note that <a href="https://caniuse.com/css-image-set" target="_blank" rel="noopener noreferrer">browser support is patchy</a>) in CSS:</p>
<pre><div><p><span>  </span><span>background-image</span><span>:</span><span> </span><span>url</span><span>(</span><span>/path/to/img-88w.png</span><span>)</span><span>;</span><span></span></p></div><div><p><span>  </span><span>background-image</span><span>:</span><span> </span><span>-webkit-image-set</span><span>(</span><span></span></p></div><div><p><span>    </span><span>url</span><span>(</span><span>/path/to/img-44w.png</span><span>)</span><span> </span><span>1</span><span>x</span><span>,</span><span></span></p></div><div><p><span>    </span><span>url</span><span>(</span><span>/path/to/img-66w.png</span><span>)</span><span> </span><span>1.5</span><span>x</span><span>,</span><span></span></p></div><div><p><span>    </span><span>url</span><span>(</span><span>/path/to/img-88w.png</span><span>)</span><span> </span><span>2</span><span>x</span><span>,</span><span></span></p></div><div><p><span>    </span><span>url</span><span>(</span><span>/path/to/img-132w.png</span><span>)</span><span> </span><span>3</span><span>x</span><span></span></p></div><div><p><span>  </span><span>background-image</span><span>:</span><span> </span><span>image-set</span><span>(</span><span></span></p></div><div><p><span>    </span><span>url</span><span>(</span><span>/path/to/img-44w.png</span><span>)</span><span> </span><span>1</span><span>x</span><span>,</span><span></span></p></div><div><p><span>    </span><span>url</span><span>(</span><span>/path/to/img-66w.png</span><span>)</span><span> </span><span>1.5</span><span>x</span><span>,</span><span></span></p></div><div><p><span>    </span><span>url</span><span>(</span><span>/path/to/img-88w.png</span><span>)</span><span> </span><span>2</span><span>x</span><span>,</span><span></span></p></div><div><p><span>    </span><span>url</span><span>(</span><span>/path/to/img-132w.png</span><span>)</span><span> </span><span>3</span><span>x</span><span></span></p></div></pre>
<p>For images that change size as the page resizes, a combination of the <code>srcset</code> and <code>sizes</code> attributes may be used. e.g.</p>
<pre><div><p><span>    /path/to/img-320w.jpg   320w,</span></p></div><div><p><span>    /path/to/img-480w.jpg   480w,</span></p></div><div><p><span>    /path/to/img-640w.jpg   640w,</span></p></div><div><p><span>    /path/to/img-960w.jpg   960w,</span></p></div><div><p><span>    /path/to/img-1280w.jpg 1280w</span></p></div><div><p><span>  </span><span>sizes</span><span>=</span><span>&#34;</span><span>(min-width: 768px) 480px, 100vw</span><span>&#34;</span><span></span></p></div></pre>
<p>In the above example we&#39;re specifying a number of different image renditions in the <code>srcset</code> at various actual widths (320px, 480px, 640px, 960px, 1280px). In the <code>sizes</code> attribute we&#39;re telling the browser that these images will be displayed at 100% of the viewport width by default, and then for viewports at 768px and wider the image will be displayed at a fixed 480 CSS pixels in width. The browser will then pick the optimal image rendition for the device, accounting for device pixel ratio (though again, this is only a hint and the browser may choose to use a higher or lower resolution option).</p>
<p>With modern compression techniques in image formats like WebP and AVIF, it can often be the case that when images are properly optimised for display at 2x density, the file size is only a marginal increase over a 1x version. And, for device pixel ratios greater than 2, there are diminishing returns. For this reason, you can get by only including an optimised 2x image. Jake Archibald, a developer advocate on the Google Chrome team has written a <a href="https://jakearchibald.com/2021/serving-sharp-images-to-high-density-screens/" target="_blank" rel="noopener noreferrer">blog article</a> discussing this, highlighting the fact that a majority of your users may be browsing the web with high density displays.</p></div></div>
  </body>
</html>
