<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://fly.io/blog/fly-io-has-gpus-now/">Original</a>
    <h1>Fly.io Has GPUs Now</h1>
    
    <div id="readability-page-1" class="page"><article>
         <dl>
             <dt>Author</dt>
             <dd>
                 <img alt="Xe Iaso" src="https://fly.io/static/images/xe.webp"/>
               <dl>
                 <dt>Name</dt>
                 <dd>
                   Xe Iaso
                 </dd>
                  <dt>pony.social/@cadey</dt>
                  <dd>
                    <a href="https://pony.social/@cadey" target="_blank">
                      pony.social/@cadey
                    </a>
                  </dd>
               </dl>
             </dd>
         </dl>

        <section>
            <figure>
                <img src="https://fly.io/blog/fly-io-has-gpus-now/assets/llama-portal-cover.webp" alt="A cartoon illustration of a green haired woman with a ponytail looks into a portal in a datacentre to see a graceful llama."/>
                <figcaption>
                  <span>Image by</span>
                  
<svg role="img" style="pointer-events: none; width: 17px; height: 17px;" viewBox="0 0 20 20" fill="currentColor" fill-rule="evenodd">
  <g buffered-rendering="static">
    <path fill-rule="evenodd" d="M1 8a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 018.07 3h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0016.07 6H17a2 2 0 012 2v7a2 2 0 01-2 2H3a2 2 0 01-2-2V8zm13.5 3a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM10 14a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"></path>
  </g>
</svg>

                    <a href="https://annieruygtillustration.com/" target="_blank">
                      Annie Ruygt
                    </a>
                </figcaption>
            </figure>
          <p>We’re Fly.io, we’re a new public cloud that lets you put your compute where it matters: near your users. Today we’re announcing that you can do this with GPUs too, allowing you to do AI workloads on the edge. Want to find out more? Keep reading.</p><h2 id="ai-is-pretty-fly"><a href="#ai-is-pretty-fly" aria-label="Anchor"></a>AI is pretty fly</h2>
<p>AI is apparently a bit of a <em>thing</em> (maybe even <em>an thing</em> come to think about it). We’ve seen entire industries get transformed in the wake of ChatGPT existing (somehow it’s only been around for a year, I can’t believe it either). It’s likely to leave a huge impact on society as a whole in the same way that the Internet did once we got search engines. Like any good venture-capital funded infrastructure provider, we want to enable you to do hilarious things with AI using industrial-grade muscle.</p>

<p>Fly.io lets you run a full-stack app - or an entire dev platform based on the <a href="https://fly.io/docs/machines/">Fly Machines API</a> - close to your users. Fly.io GPUs let you attach an <a href="https://www.nvidia.com/en-us/data-center/a100/">Nvidia A100</a> to whatever you’re building, harnessing the full power of CUDA with more VRAM than your local 4090 can shake a ray-traced stick at. With these cards (or whatever you call a GPU attached to SXM fabric), AI/ML workloads are at your fingertips. You can <a href="https://fly.io/blog/transcribing-on-fly-gpu-machines/">recognize speech</a>, segment text, summarize articles, synthesize images, and more at speeds that would make your homelab blush. You can even set one up as your programming companion with <a href="https://github.com/deepseek-ai/DeepSeek-Coder">your model of choice</a> in case you’ve just not been feeling it with the output of <em>other</em> models changing over time.</p>

<p>If you want to find out more about what these cards are and what using them is like, check out <a href="https://fly.io/blog/what-are-these-gpus-really/">What are these “GPUs” really?</a> It covers the history of GPUs and why it’s ironic that the cards we offer are called “Graphics Processing Units” in the first place.</p>
<h2 id="fly-io-gpus-in-action"><a href="#fly-io-gpus-in-action" aria-label="Anchor"></a>Fly.io GPUs in Action</h2>
<p>We want you to deploy your own code with your favorite models on top of Fly.io’s cloud backbone. Fly.io GPUs make this really easy.</p>

<p>You can get a GPU app running <a href="https://ollama.ai">Ollama</a> (our friends in text generation) in two steps:</p>

<ol>
<li>Put this in your <code>fly.toml</code>:
</li></ol>
<div>
  <pre><code><span>app</span> <span>=</span> <span>&#34;sandwich_ai&#34;</span>
<span>primary_region</span> <span>=</span> <span>&#34;ord&#34;</span>
<span>vm.size</span> <span>=</span> <span>&#34;a100-40gb&#34;</span>

<span>[build]</span>
  <span>image</span> <span>=</span> <span>&#34;ollama/ollama&#34;</span>

<span>[mounts]</span>
  <span>source</span> <span>=</span> <span>&#34;models&#34;</span>
  <span>destination</span> <span>=</span> <span>&#34;/root/.ollama&#34;</span>
  <span>initial_size</span> <span>=</span> <span>&#34;100gb&#34;</span>
</code></pre>
</div>

<ol>
<li>Run <code>fly apps create sandwich_ai &amp;&amp; fly deploy</code>.
</li></ol>

<p>If you want to read more about how to start your new sandwich empire, check out <a href="https://fly.io/blog/scaling-llm-ollama/">Scaling Large Language Models to zero with Ollama</a>, it explains how to set up Ollama so that it <em>automatically scales itself down</em> when it’s not in use.</p>
<h2 id="the-speed-of-light-is-only-so-fast"><a href="#the-speed-of-light-is-only-so-fast" aria-label="Anchor"></a>The speed of light is only so fast</h2>
<p>Being able to spin up GPUs is great, but where Fly.io really shines is inference at the edge.</p>

<p>Let’s say you have an app that lets users enter ingredients they have in their kitchen and receive a sandwich recipe. Your users expect their recipes <em>instantly</em> (or at least as fast as the other leading apps). Seconds count when you need an emergency sandwich.</p>

<p><img alt="A conversation between a user and an artificial intelligence. The user asks: &#34;What kind of sandwich can I make with an egg, a taco shell, and a pound of ground beef?&#34; The AI responds: &#34; You can make a breakfast taco or a taco salad sandwich with the ingredients you have. Here&#39;s how to prepare each: for the breakfast taco. Cook the pound of ground beef in a pan until browned. Season with salt, pepper, and any other desired spices like chili powder or taco seasoning. While the beef is cooking, fry an egg (or scramble it if you prefer) in another pan. Warm up the taco shell in the oven or microwave according to the package instructions. Assemble the taco by placing the ground cooked beef in the taco shell followed by the fried egg. You can also add any additional toppings like diced onions avocados, avocado, salsa or cheese if you have them. Serve with a side of hot sauce or sour cream if desired. For the taco salad sandwich: Prepare the ground beef as in the breakfast taco recipe above. Instead of frying an egg, you can cook it sunny side up or over easy depending on your preference. Crumble the taco shell into small pieces and mix them with the cooked ground beef. Assemble the sandwich by layering the crumbled taco shell mixture and ground beef in two slices of bread. Top with the fried egg and any additional toppings you like such as shredded lettuce, diced tomatoes, or sliced olives. Serve with a side of salsa or ranch dressing if desired. Both options are hardy and can be easily customized based on your taste preferences. Enjoy!&#34;" src="https://fly.io/blog/fly-io-has-gpus-now/assets/sandwich-recipes.webp"/></p>

<p>In the previous snippet, we deployed our app to ord (<code>primary_region = &#34;ord&#34;</code>). The good news is that our model returns a result really quickly and users in Chicago get instant sandwich recipes. It’s a good experience for users near your datacentre, and you can do this on any half decent cloud provider.</p>

<p>But surely people outside of Chicago need sandwiches too. Amsterdam has sandwich fiends as well. And sometimes it takes too long to have their requests leap across the pond. The speed of light is only so fast after all. Don’t worry, we’ve got your back. Fly.io has GPUs in datacentres all over the world. Even more, we’ll let you run <em>the same program</em> with the same public IP address and the same TLS certificates in any regions with GPU support.</p>

<p>Don’t believe us? See how you can scale your app up in Amsterdam with one command:</p>
<div>
  <pre><code>fly scale count 2 --region ams
</code></pre>
</div>

<p>It’s that easy.</p>
<h2 id="actually-on-demand"><a href="#actually-on-demand" aria-label="Anchor"></a>Actually On-Demand</h2>
<p>GPUs are powerful parallel processing packages, but they’re not cheap! Once we have enough people wanting to turn their fridge contents into tasty sandwiches, keeping a GPU or two running makes sense. But we’re just a small app still growing our user base while also funding the latest large sandwich model research. We want to only pay for GPUs when a user makes a request.</p>

<p>Let’s open up that <code>fly.toml</code> again, and add a section called <code>services</code>, and we’ll include instructions on how we want our app to scale up and down:</p>
<div>
  <pre><code><span>[[services]]</span>
  <span>internal_port</span> <span>=</span> <span>8080</span>
  <span>protocol</span> <span>=</span> <span>&#34;tcp&#34;</span>
  <span>auto_stop_machines</span> <span>=</span> <span>true</span>
  <span>auto_start_machines</span> <span>=</span> <span>true</span>
  <span>min_machines_running</span> <span>=</span> <span>0</span>
</code></pre>
</div>

<p>Now when no one needs sandwich recipes, you don’t pay for GPU time.</p>
<h2 id="the-deets"><a href="#the-deets" aria-label="Anchor"></a>The Deets</h2>
<p>We have GPUs ready to use in several US and EU regions and Sydney. You can deploy your sandwich, music generation, or AI illustration apps to:</p>

<ul>
<li><a href="https://www.nvidia.com/en-us/data-center/a100/">Ampere A100s</a> with 40gb of RAM for $2.50/hr
</li><li><a href="https://www.nvidia.com/en-us/data-center/a100/">Ampere A100s</a> with 80gb of RAM for $3.50/hr
</li><li><a href="https://www.nvidia.com/en-us/data-center/l40/">Lovelace L40s</a> are coming soon (pricing TBD)
</li></ul>

<p>By default, anything you deploy to GPUs will use eight heckin’ <a href="https://www.amd.com/en/processors/epyc-server-cpu-family">AMD EPYC</a> CPU cores, and you can attach volumes up to 500 gigabytes. We’ll even give you discounts for reserved instances and dedicated hosts if you ask nicely.</p>

<p>We hope you have fun with these new cards and we’d love to see what you can do with them! Reach out to us on X (formerly Twitter) or <a href="https://community.fly.io/">the community forum</a> and share what you’ve been up to. We’d love to see what we can make easier!</p>

          
        </section>
        <dl>
            <dt>
              Next post  ↑
            </dt>
            <dd>
              <a href="https://fly.io/blog/fks/">
                Introducing Fly Kubernetes
              </a>
            </dd>
            <dt>
              Previous post  ↓
            </dt>
            <dd>
              <a href="https://fly.io/blog/what-are-these-gpus-really/">
                What are these &#34;GPUs&#34; really?
              </a>
            </dd>
        </dl>
      </article></div>
  </body>
</html>
