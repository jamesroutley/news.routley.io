<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.yossarian.net/2023/07/27/Introducing-shaq-a-CLI-for-shazam">Original</a>
    <h1>Show HN: Shaq, a CLI for Shazam</h1>
    
    <div id="readability-page-1" class="page">


<h2><em>Programming, philosophy, pedaling.</em></h2>

<ul>
    <li><a href="http://ablwr.github.io/">Home</a></li>
    <li><a href="http://ablwr.github.io/tags">Tags</a></li>
    <li><a href="http://ablwr.github.io/series">Series</a></li>
    <li><a href="http://ablwr.github.io/favorites">Favorites</a></li>
    <li><a href="http://ablwr.github.io/archive">Archive</a></li>
    
      <li><a href="https://yossarian.net">Main Site</a></li>
    
</ul>

<hr/>



<h2>
  <p>
    <span><em>Jul 27, 2023</em></span>

       

    
      <span>
        Tags:
        
        
          <a href="http://ablwr.github.io/tags#devblog">devblog</a>,
        
          <a href="http://ablwr.github.io/tags#music">music</a>,
        
          <a href="http://ablwr.github.io/tags#programming">programming</a>,
        
          <a href="http://ablwr.github.io/tags#python">python</a>
        
      </span>
    

       

    
  </p>
</h2>






<hr/>


<p>This is another tool announcement post, this time for <a href="https://github.com/woodruffw/shaq"><code>shaq</code></a>.</p>

<p><img src="http://ablwr.github.io/assets/shaq.gif" alt="A demonstration animation of shaq, detecting a song."/></p>

<p>As the demo implies, <code>shaq</code> does just one thing: it listens to an audio source and sends the results
to <a href="https://www.shazam.com/">Shazam</a> for fingerprinting. If a match is found, it prints it.</p>

<p>As usual, you can install it from <a href="https://pypi.org/project/shaq/">PyPI</a> using <code>pip</code> or
<a href="https://pypa.github.io/pipx/"><code>pipx</code></a>:</p>

<div><div><pre><code><table><tbody><tr><td><pre>1
2
3
4
5
</pre></td><td><pre>pip <span>install </span>shaq
<span># or:</span>
pipx <span>install </span>shaq

shaq <span>--help</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="usage">Usage</h2>

<p>By default <code>shaq</code> listens to the system microphone (helpfully supplied through
<a href="http://www.portaudio.com/"><code>portaudio</code></a>) and writes its findings as plain text, but you can tell
it to detect from an arbitrary input instead:</p>

<div><div><pre><code><table><tbody><tr><td><pre>1
2
3
4
5
6
7
8
</pre></td><td><pre><span># shaq analyzes the first 10 seconds by default</span>
shaq <span>--input</span> mystery.mp3

<span># analyze a longer segment</span>
shaq <span>--input</span> mystery.mp3 <span>--duration</span> 15

<span># anything with an audio track that ffmpeg can handle can be an input</span>
shaq <span>--input</span> another-mystery.mp4
</pre></td></tr></tbody></table></code></pre></div></div>

<p>…as well as to emit JSON:</p>

<div><div><pre><code><table><tbody><tr><td><pre>1
</pre></td><td><pre>shaq <span>--listen</span> <span>--duration</span> 5 <span>--json</span> | jq <span>&#39;[.track.title, .track.subtitle]&#39;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>produces:</p>

<div><div><pre><code><table><tbody><tr><td><pre>1
2
3
4
</pre></td><td><pre><span>[</span><span>
  </span><span>&#34;Mendacity&#34;</span><span>,</span><span>
  </span><span>&#34;Max Roach&#34;</span><span>
</span><span>]</span><span>
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>Under the hood, <code>shaq</code> is a relatively thin wrapper around
<a href="https://pypi.org/project/PyAudio/">PyAudio</a>, <a href="https://pypi.org/project/pydub/">pydub</a>,
and <a href="https://pypi.org/project/shazamio/">shazamio</a>.</p>

<p>For the moment, <code>shaq</code> only supports fixed durations. Once I get bored again,
I plan to add:</p>

<ul>
  <li>Support for “rolling” detections, i.e. “listen until you get a match”;</li>
  <li>Support for timeranges in file inputs, i.e., “15 seconds starting at 00:12:13”.</li>
</ul>

<h2 id="but-why">But why?</h2>

<p>I am a <a href="https://www.last.fm/user/yossarian_flew">compulsive scrobbler</a>;
I record almost everything I listen to, including phonograph records.</p>

<p>For records, I currently use <a href="https://vinylscrobbler.com/">Vinyl Scrobbler</a>
to scrobble records as I play them and it works very nicely (it even puts scrobbles
in the future so that they end up mostly synchronized with the actual record!).</p>

<p>At the same time, it’s <em>slightly</em> more manual than I’d prefer: I’d like to be able
to put a record on and have scrobbles come through <em>automatically</em> as each track starts. This
is why I made <code>shaq</code>: my plan is to hook the (unused) headphones channel on my received into
a Raspberry Pi, which will then run <code>shaq</code> either continuously or on a transition trigger
(i.e., noise drop between tracks).</p>

<p>The Pi will then scrobble based on <code>shaq</code>’s results,
satisfying my desire to be simultaneously too lazy to click a single button on my computer while
also physically flipping big chunks of vinyl every 20 minutes.</p>


<hr/>


<span>
  Discussions:
  
  <a href="https://infosec.exchange/@yossarian/110786520548290663">Mastodon</a>
  
  <a href="https://reddit.com/r/enosuchblog/comments/15b3dm5/introducing_shaq_a_cli_for_shazam/">Reddit</a>
  
</span>
<hr/>



  


  





</div>
  </body>
</html>
