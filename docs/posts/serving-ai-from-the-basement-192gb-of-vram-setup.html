<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://ahmadosman.com/blog/serving-ai-from-basement/">Original</a>
    <h1>Serving AI from the Basement – 192GB of VRAM Setup</h1>
    
    <div id="readability-page-1" class="page"><div>
      <header>
    
    <a href="https://ahmadosman.com/">
      
      














  
  
  
    
  

  
    <img loading="lazy" src="https://ahmadosman.com/logo/byte-and-build.png" alt="Site Logo"/>
  




    </a>
    
    
</header>

      <main>
        



  
  














  
  
  

  
    <img loading="lazy" src="https://ahmadosman.com/blog/serving-ai-from-basement/ai-server-built.jpg" alt="Cover Image"/>
  












<p>


  
  
  <span>

    <!--?xml version="1.0" encoding="utf-8"?--><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
<svg fill="currentColor" width="800px" height="800px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19,4H17V3a1,1,0,0,0-2,0V4H9V3A1,1,0,0,0,7,3V4H5A3,3,0,0,0,2,7V19a3,3,0,0,0,3,3H19a3,3,0,0,0,3-3V7A3,3,0,0,0,19,4Zm1,15a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1V12H20Zm0-9H4V7A1,1,0,0,1,5,6H7V7A1,1,0,0,0,9,7V6h6V7a1,1,0,0,0,2,0V6h2a1,1,0,0,1,1,1Z"></path></svg>


</span>
  Posted on <time datetime="2024-09-06T16:37:23-05:00">Sep 6, 2024</time>
  
  
  



</p>







<p><strong>AI from The Basement</strong>: My latest side project, a dedicated LLM server powered by 8x RTX 3090 Graphic Cards, boasting a total of 192GB of VRAM. I built this with running Meta’s Llamma-3.1 405B in mind.</p>
<p><a href="https://www.linkedin.com/feed/update/urn:li:activity:7215743814857019393/" target="_blank">This blogpost was originally posted on my LinkedIn profile in July 2024.</a>
</p>
<p>Backstory: Sometime in March I found myself struggling to keep up with the mere 48GB of VRAM I had been relying on for almost a year in my LLMs experimentations. So, in a geeky-yet-stylish way, I decided to spend my money to build this thing of beauty. Questions swirled: Which CPU/Platform to buy? Does memory speed really matter? And why the more PCIe Lanes we have the better? Why 2^n number of GPUs matter in multi-GPU node setup (Tensor Parallelism, anyone?) How many GPUs, and how can I get all the VRAM in the world? Why are Nvidia cards so expensive and why didn’t I invest in their stock earlier? What inference engine to use (hint: it’s not just llama.cpp and not always the most well-documented option)?</p>
<p>After so many hours of research, I decided on the following platform:</p>
<ul>
<li>Asrock Rack ROMED8-2T motherboard with 7x PCIe 4.0x16 slots and 128 lanes of PCIe</li>
<li>AMD Epyc Milan 7713 CPU (2.00 GHz/3.675GHz Boosted, 64 Cores/128 Threads)</li>
<li>512GB DDR4-3200 3DS RDIMM memory</li>
<li>A mere trio of 1600-watt power supply units to keep everything running smoothly</li>
<li>8x RTX 3090 GPUs with 4x NVLinks, enabling a blistering 112GB/s data transfer rate between each pair</li>
</ul>
<p>















  
  
  

  
    <img loading="lazy" src="https://ahmadosman.com/blog/serving-ai-from-basement/ai-server-running.jpg" alt="Image"/>
  




</p>
<p>Now that I kinda have everything in order, I’m working on a series of blog posts that will cover the entire journey, from building this behemoth to avoiding costly pitfalls. Topics will include:</p>
<ul>
<li>The challenges of assembling this system: from drilling holes in metal frames and adding 30amp 240volt breakers, to bending CPU socket pins (don’t try this at home, kids!).</li>
<li>Why PCIe Risers suck and the importance of using SAS Device Adapters, Redrivers, and Retimers for error-free PCIe connections.</li>
<li>NVLink speeds, PCIe lanes bandwidth and VRAM transfer speeds, and Nvidia’s decision to block P2P native PCIe bandwidth on the software level.</li>
<li>Benchmarking inference engines like TensorRT-LLM, vLLM, and Aphrodite Engine, all of which support Tensor Parallelism.</li>
<li>Training and fine-tuning your own LLM.</li>
</ul>
<p>Stay tuned.</p>
<p><strong>P.S. I’m sitting here staring at those GPUs, and I just can’t help but think how wild tech progress has been. I remember being so excited to get a 60GB HDD back in 2004. I mean, all the movies and games I could store?! Fast forward 20 years, and now I’ve got more than triple that storage capacity in just one machine’s graphic cards… It makes me think, what will we be doing in another 20 years?!</strong></p>
<p>Anyway, that’s why I’m doing this project. I wanna help create some of the cool stuff that’ll be around in the future. And who knows, maybe someone will look back on my work and be like “haha, remember when we thought 192GB of VRAM was a lot?”</p>












      </main>
      

    </div></div>
  </body>
</html>
