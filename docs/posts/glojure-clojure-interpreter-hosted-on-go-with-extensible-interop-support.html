<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/glojurelang/glojure">Original</a>
    <h1>Glojure: Clojure interpreter hosted on Go, with extensible interop support</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/glojurelang/glojure/actions/workflows/ci.yml/badge.svg"><img src="https://github.com/glojurelang/glojure/actions/workflows/ci.yml/badge.svg" alt="example workflow"/></a></p>
<p dir="auto"><a href="https://glojurelang.github.io/glojure/" rel="nofollow">Try it in your browser!</a> (fair warning: startup on the web is slow)</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://olu.online/glojurelang/glojure/blob/main/doc/logo.png"><img alt="Gopher image" src="https://olu.online/glojurelang/glojure/raw/main/doc/logo.png" width="512"/></a></p>
<p dir="auto"><em>Gopher image derived from <a href="https://github.com/egonelbre/gophers">@egonelbre</a>, licensed under <a href="https://creativecommons.org/licenses/by/1.0/" rel="nofollow">Creative Commons 1.0 Attributions license</a>.</em></p>
<p dir="auto">Glojure is an interpreter for
<a href="https://clojure.org/" rel="nofollow">Clojure</a>, hosted on Go. Glojure provides
easy access to Go libraries, similar to how Clojure provides easy
access to Java frameworks.</p>
<p dir="auto">Glojure is in early development; expect bugs, missing features,
and limited performance. Backwards compatibility is not
guaranteed until a v1 release. That said, it is used successfully
in hobby projects and runs a significant subset of
the (transformed) core Clojure library.</p>
<p dir="auto">Note that unlike most other Go implementations of Clojure, Glojure is
a &#34;hosted&#34; language - a term used to describe languages that are
implemented in terms of a host language (in this case, Go). This means
that all Go values can be used as Glojure values and vice versa.</p>

<p dir="auto">Before you get started with Glojure, make sure you have installed
and have knowledge of Go (version 1.19 or higher).</p>

<p dir="auto">Glojure is currently available from source for all platforms where Go
can run, and it requires at least go 1.19.</p>
<p dir="auto">Install it with the <code>go install</code> command:</p>
<div data-snippet-clipboard-copy-content="$ go install github.com/glojurelang/glojure/cmd/glj@latest"><pre><code>$ go install github.com/glojurelang/glojure/cmd/glj@latest
</code></pre></div>
<p dir="auto">After installation, you can start the REPL (Read-Eval-Print-Loop) with
the <code>glj</code> command:</p>
<div data-snippet-clipboard-copy-content="$ glj
user=&gt; (println &#34;Hello, world!&#34;)
Hello, world!
nil
user=&gt;"><pre><code>$ glj
user=&gt; (println &#34;Hello, world!&#34;)
Hello, world!
nil
user=&gt;
</code></pre></div>

<p dir="auto">Here&#39;s a small example program that starts an HTTP server with a
simple handler function that responds with the request body:</p>
<div dir="auto" data-snippet-clipboard-copy-content=";; example.glj
(ns example.server)

(defn echo-handler
  [w r]
  (io.Copy w (.Body r))
  nil)

(net$http.Handle &#34;/&#34; (net$http.HandlerFunc echo-handler))

(net$http.ListenAndServe &#34;:8080&#34; nil)"><pre><span><span>;</span>; example.glj</span>
(<span>ns</span> <span>example.server</span>)

(<span>defn</span> <span>echo-handler</span>
  [w r]
  (<span>io.Copy</span> w (<span>.Body</span> r))
  <span>nil</span>)

(<span>net$http.Handle</span> <span><span>&#34;</span>/<span>&#34;</span></span> (<span>net$http.HandlerFunc</span> echo-handler))

(<span>net$http.ListenAndServe</span> <span><span>&#34;</span>:8080<span>&#34;</span></span> <span>nil</span>)</pre></div>
<p dir="auto">Run it with the <code>glj</code> command:</p>

<div data-snippet-clipboard-copy-content="$ curl localhost:8080 -d &#34;sicp&#34;
sicp"><pre><code>$ curl localhost:8080 -d &#34;sicp&#34;
sicp
</code></pre></div>

<p dir="auto">Glojure ships with interop with many standard library packages
out-of-the-box.  Go package names are munged to avoid ambiguity with
the use of <code>/</code> to refer to namespaced symbols; instances of <code>/</code> in
package names are replaced with <code>$</code>. Here&#39;s a simple example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="user=&gt; (println (fmt.Sprintf &#34;A couple of HTTP methods: %v&#34; [net$http.MethodGet net$http.MethodPost]))
A couple of HTTP methods: [&#34;GET&#34; &#34;POST&#34;]
nil"><pre>user=&gt; (<span>println</span> (<span>fmt.Sprintf</span> <span><span>&#34;</span>A couple of HTTP methods: %v<span>&#34;</span></span> [net$http.MethodGet net$http.MethodPost]))
A couple of HTTP methods: [<span><span>&#34;</span>GET<span>&#34;</span></span> <span><span>&#34;</span>POST<span>&#34;</span></span>]
<span>nil</span></pre></div>
<p dir="auto">The following standard library packages are included by default:</p>
<ul dir="auto">
<li><code>bytes</code></li>
<li><code>context</code></li>
<li><code>errors</code></li>
<li><code>flag</code></li>
<li><code>fmt</code></li>
<li><code>io</code></li>
<li><code>io/fs</code></li>
<li><code>io/ioutil</code></li>
<li><code>math</code></li>
<li><code>math/big</code></li>
<li><code>math/rand</code></li>
<li><code>net/http</code></li>
<li><code>os</code></li>
<li><code>os/exec</code></li>
<li><code>os/signal</code></li>
<li><code>regexp</code></li>
<li><code>reflect</code></li>
<li><code>sort</code></li>
<li><code>strconv</code></li>
<li><code>strings</code></li>
<li><code>sync</code></li>
<li><code>sync/atomic</code></li>
<li><code>time</code></li>
<li><code>unicode</code></li>
</ul>
<p dir="auto">To expose additional packages, you must generate a &#34;package map&#34; and compile your own executable
that imports both your package map and the Glojure API. See the section below for more details.</p>
<p dir="auto">Expect improvements to both the availability of standard library packages and interop workflows.</p>
<div dir="auto"><h4 tabindex="-1" dir="auto">Accessing additional Go packages</h4><a id="user-content-accessing-additional-go-packages" aria-label="Permalink: Accessing additional Go packages" href="#accessing-additional-go-packages"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The <code>gen-import-interop</code> can be used to emit the contents of a .go file
that will export a function that can be used to add the exports of
additional packages to the Glojure package map.</p>
<div data-snippet-clipboard-copy-content="$ go run github.com/glojurelang/glojure/cmd/gen-import-interop \
     -packages=:comma-separated-package-list: \
     &gt; your/package/gljimports/my_package_map.go"><pre><code>$ go run github.com/glojurelang/glojure/cmd/gen-import-interop \
     -packages=:comma-separated-package-list: \
     &gt; your/package/gljimports/my_package_map.go
</code></pre></div>
<p dir="auto">Then, in your own program:</p>
<div dir="auto" data-snippet-clipboard-copy-content="package main

import (
	// Add your packages&#39; exports to the pkgmap.
	_ &#34;your.package/gljimports&#34;
)

// ..."><pre><span>package</span> main

<span>import</span> (
	<span>// Add your packages&#39; exports to the pkgmap.</span>
	_ <span>&#34;your.package/gljimports&#34;</span>
)

<span>// ...</span></pre></div>


<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Clojure Type</th>
<th>Glojure Type</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>long</code></td>
<td><code>int64</code></td>
<td></td>
</tr>
<tr>
<td><code>double</code></td>
<td><code>float64</code></td>
<td></td>
</tr>
<tr>
<td><code>float</code></td>
<td><code>float32</code></td>
<td></td>
</tr>
<tr>
<td><code>double</code></td>
<td><code>float64</code></td>
<td></td>
</tr>
<tr>
<td><code>byte</code></td>
<td><code>byte</code></td>
<td>Note that Go bytes are unsigned, whereas JVM bytes are signed.</td>
</tr>
<tr>
<td><code>short</code></td>
<td><code>int16</code></td>
<td></td>
</tr>
<tr>
<td><code>int</code></td>
<td><code>int</code></td>
<td>Note that JVM ints are 32-bit, whereas Go ints are 32- or 64-bit depending on the platform.</td>
</tr>
<tr>
<td><code>char</code></td>
<td><code>lang.Char</code></td>
<td>The Glojure type is a tagged rune (<code>type Char rune</code>). JVM chars are 16-bit whereas Go runes are 32-bit.</td>
</tr>
<tr>
<td><code>BigInt</code></td>
<td><code>*lang.BigInt</code></td>
<td>The Glojure type wraps <code>*big.Int</code>.</td>
</tr>
<tr>
<td><code>BigDecimal</code></td>
<td><code>*lang.BigDecimal</code></td>
<td>The Glojure type wraps <code>*big.Float</code>.</td>
</tr>
<tr>
<td><code>Ratio</code></td>
<td><code>*lang.Ratio</code></td>
<td>The Glojure type wraps <code>*big.Rat</code>.</td>
</tr>
<tr>
<td><code>BigInteger</code></td>
<td><code>*big.Int</code></td>
<td>Native JVM BigInteger corresponds to <code>*big.Int</code>.</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<div dir="auto"><h2 tabindex="-1" dir="auto">Comparisons to other Go ports of Clojure</h2><a id="user-content-comparisons-to-other-go-ports-of-clojure" aria-label="Permalink: Comparisons to other Go ports of Clojure" href="#comparisons-to-other-go-ports-of-clojure"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Aspect</th>
<th>Glojure</th>
<th><a href="https://github.com/candid82/joker">Joker</a></th>
<th><a href="https://github.com/nooga/let-go">let-go</a></th>
</tr>
</thead>
<tbody>
<tr>
<td>Hosted<sup><a href="#user-content-fn-1-44effcffb39205416a742a71e3f13e7c" id="user-content-fnref-1-44effcffb39205416a742a71e3f13e7c" data-footnote-ref="" aria-describedby="footnote-label">1</a></sup></td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr>
<td>Extensible Go interop</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr>
<td>Concurrency</td>
<td>Yes</td>
<td>Yes (with GIL)</td>
<td>Yes</td>
</tr>
<tr>
<td>Clojure tooling (e.g. linter)</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>Execution</td>
<td>Tree-walk interpreter</td>
<td>Tree-walk interpreter</td>
<td>Bytecode Interpreter</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><em>If you&#39;d like to see another port in this table, or if you believe
there is an error in it, please file an issue or open a pull request!</em></p>
<section data-footnotes="">
<ol dir="auto">
<li id="user-content-fn-1-44effcffb39205416a742a71e3f13e7c">
<p dir="auto">What does it mean to be a hosted
language? For Clojure on the JVM, it means that all Java values are
also Clojure values, and vice versa. Glojure strives to maintain the
same relationship with Go. <a href="#user-content-fnref-1-44effcffb39205416a742a71e3f13e7c" data-footnote-backref="" aria-label="Back to reference 1">â†©</a></p>
</li>
</ol>
</section>
</article></div></div>
  </body>
</html>
