<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://nextdns.github.io/api/">Original</a>
    <h1>NextDNS API</h1>
    
    <div id="readability-page-1" class="page"><div>
      
      
      

      

<h2 id="beta">Beta</h2>

<p>This API is currently in beta and is subject to breaking changes without notice (rare, if any).</p>

<p>We are actively working on it and we expect it to be production-ready in the following weeks.</p>

<p>We welcome bug reports and feedback at <a href="https://help.nextdns.io">https://help.nextdns.io</a>.</p>

<p>Enjoy!</p>

<h2 id="table-of-contents">Table of Contents</h2>

<ul>
  <li><a href="#endpoint">Endpoint</a></li>
  <li><a href="#authentication">Authentication</a></li>
  <li><a href="#response-format">Response format</a>
    <ul>
      <li><a href="#handling-errors">Handling errors</a></li>
    </ul>
  </li>
  <li><a href="#pagination">Pagination</a></li>
  <li><a href="#profiles">Profiles</a>
    <ul>
      <li><a href="#profile">Profile</a>
        <ul>
          <li><a href="#nested-objects-and-arrays">Nested objects and arrays</a></li>
        </ul>
      </li>
      <li><a href="#analytics">Analytics</a>
        <ul>
          <li><a href="#query-string-parameters">Query string parameters</a></li>
          <li><a href="#endpoints">Endpoints</a></li>
          <li><a href="#time-series">Time series</a></li>
        </ul>
      </li>
      <li><a href="#logs">Logs</a>
        <ul>
          <li><a href="#streaming">Streaming</a></li>
          <li><a href="#download">Download</a></li>
          <li><a href="#clear">Clear</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#miscellaneous">Miscellaneous</a>
    <ul>
      <li><a href="#date-format-in-query-parameters"><code>Date</code> format in query parameters</a></li>
      <li><a href="#timezone-format"><code>TimeZone</code> format</a></li>
    </ul>
  </li>
</ul>

<h2 id="endpoint">Endpoint</h2>

<p><code>https://api.nextdns.io/...</code></p>

<h2 id="authentication">Authentication</h2>

<p>Pass your API key via the <code>X-Api-Key</code> header for every calls:</p>

<p><code>X-Api-Key: a8f4e42e896ff37f181e3e8a42a9737e1423d8e7</code></p>

<p>ðŸ’¡ Find your API key at the bottom of your account page (<a href="https://my.nextdns.io/account">https://my.nextdns.io/account</a>).</p>

<h2 id="response-format">Response format</h2>

<p>All API responses with 200 or 400 status follow one of the following formats:</p>

<pre><code>{
  &#34;data&#34;: {...}, // or [...], depending on the endpoint
  &#34;meta&#34;: {...} // optional
}
</code></pre>

<pre><code>{
  &#34;errors&#34;: [...]
}
</code></pre>

<h3 id="handling-errors">Handling errors</h3>

<p>The API will respond with a <code>400 Bad Request</code> and <code>{ &#34;errors&#34;: [...] }</code> on client error:</p>
<ul>
  <li>Invalid or missing required <code>query</code> arguments.</li>
  <li>Invalid body on POST, PATCH and PUT.</li>
</ul>

<p>The API will respond with a <code>200 OK</code> and <code>{ &#34;errors&#34;: [...] }</code> on user error:</p>
<ul>
  <li>Invalid domain when adding a domain to the Denylist.</li>
  <li>Trying to rename a profile with the same name as another profile.</li>
  <li>â€¦</li>
</ul>

<p>The <code>errors</code> array will contain <em>at least</em> one <code>Error</code> object with the following format:</p>

<pre><code>{
  &#34;code&#34;: &#34;invalid&#34;,
  &#34;detail&#34;: &#34;\&#34;HeLlO\&#34; is not an integer.&#34;,
  &#34;source&#34;: {
    &#34;parameter&#34;: &#34;limit&#34; // for query string parameters, or &#34;pointer&#34; when the error is in the body.
  }
}
</code></pre>



<p>Most endpoints that return an array for the <code>data</code> key are paginated.</p>

<p>Cursors are strings returned in the <code>meta</code> section of the response and should be passed as query string argument <code>cursor</code> to get the next page:</p>

<pre><code>{
  &#34;data&#34;: [...],
  &#34;meta&#34;: {
    &#34;pagination&#34;: {
      &#34;cursor&#34;: &#34;j2k3zl3b4v&#34;
     }
   }
}

// get the next page with /endpoint?...&amp;cursor=j2k3zl3b4v
</code></pre>

<p>Use the <code>limit</code> query string argument to adjust the number of results per page (e.g. <code>/endpoint?...&amp;limit=50</code>).</p>

<p><code>cursor</code> will be <code>null</code> when there is no more page.</p>

<h2 id="profiles">Profiles</h2>

<h2 id="profile">Profile</h2>

<p>A entire profile can be represented with the following JSON:</p>

<pre><code>{
  &#34;name&#34;: &#34;My profile&#34;,
  &#34;security&#34;: {
    &#34;threatIntelligenceFeeds&#34;: true,
    &#34;aiThreatDetection&#34;: true,
    &#34;googleSafeBrowsing&#34;: true,
    &#34;cryptojacking&#34;: true,
    &#34;dnsRebinding&#34;: true,
    &#34;idnHomographs&#34;: true,
    &#34;typosquatting&#34;: true,
    &#34;dga&#34;: true,
    &#34;nrd&#34;: true,
    &#34;parking&#34;: true,
    &#34;csam&#34;: true,
    &#34;tlds&#34;: [
      {
        &#34;id&#34;: &#34;ru&#34;
      },
      {
        &#34;id&#34;: &#34;cn&#34;
      },
      {
        &#34;id&#34;: &#34;cf&#34;
      },
      {
        &#34;id&#34;: &#34;accountants&#34;
      }
    ]
  },
  &#34;privacy&#34;: {
    &#34;blocklists&#34;: [
      {
        &#34;id&#34;: &#34;nextdns-recommended&#34;
      },
      {
        &#34;id&#34;: &#34;oisd&#34;
      }
    ],
    &#34;natives&#34;: [
      {
        &#34;id&#34;: &#34;huawei&#34;
      },
      {
        &#34;id&#34;: &#34;samsung&#34;
      }
    ],
    &#34;disguisedTrackers&#34;: true,
    &#34;allowAffiliate&#34;: true
  },
  &#34;parentalControl&#34;: {
    &#34;services&#34;: [
      {
        &#34;id&#34;: &#34;tiktok&#34;,
        &#34;active&#34;: true
      },
      {
        &#34;id&#34;: &#34;facebook&#34;,
        &#34;active&#34;: false
      }
    ],
    &#34;categories&#34;: [
      {
        &#34;id&#34;: &#34;porn&#34;,
        &#34;active&#34;: true
      },
      {
        &#34;id&#34;: &#34;social-networks&#34;,
        &#34;active&#34;: false
      }
    ],
    &#34;safeSearch&#34;: true,
    &#34;youtubeRestrictedMode&#34;: true,
    &#34;blockBypass&#34;: false
  },
  &#34;denylist&#34;: [
    {
      &#34;id&#34;: &#34;badwebsite.com&#34;,
      &#34;active&#34;: true
    },
    {
      &#34;id&#34;: &#34;pornhub.com&#34;,
      &#34;active&#34;: false
    }
  ],
  &#34;allowlist&#34;: [
    {
      &#34;id&#34;: &#34;goodwebsite.com&#34;,
      &#34;active&#34;: true
    },
    {
      &#34;id&#34;: &#34;nytimes.com&#34;,
      &#34;active&#34;: false
    }
  ],
  &#34;settings&#34;: {
    &#34;logs&#34;: {
      &#34;enabled&#34;: true,
      &#34;drop&#34;: {
        &#34;ip&#34;: false,
        &#34;domain&#34;: false
      },
      &#34;retention&#34;: 7776000,
      &#34;location&#34;: &#34;eu&#34;
    },
    &#34;blockPage&#34;: {
      &#34;enabled&#34;: true
    },
    &#34;performance&#34;: {
      &#34;ecs&#34;: true,
      &#34;cacheBoost&#34;: false,
      &#34;cnameFlattening&#34;: true
    },
    &#34;web3&#34;: true
  }
}
</code></pre>

<p>To create a new profile, <code>POST</code> at <code>https://api.nextdns.io/profiles</code> the above JSON. The API will return:</p>

<pre><code>{
  &#34;data&#34;: {
    &#34;id&#34;: &#34;abc123&#34; // the id of the newly created profile
  }
}
</code></pre>

<p>You can then <code>GET</code>, <code>PATCH</code> and <code>DELETE</code> a profile at:
<code>https://api.nextdns.io/profiles/:profile</code> (<code>:profile</code> in our example should be <code>abc123</code>).</p>

<h4 id="nested-objects-and-arrays">Nested objects and arrays</h4>

<p>All nested objects and arrays also have their own API child endpoints.</p>

<p>For example, you can <code>GET</code> or <code>PATCH</code> performance settings at:
<code>https://api.nextdns.io/profiles/:profile/settings/performance</code></p>

<p>â€¦or add a domain to the Denylist by <code>POST</code>â€˜ing at:
<code>https://api.nextdns.io/profiles/:profile/denylist</code></p>

<p>Objects endpoints (such as <code>.../privacy</code>) support the <code>GET</code> and <code>PATCH</code> methods.</p>

<p>Arrays endpoints (such as <code>.../privacy/blocklists</code>) support the <code>GET</code>, <code>PUT</code> and <code>POST</code> methods. Each child supports the <code>PATCH</code> and <code>DELETE</code> method (you should use the first key as id).</p>

<h3 id="analytics">Analytics</h3>

<p>Analytics are available at <code>https://api.nextdns.io/profiles/:profile/analytics/*</code> (e.g. <code>.../analytics/protocols</code>).</p>

<h4 id="query-string-parameters">Query string parameters</h4>

<h5 id="from">from</h5>
<p>Type: <a href="#date-format-in-query-parameters"><code>Date</code></a></p>

<p>Filter out entities with older date (inclusive).</p>

<hr/>

<h5 id="to">to</h5>
<p>Type: <a href="#date-format-in-query-parameters"><code>Date</code></a></p>

<p>Filter out entities with newer or equal date (exclusive).</p>

<hr/>

<h5 id="limit">limit</h5>
<p>Type: <code>Integer</code></p>

<p>Limit the number of results returned (see <a href="#pagination">Pagination</a>).</p>

<blockquote>
  <p><code>limit</code> should be &gt;= 1 and &lt;= 500.</p>
</blockquote>

<hr/>

<h5 id="cursor">cursor</h5>
<p>Type: <code>String</code></p>

<p>Use <code>cursor</code> to get the next page (see <a href="#pagination">Pagination</a>).</p>

<hr/>

<h5 id="device">device</h5>
<p>Type: <code>String</code></p>

<p>Only get entities related to a specific device.</p>

<blockquote>
  <p>Use <code>__UNIDENTIFIED__</code> to filter against all unidentified devices.</p>
</blockquote>

<h4 id="endpoints">Endpoints</h4>

<h5 id="profilesprofileanalyticsstatus">/profiles/:profile/analytics/status</h5>

<pre><code>{
  &#34;data&#34;: [
    {
      &#34;status&#34;: &#34;default&#34;,
      &#34;queries&#34;: 819491
    },
    {
      &#34;status&#34;: &#34;blocked&#34;,
      &#34;queries&#34;: 132513
    },
    {
      &#34;status&#34;: &#34;allowed&#34;,
      &#34;queries&#34;: 6923
    },
    ...
  ],
  ...
}
</code></pre>

<h5 id="profilesprofileanalyticsdomains">/profiles/:profile/analytics/domains</h5>

<p>Specific query parameters:</p>
<ul>
  <li><code>status</code> (optional, <code>default | blocked | allowed</code>)</li>
  <li><code>root</code> (optional, <code>boolean</code>, default <code>false</code>)</li>
</ul>

<pre><code>{
  &#34;data&#34;: [
    {
      &#34;domain&#34;: &#34;app-measurement.com&#34;,
      &#34;queries&#34;: 29801
    },
    {
      &#34;domain&#34;: &#34;gateway.icloud.com&#34;,
      &#34;root&#34;: &#34;icloud.com&#34;,
      &#34;queries&#34;: 18468
    },
    {
      &#34;domain&#34;: &#34;app.smartmailcloud.com&#34;,
      &#34;root&#34;: &#34;smartmailcloud.com&#34;,
      &#34;queries&#34;: 16414
    },
    ...
  ],
  ...
}
</code></pre>

<h5 id="profilesprofileanalyticsreasons">/profiles/:profile/analytics/reasons</h5>

<pre><code>{
  &#34;data&#34;: [
    {
      &#34;reason&#34;: &#34;blocklist:nextdns-recommended&#34;,
      &#34;queries&#34;: 131833
    },
    {
      &#34;reason&#34;: &#34;native:apple&#34;,
      &#34;queries&#34;: 402
    },
    {
      &#34;reason&#34;: &#34;disguised-trackers&#34;,
      &#34;queries&#34;: 269
    },
    ...
  ],
  ...
}
</code></pre>

<h5 id="profilesprofileanalyticsips">/profiles/:profile/analytics/ips</h5>

<pre><code>{
  &#34;data&#34;: [
    {
      &#34;ip&#34;: &#34;91.171.12.34&#34;,
      &#34;network&#34;: {
        &#34;cellular&#34;: false,
        &#34;vpn&#34;: false,
        &#34;isp&#34;: &#34;Free&#34;,
        &#34;asn&#34;: 12322
      },
      &#34;geo&#34;: {
        &#34;latitude&#34;: 48.8998,
        &#34;longitude&#34;: 2.703,
        &#34;countryCode&#34;: &#34;FR&#34;,
        &#34;country&#34;: &#34;France&#34;,
        &#34;city&#34;: &#34;Gagny&#34;
      },
      &#34;queries&#34;: 136935
    },
    {
      &#34;ip&#34;: &#34;2a01:e0a:2cd:1234:312a:4c24:215d:185&#34;,
      &#34;network&#34;: {
        &#34;cellular&#34;: false,
        &#34;vpn&#34;: false,
        &#34;isp&#34;: &#34;Free&#34;,
        &#34;asn&#34;: 12322
      },
      &#34;geo&#34;: {
        &#34;latitude&#34;: 48.5136,
        &#34;longitude&#34;: -1.9042,
        &#34;countryCode&#34;: &#34;FR&#34;,
        &#34;country&#34;: &#34;France&#34;,
        &#34;city&#34;: &#34;Miniac-Morvan&#34;
      },
      &#34;queries&#34;: 40410
    },
    ...
  ],
  ...
}
</code></pre>

<h5 id="profilesprofileanalyticsdevices">/profiles/:profile/analytics/devices</h5>

<pre><code>{
  &#34;data&#34;: [
    {
      &#34;id&#34;: &#34;8TD1G&#34;,
      &#34;name&#34;: &#34;Romainâ€™s iPhone&#34;,
      &#34;model&#34;: &#34;iPhone 12 Pro Max&#34;,
      &#34;queries&#34;: 489885
    },
    {
      &#34;id&#34;: &#34;E24AR&#34;,
      &#34;name&#34;: &#34;MBP&#34;,
      &#34;model&#34;: &#34;Macbook Pro&#34;,
      &#34;localIp&#34;: &#34;192.168.0.11&#34;,
      &#34;queries&#34;: 215663
    },
    {
      &#34;id&#34;: &#34;__UNIDENTIFIED__&#34;,
      &#34;queries&#34;: 74242
    },
    ...
  ],
  ...
}
</code></pre>

<h5 id="profilesprofileanalyticsprotocols">/profiles/:profile/analytics/protocols</h5>

<pre><code>{
  &#34;data&#34;: [
    {
      &#34;protocol&#34;: &#34;DNS-over-HTTPS&#34;,
      &#34;queries&#34;: 958757
    },
    {
      &#34;protocol&#34;: &#34;DNS-over-TLS&#34;,
      &#34;queries&#34;: 39582
    },
    {
      &#34;protocol&#34;: &#34;UDP&#34;,
      &#34;queries&#34;: 2334
    },
    ...
  ],
  ...
}
</code></pre>

<h5 id="profilesprofileanalyticsquerytypes">/profiles/:profile/analytics/queryTypes</h5>

<pre><code>{
  &#34;data&#34;: [
    {
      &#34;type&#34;: 28,
      &#34;name&#34;: &#34;AAAA&#34;,
      &#34;queries&#34;: 356230
    },
    {
      &#34;type&#34;: 1,
      &#34;name&#34;: &#34;A&#34;,
      &#34;queries&#34;: 341812
    },
    {
      &#34;type&#34;: 65,
      &#34;name&#34;: &#34;HTTPS&#34;,
      &#34;queries&#34;: 260478
    },
    ...
  ],
  ...
}
</code></pre>

<h5 id="profilesprofileanalyticsipversions">/profiles/:profile/analytics/ipVersions</h5>

<pre><code>{
  &#34;data&#34;: [
    {
      &#34;version&#34;: 6,
      &#34;queries&#34;: 784154
    },
    {
      &#34;version&#34;: 4,
      &#34;queries&#34;: 174308
    },
    ...
  ],
  ...
}
</code></pre>

<h5 id="profilesprofileanalyticsdnssec">/profiles/:profile/analytics/dnssec</h5>

<pre><code>{
  &#34;data&#34;: [
    {
      &#34;validated&#34;: false,
      &#34;queries&#34;: 817664
    },
    {
      &#34;validated&#34;: true,
      &#34;queries&#34;: 8199
    },
    ...
  ],
  ...
}
</code></pre>

<h5 id="profilesprofileanalyticsencryption">/profiles/:profile/analytics/encryption</h5>

<pre><code>{
  &#34;data&#34;: [
    {
      &#34;encrypted&#34;: true,
      &#34;queries&#34;: 958331
    },
    {
      &#34;encrypted&#34;: false,
      &#34;queries&#34;: 1
    },
    ...
  ],
  ...
}
</code></pre>

<h5 id="profilesprofileanalyticsdestinationstypecountries">/profiles/:profile/analytics/destinations?type=countries</h5>

<pre><code>{
  &#34;data&#34;: [
    {
      &#34;code&#34;: &#34;US&#34;,
      &#34;domains&#34;: [
        &#34;app.smartmailcloud.com&#34;,
        &#34;imap.gmail.com&#34;,
        &#34;api.coinbase.com&#34;,
        &#34;events-service.coinbase.com&#34;,
        &#34;ws.coinbase.com&#34;
      ],
      &#34;queries&#34;: 209851
    },
    {
      &#34;code&#34;: &#34;FR&#34;,
      &#34;domains&#34;: [
        &#34;inappcheck.itunes.apple.com&#34;,
        &#34;iphone-ld.apple.com&#34;,
        &#34;bag.itunes.apple.com&#34;,
        &#34;itunes.apple.com&#34;,
        &#34;www.apple.com&#34;
      ],
      &#34;queries&#34;: 105497
    },
    ...
  ],
  ...
}
</code></pre>

<h5 id="profilesprofileanalyticsdestinationstypegafam">/profiles/:profile/analytics/destinations?type=gafam</h5>

<pre><code>{
  &#34;data&#34;: [
    {
      &#34;company&#34;: &#34;others&#34;,
      &#34;queries&#34;: 478732
    },
    {
      &#34;company&#34;: &#34;apple&#34;,
      &#34;queries&#34;: 284832
    },
    {
      &#34;company&#34;: &#34;google&#34;,
      &#34;queries&#34;: 159488
    },
    ...
  ],
  ...
}
</code></pre>

<h4 id="time-series">Time series</h4>

<p>All the endpoints above can return time series data to easily create charts.</p>

<p>Time series endpoints are built by appending <code>;series</code> to any of the endpoints above (e.g. <code>.../analytics/status;series?...</code>).</p>

<p>Time series responses return an array of values for <code>queries</code> instead of a single value.</p>

<p>All query string parameters mentioned <a href="#query-string-parameters">here</a> are supported and should be used, with the addition of the following parameters:</p>

<h5 id="interval">interval</h5>
<p>Type: <code>Seconds | Duration</code></p>

<p>By default, the API uses an appropriate duration for each tumbling window based on the full window size (<code>from</code> -&gt; <code>to</code>).</p>

<hr/>

<h5 id="alignment">alignment</h5>
<p>Values: <code>start | end | clock</code></p>

<p>Useful when the full window doesnâ€™t fit an exact number of tumbling windows, or when you want to align windows <em>on the clock</em>.</p>

<hr/>

<h5 id="timezone">timezone</h5>
<p>Type: <a href="#timezone-format"><code>TimeZone</code></a></p>

<p>Use this in correlation with <code>alignment=clock</code>.</p>

<hr/>

<h5 id="partials">partials</h5>
<p>Values: <code>none | start | end | all</code></p>

<p>Decide if you want partial tumbling windows to be returned.</p>

<hr/>

<pre><code>// https://api.nextdns.io/profiles/abc123/analytics/queryTypes;series?from=-7d&amp;interval=1d&amp;limit=2

{
  &#34;data&#34;: [
    {
      &#34;type&#34;: 28,
      &#34;name&#34;: &#34;AAAA&#34;,
      &#34;queries&#34;: [
        4019,
        5801,
        2667,
        2817,
        3314,
        3128,
        3810
      ]
    },
    {
      &#34;type&#34;: 1,
      &#34;name&#34;: &#34;A&#34;,
      &#34;queries&#34;: [
        3873,
        5421,
        2691,
        2865,
        3387,
        3192,
        3864
      ]
    }
  ],
  &#34;meta&#34;: {
    &#34;series&#34;: {
      &#34;times&#34;: [ // the starting date of each tumbling window
        &#34;2021-03-08T16:51:36.623Z&#34;,
        &#34;2021-03-09T16:51:36.623Z&#34;,
        &#34;2021-03-10T16:51:36.623Z&#34;,
        &#34;2021-03-11T16:51:36.623Z&#34;,
        &#34;2021-03-12T16:51:36.623Z&#34;,
        &#34;2021-03-13T16:51:36.623Z&#34;,
        &#34;2021-03-14T16:51:36.623Z&#34;
      ],
      &#34;interval&#34;: 86400 // the duration (in seconds) of each tumbling window
    },
    &#34;pagination&#34;: {
      &#34;cursor&#34;: &#34;jS8sl16m&#34;
    }
  }
}
</code></pre>

<h3 id="logs">Logs</h3>

<p>Analytics are available at <code>https://api.nextdns.io/profiles/:profile/logs</code>.</p>

<h4 id="query-string-parameters-1">Query string parameters</h4>

<h5 id="from-1">from</h5>
<p>Type: <a href="#date-format-in-query-parameters"><code>Date</code></a></p>

<p>Filter out logs with older date (inclusive).</p>

<hr/>

<h5 id="to-1">to</h5>
<p>Type: <a href="#date-format-in-query-parameters"><code>Date</code></a></p>

<p>Filter out logs with newer or equal date (exclusive).</p>

<hr/>

<h5 id="sort">sort</h5>
<p>Values: <code>asc | desc</code></p>

<p>Using <code>asc</code> will return logs from oldest to newest, <code>desc</code> from newest to oldest.</p>

<hr/>

<h5 id="limit-1">limit</h5>
<p>Type: <code>Integer</code></p>

<p>Limit the number of results returned (see <a href="#pagination">Pagination</a>).</p>

<blockquote>
  <p><code>limit</code> should be &gt;= 10 and &lt;= 1000.</p>
</blockquote>

<hr/>

<h5 id="cursor-1">cursor</h5>
<p>Type: <code>String</code></p>

<p>Use <code>cursor</code> to get the next page (see <a href="#pagination">Pagination</a>).</p>

<hr/>

<h5 id="device-1">device</h5>
<p>Type: <code>String</code></p>

<p>Only get logs made for a specific device.</p>

<blockquote>
  <p>Use <code>__UNIDENTIFIED__</code> to filter against all unidentified devices.</p>
</blockquote>

<hr/>

<h5 id="status">status</h5>
<p>Values: <code>default | error | blocked | allowed</code></p>

<p>Filter by status.</p>

<hr/>

<h5 id="search">search</h5>
<p>Type: <code>String</code></p>

<p>Only returns logs matching the search query.</p>

<blockquote>
  <p>e.g. <code>facebook</code> will show logs from facebook.com, facebook.hello.com and hellofacebookhello.com.</p>
</blockquote>

<hr/>

<h5 id="raw">raw</h5>
<p>Type: <code>Boolean</code></p>

<p>By default, only navigational query types (<code>A</code>, <code>AAAA</code> and <code>HTTPS</code>) are returned, and are automatically deduplicated. Irrelevant domains considered noise (like Google Chrome random DNS lookups) are also not returned. This gives a clearer overview of network access. Use <code>raw=1</code> to show <em>all</em> DNS queries.</p>

<hr/>

<pre><code>{
  &#34;data&#34;: [
    {
      &#34;timestamp&#34;: &#34;2021-03-18T03:00:10.338Z&#34;,
      &#34;domain&#34;: &#34;21-courier.push.apple.com&#34;,
      &#34;root&#34;: &#34;apple.com&#34;,
      &#34;tracker&#34;: &#34;apple&#34;,
      &#34;encrypted&#34;: true,
      &#34;protocol&#34;: &#34;DNS-over-HTTPS&#34;,
      &#34;clientIp&#34;: &#34;2a01:e0a:2cd:87a0:1b23:2832:57cd:aa1d&#34;,
      &#34;client&#34;: &#34;apple-profile&#34;,
      &#34;device&#34;: {
        &#34;id&#34;: &#34;8TD1G&#34;,
        &#34;name&#34;: &#34;Romainâ€™s iPhone&#34;,
        &#34;model&#34;: &#34;iPhone 12 Pro Max&#34;
      },
      &#34;status&#34;: &#34;default&#34;,
      &#34;reasons&#34;: []
    },
    {
      &#34;timestamp&#34;: &#34;2021-03-18T02:56:14.182Z&#34;,
      &#34;domain&#34;: &#34;sb.scorecardresearch.com&#34;,
      &#34;root&#34;: &#34;scorecardresearch.com&#34;,
      &#34;tracker&#34;: &#34;scorecard_research_beacon&#34;,
      &#34;encrypted&#34;: false,
      &#34;protocol&#34;: &#34;UDP&#34;,
      &#34;clientIp&#34;: &#34;91.172.51.28&#34;,
      &#34;status&#34;: &#34;blocked&#34;,
      &#34;reasons&#34;: [
        &#34;blocklist:nextdns-recommended&#34;,
        &#34;blocklist:oisd&#34;
      ]
    },
    ...
  ],
  ...
}
</code></pre>

<h5 id="streaming">Streaming</h5>

<p>Stream new logs in real-time with <a href="https://en.wikipedia.org/wiki/Server-sent_events">Server-sent events (or SSE)</a> by using the endpoint <code>GET /profiles/:profile/logs/stream</code>.</p>

<p>The <code>/logs/stream</code> endpoint supports all query string parameters supported by the <code>/logs</code> endpoint with the exception of <code>from</code>, <code>to</code>, <code>sort</code>, <code>limit</code> and <code>cursor</code>.</p>

<p>Events have the following format:</p>

<div><div><pre><code>id: 64v32d9r6rwkcctg6cu38e9g60
data: {&#34;timestamp&#34;:&#34;2021-03-16T04:40:30.344Z&#34;,&#34;domain&#34;:&#34;g.whatsapp.net&#34;,&#34;root&#34;:&#34;whatsapp.net&#34;,&#34;encrypted&#34;:true,&#34;protocol&#34;:&#34;DNS-over-HTTPS&#34;,&#34;clientIp&#34;:&#34;2a01:e0a:2cd:87a0:5540:d573:57cd:aa1d&#34;,&#34;client&#34;:&#34;apple-profile&#34;,&#34;device&#34;:{&#34;id&#34;:&#34;8TD1G&#34;,&#34;name&#34;:&#34;RomainÃ¢â‚¬â„¢s iPhone&#34;,&#34;model&#34;:&#34;iPhone 12 Pro Max&#34;},&#34;status&#34;:&#34;default&#34;,&#34;reasons&#34;:[]}
</code></pre></div></div>

<p>Pass the last <code>id</code> received as query string parameter to resume where you left off (e.g. <code>.../logs/stream?id=64v32d9r6rwkcctg6cu38e9g60</code>).</p>

<blockquote>
  <p>:bulb: The standard <code>/logs</code> endpoint will return an <code>id</code> when getting the most recent logs:</p>
  <pre><code>{
  &#34;data&#34;: [...],
  &#34;meta&#34;: {
    ...
    &#34;stream&#34;: {
      &#34;id&#34;: &#34;64v32d9r6rwkcctg6cu38e9g60&#34;
    }
  }
}
</code></pre>
  <p>Pass this <code>id</code> as query string parameter to the <code>/logs/stream</code> endpoint when you need to stitch recent logs and new logs received from the streaming endpoint without any duplicate or missing logs.</p>
</blockquote>

<h5 id="download">Download</h5>

<p><code>GET https://api.nextdns.io/profiles/:profile/logs/download</code></p>

<blockquote>
  <p>:bulb: By default, this endpoint will automatically redirect to the public URL of the file. Use <code>?redirect=0</code> to get a JSON containing that URL (useful when showing a loader while the file is being generated).</p>
</blockquote>

<h5 id="clear">Clear</h5>

<p><code>DELETE https://api.nextdns.io/profiles/:profile/logs</code></p>

<blockquote>
  <p>:bulb: Logs are automatically cleared when a profile is deleted.</p>
</blockquote>

<h2 id="miscellaneous">Miscellaneous</h2>

<h3 id="date-format-in-query-parameters"><code>Date</code> format in query parameters</h3>

<p>The API accepts different formats for dates in query string parameters:</p>
<ul>
  <li>ISO 8601 (e.g. <code>2021-03-15T16:34:05.203Z</code>)</li>
  <li>Unix timestamp in seconds (e.g. <code>1615826071</code>)</li>
  <li>Unix timestamp in milliseconds (e.g. <code>1615826071284</code>)</li>
  <li>Relative (e.g. <code>-6h</code>, <code>-1d</code>, <code>-3M</code> or <code>now</code>)</li>
  <li>Common date formats (e.g. <code>2021-03-15</code>)</li>
</ul>

<h3 id="timezone-format"><code>TimeZone</code> format</h3>

<p>The API only accepts time zone names from the <a href="https://www.iana.org/time-zones">Time Zone Database</a>.</p>

<p>In JavaScript, you can get this with:</p>
<div><div><pre><code><span>Intl</span><span>.</span><span>DateTimeFormat</span><span>().</span><span>resolvedOptions</span><span>().</span><span>timeZone</span>
<span>&gt;</span> <span>&#34;</span><span>Europe/Paris</span><span>&#34;</span>
</code></pre></div></div>


      
    </div></div>
  </body>
</html>
