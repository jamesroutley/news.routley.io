<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://bun.sh/blog/bun-v0.6.0">Original</a>
    <h1>Bun 0.6</h1>
    
    <div id="readability-page-1" class="page"><article><div><p>We&#39;re hiring <a href="https://bun.sh/careers">C/C++ and Zig engineers</a> to build the future of JavaScript! <a href="https://bun.sh/careers">See job listings →</a></p></div><p>This is the biggest release of Bun yet.</p><p>Bun now has a built-in JavaScript and TypeScript bundler and minifier. Use it to bundle frontend apps or bundle your code into a standalone executable.</p><p>We&#39;ve also been busy improving performance and fixing bugs as-per usual: <code>writeFile()</code> gets up to 20% faster on Linux, lots of bug fixes to Node.js compatiblity and Web API compatiblity, support for TypeScript 5.0 syntax, and various fixes to <code>bun install</code>.</p><h2 level="2" anchor-id="bun-s-new-javascript-bundler-minifier"><a name="bun-s-new-javascript-bundler-minifier"></a><a href="#bun-s-new-javascript-bundler-minifier">Bun&#39;s new JavaScript bundler &amp; minifier</a></h2><p>The focus of this release is Bun&#39;s new JavaScript bundler, but the bundler is just the beginning of a larger project. In the next couple months, we&#39;ll be announcing <code>Bun.App</code> — a &#34;super-API&#34; that stitches together Bun&#39;s native-speed bundler, HTTP server, and file system router into a cohesive whole.</p><p>It can be used using the <code>bun build</code> CLI command or the new <code>Bun.build()</code> JavaScript API.</p><div id="DwMlSUhUWX"><div><div><p>JavaScript</p><div><div><pre><code><span><span>Bun.</span><span>build</span><span>({</span></span>
<span><span>  entrypoints</span><span>:</span><span> [</span><span>&#34;</span><span>./src/index.tsx</span><span>&#34;</span><span>],</span></span>
<span><span>  outdir</span><span>:</span><span> </span><span>&#34;</span><span>./build</span><span>&#34;</span><span>,</span></span>
<span><span>  minify</span><span>:</span><span> </span><span>true</span><span>,</span></span>
<span><span>  </span><span>// ...</span></span>
<span><span>});</span></span>
<span></span></code></pre></div></div></div></div><div><div><p>CLI</p><div><div><pre><code><span><span>bun build ./src/index.tsx --outdir ./build --minify</span></span></code></pre></div></div></div></div></div><p>To learn more, check out our <a href="https://bun.sh/blog/bun-bundler">blog post</a> introducing the Bun bundler.</p><h2 level="2" anchor-id="standalone-executables"><a name="standalone-executables"></a><a href="#standalone-executables">Standalone executables</a></h2><p>You can now create standalone executables with <code>bun build</code>.</p><div><div><div><pre><code><span><span>bun build --compile ./foo.ts</span></span>
<span></span></code></pre></div></div></div><p>This lets you distribute your app as a single executable file, without requiring users to install Bun.</p><p>You can also minify it to improve startup performance for large apps:</p><div><div><div><pre><code><span><span>bun build </span><span>--</span><span>minify </span><span>--</span><span>compile .</span><span>/</span><span>three.ts</span></span>
<span><span>  [32ms]  minify  </span><span>-</span><span>123</span><span> </span><span>KB</span><span> (estimate)</span></span>
<span><span>  [50ms]  bundle  </span><span>456</span><span> modules</span></span>
<span><span> [107ms] compile  three</span></span>
<span></span></code></pre></div></div></div><p>This is powered by Bun&#39;s new JavaScript bundler and minifier.</p><h2 level="2" anchor-id="import-meta-main"><a name="import-meta-main"></a><a href="#import-meta-main"><code>import.meta.main</code></a></h2><p>You can now use <code>import.meta.main</code> to check if the current file is the entry point that started bun. This is useful for CLIs to determine if the current file is what started the app.</p><p>For example, if you have a file called <code>index.ts</code>:</p><div><p>index.ts</p><div><div><pre><code><span><span>console.</span><span>log</span><span>(</span><span>import</span><span>.meta.main);</span></span>
<span></span></code></pre></div></div></div><p>And you run it:</p><p>But if you import it:</p><p>And run it:</p><h2 level="2" anchor-id="improvements-to-bun-test"><a name="improvements-to-bun-test"></a><a href="#improvements-to-bun-test">Improvements to <code>bun test</code></a></h2><ul><li><code>bun test</code> now reports time taken to run tests</li></ul><div><blockquote><p lang="en" dir="ltr">in the next version of bun</p>— Jarred Sumner (@jarredsumner) <a href="https://twitter.com/jarredsumner/status/1656569942354042880?ref_src=twsrc%5Etfw">May 11, 2023</a></blockquote> </div><ul><li><p><code>describe.skip</code> has been implemented (thanks to <a href="https://twitter.com/_yogr">_yogr</a>)</p></li><li><p><code>expect().toBeEven()</code> and <code>expect().toBeOdd()</code> has been implemented (thanks to <a href="https://github.com/will-richards-ii">will-richards-ii</a>)</p></li></ul><h2 level="2" anchor-id="faster-fs-writefile-on-linux"><a name="faster-fs-writefile-on-linux"></a><a href="#faster-fs-writefile-on-linux">Faster <code>fs.writeFile</code> on Linux</a></h2><div><blockquote><p lang="en" dir="ltr">In the next version of Bun</p>— Jarred Sumner (@jarredsumner) <a href="https://twitter.com/jarredsumner/status/1651533306868137984?ref_src=twsrc%5Etfw">April 27, 2023</a></blockquote> </div><h2 level="2" anchor-id="transpiler-improvements"><a name="transpiler-improvements"></a><a href="#transpiler-improvements">Transpiler improvements</a></h2><p>This release also introduces many improvements to the transpiler. Here are some of the highlights:</p><ul><li>Parser support for <a href="https://devblogs.microsoft.com/typescript/announcing-typescript-5-0/">TypeScript 5.0</a>.</li><li>Parser support for <a href="https://github.com/tc39/proposal-import-assertions">import attributes</a>.</li><li>Some npm packages threw &#34;ReferenceError: Cannot access uninitialized variable&#34; errors on import due to a bug with cyclical imports in Bun&#39;s transpiler. This has been fixed.</li><li>Support for <code>// @jsx</code>, <code>// @jsxImportSource</code>, and <code>// @jsxFragment</code> comments.</li><li>Dead code elimination for unused global constructor function calls like <code>new Set()</code>.</li><li>String template literal concatenation like <code>foo${1}${&#34;2&#34;}${&#39;3&#39;}</code> -&gt; <code>foo123</code>.</li><li>Parser bugfixes for the deprecated ES5 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/with"><code>with</code> statement</a>.</li></ul><p>A big thanks to <a href="https://github.com/kzc">@kzc</a> for many helpful bug reports.</p><h2 level="2" anchor-id="node-js-compatibility"><a name="node-js-compatibility"></a><a href="#node-js-compatibility">Node.js compatibility</a></h2><ul><li><code>tls.Server</code> has basic support (previously, not implemented)</li><li><code>fs.promises.constants</code> is now exported correctly (previously, it was missing)</li><li><code>node:http</code>&#39;s server module now (correctly) accepts a <code>callback</code> argument</li><li><code>Timer.refresh()</code> now works as expected</li><li>Fixed <code>mkdtemp</code> and <code>mkdtempSync</code> errors</li></ul><h2 level="2" anchor-id="web-api-compatibility"><a name="web-api-compatibility"></a><a href="#web-api-compatibility">Web API compatibility</a></h2><ul><li><code>new Request(&#34;http://example.com&#34;, otherRequest).url</code> would previously return the url of <code>otherRequest</code> instead of <code>&#34;http://example.com&#34;</code>. This has been fixed.</li><li><code>Bun.file(path).lastModified</code> has been added, which is similar to the <a href="https://developer.mozilla.org/en-US/docs/Web/API/File/lastModified"><code>File</code> API&#39;s <code>lastModified</code> property</a></li><li>Supported <code>redirect: &#34;error&#34;</code> in <code>fetch()</code></li><li>Fixed <code>fetch.bind</code>, <code>fetch.call</code>, and <code>fetch.apply</code> not working</li></ul><h2 level="2" anchor-id="changelog"><a name="changelog"></a><a href="#changelog">Changelog</a></h2><h2 level="2" anchor-id="contributors"><a name="contributors"></a><a href="#contributors">Contributors</a></h2><p>And finally, thank you to all the contributors from the community that helped improve Bun this release: <a href="https://github.com/privatenumber">@privatenumber</a>, <a href="https://github.com/Lawlzer">@Lawlzer</a>, <a href="https://github.com/jakeboone02">@jakeboone02</a>, <a href="https://github.com/zhongweiy">@zhongweiy</a>, <a href="https://github.com/xHyroM">@xHyroM</a>, <a href="https://github.com/rmorey">@rmorey</a>, <a href="https://github.com/marktani">@marktani</a>, <a href="https://github.com/Kruithne">@Kruithne</a>, <a href="https://github.com/will-richards-ii">@will-richards-ii</a>, <a href="https://github.com/simon04">@simon04</a>, <a href="https://github.com/alexlamsl">@alexlamsl</a>, <a href="https://github.com/flakey5">@flakey5</a>, <a href="https://github.com/MaanuVazquez">@MaanuVazquez</a>, <a href="https://github.com/Plecra">@Plecra</a>, <a href="https://github.com/silversquirl">@silversquirl</a>, <a href="https://github.com/beeburrt">@beeburrt</a>, <a href="https://github.com/aquapi">@aquapi</a>, <a href="https://github.com/blackmann">@blackmann</a></p></article></div>
  </body>
</html>
