<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.richardekwonye.com/bezier-curves">Original</a>
    <h1>Bézier Curves and the logic behind them</h1>
    
    <div id="readability-page-1" class="page"><article><main><section></section><section><div><div><p>Bézier curves have been a recurring theme in my frontend engineering career. I have used them extensively in my work - in animations and SVG paths of illustrations and icons. However, I only recently took an interest in understanding the underlying logic that governs their behaviour. This demystified curve-related path commands for me and gave me a deeper understanding of web animations. In this article, I’ll share my interesting findings on Bézier curves.</p><p>In CSS animations, easing functions specify the rate of change of a property over time. There are 3 types of easing functions - Linear, Step and Cubic Bézier.</p></div><ul><li><div><h4>Linear Easing</h4><p>Linear is typically used to animate properties at a constant rate/speed.</p></div></li><li><div><h4>Step Easing</h4><p>Step is used to animate properties at equal time intervals.</p></div></li><li><div><h4>Cubic Bézier Easing</h4><p>Cubic Bézier is used to animate properties at variable rate/speed.</p></div></li></ul><p>Predefined CSS easings like <code>ease</code>,<!-- --> <code>ease-in</code>, <code>ease-out</code> and<!-- --> <code>ease-in-out</code> as well as commonly used smooth easings like ease in sine and ease in cubic are examples of cubic Bézier easing functions. Custom easings can also be generated with cubic Bézier easing functions.</p></div></section><section><div><div><p>Easing functions in CSS compute how an animation accelerates and decelerates. This generated animation path can be represented in an easing graph where the x-axis is animation progress and the y-axis is degree of change. The cubic Bézier easing function has fixed anchor points at <code>(0, 0)</code> <!-- -->and <code>(1, 1)</code> which correspond to the animation’s start and end points. The curve that defines the animation’s smooth acceleration and deceleration is set by the 2 control points in the<!-- --> <code>cubic-bezier(&lt;x1&gt;, &lt;y1&gt;, &lt;x2&gt;, &lt;y2&gt;)</code> <!-- -->function. By setting these control points to the same values as the fixed anchor points<!-- --> <code>cubic-bezier(0, 0, 1, 1)</code>, the cubic Bézier easing function can be used to generate a linear path animation.</p><p>Similar to CSS animations, visual elements have linear and curved paths. Several connected Bézier curves are used to add curves to simple and complex shapes found in fonts, icons, illustrations, data visualization charts, 3d objects and other visual elements. Whilst straight lines are defined by only start and end points, Bézier curves are defined by one or more handle points, in addition to a start and an end point. The degree or highest exponential of a Bézier curve equation determines the number of points. As their names would imply, quadratic Bézier curves have a degree of 2 (3 points) and cubic curves have a degree of 3 (4 points).</p></div><ul><li><div><h4>Quadratic Bézier</h4><p>Quadratic Bézier has 3 points - <code>p0</code>, <code>p1</code> and<!-- --> <code>p2</code>. <code>p0</code> and <code>p2</code> are anchor points, <code>p1</code> is the only control point.</p></div></li><li><div><h4>Cubic Bézier</h4><p>Cubic Bézier has 4 points - <code>p0</code>, <code>p1</code>,<!-- --> <code>p2</code> and <code>p3</code>. <code>p0</code> and<!-- --> <code>p3</code> are anchor points, <code>p1</code> and<!-- --> <code>p2</code> are control points.</p></div></li></ul><p>In connected Bézier curves, there are often two handles that extend out of a control point. These handles give precise control of the curve’s direction.</p></div></section><div><div><h4>Bézier Handles</h4><p>The angle and length of Bézier handles can be mirrored, asymmetric, or even disconnected to define the desired shape. Each of these modes results in a different behaviour for the connected points.</p><p>Design tools such as Photoshop and Figma offer the flexibility to switch between these handle modes, allowing users to quickly create more complex shapes and patterns.</p></div><div><p>When mirrored, the angle and length of the handles are always symmetric allowing the connected curves to remain smooth in most cases.</p></div></div><section><div><p>SVG paths and HTML canvas can be used to draw smooth curves on the web. They both have quadratic and cubic Bézier curve commands and functions. For the rest of this article, I’ll be focusing on cubic Bézier curves in SVG.</p><p>The SVG <code>path</code> element is used to create complex shapes. A <code>path</code> is defined by its <code>d</code> <!-- -->attribute which contains commands that instruct how it’s drawn in the viewport. Curved paths can be drawn with the<!-- --> <code>Q</code> (quadratic) or the more complex <code>C</code> <!-- -->(cubic) command. The cubic command<!-- --> <code>C x1 y1, x2 y2, x y</code> takes 3 points -<!-- --> <code>p1</code>, <code>p2</code> and <code>p3</code>.<!-- --> <code>p0</code> is always the end point of the previous command in the <code>path</code>.</p></div></section><div><div><h4>viewport of 200px x 200px</h4></div><div><h4>SVG viewport</h4><p>The SVG viewport, set by the <code>width</code> and<!-- --> <code>height</code> attributes, defines the bounds of an SVG.</p><p>In a viewport of <code>200</code> x <code>200</code>, a path with<!-- --> <code>d</code> attribute -<!-- --> <code>M <span></span> C<!-- --> <span></span>,<!-- --> <span></span>,<!-- --> <span></span></code> <!-- -->generates a curve that starts at<!-- --> <code>(<span></span>)</code> <!-- -->and ends at<!-- --> <code>(<span></span>)</code>.</p><p>Shapes outside the viewport are usually hidden but can be exposed by setting the SVG overflow to visible.</p></div></div><section><div><p>Complex vectors are created with a combination of paths and other SVG elements. Individual paths often contain several connected cubic Bézier curves. This is common for icons, logos and illusrations.</p><p>While trying to understand how points along Bézier curve paths are derived, I learnt that the Bézier curve - which is named after a French engineer, Pierre Bézier - was used in the 1960s to design curves for the bodywork of Renault cars. There are several methods of obtaining the points in a Bézier curve, but my favourite is De Casteljau’s Algorithm, briefly explained below.</p><p>Let’s start by deriving points on straight lines between the start point <code>p0</code> and end point <code>p1</code>. Each point has corresponding x-axis and y-axis values and the progression of the line can be denoted by <code>t</code>, a value between <code>0</code> (start) and <code>1</code> (end). We get the coordinates of a point along the straight line at any given value of <code>t</code> using the linear interpolation function -</p><p><code>lerp(p0, p1, t) = p0 + (p1 - p0) * t</code></p><p>For a line between <code>p0</code> at <code>(0, 0)</code> and<!-- --> <code>p1</code> at <code>(0, 30)</code>, the midpoint i.e<!-- --> <code>t = 0.5</code> is <code>(0, 15)</code>, which is a result of <code>0 + (0 - 0) * 0.5 = 0</code> and<!-- --> <code>0 + (30 - 0) * 0.5 = 15</code>.</p><div><p>Just like straight lines, Bézier curves’ progress can be defined by<!-- --> <code>t</code> . Using De Casteljau’s Algorithm, we can get the cubic Bézier curve path’s point coordinates at <code>t</code>.</p><p><code>p4 = lerp(p0, p1, t)</code><code>p5 = lerp(p1, p2, t)</code><code>p6 = lerp(p2, p3, t)</code><code>p7 = lerp(p4, p5, t)</code><code>p8 = lerp(p5, p6, t)</code><code>bt = lerp(p7, p8, t)</code></p></div><p>We do this by performing a nested linear interpolation on the linear interpolation function outputs of the cubic Bézier curve control and anchor points.</p></div></section><div><div><div><p><span>0</span><span>400</span><span>800</span></p><p><span>0</span><span>400</span></p><svg width="800" height="400" viewBox="0 0 800 400" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="" stroke="var(--black)" fill="none" stroke-width="3" opacity="0.3"></path><path d="" stroke="var(--black)" fill="none" stroke-width="3"></path><line x1="0" y1="0" x2="0" y2="0" stroke="var(--black)" stroke-width="2" stroke-dasharray="1 6" stroke-linecap="round" opacity="0.4"></line><line stroke="var(--dark-red)" stroke-width="2" opacity="0"></line><line x1="0" y1="0" x2="0" y2="0" stroke="var(--black)" stroke-width="2" stroke-dasharray="1 6" stroke-linecap="round" opacity="0.4"></line><line stroke="var(--dark-red)" stroke-width="2" opacity="0"></line><line x1="0" y1="0" x2="0" y2="0" stroke="var(--black)" stroke-width="2" stroke-dasharray="1 6" stroke-linecap="round" opacity="0.4"></line><line stroke="var(--dark-red)" stroke-width="2" opacity="0"></line><line x1="0" y1="0" x2="0" y2="0" stroke="var(--black)" stroke-width="2" stroke-dasharray="1 6" stroke-linecap="round" opacity="0.4"></line><line x1="0" y1="0" x2="0" y2="0" stroke="var(--dark-red)" stroke-width="2" opacity="0"></line><line x1="0" y1="0" x2="0" y2="0" stroke="var(--dark-red)" stroke-width="3"></line><line x1="0" y1="0" x2="0" y2="0" stroke="var(--dark-red)" stroke-width="3"></line><rect x="0" y="0" width="12" height="12" rx="6" fill="var(--white)" stroke="var(--black)" stroke-width="3" style="transform:translate(-6px, -6px)"></rect><rect x="0" y="0" width="12" height="12" rx="6" fill="var(--white)" stroke="var(--black)" stroke-width="3" style="transform:translate(-6px, -6px)"></rect><rect x="0" y="0" width="12" height="12" rx="6" fill="var(--white)" stroke="var(--black)" stroke-width="3" style="transform:translate(-6px, -6px)"></rect><rect x="0" y="0" width="12" height="12" rx="6" fill="var(--white)" stroke="var(--black)" stroke-width="3" style="transform:translate(-6px, -6px)"></rect><rect x="0" y="0" width="12" height="12" rx="6" fill="var(--white)" stroke="var(--black)" stroke-width="3" style="transform:translate(-6px, -6px)"></rect><rect x="0" y="0" width="12" height="12" rx="6" fill="var(--black)" stroke="var(--black)" stroke-width="3" style="transform:translate(-6px, -6px)"></rect><rect x="0" y="0" width="14" height="14" rx="7" fill="var(--dark-red)" stroke="var(--dark-red)" stroke-width="0" style="transform:translate(-7px, -7px)"></rect><rect x="0" y="0" width="14" height="14" rx="7" fill="var(--dark-red)" stroke="var(--dark-red)" stroke-width="0" style="transform:translate(-7px, -7px)"></rect><rect x="0" y="0" width="18" height="18" rx="9" fill="var(--white)" stroke="var(--dark-red)" stroke-width="3" style="transform:translate(-9px, -9px)"></rect><rect x="0" y="0" width="18" height="18" rx="9" fill="var(--white)" stroke="var(--dark-red)" stroke-width="3" style="transform:translate(-9px, -9px)"></rect></svg><p><span><code>p0</code> is the start point of the curve.</span><span><code>p1</code> is the first control point of the curve.</span><span><code>p2</code> is the second control point of the curve.</span><span><code>p3</code> is the end point of the curve.</span><span><code>p4</code> is the linear interpolation between<!-- --> <code>p0</code> and <code>p1</code>.</span><span><code>p5</code> is the linear interpolation between<!-- --> <code>p1</code> and <code>p2</code>.</span><span><code>p6</code> is the linear interpolation between<!-- --> <code>p2</code> and <code>p3</code>.</span><span><code>p7</code> is the linear interpolation between<!-- --> <code>p4</code> and <code>p5</code>.</span><span><code>p8</code> is the linear interpolation between<!-- --> <code>p5</code> and <code>p6</code>.</span><span><code>bt</code> is the point on the curve at a given progress. This this the final linear interpolation between <code>p7</code> <!-- -->and <code>p8</code>.</span></p></div></div></div><section><p>Learning about the logic behind Bézier curves led me to experiment more with SVG paths and cubic Bézier easing functions which I applied in building interactive components for this article. This knowledge has unlocked creative possibilities for me, and I hope this inspires you to create your next fun piece.</p></section></main></article></div>
  </body>
</html>
