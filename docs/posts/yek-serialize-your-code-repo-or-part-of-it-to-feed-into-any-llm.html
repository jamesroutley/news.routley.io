<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/bodo-run/yek">Original</a>
    <h1>Yek: Serialize your code repo (or part of it) to feed into any LLM</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">A <a href="#performance">fast</a> Rust based tool to read text-based files in a repository or directory, chunk them, and serialize them for LLM consumption. By default, the tool:</p>
<ul dir="auto">
<li>Uses <code>.gitignore</code> rules to skip unwanted files.</li>
<li>Uses the Git history to infer what files are important.</li>
<li>Infers additional ignore patterns (binary, large, etc.).</li>
<li>Splits content into chunks based on either approximate &#34;token&#34; count or byte size.</li>
<li>Automatically detects if output is being piped and streams content instead of writing to files.</li>
<li>Supports processing multiple directories in a single command.</li>
<li>Configurable via a <code>yek.toml</code> file.</li>
</ul>
<p dir="auto">Yek (<a href="https://fa.wikipedia.org/wiki/%DB%B1" rel="nofollow">يک</a>) means &#34;One&#34; in Farsi/Persian.</p>
<p dir="auto">Consider having a simple repo like this:</p>
<div data-snippet-clipboard-copy-content=".
├── README.md
├── src
│   ├── main.rs
│   └── utils.rs
└── tests
    └── test.rs"><pre><code>.
├── README.md
├── src
│   ├── main.rs
│   └── utils.rs
└── tests
    └── test.rs
</code></pre></div>
<p dir="auto">Running <code>yek</code> in this directory will produce a single file and write it to the temp directory with the following content:</p>
<div dir="auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt;&gt; README.md
... content of README.md ...
&gt;&gt;&gt;&gt; tests/test.rs
... content of tests/test.rs ...
&gt;&gt;&gt;&gt; src/utils.rs
... content of src/utils.rs ...
&gt;&gt;&gt;&gt; src/main.rs
... rest of the file ..."><pre>&gt;&gt;&gt;&gt; README.md
... content of README.md ...
&gt;&gt;&gt;&gt; tests/test.rs
... content of tests/test.rs ...
&gt;&gt;&gt;&gt; src/utils.rs
... content of src/utils.rs ...
&gt;&gt;&gt;&gt; src/main.rs
... rest of the file ...</pre></div>
<blockquote>
<p dir="auto"><code>yek</code> will prioritize more important files to come last in the output. This is useful for LLM consumption.</p>
</blockquote>

<p dir="auto">For Unix-like systems (macOS, Linux):</p>

<div dir="auto" data-snippet-clipboard-copy-content="curl -fsSL https://bodo.run/yek.sh | bash"><pre>curl -fsSL https://bodo.run/yek.sh <span>|</span> bash</pre></div>

<p dir="auto">For Windows (PowerShell):</p>

<div dir="auto" data-snippet-clipboard-copy-content="irm https://bodo.run/yek.ps1 | iex"><pre>irm https:<span>//</span>bodo.run<span>/</span>yek.ps1 <span>|</span> iex</pre></div>


<ol dir="auto">
<li><a href="https://www.rust-lang.org/tools/install" rel="nofollow">Install Rust</a>.</li>
<li>Clone this repository.</li>
<li>Run <code>make macos</code> or <code>make linux</code> to build for your platform (both run <code>cargo build --release</code>).</li>
<li>Add to your PATH:</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="export PATH=$(pwd)/target/release:$PATH"><pre><span>export</span> PATH=<span><span>$(</span>pwd<span>)</span></span>/target/release:<span>$PATH</span></pre></div>

<p dir="auto"><code>yek</code> has sensible defaults, you can simply run <code>yek</code> in a directory to serialize the entire repository. It will serialize all files in the repository into chunks of 10MB by default. The file will be written to the temp directory and file path will be printed to the console.</p>

<p dir="auto">Process current directory and write to temp directory:</p>

<p dir="auto">Pipe output to clipboard (macOS):</p>

<p dir="auto">Cap the max size to 128K tokens and only process the <code>src</code> directory:</p>
<div dir="auto" data-snippet-clipboard-copy-content="yek --max-size 128K --tokens src/"><pre>yek --max-size 128K --tokens src/</pre></div>
<p dir="auto">Cap the max size to 100KB and only process the <code>src</code> directory, writing to a specific directory:</p>
<div dir="auto" data-snippet-clipboard-copy-content="yek --max-size 100KB --output-dir /tmp/yek src/"><pre>yek --max-size 100KB --output-dir /tmp/yek src/</pre></div>
<p dir="auto">Process multiple directories:</p>

<p dir="auto">Process multiple repositories:</p>
<div dir="auto" data-snippet-clipboard-copy-content="yek ~/code/project1 ~/code/project2"><pre>yek <span>~</span>/code/project1 <span>~</span>/code/project2</pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="yek --help

Repository content chunker and serializer for LLM consumption

Usage: yek [OPTIONS] [directories]...

Arguments:
  [directories]...  Directories to process [default: .]

Options:
      --max-size &lt;max-size&gt;      Maximum size per chunk (e.g. &#39;10MB&#39;, &#39;128KB&#39;, &#39;1GB&#39;) [default: 10MB]
      --tokens                   Count size in tokens instead of bytes
      --debug                    Enable debug output
      --output-dir &lt;output-dir&gt;  Output directory for chunks
  -h, --help                     Print help
  -V, --version                  Print version"><pre>yek --help

Repository content chunker and serializer <span>for</span> LLM consumption

Usage: yek [OPTIONS] [directories]...

Arguments:
  [directories]...  Directories to process [default: .]

Options:
      --max-size <span>&lt;</span>max-size<span>&gt;</span>      Maximum size per chunk (e.g. <span><span>&#39;</span>10MB<span>&#39;</span></span>, <span><span>&#39;</span>128KB<span>&#39;</span></span>, <span><span>&#39;</span>1GB<span>&#39;</span></span>) [default: 10MB]
      --tokens                   Count size <span>in</span> tokens instead of bytes
      --debug                    Enable debug output
      --output-dir <span>&lt;</span>output-dir<span>&gt;</span>  Output directory <span>for</span> chunks
  -h, --help                     Print <span>help</span>
  -V, --version                  Print version</pre></div>

<p dir="auto">You can place a file called <code>yek.toml</code> at your project root or pass a custom path via <code>--config</code>. The configuration file allows you to:</p>
<ol dir="auto">
<li>Add custom ignore patterns</li>
<li>Define file priority rules for processing order</li>
<li>Add additional binary file extensions to ignore (extends the built-in list)</li>
<li>Configure Git-based priority boost</li>
</ol>

<p dir="auto">This is optional, you can configure the <code>yek.toml</code> file at the root of your project.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Add patterns to ignore (in addition to .gitignore)
[ignore_patterns]
patterns = [
  &#34;node_modules/&#34;,
  &#34;\\.next/&#34;,
  &#34;my_custom_folder/&#34;
]

# Configure Git-based priority boost (optional)
git_boost_max = 50  # Maximum score boost based on Git history (default: 100)

# Define priority rules for processing order
# Higher scores are processed first
[[priority_rules]]
score = 100
patterns = [&#34;^src/lib/&#34;]

[[priority_rules]]
score = 90
patterns = [&#34;^src/&#34;]

[[priority_rules]]
score = 80
patterns = [&#34;^docs/&#34;]

# Add additional binary file extensions to ignore
# These extend the built-in list (.jpg, .png, .exe, etc.)
binary_extensions = [
  &#34;.blend&#34;,  # Blender files
  &#34;.fbx&#34;,    # 3D model files
  &#34;.max&#34;,    # 3ds Max files
  &#34;.psd&#34;,    # Photoshop files
]"><pre><span><span>#</span> Add patterns to ignore (in addition to .gitignore)</span>
[<span>ignore_patterns</span>]
<span>patterns</span> = [
  <span><span>&#34;</span>node_modules/<span>&#34;</span></span>,
  <span><span>&#34;</span><span>\\</span>.next/<span>&#34;</span></span>,
  <span><span>&#34;</span>my_custom_folder/<span>&#34;</span></span>
]

<span><span>#</span> Configure Git-based priority boost (optional)</span>
<span>git_boost_max</span> = <span>50</span>  <span><span>#</span> Maximum score boost based on Git history (default: 100)</span>

<span><span>#</span> Define priority rules for processing order</span>
<span><span>#</span> Higher scores are processed first</span>
[[<span>priority_rules</span>]]
<span>score</span> = <span>100</span>
<span>patterns</span> = [<span><span>&#34;</span>^src/lib/<span>&#34;</span></span>]

[[<span>priority_rules</span>]]
<span>score</span> = <span>90</span>
<span>patterns</span> = [<span><span>&#34;</span>^src/<span>&#34;</span></span>]

[[<span>priority_rules</span>]]
<span>score</span> = <span>80</span>
<span>patterns</span> = [<span><span>&#34;</span>^docs/<span>&#34;</span></span>]

<span><span>#</span> Add additional binary file extensions to ignore</span>
<span><span>#</span> These extend the built-in list (.jpg, .png, .exe, etc.)</span>
<span>binary_extensions</span> = [
  <span><span>&#34;</span>.blend<span>&#34;</span></span>,  <span><span>#</span> Blender files</span>
  <span><span>&#34;</span>.fbx<span>&#34;</span></span>,    <span><span>#</span> 3D model files</span>
  <span><span>&#34;</span>.max<span>&#34;</span></span>,    <span><span>#</span> 3ds Max files</span>
  <span><span>&#34;</span>.psd<span>&#34;</span></span>,    <span><span>#</span> Photoshop files</span>
]</pre></div>
<p dir="auto">All configuration keys are optional. By default:</p>
<ul dir="auto">
<li>No extra ignore patterns</li>
<li>All files have equal priority (score: 1)</li>
<li>Git-based priority boost maximum is 100</li>
<li>Common binary file extensions are ignored (.jpg, .png, .exe, etc. - see source for full list)</li>
</ul>

<p dir="auto"><code>yek</code> is fast. It&#39;s written in Rust and does many things in parallel to speed up processing.</p>
<p dir="auto">Here is a benchmark comparing it to <a href="https://github.com/jxnl/repomix">Repomix</a> serializing the <a href="https://github.com/vercel/next.js">Next.js</a> project:</p>
<div dir="auto" data-snippet-clipboard-copy-content="time yek
Executed in    5.19 secs    fish           external
   usr time    2.85 secs   54.00 micros    2.85 secs
   sys time    6.31 secs  629.00 micros    6.31 secs"><pre><span>time</span> yek
Executed <span>in</span>    5.19 secs    fish           external
   usr <span>time</span>    2.85 secs   54.00 micros    2.85 secs
   sys <span>time</span>    6.31 secs  629.00 micros    6.31 secs</pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="time repomix
Executed in   22.24 mins    fish           external
   usr time   21.99 mins    0.18 millis   21.99 mins
   sys time    0.23 mins    1.72 millis    0.23 mins"><pre><span>time</span> repomix
Executed <span>in</span>   22.24 mins    fish           external
   usr <span>time</span>   21.99 mins    0.18 millis   21.99 mins
   sys <span>time</span>    0.23 mins    1.72 millis    0.23 mins</pre></div>
<p dir="auto"><code>yek</code> is <strong>230x faster</strong> than <code>repomix</code>.</p>

<ul>
<li> Be smarter about finding out test files</li>
</ul>

<p dir="auto">MIT</p>
</article></div></div>
  </body>
</html>
