<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/leswright1977/PySpectrometer">Original</a>
    <h1>DIY Raspberry Pi Spectrometer Guide</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
          <article itemprop="text">
<p dir="auto"><em><strong>Update 2021-10-30 The software works well on the new Raspberry Pi Zero 2 W!</strong></em></p>
<p dir="auto"><em><strong>V3 is now released that can export CSV, and has a peak hold feature! Scroll to bottom for changes!</strong></em></p>
<p dir="auto"><em><strong>This program, hardware design, and associated information is Open Source (see Licence), but if you have gotten value from these kinds of projects and think they are worth something, please consider donating:</strong></em> <a href="https://paypal.me/leslaboratory?locale.x=en_GB" rel="nofollow">https://paypal.me/leslaboratory?locale.x=en_GB</a></p>
<p dir="auto"><em><strong>Raspberry Pi Spectrometer</strong></em></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/leswright1977/PySpectrometer/blob/main/media/fluorescent.png"><img src="https://github.com/leswright1977/PySpectrometer/raw/main/media/fluorescent.png" alt="Screenshot"/></a></p>
<p dir="auto">The PySpectrometer is a Python (OpenCV and Tkinter) implementation of an optical spectrometer. The motivation beind this project was to build a tool that could measure the wavelength of home-made Dye Lasers and perform some fluorescence spectroscopy. Most importantly at a cost that is in reach of everyone!</p>
<p dir="auto">The hardware is simple and widely avilable and so should be easily to duplicate without critical alignment or difficult construction. The hard work was developing the software.</p>
<p dir="auto">Resolution/accuracy seems to be +/- a couple of nm or so, pretty reasonable for the price of the hardware, especially when you consider the price of commercial components such as the Hamamatsu C12880MA breakout boards which run north of 300 bucks, and has a resolution of 15nm. Of course, this build is physically much larger, but not enormous!</p>
<p dir="auto">Visit my Youtube Channel at: <a href="https://www.youtube.com/leslaboratory" rel="nofollow">https://www.youtube.com/leslaboratory</a></p>
<p dir="auto">Videos of this project are here:</p>
<p dir="auto"><a href="https://www.youtube.com/watch?v=T_goVwwxKE4" title="Raspberry pi Spectrometer" rel="nofollow"><img src="https://camo.githubusercontent.com/3512fe2e12a9d6c6ff72cb9c406b295138c69b3260ba9435b42bc8cb4fa4f21e/68747470733a2f2f696d672e796f75747562652e636f6d2f76692f545f676f567777784b45342f302e6a7067" alt="Raspberry Pi Spectrometer" data-canonical-src="https://img.youtube.com/vi/T_goVwwxKE4/0.jpg"/></a></p>
<p dir="auto"><a href="https://www.youtube.com/watch?v=dm3woVQp8Xc" title="Software Update" rel="nofollow"><img src="https://camo.githubusercontent.com/094572327859e2c9909222970f6679383f7f245b3035be4b01ac41fde528a6d4/68747470733a2f2f696d672e796f75747562652e636f6d2f76692f646d33776f5651703858632f302e6a7067" alt="Software Update" data-canonical-src="https://img.youtube.com/vi/dm3woVQp8Xc/0.jpg"/></a></p>
<p dir="auto"><a href="https://www.youtube.com/watch?v=Tw3HJEhE2dI" title="MINIATURE Raspberry pi Spectrometer" rel="nofollow"><img src="https://camo.githubusercontent.com/a98a8f6d74e91d26bb5db5e2e331bcb451cd3187842a60e4f3c5211477856833/68747470733a2f2f696d672e796f75747562652e636f6d2f76692f547733484a4568453264492f302e6a7067" alt="MINIATURE Raspberry Pi Spectrometer" data-canonical-src="https://img.youtube.com/vi/Tw3HJEhE2dI/0.jpg"/></a></p>
<p dir="auto"><em><strong>Hardware</strong></em></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/leswright1977/PySpectrometer/blob/main/media/scope.png"><img src="https://github.com/leswright1977/PySpectrometer/raw/main/media/scope.png" alt="Screenshot"/></a></p>
<p dir="auto">The hardware consists of:</p>
<p dir="auto"><em><strong>A commercial Diffraction grating Spectroscope</strong></em>
<a href="https://www.patonhawksley.com/product-page/benchtop-spectroscope" rel="nofollow">https://www.patonhawksley.com/product-page/benchtop-spectroscope</a></p>
<p dir="auto"><em><strong>A Raspberry Pi Camera (with an M12 Thread)</strong></em>
<a href="https://thepihut.com/products/raspberry-pi-camera-adjustable-focus-5mp" rel="nofollow">https://thepihut.com/products/raspberry-pi-camera-adjustable-focus-5mp</a></p>
<p dir="auto"><em><strong>A CCTV Lens with Zoom (M12 Thread)</strong></em>
(Search eBay for F1.6 zoom lens)</p>
<p dir="auto">Everything is assembled on an aluminium base (note the Camera is not cooled, the heatsink was a conveniently sized piece of aluminium.)</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/leswright1977/PySpectrometer/blob/main/media/parts.png"><img src="https://github.com/leswright1977/PySpectrometer/raw/main/media/parts.png" alt="Screenshot"/></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/leswright1977/PySpectrometer/blob/main/media/pi.png"><img src="https://github.com/leswright1977/PySpectrometer/raw/main/media/pi.png" alt="Screenshot"/></a></p>
<p dir="auto"><em><strong>For the MINIATURE version the hardware is:</strong></em></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/leswright1977/PySpectrometer/blob/main/media/minispect.png"><img src="https://github.com/leswright1977/PySpectrometer/raw/main/media/minispect.png" alt="Screenshot"/></a></p>
<p dir="auto"><em><strong>A commercial Diffraction grating Pocket Spectroscope:</strong></em> <a href="https://www.patonhawksley.com/product-page/pocket-spectroscope" rel="nofollow">https://www.patonhawksley.com/product-page/pocket-spectroscope</a></p>
<p dir="auto"><em><strong>A Raspberry Pi Camera (with an M12 Thread):</strong></em> <a href="https://thepihut.com/products/raspberry-pi-camera-adjustable-focus-5mp" rel="nofollow">https://thepihut.com/products/raspberry-pi-camera-adjustable-focus-5mp</a></p>
<p dir="auto"><em><strong>M12x0.5 F2.0 Fixed 12mm Focal length Lens:</strong></em> <a href="https://www.ebay.co.uk/itm/114551239930" rel="nofollow">https://www.ebay.co.uk/itm/114551239930</a></p>
<p dir="auto"><em><strong>Installation</strong></em></p>
<p dir="auto">Developed and tested on: 2021-01-11-raspios-buster-armhf-full.img for anything else your milage may vary!</p>
<p dir="auto">Rasberry pi 4 and PiCamera Recommended.</p>
<p dir="auto">(Note the software uses the Linux Video Driver, not the Picam Python module. As a consequence it will work with some webcams on probably any Linux box (Tested on Debian with a random webcam))</p>
<p dir="auto">First attach the Picam, and enable it with raspi-config</p>
<p dir="auto">Install the dependencies:</p>
<p dir="auto">sudo apt-get install python3-opencv</p>
<p dir="auto">sudo apt-get install python-dev libatlas-base-dev</p>
<p dir="auto">pip3 install scipy</p>
<p dir="auto">pip3 install peakutils</p>
<p dir="auto">Run the program with: python3 pyspectrometer-v1.py</p>
<p dir="auto">To calibrate, shine 2 Lasers of known wavelength (He-Ne, Argon or DPSS recommended! (Diode Lasers can have wavelengths that can be +/- several nm!)) at a piece of card in front of the spectrometer.</p>
<p dir="auto">Click the two peaks on the graph, and in each of the boxes enter the corresponding wavelength. Then hit &#39;Calibrate&#39;. In this example I have Calibrated with 532nm (DPSS) and 633nm He-Ne. The Scale and lablels will then adjust to match your values.</p>
<p dir="auto">For good accuracy make sure your wavelengths are quite far apart, ideally one at the red end and one at the blue end</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/leswright1977/PySpectrometer/blob/main/media/calib.png"><img src="https://github.com/leswright1977/PySpectrometer/raw/main/media/calib.png" alt="Screenshot"/></a></p>
<p dir="auto">Alternatively, you may use a Fluorescent tube (or any other gas discharge tube) in front of the Spectrometer, you will have to research the wavelengths of the emission lines (Mercury for Fluorescent tubes, Neon, Argon, Xenon for other types) That will be an excercise for you!</p>
<p dir="auto"><em><strong>Other settings</strong></em></p>
<p dir="auto">&#34;Label Peak width&#34; and &#34;Label threshold&#34; set the width of a peak to label, and the level to consider it a peak respectively. The Defaults are fine, but if you find the graph too cluttered, you can play with these values.</p>
<p dir="auto">Snapshot, takes a snapshot of the graph section like this:
<a target="_blank" rel="noopener noreferrer" href="https://github.com/leswright1977/PySpectrometer/blob/main/media/spectrum-09-04-2021-15:19:27.jpg"><img src="https://github.com/leswright1977/PySpectrometer/raw/main/media/spectrum-09-04-2021-15:19:27.jpg" alt="Screenshot"/></a></p>
<p dir="auto"><em><strong>Example Spectra</strong></em></p>
<p dir="auto">Here is an example of the spectrum of a fluorescent bulb. The peaks at 405,435,545,650 are Mercury, Europium (one of the lamp phosphors) is visible at ~610nm.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/leswright1977/PySpectrometer/blob/main/media/fluorescent.png"><img src="https://github.com/leswright1977/PySpectrometer/raw/main/media/fluorescent.png" alt="Screenshot"/></a></p>
<p dir="auto">Measuring the wavelength of a cheap red laser pointer (661nm)</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/leswright1977/PySpectrometer/blob/main/media/pointer.png"><img src="https://github.com/leswright1977/PySpectrometer/raw/main/media/pointer.png" alt="Screenshot"/></a></p>
<p dir="auto">Measuring the wavelength of a cheap violet Laser pointer, note the strong fluorescence from the paper! Paper is optically brightened with a fluorescent dyes, most likely Coumarin.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/leswright1977/PySpectrometer/blob/main/media/uv.png"><img src="https://github.com/leswright1977/PySpectrometer/raw/main/media/uv.png" alt="Screenshot"/></a></p>
<p dir="auto">The spectrum of Daylight (pointed out of the window at a blue sky)</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/leswright1977/PySpectrometer/blob/main/media/daylight.png"><img src="https://github.com/leswright1977/PySpectrometer/raw/main/media/daylight.png" alt="Screenshot"/></a></p>
<p dir="auto">The spectrum of of a Helium-Neon Discharge.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/leswright1977/PySpectrometer/blob/main/media/henespectrum.png"><img src="https://github.com/leswright1977/PySpectrometer/raw/main/media/henespectrum.png" alt="Screenshot"/></a></p>
<p dir="auto">Minimum smoothing applied:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/leswright1977/PySpectrometer/blob/main/media/maxres.png"><img src="https://github.com/leswright1977/PySpectrometer/raw/main/media/maxres.png" alt="Screenshot"/></a></p>
<p dir="auto">Maximum smoothing applied:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/leswright1977/PySpectrometer/blob/main/media/maxsmooth.png"><img src="https://github.com/leswright1977/PySpectrometer/raw/main/media/maxsmooth.png" alt="Screenshot"/></a></p>
<p dir="auto"><em><strong>Version 3</strong></em></p>
<p dir="auto">Version 3 has a Peak hold feature to detect transient events, such as a Laser pulse, or a Camera Flash!</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/leswright1977/PySpectrometer/blob/main/media/v3.png"><img src="https://github.com/leswright1977/PySpectrometer/raw/main/media/v3.png" alt="Screenshot"/></a></p>
<p dir="auto">Pressing the snapshot button also dumps data to a CSV file. This is far more accurate data than the graph window, and can be imported into OpenOffice on the Pi.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/leswright1977/PySpectrometer/blob/main/media/csv.png"><img src="https://github.com/leswright1977/PySpectrometer/raw/main/media/csv.png" alt="Screenshot"/></a></p>
<p dir="auto"><em><strong>Note: Filenames have colons in them. Unix like OS&#39;s e.g. Linux have no issue, but you will find that you have to rename these if you want to import to Windows!</strong></em></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/leswright1977/PySpectrometer/blob/main/media/tuning-curves.png"><img src="https://github.com/leswright1977/PySpectrometer/raw/main/media/tuning-curves.png" alt="Screenshot"/></a></p>
<p dir="auto">Tuning curves obtined from a home-made pulsed Dye Laser.
From Left to right: Coumarin-1,Rhodamine 6G, Rhodmine B.</p>
<p dir="auto"><em><strong>TODO</strong></em>
Add in a 3 wavelength Calibration functionality to counteract any nonlinearity caused by misalignment of the camera and &#39;scope. Non Linearity can be solved by rotating the camera on its axis, but it would be nice to just fire and forget.</p>
</article>
        </div></div>
  </body>
</html>
