<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/adisbladis/kakapo">Original</a>
    <h1>Kākāpō – A web bundler for Nix strings with context</h1>
    
    <div id="readability-page-1" class="page"><div><div><div><h2>Repository files navigation</h2><nav aria-label="Repository files"><ul role="list"><li><a href="#" aria-current="page"><span data-component="icon"><svg aria-hidden="true" focusable="false" role="img" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible"><path d="M0 1.75A.75.75 0 0 1 .75 1h4.253c1.227 0 2.317.59 3 1.501A3.743 3.743 0 0 1 11.006 1h4.245a.75.75 0 0 1 .75.75v10.5a.75.75 0 0 1-.75.75h-4.507a2.25 2.25 0 0 0-1.591.659l-.622.621a.75.75 0 0 1-1.06 0l-.622-.621A2.25 2.25 0 0 0 5.258 13H.75a.75.75 0 0 1-.75-.75Zm7.251 10.324.004-5.073-.002-2.253A2.25 2.25 0 0 0 5.003 2.5H1.5v9h3.757a3.75 3.75 0 0 1 1.994.574ZM8.755 4.75l-.004 7.322a3.752 3.752 0 0 1 1.992-.572H14.5v-9h-3.495a2.25 2.25 0 0 0-2.25 2.25Z"></path></svg></span><span data-component="text" data-content="README">README</span></a></li></ul></nav></div><div data-hpc="true"><article itemprop="text">
<p dir="auto">A web bundler for Nix strings with context.</p>
<p dir="auto">Named after the <a href="https://www.doc.govt.nz/nature/native-animals/birds/birds-a-z/kakapo/" rel="nofollow">flightless parrot</a>.</p>

<p dir="auto">Because I&#39;m unwell and and think cursed hacks like <a href="https://cs.tvl.fyi/depot/-/blob/users/sterni/nix/html/README.md" rel="nofollow">//users/sterni/nix/html/README.md</a> are cool and would like to make it&#39;s usage more practical.</p>

<ul dir="auto">
<li>Writing a bundle from a derivation</li>
</ul>
<div dir="auto" data-snippet-clipboard-copy-content="let
  indexHTML = writeText &#34;index.html&#34; &#39;&#39;
    &lt;h1&gt;Welcome!&lt;/h1&gt;
    &lt;img src=&#34;${./banner.jpg}&#34; /&gt;
  &#39;&#39;;

  webRoot = runCommand &#34;webroot&#34; { } &#39;&#39;
    mkdir $out
    cp ${indexHTML} $out/index.html
  &#39;&#39;;
in kakapo.makeBundle webRoot;"><pre><span>let</span>
  <span><span>indexHTML</span></span> <span>=</span> <span><span>writeText</span></span> <span>&#34;index.html&#34;</span> <span>&#39;&#39;</span>
<span>    &lt;h1&gt;Welcome!&lt;/h1&gt;</span>
<span>    &lt;img src=&#34;<span><span>${</span><span>./banner.jpg</span><span>}</span></span>&#34; /&gt;</span>
<span>  &#39;&#39;</span><span>;</span>

  <span><span>webRoot</span></span> <span>=</span> <span><span>runCommand</span></span> <span>&#34;webroot&#34;</span> <span>{</span> <span>}</span> <span>&#39;&#39;</span>
<span>    mkdir $out</span>
<span>    cp <span><span>${</span><span>indexHTML</span><span>}</span></span> $out/index.html</span>
<span>  &#39;&#39;</span><span>;</span>
<span>in</span> <span>kakapo</span><span>.</span><span><span>makeBundle</span></span> <span>webRoot</span><span>;</span></pre></div>
<ul dir="auto">
<li>Bundling a file tree from an attribute set</li>
</ul>
<div dir="auto" data-snippet-clipboard-copy-content="kakapo.bundleTree &#34;my-webroot&#34; { } {
  &#34;index.html&#34; = &#39;&#39;
    &lt;h1&gt;Welcome!&lt;/h1&gt;
    &lt;img src=&#34;${./banner.jpg}&#34; /&gt;
  &#39;&#39;;
}"><pre><span>kakapo</span><span>.</span><span><span>bundleTree</span></span> <span>&#34;my-webroot&#34;</span> <span>{</span> <span>}</span> <span>{</span>
  <span>&#34;index.html&#34;</span> <span>=</span> <span>&#39;&#39;</span>
<span>    &lt;h1&gt;Welcome!&lt;/h1&gt;</span>
<span>    &lt;img src=&#34;<span><span>${</span><span>./banner.jpg</span><span>}</span></span>&#34; /&gt;</span>
<span>  &#39;&#39;</span><span>;</span>
<span>}</span></pre></div>

<p dir="auto">Check out <a href="https://github.com/adisbladis/kakapo/blob/master/templates/htmlNix">./templates/htmlNix</a>.</p>
</article></div></div></div></div>
  </body>
</html>
