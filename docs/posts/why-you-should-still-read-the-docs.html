<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://death.andgravity.com/output">Original</a>
    <h1>Why you should still read the docs</h1>
    
    <div id="readability-page-1" class="page"><div>
<div>

<p>Do you feel you&#39;re <strong>fighting your tools</strong>?</p>
<p>Do you feel you&#39;re <strong>relying too much on autocomplete</strong> and inline documentation?
...always kinda guessing when using libraries?</p>
<p>Or maybe not, but getting things done <strong>just seems harder than it should be</strong>.</p>
<!-- should this say "advanced beginners"? -->
<p>This can have many causes,
but I&#39;ve repeatedly seen junior developers struggle with a specific one,
not even fully aware they&#39;re struggling in the first place.</p>
<!-- As always, there must be a better way. -->
<p>This is a story about:</p>
<ul>
<li>why you should still read the docs</li>
<li>finding the right way of doing things</li>
<li>command-line interfaces</li>
</ul>
<p>tl;dr: <strong>Most <em>good</em> documentation won&#39;t show up in your IDE</strong> –
  rather, it is about <em>how</em> to use the library,
  and the <em>problem</em> the library is solving.</p>
<section>
<ul>
<li><a href="#an-example">An example</a>
<ul>
<li><a href="#the-path-is-hardcoded">The path is hardcoded</a></li>
<li><a href="#the-path-might-not-be-valid">The path might not be valid</a></li>
<li><a href="#the-path-to-what-exactly">The path to what, exactly?</a></li>
<li><a href="#standard-output">Standard output</a></li>
<li><a href="#by-default">...by default</a></li>
<li><a href="#discussion">Discussion</a></li>
</ul>
</li>
<li><a href="#good-libraries-educate">Good libraries educate</a></li>
<li><a href="#read-the-docs">Read the docs</a>
<ul>
<li><a href="#but-the-docs-suck">But the docs suck</a></li>
<li><a href="#but-i-m-using-lots-of-libraries">But I&#39;m using lots of libraries</a></li>
</ul>
</li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>
</section>
<h2 id="an-example">An example</h2>
<p>OK, instead of telling you, let me show you –
we&#39;ll go through <em>one possible path</em> of developing something,
and stop along the way to point out how we&#39;re doing things.</p>
<hr/>
<p>Say you&#39;re writing a command-line tool
that gets data from an API
and saves it in a CSV file.
It might look something like this:</p>
<div><pre data-lang="Python"><span></span><code><span>import</span> <span>csv</span>
<span>import</span> <span>time</span>
<span>import</span> <span>click</span>

<span>def</span> <span>get_data</span><span>():</span>
    <span># pretend some API calls happen here</span>
    <span>time</span><span>.</span><span>sleep</span><span>(</span><span>2</span><span>)</span>
    <span>return</span> <span>[</span>
        <span>{</span><span>&#34;name&#34;</span><span>:</span> <span>&#34;Chaos&#34;</span><span>,</span> <span>&#34;short_name&#34;</span><span>:</span> <span>&#34;Chs&#34;</span><span>},</span>
        <span>{</span><span>&#34;name&#34;</span><span>:</span> <span>&#34;Discord&#34;</span><span>,</span> <span>&#34;short_name&#34;</span><span>:</span> <span>&#34;Dsc&#34;</span><span>},</span>
        <span>{</span><span>&#34;name&#34;</span><span>:</span> <span>&#34;Confusion&#34;</span><span>,</span> <span>&#34;short_name&#34;</span><span>:</span> <span>&#34;Cfn&#34;</span><span>},</span>
        <span>{</span><span>&#34;name&#34;</span><span>:</span> <span>&#34;Bureaucracy&#34;</span><span>,</span> <span>&#34;short_name&#34;</span><span>:</span> <span>&#34;Bcy&#34;</span><span>},</span>
        <span>{</span><span>&#34;name&#34;</span><span>:</span> <span>&#34;The Aftermath&#34;</span><span>,</span> <span>&#34;short_name&#34;</span><span>:</span> <span>&#34;Afm&#34;</span><span>},</span>
    <span>]</span>

<span>def</span> <span>write_csv</span><span>(</span><span>data</span><span>):</span>
    <span>with</span> <span>open</span><span>(</span><span>&#34;calendar.csv&#34;</span><span>,</span> <span>&#39;w&#39;</span><span>,</span> <span>newline</span><span>=</span><span>&#39;&#39;</span><span>)</span> <span>as</span> <span>f</span><span>:</span>
        <span>writer</span> <span>=</span> <span>csv</span><span>.</span><span>writer</span><span>(</span><span>f</span><span>)</span>
        <span>writer</span><span>.</span><span>writerow</span><span>([</span><span>&#39;name&#39;</span><span>,</span> <span>&#39;short_name&#39;</span><span>])</span>
        <span>for</span> <span>row</span> <span>in</span> <span>data</span><span>:</span>
            <span>writer</span><span>.</span><span>writerow</span><span>([</span><span>row</span><span>[</span><span>&#39;name&#39;</span><span>],</span> <span>row</span><span>[</span><span>&#39;short_name&#39;</span><span>]])</span>

<span>@click</span><span>.</span><span>command</span><span>()</span>
<span>def</span> <span>main</span><span>():</span>
<span>    </span><span>&#34;&#34;&#34;Retrieve the names of the Discordian seasons to calendar.csv.&#34;&#34;&#34;</span>
    <span>data</span> <span>=</span> <span>get_data</span><span>()</span>
    <span>write_csv</span><span>(</span><span>data</span><span>)</span>

<span>if</span> <span>__name__</span> <span>==</span> <span>&#39;__main__&#39;</span><span>:</span>
    <span>main</span><span>()</span>
</code></pre></div>

<p>Here it is in action:</p>
<div><pre data-lang="Bash Session"><span></span><code><span>$ </span>python<span> </span>seasons.py<span> </span>--help
<span>Usage: seasons.py [OPTIONS]</span>

<span>  Retrieve the names of the Discordian seasons to calendar.csv.</span>

<span>Options:</span>
<span>  --help  Show this message and exit.</span>
<span>$ </span>python<span> </span>seasons.py
<span>$ </span>cat<span> </span>calendar.csv
<span>name,short_name</span>
<span>Chaos,Chs</span>
<span>Discord,Dsc</span>
<span>Confusion,Cfn</span>
<span>Bureaucracy,Bcy</span>
<span>The Aftermath,Afm</span>
</code></pre></div>
<p>You&#39;re using <a href="https://click.palletsprojects.com/">Click</a> because
it’s powerful but comes with sensible defaults.</p>
<p>This is pretty good code –
instead of calling <code>get_data()</code> <em>from</em> <code>write_csv()</code>,
you&#39;re passing its result <em>to</em> <code>write_csv()</code> –
in other words, instead of <em>hiding</em> the input,
you&#39;ve <em>decoupled</em> it.</p>
<p>As a result,
<code>write_csv()</code> doesn&#39;t need to change when adding new arguments to <code>get_data()</code>,
and we can test it without monkeypatching <code>get_data()</code>:</p>
<div><pre data-lang="Python"><span></span><code><span>import</span> <span>seasons</span>

<span>DATA</span> <span>=</span> <span>[</span>
    <span>{</span><span>&#34;name&#34;</span><span>:</span> <span>&#34;one&#34;</span><span>,</span> <span>&#34;short_name&#34;</span><span>:</span> <span>&#34;1&#34;</span><span>},</span>
    <span>{</span><span>&#34;name&#34;</span><span>:</span> <span>&#34;two&#34;</span><span>,</span> <span>&#34;short_name&#34;</span><span>:</span> <span>&#34;2&#34;</span><span>},</span>
<span>]</span>
<span>CSV_BYTES</span> <span>=</span> <span>b</span><span>&#34;name,short_name</span><span>\r\n</span><span>one,1</span><span>\r\n</span><span>two,2</span><span>\r\n</span><span>&#34;</span>

<span>def</span> <span>test_write_csv</span><span>(</span><span>tmp_path</span><span>,</span> <span>monkeypatch</span><span>):</span>
    <span>monkeypatch</span><span>.</span><span>chdir</span><span>(</span><span>tmp_path</span><span>)</span>
    <span>seasons</span><span>.</span><span>write_csv</span><span>(</span><span>DATA</span><span>)</span>
    <span>assert</span> <span>tmp_path</span><span>.</span><span>joinpath</span><span>(</span><span>&#39;calendar.csv&#39;</span><span>)</span><span>.</span><span>read_bytes</span><span>()</span> <span>==</span> <span>CSV_BYTES</span>
</code></pre></div>

<!--

# Too much monkey patching

Hmm... that's a bit involved.

Think about it – get_data() is *hidden* away,
but is still *coupled* to the things around it;
when get_data() needs a new argument:

* write_csv() will need to pass the argument through,
  even though it only cares about get_data()'s output
* we'll have to update the test to check the argument is passed around

.. literalinclude:: 10-data/seasons.py
    :lines: 23-27
    :linenos: no

.. literalinclude:: 10-data/seasons.py
    :lines: 16-17
    :linenos: no

The test is already simpler now:

.. literalinclude:: 10-data/test_seasons.py
    :lines: 9-
    :linenos: no

-->
<h3 id="the-path-is-hardcoded">The path is hardcoded</h3>
<p>But, what if you need to run it twice,
and save the output in different files?
This becomes useful as soon as the output can change.
Also, having to be in the right directory
when running it is not cool.</p>
<p>The obvious solution is to pass the path in:</p>
<div><pre data-lang="Python"><span></span><code><span>@click</span><span>.</span><span>command</span><span>()</span>
<span>@click</span><span>.</span><span>option</span><span>(</span><span>&#39;--path&#39;</span><span>,</span> <span>required</span><span>=</span><span>True</span><span>)</span>
<span>def</span> <span>main</span><span>(</span><span>path</span><span>):</span>
<span>    </span><span>&#34;&#34;&#34;Retrieve the names of the Discordian seasons.&#34;&#34;&#34;</span>
    <span>data</span> <span>=</span> <span>get_data</span><span>()</span>
    <span>write_csv</span><span>(</span><span>data</span><span>,</span> <span>path</span><span>)</span>
</code></pre></div>

<div><pre data-lang="Python"><span></span><code><span>def</span> <span>write_csv</span><span>(</span><span>data</span><span>,</span> <span>path</span><span>):</span>
    <span>with</span> <span>open</span><span>(</span><span>path</span><span>,</span> <span>&#39;w&#39;</span><span>,</span> <span>newline</span><span>=</span><span>&#39;&#39;</span><span>)</span> <span>as</span> <span>f</span><span>:</span>
</code></pre></div>

<p>We&#39;re definitely on the right track here –
the test is shorter,
and we don&#39;t even need to monkeypatch the current working directory
anymore:</p>
<div><pre data-lang="Python"><span></span><code><span>def</span> <span>test_write_csv</span><span>(</span><span>tmp_path</span><span>):</span>
    <span>out_path</span> <span>=</span> <span>tmp_path</span><span>.</span><span>joinpath</span><span>(</span><span>&#39;out.csv&#39;</span><span>)</span>
    <span>seasons</span><span>.</span><span>write_csv</span><span>(</span><span>DATA</span><span>,</span> <span>out_path</span><span>)</span>
    <span>assert</span> <span>out_path</span><span>.</span><span>read_bytes</span><span>()</span> <span>==</span> <span>CSV_BYTES</span>
</code></pre></div>

<h3 id="the-path-might-not-be-valid">The path might not be valid</h3>
<p>But, what if you pass a directory as the path?</p>
<div><pre data-lang="Bash Session"><span></span><code><span>$ </span><span>time</span><span> </span>python<span> </span>seasons.py<span> </span>--path<span> </span>.
<span>Traceback (most recent call last):</span>
<span>  ...</span>
<span>IsADirectoryError: [Errno 21] Is a directory: &#39;.&#39;</span>
<span>python seasons.py --path .  0.07s user 0.02s system 4% cpu 2.104 total</span>
</code></pre></div>
<p>OK, it fails with a traceback.
Worse, we waited for the API calls
only to throw the output away.
Thankfully, Click has fancy <a href="https://click.palletsprojects.com/en/latest/parameters/#parameter-types">parameter types</a> that can take care of that:</p>
<div><pre data-lang="Python"><span></span><code><span>@click</span><span>.</span><span>command</span><span>()</span>
<span>@click</span><span>.</span><span>option</span><span>(</span><span>&#39;--path&#39;</span><span>,</span> <span>type</span><span>=</span><span>click</span><span>.</span><span>Path</span><span>(</span><span>exists</span><span>=</span><span>False</span><span>,</span> <span>dir_okay</span><span>=</span><span>False</span><span>,</span> <span>writable</span><span>=</span><span>True</span><span>),</span> <span>required</span><span>=</span><span>True</span><span>)</span>
<span>def</span> <span>main</span><span>(</span><span>path</span><span>):</span>
</code></pre></div>

<div><pre data-lang="Bash Session"><span></span><code><span>$ </span><span>time</span><span> </span>python<span> </span>seasons.py<span> </span>--path<span> </span>.
<span>Usage: seasons.py [OPTIONS]</span>
<span>Try &#39;seasons.py --help&#39; for help.</span>

<span>Error: Invalid value for &#39;--path&#39;: File &#39;.&#39; is a directory.</span>
<span>python seasons.py --path .  0.08s user 0.02s system 92% cpu 0.112 total</span>
</code></pre></div>
<p>Not only do we get a nice error message,
we get it instantly!</p>
<h3 id="the-path-to-what-exactly">The path to what, exactly?</h3>
<p>Thing is, <code>--path</code> isn&#39;t very descriptive.
I wonder if there&#39;s a better name for it...</p>
<p>One thing I like to do is to look at what others are doing.</p>
<div><pre data-lang="Bash Session"><span></span><code><span>$ </span>curl<span> </span>--help
<span>Usage: curl [options...] &lt;url&gt;</span>
<span> -o, --output &lt;file&gt; Write to file instead of stdout</span>
<span> -O, --remote-name   Write output to a file named as the remote file</span>
<span> ...</span>
</code></pre></div>
<div><pre data-lang="Bash Session"><span></span><code><span>$ </span>wget<span> </span>--help
<span>GNU Wget 1.21.2, a non-interactive network retriever.</span>
<span>Usage: wget [OPTION]... [URL]...</span>
<span>  -o,  --output-file=FILE          log messages to FILE</span>
<span>  -O,  --output-document=FILE      write documents to FILE</span>
</code></pre></div>
<div><pre data-lang="Bash Session"><span></span><code><span>$ </span>sort<span> </span>--help
<span>Usage: sort [OPTION]... [FILE]...</span>
<span>  -o, --output=FILE         write result to FILE instead of standard output</span>
</code></pre></div>
<div><pre data-lang="Bash Session"><span></span><code><span>$ </span>pandoc<span> </span>--help
<span>pandoc [OPTIONS] [FILES]</span>
<span>  -o FILE               --output=FILE</span>
</code></pre></div>
<p>Better yet, sometimes there&#39;s a comprehensive guide on a topic,
like <a href="https://clig.dev/">Command Line Interface Guidelines</a>
...and under <a href="https://clig.dev/#arguments-and-flags">Arguments and flags</a>,
we find this:</p>
<blockquote>
<p><strong>Use standard names for flags, if there is a standard.</strong> If another commonly used command uses a flag name, it’s best to follow that existing pattern. That way, a user doesn’t have to remember two different options (and which command it applies to), and users can even guess an option without having to look at the help text.</p>
<p>Here’s a list of commonly used options: [...]</p>
<ul>
<li><code>-o</code>, <code>--output</code>: Output file. For example, <code>sort</code>, <code>gcc</code>.</li>
</ul>
</blockquote>
<h3 id="standard-output">Standard output</h3>
<p>Further down below, there&#39;s another guideline:</p>
<blockquote>
<p><strong>If input or output is a file, support <code>-</code> to read from <code>stdin</code> or write to <code>stdout</code>.</strong> This lets the output of another command be the input of your command and vice versa, without using a temporary file. [...]</p>
</blockquote>
<p>I wonder how we could achieve this.</p>
<p>One way would be to check the value and use <a href="https://docs.python.org/3/library/sys.html#sys.stdout">sys.stdout</a> if it&#39;s <code>-</code>.</p>
<p>But let&#39;s pause and look at the <a href="https://click.palletsprojects.com/en/latest/api/#click.Path">Path</a> docs a bit:</p>
<blockquote>
<p>allow_dash (bool) – Allow a single dash as a value, which indicates a standard stream (but does not open it). Use <a href="https://click.palletsprojects.com/en/latest/api/#click.open_file">open_file()</a> to handle opening this value.</p>
</blockquote>
<p>Encouraging; following along, <a href="https://click.palletsprojects.com/en/latest/api/#click.open_file">open_file()</a> says:</p>
<blockquote>
<p>Open a file, with extra behavior to handle <code>&#39;-&#39;</code> to indicate a standard stream, lazy open on write, and atomic write. Similar to the behavior of the <a href="https://click.palletsprojects.com/en/latest/api/#click.File">File</a> param type.</p>
</blockquote>
<p>What&#39;s this File, eh?</p>
<blockquote>
<p>Declares a parameter to be a file for reading or writing. [...] The special value <code>-</code> indicates stdin or stdout depending on the mode. [...]</p>
<p>See <a href="https://click.palletsprojects.com/en/latest/arguments/#file-args">File Arguments</a> for more information.</p>
</blockquote>
<p>Which finally takes us away from the API reference to the actual <em>documentation</em>:</p>
<blockquote>
<p>Since all the examples have already worked with filenames, it makes sense to explain how to deal with files properly. Command line tools are more fun if they work with files the Unix way, which is to accept <code>-</code> as a special file that refers to stdin/stdout.</p>
<p>Click supports this through the <a href="https://click.palletsprojects.com/en/latest/api/#click.File">click.File</a> type which intelligently handles files for you. [...]</p>
</blockquote>
<p>OK, OK, I get it, let&#39;s use it:</p>
<div><pre data-lang="Python"><span></span><code><span>@click</span><span>.</span><span>command</span><span>()</span>
<span>@click</span><span>.</span><span>option</span><span>(</span><span>&#39;-o&#39;</span><span>,</span> <span>&#39;--output&#39;</span><span>,</span> <span>type</span><span>=</span><span>click</span><span>.</span><span>File</span><span>(</span><span>&#39;w&#39;</span><span>,</span> <span>lazy</span><span>=</span><span>False</span><span>),</span> <span>required</span><span>=</span><span>True</span><span>)</span>
<span>def</span> <span>main</span><span>(</span><span>output</span><span>):</span>
<span>    </span><span>&#34;&#34;&#34;Retrieve the names of the Discordian seasons.&#34;&#34;&#34;</span>
    <span>data</span> <span>=</span> <span>get_data</span><span>()</span>
    <span># click.File doesn&#39;t have a newline argument</span>
    <span>output</span><span>.</span><span>reconfigure</span><span>(</span><span>newline</span><span>=</span><span>&#39;&#39;</span><span>)</span>
    <span>write_csv</span><span>(</span><span>data</span><span>,</span> <span>output</span><span>)</span>
</code></pre></div>

<p>With passing a file object to <code>write_csv()</code>,
the <em>output</em> part of I/O is also decoupled:</p>
<div><pre data-lang="Python"><span></span><code><span>def</span> <span>write_csv</span><span>(</span><span>data</span><span>,</span> <span>file</span><span>):</span>
    <span>writer</span> <span>=</span> <span>csv</span><span>.</span><span>writer</span><span>(</span><span>file</span><span>)</span>
    <span>writer</span><span>.</span><span>writerow</span><span>([</span><span>&#39;name&#39;</span><span>,</span> <span>&#39;short_name&#39;</span><span>])</span>
    <span>for</span> <span>row</span> <span>in</span> <span>data</span><span>:</span>
        <span>writer</span><span>.</span><span>writerow</span><span>([</span><span>row</span><span>[</span><span>&#39;name&#39;</span><span>],</span> <span>row</span><span>[</span><span>&#39;short_name&#39;</span><span>]])</span>
</code></pre></div>

<p>Interestingly enough, <a href="https://docs.python.org/3/library/csv.html#csv.writer">csv.writer</a> <em>already</em> takes an open file.</p>
<p>Anyway, it works:</p>
<div><pre data-lang="Bash Session"><span></span><code><span>$ </span>python<span> </span>seasons.py<span> </span>--output<span> </span>-
<span>name,short_name</span>
<span>Chaos,Chs</span>
<span>Discord,Dsc</span>
<span>Confusion,Cfn</span>
<span>Bureaucracy,Bcy</span>
<span>The Aftermath,Afm</span>
</code></pre></div>
<p>Once again, the test gets simpler too –
instead of writing anything to disk,
we can use an <a href="https://docs.python.org/3/library/io.html#io.BytesIO">in-memory stream</a>:</p>
<div><pre data-lang="Python"><span></span><code><span>def</span> <span>test_write_csv</span><span>():</span>
    <span>file</span> <span>=</span> <span>io</span><span>.</span><span>StringIO</span><span>()</span>
    <span>seasons</span><span>.</span><span>write_csv</span><span>(</span><span>DATA</span><span>,</span> <span>file</span><span>)</span>
    <span>assert</span> <span>file</span><span>.</span><span>getvalue</span><span>()</span><span>.</span><span>encode</span><span>()</span> <span>==</span> <span>CSV_BYTES</span>
</code></pre></div>

<h3 id="by-default">...by default</h3>
<p>Some of the help texts <a href="#the-path-to-what-exactly">we looked at</a>
say &#34;write to FILE instead of stdout&#34;...</p>
<p>Why <em>instead?</em></p>
<p>Using commands in a pipeline is common enough that
most Unix commands write to stdout <em>by default</em>;
some don&#39;t even bother with an <code>--output</code> option,
since you can always redirect stdout to a file:</p>
<div><pre data-lang="Bash Session"><span></span><code><span>$ </span>tail<span> </span>-n+2<span> </span>calendar.csv<span> </span><span>|</span><span> </span>head<span> </span>-n2
<span>Chaos,Chs</span>
<span>Discord,Dsc</span>
<span>$ </span>tail<span> </span>-n+2<span> </span>calendar.csv<span> </span>&gt;<span> </span>calendar-no-heading.csv
<span>$ </span>head<span> </span>-n2<span> </span>calendar-no-heading.csv
<span>Chaos,Chs</span>
<span>Discord,Dsc</span>
</code></pre></div>
<p>It is so common that <a href="https://clig.dev/">CLI Guidelines</a>
makes it the third thing in <a href="https://clig.dev/#the-basics">The Basics</a>:</p>
<blockquote>
<p><strong>Send output to <code>stdout</code>.</strong> The primary output for your command should go to <code>stdout</code>. Anything that is machine readable should also go to <code>stdout</code>—this is where piping sends things by default.</p>
</blockquote>
<p>We could remove <code>--output</code>, but with Click, doing both is trivially easy:</p>
<div><pre data-lang="Python"><span></span><code><span>@click</span><span>.</span><span>option</span><span>(</span><span>&#39;-o&#39;</span><span>,</span> <span>&#39;--output&#39;</span><span>,</span> <span>type</span><span>=</span><span>click</span><span>.</span><span>File</span><span>(</span><span>&#39;w&#39;</span><span>,</span> <span>lazy</span><span>=</span><span>False</span><span>),</span> <span>default</span><span>=</span><span>&#39;-&#39;</span><span>)</span>
</code></pre></div>

<div><pre data-lang="Bash Session"><span></span><code><span>$ </span>python<span> </span>seasons.py<span> </span><span>|</span><span> </span>tail<span> </span>-n+2<span> </span><span>|</span><span> </span>head<span> </span>-n2
<span>Chaos,Chs</span>
<span>Discord,Dsc</span>
</code></pre></div>
<h3 id="discussion">Discussion</h3>
<p>Looking at our journey, I can&#39;t help but notice a few things:</p>
<ul>
<li>The Click <a href="https://click.palletsprojects.com/en/latest/api/">API reference</a> seems to constantly funnel readers
to the <a href="https://click.palletsprojects.com/en/latest/#documentation">user guide</a> part of the documentation,
the part that tells you <em>how</em> and <em>why</em> to use stuff.</li>
<li>Click mentions supporting <code>-</code> for stdout, and more than once.</li>
<li>The Click user guide discusses <a href="https://click.palletsprojects.com/en/latest/api/#click.File">File</a> arguments <em>before</em> <a href="https://click.palletsprojects.com/en/latest/api/#click.Path">Path</a>
(in part, because it&#39;s more commonly used,
but also because it&#39;s more useful out of the box).</li>
<li><a href="https://docs.python.org/3/library/csv.html#csv.writer">csv.writer</a> takes an open file,
just like our own <code>write_csv()</code> does at the end.</li>
</ul>
<p>These all hint that it may be a good idea to structure code a certain way;
the more we use things the way they &#34;want&#34; to be used,
the cleaner the code and the tests get.</p>
<h2 id="good-libraries-educate">Good libraries educate</h2>
<p>I am tempted to call <a href="https://click.palletsprojects.com/">Click</a> a <em>great library</em>.</p>
<p>Yes, it does its job more than well, and has lots of features.</p>
<p>But, more importantly, its documentation
educates the reader about the subject matter
– it goes beyond API docs into how to use it,
how to get specific things done with it,
and the underlying problem it is solving.</p>
<p>Here are a few more examples:</p>
<ul>
<li>Classics – other libraries in the <a href="https://flask.palletsprojects.com">Flask</a>/Pallets ecosystem
(like <a href="https://werkzeug.palletsprojects.com">Werkzeug</a> and <a href="https://jinja.palletsprojects.com">Jinja</a>), <a href="https://requests.readthedocs.io">Requests</a>, <a href="https://docs.pytest.org">pytest</a>, and many others –
popular <em>and</em> old enough libraries usually have great documentation.</li>
<li>Python itself – you would be amazed at how many developers
use Python every day without having gone through <a href="https://docs.python.org/3/tutorial/">the tutorial</a> even once.</li>
<li><a href="https://feedparser.readthedocs.io">feedparser</a> teaches you about
<a href="https://feedparser.readthedocs.io/en/latest/advanced.html">all kinds of Atom and RSS quirks</a>,
<a href="https://feedparser.readthedocs.io/en/latest/character-encoding.html">encodings on the web</a>,
<a href="https://feedparser.readthedocs.io/en/latest/http.html">HTTP</a>,
and how to be nice to servers you&#39;re making requests to.<ul>
<li>feedparser is close to my heart because I&#39;m using it
for my feed reader library, <a href="https://reader.readthedocs.io/">reader</a>,
where I too am doing my best to have <a href="https://reader.readthedocs.io/en/latest/guide.html">docs worth reading</a>.</li>
</ul>
</li>
<li>Stepping away from Python a bit,
I&#39;ve learned a lot from both <a href="https://dagger.dev/dev-guide/">Dagger</a> and <a href="https://site.mockito.org/">Mockito</a>
(and for the latter, the API docs for the
<a href="https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html">&#34;main&#34; class</a>
pack way more than just API,
and that <em>will</em> show up in your IDE).</li>
<li><a href="https://beancount.github.io/docs/">Beancount</a>, a command-line accounting tool,
does a great job of teaching double-entry bookkeeping
(it taught me almost all I know about the topic).</li>
</ul>
<h2 id="read-the-docs">Read the docs</h2>
<p>In a way, this whole article is a ruse to tell you to <a href="https://en.wikipedia.org/wiki/RTFM">RTFM</a>,
but with a bit of nuance.</p>
<p>Read the documentation to find out <em>how</em>,
and more importantly, <em>why</em> –
a mental model of the thing you&#39;re using
will make you more productive,
and will improve any guesses you make.</p>
<p>Aside from the user guide part,
I also like to skim the reference for libraries I use a lot;
this gives me an idea of what&#39;s available,
and often I remember later that
&#34;hey, there was something in the docs about X&#34;.</p>
<h3 id="but-the-docs-suck">But the docs suck</h3>
<p>Sometimes, documentation sucks or is missing entirely
(doubly so for internal code).
It&#39;s easy to get a habit of not bothering to look,
when most of the time it&#39;s not there.</p>
<p>Still, always check. Worst case, you&#39;ll have wasted a minute.</p>
<p>On the other hand, docs should definitely be
one of the criteria when picking a library.</p>
<h3 id="but-i-m-using-lots-of-libraries">But I&#39;m using lots of libraries</h3>
<p>Quoting a friend:</p>
<blockquote>
<p>Well, for you, it might be &#34;a library&#34;,
but for them it&#39;s 10 new libraries,
and a 2-day deadline.</p>
</blockquote>
<p>Like with most things, the <a href="https://en.wikipedia.org/wiki/Pareto_principle">Pareto principle</a> applies:</p>
<ul>
<li>Read the docs for big stuff you use often –
language, standard library, test framework,
web framework or database of choice,
and so on;
these have an outsized return on investment,
and start paying out quite quickly.</li>
<li>Don&#39;t read <em>all</em> the docs; skimming is often enough.</li>
</ul>
<p>On the other hand, there is value in not using <em>that</em> many libraries.</p>
<!--

## But reading the docs is hard

It's true, it is is extra work,
and it does slow you down in the short term.

But it's a skill like any other –
the more you do it, the easier it becomes.

-->
<h2 id="conclusion">Conclusion</h2>
<p>To sum up:</p>
<ul>
<li>Good libraries educate on the subject matter.</li>
<li>Read the documentation of the things you are using a lot.</li>
<li>If you feel you&#39;re fighting your tools,
maybe you&#39;re using them wrong (read the docs!),
but maybe they&#39;re not all that good;
it&#39;s OK to look for better ones.</li>
</ul>
<p>I&#39;ll end with a related idea from a post called <a href="https://blog.ircmaxell.com/2011/07/why-i-dont-use-autocomplete.html">Why I Don’t Use Autocomplete</a>:</p>
<blockquote>
<p>But be sure that if you do use autocomplete that you’re not leaning on it as a crutch. Be sure that you’re not deciding what to write as you write it [...] and not just using a method because the IDE tells you it’s available.</p>
</blockquote>
<p><strong>Learned something new today?</strong> Share this with others, it really helps! <span>

</span></p>











</div>
</div></div>
  </body>
</html>
