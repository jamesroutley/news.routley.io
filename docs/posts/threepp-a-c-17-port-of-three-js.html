<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/markaren/threepp">Original</a>
    <h1>Threepp: A C&#43;&#43;17 Port of Three.js</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
          <article itemprop="text"><h2 dir="auto"><a id="user-content-threepp-work-in-progress" aria-hidden="true" href="#threepp-work-in-progress"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>threepp (Work in progress)</h2>
<p dir="auto">Cross-platform C++17 port of the popular Javascript 3D library <a href="https://github.com/mrdoob/three.js/">three.js</a> <a href="https://github.com/mrdoob/three.js/tree/r129">r129</a>.</p>
<h4 dir="auto"><a id="user-content-current-state-of-the-project" aria-hidden="true" href="#current-state-of-the-project"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Current state of the project</h4>
<p dir="auto">Most of the core library has been ported, including basic rendering capabilities,
however much remains to be done..</p>
<h5 dir="auto"><a id="user-content-what-works" aria-hidden="true" href="#what-works"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>What works?</h5>
<ul dir="auto">
<li>Box, Sphere, Plane, Cylindrical and Tube geometries</li>
<li>2D Textures</li>
<li>Transparency</li>
<li>OrbitControls</li>
<li>AmbientLight, DirectionalLight, PointLight</li>
<li>Most materials</li>
<li>RenderTarget</li>
<li>Raycasting against Mesh</li>
</ul>
<h3 dir="auto"><a id="user-content-but-but-why" aria-hidden="true" href="#but-but-why"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>But, but why?</h3>
<p dir="auto">This is mostly a personal exercise. Don&#39;t expect much support, although contributions are welcome.</p>
<h3 dir="auto"><a id="user-content-how-to-build" aria-hidden="true" href="#how-to-build"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How to build</h3>
<p dir="auto">In order to successfully build threepp, you&#39;ll need <a href="https://conan.io/" rel="nofollow">conan</a> in order to handle dependencies.</p>
<p dir="auto"><code>pip install conan</code></p>
<p dir="auto">Conan is automatically invoked when configuring the project.</p>
<h3 dir="auto"><a id="user-content-installing" aria-hidden="true" href="#installing"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installing</h3>
<p dir="auto"><code>threepp</code> is available through the conan remote ais:</p>
<p dir="auto"><code>conan remote add ais https://ais.jfrog.io/artifactory/api/conan/ais-conan-local</code></p>
<p dir="auto">Then add a dependency to: </p>
<h3 dir="auto"><a id="user-content-implementation-notes" aria-hidden="true" href="#implementation-notes"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Implementation notes</h3>
<p dir="auto">In general, you&#39;ll find that math classes are value types, while threepp expect smart pointers for other types.
For convenience, geometries, materials etc. has a static <code>::create</code> function that returns a <code>std::shared_ptr</code>.
There should never be a need to handle memory explicitly using threepp. Yay!</p>
<h3 dir="auto"><a id="user-content-example" aria-hidden="true" href="#example"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example</h3>
<div data-snippet-clipboard-copy-content="#include &#34;threepp/threepp.hpp&#34;

using namespace threepp;

int main() {

    Canvas canvas;

    auto scene = Scene::create();
    auto camera = PerspectiveCamera::create(75, canvas.getAspect(), 0.1f, 100);
    camera-&gt;position.z = 5;

    GLRenderer renderer(canvas);
    renderer.checkShaderErrors = true;
    renderer.setSize(canvas.getSize());

    OrbitControls controls{camera, canvas};

    auto light = AmbientLight::create(Color(0xffffff).multiplyScalar(0.75f));
    scene-&gt;add(light);

    auto group = Group::create();

    {
        const auto boxGeometry = BoxGeometry::create();
        const auto boxMaterial = MeshPhongMaterial::create();
        boxMaterial-&gt;color.setHex(0xff0000);
        auto box = Mesh::create(boxGeometry, boxMaterial);
        box-&gt;position.setX(-1);
        group-&gt;add(box);
    }

    {
        const auto boxGeometry = BoxGeometry::create();
        const auto boxMaterial = MeshPhongMaterial::create();
        boxMaterial-&gt;color.setHex(0x00ff00);
        auto box = Mesh::create(boxGeometry, boxMaterial);
        box-&gt;position.setX(1);
        group-&gt;add(box);
    }

    scene-&gt;add(group);

    const auto planeGeometry = PlaneGeometry::create(5, 5);
    const auto planeMaterial = MeshLambertMaterial::create();
    planeMaterial-&gt;color.setHex(Color::gray);
    planeMaterial-&gt;side = DoubleSide;
    auto plane = Mesh::create(planeGeometry, planeMaterial);
    plane-&gt;position.setY(-1);
    plane-&gt;rotateX(math::degToRad(90));
    scene-&gt;add(plane);

    canvas.onWindowResize([&amp;](WindowSize size) {
        camera-&gt;aspect = size.getAspect();
        camera-&gt;updateProjectionMatrix();
        renderer.setSize(size);
    });

    group-&gt;rotation.setOrder(Euler::YZX);
    canvas.animate([&amp;](float dt) {
        group-&gt;rotation.y += 0.5f * dt;

        renderer.render(scene, camera);
    });
}

"><pre>#<span>include</span> <span><span>&#34;</span>threepp/threepp.hpp<span>&#34;</span></span>

<span>using</span> <span>namespace</span> <span>threepp</span><span>;</span>

<span>int</span> <span>main</span>() {

    Canvas canvas;

    <span>auto</span> scene = <span>Scene::create</span>();
    <span>auto</span> camera = <span>PerspectiveCamera::create</span>(<span>75</span>, canvas.<span>getAspect</span>(), <span>0</span>.<span>1f</span>, <span>100</span>);
    camera-&gt;<span>position</span>.<span>z</span> = <span>5</span>;

    GLRenderer <span>renderer</span>(canvas);
    renderer.<span>checkShaderErrors</span> = <span>true</span>;
    renderer.<span>setSize</span>(canvas.<span>getSize</span>());

    OrbitControls controls{camera, canvas};

    <span>auto</span> light = <span>AmbientLight::create</span>(<span>Color</span>(<span>0xffffff</span>).<span>multiplyScalar</span>(<span>0</span>.<span>75f</span>));
    scene-&gt;<span>add</span>(light);

    <span>auto</span> group = <span>Group::create</span>();

    {
        <span>const</span> <span>auto</span> boxGeometry = <span>BoxGeometry::create</span>();
        <span>const</span> <span>auto</span> boxMaterial = <span>MeshPhongMaterial::create</span>();
        boxMaterial-&gt;<span>color</span>.<span>setHex</span>(<span>0xff0000</span>);
        <span>auto</span> box = <span>Mesh::create</span>(boxGeometry, boxMaterial);
        box-&gt;<span>position</span>.<span>setX</span>(-<span>1</span>);
        group-&gt;<span>add</span>(box);
    }

    {
        <span>const</span> <span>auto</span> boxGeometry = <span>BoxGeometry::create</span>();
        <span>const</span> <span>auto</span> boxMaterial = <span>MeshPhongMaterial::create</span>();
        boxMaterial-&gt;<span>color</span>.<span>setHex</span>(<span>0x00ff00</span>);
        <span>auto</span> box = <span>Mesh::create</span>(boxGeometry, boxMaterial);
        box-&gt;<span>position</span>.<span>setX</span>(<span>1</span>);
        group-&gt;<span>add</span>(box);
    }

    scene-&gt;<span>add</span>(group);

    <span>const</span> <span>auto</span> planeGeometry = <span>PlaneGeometry::create</span>(<span>5</span>, <span>5</span>);
    <span>const</span> <span>auto</span> planeMaterial = <span>MeshLambertMaterial::create</span>();
    planeMaterial-&gt;<span>color</span>.<span>setHex</span>(Color::gray);
    planeMaterial-&gt;<span>side</span> = DoubleSide;
    <span>auto</span> plane = <span>Mesh::create</span>(planeGeometry, planeMaterial);
    plane-&gt;<span>position</span>.<span>setY</span>(-<span>1</span>);
    plane-&gt;<span>rotateX</span>(<span>math::degToRad</span>(<span>90</span>));
    scene-&gt;<span>add</span>(plane);

    canvas.<span>onWindowResize</span>([&amp;](WindowSize size) {
        camera-&gt;<span>aspect</span> = size.<span>getAspect</span>();
        camera-&gt;<span>updateProjectionMatrix</span>();
        renderer.<span>setSize</span>(size);
    });

    group-&gt;<span>rotation</span>.<span>setOrder</span>(Euler::YZX);
    canvas.<span>animate</span>([&amp;](<span>float</span> dt) {
        group-&gt;<span>rotation</span>.<span>y</span> += <span>0</span>.<span>5f</span> * dt;

        renderer.<span>render</span>(scene, camera);
    });
}
</pre></div>
</article>
        </div></div>
  </body>
</html>
