<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://undiscoveredworlds.blogspot.com/2025/04/improving-river-simulation.html">Original</a>
    <h1>Improving River Simulation</h1>
    
    <div id="readability-page-1" class="page"><div id="post-body-5450058790396488392" itemprop="description articleBody">
<p>I&#39;m continuing with the process of converting the old region-drawing functions into the new globular context, and refactoring and improving them where possible.</p><p>While doing this I decided that the old way of tracking river flow wasn&#39;t accurate enough. At the moment, UW stores the January and July temperature and rainfall for every point on the global map. When needed, it can calculate the temperature and rainfall for other months by extrapolating them from that stored information (along with other relevant information such as the planet&#39;s obliquity, eccentricity, and so on). So far I&#39;ve been doing the same thing with river flow: for every global cell, the program stores how much water is flowing in January and in July. The problem is that it&#39;s not possible to extrapolate the information for the other months from this information. This is because river flow is determined by more than just information about that point on the map. The water comes from elsewhere, and quite different climactic conditions might prevail in those other places. So we can&#39;t say (for example) that because there&#39;s less rain in March than in October there should be less river flow, because perhaps that isn&#39;t true of the place where most of the water is coming from.</p><p>So I&#39;ve updated the program to track and store river flow for all twelve months. When the rivers are calculated, it goes through every cell on the globe and calculates how much water will be flowing for every month, and then adds that, month by month, to every downstream cell from that point. This means that the variation in flow can be shown quite accurately.</p><p>Here, for example, is a world with a very long river that travels through mostly desert and tundra:</p><p><a href="https://blogger.googleusercontent.com/img/a/AVvXsEhO0lMQgyUgcDdqNuSFZsEGL7-MoS3kYK6HKrVsmxngikMLRqJ2w4ClLWE83jTC5gUTvS-XF32x0AzFs6zTDW0_TprcZIeJtHW0KGSQH9rcyN5VBWsfUzTFJGqL-o7U5mDs8qW6EPPEpro-VqTUsRVG-JS2KT2Hiy5uI4wnENN5l_9n25874DhM2gxlikYtL0Cz8PZ6CQ"><img alt="" data-original-height="898" data-original-width="1708" height="336" src="https://blogger.googleusercontent.com/img/a/AVvXsEhO0lMQgyUgcDdqNuSFZsEGL7-MoS3kYK6HKrVsmxngikMLRqJ2w4ClLWE83jTC5gUTvS-XF32x0AzFs6zTDW0_TprcZIeJtHW0KGSQH9rcyN5VBWsfUzTFJGqL-o7U5mDs8qW6EPPEpro-VqTUsRVG-JS2KT2Hiy5uI4wnENN5l_9n25874DhM2gxlikYtL0Cz8PZ6CQ=w640-h336" width="640"/></a></p></div></div>
  </body>
</html>
