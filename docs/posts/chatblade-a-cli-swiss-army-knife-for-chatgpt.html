<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/npiv/chatblade">Original</a>
    <h1>Show HN: Chatblade â€“ A CLI Swiss Army Knife for ChatGPT</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<h2 tabindex="-1" dir="auto"><a id="user-content-a-cli-swiss-army-knife-for-chatgpt" aria-hidden="true" href="#a-cli-swiss-army-knife-for-chatgpt"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>A CLI Swiss Army Knife for ChatGPT</h2>
<p dir="auto">Chatblade is a versatile command-line interface (CLI) tool designed to interact with OpenAI&#39;s ChatGPT. It accepts piped input, arguments, or both, and allows you to save common prompt preambles for quick usage. Additionally, Chatblade provides utility methods to extract JSON or Markdown from ChatGPT responses.</p>
<p dir="auto"><strong>Note</strong>: You&#39;ll need to set up your OpenAI API key to use Chatblade.</p>
<p dir="auto">You can do that by either passing <code>--openai-api-key KEY</code> or by setting an env variable <code>OPENAI_API_KEY</code> (recommended). The examples below all assume an env variable is set.</p>
<h3 tabindex="-1" dir="auto"><a id="user-content-install" aria-hidden="true" href="#install"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Install</h3>
<p dir="auto">on linux like systems you should be able to just checkout the project and  <code>pip install .</code></p>
<h2 tabindex="-1" dir="auto"><a id="user-content-some-examples" aria-hidden="true" href="#some-examples"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Some Examples</h2>
<h3 tabindex="-1" dir="auto"><a id="user-content-basic" aria-hidden="true" href="#basic"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Basic</h3>
<p dir="auto">In its simplest form, Chatblade can perform a straightforward query:</p>
<div dir="auto" data-snippet-clipboard-copy-content="chatblade how can I extract a still frame from a video at 22:01 with ffmpeg"><pre>chatblade how can I extract a still frame from a video at 22:01 with ffmpeg</pre></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/npiv/chatblade/blob/main/assets/example1.png"><img src="https://github.com/npiv/chatblade/raw/main/assets/example1.png"/></a></p>
<h3 tabindex="-1" dir="auto"><a id="user-content-continue-a-conversation-and-extract" aria-hidden="true" href="#continue-a-conversation-and-extract"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Continue a conversation and extract</h3>
<p dir="auto">To continue the conversation and ask for a change, you can use the <code>-l</code> flag for &#34;last.&#34;</p>
<div dir="auto" data-snippet-clipboard-copy-content="chatblade -l can we make a gif instead from 00:22:01 to 00:22:04"><pre>chatblade -l can we make a gif instead from 00:22:01 to 00:22:04</pre></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/npiv/chatblade/blob/main/assets/example2.png"><img src="https://github.com/npiv/chatblade/raw/main/assets/example2.png"/></a></p>
<p dir="auto">You can also use <code>-l</code> without a query to redisplay the last thread at any point.</p>
<p dir="auto">If you want to extract the last suggested command, you can use the <code>-e</code> flag. For example:</p>

<p dir="auto">This command places the <code>ffmpeg</code> suggestion in your clipboard on macOS.</p>
<h3 tabindex="-1" dir="auto"><a id="user-content-piping-into-chatblade" aria-hidden="true" href="#piping-into-chatblade"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Piping into Chatblade</h3>
<p dir="auto">You can pipe input to Chatblade:</p>
<div dir="auto" data-snippet-clipboard-copy-content="curl https://news.ycombinator.com/rss | chatblade given the above rss can you show me the top 3 articles about AI and their links -c 4"><pre>curl https://news.ycombinator.com/rss <span>|</span> chatblade given the above rss can you show me the top 3 articles about AI and their links -c 4</pre></div>
<p dir="auto">The piped input is placed above the query and sent to ChatGPT. In this example, we also use the <code>-c 4</code> flag to select ChatGPT-4 (the default is ChatGPT-3.5).</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/npiv/chatblade/blob/main/assets/example3.png"><img src="https://github.com/npiv/chatblade/raw/main/assets/example3.png"/></a></p>
<h3 tabindex="-1" dir="auto"><a id="user-content-check-token-count-and-estimaed-costs" aria-hidden="true" href="#check-token-count-and-estimaed-costs"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Check token count and estimaed costs</h3>
<p dir="auto">If you want to check the approximate cost and token usage of a previous query, you can use the <code>-t</code> flag for &#34;tokens.&#34;</p>
<div dir="auto" data-snippet-clipboard-copy-content="curl https://news.ycombinator.com/rss | chatblade given the above rss can you show me the top 3 articles about AI and their links -t"><pre>curl https://news.ycombinator.com/rss <span>|</span> chatblade given the above rss can you show me the top 3 articles about AI and their links -t</pre></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/npiv/chatblade/blob/main/assets/example4.png"><img src="https://github.com/npiv/chatblade/raw/main/assets/example4.png"/></a></p>
<p dir="auto">this won&#39;t perform any action over the wire, and just calculates the tokens locally</p>
<h3 tabindex="-1" dir="auto"><a id="user-content-make-custom-prompts" aria-hidden="true" href="#make-custom-prompts"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Make custom prompts</h3>
<p dir="auto">We can also save common prompt configs for easy reuse. Any yaml file we place under ~/.config/chatblade/ will be picked up by the command.</p>
<p dir="auto">So for example given the following yaml called <code>etymology.yaml</code>, and which contains:</p>
<div dir="auto" data-snippet-clipboard-copy-content="system: |-
  I want you to act as a professional Etomologist and Quiz Generator. You have a deep knowledge of etymology and will be provided with a word. 
  The goal is to create cards that quiz on both the etymology and finding the word by its definition.

  The following is a what a perfect answer would like for the word &#34;disparage&#34;

  [{
    &#34;question&#34;: &#34;A verb used to indicate the act of speaking about someone or something in a negative or belittling way.&lt;br/&gt; &lt;i&gt;E.g He would often _______ his coworkers behind their backs.&lt;/i&gt;&#34;,
    &#34;answer&#34;: &#34;disparage&#34;
  },
  {
    &#34;question&#34;: &#34;What is the etymological root of the word disparage?&#34;,
    &#34;answer&#34;: &#34;From the Old French word &lt;i&gt;&#39;desparagier&#39;&lt;/i&gt;, meaning &#39;marry someone of unequal rank&#39;, which comes from &lt;i&gt;&#39;des-&#39;&lt;/i&gt; (dis-) and &lt;i&gt;&#39;parage&#39;&lt;/i&gt; (equal rank)&#34;
  }]

  You will return answers in JSON only. Answer truthfully and if you don&#39;t know then say so. Keep questions as close as possible to the
  provided examples. Make sure to include an example in the definition question. Use HTML within the strings to nicely format your answers.

  If multiple words are provided, create questions and answers for each of them in one list. 
  
  Only answer in JSON, don&#39;t provide any more text. Valid JSON uses &#34;&#34; quotes to wrap its items."><pre><span>system</span>: <span>|-</span>
<span>  I want you to act as a professional Etomologist and Quiz Generator. You have a deep knowledge of etymology and will be provided with a word. </span>
<span>  The goal is to create cards that quiz on both the etymology and finding the word by its definition.</span>
<span></span>
<span>  The following is a what a perfect answer would like for the word &#34;disparage&#34;</span>
<span></span>
<span>  [{</span>
<span>    &#34;question&#34;: &#34;A verb used to indicate the act of speaking about someone or something in a negative or belittling way.&lt;br/&gt; &lt;i&gt;E.g He would often _______ his coworkers behind their backs.&lt;/i&gt;&#34;,</span>
<span>    &#34;answer&#34;: &#34;disparage&#34;</span>
<span>  },</span>
<span>  {</span>
<span>    &#34;question&#34;: &#34;What is the etymological root of the word disparage?&#34;,</span>
<span>    &#34;answer&#34;: &#34;From the Old French word &lt;i&gt;&#39;desparagier&#39;&lt;/i&gt;, meaning &#39;marry someone of unequal rank&#39;, which comes from &lt;i&gt;&#39;des-&#39;&lt;/i&gt; (dis-) and &lt;i&gt;&#39;parage&#39;&lt;/i&gt; (equal rank)&#34;</span>
<span>  }]</span>
<span></span>
<span>  You will return answers in JSON only. Answer truthfully and if you don&#39;t know then say so. Keep questions as close as possible to the</span>
<span>  provided examples. Make sure to include an example in the definition question. Use HTML within the strings to nicely format your answers.</span>
<span></span>
<span>  If multiple words are provided, create questions and answers for each of them in one list. </span>
<span>  </span>
<span>  Only answer in JSON, don&#39;t provide any more text. Valid JSON uses &#34;&#34; quotes to wrap its items.</span></pre></div>
<p dir="auto">we can now run a command and refer to this prompt with <code>-p etymology</code></p>
<div dir="auto" data-snippet-clipboard-copy-content="chatblade -p etymology gregarious"><pre>chatblade -p etymology gregarious</pre></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/npiv/chatblade/blob/main/assets/example5.png"><img src="https://github.com/npiv/chatblade/raw/main/assets/example5.png"/></a></p>
<p dir="auto">And since we asked for json we can pipe our result to something else e.g.</p>

<h3 tabindex="-1" dir="auto"><a id="user-content-help" aria-hidden="true" href="#help"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Help</h3>
<div dir="auto" data-snippet-clipboard-copy-content="usage: chatblade [-h] [--last] [--prompt-config PROMPT_CONFIG] [--openai-api-key OPENAI_API_KEY] [--temperature TEMPERATURE] [--chat-gpt {3.5,4}] [--extract] [--raw] [--tokens]
                 [query ...]

Chatblade

positional arguments:
  query                 Query to send to chat GPT

options:
  -h, --help            show this help message and exit
  --last, -l            Display the last result. If a query is given the conversation is continued
  --prompt-config PROMPT_CONFIG, -p PROMPT_CONFIG
                        Prompt config name, or file containing a prompt config
  --openai-api-key OPENAI_API_KEY
                        OpenAI API key can also be set as env variable OPENAI_API_KEY
  --temperature TEMPERATURE
                        Temperature (openai setting)
  --chat-gpt {3.5,4}, -c {3.5,4}
                        Chat GPT model (default 3.5)
  --extract, -e         Extract content from response if possible (either json or code block)
  --raw, -r             print the last response as pure text, don&#39;t pretty print or format
  --tokens, -t          Display what *would* be sent, how many tokens, and estimated costs"><pre>usage: chatblade [-h] [--last] [--prompt-config PROMPT_CONFIG] [--openai-api-key OPENAI_API_KEY] [--temperature TEMPERATURE] [--chat-gpt {3.5,4}] [--extract] [--raw] [--tokens]
                 [query ...]

Chatblade

positional arguments:
  query                 Query to send to chat GPT

options:
  -h, --help            show this <span>help</span> message and <span>exit</span>
  --last, -l            Display the last result. If a query is given the conversation is continued
  --prompt-config PROMPT_CONFIG, -p PROMPT_CONFIG
                        Prompt config name, or file containing a prompt config
  --openai-api-key OPENAI_API_KEY
                        OpenAI API key can also be <span>set</span> as env variable OPENAI_API_KEY
  --temperature TEMPERATURE
                        Temperature (openai setting)
  --chat-gpt {3.5,4}, -c {3.5,4}
                        Chat GPT model (default 3.5)
  --extract, -e         Extract content from response <span>if</span> possible (either json or code block)
  --raw, -r             print the last response as pure text, don<span><span>&#39;</span>t pretty print or format</span>
<span>  --tokens, -t          Display what *would* be sent, how many tokens, and estimated costs</span></pre></div>
</article>
          </div></div>
  </body>
</html>
