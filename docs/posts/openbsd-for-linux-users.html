<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.openbsdhandbook.com/openbsd_for_linux_users/">Original</a>
    <h1>OpenBSD for Linux Users</h1>
    
    <div id="readability-page-1" class="page"><article><h2 id="introduction">Introduction
<a href="#introduction">#</a></h2><p>This quickstart guide is intended to quickly familiarize GNU/Linux users with the basics of OpenBSD and will highlight some of the technical differences between OpenBSD and the various GNU/Linux based distributions. It is not intended to be an exhaustive list of differences, nor will it highlight the rather large philosophical differences between OpenBSD and GNU/Linux.</p><blockquote>The guide assumes that OpenBSD is already installed and the user has access to the CLI. An installation guide can be found <a href="https://www.openbsdhandbook.com/installation">here</a>.</blockquote><h2 id="the-shell">The shell
<a href="#the-shell">#</a></h2><p>Bash is not the default shell on OpenBSD and neither is zsh. Instead, the default shell is Korn shell (ksh) for both root and regular users. The so-called command language of ksh is a superset of the sh shell language. This means that all sh code can be run from ksh but not all ksh code can be run from an sh shell.</p><p>Other shells, including Bash and zsh, are available for installation (<code>pkg_add bash zsh</code> as root, <code>chsh -s bash</code> as user). It is recommended that the root user’s shell remains unchanged because non-default shells are installed in the “/usr/local/bin/“ directory, which by default is on a non-root partition. In case of an issue where only the root partition can be mounted, the root user would not have a shell available for it to use and fix the problem. The ksh shell does not have this issue because it is installed in “/bin” on the root partition.</p><h2 id="sudo---doas">Sudo -&gt; doas
<a href="#sudo---doas">#</a></h2><p>The sudo command is not available by default on OpenBSD. Instead, OpenBSD uses the doas command. There’s no default config in place for doas but there’s an example file called <strong>doas.conf</strong> in <strong>/etc/examples/</strong>. To get started, copy the file to /etc: <code>cp /etc/examples/doas.conf /etc/</code>.</p><p>By default, the doas command will ask for a password every time the command is invoked. To change this behaviour and make it more like most sudo implementations (where a successful authentication is cached for some short period of time), add the <em>persist</em> option like in the snippet below.</p><pre><code data-lang="off"># Allow wheel by default
permit persist keepenv :wheel
</code></pre><p>The sudo command/package is available for installation: <code>pkg_add sudo</code>. The two commands can be used interchangeably.</p><h2 id="software">Software
<a href="#software">#</a></h2><h3 id="installation">Installation
<a href="#installation">#</a></h3><p>Additional software packages can be installed using the “<strong>pkg_add</strong>” command. OpenBSD packages are pre-compiled software programs and work in a way similar to rpm and deb packages used by respectively Redhat, Debian, and their respective derivatives. For example, to install the NginX webserver, use the following command:</p><pre><code data-lang="off">$ doas pkg_add nginx
</code></pre><p>Packages that have previously been installed with the pkg_add command, can be deleted using the “<strong>pkg_delete</strong>” command.</p><pre><code data-lang="off">$ doas pkg_delete nginx
</code></pre><h3 id="updating">Updating
<a href="#updating">#</a></h3><p>The OpenBSD philosophy is that the packages in a certain release should be stable. This means that there there will be no updates for a package unless something is broken. In order to fix broken packages, patches are released. These patches can be applied using the <strong>syspatch</strong> command. Use the argument “-c” to only show the available patches for a system.</p><pre><code data-lang="off">$ doas syspatch -c
$ doas syspatch
</code></pre><h3 id="upgrading">Upgrading
<a href="#upgrading">#</a></h3><p>The goal of OpenBSD is to provide a new release about every 6 months. An OpenBSD system can be upgraded using the <strong>sysupgrade</strong> command. The <a href="https://www.openbsdhandbook.com/upgrade">Upgrading OpenBSD</a> section on this site provides more information on the upgrade process.</p><pre><code data-lang="off">$ doas sysupgrade
</code></pre><p>The sysupgrade command upgrades the base system. Any packages installed using pkg_add have to be updated separately using the pkg_add command.</p><pre><code data-lang="off">$ doas pkg_add -Uu
</code></pre><h2 id="networking">Networking
<a href="#networking">#</a></h2><p>Whereas in GNU/Linux distributions network interfaces have a generic name like eth0, eth1, etc, in OpenBSD network interfaces are named using the shorthand name of the driver for that network interface. For example, Realtek network interface cards will be called re0, re1, etc, while Broadcom network interface cards will be called bge0, bge1, etc.</p><h3 id="ip-configuration">IP configuration
<a href="#ip-configuration">#</a></h3><p>The IP configuration is set using the <strong>hostname.if</strong> file where the “if” part stands for the name of the network interface on the system. The first part, “hostname”, is <strong>not</strong> a variable for the actual hostname of the system. Using the example above, the file “/etc/hostname.re0” would contain the configuration for the re0 Realtek network interface.</p><p>The content of the hostname.if file for an internal interface might look something like the following.</p><pre><code data-lang="off">inet 10.0.0.100 255.255.255.0
</code></pre><p>For an interface that has both IPv4 and IPv6 enabled, the file looks like this.</p><pre><code data-lang="off">inet xx.xx.xx.xx 255.255.255.0
inet6 xxxx:6000:9344::154 64 -soii
</code></pre><p>In order to enable DHCP on an interface, the config looks like this.</p><pre><code data-lang="off">dhcp
</code></pre><p>Manually setting the interface configuration is also possible and can be done using the ifconfig command. See the below for an example but keep in mind that these changes are only temporary. In order to make them permanent, add the config to the respective configuration file.</p><pre><code data-lang="off">$ doas ifconfig re0 10.0.0.100 255.255.255.0
</code></pre><p>In order to apply any changes made in the configuration files to the network interface, the network should be restarted. In OpenBSD, this is done using the same script that is invoked during in the startup process: <strong>/etc/netstart</strong>. Execute the script to reload all network configurations but it’s also possible to provide an interface name as argument and to restart that specific interface.</p><pre><code data-lang="off">$ doas sh /etc/netstart re1
</code></pre><h3 id="hostname">Hostname
<a href="#hostname">#</a></h3><p>The default hostname is set in a file called <strong>/etc/myname</strong>. The file should contain a single line specifying the fully qualified domain name (FQDN) of the system. The name must be resolvable, either by matching a hostname specified in /etc/hosts or through DNS.</p><pre><code data-lang="off">host.example.com
</code></pre><p>Use the <code>sh /etc/netstart</code> command to apply any changes.</p><h3 id="gateway">Gateway
<a href="#gateway">#</a></h3><p>The default gateway is set in the <strong>/etc/mygate</strong> file. If the file does not exist or is empty, no default gateway is set. The file may contain an IPv4 address, an IPv6 address, or both on separate lines. In case more than one address from the same address family is added, only the first will be used.</p><pre><code data-lang="off">192.0.2.1
xxxx:6000:9344::1
</code></pre><p>Use the <code>sh /etc/netstart</code> command to apply any changes.</p><h3 id="dns">DNS
<a href="#dns">#</a></h3><p>The name server configuration is defined in the <strong>/etc/resolv.conf</strong> file.</p><pre><code data-lang="off">nameserver 192.0.2.1
lookup file bind
</code></pre><p>Use the <code>sh /etc/netstart</code> command to apply any changes.</p><h2 id="daemons">Daemons
<a href="#daemons">#</a></h2><h3 id="init">Init
<a href="#init">#</a></h3><p>Whereas most GNU/Linux distributions use either SystemD or the SysV init system, OpenBSD uses the traditional BSD-style init system. BSD-style means that there are no run-levels and there’s no inittab. Instead, startup is controlled by init and rc scripts.</p><p>The system defaults can be found in <strong>/etc/rc.conf</strong> but that file should not be edited directly. Instead, the <strong>/etc/rc.conf.local</strong> file should be used. Both in order to overwrite values defined in /etc/rc.conf as well as any other user defined values.</p><p>For example, in order to start the OpenBSD httpd webserver during boot, either use the rcctl command referenced below or add the following line to the /etc/rc.conf.local file manually.</p><pre><code data-lang="off">httpd_flags=
</code></pre><h3 id="rcctl">rcctl
<a href="#rcctl">#</a></h3><p>The <strong>rcctl</strong> command is used to control daemons on OpenBSD. The command allows, amongst others, the starting, stopping, reloading, and enabling and disabling of daemons.</p><pre><code data-lang="off">$ doas rcctl start httpd
$ doas rcctl stop httpd
$ doas rcctl reload httpd
</code></pre><p>To start the httpd webserver automatically during boot, execute the following.</p><pre><code data-lang="off">$ doas rcctl enable httpd
</code></pre><p>To stop the webserver from starting during boot, execute the following.</p><pre><code data-lang="off">$ doas rcctl disable httpd
</code></pre><h2 id="services">Services
<a href="#services">#</a></h2><p>Although an OpenBSD system is largely capable to</p><h2 id="miscellaneous-commands">Miscellaneous Commands
<a href="#miscellaneous-commands">#</a></h2><table><thead><tr><th>GNU/Linux command (Redhat/Debian)</th><th>OpenBSD equivalent</th><th>Purpose</th></tr></thead><tbody><tr><td>yum install / apt-get install <em>package</em></td><td>pkg_add <em>package</em></td><td>Install package from remote repository</td></tr><tr><td>rpm -i /dpkg -i <em>package</em></td><td>pkg_add <em>package</em></td><td>Install local package</td></tr><tr><td>rpm -qa / dpkg -l</td><td>pkg_info</td><td>List installed packages</td></tr><tr><td>lspci</td><td>pcidump</td><td>List PCI devices</td></tr><tr><td>lsusb</td><td>usbdevs</td><td>List USB devices</td></tr></tbody></table></article></div>
  </body>
</html>
