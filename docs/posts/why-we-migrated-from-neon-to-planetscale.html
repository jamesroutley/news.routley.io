<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.opensecret.cloud/why-we-migrated-from-neon-to-planetscale/">Original</a>
    <h1>Why We Migrated from Neon to PlanetScale</h1>
    
    <div id="readability-page-1" class="page"><section>
                <p>In May 2025, during the same week Neon announced their acquisition, our databases went down four times. For hours. Database spin-ups, their entire value proposition, were completely disabled. Our &#34;serverless&#34; databases couldn&#39;t even start.</p><p>That was the final straw in our decision to migrate to PlanetScale.</p><h2 id="who-we-are-and-why-databases-matter-more">Who We Are and Why Databases Matter More</h2><p>At <a href="https://opensecret.cloud/?ref=blog.opensecret.cloud">OpenSecret</a>, we&#39;re building something unique: a confidential computing platform powered by AWS Nitro Enclaves. Our flagship application, <a href="https://trymaple.ai/?ref=blog.opensecret.cloud">Maple AI</a>, provides truly private AI chat where even we can&#39;t see user data.</p><p>Here&#39;s how it works: User data is encrypted client-side before leaving their device. It travels encrypted to our servers, where it&#39;s processed inside hardware-isolated enclaves with encrypted memory. Even with root access to our servers, you can&#39;t decrypt user data. Only the verified secure enclave can.</p><p>This architecture means our database stores encrypted blobs that are meaningless without the enclave&#39;s isolated computation environment. <strong>Even our database provider cannot read our users&#39; data.</strong> But this makes reliability absolutely critical, we can&#39;t just &#34;peek&#34; at the data to debug issues. When something goes wrong, we&#39;re debugging blind unless we have excellent observability tools.</p><p>We have thousands of users generating thousands of chats daily. Lawyers discussing sensitive cases. Executives planning strategy. Developers working on proprietary code. They trust us because their data is mathematically guaranteed to be private. But that trust evaporates quickly when the service is unavailable.</p><h2 id="the-breaking-point-with-neon">The Breaking Point with Neon</h2><p>Neon&#39;s scale-to-zero architecture seemed clever initially, why pay for idle databases? But for an always-on AI chat application where users expect instant responses, the cold starts and spin-up delays were problematic.</p><p>The May outages during their acquisition week were devastating. Four separate incidents where databases were down for hours. The core feature we relied on, databases spinning up on demand, completely failed.</p><p>Beyond reliability, we faced other challenges:</p><ul><li><strong>Usage-based pricing</strong> that punished our success, the more users chatted, the more we paid</li><li><strong>Zero observability</strong> into performance metrics like p99 latency</li><li><strong>No query-level insights</strong> to optimize our encrypted workloads</li></ul><p>At $250/month for 4 databases without any replicas, we were paying premium prices for subpar reliability.</p><h2 id="why-planetscale-won">Why PlanetScale Won</h2><p>We evaluated several alternatives:</p><ul><li><strong>AWS RDS</strong>: Enterprise-grade but enterprise-priced, with limited innovation</li><li><strong>Supabase</strong>: Great for prototypes, but we needed production reliability</li><li><strong>Self-hosted</strong>: We&#39;re a small team building complex infrastructure, we can&#39;t afford database administration</li></ul><p>PlanetScale stood out because they&#39;re laser-focused on being the best database platform. While they built their reputation on MySQL with Vitess, they&#39;ve brought that same excellence to PostgreSQL. They&#39;re not trying to be everything to everyone, just the best at databases.</p><h2 id="the-migration-surprisingly-smooth">The Migration: Surprisingly Smooth</h2><p>Using PlanetScale&#39;s <a href="https://github.com/planetscale/migration-scripts?ref=blog.opensecret.cloud">open-source migration scripts</a>, we achieved zero-downtime migration. No maintenance windows. No frantic debugging. No angry users.</p><p>What stood out was PlanetScale&#39;s support throughout the process. They hosted a PostgreSQL migration webinar that walked through exactly what we needed to know. When I hit edge cases in my dev environment, their team responded to my emails quickly with detailed answers that actually solved my problems.</p><p>The process was remarkably straightforward. Since we&#39;re mostly moving encrypted blobs, we didn&#39;t have to worry about complex data transformations or compatibility issues. Our users never knew we switched. They just noticed everything got faster.</p><h2 id="the-numbers-that-matter">The Numbers That Matter</h2><h3 id="performance">Performance</h3><ul><li><strong>P99 latency</strong>: Now consistently at <strong>1.0ms</strong> (Neon provided zero visibility into this)</li><li><strong>API response times</strong>: Our slowest billing endpoint dropped from <strong>550ms to 300ms</strong>, a 45% improvement</li><li><strong>Query insights</strong>: Finally, we can see which queries need optimization</li></ul><h3 id="cost-structure">Cost Structure</h3><ul><li><strong>Neon</strong>: $250/month for 4 databases with usage-based pricing, no replicas</li><li><strong>PlanetScale</strong>: $156/month for 4 databases + 8 replicas, all running 100% of the time</li></ul><p>The difference is striking. Neon&#39;s usage-based pricing meant our costs scaled with user engagement. PlanetScale provides predictable pricing with databases and replicas running continuously. We&#39;re paying <strong>38% less</strong> while getting <strong>3x the infrastructure</strong>. Including automatic failover protection with those 8 replicas running 24/7.</p><h3 id="reliability">Reliability</h3><ul><li><strong>Downtime since migration</strong>: Zero</li><li><strong>Automatic failovers</strong>: Built-in with replicas</li><li><strong>Database-related incidents</strong>: None</li></ul><h2 id="the-observability-game-changer">The Observability Game-Changer</h2><p>With Neon, we were flying blind. No p99 metrics. No query-level insights. When something was slow, we guessed.</p><p>PlanetScale Insights transformed our operations. We can now see:</p><ul><li>Which query patterns are struggling</li><li>Where indexes would help</li><li>How our system behaves under load</li><li>Actual performance metrics that matter</li></ul><p>This is crucial for our encrypted architecture. While we can&#39;t see much of the actual data, PlanetScale&#39;s tooling lets us optimize based on query patterns and performance metrics. We can identify slow queries, missing indexes, and performance bottlenecks, all without ever seeing the encrypted content. It&#39;s exactly the kind of observability we need for confidential computing.</p><h2 id="building-on-solid-ground">Building on Solid Ground</h2><p>The migration transformed our development experience. We&#39;ve moved from constantly worrying about database availability to actually optimizing performance. Database work no longer blocks product development, it&#39;s just another routine task we can handle with confidence.</p><p>Features we&#39;re excited to explore as we scale:</p><ul><li><strong>Branching</strong>: Perfect for our development workflow</li><li><strong>Metal</strong>: The performance tier we can grow into</li><li><a href="https://planetscale.com/blog/announcing-neki?ref=blog.opensecret.cloud"><strong>Neki sharding</strong></a>: Ready when we need horizontal scaling</li></ul><h2 id="looking-forward">Looking Forward</h2><p>As we scale Maple AI and onboard our first dev customers to OpenSecret, we&#39;re confident in our foundation. PlanetScale has proven to be the database partner we needed, one that&#39;s obsessed with database excellence and provides the reliability and observability our unique architecture demands.</p><p>The partnership works because of clear focus: we concentrate on making the best confidential computing platform possible, while PlanetScale focuses exclusively on making databases great. When your database just works, you can focus on what actually matters: building great products for your users.</p>
            </section></div>
  </body>
</html>
