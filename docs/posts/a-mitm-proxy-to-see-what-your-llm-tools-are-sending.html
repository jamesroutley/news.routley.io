<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/jmuncor/sherlock">Original</a>
    <h1>Show HN: A MitM proxy to see what your LLM tools are sending</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
  <p dir="auto">
    <strong>Token Tracker for LLM CLI Tools</strong>
  </p>
  <p dir="auto">
    <a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/f12b46fe26968f97149ee10725a248ec02c28ce205f9f5d3c40ef06a38de8ea0/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f707974686f6e2d332e31302b2d3337373641423f6c6f676f3d707974686f6e266c6f676f436f6c6f723d7768697465"><img src="https://camo.githubusercontent.com/f12b46fe26968f97149ee10725a248ec02c28ce205f9f5d3c40ef06a38de8ea0/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f707974686f6e2d332e31302b2d3337373641423f6c6f676f3d707974686f6e266c6f676f436f6c6f723d7768697465" alt="Python" data-canonical-src="https://img.shields.io/badge/python-3.10+-3776AB?logo=python&amp;logoColor=white"/></a>
    <a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/8bb50fd2278f18fc326bf71f6e88ca8f884f72f179d3e555e20ed30157190d0d/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d4d49542d677265656e2e737667"><img src="https://camo.githubusercontent.com/8bb50fd2278f18fc326bf71f6e88ca8f884f72f179d3e555e20ed30157190d0d/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d4d49542d677265656e2e737667" alt="License" data-canonical-src="https://img.shields.io/badge/license-MIT-green.svg"/></a>
    <a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/09bd1562a600554ab1374f91b4008b5ab76f2b940faeb41a15b6946cffc63a62/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f706c6174666f726d2d6d61634f532532302537432532304c696e75782d6c69676874677265792e737667"><img src="https://camo.githubusercontent.com/09bd1562a600554ab1374f91b4008b5ab76f2b940faeb41a15b6946cffc63a62/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f706c6174666f726d2d6d61634f532532302537432532304c696e75782d6c69676874677265792e737667" alt="Platform" data-canonical-src="https://img.shields.io/badge/platform-macOS%20%7C%20Linux-lightgrey.svg"/></a>
    <a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/c218c58e48b7f31182f3664134ce3747a222f0b408afa99f62edf37b0493860a/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f436c617564655f436f64652d737570706f727465642d626c756576696f6c65742e737667"><img src="https://camo.githubusercontent.com/c218c58e48b7f31182f3664134ce3747a222f0b408afa99f62edf37b0493860a/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f436c617564655f436f64652d737570706f727465642d626c756576696f6c65742e737667" alt="Claude Code" data-canonical-src="https://img.shields.io/badge/Claude_Code-supported-blueviolet.svg"/></a>
    <a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/b8bb6c31bf306ffc19082cfae80ff75e76ca5b56043ea7807481a107ecf2bc54/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f47656d696e695f434c492d737570706f727465642d626c75652e737667"><img src="https://camo.githubusercontent.com/b8bb6c31bf306ffc19082cfae80ff75e76ca5b56043ea7807481a107ecf2bc54/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f47656d696e695f434c492d737570706f727465642d626c75652e737667" alt="Gemini" data-canonical-src="https://img.shields.io/badge/Gemini_CLI-supported-blue.svg"/></a>
    <a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/e6f5e69ee333710b88d48195c2e538385987c01b80dae51cdcabb072746a2526/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f436f6465782d737570706f727465642d677265656e2e737667"><img src="https://camo.githubusercontent.com/e6f5e69ee333710b88d48195c2e538385987c01b80dae51cdcabb072746a2526/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f436f6465782d737570706f727465642d677265656e2e737667" alt="Codex" data-canonical-src="https://img.shields.io/badge/Codex-supported-green.svg"/></a>
  </p>
  <p dir="auto">
    <a href="#installation">Installation</a> •
    <a href="#quick-start">Quick Start</a> •
    <a href="#features">Features</a> •
    <a href="#commands">Commands</a> •
    <a href="#contributing">Contributing</a>
  </p>

<hr/>
<p dir="auto">Sherlock tracks token usage for LLM CLI tools with a live terminal dashboard. See exactly how many tokens you&#39;re using in real-time.</p>

<ul dir="auto">
<li><strong>Track Token Usage</strong>: See exactly how many tokens each request consumes</li>
<li><strong>Monitor Context Windows</strong>: Visual fuel gauge shows cumulative usage against your limit</li>
<li><strong>Debug Prompts</strong>: Automatically saves every prompt as markdown and JSON for review</li>
<li><strong>Zero Configuration</strong>: No certificates, no setup - just install and go</li>
</ul>

<div dir="auto" data-snippet-clipboard-copy-content="git clone https://github.com/jmuncor/sherlock.git
cd sherlock
pip install -e ."><pre>git clone https://github.com/jmuncor/sherlock.git
<span>cd</span> sherlock
pip install -e <span>.</span></pre></div>

<ul dir="auto">
<li>Python 3.10+</li>
</ul>

<div dir="auto"><h3 tabindex="-1" dir="auto">Terminal 1: Start the Dashboard</h3><a id="user-content-terminal-1-start-the-dashboard" aria-label="Permalink: Terminal 1: Start the Dashboard" href="#terminal-1-start-the-dashboard"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>

<p dir="auto">You&#39;ll be prompted to choose where to save captured prompts, then the dashboard appears:</p>
<div data-snippet-clipboard-copy-content="┌─────────────────────────────────────────────────────────────┐
│  SHERLOCK - LLM Traffic Inspector                           │
├─────────────────────────────────────────────────────────────┤
│  Context Usage  ████████████░░░░░░░░░░░░░░░░  42%           │
│                 (84,231 / 200,000 tokens)                   │
├─────────────────────────────────────────────────────────────┤
│  Time     Provider    Model                      Tokens     │
│  14:23:01 Anthropic   claude-sonnet-4-20250514   12,847     │
│  14:23:45 Anthropic   claude-sonnet-4-20250514   8,234      │
│  14:24:12 Anthropic   claude-sonnet-4-20250514   15,102     │
├─────────────────────────────────────────────────────────────┤
│  Last Prompt: &#34;Can you help me refactor this function...&#34;   │
└─────────────────────────────────────────────────────────────┘"><pre><code>┌─────────────────────────────────────────────────────────────┐
│  SHERLOCK - LLM Traffic Inspector                           │
├─────────────────────────────────────────────────────────────┤
│  Context Usage  ████████████░░░░░░░░░░░░░░░░  42%           │
│                 (84,231 / 200,000 tokens)                   │
├─────────────────────────────────────────────────────────────┤
│  Time     Provider    Model                      Tokens     │
│  14:23:01 Anthropic   claude-sonnet-4-20250514   12,847     │
│  14:23:45 Anthropic   claude-sonnet-4-20250514   8,234      │
│  14:24:12 Anthropic   claude-sonnet-4-20250514   15,102     │
├─────────────────────────────────────────────────────────────┤
│  Last Prompt: &#34;Can you help me refactor this function...&#34;   │
└─────────────────────────────────────────────────────────────┘
</code></pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">Terminal 2: Run Your LLM Tool</h3><a id="user-content-terminal-2-run-your-llm-tool" aria-label="Permalink: Terminal 2: Run Your LLM Tool" href="#terminal-2-run-your-llm-tool"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto" data-snippet-clipboard-copy-content="# For Claude Code
sherlock claude

# For Gemini CLI (see known issues)
sherlock gemini

# For OpenAI Codex
sherlock codex"><pre><span><span>#</span> For Claude Code</span>
sherlock claude

<span><span>#</span> For Gemini CLI (see known issues)</span>
sherlock gemini

<span><span>#</span> For OpenAI Codex</span>
sherlock codex</pre></div>
<p dir="auto">That&#39;s it! Watch the dashboard update in real-time as you work.</p>


<p dir="auto">Real-time token tracking with color-coded fuel gauge:</p>
<ul dir="auto">
<li>Green: &lt; 50% of limit</li>
<li>Yellow: 50-80% of limit</li>
<li>Red: &gt; 80% of limit</li>
</ul>

<p dir="auto">Every intercepted request is saved to your chosen directory:</p>
<ul dir="auto">
<li><strong>Markdown</strong> - Human-readable format with metadata</li>
<li><strong>JSON</strong> - Raw API request body for debugging</li>
</ul>

<p dir="auto">When you exit, see your total usage:</p>
<div data-snippet-clipboard-copy-content="Session complete. Total: 84,231 tokens across 12 requests."><pre><code>Session complete. Total: 84,231 tokens across 12 requests.
</code></pre></div>

<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>sherlock start</code></td>
<td>Start the proxy and dashboard</td>
</tr>
<tr>
<td><code>sherlock claude</code></td>
<td>Run Claude Code with proxy configured</td>
</tr>
<tr>
<td><code>sherlock gemini</code></td>
<td>Run Gemini CLI with proxy configured</td>
</tr>
<tr>
<td><code>sherlock codex</code></td>
<td>Run OpenAI Codex CLI with proxy configured</td>
</tr>
<tr>
<td><code>sherlock run --provider &lt;name&gt; &lt;cmd&gt;</code></td>
<td>Run any command with proxy configured</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>

<div dir="auto" data-snippet-clipboard-copy-content="sherlock start [OPTIONS]

Options:
  -p, --port NUM    Proxy port (default: 8080)
  -l, --limit NUM   Token limit for fuel gauge (default: 200000)"><pre>sherlock start [OPTIONS]

Options:
  -p, --port NUM    Proxy port (default: 8080)
  -l, --limit NUM   Token limit <span>for</span> fuel gauge (default: 200000)</pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="sherlock claude [OPTIONS] [ARGS]...

Options:
  -p, --port NUM    Proxy port (default: 8080)"><pre>sherlock claude [OPTIONS] [ARGS]...

Options:
  -p, --port NUM    Proxy port (default: 8080)</pre></div>

<div data-snippet-clipboard-copy-content="┌─────────────────────────────────────────────────────────────────┐
│  Terminal 1: sherlock start                                      │
│  ┌─────────────────────────────────────────────────────────────┐│
│  │  HTTP Proxy (localhost:8080)                                ││
│  │  + Dashboard                                                ││
│  │  + Prompt Archive                                           ││
│  └─────────────────────────────────────────────────────────────┘│
└───────────────────────────────┬─────────────────────────────────┘
                                │ HTTP
                                │
┌───────────────────────────────┴─────────────────────────────────┐
│  Terminal 2: sherlock claude                                     │
│  ┌─────────────────────────────────────────────────────────────┐│
│  │  Sets ANTHROPIC_BASE_URL=http://localhost:8080              ││
│  │  Runs: claude                                               ││
│  └─────────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────────┘
                                │
                                │ HTTPS
                                ▼
                      ┌───────────────────┐
                      │ api.anthropic.com │
                      └───────────────────┘"><pre><code>┌─────────────────────────────────────────────────────────────────┐
│  Terminal 1: sherlock start                                      │
│  ┌─────────────────────────────────────────────────────────────┐│
│  │  HTTP Proxy (localhost:8080)                                ││
│  │  + Dashboard                                                ││
│  │  + Prompt Archive                                           ││
│  └─────────────────────────────────────────────────────────────┘│
└───────────────────────────────┬─────────────────────────────────┘
                                │ HTTP
                                │
┌───────────────────────────────┴─────────────────────────────────┐
│  Terminal 2: sherlock claude                                     │
│  ┌─────────────────────────────────────────────────────────────┐│
│  │  Sets ANTHROPIC_BASE_URL=http://localhost:8080              ││
│  │  Runs: claude                                               ││
│  └─────────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────────┘
                                │
                                │ HTTPS
                                ▼
                      ┌───────────────────┐
                      │ api.anthropic.com │
                      └───────────────────┘
</code></pre></div>

<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Provider</th>
<th>Command</th>
<th>Status</th>
</tr>
</thead>
<tbody>
<tr>
<td>Anthropic (Claude Code)</td>
<td><code>sherlock claude</code></td>
<td>Supported</td>
</tr>
<tr>
<td>Google (Gemini CLI)</td>
<td><code>sherlock gemini</code></td>
<td>Blocked by upstream issue</td>
</tr>
<tr>
<td>OpenAI (Codex)</td>
<td><code>sherlock codex</code></td>
<td>Supported</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>


<p dir="auto">Gemini CLI currently has a <a href="https://github.com/google-gemini/gemini-cli/issues/15430" data-hovercard-type="issue" data-hovercard-url="/google-gemini/gemini-cli/issues/15430/hovercard">known issue</a> where it ignores custom base URLs when using OAuth authentication. Sherlock&#39;s Gemini support will work automatically once the Gemini CLI team fixes this issue.</p>

<p dir="auto">Contributions are welcome! Here&#39;s how you can help:</p>
<ol dir="auto">
<li><strong>Fork</strong> the repository</li>
<li><strong>Create</strong> a feature branch (<code>git checkout -b feature/amazing-feature</code>)</li>
<li><strong>Commit</strong> your changes (<code>git commit -m &#39;Add amazing feature&#39;</code>)</li>
<li><strong>Push</strong> to the branch (<code>git push origin feature/amazing-feature</code>)</li>
<li><strong>Open</strong> a Pull Request</li>
</ol>

<div dir="auto" data-snippet-clipboard-copy-content="git clone https://github.com/jmuncor/sherlock.git
cd sherlock
python -m venv venv
source venv/bin/activate
pip install -e ."><pre>git clone https://github.com/jmuncor/sherlock.git
<span>cd</span> sherlock
python -m venv venv
<span>source</span> venv/bin/activate
pip install -e <span>.</span></pre></div>

<p dir="auto">This project is licensed under the MIT License - see the <a href="https://ntietz.com/jmuncor/sherlock/blob/main/LICENSE">LICENSE</a> file for details.</p>
<hr/>
<p dir="auto">
  <em>See what&#39;s really being sent to the LLM. Track. Learn. Optimize.</em>
</p>
</article></div></div>
  </body>
</html>
