<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://furbo.org/2023/07/09/an-alerting-vista-of-sonoma/">Original</a>
    <h1>An Alerting Vista of macOS Sonoma</h1>
    
    <div id="readability-page-1" class="page"><article id="post-2652">

	<!-- .entry-header -->

	<div>
		
<p>There’s a new “feature” in Sonoma, and no one besides Apple is quite sure what it is.</p>



<p>Alerts for deprecated APIs are now <a href="https://www.youtube.com/watch?v=MyGUrPxG1iM">appearing frequently</a>. Sometimes when you launch an app, and sometimes at random. Here are three I got the other day after waking a MacBook from sleep:</p>



<figure><img src="https://furbo.org/wp-content/uploads/2023/07/Sonoma-Alert.jpg" alt=""/><figcaption>Mysterious Alerts.</figcaption></figure>



<p>From a UI point-of-view, these alerts have serious issues:</p>



<ul><li>They are scary and not actionable.</li><li>The only unique information is the title. The name, however, is not something I recognize.</li><li>I know what a deprecated API is and how its removal can be a bad thing, but ordinary users won’t.</li><li>There is no mention of what API caused the alert.</li><li>I’m advised to contact the developer for an updated version, but there is no information on who that developer is. (In the screenshot above, I’m assuming the developer is Apple itself, so I notified them with FB12560773, FB12560774, FB12560776).</li></ul>



<p>But the UI is just the beginning of the fun. Once the developer is notified, the lack of information for this “feature” prevents the deprecation from being addressed.</p>



<p>This alert is mentioned in the <a href="https://developer.apple.com/documentation/macos-release-notes/macos-14-release-notes#ATS-and-ATSUI">release notes</a> for the first beta for Sonoma. The brevity of that note is surprising for such a prominent and important addition to macOS.</p>



<p>I suspect that the brevity of the alert’s text is to shield the customer from unfamiliar terminology and complexity. It’s like a check engine light in your car: it comes on and you know to get to a mechanic ASAP.</p>



<p>When you get to the mechanic, they have diagnostic tools that let them understand what’s wrong (the engine control unit will typically store a unique code).</p>



<p>The difference with this “feature” is that folks like me are the mechanics and we have no diagnostic code. Supposedly, this alert should only appear with the use of ATS or ATSUI (per the release notes), but I find it hard to believe that modern system framework components show above are using Apple Type Services that were <a href="https://en.wikipedia.org/wiki/Apple_Type_Services_for_Unicode_Imaging">replaced 13 years ago</a>. But maybe they are – we all embed frameworks into our apps, some where we have source code, others where we do not.</p>



<p>The alerts also have another hideous “feature”. They turn themselves off as soon as you hit the OK button. They never repeat, so it’s impossible to bisect the code to find and verify a fix.</p>



<p>It’s like having your check engine like go off the next time you start the car, and the diagnostic code being removed by the time you get to the repair shop. Developers reaction to these reports will be the same as your local mechanic: “I don’t know what’s wrong. Good luck.”</p>



<p>If Apple wants developers to repair these deprecations they need to make major changes:</p>



<ul><li>Document the behavior, including all of the APIs that trigger it.</li><li>Tell developers if this is something that will only appear in the beta or if it will be a part of the final release.</li><li>Give the customer something to work with when communicating with the developer. A diagnostic code at a minimum.</li><li>Log information about what caused the issue: remember that it may not be the developer’s own code triggering the alert. Plugins, embedded libraries, and external frameworks should be a part of the log. These logs should be available to customers so they can provide it to developers.</li><li>Give developers a way to reset the alerts. Make fixes testable.</li></ul>



<p>Without these changes a Mac user’s future is one with a lot of crashes caused by deprecated code.</p>



<p><strong>NOTE:</strong> This blog post has been submitted as feedback. If you find this situation intolerable, please submit a duplicate titled “Mysterious deprecation alerts in Sonoma” with a reference to FB12560999 and a  link to this blog post.</p>
	</div><!-- .entry-content -->

	<!-- .entry-footer -->

</article></div>
  </body>
</html>
