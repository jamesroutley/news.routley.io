<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/weather-gov/weather.gov">Original</a>
    <h1>Weather.gov 2.0</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<div dir="auto"><h2 tabindex="-1" dir="auto">Background and core problem</h2><a id="user-content-background-and-core-problem" aria-label="Permalink: Background and core problem" href="#background-and-core-problem"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><strong>Weather.gov is owned by the National Weather Service (NWS).</strong> Weather.gov and associated applications are frequently in the Top-10 list of most-visited federal websites with 1.5 billion visits per year. They are a major source of life and property-saving weather/water/climate information for the public and partners. Often they are the only source for on-demand, detailed weather/water/climate information from 122 Weather Forecast Offices.</p>
<p dir="auto"><strong>The fundamental problem that we’ve observed</strong> is that weather.gov reflects its organizational silos (Conway&#39;s Law) more than its users’ needs. A lack of overall strategy, feedback/monitoring, and tools have perpetuated this problem.</p>
<p dir="auto">This has led to a disorganized repository of valuable information that external users struggle to use and internal users struggle to manage.</p>
<p dir="auto">We will know that we are progressing forward on this problem if people find the information faster, understand it better, continue to see NWS as the authoritative source, and maintain that progress.</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Vision, mission, and strategy for MVP</h2><a id="user-content-vision-mission-and-strategy-for-mvp" aria-label="Permalink: Vision, mission, and strategy for MVP" href="#vision-mission-and-strategy-for-mvp"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">Our vision is that anyone can understand the impact of impending weather. When it comes to making decisions to save life and property, every word and every minute matters.</h3><a id="user-content-our-vision-is-that-anyone-can-understand-the-impact-of-impending-weather-when-it-comes-to-making-decisions-to-save-life-and-property-every-word-and-every-minute-matters" aria-label="Permalink: Our vision is that anyone can understand the impact of impending weather. When it comes to making decisions to save life and property, every word and every minute matters." href="#our-vision-is-that-anyone-can-understand-the-impact-of-impending-weather-when-it-comes-to-making-decisions-to-save-life-and-property-every-word-and-every-minute-matters"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><strong>Our mission</strong> is to rebuild weather.gov to reflect the integrity and care NWS has for the people you serve.</p>
<p dir="auto">Weather.gov 2.0 will only succeed if everyone with NWS sees the site reflect their values, much like the agency. Because the mission and culture at NWS is built around serving, preparing, and protecting people, the site must do the same.</p>
<p dir="auto"><strong>Our strategy</strong> for our Minimal Viable Product (MVP) is to make it easier to communicate forecasts and conditions for regular and hazardous weather in a way that anyone can find, understand, and use to take action.</p>
<p dir="auto"><strong>Our primary outcomes</strong> for MVP include:</p>
<ul dir="auto">
<li>Make it easier to communicate the impact of impending, regular and hazardous weather</li>
<li>Anyone can find, understand, and use the information take action</li>
<li>A sustainable and compliant system</li>
</ul>
<p dir="auto"><strong>Our primary users</strong> for MVP include:</p>
<ul dir="auto">
<li>Internal - NWS Meteorologists</li>
<li>External - The Public and Emergency Managers</li>
</ul>

<p dir="auto"><strong>Strategy for prioritization</strong></p>
<ul dir="auto">
<li>Now - Prototype individual parts to inform key decisions and evaluate risk</li>
<li>Next - Start building the simplest thing possible</li>
<li>Later - Add complexity, ASAP</li>
</ul>
<table>
<thead>
<tr>
<th>Phase</th>
<th>Priorities</th>
</tr>
</thead>
<tbody>
<tr>
<td>Done - Prototype</td>
<td><ul dir="auto"><li>Partners / gen public view weather basics</li><li>CMS requirements and viable options</li><li>Critical data integrations</li><li>BONUS: Critical third party integrations</li><li>User validation</li></ul></td>
</tr>
<tr>
<td><strong>Now - Build MVP</strong></td>
<td><ul dir="auto"><li>A “happy path” for NWS forecasters and public users</li><li>Core needs across locations</li><li>Core architecture - CMS, Admin experience, User experience, data integrations, CI/CD pipeline</li><li>Initial governance</li><li>User validation</li></ul></td>
</tr>
<tr>
<td>Next - Expand</td>
<td><ul dir="auto"><li>“Unhappy paths” for forecasters and public users</li><li>Multiple locations, geographies, or specialized services</li><li>More comprehensive governance</li><li>User validation</li></ul></td>
</tr>
<tr>
<td>Later</td>
<td><ul dir="auto"><li>Transition and migration</li><li>Continuous improvement</li></ul></td>
</tr>
</tbody>
</table>
<p dir="auto"><strong>Initial roadmap can be viewed <a href="https://github.com/weather-gov/weather.gov/blob/main/doc/product/mvp-roadmap.md">here</a></strong></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/weather-gov/weather.gov/blob/main/docs/img/happy-path-v2.png"><img src="https://github.com/weather-gov/weather.gov/raw/main/docs/img/happy-path-v2.png" alt="happy path journey map"/></a></p>
<div dir="auto"><h2 tabindex="-1" dir="auto">How will we ultimately succeed or fail</h2><a id="user-content-how-will-we-ultimately-succeed-or-fail" aria-label="Permalink: How will we ultimately succeed or fail" href="#how-will-we-ultimately-succeed-or-fail"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>

<ul dir="auto">
<li>all regions and programs work in good faith with the team when the site is ready to expand and cover their needs</li>
<li>decisions are made by those closest to the work, backed by data</li>
<li>we start small with a small group and bring it to more and more people</li>
<li>having the space to test and iteratively improve</li>
<li>Continuously get feedback on working code, over memos and proposals</li>
</ul>

<ul dir="auto">
<li>The site is mandated, instead of organically adopted</li>
<li>We do a big splash rollout</li>
<li>A single miss is considered a failure of the project instead of a learning experience to inform the next version</li>
<li>Decisions are informed by opinions and perceptions, over observations and data</li>
<li>Everyone’s explicit commitment is required to begin development</li>
<li>Everyone’s feedback has to be factored into the solution</li>
<li>The product team works in isolation from the rest of the NWS</li>
</ul>

<p dir="auto">This project is in the worldwide <a href="https://github.com/weather-gov/weather.gov/blob/main/LICENSE.md">public domain</a>. As stated in <a href="https://github.com/weather-gov/weather.gov/blob/main/CONTRIBUTING.md">CONTRIBUTING</a>:</p>
<blockquote>
<p dir="auto">This project is in the public domain within the United States, and copyright and related
rights in the work worldwide are waived through the
<a href="https://creativecommons.org/publicdomain/zero/1.0/" rel="nofollow">CC0 1.0 Universal public domain dedication</a>.</p>
<p dir="auto">All contributions to this project will be released under the CC0 dedication. By submitting a pull
request, you are agreeing to comply with this waiver of copyright interest.</p>
</blockquote>

<p dir="auto">Type: Traditional CMS (aka Legacy, United, Headful :laugh:)
Stack: Docker Drupal Image (Apache, PHP, Composer, MariaDB)
Languages and frameworks: PHP, Symfony, Twig</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Getting Drupal 10 running in Docker</h2><a id="user-content-getting-drupal-10-running-in-docker" aria-label="Permalink: Getting Drupal 10 running in Docker" href="#getting-drupal-10-running-in-docker"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Docker does all the heavy lifting for set up and configurations. It&#39;s a cinch to get up and running. Make sure you have Docker installed locally.</p>
<ol dir="auto">
<li>Clone this repository into a new directory and <code>cd</code> into it.</li>
<li>Run <code>docker compose up</code> from the command line. Alternatively, install the
<a href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-docker" rel="nofollow">Docker plugin</a>
in VSCode, then right click on the docker-compose.yml and select <strong>Compose
Up</strong>.</li>
<li>Install our site configuration by running <code>make install-site</code>.</li>
<li>Browse to <a href="http://localhost:8080" rel="nofollow">http://localhost:8080</a> in your broswer. You
should see a 404 page because we haven&#39;t defined any content. That&#39;s okay.</li>
<li>Browse to <a href="http://localhost:8080/user/login" rel="nofollow">http://localhost:8080/user/login</a>
to log in. Your username is <code>admin</code> and your password is <code>root</code>. Then you can
do stuff!</li>
</ol>
<div dir="auto"><h2 tabindex="-1" dir="auto">Editing and adding themes</h2><a id="user-content-editing-and-adding-themes" aria-label="Permalink: Editing and adding themes" href="#editing-and-adding-themes"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">We <a href="https://docs.docker.com/storage/bind-mounts/" rel="nofollow">bind-mount</a> the <strong>themes</strong>
folder so we can test adding a new theme. So changes made in the themes folder
are reflected in the host folder.</p>
<ol dir="auto">
<li>Navigate to the Drupal Appearance page <code>http://localhost:8080/admin/appearance</code></li>
<li>Notice the Hello World theme already there.</li>
<li>To create a new theme, run the following commands:
<ul dir="auto">
<li><code>make shell</code> to get a shell in the container</li>
<li><code>cd web</code> to get to the Drupal root folder</li>
<li><code>php core/scripts/drupal generate-theme new_weather_theme</code>
<blockquote>
<p dir="auto">[!WARNING]</p>
</blockquote>
</li>
<li><code>exit</code> to leave the container</li>
</ul>
</li>
<li>Refresh the Appearance page and notice new_weather_theme is now installed.</li>
<li>Change title of the theme in <code>themes/new_weather_theme/new_weather_theme.info.yml</code>
file to a reader-friendly one, such as <code>New Weather</code>.</li>
</ol>
<p dir="auto">That&#39;s it! Now when you make changes to theme files, they will sync to the
Docker instance. Whenever you make a change to a .twig template, make sure
to <strong>rebuild the cache</strong> using the <code>make clear-cache</code> command.</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Installing Drupal core updates</h2><a id="user-content-installing-drupal-core-updates" aria-label="Permalink: Installing Drupal core updates" href="#installing-drupal-core-updates"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>

<p dir="auto">When a new version of Drupal core is available, use Composer to intall the latest updates. See <a href="https://www.drupal.org/docs/updating-drupal/updating-drupal-core-via-composer#s-update-drupal-core-code" rel="nofollow">Updating core</a> docs.</p>
<p dir="auto">Run <code>composer show drupal/core-recommended</code> to see the latest Drupal core version. Then run:</p>
<div data-snippet-clipboard-copy-content="composer update &#34;drupal/core-*&#34; --with-all-dependencies"><pre><code>composer update &#34;drupal/core-*&#34; --with-all-dependencies
</code></pre></div>
<p dir="auto">This will update the required projects: <code>drupal/core-recommended drupal/core-composer-scaffold drupal/core-project-message</code></p>
<p dir="auto">The update the db using drush</p>
<div data-snippet-clipboard-copy-content="make shell
drush updatedb
drush cache:rebuild"><pre><code>make shell
drush updatedb
drush cache:rebuild
</code></pre></div>

<ol dir="auto">
<li>Push the changed composer.json and composer.lock files to production.</li>
<li>run <code>composer install --no-dev</code> on production, rather than composer update.</li>
<li>run <code>drush updatedb</code> or visit update.php</li>
</ol>
</article></div></div>
  </body>
</html>
