<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/corcel/corcel">Original</a>
    <h1>Corcel â€“ Use WordPress backend with Laravel or any PHP application</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><strong>A collection of Model classes that allows you to get data directly from a WordPress database.</strong></p>
<p dir="auto"><a href="https://github.com/corcel/corcel/actions"><img src="https://github.com/corcel/corcel/workflows/CI/badge.svg" alt="Actions Status"/></a>
<a href="https://packagist.org/packages/jgrossi/corcel" rel="nofollow"><img src="https://camo.githubusercontent.com/308a0085ea8513b0cbae0734c23061d63eceedcdcf3f112dd6da0997a71771a8/68747470733a2f2f696d672e736869656c64732e696f2f7061636b61676973742f762f6a67726f7373692f636f7263656c2e737667" alt="Packagist" data-canonical-src="https://img.shields.io/packagist/v/jgrossi/corcel.svg"/></a>
<a href="https://github.com/jgrossi/corcel/releases"><img src="https://camo.githubusercontent.com/27c3c412e74f0fe3b7942ea67e725ddf6c35dd9b644bf79a905353abadc111ce/68747470733a2f2f696d672e736869656c64732e696f2f7061636b61676973742f64742f6a67726f7373692f636f7263656c2e737667" alt="Packagist" data-canonical-src="https://img.shields.io/packagist/dt/jgrossi/corcel.svg"/></a>
<a href="https://codeclimate.com/github/corcel/corcel/coverage" rel="nofollow"><img src="https://camo.githubusercontent.com/d0527cbace0c0cffceee5f6e3bd06798eeb01d053b9663050042fc1ac03c1f0c/68747470733a2f2f636f6465636c696d6174652e636f6d2f6769746875622f636f7263656c2f636f7263656c2f6261646765732f636f7665726167652e737667" alt="Test Coverage" data-canonical-src="https://codeclimate.com/github/corcel/corcel/badges/coverage.svg"/></a>
<a href="https://codeclimate.com/github/corcel/corcel/maintainability" rel="nofollow"><img src="https://camo.githubusercontent.com/6f5b20fbdc96df6d2675bd5213431ec1355f8eee67c27c754882f5bd1f1e9826/68747470733a2f2f6170692e636f6465636c696d6174652e636f6d2f76312f6261646765732f33646338313335656565373061653764613332352f6d61696e7461696e6162696c697479" alt="Maintainability" data-canonical-src="https://api.codeclimate.com/v1/badges/3dc8135eee70ae7da325/maintainability"/></a></p>
<p dir="auto">Corcel is a collection of PHP classes built on top of <a href="https://laravel.com/docs/master/eloquent" rel="nofollow">Eloquent ORM</a> (from <a href="http://laravel.com" rel="nofollow">Laravel</a> framework), that provides a fluent interface to connect and get data directly from a <a href="http://wordpress.org" rel="nofollow">WordPress</a> database.</p>
<p dir="auto">You can use WordPress as the backend (administration panel) or CMS, for inserting posts, custom types, etc, and any other PHP app in the other side querying those data (as a Model layer). It&#39;s easier to use Corcel with Laravel, but you&#39;re free to use it with any PHP project that uses Composer.</p>
<p dir="auto"><a href="https://ko-fi.com/A36513JF" rel="nofollow">Buy me a Coffee</a> |
<a href="https://twitter.com/corcelphp" rel="nofollow">Follow Corcel on Twitter</a></p>


<ul dir="auto">
<li><a href="#version-compatibility">Version Compatibility</a></li>
<li><a href="#installing-corcel">Installing Corcel</a></li>
<li><a href="#database-setup">Database Setup</a></li>
<li><a href="#usage">Usage</a>
<ul dir="auto">
<li><a href="#posts">Posts</a></li>
<li><a href="#acf">Advanced Custom Fields (ACF) Integration</a></li>
<li><a href="#custom-post">Custom Post Type</a></li>
<li><a href="#single-tab">Single Table Inheritance</a></li>
<li><a href="#taxonomies">Taxonomies</a></li>
<li><a href="#post-format">Post Format</a></li>
<li><a href="#pages">Pages</a></li>
<li><a href="#cats">Categories &amp; Taxonomies</a></li>
<li><a href="#attachments">Attachments &amp; Revision</a></li>
<li><a href="#thumbnails">Thumbnails</a></li>
<li><a href="#options">Options</a></li>
<li><a href="#menu">Menu</a></li>
<li><a href="#users">Users</a></li>
<li><a href="#auth">Authentication</a></li>
<li><a href="#tests">Running Tests</a></li>
</ul>
</li>
<li><a href="#contrib">Contributing</a></li>
<li><a href="#license">License</a></li>
</ul>

<table>
<thead>
<tr>
<th>Laravel</th>
<th>Corcel</th>
</tr>
</thead>
<tbody>
<tr>
<td>5.1.x</td>
<td><code>~2.1.0</code></td>
</tr>
<tr>
<td>5.2.x</td>
<td><code>~2.2.0</code></td>
</tr>
<tr>
<td>5.3.x</td>
<td><code>~2.3.0</code></td>
</tr>
<tr>
<td>5.4.x</td>
<td><code>~2.4.0</code></td>
</tr>
<tr>
<td>5.5.x</td>
<td><code>~2.5.0</code></td>
</tr>
<tr>
<td>5.6.x</td>
<td><code>~2.6.0</code></td>
</tr>
<tr>
<td>5.7.x</td>
<td><code>~2.7.0</code></td>
</tr>
<tr>
<td>5.8.x</td>
<td><code>~2.8.0</code></td>
</tr>
<tr>
<td>6.0.x</td>
<td><code>^3.0.0</code></td>
</tr>
<tr>
<td>7.0.x</td>
<td><code>^4.0.0</code></td>
</tr>
<tr>
<td>8.0.x</td>
<td><code>^5.0.0</code></td>
</tr>
<tr>
<td>9.0.x</td>
<td><code>^6.0.0</code></td>
</tr>
<tr>
<td>10.0.x</td>
<td><code>^7.0.0</code></td>
</tr>
<tr>
<td>11.0.x</td>
<td><code>^8.0.0</code></td>
</tr>
</tbody>
</table>

<p dir="auto">You need to use Composer to install Corcel into your project:</p>
<div data-snippet-clipboard-copy-content="composer require jgrossi/corcel"><pre><code>composer require jgrossi/corcel
</code></pre></div>


<p dir="auto">Corcel wil register itself using Laravel&#39;s <a href="https://laravel.com/docs/5.5/packages#package-discovery" rel="nofollow">Auto Discovery</a>.</p>

<p dir="auto">You&#39;ll have to include <code>CorcelServiceProvider</code> in your <code>config/app.php</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="&#39;providers&#39; =&gt; [
    /*
     * Package Service Providers...
     */
    Corcel\Laravel\CorcelServiceProvider::class,
]"><pre><span>&#39;providers&#39;</span> =&gt; [
    <span>/*</span>
<span>     * Package Service Providers...</span>
<span>     */</span>
    <span>Corcel</span>\<span>Laravel</span>\<span>CorcelServiceProvider</span>::class,
]</pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto"><a name="user-content-config-publish"></a> Publishing the configuration file</h3><a id="user-content--publishing-the-configuration-file" aria-label="Permalink:  Publishing the configuration file" href="#-publishing-the-configuration-file"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Now configure our config file to make sure your database is set correctly and to allow you to register custom post types and shortcodes in a very easy way:</p>
<p dir="auto">Run the following Artisan command in your terminal:</p>
<div data-snippet-clipboard-copy-content="php artisan vendor:publish --provider=&#34;Corcel\Laravel\CorcelServiceProvider&#34;"><pre><code>php artisan vendor:publish --provider=&#34;Corcel\Laravel\CorcelServiceProvider&#34;
</code></pre></div>
<p dir="auto">Now you have a <code>config/corcel.php</code> config file, where you can set the database connection with WordPress tables and much more.</p>


<p dir="auto">Just set the database <code>connection</code> you want to be used by Corcel in <code>config/corcel.php</code>.</p>
<p dir="auto">Let&#39; suppose you have those following database connections in your <code>config/database.php</code> file:</p>
<div dir="auto" data-snippet-clipboard-copy-content="// File: /config/database.php

&#39;connections&#39; =&gt; [

    &#39;mysql&#39; =&gt; [ // for Laravel database
        &#39;driver&#39;    =&gt; &#39;mysql&#39;,
        &#39;host&#39;      =&gt; &#39;localhost&#39;,
        &#39;database&#39;  =&gt; &#39;mydatabase&#39;,
        &#39;username&#39;  =&gt; &#39;admin&#39;
        &#39;password&#39;  =&gt; &#39;secret&#39;,
        &#39;charset&#39;   =&gt; &#39;utf8&#39;,
        &#39;collation&#39; =&gt; &#39;utf8_unicode_ci&#39;,
        &#39;prefix&#39;    =&gt; &#39;&#39;,
        &#39;strict&#39;    =&gt; false,
        &#39;engine&#39;    =&gt; null,
    ],

    &#39;wordpress&#39; =&gt; [ // for WordPress database (used by Corcel)
        &#39;driver&#39;    =&gt; &#39;mysql&#39;,
        &#39;host&#39;      =&gt; &#39;localhost&#39;,
        &#39;database&#39;  =&gt; &#39;mydatabase&#39;,
        &#39;username&#39;  =&gt; &#39;admin&#39;,
        &#39;password&#39;  =&gt; &#39;secret&#39;,
        &#39;charset&#39;   =&gt; &#39;utf8&#39;,
        &#39;collation&#39; =&gt; &#39;utf8_unicode_ci&#39;,
        &#39;prefix&#39;    =&gt; &#39;wp_&#39;,
        &#39;strict&#39;    =&gt; false,
        &#39;engine&#39;    =&gt; null,
    ],
],"><pre><span>// File: /config/database.php</span>

<span>&#39;connections&#39;</span> =&gt; [

    <span>&#39;mysql&#39;</span> =&gt; [ <span>// for Laravel database</span>
        <span>&#39;driver&#39;</span>    =&gt; <span>&#39;mysql&#39;</span>,
        <span>&#39;host&#39;</span>      =&gt; <span>&#39;localhost&#39;</span>,
        <span>&#39;database&#39;</span>  =&gt; <span>&#39;mydatabase&#39;</span>,
        <span>&#39;username&#39;</span>  =&gt; <span>&#39;admin&#39;</span>
<span>        &#39;password&#39;  =&gt; &#39;secret&#39;</span>,
        <span>&#39;charset&#39;</span>   =&gt; <span>&#39;utf8&#39;</span>,
        <span>&#39;collation&#39;</span> =&gt; <span>&#39;utf8_unicode_ci&#39;</span>,
        <span>&#39;prefix&#39;</span>    =&gt; <span>&#39;&#39;</span>,
        <span>&#39;strict&#39;</span>    =&gt; <span>false</span>,
        <span>&#39;engine&#39;</span>    =&gt; <span>null</span>,
    ],

    <span>&#39;wordpress&#39;</span> =&gt; [ <span>// for WordPress database (used by Corcel)</span>
        <span>&#39;driver&#39;</span>    =&gt; <span>&#39;mysql&#39;</span>,
        <span>&#39;host&#39;</span>      =&gt; <span>&#39;localhost&#39;</span>,
        <span>&#39;database&#39;</span>  =&gt; <span>&#39;mydatabase&#39;</span>,
        <span>&#39;username&#39;</span>  =&gt; <span>&#39;admin&#39;</span>,
        <span>&#39;password&#39;</span>  =&gt; <span>&#39;secret&#39;</span>,
        <span>&#39;charset&#39;</span>   =&gt; <span>&#39;utf8&#39;</span>,
        <span>&#39;collation&#39;</span> =&gt; <span>&#39;utf8_unicode_ci&#39;</span>,
        <span>&#39;prefix&#39;</span>    =&gt; <span>&#39;wp_&#39;</span>,
        <span>&#39;strict&#39;</span>    =&gt; <span>false</span>,
        <span>&#39;engine&#39;</span>    =&gt; <span>null</span>,
    ],
],</pre></div>
<p dir="auto">In this case you should want to use the <code>wordpress</code> connection for Corcel, so just set it into the Corcel config file <code>config/corcel.php</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="&#39;connection&#39; =&gt; &#39;wordpress&#39;,"><pre><span>&#39;connection&#39;</span> =&gt; <span>&#39;wordpress&#39;</span>,</pre></div>
<div dir="auto"><h2 tabindex="-1" dir="auto">Other PHP Framework (not Laravel) Setup</h2><a id="user-content-other-php-framework-not-laravel-setup" aria-label="Permalink: Other PHP Framework (not Laravel) Setup" href="#other-php-framework-not-laravel-setup"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Here you have to configure the database to fit the Corcel requirements. First, you should include the Composer <code>autoload</code> file if not already loaded:</p>
<div dir="auto" data-snippet-clipboard-copy-content="require __DIR__ . &#39;/vendor/autoload.php&#39;;"><pre><span>require</span> __DIR__ . <span>&#39;/vendor/autoload.php&#39;</span>;</pre></div>
<p dir="auto">Now you must set your WordPress database params:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$params = [
    &#39;database&#39;  =&gt; &#39;database_name&#39;,
    &#39;username&#39;  =&gt; &#39;username&#39;,
    &#39;password&#39;  =&gt; &#39;pa$$word&#39;,
    &#39;prefix&#39;    =&gt; &#39;wp_&#39; // default prefix is &#39;wp_&#39;, you can change to your own prefix
];
Corcel\Database::connect($params);"><pre><span><span>$</span>params</span> = [
    <span>&#39;database&#39;</span>  =&gt; <span>&#39;database_name&#39;</span>,
    <span>&#39;username&#39;</span>  =&gt; <span>&#39;username&#39;</span>,
    <span>&#39;password&#39;</span>  =&gt; <span>&#39;pa$$word&#39;</span>,
    <span>&#39;prefix&#39;</span>    =&gt; <span>&#39;wp_&#39;</span> <span>// default prefix is &#39;wp_&#39;, you can change to your own prefix</span>
];
<span>Corcel</span>\<span>Database</span>::<span>connect</span>(<span><span>$</span>params</span>);</pre></div>
<p dir="auto">You can specify all Eloquent params, but some are default (but you can override them).</p>
<div dir="auto" data-snippet-clipboard-copy-content="&#39;driver&#39;    =&gt; &#39;mysql&#39;,
&#39;host&#39;      =&gt; &#39;localhost&#39;,
&#39;charset&#39;   =&gt; &#39;utf8&#39;,
&#39;collation&#39; =&gt; &#39;utf8_unicode_ci&#39;,
&#39;prefix&#39;    =&gt; &#39;wp_&#39;, // Specify the prefix for WordPress tables, default prefix is &#39;wp_&#39;"><pre><span>&#39;driver&#39;</span>    =&gt; <span>&#39;mysql&#39;</span>,
<span>&#39;host&#39;</span>      =&gt; <span>&#39;localhost&#39;</span>,
<span>&#39;charset&#39;</span>   =&gt; <span>&#39;utf8&#39;</span>,
<span>&#39;collation&#39;</span> =&gt; <span>&#39;utf8_unicode_ci&#39;</span>,
<span>&#39;prefix&#39;</span>    =&gt; <span>&#39;wp_&#39;</span>, <span>// Specify the prefix for WordPress tables, default prefix is &#39;wp_&#39;</span></pre></div>


<blockquote>
<p dir="auto">Every time you see <code>Post::method()</code>, if you&#39;re using your own Post class (where you set the connection name), like <code>App\Post</code> you should use <code>App\Post::method()</code> and not <code>Post::method()</code>. All the examples are assuming you already know this difference.</p>
</blockquote>
<blockquote>
<p dir="auto">In the examples, every time you see <code>Post::method()</code> assume <code>Corcel\Model\Post::method()</code>.</p>
</blockquote>
<div dir="auto" data-snippet-clipboard-copy-content="// All published posts
$posts = Post::published()-&gt;get();
$posts = Post::status(&#39;publish&#39;)-&gt;get();

// A specific post
$post = Post::find(31);
echo $post-&gt;post_title;"><pre><span>// All published posts</span>
<span><span>$</span>posts</span> = <span>Post</span>::<span>published</span>()-&gt;<span>get</span>();
<span><span>$</span>posts</span> = <span>Post</span>::<span>status</span>(<span>&#39;publish&#39;</span>)-&gt;<span>get</span>();

<span>// A specific post</span>
<span><span>$</span>post</span> = <span>Post</span>::<span>find</span>(<span>31</span>);
<span>echo</span> <span><span>$</span>post</span>-&gt;<span>post_title</span>;</pre></div>
<div dir="auto"><h2 tabindex="-1" dir="auto">Creating your own model classes</h2><a id="user-content-creating-your-own-model-classes" aria-label="Permalink: Creating your own model classes" href="#creating-your-own-model-classes"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Optionally you can create your own <code>Post</code> model (or Page, or whatever) which extends <code>Corcel\Post</code>. Then set the connection name (if you want to override the Corcel&#39;s default one) you&#39;re using, in this case <code>foo-bar</code>:</p>
<blockquote>
<p dir="auto">Extending <code>Corcel\Model\Post</code> class can add flexibility to your project, once you can add custom methods and logic, according what you need to use from your WordPress database.</p>
</blockquote>
<div dir="auto" data-snippet-clipboard-copy-content="&lt;?php // File: app/Post.php

namespace App;

use Corcel\Model\Post as Corcel;

class Post extends Corcel
{
    protected $connection = &#39;foo-bar&#39;;

    public function customMethod() {
        //
    }
}"><pre><span>&lt;?php</span> <span>// File: app/Post.php</span>

<span>namespace</span> <span>App</span>;

<span>use</span> <span>Corcel</span>\<span>Model</span>\<span>Post</span> <span>as</span> <span>Corcel</span>;

<span>class</span> <span>Post</span> <span>extends</span> <span>Corcel</span>
{
    <span>protected</span> <span><span>$</span>connection</span> = <span>&#39;foo-bar&#39;</span>;

    <span>public</span> <span>function</span> <span>customMethod</span>() {
        <span>//</span>
    }
}</pre></div>
<p dir="auto">So, now you can fetch WP database data using your own class:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$posts = App\Post::all(); // using the &#39;foo-bar&#39; connection"><pre><span><span>$</span>posts</span> = <span>App</span>\<span>Post</span>::<span>all</span>(); <span>// using the &#39;foo-bar&#39; connection</span></pre></div>
<blockquote>
<p dir="auto">Just remember you don&#39;t have to extends our <code>Post</code> class, you can use <code>Corcel\Model\Post</code> and all others model without any problem.</p>
</blockquote>
<div dir="auto"><h3 tabindex="-1" dir="auto">Meta Data (Custom Fields)</h3><a id="user-content-meta-data-custom-fields" aria-label="Permalink: Meta Data (Custom Fields)" href="#meta-data-custom-fields"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<blockquote>
<p dir="auto">NOTE: In Corcel v1 you could save meta data using the <code>Post::save()</code> method. That&#39;s not allowed anymore. Use <code>saveMeta()</code> or <code>createMeta()</code> (see below) methods to save post meta.</p>
</blockquote>
<p dir="auto">You can retrieve meta data from posts too.</p>
<div dir="auto" data-snippet-clipboard-copy-content="// Get a custom meta value (like &#39;link&#39; or whatever) from a post (any type)
$post = Post::find(31);
echo $post-&gt;meta-&gt;link; // OR
echo $post-&gt;fields-&gt;link;
echo $post-&gt;link; // OR"><pre><span>// Get a custom meta value (like &#39;link&#39; or whatever) from a post (any type)</span>
<span><span>$</span>post</span> = <span>Post</span>::<span>find</span>(<span>31</span>);
<span>echo</span> <span><span>$</span>post</span>-&gt;<span>meta</span>-&gt;<span>link</span>; <span>// OR</span>
<span>echo</span> <span><span>$</span>post</span>-&gt;<span>fields</span>-&gt;<span>link</span>;
<span>echo</span> <span><span>$</span>post</span>-&gt;<span>link</span>; <span>// OR</span></pre></div>
<p dir="auto">To create or update meta data form a User just use the <code>saveMeta()</code> or <code>saveField()</code> methods. They return <code>bool</code> like the Eloquent <code>save()</code> method.</p>
<div dir="auto" data-snippet-clipboard-copy-content="$post = Post::find(1);
$post-&gt;saveMeta(&#39;username&#39;, &#39;jgrossi&#39;);"><pre><span><span>$</span>post</span> = <span>Post</span>::<span>find</span>(<span>1</span>);
<span><span>$</span>post</span>-&gt;<span>saveMeta</span>(<span>&#39;username&#39;</span>, <span>&#39;jgrossi&#39;</span>);</pre></div>
<p dir="auto">You can save many meta data at the same time too:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$post = Post::find(1);
$post-&gt;saveMeta([
    &#39;username&#39; =&gt; &#39;jgrossi&#39;,
    &#39;url&#39; =&gt; &#39;http://jgrossi.com&#39;,
]);"><pre><span><span>$</span>post</span> = <span>Post</span>::<span>find</span>(<span>1</span>);
<span><span>$</span>post</span>-&gt;<span>saveMeta</span>([
    <span>&#39;username&#39;</span> =&gt; <span>&#39;jgrossi&#39;</span>,
    <span>&#39;url&#39;</span> =&gt; <span>&#39;http://jgrossi.com&#39;</span>,
]);</pre></div>
<p dir="auto">You also have the <code>createMeta()</code> and <code>createField()</code> methods, that work like the <code>saveX()</code> methods, but they are used only for creation and return the <code>PostMeta</code> created instance, instead of <code>bool</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="$post = Post::find(1);
$postMeta = $post-&gt;createMeta(&#39;foo&#39;, &#39;bar&#39;); // instance of PostMeta class
$trueOrFalse = $post-&gt;saveMeta(&#39;foo&#39;, &#39;baz&#39;); // boolean"><pre><span><span>$</span>post</span> = <span>Post</span>::<span>find</span>(<span>1</span>);
<span><span>$</span>postMeta</span> = <span><span>$</span>post</span>-&gt;<span>createMeta</span>(<span>&#39;foo&#39;</span>, <span>&#39;bar&#39;</span>); <span>// instance of PostMeta class</span>
<span><span>$</span>trueOrFalse</span> = <span><span>$</span>post</span>-&gt;<span>saveMeta</span>(<span>&#39;foo&#39;</span>, <span>&#39;baz&#39;</span>); <span>// boolean</span></pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">Querying Posts by Custom Fields (Meta)</h3><a id="user-content-querying-posts-by-custom-fields-meta" aria-label="Permalink: Querying Posts by Custom Fields (Meta)" href="#querying-posts-by-custom-fields-meta"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">There are multiples possibilities to query posts by their custom fields (meta) by using scopes on a <code>Post</code> (or another other model which uses the <code>HasMetaFields</code> trait) class:</p>
<p dir="auto">To check if a meta key exists, use the <code>hasMeta()</code> scope:</p>
<div data-snippet-clipboard-copy-content="// Finds a published post with a meta flag.
$post = Post::published()-&gt;hasMeta(&#39;featured_article&#39;)-&gt;first();"><pre><code>// Finds a published post with a meta flag.
$post = Post::published()-&gt;hasMeta(&#39;featured_article&#39;)-&gt;first();
</code></pre></div>
<p dir="auto">If you want to precisely match a meta-field, you can use the <code>hasMeta()</code> scope with a value.</p>
<div dir="auto" data-snippet-clipboard-copy-content="// Find a published post which matches both meta_key and meta_value.
$post = Post::published()-&gt;hasMeta(&#39;username&#39;, &#39;jgrossi&#39;)-&gt;first();"><pre><span>// Find a published post which matches both meta_key and meta_value.</span>
<span><span>$</span>post</span> = <span>Post</span>::<span>published</span>()-&gt;<span>hasMeta</span>(<span>&#39;username&#39;</span>, <span>&#39;jgrossi&#39;</span>)-&gt;<span>first</span>();</pre></div>
<p dir="auto">If you need to match multiple meta-fields, you can also use the <code>hasMeta()</code> scope passing an array as parameter:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$post = Post::hasMeta([&#39;username&#39; =&gt; &#39;jgrossi&#39;])-&gt;first();
$post = Post::hasMeta([&#39;username&#39; =&gt; &#39;jgrossi&#39;, &#39;url&#39; =&gt; &#39;jgrossi.com&#39;])-&gt;first();
// Or just passing the keys
$post = Post::hasMeta([&#39;username&#39;, &#39;url&#39;])-&gt;first();"><pre><span><span>$</span>post</span> = <span>Post</span>::<span>hasMeta</span>([<span>&#39;username&#39;</span> =&gt; <span>&#39;jgrossi&#39;</span>])-&gt;<span>first</span>();
<span><span>$</span>post</span> = <span>Post</span>::<span>hasMeta</span>([<span>&#39;username&#39;</span> =&gt; <span>&#39;jgrossi&#39;</span>, <span>&#39;url&#39;</span> =&gt; <span>&#39;jgrossi.com&#39;</span>])-&gt;<span>first</span>();
<span>// Or just passing the keys</span>
<span><span>$</span>post</span> = <span>Post</span>::<span>hasMeta</span>([<span>&#39;username&#39;</span>, <span>&#39;url&#39;</span>])-&gt;<span>first</span>();</pre></div>
<p dir="auto">If you need to match a case-insensitive string, or match with wildcards, you can use the <code>hasMetaLike()</code> scope with a value. This uses an SQL <code>LIKE</code> operator, so use &#39;%&#39; as a wildcard operator.</p>
<div dir="auto" data-snippet-clipboard-copy-content="// Will match: &#39;J Grossi&#39;, &#39;J GROSSI&#39;, and &#39;j grossi&#39;.
$post = Post::published()-&gt;hasMetaLike(&#39;author&#39;, &#39;J GROSSI&#39;)-&gt;first();

// Using % as a wildcard will match: &#39;J Grossi&#39;, &#39;J GROSSI&#39;, &#39;j grossi&#39;, &#39;Junior Grossi&#39; etc.
$post = Post::published()-&gt;hasMetaLike(&#39;author&#39;, &#39;J%GROSSI&#39;)-&gt;first();"><pre><span>// Will match: &#39;J Grossi&#39;, &#39;J GROSSI&#39;, and &#39;j grossi&#39;.</span>
<span><span>$</span>post</span> = <span>Post</span>::<span>published</span>()-&gt;<span>hasMetaLike</span>(<span>&#39;author&#39;</span>, <span>&#39;J GROSSI&#39;</span>)-&gt;<span>first</span>();

<span>// Using % as a wildcard will match: &#39;J Grossi&#39;, &#39;J GROSSI&#39;, &#39;j grossi&#39;, &#39;Junior Grossi&#39; etc.</span>
<span><span>$</span>post</span> = <span>Post</span>::<span>published</span>()-&gt;<span>hasMetaLike</span>(<span>&#39;author&#39;</span>, <span>&#39;J%GROSSI&#39;</span>)-&gt;<span>first</span>();</pre></div>

<p dir="auto">The <code>Post</code> class has support to &#34;aliases&#34;, so if you check the <code>Post</code> class you should note some aliases defined in the static <code>$aliases</code> array, like <code>title</code> for <code>post_title</code> and <code>content</code> for <code>post_content</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="$post = Post::find(1);
$post-&gt;title === $post-&gt;post_title; // true"><pre><span><span>$</span>post</span> = <span>Post</span>::<span>find</span>(<span>1</span>);
<span><span>$</span>post</span>-&gt;<span>title</span> === <span><span>$</span>post</span>-&gt;<span>post_title</span>; <span>// true</span></pre></div>
<p dir="auto">If you&#39;re extending the <code>Post</code> class to create your own class you can use <code>$aliases</code> too. Just add new aliases to that static property inside your own class and it will automatically inherit all aliases from parent <code>Post</code> class:</p>
<div dir="auto" data-snippet-clipboard-copy-content="class A extends \Corcel\Post
{
    protected static $aliases = [
        &#39;foo&#39; =&gt; &#39;post_foo&#39;,
    ];
}

$a = A::find(1);
echo $a-&gt;foo;
echo $a-&gt;title; // from Post class"><pre><span>class</span> <span>A</span> <span>extends</span> \<span>Corcel</span>\<span>Post</span>
{
    <span>protected</span> <span>static</span> <span><span>$</span>aliases</span> = [
        <span>&#39;foo&#39;</span> =&gt; <span>&#39;post_foo&#39;</span>,
    ];
}

<span><span>$</span>a</span> = <span>A</span>::<span>find</span>(<span>1</span>);
<span>echo</span> <span><span>$</span>a</span>-&gt;<span>foo</span>;
<span>echo</span> <span><span>$</span>a</span>-&gt;<span>title</span>; <span>// from Post class</span></pre></div>

<p dir="auto">To order posts you can use <code>newest()</code> and <code>oldest()</code> scopes, for both <code>Post</code> and <code>User</code> classes:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$newest = Post::newest()-&gt;first();
$oldest = Post::oldest()-&gt;first();"><pre><span><span>$</span>newest</span> = <span>Post</span>::<span>newest</span>()-&gt;<span>first</span>();
<span><span>$</span>oldest</span> = <span>Post</span>::<span>oldest</span>()-&gt;<span>first</span>();</pre></div>

<p dir="auto">To order posts just use Eloquent <code>paginate()</code> method:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$posts = Post::published()-&gt;paginate(5);
foreach ($posts as $post) {
    // ...
}"><pre><span><span>$</span>posts</span> = <span>Post</span>::<span>published</span>()-&gt;<span>paginate</span>(<span>5</span>);
<span>foreach</span> (<span><span>$</span>posts</span> <span>as</span> <span><span>$</span>post</span>) {
    <span>// ...</span>
}</pre></div>
<p dir="auto">To display the pagination links just call the <code>links()</code> method:</p>

<div dir="auto"><h2 tabindex="-1" dir="auto"><a id="user-content-acf"></a>  Advanced Custom Fields (ACF)</h2><a id="user-content---advanced-custom-fields-acf" aria-label="Permalink:   Advanced Custom Fields (ACF)" href="#--advanced-custom-fields-acf"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">If you want to retrieve a custom field created by the <a href="http://advancedcustomfields.com" rel="nofollow">Advanced Custom Fields (ACF)</a> plugin, you have to install the <code>corcel/acf</code> plugin - <a href="http://github.com/corcel/acf">click here for more information</a> - and call the custom field like this:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$post = Post::find(123);
echo $post-&gt;acf-&gt;some_radio_field;
$repeaterFields = $post-&gt;acf-&gt;my_repeater_name;"><pre><span><span>$</span>post</span> = <span>Post</span>::<span>find</span>(<span>123</span>);
<span>echo</span> <span><span>$</span>post</span>-&gt;<span>acf</span>-&gt;<span>some_radio_field</span>;
<span><span>$</span>repeaterFields</span> = <span><span>$</span>post</span>-&gt;<span>acf</span>-&gt;<span>my_repeater_name</span>;</pre></div>
<p dir="auto">To avoid unnecessary SQL queries just set the field type you&#39;re requesting. Usually two SQL queries are necessary to get the field type, so if you want to specify it you&#39;re skipping those extra queries:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$post = Post::find(123);
echo $post-&gt;acf-&gt;text(&#39;text_field_name&#39;);
echo $post-&gt;acf-&gt;boolean(&#39;boolean_field_name&#39;);"><pre><span><span>$</span>post</span> = <span>Post</span>::<span>find</span>(<span>123</span>);
<span>echo</span> <span><span>$</span>post</span>-&gt;<span>acf</span>-&gt;<span>text</span>(<span>&#39;text_field_name&#39;</span>);
<span>echo</span> <span><span>$</span>post</span>-&gt;<span>acf</span>-&gt;<span>boolean</span>(<span>&#39;boolean_field_name&#39;</span>);</pre></div>

<p dir="auto">You can work with custom post types too. You can use the <code>type(string)</code> method or create your own class.</p>
<div dir="auto" data-snippet-clipboard-copy-content="// using type() method
$videos = Post::type(&#39;video&#39;)-&gt;status(&#39;publish&#39;)-&gt;get();

// using your own class
class Video extends Corcel\Post
{
    protected $postType = &#39;video&#39;;
}
$videos = Video::status(&#39;publish&#39;)-&gt;get();"><pre><span>// using type() method</span>
<span><span>$</span>videos</span> = <span>Post</span>::<span>type</span>(<span>&#39;video&#39;</span>)-&gt;<span>status</span>(<span>&#39;publish&#39;</span>)-&gt;<span>get</span>();

<span>// using your own class</span>
<span>class</span> <span>Video</span> <span>extends</span> <span>Corcel</span>\<span>Post</span>
{
    <span>protected</span> <span><span>$</span>postType</span> = <span>&#39;video&#39;</span>;
}
<span><span>$</span>videos</span> = <span>Video</span>::<span>status</span>(<span>&#39;publish&#39;</span>)-&gt;<span>get</span>();</pre></div>
<p dir="auto">Using <code>type()</code> method will make Corcel to return all objects as <code>Corcel\Post</code>. Using your custom class you have the advantage to customize classes, including custom methods and properties, return all objects as <code>Video</code>, for example.</p>
<p dir="auto">Custom post types and meta data:</p>
<div dir="auto" data-snippet-clipboard-copy-content="// Get 3 posts with custom post type (store) and show its address
$stores = Post::type(&#39;store&#39;)-&gt;status(&#39;publish&#39;)-&gt;take(3)-&gt;get();
foreach ($stores as $store) {
    $storeAddress = $store-&gt;address; // option 1
    $storeAddress = $store-&gt;meta-&gt;address; // option 2
    $storeAddress = $store-&gt;fields-&gt;address; // option 3
}"><pre><span>// Get 3 posts with custom post type (store) and show its address</span>
<span><span>$</span>stores</span> = <span>Post</span>::<span>type</span>(<span>&#39;store&#39;</span>)-&gt;<span>status</span>(<span>&#39;publish&#39;</span>)-&gt;<span>take</span>(<span>3</span>)-&gt;<span>get</span>();
<span>foreach</span> (<span><span>$</span>stores</span> <span>as</span> <span><span>$</span>store</span>) {
    <span><span>$</span>storeAddress</span> = <span><span>$</span>store</span>-&gt;<span>address</span>; <span>// option 1</span>
    <span><span>$</span>storeAddress</span> = <span><span>$</span>store</span>-&gt;<span>meta</span>-&gt;<span>address</span>; <span>// option 2</span>
    <span><span>$</span>storeAddress</span> = <span><span>$</span>store</span>-&gt;<span>fields</span>-&gt;<span>address</span>; <span>// option 3</span>
}</pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">Configuring the returning Instance</h3><a id="user-content-configuring-the-returning-instance" aria-label="Permalink: Configuring the returning Instance" href="#configuring-the-returning-instance"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Every time you call something like <code>Post::type(&#39;video)-&gt;first()</code> or <code>Video::first()</code> you receive a <code>Corcel\Model\Post</code> instance.</p>
<p dir="auto">If you choose to create a new class for your custom post type, you can have this class be returned for all instances of that post type.</p>
<div dir="auto"><h4 tabindex="-1" dir="auto">Registering Post Types (the easy way)</h4><a id="user-content-registering-post-types-the-easy-way" aria-label="Permalink: Registering Post Types (the easy way)" href="#registering-post-types-the-easy-way"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Instead of call <code>Post::registerPostType()</code> method for all custom post type you want to register, just use the Corcel&#39;s config file and map all custom posts and it&#39;s classes. They will be registered automatically for you:</p>
<div dir="auto" data-snippet-clipboard-copy-content="&#39;post_types&#39; =&gt; [
    &#39;video&#39; =&gt; App\Video::class,
    &#39;foo&#39; =&gt; App\Foo::class,
]"><pre><span>&#39;post_types&#39;</span> =&gt; [
    <span>&#39;video&#39;</span> =&gt; <span>App</span>\<span>Video</span>::class,
    <span>&#39;foo&#39;</span> =&gt; <span>App</span>\<span>Foo</span>::class,
]</pre></div>
<p dir="auto">So every time you query a custom post type the mapped instance will be returned.</p>
<blockquote>
<p dir="auto">This is particular useful when you are intending to get a Collection of Posts of different types (e.g. when fetching the posts defined in a menu).</p>
</blockquote>
<div dir="auto"><h4 tabindex="-1" dir="auto">Registering Post Types (the hard way)</h4><a id="user-content-registering-post-types-the-hard-way" aria-label="Permalink: Registering Post Types (the hard way)" href="#registering-post-types-the-hard-way"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto" data-snippet-clipboard-copy-content="//all objects in the $videos Collection will be instances of Post
$videos = Post::type(&#39;video&#39;)-&gt;status(&#39;publish&#39;)-&gt;get();

// register the video custom post type and its particular class
Post::registerPostType(&#39;video&#39;, &#39;\App\Video&#39;)


//now all objects in the $videos Collection will be instances of Video
$videos = Post::type(&#39;video&#39;)-&gt;status(&#39;publish&#39;)-&gt;get();"><pre><span>//all objects in the $videos Collection will be instances of Post</span>
<span><span>$</span>videos</span> = <span>Post</span>::<span>type</span>(<span>&#39;video&#39;</span>)-&gt;<span>status</span>(<span>&#39;publish&#39;</span>)-&gt;<span>get</span>();

<span>// register the video custom post type and its particular class</span>
<span>Post</span>::<span>registerPostType</span>(<span>&#39;video&#39;</span>, <span>&#39;\App\Video&#39;</span>)


<span>//now all objects in the $videos Collection will be instances of Video</span>
<span><span>$</span>videos</span> = <span>Post</span>::<span>type</span>(<span>&#39;video&#39;</span>)-&gt;<span>status</span>(<span>&#39;publish&#39;</span>)-&gt;<span>get</span>();</pre></div>
<p dir="auto">You can also do this for inbuilt classes, such as Page or Post. Simply register the Page or Post class with the associated post type string, and that object will be returned instead of the default one.</p>


<p dir="auto">You can map all shortcodes you want inside the <code>config/corcel.php</code> file, under the <code>&#39;shortcodes&#39;</code> key. In this case you should create your own class that <code>implements</code> the <code>Corcel\Shortcode</code> interface, that requires a <code>render()</code> method:</p>
<div dir="auto" data-snippet-clipboard-copy-content="&#39;shortcodes&#39; =&gt; [
    &#39;foo&#39; =&gt; App\Shortcodes\FooShortcode::class,
    &#39;bar&#39; =&gt; App\Shortcodes\BarShortcode::class,
],"><pre><span>&#39;shortcodes&#39;</span> =&gt; [
    <span>&#39;foo&#39;</span> =&gt; <span>App</span>\<span>Shortcodes</span>\<span>FooShortcode</span>::class,
    <span>&#39;bar&#39;</span> =&gt; <span>App</span>\<span>Shortcodes</span>\<span>BarShortcode</span>::class,
],</pre></div>
<p dir="auto">This is a sample shortcode class:</p>
<div dir="auto" data-snippet-clipboard-copy-content="class FakeShortcode implements \Corcel\Shortcode
{
    /**
     * @param ShortcodeInterface $shortcode
     * @return string
     */
    public function render(ShortcodeInterface $shortcode)
    {
        return sprintf(
            &#39;html-for-shortcode-%s-%s&#39;,
            $shortcode-&gt;getName(),
            $shortcode-&gt;getParameter(&#39;one&#39;)
        );
    }
}"><pre><span>class</span> <span>FakeShortcode</span> <span>implements</span> \<span>Corcel</span>\<span>Shortcode</span>
{
    <span>/**</span>
<span>     * @param ShortcodeInterface $shortcode</span>
<span>     * @return string</span>
<span>     */</span>
    <span>public</span> <span>function</span> <span>render</span>(<span><span>ShortcodeInterface</span></span> <span><span>$</span>shortcode</span>)
    {
        <span>return</span> sprintf(
            <span>&#39;html-for-shortcode-%s-%s&#39;</span>,
            <span><span>$</span>shortcode</span>-&gt;<span>getName</span>(),
            <span><span>$</span>shortcode</span>-&gt;<span>getParameter</span>(<span>&#39;one&#39;</span>)
        );
    }
}</pre></div>

<p dir="auto">You can add <a href="https://codex.wordpress.org/Shortcode_API" rel="nofollow">shortcodes</a> by calling the <code>addShortcode</code> method on the <code>Post</code> model :</p>
<div dir="auto" data-snippet-clipboard-copy-content="// [gallery id=&#34;1&#34;]
Post::addShortcode(&#39;gallery&#39;, function ($shortcode) {
    return $shortcode-&gt;getName() . &#39;.&#39; . $shortcode-&gt;getParameter(&#39;id&#39;);
});
$post = Post::find(1);
echo $post-&gt;content;"><pre><span>// [gallery id=&#34;1&#34;]</span>
<span>Post</span>::<span>addShortcode</span>(<span>&#39;gallery&#39;</span>, <span>function</span> (<span><span>$</span>shortcode</span>) {
    <span>return</span> <span><span>$</span>shortcode</span>-&gt;<span>getName</span>() . <span>&#39;.&#39;</span> . <span><span>$</span>shortcode</span>-&gt;<span>getParameter</span>(<span>&#39;id&#39;</span>);
});
<span><span>$</span>post</span> = <span>Post</span>::<span>find</span>(<span>1</span>);
<span>echo</span> <span><span>$</span>post</span>-&gt;<span>content</span>;</pre></div>
<blockquote>
<p dir="auto">Laravel 5.5 uses Package Auto-Discovery, so doesn&#39;t require you to manually add the ServiceProvider</p>
</blockquote>
<p dir="auto">If you are using Laravel, we suggest adding your shortcodes handlers in <code>App\Providers\AppServiceProvider</code>, in the <code>boot</code> method.</p>

<p dir="auto">Shortcodes are parsed with the <a href="https://github.com/thunderer/Shortcode"><em>thunderer/shortcode</em></a> library.</p>
<p dir="auto">Several different parsers are provided. <code>RegularParser</code> is the most technically correct and is provided by default. This is suitable for most cases. However if you encounter some irregularities in your shortcode parsing, you may need to configure Corcel to use the <code>WordpressParser</code>, which more faithfully matches WordPress&#39; shortcode regex. To do this, if you are using Laravel, edit the <code>config/corcel.php</code> file, and uncomment your preferred parser. Alternatively, you can replace this with a parser of your own.</p>
<div dir="auto" data-snippet-clipboard-copy-content="&#39;shortcode_parser&#39; =&gt; Thunder\Shortcode\Parser\RegularParser::class,
// &#39;shortcode_parser&#39; =&gt; Thunder\Shortcode\Parser\WordpressParser::class,"><pre><span>&#39;shortcode_parser&#39;</span> =&gt; <span>Thunder</span>\<span>Shortcode</span>\<span>Parser</span>\<span>RegularParser</span>::class,
<span>// &#39;shortcode_parser&#39; =&gt; Thunder\Shortcode\Parser\WordpressParser::class,</span></pre></div>
<p dir="auto">If you are not using Laravel, you can to do this in runtime, calling the <code>setShortcodeParser()</code> method from any class which uses the <code>Shortcodes</code> trait, such as <code>Post</code>, for example.</p>
<div dir="auto" data-snippet-clipboard-copy-content="$post-&gt;setShortcodeParser(new WordpressParser());
echo $post-&gt;content; // content parsed with &#34;WordpressParser&#34; class"><pre><span><span>$</span>post</span>-&gt;<span>setShortcodeParser</span>(<span>new</span> <span>WordpressParser</span>());
<span>echo</span> <span><span>$</span>post</span>-&gt;<span>content</span>; <span>// content parsed with &#34;WordpressParser&#34; class</span></pre></div>
<p dir="auto">For more information about the shortcode package, <a href="https://github.com/thunderer/Shortcode">click here</a>.</p>

<p dir="auto">You can get taxonomies for a specific post like:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$post = Post::find(1);
$taxonomy = $post-&gt;taxonomies()-&gt;first();
echo $taxonomy-&gt;taxonomy;"><pre><span><span>$</span>post</span> = <span>Post</span>::<span>find</span>(<span>1</span>);
<span><span>$</span>taxonomy</span> = <span><span>$</span>post</span>-&gt;<span>taxonomies</span>()-&gt;<span>first</span>();
<span>echo</span> <span><span>$</span>taxonomy</span>-&gt;<span>taxonomy</span>;</pre></div>
<p dir="auto">Or you can search for posts using its taxonomies:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$post = Post::taxonomy(&#39;category&#39;, &#39;php&#39;)-&gt;first();"><pre><span><span>$</span>post</span> = <span>Post</span>::<span>taxonomy</span>(<span>&#39;category&#39;</span>, <span>&#39;php&#39;</span>)-&gt;<span>first</span>();</pre></div>

<p dir="auto">You can also get the post format, like the WordPress function <code>get_post_format()</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="echo $post-&gt;getFormat(); // should return something like &#39;video&#39;, etc"><pre><span>echo</span> <span><span>$</span>post</span>-&gt;<span>getFormat</span>(); <span>// should return something like &#39;video&#39;, etc</span></pre></div>

<p dir="auto">Pages are like custom post types. You can use <code>Post::type(&#39;page&#39;)</code> or the <code>Corcel\Model\Page</code> class.</p>
<div dir="auto" data-snippet-clipboard-copy-content="
use Corcel\Model\Page;

// Find a page by slug
$page = Page::slug(&#39;about&#39;)-&gt;first(); // OR
$page = Post::type(&#39;page&#39;)-&gt;slug(&#39;about&#39;)-&gt;first();
echo $page-&gt;post_title;"><pre><span>use</span> <span>Corcel</span>\<span>Model</span>\<span>Page</span>;

<span>// Find a page by slug</span>
<span><span>$</span>page</span> = <span>Page</span>::<span>slug</span>(<span>&#39;about&#39;</span>)-&gt;<span>first</span>(); <span>// OR</span>
<span><span>$</span>page</span> = <span>Post</span>::<span>type</span>(<span>&#39;page&#39;</span>)-&gt;<span>slug</span>(<span>&#39;about&#39;</span>)-&gt;<span>first</span>();
<span>echo</span> <span><span>$</span>page</span>-&gt;<span>post_title</span>;</pre></div>
<div dir="auto"><h2 tabindex="-1" dir="auto"><a id="user-content-cats"></a>Categories and Taxonomies</h2><a id="user-content-categories-and-taxonomies" aria-label="Permalink: Categories and Taxonomies" href="#categories-and-taxonomies"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Get a category or taxonomy or load posts from a certain category. There are multiple ways
to achieve it.</p>
<div dir="auto" data-snippet-clipboard-copy-content="// all categories
$cat = Taxonomy::category()-&gt;slug(&#39;uncategorized&#39;)-&gt;posts-&gt;first();
echo &#34;&lt;pre&gt;&#34;; print_r($cat-&gt;name); echo &#34;&lt;/pre&gt;&#34;;

// only all categories and posts connected with it
$cat = Taxonomy::where(&#39;taxonomy&#39;, &#39;category&#39;)-&gt;with(&#39;posts&#39;)-&gt;get();
$cat-&gt;each(function($category) {
    echo $category-&gt;name;
});

// clean and simple all posts from a category
$cat = Category::slug(&#39;uncategorized&#39;)-&gt;posts-&gt;first();
$cat-&gt;posts-&gt;each(function($post) {
    echo $post-&gt;post_title;
});"><pre><span>// all categories</span>
<span><span>$</span>cat</span> = <span>Taxonomy</span>::<span>category</span>()-&gt;<span>slug</span>(<span>&#39;uncategorized&#39;</span>)-&gt;<span>posts</span>-&gt;<span>first</span>();
<span>echo</span> &#34;<span>&lt;pre&gt;</span>&#34;; print_r(<span><span>$</span>cat</span>-&gt;<span>name</span>); <span>echo</span> &#34;<span>&lt;/pre&gt;</span>&#34;;

<span>// only all categories and posts connected with it</span>
<span><span>$</span>cat</span> = <span>Taxonomy</span>::<span>where</span>(<span>&#39;taxonomy&#39;</span>, <span>&#39;category&#39;</span>)-&gt;<span>with</span>(<span>&#39;posts&#39;</span>)-&gt;<span>get</span>();
<span><span>$</span>cat</span>-&gt;<span>each</span>(<span>function</span>(<span><span>$</span>category</span>) {
    <span>echo</span> <span><span>$</span>category</span>-&gt;<span>name</span>;
});

<span>// clean and simple all posts from a category</span>
<span><span>$</span>cat</span> = <span>Category</span>::<span>slug</span>(<span>&#39;uncategorized&#39;</span>)-&gt;<span>posts</span>-&gt;<span>first</span>();
<span><span>$</span>cat</span>-&gt;<span>posts</span>-&gt;<span>each</span>(<span>function</span>(<span><span>$</span>post</span>) {
    <span>echo</span> <span><span>$</span>post</span>-&gt;<span>post_title</span>;
});</pre></div>

<p dir="auto">Getting the attachment and/or revision from a <code>Post</code> or <code>Page</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="$page = Page::slug(&#39;about&#39;)-&gt;with(&#39;attachment&#39;)-&gt;first();
// get feature image from page or post
print_r($page-&gt;attachment);

$post = Post::slug(&#39;test&#39;)-&gt;with(&#39;revision&#39;)-&gt;first();
// get all revisions from a post or page
print_r($post-&gt;revision);"><pre><span><span>$</span>page</span> = <span>Page</span>::<span>slug</span>(<span>&#39;about&#39;</span>)-&gt;<span>with</span>(<span>&#39;attachment&#39;</span>)-&gt;<span>first</span>();
<span>// get feature image from page or post</span>
print_r(<span><span>$</span>page</span>-&gt;<span>attachment</span>);

<span><span>$</span>post</span> = <span>Post</span>::<span>slug</span>(<span>&#39;test&#39;</span>)-&gt;<span>with</span>(<span>&#39;revision&#39;</span>)-&gt;<span>first</span>();
<span>// get all revisions from a post or page</span>
print_r(<span><span>$</span>post</span>-&gt;<span>revision</span>);</pre></div>

<p dir="auto">Getting the thumbnail for a <code>Post</code> or <code>Page</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="$post = Post::find(1);

// Retrieve an instance of Corcel\Model\Meta\ThumbnailMeta.
print_r($post-&gt;thumbnail);

// For convenience you may also echo the thumbnail instance to get the URL of the original image.
echo $post-&gt;thumbnail;"><pre><span><span>$</span>post</span> = <span>Post</span>::<span>find</span>(<span>1</span>);

<span>// Retrieve an instance of Corcel\Model\Meta\ThumbnailMeta.</span>
print_r(<span><span>$</span>post</span>-&gt;<span>thumbnail</span>);

<span>// For convenience you may also echo the thumbnail instance to get the URL of the original image.</span>
<span>echo</span> <span><span>$</span>post</span>-&gt;<span>thumbnail</span>;</pre></div>
<p dir="auto">To retrieve a particular thumbnail size you may call the <code>-&gt;size()</code> method on the thumbnail object and pass in a thumbnail size string parameter (e.g. <code>thumbnail</code> or <code>medium</code>). If the thumbnail has been generated, this method returns an array of image metadata, otherwise the original image URL will be returned as a fallback.</p>
<div dir="auto" data-snippet-clipboard-copy-content="if ($post-&gt;thumbnail !== null) {
    /**
     * [
     *     &#39;file&#39; =&gt; &#39;filename-300x300.jpg&#39;,
     *     &#39;width&#39; =&gt; 300,
     *     &#39;height&#39; =&gt; 300,
     *     &#39;mime-type&#39; =&gt; &#39;image/jpeg&#39;,
     *     &#39;url&#39; =&gt; &#39;http://localhost/wp-content/uploads/filename-300x300.jpg&#39;,
     * ]
     */
    print_r($post-&gt;thumbnail-&gt;size(Corcel\Model\Meta\ThumbnailMeta::SIZE_THUMBNAIL));

    // http://localhost/wp-content/uploads/filename.jpg
    print_r($post-&gt;thumbnail-&gt;size(&#39;invalid_size&#39;));
}"><pre><span>if</span> (<span><span>$</span>post</span>-&gt;<span>thumbnail</span> !== <span>null</span>) {
    <span>/**</span>
<span>     * [</span>
<span>     *     &#39;file&#39; =&gt; &#39;filename-300x300.jpg&#39;,</span>
<span>     *     &#39;width&#39; =&gt; 300,</span>
<span>     *     &#39;height&#39; =&gt; 300,</span>
<span>     *     &#39;mime-type&#39; =&gt; &#39;image/jpeg&#39;,</span>
<span>     *     &#39;url&#39; =&gt; &#39;http://localhost/wp-content/uploads/filename-300x300.jpg&#39;,</span>
<span>     * ]</span>
<span>     */</span>
    print_r(<span><span>$</span>post</span>-&gt;<span>thumbnail</span>-&gt;<span>size</span>(<span>Corcel</span>\<span>Model</span>\<span>Meta</span>\<span>ThumbnailMeta</span>::<span>SIZE_THUMBNAIL</span>));

    <span>// http://localhost/wp-content/uploads/filename.jpg</span>
    print_r(<span><span>$</span>post</span>-&gt;<span>thumbnail</span>-&gt;<span>size</span>(<span>&#39;invalid_size&#39;</span>));
}</pre></div>

<blockquote>
<p dir="auto">In previous versions of Corcel this classe was called <code>Options</code> instead of <code>Option</code> (singular). So take care of using always this class in the singular form starting from <code>v2.0.0</code>.</p>
</blockquote>
<blockquote>
<p dir="auto">The <code>Option::getAll()</code> method was removed in Corcel 2+, in favor of <code>Option::asArray($keys [])</code>.</p>
</blockquote>
<p dir="auto">You can use the <code>Option</code> class to get data from <code>wp_options</code> table:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$siteUrl = Option::get(&#39;siteurl&#39;);"><pre><span><span>$</span>siteUrl</span> = <span>Option</span>::<span>get</span>(<span>&#39;siteurl&#39;</span>);</pre></div>
<p dir="auto">You can also add new options:</p>
<div dir="auto" data-snippet-clipboard-copy-content="Option::add(&#39;foo&#39;, &#39;bar&#39;); // stored as string
Option::add(&#39;baz&#39;, [&#39;one&#39; =&gt; &#39;two&#39;]); // this will be serialized and saved"><pre><span>Option</span>::<span>add</span>(<span>&#39;foo&#39;</span>, <span>&#39;bar&#39;</span>); <span>// stored as string</span>
<span>Option</span>::<span>add</span>(<span>&#39;baz&#39;</span>, [<span>&#39;one&#39;</span> =&gt; <span>&#39;two&#39;</span>]); <span>// this will be serialized and saved</span></pre></div>
<p dir="auto">You can get all options in a simple array:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$options = Option::asArray();
echo $options[&#39;siteurl&#39;];"><pre><span><span>$</span>options</span> = <span>Option</span>::<span>asArray</span>();
<span>echo</span> <span><span>$</span>options</span>[<span>&#39;siteurl&#39;</span>];</pre></div>
<p dir="auto">Or you can specify only the keys you want to get:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$options = Option::asArray([&#39;siteurl&#39;, &#39;home&#39;, &#39;blogname&#39;]);
echo $options[&#39;home&#39;];"><pre><span><span>$</span>options</span> = <span>Option</span>::<span>asArray</span>([<span>&#39;siteurl&#39;</span>, <span>&#39;home&#39;</span>, <span>&#39;blogname&#39;</span>]);
<span>echo</span> <span><span>$</span>options</span>[<span>&#39;home&#39;</span>];</pre></div>

<p dir="auto">To get a menu by its slug, use the syntax below. The menu items will be loaded in the <code>items</code> variable (it&#39;s a collection of <code>Corcel\Model\MenuItem</code> objects).</p>
<p dir="auto">The currently supported menu items are: Pages, Posts, Custom Links and Categories.</p>
<p dir="auto">Once you&#39;ll have instances of <code>MenuItem</code> class, if you want to use the original instance (like the original Page or Term, for example), just call the <code>MenuItem::instance()</code> method. The <code>MenuItem</code> object is just a post with <code>post_type</code> equals <code>nav_menu_item</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$menu = Menu::slug(&#39;primary&#39;)-&gt;first();

foreach ($menu-&gt;items as $item) {
    echo $item-&gt;instance()-&gt;title; // if it&#39;s a Post
    echo $item-&gt;instance()-&gt;name; // if it&#39;s a Term
    echo $item-&gt;instance()-&gt;link_text; // if it&#39;s a custom link
}"><pre><span><span>$</span>menu</span> = <span>Menu</span>::<span>slug</span>(<span>&#39;primary&#39;</span>)-&gt;<span>first</span>();

<span>foreach</span> (<span><span>$</span>menu</span>-&gt;<span>items</span> <span>as</span> <span><span>$</span>item</span>) {
    <span>echo</span> <span><span>$</span>item</span>-&gt;<span>instance</span>()-&gt;<span>title</span>; <span>// if it&#39;s a Post</span>
    <span>echo</span> <span><span>$</span>item</span>-&gt;<span>instance</span>()-&gt;<span>name</span>; <span>// if it&#39;s a Term</span>
    <span>echo</span> <span><span>$</span>item</span>-&gt;<span>instance</span>()-&gt;<span>link_text</span>; <span>// if it&#39;s a custom link</span>
}</pre></div>
<p dir="auto">The <code>instance()</code> method will return the matching object:</p>
<ul dir="auto">
<li><code>Post</code> instance for <code>post</code> menu item;</li>
<li><code>Page</code> instance for <code>page</code> menu item;</li>
<li><code>CustomLink</code> instance for <code>custom</code> menu item;</li>
<li><code>Term</code> instance for <code>category</code> menu item.</li>
</ul>

<p dir="auto">To handle multi-levels menus, loop through all the menu items to put them on the right levels, for example.</p>
<p dir="auto">You can use the <code>MenuItem::parent()</code> method to retrieve the parent instance of that menu item:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$items = Menu::slug(&#39;foo&#39;)-&gt;first()-&gt;items;
$parent = $items-&gt;first()-&gt;parent(); // Post, Page, CustomLink or Term (category)"><pre><span><span>$</span>items</span> = <span>Menu</span>::<span>slug</span>(<span>&#39;foo&#39;</span>)-&gt;<span>first</span>()-&gt;<span>items</span>;
<span><span>$</span>parent</span> = <span><span>$</span>items</span>-&gt;<span>first</span>()-&gt;<span>parent</span>(); <span>// Post, Page, CustomLink or Term (category)</span></pre></div>
<p dir="auto">To group menu items according their parents, you can use the <code>-&gt;groupBy()</code> method in the <code>$menu-&gt;items</code> collection, grouping menu items by their <code>$item-&gt;parent()-&gt;ID</code>.</p>
<p dir="auto">To read more about the <code>groupBy()</code> method <a href="https://laravel.com/docs/5.4/collections#method-groupby" rel="nofollow">take a look on the Laravel documentation</a>.</p>

<p dir="auto">You can manipulate users in the same manner you work with posts:</p>
<div dir="auto" data-snippet-clipboard-copy-content="// All users
$users = User::get();

// A specific user
$user = User::find(1);
echo $user-&gt;user_login;"><pre><span>// All users</span>
<span><span>$</span>users</span> = <span>User</span>::<span>get</span>();

<span>// A specific user</span>
<span><span>$</span>user</span> = <span>User</span>::<span>find</span>(<span>1</span>);
<span>echo</span> <span><span>$</span>user</span>-&gt;<span>user_login</span>;</pre></div>


<p dir="auto">If you&#39;re using Laravel 5.4 or older, make sure you have the <a href="#config-service-loader"><code>CorcelServiceProvider</code> provider registered</a>.</p>
<p dir="auto">And then, define the user provider in <code>config/auth.php</code> to allow Laravel to login with WordPress users:</p>
<div dir="auto" data-snippet-clipboard-copy-content="&#39;providers&#39; =&gt; [
    &#39;users&#39; =&gt; [
        &#39;driver&#39; =&gt; &#39;corcel&#39;,
        &#39;model&#39;  =&gt; Corcel\Model\User::class,
    ],
],"><pre><span>&#39;providers&#39;</span> =&gt; [
    <span>&#39;users&#39;</span> =&gt; [
        <span>&#39;driver&#39;</span> =&gt; <span>&#39;corcel&#39;</span>,
        <span>&#39;model&#39;</span>  =&gt; <span>Corcel</span>\<span>Model</span>\<span>User</span>::class,
    ],
],</pre></div>
<p dir="auto">Now you can use the <code>Auth</code> facade to authenticate users:</p>
<div dir="auto" data-snippet-clipboard-copy-content="Auth::validate([
    &#39;email&#39; =&gt; &#39;admin@example.com&#39;, // or using &#39;username&#39; too
    &#39;password&#39; =&gt; &#39;secret&#39;,
]);"><pre><span>Auth</span>::<span>validate</span>([
    <span>&#39;email&#39;</span> =&gt; <span>&#39;admin@example.com&#39;</span>, <span>// or using &#39;username&#39; too</span>
    <span>&#39;password&#39;</span> =&gt; <span>&#39;secret&#39;</span>,
]);</pre></div>
<p dir="auto">To make Laravel&#39;s Password Reset work with Corcel, we have to override how passwords are stored in the database. To do this, you must change <code>Auth/PasswordController.php</code> from:</p>
<div dir="auto" data-snippet-clipboard-copy-content="use App\Http\Controllers\Controller;
use Illuminate\Foundation\Auth\ResetsPasswords;

class PasswordController extends Controller
{
    use ResetsPasswords;"><pre><span>use</span> <span>App</span>\<span>Http</span>\<span>Controllers</span>\<span>Controller</span>;
<span>use</span> <span>Illuminate</span>\<span>Foundation</span>\<span>Auth</span>\<span>ResetsPasswords</span>;

<span>class</span> <span>PasswordController</span> <span>extends</span> <span>Controller</span>
{
    <span>use</span> <span>ResetsPasswords</span>;</pre></div>
<p dir="auto">to</p>
<div dir="auto" data-snippet-clipboard-copy-content="use App\Http\Controllers\Controller;
use Illuminate\Foundation\Auth\ResetsPasswords;
use Corcel\Laravel\Auth\ResetsPasswords as CorcelResetsPasswords;

class PasswordController extends Controller
{
    use ResetsPasswords, CorcelResetsPasswords {
        CorcelResetsPasswords::resetPassword insteadof ResetsPasswords;
    }"><pre><span>use</span> <span>App</span>\<span>Http</span>\<span>Controllers</span>\<span>Controller</span>;
<span>use</span> <span>Illuminate</span>\<span>Foundation</span>\<span>Auth</span>\<span>ResetsPasswords</span>;
<span>use</span> <span>Corcel</span>\<span>Laravel</span>\<span>Auth</span>\<span>ResetsPasswords</span> <span>as</span> <span>CorcelResetsPasswords</span>;

<span>class</span> <span>PasswordController</span> <span>extends</span> <span>Controller</span>
{
    <span>use</span> <span>ResetsPasswords</span>, <span>CorcelResetsPasswords</span> {
        <span>CorcelResetsPasswords</span>::resetPassword <span>insteadof</span> <span>ResetsPasswords</span>;
    }</pre></div>

<p dir="auto">You can use the <code>AuthUserProvider</code> class to manually authenticate a user :</p>
<div dir="auto" data-snippet-clipboard-copy-content="$userProvider = new Corcel\Laravel\Auth\AuthUserProvider;
$user = $userProvider-&gt;retrieveByCredentials([&#39;username&#39; =&gt; &#39;admin&#39;]);
if(!is_null($user) &amp;&amp; $userProvider-&gt;validateCredentials($user, [&#39;password&#39; =&gt; &#39;admin&#39;])) {
    // successfully login
}"><pre><span><span>$</span>userProvider</span> = <span>new</span> <span>Corcel</span>\<span>Laravel</span>\<span>Auth</span>\<span>AuthUserProvider</span>;
<span><span>$</span>user</span> = <span><span>$</span>userProvider</span>-&gt;<span>retrieveByCredentials</span>([<span>&#39;username&#39;</span> =&gt; <span>&#39;admin&#39;</span>]);
<span>if</span>(!is_null(<span><span>$</span>user</span>) &amp;&amp; <span><span>$</span>userProvider</span>-&gt;<span>validateCredentials</span>(<span><span>$</span>user</span>, [<span>&#39;password&#39;</span> =&gt; <span>&#39;admin&#39;</span>])) {
    <span>// successfully login</span>
}</pre></div>
<blockquote>
<p dir="auto">Remember you can use both <code>username</code> and <code>email</code> as credentials for a User.</p>
</blockquote>

<p dir="auto">To run the phpunit tests, execute the following command :</p>

<p dir="auto">If you have the global <code>phpunit</code> command installed you can just type:</p>

<p dir="auto">All tests were written using Sqlite with <code>:memory</code> database, so it runs in your memory. All tests use <code>factories</code> and <code>migrations</code>. Take a look on <code>tests/database/factories</code> and <code>tests/database/migrations</code> directories for more information.</p>

<p dir="auto">All contributions are welcome to help improve Corcel.</p>
<p dir="auto">Before you submit your Pull Request (PR) consider the following guidelines:</p>
<ul dir="auto">
<li>
<p dir="auto">Fork <a href="https://github.com/corcel/corcel">https://github.com/corcel/corcel</a> in Github;</p>
</li>
<li>
<p dir="auto">Clone your forked repository (not Corcel&#39;s) locally and create your own branch based on the version you want to fix (<code>2.1</code>, <code>2.2</code>, <code>2.3</code>, <code>2.4</code> or <code>2.5</code>): <code>git checkout -b my-fix-branch 2.5</code>;</p>
</li>
<li>
<p dir="auto">Make all code changes. Remember here to write at least one test case for any feature you add or any bugfix (if it&#39;s not tested yet). Our goal is to have 100% of the code covered by tests, so help us to write a better code ;-) If you don&#39; have experience with tests it&#39;s a good opportunity to learn. Just take a look into our tests cases and you&#39;ll see how simple they are.</p>
</li>
<li>
<p dir="auto">Run the unit tests locally to make sure your changes did not break any other piece of code;</p>
</li>
<li>
<p dir="auto">Push your new branch to your forked repository, usually <code>git push origin HEAD</code> should work;</p>
</li>
<li>
<p dir="auto">In GitHub again, create a Pull Request (PR) from your custom <code>my-fix-branch</code> branch (from your forked repository) to the related branch (<code>corcel:2.5</code>, for example, not <code>corcel:master</code>, please;</p>
</li>
<li>
<p dir="auto">Wait for the approval :-)</p>
</li>
</ul>

<p dir="auto"><a href="http://jgrossi.mit-license.org/" rel="nofollow">MIT License</a> Â© Junior Grossi</p>
</article></div></div>
  </body>
</html>
