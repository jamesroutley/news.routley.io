<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/allmonday/pydantic-resolve">Original</a>
    <h1>Pydantic-resolve, a hierarchical solution for data fetching and processing</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><a href="https://pypi.python.org/pypi/pydantic-resolve" rel="nofollow"><img src="https://camo.githubusercontent.com/ce39d4e7248232413fa4aacb3d3e22f4e7fa917c25218c02063d9f9eb01ca7b7/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f707964616e7469632d7265736f6c76652e737667" alt="pypi" data-canonical-src="https://img.shields.io/pypi/v/pydantic-resolve.svg"/></a>
<a href="https://pepy.tech/project/pydantic-resolve" rel="nofollow"><img src="https://camo.githubusercontent.com/5c5a25203de0bca60eed2a0d314fd6b21d79ebe340335151e3059a6dfa3f6ef3/68747470733a2f2f7374617469632e706570792e746563682f706572736f6e616c697a65642d62616467652f707964616e7469632d7265736f6c76653f706572696f643d6d6f6e746826756e6974733d616262726576696174696f6e266c6566745f636f6c6f723d677265792672696768745f636f6c6f723d6f72616e6765266c6566745f746578743d446f776e6c6f616473" alt="Downloads" data-canonical-src="https://static.pepy.tech/personalized-badge/pydantic-resolve?period=month&amp;units=abbreviation&amp;left_color=grey&amp;right_color=orange&amp;left_text=Downloads"/></a>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/9d845116827669db1af6c0ac0a943d19e817fafed0f5955046f5356b42b62210/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f707964616e7469632d7265736f6c7665"><img src="https://camo.githubusercontent.com/9d845116827669db1af6c0ac0a943d19e817fafed0f5955046f5356b42b62210/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f707964616e7469632d7265736f6c7665" alt="Python Versions" data-canonical-src="https://img.shields.io/pypi/pyversions/pydantic-resolve"/></a>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/9b263d44205a598fabdd0dd13086ec5c29b086e3f6700131624fee80094e3a89/68747470733a2f2f696d672e736869656c64732e696f2f656e64706f696e743f75726c3d68747470733a2f2f676973742e67697468756275736572636f6e74656e742e636f6d2f616c6c6d6f6e6461792f36663136363163363331306531623331633961313062306430396435326431312f7261772f636f7662616467652e6a736f6e"><img src="https://camo.githubusercontent.com/9b263d44205a598fabdd0dd13086ec5c29b086e3f6700131624fee80094e3a89/68747470733a2f2f696d672e736869656c64732e696f2f656e64706f696e743f75726c3d68747470733a2f2f676973742e67697468756275736572636f6e74656e742e636f6d2f616c6c6d6f6e6461792f36663136363163363331306531623331633961313062306430396435326431312f7261772f636f7662616467652e6a736f6e" alt="Test Coverage" data-canonical-src="https://img.shields.io/endpoint?url=https://gist.githubusercontent.com/allmonday/6f1661c6310e1b31c9a10b0d09d52d11/raw/covbadge.json"/></a>
<a href="https://github.com/allmonday/pydantic_resolve/actions/workflows/ci.yml"><img src="https://github.com/allmonday/pydantic_resolve/actions/workflows/ci.yml/badge.svg" alt="CI"/></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/allmonday/pydantic-resolve/blob/master/doc/imgs/resolver.png"><img src="https://github.com/allmonday/pydantic-resolve/raw/master/doc/imgs/resolver.png" alt="img"/></a></p>
<p dir="auto"><strong>If you are using pydantic v2, please use <a href="https://github.com/allmonday/pydantic2-resolve">pydantic2-resolve</a> instead.</strong></p>
<p dir="auto">A small yet powerful tool to extend your pydantic schema, and then resolve all <strong>descendants</strong> automatically.</p>
<p dir="auto">It&#39;s also the key to the realm of composition-oriented-development-pattern (wip)</p>
<blockquote>
<p dir="auto">What is composable pattarn? <a href="https://github.com/allmonday/composable-development-pattern">https://github.com/allmonday/composable-development-pattern</a></p>
</blockquote>
<p dir="auto"><a href="https://github.com/allmonday/pydantic-resolve/blob/master/changelog.md">Change Logs</a></p>
<p dir="auto"><a href="https://discord.com/channels/1197929379951558797/1197929379951558800" rel="nofollow">discord</a></p>
<p dir="auto">4 steps from root data to view data
<a target="_blank" rel="noopener noreferrer" href="https://github.com/allmonday/pydantic-resolve/blob/master/doc/imgs/concept.png"><img src="https://github.com/allmonday/pydantic-resolve/raw/master/doc/imgs/concept.png" alt=""/></a></p>

<div dir="auto" data-snippet-clipboard-copy-content="pip install pydantic-resolve"><pre>pip install pydantic-resolve</pre></div>

<ol dir="auto">
<li>basic usage, resolve your fields.</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="import asyncio
from pydantic import BaseModel
from pydantic_resolve import Resolver

async def query_age(name):
    print(f&#39;query {name}&#39;)
    await asyncio.sleep(1)
    _map = {
        &#39;kikodo&#39;: 21,
        &#39;John&#39;: 14,
        &#39;老王&#39;: 40,
    }
    return _map.get(name)

class Person(BaseModel):
    name: str

    age: int = 0
    async def resolve_age(self):
        return await query_age(self.name)

    is_adult: bool = False
    def post_is_adult(self):
        return self.age &gt; 18

async def simple():
    p = Person(name=&#39;kikodo&#39;)
    p = await Resolver().resolve(p)
    print(p)
    # query kikodo
    # Person(name=&#39;kikodo&#39;, age=21, is_adult=True)

    people = [Person(name=n) for n in [&#39;kikodo&#39;, &#39;John&#39;, &#39;老王&#39;]]
    people = await Resolver().resolve(people)
    print(people)
    # Oops!! the issue of N+1 query happens
    # query kikodo
    # query John
    # query 老王
    # [Person(name=&#39;kikodo&#39;, age=21, is_adult=True), Person(name=&#39;John&#39;, age=14, is_adult=False), Person(name=&#39;老王&#39;, age=40, is_adult=True)]

asyncio.run(simple())"><pre><span>import</span> <span>asyncio</span>
<span>from</span> <span>pydantic</span> <span>import</span> <span>BaseModel</span>
<span>from</span> <span>pydantic_resolve</span> <span>import</span> <span>Resolver</span>

<span>async</span> <span>def</span> <span>query_age</span>(<span>name</span>):
    <span>print</span>(<span>f&#39;query <span><span>{</span><span>name</span><span>}</span></span>&#39;</span>)
    <span>await</span> <span>asyncio</span>.<span>sleep</span>(<span>1</span>)
    <span>_map</span> <span>=</span> {
        <span>&#39;kikodo&#39;</span>: <span>21</span>,
        <span>&#39;John&#39;</span>: <span>14</span>,
        <span>&#39;老王&#39;</span>: <span>40</span>,
    }
    <span>return</span> <span>_map</span>.<span>get</span>(<span>name</span>)

<span>class</span> <span>Person</span>(<span>BaseModel</span>):
    <span>name</span>: <span>str</span>

    <span>age</span>: <span>int</span> <span>=</span> <span>0</span>
    <span>async</span> <span>def</span> <span>resolve_age</span>(<span>self</span>):
        <span>return</span> <span>await</span> <span>query_age</span>(<span>self</span>.<span>name</span>)

    <span>is_adult</span>: <span>bool</span> <span>=</span> <span>False</span>
    <span>def</span> <span>post_is_adult</span>(<span>self</span>):
        <span>return</span> <span>self</span>.<span>age</span> <span>&gt;</span> <span>18</span>

<span>async</span> <span>def</span> <span>simple</span>():
    <span>p</span> <span>=</span> <span>Person</span>(<span>name</span><span>=</span><span>&#39;kikodo&#39;</span>)
    <span>p</span> <span>=</span> <span>await</span> <span>Resolver</span>().<span>resolve</span>(<span>p</span>)
    <span>print</span>(<span>p</span>)
    <span># query kikodo</span>
    <span># Person(name=&#39;kikodo&#39;, age=21, is_adult=True)</span>

    <span>people</span> <span>=</span> [<span>Person</span>(<span>name</span><span>=</span><span>n</span>) <span>for</span> <span>n</span> <span>in</span> [<span>&#39;kikodo&#39;</span>, <span>&#39;John&#39;</span>, <span>&#39;老王&#39;</span>]]
    <span>people</span> <span>=</span> <span>await</span> <span>Resolver</span>().<span>resolve</span>(<span>people</span>)
    <span>print</span>(<span>people</span>)
    <span># Oops!! the issue of N+1 query happens</span>
    <span># query kikodo</span>
    <span># query John</span>
    <span># query 老王</span>
    <span># [Person(name=&#39;kikodo&#39;, age=21, is_adult=True), Person(name=&#39;John&#39;, age=14, is_adult=False), Person(name=&#39;老王&#39;, age=40, is_adult=True)]</span>

<span>asyncio</span>.<span>run</span>(<span>simple</span>())</pre></div>
<ol start="2" dir="auto">
<li>optimize <code>N+1</code> with dataloader</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="import asyncio
from typing import List
from pydantic import BaseModel
from pydantic_resolve import Resolver, LoaderDepend as LD

async def batch_person_age_loader(names: List[str]):
    print(names)
    _map = {
        &#39;kikodo&#39;: 21,
        &#39;John&#39;: 14,
        &#39;老王&#39;: 40,
    }
    return [_map.get(n) for n in names]

class Person(BaseModel):
    name: str

    age: int = 0
    def resolve_age(self, loader=LD(batch_person_age_loader)):
        return loader.load(self.name)

    is_adult: bool = False
    def post_is_adult(self):
        return self.age &gt; 18

async def simple():
    people = [Person(name=n) for n in [&#39;kikodo&#39;, &#39;John&#39;, &#39;老王&#39;]]
    people = await Resolver().resolve(people)
    print(people)

    # query query kikodo,John,老王 (N+1 query fixed)
    # [Person(name=&#39;kikodo&#39;, age=21, is_adult=True), Person(name=&#39;John&#39;, age=14, is_adult=False), Person(name=&#39;老王&#39;, age=40, is_adult=True)]

asyncio.run(simple())"><pre><span>import</span> <span>asyncio</span>
<span>from</span> <span>typing</span> <span>import</span> <span>List</span>
<span>from</span> <span>pydantic</span> <span>import</span> <span>BaseModel</span>
<span>from</span> <span>pydantic_resolve</span> <span>import</span> <span>Resolver</span>, <span>LoaderDepend</span> <span>as</span> <span>LD</span>

<span>async</span> <span>def</span> <span>batch_person_age_loader</span>(<span>names</span>: <span>List</span>[<span>str</span>]):
    <span>print</span>(<span>names</span>)
    <span>_map</span> <span>=</span> {
        <span>&#39;kikodo&#39;</span>: <span>21</span>,
        <span>&#39;John&#39;</span>: <span>14</span>,
        <span>&#39;老王&#39;</span>: <span>40</span>,
    }
    <span>return</span> [<span>_map</span>.<span>get</span>(<span>n</span>) <span>for</span> <span>n</span> <span>in</span> <span>names</span>]

<span>class</span> <span>Person</span>(<span>BaseModel</span>):
    <span>name</span>: <span>str</span>

    <span>age</span>: <span>int</span> <span>=</span> <span>0</span>
    <span>def</span> <span>resolve_age</span>(<span>self</span>, <span>loader</span><span>=</span><span>LD</span>(<span>batch_person_age_loader</span>)):
        <span>return</span> <span>loader</span>.<span>load</span>(<span>self</span>.<span>name</span>)

    <span>is_adult</span>: <span>bool</span> <span>=</span> <span>False</span>
    <span>def</span> <span>post_is_adult</span>(<span>self</span>):
        <span>return</span> <span>self</span>.<span>age</span> <span>&gt;</span> <span>18</span>

<span>async</span> <span>def</span> <span>simple</span>():
    <span>people</span> <span>=</span> [<span>Person</span>(<span>name</span><span>=</span><span>n</span>) <span>for</span> <span>n</span> <span>in</span> [<span>&#39;kikodo&#39;</span>, <span>&#39;John&#39;</span>, <span>&#39;老王&#39;</span>]]
    <span>people</span> <span>=</span> <span>await</span> <span>Resolver</span>().<span>resolve</span>(<span>people</span>)
    <span>print</span>(<span>people</span>)

    <span># query query kikodo,John,老王 (N+1 query fixed)</span>
    <span># [Person(name=&#39;kikodo&#39;, age=21, is_adult=True), Person(name=&#39;John&#39;, age=14, is_adult=False), Person(name=&#39;老王&#39;, age=40, is_adult=True)]</span>

<span>asyncio</span>.<span>run</span>(<span>simple</span>())</pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="cd examples

python -m readme_demo.0_basic
python -m readme_demo.1_filter
python -m readme_demo.2_post_methods
python -m readme_demo.3_context
python -m readme_demo.4_loader_instance
python -m readme_demo.5_subset
python -m readme_demo.6_mapper
python -m readme_demo.7_single"><pre><span>cd</span> examples

python -m readme_demo.0_basic
python -m readme_demo.1_filter
python -m readme_demo.2_post_methods
python -m readme_demo.3_context
python -m readme_demo.4_loader_instance
python -m readme_demo.5_subset
python -m readme_demo.6_mapper
python -m readme_demo.7_single</pre></div>

<div dir="auto"><h3 tabindex="-1" dir="auto">Resolver(loader_filters, global_loader_filter, loader_instances, context)</h3><a id="user-content-resolverloader_filters-global_loader_filter-loader_instances-context" aria-label="Permalink: Resolver(loader_filters, global_loader_filter, loader_instances, context)" href="#resolverloader_filters-global_loader_filter-loader_instances-context"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto">loader_filters: <code>dict</code></p>
<p dir="auto">provide extra query filters along with loader key.</p>
<p dir="auto">reference: <a href="https://github.com/allmonday/pydantic-resolve/blob/master/examples/6_sqlalchemy_loaderdepend_global_filter.py">6_sqlalchemy_loaderdepend_global_filter.py</a> L55, L59</p>
</li>
<li>
<p dir="auto">global_loader_filter: <code>dict</code></p>
<p dir="auto">provide global filter config for all dataloader instances</p>
<p dir="auto">it will raise exception if some fields are duplicated with specific loader filter config in <code>loader_filters</code></p>
<p dir="auto">reference: <a href="https://github.com/allmonday/pydantic-resolve/blob/master/tests/resolver/test_33_global_loader_filter.py">test_33_global_loader_filter.py</a> L47, L49</p>
</li>
<li>
<p dir="auto">loader_instances: <code>dict</code></p>
<p dir="auto">provide pre-created loader instance, with can <code>prime</code> data into loader cache.</p>
<p dir="auto">reference: <a href="https://github.com/allmonday/pydantic-resolve/blob/master/tests/resolver/test_20_loader_instance.py">test_20_loader_instance.py</a>, L62, L63</p>
</li>
<li>
<p dir="auto">context: <code>dict</code></p>
<p dir="auto">context can carry setting into each single resolver methods.</p>
<div dir="auto" data-snippet-clipboard-copy-content="class Earth(BaseModel):
    humans: List[Human] = []
    def resolve_humans(self, context):
        return [dict(name=f&#39;man-{i}&#39;) for i in range(context[&#39;count&#39;])]

earth = await Resolver(context={&#39;count&#39;: 10}).resolve(earth)"><pre><span>class</span> <span>Earth</span>(<span>BaseModel</span>):
    <span>humans</span>: <span>List</span>[<span>Human</span>] <span>=</span> []
    <span>def</span> <span>resolve_humans</span>(<span>self</span>, <span>context</span>):
        <span>return</span> [<span>dict</span>(<span>name</span><span>=</span><span>f&#39;man-<span><span>{</span><span>i</span><span>}</span></span>&#39;</span>) <span>for</span> <span>i</span> <span>in</span> <span>range</span>(<span>context</span>[<span>&#39;count&#39;</span>])]

<span>earth</span> <span>=</span> <span>await</span> <span>Resolver</span>(<span>context</span><span>=</span>{<span>&#39;count&#39;</span>: <span>10</span>}).<span>resolve</span>(<span>earth</span>)</pre></div>
</li>
</ul>

<ul dir="auto">
<li>
<p dir="auto">loader_fn: <code>subclass of DataLoader or batch_load_fn</code>. <a href="https://github.com/syrusakbary/aiodataloader#dataloaderbatch_load_fn-options">detail</a></p>
<p dir="auto">declare dataloader dependency, <code>pydantic-resolve</code> will take the care of lifecycle of dataloader.</p>
</li>
</ul>
<div dir="auto"><h3 tabindex="-1" dir="auto">build_list(rows, keys, fn), build_object(rows, keys, fn)</h3><a id="user-content-build_listrows-keys-fn-build_objectrows-keys-fn" aria-label="Permalink: build_list(rows, keys, fn), build_object(rows, keys, fn)" href="#build_listrows-keys-fn-build_objectrows-keys-fn"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto">rows: <code>list</code>, query result</p>
</li>
<li>
<p dir="auto">keys: <code>list</code>, batch_load_fn:keys</p>
</li>
<li>
<p dir="auto">fn: <code>lambda</code>, define the way to get primary key</p>
<p dir="auto">helper function to generate return value required by <code>batch_load_fn</code>. read the code for details.</p>
<p dir="auto">reference: <a href="https://github.com/allmonday/pydantic-resolve/blob/master/tests/utils/test_utils.py">test_utils.py</a>, L32</p>
</li>
</ul>

<ul dir="auto">
<li>
<p dir="auto">param: <code>class of pydantic or dataclass, or a lambda</code></p>
<p dir="auto"><code>pydantic-resolve</code> will trigger the fn in <code>mapper</code> after inner future is resolved. it exposes an interface to change return schema even from the same dataloader.
if param is a class, it will try to automatically transform it.</p>
<p dir="auto">reference: <a href="https://github.com/allmonday/pydantic-resolve/blob/master/tests/resolver/test_16_mapper.py">test_16_mapper.py</a></p>
<blockquote>
<p dir="auto">you may need it if there has some reuseable transforming params.</p>
</blockquote>
</li>
</ul>
<div dir="auto"><h3 tabindex="-1" dir="auto">ensure_subset(target_model)</h3><a id="user-content-ensure_subsettarget_model" aria-label="Permalink: ensure_subset(target_model)" href="#ensure_subsettarget_model"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto">target_model: <code>class</code></p>
<p dir="auto">it will raise exception if fields of decorated class has field not existed in <code>base_class</code>.</p>
<p dir="auto">this provide a validation to ensure your schema&#39;s field is a subset of targe schema.</p>
<p dir="auto">reference: <a href="https://github.com/allmonday/pydantic-resolve/blob/master/tests/utils/test_2_ensure_subset.py">test_2_ensure_subset.py</a></p>
</li>
</ul>
<div dir="auto"><h3 tabindex="-1" dir="auto">model_config(hidden_fields: list[str], default_required: bool) (new in v1.9.1)</h3><a id="user-content-model_confighidden_fields-liststr-default_required-bool-new-in-v191" aria-label="Permalink: model_config(hidden_fields: list[str], default_required: bool) (new in v1.9.1)" href="#model_confighidden_fields-liststr-default_required-bool-new-in-v191"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>hidden_fields: list the field names you don&#39;t want to expose.
<ul dir="auto">
<li>It will hide your fields in both schema and dump function (dict(), json())</li>
<li>It also support Field(exclude=True)</li>
</ul>
</li>
<li>default_required: if True, fields with default values will also in schema[&#39;required&#39;]</li>
</ul>
<blockquote>
<p dir="auto">In FastAPI, if you use hidden_fields only, the hidden fields are still visible with their default value.</p>
<p dir="auto">because <code>__exclude_fields__</code> will be reset during the second process of dict() in FastAPI.</p>
<p dir="auto">To avoid this behavior, use Field(default=&#39;your value&#39;, exclude=True) instead</p>
</blockquote>
<p dir="auto">reference: <a href="https://github.com/allmonday/pydantic-resolve/blob/master/tests/utils/test_schema_config.py">test_schema_config.py</a></p>

<div dir="auto" data-snippet-clipboard-copy-content="poetry shell
cd examples
uvicorn fastapi_demo.main:app
# http://localhost:8000/docs#/default/get_tasks_tasks_get"><pre>poetry shell
<span>cd</span> examples
uvicorn fastapi_demo.main:app
<span><span>#</span> http://localhost:8000/docs#/default/get_tasks_tasks_get</span></pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="poetry run python -m unittest  # or
poetry run pytest  # or
poetry run tox"><pre>poetry run python -m unittest  <span><span>#</span> or</span>
poetry run pytest  <span><span>#</span> or</span>
poetry run tox</pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="poetry run coverage run -m pytest
poetry run coverage report -m"><pre>poetry run coverage run -m pytest
poetry run coverage report -m</pre></div>
</article></div></div>
  </body>
</html>
