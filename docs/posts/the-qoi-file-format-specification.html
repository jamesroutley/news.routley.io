<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://phoboslab.org/log/2021/12/qoi-specification">Original</a>
    <h1>The QOI File Format Specification</h1>
    
    <div id="readability-page-1" class="page"><div>	
	<div>
		
		<p>— Monday, December 20th 2021</p>
	</div>
	

	<p>Last month <a href="https://phoboslab.org/log/2021/11/qoi-fast-lossless-image-compression">I announced</a> a 
<em>toy project</em> called QOI — the <em><a href="https://qoiformat.org">Quite OK Image Format</a></em>. It losslessly compresses
RGB and RGBA images to a similar size of PNG, while offering a <strong>20x-50x</strong> 
speedup in compression and <strong>3x-4x</strong> speedup in decompression.</p>
<p><img src="https://phoboslab.org/content/assets/qoi-logo.svg" alt="QOI Logo"/>
</p>
<p>With the help of countless passionate people on Github, we have refined some of
the rough edges and specified exactly what a valid QOI file is. QOI is now
faster, compresses better and is <strong>even simpler</strong>.</p>
<p>The final QOI-Specification <a href="https://qoiformat.org/qoi-specification.pdf">fits on single-page PDF</a>.
More information and benchmark results can be found on <a href="https://qoiformat.org/">qoiformat.org</a>. 
The source is on <a href="https://github.com/phoboslab/qoi">github</a>.</p>
<p>Getting here was not easy. There were more than 500 comments on the github page,
with a mixture of careful analysis, interesting proposals and heated discussions. 
Everyone has different ideas of what an image format should be able to do and 
how it should do it. In the name of simplicity, I rejected many of those.</p>
<p>QOI will not compress images as well as an optimized PNG encoder and that&#39;s OK.
We already have image formats that out-compress PNG anyway. QOI&#39;s virtue is in 
its simplicity.</p>
<h2>Adoption</h2>
<p>In the last few weeks QOI implementations for lot of different languages
and libraries popped up. Including 
<a href="https://github.com/MasterQ32/zig-qoi">Zig</a>,
<a href="https://github.com/steven-joruk/qoi">Rust</a>,
<a href="https://github.com/ChevyRay/qoi_rs">Rust</a>,
<a href="https://github.com/zakarumych/rapid-qoi">Rust</a>,
<a href="https://github.com/xfmoulet/qoi">Go</a>,
<a href="https://github.com/panzi/jsqoi">TypeScript</a>,
<a href="https://github.com/0xd34df00d/hsqoi">Haskell</a>,
<a href="https://github.com/pfusik/qoi-ci">Ć</a>,
<a href="https://github.com/kodonnell/qoi">Python</a>,
<a href="https://github.com/NUlliiON/QoiSharp">C#</a>,
<a href="https://github.com/rbino/qoix">Elixir</a>,
<a href="https://github.com/elihwyma/Swift-QOI">Swift</a>,
<a href="https://github.com/saharNooby/qoi-java">Java</a> and
<a href="https://github.com/DosWorld/pasqoi">Pascal</a> and wrappers for 
<a href="https://github.com/kodonnell/qoi">Python</a> and <a href="https://github.com/Cr4xy/lua-qoi">Lua</a>.</p>
<p>There is a <a href="https://github.com/floooh/qoiview">native application to view qoi files</a>,
plugins for <a href="https://github.com/pfusik/qoi-ci">Gimp, Paint.NET and XNView MP</a>,
<a href="https://github.com/libsdl-org/SDL_image/pull/199">support in SDL_Image</a> (pending)
and many more.</p>
<p>(Note that not all of these have been updated to the final spec yet.)</p>
<p>With all this going on, it looks like QOI might actually end up being <em>a thing</em>.
I don&#39;t expect it to appear in web browsers, where compression ratio is much
more important, anytime soon. But there are use-cases in games or other
applications where the performance benefits certainly make sense.</p>
<h2>The Specification</h2>
<p>The main changes from the initial release are:</p>
<ul>
<li>all data is now encoded as big-endian.</li>
<li>addition of a <code>channels</code> and <code>colorspace</code> header. These are only informative
and don&#39;t change the behavior of the en-/decoder in any way.</li>
<li>removal of the <code>size</code> header. This allows for a streaming encoder without
having to jump back to set the size in the file header.</li>
<li><code>width</code> and <code>height</code> fields are now 32bits.</li>
<li>the data format has been reduced to just 6 different chunks.</li>
</ul>
<p>If you have a minute, please have a look at the <a href="https://qoiformat.org/qoi-specification.pdf">QOI File Format Specification</a>.</p>
<p><a href="https://qoiformat.org/qoi-specification.pdf"><img src="https://phoboslab.org/content/assets/qoi-specification.png" alt="QOI File Format Specification"/></a></p>
<h2>Thanks &lt;3</h2>
<p>I&#39;m tremendously thankful for all the comments on github. Even if many ideas
weren&#39;t implemented, they showed an interesting direction that a 
<em>Quite Good Image Format</em> could take. And I&#39;m very happy that QOI sparked that
research.</p>
<p>Again, thanks to everyone who wrote an implementation, commented on github or
just shared this with others! It&#39;s been a wild ride.</p></div></div>
  </body>
</html>
