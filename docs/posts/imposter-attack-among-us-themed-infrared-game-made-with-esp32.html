<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.langworth.com/imposter-attack">Original</a>
    <h1>Show HN: Imposter Attack – Among Us-themed infrared game made with ESP32</h1>
    
    <div id="readability-page-1" class="page"><article> <figure><img src="https://blog.langworth.com/assets/imposter-attack/main-1200.jpg" alt="A custom gaming setup featuring Among Us-themed glowing targets in various designs, a laptop displaying the game &#34;Imposter Attack&#34; with a high score of 4900, and infrared components, all illuminated under colorful lighting." loading="eager"/></figure>
<p>At Legoland California this past summer I rode <a href="https://en.wikipedia.org/wiki/Lost_Kingdom_Adventure">a Lego-styled ancient Egyptian adventure ride</a> where you travel through a tomb and shoot as many snakes and mummies and things as you can with a laser gun. Two things occurred to me while riding: the fact that Legoland thought it a good idea to equip kids with lasers, and the thought that I could make a shooting gallery game like this that people would like.</p>
<p>Making games is fun. Games are the reason lots of people get into programming, including me. Some people even make a profession out of them. Even though this was months before Halloween, the game that appeared in my mind was a fun, shoot-em-up carnival-style game, and maybe I could inspire a few kids with software and hardware along the way.</p>
<p>But this wasn’t just a “this will be fun” idea. I’ve noticed a pattern about myself and it’s been the basis of many of my projects or even companies. I see bits of technology and how they fit together, especially those that have become recently available or economical. If the result is novel product or game that nobody else has created before, I’m locked in, and I tend to not shut up about it.</p>
<p>In this case, I had recently learned about inexpensive programmable microprocessors, particularly the <a href="https://esp32.com">ESP32</a>, and I finally had an excuse to get into rudimentary electrical engineering. I was stunned at how cheap and accessible electronic components had become, and the online learning resources seemed infinite. I googled around and couldn’t find anything too similar to what I wanted to build, and thus this goofy and fun idea took hold.</p>
<h2 id="what-the-heck-is-esp32">What the heck is ESP32?</h2>
<p>One of the greatest fears as a homeowner is uncontrolled running water. A great product to deal with this fear is <a href="https://flumewater.com">Flume</a>, an internet-connected water meter that gives you reports and alerts you to leaks. Flume had recently informed me that my old unit was defective and sent me a free replacement, so naturally I took apart the old one to see what was inside. Made of two components, a reader and base station that communicate wirelessly, opening them revealed that they were powered by a versatile, programmable chip called ESP32.</p>
<p>As someone who hadn’t been following makers, Arduino, or any kind of hardware, the ESP32 platform was astounding. It has a dual-core CPU that runs at up to 240 MHz, it can do wifi and Bluetooth, and it’s got about forty pins that can be used for all sorts of stuff. You can program it with the free <a href="https://www.arduino.cc/en/software">Arduino IDE</a> and a USB cable, and they <a href="https://amazon.com/s?k=esp32">cost about $6 per board</a>. For someone who wanted to experiment efficiently <em>and</em> knew that they’d probably set one or two prototypes on fire, this was perfect.</p>
<p>I watched <a href="https://www.youtube.com/playlist?list=PLUhbm0oyg91ZyRa5XK_S947yB354VmN8W">a <em>lot</em> of videos on electronics basics and Arduino</a> and figured out what I’d need to buy to start learning. Initially I bought a single board and some LEDs from <a href="https://www.sparkfun.com">SparkFun</a>, which is a popular site, but the lengthy ship times made me impatient. I turned to Amazon — yes, I’m sorry — where I could get components much more quickly and cheaply, and spent a few dollars on <a href="https://a.co/d/a7I6lh6">a few ESP-WROOM-32 boards</a> and <a href="https://a.co/d/6HOSekd">a breadboard starter kit</a>. Learning the Arduino IDE was pretty quick, and before long I had some LEDs blinking and was reading infrared signals from a soundbar remote I had lying around.</p>
<lite-vimeo data-id="1038078166" data-params="loop=true&amp;autoplay=1&amp;dnt=1"> <a href="https://vimeo.com/1038078166" aria-label="Play"></a> </lite-vimeo> 
<p>The game started to solidify in my head, and the idea of zapping aliens seemed reasonably fun. I decided to create <a href="https://en.wikipedia.org/wiki/Among_Us">Among Us</a>-style characters for the target faces since every kid loves that game (mine do) and the characters are very recognizable. So I decided to build out the first version of a Node.js game server with a web-driven scoreboard, and I had the ESP32 target connect to my wifi and communicate “hits” over UDP:</p>
<figure><lite-vimeo data-id="1038081093" data-params="autoplay=1&amp;dnt=1"> <a href="https://vimeo.com/1038081093" aria-label="Play"></a> </lite-vimeo> <figcaption>It’s basically done, right?</figcaption></figure>
<h2 id="moving-to-micropython">Moving to MicroPython</h2>
<p>While working on the game I used my newfound ESP32 skills to do some other projects, such as automating the remote-controlled blinds in our bedroom as well as a motion sensor that would send <a href="https://pushover.net/">Pushover</a> notifications to my phone. I started to run into issues with keeping time and went down rabbit holes of using NTP and <a href="https://a.co/d/h8FzOZ5">DS3231 realtime clock modules</a>. Online friends convinced me to look at <a href="https://micropython.org">MicroPython</a><sup><a href="#user-content-fn-2" id="user-content-fnref-2" data-footnote-ref="" aria-describedby="footnote-label">1</a></sup>, which seemed to have a better ecosystem than Arduino, so I switched.</p>
<p>I was hesitant to switch to MicroPython because I wanted to stay low-level and better understand the hardware. But I quickly discovered that iterating with MicroPython was <em>much</em> faster. Python is a much easier language to work with, of course, but the real win was that there was no compilation or flashing step. In theory, you simply copy files to the board and reset it with the <a href="https://docs.micropython.org/en/latest/reference/mpremote.html"><code>mpremote</code> command</a>. This was <em>mostly</em> true, but watching <code>main.py</code> for changes, copying the files, and monitoring the serial port for output gets cumbersome and buggy, so I built <a href="https://github.com/statico/imposter-attack-2024/blob/main/devtool/devtool.py">a tool</a> to automate this. It worked most of the time but still occasionally required unplugging and reconnecting the board.</p>
<p>The switch to MicroPython really paid off later when I started using <a href="https://github.com/mkomon/uota">uOTA</a>, an over-the-air updater framework. By hosting a tarball on my laptop and sending the targets an “update” command, I was able to update all 15 devices wirelessly without connecting them via USB. More on that later.</p>
<h2 id="infrared">Infrared</h2>
<p>Sending and receiving infrared (IR) signals with microcontrollers is well-documented with a handful of protocols. After some experimentation I found all of the remotes I had used <a href="http://exploreembedded.com/wiki/NEC_IR_Remote_Control_Interface_with_8051">NEC</a>, which basically sends one long pulse, then a space, then bits of data with some simple error checking.</p>
<figure><img src="https://blog.langworth.com/assets/imposter-attack/ir-nec.png" alt="Diagram illustrating the NEC infrared remote control signal protocol" loading="lazy"/><figcaption><p>NEC infrared remote control signal protocol from <a href="https://exploreembedded.com/wiki/NEC_IR_Remote_Control_Interface_with_8051">Explore
Embedded</a></p></figcaption></figure>

<p>The <a href="https://github.com/Arduino-IRremote/Arduino-IRremote">IRremote library for Arduino</a> is great. It’s well-documented, has lots of examples, and decodes the IR protocol automatically. Even though I didn’t use it, one of the best features is how it creates a 4-byte hash of any incoming IR command, which makes it trivial to check for button presses on an IR remote.</p>
<p>For inputs, I was definitely set on using <a href="https://a.co/d/21eXs0B">the cheapest IR laser tag guns I could find</a>, which use IR despite being called “laser” tag. I also had an <a href="https://www.youtube.com/watch?v=CZkqtpVFRTE">“MagiQuest” wand</a> from a local water park with a <em>definitely-not-Harry-Potter</em> game where you wave a wand to collect points. Importantly, I felt the wand would be more appropriate to use the wand at a school event.</p>
<p>Neither the pistols nor the MagiQuest wand used any known protocol<sup><a href="#user-content-fn-1" id="user-content-fnref-1" data-footnote-ref="" aria-describedby="footnote-label">2</a></sup>, so I had to parse the raw timing data and look for patterns there. I discovered that there was a particular tolerance needed when decoding an IR signal as they tend to get more corrupted or “wrong” the farther away you are and how accurately you’re aiming the transmitter at the receiver. I assume IR signals are bright and bouncy to allow the changing TV channels from a hundred feet away, but other than that I haven’t really researched the physics as to why this happens. Regardless, I was able to use this property to more accurately detect hits from the laser guns and wands.</p>
<figure><img src="https://blog.langworth.com/assets/imposter-attack/pistols-and-wand.jpg" alt="Two toy laser tag pistols in blue and red lightning designs and a wooden wand with tan grip wrappings, arranged on a green cutting mat. A small clear plastic case containing electronic components and a USB cable is also visible." loading="lazy"/><figcaption>A proper alien-blasting arsenal</figcaption></figure>
<p>Around this time I also switched to MicroPython and began using <a href="https://github.com/peterhinch/micropython_ir">Peter Hinch’s micropython_ir libraries</a>. I decided that a <code>1</code> bit was any burst longer than 750µs for the laser guns and 500µs for the wand. The entire receiving code ended up looking like this:</p>
<pre tabindex="0" data-language="python"><code><span><span># `burst` is an array of IR pulse lengths</span></span>
<span><span>bits </span><span>=</span><span> &#34;&#34;</span></span>
<span><span>if</span><span> burst</span><span>[</span><span>0</span><span>]</span><span> &gt;</span><span> 1200</span><span> and</span><span> burst</span><span>[</span><span>0</span><span>]</span><span> &lt;</span><span> 1800</span><span>:</span></span>
<span><span>  # Laser gun</span></span>
<span><span>  for</span><span> i</span><span>,</span><span> value </span><span>in</span><span> enumerate</span><span>(</span><span>burst</span><span>):</span></span>
<span><span>    if</span><span> i </span><span>==</span><span> 0</span><span>:</span></span>
<span><span>      continue</span></span>
<span><span>    if</span><span> i </span><span>%</span><span> 2</span><span> ==</span><span> 1</span><span>:</span></span>
<span><span>      bits </span><span>+=</span><span> &#34;</span><span>1</span><span>&#34;</span><span> if</span><span> value </span><span>&gt;</span><span> 750</span><span> else</span><span> &#34;</span><span>0</span><span>&#34;</span></span>
<span><span>else</span><span>:</span></span>
<span><span>  # Wand or anything else</span></span>
<span><span>  for</span><span> i</span><span>,</span><span> value </span><span>in</span><span> enumerate</span><span>(</span><span>burst</span><span>):</span></span>
<span><span>    bits </span><span>+=</span><span> &#34;</span><span>1</span><span>&#34;</span><span> if</span><span> value </span><span>&gt;</span><span> 500</span><span> else</span><span> &#34;</span><span>0</span><span>&#34;</span></span>
<span></span>
<span><span># Wand is acting strangely. Trim any leading 10+</span></span>
<span><span>bits</span><span>.</span><span>replace</span><span>(</span><span>&#34;</span><span>1</span><span>&#34;</span><span> +</span><span> &#34;</span><span>0</span><span>&#34;</span><span> *</span><span> (</span><span>len</span><span>(</span><span>bits</span><span>)</span><span> -</span><span> len</span><span>(</span><span>bits</span><span>.</span><span>lstrip</span><span>(</span><span>&#34;</span><span>0</span><span>&#34;</span><span>))),</span><span> &#34;&#34;</span><span>,</span><span> 1</span><span>)</span></span>
<span></span>
<span><span>if</span><span> len</span><span>(</span><span>bits</span><span>)</span><span> ==</span><span> 20</span><span> and</span><span> bits</span><span>[:</span><span>8</span><span>]</span><span> ==</span><span> &#34;</span><span>00001111</span><span>&#34;</span><span>:</span></span>
<span><span>  print</span><span>(</span><span>&#34;</span><span>hit (pistol)</span><span>&#34;</span><span>)</span></span>
<span><span>  handle_hit</span><span>()</span></span>
<span><span>elif</span><span> len</span><span>(</span><span>bits</span><span>)</span><span> &gt;=</span><span> 12</span><span> and</span><span> bits</span><span>[:</span><span>12</span><span>]</span><span> ==</span><span> &#34;</span><span>100101010101</span><span>&#34;</span><span>:</span></span>
<span><span>  print</span><span>(</span><span>&#34;</span><span>hit (wand)</span><span>&#34;</span><span>)</span></span>
<span><span>  handle_hit</span><span>()</span></span>
<span><span>else</span><span>:</span></span>
<span><span>  print</span><span>(</span><span>f</span><span>&#34;unknown IR signal: </span><span>{</span><span>bits</span><span>}</span><span>&#34;</span><span>)</span></span></code></pre>
<h2 id="lighting">Lighting</h2>
<p>My vision was to have 10-15 targets that, once the game started, would all light up at random intervals to signal that they were ready to be shot. I wanted the targets to flash if shot, but also flicker and turn off if the player didn’t shoot them as it’s a common mechanic in platformer games to flicker and remove items if they’re not picked up in time. Since this game was going to be played by kids on Halloween, I figured that UV (blacklight) against neon paper would fit the spooky motif. Thus, I needed two LEDs: one UV for the “ready” light and something else for the “shot” light.</p>
<p>One of the first real challenges I had was figuring out how much light I could produce with an ESP32. The GPIO pins produce 3.3V, but the maximum current is a little mysterious even though the datasheets say something like 40mA. I really wanted to drive the LEDs right from the board and avoid any extra components to keep things simple and reliable. A relay or step-up voltage converter would mean lots of extra soldering for fifteen targets, and another part meant another thing that could fail.</p>
<p>I ordered a few different types of LED components to experiment with and decided that <a href="https://a.co/d/5ve473u">3W 420nm UV</a> and <a href="https://a.co/d/6pGWnzx">1W white LED</a> “lamp chips” would be sufficient as long as the LED was oriented correctly. I made a prototype with a little stalk to angle the LEDs properly and a little tin foil reflector to help add the light. The reflector doubled as a shield to prevent me from looking at the UV light, which left yellow spots in my vision for a few minutes. I’m sure that that’s totally safe.</p>
<figure><lite-vimeo data-id="1038439862" data-params="loop=true&amp;autoplay=1&amp;dnt=1"> <a href="https://vimeo.com/1038439862" aria-label="Play"></a> </lite-vimeo> <figcaption><p>Glow-in-the-dark paint didn’t look nearly as cool as I thought it would</p></figcaption></figure>
<p>This was before I discovered the world of RGB lighting and WS2812B strips, which I’ll cover in a later post when I talk about my holiday lights project. In the future, I might use one or more 5V WS2812B LED lamp chips which, in theory, could be driven using the full 5V from the power supply and controlled via a data pin. Noted for next year!</p>
<h2 id="power">Power</h2>
<p>Power was another big question. I wasn’t sure whether I should keep each device plugged with long USB cables or use battery power. Long cables meant I wouldn’t have to worry about battery life and swapping out batteries during an event, but I also imagined a tripping hazard, and I worried about voltage drop. Instead, I decided to give batteries a try.</p>
<p>I learned about the ubiquitous <a href="https://www.reddit.com/r/18650masterrace/">18650 li-ion “flashlight battery”</a>, a form factor that is apparently in everything rechargeable from power tools to <a href="https://insideevs.com/news/587455/batteries-tesla-using-electric-cars/">Teslas</a>. In fact, I already had a few left over from when I fixed the battery pack in a handheld vacuum cleaner. Since they’re unprotected and can cause fires if overcharged, undercharged, or looked at menacingly,<sup><a href="#user-content-fn-3" id="user-content-fnref-3" data-footnote-ref="" aria-describedby="footnote-label">3</a></sup> a charging and discharging protection circuit is necessary. Luckily, <a href="https://a.co/d/8J2QXgp">TP4056 charging modules</a> are cheap and abundant.</p>
<p>With power figured out, my prototype was now complete hardware-wise.</p>
<figure><img src="https://blog.langworth.com/assets/imposter-attack/prototype.jpg" alt="Back and front of the target prototype. Pictured is an 18650 battery connected to a TP4056 li-ion protection circuit, which is powering a D1 Mini ESP32 board via USB." loading="lazy"/><figcaption>Back and front of the target prototype</figcaption></figure>
<p>Once the charging components arrived, I made a prototype of my first battery-powered self-contained ESP-NOW powered target and it worked! The only glitch was that the TP4056 required a repeat insertion of the battery. It seemed like something needed to be powered up for the charging component to activate, and only with the second battery insertion did they begin to provide 5V continuously. The modules were meant to drive USB battery packs, so I’m guessing this behavior is related to that somehow. In the future I’ll either add a power switch to make the process easier or I’ll find a way to circumvent it completely.</p>
<h2 id="communication">Communication</h2>
<p>I was still worried about power consumption, and this led me to discover <a href="https://randomnerdtutorials.com/esp-now-esp32-arduino-ide/">ESP-NOW</a>, a UDP-like 2.4 GHz communication protocol available on ESP32 systems. Not connecting to wifi sounded much more efficient since the CPU wouldn’t need to waste valuable cycles and energy processing packets and such. Also, I was already disappointed to find that UDP retransmission was necessary even on my private and quiet home network. The only downside was that I would need yet another ESP32 plugged into my laptop to act as an ESP32-NOW bridge.<sup><a href="#user-content-fn-4" id="user-content-fnref-4" data-footnote-ref="" aria-describedby="footnote-label">4</a></sup></p>
<p>When manufactured, each ESP32 gets a unique MAC address. I was already using this as a device identifier when communicating over UDP, so converting the code to use ESP-NOW was simple. I used an extra <a href="https://www.sparkfun.com/products/23484">ESP32-C3</a> I had ordered since it fit nicely into a plastic battery box and could stick to my laptop with blue tak. Testing them demonstrated communication distances of over 200 feet <em>without retransmission</em>, which was impressive. ESP-NOW became an easy win.</p>
<p>I wasn’t finished with wifi, though. I plumbed in <a href="https://github.com/mkomon/uota">uOTA</a>, a MicroPython framework that does over-the-air updates over wifi, and updated the targets to only connect to wifi once they received a special “update” command over ESP-NOW. Once connected, they would check for updates from a web server running on my laptop with a fixed IP, update themselves, and reboot. This ended up working <em>perfectly</em>, and later it became the primary way I made changes to the target code.</p>
<h2 id="more-target-work">More target work</h2>
<p>With the prototype working, I thought carefully on how construct fifteen of these targets in the most foolproof, reliable, and easily-debuggable way. I decided on the following:</p>
<ul>
<li><a href="https://a.co/d/aer4OII">18650 li-ion batteries</a> with <a href="https://a.co/d/2RUgmFJ">holders</a> and <a href="https://a.co/d/9qqIEh4">TP4056 charging modules</a> as the power source</li>
<li><a href="https://a.co/d/jeLaDBc">D1 Mini ESP-WROOM-32</a> boards since they were the cheapest and, not having any header pins soldered, the most versatile</li>
<li><a href="https://a.co/d/72jX1Bq">Neon project paper</a> on which to print the target faces, <a href="https://a.co/d/fARe4w1">spray-gluing</a> them to cardboard to make them sturdy, and punching a hole with an awl for the IR received to peek through</li>
<li>Small pieces of <a href="https://a.co/d/83qRSb8">mirror paper</a> to act as reflectors</li>
<li><a href="https://a.co/d/6rqoSjI">Clear plastic storage cases</a> to protect the components and make handling easier</li>
<li>Simple wood T’s, black spray paint, and hot glue as a frame</li>
<li><a href="https://a.co/d/aOjW3op">Blu-Tak putty</a> to stick components to the case and frame</li>
<li><a href="https://a.co/d/2fd04dm">3M Command Strips</a> (like velcro) to stick the case to the frame and the target to the case</li>
<li><a href="https://a.co/d/9AyDcFh">Stick-on hangers</a> so the targets could be hung easily, such as with <a href="https://a.co/d/7hlgE0m">strong magnetic hangers</a> on a garage door</li>
<li>Dupont jumper wires (<a href="https://a.co/d/7y3kHFk">1</a>, <a href="https://a.co/d/8y4yhWP">2</a>, <a href="https://a.co/d/6jH10Aw">3</a>) instead of soldering in order to make service and assembly easier</li>
<li>My own 4- or 5-pin jumper bridges created from soldering extra headers as a common ground</li>
</ul>
<p>Making the targets modular — a case, a target face, and frame — let them be easily constructed and serviceable. With the command strips, if a target face seemed off-center or unbalanced, I could take it off and reposition it. Also, all of the targets packed up neat and tidy in a box when no longer in use.</p>
<figure><img src="https://blog.langworth.com/assets/imposter-attack/prototype2.jpg" alt="Two game targets on a workbench, one facing front and one facing back. The front-facing one shows an orange neon sign with an Among Us imposter graphic and the back of the reflector attached to a T-frame on the bottom. The one facing back shows the clear case with the ESP32, battery holder, and charging module inside, with connectors going out to the IR receiver and LEDs." loading="lazy"/><figcaption>Two more prototypes using the new parts</figcaption></figure>
<p>Using Dupont jumper wires for everything had mixed results. On one hand, I liked the idea of making the ESP32 boards reusable. On the other hand, jumper wires tend to work themselves free, and I ended up adding blu-tak to all of them. Also, the project boxes weren’t quite tall enough, so repeated pressure from handling and inserting batteries tended to knock the wires loose. Despite this, everything mostly worked, and figuring out why something wasn’t working was usually a matter of fixing a loose connection.</p>
<p>Using some Among Us clip art and <a href="https://www.iconfinder.com/iconsets/halloween-01">a Halloween icon pack</a>, I made fifteen graphics in Figma to use for target faces. I wanted to use a local shop to print the targets but, for some reason, couldn’t find one that would do it. One shop owner said to just use my own laser printer with the “thick paper” setting, which is what I did. Some neon paper colors held toner better than others, and all of the target faces had some amount of ghosting. The toner also tended to rub off after printing, so every print was sprayed down with aerosol Minwax polycrylic to seal it up.</p>
<figure><div data-astro-cid-juhulabb=""> <div data-astro-cid-juhulabb=""> <p><img src="https://blog.langworth.com/assets/imposter-attack/build1.jpg" alt="Brightly colored Among Us characters with tools, printed on fluorescent paper, scattered on a workbench." loading="lazy"/></p><p><img src="https://blog.langworth.com/assets/imposter-attack/build2.jpg" alt="Small breadboard with a mounted breakout board, secured by a rubber band on a green cutting mat." loading="lazy"/></p><p><img src="https://blog.langworth.com/assets/imposter-attack/build3.jpg" alt="A pile of blue breakout boards with scattered components on a workbench." loading="lazy"/></p><p><img src="https://blog.langworth.com/assets/imposter-attack/build4.jpg" alt="Neatly organized multicolored wires and LED modules on top of clear plastic storage boxes." loading="lazy"/></p><p><img src="https://blog.langworth.com/assets/imposter-attack/build5.jpg" alt="A green cutting mat with multiple black-painted, T-shaped wood pieces arranged in a pattern." loading="lazy"/></p><p><img src="https://blog.langworth.com/assets/imposter-attack/build6.jpg" alt="A small project setup featuring an ESP32 board, battery pack, and connected LEDs on a workbench." loading="lazy"/></p><p><img src="https://blog.langworth.com/assets/imposter-attack/build7.jpg" alt="Prototyping station with a plastic container holding electronics, including a sensor module and wires." loading="lazy"/></p><p><img src="https://blog.langworth.com/assets/imposter-attack/build8.jpg" alt="The backs of three targets showing different states of assembly placed in front of four target faces." loading="lazy"/></p><p><img src="https://blog.langworth.com/assets/imposter-attack/build9.jpg" alt="Targets that have been deconstructed and are ready for storage." loading="lazy"/></p> </div>    </div>  <figcaption>Various progress pictures</figcaption></figure>
<p>After a few nights of doing everything 15-20 times (I needed redundancy for every step of course), I had fifteen working targets ready to go! I strung up some rope in the garage and hung them all for easy testing.</p>
<figure><lite-vimeo data-id="1038463145" data-params="loop=true&amp;autoplay=1&amp;dnt=1"> <a href="https://vimeo.com/1038463145" aria-label="Play"></a> </lite-vimeo> <figcaption>Thirteen targets flashing in “test” mode</figcaption></figure>
<p>The final idea to implement was a “boss” target that would have special sounds and take more hits to destroy. Originally I had intended the boss target to be bigger and scarier, but since I had to print the targets myself I settled for a unique face and just told players which target was “special.” Since I didn’t want to have a unique version of the code for bosses, I designated a single pin as a pull-up resistor which the code could read to determine whether it was a regular or boss target, and on the special target I connected that pin to ground.</p>
<pre tabindex="0" data-language="python"><code><span><span>imposter_pin </span><span>=</span><span> Pin</span><span>(</span><span>16</span><span>,</span><span> Pin</span><span>.</span><span>IN</span><span>,</span><span> Pin</span><span>.</span><span>PULL_UP</span><span>)</span></span>
<span></span>
<span><span># ...</span></span>
<span></span>
<span><span>def</span><span> is_imposter</span><span>():</span></span>
<span><span>  return</span><span> imposter_pin</span><span>.</span><span>value</span><span>()</span><span> ==</span><span> 0</span></span></code></pre>
<h2 id="the-big-day-or-days">The big day (or days)</h2>
<p>The first trial run was at our elementary school’s <a href="https://en.wikipedia.org/wiki/Trunk-or-treating">“Trunk or Treat”</a> event, where people parked cars at the school and made Halloween-themed exhibits.</p>
<figure><img src="https://blog.langworth.com/assets/imposter-attack/trunk.jpg" alt="" loading="lazy"/></figure>
<p>Everyone had a blast! About 115 kids played, with a few making second or third attempts at breaking the high score. I was told that I had the <em>second biggest</em> crowd, second only to a Pokémon bean bag game (which did look pretty cool). Some adults were curious, but most importantly, a handful of questions from kids who wanted to know how I built it. It was especially rewarding to show one off one of the extra targets I brought. One kid even recognized the ESP32 chips and said, “Oh, these are the ones you can make drones out of!”</p>
<figure><lite-vimeo data-id="1038824565" data-params="autoplay=1&amp;dnt=1"> <a href="https://vimeo.com/1038824565" aria-label="Play"></a> </lite-vimeo> <figcaption>Example gameplay with the wand</figcaption></figure>
<p>Halloween, however, was the <em>big</em> show. I set up a table in front of our garage and used [magnetic hooks] to mount the targets, of which only 13 were working. Having learned from the event at the school, I taped off a line for people to stand behind so they’d have the best chance at shooting the targets. I also added a counter to track how many games were played, and it came out to almost 90. A handful of people came back to try and get the high score, which I think was around 5,200.</p>
<figure><lite-vimeo data-id="1038824555" data-params="autoplay=1&amp;dnt=1"> <a href="https://vimeo.com/1038824555" aria-label="Play"></a> </lite-vimeo> <figcaption>Example gameplay with the laser guns</figcaption></figure>
<h2 id="improvements-for-next-time">Improvements for next time</h2>
<p>People really liked the game, and I’ve set it up a few more times for other events. However, there’s a host of improvements that need to be made to make the game more fun and reliable.</p>
<ul>
<li>An on/off switch — Popping batteries in and out was a lot of toil because the targets were so fragile.</li>
<li>Better target faces — Surely I can find a local sign shop to do coroplast signs. And I might try a different theme than Among Us.</li>
<li>Better lighting — WS2812B LEDs might be the solution since I can drive a few at once as well as change the colors for different effects and events.</li>
<li>Custom boards — Using something like <a href="https://www.pcbway.com">PCBWay</a> to print my own boards might be a good idea. I could make sockets to drop the ESP32s and other components into and use headers to get rid of the unreliable jumper wires.</li>
</ul>
<p>Until next time, please enjoy the videos. You can checkout the <a href="https://github.com/statico/imposter-attack-2024">source code for the entire project</a> on GitHub.</p>
 </article></div>
  </body>
</html>
