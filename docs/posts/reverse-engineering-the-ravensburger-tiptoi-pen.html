<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/entropia/tip-toi-reveng">Original</a>
    <h1>Reverse engineering the Ravensburger TipToi pen</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto">Das tttool hat jetzt eine deutsche Webseite für Anwender: <a href="http://tttool.entropia.de/" rel="nofollow">http://tttool.entropia.de/</a></p>

<p dir="auto">The goal of this project is to understand the file and paper format for the
Ravensburger TipToi pen. The ultimate goal is that everyone can create their
own books, with their own sounds.</p>
<p dir="auto">The current status is that we understood most of the file format (see the
<a href="https://github.com/entropia/tip-toi-reveng/blob/master/GME-Format.md">GME file format specification</a>). We provide a tool that allows
you to dissect these files.  The tool can also be used to generate completely
new files from scratch; see below for details.</p>
<p dir="auto">If you want to learn more please have a look into our wiki
(<a href="https://github.com/entropia/tip-toi-reveng/wiki">https://github.com/entropia/tip-toi-reveng/wiki</a>).</p>

<p dir="auto">Use the tool <code>tttool</code> to investigate the gme files and build new ones. It
supports various subcommands:</p>
<div data-snippet-clipboard-copy-content="GME creation commands:
  assemble                 creates a gme file from the given source

OID code creation commands:
  oid-table                creates a PDF or SVG file with all codes in the yaml file
  oid-codes                creates files for every OID in the yaml file (default: PNG).
  oid-code                 creates PNG files for each given code(s)

GME modification commands:
  set-language             sets the language field of an GME file
  set-product-id           changes the product id an GME file

GME analysis commands:
  info                     Print general information about a GME file
  export                   dumps the file in the human-readable yaml format
  scripts                  prints the decoded scripts for each OID
  script                   prints the decoded scripts for a specific OID
  games                    prints the decoded games
  lint                     checks for errors in the file or in this program
  segments                 lists all known parts of the file, with description.
  segment                  prints the segment that contains a specific offset
  explain                  print a hexdump of a GME file with descriptions
  holes                    lists all unknown parts of the file.
  rewrite                  parses the file and writes it again (for debugging)

GME extraction commands:
  media                    dumps all audio samples
  binaries                 dumps all binaries

Simulation commands:
  play                     interactively play a GME file"><pre><code>GME creation commands:
  assemble                 creates a gme file from the given source

OID code creation commands:
  oid-table                creates a PDF or SVG file with all codes in the yaml file
  oid-codes                creates files for every OID in the yaml file (default: PNG).
  oid-code                 creates PNG files for each given code(s)

GME modification commands:
  set-language             sets the language field of an GME file
  set-product-id           changes the product id an GME file

GME analysis commands:
  info                     Print general information about a GME file
  export                   dumps the file in the human-readable yaml format
  scripts                  prints the decoded scripts for each OID
  script                   prints the decoded scripts for a specific OID
  games                    prints the decoded games
  lint                     checks for errors in the file or in this program
  segments                 lists all known parts of the file, with description.
  segment                  prints the segment that contains a specific offset
  explain                  print a hexdump of a GME file with descriptions
  holes                    lists all unknown parts of the file.
  rewrite                  parses the file and writes it again (for debugging)

GME extraction commands:
  media                    dumps all audio samples
  binaries                 dumps all binaries

Simulation commands:
  play                     interactively play a GME file
</code></pre></div>
<p dir="auto">Run</p>

<p dir="auto">to learn about global options (e.g. DPI settings), and</p>

<p dir="auto">for the options of the individual command.</p>

<p dir="auto">We release <code>tttool</code> for Windows and Linux users as a zipfile. You can find them
in the <a href="https://github.com/entropia/tip-toi-reveng/releases">releases section</a>
of the GitHub project.</p>
<p dir="auto">Linux users likely want to install additional packages. On Debian or Ubuntu, run <code>sudo apt install libttspico-utils vorbis-tools</code></p>
<p dir="auto">See <code>Building.md</code> for instructions on how to build <code>tttool</code> from source.</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Building your own gme files</h2><a id="user-content-building-your-own-gme-files" aria-label="Permalink: Building your own gme files" href="#building-your-own-gme-files"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Once you have installed <code>tttool</code>, you can create your own <code>.gme</code> files. The
process is as follows</p>
<ol dir="auto">
<li>
<p dir="auto">Record the audio samples you want to include, as Ogg Vorbis files, mono, 22050Hz. I use</p>
<div data-snippet-clipboard-copy-content="arecord -r 22050 foo.wav
oggenc foo.wav
rm foo.wav"><pre><code>arecord -r 22050 foo.wav
oggenc foo.wav
rm foo.wav
</code></pre></div>
</li>
<li>
<p dir="auto">Write a <code>my-book.yaml</code> file containing some general information, and especially
the scripts (i.e. what to do) for each OIDs (i.e. the various fields of a
book). You can use the <a href="https://github.com/entropia/tip-toi-reveng/blob/master/example.yaml">example.yaml</a> file as a starting
point; it contains more information in its comments.</p>
</li>
<li>
<p dir="auto">Run <code>./tttool assemble my-book.yaml</code>, and make sure it reports no error, i.e.
finishes silently.</p>
</li>
<li>
<p dir="auto">Copy the now generated <code>my-book.gme</code> to your TipToi pen and enjoy!</p>
</li>
</ol>
<p dir="auto">If you need to find out what OID code corresponds to what part of the book, you
can generate a debug gme using the <code>debug.yaml</code> file, adjusting its
<code>Product-Id</code> to your product’s id, building it with <code>./tttool assemble debug.yaml</code> and loading the resulting <code>debug.gme</code> on your pen.  It will then
read out the codes, as a sequence of english digits.</p>
<p dir="auto">If you want to convert existing audio files of almost any format, and you have
<code>ffmpeg</code> installed, you can use</p>
<div data-snippet-clipboard-copy-content="ffmpeg -i input-audio-in-some.fmt -ar 22050 -ac 1 foo.ogg"><pre><code>ffmpeg -i input-audio-in-some.fmt -ar 22050 -ac 1 foo.ogg
</code></pre></div>

<p dir="auto">If you have <code>libttspico-utils</code> and <code>vorbis-tools installed</code>, you can have tttool
generate audio files from text for you, which makes developing your yaml file
much easier. See <a href="https://github.com/entropia/tip-toi-reveng/blob/master/text2speech.yaml">text2speech.yaml</a> for more information.</p>

<p dir="auto">With the code in this repository, you can create GME files. This is even more
fun if you can also create your own books! „Pronwan“ found out how that works,
as you can see in <a href="http://youtu.be/KC97F4PfNhk" rel="nofollow">this video demonstration</a>. He
also published 30 minute <a href="http://youtu.be/4AjvjFM8GzM" rel="nofollow">video tutorial</a> (in
German).</p>

<ul dir="auto">
<li><a href="https://blogs.fsfe.org/guido/2014/05/tiptoi-hacking-und-systemanforderungen/" rel="nofollow">tiptoi hacking</a> by Guido Arnold</li>
<li><a href="http://www.nerd.junetz.de/blogbox/index.php?/archives/1377-TipToi-Hacking.html" rel="nofollow">TipToi Hacking</a> and <a href="http://www.nerd.junetz.de/blogbox/index.php?/archives/1378-TipToi-Hacking-II.html" rel="nofollow">TipToi Hacking II</a> by Mr. Blog</li>
<li><a href="https://www.joachim-breitner.de/blog/tag/Tiptoi" rel="nofollow">Various posts</a> by Joachim “nomeata” Breitner (the main author of <code>tttool</code>)</li>
<li><a href="https://www.youtube.com/watch?v=Yic57Y9VORA&amp;app=desktop" rel="nofollow">Self-made animal figures</a> demonstration video</li>
</ul>

<ul dir="auto">
<li>What are all the header fields? (See <a href="https://github.com/entropia/tip-toi-reveng/blob/master/wip/Header.md">wip/Header.md</a>)</li>
<li>Finish decoding the games. (See <a href="https://github.com/entropia/tip-toi-reveng/blob/master/wip/games.txt">wip/games.txt</a>)</li>
<li>What is the purpose of the additional script table?</li>
</ul>
<div dir="auto"><h2 tabindex="-1" dir="auto">Other resources in this repository</h2><a id="user-content-other-resources-in-this-repository" aria-label="Permalink: Other resources in this repository" href="#other-resources-in-this-repository"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><a href="http://htmlpreview.github.io/?https://github.com/entropia/tip-toi-reveng/blob/master/oid-decoder.html" rel="nofollow"><code>oid-decoder.html</code></a> allows you to manually decode an OID image.</li>
<li><code>gameanalyse.c</code> and <code>libtiptoi.c</code> is an alternative tool to investigate gme
files. It can also <a href="https://github.com/entropia/tip-toi-reveng/blob/master/Audio/README.md">replace audio files in gme files</a>;
compile and run it for diagnostic output.</li>
<li><code>Audio/</code> contains some audio files, such as digits read out.</li>
<li><code>docs/</code> collects information about TipToi found elsewhere.</li>
<li><code>wip/</code> (work in progess) contains notes about the parts of the gme files that are not
fully understood yet.</li>
<li><code>perl-tools</code> contains a perl based script, to generate a PDF with all OID codes from a yaml-file as well some functions to generate PNG-files, inject pHYs-chunks with resolution hints into GD generated PNG files as result from some testing</li>
</ul>
</article></div></div>
  </body>
</html>
