<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/vlm-run/vlmrun-hub">Original</a>
    <h1>Run structured extraction on documents/images locally with Ollama and Pydantic</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">Welcome to <strong>VLM Run Hub</strong>, a comprehensive repository of pre-defined <a href="https://docs.pydantic.dev/latest/" rel="nofollow">Pydantic</a> schemas for extracting structured data from unstructured visual domains such as images, videos, and documents. Designed for <a href="https://huggingface.co/blog/vlms" rel="nofollow">Vision Language Models (VLMs)</a> and optimized for real-world use cases, VLM Run Hub simplifies the integration of visual ETL into your workflows.</p>
<markdown-accessiblity-table><table>
<tbody><tr>
<td> <b>Image</b> </td>
<td> <b>JSON</b> </td>
</tr>
<tr>
<td>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/a09edb5ef4682626db4db41658d0917100b57c8bbcb82e79c6fa1c67acd55a19/68747470733a2f2f73746f726167652e676f6f676c65617069732e636f6d2f766c6d2d646174612d7075626c69632d70726f642f6875622f6578616d706c65732f646f63756d656e742e75732d647269766572732d6c6963656e73652f646c332e6a7067"><img src="https://camo.githubusercontent.com/a09edb5ef4682626db4db41658d0917100b57c8bbcb82e79c6fa1c67acd55a19/68747470733a2f2f73746f726167652e676f6f676c65617069732e636f6d2f766c6d2d646174612d7075626c69632d70726f642f6875622f6578616d706c65732f646f63756d656e742e75732d647269766572732d6c6963656e73652f646c332e6a7067" data-canonical-src="https://storage.googleapis.com/vlm-data-public-prod/hub/examples/document.us-drivers-license/dl3.jpg"/></a>
</td>
<td>
<div dir="auto" data-snippet-clipboard-copy-content="{
  &#34;issuing_state&#34;: &#34;MT&#34;,
  &#34;license_number&#34;: &#34;0812319684104&#34;,
  &#34;first_name&#34;: &#34;Brenda&#34;,
  &#34;middle_name&#34;: &#34;Lynn&#34;,
  &#34;last_name&#34;: &#34;Sample&#34;,
  &#34;address&#34;: {
    &#34;street&#34;: &#34;123 MAIN STREET&#34;,
    &#34;city&#34;: &#34;HELENA&#34;,
    &#34;state&#34;: &#34;MT&#34;,
    &#34;zip_code&#34;: &#34;59601&#34;
  },
  &#34;date_of_birth&#34;: &#34;1968-08-04&#34;,
  &#34;gender&#34;: &#34;F&#34;,
  &#34;height&#34;: &#34;5&#39;06\&#34;&#34;,
  &#34;weight&#34;: 150.0,
  &#34;eye_color&#34;: &#34;BRO&#34;,
  &#34;issue_date&#34;: &#34;2015-02-15&#34;,
  &#34;expiration_date&#34;: &#34;2023-08-04&#34;,
  &#34;license_class&#34;: &#34;D&#34;
}"><pre>{
  <span>&#34;issuing_state&#34;</span>: <span><span>&#34;</span>MT<span>&#34;</span></span>,
  <span>&#34;license_number&#34;</span>: <span><span>&#34;</span>0812319684104<span>&#34;</span></span>,
  <span>&#34;first_name&#34;</span>: <span><span>&#34;</span>Brenda<span>&#34;</span></span>,
  <span>&#34;middle_name&#34;</span>: <span><span>&#34;</span>Lynn<span>&#34;</span></span>,
  <span>&#34;last_name&#34;</span>: <span><span>&#34;</span>Sample<span>&#34;</span></span>,
  <span>&#34;address&#34;</span>: {
    <span>&#34;street&#34;</span>: <span><span>&#34;</span>123 MAIN STREET<span>&#34;</span></span>,
    <span>&#34;city&#34;</span>: <span><span>&#34;</span>HELENA<span>&#34;</span></span>,
    <span>&#34;state&#34;</span>: <span><span>&#34;</span>MT<span>&#34;</span></span>,
    <span>&#34;zip_code&#34;</span>: <span><span>&#34;</span>59601<span>&#34;</span></span>
  },
  <span>&#34;date_of_birth&#34;</span>: <span><span>&#34;</span>1968-08-04<span>&#34;</span></span>,
  <span>&#34;gender&#34;</span>: <span><span>&#34;</span>F<span>&#34;</span></span>,
  <span>&#34;height&#34;</span>: <span><span>&#34;</span>5&#39;06<span>\&#34;</span><span>&#34;</span></span>,
  <span>&#34;weight&#34;</span>: <span>150.0</span>,
  <span>&#34;eye_color&#34;</span>: <span><span>&#34;</span>BRO<span>&#34;</span></span>,
  <span>&#34;issue_date&#34;</span>: <span><span>&#34;</span>2015-02-15<span>&#34;</span></span>,
  <span>&#34;expiration_date&#34;</span>: <span><span>&#34;</span>2023-08-04<span>&#34;</span></span>,
  <span>&#34;license_class&#34;</span>: <span><span>&#34;</span>D<span>&#34;</span></span>
}</pre></div>
</td>
</tr>
</tbody></table></markdown-accessiblity-table>


<p dir="auto">While vision models like OpenAI‚Äôs <a href="https://openai.com/index/hello-gpt-4o/" rel="nofollow">GPT-4o</a> and Anthropic‚Äôs <a href="https://www.anthropic.com/claude" rel="nofollow">Claude Vision</a> excel in exploratory tasks like &#34;chat with images,&#34; they often lack practicality for automation and integration, where <strong>strongly-typed</strong>, <strong>validated outputs</strong> are crucial.</p>
<p dir="auto">The <strong>Structured Outputs API</strong> (popularized by <a href="https://openai.com/index/introducing-structured-outputs-in-the-api/" rel="nofollow">GPT-4o</a>, <a href="https://ai.google.dev/gemini-api/docs/structured-output" rel="nofollow">Gemini</a>) addresses this by constraining LLMs to return data in precise, strongly-typed formats such as <a href="https://docs.pydantic.dev/latest/" rel="nofollow">Pydantic</a> models. This eliminates complex parsing and validation, ensuring outputs conform to expected types and structures. These schemas can be nested and include complex types like lists and dictionaries, enabling seamless integration with existing systems while leveraging the full capabilities of the model.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">üß∞ Why use this hub of pre-defined Pydantic schemas?</h3><a id="user-content--why-use-this-hub-of-pre-defined-pydantic-schemas" aria-label="Permalink: üß∞ Why use this hub of pre-defined Pydantic schemas?" href="#-why-use-this-hub-of-pre-defined-pydantic-schemas"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>üìö <strong>Easy to use:</strong> <a href="https://docs.pydantic.dev/latest/" rel="nofollow">Pydantic</a> is a well-understood and battle-tested data model for structured data.</li>
<li>üîã <strong>Batteries included:</strong>  Each schema in this repo has been validated across real-world industry use cases‚Äîfrom healthcare to finance to media‚Äîsaving you weeks of development effort.</li>
<li>üîç <strong>Automatic Data-validation:</strong> Built-in <a href="https://docs.pydantic.dev/latest/concepts/validators/" rel="nofollow">Pydantic validation</a> ensures your extracted data is clean, accurate, and reliable, reducing errors and simplifying downstream workflows.</li>
<li>üîå <strong>Type-safety:</strong> With <a href="https://docs.pydantic.dev/latest/concepts/types/" rel="nofollow">Pydantic‚Äôs type-safety</a> and compatibility with tools like <code>mypy</code> and <code>pyright</code>, you can build composable, modular systems that are robust and maintainable.</li>
<li>üß∞ <strong>Model-agnostic:</strong> Use the same schema with multiple VLM providers, no need to rewrite prompts for different VLMs.</li>
<li>üöÄ <strong>Optimized for Visual ETL:</strong> Purpose-built for extracting structured data from images, videos, and documents, this repo bridges the gap between unstructured data and actionable insights.</li>
</ul>

<p dir="auto">The VLM Run Hub maintains a comprehensive catalog of all available schemas in the <a href="https://github.com/vlm-run/vlmrun-hub/blob/main/vlmrun/hub/catalog.yaml"><code>vlmrun/hub/catalog.yaml</code></a> file. The catalog is automatically validated to ensure consistency and completeness of schema documentation. We refer the developer to the <a href="https://github.com/vlm-run/vlmrun-hub/blob/main/docs/catalog-spec.yaml">catalog-spec.yaml</a> for the full YAML specification. Here are some featured schemas:</p>
<ul dir="auto">
<li>Documents: <a href="https://github.com/vlm-run/vlmrun-hub/blob/main/vlmrun/hub/schemas/document/bank_statement.py">document.bank-statement</a>, <a href="https://github.com/vlm-run/vlmrun-hub/blob/main/vlmrun/hub/schemas/document/invoice.py">document.invoice</a>, <a href="https://github.com/vlm-run/vlmrun-hub/blob/main/vlmrun/hub/schemas/document/receipt.py">document.receipt</a>, <a href="https://github.com/vlm-run/vlmrun-hub/blob/main/vlmrun/hub/schemas/document/resume.py">document.resume</a>, <a href="https://github.com/vlm-run/vlmrun-hub/blob/main/vlmrun/hub/schemas/document/us_drivers_license.py">document.us-drivers-license</a>, <a href="https://github.com/vlm-run/vlmrun-hub/blob/main/vlmrun/hub/schemas/document/utility_bill.py">document.utility-bill</a>, <a href="https://github.com/vlm-run/vlmrun-hub/blob/main/vlmrun/hub/schemas/document/w2_form.py">document.w2-form</a></li>
<li>Other industry-specific schemas: <a href="https://github.com/vlm-run/vlmrun-hub/blob/main/vlmrun/hub/schemas/healthcare/medical_insurance_card.py">healthcare.medical-insurance-card</a>, <a href="https://github.com/vlm-run/vlmrun-hub/blob/main/vlmrun/hub/schemas/retail/ecommerce_product_caption.py">retail.ecommerce-product-caption</a>, <a href="https://github.com/vlm-run/vlmrun-hub/blob/main/vlmrun/hub/schemas/media/tv_news.py">media.tv-news</a>, <a href="https://github.com/vlm-run/vlmrun-hub/blob/main/vlmrun/hub/schemas/aerospace/remote_sensing.py">aerospace.remote-sensing</a></li>
</ul>
<p dir="auto">If you have a new schema you want to add to the catalog, please refer to the <a href="https://github.com/vlm-run/vlmrun-hub/blob/main/docs/SCHEMA-GUIDELINES.md">SCHEMA-GUIDELINES.md</a> for the full guidelines.</p>

<p dir="auto">Let&#39;s say we want to extract invoice metadata from an <a href="https://storage.googleapis.com/vlm-data-public-prod/hub/examples/document.invoice/invoice_1.jpg" rel="nofollow">invoice image</a>. You can readily use our <a href="https://github.com/vlm-run/vlmrun-hub/blob/main/vlmrun/hub/schemas/document/invoice.py"><code>Invoice</code></a> schema we have defined under <code>vlmrun.hub.schemas.document.invoice</code> and use it with any VLM of your choosing.</p>



<div dir="auto" data-snippet-clipboard-copy-content="import instructor
from openai import OpenAI

from vlmrun.hub.schemas.document.invoice import Invoice

IMAGE_URL = &#34;https://storage.googleapis.com/vlm-data-public-prod/hub/examples/document.invoice/invoice_1.jpg&#34;

client = instructor.from_openai(
    OpenAI(), mode=instructor.Mode.MD_JSON
)
response = client.chat.completions.create(
    model=&#34;gpt-4o-mini&#34;,
    messages=[
        { &#34;role&#34;: &#34;user&#34;, &#34;content&#34;: [
            {&#34;type&#34;: &#34;text&#34;, &#34;text&#34;: &#34;Extract the invoice in JSON.&#34;},
            {&#34;type&#34;: &#34;image_url&#34;, &#34;image_url&#34;: {&#34;url&#34;: IMAGE_URL}, &#34;detail&#34;: &#34;auto&#34;}
        ]}
    ],
    response_model=Invoice,
    temperature=0,
)"><pre><span>import</span> <span>instructor</span>
<span>from</span> <span>openai</span> <span>import</span> <span>OpenAI</span>

<span>from</span> <span>vlmrun</span>.<span>hub</span>.<span>schemas</span>.<span>document</span>.<span>invoice</span> <span>import</span> <span>Invoice</span>

<span>IMAGE_URL</span> <span>=</span> <span>&#34;https://storage.googleapis.com/vlm-data-public-prod/hub/examples/document.invoice/invoice_1.jpg&#34;</span>

<span>client</span> <span>=</span> <span>instructor</span>.<span>from_openai</span>(
    <span>OpenAI</span>(), <span>mode</span><span>=</span><span>instructor</span>.<span>Mode</span>.<span>MD_JSON</span>
)
<span>response</span> <span>=</span> <span>client</span>.<span>chat</span>.<span>completions</span>.<span>create</span>(
    <span>model</span><span>=</span><span>&#34;gpt-4o-mini&#34;</span>,
    <span>messages</span><span>=</span>[
        { <span>&#34;role&#34;</span>: <span>&#34;user&#34;</span>, <span>&#34;content&#34;</span>: [
            {<span>&#34;type&#34;</span>: <span>&#34;text&#34;</span>, <span>&#34;text&#34;</span>: <span>&#34;Extract the invoice in JSON.&#34;</span>},
            {<span>&#34;type&#34;</span>: <span>&#34;image_url&#34;</span>, <span>&#34;image_url&#34;</span>: {<span>&#34;url&#34;</span>: <span>IMAGE_URL</span>}, <span>&#34;detail&#34;</span>: <span>&#34;auto&#34;</span>}
        ]}
    ],
    <span>response_model</span><span>=</span><span>Invoice</span>,
    <span>temperature</span><span>=</span><span>0</span>,
)</pre></div>
<details>
<summary>JSON Response:</summary>
<markdown-accessiblity-table><table>
<tbody><tr>
<td> Image </td>
<td> JSON Output üîê </td>
</tr>
<tr>
<td>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/fce88f797bfcda936d3acfc0a6627de1708b95130c42c87513d0b97d43976e2b/68747470733a2f2f73746f726167652e676f6f676c65617069732e636f6d2f766c6d2d646174612d7075626c69632d70726f642f6875622f6578616d706c65732f646f63756d656e742e696e766f6963652f696e766f6963655f312e6a7067"><img src="https://camo.githubusercontent.com/fce88f797bfcda936d3acfc0a6627de1708b95130c42c87513d0b97d43976e2b/68747470733a2f2f73746f726167652e676f6f676c65617069732e636f6d2f766c6d2d646174612d7075626c69632d70726f642f6875622f6578616d706c65732f646f63756d656e742e696e766f6963652f696e766f6963655f312e6a7067" data-canonical-src="https://storage.googleapis.com/vlm-data-public-prod/hub/examples/document.invoice/invoice_1.jpg"/></a>
</td>
<td>
<div dir="auto" data-snippet-clipboard-copy-content="{
  &#34;invoice_id&#34;: &#34;9999999&#34;,
  &#34;period_start&#34;: null,
  &#34;period_end&#34;: null,
  &#34;invoice_issue_date&#34;: &#34;2023-11-11&#34;,
  &#34;invoice_due_date&#34;: null,
  &#34;order_id&#34;: null,
  &#34;customer_id&#34;: null,
  &#34;issuer&#34;: &#34;Anytown, USA&#34;,
  &#34;issuer_address&#34;: {
    &#34;street&#34;: &#34;123 Main Street&#34;,
    &#34;city&#34;: &#34;Anytown&#34;,
    &#34;state&#34;: &#34;USA&#34;,
    &#34;postal_code&#34;: &#34;01234&#34;,
    &#34;country&#34;: null
  },
  &#34;customer&#34;: &#34;Fred Davis&#34;,
  &#34;customer_email&#34;: &#34;email@invoice.com&#34;,
  &#34;customer_phone&#34;: &#34;(800) 123-4567&#34;,
  &#34;customer_billing_address&#34;: {
    &#34;street&#34;: &#34;1335 Martin Luther King Jr Ave&#34;,
    &#34;city&#34;: &#34;Dunedin&#34;,
    &#34;state&#34;: &#34;FL&#34;,
    &#34;postal_code&#34;: &#34;34698&#34;,
    &#34;country&#34;: null
  },
  &#34;customer_shipping_address&#34;: {
    &#34;street&#34;: &#34;249 Windward Passage&#34;,
    &#34;city&#34;: &#34;Clearwater&#34;,
    &#34;state&#34;: &#34;FL&#34;,
    &#34;postal_code&#34;: &#34;33767&#34;,
    &#34;country&#34;: null
  },
  &#34;items&#34;: [
    {
      &#34;description&#34;: &#34;Service&#34;,
      &#34;quantity&#34;: 1,
      &#34;currency&#34;: null,
      &#34;unit_price&#34;: 200.0,
      &#34;total_price&#34;: 200.0
    },
    {
      &#34;description&#34;: &#34;Parts AAA&#34;,
      &#34;quantity&#34;: 1,
      &#34;currency&#34;: null,
      &#34;unit_price&#34;: 100.0,
      &#34;total_price&#34;: 100.0
    },
    {
      &#34;description&#34;: &#34;Parts BBB&#34;,
      &#34;quantity&#34;: 2,
      &#34;currency&#34;: null,
      &#34;unit_price&#34;: 50.0,
      &#34;total_price&#34;: 100.0
    }
  ],
  &#34;subtotal&#34;: 400.0,
  &#34;tax&#34;: null,
  &#34;total&#34;: 400.0,
  &#34;currency&#34;: null,
  &#34;notes&#34;: &#34;&#34;,
  &#34;others&#34;: null
}"><pre>{
  <span>&#34;invoice_id&#34;</span>: <span><span>&#34;</span>9999999<span>&#34;</span></span>,
  <span>&#34;period_start&#34;</span>: <span>null</span>,
  <span>&#34;period_end&#34;</span>: <span>null</span>,
  <span>&#34;invoice_issue_date&#34;</span>: <span><span>&#34;</span>2023-11-11<span>&#34;</span></span>,
  <span>&#34;invoice_due_date&#34;</span>: <span>null</span>,
  <span>&#34;order_id&#34;</span>: <span>null</span>,
  <span>&#34;customer_id&#34;</span>: <span>null</span>,
  <span>&#34;issuer&#34;</span>: <span><span>&#34;</span>Anytown, USA<span>&#34;</span></span>,
  <span>&#34;issuer_address&#34;</span>: {
    <span>&#34;street&#34;</span>: <span><span>&#34;</span>123 Main Street<span>&#34;</span></span>,
    <span>&#34;city&#34;</span>: <span><span>&#34;</span>Anytown<span>&#34;</span></span>,
    <span>&#34;state&#34;</span>: <span><span>&#34;</span>USA<span>&#34;</span></span>,
    <span>&#34;postal_code&#34;</span>: <span><span>&#34;</span>01234<span>&#34;</span></span>,
    <span>&#34;country&#34;</span>: <span>null</span>
  },
  <span>&#34;customer&#34;</span>: <span><span>&#34;</span>Fred Davis<span>&#34;</span></span>,
  <span>&#34;customer_email&#34;</span>: <span><span>&#34;</span>email@invoice.com<span>&#34;</span></span>,
  <span>&#34;customer_phone&#34;</span>: <span><span>&#34;</span>(800) 123-4567<span>&#34;</span></span>,
  <span>&#34;customer_billing_address&#34;</span>: {
    <span>&#34;street&#34;</span>: <span><span>&#34;</span>1335 Martin Luther King Jr Ave<span>&#34;</span></span>,
    <span>&#34;city&#34;</span>: <span><span>&#34;</span>Dunedin<span>&#34;</span></span>,
    <span>&#34;state&#34;</span>: <span><span>&#34;</span>FL<span>&#34;</span></span>,
    <span>&#34;postal_code&#34;</span>: <span><span>&#34;</span>34698<span>&#34;</span></span>,
    <span>&#34;country&#34;</span>: <span>null</span>
  },
  <span>&#34;customer_shipping_address&#34;</span>: {
    <span>&#34;street&#34;</span>: <span><span>&#34;</span>249 Windward Passage<span>&#34;</span></span>,
    <span>&#34;city&#34;</span>: <span><span>&#34;</span>Clearwater<span>&#34;</span></span>,
    <span>&#34;state&#34;</span>: <span><span>&#34;</span>FL<span>&#34;</span></span>,
    <span>&#34;postal_code&#34;</span>: <span><span>&#34;</span>33767<span>&#34;</span></span>,
    <span>&#34;country&#34;</span>: <span>null</span>
  },
  <span>&#34;items&#34;</span>: [
    {
      <span>&#34;description&#34;</span>: <span><span>&#34;</span>Service<span>&#34;</span></span>,
      <span>&#34;quantity&#34;</span>: <span>1</span>,
      <span>&#34;currency&#34;</span>: <span>null</span>,
      <span>&#34;unit_price&#34;</span>: <span>200.0</span>,
      <span>&#34;total_price&#34;</span>: <span>200.0</span>
    },
    {
      <span>&#34;description&#34;</span>: <span><span>&#34;</span>Parts AAA<span>&#34;</span></span>,
      <span>&#34;quantity&#34;</span>: <span>1</span>,
      <span>&#34;currency&#34;</span>: <span>null</span>,
      <span>&#34;unit_price&#34;</span>: <span>100.0</span>,
      <span>&#34;total_price&#34;</span>: <span>100.0</span>
    },
    {
      <span>&#34;description&#34;</span>: <span><span>&#34;</span>Parts BBB<span>&#34;</span></span>,
      <span>&#34;quantity&#34;</span>: <span>2</span>,
      <span>&#34;currency&#34;</span>: <span>null</span>,
      <span>&#34;unit_price&#34;</span>: <span>50.0</span>,
      <span>&#34;total_price&#34;</span>: <span>100.0</span>
    }
  ],
  <span>&#34;subtotal&#34;</span>: <span>400.0</span>,
  <span>&#34;tax&#34;</span>: <span>null</span>,
  <span>&#34;total&#34;</span>: <span>400.0</span>,
  <span>&#34;currency&#34;</span>: <span>null</span>,
  <span>&#34;notes&#34;</span>: <span><span>&#34;</span><span>&#34;</span></span>,
  <span>&#34;others&#34;</span>: <span>null</span>
}</pre></div>
</td>
</tr>
</tbody></table></markdown-accessiblity-table>
</details>

<div dir="auto" data-snippet-clipboard-copy-content="import requests

from vlmrun.hub.schemas.document.invoice import Invoice


IMAGE_URL = &#34;https://storage.googleapis.com/vlm-data-public-prod/hub/examples/document.invoice/invoice_1.jpg&#34;

json_data = {
    &#34;image&#34;: IMAGE_URL,
    &#34;model&#34;: &#34;vlm-1&#34;,
    &#34;domain&#34;: &#34;document.invoice&#34;,
    &#34;json_schema&#34;: Invoice.model_json_schema(),
}
response = requests.post(
    f&#34;https://api.vlm.run/v1/image/generate&#34;,
    headers={&#34;Authorization&#34;: f&#34;Bearer &lt;your-api-key&gt;&#34;},
    json=json_data,
)"><pre><span>import</span> <span>requests</span>

<span>from</span> <span>vlmrun</span>.<span>hub</span>.<span>schemas</span>.<span>document</span>.<span>invoice</span> <span>import</span> <span>Invoice</span>


<span>IMAGE_URL</span> <span>=</span> <span>&#34;https://storage.googleapis.com/vlm-data-public-prod/hub/examples/document.invoice/invoice_1.jpg&#34;</span>

<span>json_data</span> <span>=</span> {
    <span>&#34;image&#34;</span>: <span>IMAGE_URL</span>,
    <span>&#34;model&#34;</span>: <span>&#34;vlm-1&#34;</span>,
    <span>&#34;domain&#34;</span>: <span>&#34;document.invoice&#34;</span>,
    <span>&#34;json_schema&#34;</span>: <span>Invoice</span>.<span>model_json_schema</span>(),
}
<span>response</span> <span>=</span> <span>requests</span>.<span>post</span>(
    <span>f&#34;https://api.vlm.run/v1/image/generate&#34;</span>,
    <span>headers</span><span>=</span>{<span>&#34;Authorization&#34;</span>: <span>f&#34;Bearer &lt;your-api-key&gt;&#34;</span>},
    <span>json</span><span>=</span><span>json_data</span>,
)</pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="import instructor
from openai import OpenAI

from vlmrun.hub.schemas.document.invoice import Invoice

IMAGE_URL = &#34;https://storage.googleapis.com/vlm-data-public-prod/hub/examples/document.invoice/invoice_1.jpg&#34;

client = OpenAI()
completion = client.beta.chat.completions.parse(
    model=&#34;gpt-4o-mini&#34;,
    messages=[
        {&#34;role&#34;: &#34;user&#34;, &#34;content&#34;: [
            {&#34;type&#34;: &#34;text&#34;, &#34;text&#34;: &#34;Extract the invoice in JSON.&#34;},
            {&#34;type&#34;: &#34;image_url&#34;, &#34;image_url&#34;: {&#34;url&#34;: IMAGE_URL}, &#34;detail&#34;: &#34;auto&#34;}
        ]},
    ],
    response_format=Invoice,
    temperature=0,
)"><pre><span>import</span> <span>instructor</span>
<span>from</span> <span>openai</span> <span>import</span> <span>OpenAI</span>

<span>from</span> <span>vlmrun</span>.<span>hub</span>.<span>schemas</span>.<span>document</span>.<span>invoice</span> <span>import</span> <span>Invoice</span>

<span>IMAGE_URL</span> <span>=</span> <span>&#34;https://storage.googleapis.com/vlm-data-public-prod/hub/examples/document.invoice/invoice_1.jpg&#34;</span>

<span>client</span> <span>=</span> <span>OpenAI</span>()
<span>completion</span> <span>=</span> <span>client</span>.<span>beta</span>.<span>chat</span>.<span>completions</span>.<span>parse</span>(
    <span>model</span><span>=</span><span>&#34;gpt-4o-mini&#34;</span>,
    <span>messages</span><span>=</span>[
        {<span>&#34;role&#34;</span>: <span>&#34;user&#34;</span>, <span>&#34;content&#34;</span>: [
            {<span>&#34;type&#34;</span>: <span>&#34;text&#34;</span>, <span>&#34;text&#34;</span>: <span>&#34;Extract the invoice in JSON.&#34;</span>},
            {<span>&#34;type&#34;</span>: <span>&#34;image_url&#34;</span>, <span>&#34;image_url&#34;</span>: {<span>&#34;url&#34;</span>: <span>IMAGE_URL</span>}, <span>&#34;detail&#34;</span>: <span>&#34;auto&#34;</span>}
        ]},
    ],
    <span>response_format</span><span>=</span><span>Invoice</span>,
    <span>temperature</span><span>=</span><span>0</span>,
)</pre></div>
<blockquote>
<p dir="auto">When working with the OpenAI Structured Outputs API, you need to ensure that the <code>response_format</code> is a valid Pydantic model with the <a href="https://platform.openai.com/docs/guides/structured-outputs#supported-schemas" rel="nofollow">supported types</a>.</p>
</blockquote>

<p dir="auto">Note: For certain <code>vlmrun.common</code> utilities, you will need to install our main [Python SDK](<a href="https://github.com/vlm-run/vlmrun-python-sdk">+vsdk</a>
via <code>pip install vlmrun</code>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="from ollama import chat

from vlmrun.common.image import encode_image
from vlmrun.common.utils import remote_image
from vlmrun.hub.schemas.document.invoice import Invoice


IMAGE_URL = &#34;https://storage.googleapis.com/vlm-data-public-prod/hub/examples/document.invoice/invoice_1.jpg&#34;

img = remote_image(IMAGE_URL)
chat_response = chat(
    model=&#34;llama3.2-vision:11b&#34;,
    format=Invoice.model_json_schema(),
    messages=[
        {
            &#34;role&#34;: &#34;user&#34;,
            &#34;content&#34;: &#34;Extract the invoice in JSON.&#34;,
            &#34;images&#34;: [encode_image(img, format=&#34;JPEG&#34;).split(&#34;,&#34;)[1]],
        },
    ],
    options={
        &#34;temperature&#34;: 0
    },
)
response = Invoice.model_validate_json(
    chat_response.message.content
)"><pre><span>from</span> <span>ollama</span> <span>import</span> <span>chat</span>

<span>from</span> <span>vlmrun</span>.<span>common</span>.<span>image</span> <span>import</span> <span>encode_image</span>
<span>from</span> <span>vlmrun</span>.<span>common</span>.<span>utils</span> <span>import</span> <span>remote_image</span>
<span>from</span> <span>vlmrun</span>.<span>hub</span>.<span>schemas</span>.<span>document</span>.<span>invoice</span> <span>import</span> <span>Invoice</span>


<span>IMAGE_URL</span> <span>=</span> <span>&#34;https://storage.googleapis.com/vlm-data-public-prod/hub/examples/document.invoice/invoice_1.jpg&#34;</span>

<span>img</span> <span>=</span> <span>remote_image</span>(<span>IMAGE_URL</span>)
<span>chat_response</span> <span>=</span> <span>chat</span>(
    <span>model</span><span>=</span><span>&#34;llama3.2-vision:11b&#34;</span>,
    <span>format</span><span>=</span><span>Invoice</span>.<span>model_json_schema</span>(),
    <span>messages</span><span>=</span>[
        {
            <span>&#34;role&#34;</span>: <span>&#34;user&#34;</span>,
            <span>&#34;content&#34;</span>: <span>&#34;Extract the invoice in JSON.&#34;</span>,
            <span>&#34;images&#34;</span>: [<span>encode_image</span>(<span>img</span>, <span>format</span><span>=</span><span>&#34;JPEG&#34;</span>).<span>split</span>(<span>&#34;,&#34;</span>)[<span>1</span>]],
        },
    ],
    <span>options</span><span>=</span>{
        <span>&#34;temperature&#34;</span>: <span>0</span>
    },
)
<span>response</span> <span>=</span> <span>Invoice</span>.<span>model_validate_json</span>(
    <span>chat_response</span>.<span>message</span>.<span>content</span>
)</pre></div>

<p dir="auto">We periodically run popular VLMs on each of the examples &amp; schemas in the <a href="https://github.com/vlm-run/vlmrun-hub/blob/main/vlmrun/hub/catalog.yaml">catalog.yaml</a> file and publish the results in the <a href="https://github.com/vlm-run/vlmrun-hub/blob/main/tests/benchmarks">benchmarks</a> directory.</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Provider</th>
<th>Model</th>
<th>Date</th>
<th>Results</th>
</tr>
</thead>
<tbody>
<tr>
<td>OpenAI</td>
<td>gpt-4o-2024-11-20</td>
<td>2025-01-09</td>
<td><a href="https://github.com/vlm-run/vlmrun-hub/blob/main/tests/benchmarks/2025-01-09-gpt-4o-2024-11-20-instructor-results.md">link</a></td>
</tr>
<tr>
<td>OpenAI</td>
<td>gpt-4o-mini-2024-07-18</td>
<td>2025-01-09</td>
<td><a href="https://github.com/vlm-run/vlmrun-hub/blob/main/tests/benchmarks/2025-01-09-gpt-4o-mini-2024-07-18-instructor-results.md">link</a></td>
</tr>
<tr>
<td>Gemini</td>
<td>gemini-2.0-flash-exp</td>
<td>2025-01-10</td>
<td><a href="https://github.com/vlm-run/vlmrun-hub/blob/main/tests/benchmarks/2025-01-10-gemini-2.0-flash-exp-instructor-results.md">link</a></td>
</tr>
<tr>
<td>Llama 3.2 11B</td>
<td>llama3.2-vision:11b</td>
<td>2025-01-10</td>
<td><a href="https://github.com/vlm-run/vlmrun-hub/blob/main/tests/benchmarks/2025-01-10-llama3.2-vision:11b-instructor-results.md">link</a></td>
</tr>
<tr>
<td>Microsoft</td>
<td>phi-4</td>
<td>2025-01-10</td>
<td><a href="https://github.com/vlm-run/vlmrun-hub/blob/main/tests/benchmarks/2025-01-11-phi4-instructor-results.md">link</a></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>

<p dir="auto">Schemas are organized by industry for easy navigation:</p>
<div data-snippet-clipboard-copy-content="vlmrun
‚îî‚îÄ‚îÄ hub
    ‚îú‚îÄ‚îÄ schemas
    |   ‚îú‚îÄ‚îÄ &lt;industry&gt;
    |   |   ‚îú‚îÄ‚îÄ &lt;use-case-1&gt;.py
    |   |   ‚îú‚îÄ‚îÄ &lt;use-case-2&gt;.py
    |   |   ‚îî‚îÄ‚îÄ ...
    ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ aerospace
    ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ remote_sensing.py
    ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ document  # all document schemas are here
    |   |   ‚îú‚îÄ‚îÄ invoice.py
    |   |   ‚îú‚îÄ‚îÄ us_drivers_license.py
    |   |   ‚îî‚îÄ‚îÄ ...
    ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ healthcare
    ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ medical_insurance_card.py
    ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ retail
    ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ecommerce_product_caption.py
    ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ contrib  # all contributions are welcome here!
    ‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ &lt;schema-name&gt;.py
    ‚îî‚îÄ‚îÄ version.py"><pre><code>vlmrun
‚îî‚îÄ‚îÄ hub
    ‚îú‚îÄ‚îÄ schemas
    |   ‚îú‚îÄ‚îÄ &lt;industry&gt;
    |   |   ‚îú‚îÄ‚îÄ &lt;use-case-1&gt;.py
    |   |   ‚îú‚îÄ‚îÄ &lt;use-case-2&gt;.py
    |   |   ‚îî‚îÄ‚îÄ ...
    ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ aerospace
    ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ remote_sensing.py
    ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ document  # all document schemas are here
    |   |   ‚îú‚îÄ‚îÄ invoice.py
    |   |   ‚îú‚îÄ‚îÄ us_drivers_license.py
    |   |   ‚îî‚îÄ‚îÄ ...
    ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ healthcare
    ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ medical_insurance_card.py
    ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ retail
    ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ecommerce_product_caption.py
    ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ contrib  # all contributions are welcome here!
    ‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ &lt;schema-name&gt;.py
    ‚îî‚îÄ‚îÄ version.py
</code></pre></div>

<p dir="auto">We‚Äôre building this hub for the community, and contributions are always welcome! Follow the <a href="https://github.com/vlm-run/vlmrun-hub/blob/main/docs/CONTRIBUTING.md">CONTRIBUTING</a> and <a href="https://github.com/vlm-run/vlmrun-hub/blob/main/docs/SCHEMA-GUIDELINES.md">SCHEMA-GUIDELINES.md</a> to get started.</p>

<ul dir="auto">
<li>üí¨ Send us an email at <a href="mailto:support@vlm.run">support@vlm.run</a> or join our <a href="https://discord.gg/4jgyECY4rq" rel="nofollow">Discord</a> for help.</li>
<li>üì£ Follow us on <a href="https://x.com/vlmrun" rel="nofollow">Twitter</a>, and <a href="https://www.linkedin.com/company/vlm-run" rel="nofollow">LinkedIn</a> to keep up-to-date on our products.</li>
</ul>
</article></div></div>
  </body>
</html>
