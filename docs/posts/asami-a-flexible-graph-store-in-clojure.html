<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/quoll/asami">Original</a>
    <h1>Asami: A flexible graph store in Clojure</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto">A graph database, for Clojure and ClojureScript.</p>
<p dir="auto">The latest version is:</p>
<p dir="auto"><a href="http://clojars.org/org.clojars.quoll/asami" rel="nofollow"><img src="https://camo.githubusercontent.com/5c76fb1c025c28da2eede065ac1b8ddc110b88998b39646642aefb0b53e919b3/687474703a2f2f636c6f6a6172732e6f72672f6f72672e636c6f6a6172732e71756f6c6c2f6173616d692f6c61746573742d76657273696f6e2e737667" alt="Clojars Project" data-canonical-src="http://clojars.org/org.clojars.quoll/asami/latest-version.svg"/></a></p>
<p dir="auto"><em>Asami is now being developed in this repository, as it is no longer being supported at Cisco. The deployment to Clojars has not changed, as it was always to my personal account.</em></p>
<p dir="auto"><em>Note:</em> <em>All references to the <code>:tg/</code> namespace for keywords have been changed to <code>:a/</code> as of 2.3.0.</em></p>
<h2 dir="auto"><a id="user-content-goals" aria-hidden="true" href="#goals"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Goals</h2>
<p dir="auto">Asami is both similar to and different from other graph databases. Some of the goals of the project are:</p>
<ul dir="auto">
<li><strong>Schema-less data</strong>. Data can be loaded without prior knowledge of its structures.</li>
<li><strong>Stable</strong>. Storage uses immutable structures to ensure that writes cannot lead to data corruption.</li>
<li><strong>Multiplatform</strong>. Asami runs on the Java Virtual Machine and on JavaScript platforms (browsers, node.js, etc).</li>
<li><strong>Ease of setup</strong>. Asami managed storage requires no provisioning, and can be created in a single statement.</li>
<li><strong>Plugable</strong>. Storage is a pluggable system that allows for multiple storage types, both local and remote.</li>
<li><strong>Analytics</strong>. Graph analytics are provided by using internal mechanisms for efficiency.</li>
</ul>
<p dir="auto">Asami is a <em>schemaless</em> database, meaning that data may be inserted with no predefined schema. This flexibility has advantages and disadvantages. It is easier to load and evolve data over time without a schema. However, functionality like upsert and basic integrity checking is not available in the same way as with a graph with a predefined schema. Optional schemas are on the roadmap to help with this.</p>
<p dir="auto">Asami also follows an <em>Open World Assumption</em> model, in the same way that <a href="http://www.w3.org/TR/rdf-primer" rel="nofollow">RDF</a> does. In practice, this has very little effect on the database, beyond what being schemaless provides.</p>
<p dir="auto">If you are new to graph databases, then please read our <a href="https://github.com/quoll/asami/wiki/2.-Introduction">Introduction page</a>.</p>
<p dir="auto">Asami has a query API that looks very similar to a simplified Datomic. More details are available in the <a href="https://github.com/quoll/asami/wiki/6.-Querying">Query documentation</a>.</p>
<h2 dir="auto"><a id="user-content-features" aria-hidden="true" href="#features"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Features</h2>
<p dir="auto">There are several other graph databases available in the Clojure ecosystem, with each having their own focus. Asami is characterized by the following:</p>
<ul dir="auto">
<li>Clojure and ClojureScript: Asami runs identically in both systems.</li>
<li>Schema-less: Asami does not require a schema to insert data.</li>
<li>Query planner: Queries are analyzed to find an efficient execution plan. This can be turned off.</li>
<li>Analytics: Supports fast graph traversal operations, such as transitive closures, and can identify subgraphs.</li>
<li>Integrated with Loom: Asami graphs are valid Loom graphs, via <a href="https://github.com/quoll/asami-loom">Asami-Loom</a>.</li>
<li>Open World Assumption: Related to being schema-less, Asami borrows semantics from <a href="http://www.w3.org/TR/rdf-primer" rel="nofollow">RDF</a> to lean towards an open world model.</li>
<li>Pluggable Storage: Like Datomic, storage in Asami can be implemented in multiple ways. There are currently 2 in-memory graph systems, and durable storage available on the JVM.</li>
</ul>
<h2 dir="auto"><a id="user-content-usage" aria-hidden="true" href="#usage"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h2>
<h3 dir="auto"><a id="user-content-installing" aria-hidden="true" href="#installing"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installing</h3>
<p dir="auto">Using Asami requires <a href="https://clojure.org/guides/getting_started" rel="nofollow">Clojure</a> or <a href="https://clojurescript.org/guides/quick-start" rel="nofollow">ClojureScript</a>.</p>
<p dir="auto">Asami can be made available to clojure by adding the following to a <code>deps.edn</code> file:</p>
<div dir="auto" data-snippet-clipboard-copy-content="{
  :deps {
    org.clojars.quoll/asami {:mvn/version &#34;2.3.2&#34;}
  }
}"><pre>{
  <span>:deps</span> {
    org.clojars.quoll/asami {<span>:mvn/version</span> <span><span>&#34;</span>2.3.2<span>&#34;</span></span>}
  }
}</pre></div>
<p dir="auto">This makes Asami available to a repl that is launched with the <code>clj</code> or <code>clojure</code> commands.</p>
<p dir="auto">Alternatively, Asami can be added for the Leiningen build tool by adding this to the <code>:dependencies</code> section of the <code>project.clj</code> file:</p>
<div dir="auto" data-snippet-clipboard-copy-content="[org.clojars.quoll/asami &#34;2.3.2&#34;]"><pre>[org.clojars.quoll/asami <span><span>&#34;</span>2.3.2<span>&#34;</span></span>]</pre></div>
<h3 dir="auto"><a id="user-content-important-note-for-databases-before-210" aria-hidden="true" href="#important-note-for-databases-before-210"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Important Note for databases before 2.1.0</h3>
<p dir="auto">Asami 2.1.0 now uses fewer files to manage data. This makes it incompatible with previous versions. To port data from an older store to a new one, use the <code>asami.core/export-data</code> function on a database on the previous version of Asami, and <code>asami.core/import-data</code> to load the data into a new connection.</p>
<h3 dir="auto"><a id="user-content-running" aria-hidden="true" href="#running"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Running</h3>
<p dir="auto">The <a href="https://github.com/quoll/asami/wiki/7.-Asami-API">Asami API</a> tries to look a little like Datomic.</p>
<p dir="auto">Once a repl has been configured for Asami, the following can be copy/pasted to test the API:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(require &#39;[asami.core :as d])

;; Create an in-memory database, named dbname
(def db-uri &#34;asami:mem://dbname&#34;)
(d/create-database db-uri)

;; Create a connection to the database
(def conn (d/connect db-uri))

;; Data can be loaded into a database either as objects, or &#34;add&#34; statements:
(def first-movies [{:movie/title &#34;Explorers&#34;
                    :movie/genre &#34;adventure/comedy/family&#34;
                    :movie/release-year 1985}
                   {:movie/title &#34;Demolition Man&#34;
                    :movie/genre &#34;action/sci-fi/thriller&#34;
                    :movie/release-year 1993}
                   {:movie/title &#34;Johnny Mnemonic&#34;
                    :movie/genre &#34;cyber-punk/action&#34;
                    :movie/release-year 1995}
                   {:movie/title &#34;Toy Story&#34;
                    :movie/genre &#34;animation/adventure&#34;
                    :movie/release-year 1995}])

@(d/transact conn {:tx-data first-movies})"><pre>(<span>require</span> &#39;[asami.core <span>:as</span> d])

<span><span>;</span>; Create an in-memory database, named dbname</span>
(<span>def</span> <span>db-uri</span> <span><span>&#34;</span>asami:mem://dbname<span>&#34;</span></span>)
(<span>d/create-database</span> db-uri)

<span><span>;</span>; Create a connection to the database</span>
(<span>def</span> <span>conn</span> (<span>d/connect</span> db-uri))

<span><span>;</span>; Data can be loaded into a database either as objects, or &#34;add&#34; statements:</span>
(<span>def</span> <span>first-movies</span> [{<span>:movie/title</span> <span><span>&#34;</span>Explorers<span>&#34;</span></span>
                    <span>:movie/genre</span> <span><span>&#34;</span>adventure/comedy/family<span>&#34;</span></span>
                    <span>:movie/release-year</span> <span>1985</span>}
                   {<span>:movie/title</span> <span><span>&#34;</span>Demolition Man<span>&#34;</span></span>
                    <span>:movie/genre</span> <span><span>&#34;</span>action/sci-fi/thriller<span>&#34;</span></span>
                    <span>:movie/release-year</span> <span>1993</span>}
                   {<span>:movie/title</span> <span><span>&#34;</span>Johnny Mnemonic<span>&#34;</span></span>
                    <span>:movie/genre</span> <span><span>&#34;</span>cyber-punk/action<span>&#34;</span></span>
                    <span>:movie/release-year</span> <span>1995</span>}
                   {<span>:movie/title</span> <span><span>&#34;</span>Toy Story<span>&#34;</span></span>
                    <span>:movie/genre</span> <span><span>&#34;</span>animation/adventure<span>&#34;</span></span>
                    <span>:movie/release-year</span> <span>1995</span>}])

@(<span>d/transact</span> conn {<span>:tx-data</span> first-movies})</pre></div>
<p dir="auto">The <a href="https://github.com/quoll/asami/wiki/7.-Asami-API#transact"><code>transact</code></a> operation returns an object that can be <em>dereferenced</em> (via <code>clojure.core/deref</code> or the <code>@</code> macro) to provide information about the state of the database before and after the transaction. (A <em>future</em> in Clojure, or a <em>delay</em> in ClojureScript). Note that the transaction data can be provided as the <code>:tx-data</code> in a map object if other parameters are to be provided, or just as a raw sequence without the wrapping map.</p>
<p dir="auto">For more information about loading data and executing <code>transact</code> see the <a href="https://github.com/quoll/asami/wiki/4.-Transactions">Transactions documentation</a>.</p>
<p dir="auto">With the data loaded, a database value can be retrieved from the database and then queried.</p>
<p dir="auto"><strong>NB:</strong> The <code>transact</code> operation will be executed asynchronously on the JVM. Retrieving a database immediately after executing a <code>transact</code> will not retrieve the latest database. If the updated database is needed, then perform the <code>deref</code> operation as shown above, since this will wait until the operation is complete.</p>
<div dir="auto" data-snippet-clipboard-copy-content="(def db (d/db conn))

(d/q &#39;[:find ?movie-title
       :where [?m :movie/title ?movie-title]] db)"><pre>(<span>def</span> <span>db</span> (<span>d/db</span> conn))

(<span>d/q</span> &#39;[<span>:find</span> ?movie-title
       <span>:where</span> [?m <span>:movie/title</span> ?movie-title]] db)</pre></div>
<p dir="auto">This returns a sequence of results, with each result being a sequence of the selected vars in the <code>:find</code> clause (just <code>?movie-title</code> in this case):</p>
<div data-snippet-clipboard-copy-content="([&#34;Explorers&#34;]
 [&#34;Demolition Man&#34;]
 [&#34;Johnny Mnemonic&#34;]
 [&#34;Toy Story&#34;])"><pre><code>([&#34;Explorers&#34;]
 [&#34;Demolition Man&#34;]
 [&#34;Johnny Mnemonic&#34;]
 [&#34;Toy Story&#34;])
</code></pre></div>
<p dir="auto">A more complex query could be to get the title, year and genre for all movies after 1990:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(d/q &#39;[:find ?title ?year ?genre
       :where [?m :movie/title ?title]
              [?m :movie/release-year ?year]
              [?m :movie/genre ?genre]
              [(&gt; ?year 1990)]] db)"><pre>(<span>d/q</span> &#39;[<span>:find</span> ?title ?year ?genre
       <span>:where</span> [?m <span>:movie/title</span> ?title]
              [?m <span>:movie/release-year</span> ?year]
              [?m <span>:movie/genre</span> ?genre]
              [(<span>&gt;</span> ?year <span>1990</span>)]] db)</pre></div>
<p dir="auto">Entities found in a query can be extracted back out as objects using the <a href="https://github.com/quoll/asami/wiki/7.-Asami-API#entity"><code>entity</code></a> function. For instance, the following is a repl session that looks up the movies released in 1995, and then gets the associated entities:</p>
<div dir="auto" data-snippet-clipboard-copy-content=";; find the entity IDs. This variation in the :find clause asks for a list of just the ?m variable
=&gt; (d/q &#39;[:find [?m ...] :where [?m :movie/release-year 1995]] db)
(:a/node-10327 :a/node-10326)

;; get a single entity
=&gt; (d/entity db :a/node-10327)
#:movie{:title &#34;Toy Story&#34;,
        :genre &#34;animation/adventure&#34;,
        :release-year 1995}

;; get all the entities from the query
=&gt; (map #(d/entity db %)
        (d/q &#39;[:find [?m ...] :where [?m :movie/release-year 1995]] db))
(#:movie{:title &#34;Toy Story&#34;,
         :genre &#34;animation/adventure&#34;,
         :release-year 1995}
 #:movie{:title &#34;Johnny Mnemonic&#34;,
         :genre &#34;cyber-punk/action&#34;,
         :release-year 1995})"><pre><span><span>;</span>; find the entity IDs. This variation in the :find clause asks for a list of just the ?m variable</span>
=&gt; (<span>d/q</span> &#39;[<span>:find</span> [?m ...] <span>:where</span> [?m <span>:movie/release-year</span> <span>1995</span>]] db)
(<span>:a/node-10327</span> <span>:a/node-10326</span>)

<span><span>;</span>; get a single entity</span>
=&gt; (<span>d/entity</span> db <span>:a/node-10327</span>)
#:movie{<span>:title</span> <span><span>&#34;</span>Toy Story<span>&#34;</span></span>,
        <span>:genre</span> <span><span>&#34;</span>animation/adventure<span>&#34;</span></span>,
        <span>:release-year</span> <span>1995</span>}

<span><span>;</span>; get all the entities from the query</span>
=&gt; (<span>map</span> #(<span>d/entity</span> db %)
        (<span>d/q</span> &#39;[<span>:find</span> [?m ...] <span>:where</span> [?m <span>:movie/release-year</span> <span>1995</span>]] db))
(<span>#:movie{:title</span> <span><span>&#34;</span>Toy Story<span>&#34;</span></span>,
         <span>:genre</span> <span><span>&#34;</span>animation/adventure<span>&#34;</span></span>,
         <span>:release-year</span> <span>1995</span>}
 #:movie{<span>:title</span> <span><span>&#34;</span>Johnny Mnemonic<span>&#34;</span></span>,
         <span>:genre</span> <span><span>&#34;</span>cyber-punk/action<span>&#34;</span></span>,
         <span>:release-year</span> <span>1995</span>})</pre></div>
<p dir="auto">See the <a href="https://github.com/quoll/asami/wiki/6.-Querying">Query Documentation</a> for more information on querying.</p>
<p dir="auto">Refer to the <a href="https://github.com/quoll/asami/wiki/5.-Entity-Structure">Entity Structure documentation</a> to understand how entities are stored and how to construct queries for them.</p>
<h3 dir="auto"><a id="user-content-local-storage" aria-hidden="true" href="#local-storage"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Local Storage</h3>
<p dir="auto">The above code uses an in-memory database, specified with a URL of the form <code>asami:mem://dbname</code>. Creating a database on disk is done the same way, but with the URL scheme changed to <code>asami:local://dbname</code>. This would create a database in the <code>dbname</code> directory. Local databases do not use keywords as entity IDs, as keywords use up memory, and a local database could be gigabytes in size. Instead, these are <code>InternalNode</code> objects. These can be created with <code>asami.graph/new-node</code>, or by using the readers in <code>asami.graph</code>. For instance, if the above code were all done with a local graph instead of a memory graph:</p>
<div dir="auto" data-snippet-clipboard-copy-content="=&gt; (d/q &#39;[:find [?m ...] :where [?m :movie/release-year 1995]] db)
(#a/n &#34;3&#34; #a/n &#34;4&#34;)

;; get a single entity
=&gt; (require &#39;[asami.graph :as graph])
=&gt; (d/entity db (graph/new-node 4))
#:movie{:title &#34;Toy Story&#34;, :genre &#34;animation/adventure/comedy&#34;, :release-year 1995}

;; nodes can also be read from a string, with the appropriate reader
=&gt; (set! *data-readers* graph/node-reader)
=&gt; (d/entity db #a/n &#34;4&#34;)
#:movie{:title &#34;Toy Story&#34;, :genre &#34;animation/adventure/comedy&#34;, :release-year 1995}"><pre>=&gt; (<span>d/q</span> &#39;[<span>:find</span> [?m ...] <span>:where</span> [?m <span>:movie/release-year</span> <span>1995</span>]] db)
(<span>#a/n</span> <span><span>&#34;</span>3<span>&#34;</span></span> #a/n <span><span>&#34;</span>4<span>&#34;</span></span>)

<span><span>;</span>; get a single entity</span>
=&gt; (<span>require</span> &#39;[asami.graph <span>:as</span> graph])
=&gt; (<span>d/entity</span> db (<span>graph/new-node</span> <span>4</span>))
#:movie{<span>:title</span> <span><span>&#34;</span>Toy Story<span>&#34;</span></span>, <span>:genre</span> <span><span>&#34;</span>animation/adventure/comedy<span>&#34;</span></span>, <span>:release-year</span> <span>1995</span>}

<span><span>;</span>; nodes can also be read from a string, with the appropriate reader</span>
=&gt; (<span>set!</span> *data-readers* graph/node-reader)
=&gt; (<span>d/entity</span> db #a/n <span><span>&#34;</span>4<span>&#34;</span></span>)
#:movie{<span>:title</span> <span><span>&#34;</span>Toy Story<span>&#34;</span></span>, <span>:genre</span> <span><span>&#34;</span>animation/adventure/comedy<span>&#34;</span></span>, <span>:release-year</span> <span>1995</span>}</pre></div>
<h3 dir="auto"><a id="user-content-updates" aria-hidden="true" href="#updates"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Updates</h3>
<p dir="auto">The <em>Open World Assumption</em> allows each attribute to be multi-arity. In a <em>Closed World</em> database an object may be loaded to replace those attributes that can only appear once. To do the same thing with Asami, annotate the attributes to be replaced with a quote character at the end of the attribute name.</p>
<div dir="auto" data-snippet-clipboard-copy-content="=&gt; (def toy-story (d/q &#39;[:find ?ts . :where [?ts :movie/title &#34;Toy Story&#34;]] db))
=&gt; (d/transact conn [{:db/id toy-story :movie/genre&#39; &#34;animation/adventure/comedy&#34;}])
=&gt; (d/entity (d/db conn) toy-story)
#:movie{:title &#34;Toy Story&#34;,
        :genre &#34;animation/adventure/comedy&#34;,
        :release-year 1995}"><pre>=&gt; (<span>def</span> <span>toy-story</span> (<span>d/q</span> &#39;[<span>:find</span> ?ts . <span>:where</span> [?ts <span>:movie/title</span> <span><span>&#34;</span>Toy Story<span>&#34;</span></span>]] db))
=&gt; (<span>d/transact</span> conn [{<span>:db/id</span> toy-story :movie/genre&#39; <span><span>&#34;</span>animation/adventure/comedy<span>&#34;</span></span>}])
=&gt; (<span>d/entity</span> (<span>d/db</span> conn) toy-story)
#:movie{<span>:title</span> <span><span>&#34;</span>Toy Story<span>&#34;</span></span>,
        <span>:genre</span> <span><span>&#34;</span>animation/adventure/comedy<span>&#34;</span></span>,
        <span>:release-year</span> <span>1995</span>}</pre></div>
<p dir="auto">Addressing nodes by their internal ID can be cumbersome. They can also be addressed by a <code>:db/ident</code> field if one is provided.</p>
<div dir="auto" data-snippet-clipboard-copy-content="(def tx (d/transact conn [{:db/ident &#34;sense&#34;
                           :movie/title &#34;Sense and Sensibility&#34;
                           :movie/genre &#34;drama/romance&#34;
                           :movie/release-year 1996}]))

;; ask the transaction for the node ID, instead of querying
(def sense (get (:tempids @tx) &#34;sense&#34;))
(d/entity (d/db conn) sense)"><pre>(<span>def</span> <span>tx</span> (<span>d/transact</span> conn [{<span>:db/ident</span> <span><span>&#34;</span>sense<span>&#34;</span></span>
                           <span>:movie/title</span> <span><span>&#34;</span>Sense and Sensibility<span>&#34;</span></span>
                           <span>:movie/genre</span> <span><span>&#34;</span>drama/romance<span>&#34;</span></span>
                           <span>:movie/release-year</span> <span>1996</span>}]))

<span><span>;</span>; ask the transaction for the node ID, instead of querying</span>
(<span>def</span> <span>sense</span> (<span>get</span> (<span>:tempids</span> @tx) <span><span>&#34;</span>sense<span>&#34;</span></span>))
(<span>d/entity</span> (<span>d/db</span> conn) sense)</pre></div>
<p dir="auto">This returns the new movie. The <code>:db/ident</code> attribute does not appear in the entity:</p>
<div dir="auto" data-snippet-clipboard-copy-content="#:movie{:title &#34;Sense and Sensibility&#34;, :genre &#34;drama/romance&#34;, :release-year 1996}"><pre>#:movie{<span>:title</span> <span><span>&#34;</span>Sense and Sensibility<span>&#34;</span></span>, <span>:genre</span> <span><span>&#34;</span>drama/romance<span>&#34;</span></span>, <span>:release-year</span> <span>1996</span>}</pre></div>
<p dir="auto">However, all of the attributes are still present in the graph:</p>
<div dir="auto" data-snippet-clipboard-copy-content="=&gt; (d/q &#39;[:find ?a ?v :in $ ?s :where [?s ?a ?v]] (d/db conn) sense)
([:db/ident &#34;sense&#34;] [:movie/title &#34;Sense and Sensibility&#34;] [:movie/genre &#34;drama/romance&#34;] [:movie/release-year 1996])"><pre>=&gt; (<span>d/q</span> &#39;[<span>:find</span> ?a ?v <span>:in</span> $ ?s <span>:where</span> [?s ?a ?v]] (<span>d/db</span> conn) sense)
([<span>:db/ident</span> <span><span>&#34;</span>sense<span>&#34;</span></span>] [<span>:movie/title</span> <span><span>&#34;</span>Sense and Sensibility<span>&#34;</span></span>] [<span>:movie/genre</span> <span><span>&#34;</span>drama/romance<span>&#34;</span></span>] [<span>:movie/release-year</span> <span>1996</span>])</pre></div>
<p dir="auto">The release year of this movie is incorrectly set to the release in the USA, and not the initial release. That can be updated using the <code>:db/ident</code> field:</p>
<div dir="auto" data-snippet-clipboard-copy-content="=&gt; (d/transact conn [{:db/ident &#34;sense&#34; :movie/release-year&#39; 1995}])
=&gt; (d/entity (d/db conn) sense)
#:movie{:title &#34;Sense and Sensibility&#34;, :genre &#34;drama/romance&#34;, :release-year 1995}"><pre>=&gt; (<span>d/transact</span> conn [{<span>:db/ident</span> <span><span>&#34;</span>sense<span>&#34;</span></span> :movie/release-year&#39; <span>1995</span>}])
=&gt; (<span>d/entity</span> (<span>d/db</span> conn) sense)
#:movie{<span>:title</span> <span><span>&#34;</span>Sense and Sensibility<span>&#34;</span></span>, <span>:genre</span> <span><span>&#34;</span>drama/romance<span>&#34;</span></span>, <span>:release-year</span> <span>1995</span>}</pre></div>
<p dir="auto">More details are provided in <a href="https://github.com/quoll/asami/wiki/4.-Transactions#entity-updates">Entity Updates</a>.</p>
<h2 dir="auto"><a id="user-content-analytics" aria-hidden="true" href="#analytics"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Analytics</h2>
<p dir="auto">Asami also has some support for graph analytics. These all operate on the <em>graph</em> part of a database value, which can be retrieved with the <code>asami.core/graph</code> function.</p>
<p dir="auto"><strong>NB:</strong> <code>local</code> graphs on disk are not yet supported. These will be available soon.</p>
<p dir="auto">Start by populating a graph with the cast of <a href="https://www.imdb.com/title/tt0053502/" rel="nofollow">&#34;The Flintstones&#34;</a>. So that we can refer to entities after they have been created, we can provide them with temporary ID values. These are just negative numbers, and can be used elsewhere in the transaction to refer to the same entity. We will also avoid the <code>:tx-data</code> wrapper in the transaction:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(require &#39;[asami.core :as d])
(require &#39;[asami.analytics :as aa])

(def db-uri &#34;asami:mem://data&#34;)
(d/create-database db-uri)
(def conn (d/connect db-uri))

(def data [{:db/id -1 :name &#34;Fred&#34;}
           {:db/id -2 :name &#34;Wilma&#34;}
           {:db/id -3 :name &#34;Pebbles&#34;}
           {:db/id -4 :name &#34;Dino&#34; :species &#34;Dinosaur&#34;}
           {:db/id -5 :name &#34;Barney&#34;}
           {:db/id -6 :name &#34;Betty&#34;}
           {:db/id -7 :name &#34;Bamm-Bamm&#34;}
           [:db/add -1 :spouse -2]
           [:db/add -2 :spouse -1]
           [:db/add -1 :child -3]
           [:db/add -2 :child -3]
           [:db/add -1 :pet -4]
           [:db/add -5 :spouse -6]
           [:db/add -6 :spouse -5]
           [:db/add -5 :child -7]
           [:db/add -6 :child -7]])

(d/transact conn data)"><pre>(<span>require</span> &#39;[asami.core <span>:as</span> d])
(<span>require</span> &#39;[asami.analytics <span>:as</span> aa])

(<span>def</span> <span>db-uri</span> <span><span>&#34;</span>asami:mem://data<span>&#34;</span></span>)
(<span>d/create-database</span> db-uri)
(<span>def</span> <span>conn</span> (<span>d/connect</span> db-uri))

(<span>def</span> <span>data</span> [{<span>:db/id</span> <span>-1</span> <span>:name</span> <span><span>&#34;</span>Fred<span>&#34;</span></span>}
           {<span>:db/id</span> <span>-2</span> <span>:name</span> <span><span>&#34;</span>Wilma<span>&#34;</span></span>}
           {<span>:db/id</span> <span>-3</span> <span>:name</span> <span><span>&#34;</span>Pebbles<span>&#34;</span></span>}
           {<span>:db/id</span> <span>-4</span> <span>:name</span> <span><span>&#34;</span>Dino<span>&#34;</span></span> <span>:species</span> <span><span>&#34;</span>Dinosaur<span>&#34;</span></span>}
           {<span>:db/id</span> <span>-5</span> <span>:name</span> <span><span>&#34;</span>Barney<span>&#34;</span></span>}
           {<span>:db/id</span> <span>-6</span> <span>:name</span> <span><span>&#34;</span>Betty<span>&#34;</span></span>}
           {<span>:db/id</span> <span>-7</span> <span>:name</span> <span><span>&#34;</span>Bamm-Bamm<span>&#34;</span></span>}
           [<span>:db/add</span> <span>-1</span> <span>:spouse</span> <span>-2</span>]
           [<span>:db/add</span> <span>-2</span> <span>:spouse</span> <span>-1</span>]
           [<span>:db/add</span> <span>-1</span> <span>:child</span> <span>-3</span>]
           [<span>:db/add</span> <span>-2</span> <span>:child</span> <span>-3</span>]
           [<span>:db/add</span> <span>-1</span> <span>:pet</span> <span>-4</span>]
           [<span>:db/add</span> <span>-5</span> <span>:spouse</span> <span>-6</span>]
           [<span>:db/add</span> <span>-6</span> <span>:spouse</span> <span>-5</span>]
           [<span>:db/add</span> <span>-5</span> <span>:child</span> <span>-7</span>]
           [<span>:db/add</span> <span>-6</span> <span>:child</span> <span>-7</span>]])

(<span>d/transact</span> conn data)</pre></div>
<p dir="auto">Fred, Wilma, Pebbles, and Dino are all connected in a subgraph. Barney, Betty and Bamm-Bamm are connected in a separate subgraph.</p>
<p dir="auto">Let&#39;s find the subgraph from Fred:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(def db (d/db conn))
(def graph (d/graph db))
(def fred (d/q &#39;[:find ?e . :where [?e :name &#34;Fred&#34;]] db))

(aa/subgraph-from-node graph fred)"><pre>(<span>def</span> <span>db</span> (<span>d/db</span> conn))
(<span>def</span> <span>graph</span> (<span>d/graph</span> db))
(<span>def</span> <span>fred</span> (<span>d/q</span> &#39;[<span>:find</span> ?e . <span>:where</span> [?e <span>:name</span> <span><span>&#34;</span>Fred<span>&#34;</span></span>]] db))

(<span>aa/subgraph-from-node</span> graph fred)</pre></div>
<p dir="auto">This returns the <em>nodes</em> in the graph, but not the scalar values. For instance:</p>
<div dir="auto" data-snippet-clipboard-copy-content="#{:a/node-10330 :a/node-10329 :a/node-10331 :a/node-10332}"><pre>#{<span>:a/node-10330</span> <span>:a/node-10329</span> <span>:a/node-10331</span> <span>:a/node-10332</span>}</pre></div>
<p dir="auto">These nodes can be used as the input to a query to get their names:</p>
<div dir="auto" data-snippet-clipboard-copy-content="=&gt; (d/q &#39;[:find [?name ...] :in $ [?n ...] :where [?n :name ?name]]
        db
        (aa/subgraph-from-node graph fred))
(&#34;Fred&#34; &#34;Pebbles&#34; &#34;Dino&#34; &#34;Wilma&#34;)"><pre>=&gt; (<span>d/q</span> &#39;[<span>:find</span> [?name ...] <span>:in</span> $ [?n ...] <span>:where</span> [?n <span>:name</span> ?name]]
        db
        (<span>aa/subgraph-from-node</span> graph fred))
(<span>&#34;Fred&#34;</span> <span><span>&#34;</span>Pebbles<span>&#34;</span></span> <span><span>&#34;</span>Dino<span>&#34;</span></span> <span><span>&#34;</span>Wilma<span>&#34;</span></span>)</pre></div>
<p dir="auto">We can also get all the subgraphs:</p>
<div dir="auto" data-snippet-clipboard-copy-content="=&gt; (count (aa/subgraphs graph))
2

;; execute the same query for each subgraph
=&gt; (map (partial d/q &#39;[:find [?name ...] :where [?e :name ?name]])
        (aa/subgraphs graph))
((&#34;Fred&#34; &#34;Wilma&#34; &#34;Pebbles&#34; &#34;Dino&#34;) (&#34;Barney&#34; &#34;Betty&#34; &#34;Bamm-Bamm&#34;))"><pre>=&gt; (<span>count</span> (<span>aa/subgraphs</span> graph))
<span>2</span>

<span><span>;</span>; execute the same query for each subgraph</span>
=&gt; (<span>map</span> (<span>partial</span> d/q &#39;[<span>:find</span> [?name ...] <span>:where</span> [?e <span>:name</span> ?name]])
        (<span>aa/subgraphs</span> graph))
((<span>&#34;Fred&#34;</span> <span><span>&#34;</span>Wilma<span>&#34;</span></span> <span><span>&#34;</span>Pebbles<span>&#34;</span></span> <span><span>&#34;</span>Dino<span>&#34;</span></span>) (<span>&#34;Barney&#34;</span> <span><span>&#34;</span>Betty<span>&#34;</span></span> <span><span>&#34;</span>Bamm-Bamm<span>&#34;</span></span>))</pre></div>
<h4 dir="auto"><a id="user-content-transitive-queries" aria-hidden="true" href="#transitive-queries"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Transitive Queries</h4>
<p dir="auto">Asami supports transitive properties in queries. A property (or attribute) is treated as transitive if it is followed by a <code>+</code> or a <code>*</code> character.</p>
<div dir="auto" data-snippet-clipboard-copy-content="(d/q &#39;[:find ?friend-of-a-friend
       :where [?person :name &#34;Fred&#34;]
              [?person :friend+ ?foaf]
              [?foaf :name ?friend-of-a-friend]]
     db)"><pre>(<span>d/q</span> &#39;[<span>:find</span> ?friend-of-a-friend
       <span>:where</span> [?person <span>:name</span> <span><span>&#34;</span>Fred<span>&#34;</span></span>]
              [?person <span>:friend+</span> ?foaf]
              [?foaf <span>:name</span> ?friend-of-a-friend]]
     db)</pre></div>
<p dir="auto">This will find all friends, and friends of friends for Fred.</p>
<h3 dir="auto"><a id="user-content-loom" aria-hidden="true" href="#loom"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Loom</h3>
<p dir="auto">Asami also implements <a href="https://github.com/aysylu/loom">Loom</a> via the <a href="https://github.com/quoll/asami-loom">Asami-Loom</a> package.
Include the following dependency for your project:</p>
<div data-snippet-clipboard-copy-content="[org.clojars.quoll/asami-loom &#34;0.2.0&#34;]"><pre><code>[org.clojars.quoll/asami-loom &#34;0.2.0&#34;]
</code></pre></div>
<p dir="auto">Graphs can now be analyzed with Loom functions.</p>
<p dir="auto">If functions are provided to Loom, then they can be used to provide labels for creating a visual graph. The following creates some simple queries to get the labels for edges and nodes:</p>
<div dir="auto" data-snippet-clipboard-copy-content="(require &#39;[asami-loom.index])
(require &#39;[asami-loom.label])
(require &#39;[loom.io])

(defn edge-label [g s d]
  (str (d/q &#39;[:find ?e . :in $ ?a ?b :where (or [?a ?e ?b] [?b ?e ?a])] g s d)))
  
(defn node-label [g n]
  (or (d/q &#39;[:find ?name . :where [?n :name ?name]] g n) &#34;-&#34;))

;; create a PDF of the graph
(loom-io/view (graph db) :fmt :pdg :alg :sfpd :edge-label edge-label :node-label node-label)"><pre>(<span>require</span> &#39;[asami-loom.index])
(<span>require</span> &#39;[asami-loom.label])
(<span>require</span> &#39;[loom.io])

(<span>defn</span> <span>edge-label</span> [g s d]
  (<span>str</span> (<span>d/q</span> &#39;[<span>:find</span> ?e . <span>:in</span> $ ?a ?b <span>:where</span> (<span>or</span> [?a ?e ?b] [?b ?e ?a])] g s d)))
  
(<span>defn</span> <span>node-label</span> [g n]
  (<span>or</span> (<span>d/q</span> &#39;[<span>:find</span> ?name . <span>:where</span> [?n <span>:name</span> ?name]] g n) <span><span>&#34;</span>-<span>&#34;</span></span>))

<span><span>;</span>; create a PDF of the graph</span>
(<span>loom-io/view</span> (<span>graph</span> db) <span>:fmt</span> <span>:pdg</span> <span>:alg</span> <span>:sfpd</span> <span>:edge-label</span> edge-label <span>:node-label</span> node-label)</pre></div>
<h2 dir="auto"><a id="user-content-command-line-tool" aria-hidden="true" href="#command-line-tool"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Command Line Tool</h2>
<p dir="auto">A command line tool is available to load data into an Asami graph and query it. This requires <a href="https://www.graalvm.org/" rel="nofollow">GraalVM CE 21.1.0</a> or later, and the <a href="https://www.graalvm.org/reference-manual/native-image/#install-native-image" rel="nofollow"><code>native-image</code></a> executable.
Leiningen needs to see GraalVM on the classpath first, so if there are problems with building, check to see if this is the case.</p>
<p dir="auto">To build from sources:</p>
<div dir="auto" data-snippet-clipboard-copy-content="lein with-profile native uberjar
lein with-profile native native"><pre>lein with-profile native uberjar
lein with-profile native native</pre></div>
<p dir="auto">This will create a binary called <code>asami</code> in the <code>target</code> directory. Execute with the <code>-?</code> flag for help:</p>
<div data-snippet-clipboard-copy-content="$ ./target/asami -?
Usage: asami URL [-f filename] [-e query] [--help | -?]

-? | --help: This help
URL: the URL of the database to use. Must start with asami:mem://, asami:multi:// or asami:local://
-f filename: loads the filename into the database. A filename of &#34;-&#34; will use stdin.
             Data defaults to EDN. Filenames ending in .json are treated as JSON.
-e query: executes a query. &#34;-&#34; (the default) will read from stdin instead of a command line argument.
          Multiple queries can be specified as edn (vector of query vectors) or ; separated.

Available EDN readers:
  internal nodes -  #a/n &#34;node-id&#34;
  regex          -  #a/r &#34;[Tt]his is a (regex|regular expression)&#34;"><pre><code>$ ./target/asami -?
Usage: asami URL [-f filename] [-e query] [--help | -?]

-? | --help: This help
URL: the URL of the database to use. Must start with asami:mem://, asami:multi:// or asami:local://
-f filename: loads the filename into the database. A filename of &#34;-&#34; will use stdin.
             Data defaults to EDN. Filenames ending in .json are treated as JSON.
-e query: executes a query. &#34;-&#34; (the default) will read from stdin instead of a command line argument.
          Multiple queries can be specified as edn (vector of query vectors) or ; separated.

Available EDN readers:
  internal nodes -  #a/n &#34;node-id&#34;
  regex          -  #a/r &#34;[Tt]his is a (regex|regular expression)&#34;
</code></pre></div>
<h4 dir="auto"><a id="user-content-example" aria-hidden="true" href="#example"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example:</h4>
<p dir="auto">Loading a json file, and querying for keys (attributes) that are strings with spaces in them:</p>
<div dir="auto" data-snippet-clipboard-copy-content="asami asami:mem://tmp -f data.json -e &#39;:find ?a :where [?e ?a ?v][(string? ?a)][(re-find #a/r &#34; &#34; ?a)]&#39;"><pre>asami asami:mem://tmp -f data.json -e <span><span>&#39;</span>:find ?a :where [?e ?a ?v][(string? ?a)][(re-find #a/r &#34; &#34; ?a)]<span>&#39;</span></span></pre></div>
<p dir="auto">The command will also work on <code>local</code> stores, which means that they can be loaded once and then queried multiple times.</p>
<h2 dir="auto"><a id="user-content-license" aria-hidden="true" href="#license"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h2>
<p dir="auto">Copyright © 2016-2021 Cisco Systems</p>
<p dir="auto">Copyright © 2015-2022 <a href="https://hachyderm.io/@quoll" rel="nofollow">Paula Gearon</a></p>
<p dir="auto">Portions of src/asami/cache.cljc are Copyright © Rich Hickey</p>
<p dir="auto">Distributed under the Eclipse Public License either version 1.0 or (at
your option) any later version.</p>
</article>
          </div></div>
  </body>
</html>
