<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/dpayne/CodeGPT.nvim">Original</a>
    <h1>Show HN: CodeGPT.nvim â€“ ChatGPT plugin for Neovim</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto">CodeGPT a plugin for neovim that provides commands to interact with ChatGPT. The focus is around code related usages, so code completion, refactorings, generating docs, etc.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-installation" aria-hidden="true" href="#installation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h2>
<ul dir="auto">
<li>Set environment variable <code>OPENAI_API_KEY</code> to your <a href="https://platform.openai.com/account/api-keys" rel="nofollow">openai api key</a>.</li>
<li>The plugins plenary and nui are also required.</li>
</ul>
<p dir="auto">Installing with packer.</p>
<div dir="auto" data-snippet-clipboard-copy-content="use(&#34;nvim-lua/plenary.nvim&#34;)
use(&#34;MunifTanjim/nui.nvim&#34;)
use(&#34;dpayne/CodeGPT.nvim&#34;)"><pre><span>use</span>(<span><span>&#34;</span>nvim-lua/plenary.nvim<span>&#34;</span></span>)
<span>use</span>(<span><span>&#34;</span>MunifTanjim/nui.nvim<span>&#34;</span></span>)
<span>use</span>(<span><span>&#34;</span>dpayne/CodeGPT.nvim<span>&#34;</span></span>)</pre></div>
<p dir="auto">Installing with plugged.</p>
<div dir="auto" data-snippet-clipboard-copy-content="Plug(&#34;nvim-lua/plenary.nvim&#34;)
Plug(&#34;MunifTanjim/nui.nvim&#34;)
Plug(&#34;dpayne/CodeGPT.nvim&#34;)"><pre><span>Plug</span>(<span><span>&#34;</span>nvim-lua/plenary.nvim<span>&#34;</span></span>)
<span>Plug</span>(<span><span>&#34;</span>MunifTanjim/nui.nvim<span>&#34;</span></span>)
<span>Plug</span>(<span><span>&#34;</span>dpayne/CodeGPT.nvim<span>&#34;</span></span>)</pre></div>
<h2 tabindex="-1" dir="auto"><a id="user-content-commands" aria-hidden="true" href="#commands"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Commands</h2>
<p dir="auto">The top-level command is <code>:Chat</code>. The behavior is different depending on whether text is selected and/or arguments are passed.</p>
<h3 tabindex="-1" dir="auto"><a id="user-content-completion" aria-hidden="true" href="#completion"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Completion</h3>
<ul dir="auto">
<li><code>:Chat</code> with text selection will trigger the <code>completion</code> command, ChatGPT will try to complete the selected code snippet.
<a target="_blank" rel="noopener noreferrer" href="https://github.com/dpayne/CodeGPT.nvim/blob/master/examples/completion.gif?raw=true"><img src="https://github.com/dpayne/CodeGPT.nvim/raw/master/examples/completion.gif?raw=true" alt="completion" data-animated-image=""/></a></li>
</ul>
<h3 tabindex="-1" dir="auto"><a id="user-content-code-edit" aria-hidden="true" href="#code-edit"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Code Edit</h3>
<ul dir="auto">
<li><code>:Chat some instructions</code> with text selection and command args will invoke the <code>code_edit</code> command. This will treat the command args as instructions on what to do with the code snippet. In the below example, <code>:Chat refactor to use iteration</code> will apply the instruction <code>refactor to use iteration</code> to the selected code.
<a target="_blank" rel="noopener noreferrer" href="https://github.com/dpayne/CodeGPT.nvim/blob/master/examples/code_edit.gif?raw=true"><img src="https://github.com/dpayne/CodeGPT.nvim/raw/master/examples/code_edit.gif?raw=true" alt="code_edit" data-animated-image=""/></a></li>
</ul>
<h3 tabindex="-1" dir="auto"><a id="user-content-code-edit-1" aria-hidden="true" href="#code-edit-1"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Code Edit</h3>
<ul dir="auto">
<li><code>:Chat &lt;command&gt;</code> if there is only one argument and that argument matches a command, it will invoke that command with the given text selection. In the below example <code>:Chat tests</code> will attempt to write units for the selected code.
<a target="_blank" rel="noopener noreferrer" href="https://github.com/dpayne/CodeGPT.nvim/blob/master/examples/tests.gif?raw=true"><img src="https://github.com/dpayne/CodeGPT.nvim/raw/master/examples/tests.gif?raw=true" alt="tests" data-animated-image=""/></a></li>
</ul>
<h3 tabindex="-1" dir="auto"><a id="user-content-chat" aria-hidden="true" href="#chat"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Chat</h3>
<ul dir="auto">
<li><code>:Chat hello world</code> without any text selection will trigger the <code>chat</code> command. This will send the arguments <code>hello world</code> to ChatGPT and show the results in a popup.
<a target="_blank" rel="noopener noreferrer" href="https://github.com/dpayne/CodeGPT.nvim/blob/master/examples/chat.gif?raw=true"><img src="https://github.com/dpayne/CodeGPT.nvim/raw/master/examples/chat.gif?raw=true" alt="chat" data-animated-image=""/></a></li>
</ul>
<p dir="auto">A full list of predefined commands are below</p>
<table>
<thead>
<tr>
<th>command</th>
<th>input</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>completion</td>
<td>text selection</td>
<td>Will ask ChatGPT to complete the selected code.</td>
</tr>
<tr>
<td>code_edit</td>
<td>text selection and command args</td>
<td>Will ask ChatGPT to apply the given instructions (the command args) to the selected code.</td>
</tr>
<tr>
<td>explain</td>
<td>text selection</td>
<td>Will ask ChatGPT to explain the selected code.</td>
</tr>
<tr>
<td>doc</td>
<td>text selection</td>
<td>Will ask ChatGPT to document the selected code.</td>
</tr>
<tr>
<td>opt</td>
<td>text selection</td>
<td>Will ask ChatGPT to optimize the selected code.</td>
</tr>
<tr>
<td>tests</td>
<td>text selection</td>
<td>Will ask ChatGPT to write unit tests for the selected code.</td>
</tr>
<tr>
<td>chat</td>
<td>command args</td>
<td>Will pass the given command args to ChatGPT and return the response in a popup.</td>
</tr>
</tbody>
</table>
<h2 tabindex="-1" dir="auto"><a id="user-content-overriding-command-configurations" aria-hidden="true" href="#overriding-command-configurations"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Overriding Command Configurations</h2>
<p dir="auto">The configuration option <code>vim.g[&#34;codegpt_commands_defaults&#34;] = {}</code> can be used to override command configurations. This is a lua table with a list of commands and the options you want to override.</p>
<div dir="auto" data-snippet-clipboard-copy-content="vim.g[&#34;codegpt_commands_defaults&#34;] = {
  [&#34;completion&#34;] = {
      user_message_template = &#34;This is a template of the message passed to chat gpt. Hello, the code snippet is {{text_selection}}.&#34;
}"><pre>vim.<span>g</span>[<span><span>&#34;</span>codegpt_commands_defaults<span>&#34;</span></span>] <span>=</span> {
  [<span><span>&#34;</span>completion<span>&#34;</span></span>] <span>=</span> {
      user_message_template <span>=</span> <span><span>&#34;</span>This is a template of the message passed to chat gpt. Hello, the code snippet is {{text_selection}}.<span>&#34;</span></span>
}</pre></div>
<p dir="auto">The above, overrides the message template for the <code>completion</code> command.</p>
<p dir="auto">A full list of overrides</p>
<table>
<thead>
<tr>
<th>name</th>
<th>default</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>model</td>
<td>&#34;gpt-3.5-turbo&#34;</td>
<td>The model to use.</td>
</tr>
<tr>
<td>max_tokens</td>
<td>4096</td>
<td>The maximum number of tokens to use including the prompt tokens.</td>
</tr>
<tr>
<td>temperature</td>
<td>0.6</td>
<td>0 -&gt; 1, what sampling temperature to use.</td>
</tr>
<tr>
<td>system_message_template</td>
<td>&#34;&#34;</td>
<td>Helps set the behavior of the assistant.</td>
</tr>
<tr>
<td>user_message_template</td>
<td>&#34;&#34;</td>
<td>Instructs the assistant.</td>
</tr>
<tr>
<td>callback_type</td>
<td>&#34;replace_lines&#34;</td>
<td>Controls what the plugin does with the response</td>
</tr>
<tr>
<td>language_instructions</td>
<td>{}</td>
<td>A table of filetype =&gt; instructions. The current buffer&#39;s filetype is used in this lookup. This is useful trigger different instructions for different languages.</td>
</tr>
</tbody>
</table>
<h4 tabindex="-1" dir="auto"><a id="user-content-language-instructions" aria-hidden="true" href="#language-instructions"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Language Instructions</h4>
<p dir="auto">Some commands have templates that use the <code>{{language_instructions}}</code> macro to allow for additional instructions for specific <a href="https://neovim.io/doc/user/filetype.html" rel="nofollow">filetypes</a>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="vim.g[&#34;codegpt_commands_defaults&#34;] = {
  [&#34;completion&#34;] = {
      language_instructions = {
          cpp = &#34;Use trailing return type.&#34;,
      },
  }
}"><pre>vim.<span>g</span>[<span><span>&#34;</span>codegpt_commands_defaults<span>&#34;</span></span>] <span>=</span> {
  [<span><span>&#34;</span>completion<span>&#34;</span></span>] <span>=</span> {
      language_instructions <span>=</span> {
          cpp <span>=</span> <span><span>&#34;</span>Use trailing return type.<span>&#34;</span></span>,
      },
  }
}</pre></div>
<p dir="auto">The above adds a specific <code>Use trailing return type.</code> to the command <code>completion</code> for the filetype <code>cpp</code>.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-custom-commands" aria-hidden="true" href="#custom-commands"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Custom Commands</h2>
<p dir="auto">Custom commands can be added to the <code>vim.g[&#34;codegpt_commands&#34;]</code> configuration option to extend the available commands.</p>
<div dir="auto" data-snippet-clipboard-copy-content="vim.g[&#34;codegpt_commands&#34;] = {
  [&#34;modernize&#34;] = {
      user_message_template = &#34;I have the following {{language}} code: ```{{filetype}}\n{{text_selection}}```\nModernize the above code. Use current best practices. Only return the code snippet and comments. {{language_instructions}}&#34;,
      language_instructions = {
          cpp = &#34;Refactor the code to use trailing return type, and the auto keyword where applicable.&#34;,
      },
  }
}"><pre>vim.<span>g</span>[<span><span>&#34;</span>codegpt_commands<span>&#34;</span></span>] <span>=</span> {
  [<span><span>&#34;</span>modernize<span>&#34;</span></span>] <span>=</span> {
      user_message_template <span>=</span> <span><span>&#34;</span>I have the following {{language}} code: ```{{filetype}}<span>\n</span>{{text_selection}}```<span>\n</span>Modernize the above code. Use current best practices. Only return the code snippet and comments. {{language_instructions}}<span>&#34;</span></span>,
      language_instructions <span>=</span> {
          cpp <span>=</span> <span><span>&#34;</span>Refactor the code to use trailing return type, and the auto keyword where applicable.<span>&#34;</span></span>,
      },
  }
}</pre></div>
<p dir="auto">The above configuration adds the command <code>:Chat modernize</code> that attempts modernize the selected code snippet.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-command-defaults" aria-hidden="true" href="#command-defaults"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Command Defaults</h2>
<p dir="auto">The default command configuration is</p>
<div dir="auto" data-snippet-clipboard-copy-content="{
    model = &#34;gpt-3.5-turbo&#34;,
    max_tokens = 4096,
    temperature = 0.6,
    number_of_choices = 1,
    system_message_template = &#34;&#34;,
    user_message_template = &#34;&#34;,
    callback_type = &#34;replace_lines&#34;,
}"><pre>{
    model <span>=</span> <span><span>&#34;</span>gpt-3.5-turbo<span>&#34;</span></span>,
    max_tokens <span>=</span> <span>4096</span>,
    temperature <span>=</span> <span>0.6</span>,
    number_of_choices <span>=</span> <span>1</span>,
    system_message_template <span>=</span> <span><span>&#34;</span><span>&#34;</span></span>,
    user_message_template <span>=</span> <span><span>&#34;</span><span>&#34;</span></span>,
    callback_type <span>=</span> <span><span>&#34;</span>replace_lines<span>&#34;</span></span>,
}</pre></div>
<h2 tabindex="-1" dir="auto"><a id="user-content-more-configuration-options" aria-hidden="true" href="#more-configuration-options"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>More Configuration Options</h2>
<h3 tabindex="-1" dir="auto"><a id="user-content-disable-wrapping-of-text-in-popup-window" aria-hidden="true" href="#disable-wrapping-of-text-in-popup-window"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Disable wrapping of text in popup window</h3>
<div dir="auto" data-snippet-clipboard-copy-content="-- Disables wrapping the text in the popup window. Default is true.
vim.g[&#34;codegpt_wrap_popup_text&#34;] = false"><pre><span><span>--</span> Disables wrapping the text in the popup window. Default is true.</span>
vim.<span>g</span>[<span><span>&#34;</span>codegpt_wrap_popup_text<span>&#34;</span></span>] <span>=</span> <span>false</span></pre></div>
<h3 tabindex="-1" dir="auto"><a id="user-content-move-completion-to-popup-window" aria-hidden="true" href="#move-completion-to-popup-window"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Move completion to popup window</h3>
<p dir="auto">For any command, you can override the callback type to move the completion to a popup window. An example below is for overring the <code>completion</code> command.</p>
<div dir="auto" data-snippet-clipboard-copy-content="require(&#34;codegpt.config&#34;)

vim.g[&#34;codegpt_commands&#34;] = {
[&#34;completion&#34;] = {
    callback_type = &#34;code_popup&#34;,
},
}"><pre><span>require</span>(<span><span>&#34;</span>codegpt.config<span>&#34;</span></span>)

vim.<span>g</span>[<span><span>&#34;</span>codegpt_commands<span>&#34;</span></span>] <span>=</span> {
[<span><span>&#34;</span>completion<span>&#34;</span></span>] <span>=</span> {
    callback_type <span>=</span> <span><span>&#34;</span>code_popup<span>&#34;</span></span>,
},
}</pre></div>
<h3 tabindex="-1" dir="auto"><a id="user-content-miscellaneous-configuration-options" aria-hidden="true" href="#miscellaneous-configuration-options"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Miscellaneous Configuration Options</h3>
<div dir="auto" data-snippet-clipboard-copy-content="
-- Open API key and api endpoint
vim.g[&#34;codegpt_openai_api_key&#34;] = os.getenv(&#34;OPENAI_API_KEY&#34;)
vim.g[&#34;codegpt_chat_completions_url&#34;] = &#34;https://api.openai.com/v1/chat/completions&#34;

-- clears visual selection after completion
vim.g[&#34;codegpt_clear_visual_selection&#34;] = true"><pre><span><span>--</span> Open API key and api endpoint</span>
vim.<span>g</span>[<span><span>&#34;</span>codegpt_openai_api_key<span>&#34;</span></span>] <span>=</span> <span>os.getenv</span>(<span><span>&#34;</span>OPENAI_API_KEY<span>&#34;</span></span>)
vim.<span>g</span>[<span><span>&#34;</span>codegpt_chat_completions_url<span>&#34;</span></span>] <span>=</span> <span><span>&#34;</span>https://api.openai.com/v1/chat/completions<span>&#34;</span></span>

<span><span>--</span> clears visual selection after completion</span>
vim.<span>g</span>[<span><span>&#34;</span>codegpt_clear_visual_selection<span>&#34;</span></span>] <span>=</span> <span>true</span></pre></div>
<h2 tabindex="-1" dir="auto"><a id="user-content-callback-types" aria-hidden="true" href="#callback-types"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Callback Types</h2>
<p dir="auto">Callback types controls what to do with the response</p>
<table>
<thead>
<tr>
<th>name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>replace_lines</td>
<td>replaces the current lines with the response. If no text is selected it will insert the response at the cursor.</td>
</tr>
<tr>
<td>text_popup</td>
<td>Will display the result in a text popup window.</td>
</tr>
<tr>
<td>code_popup</td>
<td>Will display the results in a popup window with the filetype set to the filetype of the current buffer</td>
</tr>
</tbody>
</table>
<h2 tabindex="-1" dir="auto"><a id="user-content-template-variables" aria-hidden="true" href="#template-variables"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Template Variables</h2>
<table>
<thead>
<tr>
<th>name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>language</td>
<td>Programming language of the current buffer.</td>
</tr>
<tr>
<td>filetype</td>
<td>filetype of the current buffer.</td>
</tr>
<tr>
<td>text_selection</td>
<td>Any selected text.</td>
</tr>
<tr>
<td>command_args</td>
<td>Command arguments.</td>
</tr>
<tr>
<td>filetype_instructions</td>
<td>filetype specific instructions.</td>
</tr>
</tbody>
</table>

<p dir="auto">Note CodeGPT should work without any configuration. This is an example configuration that shows some of the options available.</p>
<div dir="auto" data-snippet-clipboard-copy-content="
require(&#34;codegpt.config&#34;)

-- Override the default chat completions url, this is useful to override when testing custom commands
-- vim.g[&#34;codegpt_chat_completions_url&#34;] = &#34;http://127.0.0.1:800/test&#34;

vim.g[&#34;codegpt_commands&#34;] = {
  [&#34;tests&#34;] = {
    -- Language specific instructions for java filetype
    language_instructions = {
        java = &#34;Use the TestNG framework.&#34;,
    },
  },
  [&#34;doc&#34;] = {
    -- Language specific instructions for python filetype
    language_instructions = {
        python = &#34;Use the Google style docstrings.&#34;
    },

    -- Overrides the max tokens to be 1024
    max_tokens = 1024,
  },
  [&#34;code_edit&#34;] = {
    -- Overrides the system message template
    system_message_template = &#34;You are {{language}} developer.&#34;,

    -- Overrides the user message template
    user_message_template = &#34;I have the following {{language}} code: ```{{filetype}}\n{{text_selection}}```\nEdit the above code. {{language_instructions}}&#34;,

    -- Display the response in a popup window. The popup window filetype will be the filetype of the current buffer.
    callback_type = &#34;code_popup&#34;,
  },
  -- Custom command
  [&#34;modernize&#34;] = {
    user_message_template = &#34;I have the following {{language}} code: ```{{filetype}}\n{{text_selection}}```\nModernize the above code. Use current best practices. Only return the code snippet and comments. {{language_instructions}}&#34;,
    language_instructions = {
        cpp = &#34;Use modern C++ syntax. Use auto where possible. Do not import std. Use trailing return type. Use the c++11, c++14, c++17, and c++20 standards where applicable.&#34;,
    },
  }
}
"><pre><span>require</span>(<span><span>&#34;</span>codegpt.config<span>&#34;</span></span>)

<span><span>--</span> Override the default chat completions url, this is useful to override when testing custom commands</span>
<span><span>--</span> vim.g[&#34;codegpt_chat_completions_url&#34;] = &#34;http://127.0.0.1:800/test&#34;</span>

vim.<span>g</span>[<span><span>&#34;</span>codegpt_commands<span>&#34;</span></span>] <span>=</span> {
  [<span><span>&#34;</span>tests<span>&#34;</span></span>] <span>=</span> {
    <span><span>--</span> Language specific instructions for java filetype</span>
    language_instructions <span>=</span> {
        java <span>=</span> <span><span>&#34;</span>Use the TestNG framework.<span>&#34;</span></span>,
    },
  },
  [<span><span>&#34;</span>doc<span>&#34;</span></span>] <span>=</span> {
    <span><span>--</span> Language specific instructions for python filetype</span>
    language_instructions <span>=</span> {
        python <span>=</span> <span><span>&#34;</span>Use the Google style docstrings.<span>&#34;</span></span>
    },

    <span><span>--</span> Overrides the max tokens to be 1024</span>
    max_tokens <span>=</span> <span>1024</span>,
  },
  [<span><span>&#34;</span>code_edit<span>&#34;</span></span>] <span>=</span> {
    <span><span>--</span> Overrides the system message template</span>
    system_message_template <span>=</span> <span><span>&#34;</span>You are {{language}} developer.<span>&#34;</span></span>,

    <span><span>--</span> Overrides the user message template</span>
    user_message_template <span>=</span> <span><span>&#34;</span>I have the following {{language}} code: ```{{filetype}}<span>\n</span>{{text_selection}}```<span>\n</span>Edit the above code. {{language_instructions}}<span>&#34;</span></span>,

    <span><span>--</span> Display the response in a popup window. The popup window filetype will be the filetype of the current buffer.</span>
    callback_type <span>=</span> <span><span>&#34;</span>code_popup<span>&#34;</span></span>,
  },
  <span><span>--</span> Custom command</span>
  [<span><span>&#34;</span>modernize<span>&#34;</span></span>] <span>=</span> {
    user_message_template <span>=</span> <span><span>&#34;</span>I have the following {{language}} code: ```{{filetype}}<span>\n</span>{{text_selection}}```<span>\n</span>Modernize the above code. Use current best practices. Only return the code snippet and comments. {{language_instructions}}<span>&#34;</span></span>,
    language_instructions <span>=</span> {
        cpp <span>=</span> <span><span>&#34;</span>Use modern C++ syntax. Use auto where possible. Do not import std. Use trailing return type. Use the c++11, c++14, c++17, and c++20 standards where applicable.<span>&#34;</span></span>,
    },
  }
}
</pre></div>

<ul dir="auto">
<li>Code related usages</li>
<li>Simple</li>
<li>Easy to add custom commands</li>
</ul>
</article>
          </div></div>
  </body>
</html>
