<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://austinsnerdythings.com/2021/10/15/creating-an-autopilot-in-x-plane-using-python-part-1/">Original</a>
    <h1>Creating an autopilot in X-Plane using Python</h1>
    
    <div id="readability-page-1" class="page"><div>
<div>
<h2>Introduction</h2>
<p>Today’s post will take us in a slightly different direction than the last few. Today’s post will be about hooking up some Python code to the X-Plane flight simulator to enable development of an autopilot using PID (proportional-integral-derivative) controllers. I’ve been a fan of flight simulators for quite some time (I distinctly remember getting <a href="https://archive.org/details/msflightsimulator98" target="_blank" rel="noreferrer noopener">Microsoft Flight Simulator 98</a> for my birthday when I was like 8 or 9) but have only recently started working with interfacing them to code. X-Plane is a well-known flight simulator developed by another Austin – <a href="https://austinmeyer.com/" target="_blank" rel="noreferrer noopener">Austin Meyer</a>. It is regarded as having one of the best flight models and has tons of options for getting data into/out of the simulator. More than one FAA-certified simulator setups are running X-Plane as the primary driver software.</p>
<p>I got started thinking about writing some code for X-Plane while playing another game, Factorio. I drive a little plane or car in the game to get around my base and I just added a plug-in that “snaps” the vehicle to a heading, which makes it easier to go in straight lines. I thought – “hmm how hard could this be to duplicate in a flight sim?”. So here we are.</p>
<p>This post will get X-Plane hooked up to Python. The real programming will start with the <a href="https://austinsnerdythings.com/2021/10/19/coding-a-wing-leveler-autopilot-in-x-plane-with-python/">next post</a>.</p>
<p>Most recent post (added 2024-03-24) – <a href="https://austinsnerdythings.com/2024/03/24/adding-some-polish-to-the-x-plane-python-autopilot-with-flask-redis-and-websockets/">Adding some polish to the X-Plane Python Autopilot with Flask, Redis, and WebSockets</a></p>
<h2>Video Link</h2>
<figure><div>

</div></figure>
<h2>Contents</h2>
<ol>
<li>Download and install X-Plane (I used X-Plane 10 because it uses less resources than X-Plane 11 and we don’t need the graphics/scenery to look super pretty to do coding. It also loads faster.)</li>
<li>Download and install NASA’s XPlaneConnect X-Plane plug-in to X-Plane</li>
<li>Verify the XPlaneConnect plug-in is active in X-Plane</li>
<li>Download sample code from XPlaneConnect’s GitHub page</li>
<li>Run the sample script to verify data is being transmitted from X-Plane via UDP to the XPlaneConnect code</li>
</ol>
<h3>1 – Download and install X-Plane 10 or X-Plane 11</h3>
<p>I’ll leave this one up to you. X-Plane 10 is hard to find these days I just discovered. <a href="https://store.steampowered.com/app/269950/XPlane_11/" target="_blank" rel="noreferrer noopener">X-Plane 11 is available on Steam</a> for $59.99 as of writing. I just tested and the plug-in/code works fine on X-Plane 11 (but the flight models are definitely different and will need different PID values). My screenshots might jump between the two versions but the content/message will be the same.</p>
<h3>2 – Download and install NASA’s XPlaneConnect plug-in</h3>
<p>NASA (yes, that NASA, the National Aeronautics and Space Administration) has wrote a bunch of code to interface with X-Plane. They have adapters for C, C++, Java, Matlab, and Python. They work with X-Plane 9, 10, and 11.</p>
<ol>
<li>Download the latest version from the <a href="https://github.com/nasa/XPlaneConnect/releases" target="_blank" rel="noreferrer noopener">XPlaneConnect GitHub releases page</a>, <a href="https://github.com/nasa/XPlaneConnect/releases/download/v1.3-rc6/XPlaneConnect.zip" target="_blank" rel="noreferrer noopener">1.3 RC6</a> as of writing</li>
<li>Open the .zip and place the contents in the [X-Plane directory]/Resources/plugins folder. There are few other folders already present in this directory. Mine looked like this after adding the XPlaneConnect folder:</li>
</ol>
<figure><a href="https://austinsnerdythings.com/wp-content/uploads/2021/10/image-1.png"><img decoding="async" width="620" height="423" src="https://austinsnerdythings.com/wp-content/uploads/2021/10/image-1.png" alt="" srcset="https://austinsnerdythings.com/wp-content/uploads/2021/10/image-1.png 620w, https://austinsnerdythings.com/wp-content/uploads/2021/10/image-1-300x205.png 300w" sizes="(max-width: 620px) 100vw, 620px"/></a><figcaption>Screenshot of X-Plane 10 plugins directory with XPlaneConnect folder added</figcaption></figure>
<figure><a href="https://austinsnerdythings.com/wp-content/uploads/2021/10/image-2.png"><img decoding="async" width="636" height="294" src="https://austinsnerdythings.com/wp-content/uploads/2021/10/image-2.png" alt="" srcset="https://austinsnerdythings.com/wp-content/uploads/2021/10/image-2.png 636w, https://austinsnerdythings.com/wp-content/uploads/2021/10/image-2-300x139.png 300w" sizes="(max-width: 636px) 100vw, 636px"/></a><figcaption>Screenshot of X-Plane 11 plugins directory with XPlaneConnect folder added</figcaption></figure>
<h3>3 – Verify XPlaneConnect is active in X-Plane</h3>
<p>Now we’ll load up X-Plane and check the plug-ins to verify XPlaneConnect is enabled. Go to the top menu and select Plugins -&gt; Plugin Admin. You should see X-Plane Connect checked in the enabled column:</p>
<figure><a href="https://austinsnerdythings.com/wp-content/uploads/2021/10/image-3.png"><img loading="lazy" decoding="async" width="579" height="741" src="https://austinsnerdythings.com/wp-content/uploads/2021/10/image-3.png" alt="" srcset="https://austinsnerdythings.com/wp-content/uploads/2021/10/image-3.png 579w, https://austinsnerdythings.com/wp-content/uploads/2021/10/image-3-234x300.png 234w" sizes="(max-width: 579px) 100vw, 579px"/></a><figcaption>Screenshot showing XPlaneConnect plug-in active in X-Plane 11</figcaption></figure>
<figure><a href="https://austinsnerdythings.com/wp-content/uploads/2021/10/image-4.png"><img loading="lazy" decoding="async" width="342" height="379" src="https://austinsnerdythings.com/wp-content/uploads/2021/10/image-4.png" alt="" srcset="https://austinsnerdythings.com/wp-content/uploads/2021/10/image-4.png 342w, https://austinsnerdythings.com/wp-content/uploads/2021/10/image-4-271x300.png 271w" sizes="(max-width: 342px) 100vw, 342px"/></a><figcaption>Screenshot showing XPlaneConnect plug-in active in X-Plane 10</figcaption></figure>
<h3>4 – Download sample code from XPlaneConnect’s GitHub page</h3>
<p>From the <a href="https://github.com/nasa/XPlaneConnect/tree/master/Python3/src" target="_blank" rel="noreferrer noopener">Python3 portion of the GitHub code</a>, download <a href="https://github.com/nasa/XPlaneConnect/blob/master/Python3/src/xpc.py" target="_blank" rel="noreferrer noopener">xpc.py</a> and <a href="https://github.com/nasa/XPlaneConnect/blob/master/Python3/src/monitorExample.py" target="_blank" rel="noreferrer noopener">monitorExample.py</a> and stick them in your working directory (doesn’t matter where). For me, I just downloaded the entire git structure so the code is at C:\Users\Austin\source\repos\XPlaneConnect\Python3\src:</p>
<figure><a href="https://austinsnerdythings.com/wp-content/uploads/2021/10/image-5.png"><img loading="lazy" decoding="async" width="713" height="255" src="https://austinsnerdythings.com/wp-content/uploads/2021/10/image-5.png" alt="" srcset="https://austinsnerdythings.com/wp-content/uploads/2021/10/image-5.png 713w, https://austinsnerdythings.com/wp-content/uploads/2021/10/image-5-300x107.png 300w" sizes="(max-width: 713px) 100vw, 713px"/></a><figcaption>Screenshot showing xpc.py and monitorExample.py in my working directory</figcaption></figure>
<h3>5 – Run sample code to verify data is making it from X-Plane to our code</h3>
<p>With X-Plane running with a plane on a runway (or anywhere really), go ahead and run monitorExample.py! I will be using Visual Studio Code to program this XPlane Python autopilot stuff so that’s where I’ll run it from.</p>
<p>You will start seeing lines scroll by very fast with 6 pieces of information – latitude, longitude, elevation (in meters), and the control deflections for aileron, elevator, and rudder (normalized from -1 to 1, with 0 being centered). In the below screenshot, we see a lat/lon of 39.915, -105.128, with an elevation of 1719m. First one to tell me in the comments what runway that is wins internet points!</p>
<figure><a href="https://austinsnerdythings.com/wp-content/uploads/2021/10/image-7.png"><img loading="lazy" decoding="async" width="1024" height="721" src="https://austinsnerdythings.com/wp-content/uploads/2021/10/image-7-1024x721.png" alt="" srcset="https://austinsnerdythings.com/wp-content/uploads/2021/10/image-7-1024x721.png 1024w, https://austinsnerdythings.com/wp-content/uploads/2021/10/image-7-300x211.png 300w, https://austinsnerdythings.com/wp-content/uploads/2021/10/image-7-768x541.png 768w, https://austinsnerdythings.com/wp-content/uploads/2021/10/image-7-1536x1082.png 1536w, https://austinsnerdythings.com/wp-content/uploads/2021/10/image-7-1200x845.png 1200w, https://austinsnerdythings.com/wp-content/uploads/2021/10/image-7.png 1675w" sizes="(max-width: 1024px) 100vw, 1024px"/></a><figcaption>Screenshot showing Visual Studio Code running monitorExample.py in front of X-Plane 10 and the output scrolling by.</figcaption></figure>
<h2>Conclusion</h2>
<p>In this post, we have successfully downloaded the XPlaneConnect plug-in, and demonstrated that it can successfully interface with Python code in both X-Plane 10 and X-Plane 11.</p>
<p>Next up is to start controlling the plane with a basic wing leveler. As of writing this post, I have the following completely functional:</p>
<ul>
<li>Pitch / roll hold at reasonable angles (-25 to 25)</li>
<li>Altitude set and hold</li>
<li>Heading set and hold</li>
<li>Airspeed set and hold</li>
<li>Navigate directly to a lat/lon point</li>
</ul>
<p>See you at the next post! Next post – <a href="https://austinsnerdythings.com/2021/10/19/coding-a-wing-leveler-autopilot-in-x-plane-with-python/" target="_blank" rel="noreferrer noopener">Coding a wing leveler autopilot in X-Plane with Python</a></p>
<p><span></span> <span>Post Views:</span> <span>14,149</span>
</p>
</div>
</div></div>
  </body>
</html>
