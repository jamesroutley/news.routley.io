<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://johnzanussi.com/posts/diy-automated-christmas-tree-watering">Original</a>
    <h1>Show HN: Watering my Christmas tree with ESPHome</h1>
    
    <div id="readability-page-1" class="page"><article><section id="intro"><h2 id="h-intro">Intro</h2><p>I’m notoriously bad at watering the Christmas tree we bring into our house every year. I diligently water it for the first few days. Then I forget or get busy; a day or two goes by where I don’t water it, and the tree eventually dries out. By the time Christmas comes around, the tree is hanging on for dear life. Plus, even when I remember, getting under the tree is awkward, and I always spill water everywhere. A couple of years ago, I bought a <a href="https://amzn.to/49T0xfr" rel="noopener noreferrer" target="_blank">long funnel</a>, thinking that would make things easier, but it ended up being just as annoying and messy as not using one.</p><p>Amazon sells both <a href="https://amzn.to/3R3klnv" rel="noopener noreferrer" target="_blank">cheap siphoning and expensive pumping tree watering systems</a>. The <a href="https://amzn.to/46AEQ0M" rel="noopener noreferrer" target="_blank">one I like</a> the most is $100. It’s not necessarily a bad price if it lasts multiple years. However, thinking about how it works, I decided to try building something myself.</p></section><section id="tldr"><h2 id="h-tldr">TL;DR</h2><p>I used an Adafruit QT Py ESP32-C3 board, a capacitive moisture sensor, a cheap fountain pump, and a relay to create a self-watering system that wirelessly connects to my existing Home Assistant setup. All for about $20, not including parts and tools I already owned.</p><p>I know what you’re thinking…</p><blockquote><svg aria-label="quote-left icon" data-icon="fa6-solid:quote-left" height="1em" role="img" viewBox="0 0 448 512" width="0.88em"><symbol id="ai:fa6-solid:quote-left"><path d="M0 216C0 149.7 53.7 96 120 96h8c17.7 0 32 14.3 32 32s-14.3 32-32 32h-8c-30.9 0-56 25.1-56 56v8h64c35.3 0 64 28.7 64 64v64c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V216zm256 0c0-66.3 53.7-120 120-120h8c17.7 0 32 14.3 32 32s-14.3 32-32 32h-8c-30.9 0-56 25.1-56 56v8h64c35.3 0 64 28.7 64 64v64c0 35.3-28.7 64-64 64h-64c-35.3 0-64-28.7-64-64V216z" fill="currentColor"></path></symbol><use xlink:href="#ai:fa6-solid:quote-left"></use></svg><p>Do you really need your Christmas tree water pump to wirelessly connect to your home network?</p></blockquote><p><strong>No, absolutely not</strong>. But I had an ESP-32 board on hand, and, as you’ll see, <a href="https://esphome.io/index.html" rel="noopener noreferrer" target="_blank">ESPHome</a> made it incredibly easy to configure the microcontroller and set up the watering automation.</p></section><section id="parts-list"><h2 id="h-parts-list">Parts List</h2><ul><li><a href="https://www.adafruit.com/product/5405" rel="noopener noreferrer" target="_blank">Adafruit QT Py ESP32-C3 dev board</a> - $9.95</li><li><a href="https://amzn.to/49WIYuS" rel="noopener noreferrer" target="_blank">Capacitive Moisture Sensor</a> - $7.99 for 5 ($1.60/each)</li><li><a href="https://amzn.to/411BVwU" rel="noopener noreferrer" target="_blank">1/2 Inch PVC Clear Vinyl Tubing</a> - $6.88 for 10 feet</li><li><a href="https://amzn.to/3GmZ03D" rel="noopener noreferrer" target="_blank">Small Fountain Pump</a> - $8.99</li><li><a href="https://amzn.to/3Gl83Cf" rel="noopener noreferrer" target="_blank">Controllable Power Relay</a> - $29.95</li><li><a href="https://www.acehardware.com/departments/paint-and-supplies/painting-tools-and-supplies/paint-pails/1147461" rel="noopener noreferrer" target="_blank">5 Gallon Bucket</a> - $4.99</li><li><a href="https://www.printables.com/model/390867-adafruit-qt-py-esp32-c3-case-with-reset-and-second" rel="noopener noreferrer" target="_blank">3D Printed QT Py Case</a> - Free</li><li><a href="https://www.printables.com/model/666579-capacitive-moisture-sensor-magnet-mount" rel="noopener noreferrer" target="_blank">3D Printed Moisture Sensor Mount</a> - Free</li></ul><p>Total: <strong>$62.36</strong></p><p>I already had the QT Py ESP32-C3 and power relay from previous projects, so my total cost was only <strong>$22.46</strong>.</p></section><section id="circuit"><h2 id="h-circuit">Circuit</h2><p><img alt="Circuit diagram showing how the QT Py connects to the moisture sensor and smart power relay" decoding="async" height="900" loading="lazy" src="https://johnzanussi.com/_astro/diagram-esp32-moisture-sensor-relay.S8zNv8Ls_1IEHHy.webp" width="1600" sizes="(min-width: 1200px) 720px, (min-width: 780px) calc(100vw - 371px), calc(100vw - 32px)" srcset="/_astro/diagram-esp32-moisture-sensor-relay.S8zNv8Ls_Z1saJNW.webp 576w, /_astro/diagram-esp32-moisture-sensor-relay.S8zNv8Ls_B5jTq.webp 768w, /_astro/diagram-esp32-moisture-sensor-relay.S8zNv8Ls_Z2h6KWg.webp 992w, /_astro/diagram-esp32-moisture-sensor-relay.S8zNv8Ls_1YYude.webp 1200w, /_astro/diagram-esp32-moisture-sensor-relay.S8zNv8Ls_ZY0zjm.webp 1400w, /_astro/diagram-esp32-moisture-sensor-relay.S8zNv8Ls_1IEHHy.webp 1600w"/></p><p>The relay I’m using has four outlets on it and probably wouldn’t be my first option if I didn’t already have it as I’m only using two of the outlets and only need the one switched outlet.</p></section><section id="qt-py--capacitive-sensor"><h3 id="h-qt-py--capacitive-sensor">QT Py ↔ Capacitive Sensor</h3><p>The capacitive moisture sensor gets power from the QT Py via the <span>5v</span> and <span>GND</span> pins and sends its analog signal to the <span>A0</span> pin.</p></section><section id="qt-py--power-relay"><h3 id="h-qt-py--power-relay">QT Py ↔ Power Relay</h3><p>The QT Py connects to the relay via its <a href="https://www.adafruit.com/category/1005" rel="noopener noreferrer" target="_blank">STEMMA QT connector</a>. The connector has four pins, the <span>GND</span> and <span>GPIO 5</span> pins are used. When the QT Py sends a <span>3v</span> signal over the <span>GPIO 5</span> pin, the relay switches the “normally OFF” outlet on.</p><p>The QT Py plugs into the “always ON” outlet via a USB C cable and 5v power brick for constant power.</p></section><section id="power-relay--pump"><h3 id="h-power-relay--pump">Power Relay ↔ Pump</h3><p>The pump plugs into the “normally OFF” outlet, which, as the name states, is normally off until a <span>3v</span> signal provided by the microcontroller is detected, and then it switches on.</p><p><img alt="Overhead view of the power relay, QT Py, moisture sensor, pump, and tubing connected together" decoding="async" height="2250" loading="lazy" src="https://johnzanussi.com/_astro/complete-sensor-relay-microcontroller-pump.BtfkUYla_iAw2m.webp" width="3000" sizes="(min-width: 1200px) 720px, (min-width: 780px) calc(100vw - 371px), calc(100vw - 32px)" srcset="/_astro/complete-sensor-relay-microcontroller-pump.BtfkUYla_2hHQND.webp 576w, /_astro/complete-sensor-relay-microcontroller-pump.BtfkUYla_ZIdcgU.webp 768w, /_astro/complete-sensor-relay-microcontroller-pump.BtfkUYla_1sLPFk.webp 992w, /_astro/complete-sensor-relay-microcontroller-pump.BtfkUYla_1mai02.webp 1200w, /_astro/complete-sensor-relay-microcontroller-pump.BtfkUYla_Z1BOLwy.webp 1400w, /_astro/complete-sensor-relay-microcontroller-pump.BtfkUYla_tmhJM.webp 1600w"/></p></section><section id="esphome-config"><h2 id="h-esphome-config">ESPHome Config</h2><p>I’m going to skip over the instructions on setting up a device with ESPHome as there are a ton of tutorials and the <a href="https://esphome.io/index.html" rel="noopener noreferrer" target="_blank">ESPHome docs</a> that cover those steps in great detail. I have ESPHome running as part of my local <a href="https://www.home-assistant.io/" rel="noopener noreferrer" target="_blank">Home Assitant</a> instance and used that to compile the following config and flash it onto the QT Py.</p><div><figure><pre tabindex="0"><code><p><span>esphome</span><span>:</span></p><p><span>  </span><span>name</span><span>: </span><span>esphome-qtpy-c3-xmas-tree</span></p><p><span>  </span><span>friendly_name</span><span>: </span><span>esphome-qtpy-c3-xmas-tree</span></p><p><span>esp32</span><span>:</span></p><p><span>  </span><span>board</span><span>: </span><span>esp32-c3-devkitm-1</span></p><p><span>  </span><span>framework</span><span>:</span></p><p><span>    </span><span>type</span><span>: </span><span>arduino</span></p><p><span># Enable Home Assistant API</span></p><p><span>api</span><span>:</span></p><p><span>  </span><span>encryption</span><span>:</span></p><p><span>    </span><span>key</span><span>: </span><span>&#34;&#34;</span></p><p><span>ota</span><span>:</span></p><p><span>  </span><span>password</span><span>: </span><span>&#34;&#34;</span></p><p><span>wifi</span><span>:</span></p><p><span>  </span><span>ssid</span><span>: </span><span>!secret</span><span> </span><span>wifi_ssid</span></p><p><span>  </span><span>password</span><span>: </span><span>!secret</span><span> </span><span>wifi_password</span></p><p><span># Virtual Switch for controlling the pump</span></p><p><span>switch</span><span>:</span></p><p><span>  - </span><span>platform</span><span>: </span><span>gpio</span></p><p><span>    </span><span>pin</span><span>: </span><span>GPIO5</span><span> </span><span># SDA</span></p><p><span>    </span><span>name</span><span>: </span><span>&#34;Tree Pump&#34;</span></p><p><span>    </span><span>id</span><span>: </span><span>xmas_tree_pump</span></p><p><span>    </span><span>restore_mode</span><span>: </span><span>ALWAYS_OFF</span></p><p><span>    </span><span>icon</span><span>: </span><span>&#34;mdi:water-pump&#34;</span></p><p><span># Capacitive Moisture Sensor</span></p><p><span># Dry: 2.2V; Fully Submerged: 1.0V</span></p><p><span>sensor</span><span>:</span></p><p><span>  - </span><span>platform</span><span>: </span><span>adc</span><span> </span><span># ESPHome Analog To Digital Sensor</span></p><p><span>    </span><span>pin</span><span>: </span><span>A0</span><span> </span><span># A0 pin on the QT Py</span></p><p><span>    </span><span>name</span><span>: </span><span>&#34;Christmas Tree Water Sensor&#34;</span></p><p><span>    </span><span>id</span><span>: </span><span>xmas_tree_water_sensor</span></p><p><span>    </span><span>icon</span><span>: </span><span>&#34;mdi:pine-tree&#34;</span></p><p><span>    </span><span>update_interval</span><span>: </span><span>1s</span><span> </span><span># Update status every second</span></p><p><span>    </span><span>attenuation</span><span>: </span><span>auto</span></p><p><span>    </span><span>unit_of_measurement</span><span>: </span><span>&#34;%&#34;</span><span> </span><span># Default unit for adc is volts</span></p><p><span>    </span><span>filters</span><span>:</span></p><p><span>    - </span><span>median</span><span>:</span></p><p><span>        </span><span>window_size</span><span>: </span><span>3</span><span> </span><span># Combine 3 values</span></p><p><span>        </span><span>send_every</span><span>: </span><span>3</span><span> </span><span># Find and send the median after 3 values</span></p><p><span>    - </span><span>calibrate_linear</span><span>: </span><span># More on callibration below</span></p><p><span>        - </span><span>2.20 -&gt; 61.54</span></p><p><span>        - </span><span>1.00 -&gt; 100.00</span></p><p><span>    - </span><span>lambda</span><span>: </span><span>|</span><span> </span><span># Only return values between 0 and 100</span></p><p><span>        if (x &lt; 0) return 0;</span></p><p><span>        else if (x &gt; 100) return 100;</span></p><p><span>        else return (x);</span></p><p><span>    </span><span>accuracy_decimals</span><span>: </span><span>0</span></p><p><span>    </span><span>on_value_range</span><span>: </span><span># When water is below bottom of sensor</span></p><p><span>      - </span><span>below</span><span>: </span><span>62</span></p><p><span>        </span><span>then</span><span>:</span></p><p><span>          - </span><span>switch.turn_on</span><span>: </span><span>xmas_tree_pump</span><span>  </span><span># Turn on the pump</span></p><p><span>          - </span><span>wait_until</span><span>: </span><span># Wait until the sensor is above 90% or 10 seconds has passed</span></p><p><span>              </span><span>condition</span><span>:</span></p><p><span>                </span><span>sensor.in_range</span><span>:</span></p><p><span>                  </span><span>id</span><span>: </span><span>xmas_tree_water_sensor</span></p><p><span>                  </span><span>above</span><span>: </span><span>90</span></p><p><span>              </span><span>timeout</span><span>: </span><span>10s</span></p><p><span>          - </span><span>switch.turn_off</span><span>: </span><span>xmas_tree_pump</span><span> </span><span># Turn off pump</span></p></code></pre></figure></div><p>The config defines two devices. The first is a virtual switch with the id <code>xmas_tree_pump</code> that sends a <span>3v</span> signal over the <span>GPIO 5</span> pin when switched on.</p><p>The second device is a sensor with the id <code>xmas_tree_water_sensor</code> using the <code>adc</code> or Analog to Digital platform that reads its data from the <span>A0</span> pin. The time between updates is set to 1 second, and the unit of measurement is changed from volts to percentage.</p><p>Filters are applied to refine the incoming data by calculating the median, setting upper and lower limits, and calibrating to a scale, which I will write about below. Documentation for all the sections of the config I used is linked here.</p><ul><li><a href="https://esphome.io/components/sensor/adc.html" rel="noopener noreferrer" target="_blank"><code>adc</code>: Analog to Digital Sensor</a><ul><li><a href="https://esphome.io/components/sensor/index.html#sensor-filters" rel="noopener noreferrer" target="_blank"><code>filters</code>: Sensor Filters</a><ul><li><a href="https://esphome.io/components/sensor/index.html#median" rel="noopener noreferrer" target="_blank"><code>median</code></a></li><li><a href="https://esphome.io/components/sensor/index.html#calibrate-linear" rel="noopener noreferrer" target="_blank"><code>calibrate_linear</code></a></li><li><a href="https://esphome.io/components/sensor/index.html#lambda" rel="noopener noreferrer" target="_blank"><code>lambda</code></a></li></ul></li><li><a href="https://esphome.io/components/sensor/index.html#on-value-range" rel="noopener noreferrer" target="_blank"><code>on_value_range</code></a><ul><li><a href="https://esphome.io/guides/automations.html#wait-until-action" rel="noopener noreferrer" target="_blank"><code>wait_until</code></a><ul><li><a href="https://esphome.io/components/sensor/index.html?highlight=in_range#sensor-in-range-condition" rel="noopener noreferrer" target="_blank"><code>sensor.in_range</code></a></li></ul></li></ul></li></ul></li><li><a href="https://esphome.io/components/switch/gpio.html" rel="noopener noreferrer" target="_blank"><code>switch</code>: GPIO Switch</a></li></ul></section><section id="automation"><h3 id="h-automation">Automation</h3><div><figure><pre tabindex="0"><code><p><span>on_value_range</span><span>: </span><span># When water is below bottom of sensor</span></p><p><span>  - </span><span>below</span><span>: </span><span>62</span></p><p><span>    </span><span>then</span><span>:</span></p><p><span>      - </span><span>switch.turn_on</span><span>: </span><span>xmas_tree_pump</span><span>  </span><span># Turn on the pump</span></p><p><span>      - </span><span>wait_until</span><span>: </span><span># Wait until the sensor is above 90% or 10 seconds has passed</span></p><p><span>          </span><span>condition</span><span>:</span></p><p><span>            </span><span>sensor.in_range</span><span>:</span></p><p><span>              </span><span>id</span><span>: </span><span>xmas_tree_water_sensor</span></p><p><span>              </span><span>above</span><span>: </span><span>90</span></p><p><span>          </span><span>timeout</span><span>: </span><span>10s</span></p><p><span>      </span><span># - delay: 5s</span></p><p><span>      - </span><span>switch.turn_off</span><span>: </span><span>xmas_tree_pump</span><span> </span><span># Turn off pump</span></p></code></pre></figure></div><p>When the value of the sensor drops below <code>62%</code>, turn on the <code>xmas_tree_pump</code> switch. Wait until the sensor is either above <code>90%</code> or <code>10 seconds</code> have passed, then turn the <code>xmas_tree_pump</code> switch off.</p></section><section id="sensor-calibration"><h3 id="h-sensor-calibration">Sensor Calibration</h3><p>Before completing the filters and automation sections of the config I did some initial testing to determine the voltage values at different water levels on the sensor. As you might have read in the config comments, it measured <code>2.2v</code> when the sensor was dry and <code>1.0v</code> when fully submerged in water.</p><p>The height of the cylinder of my tree stand is 6.5 inches (16.5 cm). With the components of the moisture sensor above the water line, the measurable area of the sensor is about 2.5 inches (6.35cm) tall. The bottom of the sensor sits about 4 inches (10 cm) above the bottom of the cylinder.</p><p><img alt="Tree stand with a measuring tape and the moisture sensor clamped to the inside" decoding="async" height="2667" loading="lazy" src="https://johnzanussi.com/_astro/xmas-tree-base-sensor-measurement.vO3vy87D_Z1Q3SSn.webp" width="2000" sizes="(min-width: 1200px) 720px, (min-width: 780px) calc(100vw - 371px), calc(100vw - 32px)" srcset="/_astro/xmas-tree-base-sensor-measurement.vO3vy87D_Z1Ei758.webp 576w, /_astro/xmas-tree-base-sensor-measurement.vO3vy87D_oWWDf.webp 768w, /_astro/xmas-tree-base-sensor-measurement.vO3vy87D_Z2te8dr.webp 992w, /_astro/xmas-tree-base-sensor-measurement.vO3vy87D_UrjNz.webp 1200w, /_astro/xmas-tree-base-sensor-measurement.vO3vy87D_Z23xJI1.webp 1400w, /_astro/xmas-tree-base-sensor-measurement.vO3vy87D_2Djyk.webp 1600w"/></p><p>Doing some simple cross-multiplication, I figured out that when the water is at the bottom of the sensor (4 inches from the bottom of the cylinder), the cylinder is 62% full.</p><p><span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathsize="1.728em"><mfrac><mn>6.5</mn><mn>4</mn></mfrac><mo>=</mo><mfrac><mn>100</mn><mi>x</mi></mfrac><mspace height="1em" linebreak="newline"></mspace><mstyle mathsize="1.2em"><mi>x</mi><mo>=</mo><mn>61.53846154</mn></mstyle></mstyle></mrow><annotation encoding="application/x-tex">\LARGE\frac{6.5}{4} = \frac{100}{x}\\[1em]\large x = 61.53846154</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span></span><span><span><span><span><span><span></span><span><span><span>4</span></span></span></span><span><span></span><span></span></span><span><span></span><span><span><span>6.5</span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span><span></span></span><span></span><span>=</span><span></span></span><span><span></span><span><span></span><span><span><span><span><span><span></span><span><span><span>x</span></span></span></span><span><span></span><span></span></span><span><span></span><span><span><span>100</span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span><span></span></span></span><span></span><span><span></span><span>x</span><span></span><span>=</span><span></span></span><span><span></span><span>61.53846154</span></span></span></span></p><p>And we can map those values to the voltage readings from above.</p><div><table><thead><tr><th>Water Height</th><th>Fill Percentage</th><th>Voltage Reading</th></tr></thead><tbody><tr><td>6.5in (16.5cm)</td><td>100%</td><td>1.00 volts</td></tr><tr><td>4in (10cm)</td><td>62%</td><td>2.20 volts</td></tr><tr><td>0in (0cm)</td><td>0%</td><td>-</td></tr></tbody></table></div><p>Those values can be provided to the <a href="https://esphome.io/components/sensor/index.html#calibrate-linear" rel="noopener noreferrer" target="_blank"><code>calibrate_linear</code></a> filter in the config. Since the sensor doesn’t reach the bottom of the cylinder, there’s no way of knowing what the water level is if it’s below the sensor, but that shouldn’t matter as the automation starts pumping water once the water level falls below 62%, which is below the bottom of the sensor.</p><div><figure><pre tabindex="0"><code><p><span>- </span><span>calibrate_linear</span><span>:</span></p><p><span>    - </span><span>2.20 -&gt; 61.54</span></p><p><span>    - </span><span>1.00 -&gt; 100.00</span></p></code></pre></figure></div></section><section id="d-prints"><h2 id="h-d-prints">3D Prints</h2><p>I needed a way to mount the moisture sensor to the tree stand, so I turned to my ever-growing CAD and 3D printing skills. The requirements were simple:</p><ul><li>Keep the electronics above the water line</li><li>Keep the sensor part of the PCB below the water line</li><li>Easily removable</li></ul><p>This is what I came up with. The sensor friction fits into the print. I added a dab of hot glue to ensure it stays in place. I had some small magnets lying around, and the tree holder is metal, so it securely grabs the stand. You can download, print, and modify the model yourself on <a href="https://www.printables.com/model/666579-capacitive-moisture-sensor-magnet-mount" rel="noopener noreferrer" target="_blank">Printables.com</a>.</p><a href="https://www.printables.com/model/666579-capacitive-moisture-sensor-magnet-mount" rel="noopener noreferrer" target="_blank"><p><img alt="Different perspectives of the 3D printed moisture sensor mount" decoding="async" height="3000" loading="lazy" src="https://johnzanussi.com/_astro/printed-sensor-mount.sLEyF1MX_Z1hjPa7.webp" width="4000" sizes="(min-width: 1200px) 720px, (min-width: 780px) calc(100vw - 371px), calc(100vw - 32px)" srcset="/_astro/printed-sensor-mount.sLEyF1MX_209l12.webp 576w, /_astro/printed-sensor-mount.sLEyF1MX_Z10LI4w.webp 768w, /_astro/printed-sensor-mount.sLEyF1MX_1bdjRI.webp 992w, /_astro/printed-sensor-mount.sLEyF1MX_Z2taHRP.webp 1200w, /_astro/printed-sensor-mount.sLEyF1MX_ZmXDAu.webp 1400w, /_astro/printed-sensor-mount.sLEyF1MX_1IdpFQ.webp 1600w"/></p></a><p>The other 3D print is a simple case for the QT Py that someone else designed and <a href="https://www.printables.com/model/390867-adafruit-qt-py-esp32-c3-case-with-reset-and-second" rel="noopener noreferrer" target="_blank">uploaded to Printables</a>.</p></section><h2 id="final-product">Final Product</h2><p>The pump goes into the bucket, and the bucket goes into Santa’s toy bag to disguise it under the tree.</p><p><img alt="Fountain pump inside a 5 gallon bucket full of water" decoding="async" height="2142" loading="lazy" src="https://johnzanussi.com/_astro/tree-pump-and-bucket.AUVBuJC2_1DF9uA.webp" width="2856" sizes="(min-width: 1200px) 720px, (min-width: 780px) calc(100vw - 371px), calc(100vw - 32px)" srcset="/_astro/tree-pump-and-bucket.AUVBuJC2_1Cspbh.webp 576w, /_astro/tree-pump-and-bucket.AUVBuJC2_Z1nsDTh.webp 768w, /_astro/tree-pump-and-bucket.AUVBuJC2_Nwo2X.webp 992w, /_astro/tree-pump-and-bucket.AUVBuJC2_1f6OLA.webp 1200w, /_astro/tree-pump-and-bucket.AUVBuJC2_Z1ISeK0.webp 1400w, /_astro/tree-pump-and-bucket.AUVBuJC2_miOwl.webp 1600w"/></p><p>I used a zip tie to secure the vinyl tubing around the base of the tree. I also looped the tubing above a branch higher than the bucket’s water level to prevent any siphoning from happening.</p><p><img alt="Under a Christmas tree of the water tube and sensor attached to the base of the tree" decoding="async" height="2250" loading="lazy" src="https://johnzanussi.com/_astro/christmas-tree-pump-and-sensor.Q2IIoVPy_pGhUG.webp" width="3000" sizes="(min-width: 1200px) 720px, (min-width: 780px) calc(100vw - 371px), calc(100vw - 32px)" srcset="/_astro/christmas-tree-pump-and-sensor.Q2IIoVPy_UIxaX.webp 576w, /_astro/christmas-tree-pump-and-sensor.Q2IIoVPy_Z25cvTA.webp 768w, /_astro/christmas-tree-pump-and-sensor.Q2IIoVPy_6Mw2E.webp 992w, /_astro/christmas-tree-pump-and-sensor.Q2IIoVPy_Z7Sw6k.webp 1200w, /_astro/christmas-tree-pump-and-sensor.Q2IIoVPy_1Xixb1.webp 1400w, /_astro/christmas-tree-pump-and-sensor.Q2IIoVPy_Z10Gwlz.webp 1600w"/></p><p>At the time of writing, the setup has been running without issue for a few days. As you can see below, the water level slowly drops below the 62% threshold, and the pump turns on, fills up, and then turns off. There haven’t been any spills or overflows yet. I’m happy so far, but it’s still too soon to say if this will work long-term or if spending the $100 on the watering system from Amazon is the way to go.</p><p><img alt="Screenshot of a graph in Home Assistant showing the water level over time" decoding="async" height="1008" loading="lazy" src="https://johnzanussi.com/_astro/screenshot-home-assitant-christmas-tree-water-level.aF_QdWrf_ZBgRmN.webp" width="1181" sizes="(min-width: 1200px) 720px, (min-width: 780px) calc(100vw - 371px), calc(100vw - 32px)" srcset="/_astro/screenshot-home-assitant-christmas-tree-water-level.aF_QdWrf_rfBbh.webp 576w, /_astro/screenshot-home-assitant-christmas-tree-water-level.aF_QdWrf_2vvFTE.webp 768w, /_astro/screenshot-home-assitant-christmas-tree-water-level.aF_QdWrf_ZmFoW2.webp 992w, /_astro/screenshot-home-assitant-christmas-tree-water-level.aF_QdWrf_ZBgRmN.webp 1200w, /_astro/screenshot-home-assitant-christmas-tree-water-level.aF_QdWrf_ZBgRmN.webp 1400w, /_astro/screenshot-home-assitant-christmas-tree-water-level.aF_QdWrf_ZBgRmN.webp 1600w"/></p><p><img alt="Decorated Christmas tree" decoding="async" height="2856" loading="lazy" src="https://johnzanussi.com/_astro/christmas-tree-2023.EFXfpLkf_1B3Q93.webp" width="2142" sizes="(min-width: 1200px) 720px, (min-width: 780px) calc(100vw - 371px), calc(100vw - 32px)" srcset="/_astro/christmas-tree-2023.EFXfpLkf_qggbU.webp 576w, /_astro/christmas-tree-2023.EFXfpLkf_2uwkUi.webp 768w, /_astro/christmas-tree-2023.EFXfpLkf_ZnEJVo.webp 992w, /_astro/christmas-tree-2023.EFXfpLkf_ZlEIa3.webp 1200w, /_astro/christmas-tree-2023.EFXfpLkf_1Jwl7i.webp 1400w, /_astro/christmas-tree-2023.EFXfpLkf_Z1esIpi.webp 1600w"/></p><p>Disclosure: Some of the links above are affiliate links. This means that, at zero cost to you, I will earn an affiliate commission if you click through the link and finalize a purchase.</p><div><p>Found the above useful? Have a question? Thought of something I didn&#39;t?</p><p>Consider leaving a comment below or send me an email at johnzanussi@gmail.com.</p><p>You can also buy me a coffee. Cheers!</p><p><a href="https://www.buymeacoffee.com/johnzanussi" rel="noopener noreferrer" target="_blank"><img alt="Buy Me A Coffee" decoding="async" height="50" loading="lazy" src="https://cdn.buymeacoffee.com/buttons/v2/default-violet.png" width="180"/></a></p></div><nav aria-label="Post pagination"></nav></article></div>
  </body>
</html>
