<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://huggingface.co/01-ai/Yi-34B-Chat">Original</a>
    <h1>Yi-34B-Chat</h1>
    
    <div id="readability-page-1" class="page"><div>
						<div>
	<!-- HTML_TAG_START --><div>

<p>
<img src="https://github.com/01-ai/Yi/raw/main/assets/img/Yi.svg?sanitize=true" width="200px"/>
</p>

<p><a href="https://github.com/01-ai/Yi/issues" rel="noopener nofollow">
  <img src="https://img.shields.io/github/issues/01-ai/Yi?logo=github"/>
</a>
</p>

<p><a href="https://github.com/01-ai/Yi/actions/workflows/build_docker_image.yml" rel="noopener nofollow">
<img src="https://github.com/01-ai/Yi/actions/workflows/build_docker_image.yml/badge.svg"/>
</a>
</p>

<p><a href="https://huggingface.co/01-ai">
  <img src="https://img.shields.io/badge/%F0%9F%A4%97%20Hugging%20Face-01--ai-blue"/>
</a>
</p>

<p><a href="https://www.modelscope.cn/organization/01ai/" rel="noopener nofollow">
  <img src="https://img.shields.io/badge/ModelScope-01--ai-blue"/>
</a>
</p>

<p><a href="https://wisemodel.cn/organization/01.AI" rel="noopener nofollow">
  <img src="https://img.shields.io/badge/WiseModel-01--ai-blue"/>
</a>
</p>

<p><a href="https://replicate.com/01-ai" rel="noopener nofollow">
  <img src="https://img.shields.io/badge/Replicate-01--ai-blue?logo=data:image/svg%2bxml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMTAwMCAxMDAwIiBjbGFzcz0ibG9nbyIgZmlsbD0iY3VycmVudENvbG9yIiB4bWw6c3BhY2U9InByZXNlcnZlIj4KICA8Zz4KICAgIDxwb2x5Z29uIHBvaW50cz0iMTAwMCw0MjcuNiAxMDAwLDU0MC42IDYwMy40LDU0MC42IDYwMy40LDEwMDAgNDc3LDEwMDAgNDc3LDQyNy42IAkiPjwvcG9seWdvbj4KICAgIDxwb2x5Z29uIHBvaW50cz0iMTAwMCwyMTMuOCAxMDAwLDMyNyAzNjQuOCwzMjcgMzY0LjgsMTAwMCAyMzguNCwxMDAwIDIzOC40LDIxMy44IAkiPjwvcG9seWdvbj4KICAgIDxwb2x5Z29uIHBvaW50cz0iMTAwMCwwIDEwMDAsMTEzLjIgMTI2LjQsMTEzLjIgMTI2LjQsMTAwMCAwLDEwMDAgMCwwIAkiPjwvcG9seWdvbj4KICA8L2c+Cjwvc3ZnPg=="/>
</a>
</p>

<p><a href="https://github.com/01-ai/Yi/blob/main/LICENSE" rel="noopener nofollow">
  <img src="https://img.shields.io/badge/Code_License-Apache_2.0-lightblue"/>
</a>
</p>

<p><a href="https://github.com/01-ai/Yi/blob/main/MODEL_LICENSE_AGREEMENT.txt" rel="noopener nofollow">
  <img src="https://img.shields.io/badge/Model_License-Model_Agreement-lightblue"/>
</a>
</p>

<p><a href="mailto:oss@01.ai" rel="noopener nofollow">
  <img src="https://img.shields.io/badge/✉️-yi@01.ai-FFE01B"/>
</a>
</p>

</div>

<h2>
	<a rel="noopener nofollow" href="#introduction" id="introduction">
		<span><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		Introduction
	</span>
</h2>
<p>The <strong>Yi</strong> series models are large language models trained from scratch by
developers at <a rel="noopener nofollow" href="https://01.ai/">01.AI</a>.</p>
<h2>
	<a rel="noopener nofollow" href="#news" id="news">
		<span><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		News
	</span>
</h2>
<details open="">
<summary>🎯 <b>2023/11/23</b>: The chat models are open to public.</summary>

<p>This release contains two chat models based on previous released base models, two 8-bits models quantized by GPTQ, two 4-bits models quantized by AWQ.</p>
<ul>
<li><code>Yi-34B-Chat</code></li>
<li><code>Yi-34B-Chat-4bits</code></li>
<li><code>Yi-34B-Chat-8bits</code></li>
<li><code>Yi-6B-Chat</code></li>
<li><code>Yi-6B-Chat-4bits</code></li>
<li><code>Yi-6B-Chat-8bits</code></li>
</ul>
<p>You can try some of them interactively at:</p>
<ul>
<li><a rel="noopener nofollow" href="https://huggingface.co/spaces/01-ai/Yi-34B-Chat">HuggingFace</a></li>
<li><a rel="noopener nofollow" href="https://replicate.com/01-ai">Replicate</a></li></ul></details>

<details open="">
<summary>🔔 <b>2023/11/23</b>: The Yi Series Models Community License Agreement is updated to v2.1.</summary>
</details>

<details>
<summary>🔥 <b>2023/11/08</b>: Invited test of Yi-34B chat model.</summary>

<p>Application form:</p>
<ul>
<li><a rel="noopener nofollow" href="https://cn.mikecrm.com/l91ODJf">English</a></li>
<li><a rel="noopener nofollow" href="https://cn.mikecrm.com/gnEZjiQ">Chinese</a></li>
</ul>
</details>

<details>
<summary>🎯 <b>2023/11/05</b>: The base model of <code>Yi-6B-200K</code> and <code>Yi-34B-200K</code>.</summary>

<p>This release contains two base models with the same parameter sizes of previous
release, except that the context window is extended to 200K.</p>
</details>

<details>
<summary>🎯 <b>2023/11/02</b>: The base model of <code>Yi-6B</code> and <code>Yi-34B</code>.</summary>

<p>The first public release contains two bilingual (English/Chinese) base models
with the parameter sizes of 6B and 34B.  Both of them are trained with 4K
sequence length and can be extended to 32K during inference time.</p>
</details>

<h2>
	<a rel="noopener nofollow" href="#model-performance" id="model-performance">
		<span><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		Model Performance
	</span>
</h2>
<h3>
	<a rel="noopener nofollow" href="#base-model-performance" id="base-model-performance">
		<span><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		Base Model Performance
	</span>
</h3>
<div>
	<table>
		<thead><tr>
<th>Model</th>
<th>MMLU</th>
<th>CMMLU</th>
<th>C-Eval</th>
<th>GAOKAO</th>
<th>BBH</th>
<th>Common-sense Reasoning</th>
<th>Reading Comprehension</th>
<th>Math &amp; Code</th>
</tr>

		</thead><tbody><tr>
<td></td>
<td>5-shot</td>
<td>5-shot</td>
<td>5-shot</td>
<td>0-shot</td>
<td>3-shot@1</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>LLaMA2-34B</td>
<td>62.6</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>44.1</td>
<td>69.9</td>
<td>68.0</td>
<td>26.0</td>
</tr>
<tr>
<td>LLaMA2-70B</td>
<td>68.9</td>
<td>53.3</td>
<td>-</td>
<td>49.8</td>
<td>51.2</td>
<td>71.9</td>
<td>69.4</td>
<td>36.8</td>
</tr>
<tr>
<td>Baichuan2-13B</td>
<td>59.2</td>
<td>62.0</td>
<td>58.1</td>
<td>54.3</td>
<td>48.8</td>
<td>64.3</td>
<td>62.4</td>
<td>23.0</td>
</tr>
<tr>
<td>Qwen-14B</td>
<td>66.3</td>
<td>71.0</td>
<td>72.1</td>
<td>62.5</td>
<td>53.4</td>
<td>73.3</td>
<td>72.5</td>
<td><strong>39.8</strong></td>
</tr>
<tr>
<td>Skywork-13B</td>
<td>62.1</td>
<td>61.8</td>
<td>60.6</td>
<td>68.1</td>
<td>41.7</td>
<td>72.4</td>
<td>61.4</td>
<td>24.9</td>
</tr>
<tr>
<td>InternLM-20B</td>
<td>62.1</td>
<td>59.0</td>
<td>58.8</td>
<td>45.5</td>
<td>52.5</td>
<td>78.3</td>
<td>-</td>
<td>30.4</td>
</tr>
<tr>
<td>Aquila-34B</td>
<td>67.8</td>
<td>71.4</td>
<td>63.1</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>Falcon-180B</td>
<td>70.4</td>
<td>58.0</td>
<td>57.8</td>
<td>59.0</td>
<td>54.0</td>
<td>77.3</td>
<td>68.8</td>
<td>34.0</td>
</tr>
<tr>
<td>Yi-6B</td>
<td>63.2</td>
<td>75.5</td>
<td>72.0</td>
<td>72.2</td>
<td>42.8</td>
<td>72.3</td>
<td>68.7</td>
<td>19.8</td>
</tr>
<tr>
<td>Yi-6B-200K</td>
<td>64.0</td>
<td>75.3</td>
<td>73.5</td>
<td>73.9</td>
<td>42.0</td>
<td>72.0</td>
<td>69.1</td>
<td>19.0</td>
</tr>
<tr>
<td><strong>Yi-34B</strong></td>
<td><strong>76.3</strong></td>
<td><strong>83.7</strong></td>
<td>81.4</td>
<td>82.8</td>
<td><strong>54.3</strong></td>
<td><strong>80.1</strong></td>
<td>76.4</td>
<td>37.1</td>
</tr>
<tr>
<td>Yi-34B-200K</td>
<td>76.1</td>
<td>83.6</td>
<td><strong>81.9</strong></td>
<td><strong>83.4</strong></td>
<td>52.7</td>
<td>79.7</td>
<td><strong>76.6</strong></td>
<td>36.3</td>
</tr>
</tbody>
	</table>
</div>
<p>While benchmarking open-source models, we have observed a disparity between the
results generated by our pipeline and those reported in public sources (e.g.
OpenCompass). Upon conducting a more in-depth investigation of this difference,
we have discovered that various models may employ different prompts,
post-processing strategies, and sampling techniques, potentially resulting in
significant variations in the outcomes. Our prompt and post-processing strategy
remains consistent with the original benchmark, and greedy decoding is employed
during evaluation without any post-processing for the generated content. For
scores that were not reported by the original authors (including scores reported
with different settings), we try to get results with our pipeline.</p>
<p>To evaluate the model&#39;s capability extensively, we adopted the methodology
outlined in Llama2. Specifically, we included PIQA, SIQA, HellaSwag, WinoGrande,
ARC, OBQA, and CSQA to assess common sense reasoning. SquAD, QuAC, and BoolQ
were incorporated to evaluate reading comprehension. CSQA was exclusively tested
using a 7-shot setup, while all other tests were conducted with a 0-shot
configuration. Additionally, we introduced GSM8K (8-shot@1), MATH (4-shot@1),
HumanEval (0-shot@1), and MBPP (3-shot@1) under the category &#34;Math &amp; Code&#34;. Due
to technical constraints, we did not test Falcon-180 on QuAC and OBQA; the score
is derived by averaging the scores on the remaining tasks. Since the scores for
these two tasks are generally lower than the average, we believe that
Falcon-180B&#39;s performance was not underestimated.</p>
<h3>
	<a rel="noopener nofollow" href="#chat-model-performance" id="chat-model-performance">
		<span><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		Chat Model Performance
	</span>
</h3>
<div>
	<table>
		<thead><tr>
<th>Model</th>
<th>MMLU</th>
<th>MMLU</th>
<th>CMMLU</th>
<th>CMMLU</th>
<th>C-Eval(val)<sup>*</sup></th>
<th>C-Eval(val)<sup>*</sup></th>
<th>Truthful QA</th>
<th>BBH</th>
<th>BBH</th>
<th>GSM8k</th>
<th>GSM8k</th>
</tr>

		</thead><tbody><tr>
<td></td>
<td>0-shot</td>
<td>5-shot</td>
<td>0-shot</td>
<td>5-shot</td>
<td>0-shot</td>
<td>5-shot</td>
<td>0-shot</td>
<td>0-shot</td>
<td>3-shot</td>
<td>0-shot</td>
<td>4-shot</td>
</tr>
<tr>
<td>LLaMA2-13B-Chat</td>
<td>50.88</td>
<td>47.33</td>
<td>27.47</td>
<td>35.08</td>
<td>27.93</td>
<td>35.88</td>
<td>36.84</td>
<td>32.90</td>
<td>58.22</td>
<td>36.85</td>
<td>2.73</td>
</tr>
<tr>
<td>LLaMA2-70B-Chat</td>
<td>59.42</td>
<td>59.86</td>
<td>36.10</td>
<td>40.99</td>
<td>34.99</td>
<td>41.31</td>
<td>53.95</td>
<td>42.36</td>
<td>58.53</td>
<td>47.08</td>
<td>58.68</td>
</tr>
<tr>
<td>Baichuan2-13B-Chat</td>
<td>55.09</td>
<td>50.14</td>
<td>58.64</td>
<td>59.47</td>
<td>56.02</td>
<td>54.75</td>
<td>48.98</td>
<td>38.81</td>
<td>47.15</td>
<td>45.72</td>
<td>23.28</td>
</tr>
<tr>
<td>Qwen-14B-Chat</td>
<td>63.99</td>
<td>64.98</td>
<td>67.73</td>
<td>70.57</td>
<td>66.12</td>
<td>70.06</td>
<td>52.49</td>
<td>49.65</td>
<td>54.98</td>
<td>59.51</td>
<td>61.18</td>
</tr>
<tr>
<td>InternLM-Chat-20B</td>
<td>55.55</td>
<td>57.42</td>
<td>53.55</td>
<td>53.75</td>
<td>51.19</td>
<td>53.57</td>
<td>51.75</td>
<td>42.41</td>
<td>36.68</td>
<td>15.69</td>
<td>43.44</td>
</tr>
<tr>
<td>AquilaChat2-34B v1.2</td>
<td>65.15</td>
<td>66.70</td>
<td>67.51</td>
<td>70.02</td>
<td><strong>82.99</strong></td>
<td><strong>89.38</strong></td>
<td><strong>64.33</strong></td>
<td>20.12</td>
<td>34.28</td>
<td>11.52</td>
<td>48.45</td>
</tr>
<tr>
<td>Yi-6B-Chat</td>
<td>58.24</td>
<td>60.99</td>
<td>69.44</td>
<td>74.71</td>
<td>68.80</td>
<td>74.22</td>
<td>50.58</td>
<td>39.70</td>
<td>47.15</td>
<td>38.44</td>
<td>44.88</td>
</tr>
<tr>
<td>Yi-6B-Chat-8bits(GPTQ)</td>
<td>58.29</td>
<td>60.96</td>
<td>69.21</td>
<td>74.69</td>
<td>69.17</td>
<td>73.85</td>
<td>49.85</td>
<td>40.35</td>
<td>47.26</td>
<td>39.42</td>
<td>44.88</td>
</tr>
<tr>
<td>Yi-6B-Chat-4bits(AWQ)</td>
<td>56.78</td>
<td>59.89</td>
<td>67.70</td>
<td>73.29</td>
<td>67.53</td>
<td>72.29</td>
<td>50.29</td>
<td>37.74</td>
<td>43.62</td>
<td>35.71</td>
<td>38.36</td>
</tr>
<tr>
<td>Yi-34B-Chat</td>
<td><strong>67.62</strong></td>
<td>73.46</td>
<td><strong>79.11</strong></td>
<td><strong>81.34</strong></td>
<td>77.04</td>
<td>78.53</td>
<td>62.43</td>
<td>51.41</td>
<td><strong>71.74</strong></td>
<td><strong>71.65</strong></td>
<td><strong>75.97</strong></td>
</tr>
<tr>
<td>Yi-34B-Chat-8bits(GPTQ)</td>
<td>66.24</td>
<td><strong>73.69</strong></td>
<td>79.05</td>
<td>81.23</td>
<td>76.82</td>
<td>78.97</td>
<td>61.84</td>
<td><strong>52.08</strong></td>
<td>70.97</td>
<td>70.74</td>
<td>75.74</td>
</tr>
<tr>
<td>Yi-34B-Chat-4bits(AWQ)</td>
<td>65.77</td>
<td>72.42</td>
<td>78.21</td>
<td>80.50</td>
<td>75.71</td>
<td>77.27</td>
<td>61.84</td>
<td>48.30</td>
<td>69.39</td>
<td>70.51</td>
<td>74.00</td>
</tr>
</tbody>
	</table>
</div>
<p>We evaluated various benchmarks using both zero-shot and few-shot methods, except for TruthfulQA. Generally, the zero-shot approach is more common in chat models. Our evaluation strategy involves generating responses while following instructions explicitly or implicitly (such as using few-shot examples). We then isolate relevant answers from the generated text. Some models are not well-suited to produce output in the specific format required by instructions in few datasets, which leads to suboptimal results. </p>
<p><strong>*</strong>: C-Eval results are evaluated on the validation datasets</p>
<h3>
	<a rel="noopener nofollow" href="#quantized-chat-model-performance" id="quantized-chat-model-performance">
		<span><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		Quantized Chat Model Performance
	</span>
</h3>
<p>We also provide both 4-bit (AWQ) and 8-bit (GPTQ) quantized Yi chat models. Evaluation results on various benchmarks have shown that the quantized models have negligible losses. Additionally, they reduce the memory footprint size. After testing different configurations of prompts and generation lengths, we highly recommend following the guidelines in the memory footprint table below when selecting a device to run our models.</p>
<div>
	<table>
		<thead><tr>
<th></th>
<th>batch=1</th>
<th>batch=4</th>
<th>batch=16</th>
<th>batch=32</th>
</tr>

		</thead><tbody><tr>
<td>Yi-34B-Chat</td>
<td>65GiB</td>
<td>68GiB</td>
<td>76GiB</td>
<td>&gt;80GiB</td>
</tr>
<tr>
<td>Yi-34B-Chat-8bits(GPTQ)</td>
<td>35GiB</td>
<td>37GiB</td>
<td>46GiB</td>
<td>58GiB</td>
</tr>
<tr>
<td>Yi-34B-Chat-4bits(AWQ)</td>
<td>19GiB</td>
<td>20GiB</td>
<td>30GiB</td>
<td>40GiB</td>
</tr>
<tr>
<td>Yi-6B-Chat</td>
<td>12GiB</td>
<td>13GiB</td>
<td>15GiB</td>
<td>18GiB</td>
</tr>
<tr>
<td>Yi-6B-Chat-8bits(GPTQ)</td>
<td>7GiB</td>
<td>8GiB</td>
<td>10GiB</td>
<td>14GiB</td>
</tr>
<tr>
<td>Yi-6B-Chat-4bits(AWQ)</td>
<td>4GiB</td>
<td>5GiB</td>
<td>7GiB</td>
<td>10GiB</td>
</tr>
</tbody>
	</table>
</div>
<p>Note: All the numbers in the table represent the minimum recommended memory for running models of the corresponding size.</p>
<h3>
	<a rel="noopener nofollow" href="#limitations-of-chat-model" id="limitations-of-chat-model">
		<span><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		Limitations of Chat Model
	</span>
</h3>
<p>The released chat model has undergone exclusive training using Supervised Fine-Tuning (SFT). Compared to other standard chat models, our model produces more diverse responses, making it suitable for various downstream tasks, such as creative scenarios. Furthermore, this diversity is expected to enhance the likelihood of generating higher quality responses, which will be advantageous for subsequent Reinforcement Learning (RL) training.</p>
<p>However, this higher diversity might amplify certain existing issues, including:</p>
<ul>
<li><strong>Hallucination</strong>: This refers to the model generating factually incorrect or nonsensical information. With the model&#39;s responses being more varied, there&#39;s a higher chance of hallucination that are not based on accurate data or logical reasoning.</li>
<li><strong>Non-determinism in re-generation</strong>: When attempting to regenerate or sample responses, inconsistencies in the outcomes may occur. The increased diversity can lead to varying results even under similar input conditions.</li>
<li><strong>Cumulative Error</strong>: This occurs when errors in the model&#39;s responses compound over time. As the model generates more diverse responses, the likelihood of small inaccuracies building up into larger errors increases, especially in complex tasks like extended reasoning, mathematical problem-solving, etc.</li>
</ul>
<p>To achieve more coherent and consistent responses, it is advisable to adjust generation configuration parameters such as<code>temperature</code>,<code>top_p</code>, or<code>top_k</code>. These adjustments can help in the balance between creativity and coherence in the model&#39;s outputs.</p>
<h2>
	<a rel="noopener nofollow" href="#usage" id="usage">
		<span><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		Usage
	</span>
</h2>
<p>Feel free to <a rel="noopener nofollow" href="https://github.com/01-ai/Yi/issues/new">create an issue</a> if you
encounter any problem when using the <strong>Yi</strong> series models.</p>
<h3>
	<a rel="noopener nofollow" href="#1-prepare-development-environment" id="1-prepare-development-environment">
		<span><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		1. Prepare development environment
	</span>
</h3>
<h4>
	<a rel="noopener nofollow" href="#11-docker" id="11-docker">
		<span><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		1.1 Docker
	</span>
</h4>
<p>The best approach to try the <strong>Yi</strong> series models is through Docker with GPUs. We
provide the following docker images to help you get started.</p>
<ul>
<li><code>registry.lingyiwanwu.com/ci/01-ai/yi:latest</code></li>
<li><code>ghcr.io/01-ai/yi:latest</code></li>
</ul>
<p>Note that the <code>latest</code> tag always points to the latest code in the <code>main</code>
branch. To test a stable version, please replace it with a specific
<a rel="noopener nofollow" href="https://github.com/01-ai/Yi/tags">tag</a>.</p>
<h4>
	<a rel="noopener nofollow" href="#12-local-development-environment" id="12-local-development-environment">
		<span><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		1.2 Local development environment
	</span>
</h4>
<p>We use <a rel="noopener nofollow" href="https://github.com/conda/conda-lock"><code>conda-lock</code></a> to generate fully reproducible lock files for conda environments. You can refer to <a rel="noopener nofollow" href="http://tinylogger.com/01-ai/Yi-34B-Chat/blob/main/conda-lock.yml">conda-lock.yml</a> for the exact versions of the dependencies. Additionally, we utilize <a rel="noopener nofollow" href="https://mamba.readthedocs.io/en/latest/user_guide/micromamba.html"><code>micromamba</code></a> for installing these dependencies.</p>
<p>To install the dependencies, please follow these steps:</p>
<ol>
<li>Install <code>micromamba</code> by following the instructions available <a rel="noopener nofollow" href="https://mamba.readthedocs.io/en/latest/installation/micromamba-installation.html">here</a>.</li>
<li>Execute <code>micromamba install -y -n yi -f conda-lock.yml</code> to create a conda environment named <code>yi</code> and install the necessary dependencies.</li>
</ol>
<h3>
	<a rel="noopener nofollow" href="#2-download-the-model-optional" id="2-download-the-model-optional">
		<span><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		2. Download the model (optional)
	</span>
</h3>
<p>By default, the model weights and tokenizer will be downloaded from
<a rel="noopener nofollow" href="https://huggingface.co/01-ai">HuggingFace</a> automatically in the next step. You
can also download them manually from the following places:</p>
<ul>
<li><a rel="noopener nofollow" href="https://www.modelscope.cn/organization/01ai/">ModelScope</a></li>
<li><a rel="noopener nofollow" href="https://wisemodel.cn/organization/01.AI">WiseModel</a></li>
</ul>
<h3>
	<a rel="noopener nofollow" href="#3-examples" id="3-examples">
		<span><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		3. Examples
	</span>
</h3>
<h4>
	<a rel="noopener nofollow" href="#31-use-the-chat-model" id="31-use-the-chat-model">
		<span><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		3.1 Use the chat model
	</span>
</h4>
<pre><code><span>from</span> transformers <span>import</span> AutoModelForCausalLM, AutoTokenizer

model_path = <span>&#39;01-ai/Yi-34b-Chat&#39;</span>

tokenizer = AutoTokenizer.from_pretrained(model_path, use_fast=<span>False</span>)

<span># Since transformers 4.35.0, the GPT-Q/AWQ model can be loaded using AutoModelForCausalLM.</span>
model = AutoModelForCausalLM.from_pretrained(
    model_path,
    device_map=<span>&#34;auto&#34;</span>,
    torch_dtype=<span>&#39;auto&#39;</span>
).<span>eval</span>()

<span># Prompt content: &#34;hi&#34;</span>
messages = [
    {<span>&#34;role&#34;</span>: <span>&#34;user&#34;</span>, <span>&#34;content&#34;</span>: <span>&#34;hi&#34;</span>}
]

input_ids = tokenizer.apply_chat_template(conversation=messages, tokenize=<span>True</span>, add_generation_prompt=<span>True</span>, return_tensors=<span>&#39;pt&#39;</span>)
output_ids = model.generate(input_ids.to(<span>&#39;cuda&#39;</span>))
response = tokenizer.decode(output_ids[<span>0</span>][input_ids.shape[<span>1</span>]:], skip_special_tokens=<span>True</span>)

<span># Model response: &#34;Hello! How can I assist you today?&#34;</span>
<span>print</span>(response)
</code></pre>
<p>To construct the prompt template manually, you can refer the <code>chat_template</code> field in the <code>tokenizer_config.json</code> <a rel="noopener nofollow" href="https://huggingface.co/01-ai/Yi-34B-Chat/blob/main/tokenizer_config.json#L60">file</a>.</p>
<pre><code>&lt;|im_start|&gt;system
{system_message}&lt;|im_end|&gt;
&lt;|im_start|&gt;user
{prompt}&lt;|im_end|&gt;
&lt;|im_start|&gt;assistant
</code></pre>
<h4>
	<a rel="noopener nofollow" href="#32-use-the-base-model" id="32-use-the-base-model">
		<span><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		3.2 Use the base model
	</span>
</h4>
<pre><code>python demo/text_generation.py
</code></pre>
<p>To reuse the downloaded models in the previous step, you can provide the extra
<code>--model</code> argument:</p>
<pre><code>python demo/text_generation.py  --model /path/to/model
</code></pre>
<p>Or if you&#39;d like to get your hands dirty:</p>
<pre><code><span>from</span> transformers <span>import</span> AutoModelForCausalLM, AutoTokenizer

model = AutoModelForCausalLM.from_pretrained(<span>&#34;01-ai/Yi-34B&#34;</span>, device_map=<span>&#34;auto&#34;</span>, torch_dtype=<span>&#34;auto&#34;</span>)
tokenizer = AutoTokenizer.from_pretrained(<span>&#34;01-ai/Yi-34B&#34;</span>)
inputs = tokenizer(<span>&#34;There&#39;s a place where time stands still. A place of breath taking wonder, but also&#34;</span>, return_tensors=<span>&#34;pt&#34;</span>)
max_length = <span>256</span>

outputs = model.generate(
    inputs.input_ids.cuda(),
    max_length=max_length,
    eos_token_id=tokenizer.eos_token_id,
    do_sample=<span>True</span>,
    repetition_penalty=<span>1.3</span>,
    no_repeat_ngram_size=<span>5</span>,
    temperature=<span>0.7</span>,
    top_k=<span>40</span>,
    top_p=<span>0.8</span>,
)
<span>print</span>(tokenizer.decode(outputs[<span>0</span>], skip_special_tokens=<span>True</span>))
</code></pre>
<details>

<summary>Output</summary>

<p><strong>Prompt</strong>: There&#39;s a place where time stands still. A place of breath taking wonder, but also</p>
<p><strong>Generation</strong>: There&#39;s a place where time stands still. A place of breath taking wonder, but also of great danger. A place where the very air you breathe could kill you. A place where the only way to survive is to be prepared.
The place is called the Arctic.
The Arctic is a vast, frozen wilderness. It is a place of extremes. The temperatures can drop to -40 degrees Celsius. The winds can reach speeds of 100 kilometers per hour. The sun can shine for 24 hours a day, or not at all for weeks on end.
The Arctic is also a place of great beauty. The ice and snow are a pristine white. The sky is a deep blue. The sunsets are spectacular.
But the Arctic is also a place of great danger. The ice can be treacherous. The winds can be deadly. The sun can be blinding.
The Arctic is a place where the only way to survive is to be prepared.
The Arctic is a place of extremes. The temperatures can drop to -40 degrees Celsius. The winds can reach speeds of 100 kilometers per hour. The sun can shine for 24 hours a day, or not at all for weeks on end.
The Arctic is a place of great beauty. The ice and snow are a</p>
</details>

<p>For more advanced usage, please refer to the
<a rel="noopener nofollow" href="https://github.com/01-ai/Yi/tree/main/demo">doc</a>.</p>
<h4>
	<a rel="noopener nofollow" href="#33-finetuning-from-the-base-model" id="33-finetuning-from-the-base-model">
		<span><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		3.3 Finetuning from the base model:
	</span>
</h4>
<pre><code>bash finetune/scripts/run_sft_Yi_6b.sh
</code></pre>
<p>Once finished, you can compare the finetuned model and the base model with the following command:</p>
<pre><code>bash finetune/scripts/run_eval.sh
</code></pre>
<p>For more advanced usage like fine-tuning based on your custom data, please refer
the <a rel="noopener nofollow" href="https://github.com/01-ai/Yi/tree/main/finetune">doc</a>.</p>
<h4>
	<a rel="noopener nofollow" href="#34-quantization" id="34-quantization">
		<span><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		3.4 Quantization
	</span>
</h4>
<h5>
	<a rel="noopener nofollow" href="#gpt-q" id="gpt-q">
		<span><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		GPT-Q
	</span>
</h5>
<pre><code>python quantization/gptq/quant_autogptq.py \
  --model /base_model                      \
  --output_dir /quantized_model            \
  --trust_remote_code
</code></pre>
<p>Once finished, you can then evaluate the resulting model as follows:</p>
<pre><code>python quantization/gptq/eval_quantized_model.py \
  --model /quantized_model                       \
  --trust_remote_code
</code></pre>
<p>For a more detailed explanation, please read the <a rel="noopener nofollow" href="https://github.com/01-ai/Yi/tree/main/quantization/gptq">doc</a></p>
<h5>
	<a rel="noopener nofollow" href="#awq" id="awq">
		<span><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		AWQ
	</span>
</h5>
<pre><code>python quantization/awq/quant_autoawq.py \
  --model /base_model                      \
  --output_dir /quantized_model            \
  --trust_remote_code
</code></pre>
<p>Once finished, you can then evaluate the resulting model as follows:</p>
<pre><code>python quantization/awq/eval_quantized_model.py \
  --model /quantized_model                       \
  --trust_remote_code
</code></pre>
<p>For more detailed explanation, please read the <a rel="noopener nofollow" href="https://github.com/01-ai/Yi/tree/main/quantization/awq">doc</a></p>
<h2>
	<a rel="noopener nofollow" href="#ecosystem" id="ecosystem">
		<span><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		Ecosystem
	</span>
</h2>
<p>🤗 You are encouraged to create a PR and share your awesome work built on top of
the Yi series models.</p>
<ul>
<li>Serving<ul>
<li><a rel="noopener nofollow" href="https://github.com/vectorch-ai/ScaleLLM#supported-models">ScaleLLM</a>: Efficiently run Yi models locally.</li>
</ul>
</li>
<li>Quantization<ul>
<li><a rel="noopener nofollow" href="https://huggingface.co/TheBloke/Yi-34B-GGUF">TheBloke/Yi-34B-GGUF</a></li>
<li><a rel="noopener nofollow" href="https://huggingface.co/TheBloke/Yi-34B-GPTQ">TheBloke/Yi-34B-GPTQ</a></li>
</ul>
</li>
<li>Finetuning<ul>
<li><a rel="noopener nofollow" href="https://huggingface.co/NousResearch/Nous-Capybara-34B">NousResearch/Nous-Capybara-34B</a></li>
</ul>
</li>
</ul>
<h2>
	<a rel="noopener nofollow" href="#faq" id="faq">
		<span><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		FAQ
	</span>
</h2>
<ol>
<li><p><strong>What dataset was this trained with?</strong></p>
<p> The dataset we use contains Chinese &amp; English only. We used approximately 3T
 tokens. The detailed number and its construction will be described in the
 upcoming technical report.</p>
</li>
</ol>
<h2>
	<a rel="noopener nofollow" href="#disclaimer" id="disclaimer">
		<span><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		Disclaimer
	</span>
</h2>
<p>We use data compliance checking algorithms during the training process, to
ensure the compliance of the trained model to the best of our ability. Due to
complex data and the diversity of language model usage scenarios, we cannot
guarantee that the model will generate correct, and reasonable output in all
scenarios. Please be aware that there is still a risk of the model producing
problematic outputs. We will not be responsible for any risks and issues
resulting from misuse, misguidance, illegal usage, and related misinformation,
as well as any associated data security concerns.</p>
<h2>
	<a rel="noopener nofollow" href="#license" id="license">
		<span><svg viewBox="0 0 256 256" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" role="img" aria-hidden="true" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z"></path></svg></span>
	</a>
	<span>
		License
	</span>
</h2>
<p>The source code in this repo is licensed under the <a rel="noopener nofollow" href="https://github.com/01-ai/Yi/blob/main/LICENSE">Apache 2.0
license</a>. The Yi series models
are fully open for academic research and free commercial usage with permission
via applications. All usage must adhere to the <a rel="noopener nofollow" href="https://github.com/01-ai/Yi/blob/main/MODEL_LICENSE_AGREEMENT.txt">Model License
Agreement 2.0</a>.
To apply for the official commercial license, please contact us
(<a rel="noopener nofollow" href="mailto:yi@01.ai">yi@01.ai</a>).</p>
<!-- HTML_TAG_END --></div></div></div>
  </body>
</html>
