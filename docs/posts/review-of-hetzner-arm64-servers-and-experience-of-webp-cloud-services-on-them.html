<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.webp.se/hetzner-arm64-en/">Original</a>
    <h1>Review of Hetzner ARM64 servers and experience of WebP cloud services on them</h1>
    
    <div id="readability-page-1" class="page"><div>
<article>
<header>

<p><time>Jun 17, 2023</time>
<span>·</span>
<span>Nova Kwok</span>
</p>
</header>
<section><p>这篇文章有简体中文版本，在： <a href="https://raphlinus.github.io/hetzner-arm64-zh/">Hetzner CAX 系列 ARM64 服务器性能简评以及 WebP Cloud Services 在其上的实践</a></p>
<p>TL；DR：</p>
<ul>
<li>Hetzner ARM64 performs very well, with the 4-core CAX21 (ARM64, 4 cores, 8GB RAM) machine only being 8% slower in WebP conversion speed compared to the 3-core CPX21 (AMD64, 3 cores, 4GB RAM), while the price difference between the two is 14% (8.40 USD/mo vs 9.76 USD/mo). Additionally, the CAX21 offers twice the amount of RAM compared to the CPX21.</li>
<li>Due to the impressive performance of ARM64 in testing, we have migrated all WebP Cloud Services to Hetzner’s ARM64 servers.</li>
<li>Hetzner Volumes are not exceptionally fast, roughly about one-third the speed of LocalSSD. However, their advantage lies in higher data security.</li>
</ul>
<p>A long time ago, in 2015, Scaleway introduced its C1 servers, which were based on ARM64 processors. The C1 servers were built on the Marvell Armada 370/XP quad-core ARM Cortex A9 processor and featured 2GB of RAM. These servers were designed by Scaleway themselves and were sold in a bare metal form, without any virtualization. The official price was approximately $3 per month. Here is the physical appearance of the machine hardware:</p>
<p><img src="https://raphlinus.github.io/hetzner-arm64/scaleway-c1.jpg" alt=""/></p>
<p><a href="https://twitter.com/edouardb_/status/787212549628526592">https://twitter.com/edouardb_/status/787212549628526592</a></p>
<p>Due to the use of their self-developed motherboards and other components, C1 servers had a very high density within their chassis. In the publicly available images by Scaleway, the internal layout of their chassis looked like this:</p>
<p><img src="https://raphlinus.github.io/hetzner-arm64/c1-board.jpg" alt=""/></p>
<p>This became the first significant provider of ARM64 architecture servers in an era dominated by almost everyone using Intel Xeon. Although we can see from a benchmark, such as <a href="https://browser.geekbench.com/geekbench2/2576212">https://browser.geekbench.com/geekbench2/2576212</a> and <a href="https://medium.com/amarao/scaleway-arm-servers-50f85c4cefbe">https://medium.com/amarao/scaleway-arm-servers-50f85c4cefbe</a>, that the performance of this ARM processor is far behind mainstream AMD64 architecture servers, it also made people realize that ARM64 architecture could have a role to play in the server field. At that time, I even made a dedicated tweet about it: <a href="https://twitter.com/n0vad3v/status/931344460633403394">https://twitter.com/n0vad3v/status/931344460633403394</a>.</p>
<p><img src="https://raphlinus.github.io/hetzner-arm64/scaleway-tweet.png" alt=""/></p>
<p>However, three years later, in 2020, Scaleway issued a statement announcing the discontinuation of ARM64 machines:</p>
<p><img src="https://raphlinus.github.io/hetzner-arm64/c1-discontinue.png" alt=""/></p>
<p>In response to that, I tweeted again: <a href="https://twitter.com/n0vad3v/status/1253577191280930817">https://twitter.com/n0vad3v/status/1253577191280930817</a>.</p>
<p><img src="https://raphlinus.github.io/hetzner-arm64/scaleway-end.png" alt=""/></p>
<p>Nevertheless, after three years of discontinuing C1 ARM64 machines, in 2023, Scaleway resumed offering servers with ARM64 processors, known as the AMP series, utilizing the Altra Max processor.</p>
<p>Between 2020 and 2023, among the mainstream cloud service providers, only AWS continued to offer ARM64 machines, using their own Graviton processors. However, those familiar with AWS might know that while the AWS Graviton instances have become more cost-effective compared to traditional machines, calculating the pricing reveals that as of now (June 2023), the cheapest ARM64 instance, t4g.nano (2 cores, 0.5 GiB RAM), costs $0.0042 USD per hour, which translates to $3 per month. However, considering the need to run workloads on it, 0.5 GiB of RAM may not be sufficient, and a more usable configuration could be 1 core with 2 GiB of RAM, which corresponds to t4g.small (2 cores, 2 GiB RAM) at $0.0168 USD per hour, or $18 per month. Additionally, this cost does not include potential fees for traffic, storage, or other resources. It’s also worth noting that these instances are burstable performance instances, and sustained high CPU usage may result in limitations or additional charges.</p>
<p>Therefore, we have compiled a table listing the currently popular service providers that offer ARM64 processing capabilities:</p>
<table>
<thead>
<tr>
<th>Service Provider</th>
<th>Machine Name</th>
<th>Disk Space</th>
<th>Price (Monthly, USD)</th>
<th>Link</th>
<th>Additional Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Hetzner</td>
<td>CAX21</td>
<td>80GB</td>
<td>8.38</td>
<td><a href="https://www.hetzner.com/cloud">Hetzner Cloud</a></td>
<td>Starting now, we also have four brand new Hetzner Cloud server plans which we’ve built around innovative Arm technology. You can get your hands on up to 16 vCPUs based on Ampere® Altra® processors.</td>
</tr>
<tr>
<td>AWS</td>
<td>a1.xlarge</td>
<td>Additional</td>
<td>73</td>
<td><a href="https://aws.amazon.com/ec2/pricing/on-demand/">AWS EC2 Pricing</a></td>
<td></td>
</tr>
<tr>
<td>Scaleway</td>
<td>AMP2-C4</td>
<td>10GB</td>
<td>15</td>
<td><a href="https://www.scaleway.com/en/amp2-instances/">Scaleway AMP2 Instances</a></td>
<td>Please note that these Instances are currently in a trial phase. It is not recommended to use them to host critical services.</td>
</tr>
<tr>
<td>Oracle Cloud</td>
<td>VM.Standard.A1.Flex</td>
<td>Additional</td>
<td>0 (Free Tier)</td>
<td><a href="https://www.oracle.com/sg/cloud/costestimator.html">Oracle Cloud Cost Estimator</a></td>
<td>Each tenancy gets the first 3,000 OCPU hours and 18,000 GB hours per month for free to create Ampere A1 Compute instances using the VM.Standard.A1.Flex shape (equivalent to 4 OCPUs and 24 GB of memory).</td>
</tr>
<tr>
<td>Alibabacloud</td>
<td>ARM General purpose instance ecs.g8y.xlarge</td>
<td>Additional</td>
<td>92.26</td>
<td><a href="https://www.alibabacloud.com/product/ecs">Alibaba Cloud ECS</a></td>
<td></td>
</tr>
</tbody>
</table>
<p>As we can see, excluding the Oracle Cloud Free Tier, Hetzner offers the lowest price and does not consider their ARM64 machines as experimental products with no SLA guarantee, unlike Scaleway.</p>
<p>All the mentioned providers, except AWS, use Ampere processors.</p>
<p>In a news article by Hetzner on April 23, 2023, titled “ARM64 Cloud” ( <a href="https://www.hetzner.com/news/arm64-cloud">https://www.hetzner.com/news/arm64-cloud</a> ), they publicly introduced their ARM64 cloud servers under the CAX line for the first time, based on Ampere Altra processors. However, the specific model is not mentioned. In their news article about ARM64 dedicated servers ( <a href="https://www.hetzner.com/news/07-22-rx-line/">https://www.hetzner.com/news/07-22-rx-line/</a> ), we know that the RX line servers utilize Ampere Altra Q80-30 SoC. Therefore, we can speculate that the CAX line might use the same processor.</p>
<p><img src="https://raphlinus.github.io/hetzner-arm64/price.png" alt="Hetzner ARM64 Pricing"/></p>
<p>From the Pricing page, we can see that ARM64 servers offer excellent value for money, with a 4-core 8GB machine available for just 7.73 EUR/mo.</p>
<p>At the WebP Cloud Services team, we are very interested in the benefits of using ARM64 machines and are willing to test our products on ARM64 platforms. Therefore, we conducted some tests on different machines and shared the results in this article for readers with similar needs to reference.</p>
<h2 id="test-machines">Test Machines</h2>
<p>We have four five machines:</p>
<ul>
<li>A dedicated server with a Xeon E3-1230 v3 @ 3.30GHz CPU, 8 cores(4 core, 8 threads), 32GB DDR3 memory, priced at $30 USD per month, referred to as Xeon for simplicity.</li>
<li>Hetzner CPX21, with a virtualized AMD EPYC 2.4GHz CPU, 3 cores(vCPU), 4GB memory, priced at $9.76 USD per month, referred to as CPX21 for simplicity.</li>
<li>Hetzner CAX11, with a virtualized ARM64 processor, 2 cores(vCPU), 4GB memory, priced at $4.91 USD per month, referred to as CAX11 for simplicity.</li>
<li>Hetzner CAX21, with a virtualized ARM64 processor, 4 cores(vCPU), 8GB memory, priced at $8.40 USD per month, referred to as CAX21 for simplicity.</li>
<li>Oracle Cloud is equipped with a virtualized ARM64 processor with 4 cores and 20GB of memory. As it falls under the Free Tier, the monthly price is 0. From here on, it will be referred to as Oracle.</li>
</ul>
<p>The test script used is located at <a href="https://github.com/masonr/yet-another-bench-script">https://github.com/masonr/yet-another-bench-script</a>, and the command is:</p>
<pre tabindex="0"><code>curl -sL yabs.sh | bash -s -- -i
</code></pre><p>This script utilizes <code>fio</code> for disk performance testing, <code>iperf3</code> for network performance testing, and Geekbench for CPU/memory performance testing. However, since we have a 1Gbps bandwidth provided by the service provider, we will skip the network testing and only perform Geekbench and disk testing.</p>
<h3 id="geekbench-test">GeekBench Test</h3>
<p>We begin with GeekBench 6 tests.</p>
<p>The scores for Xeon are:</p>
<pre tabindex="0"><code>Processor  : Intel(R) Xeon(R) CPU E3-1230 v3 @ 3.30GHz
CPU cores  : 8 @ 3700.000 MHz
AES-NI     : ✔ Enabled
VM-x/AMD-V : ✔ Enabled

Single Core     | 1103
Multi Core      | 3353
</code></pre><p>The scores for CPX21 are:</p>
<pre tabindex="0"><code>Processor  : AMD EPYC Processor
CPU cores  : 3 @ 2495.310 MHz
AES-NI     : ✔ Enabled
VM-x/AMD-V : ❌ Disabled

Single Core     | 1222
Multi Core      | 3107
</code></pre><p>The scores for CAX11 are:</p>
<pre tabindex="0"><code>Processor  : Neoverse-N1
CPU cores  : 2 @ ??? MHz
AES-NI     : ✔ Enabled
VM-x/AMD-V : ❌ Disabled

Single Core     | 1072
Multi Core      | 1921
</code></pre><p>The scores for CAX21 are:</p>
<pre tabindex="0"><code>Processor  : Neoverse-N1
CPU cores  : 4 @ ??? MHz
AES-NI     : ✔ Enabled
VM-x/AMD-V : ❌ Disabled

Single Core     | 1068
Multi Core      | 3444
</code></pre><p>The scores for Oracle are:</p>
<div><pre tabindex="0"><code data-lang="jsx"><span><span><span>Processor</span>  <span>:</span> <span>Neoverse</span><span>-</span><span>N1</span>
</span></span><span><span><span>CPU</span> <span>cores</span>  <span>:</span> <span>4</span> <span>@</span> <span>???</span> <span>MHz</span>
</span></span><span><span><span>AES</span><span>-</span><span>NI</span>     <span>:</span> <span>✔</span> <span>Enabled</span>
</span></span><span><span><span>VM</span><span>-</span><span>x</span><span>/</span><span>AMD</span><span>-</span><span>V</span> <span>:</span> <span>❌</span> <span>Disabled</span>
</span></span><span><span>
</span></span><span><span><span>Single</span> <span>Core</span>     <span>|</span> <span>1066</span>
</span></span><span><span><span>Multi</span> <span>Core</span>      <span>|</span> <span>2666</span>
</span></span></code></pre></div><p>We can draw some conclusions:</p>
<ul>
<li>The performance of the server CPU is not solely determined by the clock frequency. The Xeon processor, with a clock frequency of 3.8GHz and 8 cores, only matches the performance of the virtualized AMD EPYC processor, which has a clock frequency of 2.4GHz and 3 cores.</li>
<li>The performance of the Ampere Altra based on the Neoverse N1 architecture is noteworthy. In the GeekBench 6 test, a 4-core ARM64 processor outperforms a 3-core virtualized AMD processor.</li>
<li>The ARM64 cores of Oracle Cloud, also labeled as Neoverse-N1, seem to have slightly lower performance compared to Hetzner. This could be due to the high number of users on the Free Tier, causing resource limitations.</li>
</ul>
<h3 id="webp-encode-test">WebP Encode Test</h3>
<p>Since we plan to run our services on ARM64, let’s discuss our situation. Currently, WebP Cloud Services has two services:</p>
<ul>
<li><a href="https://public.webp.se">Public Service</a>
<ul>
<li>Provides a reverse proxy for Gravatar and GitHub Avatar, solving two problems:
<ul>
<li>Chinese mainland users cannot directly access Gravatar, such as the address <a href="https://www.gravatar.com/avatar/09eba3a443a7ea91cf818f6b27607d66">https://www.gravatar.com/avatar/09eba3a443a7ea91cf818f6b27607d66</a>.</li>
<li>When serving these images, it provides WebP conversion, which significantly reduces the image size without compromising quality, thus speeding up the overall site loading time.</li>
</ul>
</li>
<li>This is a public service that is completely free, and currently has a large number of users, this includes, but is not limited to <a href="https://medium.com/amarao/scaleway-arm-servers-50f85c4cefbe">CNX Software</a>,<a href="https://indienova.com/en">Indienova</a></li>
</ul>
</li>
<li><a href="https://webp.se">WebP Cloud</a>
<ul>
<li>This is our recently launched new service, which has the following main features:
<ul>
<li>It allows users to convert their website’s images to WebP format and serve them through a new domain provided by WebP Cloud, without the need to host our open-source component, <a href="https://github.com/webp-sh/webp_server_go/">WebP Server Go</a> (especially suitable for static blogs such as Hugo or Hexo).</li>
<li>By registering an account on <a href="https://dashboard.webp.se/login">WebP Cloud</a> and providing your website address, WebP Cloud will provide you with a new domain. When users access the images on your website using the new domain and the original image’s URI, WebP Cloud will convert the images to the WebP format and deliver them. This process significantly reduces the image size without compromising the image quality, resulting in faster overall website loading speed.</li>
<li>For example, if the original image URL of your website is <code>https://yyets.dmesg.app/api/user/avatar/Benny</code>, WebP Cloud will provide a new URL like <code>https://51b864ff-ef8c-4d69-8188-efe13f9d4035.webp.ee</code>. By accessing <code>https://51b864ff-ef8c-4d69-8188-efe13f9d4035.webp.ee/api/user/avatar/Benny</code>, you can see the compressed and optimized version of the image.</li>
<li>All the served images are automatically cached in WebP Cloud. This means that after the initial access, all subsequent accesses are served directly from WebP Cloud without going back to the origin server, reducing the traffic and bandwidth load on the source server.</li>
</ul>
</li>
<li>During the initial Alpha phase, free users can get a daily limit of 2000 images for free. This limit is sufficient for websites/blogs with moderate traffic. Additionally, paid quotas can be purchased at a lower price.</li>
<li>Additionally, we support Custom Domain, which means you can use your own domain name to serve the images. For example, two of our users, <a href="https://keshane.moe/">Keshane’s Simple Blog</a> and <a href="https://strrl.dev/">STRRL’s backyard</a>, are using their respective domain names, <a href="https://webp.keshane.moe/">https://webp.keshane.moe</a> and <a href="https://webp.strrl.dev/">https://webp.strrl.dev</a>, to access WebP Cloud.</li>
</ul>
</li>
</ul>
<p>Since our services (excluding the frontend) are written in Golang and our CI/CD pipeline is built using GitHub Actions, we have built images for both AMD64 and ARM64 architectures from the beginning. Therefore, testing the services simply involves migrating and starting the containers without the need to modify the image names.</p>
<p>Among the two services mentioned above, the most important and resource-intensive part is the WebP conversion (Encode) process. We can easily test the conversion speed on different machines using the Prefetch feature of <a href="https://github.com/webp-sh/webp_server_go/">WebP Server Go</a>. To evaluate machine performance, we used a set of test images totaling 2.4 GB. Around 80% of the images were taken with a Sony A7 camera, with file sizes averaging around 15 MiB. The remaining 20% were smaller images with sizes ranging from 1 MiB to 5 MiB.</p>
<p>The testing command is as follows:</p>
<pre tabindex="0"><code>./webp-server-go -prefetch
</code></pre><p>The shorter the execution time, the better the performance in this aspect.</p>
<p>Prefetch time on the Xeon server:</p>
<pre tabindex="0"><code>Prefetching... 100% |██████████████████████████████████████████████████████| (438/438, 10 it/s)         
Prefetch completeY(^_^)Y in 44.414660644s
</code></pre><p>Prefetch time on CPX21:</p>
<pre tabindex="0"><code>Prefetching... 100% |██████████████████████████████████████████████████| (438/438, 6 it/s)          
Prefetch completeY(^_^)Y in 1m9.87966334s
</code></pre><p>Due to insufficient memory, CAX11 encountered an out-of-memory (OOM) issue and was not included in this round of testing.</p>
<p>The Prefetch time for CAX21 is:</p>
<pre tabindex="0"><code>Prefetching... 100% |█████████████████████████████████████████████████████| (438/438, 6 it/s)           
Prefetch completeY(^_^)Y in 1m15.080679651s
</code></pre><p>The Prefetch time for Oracle is:</p>
<div><pre tabindex="0"><code data-lang="jsx"><span><span><span>Prefetching</span><span>...</span> <span>100</span><span>%</span> <span>|</span><span>███████████████████████████████████████████████████████████████████████████████████████████████████████████████████████</span><span>|</span> <span>(</span><span>438</span><span>/</span><span>438</span><span>,</span> <span>5</span> <span>it</span><span>/</span><span>s</span><span>)</span>
</span></span><span><span><span>Prefetch</span> <span>completeY</span><span>(</span><span>^</span><span>_</span><span>^</span><span>)</span><span>Y</span> <span>in</span> <span>1</span><span>m24</span><span>.932026118</span><span>s</span>
</span></span></code></pre></div><p>From the results of the Prefetch, it can be seen that the 8-core Xeon(R) CPU E3-1230 v3 @ 3.30GHz dedicated server takes the lead here, with a conversion time of 44s, which is 36% faster than CPX21. However, since CPX21 has better Geekbench scores than Xeon, this also indicates that we cannot blindly rely on Geekbench scores as the sole indicator of performance comparison. It is necessary to consider our own business requirements.</p>
<p>On the other hand, the performance of ARM64 is quite impressive. The 4-core CAX21 machine has a conversion speed that is only 8% slower compared to the 3-core CPX21, and the price difference between them is 14%. Additionally, CAX21 also has twice the amount of memory compared to CPX21.</p>
<h2 id="disk-testing">Disk Testing</h2>
<p>Whether it’s Public Services or WebP Cloud, for subsequent requests, all images are served from cache. Our cache is persisted on disk, so testing the disk performance is crucial in this context.</p>
<p>The tests mentioned above are included in the test commands using <code>fio</code> for performance testing. Four random read and write <code>fio</code> disk tests are conducted as part of this script with 4k, 64k, 512k, and 1m block sizes. The tests are designed to evaluate disk throughput in near-real world (using random) scenarios with a 50/50 split (50% reads and 50% writes per test).</p>
<p>First, let’s provide the disk performance of Oracle Cloud. The test was conducted on the machine’s built-in disk.</p>
<div><pre tabindex="0"><code data-lang="jsx"><span><span><span>fio</span> <span>Disk</span> <span>Speed</span> <span>Tests</span> <span>(</span><span>Mixed</span> <span>R</span><span>/</span><span>W</span> <span>50</span><span>/</span><span>50</span><span>)</span><span>:</span>
</span></span><span><span><span>---------------------------------</span>
</span></span><span><span><span>Block</span> <span>Size</span> <span>|</span> <span>4</span><span>k</span>            <span>(</span><span>IOPS</span><span>)</span> <span>|</span> <span>64</span><span>k</span>           <span>(</span><span>IOPS</span><span>)</span>
</span></span><span><span>  <span>------</span>   <span>|</span> <span>---</span>            <span>----</span>  <span>|</span> <span>----</span>           <span>----</span>
</span></span><span><span><span>Read</span>       <span>|</span> <span>75.84</span> <span>MB</span><span>/</span><span>s</span>   <span>(</span><span>18.9</span><span>k</span><span>)</span> <span>|</span> <span>228.99</span> <span>MB</span><span>/</span><span>s</span>   <span>(</span><span>3.5</span><span>k</span><span>)</span>
</span></span><span><span><span>Write</span>      <span>|</span> <span>75.79</span> <span>MB</span><span>/</span><span>s</span>   <span>(</span><span>18.9</span><span>k</span><span>)</span> <span>|</span> <span>235.80</span> <span>MB</span><span>/</span><span>s</span>   <span>(</span><span>3.6</span><span>k</span><span>)</span>
</span></span><span><span><span>Total</span>      <span>|</span> <span>151.63</span> <span>MB</span><span>/</span><span>s</span>  <span>(</span><span>37.9</span><span>k</span><span>)</span> <span>|</span> <span>464.79</span> <span>MB</span><span>/</span><span>s</span>   <span>(</span><span>7.2</span><span>k</span><span>)</span>
</span></span><span><span>           <span>|</span>                      <span>|</span>
</span></span><span><span><span>Block</span> <span>Size</span> <span>|</span> <span>512</span><span>k</span>          <span>(</span><span>IOPS</span><span>)</span> <span>|</span> <span>1</span><span>m</span>            <span>(</span><span>IOPS</span><span>)</span>
</span></span><span><span>  <span>------</span>   <span>|</span> <span>---</span>            <span>----</span>  <span>|</span> <span>----</span>           <span>----</span>
</span></span><span><span><span>Read</span>       <span>|</span> <span>143.03</span> <span>MB</span><span>/</span><span>s</span>    <span>(</span><span>279</span><span>)</span> <span>|</span> <span>141.04</span> <span>MB</span><span>/</span><span>s</span>    <span>(</span><span>137</span><span>)</span>
</span></span><span><span><span>Write</span>      <span>|</span> <span>155.27</span> <span>MB</span><span>/</span><span>s</span>    <span>(</span><span>303</span><span>)</span> <span>|</span> <span>157.35</span> <span>MB</span><span>/</span><span>s</span>    <span>(</span><span>153</span><span>)</span>
</span></span><span><span><span>Total</span>      <span>|</span> <span>298.31</span> <span>MB</span><span>/</span><span>s</span>    <span>(</span><span>582</span><span>)</span> <span>|</span> <span>298.39</span> <span>MB</span><span>/</span><span>s</span>    <span>(</span><span>290</span><span>)</span>
</span></span></code></pre></div><p><img src="https://raphlinus.github.io/hetzner-arm64/oracle-disk.png" alt=""/></p>
<p>Hetzner Cloud offers two types of disks: LocalSSD, which refers to the disks that come with the machines, and Volumes. Hetzner describes Volumes as follows:</p>
<ul>
<li>
<p>Volumes offer highly available and reliable SSD storage for your cloud servers. You can expand each Volume to up to 10 TB at any time, and you can connect them to your Hetzner cloud servers.</p>
<p>Our Volumes are based on the networked block storage model, and every block of data is stored on three different physical servers at our Hetzner data centers.</p>
</li>
</ul>
<p>Under Hetzner Cloud, both AMD and ARM64 machines showed similar performance for LocalSSD and Volume. Therefore, the summary is as follows:</p>
<p>The test results for LocalSSD are as follows:</p>
<pre tabindex="0"><code>fio Disk Speed Tests (Mixed R/W 50/50):
---------------------------------
Block Size | 4k            (IOPS) | 64k           (IOPS)
  ------   | ---            ----  | ----           ---- 
Read       | 146.57 MB/s  (36.6k) | 1.13 GB/s    (17.7k)
Write      | 146.48 MB/s  (36.6k) | 1.17 GB/s    (18.3k)
Total      | 293.06 MB/s  (73.2k) | 2.30 GB/s    (36.0k)
           |                      |                     
Block Size | 512k          (IOPS) | 1m            (IOPS)
  ------   | ---            ----  | ----           ---- 
Read       | 2.50 GB/s     (4.8k) | 2.65 GB/s     (2.5k)
Write      | 2.71 GB/s     (5.3k) | 2.95 GB/s     (2.8k)
Total      | 5.21 GB/s    (10.1k) | 5.60 GB/s     (5.4k)
</code></pre><p>The test results for Volumes are as follows:</p>
<pre tabindex="0"><code>fio Disk Speed Tests (Mixed R/W 50/50):
---------------------------------
Block Size | 4k            (IOPS) | 64k           (IOPS)
  ------   | ---            ----  | ----           ---- 
Read       | 29.70 MB/s    (7.4k) | 314.04 MB/s   (4.9k)
Write      | 29.68 MB/s    (7.4k) | 323.38 MB/s   (5.0k)
Total      | 59.38 MB/s   (14.8k) | 637.43 MB/s   (9.9k)
           |                      |                     
Block Size | 512k          (IOPS) | 1m            (IOPS)
  ------   | ---            ----  | ----           ---- 
Read       | 298.03 MB/s    (582) | 288.82 MB/s    (282)
Write      | 323.52 MB/s    (631) | 322.23 MB/s    (314)
Total      | 621.56 MB/s   (1.2k) | 611.05 MB/s    (596)
</code></pre><p>It can be seen that although Volumes have the advantage of triple replication, the overall performance may only be about one-third of LocalSSD. Therefore, additional attention is required when planning applications, especially database applications.</p>
<p>Additionally, we can observe a significant difference in speed between Hetzner’s LocalSSD and Oracle Cloud’s SSD.</p>
<hr/>
<p>From the above results, we can see that if we don’t want to go bankrupt, we won’t consider AWS. Among the remaining ARM64 service providers, Scaleway doesn’t guarantee SLA, so we are hesitant to choose them. Oracle Cloud’s disk and processor performance are not satisfactory, and there is a possibility of account closure due to being on the Free Tier. Alibaba Cloud is closely tied to the Chinese company Alibaba, and as a European service provider, we won’t consider them. Additionally, their prices are also very high. In the end, we have chosen Hetzner’s CAX series machines as our server provider.</p>
<p>The aforementioned tests were conducted on Hetzner ARM64 servers. Due to their excellent cost-performance ratio and our fondness for ARM64 machines, WebP Cloud Services has fully migrated to Hetzner’s CAX series ARM64 processors at the time of this article’s publication. Although we encountered some peculiar incidents during the migration, such as the CPU inexplicably spiking when using the alpine Clickhouse image, which was resolved by switching to a non-alpine image:</p>
<p><img src="https://raphlinus.github.io/hetzner-arm64/ch-alpine.png" alt=""/></p>
<p>Apart from that, ARM64 machines have performed well in terms of response latency and compatibility. If we make any new discoveries in the future, we will be sure to share them.</p>
<hr/>
<p>If you’re interested in Hetzner’s ARM64 machines after reading this article, you can try using our referral link to sign up for Hetzner and experience it: <a href="https://hetzner.cloud/?ref=6moYBzkpMb9s">https://hetzner.cloud/?ref=6moYBzkpMb9s</a></p>
<p>By registering through our link, you can directly receive a €20 credit upon successful registration, and we will also receive a €10 reward. This way, you can support the development of our product as well.</p>
<p>However, it’s important to note that Hetzner has strict risk controls. Using a VPN during registration or intentionally providing incorrect information may easily result in your account being banned. This can be seen as both a disadvantage and an advantage. The disadvantage is that the registration threshold is relatively high, but the advantage is that Hetzner’s customers are relatively “clean” compared to mainstream service providers that offer large credit limits (such as DO and Vultr), without noisy and disruptive neighbors. Moreover, from our observations, once an account is successfully registered and has a few successful paid orders, there is generally no issue with account closure.</p>
<p><strong>WebP Cloud Services is a small team of three individuals based in Shanghai and Helsingborg. Since we are not seeking funding and have no profit pressure, we strive to do what we believe is right and do our best within the limits of our resources and capabilities. We also engage in various experiments and activities without compromising the services we offer to the public.</strong></p>
<h2 id="references">References</h2>
<ol>
<li><a href="https://news.ycombinator.com/item?id=22922582">Scaleway C2 and ARM64 instances will reach end-of-life in December 2020 </a></li>
<li><a href="https://medium.com/amarao/scaleway-arm-servers-50f85c4cefbe">Scaleway ARM servers</a></li>
<li><a href="https://www.hetzner.com/news/arm64-cloud/">RETHINK YOUR CLOUD. RELY ON OUR NEW ARM64 CAX SERVERS</a></li>
<li><a href="https://www.cnx-software.com/2017/04/28/cavium-thunderx-based-scaleway-armv8-cloud-servers-go-for-2-99-euros-per-month-and-up/">Scaleway Provides Dedicated ARM Servers for 10 Euros per Month, 0.02 Euro per Hour - CNX Software</a></li>
</ol>
</section>

<nav>
<a href="https://blog.webp.se/hetzner-arm64-zh/"><span>←</span><span>Hetzner CAX 系列 ARM64 服务器性能简评以及 WebP Cloud Services 在其上的实践</span></a>
</nav>


</article>
</div></div>
  </body>
</html>
