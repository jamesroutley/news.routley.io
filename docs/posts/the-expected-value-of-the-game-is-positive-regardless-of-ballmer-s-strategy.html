<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://gukov.dev/puzzles/math/2024/09/05/steve-ballmer-was-wrong.html">Original</a>
    <h1>The expected value of the game is positive regardless of Ballmer’s strategy</h1>
    
    <div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p>A few days ago John Graham-Cumming posted about <a href="https://blog.jgc.org/2024/09/steve-ballmers-binary-search-interview.html">“Steve Ballmer’s incorrect binary search interview question”</a> which <a href="https://news.ycombinator.com/item?id=41434637">drew a lot of attention</a> on Hacker News. The Ballmer’s favorite brain teaser goes like this:</p>

<blockquote>
  <p><em>I’m thinking of a number between 1 and 100. You can guess, after each guess I’ll tell you whether you’re high or low. You get it the first guess - I’ll give you five bucks. Four bucks, three, two, one, zero, you pay me a buck, you pay me two, you pay me three</em>.</p>

  <p><em>Should you accept to play this game?</em></p>
</blockquote>

<p>Steve Ballmer argues in <a href="https://youtu.be/svCYbkS0Sjk?si=89kJu8Ukkr9QpkFX&amp;t=34">this YouTube interview</a> that there are two reasons why you should not play this game:</p>

<ol>
  <li>There are many numbers that would result in a loss, making the expected value negative even if he randomly picks numbers between 1 and 100.</li>
  <li>He can strategically pick numbers that would require the longest time for you to find using binary search.</li>
</ol>

<p>However, John counters Ballmer’s first point in his <a href="https://blog.jgc.org/2024/09/steve-ballmers-binary-search-interview.html">blog post</a> by demonstrating that if Ballmer selects the number randomly, the expected value of the game is actually positive: <strong>$0.20</strong>.</p>

<p>I will refute the second point and demonstrate that the expected value of the game is positive regardless of Ballmer’s strategy.</p>

<h2 id="how-can-ballmer-pick-numbers-adversarially">How can Ballmer pick numbers adversarially?</h2>

<p>Let’s assume you always employ the binary search strategy to find the number. Out of the 100 numbers, there are 32 that would require you to ask 6 questions to make a guess.</p>

<p>If Ballmer is aware of your strategy, he can always select one of these “losing” numbers, resulting in a loss for you in every game.</p>

<p>This holds true for any “fixed” search pattern. There will always be at least 32 numbers that would result in a loss, and Ballmer can choose one of them.</p>

<h2 id="how-can-you-counter">How can you counter?</h2>

<p>Here we’re getting into the <strong>game theory</strong> territory.</p>

<p>Instead of using a single fixed search pattern, you can prepare a set of different search patterns. Then at the beginning of the game, draw one of these patterns with some probability and stick to it during the game.</p>

<blockquote>
  <p><a href="https://en.wikipedia.org/wiki/Strategy_(game_theory)#Pure_and_mixed_strategies">In game theory</a>, you call it a <strong>mixed strategy</strong> based on the <strong>strategy set</strong> of multiple <strong>pure strategies</strong>.</p>
</blockquote>

<p>Because the same number could be “winning” for one search pattern and “losing” for another, such a mixed strategy could “even out” the expected winnings for each number.</p>

<p>Potentially, a mixed strategy could even make every number “winning”, i.e. have a positive expected value of the win for every number.</p>

<p>And this is exactly what we’re looking for!</p>

<h2 id="how-to-find-the-winning-mixed-strategy">How to find the winning mixed strategy?</h2>

<blockquote>
  <p>Note: We are looking for <em>any</em> winning strategy, not the <em>best</em> winning strategy that has the maximum expected value in the worst case, i.e., the <a href="https://en.wikipedia.org/wiki/Nash_equilibrium">Nash equilibrium</a>. If you are curious about the Nash equilibrium, Arthur O’Dwyer explored it for the game <a href="https://quuxplusone.github.io/blog/2024/09/04/the-game-is-flawed/">up to 5 numbers</a>.</p>
</blockquote>

<p>Finding the mixed strategy that wins on every number can be viewed as a mathematical optimization problem.</p>

<p>Every strategy can be described as a “win” vector $V = (v_1, .., v_{100})$, where $v_k$ is the expected win if Ballmer picks the number $k$. For example, the binary search could correspond to a vector with $v_{50} = 5$, $v_{25} = 4$, and $v_{0} = -1$.</p>

<p>Suppose we have a set of pure strategies ${V_1, V_2, …, V_n}$, and our mixed strategy chooses the strategy $V_k$ with probability $p_k$.</p>

<p>Then the corresponding “win” vector for the mixed strategy is just a linear combination: $V_{mixed}=\sum_{i=1}^{n}{p_iV_i}$.</p>

<p>In this interpretation, finding the winning strategy means finding some linear combination of the given vectors with two constraints:</p>

<ul>
  <li>Each element of the linear combination is positive (the strategy wins money, on average, for each number).</li>
  <li>The coefficients of this linear combination are non-negative (as they correspond to probabilities).</li>
</ul>

<p>This is a typical <a href="https://en.wikipedia.org/wiki/Linear_programming">linear programming</a> problem, and scipy <a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.linprog.html">has an efficient solver</a> for it.</p>

<p>To find a mixed strategy, I thought of a set of pure strategies (various binary searches), <a href="https://github.com/gukoff/ballmer_puzzle/blob/main/main.py#L98">fed it</a> into <code>scipy.linprog()</code>, and voilà - the solver came up with a winning strategy!</p>

<h2 id="example-winning-strategy">Example winning strategy</h2>

<blockquote>
  <p>Full code is at <a href="https://github.com/gukoff/ballmer_puzzle#winning-strategy">gukoff/ballmer_puzzle</a>.</p>
</blockquote>

<ul>
  <li>Average win if Ballmer chooses randomly: <strong>$0.12</strong></li>
  <li>Worst win if Ballmer chooses adversarially: <strong>$0.07</strong></li>
</ul>

<p>The resulting mixed strategy goes like this:</p>

<div><div><pre><code>- With probability 0.2120%: Binary search, first guess is 29. On each step, guess the middle element in the interval, in case of tie guess the left one.
- With probability 0.0450%: Binary search, first guess is 33. On each step, guess the middle element in the interval, in case of tie guess the left one.
- With probability 0.9843%: Binary search, first guess is 26. On each step, guess the middle element in the interval, in case of tie guess the right one.
- With probability 0.6910%: Binary search, first guess is 28. On each step, guess the middle element in the interval, in case of tie guess the right one.
- With probability 0.9686%: Binary search, first guess is 1. On each step, guess the rightmost element in the interval that won&#39;t increase the worst-case complexity.
- With probability 0.7134%: Binary search, first guess is 18. On each step, guess the rightmost element in the interval that won&#39;t increase the worst-case complexity.
- With probability 2.7288%: Binary search, first guess is 46. On each step, guess the rightmost element in the interval that won&#39;t increase the worst-case complexity.
- With probability 2.6411%: Binary search, first guess is 36. On each step, guess the leftmost element in the interval that won&#39;t increase the worst-case complexity.
- With probability 5.2209%: Binary search, first guess is 40. On each step, guess the leftmost element in the interval that won&#39;t increase the worst-case complexity.

...
</code></pre></div></div>

<p>The complete strategy consists of 60 lines, which I have omitted for brevity. If you are interested, you can <a href="https://github.com/gukoff/ballmer_puzzle?tab=readme-ov-file#winning-strategy">view it on GitHub</a>.</p>

<h2 id="conclusion">Conclusion</h2>

<p>If you find winning (at least) 7 cents per game worth your time, then you should definitely play this game with Steve Ballmer the next time he offers.</p>

  </div>
</article>

      </div>
    </div></div>
  </body>
</html>
