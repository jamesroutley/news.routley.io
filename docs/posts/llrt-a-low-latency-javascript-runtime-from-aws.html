<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/awslabs/llrt">Original</a>
    <h1>LLRT: A low-latency JavaScript runtime from AWS</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><a href="https://github.com/awslabs/llrt/actions/workflows/ci.yml"><img src="https://github.com/awslabs/llrt/actions/workflows/ci.yml/badge.svg?branch=main" alt="LLRT CI"/></a> <a href="https://github.com/awslabs/llrt/actions/workflows/release.yml"><img src="https://github.com/awslabs/llrt/actions/workflows/release.yml/badge.svg" alt="LLRT Release"/></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/awslabs/llrt/blob/main/logo.svg"><img src="https://github.com/awslabs/llrt/raw/main/logo.svg" alt="LLRT logo" title="LLRT logo"/></a></p>
<p dir="auto">LLRT (<strong>L</strong>ow <strong>L</strong>atency <strong>R</strong>un<strong>t</strong>ime) is a lightweight JavaScript runtime designed to address the growing demand for fast and efficient Serverless applications. LLRT offers up to over <strong>10x</strong> faster startup and up to <strong>2x</strong> overall lower cost compared to other JavaScript runtimes running on <strong>AWS Lambda</strong></p>
<p dir="auto">LLRT is built in Rust, utilizing QuickJS as JavaScript engine, ensuring efficient memory usage and swift startup.</p>
<p dir="auto">LLRT is an experimental package. It is subject to change and intended only for evaluation purposes.</p>
<p dir="auto"><sub>LLRT - <a href="https://github.com/awslabs/llrt/blob/main/example/functions/src/v3-lib.mjs">DynamoDB Put, ARM, 128MB</a>:<sub>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/awslabs/llrt/blob/main/benchmarks/llrt-ddb-put.png"><img src="https://github.com/awslabs/llrt/raw/main/benchmarks/llrt-ddb-put.png" alt="DynamoDB Put LLRT" title="LLRT DynamoDB Put"/></a></sub></sub></p>
<p dir="auto"><sub>Node.js 20 - <a href="https://github.com/awslabs/llrt/blob/main/example/functions/src/v3-lib.mjs">DynamoDB Put, ARM, 128MB</a>:<sub>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/awslabs/llrt/blob/main/benchmarks/node20-ddb-put.png"><img src="https://github.com/awslabs/llrt/raw/main/benchmarks/node20-ddb-put.png" alt="DynamoDB Put Node20" title="Node20 DynamoDB Put"/></a></sub></sub></p>
<h2 tabindex="-1" dir="auto"><a id="user-content-configure-lambda-functions-to-use-llrt" aria-hidden="true" tabindex="-1" href="#configure-lambda-functions-to-use-llrt"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Configure Lambda functions to use LLRT</h2>
<p dir="auto">Download the last LLRT release from <a href="https://github.com/awslabs/llrt/releases">https://github.com/awslabs/llrt/releases</a></p>
<h3 tabindex="-1" dir="auto"><a id="user-content-option-1-custom-runtime-recommended" aria-hidden="true" tabindex="-1" href="#option-1-custom-runtime-recommended"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Option 1: Custom runtime (recommended)</h3>
<p dir="auto">Choose <code>Custom Runtime on Amazon Linux 2023</code> and package the LLRT <code>bootstrap</code> binary together with your JS code.</p>
<h3 tabindex="-1" dir="auto"><a id="user-content-option-2-use-a-layer" aria-hidden="true" tabindex="-1" href="#option-2-use-a-layer"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Option 2: Use a layer</h3>
<p dir="auto">Choose <code>Custom Runtime on Amazon Linux 2023</code>, upload <code>llrt-lambda-arm64.zip</code> or <code>llrt-lambda-x86.zip</code> as a layer and add to your function</p>
<p dir="auto">Thats it üéâ</p>
<p dir="auto"><strong>Please note: Even though LLRT supports <a href="https://262.ecma-international.org/11.0/" rel="nofollow">ES2020</a> it&#39;s is NOT a drop in replacement for Node.js. Consult <a href="#compatibility-matrix">Compatibility matrix</a> and <a href="https://github.com/awslabs/llrt/blob/main/API.md">API</a> for more details.
All dependencies should be bundled for a <code>browser</code> platform and mark included <code>@aws-sdk</code> packages as external.</strong></p>
<h2 tabindex="-1" dir="auto"><a id="user-content-testing--ensuring-compatibility" aria-hidden="true" tabindex="-1" href="#testing--ensuring-compatibility"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Testing &amp; ensuring compatibility</h2>
<p dir="auto">The best way to ensure that your code is compatible with LLRT is to write tests and executing them via the built in test runner</p>
<h3 tabindex="-1" dir="auto"><a id="user-content-test-runner" aria-hidden="true" tabindex="-1" href="#test-runner"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Test runner</h3>
<p dir="auto">Test runner uses a lightweight Jest-like API and uses the <a href="https://nodejs.org/api/assert.html" rel="nofollow">assert module</a> from Node.js for test assertions. For examples how to implement tests for LLRT see the <code>/tests</code> folder of this repository.</p>
<p dir="auto">To run tests, execute the <code>llrt test</code> command. LLRT scans the current directory and sub-directories for files that ends with <code>*.test.js</code> or <code>*.test.mjs</code>. You can also provide a specific test directory to scan by using the <code>llrt test -d &lt;directory&gt;</code> option.</p>
<p dir="auto">The test runner also has support for filters. Using filters is as simple as adding additional command line arguments, i.e: <code>llrt test crypto</code> will only run tests that match the filename containing <code>crypto</code>.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-compatibility-matrix" aria-hidden="true" tabindex="-1" href="#compatibility-matrix"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Compatibility matrix</h2>
<p dir="auto"><em>LLRT only support a fraction of the Node.js APIs. It is <strong>NOT</strong> a drop in replacement for Node.js, nor will it ever be. Below is a high level overview of partially supported APIs and modules. For more details consult the <a href="https://github.com/awslabs/llrt/blob/main/API.md">API</a> documentation</em></p>
<table>
<thead>
<tr>
<th></th>
<th>Node.js</th>
<th>LLRT <g-emoji alias="warning">‚ö†Ô∏è</g-emoji></th>
</tr>
</thead>
<tbody>
<tr>
<td>buffer</td>
<td>‚úîÔ∏é</td>
<td>‚úîÔ∏éÔ∏è</td>
</tr>
<tr>
<td>streams</td>
<td>‚úîÔ∏é</td>
<td>‚úîÔ∏é*</td>
</tr>
<tr>
<td>child_process</td>
<td>‚úîÔ∏é</td>
<td>‚úîÔ∏é‚è±</td>
</tr>
<tr>
<td>net:sockets</td>
<td>‚úîÔ∏é</td>
<td>‚úîÔ∏é‚è±</td>
</tr>
<tr>
<td>net:server</td>
<td>‚úîÔ∏é</td>
<td>‚úîÔ∏é</td>
</tr>
<tr>
<td>tls</td>
<td>‚úîÔ∏é</td>
<td>‚úò‚è±</td>
</tr>
<tr>
<td>fetch</td>
<td>‚úîÔ∏é</td>
<td>‚úîÔ∏é</td>
</tr>
<tr>
<td>http</td>
<td>‚úîÔ∏é</td>
<td>‚úò‚è±**</td>
</tr>
<tr>
<td>https</td>
<td>‚úîÔ∏é</td>
<td>‚úò‚è±**</td>
</tr>
<tr>
<td>fs/promises</td>
<td>‚úîÔ∏é</td>
<td>‚úîÔ∏é</td>
</tr>
<tr>
<td>fs</td>
<td>‚úîÔ∏é</td>
<td>‚úò‚è±</td>
</tr>
<tr>
<td>path</td>
<td>‚úîÔ∏é</td>
<td>‚úîÔ∏é</td>
</tr>
<tr>
<td>timers</td>
<td>‚úîÔ∏é</td>
<td>‚úîÔ∏é</td>
</tr>
<tr>
<td>uuid</td>
<td>‚úò <sub><sup>(via dependency)</sup></sub></td>
<td>‚úîÔ∏é</td>
</tr>
<tr>
<td>hex</td>
<td>‚úò <sub><sup>(via dependency)</sup></sub></td>
<td>‚úîÔ∏é</td>
</tr>
<tr>
<td>crypto</td>
<td>‚úîÔ∏é</td>
<td>‚úîÔ∏é</td>
</tr>
<tr>
<td>process</td>
<td>‚úîÔ∏é</td>
<td>‚úîÔ∏é</td>
</tr>
<tr>
<td>encoding</td>
<td>‚úîÔ∏é</td>
<td>‚úîÔ∏é</td>
</tr>
<tr>
<td>console</td>
<td>‚úîÔ∏é</td>
<td>‚úîÔ∏é</td>
</tr>
<tr>
<td>events</td>
<td>‚úîÔ∏é</td>
<td>‚úîÔ∏é</td>
</tr>
<tr>
<td>ESM</td>
<td>‚úîÔ∏é</td>
<td>‚úîÔ∏é</td>
</tr>
<tr>
<td>CJS</td>
<td>‚úîÔ∏é</td>
<td>‚úîÔ∏é</td>
</tr>
<tr>
<td>async/await</td>
<td>‚úîÔ∏é</td>
<td>‚úîÔ∏é</td>
</tr>
</tbody>
</table>
<p dir="auto"><em><g-emoji alias="warning">‚ö†Ô∏è</g-emoji> = partially supported in LLRT</em>
<em>‚è± = planned partial support</em>
<em>* = Not native</em>
<em>** = Use fetch instead</em></p>
<h2 tabindex="-1" dir="auto"><a id="user-content-using-node_modules-dependencies-with-llrt" aria-hidden="true" tabindex="-1" href="#using-node_modules-dependencies-with-llrt"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Using node_modules (dependencies) with LLRT</h2>
<p dir="auto">Since LLRT is meant for performance critical application it&#39;s not recommended to deploy <code>node_modules</code> without bundling, minification and tree-shaking.</p>
<p dir="auto">LLRT can work with any bundler of your choice. Below are some configurations for popular bundlers:</p>
<h3 tabindex="-1" dir="auto"><a id="user-content-esbuild" aria-hidden="true" tabindex="-1" href="#esbuild"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>ESBuild</h3>
<div data-snippet-clipboard-copy-content="esbuild index.js --platform=node --target=es2020 --format=esm --bundle --minify --external:@aws-sdk --external:uuid"><pre><code>esbuild index.js --platform=node --target=es2020 --format=esm --bundle --minify --external:@aws-sdk --external:uuid
</code></pre></div>
<h3 tabindex="-1" dir="auto"><a id="user-content-rollup" aria-hidden="true" tabindex="-1" href="#rollup"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Rollup</h3>
<div dir="auto" data-snippet-clipboard-copy-content="import resolve from &#39;rollup-plugin-node-resolve&#39;;
import commonjs from &#39;rollup-plugin-commonjs&#39;;
import { terser } from &#39;rollup-plugin-terser&#39;;

export default {
  input: &#39;index.js&#39;,
  output: {
    file: &#39;dist/bundle.js&#39;,
    format: &#39;esm&#39;,
    sourcemap: true,
    target: &#39;es2020&#39;,
  },
  plugins: [
    resolve(), 
    commonjs(),
    terser(), 
  ],
  external: [&#34;@aws-sdk&#34;,&#34;uuid&#34;],
};"><pre><span>import</span> <span>resolve</span> <span>from</span> <span>&#39;rollup-plugin-node-resolve&#39;</span><span>;</span>
<span>import</span> <span>commonjs</span> <span>from</span> <span>&#39;rollup-plugin-commonjs&#39;</span><span>;</span>
<span>import</span> <span>{</span> <span>terser</span> <span>}</span> <span>from</span> <span>&#39;rollup-plugin-terser&#39;</span><span>;</span>

<span>export</span> <span>default</span> <span>{</span>
  <span>input</span>: <span>&#39;index.js&#39;</span><span>,</span>
  <span>output</span>: <span>{</span>
    <span>file</span>: <span>&#39;dist/bundle.js&#39;</span><span>,</span>
    <span>format</span>: <span>&#39;esm&#39;</span><span>,</span>
    <span>sourcemap</span>: <span>true</span><span>,</span>
    <span>target</span>: <span>&#39;es2020&#39;</span><span>,</span>
  <span>}</span><span>,</span>
  <span>plugins</span>: <span>[</span>
    <span>resolve</span><span>(</span><span>)</span><span>,</span> 
    <span>commonjs</span><span>(</span><span>)</span><span>,</span>
    <span>terser</span><span>(</span><span>)</span><span>,</span> 
  <span>]</span><span>,</span>
  <span>external</span>: <span>[</span><span>&#34;@aws-sdk&#34;</span><span>,</span><span>&#34;uuid&#34;</span><span>]</span><span>,</span>
<span>}</span><span>;</span></pre></div>
<h3 tabindex="-1" dir="auto"><a id="user-content-webpack" aria-hidden="true" tabindex="-1" href="#webpack"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Webpack</h3>
<div dir="auto" data-snippet-clipboard-copy-content="import TerserPlugin from &#39;terser-webpack-plugin&#39;;
import nodeExternals from &#39;webpack-node-externals&#39;;

export default {
  entry: &#39;./index.js&#39;, 
  output: {
    path: &#34;dist&#34;,
    filename: &#39;bundle.js&#39;,
    libraryTarget: &#39;module&#39;, 
  },
  target: &#39;web&#39;, 
  mode: &#39;production&#39;,
  resolve: {
    extensions: [&#39;.js&#39;],
  },
  externals: [nodeExternals(),&#34;@aws-sdk&#34;,&#34;uuid&#34;],
  optimization: {
    minimize: true,
    minimizer: [
      new TerserPlugin({
        terserOptions: {
          ecma: 2020, 
        },
      }),
    ],
  },
};
"><pre><span>import</span> <span>TerserPlugin</span> <span>from</span> <span>&#39;terser-webpack-plugin&#39;</span><span>;</span>
<span>import</span> <span>nodeExternals</span> <span>from</span> <span>&#39;webpack-node-externals&#39;</span><span>;</span>

<span>export</span> <span>default</span> <span>{</span>
  <span>entry</span>: <span>&#39;./index.js&#39;</span><span>,</span> 
  <span>output</span>: <span>{</span>
    <span>path</span>: <span>&#34;dist&#34;</span><span>,</span>
    <span>filename</span>: <span>&#39;bundle.js&#39;</span><span>,</span>
    <span>libraryTarget</span>: <span>&#39;module&#39;</span><span>,</span> 
  <span>}</span><span>,</span>
  <span>target</span>: <span>&#39;web&#39;</span><span>,</span> 
  <span>mode</span>: <span>&#39;production&#39;</span><span>,</span>
  <span>resolve</span>: <span>{</span>
    <span>extensions</span>: <span>[</span><span>&#39;.js&#39;</span><span>]</span><span>,</span>
  <span>}</span><span>,</span>
  <span>externals</span>: <span>[</span><span>nodeExternals</span><span>(</span><span>)</span><span>,</span><span>&#34;@aws-sdk&#34;</span><span>,</span><span>&#34;uuid&#34;</span><span>]</span><span>,</span>
  <span>optimization</span>: <span>{</span>
    <span>minimize</span>: <span>true</span><span>,</span>
    <span>minimizer</span>: <span>[</span>
      <span>new</span> <span>TerserPlugin</span><span>(</span><span>{</span>
        <span>terserOptions</span>: <span>{</span>
          <span>ecma</span>: <span>2020</span><span>,</span> 
        <span>}</span><span>,</span>
      <span>}</span><span>)</span><span>,</span>
    <span>]</span><span>,</span>
  <span>}</span><span>,</span>
<span>}</span><span>;</span></pre></div>
<h2 tabindex="-1" dir="auto"><a id="user-content-using-aws-sdk-v3-with-llrt" aria-hidden="true" tabindex="-1" href="#using-aws-sdk-v3-with-llrt"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Using AWS SDK (v3) with LLRT</h2>
<p dir="auto">LLRT includes many AWS SDK clients and utils as part of the runtime, built into the executable. These SDK Clients have been specifically fine-tuned to offer best performance while not compromising on compatibility. LLRT replaces some JavaScript dependencies used by the AWS SDK by native ones such as Hash calculations and XML parsing.
V3 SDK packages not included in the list bellow have to be bundled with your source code while marking the following packages as external.</p>
<p dir="auto"><strong>Bundled AWS SDK packages:</strong></p>
<ul dir="auto">
<li>@aws-sdk/client-dynamodb</li>
<li>@aws-sdk/lib-dynamodb</li>
<li>@aws-sdk/client-kms</li>
<li>@aws-sdk/client-lambda</li>
<li>@aws-sdk/client-s3</li>
<li>@aws-sdk/client-secrets-manager</li>
<li>@aws-sdk/client-ses</li>
<li>@aws-sdk/client-sns</li>
<li>@aws-sdk/client-sqs</li>
<li>@aws-sdk/client-sts</li>
<li>@aws-sdk/client-ssm</li>
<li>@aws-sdk/client-cloudwatch-logs</li>
<li>@aws-sdk/client-cloudwatch-events</li>
<li>@aws-sdk/client-eventbridge</li>
<li>@aws-sdk/client-sfn</li>
<li>@aws-sdk/client-xray</li>
<li>@aws-sdk/client-cognito-identity</li>
<li>@aws-sdk/util-dynamodb</li>
<li>@aws-sdk/credential-providers</li>
<li>@smithy/signature-v4</li>
</ul>
<h2 tabindex="-1" dir="auto"><a id="user-content-running-typescript-with-llrt" aria-hidden="true" tabindex="-1" href="#running-typescript-with-llrt"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Running TypeScript with LLRT</h2>
<p dir="auto">Same principle as dependencies applies when using TypeScript. TypeScript must be bundled and transpiled into ES2020 JavaScript.</p>
<p dir="auto"><em>Note that LLRT will not support running TypeScript without transpilation. This is by design for performance reasons. Transpiling requires CPU and memory that adds latency and cost during execution. This can be avoided if done ahead of time during deployment.</em></p>
<h2 tabindex="-1" dir="auto"><a id="user-content-rationale" aria-hidden="true" tabindex="-1" href="#rationale"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Rationale</h2>
<p dir="auto">What justifies the introduction of another JavaScript runtime in light of existing options such as <a href="https://nodejs.org/en" rel="nofollow">Node.js</a>, <a href="https://bun.sh" rel="nofollow">Bun</a> &amp; <a href="https://deno.com/" rel="nofollow">Deno</a>?</p>
<p dir="auto">Node.js, Bun, and Deno represent highly proficient JavaScript runtimes. However, they are designed with general-purpose applications in mind. These runtimes were not specifically tailored for the demands of a Serverless environment, characterized by short-lived runtime instances. They each depend on a (<a href="https://en.wikipedia.org/wiki/Just-in-time_compilation" rel="nofollow">Just-In-Time compiler (JIT)</a> for dynamic code compilation and optimization during execution. While JIT compilation offers substantial long-term performance advantages, it carries a computational and memory overhead.</p>
<p dir="auto">In contrast, LLRT distinguishes itself by not incorporating a JIT compiler, a strategic decision that yields two significant advantages:</p>
<p dir="auto">A) JIT compilation is a notably sophisticated technological component, introducing increased system complexity and contributing substantially to the runtime&#39;s overall size.</p>
<p dir="auto">B) Without the JIT overhead, LLRT conserves both CPU and memory resources that can be more efficiently allocated to code execution tasks, thereby reducing application startup times.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-building-from-source" aria-hidden="true" tabindex="-1" href="#building-from-source"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Building from source</h2>
<p dir="auto">Clone code and cd to directory</p>
<div data-snippet-clipboard-copy-content="git clone git@github.com:awslabs/llrt.git --recursive
cd llrt"><pre><code>git clone git@github.com:awslabs/llrt.git --recursive
cd llrt
</code></pre></div>
<p dir="auto">Install rust</p>
<div data-snippet-clipboard-copy-content="curl --proto &#39;=https&#39; --tlsv1.2 -sSf https://sh.rustup.rs | bash -s -- -y
source &#34;$HOME/.cargo/env&#34;"><pre><code>curl --proto &#39;=https&#39; --tlsv1.2 -sSf https://sh.rustup.rs | bash -s -- -y
source &#34;$HOME/.cargo/env&#34;
</code></pre></div>
<p dir="auto">Install dependencies</p>
<div data-snippet-clipboard-copy-content="# MacOS
brew install zig make zstd node corepack

# Ubuntu
sudo apt -y install make zstd
sudo snap install zig --classic --beta"><pre><code># MacOS
brew install zig make zstd node corepack

# Ubuntu
sudo apt -y install make zstd
sudo snap install zig --classic --beta
</code></pre></div>
<p dir="auto">Install Node.js packages</p>

<p dir="auto">Install generate libs and setup rust targets &amp; toolchains</p>

<p dir="auto">Build release for Lambda</p>
<div data-snippet-clipboard-copy-content="make release-arm64
# or for x86, use
make release-x86"><pre><code>make release-arm64
# or for x86, use
make release-x86
</code></pre></div>
<p dir="auto">Optionally build for your local machine (Mac or Linux)</p>

<p dir="auto">You should now have a <code>llrt-lambda-arm64.zip</code> or <code>llrt-lambda-x86.zip</code>. You can manually upload this as a Lambda layer or use it via your Infrastructure-as-code pipeline</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-running-lambda-emulator" aria-hidden="true" tabindex="-1" href="#running-lambda-emulator"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Running Lambda emulator</h2>
<p dir="auto">Please note that in order to run the example you will need:</p>
<ul dir="auto">
<li>Valid AWS credentials via a <code>~/.aws/credentials</code> or via environment variables.</li>
</ul>
<div dir="auto" data-snippet-clipboard-copy-content="export AWS_ACCESS_KEY_ID=XXX
export AWS_SECRET_ACCESS_KEY=YYY
export AWS_REGION=us-east-1"><pre><span>export</span> AWS_ACCESS_KEY_ID=XXX
<span>export</span> AWS_SECRET_ACCESS_KEY=YYY
<span>export</span> AWS_REGION=us-east-1</pre></div>
<ul dir="auto">
<li>A DynamoDB table (with <code>id</code> as the partition key) on <code>us-east-1</code></li>
<li>The <code>dynamodb:PutItem</code> IAM permission on this table. You can use this policy (don&#39;t forget to modify &lt;YOUR_ACCOUNT_ID&gt;):</li>
</ul>
<div dir="auto" data-snippet-clipboard-copy-content="{
	&#34;Version&#34;: &#34;2012-10-17&#34;,
	&#34;Statement&#34;: [
		{
			&#34;Sid&#34;: &#34;putItem&#34;,
			&#34;Effect&#34;: &#34;Allow&#34;,
			&#34;Action&#34;: &#34;dynamodb:PutItem&#34;,
			&#34;Resource&#34;: &#34;arn:aws:dynamodb:us-east-1:&lt;YOUR_ACCOUNT_ID&gt;:table/quickjs-table&#34;
		}
	]
}"><pre>{
	<span>&#34;Version&#34;</span>: <span><span>&#34;</span>2012-10-17<span>&#34;</span></span>,
	<span>&#34;Statement&#34;</span>: [
		{
			<span>&#34;Sid&#34;</span>: <span><span>&#34;</span>putItem<span>&#34;</span></span>,
			<span>&#34;Effect&#34;</span>: <span><span>&#34;</span>Allow<span>&#34;</span></span>,
			<span>&#34;Action&#34;</span>: <span><span>&#34;</span>dynamodb:PutItem<span>&#34;</span></span>,
			<span>&#34;Resource&#34;</span>: <span><span>&#34;</span>arn:aws:dynamodb:us-east-1:&lt;YOUR_ACCOUNT_ID&gt;:table/quickjs-table<span>&#34;</span></span>
		}
	]
}</pre></div>
<p dir="auto">Start the <code>lambda-server.js</code> in a separate terminal</p>

<p dir="auto">Then run llrt:</p>

<h2 tabindex="-1" dir="auto"><a id="user-content-security" aria-hidden="true" tabindex="-1" href="#security"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Security</h2>
<p dir="auto">See <a href="https://github.com/awslabs/llrt/blob/main/CONTRIBUTING.md#security-issue-notifications">CONTRIBUTING</a> for more information.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-license" aria-hidden="true" tabindex="-1" href="#license"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>License</h2>
<p dir="auto">This library is licensed under the MIT-0 License. See the  <a href="https://github.com/awslabs/llrt/blob/main/LICENSE">LICENSE</a> file.</p>
</article></div></div>
  </body>
</html>
