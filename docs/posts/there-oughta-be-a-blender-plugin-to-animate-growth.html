<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://there.oughta.be/a/blender-plugin-to-animate-growth">Original</a>
    <h1>There oughta be a Blender plugin to animate growth</h1>
    
    <div id="readability-page-1" class="page">
    <header>
  <img id="logo" src="https://there.oughta.be/assets/images/tob-white.svg"/>
  <nav>
  <a href="https://there.oughta.be/">Home</a><a href="https://there.oughta.be/an/about/page">About</a>
</nav>

</header>
    
    
    


<div>

<p><img src="https://there.oughta.be/assets/resized/images/2021-05-24/1280/demo.png" srcset="    /assets/resized/images/2021-05-24/640/demo.png 640w,    /assets/resized/images/2021-05-24/768/demo.png 768w,    /assets/resized/images/2021-05-24/1024/demo.png 1024w,    /assets/resized/images/2021-05-24/1280/demo.png 1280w"/>
</p></div>


<p>24 May 2021</p>

<p>I have created a Blender plugin that takes an image texture with some structure and generates an animation of how this structure grows. To be more precise, it creates a non-color data image with the animation information that can be used in a shader. Since animations are hard to describe in words or individual images, I highly recommend the video describing this plugin.</p>

<figure>
<a href="https://youtu.be/2a2vZFN38zk" target="_blank">
<img src="https://there.oughta.be/assets/resized/images/2021-05-24/1280/youtube.jpg" alt="Thumbnail of the youtube video showing a blue glowing mace with the video title on top." srcset="    /assets/resized/images/2021-05-24/640/youtube.jpg 640w,    /assets/resized/images/2021-05-24/768/youtube.jpg 768w,    /assets/resized/images/2021-05-24/1024/youtube.jpg 1024w,    /assets/resized/images/2021-05-24/1280/youtube.jpg 1280w, /assets/images/2021-05-24/youtube.jpg 1920w"/>
</a>
<figcaption>Click the image to see the video on youtube.com.</figcaption>
</figure>

<p>If you are only looking for specific information or the download of the plugin, have a look at this article. It serves as the documentation, but it will have only little explanation of how the plugin works and how the results can be used. Refer to the video for these details and to see how the plugin is used in Blender as shown in the actual Blender user interface.</p>

<!--more-->

<h2 id="installation">Installation</h2>

<p>You can get the Blender plugin<sup id="fnref:addon" role="doc-noteref"><a href="#fn:addon">1</a></sup> from my <a href="https://github.com/Staacks/blender-plugins" target="_blank">github repository</a>. Just download the <code>py</code>-file in the <code>growth-image</code> repository and save it wherever you like. Since this article might be interesting to others than my usual audience, a little hint to those not familiar with github: Click the file and when you see the source code right-click on the “Raw” button in the top-right corner and select “save link as…” (or similar, depending on language and browser).</p>

<p>In Blender, open up the <em>preferences</em> dialog, switch to the <em>Add-ons</em> section and pick the <em>Install…</em> button in the top-right corner. Navigate to wherever you saved the <code>py</code>-file and double click it. <strong>Important</strong>: It should now show <em>growth image</em> in the list of plugins, but it is not yet activated. You need to check the box next to it to actually enable the plugin.</p>

<p>The plugin only adds a single function to blender, called <em>generate growth data image</em>. This function can be found in the <em>Image</em>-menu of the <em>image editor</em>, which in turn can be found on the UV editing workspace, the texture paint workspace or the shading workspace. Pretty much in any place, where you can select and view your loaded images.</p>

<figure>

<img src="https://there.oughta.be/assets/images/2021-05-24/location.png" alt="Screenshot of a menu in Blender." srcset=" /assets/images/2021-05-24/location.png 471w"/>

<figcaption>Location of &#39;generate growth data image&#39; in the image editor in the bottom-left corner of the default shader workspace.</figcaption>
</figure>

<p><strong>Warning</strong>: At the time of this writing, the computations of the plugin cannot be canceled. Usually, they are done in under a minute, but if you want to process particularly large images or use a large <em>influence radius</em> (see below) the processing can take significantly longer. If it takes too long, your only option is to kill Blender, so please make sure to save your work before getting too experimental.</p>

<h2 id="what-it-does">What it does</h2>

<p>Ok, it is a bit strange to give installation instructions before explaining what it does. But I suspect that quite a few users will have a look at the video to get an idea what it does and only visit this article to get the plugin itself. So, sorry about that and thanks for reading on. But, truth being told, it is easier to convey how to use it in moving images, so I would once again recommend the <a href="https://youtu.be/2a2vZFN38zk" target="_blank">video on youtube</a>. If you prefer text, let me at least show you an example result:</p>

<figure>

<video autoplay="" loop="" muted="" playsinline="">
  <source src="/assets/images/2021-05-24/height-demo.mp4" type="video/mp4"/>
</video>

<figcaption>A demonstration of the plugin data driving the displacement output of a shader.</figcaption>
</figure>

<p>The idea is that you have some kind of image texture that shows a structure with a bunch of paths, like the maze in the example above or tracks on a PCB<sup id="fnref:pcb" role="doc-noteref"><a href="#fn:pcb">2</a></sup> and feed this to the plugin. It will create an animation of how these paths grow and store the animation data in a second image<sup id="fnref:name" role="doc-noteref"><a href="#fn:name">3</a></sup> using non-color data. You can load this generated image into a shader and use its blue channel to animate various properties of your shader. The blue channel contains a timestamp, so add a value input to your shader as a reference timestamp (i.e. animate it with keyframes) and compare the blue channel of the generated image to this timestamp to influence properties of your shader.</p>

<figure>

<img src="https://there.oughta.be/assets/resized/images/2021-05-24/1280/shader.png" alt="Screenshot of a shader in Blender, showing four nodes." srcset="    /assets/resized/images/2021-05-24/640/shader.png 640w,    /assets/resized/images/2021-05-24/768/shader.png 768w,    /assets/resized/images/2021-05-24/1024/shader.png 1024w,    /assets/resized/images/2021-05-24/1280/shader.png 1280w, /assets/images/2021-05-24/shader.png 1486w"/>

<figcaption>Example of how the resulting image can be used in a shader. The timestamp on the blue channel is compared to an arbitrarily animated reference timestamp of a value input node.</figcaption>
</figure>

<p>You can see an excerpt of a shader comparing the blue channel to an animated value above. Again, see the video for a detailed example.<sup id="fnref:youtube" role="doc-noteref"><a href="#fn:youtube">4</a></sup></p>

<h2 id="how-it-works">How it works</h2>

<p>The growth animation is based on a path finding algorithm called <a href="https://en.wikipedia.org/wiki/A*_search_algorithm" target="_blank"><em>A*</em> (<em>A star</em>)</a>. From a starting point it calculates the path to each pixel with the lowest cost. The cost is just a value that you can associate to each pixel and the cost of a path is the sum of all the costs for the pixels along that path. For example, you can define that a white pixel costs 1 while a black pixel costs 5. A path over four white pixels would cost 4 and is preferred over a (shorter) path of a black and a white pixel with a total cost of 6. So, in this example, black pixels act as “walls”, although weak ones. If crossing a black wall costs 5, the algorithm will still cross that wall if the alternative would be a detour of 6 white pixels with a cost of 1 each.</p>

<p>The default value of the plugin for the cost of black pixels is 1 million, so by default the algorithm should only cross the walls as a last resort if no alternative path exists. Depending on your goals and your reference image, you can of course adjust this behavior in the options (see below).</p>

<h2 id="output">Output</h2>

<p>As mentioned above, the output is an image with non-color data. Still it uses the red, green and blue channels that need to be separated in Blender. In most cases you would use the blue channel as it contains a timestamp for animations. Depending on how you set up the time per pixel (see below), this timestamp can be compared to animation frames, but most of the time it is just an arbitrary value and you would animate a reference timestamp.</p>

<p>The other channels contain additional data from the path finding algorithm. Red contains the total cost to get to each pixel, which could theoretically be used for the animation as well. The downside of doing so is that giving a high cost penalty for crossing walls (like the default of one million) will also block your animation in situations in which crossing a wall is unavoidable. So, setting a low animation delay but high cost for walls is usually preferable.</p>

<p>Finally, the green channel contains the total distance along the path with lowest total cost to each pixel. This can be helpful to change properties along these paths like a color changing with the distance traveled.</p>

<h2 id="options">Options</h2>

<p>Finally, let’s have a look at the individual options that pop up when generating the growth image:</p>

<figure>

<img src="https://there.oughta.be/assets/images/2021-05-24/menu.png" alt="Screenshot of the option menu of the plugin." srcset=" /assets/images/2021-05-24/menu.png 308w"/>

<figcaption>The option menu of the plugin.</figcaption>
</figure>

<ul>
  <li>
    <p><em>Origin</em> is a simple 2D vector ranging from (0,0) to (1,1). It describes the starting point of the growth within the source image and it works similar to UV coordinates. So, the default value of (0.5, 0.5) is in the center of the image.</p>
  </li>
  <li>
    <p><em>Influence radius</em> sets which pixels are considered to be “neighbors” in the path searching algorithm. The distance to the next pixels (above, below, left and right) is 1. The diagonals would be 1.41 (square root of 2) and the next ones along a straight line would be 2. It is the actual distance in pixels.</p>

    <p>The point of this setting is that allowing only the next neighbors heavily emphasizes horizontal and vertical movement as diagonals can only be achieved by moving two pixels. The result is that a growth animation without nearby walls has a diamond shape.</p>

    <p>Increasing the <em>influence radius</em> gets rid of the diamond shape with two downsides: The calculation can get much slower<sup id="fnref:slower" role="doc-noteref"><a href="#fn:slower">5</a></sup> and the paths can skip walls that are thinner than the <em>influence radius</em>.</p>
  </li>
  <li>
    <p><em>Reference channel</em> determines if the red, green, blue or alpha channel is taken from the source image. On a black and white image (as used in the examples above) this does not matter, but on images not designed for this purpose, you might want to think about which channel to use. The meaning of the channel is also strongly influenced by the next option.</p>
  </li>
  <li>
    <p><em>Threshold</em> splits the pixels on the channel picked by <em>reference channel</em> into two sets. Any value on this channel above <em>threshold</em> is treated as one type (for example walls) and any value below as the other type (for example valid paths). Which is which depends on the costs you apply to each with the following options.</p>
  </li>
  <li>
    <p><em>Cost above threshold</em> sets the cost for pixels above the <em>threshold</em> value. The default is 1.0, so white pixels would represent paths.</p>
  </li>
  <li>
    <p><em>Cost below threshold</em> sets the cost for pixels below the <em>threshold</em> value. The default is 1 million, so black pixels would represent walls.</p>
  </li>
  <li>
    <p><em>Time above threshold</em> sets the time for pixels above the <em>threshold</em> value. This can be set independently of the costs and you can use units of your choice.</p>
  </li>
  <li>
    <p><em>Time below threshold</em> same as <em>Time above threshold</em> but, well, you might have guessed it, below the <em>threshold</em>.</p>
  </li>
</ul>

<p>That’s it for the documentation. I hope you were able to follow, but feel free to discuss it or ask questions on Youtube or Reddit (I will post it in <a href="https://www.reddit.com/r/blender/" target="_blank">r/blender</a> and <a href="https://www.reddit.com/r/thereoughtabe/" target="_blank">r/there.oughta.be</a>). If you find a use for this plugin, I would be happy if you shared the results with me.</p>




    

  

</div>
  </body>
</html>
