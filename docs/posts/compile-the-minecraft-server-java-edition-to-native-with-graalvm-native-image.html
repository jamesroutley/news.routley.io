<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/hpi-swa/native-minecraft-server">Original</a>
    <h1>Compile the Minecraft Server (Java Edition) to Native with GraalVM Native Image</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto"><a href="https://github.com/hpi-swa/native-minecraft-server/actions/workflows/main.yml"><img src="https://github.com/hpi-swa/native-minecraft-server/actions/workflows/main.yml/badge.svg" alt="Build Native Minecraft Server"/></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/hpi-swa/native-minecraft-server/blob/main/assets/graalvm_native_image_minecraft_banner.jpg"><img src="https://github.com/hpi-swa/native-minecraft-server/raw/main/assets/graalvm_native_image_minecraft_banner.jpg" alt="Banner"/></a></p>
<p dir="auto">The Minecraft server is known to require a lot of CPU and memory resources and can be hard to deploy.
This project makes it possible to compile the Minecraft server into a self-contained native executable using <a href="https://www.graalvm.org/native-image/" rel="nofollow">GraalVM Native Image</a>.
As such, it is supposed to require fewer CPU and memory resources, provide better startup times, and be easier and cheaper to deploy.</p>
<p dir="auto">A native Minecraft server is less than 120MB in size, and with that significantly smaller than Minecraft&#39;s <code>server.jar</code> plus a JDK required to run it.
With <a href="https://upx.github.io/" rel="nofollow">upx</a> compression, the size of the native executable can be reduced even further to less than 40MB, which is smaller than just the <code>server.jar</code>.
Initial experiments also suggest competitive run-time performance with a reduced memory footprint.
For best results, build with <a href="https://www.oracle.com/downloads/graalvm-downloads.html" rel="nofollow">GraalVM Enterprise</a> Native Image, which provides better performance and lower memory usage than the Community Edition, and try out the <a href="https://www.graalvm.org/22.2/reference-manual/native-image/optimizations-and-performance/MemoryManagement/" rel="nofollow">G1 GC</a> and <a href="https://www.graalvm.org/22.2/reference-manual/native-image/guides/optimize-native-executable-with-pgo/" rel="nofollow">Profile-Guided Optimizations</a>.
The <a href="https://www.oracle.com/cloud/free/" rel="nofollow">Oracle Cloud Free Tier</a> not only provides four Ampere A1 cores and 24 GB of RAM always free, which is plenty for <a href="https://blogs.oracle.com/developers/post/how-to-set-up-and-run-a-really-powerful-free-minecraft-server-in-the-cloud" rel="nofollow">hosting a Minecraft server</a>, but also free access to GraalVM Enterprise.</p>
<p dir="auto">Check out <a href="https://medium.com/p/1a3f6a92eb48" rel="nofollow">this blog post</a> for more information.</p>
<p dir="auto"><em>Disclaimer: This project is meant for demonstration purposes only and intended to help the Minecraft community evaluate the use of GraalVM Native Image. Please use at your own risk.</em></p>
<h2 dir="auto"><a id="user-content-getting-started" aria-hidden="true" href="#getting-started"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Getting Started</h2>
<ol dir="auto">
<li>Download GraalVM <a href="https://github.com/graalvm/graalvm-ce-builds/releases/latest">Community</a> or <a href="https://www.oracle.com/downloads/graalvm-downloads.html" rel="nofollow">Enterprise</a> <em>(GraalVM 22.2.0 or later is required)</em>.</li>
<li>Download or check out this repository and run the <a href="https://github.com/hpi-swa/native-minecraft-server/blob/main/build.sh"><code>build.sh</code></a>.</li>
<li>Launch the native Minecraft server with <code>./native-minecraft-server</code>.</li>
</ol>
<h2 dir="auto"><a id="user-content-how-it-works" aria-hidden="true" href="#how-it-works"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How It Works</h2>
<p dir="auto">This project only contains the <code>build.sh</code> script and <a href="https://www.graalvm.org/22.2/reference-manual/native-image/metadata/" rel="nofollow">reachability metadata</a> for building a native Minecraft server.
The <code>build.sh</code> script first downloads Minecraft&#39;s <code>server.jar</code> and extracts jars and other resources from it.
Afterward, it invokes GraalVM Native Image with an appropriate configuration to generate a native version of the Minecraft server.
Finally, and only if <a href="https://upx.github.io/" rel="nofollow">upx</a> is on the <code>$PATH</code>, the script will compress the native executable.</p>
<h2 dir="auto"><a id="user-content-limitations-and-known-issues" aria-hidden="true" href="#limitations-and-known-issues"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Limitations and Known Issues</h2>
<ul dir="auto">
<li>The configuration currently only supports Minecraft <code>1.18.2</code>.</li>
<li>The server GUI is not yet supported.</li>
<li>Mods are currently not supported.</li>
<li>There is no build script for Windows yet, but the <a href="https://docs.microsoft.com/en-us/windows/wsl/install" rel="nofollow">WSL</a> should work.</li>
<li>The native executable sometimes fails on startup. Restarting it a few times usually helps.</li>
</ul>
<h2 dir="auto"><a id="user-content-contributions" aria-hidden="true" href="#contributions"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Contributions</h2>
<p dir="auto">Please <a href="https://github.com/hpi-swa/native-minecraft-server/issues">report any issues here on GitHub</a> and open pull requests if you&#39;d like to contribute to the project.</p>
<h2 dir="auto"><a id="user-content-license" aria-hidden="true" href="#license"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h2>
<p dir="auto">This project is released under the <a href="https://github.com/hpi-swa/native-minecraft-server/blob/main/LICENSE">MIT license</a>.</p>
</article>
          </div></div>
  </body>
</html>
