<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.holm.dog/2025/01/finding-many-paths-to-moving-target-in.html">Original</a>
    <h1>Pathfinding to a moving target in evolving terrain</h1>
    
    <div id="readability-page-1" class="page"><div>
<div id="post-body-2440525117873833068">
<p>In this post, I&#39;m going to describe how I used direction fields to introduce fast and dynamic pathfinding to a browser game.</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgEVTylj2P9aw_KUIV2epXPPMl3HsGuzW6ElICgGFma2fjPpg8_DfY46H-jk_1Du4SIx8aSDtNokvuvOXRwLCmq4e1rV5hb-h099gka4QkZiIF26KXM55fPeiDpWS59E9nqlQlUPh8h-QIK1jGT3OtFBi6QAGf4Bh85IyKX6qC6UnoR9NuP7NMMW6CCTJL-/s800/ezgif-2-bc86b59424.gif"><img data-original-height="500" data-original-width="800" height="400" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgEVTylj2P9aw_KUIV2epXPPMl3HsGuzW6ElICgGFma2fjPpg8_DfY46H-jk_1Du4SIx8aSDtNokvuvOXRwLCmq4e1rV5hb-h099gka4QkZiIF26KXM55fPeiDpWS59E9nqlQlUPh8h-QIK1jGT3OtFBi6QAGf4Bh85IyKX6qC6UnoR9NuP7NMMW6CCTJL-/w640-h400/ezgif-2-bc86b59424.gif" width="640"/></a></p><p><span>I recently published a free browser game, developed in Unity, called </span><i><a href="https://holmdog.itch.io/build-brawl">Build + Brawl</a></i><span><i>. </i></span><span>In <i>Build + Brawl</i>, the player moves their character to avoid swarms of approaching enemies. The environment contains impassable obstacles</span><span> — </span><span>some generated at random, some placed by the player — that the enemies must route around as they approach the player. There are off-the-shelf solutions for pathfinding in general using algorithms like </span><a href="https://en.wikipedia.org/wiki/A*_search_algorithm">A*</a><span> [1]; however, there were a few quirks to </span><i>Build + Brawl</i><span> that pushed me to roll my own solution:</span></p><ul><li>There may be hundreds of enemies routing to the player at once.</li><li>The enemies all start from different, randomized positions.</li><li>The player character can move.</li><li>The player can add or remove obstacles during the game.</li><li>The game must run in realtime, without lag, single-threaded, in the browser.</li></ul><p>Running A* worked fine in a high-resource desktop environment, but introduced noticeable lag in the browser. The next two parts detail how I fixed this.</p><h2>Part 1: hunting down a moving target</h2><p>Let&#39;s first ignore the fact that the player can add or remove obstacles, and focus on the narrower problem: routing the enemies towards the player, even as the player moves around. There are a few attributes of the <i>Build + Brawl </i>scenario that A* does not fully leverage:</p></div>
</div></div>
  </body>
</html>
