<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://briankung.dev/2022/06/14/rust-advocacy-at-a-medium-sized-startup/">Original</a>
    <h1>Rust advocacy at a medium-sized startup</h1>
    
    <div id="readability-page-1" class="page"><div>
<p>At Hologram, I loved getting to sign into work Slack and share knowledge with fellow software engineers of all experience levels. There were about 40 engineers in a company closing in on 200 employees.</p>



<p>Meanwhile, the biggest change in my career as a software engineer recently has been learning Rust, which I‚Äôve been calling a ‚Äúcompiler-guided tour to systems programming.‚Äù For me, it has been that and more ‚Äì I accidentally fell in love with Rust‚Äôs well-crafted APIs, its high assurance qualities, and its community of like-minded and diverse Rustaceans.</p>



<p>I still kept quiet about it because I thought it was irrelevant to our current stack. I also thought that my job as a software engineer was primarily to write code. I hadn‚Äôt considered that organizational initiatives were a natural extension of a software engineer‚Äôs ‚Äì or more to the point, any employee‚Äôs ‚Äì role.</p>



<p>That lasted until my coworker Doug unleashed the floodgates by inviting me to pitch Rust in one of the company‚Äôs weekly ‚ÄúBackend Guild‚Äù video calls (thanks, Doug! üëã). I can‚Äôt remember what I said at the moment, but I tried to quickly and concisely sum up the aspects of Rust that appealed to me. It must have sounded at least somewhat compelling, though, because someone encouraged us to work on a spike and some proof of concepts, to which I responded by impulsively creating a Slack channel dedicated for what would become the Rust spike initiative.</p>



<figure><a href="https://briankung.files.wordpress.com/2022/06/ikj0dtd2q1f70pjtxzejahfajh0lkkcdtnuxmwt8dl0.webp"><img loading="lazy" width="1200" height="859" data-attachment-id="1127" data-permalink="https://briankung.dev/2022/06/14/rust-advocacy-at-a-medium-sized-startup/ikj0dtd2q1f70pjtxzejahfajh0lkkcdtnuxmwt8dl0/" data-orig-file="https://briankung.files.wordpress.com/2022/06/ikj0dtd2q1f70pjtxzejahfajh0lkkcdtnuxmwt8dl0.webp" data-orig-size="1200,859" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="ikj0dtd2q1f70pjtxzejahfajh0lkkcdtnuxmwt8dl0" data-image-description="" data-image-caption="" data-medium-file="https://briankung.files.wordpress.com/2022/06/ikj0dtd2q1f70pjtxzejahfajh0lkkcdtnuxmwt8dl0.webp?w=300" data-large-file="https://briankung.files.wordpress.com/2022/06/ikj0dtd2q1f70pjtxzejahfajh0lkkcdtnuxmwt8dl0.webp?w=1024" src="https://briankung.files.wordpress.com/2022/06/ikj0dtd2q1f70pjtxzejahfajh0lkkcdtnuxmwt8dl0.webp?w=1024" alt="A technicolor logo with (I think) 1980s styling proclaiming &#34;Rust Evangelism Strike Force&#34;"/></a><figcaption><em>Rust Evangelism Strike Force, coming soon to a company near you!</em></figcaption></figure>



<p>Hologram had ‚ÄúFlex Fridays‚Äù in which no meetings were scheduled and you could work in a more self-directed way. Flex Fridays became a flurry of Rust-based initiatives for me, including onboarding people interested in Rust onto the ecosystem and walking them through some of the highlights, writing proof of concept code, and writing documentation ‚Äì so much documentation. Everything became documentation ‚Äì the merge requests (MRs are PRs in GitLab parlance), Backend Guild presentations, and one-on-one screensharing sessions were all captured and labeled in Notion to build what I hoped would become a library of Hologram-specific resources for onboarding on to the Rust ecosystem.</p>



<p>Alas, it was not to be. So here are my hopes and dreams, as well as some of the obstacles we met along the way.</p>



<p>I will preface the rest of this post by saying that it is not quantitative by any means. I would have loved to show a histogram of lines of Rust code in production or numbers of developers onboarded, but I never got that far before the company laid off 40% of staff, myself included.</p>



<h2>‚ÄúWhy not Go?‚Äù</h2>



<figure><a href="https://briankung.files.wordpress.com/2022/06/1-ifpd_htdik9u6h68szgnua.png"><img loading="lazy" width="1200" height="677" data-attachment-id="1129" data-permalink="https://briankung.dev/2022/06/14/rust-advocacy-at-a-medium-sized-startup/1-ifpd_htdik9u6h68szgnua/" data-orig-file="https://briankung.files.wordpress.com/2022/06/1-ifpd_htdik9u6h68szgnua.png" data-orig-size="1200,677" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="1-ifpd_htdik9u6h68szgnua" data-image-description="" data-image-caption="" data-medium-file="https://briankung.files.wordpress.com/2022/06/1-ifpd_htdik9u6h68szgnua.png?w=300" data-large-file="https://briankung.files.wordpress.com/2022/06/1-ifpd_htdik9u6h68szgnua.png?w=1024" src="https://briankung.files.wordpress.com/2022/06/1-ifpd_htdik9u6h68szgnua.png?w=1024" alt="" srcset="https://briankung.files.wordpress.com/2022/06/1-ifpd_htdik9u6h68szgnua.png?w=1024 1024w, https://briankung.files.wordpress.com/2022/06/1-ifpd_htdik9u6h68szgnua.png?w=150 150w, https://briankung.files.wordpress.com/2022/06/1-ifpd_htdik9u6h68szgnua.png?w=300 300w, https://briankung.files.wordpress.com/2022/06/1-ifpd_htdik9u6h68szgnua.png?w=768 768w, https://briankung.files.wordpress.com/2022/06/1-ifpd_htdik9u6h68szgnua.png 1200w" sizes="(max-width: 1024px) 100vw, 1024px"/></a></figure>



<p>The issue of whether or not to use Go instead of Rust seems inevitable in any organization. I personally have not used Go in any professional capacity, so my authority on the topic is limited. I will say that, from what I‚Äôve heard of it, I would likely be more excited to learn and use Go than, for example, Python.</p>



<p>(Sorry Python folks, it‚Äôs close enough to Ruby to give me an uncanny valley effect and I also don‚Äôt want to evaluate which of the many dependency management systems that have sprung up will work the best for me.)</p>



<p>Here are the good things I‚Äôve heard about Go:</p>



<ul><li>Straightforward language and syntax</li><li>Fast compile times</li><li>‚ÄúBatteries included‚Äù for web development</li><li>Concurrency primitives included</li><li>Extremely good performance out of the box</li><li>Cross-platform compilation</li><li>Statically typed</li><li>Compiles down to binaries</li></ul>



<p>I <em>absolutely</em> did not want this to turn into a language flame war, but unfortunately there‚Äôs something about either the closeness of the release dates of the two languages or their mutual reputations as ‚Äúsystems‚Äù programming languages that brings them into contrast with each other. I still don‚Äôt want to talk about either language in the framework of ‚ÄúGo vs. Rust,‚Äù so I‚Äôll talk about the context that directly lead to that comparison, instead.</p>



<p>Shortly before I had joined Hologram, there was an official decision made in the engineering department to adopt two more languages: Go and Typescript. Naturally, when we started talking about adding yet another language, comparisons with Go came up, though in retrospect, it‚Äôs a bit puzzling why Typescript was largely left out of that conversation.</p>



<p>When I started to join Rust advocacy efforts, Doug and I were counseled to know our ‚Äúopponent‚Äù (Go) inside and out, to position Rust as being better than Go, and to really make a business savvy case for Rust. I took this advice to heart, but I also felt that something was off.</p>



<p>I didn‚Äôt want to talk about Go because it‚Äôs simply not what I was passionate about. I also didn‚Äôt want to put down Go users in the company. I just wanted to extol the benefits of Rust and see if anyone was interested in trying it out.</p>



<p>Which brings me to my next point. I thought at first that I had to convince The Company to add it to The Stack‚Ñ¢. In actual fact, I had two broad categories of stakeholders to convince, not one Company.</p>



<h2>Stakeholder #1: The Business</h2>



<figure><a href="https://briankung.files.wordpress.com/2022/06/the-lego-movie-lord-business-1-dragged.jpg"><img loading="lazy" width="498" height="208" data-attachment-id="1132" data-permalink="https://briankung.dev/2022/06/14/rust-advocacy-at-a-medium-sized-startup/the-lego-movie-lord-business-1-dragged-2/" data-orig-file="https://briankung.files.wordpress.com/2022/06/the-lego-movie-lord-business-1-dragged.jpg" data-orig-size="498,208" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;1&#34;}" data-image-title="the-lego-movie-lord-business-1-dragged" data-image-description="" data-image-caption="" data-medium-file="https://briankung.files.wordpress.com/2022/06/the-lego-movie-lord-business-1-dragged.jpg?w=300" data-large-file="https://briankung.files.wordpress.com/2022/06/the-lego-movie-lord-business-1-dragged.jpg?w=498" src="https://briankung.files.wordpress.com/2022/06/the-lego-movie-lord-business-1-dragged.jpg?w=498" alt="" srcset="https://briankung.files.wordpress.com/2022/06/the-lego-movie-lord-business-1-dragged.jpg 498w, https://briankung.files.wordpress.com/2022/06/the-lego-movie-lord-business-1-dragged.jpg?w=150 150w, https://briankung.files.wordpress.com/2022/06/the-lego-movie-lord-business-1-dragged.jpg?w=300 300w" sizes="(max-width: 498px) 100vw, 498px"/></a></figure>



<p>The Business wants to know why we should invest engineering time into another technology. The Business is about Return on Investment (ROI), and The Business will make do with what we have in order to get things done on time and under budget. The Business will make nuanced arguments about balancing tech debt versus expansion.</p>



<p>I‚Äôm not disparaging business interests ‚Äì it‚Äôs important to understand, and it‚Äôs part of why any of us are even employed. In fact, one of the biggest lessons I learned from Hologram is how every engineer can focus on <a href="http://www.effectiveengineer.com/">leverage</a> in order to have the biggest positive impacts on business.</p>



<p>I had a few ideas on how to convince The Business that Rust was worth investing in.</p>



<h3>Bug case studies</h3>



<p>I kept an eye out fixes for bugs that would have been entirely prevented or greatly mitigated in a Rust ecosystem. All of the ones I can remember (invalid array accesses, null return value, empty set checks) would have been caught by returning Rust‚Äôs <code>Option</code> variants for operations.</p>



<p>Then I estimated how much time it took each developer to find and fix these bugs. Developer time translates into money, and these types of bugs were costing a pretty penny. There were two particularly bad weeks where using Rust would have saved a combined 3 weeks worth of developer time. Whether or not they caused any customer-facing issues is also worth noting.</p>



<p>I made sure to write the case studies up, including what happened, how it impacted engineering time, and how writing such bugs would have been impossible or unidiomatic in Rust.</p>



<p>I presented the case studies during a Backend Guild video call and filed the recording away for later reference.</p>



<h3>The case against Go</h3>



<p>We were challenged to provide a <em>gap analysis</em> for using Rust over Go. I‚Äôll go into more detail about why I didn‚Äôt like that framing in a separate section, but to sum up in bullet points, I said:</p>



<ul><li>Error handling in Go is optional and not ergonomic</li><li>Nils and other issues can slip by Go‚Äôs type system</li><li>Rust‚Äôs platform support means that it can be deployed to anywhere from embedded systems to backend web servers</li></ul>



<p>I read a lot about Go experiences, like these:</p>



<ul><li><a href="https://typesanitizer.com/blog/go-experience-report.html">Experience Report: 6 months of Go</a></li><li><a href="https://eng.uber.com/data-race-patterns-in-go/">Data Race Patterns in Go</a></li><li><a href="https://fasterthanli.me/articles/lies-we-tell-ourselves-to-keep-using-golang">Lies we tell ourselves to keep using Golang</a></li></ul>



<p>I also made sure to connect Rust‚Äôs benefits over Go with the Engineering department‚Äôs started charter values, like how we generally end up going all in for the difficult, more widely applicable technologies, and how we needed to be business savvy ‚Äì and squashing bugs before they reach customers is business savvy, especially for an infrastructure company like Hologram!</p>



<p>Yet, it made me sad to look up articles on the language just to, in effect, bash it. I‚Äôm not generally in the business of discouraging people from coding, regardless of what their favorite programming language was. If I were, I don‚Äôt think I would have been working on a legacy PHP code base, myself.</p>



<p>Which brings me to the second category of stakeholders who we needed to convince.</p>



<h2>Stakeholder #2: The Engineers</h2>



<figure><a href="https://briankung.files.wordpress.com/2022/06/20101209-1.gif"><img loading="lazy" width="540" height="701" data-attachment-id="1109" data-permalink="https://briankung.dev/2022/06/14/rust-advocacy-at-a-medium-sized-startup/20101209-1/" data-orig-file="https://briankung.files.wordpress.com/2022/06/20101209-1.gif" data-orig-size="540,701" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="20101209-1" data-image-description="" data-image-caption="" data-medium-file="https://briankung.files.wordpress.com/2022/06/20101209-1.gif?w=231" data-large-file="https://briankung.files.wordpress.com/2022/06/20101209-1.gif?w=540" src="https://briankung.files.wordpress.com/2022/06/20101209-1.gif?w=540" alt="Image of a comic with a vertical column containing two panels. In the top panel, an interviewer holding a notebook asks a spectacled male-presenting person &#34;Why is it important to learn Rust&#34; with &#34;learn Rust&#34; having clearly been edited into the image in place of the original text. The interviewee responds &#34;Oh! It has future applications in propulsion energy creation, data transmission, you name it!&#34;

In the bottom panel, the same interviewer asks the same question, &#34;Why is it important to learn Rust?&#34; and the interviewee, a disheveled male-presenting person with unshaven facial hair responds &#34;Because it&#39;s fucking AWESOME.&#34;

The original comic is here: https://www.smbc-comics.com/index.php?db=comics&amp;id=2088#comic"/></a><figcaption><em>Apologies to <a href="https://www.smbc-comics.com/index.php?db=comics&amp;id=2088#comic">Saturday Morning Breakfast Cereal</a> for my hack job</em></figcaption></figure>



<p>In a perfectly rational world, we would all make perfectly rational decisions for ourselves and for the business. These decisions would be carefully weighed until the optimal time and then executed.</p>



<p>But that‚Äôs not how humans work. For one, we all have different priorities. There was the engineering manager who was constantly pushing us to write more documentation. There was devops, who wrote a Go CLI tool to orchestrate pipeline tasks. There was the billing department, which I was on, which put out fires necessary to earning the trust of our customers and their wallets. And there were plenty of engineers who just wanted to go along their days and get things done.</p>



<p>Ultimately, it was these folks who we had to convince. In retrospect, while the business had been officially convinced of the use of Go and Typescript through our decision making processes, the proof, as they say, is in the pudding, and engineers were still writing Javascript and PHP. Their minds may have been made, but their hearts hadn‚Äôt been won.</p>



<p>This was also where, in my opinion, the real difference was made. If we won people‚Äôs hearts, the business case for the language would be made, as all the engineers would want to write Rust, anyway.</p>



<p>Here‚Äôs how I had been planning to win my fellow colleagues over <s>to the dark side</s>:</p>



<h3>Personalized onboarding</h3>



<p>One of the first things I offered to do was to use our Flex Fridays to onboard people to the new language. It entailed getting a working Rust toolchain up and running and maybe a brief tour of high level language features.</p>



<p>I tried to remember to ask if we could record each session, both for later publication and to see if there were common aspects of onboarding that were problematic. I viewed it as an exercise in customer development, Lean Startup style, as much as an active tutorial.</p>



<p>We did a few of these with people from different backgrounds. One principal engineer with Swift experience compared it to guard lets and other features from Swift. Another engineer found the tooling and ecosystem quite fascinating. And a QA team lead had a lot of fun in our introduction to Rust‚Äôs built-in testing capabilities.</p>



<p><strong>Goals:</strong></p>



<ul><li>Get people over the ‚Äúgetting started‚Äù hump</li><li>Give high level overview of Rust toolchain features</li><li>Bolster documentation with videos</li></ul>



<p><strong>Metrics:</strong></p>



<ul><li>Number of engineers onboarded: 4</li><li>Videos added to documentation: 2</li></ul>



<h3>Proof of concepts</h3>



<p>In our use of the term proof of concept, it was less about feasibility studies and more about small code spikes to disseminate learning. To that end, I wrote one proof of concept myself, a cross-platform (Unixes + Windows!) hosts file editor for local development, and contributed to another proof of concept that Doug had started involving DNS.</p>



<p>For both of these, I posted MRs to the Rust slack channel so that everyone could get context. And in the MRs themselves, I went into great detail on the Rust features I was using and why, like <a href="https://doc.rust-lang.org/stable/book/ch05-01-defining-structs.html#creating-instances-from-other-instances-with-struct-update-syntax">Struct Update Syntax</a>, or <a href="https://doc.rust-lang.org/rust-by-example/meta/doc.html#doc-comments">doc comments</a>. Of course, in a production code base with shared context around the language and ecosystem, these explanations would be overly long winded and superfluous. But since our deliverable for these proof of concepts was education, it was appropriate to bloviate a little.</p>



<p><strong>Goals:</strong></p>



<ul><li>Write proof of concepts</li><li>Submit code changes for review by non-Rust users</li><li>Assess feasibility of using Rust</li></ul>



<p><strong>Metrics:</strong></p>



<ul><li>Proof of concepts written: 2</li><li>Merge requests: 6</li><li>Merge requests with extra details: 3</li></ul>



<h3>Presentations</h3>



<p>As I mentioned before, we had a Backend Guild video call every week. I like public speaking, so I used the opportunity to talk about Rust when I had something to talk about.</p>



<p>One of the engineering managers mentioned that she needed better documentation, so I whipped up a quick demonstration of Rust doc comments and doc tests. It helps that documentation is a first class citizen in the Rust ecosystem, so it was easy to do so on the fly. It was a demonstration of the built in documentation, how doc comments get included in the by the doc builder, and how the doc tests are executed and run as code.</p>



<p>I also presented an argument for Rust, the language as a whole, with the main points being the documentation, safety (in terms of impact of bugs on the business), and community. I think Rust‚Äôs diverse and inclusive community (and therefore steering parties via teams and work groups) is perhaps one of its biggest strengths, which manifests itself in a very nuanced, safe, and comprehensive language.</p>



<p><strong>Goals:</strong></p>



<ul><li>Introduce the general engineering department to Rust and specific Rust features</li><li>Keep engineering updated on Rust spike initiatives</li><li>Add videos to documentation</li></ul>



<p><strong>Metrics:</strong></p>



<ul><li>Rust talks given: 3</li><li>Recordings made: 3</li></ul>



<h3>Documentation</h3>



<p>Because communication and education were key to the Rust spike initiative, documentation was key. I wrote a homepage on our Notion documents entitled ‚ÄúRust Spike ü¶Ä‚Äù which housed all of the above:</p>



<ul><li>Simple getting started guides</li><li>Links to proof of concepts</li><li>Onboarding and presentation videos</li></ul>



<p>Additionally, I started an <code>#eng_spike_rust</code> Slack channel which we casually posted news and MRs to.</p>



<h3>On metrics</h3>



<p>I would have loved to have better metrics of engagement rather than just results, and I hope that someone takes up the mantle and introduces those metrics in my absence. But in an ideal scenario where Rust is officially added to the stack, we would have been able to track better metrics for Rust uptake (depending on goals):</p>



<ul><li>Proportion of Rust code to legacy code</li><li>Proportion of new code bases written in Rust</li><li>Performance and maintenance in Rust vs non-Rust code<ul><li>Bug rates</li><li>Uptime</li><li>Incident rates</li><li>Performance</li></ul></li><li>Usability<ul><li>Number of authors of Rust code</li><li>Time to first contribution</li><li>Satisfaction surveys</li></ul></li></ul>



<p>‚Ä¶and these are just a first pass at what would hopefully be useful metrics. We would likely need to redo based on what ends up being useful to measure.</p>



<h2>Conclusion</h2>



<p>I think company-wide goals and metrics were one place where, if the Go initiative at the company had been stronger, there wouldn‚Äôt have been as much of a vacuum for another language to be considered for general use. Several teams thriving on using Go for their purposes would have made it harder for an arguably marginally better language to shine. Instead, the language stayed siloed in a single repository owned by one team, and the rest of the backend engineers were either stuck on PHP or starting out on Python. In this environment, Rust had a chance, so we made a case for it.</p>



<p>The success of a new language at a company is about the uptake by the individual contributors, and that is a campaign that‚Äôs best made one engineer at a time. That was my starting point, but it would be foolish to leave the business out of the calculus, so I‚Äôm grateful to have been pushed to make a business case for the language as well.</p>



<p>In the end, my time at the company came to a close before I could see the Rust initiative to any sort of fruition, but I‚Äôm grateful that Hologram had that kind of openness to engineer initiatives. It allowed me to learn a lot about advocacy and organizational change.</p>



<p>‚Ä¶even so, I hope to land somewhere that already uses Rust for my next job!</p>
</div></div>
  </body>
</html>
