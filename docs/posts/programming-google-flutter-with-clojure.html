<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/kennytilton/flutter-mx/blob/main/README.md">Original</a>
    <h1>Show HN: Programming Google Flutter with Clojure</h1>
    
    <div id="readability-page-1" class="page"><div>

    <div data-target="readme-toc.content">
      
  


        <div id="readme">
    <article itemprop="text">
<p dir="auto">Programming <a href="https://flutter.dev/?gclid=CjwKCAjwwdWVBhA4EiwAjcYJEEoxUuE14sd2MGLJW35qeuJynmTRjqpUL3SbIUhOiS4TihjyZ9iTVRoCJkoQAvD_BwE&amp;gclsrc=aw.ds" rel="nofollow">Flutter</a> with <a href="https://github.com/Tensegritics/ClojureDart">ClojureDart</a> and <a href="https://github.com/kennytilton/matrix">Matrix</a>, a generic, fine-grained, transparent, reactive state manager.</p>
<h2 dir="auto"><a id="user-content-documentation" aria-hidden="true" href="#documentation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Documentation</h2>
<p dir="auto">Please see our <a href="https://github.com/kennytilton/flutter-mx/wiki">WIP Wiki</a>, or just ping @kennytilton on the #clojurians or #fluttercommunity Slacks and we can pair to get you rolling.</p>
<h2 dir="auto"><a id="user-content-quick-start" aria-hidden="true" href="#quick-start"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Quick Start</h2>
<p dir="auto">If you just want to run the thing...</p>
<h4 dir="auto"><a id="user-content-0-prepare-your-clojuredart-working-set-up-on-mac-os-x" aria-hidden="true" href="#0-prepare-your-clojuredart-working-set-up-on-mac-os-x"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>0. Prepare your ClojureDart working set-up, on Mac OS X</h4>
<p dir="auto">First, complete the <a href="https://github.com/Tensegritics/ClojureDart/blob/main/doc/flutter-quick-start.md">ClojureDart &#34;Flutter Quick Start&#34;</a>. Help with that can be had in the #ClojureDart channel on the #Clojurians Slack. Or ping @kennytilton on that Slack or the Flutter Community Slack.</p>
<h4 dir="auto"><a id="user-content-1-clone-this-repo" aria-hidden="true" href="#1-clone-this-repo"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>1. Clone this repo</h4>
<p dir="auto"><code>git clone https://github.com/kennytilton/flutter-mx</code></p>
<h4 dir="auto"><a id="user-content-2-start-a-simulator-our-focus-so-far-has-been-mobile" aria-hidden="true" href="#2-start-a-simulator-our-focus-so-far-has-been-mobile"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2. Start a simulator. (Our focus so far has been mobile.)</h4>
<p dir="auto">In a terminal:</p>
<ul dir="auto">
<li>start a sim: <code>open -a Simulator</code></li>
</ul>
<p dir="auto">You should see a Simulator appear. I get an iPhone 12 by default. Explore the <code>open</code> command for alternatives.</p>
<p dir="auto">BEWARE! If you forget the step above to open a simulator, the next command will run for ages and <em>open a tab in your browser</em>. Close everything and start over.</p>
<h4 dir="auto"><a id="user-content-3-run-the-sample-app" aria-hidden="true" href="#3-run-the-sample-app"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>3. Run the sample app.</h4>
<p dir="auto">In a terminal:</p>
<ul dir="auto">
<li><code>cd flutter-mx</code>, or wherever you cloned it;</li>
</ul>
<p dir="auto">Next, we build the app and start a &#34;watch&#34; to rebuild when the source changes.</p>
<p dir="auto">HEADS UP! This next command does not return. Use Control-C to kill the process when through exploring:</p>
<ul dir="auto">
<li><code>clj -M -m cljd.build flutter</code></li>
</ul>
<p dir="auto">After a few minutes (just the first time, thirty seconds on subsequent start-ups) you should see these last lines of output:</p>
<div data-snippet-clipboard-copy-content="An Observatory debugger and profiler on iPhone 12 is available at: http://127.0.0.1:61081/v17dEYvUuuQ=/
The Flutter DevTools debugger and profiler on iPhone 12 is available at: http://127.0.0.1:9100?uri=http://127.0.0.1:61081/v17dEYvUuuQ=/"><pre><code>An Observatory debugger and profiler on iPhone 12 is available at: http://127.0.0.1:61081/v17dEYvUuuQ=/
The Flutter DevTools debugger and profiler on iPhone 12 is available at: http://127.0.0.1:9100?uri=http://127.0.0.1:61081/v17dEYvUuuQ=/
</code></pre></div>
<p dir="auto">Now check the simulator you opened earlier. You should see our &#34;hello, world&#34; app in the sim:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/kennytilton/flutter-mx/blob/main/image/hello-world-app.jpg"><img src="https://github.com/kennytilton/flutter-mx/raw/main/image/hello-world-app.jpg" alt="FMX Hello World screenshot"/></a></p>
<p dir="auto">Mr. Kernighan co-authored &#34;The C Programming Language&#34; with Dennis Ritchie, and contributed the bit on &#34;hello, world&#34;.</p>
<p dir="auto">The code for our <code>hello-world</code> is <a href="https://github.com/kennytilton/flutter-mx/blob/main/src/tiltontec/example/x00_hello_world.cljd">here</a>.</p>
<h4 dir="auto"><a id="user-content-4-running-other-examples" aria-hidden="true" href="#4-running-other-examples"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>4. Running other examples.</h4>
<p dir="auto">To try a different example:</p>
<ol dir="auto">
<li>Edit <a href="https://github.com/kennytilton/flutter-mx/blob/d6cd6e14027ed8f00a42ca6cc2464e48142922d4/src/tiltontec/main.cljd#L43">main.cljd</a> and change the namespace <code>hello</code> in <code>(hello/make-app)</code> to one of the namespaces listed above in the NS requires. Try <code>xcounter</code> to see the standard Flutter Counter app, or <code>todo</code> to see the <a href="https://github.com/tastejs/todomvc/blob/master/app-spec.md">TodoMVC classic</a>.</li>
<li>Save your changes.</li>
<li>Now switch back to the &#34;watch&#34; terminal and wait a few seconds until you see that the app has been rebuilt.</li>
<li>Now hit RETURN.</li>
<li>Check the sim to see the new app.</li>
</ol>
<h4 dir="auto"><a id="user-content-5-more-on-the-fluttermx-version-of-todomvc" aria-hidden="true" href="#5-more-on-the-fluttermx-version-of-todomvc"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>5. More on the Flutter/MX version of TodoMVC</h4>
<p dir="auto">Here is a TodoMVC medium screenshot:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/kennytilton/flutter-mx/blob/main/image/todomvc-app.jpeg"><img src="https://github.com/kennytilton/flutter-mx/raw/main/image/todomvc-app.jpeg" alt="f/mx TodoMVC screenshot"/></a></p>
<p dir="auto">Our <code>TodoMVC</code> extends the official spec to include a bit of async handling, in the form of an XHR request: we require an async XHR lookup of the text of a ToDo against the <a href="https://open.fda.gov/" rel="nofollow">OpenFDA</a> Adverse Events registry. If the lookup succeeds, the text color of the Todo must be set to red. There is no point to this, except as a demonstration of how to make a non-reactive API such as XHR reactive, thus handling async gracefully.</p>
<p dir="auto">Well, it also demonstrates the power of reactive programming: if we <em>change</em> a ToDo item, a new lookup is triggered automatically, and the text color gets reconsidered automatically once the new lookup responds.</p>
<h3 dir="auto"><a id="user-content-workflow" aria-hidden="true" href="#workflow"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Workflow</h3>
<p dir="auto">Here is how I work. We will extend this section greatly as we help others get started on Matrix:</p>
<ul dir="auto">
<li>start with the above;</li>
<li>edit this project in IntelliJ+Cursive, with the Flutter plug-in installed;</li>
<li>
<ul dir="auto">
<li>IMPORTANT: tell IntelliJ to use clj formatting for .cljd files; more Cursive support is on the way;</li>
</ul>
</li>
<li>after making changes, I save in IntelliJ and look at the &#34;build&#34; terminal for errors;</li>
<li>if all is well, I switch to the terminal and just hit ENTER to see the changed app;</li>
<li>if I am curious about some CLJD issue, such as how to run the Math <code>abs</code> method, I do this:</li>
<li>
<ul dir="auto">
<li>add snippets of code to the main function, after the test suite runner;</li>
</ul>
</li>
<li>
<ul dir="auto">
<li>save;</li>
</ul>
</li>
<li>
<ul dir="auto">
<li>check the &#34;build&#34; for errors;</li>
</ul>
</li>
<li>
<ul dir="auto">
<li>switch to the build terminal and hit Return to trigger a sim reload;</li>
</ul>
</li>
<li>
<ul dir="auto">
<li>check the Flutter console for print output.</li>
</ul>
</li>
</ul>
<p dir="auto">Ping @kennytilton on #clojurians or #fluttercommunity Slack for help!</p>
</article>
  </div>

    </div>

  </div></div>
  </body>
</html>
