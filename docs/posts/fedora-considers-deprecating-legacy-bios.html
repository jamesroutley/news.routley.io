<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://lwn.net/SubscriberLink/891273/ea9c5e88260a64e9/">Original</a>
    <h1>Fedora considers deprecating legacy BIOS</h1>
    
    <div id="readability-page-1" class="page"><div>
<!-- $Id: slink-none,v 1.2 2005-11-04 22:11:18 corbet Exp $ -->
<blockquote>
<div>
<h3>Welcome to LWN.net</h3>
<p>
The following subscription-only content has been made available to you 
by an LWN subscriber.  Thousands of subscribers depend on LWN for the 
best news from the Linux and free software communities.  If you enjoy this 
article, please consider <a href="https://lwn.net/subscribe/">subscribing to LWN</a>.  Thank you
for visiting LWN.net!
</p></div>
</blockquote>

<p>
A proposal to &#34;deprecate&#34; support for BIOS-only systems for Fedora, by no longer
supporting new installations on those systems, led to a predictably long
discussion on the Fedora devel mailing list.  There are, it seems, quite a few
users who still have BIOS-based systems; many do not want to
have to switch away from Fedora simply to keep their systems up to date.
But, sometime in the future, getting rid of BIOS support seems inevitable since the
burden on those maintaining the tools for installing and booting
those systems is non-trivial and likely to grow over time.  To head
that off, a special interest group (SIG) may form to help keep BIOS support
alive until it really is no longer needed.
</p>

<h4>Proposal</h4>

<p>
The proposal to &#34;<a href="https://fedoraproject.org/wiki/Changes/DeprecateLegacyBIOS">Deprecate
Legacy BIOS</a>&#34; was, as usual, <a href="https://lwn.net/ml/fedora-devel/CA+voJeUhaWcTYRyoj1_4K1PZaf_MmpeVkmg4W67Vm3YHvNcGMg@mail.gmail.com/">posted</a>
on behalf of its owners,  Robbie Harwood, Jiří Konečný, and Brian C. Lane,
by Fedora program manager Ben Cotton.  It currently targets Fedora 37,
which is due in October, though there is reason to believe the change will not
happen quite that soon.  The reasons for removing the support are described
in the proposal:
</p><blockquote>
UEFI is defined by a versioned standard that can be tested and
certified against.  By contrast, every legacy BIOS is unique. Legacy
BIOS is widely considered deprecated (Intel, AMD, Microsoft, Apple)
and on its way out.  As it ages, maintainability has decreased, and
the status quo of maintaining both stacks in perpetuity is not viable
for those currently doing that work.
<p>
[...] While this will eventually reduce workload for boot/installation
components (grub2 reduces surface area, syslinux goes away entirely,
anaconda reduces surface area), the reduction in support burden
extends much further into the stack - for instance, VESA support can
be removed from the distro.
</p></blockquote>


<p>
The proposal says that, eventually, BIOS support will have to be removed,
but that
maintaining the ability to boot existing Fedora systems with BIOS is meant to help
smooth the process.  Fedora already has requirements that
effectively restrict it to systems made after 2006, so this change would
extend those restrictions somewhat further.
</p><blockquote>
Intel stopped shipping
the last vestiges of BIOS support in 2020 (as have other vendors, and
Apple and Microsoft), so this is clearly the way things are heading -
and therefore aligns with Fedora&#39;s &#34;First&#34; objective.
</blockquote>


<p>
The subject was <a href="https://lwn.net/ml/fedora-devel/50c72ecb-f63f-c942-3e0e-f806c605d7fa%40gmail.com/">raised</a>
back in 2020, which also led to a (predictably) long thread, though it was
not a change proposal at that time.  Some of the &#34;<span>relevant
points from that thread</span>&#34; are listed in the <a href="https://fedoraproject.org/wiki/Changes/DeprecateLegacyBIOS#Feedback">Feedback
section</a> of the proposal.  There are, of course, machines that are
BIOS-only and any kind of hardware deprecation for the distribution is
impossible &#34;<span>without causing some amount of friction</span>&#34;.  In
addition, there is no way to migrate from a BIOS installation to a UEFI-based
system, since &#34;<span>repartitioning effectively mandates a
reinstall</span>&#34;.  In particular, a UEFI partition would need to be added
to the system.
</p>

<p>
The <a href="https://fedoraproject.org/wiki/Changes/DeprecateLegacyBIOS#Contingency_Plan">Contingency
Plan section</a> of the proposal describes an ugly future for the status
quo, but also  a possible way forward:
</p><blockquote>
Leave things as they are.  Code continues to rot.  Community
assistance is required to continue the status quo.  Current owners
plan to orphan some packages regardless of whether the proposal is
accepted.
<p>
Another fallback option could be, if a Legacy BIOS SIG organizes, to
donate the relevant packages there and provide some initial mentoring.
Longer term, packages that cannot be wholly donated could be split,
though it is unclear whether the synchronization thereby required
would reduce the work for anyone.
</p></blockquote>


<h4>Affected systems</h4>

<p>
As might be guessed, multiple replies from users of affected systems were
seen in the thread, <a href="https://lwn.net/ml/fedora-devel/CAEg-Je9HJiGhWaV31dSqN4AwU9vyotez2P7wu=+sq_KvAX_8ig@mail.gmail.com/">starting
with Neal Gompa</a>.  He said that he is sympathetic to the change, but
thinks that it is &#34;<span>way too early to
do across the board</span>&#34;.  He has a system that struggles to boot Linux
with UEFI and his workarounds are beyond the abilities of most users. 
</p>

<p>
David Airlie <a href="https://lwn.net/ml/fedora-devel/CAMwc25qECcBEBHHVSkV1YbQ7q+aKB9qby0ysw83Os9vgefcR8A@mail.gmail.com/">said</a>
that he recently worked on a project to rewrite the <a href="https://www.mesa3d.org/">Mesa</a> driver for a wide range of Intel
GPUs.  Many of the systems he used to develop and validate those drivers
are pre-UEFI systems, but it was &#34;<span>of great benefit to me and the
community</span>&#34; that he could use Fedora for that work.  For future
projects, he would have to consider moving away from Fedora, which would be
a sad state of affairs.
</p>

<p>
Hans de Goede <a href="https://lwn.net/ml/fedora-devel/797d869e-1f8b-3ccc-9228-b69306e02cb6@redhat.com/">said</a>
that he had several systems at home that were BIOS-only and happily running
Fedora now.  Obsoleting them just contributes to the e-waste problem;
&#34;<span>Looking specifically at fixed PCs and not laptops this 
proposal would (eventually) turn 2/5 PCs in my home
unusable, which really is unacceptable IMHO.</span>&#34;  He also pointed to
Airlie&#39;s work on Intel GPUs, saying that &#34;<span>it seems
rather silly to drop support for this hw after just investing
a significant chunk of time to breathe new [life] into their
GPU support</span>&#34;
</p>

<p>
But it is not just desktops and laptops that are affected by a change of
this sort.  Fedora is also installed on cloud servers and virtual machines
of various sorts, some of which do not support anything other than booting
via BIOS.  The proposal noted that the time of the 2020 discussion,
Amazon&#39;s AWS did
not support UEFI, but that has changed.  Marc Pervaz Boocha <a href="https://lwn.net/ml/fedora-devel/83b7d4ed863099feecf21f574e5f7ac5b08348a3.camel@sudomsg.xyz/">pointed
out</a> that many virtual private server (VPS) providers do not support
UEFI, giving Linode and Vultr as examples.  Dominik &#34;Rathann&#34; Mierzejewski
<a href="https://lwn.net/ml/fedora-devel/Yk6Z9OsaleWCuGqD@sakura.greysector.net/">reported</a>
that OVH is also affected:
</p><blockquote>
OVH is another big provider and they don&#39;t offer UEFI boot with their
VPS range. I&#39;ve just confirmed it with their support.
<p>
Since one of my servers is hosted by OVH, I&#39;d have to either migrate to
another hosting provider or migrate off Fedora. Which is ironic,
considering my involvement in Fedora.
</p></blockquote>


<p>
Stewart Smith <a href="https://lwn.net/ml/fedora-devel/pj1dw0mtgh9a1f.fsf@ucfb38371e47454.ant.amazon.com/">added</a>
some &#34;<span>thoughts both from an EC2 [Elastic Compute Cloud] perspective, and an Amazon
Linux as a downstream of Fedora perspective</span>&#34;.  Most EC2 instance types
boot using BIOS by default, though many can use UEFI and new types are likely
to get UEFI support, but there are &#34;<span>a *lot* of instance types, a whole bunch of which are
less likely to support UEFI</span>&#34;.  There is no installer for cloud
images, instead they use the Amazon Machine Image (AMI) format, but
&#34;<span>AMIs that don&#39;t run on all instance types tend to cause confusion,
no 
matter how [clearly] you document the limitations</span>&#34;.  So Amazon Linux
has an interest in ensuring that BIOS booting still works well,
&#34;<span>likely for a decent number of years to come (however much I 
wish this wasn&#39;t the case)</span>&#34;.
</p>

<p>
Gompa <a href="https://lwn.net/ml/fedora-devel/CAEg-Je__KzNeKE+Nmg1J0ZDm2H57mfOu2YUK=WcGAjC2Pjzepg@mail.gmail.com/">complained</a>
that the change is not really a deprecation, but is instead a removal,
because the lack of packages and tooling that support BIOS &#34;<span>makes
several scenarios (including recovery) harder</span>&#34;.  It also puts the
burden on users to determine if their hardware can boot and install Fedora,
but UEFI has not yet reached a critical mass where it can be assumed
to work.  Alberto Abrao <a href="https://lwn.net/ml/fedora-devel/1665d838-b7a9-1743-4347-cdd50d38a86f@abrao.net/">agreed</a>,
noting that this change would &#34;<span>leave behind a LOT of serviceable
hardware</span>&#34;, especially in the server space:
</p><blockquote>
Ironically, Fedora is one of the distributions out there that allows me to
extract the most out of older hardware. It would be a terrible loss to have
to move to a different one, but it&#39;s hard to reason purchasing new hardware
- especially right now, with pandemic-related supply issues still ongoing -
to keep up with this change.
</blockquote>


<p>
In that message, Gompa also said that he is a &#34;<span>a fan of using UEFI
instead of BIOS</span>&#34; and that he has done work to add UEFI support to
Fedora cloud images.  He just does not believe that it is time, yet, to
make that switch.  Part of the reason is that he believes the UEFI
experience on Fedora is not all that good.
</p>

<h4>A wander into secure boot</h4>

<p>
In his original reply to the proposal, 
Gompa also
asked about Fedora support for NVIDIA drivers under UEFI secure boot.
Peter Robinson <a href="https://lwn.net/ml/fedora-devel/CALeDE9PE5GRtygxSG23jsOyiSUuo7HxbHdgzxz5yvNOY2V4B5A@mail.gmail.com/">said</a>
that was out of the scope of the proposal, since users can disable secure
boot if they need support for drivers, like NVIDIA&#39;s, that are not signed
by the Fedora kernel-module keys.  But Gompa <a href="https://lwn.net/ml/fedora-devel/CAEg-Je_w_AA+MJJH4_-7Fd57We1fbecevGwP0CSpDZ7wDkeQag@mail.gmail.com/">replied</a>
that it is sometimes easier to have users fall back to booting from BIOS;
furthermore:
</p><blockquote>
You&#39;re right that these are different problems, but I&#39;ve also seen
very little appetite for reducing the suffering of Fedora Linux users
on UEFI Secure Boot with the *most common issue* we have: an NVIDIA
driver that doesn&#39;t do anything because of the lockdown feature. If
you&#39;re planning to say that UEFI is the only way to boot, then that
means you need to be prepared to accept that our UEFI experience is
*worse* than our BIOS one right now, and someone needs to take
ownership to improve it.
</blockquote>


<p>
Harwood, who is one of the feature owners, said that NVIDIA users can
either use the open-source nouveau driver (which is signed), sign their own
copy of the driver &#34;<span>(involves messing with
  certificates, so not appropriate for all users)</span>&#34;, or disable
  secure boot.  But several people pointed out that nouveau does not really
  solve the problem, especially for more recent NVIDIA hardware; it does
  not provide access to accelerated graphics operations for recent GPUs and tends to have
  quite a few bugs even for the older models.  Michael
  Catanzaro <a href="https://lwn.net/ml/fedora-devel/SHKV9R.66N433LKWMDX1@gnome.org/">pointed out</a>
  that the options Harwood described are problematic from a user-experience
  perspective:
</p><blockquote>
The user experience requirement is: user searches for NVIDIA in GNOME
Software and clicks Install. No further action should be necessary. We
didn&#39;t make the NVIDIA driver available from the graphical installer with
the intention that arcane workarounds would be required to use it.
</blockquote>


<p>
But Adam Jackson <a href="https://lwn.net/ml/fedora-devel/CAD_bs+o6NHOkW2KOOmLZSC1V84q6=c02EOBhR1JzX63TOYGubw@mail.gmail.com/">thought</a>
that the NVIDIA problem was not Fedora&#39;s to solve.  There are technical
means to make it work and &#34;<span>NVIDIA are the ones with the
private source code</span>&#34;.  But Chris Murphy sees things differently, <a href="https://lwn.net/ml/fedora-devel/CAJCQCtQ38aPBrbyETx2Km4Vqj3i5ybngNz1RhAMxCnvat3NCGw@mail.gmail.com/">noting</a>
that Fedora is sending mixed messages:
</p><blockquote>
When users have a suboptimal experience by default, it makes Fedora
look bad. We can&#39;t have security concerns overriding all other
concerns. But it&#39;s really pernicious to simultaneously say security is
important, but we&#39;re also not going to sign proprietary drivers. This
highly incentivizes the user to disable Secure Boot because that&#39;s so
much easier than users signing kernel modules and enrolling keys with
the firmware, and therefore makes the user *less safe*.
</blockquote>


<p>
On the other hand, Fedora does not actually have a full secure boot
implementation, Lennart Poettering <a href="https://lwn.net/ml/fedora-devel/Yk71C7cQtW4%2F3whT@gardel-login/">said</a>, so by
disabling it &#34;<span>you effectively lose exactly nothing in terms
of security right now</span>&#34;.  The reason is that the initrd is not
signed, so it can be subverted:
</p><blockquote>
What good is a trusted boot loader or kernel if it then goes on
loading an initrd that is not authenticated, super easy to modify (I
mean, seriously, any idiot script kiddie can unpack a cpio, add some
shell script and pack it up again, replacing the original one) – and
it&#39;s the component that actually reads your FDE LUKS password.
</blockquote>


<h4>SIG</h4>

<p>
In his message linked above, De Goede volunteered to form a SIG along the
lines suggested in the proposal.  He noted that previous attempts to keep 32-bit
x86 alive when Fedora <a href="https://lwn.net/Articles/728207/">removed support for
i686</a> had run aground, but felt that BIOS is different:
</p><blockquote>
Legacy BIOS boot support is basically only about the image-creation
tools + the bootloader. As various people have mentioned in the
thread BIOS support is still very much a thing in data-centers,
so I expect the upstream kernel community to keep the kernel
working with this for at least a couple of years. Where as both
the kernel + many userspace apps were breaking on i686.
</blockquote>


<p>
After Fedora project leader Matthew Miller <a href="https://lwn.net/ml/fedora-devel/20220412232052.GA18276@mattdm.org/">started</a> a
new thread about the possibility of having a video call to discuss the BIOS
issue, which was generally seen as not being something that would do much
more than rehash what had already been aired, De Goede <a href="https://lwn.net/ml/fedora-devel/5632028c-6ba5-6ba5-5d58-27d66f5ef2ae@redhat.com/">renewed</a>
his call for a Legacy BIOS SIG.  He envisioned it as a lightweight
organization that focused on testing Fedora on BIOS systems, particularly
the next version of Fedora early in its development, in order to file and
fix bugs.
</p>

<p>
The new thread largely went over the same ground as the first, at some
length, naturally,  though there
was also some concrete planning of what a new SIG would do—and how.  Harwood <a href="https://lwn.net/ml/fedora-devel/jlgmtgnh7b0.fsf@redhat.com/">said</a> that what is
needed is a place to assign bugs and a way to get those problems
addressed. &#34;<span>The overall goal of the SIG needs to be to reduce load on existing
bootloader contributors.</span>&#34;  But Harwood also wondered whether Fedora
should redefine its support for BIOS:
</p><blockquote>
Given there is consensus that legacy BIOS is on its way out, we think
Fedora release criteria in this area should be re-evaluated.  Not only
does support change from &#34;fully supported&#34; to &#34;best effort&#34;, but we
should re-evaluate what is/isn&#39;t release blocking, and probably clarify
who owns what parts.
</blockquote>


<p>
Several people disagreed with that characterization of the status of BIOS.
Chris Adams <a href="https://lwn.net/ml/fedora-devel/20220414182007.GB24724@cmadams.net/">said</a>:
&#34;<span>I don&#39;t think this statement is true, unless Fedora doesn&#39;t want to
be 
considered for a bunch of popular VM hosts (e.g. Linode and such) that
have no stated plans to support UEFI.</span>&#34;  Perhaps BIOS support for
physical hardware could be phased out, though.  De Goede <a href="https://lwn.net/ml/fedora-devel/0ff63e4f-e72e-65ad-1b8b-055208f74922@redhat.com/">agreed</a>
that BIOS support is still needed in some contexts:
</p><blockquote>
Given what the server product folks have indicated that BIOS
boot support is quite important for them I&#39;m not sure if changing the
release criteria is in order. I do agree that any blocker bugs related
to legacy BIOS booting should be assigned to; and taken care of by
the legacy BIOS boot SIG.
</blockquote>


<p>
The change proposal will be discussed and decided by the Fedora engineering
steering committee (FESCo), but its prospects do not look good.  The <a href="https://pagure.io/fesco/issue/2780">FESCo ticket</a> for the proposal
has already gotten five &#34;-1&#34; votes from members and there are nine on the
committee.  Those votes are not binding, but it still looks pretty unlikely
this change will go through—at least for Fedora 37.
</p>

<p>
But the change will, seemingly, happen eventually. One of the complaints
seen in the ticket (and threads) is that the proposal calls it a
deprecation, but that is not really what it entails; new versions of Fedora
will not be able to be installed on the older hardware, which could be
problematic if an in-place upgrade goes awry. In addition, Fedora versions
are only supported for about a year, so at some point upgrading may not
really be an option if BIOS support is removed.  That means users of those
systems would have to migrate to a different distribution or keep running an
unsupported version as it slowly bitrots. In a <a href="https://funnelfiasco.com/blog/2022/04/13/balancing-advancement-and-legacy/">blog
post</a> about the change, Cotton pointed out that while he did not think
the distribution &#34;<span>should abandon old hardware willy-nilly</span>&#34;,
there is a balance to be struck:
</p><blockquote>
I think some distros should strive to provide indefinite support for older
hardware. I don&#39;t think <i>all</i> distros need to. In particular, Fedora does not
need to. That&#39;s not what Fedora is. &#34;First&#34; is one of our <a href="https://docs.fedoraproject.org/en-US/project/#_what_is_fedora_all_about">Four
Foundations</a> 
for a reason. Other distros focus on long-term support and less on
integrating the latest from upstreams. That&#39;s good. We want different
distros to focus on different benefits. 
</blockquote>


<p>
With luck, the SIG will take over any packages needed to keep BIOS functioning,
since their owners plan to orphan them regardless of the outcome of the
proposal.  Keeping BIOS alive on Fedora for another few years—how many is difficult
to guess—would seem to have a fair number of benefits at this point, though
there is obviously a maintenance burden associated with it as well.  If the
change does not get approved this time around, we will likely see the proposal recur
for Fedora 38 (or later), but if the SIG takes off, that may be
postponed for some time.  When it does come up again,
however, we can probably expect another lengthy discussion in Fedora-land.
</p></div></div>
  </body>
</html>
