<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://varun.ch/server">Original</a>
    <h1>Most 16-year-olds don&#39;t have servers in their rooms</h1>
    
    <div id="readability-page-1" class="page">
  
  <time datetime="2023-12-20">20 December, 2023</time>
  <p><a href="https://varun.ch/">← Back to varun.ch</a></p>
  <figure>
    <img src="https://varun.ch/image/server/server3.jpg" alt="Dell R720XD on an undersized coffee table, messy cables and all"/>
    <figcaption>
      My servers: a Dell OptiPlex on the floor and a PowerEdge R720XD on an
      undersized IKEA coffee table. All networked together with beautiful red
      and yellow ethernet cables.
    </figcaption>
  </figure>
  <p>
    Hi, I’m Varun. I have a server in my room. Actually, I have two of them.
    And I write a ton of my own code for them. And I love it. This is a story documenting my
    homelab’s quiet beginnings, its spiralling evolution, and its uncertain
    future.
  </p>
  <p>Today, I self-host a ton of stuff on my servers at home, including...</p>
  <ul>
    <li>A home-made social media platform with thousands of users</li>
    <li>
      <a href="https://quickz.org">Quickz</a>, my realtime quiz game for
      schools
    </li>
    <li>
      A demo instance of my
      MYP Personal Project, which was
      <a href="https://varun.ch/flopbook">a platform for creating and sharing flipbook-style animations</a>
    </li>
    <li>
      Tools for the <a href="https://scratch.mit.edu">Scratch</a> community,
      such as a search engine
    </li>
    <li>A handful of game servers for my friends</li>
    <li>
      A few <a href="https://plausible.io">Plausible Analytics</a> instances
    </li>
    <li>
      And a Replit-like tool for creating and hosting tons of experimental
      projects
    </li>
    <li>And so much more...</li>
  </ul>
  <p>
    It all started during lockdown in 2020. I was 13 years old and had a
    little too much free time. I decided to delve into web development with
    static HTML websites, and before long, I was building more complex apps
    that required backends. I used Replit to host web apps, and random scripts
    (Discord bots, automation, etc.), and I ‘hosted’ Minecraft servers for my friends by
    simply leaving my computer on.
  </p>
  <p>I wanted more control and reliability so I jumped
    head-first into the wonderful world of self-hosting.</p>
  <p>
    My original rationale for choosing to host at home rather than cheap cloud
    options was purely out of a desire to learn (at my scale, it’s probably
    more cost effective to pay for The Cloud). I wanted to learn the whole
    stack, from user-facing frontends, to the backends and databases that
    support them, to the servers that actually host them. All I needed was a
    computer (that wasn’t my desktop) online 24/7.
  </p>
  <p>
    I got my hands on a Dell OptiPlex with an i7-3770S and 8GB of RAM from
    eBay. The process of getting it shipped from the US to Switzerland was
    actually a little frustrating<a id="footnote-link-0" href="#footnote-0">[0]</a>, with the seller
    initially sending the wrong amount of RAM and refusing
    to compromise. But after several weeks, everything was sorted out. I
    decided to stick with the pre-installed Windows 10 Pro (yes, as a server
    OS!) simply because I was familiar with it.
  </p>
  <p>Fast forward a few months, and this is how the desktop looked.</p>
  <img src="https://varun.ch/image/server/windows-10-screenshot.png" alt="Screenshot of my server running Windows 10. cmd windows neatly tiled."/>
  <p>
    I got very lucky with one thing: as it turns out, we have a static IPv4
    address at home, making it significantly easier and more stable to host
    websites<a id="footnote-link-1" href="#footnote-1">[1]</a>. I keep everything behind Cloudflare,
    which sorts out SSL, DNS, and
    supposedly even DDoS protection too, for free.
  </p>
  <p>
    There were several benefits to using Windows 10 as a server OS (for me at
    the time):
  </p>
  <ul>
    <li>I was already familiar with Windows</li>
    <li>
      I could test everything in a similar environment on my own desktop
    </li>
    <li>
      I could use RDP to get a fast high-quality connection to my server from
      home.
    </li>
    <li>
      I could use Chrome Remote Desktop to securely connect to it from school
      (I had to use something web-based if I wanted to access it from my
      school-provided Chromebook).
    </li>
  </ul>
  <p>
    But after enough Windows updates forced me to deal with downtime and
    retile my windows to a pretty layout, I decided to make the scary jump to
    Ubuntu Server in November 2020. For some reason, I was entirely terrified
    by this. I had grown comfortable with my cozy Windows setup, and I was
    worried that I was going to lose control and the ability to have a quick
    overview of my system. But alas, it was time for change.
  </p>
  <p>
    I got going with Linux pretty fast - I had already been fairly comfortable
    with the command line on Windows while writing code, and it turns out, the
    Unix command line is quite similar.
  </p>
  <p>My setup looked something like this:</p>
  <ul>
    <li>
      nginx (serving HTTPS traffic on port 443 with self-signed certificates)
      exposed to the internet, rejecting requests not from Cloudflare.
    </li>
    <li>Lots of random projects that I wanted to keep online 24/7.</li>
    <li>One MongoDB instance running, shared across my projects.</li>
    <li>A couple Minecraft Java servers</li>
    <li>
      <a href="https://github.com/billchurch/webssh2">webssh2</a> exposed so I
      could still access my server from school. (this was probably so
      insecure!)
    </li>
  </ul>
  <p>
    When needed, I would install third-party software, which occasionally
    needed their own dependencies and apt repositories, etc. This got very
    messy, very quickly. That’s when I discovered Docker, which was exactly
    the magic I needed. I use it to simplify installing and running third
    party software, while all my own code still runs directly on the server.
  </p>
  <p>
    Fast forward around a year, I’m hosting some projects that actually have
    users (like <a href="https://quickz.org">Quickz</a> and a social media
    platform I made) - and my server crashes while I’m at school. No big deal,
    I’ll just ssh in and see what’s wrong. Except I kept getting weird disk
    errors before finally getting locked out.
  </p>
  <p>
    It turns out, I had simply run out of storage, deleting a few files at
    home bought me some more time. Moving forward, I had two options: replace
    the hard drive with something bigger, or let that be a problem for
    future-me.
  </p>
  <p>
    I chose the third: explore getting a new server. At my current usage, the
    Dell OptiPlex was being pushed to its limits - 8GB of RAM and an i7-3770S
    weren’t really cutting it anymore.
  </p>
  <p>
    In May 2022, I finalized the crazy decision to get a real rack-mounted server -
    I got a great deal on used drives (3x3TB), RAM (128GB of DDR3), and
    relatively powerful (read: power-hungry) CPUs (2xE5-2690) in a Dell
    PowerEdge R720XD, which I paid for with some bug bounty money I saved up.
  </p>
  <p>
    I did not, however, consider the amount of space it would take up, the
    noise it would make, or the power it would draw. I solved ⅓ of those
    problems by using an unsupported hack to force iDRAC to limit the fan
    speed to a constant 10%.
  </p>
  <p>My first impressions went something like this:</p>
  <ul>
    <li>Wow this is heavy</li>
    <li>Really heavy...</li>
    <li>
      There’s two of nearly everything in here. Two power supplies, two CPUs,
      two NICs, there are actually even two computers here! The R720XD has
      iDRAC, which is basically a mini computer that stays on so the server
      can be managed remotely, even when it’s turned off. Awesome!
    </li>
  </ul>
  <img src="https://varun.ch/image/server/server1.jpg" alt="My server resting on an IKEA coffee table next to a TV"/>
  <p>
    The server rested precariously on a coffee table next to the TV in the
    living room for a little bit. I’m sorry to my parents who had to put up
    with that<a id="footnote-link-2" href="#footnote-2">[2]</a>. It turns out, a rack and mounting
    equipment would have cost more than
    the server itself.
  </p>
  <p>
    This time, I decided to use a hypervisor<a id="footnote-link-3" href="#footnote-3">[3]</a>. The
    server runs Proxmox, while the majority of the resources are
    dedicated to an Ubuntu Server VM (where everything runs neatly in Docker
    now). This gives me the flexibility to easily move things around in the
    future without having to set up everything again.
  </p>
  <img src="https://varun.ch/image/server/proxmox.png" alt="A screenshot of my Proxmox interface"/>
  <p>
    It also gives me space to run a Xubuntu VM named ‘backdoor’ that I use
    Chrome Remote Desktop on. It lets me access my home network in a
    comfortable workspace from anywhere in the world. Yes, I could set up a
    VPN (like OpenVPN or WireGuard), but this even works on (artificially)
    limited devices like the iPad and works on my school’s public WiFi. And as
    a bonus, I don’t have to worry about bots trying to bruteforce their way
    in. It might sound crazy, but this approach works really well<a id="footnote-link-4" href="#footnote-4">[4]</a>.
  </p>
  <p>
    Ironically after all of this, I ended up missing something about the
    Replit experience. I still used Replit fairly often to spin up quick
    isolated applications for one-off projects/experiments and demos (eg. a
    tool for my friends to grab their portraits from the school website).
    Nothing beated the workflow of writing code in the web based IDE and
    having it live and accessible to everyone on the web immediately.
  </p>
  <p>
    It was amazing how Replit was free, but (entirely understandably) they
    started to implement features to actually make money. Inactive repls get
    disabled if nobody uses them, and as far as I understand,
    <a href="https://blog.replit.com/hosting-changes">it’s not even possible to host public dynamic websites for free
      anymore</a>. I also wanted to use my own hardware and domain I controlled.
  </p>
  <p>
    So I built my own self-hosted Replit clone. Built on Docker,
    <a href="https://varun.ch/dockn">‘Dock’n’Roll’</a> is a single-user service where I can
    code a web app under a private interface at dockn.varun.ch, and have it
    accessible to the world live under *.varunbiniwale.com. I love ‘dockn’ for
    its simplicity and versatility, I use it all the time.
  </p>
  <img src="https://varun.ch/image/server/dockn1.png" alt="Dock’n’Roll’s admin interface, listing projects"/>
  <img src="https://varun.ch/image/server/dockn2.png" alt="Dock’n’Roll’s admin interface, showing the IDE"/>
  <ul>
    <li>
      The control panel, built in ExpressJS, has a simple web interface and
      Monaco Editor (from VSCode!) for me to create projects and manage their
      files.
    </li>
    <li>
      The interface has a button to start a project, which uses Docker’s
      engine API to build an image and run a container.
    </li>
    <li>Project metadata is stored in Redis.</li>
    <li>
      Port 80 in each container is automatically exposed as
      :project.varunbiniwale.com using OpenResty (talking to Redis with a Lua
      plugin) as a reverse proxy.
    </li>
    <li>
      Files can be stored under /persisted/ and are persisted across container
      restarts. They can be viewed/edited in the web interface.
    </li>
    <li>
      The web admin interface is protected using a
      <a href="https://auth.varun.ch">custom nginx auth proxy</a> I made for
      all of my projects.
    </li>
  </ul>
  <p>
    ‘Dock’n’Roll’ is also very useful for bug hunting, I use it to host random things
    I use to help me discover vulnerabilities like blind SSRFs and XSSs. Here’s an
    autogenerated image hosted at yourip.varunbiniwale.com.
  </p>
  <img src="https://yourip.varunbiniwale.com/demo" alt="An autogenerated image showing your IP address"/>
  <p>And here’s a (slightly outdated) demo video</p>
  <p>
    <iframe src="https://www.youtube-nocookie.com/embed/nITIMrND0Z0" frameborder="0"></iframe>
  </p>
  <p>
    In conclusion, that&#39;s my homelab — sure, it might be a little crazy, but
    it’s mine, and I love it.
  </p>
  <p>
    One day, I’m going to graduate and move out for university. I don’t know
    where I’ll go yet, but I probably won’t be taking my servers with me, and I
    definitely wouldn’t want to burden my parents any more by keeping all my
    hardware running in their home.
  </p>
  <p>It may not be for everyone, but if you’re a tinkerer (and willing to live with the consequences), I highly recommend trying out a little self hosting.</p>
  <p>
    I’ve learned so much from my servers. Being able to self-host tools and
    have a place under my control to run my projects is liberating. Yes,
    it’s stressful at times, and perhaps not the most practical setup ever,
    but I’ve gained tons of skills that I would have never learned otherwise.
    Thank you Dell PowerEdge R720XD.
  </p>
  <hr/>
  <h2>Footnotes</h2>
  
  <hr/>



</div>
  </body>
</html>
