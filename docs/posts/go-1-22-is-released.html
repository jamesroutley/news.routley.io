<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://go.dev/blog/go1.22">Original</a>
    <h1>Go 1.22 is released!</h1>
    
    
<div id="blog"><div id="content">
  <div id="content">

    <div class="Article" data-slug="/blog/go1.22">
    
    <h1 class="small"><a href="/blog/">The Go Blog</a></h1>
    

    <h1>Go 1.22 is released!</h1>
      
      <p class="author">
      Eli Bendersky, on behalf of the Go team<br>
      6 February 2024
      </p>
      
      <p>Today the Go team is thrilled to release Go 1.22,
which you can get by visiting the <a href="/dl/">download page</a>.</p>
<p>Go 1.22 comes with several important new features and improvements. Here are
some of the notable changes; for the full list, refer to the <a href="/doc/go1.22">release
notes</a>.</p>
<h2 id="language-changes">Language changes</h2>
<p>The long-standing &ldquo;for&rdquo; loop gotcha with accidental sharing of loop variables
between iterations is now resolved. Starting with Go 1.22, the following code
will print &ldquo;a&rdquo;, &ldquo;b&rdquo;, and &ldquo;c&rdquo; in some order:</p>
<pre><code>func main() {
    done := make(chan bool)

    values := []string{&quot;a&quot;, &quot;b&quot;, &quot;c&quot;}
    for _, v := range values {
        go func() {
            fmt.Println(v)
            done &lt;- true
        }()
    }

    // wait for all goroutines to complete before exiting
    for _ = range values {
        &lt;-done
    }
}
</code></pre>
<p>For more information about this change and the tooling that helps keep code from
breaking accidentally, see the earlier <a href="/blog/loopvar-preview">loop variable blog
post</a>.</p>
<p>The second language change is support for ranging over integers:</p>
<pre><code>package main

import &quot;fmt&quot;

func main() {
    for i := range 10 {
        fmt.Println(10 - i)
    }
    fmt.Println(&quot;go1.22 has lift-off!&quot;)
}
</code></pre>
<p>The values of <code>i</code> in this countdown program go from 0 to 9, inclusive. For more
details, please refer to <a href="/ref/spec#For_range">the spec</a>.</p>
<h2 id="improved-performance">Improved performance</h2>
<p>Memory optimization in the Go runtime improves CPU performance by 1-3%, while
also reducing the memory overhead of most Go programs by around 1%.</p>
<p>In Go 1.21, <a href="/blog/pgo">we shipped</a> profile-guided optimization (PGO) for the Go
compiler and this functionality continues to improve. One of the optimizations
added in 1.22 is improved devirtualization, allowing static dispatch of more
interface method calls. Most programs will see improvements between 2-14% with
PGO enabled.</p>
<h2 id="standard-library-additions">Standard library additions</h2>
<ul>
<li>
<p>A new <a href="/pkg/math/rand/v2">math/rand/v2</a> package
provides a cleaner, more consistent API and uses higher-quality,
faster pseudo-random generation algorithms. See
<a href="/issue/61716">the proposal</a> for additional details.</p>
</li>
<li>
<p>The patterns used by <a href="/pkg/net/http#ServeMux">net/http.ServeMux</a>
now accept methods and wildcards.</p>
<p>For example, the router accepts a pattern like <code>GET /task/{id}/</code>, which
matches only <code>GET</code> requests and captures the value of the <code>{id}</code> segment
in a map that can be accessed through <a href="/pkg/net/http#Request">Request</a> values.</p>
</li>
<li>
<p>A new <code>Null[T]</code> type in <a href="/pkg/database/sql">database/sql</a> provides
a way to scan nullable columns.</p>
</li>
<li>
<p>A <code>Concat</code> function was added in package <a href="/pkg/slices">slices</a>, to
concatenate multiple slices of any type.</p>
</li>
</ul>
<hr>
<p>Thanks to everyone who contributed to this release by writing code and
documentation, filing bugs, sharing feedback, and testing the release
candidates. Your efforts helped to ensure that Go 1.22 is as stable as possible.
As always, if you notice any problems, please <a href="/issue/new">file an issue</a>.</p>
<p>Enjoy Go 1.22!</p>

    </div>

    
    <div class="Article prevnext">
    
    
      
        <p>
        
        
          
            <b>Previous article: </b><a href="/blog/survey2024-h1">Share your feedback about developing with Go</a><br>
          
        
        <b><a href="/blog/all">Blog Index</a></b>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    </div>
    

  </div>
</div>

<script src="/js/jquery.js"></script>
<script src="/js/playground.js"></script>
<script src="/js/play.js"></script>
<script src="/js/godocs.js"></script>


  </body>
</html>
