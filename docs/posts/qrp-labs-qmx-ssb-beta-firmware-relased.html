<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://qrp-labs.com/qmxp/ssbbeta.html">Original</a>
    <h1>QRP Labs QMX SSB beta firmware relased</h1>
    
    <div id="readability-page-1" class="page"><div itemprop="articleBody">
		
<p>This is the beta release page for the SSB firmware for QMX/QMX+ transceivers. This is a very complex project. The beta release here is provided without warranty, for brave beta testers who wish to try out the firmware and report back on any issues found or suggested enhancements. The firmware runs on both QMX and QMX+; for convenience from now on, this page will state &#34;QMX&#34; but that means equivalently QMX or QMX+ unless otherwise stated.</p>
<p>Note that users of FSK Digi modes such as FT8, JS8, WSPR, etc should continue to use the QMX &#34;Digi&#34; mode, which will offer the best performance for these modes. </p>
<p>This page describes all aspects of how to use and test this beta firmware for SSB. There are a large number of settings and options and I encourage you to read all the details before experimenting with them. With ALL features enabled (CESSB, compression, mic AGC, Transmit equalization, noise gate, phase and amplitude pre-distortion, you name it), the CPU utilization is approximately 93%. So in other words there is no problem enabling everything.</p>
<p>After a period of beta testing, the firmware will be published to the regular QMX page, and the regular QMX operating manual will be updated to reflect all the changes for SSB. Eventually I will publish extensive technical documentation describing the entire system in detail. </p>
<hr/>

<p>The SSB firmware download is firmware version 1_01_002 and can be downloaded by clicking the link below. The installation procedure is the same as for any other QMX firmware version (refer to manual). <strong>Re-calibration is NOT necessary after installing a firmware update.</strong> </p>
<p><a href="https://jamiepalatnik.com/images/qmx/ssb/firmware/1_01_002.zip" target="_blank" rel="noopener noreferrer">Firmware 1_01_002 SSB Beta DOWNLOAD</a></p>
<p>The full version history of changes during the SSB beta testing phase are at the bottom of this page. </p>
<hr/>

<p><strong><span>IMPORTANT NOTES ON CHOICE OF MICROPHONE</span></strong></p>
<p>QMX is designed to use an electret microphone. There is an on-board microphone and an external microphone may be plugged into the Paddle port of the QMX. <span><strong>Currently the built-in onboard electret microphone is not enabled.</strong></span> An external electret microphone must be used currently. All subsequent references to &#34;the microphone&#34; on this page, refer to a plugged-in external microphone. (Audio can also be streamed from the USB audio soundcard from a PC, more on this later).</p>
<p>All electret microphones are NOT alike, in terms of sensitivity and dynamic range. Furthermore if a microphone is used without any kind of windsock to shield it from your breath, there will be a lot of crackles and pops at very low audio frequencies, which will impact speech quality. Electret microphones require a supply voltage which is derived, in the case of QMX, from the 3.3V Vdd supply rail via 2.2K resistor R218. This value 2.2K might not be suitable for all electret microphones, some experimentation is likely to be required. </p>
<p>All development has been done with this particular Electret microphone from Digikey, part number 668-AOM-5024L-HD-F-R-ND:</p>
<p>The QMX SSB firmware contains a microphone testing tool which can be used to establish an appropriate microphone gain setting for your particular microphone. More on this, below. </p>
<p><span><strong>Microphone Connection:</strong></span></p>
<p>The microphone is plugged into the QMX Paddle port; this stereo 3.5mm jack plug is for both the microphone signal AND the PTT switch. </p>
<ul>
<li>Ring-to-ground is the microphone connection</li>
<li>Tip-to-ground is for PTT (close the connection tip-to-ground to initiate transmiussion)</li>
</ul>
<hr/>

<p>Like many things, this deserves a much more thorough write-up. For now just a brief summary which will explain the way SSB is being generated in QMX, with some links to further reading. </p>
<p>Conventional SSB exciters have an SSB modulator (whether done in analog circuits or using SDR techniques) followed by a linear driver amplifier and a linear power amplifier. The linearity is critical to the performance; non-linearities cause intermodulation products which produce close-in spurious products outside the desired SSB passband, causing interference to other spectrum users (known as &#34;Splatter&#34;). The design of the amplifiers needs a lot of care and attention, and the problem is multiplied when a multi-band unit is targeted. It is difficult to achieve good linearity. l</p>
<p>In 1952 Kahn proposed in an IEEE paper, an SSB generation method called EER (Envelope Elimination and Restoration). <a href="https://jamiepalatnik.com/images/qmx/ssb/Kahn1952.pdf" target="_blank" rel="noopener noreferrer">You can download his paper here.</a> In his paper Kahn describes splitting the SSB process into phase and amplitude components. Phase modulation and amplitude modulation are applied separately. The phase modulated signal is amplified to full power by a non-linear RF amplifier (such as Class-C); then an amplitude modulator is applied to the supply of the RF amplifier to effect the amplitude modulation. The main benefit of this approach is higher performance because RF amplifier linearity ceases to be an issue. Much is made subsequently of the higher efficiency of such amplifiers but it should be noted that obtaining higher efficiency would require high efficiency amplitude modulation also (perhaps using PWM switching techniques). </p>
<p>This paper <a href="https://oa.upm.es/7900/2/INVE_MEM_2010_79469.pdf">https://oa.upm.es/7900/2/INVE_MEM_2010_79469.pdf</a> further explores high efficiency techniques for modulating amplitude using multi-level converters for the amplitude envelope amplifier. But this paper is not really so relevant here as it does not deal so much with EER itself. </p>
<p>EER implementations seem to start off with an existing SSB signal, then strip off its amplitude, detect the phase, and apply phase and amplitude modulation as two separate paths. It&#39;s debatable whether this is exactly comparable to what is going on in QMX. In QMX audio baseband signals are converted to polar coordinates (phase angle and magnitude), which are then modulated; the phase modulation is applied by a series of rapid frequency updates to the MS5351M and the amplitude modulation is applied in the conventional way by modulating the supply voltage to the non-linear amplifier. &#34;Polar Modulation&#34; is a term that I think I prefer to EER, in the QMX context. Though you could argue that the microphone audio signal is equivalent to an SSB signal at baseband (zero carrier frequency) so you are still eliminating and restoring its envelope... </p>
<p>In 2017 Brian K1LI and Tony K1KP published a QEX article &#34;The Polar Explorer&#34; see <a href="https://www.arrl.org/files/file/QEX_Next_Issue/Mar-Apr2017/MBF.pdf" target="_blank" rel="noopener noreferrer">https://www.arrl.org/files/file/QEX_Next_Issue/Mar-Apr2017/MBF.pdf</a> describing the design of a high power SSB transmitter using Polar Modulation (EER) techniques. A 500W version of the transmitter was exhibited at Dayton hamvention in 2019 and I had the opportunity to see it for myself. This was my first introduction to Polar Modulation (EER). The article is very interesting; of particular note the phase pre-distortion technique and amplitude pre-distortion employed in the transmitter. The article describes construction of a lookup table for the phase error using an AD8302 gain and phase detector chip -<a href="https://www.digikey.com/en/products/detail/analog-devices-inc/AD8302ARUZ-REEL/994023" target="_blank" rel="noopener noreferrer"> At Digikey even in 2500pcs reel quantity the price is still $18.68</a> + taxes, OUCH! I am particularly proud of developing a way in QMX to measure the phase error without any additional hardware. </p>
<p>In 2019 Guido PE1NNZ presented his special firmware and extensive hardware modifications to the <a href="https://jamiepalatnik.com/qcx" target="_blank" rel="noopener noreferrer">QRP Labs QCX transceiver</a> to turn it into a multiband SSB transceiver using Polar Modulation (EER). This was a derivative work on his earlier (2013) project to generate SSB directly using a Raspberry Pi, see <a href="https://www.pe1nnz.nl.eu.org/2013/05/direct-ssb-generation-on-pll.html" target="_blank" rel="noopener noreferrer">https://www.pe1nnz.nl.eu.org/2013/05/direct-ssb-generation-on-pll.html</a>. The QCX-derived SSB transceiver spun off into its own separate project, separate forum. The original page is here: <a href="https://www.pe1nnz.nl.eu.org/2013/05/direct-ssb-generation-on-pll.html" target="_blank" rel="noopener noreferrer">https://www.pe1nnz.nl.eu.org/2013/05/direct-ssb-generation-on-pll.html</a>. Subsequently there was a lot of development work done by Guido PE1NNZ, Barb WB2CBA, Manuel DL2MAN and others. Several Chinese produced versions of uSDX are very popular and still in production, as well as an &#34;official&#34; version named (tr)uSDX by Guido PE1NNZ and Manuel DL2MAN see <a href="https://dl2man.de/" target="_blank" rel="noopener noreferrer">https://dl2man.de/</a>.</p>
<p>The uSDX/(tr)uSDX transceivers suffer significant performance limitations due to the very minimalist hardware used, including the 8-bit 20MHz ATmega328 AVR microcontroller. Pascal VK2IHL has a very long and interesting page <a href="https://vk2ihl.wordpress.com/" target="_blank" rel="noopener noreferrer">https://vk2ihl.wordpress.com/</a> with many details and measurements. QMX achieves a much higher performance due to the investment in much more powerful hardware (32-bit 168 MHz ARM Cortex M4 MPU with floating point and DSP units). This is not a criticism of uSDX, these are simply engineering trade-offs. </p>
<p>Despite the performance limitations, we owe Guido PE1NNZ a huge debt of gratitude for popularizing and further developing the Polar Modulation concept, demonstrating its practical implementation in minimalist hardware. It&#39;s a genius work that is the inspiration behind the QMX SSB firmware implementation. Guido is the giant whose shoulders I stand on. </p>
<p>Dave M0JTS has recently written extensively about the Polar Modulation process, including theoretical explorations, simulations, and experimental determination of the frequency settling time of the Si5351A. His work is a very interesting read, see <a href="https://daveshacks.blogspot.com/2025/02" target="_blank" rel="noopener noreferrer">https://daveshacks.blogspot.com/2025/02</a> </p>
<hr/>

<p>The QMX firmware development contains a rich list of features. These are highly configurable via parameters in the SSB sub-menu (available on both the terminal login and the LCD/buttons of QMX itself). </p>
<ul>
<li>Audio equalization applied to microphone signal path.</li>
<li>Microphone AGC to adjust relatively slowly, the audio level as you may have the microphone closer or further from your mouth.</li>
<li>Compression.</li>
<li>Built-in Two-tone test signal generator, adding to the list of built-in test equipment in QMX. </li>
<li>Audio may be sourced from the internal 48ksps USB sound card for non-FSK Digi modes.</li>
<li>Controlled Envelope SSB (CESSB).</li>
<li>Look-ahead Automatic Level Control (ALC).</li>
<li>DPD (Digital Predistortion) via static phase pre-distortion vector per band.</li>
<li>Self-calibration tool for measuring the QMX PA&#39;s own phase distortion.</li>
<li>Self-calibration tool for optimizing synchronization between Phase and Amplitude Modulation paths.</li>
<li>Amplitude modulation interpolation to improve performance of the Amplitude Modulator and correlation with phase modulation.</li>
</ul>
<p>These features are described in subsequent sections of this page.</p>
<hr/>

<p>The following are known issues. Issues will be added here if and when reported.</p>
<ol>
<li>TX audio equalizer visualization tool may have some inaccuracies at the low few hundred Hz range : cosmetic issue only.</li>
<li>TX power meter doesn&#39;t read peaks, so the power looks a bit low.</li>
<li>During calibration, tones are heard, but audio should be muted.</li>
<li>Mic noise gate samples initially set to 100 even though the range is 0-99. This is cosmetic only.</li>
<li>Unintended behaviour when VOX is on - clicking a button on the radio activates VOX and disables the UI, so it is impossible to change bands with double click since band change is locked out during TX,</li>
<li>CAT TX0 and TQ1 commands may not work properly to activate TX.</li>
<li>PTT is disengaging in USB mode if there is a pause in USB audio being sent.</li>
<li>Calibration bug report by Dirk: &#34;If you go straight to the calibration menu via putty and press &#34;R&#34; nothing happens. &#34;O&#34; works as it should and if you go to another view with &#34;+&#34; also the &#34;R&#34; starts the calibration. So it&#39;s just not reacting to &#34;R&#34; on the initial calibration screen.&#34; - <strong>Hans: I WAS NOT ABLE TO REPRODUCE THIS</strong></li>
</ol>
<hr/>

<p><a href="https://jamiepalatnik.com/images/qmx/ssb/ssbblock.png" target="_blank" rel="noopener noreferrer"><img src="https://jamiepalatnik.com/images/qmx/ssb/ssbblock.png" alt="" width="100%"/></a></p>
<p>The diagram is probably a bit too small on your screen, you can <a href="https://jamiepalatnik.com/images/qmx/ssb/ssbblock.png" target="_blank" rel="noopener noreferrer">CLICK HERE</a> to view the original file at full size. Except for the microphone at the left, and the MS5351M, amplifier and PA blocks on the right, this diagram shows all the DSP blocks that the signal passes through in the SSB modulator. Other than the VOX processing and TX/RX control blocks indicated, the signal flows from left to right. </p>
<hr/>

<p>The QMX microphone is, for better or for worse, connected directly to an ADC input pin of the STM32 microcontroller, which has three 12-bit mutiplexed ADC peripherals onboard. In order to gain additional microphone sensitivity, the microphone is sampled at a rate of 700 ksps (700,000 samples per second). Downsampling by a factor of 58.333 (700 ksps / 12 ksps) significantly improves sensitivity. </p>
<p>Unfortunately despite the impressive 12-bit resolution, these ADC&#39;s were found to be rather noisy. Spurs are found to occur every 500Hz across the audio spectrum. It was found that the noise is highly correlated between different input channels on the same ADC peripheral. Therefore a reference channel is sampled, also at 700 ksps and also downsampled by a factor of 58.33. If noise cancellation is switched on, the reference channel noise signal is subtracted from the microphone signal path, substantially cancelling the noise on the microphone signal. It is recommended that noise cancellation is always switched on.</p>
<p>In the images below, on the left I show the spur measurements vs the factor of reference channel subtracted. On the right, the audio spectrum plot before (blue, no reference channel subtraction) and after (red, with 0.68 x reference channel subtraction). The audio spectrum was made by recording 30 seconds of silence in a quiet room, streamed to the QMX USB sound card and recorded on the PC in Audacity, which then did the spectrum analysis. The worst spur at 1kHz is reduced by about 24dB and other lower spurs are also significantly reduced. Practically the result is that without noise cancellation, these spurious tones are head clearly at low level as background noise under the speech. When noise cancellation is on, no spurious tones are audible at all. </p>
<ul id="sigFreeId3009b8187f">
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/mic/2.png" title="You are viewing the image with filename 2.png" data-thumb="/cache/jw_sig/jw_sig_cache_3009b8187f_2.jpg" target="_blank" data-fancybox="gallery3009b8187f">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image 2.png" title="Click to enlarge image 2.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/mic/3.png" title="You are viewing the image with filename 3.png" data-thumb="/cache/jw_sig/jw_sig_cache_3009b8187f_3.jpg" target="_blank" data-fancybox="gallery3009b8187f">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image 3.png" title="Click to enlarge image 3.png"/>
        </a>
    </li>
        <li> </li>
</ul>


<!-- JoomlaWorks "Simple Image Gallery" Plugin (v4.1.0) ends here -->


<hr/>

<p>There is a new &#34;Microphone test&#34; screen which allows you to adjust the Microphone gain setting, to suit your particular microphone. The default microphone gain is +50 dB. This tool is in the Hardware tests menu. </p>
<p>When opened on the Terminal:</p>
<p>Press Ctrl-Q to quit</p>
<p>The current microphone gain is shown in the top right corner. When R is pressed to run the application, the screen scrolls up at 10 rows per second. Each row displays the average and peak amplitude from the microphone. </p>
<p>This screenshot shows an annotated explanation:</p>
<p><img src="https://jamiepalatnik.com/images/qmx/ssb/micTest2a.png" alt="" width="897" height="554"/></p>
<p><strong>Notes:</strong></p>
<ul>
<li>Current Average Level is on the bottom row, indicated by the horizontal dashes.</li>
<li>Current Peak Level is on the bottom row, indicated by the extent of the empty bar.</li>
<li>The current microphone gain is shown in the top right corner; 50dB is the default value and is found to be about right for my microphone (see details of my microphone, above).</li>
<li>There&#39;s a vertical line character for every 10dB of audio signal level.</li>
</ul>
<p>If you start talking into the microphone at a comfortable distance (don&#39;t EAT the microphone, that will result in a lot of whooshing air sounds) and in your normal voice (yes, believe me I know, as soon as you start to sound &#34;normal&#34; you cant&#39;t help starting to sound very very UN-normal) - then the gain is kind of correct, or in other words at the correct desirable level, when your speech peaks just starts tipping over into the RED region. </p>
<p>BUT - don&#39;t over-fuss it. There are lots more opportunities further down the signal path, for Automatic Gain Control (AGC), Compression, CESSB, etc. It isn&#39;t critical, but it  helps the subsequent audio processing to get this microphone gain approximately correct, at the start. </p>
<p>IF:</p>
<ul>
<li>The gain can&#39;t be adjusted high enough - OR -</li>
<li>The gain is still too high even when you adjust it to minimum - OR -</li>
<li>If when you&#39;re very quiet, compared to the &#34;desirable level&#34; when you speak at the yellow/red sort of level, you don&#39;t have about 50dB difference in signal level</li>
</ul>
<p>then your microphone may not be sensitive enough, or may not have enough dynamic range, or it may need a different value for R218.</p>
<p>Spring has sprung, the lab windows here in the vaulted heights of QRP Labs towers are open and birdsong can be heard. The oscilloscope hums in the background but the QRP Labs elves have gone home for the day. Somewhere overhead a Cessna 172 engine can faintly be heard circling over the lake, no doubt student pilots in training from the local airport flight school. The microphone is lying on the bench and I try to be quiet. This is what my ambient noise level looks like. The little spike at the bottom was when it heard me press the &#34;PRTSC&#34; key on my keyboard (print screen) to take the screenshot. </p>
<p><img src="https://jamiepalatnik.com/images/qmx/ssb/micTest3a.png" alt="" width="400" height="309"/></p>
<p>If it&#39;s like this, my mic gain is way too low:</p>
<p><img src="https://jamiepalatnik.com/images/qmx/ssb/micTest4a.png" alt="" width="400" height="309"/></p>
<p>And if it&#39;s like this, my mic gain is way too high:</p>
<p><img src="https://jamiepalatnik.com/images/qmx/ssb/micTest5a.png" alt="" width="400" height="309"/></p>
<p>And guess what, you can even run this MicTest tool on the LCD screen, how cool is that? In this case the level meter is drawn as a 20 columns by 16-pixel high chart that scrolls across in a left-ward direction, on the right-most 4 x 2 characters of the LCD, at 10 columns per second (so the display shows the last 2 seconds. Use the tune button to adjust the gain such that on speech peaks, the pixels nearly reach the top of the display but don&#39;t tend to overdo it. </p>
<p><img src="https://jamiepalatnik.com/images/qmx/ssb/micTest6.jpg" alt="" width="800" height="536"/></p>
<hr/>

<p><span><strong>USB</strong></span>: When the USB Sound card is selected as the transmit SSB audio source, the Audio is taken from the PC. In this case, as per the DSP block diagram above, No equalization, AGC or Compression is applied to the audio signal. The USB from the PC is expected to be at &#34;full amplitude&#34; which means for most Digi mode software which transmits on a 48ksps, 16-bit basis, the audio is a level numerically between -32767 and + 32768. Transmit/Receive switchover can be achieved either by VOX or using CAT control on QMX&#39;s internal USB Virtual COM Serial port in the normal way. </p>
<p><span><strong>Two-tone</strong></span>: When the two-tone test is selected as the transmit SSB audio source, QMX&#39;s internal two-tone test generator is activated. It produces  high purity 700 and 1900 Hz sinewaves at 12ksps (which is the internal DSP rate of the SSB generation), summed to full Peak Envelope Power. Press the PTT switch to enable the two-tone transmission (or press the T key when in the SSB configuration screen - more on this later). </p>
<hr/>

<p>The next important step to undertake is calibration of your QMX/QMX+ for accurate generation of SSB. Each QMX is different (component tolerances, build-style etc). There are three phases to the calibration:</p>
<ul>
<li>Phase distortion measurement for the DPD (Digital Predistortion) phase pre-distortion tables</li>
<li>Synchronization timing parameter for Phase and Amplitude modulation in USB (upper sideband) mode</li>
<li>Synchronization timing parameter for Phase and Amplitude modulation in LSB (lower sideband) mode</li>
</ul>
<p>I have developed a way for QMX to measure its own phase distortion (phase delay at various different output amplitudes, through the PA). Ideally the phase delay through the PA would not vary but it does, most probably as the transistor characteristics vary depending on signal amplitude (such as reverse capacitance of the MOSFET body diode, which is like a varactor diode). This is a very interesting topic but will be a large technical description in its own right. </p>
<p>I also developed a way for QMX to measure its own intermodulation performance, and to optimize the delay line offset between the phase and amplitude paths so as to minimize the sum total of the intermodulation energy in the 3rd, 5th and 7th intermodulation products. Again, ti&#39;s a very interesting topic which I will leave to a later time. </p>
<p>For now: a DUMMY LOAD must be connected to QMX for this calibration, both to prevent transmitting power into an open load during the characterization of the PA, and to ensure accurate measurement. </p>
<p>The Transmitter drive level should also be decided at this point. For now, I recommend leaving it at the default level of 900. The maximum level of 999 will mean that the SSB modulator will try to drive the DAC output voltage to a maximum level equivalent to the measured DC supply voltage during receive. This will result in overdriving the SSB exciter and power amplifier since:</p>
<ul>
<li>There is a little voltage drop in the power amplifier amplitude modulator itself</li>
<li>There is some voltage drop in the reverse polarity protection circuits, and perhaps some droop in the power supply during transmit, or drop of voltage on the power supply cabling. </li>
</ul>
<p>Golden rule: don&#39;t push for maximum smoke, it just isn&#39;t worth it pushing for that last fraction of a dB of power output, which nobody at the other end of the contact will notice and which really doesn&#39;t matter, but puts additional stress on your PA (or at least, reduces the safety margin you have); and in this case, if the SSB exciter and PA are driven to saturation, intermodulation products definitely increase. </p>
<p>I did a particular careful measurement in which I used thick cables from the power supply to the QMX+, on 40m. and I varied the &#34;Drive level&#34; parameter in the configuration from 999 down to 100. The input source was selected as the two-tone test generator producing 700 + 1900Hz sinewave signals internally in the QMX. The graph below plots IMD3 in dP PEP (ARRL style) on the left axis and the Blue curve, and Power in Watts on the right axis in Red curve, vs Drive level along the X-axis. </p>
<p><img src="https://jamiepalatnik.com/images/qmx/ssb/driveLevel.png" alt="" width="733" height="411"/></p>
<p>You can see that a drive level of 950 gives an IMD3 fo about -40dB PEPand around 5W PEP. Wind it back to 900, for a bit of safety margin and we get a little improvement in IMD3 and a little lower power outout. This is a setting (I&#39;ll come to below) in the SSB configuration parameters menu. It defaults to 900 so why not leave it at 900 for now. </p>
<p><span><strong>CALIBRATION TOOL</strong></span></p>
<p>Now the actual calibration tool is in the Hardware Tests menu again. When you open it in the Terminal, you can use the +/- keys to scroll through the existing configuration measurements. You don&#39;t see much on a fresh SSB-QMX until the calibration has been performed. </p>
<p>Calibration does take quite some minutes. These are sensitive and difficult measurements for the QMX to perform on itself, requiring some setup time, stabilization time then measurement time with multiple measurement averaging. This calibration need only be done once for each QMX but if you did a factory reset you would need to re-do it. </p>
<p>With no calibration at all, your QMX SSB performance would still be pretty reasonable! But measured phase pre-distortion curves and optimum synchronization of the delay lines to match up phase and amplitude modulation, do really make a noticeable difference. </p>
<p>As you press the +/- keys to go through the calibration, you can run one screen on its own if you wish, by pressing the &#39;O&#39; key. If you want to run all the calibrations, press the R key. It starts with the phase distortion measurement, and runs it for each band in your Band Configuration. Then Upper sideband (USB) sync optimization for each band, then Lower sideband (LSB) sync optimization for each band. </p>
<p>During the calibration, the measurements are displayed on the bottom row of the terminal screen and the graph is plotted point by point. At the end of the measurement the values are rescaled and optimized for storage; the graph limits and scale changes but the values are unaltered. </p>
<p>The results are markedly different by band, this is normal. The images in the gallery below (click them) show some examples of phase distortion measurement curves and sync optimization curves. The calibration tool can also be run from the QMX itself, of course the graph displayed on the tiny pixel mapped display is less clear. The results however are identical. On the LCD version of the calibration application, use the &#34;Tune&#34; knob to view existing calibration curves; press the &#34;Tune&#34; knob button to run ONE calibration or press the left push-button (menu button) to run all calibrations. </p>
<ul id="sigFreeId260534cb6b">
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calib/1.jpg" title="You are viewing the image with filename 1.jpg" data-thumb="/cache/jw_sig/jw_sig_cache_260534cb6b_1.jpg" target="_blank" data-fancybox="gallery260534cb6b">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image 1.jpg" title="Click to enlarge image 1.jpg"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calib/2.png" title="You are viewing the image with filename 2.png" data-thumb="/cache/jw_sig/jw_sig_cache_260534cb6b_2.jpg" target="_blank" data-fancybox="gallery260534cb6b">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image 2.png" title="Click to enlarge image 2.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calib/3.png" title="You are viewing the image with filename 3.png" data-thumb="/cache/jw_sig/jw_sig_cache_260534cb6b_3.jpg" target="_blank" data-fancybox="gallery260534cb6b">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image 3.png" title="Click to enlarge image 3.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calib/4.jpeg" title="You are viewing the image with filename 4.jpeg" data-thumb="/cache/jw_sig/jw_sig_cache_260534cb6b_4.jpg" target="_blank" data-fancybox="gallery260534cb6b">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image 4.jpeg" title="Click to enlarge image 4.jpeg"/>
        </a>
    </li>
        <li> </li>
</ul>


<!-- JoomlaWorks "Simple Image Gallery" Plugin (v4.1.0) ends here -->


<p>I have a &#34;Reference&#34; QMX+ PCB Rev3 which is unmodified, unmutilated, and otherwise in happy condition. It is connected to a Pi400 and runs 24x7 on JS8 or sometimes WSPR or whatever else I wish to use it for. The gallery below shows the complete calibration result, 36 images (Phase, USB sync, LSB sync for all 12 bands). Some phase error measurements do have weird glitches. Reasonable information from 160m (which still has receiver clock phase quadrature problems) is not expected. Some other bands have glitches on the phase distortion measurement too. Bear in mind that there could be spurious responses involved and this is also the fact for the Synchronization optimization. The y-axis indicates the total energy measured in the 3&#39;rd, 5&#39;th and 7&#39;th order intermodulation products; the y-axis units are relative only. A spur in the passband would add a fixed amount that elevates any observable dip, but would not necessarily indicate problems. </p>
<ul id="sigFreeIdd050b97a1c">
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/a.png" title="You are viewing the image with filename a.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_a.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image a.png" title="Click to enlarge image a.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/b.png" title="You are viewing the image with filename b.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_b.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image b.png" title="Click to enlarge image b.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/c.png" title="You are viewing the image with filename c.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_c.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image c.png" title="Click to enlarge image c.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/d.png" title="You are viewing the image with filename d.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_d.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image d.png" title="Click to enlarge image d.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/e.png" title="You are viewing the image with filename e.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_e.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image e.png" title="Click to enlarge image e.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/f.png" title="You are viewing the image with filename f.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_f.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image f.png" title="Click to enlarge image f.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/g.png" title="You are viewing the image with filename g.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_g.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image g.png" title="Click to enlarge image g.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/h.png" title="You are viewing the image with filename h.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_h.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image h.png" title="Click to enlarge image h.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/i.png" title="You are viewing the image with filename i.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_i.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image i.png" title="Click to enlarge image i.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/j.png" title="You are viewing the image with filename j.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_j.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image j.png" title="Click to enlarge image j.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/k.png" title="You are viewing the image with filename k.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_k.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image k.png" title="Click to enlarge image k.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/l.png" title="You are viewing the image with filename l.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_l.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image l.png" title="Click to enlarge image l.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/m.png" title="You are viewing the image with filename m.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_m.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image m.png" title="Click to enlarge image m.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/n.png" title="You are viewing the image with filename n.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_n.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image n.png" title="Click to enlarge image n.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/o.png" title="You are viewing the image with filename o.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_o.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image o.png" title="Click to enlarge image o.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/p.png" title="You are viewing the image with filename p.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_p.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image p.png" title="Click to enlarge image p.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/q.png" title="You are viewing the image with filename q.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_q.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image q.png" title="Click to enlarge image q.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/r.png" title="You are viewing the image with filename r.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_r.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image r.png" title="Click to enlarge image r.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/s.png" title="You are viewing the image with filename s.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_s.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image s.png" title="Click to enlarge image s.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/t.png" title="You are viewing the image with filename t.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_t.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image t.png" title="Click to enlarge image t.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/u.png" title="You are viewing the image with filename u.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_u.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image u.png" title="Click to enlarge image u.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/v.png" title="You are viewing the image with filename v.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_v.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image v.png" title="Click to enlarge image v.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/w.png" title="You are viewing the image with filename w.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_w.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image w.png" title="Click to enlarge image w.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/x.png" title="You are viewing the image with filename x.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_x.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image x.png" title="Click to enlarge image x.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/y.png" title="You are viewing the image with filename y.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_y.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image y.png" title="Click to enlarge image y.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/za.png" title="You are viewing the image with filename za.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_za.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image za.png" title="Click to enlarge image za.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/zb.png" title="You are viewing the image with filename zb.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_zb.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image zb.png" title="Click to enlarge image zb.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/zc.png" title="You are viewing the image with filename zc.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_zc.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image zc.png" title="Click to enlarge image zc.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/zd.png" title="You are viewing the image with filename zd.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_zd.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image zd.png" title="Click to enlarge image zd.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/ze.png" title="You are viewing the image with filename ze.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_ze.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image ze.png" title="Click to enlarge image ze.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/zf.png" title="You are viewing the image with filename zf.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_zf.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image zf.png" title="Click to enlarge image zf.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/zg.png" title="You are viewing the image with filename zg.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_zg.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image zg.png" title="Click to enlarge image zg.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/zh.png" title="You are viewing the image with filename zh.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_zh.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image zh.png" title="Click to enlarge image zh.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/zi.png" title="You are viewing the image with filename zi.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_zi.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image zi.png" title="Click to enlarge image zi.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/zj.png" title="You are viewing the image with filename zj.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_zj.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image zj.png" title="Click to enlarge image zj.png"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/calibex/zk.png" title="You are viewing the image with filename zk.png" data-thumb="/cache/jw_sig/jw_sig_cache_d050b97a1c_zk.jpg" target="_blank" data-fancybox="galleryd050b97a1c">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image zk.png" title="Click to enlarge image zk.png"/>
        </a>
    </li>
        <li> </li>
</ul>


<!-- JoomlaWorks "Simple Image Gallery" Plugin (v4.1.0) ends here -->


<hr/>

<p><img src="https://jamiepalatnik.com/images/qmx/ssb/menu.png" alt="" width="640" height="395"/></p>
<p>The QMX menu was inherited from the <a href="https://jamiepalatnik.com/qcxp" target="_blank" rel="noopener noreferrer">QCX</a> menu system. <a href="https://jamiepalatnik.com/qcxp" target="_blank" rel="noopener noreferrer">QCX</a> is a single band, CW-only transceiver. QMX is a much more capable, multi-band  and multi-mode transceiver. I thought that it was appropriate rather than extend the length of the top-level menu even more, to instead re-organize slightly. Now everything related to CW (Decoder settings, Keyer settings, Sidetone settings etc) is placed under the CW menu. The new SSB menu contains everything related to SSB. </p>

<hr/>

<p>The SSB menu contains a number of top-level configuration parameters and four sub-menus. Every aspect of the SSB exciter can be controlled by these menu parameters. At the moment there are probably TOO many menu parameters, some may never need to be changed and perhaps could later be hidden, or moved into an &#34;Advanced settings&#34; menu. For now, they are all exposed in order to facilitate testing. </p>
<p><span><strong>NOTE</strong></span>: Unlike many of the configuration parameters in QMX, the SSB configuration menu items take effect as soon as you edit them; and you can transmit while you are inside the configuration menu. This allows you to experiment with settings until you find your favorite operating conditions, without having to keep leaving the menu to test, then re-enter. You may also, in the main SSB menu when in the terminal, press the &#39;T&#39; key to toggle transmission on or off. Which allows some testing even if you don&#39;t have a PTT switch plugged in. </p>
<p><span><strong>This page is written assuming the use of the terminal interface, but all of the configuration menus are also available equivalently on the QMX itself via the LCD and buttons, in the normal way. </strong></span></p>
<p><img src="https://jamiepalatnik.com/images/qmx/ssb/ssbMenu.png" alt="" width="640" height="395"/></p>
<p>I&#39;ll deal with the menu options just simply from top to bottom. </p>
<hr/>
<h2>Transmit EQ</h2>
<p> <img src="https://jamiepalatnik.com/images/qmx/ssb/eq.png" alt="" width="640" height="395"/></p>
<p>The Transmit EQ screen contains configuration settings for a parametric equalizer. There are two filters, for bass and treble response; this type of filter is called a Biquad shelf filter. The configuration settings determine the parameters used to calculate the shelf filter coefficients. There&#39;s a visualization of the response of the filter, which is updated almost in real time around one second after a parameter is changed. The parameters can also be edited on the LCD, and s miniature version of the response curve is plotted on the right side of the display. </p>
<p>Note that many DX experts recommend that a large amount of energy is concentrated in the bass parts of human speech, but this contributes very little to the intelligibility of the transmission. It is therefore recommended to boost the treble end of the speech spectrum and attenuate the bass end. </p>
<p><strong>Use EQ</strong>: Use the left and right buttons to choose YES or NO, to enable or disable the Transmit Equalization. </p>
<p><strong>Global gain</strong>: This is a gain in dB which is applied to the entire curve. You can use it for example, if you have specified coefficients for the rest of the curve which involve negative gains, if you wish to bring up the level to an overall average zero level. Or vice versa. The global gain parameter has values from -20 dB to +20 dB in 1dB steps and you press the left or right arrow buttons to increase or decrease the chosen gain. </p>
<p><strong>Bass Freq</strong>: The low shelf mid-point frequency. This is the frequency where the gain is 0.5 of the total configured gain for the shelf. In the above example, the bass filter is not being used (gain is zero); but the treble filter has a &#34;frequency&#34;, the mid-point frequency, of 2000 Hz; and the Treble Gain is +7 dB. This means that the gain at 2000 Hz will be half, which is 3.5 dB. If you examine the curve in the screenshot above, you can see that indeed this is the case. </p>
<p><strong>Bass Gain</strong>: The total gain of the low shelf filter. This is the gain which the filter would eventually reach at zero frequency. This gain parameter has values from -20 dB to +20 dB in 1dB steps and you press the left or right arrow buttons to increase or decrease the chosen gain. </p>
<p><strong>Bass Slope</strong>: A measure of the steepness of the slope. The slope parameter has values from 0.0 to 2.0 in steps of 0.1 and you press the left or right arrow buttons to increase or decrease the slope. Note that for very steep slopes &gt; 1.0, the response will slightly overshoot the x-axis (zero). </p>
<p><strong>Treble Freq</strong>: The high shelf mid-point frequency. This is the frequency where the gain is 0.5 of the total configured gain for the shelf. In the above example, the bass filter is not being used (gain is zero); but the treble filter has a &#34;frequency&#34;, the mid-point frequency, of 2000 Hz; and the Treble Gain is +7 dB. This means that the gain at 2000 Hz will be half, which is 3.5 dB. If you examine the curve in the screenshot above, you can see that indeed this is the case. </p>
<p><strong>Treble Gain</strong>: The total gain of the low shelf filter. This is the gain which the filter would eventually reach at high frequencies way beyond the shelf mid-point frequency. This gain parameter has values from -20 dB to +20 dB in 1dB steps and you press the left or right arrow buttons to increase or decrease the chosen gain. </p>
<p><strong>Treble Slope</strong>: A measure of the steepness of the slope. The slope parameter has values from 0.0 to 2.0 in steps of 0.1 and you press the left or right arrow buttons to increase or decrease the slope. Note that for very steep slopes &gt; 1.0, the response will slightly overshoot the x-axis (zero). </p>
<hr/>
<h2>Mic AGC</h2>
<p><img src="https://jamiepalatnik.com/images/qmx/ssb/micAgc.png" alt="" width="640" height="395"/></p>
<p>This screen controls the microphone AGC. It is intended as a slow automatic gain control to adjust the gain to compensate for you moving further or closer to the microphone, or variations in your speech volume, etc. It&#39;s not the same thing as compression. Effectively this is a simplified, fast version of the AGC system used for the Receiver. </p>
<p><strong>AGC ON</strong>: Use the left and right buttons to choose YES or NO, to enable or disable the AGC. </p>
<p><strong>Max gain</strong>: The maximum gain of this AGC system, expressed in dB. The gain is varied by the AGC system, from this max gain value, to zero. To initialize the system, the max gain is applied to the microphone signal for a period of 0.01 seconds. The gain is reduced such that the peak audio during this measurement period, equals full scale. From then on, the gain is reduced quickly on speech peaks, and returns slowly to full gain during quieter speech. </p>
<p><strong>Hold time</strong>: After reducing the gain (because the gain-adjusted signal would exceed the full scale amplitude), the gain is held at its value for this hold time. The hold time is expressed in tenths of a second. </p>
<p><strong>Recovery</strong>: How quickly the gain starts returning to maximum after the hold time expires. This parameter is expressed in dB per second. In the example shown, the max gain is 10 dB and the recovery is 2 dB / second. So for example let us suppose that, in a sudden fit of excitement at hearing a rare DX station, you went from a peaceful quiet human being into a raving maniac and started yelling into the microphone; the AGC gain would be reduced from 10dB to zero; held there for 1 second; then begin recovering back up to 10dB (assuming your yelling had stopped) at 2dB / second taking 5 seconds to reach full 10dB gain. </p>
<hr/>
<h2>Back to the main SSB menu</h2>
<p><strong>Filter RX</strong>: The filter bandwidth used for SSB reception</p>
<p><strong>Filter TX</strong>: The filter bandwidth used for SSB transmission; this filter is applied (refer to the signal path diagram above) to the microphone signal early in the processing, right after downsampling, noise cancellation and DC level elimination. </p>
<p><strong>Input</strong>: Choose the audio to be routed to the SSB exciter. The three choices are:</p>
<ul>
<li>Ext. mic: External microphone plugged into the paddle port</li>
<li>USB: The QMX built-in USB soundcard receiving audio from a host PC, for example for Digi modes </li>
<li>Two-tone: Two-tone intermodulation test signal generator within QMX (standard 700 + 1900 Hz tones). </li>
</ul>
<p><strong>Mic. gain</strong>: A fixed gain (in dB) applied to the microphone signal to bring it approximately into the desired range. This is the same parameter which can be adjusted in the Microphone Test screen (refer to above section). </p>
<p><strong>Mic. compression</strong>: Compression is a gain factor which increases the average to peak power of the SSB transmission, giving you extra punch in weak signal conditions, DX, contests etc. It is applied to the softer quieter parts of the human speech to make them louder. The loudest peaks are untouched. This compression parameter is specified in dB and nothing stops you from increasing it all the way up to 99dB but that would be utterly ridiculous. It MUST be noted that compression can improve intelligibility but also results in more distorted, less natural sounding speech. So it should be used with caution. I have tried up to 18dB and it was still recognizably me and easy to understand, and much louder. </p>
<p><strong>Mic. noise. cncl.</strong>: Use the left and right buttons to choose ON or OFF, to enable or disable the microphone noise cancellation. The noise cancellation technique was discussed further up this page. It is recommended that noise cancellation is always ON. </p>
<hr/>
<h2>Mic. noise gate</h2>
<p><img src="https://jamiepalatnik.com/images/qmx/ssb/noisegate.png" alt="" width="640" height="395"/></p>
<p>The noise gate is an important parameter to understand. The key issue is the leakage through the PA even when the amplitude voltage is zero. This occurs because in the QMX circuit, the BS170 PA transistor gates are driven with a 5V square wave from 74ACT08 logic gates. The drive signal is present on the BS170 gates even when the Drain voltage is zero (zero amplitude modulation). Some of this signal leaks through the PA transistors in this OFF condition due to their capacitance. </p>
<p>Practically speaking, the Peak-Peak RF output of the PA is extremely linear with respect to the control voltage from the microcontroller&#39;s Digital to Analog Converter (DAC) output, from 45 or 50V peak-to-peak (5W is 45Vpp) down to below 1V. But somewhere between 0.5V and 1.0V, even though the DAC value goes to zero, the RF peak-to-peak does not decrease further. The control range is around 37dB of linear straight line control range. Which is good, but not infinite. </p>
<p>Even when the signal coming from the microphone is extremely low, the SSB modulator (polar modulation technique) still tries to convert it to polar coordinate space (angle and magnitude) for transmission as separate phase and amplitude modulation components. Low level microphone noise translates to phase angles that jump around randomly all over the circle. If the amplitude were truly zero, this would not matter. However, as it is, even with 1Vpp you can hear this noise. </p>
<p>This *may* be being FAR too perfectionist. 1Vpp into a 50-ohm system is 2.5 milliWatts. 37dB down from Peak Envelope Power. It was audible to me during testing because I transmitted at 5W PEP from a QMX+ into 79dB of inline BNC attenuators, straight into a QDX acting as the receiver. At the QDX input that results in an S9 + 30dB signal! Meanwhile there is no band noise, because the QDX (as receiver) RF port is piped straight to the QMX+ (as transmitter) RF port via BNC attenuators. 37dB down from Peak Envelope Power still leaves you with an S8 signal, and with a very low noise floor any defects are therefore extremely clear! It&#39;s a very very harsh test environment. In real life conditions you would be unlikely to be putting such an enormous signal into the other station&#39;s receiver, and he would not have zero band noise and zero other QRM. So these 37dB down defects may not be noticed. </p>
<p>Nevertheless, this menu exists to gate this microphone noise below a chosen threshold. The gate operates by switching off the TX signal to the driver altogether. It needs to be used with care, since there is nothing between zero output and 1Vpp. If the gate opens and closes too often, it produces a scratchy type of sound at low level on the audio, which is quite annoying. </p>
<p><strong>Noise gate</strong>: Use the left and right buttons to choose ON or OFF, to enable or disable the noise gate. </p>
<p><strong>Threshold</strong>: This is the threshold of operation of the noise gate. It is expressed in DAC units. So it&#39;s a voltage parameter (not dB, not power). The DAC output range is 0 to 4095. The DAC voltage is multiplied by the amplitude modulator to a voltage supplied to the PA, by a factor of 6.24. The default threshold 70 therefore corresponds to a PA voltage applied of 6.24 * 3.3 * 70 / 4096 = 0.35V. This is found to be a reasonable value; Vpp is about 3 or 4x the DC supply voltage therefore 0.35V DC supply is above 1Vpp and a suitable threshold. </p>
<p><strong>Samples</strong>: A kind of delay mechanism, crudely speaking, which prevents the gate operating too often. Each sample (running at 12ksps) whose envelope DAC value is greater (or equal) than the threshold increases a counter. When the counter reaches this &#34;Samples&#34; value, the transmitter is switched on (MS5351M Clk2 oscillator signal is allowed to drive the BS170 gate pins via the 74ACT08 logic gate). Subsequently for each sample whose envelope DAC value is less than the threshold, the internal counter is decreased by 1. When it reaches zero, the transmitter is switched OFF by disabling the driver. In this way, samples slows down the gating, creating a kind of hysteresis which prevents rapid crackling occurring by too many on/off gate actions.</p>
<p><strong>Attack slope</strong>: This is a way to ensure the transmitter turns on more quickly than it turns off. While the internal counter is decreased by 1 for each sample whose envelope is below the threshold, it is increased by the &#34;Attack slope&#34; value for each sample whose envelope value is greater (or equal) than the threshold. This makes the intended voice syllables appear more crisp as there is much less delay before the transmitter is switched on. </p>
<hr/>
<h2>VOX</h2>
<p>VOX means Voice Operating Exchange or more commonly, Voice Operated Transmission. Instead of waiting for a PTT button to be pressed to initiate transmission, the radio monitors the microphone continuously during receive, and if there is a noise it enables the transmitter. In the QMX the audio source can be the USB sound card, so the VOX settings also apply to the USB sound card audio, if USB is selected as the Input source for the SSB transmitter. The VOX subsystem operates in parallel with the PTT button, and indeed the CAT commands. So you can still activate transmission by the PTT button for example, even when VOX is on. </p>
<p><img src="https://jamiepalatnik.com/images/qmx/ssb/vox.png" alt="" width="640" height="395"/></p>
<p><strong>VOX</strong>: Use the left and right buttons to choose ON or OFF, to enable or disable the VOX feature. </p>
<p><strong>VOX threshold</strong>: This is the threshold amplitude which will trigger transmission when VOX is enabled. This is expressed as the percentage of full scale (for the USB audio). When the microphone is connected, it approximately equates to the percentage of the audio peaks at the microphone input which cause full power transmission. That IS approximate because it doesn&#39;t pass through the band pass filter, equalization, compression etc blocks, none of which are active during Receive. This does not appear to matter or diminish the effectiveness of VOX. </p>
<p><strong>VOX hold time</strong>: Once the VOX subsystem has triggered transmit, this parameter specifies how many tenths of a second it will remain held in transmit when the microphone audio is below the VOX threshold. </p>
<hr/>
<h2>Back to the main SSB menu</h2>
<p><strong>Drive level</strong>: This specifies the maximum drive level to the amplitude modulator as a function of the measured input supply voltage (as measured during Receive). This was also discussed further up this page. If this drive level is too high, clipping of the RF waveform will occur which cannot be prevented by CESSB, ALC or any other mechanism, since all those mechanisms DEPEND on this drive level, to determine what level of audio to allow through to the PA. The amplitude modulator circuit itself has some loss voltage; and the reverse polarity protection circuit also has a small voltage drop; furthermore the supply cables may have a voltage drop between Receive and the 10x higher current draw during transmit. If the level is too high, the intermodulation performance will deteriorate. The default value of 900 is usually a reasonable compromise in the absence of measurements. </p>
<p><strong>CESSB</strong>: Use the left and right buttons to choose ON or OFF, to enable or disable the CESSB feature.</p>
<p>Controlled Envelope SSB is a way of removing the amplitude envelope overshoots which occur in all SSB transmitters. CESSB was introduced by David Hershberger W9GER in a 2014 QEX article: <a href="http://www.arrl.org/files/file/QEX_Next_Issue/2014/Nov-Dec_2014/Hershberger_QEX_11_14.pdf" target="_blank" rel="noopener noreferrer">http://www.arrl.org/files/file/QEX_Next_Issue/2014/Nov-Dec_2014/Hershberger_QEX_11_14.pdf</a>. This article explains everything. It is vital to understand that SSB amplitude envelope is NOT a problem specific to Digital (SDR) SSB transmitters. It occurs on ANY SSB transmitter, whether an old filter-method SSB tranceiver, phasing analog transceiver, Weaver, ANYTHING. </p>
<p>The effect of having CESSB switched ON, on speech, is typically to increase the effective power of the transmitter by around 4 to 5 dB. So a 5W transmitter will sound to the remote station as though it is running 12W (for example). For single tone (CW), two-tone transmissions, FSK Digi modes, and some others, CESSB does not provide any improvement. It is primarily a technique for improving average to peak power on Speech transmissions. </p>
<p>If CESSB is not switched on, in QMX (and in other transceivers), Automatic Level Control (ALC) will act to reduce the gain of the transmitter, to prevent the overshooting peaks of the amplitude envelope from driving the PA into highly non-linear clipping. It is reported that the very best, fast look-ahead ALC systems can produce an improvement of around 2dB. So CESSB is still a clear winner compared to excellent ALC. </p>
<p>In QMX, when CESSB is switched off, a simple ALC action is implemented which prevents peaks from causing RF clipping and temporarily reduces gain, which is held at the lower value and gradually recovers; in very much the same way as the Microphone AGC described above. </p>
<p>It is recommended that in QMX, CESSB be left switched ON. </p>
<p><strong>Phase predistort</strong>: Use the left and right buttons to choose ON or OFF, to enable or disable the Phase pre-distortion feature.</p>
<p>When ON, each phase modulation sample is adjusted to cancel out phase distortion in the PA. Phase distortion occurs when there is a variable phase shift depending on the amplitude of the signal. This occurs because of changes in the transistor characteristics depending on Drain voltage; for example, the body diode acts as a reverse biased varactor diode whose capacitance is less when the applied voltage is higher.</p>
<p>QMX stores a phase pre-distortion curve of phase error vs amplitude, for each band of operation. These curves are measured by QMX using the Calibration tool described earlier in this page. If Phase pre-distortion is ON and Calibration has not been run, it will have no effect (because the calibration curves are zero). </p>
<p>When used correctly, phase pre-distortion makes a significant improvement to intermodulation performance. </p>
<p><strong>Ampl. predistort</strong>: Use the left and right buttons to choose ON or OFF, to enable or disable the Amplitude pre-distortion feature. </p>
<p>The huge advantage of polar modulation generated SSB is that it does not rely for its performance, on the amplitude linearity of an RF amplifier. Instead, there are separate phase modulation and amplitude modulation signal paths. The amplitude modulation does need to have high linearity. Howewer, this is very much easier to achieve by the use of more complex, multi-device feedback amplifiers, because the amplitude modulation occurs at audio frequencies. </p>
<p>In the section above regarding Microphone noise gating, I described a limitation of the amplitude modulator circuit. Even at zero amplitude, some blow-by of signal occurs and there is around 1Vpp output RF, when there should be zero. This limits the control range of the amplifier to about 0.5Vpp to 50Vpp, a control range of about 37 dB. </p>
<p>A slight improvement in intermodulation performance is just about observable, by switching off the transmit signal altogether at amplitudes below about 1Vpp. I am calling this &#34;Amplitude pre-distortion&#34;, though it is really a very crude action to try to correct this low amplitude misbehaviour. Although switching off the transmission completely is a quite approximate tool, it does appear to make a marginal difference to the two-tone intermodulation performance.</p>
<p>Whether or not it is of significant benefit in ordinary speech transmissions, remains to be seen. </p>
<p>In the oscilloscope screenshot gallery below (click for the fullsize images), the two-tone test generator is used as the signal source. The amplitude envelope DAC control signal has a &#34;rectified sinewave&#34; appearance, decreasing to zero at a rate equivalent to the difference in frequency of the tones (1200 Hz in this case). </p>
<ul>
<li>Left: Amplitude pre-distortion is switched OFF. You can clearly see that the amplitude envelope does not reach zero, it cannot go lower than about 1Vpp. </li>
<li>Middle: When Amplitude pre-distortion is switched ON, the transmission is stopped momentarily (for about 20us in this case) while the amplitude is small. </li>
<li>Right: A zoomed in view of the zero point. </li>
</ul>
<ul id="sigFreeId07c97841af">
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/zerocut/1.jpg" title="You are viewing the image with filename 1.jpg" data-thumb="/cache/jw_sig/jw_sig_cache_07c97841af_1.jpg" target="_blank" data-fancybox="gallery07c97841af">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image 1.jpg" title="Click to enlarge image 1.jpg"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/zerocut/2.jpg" title="You are viewing the image with filename 2.jpg" data-thumb="/cache/jw_sig/jw_sig_cache_07c97841af_2.jpg" target="_blank" data-fancybox="gallery07c97841af">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image 2.jpg" title="Click to enlarge image 2.jpg"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/zerocut/3.jpg" title="You are viewing the image with filename 3.jpg" data-thumb="/cache/jw_sig/jw_sig_cache_07c97841af_3.jpg" target="_blank" data-fancybox="gallery07c97841af">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image 3.jpg" title="Click to enlarge image 3.jpg"/>
        </a>
    </li>
        <li> </li>
</ul>


<!-- JoomlaWorks "Simple Image Gallery" Plugin (v4.1.0) ends here -->


<p><strong>Ampl. PD thresh.</strong>: This simply controls the threshold, in DAC steps, at which the Amplitude pre-distortion acts. A value of 70 corresponds approximately to around 1Vpp RF. </p>
<p><strong>PTT to TX delay</strong>: A delay in milliseconds, between when PTT is pressed and when transmission actually starts. Correspondingly on releasing the PTT switch to cease transmission, the SSB transmission stops then the system waits this number of milliseconds before switching QMX back to Receive mode. </p>
<hr/>

<p>Below are some measurements using the 700 + 1900 Hz two-tone test generator on 40m, to illustrate the effects of switching off phase pre-distortion and amplitude pre-distortion (stopping TX drive at very low amplitudes). </p>
<p>Sidenote regarding IMD units: there are two different systems in operation and it can get confusing. One way of reporting IMD products is to report  the level of the spurious responses relative to the desired carrier. In that case the IMD level may be -35 dBc for example (dBc means dB relative to carrier level). The OTHER way is favored by the ARRL in lab measurements in QST reviews (and elsewhere), and expressed intermodulation products relative to PEP (Peak Envelope Power). There is a 6dB difference between the two ways of expressing the same result. So -35 dBc is equal to -41 dB PEP. It doesn&#39;t matter which one is used, as long as you are clear on what you mean, and make sure any comparisons you make are all using the same units. I got used to dB PEP so I use that. </p>
<p>In the images below: </p>
<p>Left: Phase and Amplitude pre-distortion OFF. IMD3 is -38.85 dB PEP (note, the specc ann. delta cursor marker measures dBc as it is is set up here, and dB PEP is 6dB less than dBc as I explained above).</p>
<p>Middle: Phase pre-distortion is ON, amplitude pre-distortion is OFF. Showing the significant improvement due to phase pre-distortion. IMD3 is now -39.20 dB PEP but many of the higher order products are significantly lower ampliitude. </p>
<p>Right: Both phase and amplitude pre-distortion are ON. It yields the best IMD3 result, -40.42 dB PEP. Some higher order IMD products are lower, some are higher. It appears to me that on the whole, on average, IMD spurs are lower with amplitude pre-distortion ON. But it makes only a little difference and is hard to judge, whereas phase pre-distortion is a very clear improvement. </p>
<ul id="sigFreeId2d15b43dc6">
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/imd/1.jpeg" title="You are viewing the image with filename 1.jpeg" data-thumb="/cache/jw_sig/jw_sig_cache_2d15b43dc6_1.jpg" target="_blank" data-fancybox="gallery2d15b43dc6">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image 1.jpeg" title="Click to enlarge image 1.jpeg"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/imd/2.jpeg" title="You are viewing the image with filename 2.jpeg" data-thumb="/cache/jw_sig/jw_sig_cache_2d15b43dc6_2.jpg" target="_blank" data-fancybox="gallery2d15b43dc6">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image 2.jpeg" title="Click to enlarge image 2.jpeg"/>
        </a>
    </li>
        <li>
        <a href="https://jamiepalatnik.com/images/qmx/ssb/imd/3.jpeg" title="You are viewing the image with filename 3.jpeg" data-thumb="/cache/jw_sig/jw_sig_cache_2d15b43dc6_3.jpg" target="_blank" data-fancybox="gallery2d15b43dc6">
            <img src="https://jamiepalatnik.com/plugins/content/jw_sig/jw_sig/includes/images/transparent.gif" alt="Click to enlarge image 3.jpeg" title="Click to enlarge image 3.jpeg"/>
        </a>
    </li>
        <li> </li>
</ul>


<!-- JoomlaWorks "Simple Image Gallery" Plugin (v4.1.0) ends here -->


<hr/>

<p>One of the minor imperfections in the hardware occurs in the amplitude modulator, and is well illustrated by this oscilloscope trace photograph I took in August 2024. </p>
<p><img src="https://jamiepalatnik.com/images/qmx/ssb/twotone.jpg" alt="" width="900" height="690"/></p>
<p>The bottom (yellow) channel at 1V/div shows the DAC output voltage which appears across C503, the input to the amplitude modulator. </p>
<p>The top (blue) channel at 10V/div shows the RF output signal across the dummy load, which in this case is set to about 2.4W PEP. </p>
<p>The signal is the two-tone (700 + 1900 Hz) test. As the DSP runs at 12ksps, this means that the frequency of these half-sine-waves is 1200 Hz (the difference between the tones). The DAC control voltage, +/- noise and RF sloshing around the shack, is a clean staircase of the 10 samples (at 12ksps) which make up every sine half-cycle of the amplitude envelope. </p>
<p>Several defects are identified in the below extract from this image:</p>
<p><img src="https://jamiepalatnik.com/images/qmx/ssb/defects.jpg" alt="" width="659" height="516"/></p>
<p>The amplitude not going to zero at the zero amplitude point of the phase reversal is a problem that has already been discussed and was resolved (as well as possible) by the &#34;Amplitude pre-distortion&#34; switch which when ON, causes the transmit signal to be gated off when the target amplitude is below 1Vpp. It makes a small difference to transmitter IMD products (see above). </p>
<p>The other problems are the response time of the amplitude modulator, to the commanded amplitude (per the input from the microcontroller DAC pin). During steps UP in amplitude (rising edge of the waveform) the amplitude is seen to temporarily overshoot the desired step height. And during steps DOWN in amplitude (falling edge of the waveform), the amplitude is seen to too slowly decay to the desired step height rather than reach it immediately. These problems were significantly impairing the IMD performance of the transmissions. </p>
<p>I tried a number of strategies (all in firmware) to address this issue. Note also that the overshoots are most severe when the steps are large. Which is what gave me an idea. I arranged to interpolate (simple straight line linear interpolation) the amplitude envelope samples, adding a &#34;mid point&#34; between each of the actual samples.With the Digital Signal Processing running at a rate of 12ksps, as well as the phase modulation to the MS5351M, this meant that the amplitude modulation was streaming samples to the DAC at a rate of 24ksps. It made a large improvement to the intermodulation products!</p>
<p>So I continued increasing the number of interpolation points, to 4, 8, 16. Each time there was an improvement in IMD but the improvements became smaller and smaller. At the point I went from 32 interpolation points to 64, the system hung up and I wrenched the power supply plug, fearing smoke. For a long time I stuck with 32 but in the end I reduced it to 28, which does not detectably alter performance, because 28 works out with integer divisions from the system clock rate of 168 MHz whereas 32 didn&#39;t (and led to discontinuities in the audio sample stream). </p>
<p>The image below shows the final result after interpolation. There are still only 10 actual calculated points per wave cycle (700 + 1900 Hz two-tone at 12ksps). You can see the calculated points and the straight line between them of tiny invisible steps. This completely solved the problems of amplifier over/undershoot. </p>
<p><img src="https://jamiepalatnik.com/images/qmx/ssb/interp.png" width="800" height="600"/></p>
<hr/>

<table>
<tbody>
<tr>
<td><strong>Version</strong></td>
<td><strong>Date</strong></td>
<td><strong>Contents</strong></td>
</tr>
<tr>
<td><a href="https://jamiepalatnik.com/images/qmx/ssb/firmware/1_01_002.zip" target="_blank" rel="noopener noreferrer">1_01_002</a></td>
<td>20-Mar-2025</td>
<td>1. Bug fix: Update year to 2025 on terminal and LCD splash screen</td>
</tr>
<tr>
<td><a href="https://jamiepalatnik.com/images/qmx/ssb/firmware/1_01_001.zip" target="_blank" rel="noopener noreferrer">1_01_001</a></td>
<td>19-Mar-2025</td>
<td>1. Bug fix: CAT TX; command was not working for PTT controlled from a computer.</td>
</tr>
<tr>
<td><a href="https://jamiepalatnik.com/images/qmx/ssb/firmware/1_01_000.zip" target="_blank" rel="noopener noreferrer">1_01_000</a></td>
<td>18-Mar-2025</td>
<td>1. Initial beta firmware release of SSB firmware.</td>
</tr>
</tbody>
</table> 	</div></div>
  </body>
</html>
