<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/microsoft/garnet">Original</a>
    <h1>Garnet – A new remote cache-store from Microsoft Research</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a href="https://github.com/microsoft/garnet/actions/workflows/ci.yml"><img src="https://github.com/microsoft/garnet/actions/workflows/ci.yml/badge.svg?branch=main" alt=".NET CI"/></a>
<a href="https://aka.ms/garnet-discord" rel="nofollow"><img src="https://camo.githubusercontent.com/c82c5e4834a8243cab1300c0557a9fcf60d0099c576e2ee057ba20656b80e31f/68747470733a2f2f646973636f72646170702e636f6d2f6170692f6775696c64732f313231333933373435323237323538323637362f7769646765742e706e673f7374796c653d736869656c64" alt="Discord Shield" data-canonical-src="https://discordapp.com/api/guilds/1213937452272582676/widget.png?style=shield"/></a></p>
<p dir="auto">Garnet is a new remote cache-store from Microsoft Research, that offers several unique benefits:</p>
<ul dir="auto">
<li>Garnet adopts the popular <a href="https://redis.io/docs/reference/protocol-spec/" rel="nofollow">RESP</a> wire protocol as a starting point, which makes it possible to use Garnet from unmodified Redis clients available in
most programming languages of today, such as <a href="https://github.com/StackExchange/StackExchange.Redis">StackExchange.Redis</a> in C#.</li>
<li>Garnet offers much better throughput and scalability with many client connections and small batches, relative to comparable open-source cache-stores, leading to cost savings for large apps and services.</li>
<li>Garnet demonstrates extremely low client latencies (often less than 300 microseconds at the 99.9th percentile) using commodity cloud (Azure) VMs with accelerated TCP enabled, which is critical to real-world scenarios.</li>
<li>Based on the latest .NET technology, Garnet is cross-platform, extensible, and modern. It is designed to be easy to develop for and evolve, without sacrificing performance in the
common case. We leveraged the rich library ecosystem of .NET for API breadth, with open opportunities for optimization. Thanks to our careful use of .NET, Garnet achieves
state-of-the-art performance on both Linux and Windows.</li>
</ul>
<p dir="auto">This repo contains the code to build and run Garnet. For more information and documentation, check out our website at <a href="https://microsoft.github.io/garnet" rel="nofollow">https://microsoft.github.io/garnet</a>.</p>

<p dir="auto">Garnet implements a wide range of APIs including raw strings (e.g., gets, sets, and key expiration), analytical (e.g., HyperLogLog and Bitmap), and object (e.g., sorted sets and lists)
operations. It can handle multi-key transactions in the form of client-side RESP transactions and our own server-side stored procedures in C# and allows users to define custom
operations on both raw strings and new object types, all in the convenience and safety of C#, leading to a lower bar for developing custom extensions.</p>
<p dir="auto">Garnet uses a fast and pluggable network layer, enabling future extensions such as leveraging kernel-bypass stacks. It supports secure transport layer security (TLS) communications using
the robust <a href="https://learn.microsoft.com/en-us/dotnet/api/system.net.security.sslstream" rel="nofollow">SslStream</a> library of .NET, as well as basic access control. Garnet’s storage layer, called Tsavorite, was
forked from our prior open-source project <a href="https://github.com/microsoft/FASTER">FASTER</a>, and includes strong database features such as thread scalability, tiered storage support
(memory, SSD, and cloud storage), fast non-blocking checkpointing, recovery, operation logging for durability, multi-key transaction support, and better memory management and reuse.
Finally, Garnet supports a cluster mode of operation with support for sharding, replication, and dynamic key migration.</p>
<p dir="auto">
  <a target="_blank" rel="noopener noreferrer" href="https://private-user-images.githubusercontent.com/18355833/313800351-851be90b-e43a-40ca-ae56-7dc087cf6adc.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTA4MjU1MDMsIm5iZiI6MTcxMDgyNTIwMywicGF0aCI6Ii8xODM1NTgzMy8zMTM4MDAzNTEtODUxYmU5MGItZTQzYS00MGNhLWFlNTYtN2RjMDg3Y2Y2YWRjLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMTklMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzE5VDA1MTMyM1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTc0MjlhNjU0MzE2MDE0MmU1MDc5OGE1MjQ4NjM5MjlkNGM2NzQwNzc2Y2I4NmY5NzExOTQ5OWQ4MWM1OGU3YWMmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.zfWbwEp4YZX5bdzYOd0_JXFmBrLVsV0AIhIJ3CEBIPQ"><img src="https://private-user-images.githubusercontent.com/18355833/313800351-851be90b-e43a-40ca-ae56-7dc087cf6adc.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTA4MjU1MDMsIm5iZiI6MTcxMDgyNTIwMywicGF0aCI6Ii8xODM1NTgzMy8zMTM4MDAzNTEtODUxYmU5MGItZTQzYS00MGNhLWFlNTYtN2RjMDg3Y2Y2YWRjLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMTklMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzE5VDA1MTMyM1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTc0MjlhNjU0MzE2MDE0MmU1MDc5OGE1MjQ4NjM5MjlkNGM2NzQwNzc2Y2I4NmY5NzExOTQ5OWQ4MWM1OGU3YWMmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.zfWbwEp4YZX5bdzYOd0_JXFmBrLVsV0AIhIJ3CEBIPQ" width="350"/></a>
</p>

<p dir="auto">We illustrate a few key results on our <a href="https://microsoft.github.io/garnet/docs/benchmarking/overview" rel="nofollow">website</a> comparing Garnet to leading open-source cache-stores.</p>

<p dir="auto">Garnet’s design re-thinks the entire cache-store stack – from receiving packets on the network, to parsing and processing database operations, to performing storage interactions. We build on
top of years of our <a href="https://microsoft.github.io/FASTER/docs/td-research-papers/" rel="nofollow">prior research</a>. Below is Garnet’s overall architecture.</p>
<p dir="auto">
  <a target="_blank" rel="noopener noreferrer" href="https://private-user-images.githubusercontent.com/18355833/313767776-8d89f719-f86b-4b1f-81d1-1ae7bd450001.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTA4MjU1MDMsIm5iZiI6MTcxMDgyNTIwMywicGF0aCI6Ii8xODM1NTgzMy8zMTM3Njc3NzYtOGQ4OWY3MTktZjg2Yi00YjFmLTgxZDEtMWFlN2JkNDUwMDAxLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMTklMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzE5VDA1MTMyM1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWJkMDc1ZWE3ODI5OWQ1NTQ5MjQ3YjgwYTVjZjg3NDAwODQzN2FhNDU0YWMxMGZiMjA4ODNhZmU3NmQxOTJmYWQmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.OZxhPCZ-mx5IhIB38zWmSAmWwCu71W9otokUvRx8Pwg"><img src="https://private-user-images.githubusercontent.com/18355833/313767776-8d89f719-f86b-4b1f-81d1-1ae7bd450001.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTA4MjU1MDMsIm5iZiI6MTcxMDgyNTIwMywicGF0aCI6Ii8xODM1NTgzMy8zMTM3Njc3NzYtOGQ4OWY3MTktZjg2Yi00YjFmLTgxZDEtMWFlN2JkNDUwMDAxLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMTklMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzE5VDA1MTMyM1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWJkMDc1ZWE3ODI5OWQ1NTQ5MjQ3YjgwYTVjZjg3NDAwODQzN2FhNDU0YWMxMGZiMjA4ODNhZmU3NmQxOTJmYWQmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.OZxhPCZ-mx5IhIB38zWmSAmWwCu71W9otokUvRx8Pwg" width="400"/></a>
</p>
<p dir="auto">Garnet’s network layer inherits a shared memory design inspired by our prior research on <a href="https://www.microsoft.com/en-us/research/publication/achieving-high-throughput-and-elasticity-in-a-larger-than-memory-store/" rel="nofollow">ShadowFax</a>. TLS
processing and storage interactions are performed on the IO completion thread, avoiding thread switching overheads in the common case. This approach allows CPU cache coherence to bring the data to the network, instead of traditional
shuffle-based designs, which require data movement on the server.</p>
<p dir="auto">Garnet’s storage design consists of two Tsavorite key-value stores whose fates are bound by a unified operation log. The first store, called the “main store,” is optimized for raw string operations and manages memory carefully to
avoid garbage collection. The second, and optional, “object store” is optimized for complex objects and custom data types, including popular types such as Sorted Set, Set, Hash, List, and Geo. Data types in the object store
leverage the .NET library ecosystem for their current implementations. They are stored on the heap in memory (which makes updates very efficient) and in a serialized form on disk. In the future, we plan to investigate using a
unified index and log to ease maintenance.</p>
<p dir="auto">A distinguishing feature of Garnet’s design is its narrow-waist Tsavorite storage API, which is used to implement the large, rich, and extensible RESP API surface on top. This API consists of read, upsert, delete, and atomic
read-modify-write operations, implemented with asynchronous callbacks for Garnet to interject logic at various points during each operation. Our storage API model allows us to cleanly separate Garnet’s parsing and query
processing concerns from storage details such as concurrency, storage tiering, and checkpointing. Garnet uses two-phase locking for multi-key transactions.</p>

<p dir="auto">In addition to single-node execution, Garnet supports a cluster mode, which allows users to create and manage a sharded and replicated deployment. Garnet also supports an efficient and dynamic key migration scheme
to rebalance shards. Users can use standard Redis cluster commands to create and manage Garnet clusters, and nodes perform gossip to share and evolve cluster state. Cluster is still work in progress.</p>

<p dir="auto">Head over to our <a href="https://microsoft.github.io/garnet" rel="nofollow">documentation</a> site, or jump directly to the <a href="https://microsoft.github.io/garnet/docs/getting-started" rel="nofollow">getting started</a> or
<a href="https://microsoft.github.io/garnet/docs/welcome/releases" rel="nofollow">releases</a> section.</p>

<p dir="auto">This project is licensed under the <a href="https://opensource.org/licenses/MIT" rel="nofollow">MIT License</a>, see the <a href="https://github.com/microsoft/garnet/blob/main/LICENSE">LICENSE</a> file.</p>

<p dir="auto">Privacy information can be found at <a href="https://privacy.microsoft.com/en-us/privacystatement" rel="nofollow">https://privacy.microsoft.com/en-us/</a>.</p>

<p dir="auto">This project welcomes contributions and suggestions.  Most contributions require you to agree to a
Contributor License Agreement (CLA) declaring that you have the right to, and actually do, grant us
the rights to use your contribution. For details, visit <a href="https://cla.opensource.microsoft.com" rel="nofollow">https://cla.opensource.microsoft.com</a>.</p>
<p dir="auto">When you submit a pull request, a CLA bot will automatically determine whether you need to provide
a CLA and decorate the PR appropriately (e.g., status check, comment). Simply follow the instructions
provided by the bot. You will only need to do this once across all repos using our CLA.</p>
<p dir="auto">This project has adopted the <a href="https://opensource.microsoft.com/codeofconduct/" rel="nofollow">Microsoft Open Source Code of Conduct</a>.
For more information see the <a href="https://opensource.microsoft.com/codeofconduct/faq/" rel="nofollow">Code of Conduct FAQ</a> or
contact <a href="mailto:opencode@microsoft.com">opencode@microsoft.com</a> with any additional questions or comments.</p>

<p dir="auto">This project may contain trademarks or logos for projects, products, or services. Authorized use of Microsoft
trademarks or logos is subject to and must follow
<a href="https://www.microsoft.com/en-us/legal/intellectualproperty/trademarks/usage/general" rel="nofollow">Microsoft&#39;s Trademark &amp; Brand Guidelines</a>.
Use of Microsoft trademarks or logos in modified versions of this project must not cause confusion or imply Microsoft sponsorship.
Any use of third-party trademarks or logos are subject to those third-party&#39;s policies.</p>
<p dir="auto">Redis is a registered trademark of Redis Ltd. Any rights therein are reserved to Redis Ltd. Any use by Microsoft is for referential
purposes only and does not indicate any sponsorship, endorsement or affiliation between Redis and Microsoft.</p>
</article></div></div>
  </body>
</html>
