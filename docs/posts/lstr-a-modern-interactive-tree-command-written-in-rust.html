<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/bgreenwell/lstr">Original</a>
    <h1>Show HN: Lstr – A modern, interactive tree command written in Rust</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a href="https://github.com/bgreenwell/lstr/actions"><img src="https://github.com/bgreenwell/lstr/actions/workflows/ci.yml/badge.svg" alt="Build Status"/></a>
<a href="https://crates.io/crates/lstr" rel="nofollow"><img src="https://camo.githubusercontent.com/b6682dc3f177211760ed9636185d7aafc140643f821ab6e95f05d8052f37919d/68747470733a2f2f696d672e736869656c64732e696f2f6372617465732f762f6c7374722e737667" alt="Latest Version" data-canonical-src="https://img.shields.io/crates/v/lstr.svg"/></a>
<a href="https://opensource.org/licenses/MIT" rel="nofollow"><img src="https://camo.githubusercontent.com/6cd0120cc4c5ac11d28b2c60f76033b52db98dac641de3b2644bb054b449d60c/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d4d49542d79656c6c6f772e737667" alt="License: MIT" data-canonical-src="https://img.shields.io/badge/License-MIT-yellow.svg"/></a></p>
<p dir="auto">A blazingly fast, minimalist directory tree viewer, written in Rust. Inspired by the command line program <a href="https://github.com/Old-Man-Programmer/tree">tree</a>, with a powerful interactive mode.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/bgreenwell/lstr/blob/main/assets/lstr-demo.gif"><img src="https://github.com/bgreenwell/lstr/raw/main/assets/lstr-demo.gif" alt="" data-animated-image=""/></a>
<em>An interactive overview of <code>lstr</code>&#39;s project structure... using <code>lstr</code>.</em></p>

<ul dir="auto">
<li><strong>Fast:</strong> Runs directory scans in parallel by default to maximize speed on modern hardware.</li>
<li><strong>Minimalist:</strong> Provides essential features without the bloat. The core experience is clean and uncluttered.</li>
<li><strong>Interactive:</strong> An optional TUI mode for fluid, keyboard-driven exploration.</li>
</ul>

<ul dir="auto">
<li><strong>High-performance:</strong> Scans directories in parallel to be as fast as possible.</li>
<li><strong>Classic and interactive modes:</strong> Use <code>lstr</code> for a classic <code>tree</code>-like view, or launch <code>lstr interactive</code> for a fully interactive TUI.</li>
<li><strong>Rich information display (optional):</strong>
<ul dir="auto">
<li>Display file-specific icons with <code>--icons</code> (requires a Nerd Font).</li>
<li>Show file permissions with <code>-p</code>.</li>
<li>Show file sizes with <code>-s</code>.</li>
<li><strong>Git Integration:</strong> Show file statuses (<code>Modified</code>, <code>New</code>, <code>Untracked</code>, etc.) directly in the tree with the <code>-G</code> flag.</li>
</ul>
</li>
<li><strong>Smart filtering:</strong>
<ul dir="auto">
<li>Respects your <code>.gitignore</code> files with the <code>-g</code> flag.</li>
<li>Control recursion depth (<code>-L</code>) or show only directories (<code>-d</code>).</li>
</ul>
</li>
</ul>

<p dir="auto">You need the Rust toolchain installed on your system to build <code>lstr</code>. Or use <code>nix develop</code> command to create development environment.</p>
<ol dir="auto">
<li><strong>Clone the repository:</strong>
<div dir="auto" data-snippet-clipboard-copy-content="git clone https://github.com/bgreenwell/lstr.git
cd lstr"><pre>git clone https://github.com/bgreenwell/lstr.git
<span>cd</span> lstr</pre></div>
</li>
<li><strong>Build and install using Cargo:</strong>
<div dir="auto" data-snippet-clipboard-copy-content="# This compiles in release mode and copies the binary to ~/.cargo/bin
cargo install --path ."><pre><span><span>#</span> This compiles in release mode and copies the binary to ~/.cargo/bin</span>
cargo install --path <span>.</span></pre></div>
</li>
</ol>

<div dir="auto" data-snippet-clipboard-copy-content="lstr [OPTIONS] [PATH]
lstr interactive [OPTIONS] [PATH]"><pre>lstr [OPTIONS] [PATH]
lstr interactive [OPTIONS] [PATH]</pre></div>
<p dir="auto">Note that <code>PATH</code> defaults to the current directory (<code>.</code>) if not specified.</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-a</code>, <code>--all</code></td>
<td>List all files and directories, including hidden ones.</td>
</tr>
<tr>
<td><code>--color &lt;WHEN&gt;</code></td>
<td>Specify when to use color output (<code>always</code>, <code>auto</code>, <code>never</code>).</td>
</tr>
<tr>
<td><code>-d</code>, <code>--dirs-only</code></td>
<td>List directories only, ignoring all files.</td>
</tr>
<tr>
<td><code>-g</code>, <code>--gitignore</code></td>
<td>Respect <code>.gitignore</code> and other standard ignore files.</td>
</tr>
<tr>
<td><code>-G</code>, <code>--git-status</code></td>
<td>Show git status for files and directories.</td>
</tr>
<tr>
<td><code>--icons</code></td>
<td>Display file-specific icons; requires a <a href="https://www.nerdfonts.com/" rel="nofollow">Nerd Font</a>.</td>
</tr>
<tr>
<td><code>-L</code>, <code>--level &lt;LEVEL&gt;</code></td>
<td>Maximum depth to descend.</td>
</tr>
<tr>
<td><code>-p</code>, <code>--permissions</code></td>
<td>Display file permissions (Unix-like systems only).</td>
</tr>
<tr>
<td><code>-s</code>, <code>--size</code></td>
<td>Display the size of files.</td>
</tr>
<tr>
<td><code>--expand-level &lt;LEVEL&gt;</code></td>
<td><strong>Interactive mode only:</strong> Initial depth to expand the interactive tree.</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<hr/>

<p dir="auto">Launch the TUI with <code>lstr interactive [OPTIONS] [PATH]</code>.</p>

<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Key(s)</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>↑</code> / <code>k</code></td>
<td>Move selection up.</td>
</tr>
<tr>
<td><code>↓</code> / <code>j</code></td>
<td>Move selection down.</td>
</tr>
<tr>
<td><code>Enter</code></td>
<td><strong>Context-aware action:</strong></td>
</tr>
<tr>
<td><code>q</code> / <code>Esc</code></td>
<td>Quit the application normally.</td>
</tr>
<tr>
<td><code>Ctrl</code>+<code>s</code></td>
<td><strong>Shell integration:</strong> Quits and prints the selected path to stdout.</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>

<p dir="auto"><strong>1. List the contents of the current directory</strong></p>

<p dir="auto"><strong>2. Explore a project interactively, ignoring gitignored files</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="lstr interactive -g --icons"><pre>lstr interactive -g --icons</pre></div>
<p dir="auto"><strong>3. Display a directory with file sizes and permissions (classic view)</strong></p>

<p dir="auto"><strong>4. See the git status of all files in a project</strong></p>

<p dir="auto"><strong>5. Start an interactive session with all data displayed</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="lstr interactive -gG --icons -s -p"><pre>lstr interactive -gG --icons -s -p</pre></div>
<div dir="auto"><h2 tabindex="-1" dir="auto">Piping and shell interaction</h2><a id="user-content-piping-and-shell-interaction" aria-label="Permalink: Piping and shell interaction" href="#piping-and-shell-interaction"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The classic <code>view</code> mode is designed to work well with other command-line tools via pipes (<code>|</code>).</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Interactive fuzzy finding with <code>fzf</code></h3><a id="user-content-interactive-fuzzy-finding-with-fzf" aria-label="Permalink: Interactive fuzzy finding with fzf" href="#interactive-fuzzy-finding-with-fzf"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This is a powerful way to instantly find any file in a large project.</p>

<p dir="auto"><code>fzf</code> will take the tree from <code>lstr</code> and provide an interactive search prompt to filter it.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Paging large trees with <code>less</code> or <code>bat</code></h3><a id="user-content-paging-large-trees-with-less-or-bat" aria-label="Permalink: Paging large trees with less or bat" href="#paging-large-trees-with-less-or-bat"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">If a directory is too large to fit on one screen, pipe the output to a <em>pager</em>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Using less (the -R flag preserves color)
lstr -L 10 | less -R

# Using bat (a modern pager that understands colors)
lstr --icons | bat"><pre><span><span>#</span> Using less (the -R flag preserves color)</span>
lstr -L 10 <span>|</span> less -R

<span><span>#</span> Using bat (a modern pager that understands colors)</span>
lstr --icons <span>|</span> bat</pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">Changing directories with <code>lstr</code></h3><a id="user-content-changing-directories-with-lstr" aria-label="Permalink: Changing directories with lstr" href="#changing-directories-with-lstr"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You can use <code>lstr</code> as a visual <code>cd</code> command. Add the following function to your shell&#39;s startup file (e.g., <code>~/.bashrc</code>, <code>~/.zshrc</code>):</p>
<div dir="auto" data-snippet-clipboard-copy-content="# A function to visually change directories with lstr
lcd() {
    # Run lstr and capture the selected path into a variable.
    # The TUI will draw on stderr, and the final path will be on stdout.
    local selected_dir
    selected_dir=&#34;$(lstr interactive -g --icons)&#34;

    # If the user selected a path (and didn&#39;t just quit), `cd` into it.
    # Check if the selection is a directory.
    if [[ -n &#34;$selected_dir&#34; &amp;&amp; -d &#34;$selected_dir&#34; ]]; then
        cd &#34;$selected_dir&#34;
    fi
}"><pre><span><span>#</span> A function to visually change directories with lstr</span>
<span>lcd</span>() {
    <span><span>#</span> Run lstr and capture the selected path into a variable.</span>
    <span><span>#</span> The TUI will draw on stderr, and the final path will be on stdout.</span>
    <span>local</span> selected_dir
    selected_dir=<span><span>&#34;</span><span><span>$(</span>lstr interactive -g --icons<span>)</span></span><span>&#34;</span></span>

    <span><span>#</span> If the user selected a path (and didn&#39;t just quit), `cd` into it.</span>
    <span><span>#</span> Check if the selection is a directory.</span>
    <span>if</span> [[ <span>-n</span> <span><span>&#34;</span><span>$selected_dir</span><span>&#34;</span></span> <span>&amp;&amp;</span> <span>-d</span> <span><span>&#34;</span><span>$selected_dir</span><span>&#34;</span></span> ]]<span>;</span> <span>then</span>
        <span>cd</span> <span><span>&#34;</span><span>$selected_dir</span><span>&#34;</span></span>
    <span>fi</span>
}</pre></div>
<p dir="auto">After adding this and starting a new shell session (or running <code>source ~/.bashrc</code>), you can simply run:</p>

<p dir="auto">This will launch the <code>lstr</code> interactive UI. Navigate to the directory you want, press <code>Ctrl+s</code>, and your shell&#39;s current directory will instantly change.</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Performance and concurrency</h2><a id="user-content-performance-and-concurrency" aria-label="Permalink: Performance and concurrency" href="#performance-and-concurrency"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">By default, <code>lstr</code> uses a parallel directory walker to maximize speed on multi-core systems. This parallelism is managed by the excellent <a href="https://crates.io/crates/rayon" rel="nofollow">rayon</a> thread pool, which is used internally by <code>lstr</code>&#39;s directory traversal engine.</p>
<p dir="auto">For advanced use cases, such as benchmarking or limiting CPU usage, you can control the number of threads by setting the <code>RAYON_NUM_THREADS</code> environment variable before running the command.</p>
<p dir="auto"><strong>To force single-threaded (serial) execution:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="RAYON_NUM_THREADS=1 lstr ."><pre>RAYON_NUM_THREADS=1 lstr <span>.</span></pre></div>

<p dir="auto">The philosophy and functionality of <code>lstr</code> are heavily inspired by the excellent C-based <a href="https://github.com/Old-Man-Programmer/tree">tree</a> command line program. This project is an attempt to recreate that classic utility in modern, safe Rust.</p>
</article></div></div>
  </body>
</html>
