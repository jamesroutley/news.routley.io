<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://vercel.com/blog/how-turborepo-is-porting-from-go-to-rust?nxtPslug=how-turborepo-is-porting-from-go-to-rust">Original</a>
    <h1>How Turborepo is porting from Go to Rust</h1>
    
    <div id="readability-page-1" class="page"><div><p>In <a href="https://vercel.com/blog/turborepo-migration-go-rust" rel="noopener" target="_blank">a previous blog post</a>, we talked about <b>why</b> we are porting <a href="https://turbo.build?utm_source=turbo&amp;utm_medium=blog&amp;utm_campaign=turborepo_porting" rel="noopener" target="_blank">Turborepo, the high-performance build system for JavaScript and TypeScript</a>, from Go to Rust. Now, let&#39;s talk about <b>how</b>.</p><p>Today, our porting effort is in full swing, moving more and more code to Rust. But when we were starting out, we had to make sure that porting was feasible for us to accomplish. A migration from one language to another is no small task and there&#39;s a lot of research to do up front to ensure that the end goal is attainable. </p><p>Hereâ€™s how we started the process, validated our current porting strategy, and made the call to port Turborepo to Rust.</p><h2><span id="port-vs.-full-rewrite"></span><a href="#port-vs.-full-rewrite">Port vs. full rewrite</a><span><svg data-testid="geist-icon" fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24" style="color:currentColor;width:0.75em;height:0.75em"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"></path></svg></span></h2><p>When we were planning our migration, we briefly considered a full, ground-up rewrite. But, talking the idea through, we realized it wouldn&#39;t fit our goals as well as an incremental port would.</p><h3><span id="what-is-an-incremental-port"></span><a href="#what-is-an-incremental-port">What is an incremental port?</a><span><svg data-testid="geist-icon" fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24" style="color:currentColor;width:0.75em;height:0.75em"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"></path></svg></span></h3><p>Incremental porting moves code piece-by-piece, running new and old code together at the same time. The goal for the chunk of code being moved is to keep the behavior exactly the same as before it was ported.</p><div><div><figure data-vercel-edit-target="true"><p><img data-version="v1" alt="Frame 427319409.png" loading="lazy" width="2880" height="2113" decoding="async" data-nimg="1" srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2FmZz2Um8re3MZXucpSZdoV%2F890469916054b2f0b364c13514e825b4%2FFrame_427319409.png&amp;w=3840&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 1x" src="https://vercel.com/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2FmZz2Um8re3MZXucpSZdoV%2F890469916054b2f0b364c13514e825b4%2FFrame_427319409.png&amp;w=3840&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W"/></p></figure></div><div><figure data-vercel-edit-target="true"><p><img data-version="v1" alt="Frame 427319402 (1).png" loading="lazy" width="1920" height="1409" decoding="async" data-nimg="1" srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2Fc17bo47fBBuBQztRawrOp%2Fe16450ef2ef20d0c7bf2dc709912fc1b%2FFrame_427319402__1_.png&amp;w=1920&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2Fc17bo47fBBuBQztRawrOp%2Fe16450ef2ef20d0c7bf2dc709912fc1b%2FFrame_427319402__1_.png&amp;w=3840&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 2x" src="https://vercel.com/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2Fc17bo47fBBuBQztRawrOp%2Fe16450ef2ef20d0c7bf2dc709912fc1b%2FFrame_427319402__1_.png&amp;w=3840&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W"/></p></figure></div></div><div><div><figure data-vercel-edit-target="true"><p><img data-version="v1" alt="iPhone 8 Plus - 6.png" loading="lazy" width="621" height="628" decoding="async" data-nimg="1" srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F6ZaHYc4GhEIKfRL2c1erpl%2F59f7fc484abd77f372331aec1f583d84%2FiPhone_8_Plus_-_6.png&amp;w=640&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F6ZaHYc4GhEIKfRL2c1erpl%2F59f7fc484abd77f372331aec1f583d84%2FiPhone_8_Plus_-_6.png&amp;w=1920&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 2x" src="https://vercel.com/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F6ZaHYc4GhEIKfRL2c1erpl%2F59f7fc484abd77f372331aec1f583d84%2FiPhone_8_Plus_-_6.png&amp;w=1920&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W"/></p></figure></div><div><figure data-vercel-edit-target="true"><p><img data-version="v1" alt="iPhone 8 Plus - 2.png" loading="lazy" width="621" height="628" decoding="async" data-nimg="1" srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1b7106hvxHFzTGUpGnkJtO%2F33e299c2b1216be88278d462c085e32e%2FiPhone_8_Plus_-_2.png&amp;w=640&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1b7106hvxHFzTGUpGnkJtO%2F33e299c2b1216be88278d462c085e32e%2FiPhone_8_Plus_-_2.png&amp;w=1920&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 2x" src="https://vercel.com/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1b7106hvxHFzTGUpGnkJtO%2F33e299c2b1216be88278d462c085e32e%2FiPhone_8_Plus_-_2.png&amp;w=1920&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W"/></p></figure></div></div><p>In our case, this means we need to have our Go code and Rust code interoperating with each other. We want to do a simple translation, explicitly avoiding making improvements or changing functionality when we&#39;re swapping out languages for the slice of code. That way, we can do intensive testing against both sets of code, and complete the migration as quickly as possible.</p><h3><span id="why-we-didn&#39;t-do-a-full-rewrite"></span><a href="#why-we-didn&#39;t-do-a-full-rewrite">Why we didn&#39;t do a full rewrite</a><span><svg data-testid="geist-icon" fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24" style="color:currentColor;width:0.75em;height:0.75em"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"></path></svg></span></h3><p>Full rewrites are very tempting. They are more simple to write and ship, as you don&#39;t need to worry about your &#34;before&#34; and &#34;after&#34; code working together. You also get a clean slate to write a new and improved version, without the warts and technical debt of the previous iteration. However, full rewrites also come with some serious downsides.</p><div><div><figure data-vercel-edit-target="true"><p><img data-version="v1" alt="Frame 427319410.png" loading="lazy" width="1920" height="735" decoding="async" data-nimg="1" srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F7nb5vSuSQZXEKsUUsYGNVl%2Ff0f6be9ab08484fb087d5583d5720278%2FFrame_427319410.png&amp;w=1920&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F7nb5vSuSQZXEKsUUsYGNVl%2Ff0f6be9ab08484fb087d5583d5720278%2FFrame_427319410.png&amp;w=3840&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 2x" src="https://vercel.com/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F7nb5vSuSQZXEKsUUsYGNVl%2Ff0f6be9ab08484fb087d5583d5720278%2FFrame_427319410.png&amp;w=3840&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W"/></p></figure></div><div><figure data-vercel-edit-target="true"><p><img data-version="v1" alt="Frame 427319404 (1).png" loading="lazy" width="1920" height="735" decoding="async" data-nimg="1" srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F7bF6sXF2wD092FiiuBXyGV%2Ff5f57209b1f25030cb3e106a2a6189d1%2FFrame_427319404__1_.png&amp;w=1920&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F7bF6sXF2wD092FiiuBXyGV%2Ff5f57209b1f25030cb3e106a2a6189d1%2FFrame_427319404__1_.png&amp;w=3840&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 2x" src="https://vercel.com/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F7bF6sXF2wD092FiiuBXyGV%2Ff5f57209b1f25030cb3e106a2a6189d1%2FFrame_427319404__1_.png&amp;w=3840&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W"/></p></figure></div></div><div><div><figure data-vercel-edit-target="true"><p><img data-version="v1" alt="iPhone 8 Plus - 11.png" loading="lazy" width="414" height="459" decoding="async" data-nimg="1" srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F365RREyHsEytwZlyGKa985%2F24ca1793a87a50ac37bdfea84c2964a5%2FiPhone_8_Plus_-_11.png&amp;w=640&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F365RREyHsEytwZlyGKa985%2F24ca1793a87a50ac37bdfea84c2964a5%2FiPhone_8_Plus_-_11.png&amp;w=828&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 2x" src="https://vercel.com/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F365RREyHsEytwZlyGKa985%2F24ca1793a87a50ac37bdfea84c2964a5%2FiPhone_8_Plus_-_11.png&amp;w=828&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W"/></p></figure></div><div><figure data-vercel-edit-target="true"><p><img data-version="v1" alt="iPhone 8 Plus - 16.png" loading="lazy" width="414" height="459" decoding="async" data-nimg="1" srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2FWdkdfyBr5TwUufLIYBxRf%2Ff5066270eea29c7ef149ba6eb3c95528%2FiPhone_8_Plus_-_16.png&amp;w=640&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2FWdkdfyBr5TwUufLIYBxRf%2Ff5066270eea29c7ef149ba6eb3c95528%2FiPhone_8_Plus_-_16.png&amp;w=828&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 2x" src="https://vercel.com/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2FWdkdfyBr5TwUufLIYBxRf%2Ff5066270eea29c7ef149ba6eb3c95528%2FiPhone_8_Plus_-_16.png&amp;w=828&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W"/></p></figure></div></div><p>First, a full rewrite tends to require a complete halt to shipping new features. Otherwise, you run the risk of chasing a moving target as the old codebase grows while you try to catch up with your new code. </p><p>A full rewrite also does not guarantee a better user experience. Often, a rewrite ends up less than seamless, as it&#39;s not feasible for the new version to match the old one, feature for feature, edge case for edge case. As the surface area of the rewrite grows, there&#39;s more room for error and users can end up frustrated with breaking changes and missing features.</p><p>Full rewrites also require building up an entirely new codebase, which is a large quantity of unused code. In our experience, unused code, even when verified with tests, can be a breeding ground for bugs. We wanted to make sure that any new Rust code was properly exercised as we moved through our porting effort.</p><h2><span id="we-chose-to-port"></span><a href="#we-chose-to-port">We chose to port</a><span><svg data-testid="geist-icon" fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24" style="color:currentColor;width:0.75em;height:0.75em"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"></path></svg></span></h2><p>Therefore, we decided to <b>port</b> Turborepo to Rust instead of doing a full rewrite.</p><p>Porting did necessitate some tradeoffs. We had to introduce a significant amount of complexity into our codebase, so that we could interoperate between Go and Rust. This complexity meant slower developer velocity to start, but we look forward to workflow improvements going forward, particularly when our porting effort has finished.</p><p>More importantly, we knew we could continue shipping features to Turborepo users while porting. All things considered, we determined that this was a reasonable compromise and the path that we would take.</p><h3><span id="starting-the-port"></span><a href="#starting-the-port">Starting the port </a><span><svg data-testid="geist-icon" fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24" style="color:currentColor;width:0.75em;height:0.75em"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"></path></svg></span></h3><p>We chose to start by writing a small, new Turborepo feature in Rust. This way, we could add new functionality from the roadmap for users, integrate Rust into our build process, and interact with existing Go code as little as possible to reduce our initial complexity.</p><p>Once we&#39;d laid this groundwork, we knew that we could slowly port more and more code to Rust over time.</p><h2><span id="global-turbo"></span><a href="#global-turbo">Global <code>turbo</code></a><span><svg data-testid="geist-icon" fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24" style="color:currentColor;width:0.75em;height:0.75em"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"></path></svg></span></h2><p>We decided to have our first Rust feature be <a href="https://turbo.build/blog/turbo-1-7-0#global-turbo?utm_source=turbo&amp;utm_medium=blog&amp;utm_campaign=turborepo_porting" rel="noopener" target="_blank">global <code>turbo</code></a>, a feature that allows users to install Turborepo as a globally available command on their machine. </p><p>A global installation of <code>turbo</code> will look for a locally installed <code>turbo</code> program in the repository, execute it if it exists, and otherwise fallback to the global <code>turbo</code> binary. That way, you can easily run <code>turbo</code> from anywhere in your repository, but also keep a specific version of <code>turbo</code> pinned in your <code>package.json</code>.</p><div><div><figure data-vercel-edit-target="true"><p><img data-version="v1" alt="Frame 427319413.png" loading="lazy" width="1650" height="740" decoding="async" data-nimg="1" srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2FqPT2LsrOLLG4ISEyuv92G%2F2427d2381392e4acc95dc51d1cf9edca%2FFrame_427319413.png&amp;w=1920&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2FqPT2LsrOLLG4ISEyuv92G%2F2427d2381392e4acc95dc51d1cf9edca%2FFrame_427319413.png&amp;w=3840&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 2x" src="https://vercel.com/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2FqPT2LsrOLLG4ISEyuv92G%2F2427d2381392e4acc95dc51d1cf9edca%2FFrame_427319413.png&amp;w=3840&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W"/></p></figure></div><div><figure data-vercel-edit-target="true"><p><img data-version="v1" alt="Frame 427319414.png" loading="lazy" width="1650" height="740" decoding="async" data-nimg="1" srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F2gbJI96SblT7dXxZWZDYsD%2F6877030625b5c53c3523ad96db1d468d%2FFrame_427319414.png&amp;w=1920&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F2gbJI96SblT7dXxZWZDYsD%2F6877030625b5c53c3523ad96db1d468d%2FFrame_427319414.png&amp;w=3840&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 2x" src="https://vercel.com/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F2gbJI96SblT7dXxZWZDYsD%2F6877030625b5c53c3523ad96db1d468d%2FFrame_427319414.png&amp;w=3840&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W"/></p></figure></div></div><div><div><figure data-vercel-edit-target="true"><p><img data-version="v1" alt="iPhone 8 Plus - 19.png" loading="lazy" width="414" height="647" decoding="async" data-nimg="1" srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F3DzjEq5stkry2IiCm6zh4U%2Fd5f38eda9664709a42fbbc2e8707ec74%2FiPhone_8_Plus_-_19.png&amp;w=640&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F3DzjEq5stkry2IiCm6zh4U%2Fd5f38eda9664709a42fbbc2e8707ec74%2FiPhone_8_Plus_-_19.png&amp;w=828&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 2x" src="https://vercel.com/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F3DzjEq5stkry2IiCm6zh4U%2Fd5f38eda9664709a42fbbc2e8707ec74%2FiPhone_8_Plus_-_19.png&amp;w=828&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W"/></p></figure></div><div><figure data-vercel-edit-target="true"><p><img data-version="v1" alt="iPhone 8 Plus - 5.png" loading="lazy" width="414" height="647" decoding="async" data-nimg="1" srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F7beQhPRdj8OYxzfUcYgEbU%2Fd2e5d1a6a0d94b65231122a21672217e%2FiPhone_8_Plus_-_5.png&amp;w=640&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F7beQhPRdj8OYxzfUcYgEbU%2Fd2e5d1a6a0d94b65231122a21672217e%2FiPhone_8_Plus_-_5.png&amp;w=828&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 2x" src="https://vercel.com/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F7beQhPRdj8OYxzfUcYgEbU%2Fd2e5d1a6a0d94b65231122a21672217e%2FiPhone_8_Plus_-_5.png&amp;w=828&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W"/></p></figure></div></div><p>This feature is implemented through what we started calling &#34;the Rust shim,&#34; a bit of Rust code that wraps the existing Go code. The Go portion is compiled via CGO as a C static library and then linked to the Rust binary. Luckily, global <code>turbo</code> only required a few features from the rest of Turborepo&#39;s code, such as reading configuration and navigating the file system. </p><h2><span id="cli-parsing"></span><a href="#cli-parsing">CLI parsing</a><span><svg data-testid="geist-icon" fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24" style="color:currentColor;width:0.75em;height:0.75em"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"></path></svg></span></h2><p>As we implemented global <code>turbo</code>, we realized we needed to parse a few command line arguments like <code>--cwd</code>, the argument for setting <code>turbo</code>&#39;s current working directory.</p><p>After global <code>turbo</code>, it made sense to continue by porting the rest of the CLI argument parser to Rust. To parse arguments, we use the <a href="https://docs.rs/clap/latest/clap/" rel="noopener" target="_blank"><code>clap</code> crate</a> (Rustâ€™s equivalent of an npm package). <code>clap</code> lets you define a data type with the arguments, annotate it a little bit, and it will automatically create a parser.</p><p>With the pieces in place, we had to work on sending the args from the Rust entry point to the Go code. For better or worse, <a href="https://faultlore.com/blah/c-isnt-a-language/" rel="noopener" target="_blank">C is the standard for foreign function interfacing (FFI)</a>, so we had to use C to communicate between Rust and Go.</p><div><div><figure data-vercel-edit-target="true"><p><img data-version="v1" alt="InlineGraphic_1920xVariable (1).png" loading="lazy" width="1920" height="1084" decoding="async" data-nimg="1" srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F2FGPm6ksIA7bGzZzY7CYkd%2F06b7d487cbcf5237ae9f917574cf7a51%2FInlineGraphic_1920xVariable__1_.png&amp;w=1920&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F2FGPm6ksIA7bGzZzY7CYkd%2F06b7d487cbcf5237ae9f917574cf7a51%2FInlineGraphic_1920xVariable__1_.png&amp;w=3840&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 2x" src="https://vercel.com/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F2FGPm6ksIA7bGzZzY7CYkd%2F06b7d487cbcf5237ae9f917574cf7a51%2FInlineGraphic_1920xVariable__1_.png&amp;w=3840&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W"/></p></figure></div><div><figure data-vercel-edit-target="true"><p><img data-version="v1" alt="InlineGraphic_1920xVariable.png" loading="lazy" width="1920" height="1084" decoding="async" data-nimg="1" srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F7sVbowOCnYSjNrOyxfD5NF%2F0fdf484cf4ced36f67e0ab879514d099%2FInlineGraphic_1920xVariable.png&amp;w=1920&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F7sVbowOCnYSjNrOyxfD5NF%2F0fdf484cf4ced36f67e0ab879514d099%2FInlineGraphic_1920xVariable.png&amp;w=3840&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 2x" src="https://vercel.com/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F7sVbowOCnYSjNrOyxfD5NF%2F0fdf484cf4ced36f67e0ab879514d099%2FInlineGraphic_1920xVariable.png&amp;w=3840&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W"/></p></figure></div></div><div><div><figure data-vercel-edit-target="true"><p><img data-version="v1" alt="InlineGraphic_1920xVariable (3).png" loading="lazy" width="414" height="416" decoding="async" data-nimg="1" srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1M9EpwZDGRt4PqXnS41B6p%2F0cc3e7336ee39882508a6dd112db9a5f%2FInlineGraphic_1920xVariable__3_.png&amp;w=640&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1M9EpwZDGRt4PqXnS41B6p%2F0cc3e7336ee39882508a6dd112db9a5f%2FInlineGraphic_1920xVariable__3_.png&amp;w=828&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 2x" src="https://vercel.com/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1M9EpwZDGRt4PqXnS41B6p%2F0cc3e7336ee39882508a6dd112db9a5f%2FInlineGraphic_1920xVariable__3_.png&amp;w=828&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W"/></p></figure></div><div><figure data-vercel-edit-target="true"><p><img data-version="v1" alt="InlineGraphic_1920xVariable (2).png" loading="lazy" width="414" height="416" decoding="async" data-nimg="1" srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F7s2Gq0JKjOQkBQ9ZAOqEGw%2F4b0db3626aa7e7b7b10b95e8fdf8d631%2FInlineGraphic_1920xVariable__2_.png&amp;w=640&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F7s2Gq0JKjOQkBQ9ZAOqEGw%2F4b0db3626aa7e7b7b10b95e8fdf8d631%2FInlineGraphic_1920xVariable__2_.png&amp;w=828&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 2x" src="https://vercel.com/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F7s2Gq0JKjOQkBQ9ZAOqEGw%2F4b0db3626aa7e7b7b10b95e8fdf8d631%2FInlineGraphic_1920xVariable__2_.png&amp;w=828&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W"/></p></figure></div></div><p>We wanted to avoid having too many types in C, as we werenâ€™t confident that we could write cross-platform C types that played well with both Rust and Go. Instead, we decided to serialize our arguments to JSON and send it to Go as a string. Even though JSON serialization does have some overhead, we knew that the arguments struct would only be a few hundred bytes in size, so the performance impact would be minimal.</p><p>On the Rust side, we used another cornerstone crate of the Rust ecosystem, <a href="https://docs.rs/serde/latest/serde/" rel="noopener" target="_blank"><code>serde</code></a>, which lets you serialize and deserialize data in various different formats, using some minimal annotation. For the Go side, we were already using JSON in the codebase, so it was easy to receive the JSON string and deserialize it into a Go struct. </p><h2><span id="ship-it"></span><a href="#ship-it">Ship it?</a><span><svg data-testid="geist-icon" fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24" style="color:currentColor;width:0.75em;height:0.75em"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"></path></svg></span></h2><p>With these two features ported, we were ready to ship our first hybrid Go-Rust release.</p><p>However, before we could release, we needed to make sure the Go-Rust binary worked in all the various contexts that Turborepo is used, <a href="https://turbo.build/repo/docs/installing?utm_source=turbo&amp;utm_medium=blog&amp;utm_campaign=turborepo_porting" rel="noopener" target="_blank">like the different operating systems and  Linux distros that we support</a>. As we tested our code, we started noticing some issues on a couple platforms.</p><h3><span id="windows-difficulties"></span><a href="#windows-difficulties">Windows difficulties</a><span><svg data-testid="geist-icon" fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24" style="color:currentColor;width:0.75em;height:0.75em"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"></path></svg></span></h3><p>On Windows, there are two main toolchains, <a href="https://en.wikipedia.org/wiki/Microsoft_Visual_C%2B%2B" rel="noopener" target="_blank">Microsoft Visual C++ (MSVC)</a> and <a href="https://en.wikipedia.org/wiki/MinGW" rel="noopener" target="_blank">Minimalist GNU for Windows (MinGW)</a>.</p><p>Go <b>only</b> uses MinGW, but we were using Rust with MSVC. This caused some runtime issues, but, luckily, the solution was simple: we moved our Rust toolchain to MinGW.</p><p>Next up, we had some issues with paths. Windows has a couple concepts of paths, including whatâ€™s called a Universal Naming Convention (UNC) path. When you ask Windows to canonicalize a path (resolve all symlinks and normalize components of the path), it gives you a UNC path.</p><p>However, despite the name, UNC paths are not supported everywhereâ€”sometimes not even by Windows itself! This caused a few bugs where weâ€™d provide a UNC path and get an invalid path error. The solution was to use a helpful Rust crate called <a href="https://docs.rs/dunce/latest/dunce/" rel="noopener" target="_blank">dunce</a> that lets you canonicalize a path and get a non-UNC path back, handling the intricacies of this problem for us.</p><h3><span id="alpine-linux"></span><a href="#alpine-linux">Alpine Linux</a><span><svg data-testid="geist-icon" fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24" style="color:currentColor;width:0.75em;height:0.75em"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"></path></svg></span></h3><p>The second set of challenges came with Alpine Linux. At Vercel, we use Alpine, a common operating system for cloud computing, to create lightweight containers for building your projects.</p><p>Alpine, though, does not come with <code>glibc</code>, the de-facto implementation of the C standard library. This is a problem because many binaries assume <code>glibc</code> is installed and donâ€™t package it themselves. There are some libraries that pave over this issue using packages like <code>gcompat</code> or <code>libc6-compat</code>, but they didnâ€™t end up working for us because the version of <code>glibc</code> that Rust requires was too modern for our supported targets. When weâ€™d try to run the binary, weâ€™d get errors that the required <code>glibc</code> version was not available.</p><p>As a result, we decided to compile Turborepo as a fully static binary. This meant that we packaged our own C standard library implementation using <code>musl</code> (since you can&#39;t statically link <code>glibc</code> due to licensing issues). This seems to work just fine for both Rust and Go: Rust lets you set the C standard library in the target (<code>aarch64-unknown-linux-musl</code> vs. <code>aarch64-unknown-linux-gnu</code>) and Go does not use a C standard library by default.</p><p>However, when we ran this statically linked binary, it would return a segmentation fault. Even worse, when we inspected with a debugger, weâ€™d find a corrupted stack. And, even worser, the segfault appeared to be coming from the Go runtime itself!</p><hr/><p>After a lot of searching, we tracked down a <a href="https://github.com/golang/go/issues/13492" rel="noopener" target="_blank">seven year-old GitHub issue</a> which explained that Go cannot be compiled as a C static library with <code>musl</code>. This posed a significant challenge, as Alpine Linux is an essential platform for Turborepo and its users. We had to go back to the drawing board and figure out how we could ship our Go-Rust combination.</p><p>Eventually, after a ton more deliberation, we came up with a solution: weâ€™d compile our Go code and our Rust code as two separate binaries. The Rust code would call the Go code and pass the args serialized to JSON via the CLI.</p><div><div><figure data-vercel-edit-target="true"><p><img data-version="v1" alt="Frame 427319412.png" loading="lazy" width="1920" height="917" decoding="async" data-nimg="1" srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1VOl0eTFS33pkNLbtrzhY%2F6811cbf8065443e0ba46c5c365b9fca4%2FFrame_427319412.png&amp;w=1920&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1VOl0eTFS33pkNLbtrzhY%2F6811cbf8065443e0ba46c5c365b9fca4%2FFrame_427319412.png&amp;w=3840&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 2x" src="https://vercel.com/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F1VOl0eTFS33pkNLbtrzhY%2F6811cbf8065443e0ba46c5c365b9fca4%2FFrame_427319412.png&amp;w=3840&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W"/></p></figure></div><div><figure data-vercel-edit-target="true"><p><img data-version="v1" alt="Frame 427319408.png" loading="lazy" width="1920" height="917" decoding="async" data-nimg="1" srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F3KbndugMu2gM4Nu8Eoq3dj%2F41cb0b6578dbd822c77f08f2bada4066%2FFrame_427319408.png&amp;w=1920&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F3KbndugMu2gM4Nu8Eoq3dj%2F41cb0b6578dbd822c77f08f2bada4066%2FFrame_427319408.png&amp;w=3840&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 2x" src="https://vercel.com/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F3KbndugMu2gM4Nu8Eoq3dj%2F41cb0b6578dbd822c77f08f2bada4066%2FFrame_427319408.png&amp;w=3840&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W"/></p></figure></div></div><div><div><figure data-vercel-edit-target="true"><p><img data-version="v1" alt="iPhone 8 Plus - 14.png" loading="lazy" width="414" height="506" decoding="async" data-nimg="1" srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F5QibrcV35p6zu0Rpzriwn5%2F57872cf4a380ba9c3ec780a02c370775%2FiPhone_8_Plus_-_14.png&amp;w=640&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F5QibrcV35p6zu0Rpzriwn5%2F57872cf4a380ba9c3ec780a02c370775%2FiPhone_8_Plus_-_14.png&amp;w=828&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 2x" src="https://vercel.com/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F5QibrcV35p6zu0Rpzriwn5%2F57872cf4a380ba9c3ec780a02c370775%2FiPhone_8_Plus_-_14.png&amp;w=828&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W"/></p></figure></div><div><figure data-vercel-edit-target="true"><p><img data-version="v1" alt="iPhone 8 Plus - 18.png" loading="lazy" width="414" height="506" decoding="async" data-nimg="1" srcset="/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F2547NHodIcPCgR7ITmjnM0%2F4366bba1f016889729cfc1c729554907%2FiPhone_8_Plus_-_18.png&amp;w=640&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 1x, /_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F2547NHodIcPCgR7ITmjnM0%2F4366bba1f016889729cfc1c729554907%2FiPhone_8_Plus_-_18.png&amp;w=828&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 2x" src="https://vercel.com/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F2547NHodIcPCgR7ITmjnM0%2F4366bba1f016889729cfc1c729554907%2FiPhone_8_Plus_-_18.png&amp;w=828&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W"/></p></figure></div></div><p>We knew that the args were small enough that they could be passed via CLI without too much of a performance hit. And because we were using a serialization format, the code changes were extremely small. All we had to do was change how Rust was sending the JSON string to Go.</p><p>With that, we were able to get our first hybrid Go-Rust release out the door. The first version of <code>turbo</code> that was shipped to you using these compilation strategies was <a href="https://turbo.build/blog/turbo-1-7-0?utm_source=turbo&amp;utm_medium=blog&amp;utm_campaign=turborepo_porting" rel="noopener" target="_blank">version 1.7.0</a>.</p><h2><span id="what-we-learned"></span><a href="#what-we-learned">What we learned</a><span><svg data-testid="geist-icon" fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24" style="color:currentColor;width:0.75em;height:0.75em"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"></path></svg></span></h2><p>Through this effort, we&#39;ve learned a lot about moving from one language to another. Let&#39;s take note of what we&#39;ve found.</p><h3><span id="serialization-is-useful-for-ffi"></span><a href="#serialization-is-useful-for-ffi">Serialization is useful for FFI</a><span><svg data-testid="geist-icon" fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24" style="color:currentColor;width:0.75em;height:0.75em"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"></path></svg></span></h3><p>Our first takeaway is that serialization formats are very useful for interoperability. By serializing to JSON, a format with robust support in both Go and Rust, we were able to minimize our FFI surface area, and avoid a whole class of cross-platform, cross-language bugs. When we had to switch from a single, linked binary to two binaries, we were able to do so with relative ease because our FFI surface area was so small.</p><p>The tradeoff here is that serialization and deserialization is slow. You can only depend on this technique if either you know your serialized payloads will be small or you don&#39;t care about the performance hit for your use case.</p><h3><span id="porting-takes-preparation"></span><a href="#porting-takes-preparation">Porting takes preparation</a><span><svg data-testid="geist-icon" fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24" style="color:currentColor;width:0.75em;height:0.75em"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"></path></svg></span></h3><p>The second takeaway is that incremental porting is feasible but requires lots of careful testing and strategizing. We ran into quite a few tricky bugs and we caught these issues through lots of automated and manual testing. You can <a href="https://github.com/vercel/turbo/tree/main/.github/workflows" rel="noopener" target="_blank">check out our (and Turbopack&#39;s) testing suites in our GitHub workflows</a>.</p><p>Testing is also extremely important for nailing down the behavior of your code, whether itâ€™s the exact edge cases of CLI parsing, or the order in which configuration is loaded. These exact details are not so crucial when youâ€™re writing your first implementation, but theyâ€™re absolutely paramount to avoid breaking changes during a port or rewrite. You should aim to write tests <b>before</b> you start porting code, so that you have a known specification to work against.</p><h3><span id="cross-compatibility-is-difficult"></span><a href="#cross-compatibility-is-difficult">Cross-compatibility is difficult</a><span><svg data-testid="geist-icon" fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24" style="color:currentColor;width:0.75em;height:0.75em"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"></path></svg></span></h3><p>The third takeaway is that cross-platform, cross-language release engineering is extremely challenging. Every platform, language, and compiler has their own quirks that can make interoperability difficult and, the more things you have working together, the more opportunities you have for a new complication.</p><h3><span id="porting-is-worth-it-for-us"></span><a href="#porting-is-worth-it-for-us">Porting is worth it for us</a><span><svg data-testid="geist-icon" fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24" style="color:currentColor;width:0.75em;height:0.75em"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"></path></svg></span></h3><p>Finally, while porting from Go to Rust has been challenging, it has proven to be the correct choice for us strategically. Even with our porting effort going on, we&#39;ve been able to ship new features, handle bugs in existing functionality, and keep helping our users while we migrate. It&#39;s required some extraordinarily tricky debugging, careful planning, and rigorous testing, but we believe it has been worth it.</p><h2><span id="try-out-(ported)-turborepo"></span><a href="#try-out-(ported)-turborepo">Try out (ported) Turborepo</a><span><svg data-testid="geist-icon" fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24" style="color:currentColor;width:0.75em;height:0.75em"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"></path></svg></span></h2><p>This week, Turborepo saved 5,742 hours of time for the product engineers and CI machines at Vercel. If you want to try out the same technology in just a few minutes, <a href="https://vercel.com/blog/vercel-remote-cache-turbo" rel="noopener" target="_blank">check out our article</a> on how you can get started with <a href="https://vercel.com/docs/concepts/monorepos/remote-caching" rel="noopener" target="_blank">Vercel Remote Cache</a>.</p><div><p data-version="v1">Explore more</p><div><a href="https://vercel.com/templates/next.js/turborepo-next-basic"><div><div><p><img data-version="v1" alt="Screenshot of template" loading="lazy" decoding="async" data-nimg="fill" sizes="25vw" srcset="/_next/image?url=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Fcontentful%2Fimage%2Fe5382hct74si%2F2JxNyYATuuV7WPuJ31kF9Q%2F433990aa4c8e7524a9095682fb08f0b1%2FBasic.png&amp;w=256&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 256w, /_next/image?url=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Fcontentful%2Fimage%2Fe5382hct74si%2F2JxNyYATuuV7WPuJ31kF9Q%2F433990aa4c8e7524a9095682fb08f0b1%2FBasic.png&amp;w=384&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 384w, /_next/image?url=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Fcontentful%2Fimage%2Fe5382hct74si%2F2JxNyYATuuV7WPuJ31kF9Q%2F433990aa4c8e7524a9095682fb08f0b1%2FBasic.png&amp;w=640&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 640w, /_next/image?url=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Fcontentful%2Fimage%2Fe5382hct74si%2F2JxNyYATuuV7WPuJ31kF9Q%2F433990aa4c8e7524a9095682fb08f0b1%2FBasic.png&amp;w=750&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 750w, /_next/image?url=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Fcontentful%2Fimage%2Fe5382hct74si%2F2JxNyYATuuV7WPuJ31kF9Q%2F433990aa4c8e7524a9095682fb08f0b1%2FBasic.png&amp;w=828&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 828w, /_next/image?url=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Fcontentful%2Fimage%2Fe5382hct74si%2F2JxNyYATuuV7WPuJ31kF9Q%2F433990aa4c8e7524a9095682fb08f0b1%2FBasic.png&amp;w=1080&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 1080w, /_next/image?url=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Fcontentful%2Fimage%2Fe5382hct74si%2F2JxNyYATuuV7WPuJ31kF9Q%2F433990aa4c8e7524a9095682fb08f0b1%2FBasic.png&amp;w=1200&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 1200w, /_next/image?url=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Fcontentful%2Fimage%2Fe5382hct74si%2F2JxNyYATuuV7WPuJ31kF9Q%2F433990aa4c8e7524a9095682fb08f0b1%2FBasic.png&amp;w=1920&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 1920w, /_next/image?url=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Fcontentful%2Fimage%2Fe5382hct74si%2F2JxNyYATuuV7WPuJ31kF9Q%2F433990aa4c8e7524a9095682fb08f0b1%2FBasic.png&amp;w=2048&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 2048w, /_next/image?url=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Fcontentful%2Fimage%2Fe5382hct74si%2F2JxNyYATuuV7WPuJ31kF9Q%2F433990aa4c8e7524a9095682fb08f0b1%2FBasic.png&amp;w=3840&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 3840w" src="https://vercel.com/_next/image?url=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Fcontentful%2Fimage%2Fe5382hct74si%2F2JxNyYATuuV7WPuJ31kF9Q%2F433990aa4c8e7524a9095682fb08f0b1%2FBasic.png&amp;w=3840&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W"/></p></div></div></a><a href="https://turbo.build" rel="noopener" target="_blank"><div><p><img data-version="v1" alt="Visit turbo.build" loading="lazy" decoding="async" data-nimg="fill" sizes="25vw" srcset="/_next/image?url=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Fcontentful%2Fimage%2Fe5382hct74si%2F6AXDBERJ8a3qkQkJbDMojJ%2F47691b985c3f224b0e2742564a3a5ef1%2FCleanShot_2023-07-13_at_14.50.43_2x.png&amp;w=256&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 256w, /_next/image?url=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Fcontentful%2Fimage%2Fe5382hct74si%2F6AXDBERJ8a3qkQkJbDMojJ%2F47691b985c3f224b0e2742564a3a5ef1%2FCleanShot_2023-07-13_at_14.50.43_2x.png&amp;w=384&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 384w, /_next/image?url=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Fcontentful%2Fimage%2Fe5382hct74si%2F6AXDBERJ8a3qkQkJbDMojJ%2F47691b985c3f224b0e2742564a3a5ef1%2FCleanShot_2023-07-13_at_14.50.43_2x.png&amp;w=640&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 640w, /_next/image?url=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Fcontentful%2Fimage%2Fe5382hct74si%2F6AXDBERJ8a3qkQkJbDMojJ%2F47691b985c3f224b0e2742564a3a5ef1%2FCleanShot_2023-07-13_at_14.50.43_2x.png&amp;w=750&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 750w, /_next/image?url=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Fcontentful%2Fimage%2Fe5382hct74si%2F6AXDBERJ8a3qkQkJbDMojJ%2F47691b985c3f224b0e2742564a3a5ef1%2FCleanShot_2023-07-13_at_14.50.43_2x.png&amp;w=828&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 828w, /_next/image?url=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Fcontentful%2Fimage%2Fe5382hct74si%2F6AXDBERJ8a3qkQkJbDMojJ%2F47691b985c3f224b0e2742564a3a5ef1%2FCleanShot_2023-07-13_at_14.50.43_2x.png&amp;w=1080&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 1080w, /_next/image?url=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Fcontentful%2Fimage%2Fe5382hct74si%2F6AXDBERJ8a3qkQkJbDMojJ%2F47691b985c3f224b0e2742564a3a5ef1%2FCleanShot_2023-07-13_at_14.50.43_2x.png&amp;w=1200&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 1200w, /_next/image?url=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Fcontentful%2Fimage%2Fe5382hct74si%2F6AXDBERJ8a3qkQkJbDMojJ%2F47691b985c3f224b0e2742564a3a5ef1%2FCleanShot_2023-07-13_at_14.50.43_2x.png&amp;w=1920&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 1920w, /_next/image?url=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Fcontentful%2Fimage%2Fe5382hct74si%2F6AXDBERJ8a3qkQkJbDMojJ%2F47691b985c3f224b0e2742564a3a5ef1%2FCleanShot_2023-07-13_at_14.50.43_2x.png&amp;w=2048&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 2048w, /_next/image?url=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Fcontentful%2Fimage%2Fe5382hct74si%2F6AXDBERJ8a3qkQkJbDMojJ%2F47691b985c3f224b0e2742564a3a5ef1%2FCleanShot_2023-07-13_at_14.50.43_2x.png&amp;w=3840&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W 3840w" src="https://vercel.com/_next/image?url=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Fcontentful%2Fimage%2Fe5382hct74si%2F6AXDBERJ8a3qkQkJbDMojJ%2F47691b985c3f224b0e2742564a3a5ef1%2FCleanShot_2023-07-13_at_14.50.43_2x.png&amp;w=3840&amp;q=75&amp;dpl=dpl_DrgqP5ZyMUTVVRe4zGfX3iWtjv3W"/></p></div></a></div></div></div></div>
  </body>
</html>
