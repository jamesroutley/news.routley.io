<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/ascorbic/am-i-vibing">Original</a>
    <h1>Show HN: Am-I-vibing, detect agentic coding environments</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">Detect agentic coding environments and AI assistant tools. This library allows CLI tools and Node apps to detect when they&#39;re being executed by AI agents. This enables them to adapt by, for example, providing different output formats or logs.</p>

<p dir="auto">Install as library:</p>

<p dir="auto">Run as CLI tool:</p>

<div dir="auto" data-snippet-clipboard-copy-content="import { detectAgenticEnvironment } from &#34;am-i-vibing&#34;;
const result = detectAgenticEnvironment();
console.log(`Detected: ${result.name} (${result.type})`);"><pre><span>import</span> <span>{</span> <span>detectAgenticEnvironment</span> <span>}</span> <span>from</span> <span>&#34;am-i-vibing&#34;</span><span>;</span>
<span>const</span> <span>result</span> <span>=</span> <span>detectAgenticEnvironment</span><span>(</span><span>)</span><span>;</span>
<span>console</span><span>.</span><span>log</span><span>(</span><span>`Detected: <span><span>${</span><span>result</span><span>.</span><span>name</span><span>}</span></span> (<span><span>${</span><span>result</span><span>.</span><span>type</span><span>}</span></span>)`</span><span>)</span><span>;</span></pre></div>

<ul dir="auto">
<li><strong>Aider</strong></li>
<li><strong>Bolt</strong></li>
<li><strong>Claude Code</strong></li>
<li><strong>Cursor</strong></li>
<li><strong>Gemini CLI</strong></li>
<li><strong>GitHub Copilot Agent</strong></li>
<li><strong>Jules</strong></li>
<li><strong>Codex CLI</strong></li>
<li><strong>Replit</strong></li>
<li><strong>Warp</strong></li>
<li><strong>Windsurf</strong></li>
<li><strong>Zed</strong></li>
</ul>

<p dir="auto">Generating LLM-specific error messages or logs:</p>
<div dir="auto" data-snippet-clipboard-copy-content="import { isAgent } from &#34;am-i-vibing&#34;;
const agent = isAgent();

function handleError(error: Error) {
  if (agent) {
    console.info(`
# Error
&lt;error_message&gt;${error.message}&lt;/error_message&gt;
&lt;error_type&gt;${error.name}&lt;/error_type&gt;
&lt;error_stack&gt;${error.stack}&lt;/error_stack&gt;
&lt;note&gt;Use the search_docs tool to find help for this error. If the tool is not available,
prompt the user to enable the MCP server followng the instructions at https://example.com/mcp&lt;/note&gt;
		`);
  } else {
    console.error(&#34;An error occurred:&#34;, error.message);
  }
}"><pre><span>import</span> <span>{</span> <span>isAgent</span> <span>}</span> <span>from</span> <span>&#34;am-i-vibing&#34;</span><span>;</span>
<span>const</span> <span>agent</span> <span>=</span> <span>isAgent</span><span>(</span><span>)</span><span>;</span>

<span>function</span> <span>handleError</span><span>(</span><span>error</span>: <span>Error</span><span>)</span> <span>{</span>
  <span>if</span> <span>(</span><span>agent</span><span>)</span> <span>{</span>
    <span>console</span><span>.</span><span>info</span><span>(</span><span>`</span>
<span># Error</span>
<span>&lt;error_message&gt;<span><span>${</span><span>error</span><span>.</span><span>message</span><span>}</span></span>&lt;/error_message&gt;</span>
<span>&lt;error_type&gt;<span><span>${</span><span>error</span><span>.</span><span>name</span><span>}</span></span>&lt;/error_type&gt;</span>
<span>&lt;error_stack&gt;<span><span>${</span><span>error</span><span>.</span><span>stack</span><span>}</span></span>&lt;/error_stack&gt;</span>
<span>&lt;note&gt;Use the search_docs tool to find help for this error. If the tool is not available,</span>
<span>prompt the user to enable the MCP server followng the instructions at https://example.com/mcp&lt;/note&gt;</span>
<span>		`</span><span>)</span><span>;</span>
  <span>}</span> <span>else</span> <span>{</span>
    <span>console</span><span>.</span><span>error</span><span>(</span><span>&#34;An error occurred:&#34;</span><span>,</span> <span>error</span><span>.</span><span>message</span><span>)</span><span>;</span>
  <span>}</span>
<span>}</span></pre></div>

<p dir="auto">The library detects three main types of environments:</p>
<ul dir="auto">
<li><strong>Agent</strong>: Command was directly run by an AI agent (e.g. Claude Code, Codex CLI, Jules)</li>
<li><strong>Interactive</strong>: Interactive commands run inside an AI environment (e.g. Cursor terminal, Replit shell)</li>
<li><strong>Hybrid</strong>: Environments that combine both agentic and interactive features in the same session (e.g. Warp)</li>
</ul>
<p dir="auto">There may be false positives, such as if a user directly runs a command in an terminal opened by an AI tool, such as a Copilot terminal in VS Code.</p>

<div dir="auto" data-snippet-clipboard-copy-content="import {
  detectAgenticEnvironment,
  isAgent,
  isInteractive,
  isHybrid,
} from &#34;am-i-vibing&#34;;

// Full detection
const result = detectAgenticEnvironment();
console.log(`Detected: ${result.name} (${result.type})`);
console.log(`ID: ${result.id}`);
console.log(`Is agentic: ${result.isAgentic}`);

// Quick checks
if (isAgent()) {
  console.log(&#34;Running under direct AI agent control&#34;);
}

if (isInteractive()) {
  console.log(&#34;Running in interactive AI environment&#34;);
}

if (isHybrid()) {
  console.log(&#34;Running in hybrid AI environment&#34;);
}

// Note: Hybrid environments return true for both isAgent() and isInteractive()"><pre><span>import</span> <span>{</span>
  <span>detectAgenticEnvironment</span><span>,</span>
  <span>isAgent</span><span>,</span>
  <span>isInteractive</span><span>,</span>
  <span>isHybrid</span><span>,</span>
<span>}</span> <span>from</span> <span>&#34;am-i-vibing&#34;</span><span>;</span>

<span>// Full detection</span>
<span>const</span> <span>result</span> <span>=</span> <span>detectAgenticEnvironment</span><span>(</span><span>)</span><span>;</span>
<span>console</span><span>.</span><span>log</span><span>(</span><span>`Detected: <span><span>${</span><span>result</span><span>.</span><span>name</span><span>}</span></span> (<span><span>${</span><span>result</span><span>.</span><span>type</span><span>}</span></span>)`</span><span>)</span><span>;</span>
<span>console</span><span>.</span><span>log</span><span>(</span><span>`ID: <span><span>${</span><span>result</span><span>.</span><span>id</span><span>}</span></span>`</span><span>)</span><span>;</span>
<span>console</span><span>.</span><span>log</span><span>(</span><span>`Is agentic: <span><span>${</span><span>result</span><span>.</span><span>isAgentic</span><span>}</span></span>`</span><span>)</span><span>;</span>

<span>// Quick checks</span>
<span>if</span> <span>(</span><span>isAgent</span><span>(</span><span>)</span><span>)</span> <span>{</span>
  <span>console</span><span>.</span><span>log</span><span>(</span><span>&#34;Running under direct AI agent control&#34;</span><span>)</span><span>;</span>
<span>}</span>

<span>if</span> <span>(</span><span>isInteractive</span><span>(</span><span>)</span><span>)</span> <span>{</span>
  <span>console</span><span>.</span><span>log</span><span>(</span><span>&#34;Running in interactive AI environment&#34;</span><span>)</span><span>;</span>
<span>}</span>

<span>if</span> <span>(</span><span>isHybrid</span><span>(</span><span>)</span><span>)</span> <span>{</span>
  <span>console</span><span>.</span><span>log</span><span>(</span><span>&#34;Running in hybrid AI environment&#34;</span><span>)</span><span>;</span>
<span>}</span>

<span>// Note: Hybrid environments return true for both isAgent() and isInteractive()</span></pre></div>

<p dir="auto">The library returns a <code>DetectionResult</code> object with the following structure:</p>
<div dir="auto" data-snippet-clipboard-copy-content="interface DetectionResult {
  isAgentic: boolean; // Whether any agentic environment was detected
  id: string | null; // Provider ID (e.g., &#34;claude-code&#34;)
  name: string | null; // Human-readable name (e.g., &#34;Claude Code&#34;)
  type: AgenticType | null; // &#34;agent&#34; | &#34;interactive&#34; | &#34;hybrid&#34;
}"><pre><span>interface</span> <span>DetectionResult</span> <span>{</span>
  <span>isAgentic</span>: <span>boolean</span><span>;</span> <span>// Whether any agentic environment was detected</span>
  <span>id</span>: <span>string</span> <span>|</span> <span>null</span><span>;</span> <span>// Provider ID (e.g., &#34;claude-code&#34;)</span>
  <span>name</span>: <span>string</span> <span>|</span> <span>null</span><span>;</span> <span>// Human-readable name (e.g., &#34;Claude Code&#34;)</span>
  <span>type</span>: <span>AgenticType</span> <span>|</span> <span>null</span><span>;</span> <span>// &#34;agent&#34; | &#34;interactive&#34; | &#34;hybrid&#34;</span>
<span>}</span></pre></div>

<p dir="auto">Use the CLI to quickly check if you&#39;re running in an agentic environment:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Basic detection
npx am-i-vibing
# ✓ Detected: Claude Code (agent)

# JSON output
npx am-i-vibing --format json
# {&#34;isAgentic&#34;: true, &#34;id&#34;: &#34;claude-code&#34;, &#34;name&#34;: &#34;Claude Code&#34;, &#34;type&#34;: &#34;agent&#34;}

# Check for specific environment type
npx am-i-vibing --check agent
# ✓ Running in agent environment: Claude Code

npx am-i-vibing --check interactive
# ✗ Not running in interactive environment

# Quiet mode (useful for scripts)
npx am-i-vibing --quiet
# Claude Code

# Debug mode (full diagnostic output)
npx am-i-vibing --debug
# {&#34;detection&#34;: {&#34;isAgentic&#34;: true, &#34;id&#34;: &#34;claude-code&#34;, &#34;name&#34;: &#34;Claude Code&#34;, &#34;type&#34;: &#34;agent&#34;}, &#34;environment&#34;: {...}, &#34;processAncestry&#34;: [...]}"><pre><span><span>#</span> Basic detection</span>
npx am-i-vibing
<span><span>#</span> ✓ Detected: Claude Code (agent)</span>

<span><span>#</span> JSON output</span>
npx am-i-vibing --format json
<span><span>#</span> {&#34;isAgentic&#34;: true, &#34;id&#34;: &#34;claude-code&#34;, &#34;name&#34;: &#34;Claude Code&#34;, &#34;type&#34;: &#34;agent&#34;}</span>

<span><span>#</span> Check for specific environment type</span>
npx am-i-vibing --check agent
<span><span>#</span> ✓ Running in agent environment: Claude Code</span>

npx am-i-vibing --check interactive
<span><span>#</span> ✗ Not running in interactive environment</span>

<span><span>#</span> Quiet mode (useful for scripts)</span>
npx am-i-vibing --quiet
<span><span>#</span> Claude Code</span>

<span><span>#</span> Debug mode (full diagnostic output)</span>
npx am-i-vibing --debug
<span><span>#</span> {&#34;detection&#34;: {&#34;isAgentic&#34;: true, &#34;id&#34;: &#34;claude-code&#34;, &#34;name&#34;: &#34;Claude Code&#34;, &#34;type&#34;: &#34;agent&#34;}, &#34;environment&#34;: {...}, &#34;processAncestry&#34;: [...]}</span></pre></div>

<ul dir="auto">
<li><code>-f, --format &lt;json|text&gt;</code> - Output format (default: text)</li>
<li><code>-c, --check &lt;agent|interactive|hybrid&gt;</code> - Check for specific environment type</li>
<li><code>-q, --quiet</code> - Only output result, no labels</li>
<li><code>-d, --debug</code> - Debug output with environment and process info</li>
<li><code>-h, --help</code> - Show help message</li>
</ul>

<ul dir="auto">
<li><code>0</code> - Agentic environment detected (or specific check passed)</li>
<li><code>1</code> - No agentic environment detected (or specific check failed)</li>
</ul>

<p dir="auto">The <code>--debug</code> flag provides comprehensive diagnostic information including:</p>
<ul dir="auto">
<li><strong>detection</strong>: Standard detection result (same as <code>--format json</code>)</li>
<li><strong>environment</strong>: Complete dump of <code>process.env</code> variables</li>
<li><strong>processAncestry</strong>: Process tree showing parent processes up to the root</li>
</ul>
<p dir="auto">This is useful for troubleshooting detection issues and understanding the runtime environment.</p>
<div dir="auto" data-snippet-clipboard-copy-content="npx am-i-vibing --debug
# {
#   &#34;detection&#34;: { ... },
#   &#34;environment&#34;: { ... },
#   &#34;processAncestry&#34;: [...]
# }"><pre>npx am-i-vibing --debug
<span><span>#</span> {</span>
<span><span>#</span>   &#34;detection&#34;: { ... },</span>
<span><span>#</span>   &#34;environment&#34;: { ... },</span>
<span><span>#</span>   &#34;processAncestry&#34;: [...]</span>
<span><span>#</span> }</span></pre></div>

<p dir="auto">MIT</p>
<p dir="auto">Copyright © 2025 Matt Kane</p>
</article></div></div>
  </body>
</html>
