<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/Manawyrm/nvme-int13h-optionrom">Original</a>
    <h1>Boot legacy PCs from NVMe storage</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto">Boot legacy PCs from NVMe storage: <a href="https://www.youtube.com/watch?v=TVKbFLtXLYM" rel="nofollow">YouTube video with ThinkPad T43</a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/a91f3f7853a212b09efee81db3700afb6edc9690038f95c5bbafa2d9ef5b25f2/68747470733a2f2f73637265656e73686f742e746273706163652e64652f6273717a616667687574762e6a7067"><img src="https://camo.githubusercontent.com/a91f3f7853a212b09efee81db3700afb6edc9690038f95c5bbafa2d9ef5b25f2/68747470733a2f2f73637265656e73686f742e746273706163652e64652f6273717a616667687574762e6a7067" alt="T43 showing the NVME BIOS init message" data-canonical-src="https://screenshot.tbspace.de/bsqzafghutv.jpg"/></a>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/d721fce18270097d3d73ed54e9489ce05f55fdc6902f2e136aa7cc272e74bba7/68747470733a2f2f73637265656e73686f742e746273706163652e64652f72646d677461627668706c2e6a7067"><img src="https://camo.githubusercontent.com/d721fce18270097d3d73ed54e9489ce05f55fdc6902f2e136aa7cc272e74bba7/68747470733a2f2f73637265656e73686f742e746273706163652e64652f72646d677461627668706c2e6a7067" alt="T43 Boot Menu showing a NVMe option" data-canonical-src="https://screenshot.tbspace.de/rdmgtabvhpl.jpg"/></a></p>
<p dir="auto">This project allows old x86 computers using a classic BIOS to boot from modern NVMe storage attached via PCI(e).
It&#39;s a heavily modified version of <a href="https://ipxe.org/start" rel="nofollow">iPXE</a> (which usually allows for booting from the network), but
instead of the network, this code uses a port of the <a href="https://github.com/coreboot/seabios/tree/master">SeaBIOS</a> <a href="https://github.com/coreboot/seabios/blob/master/src/hw/nvme.c">NVMe implementation</a> to talk to a local NVMe drive.</p>
<h2 tabindex="-1" id="user-content-project-status" dir="auto"><a href="#project-status">Project status<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<p dir="auto">Worksâ„¢</p>
<h4 tabindex="-1" id="user-content-supported-hosts" dir="auto"><a href="#supported-hosts">Supported hosts<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<ul dir="auto">
<li>IBM ThinkPad T43</li>
<li>QEMU VM, i440fx</li>
</ul>
<h4 tabindex="-1" id="user-content-supported-ssds" dir="auto"><a href="#supported-ssds">Supported SSDs<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h4>
<ul dir="auto">
<li>Samsung SSD 980</li>
<li>Corsair Force MP510</li>
</ul>
<h2 tabindex="-1" id="user-content-features" dir="auto"><a href="#features">Features<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<ul dir="auto">
<li>Booting from NVMe storage in Legacy/BIOS mode</li>
<li>Works on 32bit-only CPUs (Pentium 3, Atom, etc.)</li>
<li>Option ROM, USB flash drive, SD card, CD-ROM, chainloading (e.g. from grub) booting supported</li>
</ul>
<h2 tabindex="-1" id="user-content-limitations" dir="auto"><a href="#limitations">Limitations<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<ul dir="auto">
<li>Write support is currently disabled. The code is present, but it&#39;s additional danger for no benefit (for my usecase)</li>
<li>Only 1 NVMe drive (with 1 namespace) is properly handled at the moment</li>
<li>64bit BARs are probably not handled correctly (untested!)</li>
</ul>
<h2 tabindex="-1" id="user-content-similar-projects--alternatives" dir="auto"><a href="#similar-projects--alternatives">Similar projects / Alternatives<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<p dir="auto">There are 2 other Option ROMs publicly available:</p>
<ul dir="auto">
<li>Samsung 950 Pro (exposed by the PCIe device, device-specific)</li>
<li>community modded VMWare NVMe ROM (didn&#39;t work on my hardware, did work in QEMU)</li>
</ul>
<p dir="auto">This project is GPL-licensed, can be freely redistributed (both as binaries and source) and can be instrumented/debugged easily (as it&#39;s written in C).</p>
</article>
          </div></div>
  </body>
</html>
