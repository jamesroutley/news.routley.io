<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://typesafety.net/rob/blog/lean-magic">Original</a>
    <h1>The Magic is People</h1>
    
    <div id="readability-page-1" class="page"><div data-astro-cid-3lgtpi4n="">  <p>About a decade ago my dad, a United Methodist minister, was in a room with about a dozen other Methodist ministers working on some policy document, something he had probably done hundreds of times in his career. This time, someone projected a Google doc at the front of the room, and all the other people in the room had the document open on their laptops in edit mode, allowing them to collaborate by discussing changes, or by just making changes directly.</p>
<figure><div><p><img src="https://typesafety.net/_astro/several-people-are-typing.LwjGbCix_Z2ve5KQ.webp" alt="The Google Docs user interface, with several people simultaneously accessing and editing a sentence." loading="lazy" decoding="async" fetchpriority="auto" width="638" height="332"/></p></div></figure>
<p>The excitement Dad expressed as he related this experience really stuck with me. He was describing technology that I was familiar with and that I’d used dozens of times. I believed Google Docs was built with care and a high level of craftsmanship, but it wasn’t, like, fundamentally <em>that</em> exciting to me. But Dad wanted me to understand that, from his perspective, there was something important and new here, something that he wished more people knew about. Google Docs’s multiplayer collaborative editing allowed his group to work together in a different way than anything he had encountered before.</p>
<p>There was, for lack of a better word, some magic for him in this way of using Google Docs.</p>
<p>It was, and still is, pretty clear to me that the well-designed, well-executed, senior-Methodist-minister-friendly software was not the magic thing. The software was important as a catalyst, but the magic was in the people and the way they were able to work together with the help of the technology.</p>
<p>Anyway, three weeks ago I joined the organization that is developing a programming language called <a href="https://lean-lang.org/">Lean</a>. The story about my dad is true, and it is also a parable. Lean is exciting to me because Lean is catalyzing collaboration between mathematics the same way Google Docs catalyzed collaboration between Methodists.</p>
<h2 id="not-collaborating-on-mathematics">(Not) collaborating on mathematics</h2>
<p>I think it’s fair to say that collaboration at the forefront of mathematics is, generally speaking, pretty difficult. Lots of the most famous modern mathematical results involve individuals or very small groups — always building on the prior work of many, many others, but often doing that building in temporary isolation. As two examples, Wiles proved <a href="https://en.wikipedia.org/wiki/Fermat%27s_Last_Theorem">Fermat’s Last Theorem</a> (based on work a decade earlier on the Taniyama–Shimura conjecture), and Perlman proved the <a href="https://en.wikipedia.org/wiki/Poincar%C3%A9_conjecture">Poincaré conjecture</a> (based on Hamilton’s earlier work on the Ricci flow). Mathematics, to a close-by outsider like myself, feels like a highly social activity, but it’s social the way correspondence chess is social, not the way <a href="https://en.wikipedia.org/wiki/Liverpool_rummy">Liverpool Rummy</a> is social.</p>
<p>I don’t want to overstate my case too much: there are some modern examples of massive collaborations, like the <a href="https://en.wikipedia.org/wiki/Classification_of_finite_simple_groups">hundred or so people who worked on the classification of finite simple groups</a>. And there are lots of dynamic duos in mathematics. Two minds may be even better than one! There are also folks like <a href="https://en.wikipedia.org/wiki/Paul_Erd%C5%91s">Paul Erdős</a>, a mathematician who famously specialized in being one half of many, many dynamic duos.</p>
<p>I would not consider myself someone who works at the forefront of mathematics, but in my modest mathematical research, I’ve experienced the difficulty with developing results in groups. When you’re working on an unfinished mathematical result, there are lots and lots of details, the details are connected in non-obvious ways, and needing to make a change to one part of a proof can have consequences to other parts that aren’t obvious. When it’s you and multiple other people, it can feel like most of your time is spent making sure everyone is tracking the changes to the details rather than making new progress. (I can recall one math-heavy three-author paper I was involved in that was really the result of a series of two-person collaborations. Despite significant effort, we were never able to get on the same page at the same time.)</p>
<h2 id="computer-checked-proof">Computer-checked proof</h2>
<p>The idea of using computers to check mathematical proofs is not a new idea. The idea is older than I am, and by the time I entered college around the turn of the century, the question was not “is it a reasonable idea for computers to check your proofs?” but “when is it worth the effort?” In my corner of academic computer science — the study of programming languages — I’d say the answer for about a decade has been “it’s worth doing computer checked proof whenever you’re doing something moderately complicated.” (If you want to say almost anything about a real programming language that people actually use, you’re doing something moderately complicated.) The <a href="https://rocq-prover.org/">Rocq</a> theorem prover has become the tool of choice in my little corner of computer science: so far in 2025, there are at least 22 published papers that used a specific Rocq library called <a href="https://iris-project.org/">Iris</a>! <a href="https://wiki.portal.chalmers.se/agda/pmwiki.php">Agda</a>, <a href="https://en.wikipedia.org/wiki/Isabelle_%28proof_assistant%29">Isabelle</a>, and <a href="https://hol-light.github.io/">HOL Light</a> are also popular options; I’ve personally done a fair amount of work in Agda.</p>
<p>In my experience, when you’re collaborating with other people while the computer is actively checking your work, the difficult detail-management problem changes: instead of a difficult human communication problem, managing the details becomes a (comparatively straightforward) programming problem. More than once I’ve made a change to one part of a proof, seen that it causes problems in someone else’s work, and then gone and fixed their problem without really having to understand the actual details of what they were doing.</p>
<p>It’s not a new observation that computer-assisted mathematics unlocks a kind of collaboration that isn’t otherwise feasible. In 1998, Thomas Hales presented a proof of the <a href="https://en.wikipedia.org/wiki/Kepler_conjecture">Kepler Conjecture</a>, which says that the way you stack oranges in a grocery store is really and truly the best way to pack spheres without wasting any space. His proof was 300 pages long and had one author! It was so complex that a group of twelve reviewers spent four years trying to understand the proof, and after four years they said they still weren’t sure it was correct. The experience inspired Hales to spend the next decade creating a computer-checked version of the proof, but the second time he collaborated with <a href="https://arxiv.org/abs/1501.02155">twenty-one other people</a>.</p>
<h2 id="lean">Lean!</h2>
<p>I think it’s fair to say that the tools I just described for computer-checked proof have not quite caught on outside of computer science. I also think it’s fair to say that <a href="https://lean-lang.org">Lean</a>, the system I’m working on now, <em>has</em> started catching on, at least with mathematicians. (I can’t confidently opine as to <em>why</em> that’s the case; as with most things, there’s surely a combination of good design, thoughtful community building, timing, and luck.) I want to mention three really cool ways in which people are collaborating on mathematics in Lean in new ways.</p>
<p>The first is a <em>massive</em> collaboration, Mathlib, that is currently aiming to capture a ton of reasonably well-known mathematics — including most of the math that you might learn in high school or college — in Lean. Over five hundred people have directly contributed to Mathlib, and many, many more have used it as a starting point for their work.</p>
<p>The second is a collaborative project to formalize <a href="https://en.wikipedia.org/wiki/Carleson%27s_theorem">Carleson’s theorem</a>, a famously tricky result. (The Wikipedia article on it states “Carleson’s original proof is exceptionally hard to read, and although several authors have simplified the argument there are still no easy proofs of his theorem.”) The project to formalize Carleson’s theorem in Lean started with five collaborators, and the successfully completed proof lists <a href="https://florisvandoorn.com/carleson/blueprint.pdf">seventeen collaborators</a>.</p>
<p>The third, and my real inspiration for writing this post, is the <a href="https://teorth.github.io/equational_theories/dashboard/">equational theories project</a>. If you have a mathematical statement A and another mathematical statement B, you can ask yourself the question “if I assume A, can I prove B?” You may be able to show that the answer is “yes,” you may be able to show that the answer is “no,” and you might be stuck and unable to answer either yes or no. About a year ago, the well-known mathematician Terrence Tao came up with 4694 interesting mathematical statements, which meant that there were 4694 ways to pick a mathematical statement A and then 4693 ways to pick a different statement B. That results in about <em>twenty-two million</em> mathematical questions. As an intentional experiment in collaborative mathematics, Tao <a href="https://terrytao.wordpress.com/2024/09/25/a-pilot-project-in-universal-algebra-to-explore-new-ways-to-collaborate-and-use-machine-assistance/">proposed trying to answer “yes” or “no” to all of them</a>. And it worked! <a href="https://github.com/teorth/equational_theories">More than five dozen people contributed to the project</a>, with twenty-eight people listed as mathematical contributors, and all twenty-two million questions were verified in Lean. Most questions were very easy, and some questions took multiple months with multiple people working on one question.</p>
<p>Most of the people working with Hales on the formalization of the Kepler conjecture were doing it as paid work. Essentially everyone working on the equational theories project was just doing mathematics for fun in their free time, and making mathematical discoveries along the way! That feels like something new, and a little magical.</p>
<h2 id="but-what-are-you-doing-rob">But what are <em>you</em> doing, Rob?</h2>
<p>In an early draft I talked more about what I’m actually going to be working on at my new job, but <a href="http://scannedinavian.com/about.html">Shae</a> was a thoughtful early reader and pointed out that I’d already finished a complete thought. I’ll stop here and save other thoughts for the future. Thanks to the early readers, especially Shae, Ashley, and my parents.</p>
<p>If you’re interested in a tiny taste of what doing mathematics in Lean feels like, I recommend the <a href="https://adam.math.hhu.de/#/g/leanprover-community/nng4">Natural Number Game</a>. If you’re generally interested in programming, I recommend <a href="https://lean-lang.org/functional_programming_in_lean/">Functional Programming in Lean</a>, because Lean is a cool programming language in addition to being a tool for checking mathematical proofs. If you know what Zulip is, <a href="https://leanprover.zulipchat.com/">Lean has a Zulip</a>.</p>
<p><a href="https://social.wub.site/@simrob/115282187326755181">Discuss this post on Mastodon (or whatever)</a></p>  </div></div>
  </body>
</html>
