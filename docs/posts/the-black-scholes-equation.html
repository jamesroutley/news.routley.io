<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://juicetin.bearblog.dev/the-black-scholes-equation/">Original</a>
    <h1>the black-scholes equation™</h1>
    
    <div id="readability-page-1" class="page"><div><p>A friend recently asked me about helping them understand Black-Scholes(-Merton, sometimes????), coincidentally a topic I was focused on learning in my time at the <a href="https://recurse.com" target="_blank">Recurse Center</a>. And in the spirit of learning generously, I figured a writeup on it would knock out two-birds-with-one-stone, so I was happy to oblige. So voilà! Here we are for my benefit and for yours. And in easy form for my friend to read (I hope).</p>
<p>Also, if you don&#39;t know what an <a href="https://en.wikipedia.org/wiki/Option_(finance)" target="_blank">option</a> is, just skim that and know that this is what we&#39;re trying to figure out a function for pricing using this Black-Scholes equation!</p>
<h2 id="all-you-need-to-know">All you need to know</h2>
<p>is this partial differential equation:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mfrac><mrow><mo>∂</mo><mi>V</mi></mrow><mrow><mo>∂</mo><mi>t</mi></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mn>2</mn></mrow></mfrac><msup><mi>σ</mi><mn>2</mn></msup><msup><mi>S</mi><mn>2</mn></msup><mfrac><mrow><msup><mo>∂</mo><mn>2</mn></msup><mi>V</mi></mrow><mrow><mo>∂</mo><msup><mi>S</mi><mn>2</mn></msup></mrow></mfrac><mo>+</mo><mi>r</mi><mi>S</mi><mfrac><mrow><mo>∂</mo><mi>V</mi></mrow><mrow><mo>∂</mo><mi>S</mi></mrow></mfrac><mo>−</mo><mi>r</mi><mi>V</mi><mo>=</mo><mn>0</mn></mrow></math></p>
<p>And if we rewrite it by shifting over some parts, we have:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mfrac><mrow><mo>∂</mo><mi>V</mi></mrow><mrow><mo>∂</mo><mi>t</mi></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mn>2</mn></mrow></mfrac><msup><mi>σ</mi><mn>2</mn></msup><msup><mi>S</mi><mn>2</mn></msup><mfrac><mrow><msup><mo>∂</mo><mn>2</mn></msup><mi>V</mi></mrow><mrow><mo>∂</mo><msup><mi>S</mi><mn>2</mn></msup></mrow></mfrac><mo>=</mo><mi>r</mi><mi>V</mi><mo>−</mo><mi>r</mi><mi>S</mi><mfrac><mrow><mo>∂</mo><mi>V</mi></mrow><mrow><mo>∂</mo><mi>S</mi></mrow></mfrac></mrow></math></p>
<p>And, done!</p>
<p>Each symbol:</p>
<ul>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>V</mi></mrow></math> is a function of stock price and time that should return to us the price of our option (and solves this PDE)</li>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>S</mi></mrow></math> is the stock price, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>t</mi></mrow></math> is time</li>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>σ</mi></mrow></math> is the volatility of the underlying stock returns (where <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>σ</mi></mrow></math> comes from assumption that stock prices follow geometric Brownian motion)</li>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>r</mi></mrow></math> is the risk-free interest rate.</li>
</ul>
<p>Pretty intuitive.</p>
<h2 id="sorry-i-was-just-kidding">sorry i was just kidding</h2>
<p>Let&#39;s step back for a second from all all this stochastic calculus, partial differential equations, Itô&#39;s Lemma, and fancy derivation because, yes, it&#39;s weird and complicated and everybody starts by first looking at the Black-Scholes <strong>equation</strong> (which, by the way, is different from the <em><a href="https://en.wikipedia.org/wiki/Black%E2%80%93Scholes_model" target="_blank">model</a></em> that most people are familiar with!) and understandably hits a wall. Whole courses have been created revolving around this equation, so evidently we&#39;ll just be trying to touch at the foundational intuition as best we can.</p>
<h2 id="what-is-the-problem-we-are-trying-to-solve">What is the problem we are trying to solve?</h2>
<p>There is an option on some underlying asset based on some expiry date and time. <em>We are trying to come up with some <strong>function</strong> <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>V</mi></mrow></math> that can calculate this option&#39;s value.</em></p>
<p>In just plain English, what are things to consider when pricing this contract? Maybe:</p>
<ul>
<li>what&#39;s the current price of the asset it&#39;s derived from (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>S</mi></mrow></math>)</li>
<li>how much time is left til expiry? (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>t</mi></mrow></math>)</li>
<li>returns are always relative – what bar do we compare our asset&#39;s returns to? (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>r</mi></mrow></math>)</li>
<li>assets move around in value, we should measure how much it could go up or down (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>σ</mi></mrow></math>)</li>
</ul>
<p>The asset is not just stocks! This applies for an option on anything – a commodity, currency, bond, you name it.</p>
<p>Something to note about the Black-Scholes equation above is a <a href="https://en.wikipedia.org/wiki/Partial_differential_equation" target="_blank">partial differential equation</a> where the solution is another <strong>function</strong> <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>V</mi></mrow></math>! Something that I cannot hammer home enough – this specific equation with partial derivatives does <em>not</em> pump out a dollar amount for our option once we put all the parameters in. The &#34;solution&#34; (it&#39;s hard to solve) to this equation is actually <em>another function</em>, not a single number.</p>
<h2 id="then-what-is-the-black-scholes-model">then what is the black-scholes <em>model</em>?</h2>
<p>With that established and on the note of &#34;PDEs are hard to solve&#34; – if we make certain strong, very very unrealistic and idealized assumptions about the world, then we can find an analytical solution (plain English: actually derive an exact formula that would solve this PDE), one you might see around commonly referred to as <a href="https://en.wikipedia.org/wiki/Black%E2%80%93Scholes_model" target="_blank">&#34;the Black-Scholes model&#34;</a> for <a href="https://www.investopedia.com/terms/e/europeanoption.asp" target="_blank">vanilla European options</a>. But to reiterate, this one <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>V</mi></mrow></math> yielded under certain unrealistic conditions should <strong>NOT</strong> be confused with our fundamental Black-Scholes equation written at the top! That main PDE up top is far more foundational, and we use that to broadly price any kind of option. What you cover in Derivatives 101 at Wharton is not using this original complex equation, it&#39;s just plugging-and-chugging into the Black-Scholes <strong>model</strong> as a proof of concept to get you familiar with checking a Bloomberg Terminal and copy-pasting numbers into prewritten equations as preparation for what most of your life as an investment banker will be.</p>
<p>If we don&#39;t constrain ourselves to this very narrow field of vanilla European options (assumptions of constancy in interest rate, no stock dividends, no transaction costs, all of which again are very unrealistic), then we can&#39;t just derive a different formula from this PDE with plug-and-chug.</p>
<p>We resort to numerical methods, such as <a href="https://en.wikipedia.org/wiki/Finite_difference_method">finite-difference methods</a> or the classic <a href="https://en.wikipedia.org/wiki/Monte_Carlo_method" target="_blank">Monte-Carlo method</a> (plain English: Excel Solver) to get a solution to the Black-Scholes equation! We won&#39;t find an exact formula for <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>V</mi></mrow></math>, just a very good approximation to it. And this has remained an area of active, continued research ever since Black-Scholes first introduced their model back in 1973, which is in line with how active PDE research has continued to be across all the disciplines it remains incredibly useful in (electromagnetic theory, heat transfer, fluid dynamics, the list goes on and on).</p>
<h2 id="some-core-intuition">Some core intuition</h2>
<p>Something important to note here: at the expiry time <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>T</mi></mrow></math>, <em><strong>there is no uncertainty remaining</strong></em>; we know what our asset&#39;s value is with <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>S</mi></mrow></math> and it&#39;s pretty easy to tell how valuable a call/put option is on a known outcome (e.g. if I have a put option for a stock at 100$ expiring today at 4PM and the stock&#39;s end value at 4PM is 80$, the option is worth 20$ because of our profit if we exercise the option). Hence, making a function <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>V</mi></mrow></math> to calculate the option price is trivial.</p>
<p>But at any time before our terminus <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>T</mi></mrow></math>, we <em>don&#39;t</em> know what the value of our asset will end up being at time <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>T</mi></mrow></math>, so we have to <em><strong>factor in that uncertainty into our pricing function</strong></em>! And that comes in the form of our volatility measurement, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>σ</mi></mrow></math>.</p>
<p>The beautiful part about Black-Scholes equation is that it draws a direct connection between the <strong>underlying&#39;s volatility</strong> (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>σ</mi></mrow></math>) and <strong>our function to price the derivative</strong> (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>V</mi></mrow></math>). All encoded in a single mathematical formula encoding a vast, hard problem into one simple statement. If you know exactly how volatile the underlying is, you can always then find the function that will calculate the &#34;correct&#34; price of an option only needing the initial asset price we&#39;re starting with.</p>
<h2 id="volatility-volatility-volatility">volatility volatility volatility</h2>
<p>If there are the three rules of real estate, then similarly these are the three rules of options pricing. Because of the work that Black-Scholes has done, we have a direct translation between our volatility <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>σ</mi></mrow></math> and our option price. In practice though, finding this <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>σ</mi></mrow></math> value is <em><strong>incredibly hard</strong></em>. Figuring out how uncertain the future will be tends to be that way.</p>
<p>In fact, this problem is <em>so</em> hard that the VIX, the volatility index that the CBOE (Chicago Board Options Exchange) keeps track of that is used by countless investors and financial institutions, derives its volatility from the <em>quoted prices of S&amp;P500 index put/call options</em> as its bar, rather than calculating it themselves! Hence why it is often called &#34;implied&#34; volatility, the future volatility that is &#34;implied&#34; by the market prices for options. I repeat, the market prices are actually what determine expected volatility, and it&#39;s used to aggregate traders&#39; beliefs on how much future volatility to expect. This sounds a lot like what we&#39;ve covered before on <a href="https://juicetin.bearblog.dev/why-markets">the usefulness of markets</a>, and how they prove to be wonderful information aggregators and forecasters.</p>
<p>On the contrary, other people/researchers/investors try their best to model volatility more accurately on their own, instead of how the CBOE does it. If they can model volatility more accurately than others, they&#39;re able to more accurately price options, and that&#39;s useful for them! A lot like how people out there try to value stocks more accurately than the market price says they&#39;re worth. In both cases, there&#39;s always some player trying to find an edge and see if there&#39;s something that everyone else is missing, and trading on that information. This is what lots of quantitive funds and market making shops are doing on a daily basis, especially as they make a market on options as liquidity providers.</p>
<h2 id="still-not-fully-done">still not fully done...</h2>
<p>And to be honest, there&#39;s sooo much more to still be covered. Again, this is, uh, an active area of research to say the least, so makes sense that I can&#39;t get to all of it within this writeup. But I hope at the very least it&#39;s provided some clarity into what it means when everyone throws around the term &#34;Black-Scholes&#34; left and right and you always wondered why this math from the 70&#39;s has remained relevant today.</p>

<p>On what I wrote earlier:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mfrac><mrow><mo>∂</mo><mi>V</mi></mrow><mrow><mo>∂</mo><mi>t</mi></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mn>2</mn></mrow></mfrac><msup><mi>σ</mi><mn>2</mn></msup><msup><mi>S</mi><mn>2</mn></msup><mfrac><mrow><msup><mo>∂</mo><mn>2</mn></msup><mi>V</mi></mrow><mrow><mo>∂</mo><msup><mi>S</mi><mn>2</mn></msup></mrow></mfrac><mo>=</mo><mi>r</mi><mi>V</mi><mo>−</mo><mi>r</mi><mi>S</mi><mfrac><mrow><mo>∂</mo><mi>V</mi></mrow><mrow><mo>∂</mo><mi>S</mi></mrow></mfrac></mrow></math></p>
<p>If you ever want to go down the rabbit hole of options, you often hear about the &#34;greeks&#34; (typically four main ones, though there are far too many more you can further explore):</p>
<ul>
<li>delta (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>Δ</mi></mrow></math>) = sensitivity of option&#39;s price to underlying&#39;s price</li>
<li>gamma (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>Γ</mi></mrow></math>) = rate of change of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>Δ</mi></mrow></math>!! second derivative to underlying&#39;s price</li>
<li>vega (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>ν</mi></mrow></math>) = sensitivity of an option&#39;s price to volatility of underlying</li>
<li>theta (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>Θ</mi></mrow></math>) = option&#39;s price decay over time as time nears expiry</li>
</ul>
<p>And, what do ya know, I wonder what happens if we look a little closely at that formula above– oh! would you look at that:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>Θ</mi><mo>+</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mn>2</mn></mrow></mfrac><msup><mi>σ</mi><mn>2</mn></msup><msup><mi>S</mi><mn>2</mn></msup><mi>Γ</mi><mo>=</mo><mi>r</mi><mi>V</mi><mo>−</mo><mi>r</mi><mi>S</mi><mi>Δ</mi></mrow></math></p>
<p>Except for vega, they&#39;re all there! Did they originate from Black-Scholes? Also not sure (it seems the history of finance needs some better historians), though it seems most likely and the two concepts are often inseparably intertwined.</p>
<p>More importantly though, a key observation of Black-Scholes is the &#34;risk-neutral&#34; argument that the sum of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>Θ</mi></mrow></math> and a term with <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>Γ</mi></mrow></math> in it (left-hand side) is equal to the risk-free return rate of any combined portfolio of options and stocks (right-hand side), since the value of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>Θ</mi></mrow></math> is typically negative as time decay and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mi>Γ</mi></mrow></math> uses positive (reflecting the gains the portfolio receives from holding the options within it) and they both cancel out to return risk-free rate of return.</p>
<p>Hence, the Greeks and their usage were quite popularized by Black-Scholes, and you see them everywhere today as sensitivities closely watched by traders to consider various risks and potential movements as they navigate their options trades.</p>
<p>But, it&#39;s complicated. It&#39;s still sometimes all Greek to me.</p>
<hr/>

</div></div>
  </body>
</html>
