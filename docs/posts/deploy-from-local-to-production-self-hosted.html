<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/bypirob/airo">Original</a>
    <h1>Deploy from local to production (self-hosted)</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><div dir="auto"><a id="user-content--airo" aria-label="Permalink: üöÄ Airo" href="#-airo"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><strong>Deploy your projects directly from your local computer to your production server easily.</strong></p>
<p dir="auto">Airo helps you deploying containers to your self-hosted server, without worrying about configuring pipelines, serverless services or different platforms. Just your self-hosted servers.</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Why Airo?</h2><a id="user-content-why-airo" aria-label="Permalink: Why Airo?" href="#why-airo"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Deploying side-projects doesn&#39;t have to be complicated or expensive. Kubernetes, Platform as a Service (PaaS) and CI/CD pipelines are a powerful and exciting solutions, but sometimes they&#39;re more complex than your project requires. If you enjoy managing your server, it can be significantly cheaper and offer greater control over the technical details.</p>
<p dir="auto">I want to automate this process and deploy easily to my own server. That&#39;s why I&#39;ve created <strong>Airo</strong>:</p>
<ul dir="auto">
<li>üöÄ <strong>Focus on building your product</strong>, not managing infrastructure.</li>
<li>üê≥ <strong>Build and push Docker images directly from your local machine to a container registry</strong>.</li>
<li>‚ö°Ô∏è <strong>Deploy instantly</strong> with a single command from your computer.</li>
<li>üîë <strong>Easily update configurations and containers securely</strong> using SSH.</li>
<li>üåê <strong>Set up HTTPS and reverse proxy automatically</strong> using Caddy.</li>
</ul>
<div dir="auto"><h2 tabindex="-1" dir="auto">How It Works</h2><a id="user-content-how-it-works" aria-label="Permalink: How It Works" href="#how-it-works"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Deploying with Airo is easy:</p>
<ol dir="auto">
<li>Define your services in a <code>compose.yml</code> file.</li>
<li>Configure your deployment details in <code>env.yml</code> (server details, Docker images, etc.).</li>
<li>Prepare your Dockerfile.</li>
<li>Set up your Caddyfile for automatic HTTPS and reverse proxy.</li>
</ol>
<p dir="auto">After this initial setup, deploying new updates is just a simple command away:</p>
<div dir="auto" data-snippet-clipboard-copy-content="airo deploy"><pre>airo deploy</pre></div>
<div dir="auto"><h2 tabindex="-1" dir="auto">Installation</h2><a id="user-content-installation" aria-label="Permalink: Installation" href="#installation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">From Source</h3><a id="user-content-from-source" aria-label="Permalink: From Source" href="#from-source"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto" data-snippet-clipboard-copy-content="git clone https://github.com/yourusername/airo.git
cd airo
make install
airo deploy"><pre>git clone https://github.com/yourusername/airo.git
<span>cd</span> airo
make install
airo deploy</pre></div>
<div dir="auto"><h2 tabindex="-1" dir="auto">Usage</h2><a id="user-content-usage" aria-label="Permalink: Usage" href="#usage"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ol dir="auto">
<li>
<p dir="auto">Create a new project directory and navigate to it:</p>
<div dir="auto" data-snippet-clipboard-copy-content="mkdir my-project/.deploy
cd my-project/.deploy"><pre>mkdir my-project/.deploy
<span>cd</span> my-project/.deploy</pre></div>
</li>
<li>
<p dir="auto">Configure your <code>env.yaml</code> file:</p>
<div dir="auto" data-snippet-clipboard-copy-content="server: your-server-ip
user: your-ssh-user
ssh_key: /path/to/your/ssh/key
# add all your services that will be built here
services:
  - name: nextjs
    image: your-registry/api:latest
    build: /home/user/your-project"><pre><span>server</span>: <span>your-server-ip</span>
<span>user</span>: <span>your-ssh-user</span>
<span>ssh_key</span>: <span>/path/to/your/ssh/key</span>
<span><span>#</span> add all your services that will be built here</span>
<span>services</span>:
  - <span>name</span>: <span>nextjs</span>
    <span>image</span>: <span>your-registry/api:latest</span>
    <span>build</span>: <span>/home/user/your-project</span></pre></div>
</li>
<li>
<p dir="auto">Add a Dockerfile to your project:</p>
<div dir="auto" data-snippet-clipboard-copy-content="FROM node:20-alpine
WORKDIR /app
COPY . .
RUN npm install"><pre><span>FROM</span> node:20-alpine
<span>WORKDIR</span> /app
<span>COPY</span> . .
<span>RUN</span> npm install</pre></div>
</li>
<li>
<p dir="auto">Configure your <code>compose.yml</code> file with your services:</p>
<div dir="auto" data-snippet-clipboard-copy-content="services:
   postgres:
     image: postgres:latest
     restart: unless-stopped
     ports:
       - &#39;5432:5432&#39;
     volumes:
       - ./postgres_data:/var/lib/postgresql/data
     environment:
       POSTGRES_PASSWORD: some-temporary-password
  nextjs:
    image: your-registry/front:latest
    restart: unless-stopped
    ports:
      - &#39;3000:3000&#39;
    volumes:
      - ./.env:/app/.env"><pre><span>services</span>:
   <span>postgres</span>:
     <span>image</span>: <span>postgres:latest</span>
     <span>restart</span>: <span>unless-stopped</span>
     <span>ports</span>:
       - <span><span>&#39;</span>5432:5432<span>&#39;</span></span>
     <span>volumes</span>:
       - <span>./postgres_data:/var/lib/postgresql/data</span>
     <span>environment</span>:
       <span>POSTGRES_PASSWORD</span>: <span>some-temporary-password</span>
  <span>nextjs</span>:
    <span>image</span>: <span>your-registry/front:latest</span>
    <span>restart</span>: <span>unless-stopped</span>
    <span>ports</span>:
      - <span><span>&#39;</span>3000:3000<span>&#39;</span></span>
    <span>volumes</span>:
      - <span>./.env:/app/.env</span></pre></div>
</li>
<li>
<p dir="auto">Deploy your project:</p>
<div dir="auto" data-snippet-clipboard-copy-content="airo deploy"><pre>airo deploy</pre></div>
</li>
<li>
<p dir="auto">If you want to deploy your project without building the docker image, you can use the <code>compose</code> subcommand:</p>
</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="airo compose"><pre>airo compose</pre></div>
<ol start="7" dir="auto">
<li>Also if you want to update your Caddyfile, you can use the <code>caddy</code> subcommand:</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="airo caddy"><pre>airo caddy</pre></div>
</article></div></div>
  </body>
</html>
