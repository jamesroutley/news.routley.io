<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://jero.zone/posts/reverse-engineering-apis">Original</a>
    <h1>All the data can be yours: reverse engineering APIs</h1>
    
    <div id="readability-page-1" class="page"><article>   <article> <p>I’ve built a lot of unofficial software for my schools, Brown University and previously Macalester College. To name a few: an “everything app” called <a href="https://75grand.net">75grand</a> with dining hall menus, Moodle assignments, building hours, an event calendar, and more; two unfinished course catalogs; and a university shuttle tracker. None of these were developed in partnership with the college (75grand’s success was even met with <a href="https://www.macalester.edu/macnav/">jealousy</a> from the college).</p>
<p>All of these make heavy use of numerous undocumented APIs, which I have a lot of fun searching for. It’s satisfying to find a clean, reliable, and complete (choose two) data source without having to resort to scraping HTML pages.</p>
<p>In this post I’ll share, in no particular order, some tips for finding and using these APIs.</p>
<h2 id="search-github">Search GitHub</h2>
<p>In Brown’s case, many student and staff developers have published code publicly over the years that uses otherwise undocumented APIs. GitHub’s code search tool is a powerful way to look for potential endpoints. I used a regex pattern to look for JSON and XML URLs under Brown’s domain: <code>/brown\.edu\/\S*\.(json|xml)/</code>.</p>
<p>With those results, I discovered that Brown’s <a href="https://github.com/Brown-University-Library/vivo-on-rails?tab=readme-ov-file">researcher database</a> is not only open source, but follows the common Rails pattern of returning JSON data for any page ending in <code>.json</code>, such as <code>https://vivo.brown.edu/search.json?q=seth+rockman</code>. This could be very helpful for displaying information about professors in the course catalog I’m building.</p>
<p>There’s also a site called <a href="https://publicwww.com/">PublicWWW</a> which I find less helpful.</p>
<h2 id="look-out-for-fetch-requests">Look out for fetch requests</h2>
<p>Keep an eye out for parts of pages that load after the rest of the page or actions that don’t cause a full page refresh—these are signs of the use of <code>fetch</code> (or AJAX) requests to JSON APIs.</p>
<p>For example, the Brown history department’s <a href="https://history.brown.edu/undergraduate/courses">course catalog</a> stood out to me, and popping open the network monitor, it led me to the motherlode—a GraphQL endpoint.</p>
<p>This turned out to be the best source of course data I had found yet. Unfortunately, the server had disabled <a href="https://graphql.org/learn/introspection/">introspection</a> (which is where the GraphQL API will tell you its schema), but I was able to guess a few dozen fields. The error messages helpfully suggested fields I hadn’t known about by “correcting” my typos.</p>
<h2 id="wordpress-sites-come-with-free-apis">WordPress sites come with free APIs</h2>
<p>All WordPress sites come with <a href="https://developer.wordpress.org/rest-api/reference/">a built-in REST API</a> for accessing posts, pages, media, and more as JSON. Often, site administrators won’t disable many of the endpoints. I built a tool called <a href="https://wp-snooper.vercel.app/">WP_Snooper</a> that queries for uploaded media, since media on WordPress sites is public even if the posts using it aren’t.</p>
<h2 id="look-at-robotstxt-files">Look at <code>robots.txt</code> files</h2>
<p>If they don’t want the robots to see it, maybe you do.</p>
<h2 id="literally-just-google-it">Literally just Google it</h2>
<p>I was poking around the Salvation Army’s store locator, and just Googled the API endpoint. To my surprise, it turned up <a href="https://satruck.org/ApiServices/Pickup/Help">a page generated by ASP.NET</a> with all the available routes and their usage. If anyone wants data about the Wyoming legislature, <a href="https://web.wyoleg.gov/LsoService/Help">they’ve got one</a> too. You can find a bunch of them by searching for <code>allintitle:&#34;ASP.NET Web API Help Page&#34;</code>.</p>
<p>Another example of this is when I was investigating the Brown sociology department’s <a href="https://www.brown.edu/academics/sociology/courses">course catalog</a>. Their site stood out to me because it still uses an older design that most university sites have switched off of. While there were some <code>fetch</code> requests happening, they were only returning HTML. The interesting data was being loaded on the server. I Googled the endpoint I had, and lo and behold Google had cached a cURL error from the page! Unfortunately, Google was truncating the error message and I couldn’t make out the entire URL. With the Google cache gone, I just guessed bits and pieces of the URL until Google showed me all of it.</p>
<img src="https://jero.zone/_astro/google-result.2aOPQqLM_eo43u.webp" alt="" width="1220" height="358" loading="lazy" decoding="async"/>
<h2 id="just-guess">Just guess</h2>
<p><a href="https://eliothertenstein.com">Eliot</a> was looking for some course data from Stanford and enlisted my help. We found <a href="https://navigator.stanford.edu/classes/1252/3109">Stanford Navigator</a>, which appeared to be doing some asynchronous data loading, but it turned out to just be serialized React components from Next.js. So, not knowing if there even was a public-facing endpoint, I just guessed a URL: <code>https://navigator.stanford.edu/api/classes/1252/3109</code>. Easy.</p>
<h2 id="read-and-debug-javascript">Read and debug JavaScript</h2>
<p>An app’s JavaScript can help you find API endpoints and understand their schema and how they’re used. On many older sites, JavaScript is simply concatenated, not minified or mangled. Sometimes you’ll get super lucky and the developer hasn’t turned off source maps.</p>
<p>This was helpful when I was reverse-engineering <a href="https://brownshuttle.transloc.com/">the Brown University Shuttle’s tracker</a>. Reading the JavaScript, which was barely obfuscated, helped me understand the nuanced semantics of some aspects of the API.</p>
<h2 id="download-mobile-apps">Download mobile apps</h2>
<p>Mobile apps have no choice but to use HTTP APIs. You can easily download a lot of iOS apps through the Mac App Store, then run <code>strings</code> on their bundles to look for endpoints. You can also download Android apps as APKs from various mirrors and decompile them. This is how I found <a href="https://innosoftfusiongo.com/api/schools/295/occupancy-stats">an endpoint that returns the occupancy of Brown’s gym</a>, which I built a menu bar app for.</p>
<img src="https://jero.zone/_astro/menu-bar-app.BbSphluZ_2cjyPo.webp" alt="" width="1198" height="710" loading="lazy" decoding="async"/>

<p>Here are some tools that are useful for reverse-engineering APIs: <a href="https://crt.sh">crt.sh</a>, <a href="https://subdomainfinder.c99.nl/">C99.nl’s subomain finder</a>, <a href="https://wp-snooper.vercel.app/">WP_Snooper</a>, <a href="https://react.dev/learn/react-developer-tools">React Developer Tools</a>, <a href="https://devtools.vuejs.org/">Vue DevTools</a>, <a href="https://www.wappalyzer.com/">Wappalyzer</a>, <a href="https://builtwith.com/relationships/brown.edu">BuiltWith’s “relationships” tool</a>, <a href="https://publicwww.com/">PublicWWW</a>, <a href="https://docs.github.com/en/search-github/github-code-search/understanding-github-code-search-syntax">GitHub Code Search</a>, <a href="https://github.com/graphql/graphql-playground">GraphQL Playground</a>, <a href="https://curl.se/">cURL</a>, an API testing tool like Postman, <a href="https://proxyman.io/">Proxyman</a>, <a href="https://www.charlesproxy.com/">Charles</a>, <a href="https://github.com/insidegui/AssetCatalogTinkerer/">Asset Catalog Tinkerer</a>, and an APK decompiler.</p>
<p>Finally, while I hope these specific tips are useful, the most effective reverse-engineers are curious, deeply knowledgable about how web apps work, and follow their gut.</p> </article>  </article></div>
  </body>
</html>
