<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://brew.sh/2023/02/16/homebrew-4.0.0/">Original</a>
    <h1>Homebrew 4.0.0</h1>
    
    <div id="readability-page-1" class="page"><div>
    <p>Today, I’d like to announce Homebrew 4.0.0. The most significant change since 3.6.0 enables significantly faster Homebrew-maintained tap updates by migrating from Git-cloned taps to JSON downloads.</p>

<p>Major changes and deprecations since 3.6.0:</p>

<ul>
  <li>Using JSON files downloaded from <a href="https://formulae.brew.sh">formulae.brew.sh</a> for package installation rather than local homebrew/core and homebrew/cask taps.
    <ul>
      <li><strong>Please note: this is the largest change we have made to our update process since we split Homebrew/brew and Homebrew/homebrew-core repositories. Please bear with us, there may be a few bumps</strong>.</li>
      <li>If you had previously set <code>HOMEBREW_NO_AUTO_UPDATE</code>, <code>HOMEBREW_NO_INSTALL_FROM_API</code> or <code>HOMEBREW_AUTO_UPDATE_SECS</code> to work around bugs or annoyances: please consider unsetting these and tweaking the values based on the new behaviour.</li>
      <li>Unless you are developing formulae or casks, you can <code>brew untap homebrew/core</code> and <code>brew untap homebrew/cask</code> to save some space.</li>
      <li><a href="https://github.com/Homebrew/brew/pull/14376"><code>brew update</code> will now be run automatically less often (every 24 hours rather than every 5 minutes)</a> and these auto-updates will be much faster as they no longer need to perform the slow <code>git fetch</code> of the huge homebrew/core and homebrew/cask taps’ Git repositories.</li>
      <li><a href="https://github.com/Homebrew/brew/pull/14412">This is now the default behaviour so the <code>HOMEBREW_INSTALL_FROM_API</code> variable has been removed and is a no-op</a>.</li>
      <li>If you wish to opt-out of this behaviour change, you can <a href="https://github.com/Homebrew/brew/pull/14375"><code>export HOMEBREW_NO_INSTALL_FROM_API=1</code></a>. Please investigate <a href="https://github.com/Homebrew/brew/pull/14589"><code>HOMEBREW_API_AUTO_UPDATE_SECS</code></a> first.</li>
      <li>This behaviour is automatically disabled when using <a href="https://github.com/Homebrew/brew/pull/14524">certain commands</a> or in configurations that <a href="https://github.com/Homebrew/brew/pull/14480">mostly build from source</a>.</li>
      <li><a href="https://github.com/Homebrew/brew/pull/14494"><code>HOMEBREW_API_DOMAIN</code> can be set to use mirrors for</a> <a href="https://formulae.brew.sh">formulae.brew.sh</a>.</li>
    </ul>
  </li>
  <li>Homebrew’s analytics are now sent both to Google Analytics and our new, self-hosted InfluxDB instance hosted in the EU.
    <ul>
      <li>Our self-hosted InfluxDB instance does not store either anonymised IP addresses or an anonymised user token so it has additional privacy benefits over Google Analytics.</li>
      <li>If you had previously set <code>HOMEBREW_NO_ANALYTICS</code> because you didn’t like Google Analytics and/or data being sent to the USA: please consider unsetting this and setting <code>HOMEBREW_NO_GOOGLE_ANALYTICS</code> instead, allowing analytics data to be sent to our new InfluxDB host.</li>
      <li>We expect to migrate entirely from Google Analytics to our self-hosted InfluxDB instance in ~90 days at which point we will remove all Google Analytics and destroy all existing data.</li>
    </ul>
  </li>
  <li><a href="https://github.com/Homebrew/brew/pull/14265">macOS <code>.pkg</code> files are generated for each Homebrew release</a>. You can help us test this beta feature by <a href="https://github.com/Homebrew/brew/actions/workflows/build-pkg.yml?query=event%3Arelease">downloading the generated package artifact from the relevant GitHub Actions release events</a>.</li>
  <li><a href="https://github.com/Homebrew/brew/pull/13819">The <code>homebrew/ubuntu16.04:master</code> image has been deprecated</a>.</li>
  <li><a href="https://github.com/Homebrew/brew/pull/14382">Various major release deprecations and disables</a>.</li>
</ul>

<p>Other changes since 3.6.0 I’d like to highlight are the following:</p>

<ul>
  <li><a href="https://github.com/Homebrew/brew/pull/14338"><code>brew test</code> sets <code>PYTHONDONTWRITEBYTECODE</code> to improve performance</a>.</li>
  <li><a href="https://github.com/Homebrew/brew/pull/14027">VSCode devcontainers are available in the Homebrew/brew repository for use with e.g. GitHub Codespaces</a>.</li>
  <li><a href="https://github.com/Homebrew/brew/pull/14033"><code>brew install --adopt</code> allows taking ownership of existing installed cask artifacts</a>.</li>
  <li><a href="https://github.com/Homebrew/brew/pull/13706"><code>brew install --dry-run</code> allows viewing what <code>brew install</code> will do before it is run</a>.</li>
  <li><a href="https://github.com/Homebrew/brew/pull/13844"><code>brew docs</code> opens</a> <a href="https://docs.brew.sh">docs.brew.sh</a>.</li>
  <li><a href="https://github.com/Homebrew/brew/pull/14206"><code>--cask</code> is never required on Linux</a>.</li>
  <li><a href="https://github.com/Homebrew/brew/pull/14371"><code>service do</code> blocks allow defining a <code>run</code> command per platform</a>.</li>
  <li><a href="https://github.com/Homebrew/brew/pull/14239"><code>brew install</code> uses the local cache while installing dependencies from <code>pip</code></a>.</li>
  <li><a href="https://github.com/Homebrew/brew/pull/14300"><code>brew doctor</code> no longer complains about BitDefender</a>.</li>
  <li><a href="https://github.com/Homebrew/brew/pull/14240"><code>brew install</code> will also suggest casks rather than just formulae when it fails to find the requested package</a>.</li>
  <li><a href="https://github.com/Homebrew/brew/pull/13990"><code>brew readall</code> simulates all architecture and OS configurations for better reliability</a>.</li>
  <li><a href="https://github.com/Homebrew/brew/pull/14035"><code>git</code> partial clones with sparse checkouts are supported when downloading using <code>git</code></a>.</li>
  <li><a href="https://github.com/Homebrew/brew/pull/13882">GCC 12 is used for runtime libraries to match Ubuntu 22.04, where we build our bottles</a>.</li>
  <li><a href="https://github.com/Homebrew/brew/pull/14515"><code>brew doctor --quiet</code> prints no output on success</a>.</li>
  <li><a href="https://github.com/Homebrew/brew/pull/14523"><code>brew gist-logs</code> better detects missing permissions</a>.</li>
  <li><a href="https://github.com/Homebrew/brew/pull/14349"><code>brew update</code> uses the GitHub API token if available to avoid hitting rate limits</a>.</li>
  <li><a href="https://github.com/Homebrew/brew/pull/14000">We have discontinued WSL 1 support and recommend WSL 2 instead</a>.</li>
  <li><a href="https://github.com/Homebrew/brew/pull/13875"><code>brew fetch</code> and <code>brew install</code> can automatically determine mirrors for <code>glibc-bootstrap</code> and PyPI resources</a>.</li>
</ul>

<p>Finally:</p>

<ul>
  <li>Homebrew is now on Mastodon: <a href="https://fosstodon.org/@homebrew">@homebrew@fosstodon.org</a>.</li>
  <li><a href="https://github.com/Homebrew/brew/pull/14482">Our governance documents have been updated as part of our AGM</a>.</li>
  <li><a href="https://github.com/Homebrew/brew/pull/14132">We have switched from HackerOne</a> to <a href="https://github.com/homebrew/brew/security/advisories/new">GitHub for vulnerability reporting</a>.</li>
  <li><a href="https://github.com/sponsors/Homebrew">Homebrew accepts donations through GitHub Sponsors</a> and <a href="https://www.patreon.com/homebrew">still accepts donations through Patreon</a>. If you can afford it, please consider donating. If you’d rather not use GitHub Sponsors or Patreon (our preferred donation methods), <a href="https://github.com/homebrew/brew/#donations">check out the other ways to donate in our README</a>.</li>
  <li>Homebrew had our first stand at FOSDEM 2023 in which the Project Leader was forced to wear a stupid beer suit.</li>
</ul>

<p><img src="https://brew.sh/assets/img/blog/fosdem_2023.jpg" alt="FOSDEM 2023"/></p>

<p>Thanks to all our hard-working maintainers, contributors, sponsors and supporters for getting us this far.</p>


    

    
</div></div>
  </body>
</html>
