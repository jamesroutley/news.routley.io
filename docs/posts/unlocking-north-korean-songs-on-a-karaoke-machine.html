<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.northkoreatech.org/2020/06/02/unlocking-north-korean-songs-on-a-karaoke-machine/">Original</a>
    <h1>Unlocking North Korean songs on a karaoke machine</h1>
    
    <div id="readability-page-1" class="page"><p><img width="640" height="437" src="https://www.northkoreatech.org/wp-content/uploads/2020/06/vlcsnap-2020-06-01-11h56m25s511-640x437.jpg" alt="" decoding="async"/><span>Common North Korean convention is to highlight the name of Kim Jong Un in media (Photo: North Korea Tech)</span>
</p><div>
		

<p><span>Karaoke is a uniting past time for North and South Korea, with </span><i><span>noraebang</span></i><span> commonly available throughout Pyongyang, and Video CDs long a ubiquitous commodity. It comes as little surprise then, that karaoke machines have made their way to Pyongyang.</span></p>
<p><span>In this post, I take a look at the Tianchi v700, a Chinese karaoke machine that has been localized for the North Korean market. The hardware was listed online at the end of 2018, and purchased from a seller in Dandong, China in February, 2020.</span></p>
<p><span>From a quick look at the menu, it’s obvious that some effort has been spent crafting this media experience for a North Korean audience. The Tianchi v700 is a reasonable data point of the experience once could expect at a KTV room in Pyongyang.</span></p>
<div id="attachment_10594"><p><img aria-describedby="caption-attachment-10594" decoding="async" loading="lazy" src="https://www.northkoreatech.org/wp-content/uploads/2020/06/device-570x378.jpg" alt="" width="570" height="378" srcset="https://www.northkoreatech.org/wp-content/uploads/2020/06/device-570x378.jpg 570w, https://www.northkoreatech.org/wp-content/uploads/2020/06/device-200x133.jpg 200w, https://www.northkoreatech.org/wp-content/uploads/2020/06/device-768x510.jpg 768w, https://www.northkoreatech.org/wp-content/uploads/2020/06/device.jpg 800w" sizes="(max-width: 570px) 100vw, 570px"/></p><p id="caption-attachment-10594">The Tianchi v700 (Photo: Will Scott)</p></div>
<p><strong>A window into a different world</strong></p>
<p><span>The Tianchi v700 blurs the distinction between devices meant for Chinese and Korean audiences much more than android phones and tablets, which are also manufactured by Chinese OEMs for a Korean audience. The device is meant to be used in a commercial KTV setting, where it would be hooked up to a large TV, speaker system, and microphone input. It features a large 19″ touch screen, running a kiosk version of Android, and comes in discrete, unbranded packaging with a range of both Chinese and North Korean karaoke songs preloaded.</span></p>
<div id="attachment_10593"><p><img aria-describedby="caption-attachment-10593" decoding="async" loading="lazy" src="https://www.northkoreatech.org/wp-content/uploads/2020/06/box-570x428.jpg" alt="" width="570" height="428" srcset="https://www.northkoreatech.org/wp-content/uploads/2020/06/box-570x428.jpg 570w, https://www.northkoreatech.org/wp-content/uploads/2020/06/box-200x150.jpg 200w, https://www.northkoreatech.org/wp-content/uploads/2020/06/box-768x576.jpg 768w, https://www.northkoreatech.org/wp-content/uploads/2020/06/box-1536x1152.jpg 1536w, https://www.northkoreatech.org/wp-content/uploads/2020/06/box-2048x1536.jpg 2048w" sizes="(max-width: 570px) 100vw, 570px"/></p><p id="caption-attachment-10593">The Tianchi v700 (Photo: Will Scott)</p></div>
<p><span>The North Korean affiliation of the device is not in doubt. The first image shown while the device starts up is the Arch of Triumph in Pyongyang, and upon booting a Moranbong Band concert loops on the TV while the device waits for a song to be chosen. Dissonance begins to set in upon exploring the rest of the software.</span></p>
<p><span>The V700 could be at home in a Chinese KTV room, with software that is fully “online” — recordings of performed songs can be uploaded to the vendor’s cloud, new songs (all Chinese) can be downloaded to the machine, and WeChat integration allows modifying the queue from a smartphone.</span></p>
<p><span>It supports both Wifi and wired Ethernet to provide these features. A WeChat payment structure also allows a central controller to dole out timed sessions with the machine to paying customers.</span></p>
<p><span>How would any of this work in the offline world of Pyongyang?</span></p>
<p><span>The Karaoke content also doesn’t provide immediate answers to the origins of the device. Some videos feature the “Hana 하나” watermark, while others are labeled with the competing “Mokran 목란” brand. Many others are titled, generically, “7.27”.</span></p>
<div id="attachment_10595"><p><img aria-describedby="caption-attachment-10595" decoding="async" loading="lazy" src="https://www.northkoreatech.org/wp-content/uploads/2020/06/vlcsnap-2020-06-01-11h55m33s109-570x428.jpg" alt="" width="570" height="428" srcset="https://www.northkoreatech.org/wp-content/uploads/2020/06/vlcsnap-2020-06-01-11h55m33s109-570x428.jpg 570w, https://www.northkoreatech.org/wp-content/uploads/2020/06/vlcsnap-2020-06-01-11h55m33s109-200x150.jpg 200w, https://www.northkoreatech.org/wp-content/uploads/2020/06/vlcsnap-2020-06-01-11h55m33s109.jpg 640w" sizes="(max-width: 570px) 100vw, 570px"/></p><p id="caption-attachment-10595">The Mokran Video logo before one collection of songs (Photo: North Korea Tech)</p></div>
<p><span>While many of the flashy features make use of the internet, the device functions perfectly well offline, and with hundreds of pages of preloaded karaoke, would be of immediate value within Pyongyang, even without those features.</span></p>
<p><strong>Under the plastic veneer</strong></p>
<p><span>As a commercial device used in group settings, the V700 has a very different threat model from the personal devices that have become ubiquitous around Pyongyang in recent years.</span></p>
<p><span>Powered by an Allwinner ARM processor, the song data is on an easily swappable (one screw holds a flap in place to remove) full sized hard drive labeled “North Korean Songs” in Chinese.</span></p>
<p><span>If that was all there was to it though, you wouldn’t be reading this article.</span></p>
<p><span>While the Chinese songs on the hard drive can be played on any computer they are connected to, the 42 gigabytes of North Korean media is encrypted, and the files cannot be opened on other devices.</span></p>
<p><span>The device itself has a file manager and open USB ports. It allows customers to plug in their own USB sticks to sing songs off, and to save their recordings to. It also allows installation of other Android applications and copying of arbitrary user-accessible files to a USB stick, which makes access to the device very easy.</span></p>
<p><span>Most of the system software is a generic Chinese KTV system. The main question in my mind while investigating and figuring out how to decode the protected content was where the custody line was between Chinese and North Korean.</span></p>
<p><span>Had a North Korean client provided a package of content to be included with a stipulation that it should be protected, or had the software itself been customized by North Korean programmers like the smartphones and tablets in Pyongyang? Were there clues to the North Korean entity behind this device?</span></p>
<p><span>The full user experience of the karaoke device is implemented within a single monolithic Android application that itself references a host of system libraries for interacting with playing the karaoke through the external HDMI video connection.</span></p>
<p><span>Some of these libraries immediately caught my eye as “out of place” — an extremely small “libscmediafiledecrypt.so” reports a log message labeling itself “libktv” every time an encrypted file is accessed, and provides a way for files to be encrypted by the Android serial number of the device.</span></p>
<p><img decoding="async" loading="lazy" src="https://www.northkoreatech.org/wp-content/uploads/2020/06/ghidra-570x324.png" alt="" width="570" height="324" srcset="https://www.northkoreatech.org/wp-content/uploads/2020/06/ghidra-570x324.png 570w, https://www.northkoreatech.org/wp-content/uploads/2020/06/ghidra-200x114.png 200w, https://www.northkoreatech.org/wp-content/uploads/2020/06/ghidra-768x436.png 768w, https://www.northkoreatech.org/wp-content/uploads/2020/06/ghidra-1536x873.png 1536w, https://www.northkoreatech.org/wp-content/uploads/2020/06/ghidra-2048x1164.png 2048w, https://www.northkoreatech.org/wp-content/uploads/2020/06/ghidra-180x101.png 180w, https://www.northkoreatech.org/wp-content/uploads/2020/06/ghidra-120x67.png 120w" sizes="(max-width: 570px) 100vw, 570px"/></p>
<p><span>After further investigation it turns out this library is not actually performing any encryption or decryption. A second library, “libsclib.so” exports a function “ScEncrypt_getPicEncryptKey” as part of a separate file encryption system. This library, while also not performing file decryption of files at runtime, perhaps holds a clue of attribution, as the other uses of “sclib” and of the “PIC” identifier can be traced to the Pyongyang Informatics Center.</span></p>
<p><span>Deeper investigation of the DRM (digital rights management) present on the device yields that it is in fact a modified version of the Allwinner CedarX media framework that is performing the file decryption.</span></p>
<p><span>While the relevant “libcdx_stream” library is not open source, its source has been uploaded in the context of several other Chinese Android development source trees. The binary present on the v700 features a substantially different encryption method than is visible in the version provided by Allwinner.</span></p>
<p><span>The core library uses a fixed encryption key that would be compiled into the binary. The V700 consults both “/proc/cpuinfo” to learn the CPU serial number of the device it is on, and a binary file associated with the device file system structure as part of its method for determining its AES (Advanced Encryption Standard) key. It then ignores all of these device-specific items, and reverts back to a static key “87654321” stored in the binary.</span></p>
<p><span>The obfuscation and complexity involved is not found in a standard cedar release, and indicates coding work downstream from the allwinner distribution.</span></p>
<div id="attachment_10596"><p><img aria-describedby="caption-attachment-10596" decoding="async" loading="lazy" src="https://www.northkoreatech.org/wp-content/uploads/2020/06/vlcsnap-2020-06-01-11h56m25s511-570x428.jpg" alt="" width="570" height="428" srcset="https://www.northkoreatech.org/wp-content/uploads/2020/06/vlcsnap-2020-06-01-11h56m25s511-570x428.jpg 570w, https://www.northkoreatech.org/wp-content/uploads/2020/06/vlcsnap-2020-06-01-11h56m25s511-200x150.jpg 200w, https://www.northkoreatech.org/wp-content/uploads/2020/06/vlcsnap-2020-06-01-11h56m25s511.jpg 640w" sizes="(max-width: 570px) 100vw, 570px"/></p><p id="caption-attachment-10596">Common North Korean convention is to highlight the name of Kim Jong Un in media (Photo: North Korea Tech)</p></div>
<p><strong>The goods</strong></p>
<p><span>The 42 gigabytes of North Korean Karaoke packaged on the V700 have been made available in a decoded form at </span><a href="https://archive.org/details/tianchi-v700-ktv"><span>https://archive.org/details/tianchi-v700-ktv</span></a><span> , and are being graciously hosted by the Internet Archive for archival purposes.</span></p>
<p><span>Some highlights from the collection include</span></p>
<p><a href="https://archive.org/details/tianchi-v700-ktv-92136"><span>https://archive.org/details/tianchi-v700-ktv-92136</span></a><span> – the canonical pangapsumnida song</span></p>
<p><a href="https://archive.org/details/tianchi-v700-ktv-92010"><span>https://archive.org/details/tianchi-v700-ktv-92010</span></a><span> – arirang</span></p>
<p><a href="https://archive.org/details/tianchi-v700-ktv-940280"><span>https://archive.org/details/tianchi-v700-ktv-940280</span></a><span> – the CNC song 🙂</span></p>
<p><a href="https://archive.org/details/tianchi-v700-ktv-91599"><span>https://archive.org/details/tianchi-v700-ktv-91599</span></a><span> – KCC logo appears on many songs</span></p>
<p><a href="https://archive.org/details/tianchi-v700-ktv-940258"><span>https://archive.org/details/tianchi-v700-ktv-940258</span></a><span> – tech progress</span></p>
<p><a href="https://archive.org/details/tianchi-v700-ktv-92305"><span>https://archive.org/details/tianchi-v700-ktv-92305</span></a><span> – tongil (unity), a woman driving through the tongil district and then visiting the unification monument on the southern highway</span></p>
<p><a href="https://archive.org/details/tianchi-v700-ktv-92176"><span>https://archive.org/details/tianchi-v700-ktv-92176</span></a><span> – summer water skiing</span></p>
<p><a href="https://archive.org/details/tianchi-v700-ktv-960233"><span>https://archive.org/details/tianchi-v700-ktv-960233</span></a><span> – kimchi song</span></p>
<p><a href="https://archive.org/details/tianchi-v700-ktv-990001"><span>https://archive.org/details/tianchi-v700-ktv-990001</span></a><span> – the one chinese song that was in the collection</span></p>
<p><a href="https://archive.org/details/tianchi-v700-ktv-960071"><span>https://archive.org/details/tianchi-v700-ktv-960071</span></a><span> – this VCD wasn’t properly split when it was put on the device – it actually is 10 or so songs in a row. (one of the higher quality sets as well)</span></p>
<p><span>The background Morangbong band concert is also there: </span><a href="https://archive.org/details/tianchi-v700-ktv-970013"><span>https://archive.org/details/tianchi-v700-ktv-970013</span></a></p>
	</div></div>
  </body>
</html>
