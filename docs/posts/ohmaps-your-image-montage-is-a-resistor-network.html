<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://hunsley.io/posts/2024/image-montage-is-resistor-network/">Original</a>
    <h1>Ohmaps: your image montage is a resistor network</h1>
    
    <div id="readability-page-1" class="page"><div><p><em>Occasionally there’s a lovely moment when I’m working on a problem and I realise I’m also looking at some other thing that seems completely unrelated. It’s like a metaphor made flesh.</em></p><p><em>These ‘<a href="https://en.wikipedia.org/wiki/Isomorphism">isomorphism</a> moments’ can be powerful because the two seemingly unrelated things can give you insights into each other. Their commonality encourages you think about the essential thread running through them both.</em></p><p><em>This post details one of these moments I had recently.</em></p><hr/><p>I was playing with ways to make a collection of images into a montage, allowing for scaling of images so they can join together nicely (as long as we preserve aspect ratios — no-one likes squishy images of their cat).</p><p>So image size becomes irrelevant and we’re thinking in terms of aspect ratios.</p><p>Reminder: aspect ratio is typically defined as \(a = w / h\), the width divided by the height.</p><p>One simple scheme is to allow two images<sup id="fnref:1"><a href="#fn:1" role="doc-noteref">1</a></sup> to be combined horizontally or vertically, resizing the second one to fit the width or height the first (‘edge-fitting’):</p><p><img src="https://hunsley.io/image-montage-is-resistor-network/grow_or_shrink_to_fit.png" alt="Description of Image" title=""/></p><p>If you do some jottings around the aspect ratio equations you’ll find the following equations for joining an arbitrary amount of aspect ratios all together in the same horizontal/vertical way:</p><p>$$
\begin{aligned}
a_{h} &amp;= a_0 + a_1 + \dots + a_n \\
\\
a_{v} &amp;= \frac{1}{\frac{1}{a_0} + \frac{1}{a_1} + \dots \frac{1}{a_n}}
\end{aligned}
$$</p><p>If you know some simple electronics, you might be seeing something familiar in these equations.</p><p>Compare the previous equations to these for simple resistor networks in series and parallel:</p><p>$$
\begin{aligned}
R_{series} &amp;= R_0 + R_1 + \dots + R_n \\
\\
R_{parallel} &amp;= \frac{1}{\frac{1}{R_0} + \frac{1}{R_1} + \dots \frac{1}{R_n}}
\end{aligned}
$$</p><p>Oho! The same equations. What’s going on here? Is it a ‘coincidence’?</p><p>As some great person probably once said, “There are no coincidences in mathematics.”<sup id="fnref:2"><a href="#fn:2" role="doc-noteref">2</a></sup></p><p>So these two seemingly unrelated worlds have this fundamental connection. That means we might carry information and ideas via this ethereal portal.</p><p>We don’t have to look very far to find this other fundamental parallel:</p><div><table><thead><tr><th>Aspect ratio</th><th>     Resistance</th></tr></thead><tbody><tr><td>$$ a = \frac{w}{h} $$</td><td>$$ \quad \text{R} = \frac{\text{V}}{\text{I}} $$</td></tr></tbody></table></div><p>So is there some spatial counterpart to voltage and current? No. But there’s something analogous going on when we do edge-fitting of scaled images – it’s that dimension-fitting that is key.</p><p>… and electricity doesn’t like gaps in its ledger book.</p><p>Consider a connected circuit with flowing current.</p><p>At every point, the current going in and out is fully balanced (sums to zero). This is <a href="https://en.wikipedia.org/wiki/Kirchhoff%27s_circuit_laws#Kirchhoff&#39;s_current_law">Kirchhoff’s current law</a> (KCL).</p><p>For every loop in the circuit, the sum of the voltages is fully balanced (sums to zero). This is <a href="https://en.wikipedia.org/wiki/Kirchhoff%27s_circuit_laws#Kirchhoff&#39;s_voltage_law">Kirchhoff’s voltage law</a> (KVL).</p><p>And it all begins to make sense.</p><p>Consider some resistor with value \(\text{R}_0\) and draw it on page as a rectangle of aspect \(\text{R}_0\). The width, height of the rectangle are proportional to possible pairs of voltage, current that would be present if connected in a circuit<sup id="fnref:3"><a href="#fn:3" role="doc-noteref">3</a></sup>.</p><p>If you scale and horizontally edge-wise join another rectangle for a resistor \(\text{R}_1\) (which has appropriate aspect ratio for its value), you’re effectively joining them in series. The growing or shrinking of the rect for \(\text{R}_1\) in order to join it to \(\text{R}_0\) is preserving the dimension at the vertical edge, which is current in this scheme (and in this way KCL is observed).</p><p>Note that the act of growing or shrinking the rectangle for \(\text{R}_1\) also affects the voltage (width), which is correct in the electricity world; the ratio for resistance is maintained this way.</p><p>Likewise, if you vertically edge-wise join two rectangles representing resistors, it’s a similar accounting; but the horizontal dimension is preserved this time, which corresponds to voltage (and in this way KVL is observed). This is effectively joining them in parallel.</p><p>This edge-joining scheme to join resistors in series and parallel composes perfectly to any level. So you can keep on joining rectangles to rectangles (resistors to resistors), edge-wise in either dimension, to build up a picture of resistor networks with series and parallel networks nested.</p><p>I’m nicknaming this resistor-network-as-rectangles picture an <em>ohmap</em>, as in ‘ohm-map’<sup id="fnref:4"><a href="#fn:4" role="doc-noteref">4</a></sup>.</p><p><img src="https://hunsley.io/image-montage-is-resistor-network/series_parallel_combined_networks.png" alt="Description of Image" title=""/></p><p>Note that you build your network from the bottom-up, since you need to know the aspect ratio (resistance) of sub-networks at the point you join them to other resistors or networks.</p><p>The aspect ratio being the resistance applies to rectangles on the page at any level: from the rectangle encompassing the entire network down to single rectangles.</p><p>So if we have voltage and current being the two dimensions of the rectangles there’s another cute correspondence:</p><div><table><thead><tr><th>Area</th><th>     Power</th></tr></thead><tbody><tr><td>$$ \text{A} = wh $$</td><td>$$ \quad \text{P} = \text{V}\text{I} $$</td></tr></tbody></table></div><p>An unconnected resistor network doesn’t have any current flowing, hence no power, but we can still consider the relative power dissipation<sup id="fnref:5"><a href="#fn:5" role="doc-noteref">5</a></sup> in resistor networks. We could make a power dissipation heat map by colouring our rectangles more red according their area percentage of the entire network’s area:</p><p><img src="https://hunsley.io/image-montage-is-resistor-network/power_dissipation_heat_map.png" alt="Description of Image" title=""/></p><p>So what is the nucleus here? What mechanism unites image montages and electrical resistance in this way?</p><p>I’d say it’s <em>dimension-preserving ratio joining</em>. Any subject matter where you are composing ratios while matching one of the dimensions will be described by those equations.</p><p>The exact reason for the ‘dimension preserving’ doesn’t matter. In images, it’s down to <em>aesthetics and practicality</em>; in electrical resistance, it’s about Kirchhoff’s laws, which ultimately is the principle of <em>conservation of energy</em>.</p><p>On a final note, let’s just meditate on the fact that Piet Mondrian’s artworks all have an associated resistor network.</p><p><img src="https://hunsley.io/image-montage-is-resistor-network/mondrian_1935.jpg" alt="Description of Image" title=""/></p><p><img src="https://hunsley.io/image-montage-is-resistor-network/mondrian_resistor_network.jpg" alt="Description of Image" title=""/></p><div><p><em>(Kilovolts used for X scaling so the resistor values are more realistic)</em></p></div><p>Thanks go to <a href="https://ian.stark.scot">Ian Stark</a> who I bounced this idea off; he pointed me at the least squares fitting problem, which has some past approaches that are linked to this subject.</p><p><em>Continued in <a href="https://hunsley.io/posts/2024/image-montage-is-resistor-network-pt-2/">part 2</a></em></p><ul></ul></div></div>
  </body>
</html>
