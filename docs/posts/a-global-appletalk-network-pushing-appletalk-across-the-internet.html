<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://biosrhythm.com/?p=2767">Original</a>
    <h1>A Global AppleTalk Network: Pushing AppleTalk Across the Internet</h1>
    
    <div id="readability-page-1" class="page"><div>
		
<p>Seasoned Apple Macintosh pros have likely experienced the joy (and sadness) of using a large AppleTalk network. You know, the kind where the Chooser suddenly shows a <strong>Zone</strong> menu at the bottom left where there used to be none? When you first see it, it’s a shock– like you’ve suddenly unlocked a secret power up that your Mac has had all along.</p>



<figure><img loading="lazy" width="840" height="580" src="https://biosrhythm.com/wp-content/uploads/2024/03/zones-840x580.png" alt="" srcset="https://biosrhythm.com/wp-content/uploads/2024/03/zones-840x580.png 840w, https://biosrhythm.com/wp-content/uploads/2024/03/zones-300x207.png 300w, https://biosrhythm.com/wp-content/uploads/2024/03/zones-768x530.png 768w, https://biosrhythm.com/wp-content/uploads/2024/03/zones.png 968w" sizes="(max-width: 840px) 100vw, 840px"/></figure>



<p>The Zone menu shows when there’s an AppleTalk Router on your network. If you have just a couple of Macs linked together over LocalTalk cabling or Ethernet, you’ve likely not seen it. It’s how AppleTalk segments networks into smaller chunks. I’m by no means an AppleTalk network expert and there are likely others that know much more than me. I know just enough to be dangerous.</p>



<p>Fast forward to <a rel="noreferrer noopener" href="https://www.marchintosh.com/" target="_blank">#MARCHintosh</a>, the yearly event that celebrates the classic Macintosh, and <a href="https://bitbang.social/@billgoats" target="_blank" rel="noreferrer noopener">Dan ???? </a><a href="https://emojipedia.org/floppy-disk"></a>on Mastodon mentions the idea of using some software to print to someone else’s remote ImageWriter II, in their home, over the network. I immediately volunteered as tribute and we began trying various things. We first tried using an <a rel="noreferrer noopener" href="https://github.com/AceHusky12/atalkvpn" target="_blank">AppleTalk VPN</a> but couldn’t get it to compile. Maybe you can?</p>



<p>Next, we have Apple’s own <a rel="noreferrer noopener" href="https://macintoshgarden.org/apps/apple-internet-router" target="_blank">Apple Internet Router 3.0 (AIR)</a> from 1993 a try. It can bridge LocalTalk and EtherTalk on your local network (which is handy all by itself) plus, with the appropriate extension, tunnel it over IP to another machine running the same.</p>



<h2>Prepare your Mac</h2>



<p>Here’s the steps we used to create a working AIR installation. We are using LC form factor machines with Ethernet cards installed in the PDS slot. Other machines may also work but have not been tried. H/t to Dan <a href="https://emojipedia.org/floppy-disk">????</a> for figuring out the order of operations!</p>



<ol><li>Start with a fresh install of <a rel="noreferrer noopener" href="https://macintoshgarden.org/apps/macintosh-os-71x" target="_blank">System 7.1</a>.</li><li>Install <a rel="noreferrer noopener" href="https://macintoshgarden.org/apps/macintosh-os-71x" target="_blank">System Update 3.0</a>.</li><li>Install <a rel="noreferrer noopener" href="https://macintoshgarden.org/apps/apple-internet-router" target="_blank">Apple Internet Router 3.0.</a></li><li>Install <a href="https://www.macintoshrepository.org/9753-apple-internet-router-3-0-1">Router IP extension</a>.</li><li>Install <a rel="noreferrer noopener" href="https://macintoshgarden.org/apps/network-software-installer-version-11" target="_blank">Network Software Installer 1.4.5</a>.</li></ol>



<h2>Configure your Mac</h2>



<p>Let’s configure your Mac.</p>



<ol><li>Open the Sharing Setup Control Panel. Turn on File Sharing if you want to share your computer’s files with others. Turn on Program Linking if you want to use applications like HyperCard across networks.</li><li>If you want to allow Guests to your machine, open Users &amp; Groups, double click on Guest and select the permissions you wish. Close and save.</li><li>Open the MacTCP Control Panel. Set your Mac to a static IP address on your network. Make sure the router and subnet mask are set correctly. Close the window to save.</li><li>Open the Network Control Panel. Make sure “Ethernet” is selected (not EtherTalk!). Close the window to save.</li></ol>



<h2>Configure Apple Internet Router</h2>



<p>Next, start the Router Manager (part of Apple Internet Router). Follow these steps to configure the router:</p>



<ol><li>Double click on EtherTalk under Ethernet (Slot 6). Set Port status: <strong>Active</strong>, Port: <strong>Seed</strong>, Network Range: <strong>X-Y</strong>, Add a new Zone Name (can be anything), click add. Click Define.</li><li>Double click IP Tunnel: Port status: <strong>Active</strong>, Host ID: (insert the IP address of the remote Apple Internet Router hosts.)</li><li>If you have a LocalTalk network, connect it to your Printer Port. Double click Printer Port LocalTalk. Set Port status: <strong>Active</strong>, Port: <strong>Seed</strong>, Network Number: <strong>x</strong>, Enter a new Zone name, click Define.</li><li>You should not configure the Ethernet/EtherTalk option as this is likely the BlueSCSI DaynaPORT emulation. I’ve yet to get this to work.</li><li>Save your Router document to your drive and give it a name. Next, choose the Control menu and select Set Startup. Chose the document you just saved.</li></ol>



<figure><img loading="lazy" width="563" height="334" src="https://biosrhythm.com/wp-content/uploads/2024/03/Picture-1.png" alt="" srcset="https://biosrhythm.com/wp-content/uploads/2024/03/Picture-1.png 563w, https://biosrhythm.com/wp-content/uploads/2024/03/Picture-1-300x178.png 300w" sizes="(max-width: 563px) 100vw, 563px"/></figure>



<h2>Configure your network</h2>



<p>Next, if your Internet connection is behind a NAT, you need to map a port on your home/work Internet router to allow the other folks using AIR to route traffic to you. They’ll also do the same on their router. <strong>Map UDP 387 outside to UDP port 387 inside to the IP address of your Mac running AIR.</strong></p>



<p>If you’re unlucky and are behind carrier grade NAT (CGNAT), there’s still hope! We tried a Oracle Cloud VPN instance and then TailScale VPN service but were all unsuccessful in the correct incantation to make it work. I then wrote a Python script that allows one behind a CGNAT to connect to someone that has port mapping ability to tunnel the UDP data over a single TCP connection. I’ll be releasing this shortly.</p>



<h2>Start it up</h2>



<p>Finally, in the Router Manager, start the router by choosing <strong>Control menu -&gt; Start</strong>, save the doc, it should start up! You can monitor the network by choosing <strong>Windows -&gt; Network Information.</strong> If you have other devices on your LocalTalk or EtherTalk network, they will be re-assigned new network numbers by your router.</p>



<p>Open the Chooser and you should now see additional Zones (your own and anyone else you’ve connected with). Note: the Chooser will refresh the zone list periodically. To force a refresh, close and reopen.</p>



<h2>Connect all the things</h2>



<figure><img loading="lazy" width="840" height="630" src="https://biosrhythm.com/wp-content/uploads/2024/03/IMG_1039-840x630.jpg" alt="" srcset="https://biosrhythm.com/wp-content/uploads/2024/03/IMG_1039-840x630.jpg 840w, https://biosrhythm.com/wp-content/uploads/2024/03/IMG_1039-300x225.jpg 300w, https://biosrhythm.com/wp-content/uploads/2024/03/IMG_1039-768x576.jpg 768w, https://biosrhythm.com/wp-content/uploads/2024/03/IMG_1039-1536x1152.jpg 1536w, https://biosrhythm.com/wp-content/uploads/2024/03/IMG_1039-2048x1536.jpg 2048w" sizes="(max-width: 840px) 100vw, 840px"/></figure>



<p>If you have an ImageWriter II with a LocalTalk card, connect it to your LocalTalk network.</p>



<p>If you have a EtherTalk capable HP printer, connect it to your Ethernet network.</p>



<p>If you have other Macs on your network, turn then on and enable File Sharing if you want to share with others.</p>



<p>Print to other folk’s printers! Share files over AppleShare!</p>



<p>But most importantly, have fun!</p>



<h2>Joining the #GlobalTalk network</h2>



<p>I’ve created a Google Sheet to track everyone who is participating in the #GlobalTalk network experiment. To keep information private and to limited view, I’m adding people as editors to the document. Please <a href="https://mastodon.social/@paulrickards" target="_blank" rel="noreferrer noopener">contact me via PM on Mastodon</a> with your wishes to join and your email address.</p>



<p>I’ll be updating this document with more information soon.</p>








			</div></div>
  </body>
</html>
