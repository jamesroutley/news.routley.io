<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://matt.sh/htmx-is-a-erlang">Original</a>
    <h1>Htmx Is a Erlang</h1>
    
    <div id="readability-page-1" class="page"><div>
    
<p>htmx, a disciple of <a href="https://www.amazon.com/Hypermedia-Systems-Carson-Gross/dp/B0C9S88QV6"><strong>hypermedia</strong>, available only in hardcover do not look for alternatives</a>, has been manifesting itself into existence recently (<em>recently: after 10 years of work</em><a href="#_fn1" id="_fnref1"><sup>1</sup></a>) and has finally reached critical mass<a href="#_fn2" id="_fnref2"><sup>2</sup></a>.</p>
<p>let‚Äôs look into it.</p>
<h2 id="_universal-server">universal server</h2>
<p>joe always said his favorite erlang program was <a href="https://joearms.github.io/#2013-11-21%20My%20favorite%20Erlang%20Program"><em>the universal server</em></a>: a process capable of receiving a message to become another server.</p>
<h3 id="_universal-server-pattern">universal server pattern</h3>
<div id="_cb1"><pre><code><a id="cb1-1" data-line-number="1"><span>-module</span><span>(</span><span>total_server</span><span>).</span></a>
<a id="cb1-2" data-line-number="2"><span>-export</span><span>([</span><span>test</span><span>/</span><span>0</span><span>]).</span></a>
<a id="cb1-3" data-line-number="3"></a>
<a id="cb1-4" data-line-number="4"><span>universal_server()</span> <span>-&gt;</span></a>
<a id="cb1-5" data-line-number="5">    <span>receive</span></a>
<a id="cb1-6" data-line-number="6">       <span>{</span><span>become</span><span>,</span> <span>F</span><span>}</span> <span>-&gt;</span></a>
<a id="cb1-7" data-line-number="7">           <span>% &#39;F&#39; is a serialized function which now _becomes_ this process&#39;s code.</span></a>
<a id="cb1-8" data-line-number="8">           <span>F</span><span>()</span></a>
<a id="cb1-9" data-line-number="9">    <span>end</span><span>.</span></a>
<a id="cb1-10" data-line-number="10"></a>
<a id="cb1-11" data-line-number="11"><span>factorial_server()</span> <span>-&gt;</span></a>
<a id="cb1-12" data-line-number="12">    <span>receive</span></a>
<a id="cb1-13" data-line-number="13">       <span>{</span><span>From</span><span>,</span> <span>N</span><span>}</span> <span>-&gt;</span></a>
<a id="cb1-14" data-line-number="14">           <span>% reply with a factorial answer from the sent &#39;N&#39;</span></a>
<a id="cb1-15" data-line-number="15">           <span>From</span> <span>!</span> <span>factorial(</span><span>N</span><span>),</span></a>
<a id="cb1-16" data-line-number="16"></a>
<a id="cb1-17" data-line-number="17">           <span>% note how this is NOT a universal server:</span></a>
<a id="cb1-18" data-line-number="18">           <span>% the input is ONLY a number and we don&#39;t &#34;execute&#34; the input,</span></a>
<a id="cb1-19" data-line-number="19">           <span>% we always just recurse on ourself to serve the next request.</span></a>
<a id="cb1-20" data-line-number="20">           <span>% (also note: this is only an example, so this process is not concurrent)</span></a>
<a id="cb1-21" data-line-number="21">           <span>factorial_server()</span></a>
<a id="cb1-22" data-line-number="22">    <span>end</span><span>.</span></a>
<a id="cb1-23" data-line-number="23"></a>
<a id="cb1-24" data-line-number="24"><span>% the actual factorial logic</span></a>
<a id="cb1-25" data-line-number="25"><span>factorial(</span><span>0</span><span>)</span> <span>-&gt;</span> <span>1</span><span>;</span></a>
<a id="cb1-26" data-line-number="26"><span>factorial(</span><span>N</span><span>)</span> <span>-&gt;</span> <span>N</span> <span>*</span> <span>factorial(</span><span>N</span><span>-</span><span>1</span><span>).</span></a>
<a id="cb1-27" data-line-number="27"></a>
<a id="cb1-28" data-line-number="28"><span>test()</span> <span>-&gt;</span></a>
<a id="cb1-29" data-line-number="29">    <span>% start the universal server</span></a>
<a id="cb1-30" data-line-number="30">    <span>Pid</span> <span>=</span> <span>spawn(</span><span>fun</span> <span>universal_server</span><span>/</span><span>0</span><span>),</span></a>
<a id="cb1-31" data-line-number="31"></a>
<a id="cb1-32" data-line-number="32">    <span>% send the universal server a message to become a factorial server</span></a>
<a id="cb1-33" data-line-number="33">    <span>Pid</span> <span>!</span> <span>{</span><span>become</span><span>,</span> <span>fun</span> <span>factorial_server</span><span>/</span><span>0</span><span>},</span></a>
<a id="cb1-34" data-line-number="34"></a>
<a id="cb1-35" data-line-number="35">    <span>% send the universal server, which is now &#39;factorial_server/0&#39;, a factorial message.</span></a>
<a id="cb1-36" data-line-number="36">    <span>% (also illustrates erlang&#39;s built-in bignum support)</span></a>
<a id="cb1-37" data-line-number="37">    <span>Pid</span> <span>!</span> <span>{self(),</span> <span>50</span><span>},</span></a>
<a id="cb1-38" data-line-number="38"></a>
<a id="cb1-39" data-line-number="39">    <span>% fetch the result from our mailbox</span></a>
<a id="cb1-40" data-line-number="40">    <span>receive</span></a>
<a id="cb1-41" data-line-number="41">        <span>X</span> <span>-&gt;</span> <span>X</span></a>
<a id="cb1-42" data-line-number="42">    <span>end</span><span>.</span></a></code></pre></div>
<p>This is a simple example, but you can imagine such patterns being useful for distributed online upgrades, self-healing/self-patching systems, etc. Basically, when the <em>‚Äòreplace yourself with the body of a message‚Äô</em> request is one of many inputs to the active process<a href="#_fn3" id="_fnref3"><sup>3</sup></a> you can create arbitrarily complex execution hierarchies, W^X be darned.</p>
<h3 id="_running-it">running it</h3>

<p>Basically the <code>total_server:test/0</code> launches <code>universal_server/0</code> which accepts a function as a message, then the server, instead of recursing on <em>itself</em>, it runs the received serialized function, then the replaced universal server receives all messages sent to the original server process.</p>

<p>oh thanks for reminding me!</p>
<p>There‚Äôs a section of the nicely readable htmx docs saying: <a href="https://htmx.org/docs/#load_polling"><em>where an element specifies a load trigger along with a delay, and replaces itself with the response</em></a>.</p>
<p>See what they did there? <strong>replaces itself with the response</strong> ü§î</p>
<p>Instead of just sending a request and receiving data, you send a request and receive a ‚Äúdata as code‚Äù result with embedded actions (where actions are limited to the surface of features you currently have enabled or disabled as expected).</p>
<p>If you want to run updates via polling, your page can have an initial fragment for ‚Äúfetch messages after 1 second then replace this <code>div</code> with the response‚Äù automatically triggered request, and the <em>response</em> can also return the same automatic trigger logic where it continues to fetch after the next <code>1s</code> again too, all until your server stops returning new ‚Äúfetch and replace after <code>1s</code>‚Äù fragments to the caller:</p>

<p>Basically, instead of receiving a JSON update like:</p>

<p>where you would also need to implement your own custom parser/mini-VM to execute actions based on the reply format, the <code>htmx</code> framework auto-parses results for all htmx-active tags combining maximum flexibility with minimal busywork overhead (plus, additional controlling metadata can be included in response <em>headers</em> as well as html attributes).</p>
<p><strong>takeaway:</strong> htmx allows dynamic content replacement, where the content can also issue commands to the current page, including but not limited to also further requesting more remote content to fetch and replace.</p>
<p>You could, if you were weird, pseudo-fork-bomb your site by requesting a fragment which renders two more fragments which continues requesting ‚Äúfetch -&gt; return 2 more self-fetching fragments‚Äù for each instance of the fetch until something breaks; but you can also probably think up more creative uses for APIs capable of returning content capable of using the APIs which caused the original content to be fetched in the first place.</p>
<h2 id="_but-wut-bout-muh-sekuruty">but wut bout muh sekuruty</h2>
<p>obviously having any pattern where you consume data then blindly execute based on the result has an attack surface, but security problems are mitigated by two things:</p>
<ul>
<li>there is a <a href="https://htmx.org/docs/#security">big ole phat <code>hx-disable</code> attribute</a> to stop automatic parsing and execution of any children of an element (if you are doing weird things like allowing poorly-sanitized user-generated-content in a page)</li>
<li>you‚Äôre (hopefully) not fetching results from random servers; htmx is a single-site, single-organization usage pattern and your site is very likely https/tls-end-to-end verified so wobbly nubbins can‚Äôt slip in unauthorized.</li>
</ul>
<h3 id="_smol-brain-security-arguments">smol brain security arguments</h3>
<p>there‚Äôs an entire genre of online down finger üëá ‚Äúdeveloper influencers‚Äù who dilute the developer noosphere intelligence center of mass towards marketing drivel, but they can‚Äôt help but make online weirdo jerks out of themselves:</p>
<p>OH NO WHAT IF MY APPLICATION ACTS BASED ON RESPONSES FROM MY SERVER????????</p>


<div>

<div id="2023-07-23">
<h2>
2023-07-23
</h2>
<hr/>
<div>
<p>
2023-07-23
</p>
<p><a href="https://mattsta.b-cdn.net/htmx-erlang/IMG_2353.jpg"> <img src="https://mattsta.b-cdn.net/htmx-erlang/th/IMG_2353.jpg"/> </a></p><p>xxxxxxxxxxxxx app worst app (unrelated)</p>
</div>
<hr/>
<div>
<p>
2023-07-23
</p>
<p><a href="https://mattsta.b-cdn.net/htmx-erlang/IMG_2326.jpg"> <img src="https://mattsta.b-cdn.net/htmx-erlang/th/IMG_2326.jpg"/> </a></p><p>ah yes, the famous XSS coming from your own backend API calls‚Ä¶</p>
</div>
<hr/>
<div>
<p>
2023-07-23
</p>
<p><a href="https://mattsta.b-cdn.net/htmx-erlang/IMG_2327.jpg"> <img src="https://mattsta.b-cdn.net/htmx-erlang/th/IMG_2327.jpg"/> </a></p><p>‚Äúintercepts‚Äù ‚Äî¬†‚Äúon the way back from your server‚Äù ‚Äî¬†sir, it is not 2010 anymore. everybody has free tls certificates these days for exactly the reason specified. so much so, captive portals don‚Äôt even work well anymore due to HSTS locks so we need neverssl.com all the time to really check why <a href="https://www.youtube.com/watch?v=xt2aouhiWLA">the system is down</a></p>
</div>
<hr/>
<div>
<p>
2023-07-23
</p>
<p><a href="https://mattsta.b-cdn.net/htmx-erlang/IMG_2332.jpg"> <img src="https://mattsta.b-cdn.net/htmx-erlang/th/IMG_2332.jpg"/> </a></p><div>
<p>infinite money hack person is giving away free advice on twitter everybody stop working right now.</p>
<p>and remember kids: CODE IS MONEY. the only reason to use computers is MONEY MONEY MONEY</p>
</div>
</div>
<hr/>
<div>
<p>
2023-07-23
</p>
<p><a href="https://mattsta.b-cdn.net/htmx-erlang/IMG_2328.jpg"> <img src="https://mattsta.b-cdn.net/htmx-erlang/th/IMG_2328.jpg"/> </a></p><p>a solid rule of the internet: never disagree with somebody who has those slashed l‚Äôs in their name.</p>
</div>
<hr/>
<div>
<p>
2023-07-23
</p>
<p><a href="https://mattsta.b-cdn.net/htmx-erlang/IMG_2330.jpg"> <img src="https://mattsta.b-cdn.net/htmx-erlang/th/IMG_2330.jpg"/> </a></p><p>‚Äúa third party API can compromise your site‚Äù ‚Äî¬†<em>look at every site contacting 40 external domains using direct javascript injection for unethical-but-marketing-wants-it-so-we-cant-turn-it-off behavioral tracking across the entire universe</em></p>
</div>
<hr/>
<div>
<p>
2023-07-23
</p>
<p><a href="https://mattsta.b-cdn.net/htmx-erlang/IMG_2336.jpg"> <img src="https://mattsta.b-cdn.net/htmx-erlang/th/IMG_2336.jpg"/> </a></p><p>it‚Äôs amusing how the rest of us are supposed to just continue pretending the world is normal while K-holed billionaires have no consequences for running outright global scams in public.</p>
</div>
<hr/>
<div>
<p>
2023-07-23
</p>
<p><a href="https://mattsta.b-cdn.net/htmx-erlang/IMG_2352.jpg"> <img src="https://mattsta.b-cdn.net/htmx-erlang/th/IMG_2352.jpg"/> </a></p><div>
<p>‚Äúwe‚Äôre just beginning to imagine‚Äù ‚Äî¬†maybe because you have the forward looking creative vision of a flushed goldfish?</p>
<p>also these manic ramblings of ‚Äúwe can make a app that does EVERYTHING from FRY EGGS to COLONIZE THE MOON!!!! MY IDEAS ARE PERFECT! I AM AN IDEA BRO! I JUST NEED HELP IMPLEMENTING MY PERFECT GOD-LEVEL IDEAS!‚Äù is exactly what get you laughed out of any VC‚Äôs office (unless you are also a centi-billionaire high on ket and cuddle puddles 18/7 apparently?)</p>
</div>
</div>
<hr/>
<div>
<p>
2023-07-23
</p>
<p><a href="https://mattsta.b-cdn.net/htmx-erlang/IMG_2329.jpg"> <img src="https://mattsta.b-cdn.net/htmx-erlang/th/IMG_2329.jpg"/> </a></p><p>DENY THY API AND REFUSE THY AJAX</p>
</div>
<hr/>
<div>
<p>
2023-07-23
</p>
<p><a href="https://mattsta.b-cdn.net/htmx-erlang/IMG_2354.jpg"> <img src="https://mattsta.b-cdn.net/htmx-erlang/th/IMG_2354.jpg"/> </a></p><p>get my one letter domain name out your mouth</p>
</div>
<hr/>
<div>
<p>
2023-07-23
</p>
<p><a href="https://mattsta.b-cdn.net/htmx-erlang/IMG_2331.jpg"> <img src="https://mattsta.b-cdn.net/htmx-erlang/th/IMG_2331.jpg"/> </a></p><p>imagine bringing definitions based in reality to an internet self-marketing influencer argument</p>
</div>
<hr/>
<div>
<p>
2023-07-23
</p>
<p><a href="https://mattsta.b-cdn.net/htmx-erlang/IMG_2348.jpg"> <img src="https://mattsta.b-cdn.net/htmx-erlang/th/IMG_2348.jpg"/> </a></p><div>
<p>‚Äújust wait out the bad dev years‚Äù has always been my long-term strategy too.</p>
<p>sure, i spend 10 years just being on call fixing broken logs instead of doing anything real with hyper-scalable value props, plus i get 1/5th what vc-growth-and-fraud-until-the-world-dies-complicit devs are comp‚Äôd, but at least I spare my brain from the npm mind virus?</p>
</div>
</div>
<hr/>
<div>
<p>
2023-07-23
</p>
<p><a href="https://mattsta.b-cdn.net/htmx-erlang/IMG_2337.jpg"> <img src="https://mattsta.b-cdn.net/htmx-erlang/th/IMG_2337.jpg"/> </a></p><p>got ‚Äôem</p>
</div>
<hr/>
<div>
<p>
2023-07-23
</p>
<p><a href="https://mattsta.b-cdn.net/htmx-erlang/IMG_2335.jpg"> <img src="https://mattsta.b-cdn.net/htmx-erlang/th/IMG_2335.jpg"/> </a></p><p>anything but that</p>
</div>
<hr/>
<div>
<p>
2023-07-23
</p>
<p><a href="https://mattsta.b-cdn.net/htmx-erlang/IMG_2334.jpg"> <img src="https://mattsta.b-cdn.net/htmx-erlang/th/IMG_2334.jpg"/> </a></p><p>oh no not this guy again. if i grow 10x faster i think i just become cancer? you mean the problem i needed your advice to solve was: FIND AN IDEA. WORK ON IDEA? praise the tech lords you were here to save us from ourselves. this is basically like saying ‚Äúhow to become rich? just deposit $1 billion into your bank account!‚Äù</p>
</div>
<hr/>
<div>
<p>
2023-07-23
</p>
<p><a href="https://mattsta.b-cdn.net/htmx-erlang/IMG_2349.jpg"> <img src="https://mattsta.b-cdn.net/htmx-erlang/th/IMG_2349.jpg"/> </a></p><p>x dot com do do do do do do x dot com do do do do do do x dot com</p>
</div>
<hr/>
<div>
<p>
2023-07-23
</p>
<p><a href="https://mattsta.b-cdn.net/htmx-erlang/IMG_2350.jpg"> <img src="https://mattsta.b-cdn.net/htmx-erlang/th/IMG_2350.jpg"/> </a></p><div>
<p>hyper-online capitalist parasite says what? also you can feel the smug derision in his voice by saying ‚Äúpopular movies‚Äù ‚Äî¬†ha! the unwashed masses are too dumb and out ‚Äúenjoying‚Äù ‚Äúmovies‚Äù instead of startup-grooming 19 year old guys into starting trillion dollar companies you can just passively leach off of the rest of your life.</p>
<p>what rubes the public are compared to my elite galaxy brain! just wait until ron conway hears about my latest idea for a programming language that will last ONE BILLION YEARS!</p>
</div>
</div>
<hr/>
<div>
<p>
2023-07-23
</p>
<p><a href="https://mattsta.b-cdn.net/htmx-erlang/IMG_2333.jpg"> <img src="https://mattsta.b-cdn.net/htmx-erlang/th/IMG_2333.jpg"/> </a></p><div>
<p>i think averaging fewer than 1 lesson per year means you‚Äôre not making much progress.</p>
<p>also, 25,000 hours in 15 years? what kind of rookie lazy piece of shit numbers are those? 8am to 10pm every day bro. even with time off (only working 250 days per year), that‚Äôs over 50,000 hours in the same time period for creating global change.</p>
</div>
</div>
</div>
</div>
<h2 id="_usage">usage</h2>
<p>i think htmx has a bright future in the new-ish genre of ‚Äúbackend-creates-frontend‚Äù platforms like:</p>
<ul>
<li>wave/h20 <a href="https://wave.h2o.ai/docs/tutorial-counter">https://wave.h2o.ai/docs/tutorial-counter</a></li>
<li>plotly/dash <a href="https://dash.plotly.com/minimal-app">https://dash.plotly.com/minimal-app</a></li>
</ul>
<p>Basically backend-creates-frontend systems say ‚Äúhey python, gimme a page with a thing and another thing, and these things can have buttons, and clicking the buttons trigger these python functions, and the result of the functions get populated in the front-end again‚Ä¶‚Äù ‚Äî perfect match for htmx.</p>
<p>Currently BCF systems tend to auto-generate React¬Æ front-ends from python specs you write, but <code>python-htmx&lt;-&gt;python-htmx</code> seems a much cleaner route.</p>
<h2 id="_conclusion">conclusion</h2>
<p>the recent growing popularity of htmx in all walks of life from cereal flavors to car insurance rates to nuclear security protocols once again is surfacing a problem we haven‚Äôt solved: post-cloud-native developers don‚Äôt understand basic things anymore.</p>
<p>Every cloud-pilled, react-vue-braindead, click-to-deploy developer actually thinks web views require 7 minutes to ‚Äúcompile for production,‚Äù then when live require 5-15 second ‚Äúskeleton loaders‚Äù on entry is just a fact of life nobody can question or ever improve on modern 5 GHz machines with 5 Gbps network connections. Developers, at the median, have been getting less capable and more focused on made up silo/cult/trendy dead-end fads for 10 years and the entire world suffers daily.</p>
<p>do you know why AI chat apps are eating google‚Äôs lunch? Because clicking on any google link feels like a slog when every page is slow and bloated and takes 5-15 seconds to do the TLS handshake<a href="#_fn4" id="_fnref4"><sup>4</sup></a>, render the laggy SPA async user-hostile stuttering content into view, then load in potentially a dozen ads if you land on the thousands of micro-targeted high-ranking scam sites. Asking a chat bot with infinite knowledge and known latency plus knowing it has zero javascript spyware injection is why google search is dead. Google allowed too many scams and slow sites to rank as the first pages of results to the point where now in 2023 probably 80% of programming search results are just scams or hacks or explots or ad farms. The entire discovery infrastructure of the Internet is broken until AI ‚Ä¶. reverses entropy.</p>
<p>reject modernity. embrace html injection again, as is the One True Way to develop, as the gods of YUI and jQuery intended. just splat things into innerHTML whenever you feel like it. we have vanquished the olden uncivilized days of <code>document.write</code>, but we went too far. now we must destroy the shadow dom. shadow, you have no power here, be gone! stop with the ‚Äúloaders‚Äù ‚Äî¬†here‚Äôs a fun game: every time you click on a link, hold your breath until the result loads (not <em>becomes visible and waits for more stuff</em> but <strong>actually renders the full page of content</strong>). every search engine: click link -&gt; bounce to the spyware search engine link tracker -&gt; bounce to site -&gt; [VISIBLE PAUSE DURING TLS HANDSHAKE] -&gt; the site has an async SPA loader -&gt; wait 3-5-15+ more seconds -&gt; get content (plus 74 ads if you don‚Äôt have an adblock installed).</p>
<p>content is god. javascript is abomination. htmx is space pope keeping the many angled ones at bay.</p>
<p>yeeeeeeeeeeeeeee haw.</p>


  </div></div>
  </body>
</html>
