<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://notgull.net/finding-a-forge/">Original</a>
    <h1>Evaluating New Software Forges</h1>
    
    <div id="readability-page-1" class="page"><div>
    <p>What options <em>are</em> there other than <a href="https://github.com/">GitHub</a>?</p>

<p>Oh boy, I sure do love contributing to open source software on the largest software forge in the world! I hope they haven’t started down the slow and painful process of <a href="https://en.wikipedia.org/wiki/Enshittification">enshittification</a> by following vague, ill-defined industry trends!</p>

<p><img src="https://notgull.net/images/github-home.png" alt="[GitHub]&#39;s home page"/></p>

<p>Wait, what’s that? Computer! Enhance!</p>

<p><img src="https://notgull.net/images/github-ai.png" alt="The same image but zoomed in on AI"/></p>

<p>Well, I guess I’m ready to find a new forge!</p>

<h2 id="software-host-hellscape">Software Host Hellscape</h2>

<p>In all seriousness, I’ve been looking to move off of <a href="https://github.com/">GitHub</a> for a while now. Let me be clear, <a href="https://github.com/">GitHub</a> is still far and away the best website for open source discovery. Not to mention, its CI offerings are very nice, especially for something free. Yes, there are better paid CI offerings, but for something that costs zero dollars I’ve found it incredibly useful.</p>

<p>However, one thing has made me skeptical of <a href="https://github.com/">GitHub</a> is its “<a href="https://github.com/features/copilot">Copilot</a>” offering. I’ll admit, I was in the beta program for Copilot, and found it really neat. Being able to write large amounts of code from small comments was very nice, even if it was really bad practice.</p>

<p>Then I found out it was <a href="https://www.zdnet.com/article/is-github-copilots-code-legal-ethically-right/">training on GPL-licensed data</a>, which left a pretty bad taste in my mouth. In addition to the fact that I’m increasingly uncomfortable with hosting my free software on a closed source forge, run by Microsoft.</p>

<p>Let’s take a look at everybody else.</p>

<h2 id="gitlab-gauss">GitLab Gauss</h2>

<p><a href="https://about.gitlab.com/">GitLab</a> is the original <a href="https://github.com/">GitHub</a> competitor. The Linux to Microsoft’s Windows, or the MariaDB to Oracle’s MySQL. This has made it the most popular <a href="https://github.com/">GitHub</a> competitor by far, by virtue of people vocally quitting <a href="https://github.com/">GitHub</a> in favor of [GitLab].</p>

<p>Unfortunately, I didn’t really consider GitLab when I was finding a place to move. First of all, <a href="https://about.gitlab.com/blog/2016/07/20/gitlab-is-open-core-github-is-closed-source/">they aren’t actually open source</a>. They’re “open core”, which, I admit, is better than closed source. However, like I said, I’m uncomfortable building free software on infrastructure that isn’t.</p>

<p>I know I can download GitLab and set it up on my own server. However, I’m a software developer, not a sysadmin. I want to spend my time developing software, not putting out fires and paying AWS bills for the rest of time.</p>

<p>Also, GitLab has adopted the unfortunate strategy of “following along with whatever <a href="https://github.com/">GitHub</a> does”. They’ve tried to jump onto the bandwagon so frequently, they’ve gotten splinters. For instance, what happens when we check their homepage?</p>

<p><img src="https://notgull.net/images/gitlab-home.png" alt="GitLab&#39;s home page"/></p>

<p>Computer! Do the thing again!</p>

<p><img src="https://notgull.net/images/gitlab-ai.png" alt="Same image but with &#34;AI&#34; zoomed in"/></p>

<p>Good golly, it’s even the same wording! Yeah, I’ll pass.</p>

<h2 id="sourcehut-scramble"><a href="https://sr.ht">SourceHut</a> Scramble</h2>

<p><a href="https://sr.ht"><code>sr.ht</code></a> takes the opposite approach as GitLab. Instead of trying to follow along with <a href="https://github.com/">GitHub</a>’s trends, it’s elected to do go in the other direction. Whenever <a href="https://github.com/">GitHub</a> does something, <a href="https://sr.ht">SourceHut</a> does the exact opposite.</p>

<p>Pull requests? Too centralized, let’s construct a suitable code contribution system around email. Discussion? Why not IRC, it’s been around since the Bronze Age. Get rid of Mercurial support? Not interested.</p>

<p>I really like <a href="https://sr.ht">SourceHut</a>. When you go to their homepage, they’re not showing off their fancy CSS effects or telling you about their AI offerings. They give you a simple user interface and some of the projects they host.</p>

<p><img src="https://notgull.net/images/sourcehut-home.png" alt="sr.ht&#39;s homepage"/></p>

<p>There was also much to impress me. Their CI offerings are better than <a href="https://github.com/">GitHub</a>, which alone justified me paying the humble $2/month price tag. Rather than needing a complicated YAML file to run a CI system, it’s just cloning Git repos and running commands. It’s delightfully simple yet powerful. Having native BSD and Plan9 runners doesn’t quite make up for its inability to run Windows, but I’m sure I can work around that.</p>

<p>Not to mention, <a href="https://sr.ht">SourceHut</a> has the <em>second</em> best repository discovery system. When I go to <code>sr.ht</code>’s “explore” tab, I’m immediately greeted by a slew of interesting projects. Whether it’s a <a href="https://git.sr.ht/~crc_/retroforth">powerful Forth dialect</a> that brings a lot of genuinely exciting ideas to the table, or a <a href="https://sr.ht/~mcf/cproc/">tiny C11 compiler</a> written in simple ANSI C, I’m always amazed whenever I open up that tab.</p>

<p>I liked it so much that <a href="https://hachyderm.io/@notgull/111207497257139313">I announced that I was moving my personal projects to SourceHut</a>. However, after moving my <a href="https://crates.io/crates/theo"><code>theo</code></a> project to <a href="https://sr.ht">SourceHut</a>, I found myself dissatisfied with a few things.</p>

<p>For one, the email-based workflow was a lot clunkier than I expected. In theory, building code contribution on top of a standard protocol that’s been around since the 60’s sounds like a good idea. In practice, it’s <a href="https://social.treehouse.systems/@marcan/109863991681394714">a lot clunkier</a> than you’d expect, especially since most modern email clients are simply not built to read and write code.</p>

<p>After trying it for myself I can see that it might turn off a lot of people from contributing. I’m already losing a lot of potential contributors by moving off of <a href="https://github.com/">GitHub</a>. I don’t need those remaining contributors to also be turned off by a workflow completely different than what they’re probably used to.</p>

<p>Still, I can imagine this workflow working for many people, especially ones who already have a decent setup for email-based projects like Linux.</p>

<h2 id="codeberg">Codeberg</h2>

<p><a href="https://codeberg.org">Codeberg</a> is a public instance of <a href="https://forgejo.org/">Forgejo</a>, which is in turn a fork of <a href="https://about.gitea.com/">Gitea</a>. It’s got a pretty nice interface similar enough to <a href="https://github.com/">GitHub</a>’s. It’s got the familiar pull-request-based contribution interface. The CI is <em>good enough</em>, I suppose. Docker containers aren’t the best CI environment, but I can certainly think of worse.</p>

<p><img src="https://notgull.net/images/codeberg-home.png" alt="Codeberg&#39;s home page"/></p>

<p>So what’s not to like?</p>

<p>My main problem is that <a href="https://codeberg.org">Codeberg</a> has a very limited CI capacity, and I have a lot of projects that require significant testing. <a href="https://crates.io/crates/theo"><code>theo</code></a>, for instance, requires these things to be tested:</p>

<ul>
  <li>Make sure it compiles on Windows, Mac, Linux, WASM, Redox, and whatever oblique platform people run Rust on nowadays.</li>
  <li>Check the various different backends that <a href="https://crates.io/crates/theo"><code>theo</code></a> supports: pure software rendering, <a href="https://crates.io/crates/wgpu"><code>wgpu</code></a> and OpenGL. Not to mention all of the different interfaces to OpenGL, so <code>wgl</code>, GLX, EGL…</li>
  <li>Check formatting and linting.</li>
</ul>

<p>…which doesn’t even cover testing. For rendering frameworks like <a href="https://crates.io/crates/theo"><code>theo</code></a>, you want to have some pre-defined rendering programs that render your code to images. That way, you can regenerate these images and compare against an existing set of images in order to check for regressions.</p>

<p>This isn’t a practical concern, although it really should be. It’s a moral concern. You have an organization like <a href="https://codeberg.org">Codeberg</a>, donating a significant amount of time and resources to try to make a positive difference in the world of software. Now, here I am, sucking up all of those compute resources for my insignificant little projects.</p>

<p>Of course, while pondering this moral concern, I realized that I’ve locked myself into a <a href="https://en.wikipedia.org/wiki/Catch-22_(logic)">Catch-22</a>. I can’t use any independent project’s CI because of my concerns that I would drain too many of their resources. On the other hand, I can’t use any large company’s CI because I don’t want to host my project with a large company. I can’t self host, because that would be a pain.</p>

<p>Would it?</p>

<h2 id="self-hosting-gitea">Self-Hosting Gitea</h2>

<p>I said I didn’t want to self-host. I worked in IT for two years, so I’ve already gotten my fill of fighting with both servers and people.</p>

<p>However, in a Discord I’m in, an acquaintance of mine talked about how they set up <a href="https://about.gitea.com/">Gitea</a> and <a href="https://www.drone.io/">Drone</a> CI on a school Kubernetes cluster they had access to. I mentioned my predicaments in finding a forge service, and they said that it was only two configuration files.</p>

<p>That tempted me. Not enough to deal with the absolute nightmare that is Kubernetes, but enough for me to rent out a couple of <a href="https://en.wikipedia.org/wiki/Timeline_of_Amazon_Web_Services">Lightsail</a> servers to experiment.</p>

<p>I’d like to say that I set up the entire thing in a weekend, but it wasn’t that simple. Sure, it was easy enough to install <a href="https://about.gitea.com/">Gitea</a> and <a href="https://www.drone.io/">Drone</a> in Docker containers. Sure, it wasn’t too hard after that to set up my DNS records to forward <a href="https://src.notgull.net">src.notgull.net</a> to that new serer. Yeah, it’s probably hacky to set up my CI system on a public cloud, but as long as I keep people from abusing it that aren’t me it shouldn’t be <em>too</em> bad, right?</p>

<p>Of course, I forget my crucial weakness: my perfectionism. Sure, my site looks pretty good… but it looks a bit ugly. Let’s play around with themes for three days until I find one I like. Oh, the logo doesn’t look good with my new theme. Let’s convert the MS paint drawing I call my avatar into SVG and then set it up to be this site’s logo. Oh, Gitea has a weird templating system; let’s compile it from scratch!</p>

<p><img src="https://notgull.net/images/srcnotgull-home.png" alt="src.notgull.net home"/></p>

<p>At the end of this week(!)long process, I had a somewhat functional <a href="https://src.notgull.net">Git forge</a>, with the following features:</p>

<ul>
  <li>A decent Linux <a href="https://www.drone.io/">Drone</a> CI setup.</li>
  <li>A <a href="https://docs.renovatebot.com/">Dependabot clone</a> for automatic updates.</li>
  <li>A system that allows everyone to create an account and open issues, but doesn’t allow people to create repos or mess with the CI.
    <ul>
      <li>If you want to create a repo for PR’s sake, email me at dev at notgull dot net and I can set you up.</li>
    </ul>
  </li>
  <li>A mirror to <a href="https://github.com/">GitHub</a>, so I can still take advantage of their code discovery.
    <ul>
      <li>Yeah yeah, I know, but keeping an arm’s length from <a href="https://github.com/">GitHub</a> is a win in my book.</li>
    </ul>
  </li>
</ul>

<p>I’ve uploaded a lot of my code to there, and it seems to be working well so far. I have to admit, it is somewhat liberating to have full control of how your code is forged.</p>

<h2 id="parting-shots">Parting Shots</h2>

<p>I still consider this to be in the “experimental” stage. If it ends up being too inconvenient or too expensive, I’ll probably move it somewhere else. Still, having my own space for code that I can do whatever I want with is very nice. Let’s hope it keeps working well and this blog post doesn’t age like milk.</p>

<blockquote>
  <p>All photos are from public websites and fall under free use, as this is a review.</p>
</blockquote>


  </div></div>
  </body>
</html>
