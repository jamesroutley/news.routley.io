<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://debamitro.github.io/blog/two-cases-of-prompts-which-donot-work/">Original</a>
    <h1>Two Cases of Prompts Which Don&#39;t Work</h1>
    
    <div id="readability-page-1" class="page"><div>
        <p>After a couple of months of coding using AI prompts, I found two cases where a particular prompt doesn’t work. Maybe they’ll start working sometime soon. Or, it is possible that they work with a different AI coding tool or LLM other than the ones I tried.</p>
<h2 id="case-i">Case I</h2>
<p>I have started to use <a href="https://clerk.com">Clerk</a> for user authentication. It is really easy to use, but I have bumped into one small problem everytime I asked <a href="https://codeium.com/windsurf">Windsurf</a> to add Clerk authentication in a project.</p>
<p>Here is what it generates in the middleware.ts file:</p>
<div><pre tabindex="0"><code data-lang="javascript"><span><span><span>import</span> { <span>authMiddleware</span> } <span>from</span> <span>&#34;@clerk/nextjs&#34;</span>;
</span></span><span><span>
</span></span><span><span><span>export</span> <span>default</span> <span>authMiddleware</span>({
</span></span><span><span>  <span>// Routes that can be accessed while signed out
</span></span></span><span><span><span></span>  <span>publicRoutes</span><span>:</span> [<span>&#34;/&#34;</span>, <span>&#34;/sign-in&#34;</span>, <span>&#34;/sign-up&#34;</span>],
</span></span><span><span>});
</span></span><span><span>
</span></span><span><span><span>export</span> <span>const</span> <span>config</span> <span>=</span> {
</span></span><span><span>  <span>matcher</span><span>:</span> [<span>&#34;/((?!.+\\.[\\w]+$|_next).*)&#34;</span>, <span>&#34;/&#34;</span>, <span>&#34;/(api|trpc)(.*)&#34;</span>],
</span></span><span><span>};
</span></span></code></pre></div><p>This might have worked with the previous version of Clerk, but not the latest version. The correct contents of the middleware.ts file should be something like this:</p>
<div><pre tabindex="0"><code data-lang="javascript"><span><span><span>import</span> { <span>clerkMiddleware</span>, <span>createRouteMatcher</span> } <span>from</span> <span>&#34;@clerk/nextjs/server&#34;</span>;
</span></span><span><span>
</span></span><span><span><span>const</span> <span>isProtectedRoute</span> <span>=</span> <span>createRouteMatcher</span>([<span>&#39;/dashboard&#39;</span>])
</span></span><span><span>
</span></span><span><span><span>export</span> <span>default</span> <span>clerkMiddleware</span>(<span>async</span> (<span>auth</span>, <span>req</span>) =&gt; {
</span></span><span><span>  <span>if</span> (<span>isProtectedRoute</span>(<span>req</span>)) <span>await</span> <span>auth</span>.<span>protect</span>()
</span></span><span><span>});
</span></span><span><span>
</span></span><span><span><span>export</span> <span>const</span> <span>config</span> <span>=</span> {
</span></span><span><span>  <span>matcher</span><span>:</span> [<span>&#34;/((?!.+\\.[\\w]+$|_next).*)&#34;</span>, <span>&#34;/&#34;</span>, <span>&#34;/(api|trpc)(.*)&#34;</span>],
</span></span><span><span>};
</span></span></code></pre></div><p>In fact, <a href="https://clerk.com/docs/upgrade-guides/nextjs/v6#removed-deprecated-apis">Clerk’s documentation</a> also says that authMiddleware is deprecated. I tried using a bunch of other AI coding tools (<a href="https://cline.bot">Cline</a> and <a href="https://codapt.ai">Codapt</a> ) as well and they all make the same mistake. It is possible that I was using the same LLM for all of these tools (Claude 3.5 Sonnet) and that was trained with code using the previous version of Clerk.</p>
<h2 id="case-ii">Case II</h2>
<p>I have started using <a href="https://v0.dev">v0</a> for frontend-only tasks. The first time I did this was for creating <a href="http://debamitro.github.io/presentations/codepromptfu-020225/">a presentation</a> two weeks ago. I really liked the result so much that I put the code on a <a href="https://github.com/debamitro/nextjs-hacker-theme-presentation">github repo</a>.</p>
<p>The way I generated it was by using the following four prompts in succession:</p>
<ol>
<li>can you generate a presentation with 10 slides</li>
<li>can you make the theme look like hackers</li>
<li>can I add images to any of the slides?</li>
<li>can you allow cursor keys to move from one slide to the next?</li>
</ol>
<p>In my <a href="https://debamitro.github.io/blog/building-a-collection-of-coding-prompts">quest for finding concise prompts with maximum bang for the buck</a>, I tried to club everything together, and told v0:</p>
<p>‘Can you generate a presentation with 10 slides. Make the theme look like hackers. Allow adding images to any of the slides. Also please allow cursor keys to move from one slide to the next’</p>
<p>This did not produce any working result. So I backed down a bit and said:</p>
<p>‘can you generate a presentation with 10 slides which has a hacker theme’.</p>
<p>Even this didn’t work. My last attempt was to use two prompts in succession:</p>
<ol>
<li>can you generate a presentation with 10 slides</li>
<li>can you make the theme look like hackers</li>
</ol>
<p>This worked! And it had a slightly different look than the original one. But it was 100% hacker-ish.</p>
<p><img src="https://debamitro.github.io/images/presentation_smaller_021125.gif"/></p><h2 id="conclusion">Conclusion</h2>
<p>The first case is a general problem of LLMs getting trained with outdated information. I don’t know enough to comment about it.</p>
<p>The second case is, in my opinion, expected behaviour. The LLMs used in AI coding tools are like junior engineers with a few years of experience. From my engineering management experience I know that you need to give out tasks in small chunks to junior engineers, otherwise they tend to make more mistakes. I have mostly had excellent results working with AI coding tools, because I treat them like junior engineers in my team.</p>

      </div></div>
  </body>
</html>
