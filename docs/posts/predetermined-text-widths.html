<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://404wolf.com/posts/blog/hackyCssStuff">Original</a>
    <h1>Predetermined Text Widths</h1>
    
    <div id="readability-page-1" class="page"><div><div><div><div><div>
<h3 id="the-issue">The issue</h3>
<p>On the main page of <a href="https://404wolf.com">404wolf.com</a> I have it set up so that various elements&#39; text &#39;types&#39; into their respective boxes. It&#39;s a neat animation that I achieve using the <code>typewriter-effect</code> package <a href="https://www.npmjs.com/package/typewriter-effect">that can be found here</a>. It works great out of the box, but since I have unique title styles that I wanted to keep consistent, I ran into a problem.</p>
<p>For titles on my website that are type-written after loading, I wanted the backgrounds to already exist, and then for the typewriter to type into them. Without any special configuration, the boxes load without a background, and as the typewriter types the boxes expand (since they use fitting width).</p>
<p>To solve this issue, I originally tried to compute the width by using a basic <code>document.createElement</code> method that I wrote (with some GPT help--I didn&#39;t know about <code>.offsetWidth</code> before this!).</p>
<pre><code>function getDummyAreaWidth(styles: string, classes: string, type: string, text: string) {
    const dummyArea = document.createElement(type);
    dummyArea.textContent = text;
    dummyArea.setAttribute(&#34;style&#34;, styles);
    dummyArea.className = classes;
    document.body.appendChild(dummyArea);
    const width = dummyArea.offsetWidth;
    document.body.removeChild(dummyArea);
    return width;
}; 
</code></pre>
<p>Basically, we create an element, set the styles and classes that would cause the width to change, and then yoink it&#39;s width. The idea is that I&#39;d then use this function for the title components to give them fixed predetermined widths. However, since <code>typewriter-effect</code> uses some wrapper classes and I&#39;m using <code>tailwind</code>, it wasn&#39;t computing the widths properly. I might have been able to troubleshoot and fix it, but instead I opted for a simpler solution.</p>
<h2 id="the-solution">The solution</h2>
<p>Instead of using a computed width value, I figured out that it&#39;d be easier to just have the width be computed as if the text were actually there from the start. I realized that if the text were loaded initially without a typewriter, that the width would (expectedly) be correct. So, what I decided to do was make it so that the text did preload into the box, but the text itself was transparent. This would cause the box to fill properly as if there were complex-ly styled variable-width text in it, but appear to be empty while the typewriter were to type into the box. I then made the typewriter text absolute, so that it could type on top of the invisible text that was already in the box.</p>
<p>The actual code for my homepage&#39;s main header was super simple to update with this idea, and worked right away!</p>
<pre><code>import Typewriter from &#34;typewriter-effect&#34;;

const Greeter = () =&gt; {
    return (
        &lt;div className=&#34;relative&#34;&gt; 
            &lt;span className=&#34;text-transparent&#34;&gt; {&#34;Hi! I&#39;m Wolf Mermelstein&#34;} &lt;/span&gt;
            &lt;span className=&#34;absolute left-0&#34; style={{ whiteSpace: &#34;nowrap&#34; }}&gt;
                &lt;Typewriter
                    onInit={(typewriter) =&gt; {
                        typewriter
                            .typeString(&#34;Hi! &#34;)
                            .pauseFor(700)
                            .typeString(&#34;I&#39;m Wolf Mermelstein&#34;)
                            .start();
                    }}
                    options={{ delay: 70, cursor: &#34;&#34;, autoStart: true }}
                /&gt;
            &lt;/span&gt;
        &lt;/div&gt;
    );
};

export default Greeter;
</code></pre></div></div></div></div></div></div>
  </body>
</html>
