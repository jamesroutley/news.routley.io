<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/ariebovenberg/whenever">Original</a>
    <h1>Whenever – typed and DST-safe datetimes for Python</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a href="https://pypi.python.org/pypi/whenever" rel="nofollow"><img src="https://camo.githubusercontent.com/4e74f63922fe9f56e3d70c0fbeed956f0a125040e18bb4ae7dc9d4d1358e9960/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f7768656e657665722e7376673f7374796c653d666c61742d73717561726526636f6c6f723d626c7565" alt="" data-canonical-src="https://img.shields.io/pypi/v/whenever.svg?style=flat-square&amp;color=blue"/></a>
<a href="https://pypi.python.org/pypi/whenever" rel="nofollow"><img src="https://camo.githubusercontent.com/8ce85e0a35a60938657735fbca66544717e1e3deb6d7c507934c86a4f408ea66/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f7768656e657665722e7376673f7374796c653d666c61742d737175617265" alt="" data-canonical-src="https://img.shields.io/pypi/pyversions/whenever.svg?style=flat-square"/></a>
<a href="https://pypi.python.org/pypi/whenever" rel="nofollow"><img src="https://camo.githubusercontent.com/b889c52d3c2a3b09e46dc4242bf61ee73e2b0a169701b52ffed29a661b61a7e4/68747470733a2f2f696d672e736869656c64732e696f2f707970692f6c2f7768656e657665722e7376673f7374796c653d666c61742d73717561726526636f6c6f723d626c7565" alt="" data-canonical-src="https://img.shields.io/pypi/l/whenever.svg?style=flat-square&amp;color=blue"/></a>
<a href="https://mypy.readthedocs.io/en/stable/command_line.html#cmdoption-mypy-strict" rel="nofollow"><img src="https://camo.githubusercontent.com/407127697b56855b4a682102b20524f780da1e716901b9f8e5b03bdd5c148e7d/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6d7970792d7374726963742d666f72657374677265656e3f7374796c653d666c61742d737175617265" alt="" data-canonical-src="https://img.shields.io/badge/mypy-strict-forestgreen?style=flat-square"/></a>
<a href="https://github.com/ariebovenberg/whenever"><img src="https://camo.githubusercontent.com/eac205dbafd14a7c56d3470ab026a51508a217827d349ce0c5b4a9d62e3e7f41/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f636f7665726167652d3130302532352d666f72657374677265656e3f7374796c653d666c61742d737175617265" alt="" data-canonical-src="https://img.shields.io/badge/coverage-100%25-forestgreen?style=flat-square"/></a>
<a href="https://github.com/ariebovenberg/whenever"><img src="https://camo.githubusercontent.com/78ca0108cd2e4c0c07e5c95aa381db672c00e2594d551defa19597fd13352ab4/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f616374696f6e732f776f726b666c6f772f7374617475732f61726965626f76656e626572672f7768656e657665722f636865636b732e796d6c3f6272616e63683d6d61696e267374796c653d666c61742d737175617265" alt="" data-canonical-src="https://img.shields.io/github/actions/workflow/status/ariebovenberg/whenever/checks.yml?branch=main&amp;style=flat-square"/></a>
<a href="http://whenever.readthedocs.io/" rel="nofollow"><img src="https://camo.githubusercontent.com/523d0dfc97a5f853280a2e080e6b1efae52b385cd5449cd895656b604ff0279d/68747470733a2f2f696d672e736869656c64732e696f2f72656164746865646f63732f7768656e657665722e7376673f7374796c653d666c61742d737175617265" alt="" data-canonical-src="https://img.shields.io/readthedocs/whenever.svg?style=flat-square"/></a></p>
<p dir="auto"><strong>Typed and DST-safe datetimes for Python, available in Rust or pure Python.</strong></p>
<p dir="auto">Do you cross your fingers every time you work with Python&#39;s datetime—hoping that you didn&#39;t mix naive and aware?
or that you avoided its <a href="https://dev.arie.bovenberg.net/blog/python-datetime-pitfalls/" rel="nofollow">other pitfalls</a>?
There’s no way to be sure...</p>
<p dir="auto">✨ Until now! ✨</p>
<p dir="auto"><em>Whenever</em> helps you write <strong>correct</strong> and <strong>type checked</strong> datetime code,
using <strong>well-established concepts</strong> from <a href="#acknowledgements">modern libraries</a> in other languages.
It&#39;s also <strong>way faster</strong> than other third-party libraries—and usually the standard library as well.
If performance isn&#39;t your top priority, a <strong>pure Python</strong> version is available as well.</p>
  <p dir="auto">
    <themed-picture data-catalyst-inline="true"><picture>
        <source media="(prefers-color-scheme: dark)" srcset="https://raw.githubusercontent.com/ariebovenberg/whenever/main/benchmarks/comparison/graph-dark.svg"/>
        <source media="(prefers-color-scheme: light)" srcset="https://raw.githubusercontent.com/ariebovenberg/whenever/main/benchmarks/comparison/graph-light.svg"/>
        <img alt="Shows a bar chart with benchmark results." src="https://raw.githubusercontent.com/ariebovenberg/whenever/main/benchmarks/comparison/graph-light.svg"/>
    </picture></themed-picture>
  </p>
  <p dir="auto">
    <i>RFC3339-parse, normalize, compare to now, shift, and change timezone (1M times)</i>
  </p>

<blockquote>
<p dir="auto"><g-emoji alias="warning">⚠️</g-emoji> <strong>Note</strong>: A 1.0 release is coming soon. Until then, the API may change
as we gather feedback and improve the library.
Leave a ⭐️ on GitHub if you&#39;d like to see how this project develops!</p>
</blockquote>
<div dir="auto"><h2 tabindex="-1" dir="auto">Why not the standard library?</h2><a id="user-content-why-not-the-standard-library" aria-label="Permalink: Why not the standard library?" href="#why-not-the-standard-library"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Over 20+ years, Python&#39;s <code>datetime</code> has grown
out of step with what you&#39;d expect from a modern datetime library.
Two points stand out:</p>
<ol dir="auto">
<li>
<p dir="auto"><strong>It doesn&#39;t always account for Daylight Saving Time (DST)</strong>.
Here is a simple example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="bedtime = datetime(2023, 3, 25, 22, tzinfo=ZoneInfo(&#34;Europe/Paris&#34;))
full_rest = bedtime + timedelta(hours=8)
# It returns 6am, but should be 7am—because we skipped an hour due to DST!"><pre><span>bedtime</span> <span>=</span> <span>datetime</span>(<span>2023</span>, <span>3</span>, <span>25</span>, <span>22</span>, <span>tzinfo</span><span>=</span><span>ZoneInfo</span>(<span>&#34;Europe/Paris&#34;</span>))
<span>full_rest</span> <span>=</span> <span>bedtime</span> <span>+</span> <span>timedelta</span>(<span>hours</span><span>=</span><span>8</span>)
<span># It returns 6am, but should be 7am—because we skipped an hour due to DST!</span></pre></div>
<p dir="auto">Note this isn&#39;t a bug, but a design decision that DST is only considered
when calculations involve <em>two</em> timezones.
If you think this is surprising, you
<a href="https://github.com/python/cpython/issues/91618" data-hovercard-type="issue" data-hovercard-url="/python/cpython/issues/91618/hovercard">are</a>
<a href="https://github.com/python/cpython/issues/116035" data-hovercard-type="issue" data-hovercard-url="/python/cpython/issues/116035/hovercard">not</a>
<a href="https://github.com/python/cpython/issues/112638" data-hovercard-type="issue" data-hovercard-url="/python/cpython/issues/112638/hovercard">alone</a>.</p>
</li>
<li>
<p dir="auto"><strong>Typing can&#39;t distinguish between naive and aware datetimes</strong>.
Your code probably only works with one or the other,
but there&#39;s no way to enforce this in the type system!</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Does this expect naive or aware? Can&#39;t tell!
def schedule_meeting(at: datetime) -&gt; None: ..."><pre><span># Does this expect naive or aware? Can&#39;t tell!</span>
<span>def</span> <span>schedule_meeting</span>(<span>at</span>: <span>datetime</span>) <span>-&gt;</span> <span>None</span>: ...</pre></div>
</li>
</ol>

<p dir="auto">There are two other popular third-party libraries, but they don&#39;t (fully)
address these issues. Here&#39;s how they compare to <em>whenever</em> and the standard library:</p>
<div dir="auto">
<markdown-accessiblity-table><table>
<thead>
<tr>
<th></th>
<th>Whenever</th>
<th>datetime</th>
<th>Arrow</th>
<th>Pendulum</th>
</tr>
</thead>
<tbody>
<tr>
<td>DST-safe</td>
<td>✅</td>
<td>❌</td>
<td>❌</td>
<td><g-emoji alias="warning">⚠️</g-emoji></td>
</tr>
<tr>
<td>Typed aware/naive</td>
<td>✅</td>
<td>❌</td>
<td>❌</td>
<td>❌</td>
</tr>
<tr>
<td>Fast</td>
<td>✅</td>
<td>✅</td>
<td>❌</td>
<td>❌</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
</div>
<p dir="auto"><a href="https://pypi.org/project/arrow/" rel="nofollow"><strong>Arrow</strong></a>
is probably the most historically popular 3rd party datetime library.
It attempts to provide a more &#34;friendly&#34; API than the standard library,
but doesn&#39;t address the core issues:
it keeps the same footguns, and its decision to reduce the number
of types to just one (<code>arrow.Arrow</code>) means that it&#39;s even harder
for typecheckers to catch mistakes.</p>
<p dir="auto"><a href="https://pypi.org/project/pendulum/" rel="nofollow"><strong>Pendulum</strong></a>
arrived on the scene in 2016, promising better DST-handling,
as well as improved performance.
However, it only fixes <a href="https://dev.arie.bovenberg.net/blog/python-datetime-pitfalls/#datetime-library-scorecard" rel="nofollow"><em>some</em> DST-related pitfalls</a>,
and its performance has significantly <a href="https://github.com/sdispater/pendulum/issues/818" data-hovercard-type="issue" data-hovercard-url="/python-pendulum/pendulum/issues/818/hovercard">degraded over time</a>.
Additionally, it&#39;s in maintenance limbo with only one release in the last four years,
and many issues remaining unaddressed.</p>

<ul dir="auto">
<li>🌐 DST-safe arithmetic</li>
<li>🛡️ Typesafe API prevents common bugs</li>
<li>✅ Fixes issues <a href="https://dev.arie.bovenberg.net/blog/python-datetime-pitfalls/#datetime-library-scorecard" rel="nofollow">arrow/pendulum don&#39;t</a></li>
<li>⚖️  Based on proven and <a href="https://www.youtube.com/watch?v=saeKBuPewcU" rel="nofollow">familiar concepts</a></li>
<li>⚡️ Unmatched performance</li>
<li>💎 Thoroughly tested and documented</li>
<li>📆 Support for date arithmetic</li>
<li>⏱️ Nanosecond precision</li>
<li>🦀 Rust!—but with a <a href="https://whenever.readthedocs.io/en/latest/faq.html#how-can-i-use-the-pure-python-version" rel="nofollow">pure-Python option</a></li>
<li>🚀 Support for the latest GIL-related improvements (experimental)</li>
</ul>

<div dir="auto" data-snippet-clipboard-copy-content="&gt;&gt;&gt; from whenever import (
...    # Explicit types for different use cases
...    Instant,
...    ZonedDateTime,
...    LocalDateTime,
... )

# Identify moments in time, without timezone/calendar complexity
&gt;&gt;&gt; now = Instant.now()
Instant(2024-07-04 10:36:56Z)

# Simple, explicit conversions
&gt;&gt;&gt; now.to_tz(&#34;Europe/Paris&#34;)
ZonedDateTime(2024-07-04 12:36:56+02:00[Europe/Paris])

# A &#39;naive&#39; local time can&#39;t accidentally mix with other types.
# You need to explicitly convert it and handle ambiguity.
&gt;&gt;&gt; party_invite = LocalDateTime(2023, 10, 28, hour=22)
&gt;&gt;&gt; party_invite.add(hours=6)
Traceback (most recent call last):
  ImplicitlyIgnoringDST: Adjusting a local datetime implicitly ignores DST [...]
&gt;&gt;&gt; party_starts = party_invite.assume_tz(&#34;Europe/Amsterdam&#34;)
ZonedDateTime(2023-10-28 22:00:00+02:00[Europe/Amsterdam])

# DST-safe arithmetic
&gt;&gt;&gt; party_starts.add(hours=6)
ZonedDateTime(2023-10-29 03:00:00+01:00[Europe/Amsterdam])

# Comparison and equality
&gt;&gt;&gt; now &gt; party_starts
True

# Rounding and truncation
&gt;&gt;&gt; now.round(&#34;minute&#34;, increment=15)
Instant(2024-07-04 10:30:00Z)

# Formatting &amp; parsing common formats (ISO8601, RFC3339, RFC2822)
&gt;&gt;&gt; now.format_rfc2822()
&#34;Thu, 04 Jul 2024 10:36:56 GMT&#34;

# If you must: you can convert to/from the standard lib
&gt;&gt;&gt; now.py_datetime()
datetime.datetime(2024, 7, 4, 10, 36, 56, tzinfo=datetime.timezone.utc)"><pre><span>&gt;</span><span>&gt;&gt;</span> <span>from</span> <span>whenever</span> <span>import</span> (
...    <span># Explicit types for different use cases</span>
...    <span>Instant</span>,
...    <span>ZonedDateTime</span>,
...    <span>LocalDateTime</span>,
... )

<span># Identify moments in time, without timezone/calendar complexity</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>now</span> <span>=</span> <span>Instant</span>.<span>now</span>()
<span>Instant</span>(<span>2024</span><span>-</span><span>07</span><span>-</span><span>04</span> <span>10</span>:<span>36</span>:<span>56</span><span>Z</span>)

<span># Simple, explicit conversions</span>
<span>&gt;</span><span>&gt;&gt;</span> <span>now</span>.<span>to_tz</span>(<span>&#34;Europe/Paris&#34;</span>)
<span>ZonedDateTime</span>(<span>2024</span><span>-</span><span>07</span><span>-</span><span>04</span> <span>12</span>:<span>36</span>:<span>56</span><span>+</span><span>02</span>:<span>00</span>[<span>Europe</span><span>/</span><span>Paris</span>])

<span># A &#39;naive&#39; local time can&#39;t accidentally mix with other types.</span>
<span># You need to explicitly convert it and handle ambiguity.</span>
<span>&gt;</span><span>&gt;&gt;</span> <span>party_invite</span> <span>=</span> <span>LocalDateTime</span>(<span>2023</span>, <span>10</span>, <span>28</span>, <span>hour</span><span>=</span><span>22</span>)
<span>&gt;</span><span>&gt;&gt;</span> <span>party_invite</span>.<span>add</span>(<span>hours</span><span>=</span><span>6</span>)
<span>Traceback</span> (<span>most</span> <span>recent</span> <span>call</span> <span>last</span>):
  <span>ImplicitlyIgnoringDST</span>: <span>Adjusting</span> <span>a</span> <span>local</span> <span>datetime</span> <span>implicitly</span> <span>ignores</span> <span>DST</span> [...]
<span>&gt;&gt;</span><span>&gt;</span> <span>party_starts</span> <span>=</span> <span>party_invite</span>.<span>assume_tz</span>(<span>&#34;Europe/Amsterdam&#34;</span>)
<span>ZonedDateTime</span>(<span>2023</span><span>-</span><span>10</span><span>-</span><span>28</span> <span>22</span>:<span>00</span>:<span>00</span><span>+</span><span>02</span>:<span>00</span>[<span>Europe</span><span>/</span><span>Amsterdam</span>])

<span># DST-safe arithmetic</span>
<span>&gt;</span><span>&gt;&gt;</span> <span>party_starts</span>.<span>add</span>(<span>hours</span><span>=</span><span>6</span>)
<span>ZonedDateTime</span>(<span>2023</span><span>-</span><span>10</span><span>-</span><span>29</span> <span>03</span>:<span>00</span>:<span>00</span><span>+</span><span>01</span>:<span>00</span>[<span>Europe</span><span>/</span><span>Amsterdam</span>])

<span># Comparison and equality</span>
<span>&gt;</span><span>&gt;&gt;</span> <span>now</span> <span>&gt;</span> <span>party_starts</span>
<span>True</span>

<span># Rounding and truncation</span>
<span>&gt;</span><span>&gt;&gt;</span> <span>now</span>.<span>round</span>(<span>&#34;minute&#34;</span>, <span>increment</span><span>=</span><span>15</span>)
<span>Instant</span>(<span>2024</span><span>-</span><span>07</span><span>-</span><span>04</span> <span>10</span>:<span>30</span>:<span>00</span><span>Z</span>)

<span># Formatting &amp; parsing common formats (ISO8601, RFC3339, RFC2822)</span>
<span>&gt;</span><span>&gt;&gt;</span> <span>now</span>.<span>format_rfc2822</span>()
<span>&#34;Thu, 04 Jul 2024 10:36:56 GMT&#34;</span>

<span># If you must: you can convert to/from the standard lib</span>
<span>&gt;</span><span>&gt;&gt;</span> <span>now</span>.<span>py_datetime</span>()
<span>datetime</span>.<span>datetime</span>(<span>2024</span>, <span>7</span>, <span>4</span>, <span>10</span>, <span>36</span>, <span>56</span>, <span>tzinfo</span><span>=</span><span>datetime</span>.<span>timezone</span>.<span>utc</span>)</pre></div>
<p dir="auto">Read more in the <a href="https://whenever.readthedocs.io/en/latest/overview.html" rel="nofollow">feature overview</a>
or <a href="https://whenever.readthedocs.io/en/latest/api.html" rel="nofollow">API reference</a>.</p>

<ul dir="auto">
<li>
<p dir="auto">🧪 <strong>0.x</strong>: get to feature-parity, process feedback, and tweak the API:</p>
<ul dir="auto">
<li>✅ Datetime classes</li>
<li>✅ Deltas</li>
<li>✅ Date and time of day (separate from datetime)</li>
<li>✅ Implement Rust extension for performance</li>
<li>🚧 Tweaks to the delta API</li>
</ul>
</li>
<li>
<p dir="auto">🔒 <strong>1.0</strong>: API stability and backwards compatibility</p>
<ul dir="auto">
<li>🚧 Customizable parsing and formatting</li>
<li>🚧 Intervals</li>
<li>🚧 Ranges and recurring times</li>
<li>🚧 Parsing leap seconds</li>
</ul>
</li>
</ul>

<ul dir="auto">
<li>Supports the proleptic Gregorian calendar between 1 and 9999 AD</li>
<li>Timezone offsets are limited to whole seconds (consistent with IANA TZ DB)</li>
<li>No support for leap seconds (consistent with industry standards and other modern libraries)</li>
</ul>
<div dir="auto"><h2 tabindex="-1" dir="auto">Versioning and compatibility policy</h2><a id="user-content-versioning-and-compatibility-policy" aria-label="Permalink: Versioning and compatibility policy" href="#versioning-and-compatibility-policy"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><strong>Whenever</strong> follows semantic versioning.
Until the 1.0 version, the API may change with minor releases.
Breaking changes will be meticulously explained in the changelog.
Since the API is fully typed, your typechecker and/or IDE
will help you adjust to any API changes.</p>
<blockquote>
<p dir="auto"><g-emoji alias="warning">⚠️</g-emoji> <strong>Note</strong>: until 1.x, pickled objects may not be unpicklable across
versions. After 1.0, backwards compatibility of pickles will be maintained
as much as possible.</p>
</blockquote>

<p dir="auto"><strong>Whenever</strong> is licensed under the MIT License.
The binary wheels contain Rust dependencies which are licensed under
similarly permissive licenses (MIT, Apache-2.0, and others).
For more details, see the licenses included in the distribution.</p>

<p dir="auto">This project is inspired by—and borrows most concepts from—the following projects. Check them out!</p>
<ul dir="auto">
<li><a href="https://tc39.es/proposal-temporal/docs/" rel="nofollow">Temporal</a></li>
<li><a href="https://nodatime.org/" rel="nofollow">Noda Time</a> and <a href="https://www.joda.org/joda-time/" rel="nofollow">Joda Time</a></li>
</ul>
<p dir="auto">The benchmark comparison graph is based on the one from the <a href="https://github.com/astral-sh/ruff">Ruff</a> project.
For timezone data, <strong>Whenever</strong> uses Python&#39;s own <code>zoneinfo</code> module.</p>
</article></div></div>
  </body>
</html>
