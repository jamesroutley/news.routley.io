<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://linuxtldr.com/file-descriptors-linux/">Original</a>
    <h1>What Are File Descriptors in Linux</h1>
    
    <div id="readability-page-1" class="page"><div itemprop="text"><p>In this article, you will learn everything about file descriptors, like their uses in Linux, what a file descriptor table is, how to view the file descriptors under a specific process, and how to change the limit of a file descriptor in Linux.</p><h2><span id="What_are_File_Descriptors_in_Linux"></span>What are File Descriptors in Linux?<span></span></h2><p>A file descriptor is a positive integer that acts as a unique identifier (or handle) for “files” and other I/O resources, such as pipes, sockets, blocks, devices, or terminal I/O.</p><p>All the file descriptor records are kept in a file descriptor table in the kernel. When a file is opened, a new file descriptor (or integer value) is given to that file in the file descriptor table.</p><p>For example, if you open a “<code>example_file1.txt</code>” file (which is nothing but a process), it will be allocated with the available file descriptor (for example, 101), and a new entry will be created in the file descriptor table.</p><p>And when you open another file like “<code>example_file2.txt</code>“, it will be allocated to another available file descriptor like 102, and another entry will be created in the file descriptor table.</p><figure><table><thead><tr><th>File Descriptor</th><th>Process</th></tr></thead><tbody><tr><td>101</td><td>example_file1.txt</td></tr><tr><td>102</td><td>example_file2.txt</td></tr></tbody></table></figure><p>The file descriptor for the referenced file will be available for use by another process once you close the file.</p><p>So, when you open hundreds of files or other I/O resources in your Linux system, there will be 100 entries in the file descriptor table, and each entry will reference a unique file descriptor (or integer value like 100, 102, 103…) to identify the file.</p><h2><span id="What_is_the_File_Descriptor_Table_in_Linux"></span>What is the File Descriptor Table in Linux?<span></span></h2><p>When a process or I/O device makes a successful request, the kernel returns a file descriptor to that process and keeps the list of current and all running process file descriptors in the file descriptor table, which is somewhere in the kernel.</p><p>Now, your process might depend on other system resources like input and output; as this event is also a process, it also has a file descriptor, which will be attached to your process in the file descriptor table.</p><p>Each file descriptor in the file descriptor table points to an entry in the kernel’s global file table. The file table entry maintains the record of file (or other I/O resource) modes like (<code>r</code>)ead, (<code>w</code>)rite, and (<code>e</code>)xecute.</p><ul><li><a href="https://linuxtldr.com/inode-linux/" target="_blank" rel="noreferrer noopener">What is inode in Linux?</a></li></ul><p>Also, the file table entry points to a third table known as the inode table that points to actual file information like size, modification date, pointer, etc.</p><div><figure><img data-lazyloaded="1" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDI0IiBoZWlnaHQ9IjcxMCIgdmlld0JveD0iMCAwIDEwMjQgNzEwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBzdHlsZT0iZmlsbDojY2ZkNGRiO2ZpbGwtb3BhY2l0eTogMC4xOyIvPjwvc3ZnPg==" fetchpriority="high" decoding="async" width="1024" height="710" data-src="https://linuxtldr.com/wp-content/uploads/2022/12/Kernel-table-1024x710.webp" alt="Kernel table" data-srcset="https://linuxtldr.com/wp-content/uploads/2022/12/Kernel-table-1024x710.webp 1024w, https://linuxtldr.com/wp-content/uploads/2022/12/Kernel-table-300x208.webp 300w, https://linuxtldr.com/wp-content/uploads/2022/12/Kernel-table-768x532.webp 768w, https://linuxtldr.com/wp-content/uploads/2022/12/Kernel-table.webp 1340w" data-sizes="(max-width: 1024px) 100vw, 1024px"/></figure></div><h2><span id="Predefined_File_Descriptors"></span>Predefined File Descriptors<span></span></h2><p>By default, three types of standard POSIX file descriptors exist in the file descriptor table, and you might already be familiar with them as <a href="https://linuxtldr.com/understanding-streams-in-linux/" target="_blank" rel="noreferrer noopener">data streams in Linux</a>:</p><figure><table><thead><tr><th>File Descriptor</th><th>Name</th><th>Abbreviation</th></tr></thead><tbody><tr><td><code>0</code></td><td>Standard Input</td><td>stdin</td></tr><tr><td><code>1</code></td><td>Standard Output</td><td>stdout</td></tr><tr><td><code>2</code></td><td>Standard Error</td><td>stderr</td></tr></tbody></table></figure><p>Apart from them, every other process has its own set of file descriptors, but few of them (except for some daemons) also utilize the above-mentioned file descriptors to handle input, output, and errors for the process.</p><p>To make sure that the process is using the above file descriptor, just look for the above file descriptor (in integer format) under “<code>/proc/PID/fd/</code>“, where PID stands for “process identifier.”</p><p>For example, I’ve started the GEDIT editor on my system, which uses all of the file descriptors mentioned above, as shown.</p><div><figure><img data-lazyloaded="1" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDI0IiBoZWlnaHQ9IjYzNSIgdmlld0JveD0iMCAwIDEwMjQgNjM1Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBzdHlsZT0iZmlsbDojY2ZkNGRiO2ZpbGwtb3BhY2l0eTogMC4xOyIvPjwvc3ZnPg==" decoding="async" width="1024" height="635" data-src="https://linuxtldr.com/wp-content/uploads/2022/12/Checking-the-predifned-file-descriptor-for-a-process-1024x635.webp" alt="Checking the predefined file descriptor for a process" data-srcset="https://linuxtldr.com/wp-content/uploads/2022/12/Checking-the-predifned-file-descriptor-for-a-process-1024x635.webp 1024w, https://linuxtldr.com/wp-content/uploads/2022/12/Checking-the-predifned-file-descriptor-for-a-process-300x186.webp 300w, https://linuxtldr.com/wp-content/uploads/2022/12/Checking-the-predifned-file-descriptor-for-a-process-768x476.webp 768w, https://linuxtldr.com/wp-content/uploads/2022/12/Checking-the-predifned-file-descriptor-for-a-process.webp 1184w" data-sizes="(max-width: 1024px) 100vw, 1024px"/></figure></div><h2><span id="List_all_of_a_Running_Processs_File_Descriptors"></span>List all of a Running Process’s File Descriptors<span></span></h2><p>As you just learned, each running process in Linux has its own set of file descriptors, but it also uses others to identify the specific file when communicating with kernel space via system calls or library calls.</p><h3><span id="Find_the_Process_ID_or_PID"></span>Find the Process ID (or PID)<span></span></h3><p>First, find out your process identifier (or PID) using the <a href="https://linuxtldr.com/ps-command/" target="_blank" rel="noreferrer noopener">ps command</a> before viewing the file descriptors under it.</p><pre><code>$ ps aux | grep gedit</code></pre><p>Replace “<code>gedit</code>” with your running process name, or you can place “<code>$$</code>” to pass the current bash session.</p><div><figure><img data-lazyloaded="1" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDI0IiBoZWlnaHQ9IjIxOCIgdmlld0JveD0iMCAwIDEwMjQgMjE4Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBzdHlsZT0iZmlsbDojY2ZkNGRiO2ZpbGwtb3BhY2l0eTogMC4xOyIvPjwvc3ZnPg==" decoding="async" width="1024" height="218" data-src="https://linuxtldr.com/wp-content/uploads/2022/12/Finding-the-PID-for-the-referenced-1024x218.webp" alt="Finding the PID for the referenced process" data-srcset="https://linuxtldr.com/wp-content/uploads/2022/12/Finding-the-PID-for-the-referenced-1024x218.webp 1024w, https://linuxtldr.com/wp-content/uploads/2022/12/Finding-the-PID-for-the-referenced-300x64.webp 300w, https://linuxtldr.com/wp-content/uploads/2022/12/Finding-the-PID-for-the-referenced-768x164.webp 768w, https://linuxtldr.com/wp-content/uploads/2022/12/Finding-the-PID-for-the-referenced.webp 1192w" data-sizes="(max-width: 1024px) 100vw, 1024px"/></figure></div><p>Now, you have two ways to list the file descriptors under a specific process, followed by:</p><h3><span id="Using_the_ls_command"></span>Using the ls command<span></span></h3><p>List all of the file descriptors and the files they refer to under a certain PID by listing the content of the “<code>/proc/PID/fd/</code>” path, where PID is the process ID, using the <a href="https://linuxtldr.com/ls-command/" target="_blank" rel="noreferrer noopener">ls command</a>.</p><ul><li><a href="https://linuxtldr.com/proc-file-system/" target="_blank" rel="noreferrer noopener">Everything About /proc File System in Linux</a></li></ul><pre><code>$ ls -la /proc/11472/fd/</code></pre><p>Output:</p><div><figure><img data-lazyloaded="1" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDI0IiBoZWlnaHQ9IjU2MiIgdmlld0JveD0iMCAwIDEwMjQgNTYyIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBzdHlsZT0iZmlsbDojY2ZkNGRiO2ZpbGwtb3BhY2l0eTogMC4xOyIvPjwvc3ZnPg==" loading="lazy" decoding="async" width="1024" height="562" data-src="https://linuxtldr.com/wp-content/uploads/2022/12/Listing-the-process-d-1024x562.webp" alt="Listing the process file descriptors using the ls command" data-srcset="https://linuxtldr.com/wp-content/uploads/2022/12/Listing-the-process-d-1024x562.webp 1024w, https://linuxtldr.com/wp-content/uploads/2022/12/Listing-the-process-d-300x165.webp 300w, https://linuxtldr.com/wp-content/uploads/2022/12/Listing-the-process-d-768x421.webp 768w, https://linuxtldr.com/wp-content/uploads/2022/12/Listing-the-process-d.webp 1189w" data-sizes="(max-width: 1024px) 100vw, 1024px"/></figure></div><h3><span id="Using_the_lsof_command"></span>Using the lsof command<span></span></h3><p>The lsof command is used to list the information about running processes in the system and can also be used to list the file descriptor under a specific PID.</p><p>For that, use the “<code>-d</code>” flag to specify a range of file descriptors, with the “<code>-p</code>” option specifying the PID. To combine this selection, use the “<code>-a</code>” flag.</p><pre><code>$ lsof -a -d 0-2147483647 -p 11472</code></pre><p>Output:</p><div><figure><img data-lazyloaded="1" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDI0IiBoZWlnaHQ9IjQzNyIgdmlld0JveD0iMCAwIDEwMjQgNDM3Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBzdHlsZT0iZmlsbDojY2ZkNGRiO2ZpbGwtb3BhY2l0eTogMC4xOyIvPjwvc3ZnPg==" loading="lazy" decoding="async" width="1024" height="437" data-src="https://linuxtldr.com/wp-content/uploads/2022/12/Listing-the-process-file-descriptors-using-the-lsof-command-1024x437.webp" alt="Listing the process file descriptors using the lsof command" data-srcset="https://linuxtldr.com/wp-content/uploads/2022/12/Listing-the-process-file-descriptors-using-the-lsof-command-1024x437.webp 1024w, https://linuxtldr.com/wp-content/uploads/2022/12/Listing-the-process-file-descriptors-using-the-lsof-command-300x128.webp 300w, https://linuxtldr.com/wp-content/uploads/2022/12/Listing-the-process-file-descriptors-using-the-lsof-command-768x327.webp 768w, https://linuxtldr.com/wp-content/uploads/2022/12/Listing-the-process-file-descriptors-using-the-lsof-command.webp 1323w" data-sizes="(max-width: 1024px) 100vw, 1024px"/></figure></div><h2><span id="What_is_the_Purpose_of_File_Descriptors_in_the_First_Place"></span>What is the Purpose of File Descriptors in the First Place?<span></span></h2><p>The file descriptor, along with the file table, keep track of each running process’s permissions in your system and maintain data integrity.</p><p>A running process can inherit the functionality of another process by inheriting its file descriptor, as you just learned in this article.</p><h2><span id="What_Happens_If_You_Run_Out_of_File_Descriptors"></span><strong>What Happens If You Run Out of File Descriptors?</strong><span></span></h2><p>This is crucial because a file descriptor is an integer value that the kernel returns to the process (or other I/O resource) after a successful attempt to open a file.</p><p>There is a limit to the number of file descriptors (or integer values) that can be given to a process. When that limit is reached, data can be lost.</p><p>In Linux, generally, there are two types of file descriptors: process-level file descriptors and system-level file descriptors.</p><h3><span id="Process-Level_File_Descriptor_Limits"></span>Process-Level File Descriptor Limits<span></span></h3><p>Check the current process-level file descriptor limit using the ulimit command.</p><pre><code>$ ulimit -n</code></pre><p>Output:</p><div><figure><img data-lazyloaded="1" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDI0IiBoZWlnaHQ9IjExNiIgdmlld0JveD0iMCAwIDEwMjQgMTE2Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBzdHlsZT0iZmlsbDojY2ZkNGRiO2ZpbGwtb3BhY2l0eTogMC4xOyIvPjwvc3ZnPg==" loading="lazy" decoding="async" width="1024" height="116" data-src="https://linuxtldr.com/wp-content/uploads/2022/12/Checking-the-system-level-file-descriptor-limits-1024x116.webp" alt="Checking the process-level file descriptor limits" data-srcset="https://linuxtldr.com/wp-content/uploads/2022/12/Checking-the-system-level-file-descriptor-limits-1024x116.webp 1024w, https://linuxtldr.com/wp-content/uploads/2022/12/Checking-the-system-level-file-descriptor-limits-300x34.webp 300w, https://linuxtldr.com/wp-content/uploads/2022/12/Checking-the-system-level-file-descriptor-limits-768x87.webp 768w, https://linuxtldr.com/wp-content/uploads/2022/12/Checking-the-system-level-file-descriptor-limits.webp 1321w" data-sizes="(max-width: 1024px) 100vw, 1024px"/></figure></div><p>Reset the limit by adding a custom positive number after the command.</p><pre><code>$ ulimit -n 3276800</code></pre><p>Note that non-root users are also able to use the above command to change the process-level limits (&lt;Kernel 2.4.x), but you need to add the following lines in “<code>/etc/security/limits.conf</code>” to assign the user modification permission:</p><pre><code>soft nofile 2048
hard nofile 8192</code></pre><h3><span id="System-Level_File_Descriptor_Limits"></span>System-Level File Descriptor Limits<span></span></h3><p>Check the limit of the system-level descriptor using the <a href="https://linuxtldr.com/cat-command/" target="_blank" rel="noreferrer noopener">cat command</a>.</p><pre><code>$ cat /proc/sys/fs/file-max</code></pre><p>Output:</p><div><figure><img data-lazyloaded="1" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDI0IiBoZWlnaHQ9IjExOCIgdmlld0JveD0iMCAwIDEwMjQgMTE4Ij48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBzdHlsZT0iZmlsbDojY2ZkNGRiO2ZpbGwtb3BhY2l0eTogMC4xOyIvPjwvc3ZnPg==" loading="lazy" decoding="async" width="1024" height="118" data-src="https://linuxtldr.com/wp-content/uploads/2022/12/Checking-the-system-level-file-descriptor-1024x118.webp" alt="Checking the system-level file descriptor limits" data-srcset="https://linuxtldr.com/wp-content/uploads/2022/12/Checking-the-system-level-file-descriptor-1024x118.webp 1024w, https://linuxtldr.com/wp-content/uploads/2022/12/Checking-the-system-level-file-descriptor-300x35.webp 300w, https://linuxtldr.com/wp-content/uploads/2022/12/Checking-the-system-level-file-descriptor-768x88.webp 768w, https://linuxtldr.com/wp-content/uploads/2022/12/Checking-the-system-level-file-descriptor.webp 1320w" data-sizes="(max-width: 1024px) 100vw, 1024px"/></figure></div><p>Modify the file with the new value by using the “<code>&gt;</code>” <a href="https://linuxtldr.com/understanding-streams-in-linux/" target="_blank" rel="noreferrer noopener">redirection symbol</a>.</p><pre><code>$ echo 90000 &gt; /proc/sys/fs/file-max</code></pre><p>After modifying the above file, modify the value in the “<code>nr_open</code>” file.</p><pre><code>$ echo &#34;50000&#34; &gt; /proc/sys/fs/nr_open</code></pre><h2><span id="Final_Tips"></span>Final Tips!<span></span></h2><p>I hope this article makes it clear for you to understand the workings of file descriptors in Linux computing.</p><p>If you have any questions or queries related to this topic, then feel free to ask them in the comment section.</p></div></div>
  </body>
</html>
