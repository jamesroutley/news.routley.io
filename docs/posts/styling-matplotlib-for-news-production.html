<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://corinfaife.co/posts/matplotlib-styling">Original</a>
    <h1>Styling matplotlib for news production</h1>
    
    <div id="readability-page-1" class="page"><div id="__next" data-reactroot=""><article>
<p>As a data journalist at <a href="https://www.afp.com/en">AFP</a>, my daily workflow often uses Python for data analysis and exploratory visualization, then finishes by handing over an SVG to a graphic designer to be refined for publication.</p>
<p>As time goes on, I&#39;ve been learning how to tweak <a href="https://matplotlib.org/">Matplotlib</a> styling to reduce the gap between what I export and a publishable (or near-publishable) graphic in our AFP house style.</p>
<p>So we can go from this:</p>
<p><img src="https://corinfaife.co/images/2024/chart/election-turnout-basic.svg" alt="Basic election chart"/></p>
<p>To this:</p>
<p><img src="https://corinfaife.co/images/2024/chart/election-turnout-afp.svg" alt="AFP styled election chart"/></p>
<p>Though matplotlib charts look very dry and academic out-of-the-box, I&#39;m slowly coming to appreciate the level of control and flexibility available underneat the hood.</p>
<p>Here&#39;s a breakdown of the styling tweaks I&#39;m currently using.</p>
<h3>Set chart dimensions and line width</h3>
<p>AFP&#39;s two-column graphic layout corresponds to a 6x4 image ratio, which we define before drawing the chart:</p>
<pre><code>plt.figure(figsize=(6, 4))
</code></pre>
<p>We&#39;ll then draw a simple line chart following the example above –– US voter turnout over time. When we draw the chart we&#39;ll want to increase the line width slightly:</p>
<pre><code>plt.plot(df[&#39;YEAR&#39;],
         df[&#39;TURNOUT_RATE_PRES&#39;],
          linewidth=2)
</code></pre>
<p><img src="https://corinfaife.co/images/2024/chart/election-turnout-1.svg" alt="AFP election chart 1"/></p>
<h3>Remove frame, calibrate axes</h3>
<p>We&#39;re going to do a lot of the chart styling by modifying attributes of the <a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes">Axes object</a>.</p>
<p>First we call the <code>.gca()</code> function to <em>get current axes</em> of the plot and assign that to a variable. We can then use various methods of the <a href="https://matplotlib.org/stable/api/axes_api.html">axes api</a> to modify plot characteristics – like setting the frame on or off.</p>
<pre><code>ax = plt.gca()
ax.set_frame_on(False)
</code></pre>
<p><img src="https://corinfaife.co/images/2024/chart/election-turnout-2.svg" alt="AFP election chart 2"/></p>
<p>We&#39;re also going to override the default y axis limits to make sure that we have a value tick above the highest value and below the lowest value of the line.</p>
<pre><code>ax.set_ylim([0.44, 0.75])
</code></pre>
<p>While we&#39;re working on the y axis, we&#39;ll also want to change the decimal score to a percentage. We do this by first getting a reference to the y ticks, then using Python&#39;s <code>format()</code> function to <a href="https://stackoverflow.com/questions/5306756/how-to-print-a-percentage-value">display the decimal string as percent</a>.</p>
<pre><code>ticks = ax.get_yticks()
ax.set_yticklabels([&#39;{:,.0%}&#39;.format(x) for x in ticks])
</code></pre>
<p><img src="https://corinfaife.co/images/2024/chart/election-turnout-3.svg" alt="AFP election chart 3"/></p>
<h3>Style grid lines and ticks</h3>
<p>AFP line charts and column charts generally use dashed full-width grid lines on the y axis of the chart.</p>
<p>First we&#39;ll switch off the y axis ticks, and tuck the x axis ticks closer to the chart. Then we&#39;ll <a href="https://e2eml.school/matplotlib_ticks#grid">draw a full width custom grid line</a> in grey:</p>
<pre><code>plt.tick_params(axis=&#39;y&#39;, left=False)
plt.tick_params(axis=&#39;x&#39;, length=5, direction=&#39;in&#39;, )

ax.grid(axis=&#34;y&#34;, 
        color=&#34;grey&#34;, 
        alpha=.5, 
        linewidth=.5, 
        linestyle=&#34;--&#34;)
</code></pre>
<p><img src="https://corinfaife.co/images/2024/chart/election-turnout-4.svg" alt="AFP election chart 4"/></p>
<h3>Define title, subtitle, and footnote</h3>
<p>AFP charts are titled, usually use a subheading, and always include source attribution.</p>
<p>To match the house style we can use matplotlib&#39;s <a href="https://matplotlib.org/stable/api/matplotlib_configuration_api.html#default-values-and-styling">rcParams</a> settings to choose a font, in this case Adobe&#39;s <a href="https://fonts.adobe.com/fonts/source-sans">Source Sans</a>. We&#39;ll also set <code>svg.fonttype</code> to <code>none</code>, which instructs matplotlib not to convert text into paths when saving an SVG.</p>
<pre><code>plt.rcParams.update(
                {&#39;font.family&#39;: &#39;Source Sans Pro&#39;,
                &#34;svg.fonttype&#34;: &#39;none&#39;
                })
</code></pre>
<p>Then we&#39;ll use <code>plt.suptitle()</code> (&#34;supertitle&#34;) for the main heading, and <code>title()</code> for the subheading.</p>
<p>We need to set x and y values to position each of these correctly, though this can be confusing because each one uses a different reference system – <code>suptitle()</code> needs a y value of 1 or greater to appear at the top of the chart, whereas <code>title()</code> is at the top by default:</p>
<pre><code>plt.suptitle(&#34;US election turnout&#34;,
             x=0.1,
             y=1.02,
             fontsize=20, 
             fontweight=&#39;bold&#39;,
             ha=&#39;left&#39;)
plt.title(&#34;Voter turnout in the 2024 election was still among the highest since 1900&#34;,
          x= -.03,
          pad=15,
          fontsize=10,
          fontweight=&#39;semibold&#39;,
          ha=&#39;left&#39;,
          )
</code></pre>
<p>Lastly we use <code>plt.figtext()</code> to add a footnote with the source. As with <code>suptitle()</code>, we&#39;re giving [x,y] positioning coordinates from the bottom left of the figure.</p>
<pre><code>plt.figtext(0.1, 0.01, 
            &#34;Source: UF Election Lab&#34;, 
            ha=&#34;left&#34;, 
            fontsize=8)
</code></pre>
<p>And here&#39;s the finished result again:</p>
<p><img src="https://corinfaife.co/images/2024/chart/election-turnout-afp-final.svg" alt="AFP election chart final"/></p>
<p>For complete code to replicate this chart, see <a href="https://gist.github.com/corintxt/71e691b9a7d5f677e3630a15af46361b">this GitHub gist</a>.</p>
<small><time>2024</time> © Corin Faife.<a href="https://corinfaife.co/feed.xml">RSS</a></small></article></div></div>
  </body>
</html>
