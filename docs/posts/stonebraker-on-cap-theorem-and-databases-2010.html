<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://perspectives.mvdirona.com/2010/04/stonebraker-on-cap-theorem-and-databases/">Original</a>
    <h1>Stonebraker on CAP theorem and Databases (2010)</h1>
    
    <div id="readability-page-1" class="page"><div>	
					<p><a href="http://en.wikipedia.org/wiki/Michael_Stonebraker"><SPAN color="#0000ff" size="3" face="Calibri">Mike Stonebraker</SPAN></a><SPAN color="#000000" size="3" face="Calibri"> published an excellent blog posting yesterday at the </SPAN><a href="http://cacm.acm.org/"><SPAN color="#0000ff" size="3" face="Calibri">CACM site</SPAN></a><SPAN color="#000000" size="3" face="Calibri">: </SPAN><a href="http://cacm.acm.org/blogs/blog-cacm/83396-errors-in-database-systems-eventual-consistency-and-the-cap-theorem/fulltext"><SPAN color="#0000ff" size="3" face="Calibri">Errors in Database Systems, Eventual Consistency, and the CAP Theorem</SPAN></a><SPAN color="#000000" size="3" face="Calibri">. In this article, Mike challenges the application of </SPAN><a href="http://www.eecs.berkeley.edu/~brewer/"><SPAN color="#0000ff" size="3" face="Calibri">Eric Brewer’s</SPAN></a><SPAN color="#000000" size="3" face="Calibri"> </SPAN><a href="http://en.wikipedia.org/wiki/CAP_theorem"><SPAN color="#0000ff" size="3" face="Calibri">CAP Theorem</SPAN></a><SPAN color="#000000" size="3" face="Calibri"> by the </SPAN><a href="http://en.wikipedia.org/wiki/NoSQL"><SPAN color="#0000ff" size="3" face="Calibri">NoSQL</SPAN></a><SPAN color="#000000"><SPAN size="3"><SPAN face="Calibri"> database community. Many of the high-scale NoSQL system implementers have argued that the CAP theorem forces them to go with an eventual consistent model. <!--?xml:namespace prefix = o ns = "urn:schemas-microsoft-com:office:office" /--><o:p></o:p></SPAN></SPAN></SPAN></p>    <p><SPAN color="#000000" size="3" face="Calibri">Mike challenges this assertion pointing that some common database errors are not avoided by eventual consistency and CAP really doesn’t apply in these cases. If you have an application error, administrative error, or database implementation bug that losses data, then it is simply gone unless you have an offline copy. This, by the way, is why I’m a big fan of deferred delete.<span> </span>This is a technique where deleted items are marked as deleted but not garbage collected until some days or preferably weeks later.<span> </span>Deferred delete is not full protection but it has saves my butt more than once and I’m a believer. See </SPAN><a href="https://mvdirona.com/jrh/talksAndPapers/JamesRH_Lisa.pdf"><SPAN color="#0000ff" size="3" face="Calibri">On Designing and Deploying Internet-Scale Services</SPAN></a><SPAN color="#000000"><SPAN size="3"><SPAN face="Calibri"> for more detail.<o:p></o:p></SPAN></SPAN></SPAN></p>    <p><SPAN color="#000000" size="3" face="Calibri">CAP and the application of eventual consistency doesn’t directly protect us against application or database implementation errors. And, in the case of a large scale disaster where the cluster is lost entirely, again, neither eventual consistency nor CAP offer a solution. Mike also notes that network partitions are fairly rare.<span> </span>I could quibble a bit on this one. Network partitions should be rare but net gear continues to cause more issues than it should. Networking configuration errors, black holes, dropped packets, and brownouts, remain a popular discussion point in post mortems industry-wide. I see this improving over the next 5 years but we have a long way to go. In </SPAN><a href="https://perspectives.mvdirona.com/2009/12/19/NetworkingTheLastBastionOfMainframeComputing.aspx"><SPAN color="#0000ff" size="3" face="Calibri">Networking: the Last Bastion of Mainframe Computing</SPAN></a><SPAN color="#000000"><SPAN size="3"><SPAN face="Calibri">, I argue that net gear is still operating on the mainframe business model: large, vertically integrated and expensive equipment, deployed in pairs. When it comes to redundancy at scale, 2 is a poor choice.<o:p></o:p></SPAN></SPAN></SPAN></p>    <p><SPAN color="#000000" size="3" face="Calibri">Mike’s article questions whether eventual consistency is really the right answer for these workloads. I made some similar points in “</SPAN><a href="https://perspectives.mvdirona.com/2010/02/24/ILoveEventualConsistencyBut.aspx"><SPAN color="#0000ff" size="3" face="Calibri">I love eventual consistency but…</SPAN></a><SPAN color="#000000" size="3" face="Calibri">” In that posting, I argued that many applications are much easier to implement with full consistency and full consistency can be practically implemented at high scale. In fact, </SPAN><a href="http://aws.amazon.com/simpledb/"><SPAN color="#0000ff" size="3" face="Calibri">Amazon SimpleDB</SPAN></a><SPAN size="3"><SPAN color="#000000"><SPAN face="Calibri"> recently announced support for full consistency. Apps needed full consistency are now easier to write and, where only eventual consistency is needed, its available as well.<o:p></o:p></SPAN></SPAN></SPAN></p>    <p><SPAN size="3"><SPAN color="#000000"><SPAN face="Calibri">Don’t throw full consistency out too early. For many applications, it is both affordable and helps reduce application implementation errors.<o:p></o:p></SPAN></SPAN></SPAN></p>    <p><SPAN size="3"><SPAN color="#000000"><SPAN face="Calibri"><span>                                </span>–jrh</SPAN></SPAN></SPAN></p>    <p><SPAN color="#000000" size="3" face="Calibri">Thanks to </SPAN><a href="http://www.linkedin.com/in/dsingh"><SPAN color="#0000ff" size="3" face="Calibri">Deepak Singh</SPAN></a><SPAN size="3"><SPAN color="#000000"><SPAN face="Calibri"> for pointing me to this article.<o:p></o:p></SPAN></SPAN></SPAN></p>    <p><a name="_MailAutoSig"><span><SPAN color="#000000"><SPAN face="Calibri">James Hamilton<o:p></o:p></SPAN></SPAN></span></a></p>  <p><span><span><SPAN color="#000000" face="Calibri">e: </SPAN></span></span><a href="mailto:jrh@mvdirona.com"><SPAN face="Calibri"><span><span>jrh@mvdirona.com</span></span><span></span></SPAN></a><span><span><o:p></o:p></span></span></p>  <p><span><span><SPAN color="#000000" face="Calibri">w: </SPAN></span></span><a href="https://mvdirona.com/"><SPAN face="Calibri"><span><span>http://www.mvdirona.com</span></span><span></span></SPAN></a><span><span><o:p></o:p></span></span></p>  <p><span><span><SPAN color="#000000" face="Calibri">b: </SPAN></span></span><a href="https://blog.mvdirona.com/"><SPAN face="Calibri"><span><span>http://blog.mvdirona.com</span></span><span></span></SPAN></a><span><span><SPAN color="#000000" face="Calibri"> / </SPAN></span></span><a href="https://perspectives.mvdirona.com/"><SPAN face="Calibri"><span><span>http://perspectives.mvdirona.com</span></span><span></span></SPAN></a><SPAN color="#000000"><SPAN face="Calibri"><span><span> </span></span><span><span><o:p></o:p></span></span></SPAN></SPAN></p>
				</div></div>
  </body>
</html>
