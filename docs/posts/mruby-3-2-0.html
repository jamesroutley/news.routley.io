<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://mruby.org/releases/2023/02/24/mruby-3.2.0-released.html">Original</a>
    <h1>mruby 3.2.0</h1>
    
    <div id="readability-page-1" class="page"><div>
      <div>

        <div>

          

<p>We are announcing the first stable release of mruby 3.2 series - <a href="https://github.com/mruby/mruby/releases/tag/3.2.0">mruby 3.2.0</a>.</p>

<p>Describes the new features and changes in mruby 3.2.</p>

<hr/>



<ul>
  <li>Now <code>a::B = c</code> should evaluate <code>a</code> then <code>c</code>.</li>
  <li>Anonymous arguments <code>*</code>, <code>**</code>, <code>&amp;</code> can be passed for forwarding.</li>
  <li>Multi-precision integer is available now via <code>mruby-bigint</code> gem.</li>
</ul>



<ul>
  <li><code>OP_ARYDUP</code> was renamed to <code>OP_ARYSPLAT</code>. The instruction name
was changed but instruction number and basic behavior have not
changed (except that <code>ARYDUP nil</code> makes <code>[]</code>).</li>
</ul>



<h2 id="mruby"><code>mruby</code></h2>

<ul>
  <li><code>-b</code> only specifies the script is the binary. The files loaded by <code>-r</code> are not affected by the option.</li>
  <li><code>mruby</code> now loads complied binary if the suffix is <code>.mrb</code>.</li>
</ul>

<h2 id="mrbc"><code>mrbc</code></h2>

<ul>
  <li>Add <code>--no-optimize</code> option to disable optimization.</li>
</ul>



<h2 id="mruby-class-ext">mruby-class-ext</h2>

<ul>
  <li>Add <code>Class#subclasses</code> method.</li>
  <li>Add <code>Module#undefined_instance_methods</code> method.</li>
</ul>

<h2 id="new-bundled-gems">New bundled gems</h2>

<ul>
  <li>mruby-errno from [https://github.com/iij/mruby-errno.git]</li>
  <li>mruby-set from [https://github.com/yui-knk/mruby-set.git]</li>
  <li>mruby-dir from [https://github.com/iij/mruby-dir.git]</li>
  <li>mruby-data</li>
</ul>



<h2 id="mrb_vm_run-may-detach-top-level-local-variables-referenced-from-blocks"><code>mrb_vm_run()</code> may detach top-level local variables referenced from blocks</h2>

<p>When the <code>mrb_vm_run()</code> function (including <code>mrb_top_run()</code>) is called,
the previous top-level local variables referenced from blocks is detached under either of the following conditions.</p>

<ul>
  <li>If the <code>stack_keep</code> parameter is given as 0.</li>
  <li>If the number of variables in <code>irep</code> to be executed is less than the number of previous top-level local variables.</li>
</ul>

<p>This change also affects API functions such as <code>mrb_load_string()</code> and <code>mrb_load_file()</code>.
The conditions under which the previous top-level local variables referenced from blocks is detached in these functions are as follows:</p>

<ul>
  <li>If the function has no <code>mrbc_context</code> pointer parameter, or the <code>mrbc_context</code> pointer parameter is set to <code>NULL</code>.</li>
  <li>If the number of variables held in the <code>mrbc_context</code> pointer is less than the number of previous top-level local variables.</li>
</ul>

<p>Intentional reliance on previous behavior may cause compatibility problems in your application.</p>



<p>Following CVEs are fixed.</p>

<ul>
  <li><a href="https://nvd.nist.gov/vuln/detail/CVE-2022-0080">CVE-2022-0080</a></li>
  <li><a href="https://nvd.nist.gov/vuln/detail/CVE-2022-0240">CVE-2022-0240</a></li>
  <li><a href="https://nvd.nist.gov/vuln/detail/CVE-2022-0326">CVE-2022-0326</a></li>
  <li><a href="https://nvd.nist.gov/vuln/detail/CVE-2022-0631">CVE-2022-0631</a></li>
  <li><a href="https://nvd.nist.gov/vuln/detail/CVE-2022-0481">CVE-2022-0481</a></li>
  <li><a href="https://nvd.nist.gov/vuln/detail/CVE-2022-0525">CVE-2022-0525</a></li>
  <li><a href="https://nvd.nist.gov/vuln/detail/CVE-2022-0570">CVE-2022-0570</a></li>
  <li><a href="https://nvd.nist.gov/vuln/detail/CVE-2022-0614">CVE-2022-0614</a></li>
  <li><a href="https://nvd.nist.gov/vuln/detail/CVE-2022-0623">CVE-2022-0623</a></li>
  <li><a href="https://nvd.nist.gov/vuln/detail/CVE-2022-0630">CVE-2022-0630</a></li>
  <li><a href="https://nvd.nist.gov/vuln/detail/CVE-2022-0631">CVE-2022-0631</a></li>
  <li><a href="https://nvd.nist.gov/vuln/detail/CVE-2022-0632">CVE-2022-0632</a></li>
  <li><a href="https://nvd.nist.gov/vuln/detail/CVE-2022-0717">CVE-2022-0717</a></li>
  <li><a href="https://nvd.nist.gov/vuln/detail/CVE-2022-0890">CVE-2022-0890</a></li>
  <li><a href="https://nvd.nist.gov/vuln/detail/CVE-2022-1106">CVE-2022-1106</a></li>
  <li><a href="https://nvd.nist.gov/vuln/detail/CVE-2022-1212">CVE-2022-1212</a></li>
  <li><a href="https://nvd.nist.gov/vuln/detail/CVE-2022-1276">CVE-2022-1276</a></li>
  <li><a href="https://nvd.nist.gov/vuln/detail/CVE-2022-1286">CVE-2022-1286</a></li>
  <li><a href="https://nvd.nist.gov/vuln/detail/CVE-2022-1934">CVE-2022-1934</a></li>
</ul>

<hr/>

<p>We have done 1,243 commits to 270 files with 19,130 additions and 10,192 deletions since mruby 3.1.0. For more detail of the updates, <a href="https://github.com/mruby/mruby/compare/3.1.0...3.2.0">see Commit Log</a>.</p>

<p>Thanks to all the contributors who have worked on bug fixes and improvements in the release of <code>mruby 3.2.0</code>.</p>


        </div>
      </div>
    </div></div>
  </body>
</html>
