<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.nuclearsecrecy.com/2019/12/13/why-nukemap-isnt-on-google-maps-anymore/">Original</a>
    <h1>Why NUKEMAP isn&#39;t on Google Maps anymore (2019)</h1>
    
    <div id="readability-page-1" class="page"><div>
				<p>When I <a href="https://blog.nuclearsecrecy.com/2012/02/03/presenting-nukemap/">created the NUKEMAP in 2012</a>, the <a href="https://cloud.google.com/maps-platform/">Google Maps API</a> was <em>amazing</em>.<sup><a href="#footnote_1_6768" id="identifier_1_6768" title="For non-coders: an API is a code library that lets third-party developers use someone else’s services. So the Google Maps API lets you develop applications that use Google Maps: you can say, “load Google Maps into this part of the web page, add an icon to it, make the icon draggable, and when someone clicks a button over here, draw circles around that icon that go out to a given radius, and color the circles this way and that way.” That’s the basics of NUKEMAP’s functionality, more or less.">1</a></sup> It was the best thing in town for creating Javascript mapping mash-ups, cost <em>literally nothing</em>, had an active developer community that added new features on a regular basis, and actually seemed like it was interested in people using their product to develop cool, useful tools.</p>
<div id="attachment_6853"><p><a href="https://i0.wp.com/blog.nuclearsecrecy.com/wp-content/uploads/2019/12/Old-NUKEMAP.jpg?ssl=1"><img data-recalc-dims="1" decoding="async" aria-describedby="caption-attachment-6853" loading="lazy" src="https://i0.wp.com/blog.nuclearsecrecy.com/wp-content/uploads/2019/12/Old-NUKEMAP.jpg?w=600&amp;ssl=1" alt="At left, the original NUKEMAP from 2005; at right, the Google Maps NUKEMAP from 2012." srcset="https://i0.wp.com/blog.nuclearsecrecy.com/wp-content/uploads/2019/12/Old-NUKEMAP.jpg?resize=1024%2C411&amp;ssl=1 1024w, https://i0.wp.com/blog.nuclearsecrecy.com/wp-content/uploads/2019/12/Old-NUKEMAP.jpg?resize=600%2C241&amp;ssl=1 600w, https://i0.wp.com/blog.nuclearsecrecy.com/wp-content/uploads/2019/12/Old-NUKEMAP.jpg?resize=768%2C308&amp;ssl=1 768w, https://i0.wp.com/blog.nuclearsecrecy.com/wp-content/uploads/2019/12/Old-NUKEMAP.jpg?resize=1536%2C616&amp;ssl=1 1536w, https://i0.wp.com/blog.nuclearsecrecy.com/wp-content/uploads/2019/12/Old-NUKEMAP.jpg?w=1854&amp;ssl=1 1854w" sizes="auto, (max-width: 1000px) 100vw, 1000px"/></a></p><p id="caption-attachment-6853">NUKEMAPs of days gone by: On the left is the original NUKEMAP I made way back in March 2005, which used MapQuest screenshots (and was extremely limited, and never made public) and was done entirely in PHP. I made it for my own personal use and for teaching. At right, the remade original <a href="https://blog.nuclearsecrecy.com/2012/02/03/presenting-nukemap/">NUKEMAP from 2012</a>, which used the Google Maps API/Javascript.</p></div>
<p>Today, pretty much all of that is now untrue. The API codebase has stagnated in terms of <em>actually useful features</em> being added (many neat features have been removed or quietly deprecated; the new features being added are generally incremental and lame), which is really quite remarkable given that the Google Maps stand-alone website (the one you visit when you go to Google Maps to look up a map or location) has had a <em>lot</em> of neat features added to it (like its 3-D mode) that have <em>not</em> been ported to the API code (which is why <a href="https://nuclearsecrecy.com/nukemap3d/">NUKEMAP3D is effectively dead</a> — Google deprecated the Google Earth Plugin and has never replaced it, and no other code base has filled the gap).<sup><a href="#footnote_2_6768" id="identifier_2_6768" title="Before people e-mail me about how CesiumJS fills the Google Earth Plugin gap — it doesn’t, because it doesn’t give you the global coverage of 3D buildings that you need to make sense of the size of a mushroom cloud. If they change that someday, I’ll take the time to port the code, but I don’t see many signs that this is going to happen, because global 3D building shapes are still something that only Google seems to own. If you do want to render volumetric mushroom clouds in the stand-alone Google Earth program, there is a (still experimental and incomplete) feature in NUKEMAP for exporting cloud shapes as KMZ files. See the NUKEMAP3D page for more information on how to use this.">2</a></sup></p>
<p>But more importantly, the changes to the pricing model that have been recently put in place are, to put it lightly, <em>insane, </em>and <em>punishing</em> if you are an educational web developer that builds anything that people actually find useful.</p>
<p>NUKEMAP gets around 15,000 hits a day on a slow day, and around 200,000 hits a day per month, and has done this consistently for over 5 years (and it occasionally has spikes of several hundred thousand page views per day, when it goes viral for whatever reason). While that’s pretty impressive for an academic’s website, it’s what I would call “moderately popular” by Internet terms. I don’t think this puts the slightest strain on Google’s servers (who also run, like, <em>all of YouTube</em>). And from 2012 through 2016, Google didn’t charge a thing for this. Which was pretty generous, and perhaps unsustainable. But it encouraged a lot of experimentation, and something like NUKEMAP wouldn’t exist without that. </p>
<p>In 2016, they started charging. It wasn’t too bad — at most, my bill was around $200 a month. Even that is pretty hard to do out-of-pocket, but I’ve had the good fortune to be associated with an institution (my employers, the College of Arts and Letters at the Stevens Institute of Technology) that was willing to foot the bill. </p>
<p>But in 2018, Google changes its pricing model, and my bill jumped to more like $1,800 p<em>er month</em>. As in, over $20,000 a year. Which is several times my main hosting fees (for <em>all</em> of my websites).</p>
<p>I reached out to Google to find out why this was. Their <a href="https://cloud.google.com/maps-platform/pricing/sheet/">new pricing sheet</a> is… a little hard to make sense of. Which is sort of why I didn’t see this coming. They do have a “<a href="https://mapsplatformtransition.withgoogle.com/calculator">pricing calculator</a>,” though, that lets you see exactly how terrible the pricing scheme is, though it is a little tricky to find and requires having a Google account to access. But if you start playing with the “dynamic map loads” button (there are other charges, but that’s the big one) you can see how expensive it gets, quickly. I contacted Google for help in figuring all this out, and they fobbed me off onto a non-Google “valued partner” who was licensed to deal with corporations on volume pricing. Hard pass, sorry.</p>

<p>I know that Google in theory supports people using their products for “social causes,” and if one is at a non-profit (as I am), <a href="https://www.google.com/nonprofits/offerings/google-earth-and-maps.html">you can apply for a “grant”</a> to defray the costs, assuming Google assume’s you’re doing good. I don’t know how they feel about the NUKEMAP, but in any case, it doesn’t matter: people at educational institutions (even not-for-profit ones, like mine) are <a href="https://www.google.com/nonprofits/eligibility/"><em>disqualified</em></a> from applying. Why? Because Google wants to capture the educational market in a revenue-generating way, and so directs you to their <a href="https://edu.google.com/">Google for Education</a> site, which as you will quickly find is based on a very different sort of model. There’s no e-mail contact on the site, as an aside: you have to claim you are representing an entire educational institution (I am not) and that you are interested in implementing Google’s products on your campus (I am not), and if you do all this (as I did, just to get through to them) you can finally talk to them a bit.</p>
<p>There is <em>literally nothing</em> on the website that suggests there is any way to get Google Maps API credit, but they do have a way to request discounted access to the Google Cloud Platform, which appears to be some kind of machine-learning platform, and after sending an e-mail they did say that you could apply for Google Cloud Platform funds to be used for Google Maps API.</p>
<p>By which point I had already, in my heart, given up on Google. It’s just not worth it. Let me outline the reasons:</p>
<ul>
<li>They clearly don’t care about small developers. That much is pretty obvious if you’ve tried to develop with their products. Look, I get that licensing to big corporations is the money-maker. But Google pretends to be developing for more than just them… they just don’t follow through on those hopes.</li>
<li>They can’t distinguish between universities as entities, and academics as university researchers. There’s a big difference there, in terms of scale, goals, and resources. I don’t make university IT policy, I do research. </li>
<li>They are fickle. It’s not just the fact that they change their pricing schemes rapidly, it’s not just that they deprecate products willy-nilly. It’s that they push out new products, encourage communities to use them to make “amazing” things, and then don’t support them well over the long term. They let cool projects atrophy and die. Sometimes they sell them off to other companies (e.g., SketchUp), who then totally change them and the business model. Again, I get it: Google’s approach is throwing things at the wall, hoping they stick, and believes in disruption more than infrastructure, etc. etc. etc. But that makes it pretty hard to justify putting all of your eggs in their basket.</li>
<li>I don’t want to worry about whether Google will think my work is a “social good,” I don’t want to worry about re-applying every year, I don’t want to worry about the branch of Google that helps me out might vanish tomorrow, and so on. Too much uncertainty. Do you know how hard it is to get in contact with a real human being at Google? I’m not saying they’re impossible — they did help me waive some of the fees that came from me not understanding the pricing policy — but that took literally <em>months </em>to work out, and in the meantime they sent a collection agency after me. </li>
</ul>
<p>But most of all: today there are <em>perfectly viable alternatives</em>. Which is why I don’t understand their pricing model change, except in terms of, “they’ve decided to abandon small developers completely.” After a little scouting around, I decided that <strong><a href="https://www.mapbox.com/">MapBox</a></strong> completely fit the bill (and whose rates are more like what Google used to charge), and that <a href="https://leafletjs.com/">Leaflet</a>, an open-source Javascript library, could make for a very easy conversion. It took a little work to make the conversion, because Leaflet out of the box doesn’t support the drawing of great circles, but I <a href="https://github.com/nuclearsecrecy/Leaflet.greatCircle">wrote a plugin</a> that does it.</p>
<div id="attachment_6859"><p><a href="https://i0.wp.com/blog.nuclearsecrecy.com/wp-content/uploads/2019/12/nukemap.2.65.jpg?ssl=1"><img data-recalc-dims="1" decoding="async" aria-describedby="caption-attachment-6859" loading="lazy" src="https://i0.wp.com/blog.nuclearsecrecy.com/wp-content/uploads/2019/12/nukemap.2.65.jpg?w=600&amp;ssl=1" alt="Screenshot of NUKEMAP 2.65" srcset="https://i0.wp.com/blog.nuclearsecrecy.com/wp-content/uploads/2019/12/nukemap.2.65.jpg?w=1024&amp;ssl=1 1024w, https://i0.wp.com/blog.nuclearsecrecy.com/wp-content/uploads/2019/12/nukemap.2.65.jpg?resize=600%2C377&amp;ssl=1 600w, https://i0.wp.com/blog.nuclearsecrecy.com/wp-content/uploads/2019/12/nukemap.2.65.jpg?resize=768%2C483&amp;ssl=1 768w" sizes="auto, (max-width: 1000px) 100vw, 1000px"/></a></p><p id="caption-attachment-6859"><a href="https://nuclearsecrecy.com/nukemap/">NUKEMAP</a> as of this moment (version 2.65; I make small incremental changes regularly), with its Mapbox GL + Leaflet codebase. Note that a while back I started showing the 1 psi blast radius as well, because I decided that omitting it caused people to underestimate the area that would be plausibly affected by a nuclear detonation.</p></div>
<p>Now, even MapBox’s pricing scheme can add up for my level of map loads, but they’ve been extremely generous in terms of giving me “credits” because they support this kind of work. And getting that worked out was a matter of sending an e-mail and then talking to a real person on the phone. And said real person has been extremely helpful, easy to contact, and even reaches out to me at times when they’re rolling out a new code feature (like Mapbox GL) that he thinks will make the site work better and cheaper. Which is to say: in every way, the opposite of Google. </p>
<p>So NUKEMAP and <a href="https://nuclearsecrecy.com/missilemap/">MISSILEMAP</a> have been converted entirely over to MapBox+Leaflet. The one function that wasn’t easy to port over was the “Humanitarian consequences” (which relies on Google’s Places library), but I’ll eventually figure out a way to integrate that into it.</p>
<p>More broadly, the question I have to ask as an educator is: would I encourage a student to develop in the Google Maps API if they were thinking about trying to make a “break-out” website? Easy answer: no way. With Google, becoming popular (even just “moderately popular”) is a losing proposition: you will find yourself owing them a lot of money. So I won’t be teaching Google Maps in my data visualization course anymore — we’ll be using Leaflet from now on. I apologize for venting, but I figured that even non-developers might be interested in knowing on how these things work “under the hood” and what kinds of considerations go into the choice of making a website these days.</p>
<div id="attachment_6857"><p><a href="https://i0.wp.com/blog.nuclearsecrecy.com/wp-content/uploads/2019/12/nukemap-fallout-exposure.jpg?ssl=1"><img data-recalc-dims="1" decoding="async" aria-describedby="caption-attachment-6857" loading="lazy" src="https://i0.wp.com/blog.nuclearsecrecy.com/wp-content/uploads/2019/12/nukemap-fallout-exposure-1024x666.jpg?w=600&amp;ssl=1" alt="Demonstration of two cases of the NUKEMAP fallout dose exposure tool" srcset="https://i0.wp.com/blog.nuclearsecrecy.com/wp-content/uploads/2019/12/nukemap-fallout-exposure.jpg?resize=1024%2C666&amp;ssl=1 1024w, https://i0.wp.com/blog.nuclearsecrecy.com/wp-content/uploads/2019/12/nukemap-fallout-exposure.jpg?resize=600%2C390&amp;ssl=1 600w, https://i0.wp.com/blog.nuclearsecrecy.com/wp-content/uploads/2019/12/nukemap-fallout-exposure.jpg?resize=768%2C499&amp;ssl=1 768w, https://i0.wp.com/blog.nuclearsecrecy.com/wp-content/uploads/2019/12/nukemap-fallout-exposure.jpg?resize=1536%2C999&amp;ssl=1 1536w, https://i0.wp.com/blog.nuclearsecrecy.com/wp-content/uploads/2019/12/nukemap-fallout-exposure.jpg?resize=2048%2C1332&amp;ssl=1 2048w" sizes="auto, (max-width: 1000px) 100vw, 1000px"/></a></p><p id="caption-attachment-6857">A simple example of the kind of thing you can do with NUKEMAP’s new fallout dose exposure tool. At top, me standing out my office (for an entire 24 hours) in the wake of a 20 kt detonation in downtown NYC using the weather conditions that exist as I am posting this: I am very very dead. At bottom, I instead run quickly into the basement bowling alley in the Stevens University Howe Center (my preferred shelter location, because it’s fairly deep inside a multi-story rocky hill, on top of which is a 13 story building), and the same length of time gives me, at most, a slight up-tick in long-term cancer risk.</p></div>
<p>More positively, I’m excited to announce that a little while back, I added a new feature to NUKEMAP, one I’ve been wanting to implement for some time now. The NUKEMAP’s fallout model (<a href="http://nuclearsecrecy.com/nukemap/faq/#fallout">the Miller model</a>) has always been a little hard to make intuitive sense out of, other than “a vague representation of the area of contamination.” I’ve been exploring some other fallout models that could be implemented as well, but in the meantime, I wanted to find a way to make the current version (which has to advantage of being very quick to calculate and render) more intuitively meaningful.</p>
<p>The Miller model’s contours give the dose intensity (in rad/hr) at H+1 hour. So for the “100 rad/hr” contour, that means: “this area will be covered by fallout that, one hour after detonation, had an intensity of 100 rad/hr, assuming that the fallout has actually arrived there at that time.” So to figure out what your exposure on the ground is, you need to calculate when the fallout actually arrives to you (on the wind), what the dose rate is at time of arrival, and then how that dose rate will decrease over the next hours that you are exposed to it. You also might want to know how that is affected by the kind of structure you’re in, since anything that stands between you and the fallout will cut your exposure a bit. All of which makes for an annoying and tricky calculation to do by hand.</p>
<p>So I’ve added a feature to the “Probe location” tool, which allows you to sample the conditions at any given distance from ground zero. It will now calculate the time of fallout arrival (which is based on the distance and the wind settings), the intensity of the fallout at the time of arrival, and then allow you to see what the total dose would be if you were in that area for, say, 24 hours after detonation. It also allows you to apply a “protection factor” based on the kind of building you are in (the protection factor is just a divisor: a protection factor of 10 reduces the total exposure by 10). All of which can be used to answer questions about the human effects of fallout, and the situations in which different kinds of shelters can be effective, or not.<sup><a href="#footnote_3_6768" id="identifier_3_6768" title="I’ll eventually update the NUKEMAP FAQ about how this works, but it just uses Wigner’s standard t-1.2 fission product decay rate formula.">3</a></sup></p>
<p>There are some more NUKEMAP features actively in the works, as well. More on those, soon.</p>

				

								<p>Tags: <a href="https://blog.nuclearsecrecy.com/tag/2010s/" rel="tag">2010s</a>, <a href="https://blog.nuclearsecrecy.com/tag/nukemap/" rel="tag">NUKEMAP</a></p>
				<p>
					<small>
						This entry was posted
												on Friday, December 13th, 2019 at 9:50 am						and is filed under <a href="https://blog.nuclearsecrecy.com/category/news-and-notes/" rel="category tag">News and Notes</a>, <a href="https://blog.nuclearsecrecy.com/category/visions/" rel="category tag">Visions</a>.
						You can follow any responses to this entry through the <a href="https://blog.nuclearsecrecy.com/2019/12/13/why-nukemap-isnt-on-google-maps-anymore/feed/">RSS 2.0</a> feed.

													Both comments and pings are currently closed.

						 </small>
				</p>

		<br/>


			</div></div>
  </body>
</html>
