<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://jvns.ca/blog/2023/11/11/notes-on-nix-flakes/">Original</a>
    <h1>Some notes on nix flakes</h1>
    
    

<p>I&rsquo;ve been using nix for about <a href="https://jvns.ca/blog/2023/02/28/some-notes-on-using-nix/">9 months now</a>.
For all of that time I&rsquo;ve been steadfastly ignoring flakes, but everyone keeps
saying that flakes are great and the best way to use nix, so I decided to try
to figure out what the deal is with them.</p>

<p>I found it very hard to find simple examples of flake files and I ran into a
few problems that were very confusing to me, so I wanted to write down some very
basic examples and some of the problems I ran into in case it&rsquo;s helpful to
someone else who&rsquo;s getting started with flakes.</p>

<p>First, let&rsquo;s talk about what a flake is a little.</p>

<h3 id="flakes-are-self-contained">flakes are self-contained</h3>

<p>Every explanation I&rsquo;ve found of flakes explains them in terms of other nix
concepts (&ldquo;flakes simplify nix usability&rdquo;, &ldquo;flakes are processors of Nix
code&rdquo;). Personally I really needed a way to think about flakes in terms of
other non-nix things and someone made an analogy to Docker containers that
really helped me, so I&rsquo;ve been thinking about flakes a little like Docker
container images.</p>

<p>Here are some ways in which flakes are like Docker containers:</p>

<ul>
<li>you can install and compile any software you want in them</li>
<li>you can use them as a dev environment (the flake sets up all your dependencies)</li>
<li>you can share your flake with other people with a <code>flake.nix</code> file and
then they can build the software exactly the same way you built it (a little
like how you can share a <code>Dockerfile</code>, though flakes are MUCH better at the
&ldquo;exactly the same way you built it&rdquo; thing)</li>
</ul>

<p>flakes are also different from Docker containers in a LOT of ways:</p>

<ul>
<li>with a <code>Dockerfile</code>, you&rsquo;re not actually guaranteed to get the exact same
results as another user. With <code>flake.nix</code> and <code>flake.lock</code> you are.</li>
<li>they run natively on Mac (you don&rsquo;t need to use Linux / a Linux VM the way you do with Docker)</li>
<li>different flakes can share dependencies very easily (you can technically share layers between Docker images, but flakes are MUCH better at this)</li>
<li>flakes can depend on other flakes and pick and choose which parts they want to take from their dependencies</li>
<li><code>flake.nix</code> files are programs in the nix programming language instead of mostly a bunch of shell commands</li>
<li>the way they do isolation is completely different (nix uses <a href="https://github.com/NixOS/patchelf">dynamic linker/rpath tricks</a> instead of filesystem overlays, and there are no cgroups or namespaces or VMs or anything with nix)</li>
</ul>

<p>Obviously this analogy breaks down pretty quickly (the list of differences is
VERY long), but they do share the &ldquo;you can share a dev environment with a
single configuration file&rdquo; design goal.</p>

<h3 id="nix-has-a-lot-of-pre-compiled-binaries">nix has a lot of pre-compiled binaries</h3>

<p>To me one of the biggest advantages of nix is that I&rsquo;m on a Mac and nix has a
repository with a lot of pre-compiled binaries of various packages for Mac. I
mostly mention this because people always say that nix is good because it&rsquo;s
&ldquo;declarative&rdquo; or &ldquo;reproducible&rdquo; or &ldquo;functional&rdquo; or whatever but my main
motivation for using nix personally is that it has a lot of binary packages. I
do appreciate that it makes it easier for me to build a <a href="https://github.com/jvns/nixpkgs/blob/main/flakes/hugo-0.40/flake.nix">5-year-old version of hugo on mac</a>
though.</p>

<p>My impression is that nix has more binary packages than Homebrew does, so
installing things is faster and I don&rsquo;t need to build as much from source.</p>

<h3 id="my-goal-make-a-flake-with-every-package-i-want-installed-on-my-system">my goal: make a flake with every package I want installed on my system</h3>

<p>Previously I was using nix as a Homebrew replacement like this (which I talk about more in <a href="https://jvns.ca/blog/2023/02/28/some-notes-on-using-nix/">this blog post</a>):</p>

<ul>
<li>run <code>nix-env -iA nixpkgs.whatever</code> to install stuff</li>
<li>that&rsquo;s it</li>
</ul>

<p>This worked great (except that it <a href="https://github.com/NixOS/nix/issues/9340">randomly broke occasionally</a>, but someone helped me
find a workaround for that so the random breaking wasn&rsquo;t a big issue).</p>

<p>I thought it might be fun to have a single <code>flake.nix</code> file where I could maintain a list
of all the packages I wanted installed and then put all that stuff in a
directory in my <code>PATH</code>. This isn&rsquo;t very well motivated: my previous setup was
generally working just fine, but I have a long history of fiddling with my
computer setup (Arch Linux ftw) and so I decided to have a Day Of Fiddling.</p>

<p>I think the only practical advantages of flakes for me are:</p>

<ul>
<li>I could theoretically use the <code>flake.nix</code> file to set up a new computer more easily</li>
<li>I can never remember how to <strong>uninstall</strong> software in nix, deleting a line in a configuration file is maybe easier to remember</li>
</ul>

<p>These are pretty minor though.</p>

<h3 id="how-do-we-make-a-flake">how do we make a flake?</h3>

<p>Okay, so I want to make a flake with a bunch of packages installed in it, let&rsquo;s say Ruby and cowsay to start. How do I
do that? I went to <a href="https://zero-to-nix.com/">zero-to-nix</a> and copied and pasted some things and ended up with this <code>flake.nix</code> file (<a href="https://gist.github.com/jvns/b51d4c2f04b705310cff18fcab291630">here it is in a gist</a>):</p>

<pre><code>{
  inputs.nixpkgs.url = &quot;github:NixOS/nixpkgs/nixpkgs-23.05-darwin&quot;;
  outputs = { self, nixpkgs }: {
    devShell.aarch64-darwin = nixpkgs.legacyPackages.aarch64-darwin.mkShell {
      buildInputs = with nixpkgs.legacyPackages.aarch64-darwin; [
        cowsay
        ruby
      ];
    };
  };
}
</code></pre>

<p>This has a little bit of boilerplate so let&rsquo;s list the things I understand about this:</p>

<ul>
<li><a href="https://github.com/NixOS/nixpkgs">nixpkgs</a> is a huge central repository of nix packages</li>
<li><code>aarch64-darwin</code> is my machine&rsquo;s architecture, this is important because I&rsquo;m asking nix to download binaries</li>
<li>I&rsquo;ve been thinking of an &ldquo;input&rdquo; as a sort of dependency. <code>nixpkgs</code> is my one
input. I get to pick and choose which bits of it I want to bring into my
flake though.</li>
<li><code>mkShell</code> is a nix function that&rsquo;s apparently useful if you want to run <code>nix develop</code>. I stopped using it after this so I don&rsquo;t know more than that.</li>
<li><code>devShell.aarch64-darwin</code> is the name of the output. Apparently I need to give it that exact name or else <code>nix develop</code> will yell at me</li>
<li><code>cowsay</code> and <code>ruby</code> are the things I&rsquo;m taking from nixpkgs to put in my output</li>
<li>I don&rsquo;t know what <code>self</code> is doing here or what <code>legacyPackages</code> is about</li>
</ul>

<p>Okay, cool.  Let&rsquo;s try to build it:</p>

<pre><code>$ nix build
error: getting status of '/nix/store/w1v41cyqyx4d7q4g7c8nb50bp9dvjm29-source/flake.nix': No such file or directory
</code></pre>

<p>This error is VERY mysterious &ndash; what is <code>/nix/store/w1v41cyqyx4d7q4g7c8nb50bp9dvjm29-source/</code> and why does nix think it should exist???</p>

<p>I was totally stuck until a very nice person on Mastodon helped me. So let&rsquo;s talk about what&rsquo;s going wrong here.</p>

<h3 id="problem-1-nix-completely-ignores-untracked-files">problem 1: nix completely ignores untracked files</h3>

<p>Apparently nix flakes have some Weird Rules about git. The way it works is:</p>

<ul>
<li>if your current directory <strong>isn&rsquo;t</strong> a git repo, everything is fine</li>
<li>if your <strong>are</strong> in a git repository, and all your files have been <code>git add</code>ed to git, everything is fine</li>
<li>but if you&rsquo;re in a git directory and your <code>flake.nix</code> file isn&rsquo;t tracked by
git yet (because you just created it and are trying to get it to work), nix
will COMPLETELY IGNORE YOUR FILE</li>
</ul>

<p>After someone kindly told me what was happening, I found that this is
<a href="https://www.tweag.io/blog/2020-05-25-flakes/">mentioned in this blog post about flakes</a>, which says:</p>

<blockquote>
<p>Note that any file that is not tracked by Git is invisible during Nix evaluation</p>
</blockquote>

<p>There&rsquo;s also a <a href="https://github.com/NixOS/nix/issues/7107">github issue</a> discussing what to do about this.</p>

<p>So we need to <code>git add</code> the file to get nix to pay attention to it. Cool. Let&rsquo;s keep going.</p>

<h3 id="a-note-on-enabling-the-flake-feature">a note on enabling the flake feature</h3>

<p>To get any of the commands we&rsquo;re going to talk about to work (like <code>nix build</code>), you need to enable two nix features:</p>

<ol>
<li>flakes</li>
<li>&ldquo;commands&rdquo;</li>
</ol>

<p>I set this up by putting <code>experimental-features = nix-command flakes</code>  in my
<code>~/.config/nix/nix.conf</code>, but you can also run <code>nix --extra-experimental-features flakes nix-command build</code> instead of <code>nix build</code>.</p>

<h3 id="time-for-nix-develop">time for <code>nix develop</code></h3>

<p>The instructions I was following told me that I could now run <code>nix develop</code> and get a shell inside my new environment. I tried it and it works:</p>

<pre><code>$ nix develop
grapefruit:nix bork$ cowsay hi
 ____
&lt; hi &gt;
 ----
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
</code></pre>

<p>Cool! I was curious about how the PATH was set up inside this environment so I took a look:</p>

<pre><code>grapefruit:nix bork$ echo $PATH
/nix/store/v5q1bxrqs6hkbsbrpwc81ccyyfpbl8wk-clang-wrapper-11.1.0/bin:/nix/store/x9jmvvxcys4zscff39cnpw0kyfvs80vp-clang-11.1.0/bin:/nix/store/3f1ii2y5fs1w7p0id9mkis0ffvhh1n8w-coreutils-9.1/bin:/nix/store/8ldvi6b3ahnph19vm1s0pyjqrq0qhkvi-cctools-binutils-darwin-wrapper-973.0.1/bin:/nix/store/5kbbxk18fp645r4agnn11bab8afm0ry3-cctools-binutils-darwin-973.0.1/bin:/nix/store/5si884h02nqx3dfcdm5irpf7caihl6f8-cowsay-3.7.0/bin:/nix/store/5bs5q2dw5bl7c4krcviga6yhdrqbvdq6-ruby-3.1.4/bin:/nix/store/3f1ii2y5fs1w7p0id9mkis0ffvhh1n8w-coreutils-9.1/bin
</code></pre>

<p>It looks like every dependency has been added to the PATH separately: for example there&rsquo;s
<code>/nix/store/5si884h02nqx3dfcdm5irpf7caihl6f8-cowsay-3.7.0/bin</code> for <code>cowsay</code> and
<code>/nix/store/5bs5q2dw5bl7c4krcviga6yhdrqbvdq6-ruby-3.1.4/bin</code> for <code>ruby</code>. That&rsquo;s
fine but it&rsquo;s not how I wanted my setup to work: I wanted a single directory of
symlinks that I could just put in my PATH in my normal shell.</p>

<h3 id="getting-a-directory-of-symlinks-with-buildenv">getting a directory  of symlinks with <code>buildEnv</code></h3>

<p>I asked in the Nix discord and someone told me I could use <code>buildEnv</code> to turn
my flake into a directory of symlinks. As far as I can tell it&rsquo;s just a way to
take nix packages and copy their symlinks into another directory.</p>

<p>After some fiddling, I ended up with this: (<a href="https://gist.github.com/jvns/f0fa8de179cf2b14d210c9a5f9adbbd5">here&rsquo;s a gist</a>)</p>

<pre><code>{
  inputs.nixpkgs.url = &quot;github:NixOS/nixpkgs/nixpkgs-23.05-darwin&quot;;
  outputs = { self, nixpkgs }: {
    defaultPackage.aarch64-darwin = nixpkgs.legacyPackages.aarch64-darwin.buildEnv {
      name = &quot;julia-stuff&quot;;
      paths = with nixpkgs.legacyPackages.aarch64-darwin; [
        cowsay
        ruby
      ];
      pathsToLink = [ &quot;/share/man&quot; &quot;/share/doc&quot; &quot;/bin&quot; &quot;/lib&quot; ];
      extraOutputsToInstall = [ &quot;man&quot; &quot;doc&quot; ];
    };
  };
}
</code></pre>

<p>This put a bunch of symlinks in <code>result/bin</code>:</p>

<pre><code>$ ls result/bin/
bundle  bundler  cowsay  cowthink  erb  gem  irb  racc  rake  rbs  rdbg  rdoc  ri  ruby  typeprof
</code></pre>

<p>Sweet! Now I have a thing I can theoretically put in my PATH &ndash; this <code>result</code> directory. Next I mostly just
needed to add every other package I wanted to install to this <code>flake.nix</code> file (I got the list
from <code>nix-env -q</code>).</p>

<h3 id="next-step-add-all-the-packages">next step: add all the packages</h3>

<p>I ran into a bunch of weird problems adding all the packges I already had
installed to my nix, so let&rsquo;s talk about them.</p>

<h3 id="problem-2-an-unfree-package">problem 2: an unfree package</h3>

<p>I wanted to install a non-free package called <code>ngrok</code>. Nix gave me 3 options for how I could do this. Option C seemed the most promising:</p>

<pre><code>       c) For `nix-env`, `nix-build`, `nix-shell` or any other Nix command you can add
         { allowUnfree = true; }
       to ~/.config/nixpkgs/config.nix.
</code></pre>

<p>But adding <code>{ allowUnfree = true}</code> to <code>~/.config/nixpkgs/config.nix</code> didn&rsquo;t do
anything for some reason so instead I went with option A, which did seem to
work:</p>

<pre><code>            $ export NIXPKGS_ALLOW_UNFREE=1

        Note: For `nix shell`, `nix build`, `nix develop` or any other Nix 2.4+
        (Flake) command, `--impure` must be passed in order to read this
        environment variable.
</code></pre>

<h3 id="problem-3-installing-a-flake-from-a-relative-path-doesn-t-work">problem 3: installing a flake from a relative path doesn&rsquo;t work</h3>

<p>I made a couple of flakes for custom Nix packages I&rsquo;d made (which I wrote about in <a href="https://jvns.ca/blog/2023/02/28/some-notes-on-using-nix/">my first nix blog post</a>, and I wanted to set them up like this
(you can see the <a href="https://github.com/jvns/nixpkgs/blob/f26e3db8ea929d7f228893adf973e678cc9c1741/flakes/grapefruit/flake.nix#L5-L6">full configuration here</a>):</p>

<pre><code>      hugoFlake.url = &quot;path:../hugo-0.40&quot;;
      paperjamFlake.url = &quot;path:../paperjam&quot;;
</code></pre>

<p>This worked fine the first time I ran <code>nix build</code>, but when I reran <code>nix build</code>
again later I got some totally inscrutable error.</p>

<p>My workaround was just to run <code>rm flake.lock</code> everytime before running <code>nix
build</code>, which seemed to fix the problem.</p>

<p>I don&rsquo;t really understand what&rsquo;s going on here but there&rsquo;s a <a href="https://github.com/NixOS/nix/issues/3978">very long github issue thread about it</a>.</p>

<h3 id="problem-4-error-while-reading-the-response-from-the-build-hook">problem 4 : &ldquo;error while reading the response from the build hook&rdquo;</h3>

<p>For a while, every time I ran <code>nix build</code>, I got this error:</p>

<pre><code>$ nix build
error:
       â€¦ while reading the response from the build hook

       error: unexpected EOF reading a line
</code></pre>

<p>I spent a lot of time poking at my <code>flake.nix</code> trying to guess at what I could
have gone wrong.</p>

<p>A very nice person on Mastodon also helped me with this one and it turned out
that what I needed to do was find the <code>nix-daemon</code> process and kill it. I still
have no idea what happened here or what that error message means, I did upgrade
nix at some point during this whole process so I guess the
upgrade went wonky somehow.</p>

<p>I don&rsquo;t think this one is a common problem.</p>

<h3 id="problem-5-error-with-share-man-symlink">problem 5: error with share/man symlink</h3>

<p>I wanted to install the <code>zulu</code> package for Java, but when I tried to add it to
my list of packages I got this error complaining about a broken symlink:</p>

<pre><code>$ nix build
error: builder for '/nix/store/4n9c4707iyiwwgi9b8qqx7mshzrvi27r-julia-dev.drv' failed with exit code 2;
       last 1 log lines:
       &gt; error: not a directory: `/nix/store/2vc4kf5i28xcqhn501822aapn0srwsai-zulu-11.62.17/share/man'
       For full logs, run 'nix log /nix/store/4n9c4707iyiwwgi9b8qqx7mshzrvi27r-julia-dev.drv'.
$ ls /nix/store/2vc4kf5i28xcqhn501822aapn0srwsai-zulu-11.62.17/share/ -l
lrwxr-xr-x 29 root 31 Dec  1969 man -&gt; zulu-11.jdk/Contents/Home/man
</code></pre>

<p>I think what&rsquo;s going on here is that the <code>zulu</code> package in <code>nixpkgs-23.05</code> was
just broken (looks like it&rsquo;s since been <a href="https://github.com/NixOS/nixpkgs/pull/259622">fixed</a> in the unstable version).</p>

<p>I decided I didn&rsquo;t feel like dealing with that and it turned out I already had
Java installed another way outside nix, so I just removed <code>zulu</code> from my list
and moved on.</p>

<h3 id="putting-it-in-my-path">putting it in my PATH</h3>

<p>Now that I knew how to fix all of the weird problems I&rsquo;d run into, I wrote a
little shell script called <code>nix-symlink</code> to build my flake and symlink it to
the very unimaginitively named <code>~/.nix-flake</code>. The idea was that then I could
put <code>~/.nix-flake</code> in my <code>PATH</code> and have all my programs available.</p>

<p>I think people usually use nix flakes in a per-project way instead of &ldquo;a single
global flake&rdquo;, but this is how I wanted my setup to work so that&rsquo;s what I did.</p>

<p>Here&rsquo;s the <code>nix-symlink</code> script. The <code>rm flake.nix</code> is because of that relative path issue,
and the <code>NIXPKGS_ALLOW_UNFREE</code> is so I could install ngrok.</p>

<pre><code>#!/bin/bash

set -euo pipefail

export NIXPKGS_ALLOW_UNFREE=1
cd ~/work/nixpkgs/flakes/grapefruit || exit
rm flake.lock
nix build --impure --out-link ~/.nix-flake
</code></pre>

<p>I put <code>~/.nix-flake</code> at the beginning of my <code>PATH</code> (not at the end), but I might revisit that, we&rsquo;ll see.</p>

<h3 id="a-note-on-gc-roots">a note on GC roots</h3>

<p>At the end of all this, I wanted to run a garbage collection because I&rsquo;d
installed a bunch of random stuff that was taking about 20GB of extra hard
drive space in my <code>/nix/store</code>. I think there are two different ways to collect
garbage in nix:</p>

<ul>
<li><code>nix-store --gc</code></li>
<li><code>nix-collect-garbage</code></li>
</ul>

<p>I have no idea what the difference between them is, but <code>nix-collect-garbage</code>
seemed to delete more stuff for some reason.</p>

<p>I wanted to check that my <code>~/.nix-flake</code> directory was actually a GC root, so
that all my stuff wouldn&rsquo;t get deleted when I ran a GC.</p>

<p>I ran <code>nix-store --gc --print-roots</code> to print out all the GC roots and my
<code>~/.nix-flake</code> was in there so everything was good! This command also runs a GC
so it was kind of a dangerous way to check if a GC was going to delete
everything, but luckily it worked.</p>

<h3 id="that-s-it">that&rsquo;s it!</h3>

<p>Now my new nix workflow is:</p>

<ul>
<li>edit my <code>flake.nix</code> to add or remove packages (<a href="https://github.com/jvns/nixpkgs/blob/f26e3db8ea929d7f228893adf973e678cc9c1741/flakes/grapefruit/flake.nix">this file</a>)</li>
<li>rerun my <code>nix-symlink</code> script after editing it</li>
<li>maybe periodically run <code>nix-collect-garbage</code></li>
<li>that&rsquo;s it</li>
</ul>

<h3 id="setting-up-the-nix-registry">setting up the nix registry</h3>

<p>The last thing I wanted to do was run</p>

<pre><code>nix registry add nixpkgs github:NixOS/nixpkgs/nixpkgs-23.05-darwin
</code></pre>

<p>so that if I want to ad-hoc run a flake with <code>nix run nixpkgs#cowsay</code>, it&rsquo;ll
take the version from the 23.05 version of nixpkgs. Mostly I just wanted this
so I didn&rsquo;t have to download new versions of the nixpkgs repository all the
time &ndash; I just wanted to pin the 23.05 version.</p>

<p>I think <code>nixpkgs-unstable</code> is the default which I&rsquo;m sure is fine too if you
want to have more up-to-date software.</p>

<h3 id="my-solutions-are-probably-not-the-best">my solutions are probably not the best</h3>

<p>My solutions to all the nix problems I described are maybe not The Best &trade;,
but I&rsquo;m happy that I figured out a way to install stuff that just involves one
relatively simple <code>flake.nix</code> file and a 6-line bash script and not a lot of other
machinery.</p>

<p>Personally I still feel extremely uncomfortable with nix and so
it&rsquo;s important to me to keep my configuration as simple as possible without a
lot of extra abstraction layers that I don&rsquo;t understand. I might try out
<a href="https://github.com/lf-/flakey-profile/">flakey-profile</a> at some point though
because it seems extremely simple.</p>

<h3 id="you-can-do-way-fancier-stuff">you can do way fancier stuff</h3>

<p>You can manage a lot more stuff with nix, like:</p>

<ul>
<li>your npm / ruby / python / etc packages (I just do <code>npm install</code> and <code>pip install</code> and <code>bundle install</code>)</li>
<li>your config files</li>
</ul>

<p>There are all kind of tools that build on top of nix and flakes like
<a href="https://github.com/nix-community/home-manager">home-manager</a>. Like I said
before though, it&rsquo;s important to me to keep my configuration super simple so that I
can have any hope of understanding how it works and being able to fix problems
when it breaks so I haven&rsquo;t paid attention to any of that stuff.</p>

<h3 id="the-discord-is-great">the discord is great</h3>

<p>I&rsquo;ve been complaining about nix a little in this post, but as usual with open source
projects I assume that nix has all of these papercuts because it&rsquo;s a
complicated system run by a small team of volunteers with very limited time.</p>

<p>I&rsquo;ve been really impressed by how helpful folks are on the <a href="https://discord.com/invite/TXMxtMAFGB">official nix discord</a>, they
have a &ldquo;support forum&rdquo; section in there and I&rsquo;ve gotten great answers to a lot
of my questions.</p>

<h3 id="some-other-nix-resources">some other nix resources</h3>

<p>the main resources I&rsquo;ve found for understanding nix flakes are:</p>

<ul>
<li><a href="https://www.tweag.io/blog/2020-05-25-flakes/">Nix Flakes, Part 1: An introduction and tutorial</a>, I think by their creator</li>
<li><a href="https://xeiaso.net/blog/">xe iaso&rsquo;s blog</a></li>
<li><a href="https://ianthehenry.com/posts/how-to-learn-nix/">ian henry&rsquo;s blog</a></li>
<li><a href="https://nixos.org/manual/nix/stable/">the nix docs</a></li>
<li><a href="https://zero-to-nix.com/">zero to nix</a></li>
</ul>

<p>Also Kamal (my partner) uses nix and that really helps, I think using nix with
an experienced friend around is a lot easier.</p>

<h3 id="that-s-all">that&rsquo;s all!</h3>

<p>I still kind of like nix after using it for 9 months despite how confused I am
about it all the time, I feel like once I get things working they don&rsquo;t usually
break.</p>

<p>We&rsquo;ll see if that&rsquo;s continues to be the case with flakes! Maybe I&rsquo;ll go back to
just using <code>nix-env -iA</code>ing everything if it goes badly.</p>

  </body>
</html>
