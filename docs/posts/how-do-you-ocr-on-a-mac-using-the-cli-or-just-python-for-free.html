<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.greg.technology/2024/01/02/how-do-you-ocr-on-a-mac.html">Original</a>
    <h1>how do you ocr on a mac using the cli or just python for free</h1>
    
    <div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p>a kind reader reached out about <a href="https://blog.greg.technology/2024/01/01/all-of-my-iphone-alarms.html">all of my iphone alarms</a> and asked how specifically did I run OCR on my mac. I’m not one to gatekeep, so here’s how you can get yourself a nice local ocr ‘service’ that works in the terminal/CLI/python and costs 0 dollars:</p>

<ul>
  <li>((by the way sharing Shortcuts <a href="https://9to5mac.com/2021/03/24/icloud-shortcut-sharing-broken/">is really weird</a> which is why I’m having you do this all manually…))</li>
  <li>(also, most of the stuff below only needs to be done once – after that, actually ocr’ing is easy)</li>
  <li>open the <strong>Shortcuts</strong> app in your Applications folder</li>
  <li>click the “<strong>+</strong>” button to create a new shortcut</li>
  <li>in the right sidebar, search for “<strong>extract text</strong>”</li>
</ul>

<p><img src="https://blog.greg.technology/assets/how-to-ocr/step1.png"/></p>

<ul>
  <li>you should see “<strong>Extract Text from Image</strong>” in the list of possible actions. <strong>drag it</strong> from the right sidebar into the main area on the left</li>
  <li>in the “Extract text from …” action that’s now on the left, click on the pale “<strong>Image</strong>” blue-ish pill</li>
  <li>pick “<strong>Shortcut Input</strong>”</li>
</ul>

<p><img src="https://blog.greg.technology/assets/how-to-ocr/step2.png"/></p>

<ul>
  <li>you’ll see a big “<strong>Receive <em>Any</em> input from <em>Nowhere</em></strong>” action appear above the “Extract text from Shortcut Input”. it’s all good, leave it as is</li>
  <li>in the right sidebar, search for “<strong>copy</strong>”. you should see “<strong>Copy to Clipboard</strong>”. drag that action below the “<strong>Extract text from …</strong>” one
    <ul>
      <li>dragging the “Copy to …” action below the “Extract from …” is really annoyingly hard. just keep dragging it <em>really</em> below and it will work at some point</li>
    </ul>
  </li>
  <li>your final setup should look like this:</li>
</ul>

<p><img src="https://blog.greg.technology/assets/how-to-ocr/step3.png"/></p>

<ul>
  <li>in the last action, make sure that after “<strong>Copy</strong>” it does say “<strong>Text from Image</strong>”!</li>
  <li>you’re like almost done!!</li>
  <li>in the window title bar, type stuff to name the shortcut. because <a href="https://twitter.com/TheIdOfAlan/status/1458117496087748618">I’m from a generation</a>, I recommend naming it “extract-text” or “ocr-text” or something simple with no spaces and all lowercase. sorry. <strong>press enter</strong> after naming the shortcut otherwise it won’t remember the name (…??)</li>
</ul>

<p><img src="https://blog.greg.technology/assets/how-to-ocr/step4.png"/></p>

<ul>
  <li>ok you may be actually done here I think</li>
  <li>try out the shortcut in your terminal:</li>
</ul>

<div><div><pre><code>shortcuts run ocr-text <span>-i</span> &lt;A PATH TO SOME IMAGE&gt;
</code></pre></div></div>

<ul>
  <li>then try <strong>command-V</strong> – do you see the resulting text? if yes, you’re good to go!!!</li>
  <li>from python, you can do the following:</li>
</ul>

<div><div><pre><code><span>import</span> <span>subprocess</span>

<span>file_path</span> <span>=</span> <span>&#39;... some file path ...&#39;</span>
<span>ocr_out</span> <span>=</span> <span>subprocess</span><span>.</span><span>check_output</span><span>(</span>
    <span>f</span><span>&#39;shortcuts run ocr-text -i &#34;</span><span>{</span><span>file_path</span><span>}</span><span>&#34;&#39;</span><span>,</span> <span>shell</span><span>=</span><span>True</span>
<span>)</span>
<span>print</span><span>(</span><span>ocr_out</span><span>)</span>
</code></pre></div></div>

<ul>
  <li>THAT’S IT! x</li>
</ul>

  </div>
</article>
      </div>
    </div></div>
  </body>
</html>
