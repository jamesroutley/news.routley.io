<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="http://www.floodgap.com/retrotech/xa/">Original</a>
    <h1>Xa: Open-source 6502 cross assembler</h1>
    
    <div id="readability-page-1" class="page">
<a href="http://www.floodgap.com/"><img src="http://www.floodgap.com/pix/hosted.gif" height="70" width="170" alt="[Hosted by Floodgap Systems]"/></a>
<a name="top"></a>
<code>xa</code> is Andre Fachat&#39;s open-source 6502 cross assembler. I, Cameron
Kaiser (<a href="mailto:ckaiser@floodgap.com">ckaiser@floodgap.com</a>), am
the current maintainer, and bug reports and questions should now go to me.
<p>
<code>xa</code> is Copyright © 1989-2023, André Fachat,
Jolse Maginnis, David Weinehall and Cameron Kaiser. All rights reserved.
Additional contributors: Fabien Nuñez, Mikkel Holm Olsen,
Adam Sampson, Alessandro Gatti, Simon Rowe, Dan Horák, Frederic Cambus,
Sam Falvo, Stephen Kitt, Bas Wassink, Sergei Trofimovich, Tom Hargreaves.
<code>xa</code> is distributed under the
<a href="http://www.floodgap.com/retrotech/xa/COPYING.txt">GNU Public License</a> v2. The current maintainer is
Cameron Kaiser.</p><hr/><center>
<b>For a complete list of available files and distributions, check the
<code><a href="http://www.floodgap.com/retrotech/xa/dists/">dists/</a></code> directory.</b><p>
<b>For other Floodgap-maintained packages, see the
<a href="http://www.floodgap.com/software/">Floodgap Software</a> listing.</b></p></center><hr/>
<h2>What is <code>xa</code>?</h2>
<code>xa</code> is a high-speed, two-pass portable cross-assembler. It
understands mnemonics and generates code for NMOS 6502s (such as 6502A, 6504,
6507, 6510, 7501, 8500, 8501, 8502 ...), CMOS 6502s (65C02 and Rockwell R65C02)
and the 65816. 
<p>
Key amongst its features:
</p><ul>
<li>C-like preprocessor (and understands <tt>cpp</tt> for additional
feature support)
</li><li>rich expression syntax and pseudo-op vocabulary
</li><li>multiple character sets
</li><li>binary linking
</li><li>supports <code>o65</code> relocatable objects with a full linker and
relocation suite, as well as &#34;bare&#34; plain binary object files
</li><li>block structure for label scoping
</li></ul>
<code>xa</code>&#39;s eventual companion disassembler is <code><a href="#dxa">dxa</a></code>, a
moderately hacked-up version of Marko Mäkelä&#39;s <code>d65</code>
disassembler. This is still alpha and is available as a separate distribution
until it is stabilized enough to be part of the <code>xa</code> suite.
<h2>Version 2.4.0 (18 November 2023)</h2>
I told you 2.3.14 would be the last release of <code>xa</code> 2.3.x. Didn&#39;t
you believe me?
<p>
2.4.0 is a significant update of the code base with many new features. However,
because this is more than just a point release, there are potentially
incompatibilities with edge cases in 2.3 and earlier versions, and features
that were declared deprecated in 2.3 have been removed.
</p><ul><li>
<a href="http://www.floodgap.com/retrotech/xa/dists/xa-2.4.0.tar.gz"><code>xa-2.4.0.tar.gz</code></a>
</li></ul>
<p>
<code>xa</code> should compile out of the box on just about any Unix or
Unixy thing, and will probably compile on other systems that support ANSI
C as well. Please see the <code>README.1st</code> file for more detailed
instructions. It is tested and validated on AIX (<tt>gcc</tt>),
Linux/ppc64le (<tt>gcc</tt> and <tt>clang</tt>), Mac OS X
(<tt>gcc</tt> on PowerPC, and <tt>clang</tt>
on Intel <tt>x86_64</tt> and Apple silicon) and NetBSD/macppc and
NetBSD/mac68k (<tt>gcc</tt>).
</p><h3>What&#39;s new in 2.4.0</h3>
Too much to completely enumerate, but here&#39;s the hits.
<ul>
<li>Listing feature (<code>-P</code>, <code>-F</code>) in plain text or HTML, along with <code>.listbytes</code> to control
    how hex bytes get listed in the output.
</li><li>Add <code>-E</code> commandline option to not stop after 20 errors, but show all
    of them.
</li><li>Introduce <code>-X</code> compatibility set command line option to distinguish 
    between MASM and CA65 compatibility options; also adds C option for
    <code>0x</code> and <code>0</code> to specify hex or octal. As a result, <code>-M</code> is now deprecated,
    and colons in comments may become the default in a future version.
</li><li>Implement CA65 &#34;cheap local labels&#34;, &#34;<code>:=</code>&#34; label definitions,
    and various pseudo-opcodes (<code>.include</code>, <code>.import</code>, <code>.importzp</code>,
    <code>.zeropage</code>, <code>.proc (anonymous only)</code>, <code>.endproc</code>, <code>.code</code>, <code>.org</code>, <code>.reloc</code>).
</li><li><code>-U</code> option to allow all undefined labels in relocating mode; this
    allows exporting them to an <code>.o65</code> file and link at a later time (or
    specify one at a time with <code>-L</code>).
</li><li>Globals may also be specified manually with <code>-g</code>.
</li><li><code>#error</code> allows preprocessor-level assertions.
</li><li><code>.assert</code> allows assembler-level assertions.
</li><li>Better fix for segfault with smaller arity macro issue.
</li><li>Main <code>Makefile</code> fixes.
</li><li>Fixed parallel <code>make</code> in tests, incorporating a patch from Sergei
    Trofimovich.
</li><li>Added a test case that failed in 2.3.14 from Tom Hargreaves.
</li><li>Some 2.3.x features still allowed with <code>-XXA23</code>, which is obviously
    deprecated.
</li><li>The quote escape character is now the <code>\</code> (backslash), except if <code>-XXA23</code>.
</li><li>Recursive <code>/* */</code> comments are no longer allowed, except if <code>-XXA23</code>.
</li><li><code>XA_MAJOR</code> and <code>XA_MINOR</code> predefined macros, except if <code>-XXA23</code>.
</li><li>Testsuite greatly expanded.
</li><li>The old <code>loader/</code> testsuite and <code>doc/</code> archive are now in <code>attic/</code>, which is
    the repository for old unsupported components. It may be purged in a
    future version.
</li><li><code>-M</code> is now deprecated (use <code>-XMASM</code>), just in case you forgot.
</li><li><code>printcbm(1)</code> is now deprecated (use VICE <code>petcat</code>, it does a lot more).
</li><li>Previously deprecated options (16-bit <code>mvn/mvp</code> argument, <code>-S</code>, <code>-x</code>) finally
    removed. If you need this support, you must use 2.3.x.
</li></ul>
<!-- Maintainer renames binary to xxxa for our
30th year anniversary!
No, not really. But it
sure would be funny. Can you believe Andre wrote this 30
years ago? 2.3.9 -->
<!-- Maintainer got married. Sorry, wife gets priority over programming.
But she's cool with programming. 2.3.8 -->
<!-- Maintainer promised 72 virgins if he made a release. Maintainer was not
told that they were all Richard Branson clones. Maintainer is pretty cheesed
off about that. 2.3.7 -->
<!-- Maintainer taken out of cold storage, dusted off, and chained to a
terminal with free Mr Pibb, being told he could not use the toilet until
he made a release. And he really had to go. He really did. 2.3.6 -->
<!-- Maintainer committed to insane asylum where he did the code work by
tapping on the rubber walls in Morse code. 2.3.5 -->
<!-- Marching code-generating elephants. 2.3.4 -->
<!-- An orgy of code contributors 2.3.3 -->
<!-- The Return of Super-AndréTM 2.3.2 -->
<h3>Documentation</h3>
Documentation is now in <code>man</code> format since 2.3.0. You can read
them here, converted with <code>man2html</code>:
<ul><li><a href="http://www.floodgap.com/retrotech/xa/xa.1.html"><code>xa(1)</code></a></li><li><a href="http://www.floodgap.com/retrotech/xa/file65.1.html"><code>file65(1)</code></a>
</li><li><a href="http://www.floodgap.com/retrotech/xa/ldo65.1.html"><code>ldo65(1)</code></a>
</li><li><a href="http://www.floodgap.com/retrotech/xa/printcbm.1.html"><code>printcbm(1)</code></a>
</li><li><a href="http://www.floodgap.com/retrotech/xa/reloc65.1.html"><code>reloc65(1)</code></a>
</li><li><a href="http://www.floodgap.com/retrotech/xa/uncpk.1.html"><code>uncpk(1)</code></a></li></ul>
For those using older distributions, refer to the previous
<a href="http://www.floodgap.com/retrotech/xa/xa-old.html"><code>xa</code> HTML documentation</a>.
<h3>History</h3>
I&#39;ll just let Andre tell it: 
<blockquote>
&#34;I developed the first version of xa on my old Atari ST to build 
programms for my selfbuilt computer CS/A65.
After my Atari broke I ported it to Linux (ported?
It compiled right out of the box!) and when I had to develop a programm for
a friend of mine, I compiled it on an Amiga without errors. 
Until the beginning of 1992 I made more improvements, until it came
to version 2.0.7. Since then I only very occasionally worked on it,
up to version 2.0.7d.
When I decided to push my selfbuilt OS to a new level in 1996, I needed more
important improvements, like o65 object format and a linker and all
that.&#34;</blockquote>
<hr/>
<a name="dxa"><h2><code>dxa</code></h2></a>
Starting with 2.3.0, <code>xa</code> is now officially accompanied by
<code>dxa</code>, its companion disassembler. <code>dxa</code> is a rudely
hacked version of Marko Mäkelä&#39;s <code>d65</code> package, with
some extra features and altered output to allow &#34;perfect&#34; disassembly
(which is to say, you can take an arbitrary object, run it through 
<code>dxa</code>, take what it spits out, run it back through
<code>xa</code>, and get the binary you started with). It also has features
for intelligently labeling code and data sections and multiple output
formats, and can understand undocumented and CMOS opcodes (65816 not yet).
<p>
Because <code>dxa</code> is new and not well tested, I have not included it
as part of the standard <code>xa</code> distribution and it is offered here
separately. Please consider it to be alpha software only and expect bugs.
Refer to the readme for instructions on installation. <code>dxa</code>, like
<code>d65</code>, is distributed under GPL v2.

</p><h3>Version 0.1.5 (25 March 2022)</h3>
New in this version is a formal, if small, test suite for the very first
time (<tt>make test</tt>).
This disassembles a set of binary test vectors,
reassembles them (with <tt>xa</tt>, natch),
and checks that the output matches the original binaries. You need <tt>xa</tt>
installed. If <tt>make test</tt> fails, make sure your <tt>xa</tt> is current
before reporting a bug. <tt>dxa</tt> is now validated on all the platforms
<tt>xa</tt> is.
<p>
There are also many fixes in this version, including properly getting the very
last byte for files that load all the way to <tt>$ffff</tt> and correctly
(IMNSHO) truncating files that load beyond (thanks Malte), fixes for bugs with
<tt>clang</tt>-built <tt>dxa</tt> generating incorrect code, fixes for an
issue with the C preprocessor, and more flexible BASIC header detection.
Note that <tt>clang</tt>-built <tt>dxa</tt> does behave differently than
<tt>gcc</tt>-built <tt>dxa</tt> and more research is needed (currently the
only guarantee is that both will generate an assembly file which will
assemble to identical binaries). <code>dxa</code> is based on
<code>d65</code> 0.2.1.</p><ul><li><a href="http://www.floodgap.com/retrotech/xa/dists/dxa-0.1.5.tar.gz"><code>dxa-0.1.5.tar.gz</code></a>
</li></ul>
Documentation is offered in <code>man</code> format; here is the
<code>man2html</code> version.<ul><li><a href="http://www.floodgap.com/retrotech/xa/dxa.1.html"><code>dxa(1)</code></a></li></ul><hr/>
<a href="#top"><img src="http://www.floodgap.com/retrotech/pix/c=top.gif" width="80" height="80" alt="[Top of page]"/></a>Send all bugs in
<code>xa</code> or <code>dxa</code> to
<a href="mailto:ckaiser@floodgap.com">ckaiser@floodgap.com</a>.
<hr/>
<address>Cameron Kaiser</address>


</div>
  </body>
</html>
