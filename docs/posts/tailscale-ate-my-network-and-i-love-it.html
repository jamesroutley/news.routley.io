<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://smackeyacky.blogspot.com/2022/07/tailscale-ate-my-network-and-i-love-it.html">Original</a>
    <h1>Tailscale ate my network (and I love it)</h1>
    
    <div id="readability-page-1" class="page"><div id="post-body-4465676944587449570">

<p>If you&#39;re like me, you travel occasionally.  Access to your office from home, or from an airport lounge, or from a hotel room is paramount to being productive for most of us now.  While I had a fairly simple Tailscale setup that got me into my test machines in the office, what I really wanted was to integrate my AWS production VPC into that system.  It&#39;s surprisingly simple.</p>
<p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjjxvBCfffZvQvvCwa64KzoqRe_-poMIZNAxVJ-9zDRAwMh_QJ4qub7vvCkRmHrTZg3yjOsvTOXPb38omgp30idItT48efHxOn-QK5x4YjwujNMwT4RR4kZ-4Mg9A09xgOtjt-hsP--6WYLXRkfEKDJB7fzA-C2O-paU5rS44QSyzbKJx6Gzir6rz5p2g/s2103/Screenshot%20from%202022-07-02%2013-17-51.png"><img alt="" data-original-height="1274" data-original-width="2103" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjjxvBCfffZvQvvCwa64KzoqRe_-poMIZNAxVJ-9zDRAwMh_QJ4qub7vvCkRmHrTZg3yjOsvTOXPb38omgp30idItT48efHxOn-QK5x4YjwujNMwT4RR4kZ-4Mg9A09xgOtjt-hsP--6WYLXRkfEKDJB7fzA-C2O-paU5rS44QSyzbKJx6Gzir6rz5p2g/s400/Screenshot%20from%202022-07-02%2013-17-51.png" width="400"/></a></p>
<p><a href="https://tailscale.com/kb/1141/aws-rds/?q=aws" target="_blank">Tailscale AWS instructions</a></p>
<h2>What do you want to do that for?</h2>
<p>In the &#34;before tailscale&#34; times, if I needed to test against the production AWS resources or connect dBeaver for database maintenance, I would edit the security group to add my IP address, do my testing, edit the security group to remove myself.  This is as error prone as it sounds.  I quite often forgot to remove my IP address from the allowed addresses, a major potential security risk when you are travelling.</p>
<p>Tailscale has an extremely nifty way to get around it:  if you run up a small ec2 instance, you can use it as a &#34;subnet router&#34;, meaning that when you are connected to Tailscale, you are also able to access AWS resources from inside the VPC.</p><p>Not only that, you can add your default VPC DNS server to the list of name servers in Tailscale.  By telling the tailscale network that you want name resolution for &#34;amazonaws.com&#34; to resolve through the DNS inside your VPC, when connected to Tailscale, using the external resource name automatically resolves to the internal VPC address.</p>
<h2>So what</h2>
<p>So, I didn&#39;t have to change a single configuration anywhere for (say) a local Docker container that used to access the AuroraDB over the public internet, because now it uses the private Tailscale network while still using the external addresses.  It&#39;s fantastic, much more secure, and I don&#39;t have to fiddle with security groups whenever I am debugging something.  On linux machines, make sure you run tailscale with the &#34;--accept-routes&#34; option as it doesn&#39;t do that by default.</p>
<h2>Tailscale is now my entire network</h2>
<p>It didn&#39;t happen overnight, but it did happen.  I have no open ports on my office router (other than http), the security groups on AWS are now much more restricted and all of the important DNS happens via Tailscale, I install the client by default on everything now without giving it a second thought.  I don&#39;t think I really &#34;got it&#34; at first, thinking Tailscale was simply a zero-conf VPN.  Really it&#39;s something much bigger and more comprehensive than that:  It&#39;s a security solution that encompasses everything from remote work to cloud access.</p>
</div></div>
  </body>
</html>
