<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/7mind/jopa">Original</a>
    <h1>JOPA: Java compiler in C&#43;&#43;, Jikes modernized to Java 6 with Claude</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a href="https://github.com/7mind/jopa/actions/workflows/ci.yml"><img src="https://github.com/7mind/jopa/actions/workflows/ci.yml/badge.svg" alt="CI"/></a>
<a href="https://github.com/7mind/jopa/blob/main/LICENSE"><img src="https://camo.githubusercontent.com/95b63eb8ce98597d7cfd9d771f0cd7201988720defc29215985afe6d6da0593a/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f376d696e642f6a6f7061" alt="License: IBM-PL 1.0" data-canonical-src="https://img.shields.io/github/license/7mind/jopa"/></a>
<a href="https://nixos.org/" rel="nofollow"><img src="https://camo.githubusercontent.com/5077fb177a42873ea8e513f8b543f1ad541bbf1730a3a10e9b1e2886e63ac914/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6275696c74253230776974682d6e69782d3532373743333f6c6f676f3d6e69786f73266c6f676f436f6c6f723d7768697465" alt="Built with Nix" data-canonical-src="https://img.shields.io/badge/built%20with-nix-5277C3?logo=nixos&amp;logoColor=white"/></a></p>
<p dir="auto">A totally Claude&#39;d effort in modernizing <code>jikes</code>, the historical independent <code>javac</code> implementation in C++.</p>
<p dir="auto">Could be useful for <a href="https://bootstrappable.org/" rel="nofollow">bootstrap</a> purposes.</p>
<p dir="auto">Sister project: <a href="https://github.com/7mind/pyjopa">PyJOPA</a></p>
<p dir="auto">Note: I&#39;ve made multiple attempts to replace the legacy parser with a more modern one but Claude failed to deliver due to extremely tight coupling.</p>

<p dir="auto">This fork adds comprehensive Java 5 (J2SE 5.0) and Java 6 (Java SE 6) language features:</p>

<ul dir="auto">
<li>✅ <strong>Generics</strong> - Type erasure with generic classes, methods, and bounded type parameters</li>
<li>✅ <strong>Enhanced For-Loop</strong> - For-each loops for arrays and Iterable collections</li>
<li>✅ <strong>Varargs</strong> - Variable-length argument lists with automatic array creation</li>
<li>✅ <strong>Enums</strong> - Enumerated types with synthetic methods (values(), valueOf())</li>
<li>✅ <strong>Autoboxing/Unboxing</strong> - Automatic conversions between primitives and wrappers (assignments, method args, return values, arithmetic)</li>
<li>✅ <strong>Static Imports</strong> - Import static members (single field, single method, wildcard)</li>
<li>✅ <strong>Annotations</strong> - Marker, single-element, and full annotations</li>
</ul>

<ul dir="auto">
<li>✅ <strong>Class file version 50.0</strong> - Generate Java 6 bytecode with <code>-target 1.6</code></li>
<li>✅ <strong>Debug information</strong> - Enhanced debugging with <code>-g</code> flag for parameter names and local variables</li>
</ul>

<ul dir="auto">
<li>✅ <strong>Diamond Operator</strong> - Type inference for generic instance creation (<code>new ArrayList&lt;&gt;()</code>)</li>
<li>✅ <strong>Multi-catch</strong> - Catching multiple exception types in a single catch block (<code>catch (IOException | SQLException e)</code>)</li>
<li>✅ <strong>Try-with-resources</strong> - Automatic resource management with <code>AutoCloseable</code> interface and exception suppression via <code>addSuppressed()</code></li>
<li>✅ <strong>Strings in Switch</strong> - Switch statements with String expressions</li>
<li>✅ <strong>Binary Literals</strong> - Integer literals in binary form (<code>0b1010</code>)</li>
<li>✅ <strong>Underscores in Numeric Literals</strong> - Improved readability (<code>1_000_000</code>)</li>
</ul>

<p dir="auto">Java 7 language features are fully supported for parsing and semantic analysis. However, bytecode generation has limitations:</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Feature</th>
<th><code>-target 1.6</code></th>
<th><code>-target 1.7</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>Diamond operator</td>
<td>✅ Works</td>
<td><g-emoji alias="warning">⚠️</g-emoji> Needs StackMapTable</td>
</tr>
<tr>
<td>Multi-catch</td>
<td>✅ Works</td>
<td><g-emoji alias="warning">⚠️</g-emoji> Needs StackMapTable</td>
</tr>
<tr>
<td>Try-with-resources</td>
<td>✅ Works</td>
<td><g-emoji alias="warning">⚠️</g-emoji> Needs StackMapTable</td>
</tr>
<tr>
<td>String switch</td>
<td>✅ Works</td>
<td><g-emoji alias="warning">⚠️</g-emoji> Needs StackMapTable</td>
</tr>
<tr>
<td>Exception suppression (<code>addSuppressed</code>)</td>
<td>✅ Works</td>
<td><g-emoji alias="warning">⚠️</g-emoji> Needs StackMapTable</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><strong>Note:</strong> Use <code>-source 1.7 -target 1.6</code> to compile Java 7 code to Java 6 bytecode, which runs on any JVM without verification issues. Full <code>-target 1.7</code> support requires StackMapTable generation (not yet implemented).</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Java 8 Features (Partial)</h3><a id="user-content-java-8-features-partial" aria-label="Permalink: Java 8 Features (Partial)" href="#java-8-features-partial"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>✅ <strong>Default Methods</strong> - Interface methods with default implementations</li>
<li>❌ <strong>Static Methods in Interfaces</strong> - Requires class file version 52.0</li>
<li>❌ <strong>Lambda Expressions</strong> - Not implemented</li>
<li>❌ <strong>Method References</strong> - Not implemented</li>
</ul>

<ul dir="auto">
<li>
<p dir="auto">Requirements:</p>
<ul dir="auto">
<li>CMake 3.20+ and a C++17 compiler</li>
<li>iconv and/or ICU (uc) if encoding support stays enabled</li>
<li>Use the repo&#39;s nix/direnv setup (<code>direnv exec . &lt;cmd&gt;</code>) when available</li>
</ul>
</li>
<li>
<p dir="auto">With Nix:</p>
<div dir="auto" data-snippet-clipboard-copy-content="nix develop
direnv exec . cmake -S . -B build -DCMAKE_BUILD_TYPE=Release
direnv exec . cmake --build build -j&#34;$(nproc)&#34;
direnv exec . sh -c &#34;cd build &amp;&amp; ctest --output-on-failure&#34;
direnv exec . cmake --install build --prefix /usr/local"><pre>nix develop
direnv <span>exec</span> <span>.</span> cmake -S <span>.</span> -B build -DCMAKE_BUILD_TYPE=Release
direnv <span>exec</span> <span>.</span> cmake --build build -j<span><span>&#34;</span><span><span>$(</span>nproc<span>)</span></span><span>&#34;</span></span>
direnv <span>exec</span> <span>.</span> sh -c <span><span>&#34;</span>cd build &amp;&amp; ctest --output-on-failure<span>&#34;</span></span>
direnv <span>exec</span> <span>.</span> cmake --install build --prefix /usr/local</pre></div>
</li>
<li>
<p dir="auto">Generic CMake:</p>
<div dir="auto" data-snippet-clipboard-copy-content="cmake -S . -B build -DCMAKE_BUILD_TYPE=Release
cmake --build build
cmake --install build --prefix /usr/local"><pre>cmake -S <span>.</span> -B build -DCMAKE_BUILD_TYPE=Release
cmake --build build
cmake --install build --prefix /usr/local</pre></div>
</li>
<li>
<p dir="auto">Useful CMake options:</p>
<ul dir="auto">
<li><code>-DJIKES_ENABLE_DEBUG=ON</code> — Enable internal compiler debugging hooks</li>
<li><code>-DJIKES_ENABLE_NATIVE_FP=OFF</code> — Force emulated floating point</li>
<li><code>-DJIKES_ENABLE_ENCODING=OFF</code> — Skip iconv/ICU; otherwise CMake fails if neither is present</li>
<li><code>-DJOPA_ENABLE_JVM_TESTS=OFF</code> — Disable runtime validation tests (javap/JVM execution)</li>
<li><code>-DJOPA_USE_NOVERIFY=OFF</code> — Disable <code>-noverify</code> flag for JVM tests (requires StackMapTable)</li>
<li><code>-DJOPA_TARGET_VERSION=1.5</code> — Bytecode target version for tests (1.5, 1.6, or 1.7; default: 1.5)</li>
</ul>
</li>
</ul>

<p dir="auto">Jikes - a Java source code to bytecode compiler - was written by Philippe Charles and Dave Shields of
IBM Research.</p>
<p dir="auto">Jikes was written from scratch, from August 1996 to its first release on IBM&#39;s alphaWorks site in
April 1997. Work continued until August, 1997, at which time the project was shut down so the authors could resume
full-time work on the addition of support for inner classes.</p>
<p dir="auto">The next release of Jikes was in March, 1998.</p>
<p dir="auto">The availability of this release spurred new interest in a Linux version. The release of a Linux binary version
in early July, 1998, set new single-day download records for IBM&#39;s alphaWorks site.</p>
<p dir="auto">The availability of a Linux binary version was soon followed by requests for the source.  IBM management
approved the release in source form in September, 1998, followed by the release in early December, 1998.</p>
<p dir="auto">Released in December, 1998, it was IBM&#39;s first open source project, and the first open-source project
from IBMk to be included in a major Linux Distribution (Redhat, Fall 1999).</p>
<p dir="auto">Jikes was notable both in its automatic error correction, in the quality of its error messages, and
its compilation speed. It was routinely 10-20 times faster than javac, the standard compiler for Java
when Jikes was released.</p>
<p dir="auto">IBM&#39;s involvement in the Jikes project ended in late 1999. Work continued, first at IBM&#39;s Developerworks (where
IBM was the original project in the Open Source Zone), and later at Sourceforge.</p>
<p dir="auto">Active work on the project ceased in 2005. Changes in the Java language, most notably in the introduction of generics,
made Jikes less attractive.</p>
<p dir="auto">Jikes remains usable for beginners to the Java language, especially those interested in just the core
features of the language.</p>
<p dir="auto">The authors also believe Jikes to be of interest for its compiler designed and implementation, an believe it
to be a suitable subject of study for an introductory compiler course.</p>
<p dir="auto">Notable features include the following:</p>
<p dir="auto">Written from scratch by two people. The only third-part code in the first version was used read Java binary
class files, where were in Zip format.</p>
<p dir="auto">No use of parser construction tools other than the Jikes Parser Generator, written by Philippe Charles.</p>
<p dir="auto">Written in C++.</p>
<p dir="auto">Includes a very efficient storage allocator and memory management.</p>
<p dir="auto">The present repository includes Jikes versions 1.04 through 1.22. (Jikes 1.00 through 1.03 seem to have lost).
The sources used were retrieved from the Sourcforge site in early July, 2012. Each version is identified by a git tag.</p>

<ul dir="auto">
<li>Originally written by Philippe Charles and David Shields of IBM Research.</li>
<li>Subsequent contributors include, but are not limited to:
<ul dir="auto">
<li>Chris Abbey</li>
<li>C. Scott Ananian</li>
<li>Musachy Barroso</li>
<li>Joe Berkovitz</li>
<li>Eric Blake</li>
<li>Norris Boyd</li>
<li>Ian P. Cardenas</li>
<li>Pascal Davoust</li>
<li>Mo DeJong</li>
<li>Chris Dennis</li>
<li>Alan Donovan</li>
<li>Michael Ernst</li>
<li>Bu FeiMing</li>
<li>Max Gilead</li>
<li>Adam Hawthorne</li>
<li>Diane Holt</li>
<li>Elliott Hughes</li>
<li>Andrew M. Inggs</li>
<li>C. Brian Jones</li>
<li>Marko Kreen</li>
<li>David Lum</li>
<li>Phil Norman</li>
<li>Takashi Okamoto</li>
<li>Emil Ong</li>
<li>Andrew Pimlott</li>
<li>Daniel Resare</li>
<li>Mark Richters</li>
<li>Kumaran Santhanam</li>
<li>Gregory Steuck</li>
<li>Brian Sullivan</li>
<li>Andrew G. Tereschenko</li>
<li>Russ Trotter</li>
<li>Andrew Vajoczki</li>
<li>Jerry Veldhuis</li>
<li>Dirk Weigenand</li>
<li>Vadim Zaliva</li>
<li>Henner Zeller</li>
</ul>
</li>
</ul>
</article></div></div>
  </body>
</html>
