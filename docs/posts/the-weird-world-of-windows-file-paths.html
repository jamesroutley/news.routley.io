<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.fileside.app/blog/2023-03-17_windows-file-paths/">Original</a>
    <h1>The weird world of Windows file paths</h1>
    
    <div id="readability-page-1" class="page"><div><section><p>File system paths on Windows are stranger than you might think. On any Unix-derived system, a path is an admirably simple thing: if it starts with a <code>/</code>, it’s a path. Not so on Windows, which serves up a bewildering variety of schemes for composing a path.</p>
<!--more-->
<p>When I implemented the <a href="https://payments.posthaven.com/blog/2023-03-02_release-notes-1.7.0/#auto-completion-for-typed-paths">path autocompletion feature in Fileside 1.7</a>, I needed to take a closer look at this to make sure I had all bases covered. This blog post shares my findings.</p>
<h2 id="at-a-glance"><a href="#at-a-glance" aria-label="at a glance permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>At a glance</h2>
<h3 id="absolute-path-formats"><a href="#absolute-path-formats" aria-label="absolute path formats permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Absolute path formats</h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#drive-paths">Drive path</a></td>
<td><code>C:\Program Files\HAL 9000</code></td>
</tr>
<tr>
<td><a href="#unc-paths">UNC path</a></td>
<td><code>\\Media\Pictures\Worth\1000 words</code></td>
</tr>
<tr>
<td><a href="#device-paths">Device path (literal)</a></td>
<td><code>\\?\D:\Plans\Marshall</code></td>
</tr>
<tr>
<td><a href="#device-paths">Device path (normalized)</a></td>
<td><code>\\.\D:\Projects\Human Genome</code></td>
</tr>
</tbody>
</table>
<h3 id="relative-path-formats"><a href="#relative-path-formats" aria-label="relative path formats permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Relative path formats</h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Examples</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#paths-relative-to-the-current-directory">Current directory-relative</a></td>
<td><code>.\Manhattan</code>, <code>..\Plans</code></td>
</tr>
<tr>
<td><a href="#paths-relative-to-the-root-of-the-current-drive">Current drive-relative</a></td>
<td><code>\Pacts</code></td>
</tr>
<tr>
<td><a href="#paths-relative-to-a-drives-current-directory">Drive’s current directory-relative</a></td>
<td><code>D:Warsaw</code></td>
</tr>
</tbody>
</table>
<h3 id="disallowed-characters"><a href="#disallowed-characters" aria-label="disallowed characters permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Disallowed characters</h3>
<table>
<thead>
<tr>
<th>Characters</th>
<th>Validity</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#disallowed-characters-1">&lt; &gt; ” / \ | ? *</a></td>
<td>Never allowed</td>
</tr>
<tr>
<td><a href="#the-perilous-period">.</a></td>
<td>Disallowed as final character</td>
</tr>
<tr>
<td><a href="#the-cunning-colon">:</a></td>
<td>Disallowed except for with data streams</td>
</tr>
</tbody>
</table>
<h3 id="length-limits"><a href="#length-limits" aria-label="length limits permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Length limits</h3>
<table>
<thead>
<tr>
<th>Item</th>
<th>Maximum length</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#paths">Path</a></td>
<td>32,767 (or 260) characters</td>
</tr>
<tr>
<td><a href="#names">File or directory name</a></td>
<td>255 characters</td>
</tr>
</tbody>
</table>
<h2 id="windows-path-schemes"><a href="#windows-path-schemes" aria-label="windows path schemes permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Windows path schemes</h2>
<p>There are three different kinds of absolute path, and three different kinds of relative path on Windows.</p>
<h3 id="absolute-paths"><a href="#absolute-paths" aria-label="absolute paths permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Absolute paths</h3>
<p>Absolute, or fully qualified, paths are complete paths, that on their own uniquely identify a location in the file system.</p>
<h4 id="drive-paths"><a href="#drive-paths" aria-label="drive paths permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Drive paths</h4>
<p>Drive paths are the good old-fashioned paths we all know and love, consisting of a drive letter and a sequence of directories.</p>
<pre><code>D:\Doughnut preferences\With jam in
</code></pre>
<h4 id="unc-paths"><a href="#unc-paths" aria-label="unc paths permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>UNC paths</h4>
<p>UNC stands for Universal Naming Convention and describes paths that start with <code>\\</code>, commonly used to refer to network drives. The first segment after the <code>\\</code> is the host, which can be either a named server or an IP address, like so:</p>
<pre><code>\\Work\Hard
\\192.168.1.15\Hard
</code></pre>
<p>UNC paths can also be used to access local drives in a similar way:</p>
<pre><code>\\localhost\C$\Users\Andrew Fletcher
\\127.0.0.1\C$\Users\Alan Wilder
</code></pre>
<p>Or by using the computer name:</p>
<pre><code>\\Pipeline\C$\Users\Martin Gore
</code></pre>
<p>UNC paths have a peculiar way of indicating the drive letter, we must use <code>$</code> instead of <code>:</code>. Furthermore, accessing drives in this way will only work if you’re logged in as an administrator.</p>
<p>Note that <code>\\Pipeline</code> is not a valid directory path in itself, as it only identifies a server. The name of a share must be appended to arrive at an actual folder.</p>
<h4 id="device-paths"><a href="#device-paths" aria-label="device paths permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Device paths</h4>
<p>A device path starts with either of these two beauties:</p>
<ul>
<li><code>\\?\</code></li>
<li><code>\\.\</code></li>
</ul>
<p>They can be used to address physical devices (disks, displays, printers etc) in addition to files and folders. Not something you’ll ever use in day-to-day file management, but useful to know about if you come across one in the wild.</p>
<p>The syntax for accessing a local folder using a device path is either of:</p>
<pre><code>\\?\Z:\Animals\Cute
\\.\Z:\Animals\Cunning
</code></pre>
<p>If you really want to get obscure for the sake of it, you can also substitute an equivalent device identifier for <code>Z:</code>:</p>
<pre><code>\\?\Volume{59e01a55-88c5-411f-bf0b-92820bdb2548}\Animals\Cryptic
</code></pre>
<p>Here, <code>Volume{59e01a55-88c5-411e-bf0a-92820bdb2549}</code> happens to be the identifier for the disk volume on which <code>Z:</code> resides on the computer on which I’m writing this.</p>
<p>There’s also a special syntax for representing UNC paths as device paths:</p>
<pre><code>\\?\UNC\localhost\Z$\Animals\Curious
</code></pre>
<p>With device paths, the bit that comes after the <code>\\?\</code> or <code>\\.\</code> is a name defined in Windows’s internal <a href="https://en.wikipedia.org/wiki/Object_Manager_(Windows)"><em>Object Manager</em></a> namespace. For those curious to explore what’s available in this namespace, you can download the <a href="https://learn.microsoft.com/en-us/sysinternals/downloads/winobj">WinObj</a> tool and take a look.</p>
<h5 id="normalised-and-literal-device-paths"><a href="#normalised-and-literal-device-paths" aria-label="normalised and literal device paths permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Normalised and literal device paths</h5>
<p>So what’s the difference between <code>\\?\</code> and <code>\\.\</code>, you ask.</p>
<p>Normally, when you pass a path to Windows, it starts off by cleaning it up before using it. This process is referred to as <em>normalisation</em>. <a href="#normalisation">But more about that later</a>.</p>
<p>A <code>\\?\</code> path skips this cleaning step, while a <code>\\.\</code> path doesn’t. Hence, we can refer to <code>\\?\</code> paths as <em>literal device paths</em>, and <code>\\.\</code> as <em>normalised device paths</em>.</p>
<p>Say you, for whatever incomprehensible reason, need to access a file named <code>..</code>, which would normally be resolved to the parent directory during normalisation, you can do so via a literal device path.</p>
<h3 id="relative-paths"><a href="#relative-paths" aria-label="relative paths permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Relative paths</h3>
<p>Relative paths are incomplete paths, that need to be combined with another path to uniquely identify a location.</p>
<h4 id="paths-relative-to-the-current-directory"><a href="#paths-relative-to-the-current-directory" aria-label="paths relative to the current directory permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Paths relative to the current directory</h4>
<p>These are paths that use the current directory as their starting point, e.g. <code>.\Torquay</code> refers to a subdirectory of the current directory, and <code>..\Wales</code> refers to a subdirectory of the parent of the current directory.</p>
<p>In Fileside, the current directory is taken to mean the folder shown in the pane where you enter your path.</p>
<h4 id="paths-relative-to-the-root-of-the-current-drive"><a href="#paths-relative-to-the-root-of-the-current-drive" aria-label="paths relative to the root of the current drive permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Paths relative to the root of the current drive</h4>
<p>If you start a path with a single <code>\</code>, it’s interpreted relative to the root of the current drive. So, if you’re currently anywhere on the <code>E:</code> drive and type in <code>\Africa</code>, you’ll end up in <code>E:\Africa</code>.</p>
<p>When the current directory is accessed via a UNC path, a current drive-relative path is interpreted relative to the current root share, say <code>\\Earth\Asia</code>.</p>
<h4 id="paths-relative-to-a-drives-current-directory"><a href="#paths-relative-to-a-drives-current-directory" aria-label="paths relative to a drives current directory permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Paths relative to a drive’s current directory</h4>
<p>Less commonly used, paths specifying a drive without a backslash, e.g. <code>E:Kreuzberg</code>, are interpreted relative to the current directory of that drive. This really only makes sense in the context of the command line shell, which keeps track of a current working directory for each drive.</p>
<p>This is the only type of path that Fileside does not support, as it has no concept of a current directory per drive. Only panes have a current directory.</p>
<h3 id="normalisation"><a href="#normalisation" aria-label="normalisation permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Normalisation</h3>
<p>As alluded to above, all paths except <a href="#normalised-and-literal-device-paths">literal device paths</a> go through a normalisation process before they’re used. This process consists of the following steps:</p>
<ul>
<li>Replace forward slashes (<code>/</code>) with backslashes (<code>\</code>)</li>
<li>Collapse repeated backslash separators into one</li>
<li>Resolve relative paths replacing any <code>.</code> or <code>..</code></li>
<li>Trim trailing spaces and periods</li>
</ul>
<p>It’s thus generally possible to specify Windows paths using forward slashes as well.</p>
<h2 id="windows-naming-rules"><a href="#windows-naming-rules" aria-label="windows naming rules permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Windows naming rules</h2>
<p>Now we’ll turn our focus to the individual segments that make up a path. There are a number of restrictions on what names you can use for files and folders.</p>
<h3 id="disallowed-characters-1"><a href="#disallowed-characters-1" aria-label="disallowed characters 1 permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Disallowed characters</h3>
<p>You can’t use any of the following characters in a name:</p>
<pre><code>&lt; &gt; &#34; / \ | ? *
</code></pre>
<p>Any non-printable character with an <a href="https://www.asciitable.com/">ASCII value below 32</a> is equally out of the question.</p>
<h4 id="the-cunning-colon"><a href="#the-cunning-colon" aria-label="the cunning colon permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The cunning colon</h4>
<p>For the most part, <code>:</code> is also banned.</p>
<p>However, there is an exotic exception in the form of NTFS alternate data streams. It is a little known fact that you can <a href="https://blog.netwrix.com/2022/12/16/alternate_data_stream/">store a hidden piece of data inside a file</a> in certain contexts by appending a suffix preceded by a colon to its name.</p>
<h4 id="the-perilous-period"><a href="#the-perilous-period" aria-label="the perilous period permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The perilous period</h4>
<p>A <code>.</code> is fine anywhere within, or at the start of, a name, but is disallowed as a final character.</p>
<h4 id="leading-and-trailing-spaces"><a href="#leading-and-trailing-spaces" aria-label="leading and trailing spaces permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Leading and trailing spaces</h4>
<p>Curiously, Windows allows spaces at the beginning of names, but not at the end. As a name with spaces around it often looks identical to one without, these are generally a terrible idea, and Fileside automatically trims them off when you rename or create files.</p>
<h3 id="disallowed-names"><a href="#disallowed-names" aria-label="disallowed names permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Disallowed names</h3>
<p>For historical reasons, you can’t use any of the following names either:</p>
<p><code>CON</code>, <code>PRN</code>, <code>AUX</code>, <code>NUL</code>, <code>COM0</code>, <code>COM1</code>, <code>COM2</code>, <code>COM3</code>, <code>COM4</code>, <code>COM5</code>, <code>COM6</code>, <code>COM7</code>, <code>COM8</code>, <code>COM9</code>, <code>LPT0</code>, <code>LPT1</code>, <code>LPT2</code>, <code>LPT3</code>, <code>LPT4</code>, <code>LPT5</code>, <code>LPT6</code>, <code>LPT7</code>, <code>LPT8</code>, and <code>LPT9</code>.</p>
<p>That includes usage with an extension tacked on. If you call a file <code>COM1.txt</code> for example, it gets converted into <code>\\.\COM1\</code> internally, and gets interpreted as a device by Windows. Not what you want.</p>
<h3 id="case-sensitivity"><a href="#case-sensitivity" aria-label="case sensitivity permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Case sensitivity</h3>
<p>For the most part, Windows doesn’t make a distinction between lower- and upper-case characters in paths.</p>
<p><code>C:\Polish hamlet</code>, <code>c:\polish Hamlet</code>, <code>C:\Polish Hamlet</code>, or <code>C:\POliSh hAMlET</code> are considered exactly the same thing.</p>
<p>However, since the Windows 10 <em>April 2018 Update</em>, NTFS file systems do have the option of <a href="https://www.howtogeek.com/354220/how-to-enable-case-sensitive-folders-on-windows-10/">enabling case sensitivity on a per-folder basis</a>.</p>
<h2 id="length-limits-1"><a href="#length-limits-1" aria-label="length limits 1 permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Length limits</h2>
<p>We’re not quite done yet, the lengths of things have limits too.</p>
<h3 id="paths"><a href="#paths" aria-label="paths permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Paths</h3>
<p>Traditionally, <a href="https://learn.microsoft.com/en-us/windows/win32/fileio/maximum-file-path-limitation?tabs=registry">a path on Windows could not exceed a total of 260 characters</a>. Even today, this is still the case for some apps, unless they have taken care to implement a workaround.</p>
<p>This workaround consists of transforming every path into a <a href="#normalised-and-literal-device-paths">literal device path</a> under the hood before passing it Windows. Through doing so, we can bypass the 260 character limit, and increase it to a much more generous 32,767 characters instead. Fileside implements this workaround.</p>
<h3 id="names"><a href="#names" aria-label="names permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Names</h3>
<p>Individual file and folder names cannot be longer than 255 characters.</p>
<h2 id="so-many-ways-to-say-the-same-thing"><a href="#so-many-ways-to-say-the-same-thing" aria-label="so many ways to say the same thing permalink"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>So many ways to say the same thing</h2>
<p>Armed with all this knowledge, we realise that we can construct an almost unlimited number of different path strings that all refer to the same directory.</p>
<ul>
<li><code>C:\CHAMELEON</code></li>
<li><code>c:\chameleon</code></li>
<li><code>C:\/\\//\\\///Chameleon</code></li>
<li><code>C:\Windows\..\Users\..\Chameleon</code></li>
<li><code>\\localhost\C$\Chameleon</code></li>
<li><code>\\127.0.0.1\C$\Chameleon</code></li>
<li><code>\\?\C:\Chameleon</code></li>
<li><code>\\.\C:\Chameleon</code></li>
<li><code>\\.\UNC\localhost\C$\Chameleon</code></li>
<li><code>\\?\Volume{59e01a55-88c5-411e-bf0a-92820bdb2549}\Chameleon</code></li>
<li><code>\\.\GLOBALROOT\Device\HarddiskVolume4\Chameleon</code></li>
<li>etc.</li>
</ul>
<p>That’s what sticking to a policy of total backwards compatibility for several decades gets you!</p></section></div></div>
  </body>
</html>
