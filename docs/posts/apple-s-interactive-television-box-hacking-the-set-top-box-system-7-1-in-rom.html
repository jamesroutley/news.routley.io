<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="http://oldvcr.blogspot.com/2023/07/apples-interactive-television-box.html">Original</a>
    <h1>Apple&#39;s interactive television box: Hacking the set top box System 7.1 in ROM</h1>
    
    <div id="readability-page-1" class="page"><div id="post-body-7628653847015489091" itemprop="description articleBody">
<p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgT5ldv1fTGlQrFwP9YvESyKNAoqxHlTII0uFm4NYQRJ8gvKaGvGh0Y-2mgZNL9w-TNhZFhb77W_OvZDlmPvrRHmvLf4xlIUXLH7BbsJuOEtCPRKP3-6T3W6rUgrGEo7FDsFNujaetgxrK0BHIovLKHTwsW6njPPheMKDQFNUAv33t3jrMOxvq3HO8Ez8U/s4080/PXL_20230709_004451960.jpg"><img alt="" width="320" data-original-height="3072" data-original-width="4080" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgT5ldv1fTGlQrFwP9YvESyKNAoqxHlTII0uFm4NYQRJ8gvKaGvGh0Y-2mgZNL9w-TNhZFhb77W_OvZDlmPvrRHmvLf4xlIUXLH7BbsJuOEtCPRKP3-6T3W6rUgrGEo7FDsFNujaetgxrK0BHIovLKHTwsW6njPPheMKDQFNUAv33t3jrMOxvq3HO8Ez8U/s320/PXL_20230709_004451960.jpg"/></a></p><p>

One of the coolest things to come along in the 68K Mac homebrew community is the ROM Boot Disk concept. Classic Macs have an unusually large ROM that contains a fair bit of the Mac OS, which was true even in the G3 New World Mac era (it was just on disk), so it&#39;s somewhat surprising that only one Mac officially could boot the Mac OS entirely from ROM, namely the Macintosh Classic (hold down Cmd-Option-X-O to boot from a hidden HFS volume with System 6.0.3). For many Macs that can take a ROM SIMM, you can <a href="http://synack.net/~bbraun/macromboot.html">embed a ROM volume</a> in the Mac ROM that can even be mirrored to a RAM disk. You can even <a href="http://www.bigmessowires.com/mac-rom-inator-ii/">buy them pre-populated</a>. How&#39;s <em>that</em> for immutability?
</p><p>
Well, it turns out Apple themselves were the first ones to implement a flashable Mac OS ROM volume in 1994, but hardly anyone noticed — because it was only ever used publicly in a minority subset of one of the most unusual of the Macintosh-derived systems, the Apple Interactive Television Box (a/k/a AITB or the Apple Set Top Box/STB). And that&#39;s what we&#39;re going to dig into — and reprogram! — today.
</p><p>
<a name="more"></a>
The AITB/STB was Apple&#39;s attempt to get into the early set-top box market of the 1990s. The dominance of the Apple TV today is a late phenomenon; Apple was in no position to launch such a product on their own in that era, though with the recent introduction of their QuickTime multimedia framework in 1991, they were a strong candidate for a technology partner. Apple forged an alliance with Oracle and parallel computing vendor nCube (Larry Ellison then being its single biggest stockholder), with Apple developing the front end client box and nCube boxes running Oracle Media Server handling the back end. All of this was to occur using MPEG-1 video with QuickTime as the playback system, specifically selected because of MPEG-1&#39;s bitrate of 1.5Mbit/sec and enough to run over <a href="http://alok.github.io/2022/05/so-long-home-t1-line-hello-hacking-t1.html">a T1/E1 line</a>. Plus, hardware decoders for the format already existed, meaning the device wouldn&#39;t have to rely on the CPU for smooth playback.
</p><p>
Apple developed the STBs in their Austin, Texas campus. It was based on stripped-down 1993 Quadra 605 hardware with extra silicon for the media features but kept serial, ADB and SCSI connections to allow it to run compatible CD-ROMs, sort of a Pippin before the Pippin, with plans to sell it for $750 [2023 dollars about $1500]. You could even hook up a printer to the serial port, but no storage was onboard: this device was to strictly boot from a central network link — in this case a T1/E1 — or from CD. Units first emerged publicly at the National Association of Broadcasters Show in Las Vegas in April 1995. There were at least two major hardware versions, STB1 and STB3 (no STB2s are known), with the STB3 being the most &#34;common.&#34;
</p><p>
Apple partnered with cable TV companies for content delivery and AITBs were part of at least several trial deployments across the United States and Europe (most notably British Telecom), and Disney even used it briefly in at least one theme park. However, there were concerns about providing enough licensed and on-demand content, and while customers might buy that content, they tended to compensate by cutting subscriptions to the premium channels that the cable companies relied on as a regular income stream. The situation wasn&#39;t much better as a retail product given that home broadband was in its infancy and the product market was already too small for a boutique system. On top of that, the $300,000 [in 2023 over $600,000!] official development system (consisting of an nCube MediaCUBE server, 8 AITBs and 10GB of storage) made the already rarefied product thoroughly unattractive to developers, and with DOCSIS on the horizon wiring up T1 lines everywhere just didn&#39;t seem to pay off. Apple never ended up launching the hardware for retail sale, the existing trials were terminated, and most of the boxes were ultimately recalled and destroyed.
</p><p>
But, like all failed experiments, not all of them disappeared and various units have made their way into the hands of collectors and hackers. Over the years I&#39;ve acquired two STB3 systems myself, one a non-working &#34;production&#34; model and the other a mostly functional DVT prototype. This prototype is not FCC-approved but is fundamentally identical to the &#34;production&#34; M4120 unit, so we&#39;ll be discussing mostly the prototype here since it works and is in much better shape. Here it is:

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhIZ95zeC9Bpz_wst7Jbp6FjJBHpbooJbr6pKcbpCRQjprz4vxt8yiOcrjOHVBFpSivbyHDQdPiY949VPdCNMTT_fTQc8M-QBr8d3_8ylZs_SKHPMteVNAArtSvUhw3vDYN3xQ5rcCkRVhTGmJkS4SaJaK9UoiCZba9_imv0kZqAUa-0-Z3dSEgcGg2M_g/s4080/PXL_20230709_003206578.jpg"><img alt="" width="320" data-original-height="3072" data-original-width="4080" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhIZ95zeC9Bpz_wst7Jbp6FjJBHpbooJbr6pKcbpCRQjprz4vxt8yiOcrjOHVBFpSivbyHDQdPiY949VPdCNMTT_fTQc8M-QBr8d3_8ylZs_SKHPMteVNAArtSvUhw3vDYN3xQ5rcCkRVhTGmJkS4SaJaK9UoiCZba9_imv0kZqAUa-0-Z3dSEgcGg2M_g/s320/PXL_20230709_003206578.jpg"/></a></p><p>

The STB3 shipped in a fairly dramatic black case with a top lid. It was designed to fit into any typical home entertainment centre and will support the weight of a typical CRT television.

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgTRMFQKF0pmUDYNAm0myOiQwPvl3wqRbe9tmba1nx-Briy8FRsaTBYRUR40xFfcRcyojAg9MgXynQeoiiwRdRBX92xXzI5YjQocwd9i54rFgUw3UZsGywWhrNI5LAkCevlDXE53GBqHgNFBK1m7FeK-p0skf8RsveBV8xoGsspRVyXDKRBtsyo3sY2_YM/s4080/PXL_20230709_003314972.jpg"><img alt="" width="320" data-original-height="3072" data-original-width="4080" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgTRMFQKF0pmUDYNAm0myOiQwPvl3wqRbe9tmba1nx-Briy8FRsaTBYRUR40xFfcRcyojAg9MgXynQeoiiwRdRBX92xXzI5YjQocwd9i54rFgUw3UZsGywWhrNI5LAkCevlDXE53GBqHgNFBK1m7FeK-p0skf8RsveBV8xoGsspRVyXDKRBtsyo3sY2_YM/s320/PXL_20230709_003314972.jpg"/></a></p><p>

The only front control was a power button. Depending on the installed ROM, the power LED might show any or no colour at all. We&#39;ll talk about that a little later. Under the Apple logo was an IR sensor for which I lack <a href="https://wiki.preterhuman.net/Apple_Interactive_Television_Box#/media/File:Applestb-2-3_small-23938_0.jpg">the official remote control</a>. (That&#39;s okay because it turns out we don&#39;t actually need it to hack it.)

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg9TP-hNTksN-BhBcDH-llXtSIFtDhM3f7p9OCl3XX6tc2HF13QhKrV_ICC9uyu0NUEOTjNYoqVh2QAG4Wc9WqDhmVgfyry4nB7Wfupu5gOQ-4PykR_tc5ixBDPpnCAcoWvDPzymG3Tcpst4OmNFNQHlL5iWjGISw-ih8j2Jlrb6U3WYz5SXt32oMd21ug/s4080/PXL_20230709_003451706.jpg"><img alt="" width="320" data-original-height="3072" data-original-width="4080" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg9TP-hNTksN-BhBcDH-llXtSIFtDhM3f7p9OCl3XX6tc2HF13QhKrV_ICC9uyu0NUEOTjNYoqVh2QAG4Wc9WqDhmVgfyry4nB7Wfupu5gOQ-4PykR_tc5ixBDPpnCAcoWvDPzymG3Tcpst4OmNFNQHlL5iWjGISw-ih8j2Jlrb6U3WYz5SXt32oMd21ug/s320/PXL_20230709_003451706.jpg"/></a></p><p>

The rear ports. Standard, the STB3 came with connectors for power (using a regular LC power supply), SCSI (using the Apple HDI-30 connector), SCART TV and VCR (both blocked), RF in/out from an antenna or cable TV connection, 8P8C network (but not Ethernet: this is for a T1/E1), standard Mac Mini-DIN serial, Mac S-video out, composite video, and stereo phono audio. A rubber grommet covers the Kensington lock slot, which I imagine was used in the hotel deployments. On the side, not visible here, is a single ADB port which only officially supports a mouse.
</p><p>
The BT version of these systems (labeled with BT branding as a &#34;Interactive TV System Voyager 2000&#34;) reportedly used an ADSL connection, though I&#39;ve never seen such a unit personally.

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhTRREUvu0cy51XdH1aMLWXtD2RO4q79tAg1xqivpH0nUl9XiVV8G5QaQrzy0g9uBB298zFHJZF9AFI-lO36SbjJjpyuUWbXbQifviZaq44yfUaWpJWA3dn4NLQBFVALuZ_LkmQYk-EV_A35h8AsIxhTVYTPoeILQZUVXYoLLiUV7QEEd4f6Hs73ieAbTE/s4080/PXL_20230709_003507630.jpg"><img alt="" width="320" data-original-height="3072" data-original-width="4080" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhTRREUvu0cy51XdH1aMLWXtD2RO4q79tAg1xqivpH0nUl9XiVV8G5QaQrzy0g9uBB298zFHJZF9AFI-lO36SbjJjpyuUWbXbQifviZaq44yfUaWpJWA3dn4NLQBFVALuZ_LkmQYk-EV_A35h8AsIxhTVYTPoeILQZUVXYoLLiUV7QEEd4f6Hs73ieAbTE/s320/PXL_20230709_003507630.jpg"/></a></p><p>

But what this unit also has, and most STBs don&#39;t, is a developer video card with a Mac DA-15 connector. Sadly, I&#39;ve never been able to get it to work. More below when we open the case.

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi55I5avhed3rjQgSrTq1JHXvUQRPBij2hGebQhfZBAxbeDm4cExbWeyoyW1GMcU_p_aHZLrqUUMEMPAlsnP4sZkjuT9C1w7tRP_kmowvyDq4WzkBlRv8PI76sHDdOFyHBSo9XXCqu-y9N8VBtNMqsOvxKaQpAKF-k89t32T74-8YXvCpg71m03bl8_pLc/s4080/PXL_20230709_003615470~2.jpg"><img alt="" width="320" data-original-height="3072" data-original-width="4080" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi55I5avhed3rjQgSrTq1JHXvUQRPBij2hGebQhfZBAxbeDm4cExbWeyoyW1GMcU_p_aHZLrqUUMEMPAlsnP4sZkjuT9C1w7tRP_kmowvyDq4WzkBlRv8PI76sHDdOFyHBSo9XXCqu-y9N8VBtNMqsOvxKaQpAKF-k89t32T74-8YXvCpg71m03bl8_pLc/s320/PXL_20230709_003615470~2.jpg"/></a></p><p>

On the underside is this disclaimer that the unit is not FCC-approved. This unit is clearly further along than an EVT prototype <a href="http://alok.github.io/2021/10/shiner-esb-apple-network-server.html">like our &#34;Shiner ESB&#34; Apple Network Server prototype</a>, but because it&#39;s not FCC approved it&#39;s probably not a PVT, so therefore I&#39;m concluding it&#39;s a DVT <a href="http://alok.github.io/2023/06/new-ram-card-prototype-mac-portable.html">like our Macintosh Portable prototype</a>. 

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh_U1RpMX2qAF0ooA_BfaqlW4-RCFB8Ddas3ZJlpirKHi6lQAdCuRcFVyuPDMC0wKGu27VcMWHToP51L0gybLQNQPHpF_ieSDJFKvkh-JOQJoqiBW6rtHmZDBVQ-EwRSfd2wOwq3SJhCwZtTzdKMUltGiyt3vkRzC_VcNbpesVLe69hWEXdX_gbaQiJ3iU/s4080/PXL_20230709_003715628~2.jpg"><img alt="" width="320" data-original-height="3072" data-original-width="4080" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh_U1RpMX2qAF0ooA_BfaqlW4-RCFB8Ddas3ZJlpirKHi6lQAdCuRcFVyuPDMC0wKGu27VcMWHToP51L0gybLQNQPHpF_ieSDJFKvkh-JOQJoqiBW6rtHmZDBVQ-EwRSfd2wOwq3SJhCwZtTzdKMUltGiyt3vkRzC_VcNbpesVLe69hWEXdX_gbaQiJ3iU/s320/PXL_20230709_003715628~2.jpg"/></a></p><p>

Removing the top lid (there&#39;s a screw you may need to remove from the back), we see the video card, the mainboard and the power supply, which is a regular Q605 supply except with a black frame around the power port (the Q605/LC475 supply is in Apple Platinum beige). Although there is a spot where a cooling fan could go, there is neither mounting nor a power connector for one in both my units. The little three solder points next to it are where one can be installed, and some units exist where a fan is present.

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjbRpIrtyRW2ZehmoMYfI2EtpKyA_HMIiVBBPR6b68QCOAbtOH5tEMNg_ntM5yFbk5PMafN9-VNnMo70MCwgSjqE1fldVAVwY7lw54pAvl_mHpZVaua-1R3DXpovg61H1-zKRU8ziy95qTHMaR6R-oXyUTPwQ9AiXkZ_HCNUpL_JTiB8eGEnehobdMzEi8/s4080/PXL_20230709_004316413.jpg"><img alt="" height="320" data-original-height="4080" data-original-width="3072" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjbRpIrtyRW2ZehmoMYfI2EtpKyA_HMIiVBBPR6b68QCOAbtOH5tEMNg_ntM5yFbk5PMafN9-VNnMo70MCwgSjqE1fldVAVwY7lw54pAvl_mHpZVaua-1R3DXpovg61H1-zKRU8ziy95qTHMaR6R-oXyUTPwQ9AiXkZ_HCNUpL_JTiB8eGEnehobdMzEi8/s320/PXL_20230709_004316413.jpg"/></a></p><p>

The CPU, like the Quadra 605, is a 25MHz 68LC040. Other chips visible here are an Apple 343S0138-A (fabbed by TI) handling the PDS slot, an Apple 34320164-b (VLSI) MEMCjr memory controller, a TI TMXE320AV110 that appears to be an audio DSP, an NCR 53C96 SCSI controller, a Zilog Z8530 SCC for the serial port, and a Philips SAA7188A digital YUV to NTSC/PAL encoder (earlier Philips chips appear in the AV Macs). The RAM and ROM SIMMs are next to that, along with 4MB of RAM soldered to the board.

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjUlN7v1dVzPcuWN-32LnCxp9tHw0wh_XQnSs02wAo9TM_bQIDJdYkobQzhiEY2vmq1mjKpm5UvT3fkntpSslaZ8RYkl50_sETAdjHYGnixGu5YSJrR2V6Wv0LsQJA6q0N11B9kSdvoi9h7pGzNWaMjxe1bP-kiVywaulgUV3qrSlKumWSL8KHqDRvsMaQ/s4080/PXL_20230709_004055555.jpg"><img alt="" width="320" data-original-height="3072" data-original-width="4080" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjUlN7v1dVzPcuWN-32LnCxp9tHw0wh_XQnSs02wAo9TM_bQIDJdYkobQzhiEY2vmq1mjKpm5UvT3fkntpSslaZ8RYkl50_sETAdjHYGnixGu5YSJrR2V6Wv0LsQJA6q0N11B9kSdvoi9h7pGzNWaMjxe1bP-kiVywaulgUV3qrSlKumWSL8KHqDRvsMaQ/s320/PXL_20230709_004055555.jpg"/></a></p><p>

In front, red lines go to the power switch and LED, blue lines to the IR sensor, and white lines to the side-mounted ADB port.

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg-3je5X16YlzzgFNQiFTkxtbERfgkjZ3HWhcjTFlSYgUdKEo2X6YQdnbFx_eCp2MEGYo1yaFWa-HYbPwZts2vjb3NIC4S0SrfFtnjfhBeozaJ7QcnctOhE-KyfInHLXr1vyNQMeH2rnPTJyJiZ4dcCZGW17kdo6nJOL7s5-ShDtu4jy-lwdWV_IUjZF_4/s4080/PXL_20230709_003928910~2.jpg"><img alt="" width="320" data-original-height="3072" data-original-width="4080" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg-3je5X16YlzzgFNQiFTkxtbERfgkjZ3HWhcjTFlSYgUdKEo2X6YQdnbFx_eCp2MEGYo1yaFWa-HYbPwZts2vjb3NIC4S0SrfFtnjfhBeozaJ7QcnctOhE-KyfInHLXr1vyNQMeH2rnPTJyJiZ4dcCZGW17kdo6nJOL7s5-ShDtu4jy-lwdWV_IUjZF_4/s320/PXL_20230709_003928910~2.jpg"/></a></p><p>

And inside the front, just next to the red lines, is the board copyright (1995) and number (820-0638-01, which would be a prototype board designation).

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjW7dYb_EPZyMaNdjPWlczKCrQjySlY-nQuiRnS3gKudh9BCusz3E1RfJFWTjlmqp6v2I0oZG1R_ev-pXIfaAijn5GxDyqz-n71j_QIjsKk7p72hr_f_krhAqobA_K47VzZI6VTEDY35UaJ78hpEEjClA7jWs_NIXyc_mCR82hnZKUbpCbmWBIerOi1jiE/s4080/PXL_20230709_003741943.jpg"><img alt="" height="320" data-original-height="4080" data-original-width="3072" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjW7dYb_EPZyMaNdjPWlczKCrQjySlY-nQuiRnS3gKudh9BCusz3E1RfJFWTjlmqp6v2I0oZG1R_ev-pXIfaAijn5GxDyqz-n71j_QIjsKk7p72hr_f_krhAqobA_K47VzZI6VTEDY35UaJ78hpEEjClA7jWs_NIXyc_mCR82hnZKUbpCbmWBIerOi1jiE/s320/PXL_20230709_003741943.jpg"/></a></p><p>

The board has a single PDS slot, occupied in the prototype by a video card which connects with a 90-degree adapter. This card is a simple 2D framebuffer with four 256Kx8 VRAMs to equal 1MB on board. Very few of these cards existed and seem to have only been part of developer machines.

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgLyeOSuBpDHPhuh8x6XCMg9euneOlzeEg_9EoXM_1vNK9TsHrSiaVSCoB_GvChJaegtkrQkJC-xnHboL4clrJqApd5Pku_ap53ljBBaBole-NlO7lYE7s7Yz9mzETcjSd1QvAiqkFMZ4O1bird8QG0cN1K76GlWvUz4Mini1AL3WTVtPr0hsgYFThy464/s4080/PXL_20230709_003754651~2.jpg"><img alt="" width="320" data-original-height="3072" data-original-width="4080" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgLyeOSuBpDHPhuh8x6XCMg9euneOlzeEg_9EoXM_1vNK9TsHrSiaVSCoB_GvChJaegtkrQkJC-xnHboL4clrJqApd5Pku_ap53ljBBaBole-NlO7lYE7s7Yz9mzETcjSd1QvAiqkFMZ4O1bird8QG0cN1K76GlWvUz4Mini1AL3WTVtPr0hsgYFThy464/s320/PXL_20230709_003754651~2.jpg"/></a></p><p>

The card identifies itself as a Micro Conversions X62SC01 (Revision A), which resembles the Micro Conversions 1724PD graphics card for the LC III and Performa 630. If there existed a driver specifically for this card, it must have been on whatever developer-bootable disk this unit didn&#39;t come with. 

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiiCu5x2uBMX99H2xHVvOBOC9kyVjEnSA792712fYjmBvceBmiRc6ZWCdgmmPajESaWJ8oCh6fj0uJd-SC8bB4ee9AiLiiWBl6iAxC-H3NdfHQSRZE9Col1cJHkKE--LfDjaRm-WugBh-4BZX4zC-iCAkK8AuozM_HBgI7UF7U-p4EUpoPMX_0syNADno4/s4080/PXL_20230709_005752133.jpg"><img alt="" height="320" data-original-height="4080" data-original-width="3072" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiiCu5x2uBMX99H2xHVvOBOC9kyVjEnSA792712fYjmBvceBmiRc6ZWCdgmmPajESaWJ8oCh6fj0uJd-SC8bB4ee9AiLiiWBl6iAxC-H3NdfHQSRZE9Col1cJHkKE--LfDjaRm-WugBh-4BZX4zC-iCAkK8AuozM_HBgI7UF7U-p4EUpoPMX_0syNADno4/s320/PXL_20230709_005752133.jpg"/></a></p><p>

Pulling the card out of my working STB was a no-go; it&#39;s pretty much there for keeps (not interested in trying to pry it out lest I damage the card, the board, or both). Instead, we&#39;ll fill in the gap by switching here to the non-working &#34;production&#34; model, which unfortunately was improperly stored and suffered from oxidation damage. The chip with the white sticker is a socketed DIP ROM labeled &#34;A3N(LS) C/SUM 519D8 95@@&#34; which appears in other NTSC STB3s. The MPEG decoder is conveniently marked, a C-Cube Microsystems CL450-P160, the same one Apple used earlier with their <a href="https://wiki.preterhuman.net/Apple_MPEG_Media_System">MPEG Media System</a> card. Next to that is an Xilinx FPGA that likely serves as support video hardware.
</p><p>
The other marked chip, with green oxidation damage around the pins, is a Brooktree Bt8069 T1 transceiver. Other than the Zilog SCC the Bt8069 is the only networking chip obviously on the board; in particular, no Ethernet chips are visible. If the British Telecom units were truly ADSL, it would have had to have a different chip here or some sort of external transceiver box: even in situations where the T1 line is provisioned over DSL, that&#39;s usually <em>H</em>DSL, and the technologies are otherwise not interchangeable.

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEitI5lW1lkjFtmNsXGy7mCLOK-ITjsbO_rP0EisgRadMfXyJuSLBAOlnH2Ei1-gqR6TsLsOHgcPDWSpg92GpFv_5pH3JiXR0r0jdhLJdASwa7Yy421JqNvegmgCjomaMlRHUSHo-SGQZUE9h1nH6-0_h6_BPycF_FGe5tWVZzKT9sXfAfkgTgGgAmBNPuU/s4080/PXL_20230709_005558757~2.jpg"><img alt="" width="320" data-original-height="3072" data-original-width="4080" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEitI5lW1lkjFtmNsXGy7mCLOK-ITjsbO_rP0EisgRadMfXyJuSLBAOlnH2Ei1-gqR6TsLsOHgcPDWSpg92GpFv_5pH3JiXR0r0jdhLJdASwa7Yy421JqNvegmgCjomaMlRHUSHo-SGQZUE9h1nH6-0_h6_BPycF_FGe5tWVZzKT9sXfAfkgTgGgAmBNPuU/s320/PXL_20230709_005558757~2.jpg"/></a></p><p>

This unit is labeled as production and has an FCC ID and clearance sticker identifying it as a model M4120 (but with no formal name). This unit came from my hometown of San Diego County, California, based on the asset tag from The Lightspan Partnership, Inc. Lightspan Partnership, later just Lightspan, was founded in 1993 to develop edutainment software and produced a line of school-oriented Sony PlayStation titles which were sold to districts for classroom use. However, the original concept was to distribute the software via cable television so that students and parents could use it at home. This unit was obviously part of that initial, unrealized initiative. In 2003 Lightspan merged with PLATO Learning, Inc. (now Edmentum), one of the inheritors of the <a href="https://arstechnica.com/gadgets/2023/03/plato-how-an-educational-computer-system-from-the-60s-shaped-the-future/">Control Data PLATO legacy</a>, and subsequently ceased to exist.

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhZBzCEBrOKoQO0gDMcBCUq4CdepuzIG_mopk1Dy5iqOaXCMXnyxFekc7ynWOlwt_I7lNfpbnbgQ5fVh6KGN-njY1haZDHXMVc3oarJxRCzxbR2UkfMba447S9yFUkrEkSy1Thj4RTDq20YUDQLpqyUlaXE_8VQWnYyZ6W6vv4BQl9LWBrwhl5Z7uHJVpc/s4080/PXL_20230709_005931032~2.jpg"><img alt="" width="320" data-original-height="3072" data-original-width="4080" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhZBzCEBrOKoQO0gDMcBCUq4CdepuzIG_mopk1Dy5iqOaXCMXnyxFekc7ynWOlwt_I7lNfpbnbgQ5fVh6KGN-njY1haZDHXMVc3oarJxRCzxbR2UkfMba447S9yFUkrEkSy1Thj4RTDq20YUDQLpqyUlaXE_8VQWnYyZ6W6vv4BQl9LWBrwhl5Z7uHJVpc/s320/PXL_20230709_005931032~2.jpg"/></a></p><p>

But despite being labeled as a production, FCC-certified unit, it still has the same prototype motherboard code as the DVT unit.

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhBbysjkWCQtleUXAXloYwx_CPwNnWmBY4lnhz2hiNSxrsBw1Fzk75bTZPJzpTzwMdygyr-jjKcngjKRIZVJPCsuPWZ-TClH0lEzln6O98w3JFLlcuXMyBVDoUHIbztGZiD119CIWnoHlhCukUw01iz20XZK5_MORV5HY2ECcUEWiZmf3bx6DEnKsQQV4U/s4080/PXL_20230709_003842420.jpg"><img alt="" height="320" data-original-height="4080" data-original-width="3072" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhBbysjkWCQtleUXAXloYwx_CPwNnWmBY4lnhz2hiNSxrsBw1Fzk75bTZPJzpTzwMdygyr-jjKcngjKRIZVJPCsuPWZ-TClH0lEzln6O98w3JFLlcuXMyBVDoUHIbztGZiD119CIWnoHlhCukUw01iz20XZK5_MORV5HY2ECcUEWiZmf3bx6DEnKsQQV4U/s320/PXL_20230709_003842420.jpg"/></a></p><p>

Let&#39;s go back to the RAM and ROM for a second. There is a RAM slot here and you can put extra RAM into it, same as you would with a regular Q605, but the ROM&#39;s the more interesting part.
</p><p>
No, I&#39;m not talking about these green mask ROMs that most owners of an STB3 have:

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhOoKGMcfQsMFxby3zDQDSn0HxNIEyKk8G7PSB1i1tzjrfI7A1JF0Qpjc6Q9pjL08pRDFX0Vg5AAuyic6Ab22d_GmIIbGB-t0JwErhDhjm-E-mvVst1piB707mGtW6JjQuVCMYqDBkdgELhvdSUlF7w0-OknJMZe-d7oThG-QC-Ej-HsQ2pWsVH6PFLT9A/s4080/PXL_20230706_012249967.jpg"><img alt="" width="320" data-original-height="3072" data-original-width="4080" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhOoKGMcfQsMFxby3zDQDSn0HxNIEyKk8G7PSB1i1tzjrfI7A1JF0Qpjc6Q9pjL08pRDFX0Vg5AAuyic6Ab22d_GmIIbGB-t0JwErhDhjm-E-mvVst1piB707mGtW6JjQuVCMYqDBkdgELhvdSUlF7w0-OknJMZe-d7oThG-QC-Ej-HsQ2pWsVH6PFLT9A/s320/PXL_20230706_012249967.jpg"/></a></p>

<p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh1lgi3HJyTRqY6gQIfuaIHBKZxMgneZeEldT6eMdQmnmzQZunLaV_LpvtZ-nMNGTXbojHb4d1rDWqr_YPQ62QgnSM8Ky9rEAqEz3Xk4pUv_mRmm0JrjVsEva7SCqejjdjS-aYHhgLFoR-tpfxWtoiIfRFgG33YXFKwNLE_0gpVQ3V9bLwX6NDRIQA-y6A/s4080/PXL_20230706_012350250.jpg"><img alt="" width="320" data-original-height="3072" data-original-width="4080" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh1lgi3HJyTRqY6gQIfuaIHBKZxMgneZeEldT6eMdQmnmzQZunLaV_LpvtZ-nMNGTXbojHb4d1rDWqr_YPQ62QgnSM8Ky9rEAqEz3Xk4pUv_mRmm0JrjVsEva7SCqejjdjS-aYHhgLFoR-tpfxWtoiIfRFgG33YXFKwNLE_0gpVQ3V9bLwX6NDRIQA-y6A/s320/PXL_20230706_012350250.jpg"/></a></p><p>

If you dump one (I have two which are the same), you&#39;ll get a ROM checksum (</p><tt>$ff7439ee</tt><p>, SHA-1 </p><tt>1d833125adf553a50f5994746c2c01aa5a1dbbf2</tt><p>) exactly identical to the Quadra 605, which isn&#39;t surprising because the STB is derived from it. With a Q605 ROM installed, these units won&#39;t display a picture but they will let you boot over SCSI. Add something like Farallon/Netopia Timbuktu and a LocalTalk connection and you can remotely use one over the network from another classic Mac. Not too useful, but hey, they&#39;re stylish and rare, and it&#39;s great fun at parties (I&#39;m told, I&#39;m never invited to those sorts of parties).
</p><p>
Unfortunately, my unit, though it would initially boot from a BlueSCSI, one day suddenly decided it wouldn&#39;t. I&#39;ve never been able to get it to boot from any SCSI device since, no matter what keys are held down, Option, Cmd-Option-Shift-Delete, dead chicken burnt offering, nothing. The unit otherwise works normally which leads me to suspect a fuse somewhere and/or the SCSI controller. (Don&#39;t kneejerk and say bad caps. I will hurt you.)
</p><p>
That brings us to <em>this</em> ROM.

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgmBZI_T5VRmpjgPQeZz_y9QkhNgeuQkWzEbZKippjHhD64Yo7_A7B3njHUyHGdf79Z3M1JMQjAGLsmnYRNd_oU-H6kUH_HG3WZUy2bJF2n36LjSiN1W5HQ1Y7YeOgdWEFvC1l57yEGCX-9l3gDtZOruEk85wa9vSLxTMPRVMTjuuFpfiMn5zItYh-OdJc/s4080/PXL_20230706_012023599.jpg"><img alt="" width="320" data-original-height="3072" data-original-width="4080" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgmBZI_T5VRmpjgPQeZz_y9QkhNgeuQkWzEbZKippjHhD64Yo7_A7B3njHUyHGdf79Z3M1JMQjAGLsmnYRNd_oU-H6kUH_HG3WZUy2bJF2n36LjSiN1W5HQ1Y7YeOgdWEFvC1l57yEGCX-9l3gDtZOruEk85wa9vSLxTMPRVMTjuuFpfiMn5zItYh-OdJc/s320/PXL_20230706_012023599.jpg"/></a></p>

<p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgWenRFMs0VFZsd8ghQpnC5e3SIm__VBAEDo_zrWzNoGAhChyCBwIz6qnVrkGnHvTTa8VIczcCaPFnZYI_swQ6hAAstr7IXQGOSpo9WKuojU3vDnSGpN4Ex_7Ua0kHu_5iPU1Ok6Y5IXh0ubjaZqAOyxsvQRYqHZKQ0aG9dSExhga_S2OJrnk0myi_FjPc/s4080/PXL_20230706_012041156.jpg"><img alt="" width="320" data-original-height="3072" data-original-width="4080" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgWenRFMs0VFZsd8ghQpnC5e3SIm__VBAEDo_zrWzNoGAhChyCBwIz6qnVrkGnHvTTa8VIczcCaPFnZYI_swQ6hAAstr7IXQGOSpo9WKuojU3vDnSGpN4Ex_7Ua0kHu_5iPU1Ok6Y5IXh0ubjaZqAOyxsvQRYqHZKQ0aG9dSExhga_S2OJrnk0myi_FjPc/s320/PXL_20230706_012041156.jpg"/></a></p><p>

This red ROM stick, labeled AP1654-01, has four 256K flash chips front and back to equal 2MB. Notice the silkscreened name &#34;RLC FLASH SIMM.&#34; These appear to have been made initially for the RISC LC, the famous and heavily modified LC-based development prototype that emulated a 68K Mac with full compatibility and became the direct ancestor of the Power Macintosh.
</p><p>
There are <a href="https://wiki.preterhuman.net/Apple_Interactive_Television_Box#/media/File:Post-2085-0-12713200-1421865679.jpg">many versions</a> of this ROM, and this one is not labeled like most of the others in that linked image. However, I have no reason to suspect this particular one behaves much differently from the others.
</p><p>
The red ROM&#39;s biggest difference from the green ROM in that the TV outputs are enabled. When you switch on (with the back power switch) an STB3 with the red ROM, after a pause of a few seconds the LED over the power button lights red, and then shortly after yellow. In the <a href="https://wiki.preterhuman.net/Apple_Interactive_Television_Box_Setup_Guide">Setup Guide</a>, this indicates POST, followed by standby. This is very different from units with a Q605 ROM in which the LED never lights and the machine instead starts from the ADB power key, like any other Mac of this era would normally.
</p><p>  
Pressing the power button when the LED is yellow turns the LED green and this image appears on a connected composite or S-video display, captured on my INOGENI box:

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjZQNNU7QZCxPJQmdL8u-OoHW62gAEuHiH8WkwgAE77kaXxScSfbILat4PBWYpeOAGLSua-D7JlW-9g_h_vjhnvjKu1EyRY17m8sRPCa6Igofd_7tIXNTEdye2XkPOGncjRzxXWoPdzE43KdFN61IAQq0Ud5kBK54X7Hgkakhs9-JUU-JTg3Opgf_tGHVw/s1400/vlcsnap-2023-07-05-18h45m37s975.png"><img alt="" width="320" data-original-height="1050" data-original-width="1400" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjZQNNU7QZCxPJQmdL8u-OoHW62gAEuHiH8WkwgAE77kaXxScSfbILat4PBWYpeOAGLSua-D7JlW-9g_h_vjhnvjKu1EyRY17m8sRPCa6Igofd_7tIXNTEdye2XkPOGncjRzxXWoPdzE43KdFN61IAQq0Ud5kBK54X7Hgkakhs9-JUU-JTg3Opgf_tGHVw/s320/vlcsnap-2023-07-05-18h45m37s975.png"/></a></p><p>

But, invariably, 30 seconds-ish later, you get this:

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjl5TiGKoVXYy-_3fE1rLsEONnN5k05NWxwFnmMugouanonw1NCenO8dW1o4CJlYxUemOhaF029_9XvFJzCdWDMuQ-0aeSh0gHoAqaLpaFF3f1yPaJ5kf-cBZbC3Tq-0MBNYdv6Gqm7O0UyCg1mSKQDNvW84yFYMw-K8q83ing1Gxgqul20Wd95HmfOOh8/s1400/vlcsnap-2023-07-05-18h46m08s434.png"><img alt="" width="320" data-original-height="1050" data-original-width="1400" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjl5TiGKoVXYy-_3fE1rLsEONnN5k05NWxwFnmMugouanonw1NCenO8dW1o4CJlYxUemOhaF029_9XvFJzCdWDMuQ-0aeSh0gHoAqaLpaFF3f1yPaJ5kf-cBZbC3Tq-0MBNYdv6Gqm7O0UyCg1mSKQDNvW84yFYMw-K8q83ing1Gxgqul20Wd95HmfOOh8/s320/vlcsnap-2023-07-05-18h46m08s434.png"/></a></p><p>

indicating an expected response from the server never arrived. I don&#39;t know what the green button on the remote does (the manual simply says to &#34;see the interactive service provider&#39;s instructions&#34; for the four colour buttons). I connected speakers to the audio out but the unit makes no sound.
</p><p>
I don&#39;t know which human-readable version of the ROM this is, but we can dump it:

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgspjwVenvpQVJcrOSy9-l3ozVHvKARXEWwtwRtSsP5qGKttOAzfyxT_1ElSCX5wujF3ejFIQpABxzwfFWB33dovaLAzUALV8gwnKd4Gd1aX-zOpoUxgLEVxpKfPRXKRwrVZXAB7wRDJAk757D3ddOZEwBRfFIFZL0J3bUHUywEOoj8uktud7C4VhWkjFM/s4080/PXL_20230706_013701726.jpg"><img alt="" width="320" data-original-height="3072" data-original-width="4080" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgspjwVenvpQVJcrOSy9-l3ozVHvKARXEWwtwRtSsP5qGKttOAzfyxT_1ElSCX5wujF3ejFIQpABxzwfFWB33dovaLAzUALV8gwnKd4Gd1aX-zOpoUxgLEVxpKfPRXKRwrVZXAB7wRDJAk757D3ddOZEwBRfFIFZL0J3bUHUywEOoj8uktud7C4VhWkjFM/s320/PXL_20230706_013701726.jpg"/></a></p><p>

The best tool for this purpose is of course Doug Brown&#39;s <a href="https://www.downtowndougbrown.com/programmable-mac-rom-simms/">flash SIMM programmer</a>, which can both read these ROM SIMMs (used in many 68K Macs) and write to replacement flash ROM sticks. The 2MB dump we get has a checksum of </p><tt>$b7025504</tt><p> (the first four bytes as a 32-bit big-endian unsigned integer), a version word of </p><tt>$077d</tt><p> (i.e., 1917, bytes eight and nine as a 16-bit big-endian unsigned short), and a SHA-1 of </p><tt>911eaafc5ccfe6823a7be61d44aaf0a63d081118</tt><p>. What we&#39;re going to do with this dump is based on this particular ROM version. The rest of this article may or may not fully apply to other versions and of course you follow along with your real device at your own risk.
</p><p>
The first step with any dump is see what <a href="https://github.com/ReFirmLabs/binwalk"><tt>binwalk</tt></a> makes of it, and other than copyright messages, it finds a couple surprising things are present. Nine, to be exact.
</p><div><pre>% binwalk RED.rom

DECIMAL       HEXADECIMAL     DESCRIPTION
--------------------------------------------------------------------------------
941976        0xE5F98         Copyright string: &#34;Copyright C-Cube Microsystems 1992&#34;
1090813       0x10A4FD        Copyright string: &#34;Copyright 1990-91 Apple Computer Inc. Copyright 1981 Linotype AG Copyright 1990-91 Type Solutions Inc.1.0&#34;
1090851       0x10A523        Copyright string: &#34;Copyright 1981 Linotype AG Copyright 1990-91 Type Solutions Inc.1.0&#34;
1090878       0x10A53E        Copyright string: &#34;Copyright 1990-91 Type Solutions Inc.1.0&#34;
1844352       0x1C2480        JPEG image data, JFIF standard 1.01
1846358       0x1C2C56        JPEG image data, JFIF standard 1.01
1848250       0x1C33BA        JPEG image data, JFIF standard 1.01
1849933       0x1C3A4D        JPEG image data, JFIF standard 1.01
1851587       0x1C40C3        JPEG image data, JFIF standard 1.01
1853288       0x1C4768        JPEG image data, JFIF standard 1.01
1855867       0x1C517B        JPEG image data, JFIF standard 1.01
1857571       0x1C5823        JPEG image data, JFIF standard 1.01
1859146       0x1C5E4A        JPEG image data, JFIF standard 1.01
1871674       0x1C8F3A        Copyright string: &#34;Copyright 1987-1991&#34;
</pre></div>
<p>
The copyrights reference fonts, but also C-Cube, the manufacturer of the MPEG decoder. It also finds nine JPEG images:

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg4sNYPow2ybQ0P8ozChGowiiU4vkiem0E_digzZZCODCRBW7iB12EjYJuPOk1p4DQJRLIIKDHJuHqM-kXQv4dOeMPSUw88h7tcP0Eh0BrZ4IBvppjZ4C-xRIqZxNgQKdux2yDMTMj1HVj9-zjkbG4xY4VwYixfZGlMSRAMU8UB0r8OzAk3mUxDnuEYWjU/s864/stbbunchc.jpg"><img alt="" width="320" data-original-height="624" data-original-width="864" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg4sNYPow2ybQ0P8ozChGowiiU4vkiem0E_digzZZCODCRBW7iB12EjYJuPOk1p4DQJRLIIKDHJuHqM-kXQv4dOeMPSUw88h7tcP0Eh0BrZ4IBvppjZ4C-xRIqZxNgQKdux2yDMTMj1HVj9-zjkbG4xY4VwYixfZGlMSRAMU8UB0r8OzAk3mUxDnuEYWjU/s320/stbbunchc.jpg"/></a></p><p>

These are obviously pictures of the development team. Do you recognize any of them? Are <em>you</em> any of them?
</p><p>
Naturally, with nine pictures, you <em>know</em> what we have to do.

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgrmbuP_zpI2z4cr9BIvSbQ96HdOBDZfl87m8ZD1SiajarCUvCkFXgSMoTIwBakJR1_sAk968xblsWwvbBo0I4_Xb9vx5if5n7glkCr9MrIt0AB48Fn3LRKLqHlXPz3qz332BToAWNm6HEgfX9o3gVsun5IxaIE_wVQMNkhHGaZ1vXgx1QaOEfIKJLl7dw/s864/stbbunch.jpg"><img alt="" width="320" data-original-height="624" data-original-width="864" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgrmbuP_zpI2z4cr9BIvSbQ96HdOBDZfl87m8ZD1SiajarCUvCkFXgSMoTIwBakJR1_sAk968xblsWwvbBo0I4_Xb9vx5if5n7glkCr9MrIt0AB48Fn3LRKLqHlXPz3qz332BToAWNm6HEgfX9o3gVsun5IxaIE_wVQMNkhHGaZ1vXgx1QaOEfIKJLl7dw/s320/stbbunch.jpg"/></a></p><p>

More relevantly, though, now that we have a ROM dump we&#39;ve just <em>got</em> to hack it. Since it&#39;s displaying a message, let&#39;s see if we can modify the message as a small proof of concept. </p><tt>strings</tt><p>, that always useful tool, shows that the &#34;Sorry!&#34; message appears in two places. Modifying the first one is sufficient:

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgYt8m-nsip9bekcmIMyFm6o6_OPGtMlgxE4R8sC8I0I1qQJcev4wHWKaSS7nEgcF6k3HBqaqprdBSvz_upUP1O4okVuIs9NQm96J8iJ1fevCQM6eUKAa72m_TYctmsCh5JZjRIBoLzzS4_mI9VgqGFR7B2qliH7mrhOcMF0J3iGEmUr2uix9zl1B5bKT4/s829/firsthack.png"><img alt="" height="320" data-original-height="829" data-original-width="741" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgYt8m-nsip9bekcmIMyFm6o6_OPGtMlgxE4R8sC8I0I1qQJcev4wHWKaSS7nEgcF6k3HBqaqprdBSvz_upUP1O4okVuIs9NQm96J8iJ1fevCQM6eUKAa72m_TYctmsCh5JZjRIBoLzzS4_mI9VgqGFR7B2qliH7mrhOcMF0J3iGEmUr2uix9zl1B5bKT4/s320/firsthack.png"/></a></p><p>

This will change the checksum of the ROM, which is computed as the sum of all the 16-bit big endian shorts from byte 4 onward and truncated to 32 bits. The tools I wrote up to handle all this are in <a href="https://github.com/classilla/stbtools">this Github project</a>. Use </p><a href="https://github.com/classilla/stbtools/blob/main/checksum.pl"><tt>checksum.pl</tt></a><p> to recompute the ROM checksum and then use the hex editor to edit the first four bytes to match.

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgbRxAXFDqgIzCZOMyXflYM7cDavcldVZ7qoGeL5S4jFKSzb011J-7T7Y5dSPGI1NkdtQ4JtIYWrh1a9NJ5PUGeW-hq722aW8xDBAECsgw3aMvcMqwzq1I64QdylGLHh3SVByIu43DaJnfUFwcYn0d38WBULCD943A9-hnLG-Vf6CrpJfAkQBm9oNP0s_0/s4080/PXL_20230712_210136841.jpg"><img alt="" width="320" data-original-height="3072" data-original-width="4080" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgbRxAXFDqgIzCZOMyXflYM7cDavcldVZ7qoGeL5S4jFKSzb011J-7T7Y5dSPGI1NkdtQ4JtIYWrh1a9NJ5PUGeW-hq722aW8xDBAECsgw3aMvcMqwzq1I64QdylGLHh3SVByIu43DaJnfUFwcYn0d38WBULCD943A9-hnLG-Vf6CrpJfAkQBm9oNP0s_0/s320/PXL_20230712_210136841.jpg"/></a></p><p>

Then get yourself a couple 2MB flash ROMs SIMMs. They must be exactly 2MB in size; larger ROMs won&#39;t work even if you &#34;echo&#34; the bytes. I used the 2MB <a href="http://www.bigmessowires.com/mac-rom-inator-ii/">ROM-inator II from Big Mess O&#39;Wires</a> but <a href="https://ko-fi.com/caymacvintage/shop">CayMac&#39;s 2MB ROM</a> should also do the job; CayMac also sells new SIMM programmers (I am not affiliated with BMOW or CayMac).
</p><p>
Burn the ROM in your programmer <a href="https://github.com/dougg3/mac-rom-simm-programmer">using the SIMM programmer tool</a>, make sure your STB3 is off, and install it in the ROM SIMM slot near the RAM slot. On the programmer, the SIMM skull and crossbones should face the skull and crossbones on the circuitboard; on the STB, the SIMM skull and crossbones should face the RAM. Connect up some sort of composite monitor and switch it on.

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh2e7HhSAZB9z6i_KgAF8NAkqZSdAvclAVb_E-JNbzTuqAfLY5hVEiozGASWEPiCSi3yNu_vFN3tln1LIjwuUNivoO4Ynqy4v1OiTPwTV63OJa8fm7XGKvo2GGtW41ioNVnNNmoYWLhwJZ_4TZfl1GJ8vSDjhkbPrQlOWUP2m6d2IABpWT7gR94G5y83jM/s1400/vlcsnap-2023-07-12-13h57m41s443.png"><img alt="" width="320" data-original-height="1050" data-original-width="1400" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEh2e7HhSAZB9z6i_KgAF8NAkqZSdAvclAVb_E-JNbzTuqAfLY5hVEiozGASWEPiCSi3yNu_vFN3tln1LIjwuUNivoO4Ynqy4v1OiTPwTV63OJa8fm7XGKvo2GGtW41ioNVnNNmoYWLhwJZ_4TZfl1GJ8vSDjhkbPrQlOWUP2m6d2IABpWT7gR94G5y83jM/s320/vlcsnap-2023-07-12-13h57m41s443.png"/></a></p><p>

Our plea for help duly appears. This simple demonstration proves that the only thing we need to do to modify the ROM is update the checksum; nothing else on the board appears to check it. It&#39;s now time to figure out what&#39;s there and how it&#39;s organized.
</p><p>
Many Apple ROMs are segmented <a href="https://preterhuman.net/macstuff/techpubs/mac/MoreToolbox/MoreToolbox-106.html#HEADING106-0">into discrete resources</a>, which are functionally equivalent with on-disk HFS resources attached to files, and can be accessed from the Toolbox in the same fashion. For example, here&#39;s the header of the (unused, disabled and not implemented) <tt>.netBOOT</tt> driver resource in the green Quadra 605 ROM:
</p><div><pre>00051c80  18 00 00 00 00 00 00 00  00 0e dc 70 00 05 1c b0  |...........p....|
00051c90  44 52 56 52 00 31 58 08  2e 6e 65 74 42 4f 4f 54  |DRVR.1X..netBOOT|
00051ca0  00 00 00 00 c0 a0 00 00  00 00 08 80 00 00 03 04  |................|
</pre></div>
<p>
We can scan the red ROM dump for similar resource headers. Starting at offset <tt>$0000</tt>, the first big-endian 32-bit word is always the ROM checksum and the second is the starting address for the boot code (technically the first sets the stack pointer, but the ROM glosses over this). We page through opaque binary data awhile until we start seeing structured patterns every so often. The first one of these patterns we get to is this.
</p><div><pre>000ac210  78 00 00 00 00 00 00 00  00 00 00 00 00 0a b3 70  |x..............p|
000ac220  62 6f 6f 74 00 03 58 04  4d 61 69 6e 6b 63 6b 63  |boot..X.Mainkckc|
000ac230  4b 75 72 74 c0 a0 00 00  00 00 07 6a 00 00 00 64  |Kurt.......j...d|
</pre></div>
<p>
This is our first ROM resource, <tt>boot#3</tt>, named <tt>MainkckcKurt</tt> (much like the string <tt>Gary</tt>, presumably <a href="https://apple.fandom.com/wiki/Gary_Davidian">Gary Davidian</a>, shows up a lot in Mac ROMs, the name <tt>Kurt</tt> is all over this one — from the &#34;kc&#34; bit I&#39;m guessing <a href="https://www.linkedin.com/in/kurt-clark-529444">Kurt Clark</a>, who was an Apple senior firmware and system software engineer at the time of the AITB&#39;s development). The hex byte <tt>78</tt> indicates an enabled, live resource.
</p><p>
The ROM resources in the red ROM are stored somewhat back to front with the &#34;header&#34; actually serving as a footer; the resource runs from the fourth word (here <tt>$000ab370</tt>) to the beginning of the footer. How do we know it&#39;s laid out like that? Because of what we find a little later on:
</p><div><pre>000ac980  70 73 6c 74 00 14 70 73  6c 74 00 1a 73 6e 64 20  |pslt..pslt..snd |
000ac990  00 01 77 65 64 67 e9 81  77 65 64 67 e9 80 6b 63  |..wedg..wedg..kc|
000ac9a0  78 00 00 00 00 00 00 00  00 0a c2 10 00 0a c2 40  |x..............@|
000ac9b0  72 6f 76 6d 00 00 58 00  6b 63 6b 63 6b 63 6b 63  |rovm..X.kckckckc|
000ac9c0  4b 75 72 74 c0 a0 00 00  00 08 70 0c 00 00 00 6c  |Kurt......p....l|
000ac9d0  4c 4b 60 00 00 86 44 18  00 00 06 53 79 73 74 65  |LK`...D....Syste|
000ac9e0  6d 00 00 00 00 00 00 00  00 00 06 46 69 6e 64 65  |m..........Finde|
000ac9f0  72 00 00 00 00 00 00 00  00 00 07 4d 61 63 73 42  |r..........MacsB|
000aca00  75 67 00 00 00 00 00 00  00 00 0c 44 69 73 61 73  |ug.........Disas|
000aca10  73 65 6d 62 6c 65 72 00  00 00 0d 53 74 61 72 74  |sembler....Start|
000aca20  55 70 53 63 72 65 65 6e  00 00 06 46 69 6e 64 65  |UpScreen...Finde|
000aca30  72 00 00 00 00 00 00 00  00 00 09 43 6c 69 70 62  |r..........Clipb|
000aca40  6f 61 72 64 00 00 00 00  00 00 00 0a 00 14 00 00  |oard............|
</pre></div>
<p>
The characters <tt>LK</tt> herald HFS boot blocks. Yes, friends, there&#39;s an embedded disk image here, and it&#39;s doubtful the resource code <tt>rovm</tt> is used to reference it.
</p><p>
There are many fun strings in that disk image:
</p><div><pre>000af1d0  46 72 65 64 54 56 aa 0d  0d 42 72 6f 75 67 68 74  |FredTV...Brought|
000af1e0  20 74 6f 20 79 6f 75 20  62 79 20 46 72 65 64 20  | to you by Fred |
000af1f0  48 75 78 68 61 6d 20 61  6e 64 20 46 72 65 64 20  |Huxham and Fred |
000af200  4d 6f 6e 72 6f 65 2e 0d  0d a9 20 41 70 70 6c 65  |Monroe.... Apple|
000af210  20 43 6f 6d 70 75 74 65  72 2c 20 49 6e 63 2e 20  | Computer, Inc. |
000af220  31 39 39 33 0d 41 6c 6c  20 52 69 67 68 74 73 20  |1993.All Rights |
000af230  52 65 73 65 72 76 65 64  2e 0d 81 e2 20 30 01 60  |Reserved.... 0.`|
</pre></div>
<p>
Although it was known that the AITB ROM had portions of System 7.1, this red ROM actually seems to contain an entire, self-contained, miniature bootable image. There&#39;s no reason to have the string <tt>Welcome to Macintosh.</tt> unless a working System file were part of it:
</p><div><pre>000b2930  1a 00 6c 00 c0 57 65 6c  63 6f 6d 65 20 74 6f 20  |..l..Welcome to |
000b2940  4d 61 63 69 6e 74 6f 73  68 2e 00 b1 7a 00 18 00  |Macintosh...z...|
000b2950  7e 00 c0 44 65 62 75 67  67 65 72 20 69 6e 73 74  |~..Debugger inst|
000b2960  61 6c 6c 65 64 2e 00 b1  77 00 14 00 7e 00 c0 45  |alled...w...~..E|
000b2970  78 74 65 6e 73 69 6f 6e  73 20 6f 66 66 2e 00 b1  |xtensions off...|
000b2980  79 00 ca 00 5e 00 72 54  68 69 73 20 73 74 61 72  |y...^.rThis star|
000b2990  74 75 70 20 64 69 73 6b  20 77 69 6c 6c 20 6e 6f  |tup disk will no|
000b29a0  74 20 77 6f 72 6b 20 6f  6e 20 74 68 69 73 20 4d  |t work on this M|
000b29b0  61 63 69 6e 74 6f 73 68  2f 6d 6f 64 65 6c 2e 20  |acintosh/model. |
[...]
000b3e50  6d 21 40 2d 04 42 af 06  04 00 00 00 55 54 4d 61  |m!@-.B......UTMa|
000b3e60  63 69 6e 74 6f 73 68 20  53 79 73 74 65 6d 20 76  |cintosh System v|
000b3e70  65 72 73 69 6f 6e 20 37  2e 31 0d 0d 0d a9 20 41  |ersion 7.1.... A|
000b3e80  70 70 6c 65 20 43 6f 6d  70 75 74 65 72 2c 20 49  |pple Computer, I|
000b3e90  6e 63 2e 20 31 39 38 33  2d 31 39 39 32 0d 41 6c  |nc. 1983-1992.Al|
000b3ea0  6c 20 72 69 67 68 74 73  20 72 65 73 65 72 76 65  |l rights reserve|
000b3eb0  64 2e 00 00 01 f5 a8 9f  65 72 00 12 09 01 00 00  |d.......er......|
</pre></div>
<p>
Eventually we come to its footer, which now enables us to extract it.
</p><div><pre>001339d0  78 00 00 00 00 00 00 00  00 0a c9 a0 00 0a c9 d0  |x...............|
001339e0  64 69 73 6b 00 00 58 00  6b 63 6b 63 6b 63 6b 63  |disk..X.kckckckc|
001339f0  4b 75 72 74 c0 a0 00 00  00 00 07 50 00 00 00 74  |Kurt.......P...t|
</pre></div>
<p>
It&#39;s a <tt>disk</tt>, resource #0. That sounds more likely as a type code. If you look at the third and fourth 32-bit words (big-endian, again, as G-d intended), you&#39;ll find it links back to the last footer at <tt>$000ac9a0</tt> (the <tt>rovm</tt> resource), allowing us to scan the file by walking back references, and the address <tt>$000ac9d0</tt> is where we found the boot block, so that must be the starting address for this resource. That means <tt>disk#0</tt> occupies <tt>$000ac9d0</tt> to the beginning of the footer at <tt>$001339d0</tt>.
</p><p>
If this is a bootable Mac OS System 7 image, it should act like it. And, to my delight, it does. The manual says nothing about connecting an ADB keyboard to it, only a mouse, but ADB keyboards work fine. If you hold down the SHIFT key while turning the rear power switch on and waiting for it to turn yellow, you&#39;ll lose the Apple background when you power on from the front, exactly as if an extension didn&#39;t load.

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEglpqRWGzWyMNbo_4QZLm1sdSM6ySTqUHbz4-DpQZDZgLI5qKf7WEgaluUOQLYXGgu6kOkzweNbdrVUvlnStpGd6HOJzV3cWAZGfDP_x6JnHyA_iZOHOmXOHIKOKw5hN6kRQEX6lCgWzeiD4oSy-LRT4C3PsE7Eq-EirStt443Q8X_zUPC15riAD4NzdrM/s1400/vlcsnap-2023-07-11-20h43m06s983.png"><img alt="" width="320" data-original-height="1050" data-original-width="1400" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEglpqRWGzWyMNbo_4QZLm1sdSM6ySTqUHbz4-DpQZDZgLI5qKf7WEgaluUOQLYXGgu6kOkzweNbdrVUvlnStpGd6HOJzV3cWAZGfDP_x6JnHyA_iZOHOmXOHIKOKw5hN6kRQEX6lCgWzeiD4oSy-LRT4C3PsE7Eq-EirStt443Q8X_zUPC15riAD4NzdrM/s320/vlcsnap-2023-07-11-20h43m06s983.png"/></a></p><p>

This behaviour suggests that when you first turn it on, it&#39;s doing its memory test and POST, then turns on the red LED while searching for and booting the minimal Mac OS, then turns on the yellow LED when, I guess, the &#34;Finder&#34; (such as it is) is ready to find its mothership.
</p><p>
Other typical Mac key combinations work, too. Pressing Command-Q will reset the machine when the timeout error message appears, as if quitting any other app. If you press Command-Option-Escape in an attempt to kill the task, you&#39;ll reset it also, or Command-Power, though possibly only at the point the timeout error message is present — one suspects this front-end program doesn&#39;t call <tt>WaitNextEvent</tt> very much. (In fact, it turns out it doesn&#39;t by the point, but that&#39;s a spoiler from near the end of this article.) It seems virtually anything that would cause a quit or system error (or any system dialogue box) will immediately force a restart. Incidentally, there is no startup chime or system beep, though there does appear to be a System Beep resource (<tt>snd #1</tt>).
</p><p>
Can the STB3 red ROM boot from anything else? The manual says it can access a CD-ROM drive connected via SCSI, and there are strings in the ROM that make reference to SCSI, but these appear to be within the byte range we identified as part of the disk image (and my SCSI isn&#39;t bootable). Apart from that, however, we now have enough understanding of how its ROM is laid out to write something that will walk it. (Eventually I&#39;ll extend it to work with other Mac ROMs, but right now the code just works with this red one.) We&#39;ll use <a href="https://github.com/classilla/stbtools/blob/main/resscan.pl"><tt>resscan.pl</tt></a> to see what driver resources are present and if there are any other disk images.
</p><div><pre>% ../resscan.pl RED.rom | grep -ai DRVR
[78000000] found DRVR #93 at 0x00133a00 0x00134150 &#34;.STBDiskDriverkckckckckc&#34; 
% ../resscan.pl RED.rom | grep -ai disk
[78000000] found disk #0 at 0x000ac9d0 0x001339d0 &#34;kckckckcKurt��&#34; 
[78000000] found DRVR #93 at 0x00133a00 0x00134150 &#34;.STBDiskDriverkckckckckc&#34;
(various string resources elided)
</pre></div>
<p>
There appears to be only one <tt>DRVR</tt>, versus the multiple found in the Q605 ROM (such as one for the floppy drive), plus only one ROM disk image. If it can load from SCSI at all, it appears to be handled by the OS in the ROM disk image rather than the firmware directly, suggesting a regular MacOS volume might not boot as such. Alternatively, doing so may not have been supported with this version of the ROM. Resource <tt>STR #46396</tt> does have the interesting string &#34;Manages file access to CDi discs for QuickTime media handlers&#34; which suggests disc support may have been intended for <a href="https://en.wikipedia.org/wiki/CD-i">greenbook CD-i</a>.
</p><p>
Of other resources present, there are several <tt>thng</tt> resources, including an &#34;STB3 Component&#34; that &#34;Supports the hardware dependent features of STB3.&#34; and an &#34;I2C Component&#34; that &#34;Supports I2C using Cuda,&#34; and a number of <tt>cdec</tt> (QuickTime codec) resources for Cinepak, Photo/JPEG, Apple Animation (&#34;Decompresses images compressed using run length encoding&#34;) and Apple Graphics (&#34;Decompresses images compressed using Sean&#39;s secret recipe&#34;) and, of course, MPEG-1. These components are specific to the STB and embedded elsewhere in ROM, not as part of the bootable image.
</p><p>
As for the OS itself, we&#39;ll now extract that byte range we computed and treat it as a disk image. Both SheepShaver and Mini vMac will mount it, but we&#39;ll use SheepShaver first to illustrate a little of what&#39;s there.

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEivi109oErIiBTo1MbdgBFIq1S01HphNj3frf-D55P-qI2z5AueUhtAEnB8O17hsfc8WYrgo1LxiGewK9Z-EzXJKO_sMMKihSlojvXMWXT8sdbQ75d4bhbXvPZ72_YmrqsqSO-LCi5hzOfGSLZqTXE5dWR-wBi2-E_Z1mZiOhvHk_dJSuibrWrOQBYw23g/s899/happydisk.png"><img alt="" width="320" data-original-height="815" data-original-width="899" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEivi109oErIiBTo1MbdgBFIq1S01HphNj3frf-D55P-qI2z5AueUhtAEnB8O17hsfc8WYrgo1LxiGewK9Z-EzXJKO_sMMKihSlojvXMWXT8sdbQ75d4bhbXvPZ72_YmrqsqSO-LCi5hzOfGSLZqTXE5dWR-wBi2-E_Z1mZiOhvHk_dJSuibrWrOQBYw23g/s320/happydisk.png"/></a></p><p>

First off, we&#39;re dealing with a disk image smaller than an 800K floppy; it&#39;s 540K in size. As a result the System Folder is very abbreviated: two mysterious </p><tt>INIT</tt><p>s, </p><tt>NMIer</tt><p> and </p><tt>TSDrvr INIT - 8/8</tt><p>, and very small </p><tt>Finder</tt><p> and </p><tt>System</tt><p> files. There is one font in the </p><tt>Fonts</tt><p> folder (there are other font references in the System file), and nothing in </p><tt>Apple Menu Items</tt><p>. The TSDrvr extension may be related to the known set of <a href="https://wiki.preterhuman.net/Apple_Interactive_Television_Box#Software">Set Top Box extensions</a> though none of those files have so far worked with any STB using the green ROM booting a conventional version of Mac OS. If indeed related, then the TS part of the name likely refers to <a href="https://en.wikipedia.org/wiki/MPEG_transport_stream">MPEG transport streams</a> and handles framing as movie data comes over the wire.
</p><p>
The other file is named <tt>MPEGStill</tt>. It has a single <tt>ckid</tt> (check ID) resource from MPW Projector, which is the Macintosh Programmer&#39;s Workshop version control system, and (among other binary data) that resource contains the strings <tt>SetTopProj</tt> (the project name, no doubt), <tt>Tidbits</tt> (probably the component or subproject, probably not <a href="https://tidbits.com/">the long-lived Mac newsletter</a>), <tt>jay michael puckett</tt> (author - which one of the self-portraits is he?), and <tt>AppleMPEGStill</tt>.
</p><p>
But the last string is the most interesting. It says it&#39;s a <tt>new still for non-BT trials</tt>. So what&#39;s the still image?

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEib-hWXs8j5td0A6eAhc0ob7O-BD82dJkv_DsNBSENEi5Huz6Nhhw6Cz73L98cRhbbJRdilkN7LTi2ws6EEgNLkKcYMwWZ3R4Gh0I3rV3YF2N-CwoWlHi8oJlVNm_f6qf8pXfzEDS5bnoMsTGffFex481l45Gwxr00XtPSB3ySeUMANXGVJIg47Pm-HGL8/s813/mpegstill.png"><img alt="" width="320" data-original-height="812" data-original-width="813" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEib-hWXs8j5td0A6eAhc0ob7O-BD82dJkv_DsNBSENEi5Huz6Nhhw6Cz73L98cRhbbJRdilkN7LTi2ws6EEgNLkKcYMwWZ3R4Gh0I3rV3YF2N-CwoWlHi8oJlVNm_f6qf8pXfzEDS5bnoMsTGffFex481l45Gwxr00XtPSB3ySeUMANXGVJIg47Pm-HGL8/s320/mpegstill.png"/></a></p><p>

It&#39;s ... an MPEG-1 frame. And QuickTime will play it:

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi07kh4BFEuBesHidlYFP4z8lEZYzLg2ruiY5AL5cSJgU0FTRvFD4rx4cLsw2fmRc8M8Z1ffYjApx5u9OnyZ439fIFmpvcdnw9BNKBRagmRjAFO7ENfuo67KJlAYGJmcozWWxSXod9BZSkr_1hES2YN9nHZIUD9YCDsPYPyQMzUUzhPWdhQcv-PKcxIfvw/s797/ismpg.png"><img alt="" width="320" data-original-height="452" data-original-width="797" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi07kh4BFEuBesHidlYFP4z8lEZYzLg2ruiY5AL5cSJgU0FTRvFD4rx4cLsw2fmRc8M8Z1ffYjApx5u9OnyZ439fIFmpvcdnw9BNKBRagmRjAFO7ENfuo67KJlAYGJmcozWWxSXod9BZSkr_1hES2YN9nHZIUD9YCDsPYPyQMzUUzhPWdhQcv-PKcxIfvw/s320/ismpg.png"/></a></p><p>

There&#39;s our image, as CIF PAL 352x288. Notice there&#39;s only one frame here; presumably the BT STBs used a British Telecom image for their backdrop still instead. Most likely the hardware MPEG decoder, via the built-in ROM codecs, is being used to decode and display the frame.
</p><p>
For our first trick, let&#39;s create a new still frame of our own. There are a few gotchas. First of all, SheepShaver seems to wipe the boot blocks when it unmounts the image, and also unblesses the System Folder, making the resulting disk image unbootable by the STB. (I&#39;ll say benignly this was the source of a lot of cussing when the red LED would turn on but then nothing else happened.) We&#39;ll use it to explore the image but for development we&#39;ll use Mini vMac instead, which also unblesses the System Folder, but if you boot the emulated Mac (I use the Macintosh II emulation) with both your boot volume and the STB volume on the command line, it leaves the boot blocks alone. We can fix the &#34;unblessed&#34; folder after Mini vMac unmounts it.
</p><p>
If we feed the data fork to <tt>file</tt> and <tt>ffmpeg</tt>, this is what we get.
</p><div><pre>% file MPEGStill
MPEGStill: MPEG sequence, v1, progressive Y&#39;CbCr 4:2:0 video, CIF PAL, 25 fps
% ffmpeg -i MPEGStill
[...]
[mpegvideo @ 0x1001f8d4b70] Estimating duration from bitrate, this may be inaccurate
Input #0, mpegvideo, from &#39;MPEGStill&#39;:
  Duration: 00:00:00.00, bitrate: 104786 kb/s
  Stream #0:0: Video: mpeg1video, yuv420p(tv), 352x288 [SAR 1:1 DAR 11:9], 104857 kb/s, 25 tbr, 1200k tbn
</pre></div>
<p>
We&#39;ll use the famous <a href="https://en.wikipedia.org/wiki/SMPTE_color_bars#/media/File:SMPTE_Color_Bars.svg">SMPTE colour bars</a> at a 4:3 aspect ratio. Based on the specs above, we should be able to approximate it with a command line line <tt>ffmpeg -i smpte.png -s 352x288 -r 25 -c:v mpeg1video -pix_fmt yuv420p nu.mpg</tt>, but this doesn&#39;t quite work.

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi2Awvj72whLl1HbYjyjSnNNn5a_4xy7S8n9L59l_CIqkz_esCE16IGsgquK5thEZdHIN7yan-EIDgY_rSfi5VlCsoXOJQPhoaRI1h77BBrZrac1K4pQPfpZh1nFUoCZnbHUD8-lHE87klJgPKxzukoYXrCLv568-T8OIrzuZTSDRUJP5H8jD0FKGjT0i8/s1920/vlcsnap-2023-07-13-20h40m31s473.png"><img alt="" width="320" data-original-height="1200" data-original-width="1920" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi2Awvj72whLl1HbYjyjSnNNn5a_4xy7S8n9L59l_CIqkz_esCE16IGsgquK5thEZdHIN7yan-EIDgY_rSfi5VlCsoXOJQPhoaRI1h77BBrZrac1K4pQPfpZh1nFUoCZnbHUD8-lHE87klJgPKxzukoYXrCLv568-T8OIrzuZTSDRUJP5H8jD0FKGjT0i8/s320/vlcsnap-2023-07-13-20h40m31s473.png"/></a></p><p>

The reason is it doesn&#39;t is because </p><tt>ffmpeg</tt><p> generated an <a href="https://en.wikipedia.org/wiki/MPEG_program_stream">MPEG program stream</a> and the decoder hardware wants an <a href="https://en.wikipedia.org/wiki/MPEG_elementary_stream">MPEG <em>elementary</em> stream</a>.
</p><div><pre>% file nu.mpg
nu.mpg: MPEG sequence, v1, system multiplex
</pre></div>
<p>
While I&#39;m sure we can get <tt>ffmpeg</tt> to cough up the video stream alone, sometimes the simplest approach is to use an additional tool, in this case <a href="http://www.hampa.ch/mpegdemux/"><tt>mpegdemux</tt></a>. It compiled out of the box on my Fedora Linux-based POWER9 Raptor Talos II workstation and generated a file that matches the original <tt>MPEGStill</tt> (and is smaller, too).
</p><div><pre>% mpegdemux -d -s 0xe0 nu.mpg nuu.mpg
% file nuu.mpg
nuu.mpg: MPEG sequence, v1, progressive Y&#39;CbCr 4:2:0 video, CIF PAL, 25 fps
</pre></div>

<p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgVS8Hx0hPyVrWKhFynVy0EDgVytBicM2Imzzg-mfLZioKUQAqeA5tkwwznP3pgsowh6aPFYEt-weCq__LE6PHIMrRa43z9ub-EyTBHHbz-rPoRoNA2jMPOs_ew2GqTOfGw3ZEsx-jrrr2wkiSoyn-ZJlbTIH8wHKA7AmFFnIb_Au-XaLbNLquEBMK3cTo/s1176/edfindstr.png"><img alt="" width="320" data-original-height="918" data-original-width="1176" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgVS8Hx0hPyVrWKhFynVy0EDgVytBicM2Imzzg-mfLZioKUQAqeA5tkwwznP3pgsowh6aPFYEt-weCq__LE6PHIMrRa43z9ub-EyTBHHbz-rPoRoNA2jMPOs_ew2GqTOfGw3ZEsx-jrrr2wkiSoyn-ZJlbTIH8wHKA7AmFFnIb_Au-XaLbNLquEBMK3cTo/s320/edfindstr.png"/></a></p><p>

Finally, we&#39;ll fire up ResEdit in Mini vMac. The strings for the error message are part of the &#34;Finder,&#34; so we&#39;ll edit those. In this case the two message lines are in resource </p><tt>STR##128</tt><p>, strings 11 and 12. More about the other strings later.
</p><p>
When we quit Mini vMac, unmounting the new STB image, we&#39;ll need to recompute the checksum and then re-bless the System Folder. Assuming you haven&#39;t changed the layout of the folders, changing byte 1119 to 16 (<tt>$10</tt>) will fix the latter. Then the tool <a href="https://github.com/classilla/stbtools/blob/main/splicedisk0.pl"><tt>splicedisk0.pl</tt></a> will take the original red ROM dump and the new STB ROM disk image and emit a new 2MB ROM with a corrected checksum ready for use (if you pass <tt>-fix16</tt>, it will also change that byte for you, but it doesn&#39;t do it by default just in case). It will complain if the boot blocks are missing or if the System Folder isn&#39;t blessed. Assuming it&#39;s happy, burn the new ROM image it generates and fire up the &#39;Box.

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjrEBu8gbp_OeKLNDMyiBBPTmAmxxWDGOIVPQgLP6ijkxexiaKeD0c5tN2D2P1TDs27QXnw1qA6SpGpaqiQZiq9gcHgt8S1A-PCMSe9c4F6IlAqmnXZbPdmC8X9Lg6_6jj-QmJF-9wnWicsm5QpPvTbesLSr6Vd5QnJhnLg7MMZ9uT5nGzQbwu-mipyyl0/s1400/vlcsnap-2023-07-13-22h30m00s552.png"><img alt="" width="320" data-original-height="1050" data-original-width="1400" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjrEBu8gbp_OeKLNDMyiBBPTmAmxxWDGOIVPQgLP6ijkxexiaKeD0c5tN2D2P1TDs27QXnw1qA6SpGpaqiQZiq9gcHgt8S1A-PCMSe9c4F6IlAqmnXZbPdmC8X9Lg6_6jj-QmJF-9wnWicsm5QpPvTbesLSr6Vd5QnJhnLg7MMZ9uT5nGzQbwu-mipyyl0/s320/vlcsnap-2023-07-13-22h30m00s552.png"/></a></p><p>

Seems appropriate for <a href="https://en.wikipedia.org/wiki/Captain_Midnight_broadcast_signal_intrusion">hacking a cable network</a> box, don&#39;t you think? Showtime/Movie Channel, beware!
</p><p>
The abbreviated &#34;Finder&#34; is the piece doing all the magic here. If you simply replace it with the regular Finder or even a teensy tiny Finder substitute like <a href="http://www.pianofab.com/otherp.html">FaberFinder</a>, the yellow LED never appears, meaning to understand what&#39;s going on we&#39;ll need to figure out what it&#39;s up to.
</p><p>
Unlike the standard Finder, STB Finder is just a regular application (with type and creator codes <tt>APPL</tt> and <tt>fHfM</tt>). You can even run it from the extracted disk image, whereupon it turns the screen pink, hides the menu bar and pointer, and just sits there until you quit with Command-Q while it presumably waits for the non-existent power button to be pressed. The timeout error message never appears, even if you&#39;re Captain Midnight.
</p><p>
There are, of course, a few interesting resources in it. It was left checked out of Projector and ResEdit warns you about this; the <tt>ckid</tt> resource has the same project and author, and says it&#39;s &#34;beta 7 - handles more ways an application can hose itself.&#34; (Oh, really?) Accordingly, its (actual) Finder information gives it a version of &#34;<tt>1.0ß7, Copyright © Apple Computer, Inc. 1995</tt>&#34;.

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjWtFnwsdGGH_31bLwnKkH4rVTlkxC_lX39TMrrbw8MWvq1Bn1-wKKIZJX8nQG7NMwgUXQw83svL5K7ZXTMVHH55IBgYxZPP4WGCpY3XV-R5pIMCqzR-TuEAZTUwAxPYe8cNjToeh7KTFgtKpzhBJoXUGPMkB1uFT4VKOoNV5YnrY1P1aWdi8nm7y3hr4g/s1176/findermen.png"><img alt="" width="320" data-original-height="918" data-original-width="1176" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjWtFnwsdGGH_31bLwnKkH4rVTlkxC_lX39TMrrbw8MWvq1Bn1-wKKIZJX8nQG7NMwgUXQw83svL5K7ZXTMVHH55IBgYxZPP4WGCpY3XV-R5pIMCqzR-TuEAZTUwAxPYe8cNjToeh7KTFgtKpzhBJoXUGPMkB1uFT4VKOoNV5YnrY1P1aWdi8nm7y3hr4g/s320/findermen.png"/></a></p><p>

There is an actual menu bar resource for this application, though it&#39;s never used, showing the STB Finder&#39;s internal name as </p><tt>FredTVApp</tt><p>. If it has any special response to Command-O, however, it isn&#39;t evidenced by pressing the combination on an attached keyboard (only Command-Q), and there is no corresponding resource for an &#34;about&#34; dialogue box.
</p><p>
Let&#39;s turn to the disassembler and go through the <tt>CODE</tt> resources now. Only <tt>CODE#1</tt> has actual program data. In these and all succeeding extracts, recall that A7 is the 68000 stack pointer, A6 is the frame pointer and A5 is the app-system globals boundary pointer. <a href="https://github.com/fuzziqersoftware/resource_dasm">The <tt>resource_dasm</tt> disassembler</a> we&#39;re using here displays the destination argument first and we will use that convention for new code for consistency. I have fixed up offsets since it got a little confused by the resource layout.
</p><p>
Although there is a fair amount of preamble, here is the <tt>main</tt> function, which I have pre-annotated. Our ability to understand the code is greatly enhanced by the presence of in-line symbols.
</p><div><pre>; main 
; start up GUI 
00000548  4E56 0000                link       A6, 0
0000054C  2F03                     move.l     -[A7], D3
0000054E  7600                     moveq.l    D3, 0x00
00000550  7600                     moveq.l    D3, 0x00
00000552  A063                     syscall    MaxApplZone
; Initialize
; set up event handlers            
; InitGraf, etc.                   
00000554  4EB9 0000 07DE           jsr        [0x000007DE]
0000055A  A852                     syscall    HideCursor
; HideMenuBar
0000055C  4EB9 0000 125E           jsr        [0x0000125E]
; HideIt (nuke menu bar selector)  
00000562  4EB9 0000 12B2           jsr        [0x000012B2]
; DrawMPEGStill
00000568  4EB9 0000 15EE           jsr        [0x000015EE]
; EventLoop
0000056E  4EB9 0000 0588           jsr        [0x00000588]
; Cleanup (doesn&#39;t do anything)
00000574  4EB9 0000 096A           jsr        [0x0000096A]
0000057A  261F                     move.l     D3, [A7]+
0000057C  4E5E                     unlink     A6
0000057E  4E75                     rts
00000580  846D 6169 6E00 0000      dc.b       &#34;main&#34;
</pre></div>
<p>
The long and short of it is this was written in a high-level language (most likely C), and the operating system, font and painting operations are regular Macintosh Toolbox A-line traps which the disassembler has kindly filled in for us. That means everything, including the &#34;desktop,&#34; draws to the same screen and uses the same calls as any other System 7-compatible application. This phase of the application works on regular System 7 (more about this later on), so we can test our work in Mini vMac instead of burning flash write cycles.
</p><p>
Moving or substantially altering this code in ResEdit has side effects, usually explosive ones. Very carefully and not without a lot of trial-and-error, the first cut was to turn the <tt>HideCursor</tt> syscall into a <tt>nop $4e71</tt>, then neuter <tt>HideMenuBar</tt> and <tt>HideIt</tt> (since other things call them) by setting their first instructions to <tt>rts $4e75</tt>.
</p><p>
Next, we need to redraw the menu after the MPEG still is painted but we can&#39;t move the <tt>jsr DrawMPEGStill</tt> up without causing a crash (try it yourself), so we&#39;ll insert the <tt>DrawMenuBar $a937</tt> trap into <tt>EventLoop</tt> by obliterating the seemingly superfluous <tt>clr.w</tt> at the beginning (there weren&#39;t any spare bytes after the paint in <tt>DrawMPEGStill</tt>). Here&#39;s the rest of the event loop.
</p><div><pre>; EventLoop
00000588  4E56 FFEE                link       A6, -0x0012
0000058C  426E FFEE                clr.w      [A6 - 0x12]  &lt;&lt;&lt; MARKED FOR DEATH
00000590  6020                     bra        +0x22 /* 000005B2 */
label00000592:                     
; spin event loop
00000592  554F                     subq.w     A7, 2 
00000594  3F3C FFFF                move.w     -[A7], 0xFFFF
00000598  486E FFF0                pea.l      [A6 - 0x10]
0000059C  4878 001E                push.l     0x1E
000005A0  42A7                     clr.l      -[A7]
000005A2  A860                     syscall    WaitNextEvent
000005A4  101F                     move.b     D0, [A7]+
000005A6  486E FFF0                pea.l      [A6 - 0x10]
; call event handler
000005AA  4EB9 0000 05C8           jsr        [0x000005C8]
000005B0  584F                     addq.w     A7, 4
label000005B2:
; wait for global to turn zero: if so, terminate
; this is set by the Quit menu item
000005B2  4A2D FF44                tst.b      [A5 - 0xBC]
000005B6  66DA                     bne        -0x24 /* 00000592 */
000005B8  4E5E                     unlink     A6
000005BA  4E75                     rts
000005BC  8945 7665 6E74 4C6F 6... dc.b       &#34;EventLoop&#34;
</pre></div>
<p>
In Mini vMac we now have what appears to be a normal, if not particularly useful, application (and no more pink screen), with a regular pointer and menu bar. On the AITB, we get a regular pointer, a black screen, and no menu bar. Eventually the failure text comes up and we crash. But we have a mouse pointer now, so that&#39;s a start.
</p><p>
Incidentally, what displays the text is another routine called <tt>DrawMessageText</tt>, which takes two string pointers and displays them centered in Helvetica in those fixed locations. This is called by multiple routines, but if you check back in that <tt>STR#</tt> resource, most of the strings it&#39;s called to draw are blank and only the error messages are populated. This is good evidence that the red ROM we have was very late in development and possibly saw production use.
</p><p>
It appears that the &#34;pink screen&#34; — a simple solid window, really — is how the hardware decides where to draw the MPEG frame, essentially a Margot Robbie chroma key. For the second cut, we&#39;ll put back that <tt>clr.w</tt> in case it was salient, restore <tt>HideMenuBar</tt> to spew forth the Pepto-Bismol, and put the <tt>DrawMenuBar</tt> trap into <tt>HideIt</tt> (but elide the rest of it as before). That way the menu bar will draw on top of the pink window and should not be obliterated by it. Test run in Mini vMac:
</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhm336-6lDeTovXTcY7ywiPC5-X1W9hk6EN1Vs6O-ZgN7p3vygZFmD1WzZEWlqXxajicX1vGYQSJ2VfxJNHIzTY_MXn1WKKQL_s5fznxEJXAy3OSu8zFG3zbKvMouuAaGNc8VfyGidrJGu7-3FIOQKrp9dZaPDb0sQ-QU7exb710eGgXYMpMLWBnuakBrA/s1176/hifredtv.png"><img alt="" width="320" data-original-height="918" data-original-width="1176" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhm336-6lDeTovXTcY7ywiPC5-X1W9hk6EN1Vs6O-ZgN7p3vygZFmD1WzZEWlqXxajicX1vGYQSJ2VfxJNHIzTY_MXn1WKKQL_s5fznxEJXAy3OSu8zFG3zbKvMouuAaGNc8VfyGidrJGu7-3FIOQKrp9dZaPDb0sQ-QU7exb710eGgXYMpMLWBnuakBrA/s320/hifredtv.png"/></a></p>
<p>
Those changes bring back the pink screen but keep the menu bar and pointer. Selecting the About option just makes it beep at us, by the way. Still, it&#39;s likely that this part is only the state of the machine <em>before</em> the power button is pressed, and we want to get the screen on (and not time out and crash), so we need to keep going through the disassembly.
</p><p>
It would seem logical to assume that since everything so far has been Toolbox-based, the signal that the power button was pressed is probably also a regular Toolbox Event. Attaching an ADB keyboard to the STB3 and pressing the Power key doesn&#39;t do anything, so we go back to the code. The event handler called by the event loop has typical handlers for mouse down, key down, update and activate events, as well as the &#34;high level&#34; event handler for Apple events, but also a mysterious handler for an application-specific <tt>app3Evt</tt> (event type 14).
</p><div><pre>label000006BE: ; app3Evt           
000006BE  4A2D FC76                tst.b      [A5 - 0x38A]
000006C2  6632                     bne        +0x34 /* 000006F6 */
000006C4  0CAA 0000 0115 0002      cmpi.l     [A2 + 0x2], 0x115
000006CC  6628                     bne        +0x2A /* 000006F6 */
000006CE  1B7C 0001 FC76           move.b     [A5 - 0x38A], 0x1
000006D4  2B6A 0006 FC6E           move.l     [A5 - 0x392], [A2 + 0x6]
000006DA  594F                     subq.w     A7, 4
000006DC  2F2D FD34                move.l     -[A7], [A5 - 0x2CC]
000006E0  4267                     clr.w      -[A7]
000006E2  2F3C 0002 001E           move.l     -[A7], 0x2001E
000006E8  7000                     moveq.l    D0, 0x00
000006EA  A82A                     syscall    ComponentDispatch
000006EC  201F                     move.l     D0, [A7]+
; StartTheBootProtocol             
000006EE  4EB9 0000 0A02           jsr        [0x00000A02]
000006F4  6050                     bra        +0x52 /* 00000746 */
label000006F6: 
000006F6  0C2D 0001 FC76           cmpi.b     [A5 - 0x38A], 0x1
000006FC  661E                     bne        +0x20 /* 0000071C */
000006FE  0CAA 0000 0115 0002      cmpi.l     [A2 + 0x2], 0x115
00000706  6614                     bne        +0x16 /* 0000071C */
00000708  701E                     moveq.l    D0, 0x1E
0000070A  D0AD FC6E                add.l      D0, [A5 - 0x392]
0000070E  B0AA 0006                cmp.l      D0, [A2 + 0x6]
00000712  6408                     bcc        +0xA /* 0000071C */
00000714  3F3C 0002                move.w     -[A7], 0x2
00000718  A895                     syscall    ShutDown
0000071A  602A                     bra        +0x2C /* 00000746 */
</pre></div>
<p>
Much of the special hardware control is done through the poorly documented <tt>ComponentDispatch</tt> trap, officially part of the Component Manager (makes sense as QuickTime was its major utilizer and this machine is basically a QuickTime box). Best guess is that it uses the &#34;<tt>STB3 Component</tt>&#34; at resource <tt>thng#48803</tt>, though being related to power-on it could also be the &#34;<tt>I2C Component</tt>&#34; (<tt>thng#48798</tt>). Here, it checks a global variable (i.e., via A5) and a code word, and if that variable is zero but the code word is <tt>0x115</tt>, it calls an internal component (to turn on the screen?) and then calls <tt>StartTheBootProtocol</tt> (which, completely unexpectedly, starts the remote boot sequence). But if the global variable is one with that same code word, it triggers the <tt>ShutDown</tt> trap (which forcibly reboots the AITB). All this sounds like what you&#39;d get if the power button were pressed.
</p><p>
The timeout is in <tt>DoIdle</tt>, which is called within <tt>StartTheBootProtocol</tt>. We&#39;ll shortcircuit that.
</p><div><pre>; SendPowerUpMessage               
00000A3E  4EB9 0000 0BE8           jsr        [0x00000BE8]
00000A44  3600                     move.w     D3, D0
; SendBootMessage
00000A46  4EB9 0000 0C54           jsr        [0x00000C54]
00000A4C  3600                     move.w     D3, D0
; get current count
00000A4E  A975                     syscall    TickCount
00000A50  201F                     move.l     D0, [A7]+
00000A52  0680 0000 0708           addi.l     D0, 0x708
00000A58  2B40 FD04                move.l     [A5 - 0x2FC], D0
00000A5C  5C4F                     addq.w     A7, 6
00000A5E  6004                     bra        +0x6 /* 00000A64 */
label00000A60:
; call DoIdle if A5 - 0x300 is null - see flag notes elsewhere
00000A60  4EBA FF1A                jsr        [PC - 0xE6 /* 0000097C */]
label00000A64:
00000A64  4A2D FD00                tst.b      [A5 - 0x300]
00000A68  67F6                     beq        -0x8 /* 00000A60 */  &lt;&lt;&lt; MARKED FOR DEATH
00000A6A  594F                     subq.w     A7, 4
00000A6C  2F2D FD38                move.l     -[A7], [A5 - 0x2C8]
00000A70  2F3C 0000 0703           move.l     -[A7], 0x703
00000A76  7000                     moveq.l    D0, 0x00
00000A78  A82A                     syscall    ComponentDispatch
00000A7A  201F                     move.l     D0, [A7]+
00000A7C  3600                     move.w     D3, D0
00000A7E  3003                     move.w     D0, D3
00000A80  261F                     move.l     D3, [A7]+
00000A82  4E5E                     unlink     A6
00000A84  4E75                     rts
00000A86  9453 7461 7274 5468 6... dc.b       &#34;StartTheBootProtocol&#34;
</pre></div>
<p>
If we make that <tt>beq</tt> at <tt>$a68</tt> a <tt>nop</tt>, then as it won&#39;t ever branch to the exit point in <tt>DoIdle</tt>, the function will always exit back to the event loop and thus we&#39;ll <em>stay</em> in the event loop forever without timing out. Sounds like it should work!

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjNl5MqR2rYXUZRQTLz4E32Xc8qEz4rLc72AUKbsR3EsW0f1tgdjYXvJ3O0eYAcVwIDFBYovJN-R9zkKPhHf2_QMPaEpb7e3K_jlWeiElsyMaWYI92o6ARVInIjxKfrlJpTdCUxjeZ9gAmiVnPoEE_SNggIP_m4qWuF2duPjhUDJxdQOAPoSyMPFMvyDZ8/s1400/vlcsnap-2023-07-15-19h10m16s019.png"><img alt="" width="320" data-original-height="1050" data-original-width="1400" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjNl5MqR2rYXUZRQTLz4E32Xc8qEz4rLc72AUKbsR3EsW0f1tgdjYXvJ3O0eYAcVwIDFBYovJN-R9zkKPhHf2_QMPaEpb7e3K_jlWeiElsyMaWYI92o6ARVInIjxKfrlJpTdCUxjeZ9gAmiVnPoEE_SNggIP_m4qWuF2duPjhUDJxdQOAPoSyMPFMvyDZ8/s320/vlcsnap-2023-07-15-19h10m16s019.png"/></a></p><p>

And, well, it sort of worked. We have a mouse pointer and we have a &#34;desktop.&#34; In fact, our call to draw the menu bar has clearly caused something different, as you can now see the typical rounded Mac screen borders which weren&#39;t present before. (Notice the gutters: this is from the era of CRT displays, so the displayed desktop is within the safe zone.) The mouse pointer even moves with the mouse, and we don&#39;t crash or time out! But we have no menu bar despite explicitly asking to draw it and we patched out the only other function that would disable it, so what gives?
</p><p>
Unfortunately I&#39;m not sure what&#39;s going on here, exactly. The ROM System file lacks <tt>MDEF</tt> and <tt>MBDF</tt> resources for defining the menu bar and menus, but these resources are present elsewhere in the ROM and don&#39;t seem unusually short or weird compared to regular System 7.1. I also couldn&#39;t find anywhere obvious that the <tt>DrawMenuBar</tt> trap was patched into a no-op.
</p><p>
On the other hand, our event handler code is still active: if we press Command-Q, the device restarts as usual. If we patch the code that receives a menu click to make Command-O (menu item 1) the same as Command-Q (menu item 2, i.e., change the instruction to branch to the same spot), then Command-O will also quit and restart the STB. That means that even though we can&#39;t see our menu options, we can still activate them. Since there&#39;s code in the STB Finder to handle the Apple menu, why don&#39;t we make Command-O open something else for us?
</p><p>
To the STB disk image I added the 7.1 Chooser and associated components — since eventually we&#39;ll need to mount something over LocalTalk — and a copy of the tiny Finder substitute <a href="http://www.pianofab.com/otherp.html">FaberFinder</a> in the Apple Menu Items folder. We&#39;ll pare down their resources later. FaberFinder would be item 4 in this case (&#34;About FredTVApp,&#34; then a separator, then the Chooser, then FaberFinder). This is the relevant code in the menu handler.
</p><div><pre>00000780  0C43 0001                cmpi.w     D3, 0x1
00000784  6608                     bne        +0xA /* 0000078E */
; beep if the first item (About FredTVApp) is selected
00000786  3F3C 0001                move.w     -[A7], 0x1
0000078A  A9C8                     syscall    SysBeep
; and exit
0000078C  6034                     bra        +0x36 /* 000007C2 */
label0000078E: 
; else handle the rest of the apple menu      
0000078E  594F                     subq.w     A7, 4
00000790  3F3C 0080                move.w     -[A7], 0x80
00000794  A949                     syscall    GetMenuHandle
00000796  205F                     movea.l    A0, [A7]+
00000798  2F08                     move.l     -[A7], A0
0000079A  3F03                     move.w     -[A7], D3
0000079C  486E FF00                pea.l      [A6 - 0x100]
000007A0  A946                     syscall    GetMenuItemText/GetItem
000007A2  554F                     subq.w     A7, 2
000007A4  486E FF00                pea.l      [A6 - 0x100]
000007A8  A9B6                     syscall    OpenDeskAcc
000007AA  301F                     move.w     D0, [A7]+
000007AC  3600                     move.w     D3, D0
000007AE  6012                     bra        +0x14 /* 000007C2 */
label000007B0:
; File menu
000007B0  3003                     move.w     D0, D3
000007B2  48C0                     ext.l      D0
; Open (does nothing)
; item 1
000007B4  5380                     subq.l     D0, 1
000007B6  670A                     beq        +0xC /* 000007C2 */
; Quit (this sets the global quit flag)
; item 2
000007B8  5380                     subq.l     D0, 1
000007BA  6702                     beq        +0x4 /* 000007BE */
</pre></div>
<p>
Since the About item can&#39;t be opened on the STB right now anyway, we&#39;re going to turn the <tt>move.w -[A7],0x01:SysBeep</tt> into a <tt>bra +0x3c</tt>, opcode <tt>$603a</tt>, so that it still works. That frees up six bytes. We&#39;ll make the last two into a <tt>moveq.l D3,#4</tt> opcode <tt>$7604</tt> and fall through into the routine immediately afterwards that opens a desk accessory, then change the branch for the Open item to hit that <tt>moveq</tt>. It should then make Command-O open the fourth item on the menu.
</p><p>
We can test this in Mini vMac, and it worked (it opened the second item of the Apple menu after the separator, which happens to be the AppleCD Player). I loaded it onto the AITB and it did nothing — it didn&#39;t crash, but it didn&#39;t do anything either. In case it would only work with a real desk accessory (the Chooser is), even though <tt>OpenDeskAcc</tt> in System 7 shouldn&#39;t care, I changed it to 3. That worked fine on Mini vMac too, and still not on the AITB. Again, it&#39;s not clear if this trap was disabled or altered, or if those apps just plain can&#39;t run in this limited environment. More thoughts on that in a little bit.
</p><p>
Do even dialogue boxes work? There are some <tt>ALRT</tt> and <tt>DITL</tt> resources in the red ROM, but instead we&#39;ll create a simple dialogue box within the STB Finder and have our Command-O hook display that box. Since the Command-O hook already branches to it, we&#39;ll just overwrite the desk accessory code above with this hand-assembled snippet and pad it out with <tt>nop</tt>s.
</p><div><pre>     clr.w -[a7]       ; 4267       ; outparam
     move.w -[a7],#128 ; 3f3c 0080  ; alert 128
     clr.l -[a7]       ; 42a7       ; no filterproc
     Alert             ; a985
     addq.l a7,#2      ; 548f       ; pop outparam
</pre></div>

<p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEheTP23jqXTY71hRON91qq_RRLJjqOwNpiFbSjTaqml7oUqC9Ol2vOpq6QPd7FmSrAgQ9dR1LPhVh_vKECXdulAtYSTSRlZQxc0bgVKcUOk1LRqJKgmZS5mGoL8LaaOFDStwc29RRaiHSHOgUfxlrdi25QXKBrM4Yt0KCeV3rp6ptzlwfM8tr1KFAPHRIE/s1400/vlcsnap-2023-07-16-21h16m28s860.png"><img alt="" width="320" data-original-height="1050" data-original-width="1400" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEheTP23jqXTY71hRON91qq_RRLJjqOwNpiFbSjTaqml7oUqC9Ol2vOpq6QPd7FmSrAgQ9dR1LPhVh_vKECXdulAtYSTSRlZQxc0bgVKcUOk1LRqJKgmZS5mGoL8LaaOFDStwc29RRaiHSHOgUfxlrdi25QXKBrM4Yt0KCeV3rp6ptzlwfM8tr1KFAPHRIE/s320/vlcsnap-2023-07-16-21h16m28s860.png"/></a></p>

<p><a href="https://en.wikipedia.org/wiki/Max_Headroom_signal_hijacking">Catch the wave</a>! The OK button responds correctly to RETURN and to the mouse. The background doesn&#39;t repaint, but that&#39;s solvable (because it&#39;s no longer pink, the MPEG still is no longer painted there). Plus, it makes a beep through the stereo outputs, presumably with that ROM </p><tt>snd #1</tt><p> resource, so sound more or less works fine. Between QuickDraw, audio and some basic support for dialogue boxes at least you could do some sort of basic app with that. It seems the most likely logical resolution for the screen is 640x400, based on experimentation with the dialogue box position.
</p><p>
Still, the Promised Land is to create an AITB ROM that can run arbitrary programs it can download to memory, and the STB ROM disk must clearly do this, or it would never have worked otherwise. To discuss how it worked, it&#39;s important to remember that T1/E1 is intrinsically a serial connection: for example, <a href="http://alok.github.io/2022/05/so-long-home-t1-line-hello-hacking-t1.html">my old residential T1 line</a> was basically a hardwired PPP link over HDSL, and even T1-based frame relay was still just serial data with T-carrier framing. As such, the STB ROM treats the T1 connection like a serial port and executes reads and writes on it directly. AppleTalk is not involved.
</p><p>
Based on the symbols and the call chain by manually walking through the disassembly, the end state is for the local client to receive a complete HFS disk image from the remote server. As part of <tt>Initialize</tt> in <tt>main</tt>, the transmit side is setup by <tt>ITVInitWriteChannel</tt> (note the use of another acronym, ITV, which may have been in use earlier), which calls <tt>SerialOpenDrivers</tt> and <tt>SerialInitialize</tt> to handshake with the headend using <tt>SerialHandshake</tt>. When the power-on event is received, the call to <tt>StartTheBootProtocol</tt> in the event handler calls <tt>SendPowerUpMessage</tt> and <tt>SendBootMessage</tt>, which send messages through <tt>ITVWriteBytes</tt> to <tt>SerialWriteBytes</tt>. All messages to and from the cable headend are checksummed ultimately by the routine at <tt>mzbBPCalcChecksum</tt>, called by <tt>VerifyChecksum</tt> and <tt>WriteChecksum</tt>.
</p><p>
After sending the initial startup messages, <tt>StartTheBootProtocol</tt> falls into a loop repeatedly calling <tt>DoIdle</tt>, which will maintain a progress bar based on the current tick and call <tt>BackChannelDataHandler</tt> if data is available to read into the buffer. (<tt>StartTheBootProtocol</tt> is what we said didn&#39;t seem to call <tt>WaitNextEvent</tt> very much, because it turns out it doesn&#39;t.) This handler will send an abort to the headend and reset the boot state if there is a transmission failure, as will any routine where the checksum is wrong.
</p><p>
<tt>SendPowerUpMessage</tt> sets the first state, to wait for a &#34;size&#34; packet from the headend. Once <tt>BackChannelDataHandler</tt> assembles a complete packet, this first one goes to <tt>SizeMessageHandler</tt>; it allocates the requested memory space for the incoming disk image (or aborts) and calls <tt>SendReadyMessage</tt> which sets the next state, to start receiving data packets. These are routed to <tt>DataMessageHandler</tt> which stores the packet and calls <tt>SendAckMessage</tt>, keeping the progress bar updated. Any timeout will also abort the boot process.
</p><p>
<tt>SendAckMessage</tt> will keep the state pointing to <tt>DataMessageHandler</tt> as packets arrive until the last one, when it will call <tt>GotFinalDataMessage</tt>. <tt>GotFinalDataMessage</tt> sets a global flag to inhibit further calls to <tt>DoIdle</tt> and calls <tt>CreateDiskFromImage</tt> to mount the downloaded disk image, which in turn calls <tt>LaunchSystemUpdate</tt> to run a system update (if there is one) and finally <tt>LaunchStartupApp</tt> to run the main program. No code signature is obviously involved, meaning it will run anything it gets from the remote server assuming the checksums are all valid. The filenames it looks for appear to come from the <tt>DATA#0</tt> resource of the STB Finder, which is copied into memory early during its initialization:
</p><div><pre>00000000  00 00 00 c7 ff ff ff 44  81 01 00 20 f3 83 b9 4d  |.......D... ...M|
00000010  e5 49 1b 20 6b 44 95 eb  00 88 01 04 01 f5 0e 2e  |.I. kD..........|
00000020  53 54 42 44 69 73 6b 44  72 69 76 65 72 43 95 0c  |STBDiskDriverC..|
00000030  53 79 73 74 65 6d 55 70  64 61 74 65 0a 53 74 61  |SystemUpdate.Sta|
00000040  72 74 75 70 41 20 70 99  0a 53 74 61 72 74 75 70  |rtupA p..Startup|
00000050  44 6f 63 6f 73 3d 4d 61  63 53 54 42 3a 72 76 3d  |Docos=MacSTB:rv=|
00000060  31 2e 20 30 88 3a 63 70  3d 36 38 30 34 30 48 8e  |1. 0.:cp=68040H.|
00000070  0e 2e 53 54 42 44 69 73  6b 44 72 69 76 65 72 43  |..STBDiskDriverC|
00000080  87 09 4d 50 45 47 53 74  69 20 6c a3 09 2e 54 53  |..MPEGSti l...TS|
00000090  44 72 69 76 65 72 00 04  2e 41 49 6e 05 2e 41 4f  |Driver...AIn..AO|
000000a0  75 74 00 04 2e 42 49 6e  05 2e 42 4f 75 74 00 01  |ut...BIn..BOut..|
000000b0  00 00 00 00 28 00 00 00  00 28 00 00 00 00 00 00  |....(....(......|
000000c0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 67 40  |..............g@|
000000d0  6e 83 8a 42 30 84 83 83  83 83 9b 40 6b d6 bc 88  |n..B0......@k...|
000000e0  40 46 d7 40 c2 f0 f0 b0  90 8e a6 40 44 85 83 8e  |@F.@.......@D...|
000000f0  8e 95 92 83 84 40 57 85  a8 bc f8 b3 8c b4 8b 9f  |.....@W.........|
00000100  b2 9e ec 99 ec 97 ec b4  98 86 8b a1 a6 85 89 a0  |................|
00000110  e6 af e0 9b 88 a0 b6 ab  aa 8b 99 90 a1 42 13 7f  |.............B..|
00000120  a4 40 48 a0 95 f4 94 bc  94 88 89 40 ad d5 bb fa  |.@H........@....|
00000130  db fa 40 b4 84 40 b2 40  81 f5 b7 f5 9b f8 95 b4  |..@..@.@........|
00000140  bc f0 f0 f1 00 00 00 00                           |........|
</pre></div>
<p>
I&#39;m not sure where those spurious spaces came from, but it appears to run <tt>SystemUpdate</tt>, if it exists, then launches one of two files, which appear to be either <tt>StartupApp</tt> or <tt>StartupDoc</tt> (again, based on what&#39;s present). The same driver <tt>.STBDiskDriver</tt> that handles accessing the ROM disk likely handles the RAM disk, which is very economical. Also note that the strings in this resource indicate the unit identifies itself as a <tt>MacSTB 1.0</tt> with a 68040, which seems to be sent by the initial message routines, and the presence of the string for <tt>MPEGStill</tt>, which is what <tt>DrawMPEGStill</tt> opens and references.
</p><p>
If you label all the <tt>STR#</tt> strings in the STB Finder with numbers, you should be able to observe the boot stages as most of them call <tt>DrawMessageText</tt>, just with empty strings. I reverted our changes to the STB Finder and just made the resource change so we&#39;d have a &#34;clean&#34; show. Here&#39;s the beginning:

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj-fetpyr7KH0FqMT3KdYJZUMZN3KNUlCnvLpZFspSvbXZfZ_NCjrGzIxtV-eijDeMulOl2NQb0UbuUVTCDACUzlrVsfF8mrWE3cv196lE6bLQR1JpQ4qcQ960Rm5I8HKI4lyisDkBAea7UTy0i5XRa7pNiFf7iHV8H8N3scvsh802igte8bQY24U7lZTs/s1400/vlcsnap-2023-07-20-08h20m23s738.png"><img alt="" width="320" data-original-height="1050" data-original-width="1400" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEj-fetpyr7KH0FqMT3KdYJZUMZN3KNUlCnvLpZFspSvbXZfZ_NCjrGzIxtV-eijDeMulOl2NQb0UbuUVTCDACUzlrVsfF8mrWE3cv196lE6bLQR1JpQ4qcQ960Rm5I8HKI4lyisDkBAea7UTy0i5XRa7pNiFf7iHV8H8N3scvsh802igte8bQY24U7lZTs/s320/vlcsnap-2023-07-20-08h20m23s738.png"/></a></p><p>

And the end:

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg36gSq5Ic8BHyBsx0UTnaIOEy74u5KMwlv-XJNb6_1MsJ6bMcByY_r2CaUCzzaGZWOOWjKX1wlTVkxEpvujeHtS-IcgR4NAiYOre5bjcbK5qcUqYYRGRl1PReM3pc0WZ9Jzz6L4xWYsejUjLNwjGKqKKzUARA5ngcZCex0sA7Dsq8ZJYVTR2TtcBEAhV4/s1400/vlcsnap-2023-07-20-08h20m54s145.png"><img alt="" width="320" data-original-height="1050" data-original-width="1400" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg36gSq5Ic8BHyBsx0UTnaIOEy74u5KMwlv-XJNb6_1MsJ6bMcByY_r2CaUCzzaGZWOOWjKX1wlTVkxEpvujeHtS-IcgR4NAiYOre5bjcbK5qcUqYYRGRl1PReM3pc0WZ9Jzz6L4xWYsejUjLNwjGKqKKzUARA5ngcZCex0sA7Dsq8ZJYVTR2TtcBEAhV4/s320/vlcsnap-2023-07-20-08h20m54s145.png"/></a></p><p>

We never get past the beginning, of course, so we only see the Alpha and the failed Omega.
</p><p>
The actual section of code that triggers execution of the downloaded apps, <tt>DoALaunch</tt>, uses the Toolbox <tt>Launch</tt> trap at <tt>$a9f2</tt>. Notably it generates a MultiFinder extended launch param block but uses an unusual fixed set of launch flags (see <a href="https://preterhuman.net/macstuff/techpubs/mac/Toolbox/Toolbox-39.html">the <tt>SIZE</tt> resource</a>) set to <tt>$4800</tt>, which designate an application that understands suspend and resume but is not MultiFinder-aware. As such it could not run arbitrary classic Mac applications even if the rest of the operating system features were present; it can only run ones coded to work with this limited environment, even though such applications should also work on vanilla System 7 modulo any specialized calls to the AITB hardware drivers. It might be possible to generate an application that could boot something else in the way that things like the Booter application start NetBSD/mac68k, but it&#39;s not clear if this could actually boot another version of Mac OS entirely, at least not without including a lot of extra resources that would ordinarily be present in a typical Toolbox ROM.
</p><p>
And that&#39;s why we have such an odd hybrid STB Finder where most of its GUI code does nothing on the real hardware. My best guess is that the development systems booted a modified full System 7.1 rather than the bowdlerized mini-System in the red ROM, including all the <tt>thng</tt>s and other necessary STB-specific components (such as the driver for the video card I don&#39;t have). It is not obvious that the red ROM is capable of booting any operating system other than itself, which explains why most of the few AITBs in collector hands have green Quadra 605 ROMs: the Q605 ROM has a normal Toolbox and will boot a System Folder from a SCSI volume, or at least others other than mine will, and is compatible enough with the AITB to at least drive the on-board NCR SCSI controller until it can load the other <tt>INIT</tt>s for the unique hardware (the red ROM already has this support). Such a setup would be perfectly cromulent for a developer machine and the surviving units probably mostly came from those settings. That said, whatever the circulating <tt>stbextensions</tt> folder does, it doesn&#39;t seem to be enough to enable the other AITB hardware components — though it may simply be incomplete or the bootable OS had other changes.
</p><p>
Either way, given the STB Finder is &#34;just&#34; a regular application, you can run it and the applications it triggers from a regular System 7 installation once you&#39;ve got the OS booted on an AITB, but now having done so you can test all the other AITB-specific pieces. If you try to run the STB Finder on a regular Mac and forge that event code to force a power-on event, you&#39;ll crash, shut down or do nothing because the other needed system components (and hardware) are missing. The system update functionality is particularly interesting, though as there are no known surviving examples of any of the downloaded applications we don&#39;t know exactly what they did or how. It can&#39;t be excluded that the system update would have actually reflashed the onboard ROM through an unknown mechanism, but there&#39;s no obvious facility on the logic board to do so, and over the unit&#39;s short lifetime no system update may ever have been deployed.
</p><p>
Let&#39;s tie it all together and make a Hello World ROM that you could potentially use as a jumping off point for your other applications. I&#39;m not making this red ROM dump available publicly to avoid the litigious wrath of the Cupertino mothership, but if you have or get a red ROM dump, you can try it. Set up Mini vMac running at least System 7.1 (I use it in Macintosh II mode with System 7.5.5), and, of course, get a flash ROM SIMM and programmer. You&#39;ll need ResEdit as well. Note these steps should work with SheepShaver or Basilisk II as well, but those emulators may destroy the STB image&#39;s bootblocks and you&#39;d have to restore them afterwards.
</p><p>
Extract the <tt>disk#0</tt> resource from the ROM using <a href="https://github.com/classilla/stbtools/blob/main/resscan.pl">our resource walker</a> (something like <tt>perl resscan.pl RED.rom disk 0</tt> will create a <tt>disk-0.dump</tt> file). Name it something like <tt>stb.img</tt>. Start Mini vMac with both your System 7 boot drive and the STB image on the command line so that they are mounted simultaneously (don&#39;t worry, the emulator won&#39;t try to boot from the STB image if it&#39;s listed second).
</p><p>
Back up the Finder from the STB image and then drag it to ResEdit, which will say it was checked out read-only; you can ignore this. Remove the single <tt>ckid</tt> resource if it annoys you. Optionally, in <tt>STR#</tt> 128 change strings three and four to your desired startup message if you like, and create a new <tt>MPEGStill</tt> file using <tt>ffmpeg</tt> and <tt>mpegdemux</tt> and ensure its type and creator are <tt>MPEG</tt> and <tt>mMPG</tt>.
</p><p>
For the actual &#34;proof of hack&#34; dialogue box, add the <tt>DITL</tt> and <tt>ALRT</tt> resources for your alert dialogue box to the STB Finder; the code below assumes the <tt>ALRT</tt> resource is numbered 128. Open the STB Finder&#39;s <tt>CODE</tt> resource 1 and in the hex editor make the following changes:
</p><ul>
<li>Remove the Toolbox call to <tt>HideCursor</tt> at offset <tt>$055a</tt> by changing the opcode to <tt>$4e71</tt>.
</li><li>Add a new handler for our alert routine at offset <tt>$0786</tt> by changing the three opcodes at that location to <tt>$4eba $1810 $4e71</tt>.
</li><li>Change the branch at <tt>$07b6</tt> to point to the new subroutine call by making it <tt>$67ce</tt>.
</li><li>Disable the timeout by changing the opcode at offset <tt>$0a68</tt> to <tt>$4e71</tt>.
</li><li>Neuter the call to <tt>HideIt</tt> at offset <tt>$12b6</tt> by changing the three opcodes starting at that location to <tt>$a937 $4e5e $4e75</tt>.
</li></ul><p>
Finally, add these opcodes to the end, starting at </p><tt>$1f98</tt><p> (the offset after the end of the resource).
</p><div><pre>1f98: 4e56 0000 4267 3f3c
1fa0: 0081 42a7 a985 548f
1fa8: 4e5e 4e75
</pre></div>
<p>
Close and save the modified Finder on the STB disk image and shut down Mini vMac. If you changed the folder structure of the ROM, you will need to manually rebless the System Folder with a hex editor and then merge the STB image back into the ROM with <a href="https://github.com/classilla/stbtools/blob/main/splicedisk0.pl">the splicer</a> (something like <tt>perl splicedisk0.pl RED.rom stb.img NEWRED.rom</tt>). If you didn&#39;t change the folder structure, then pass the <tt>-fix16</tt> argument and the splicer will bless the System Folder for you.
</p><p>
Burn the new ROM to your flash ROM SIMM, install it into the AITB, connect an ADB keyboard and mouse, and turn on the AITB&#39;s rear power switch. When the LED in the front turns yellow, press the power button. Press Command-O after startup to open the dialogue box.

</p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjb1x_b5kOs_9Z1hDFbdl43qlI3w50INn95aLea276FZi8dh6xgbDhpPMFKK62mHodqugHNN6ZsmRyzX5y1z0PZ-e_9BhBQw8R1gFQcONYaCnlFuh-5Q1RYFqpZBX-YjLFBTohdksV4JpVQBXWTyk6u8__udH-0NIE7RG8orVxk1cfpNuHUx7Iub1SX-Rs/s1400/vlcsnap-2023-07-20-11h09m55s803.png"><img alt="" width="320" data-original-height="1050" data-original-width="1400" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjb1x_b5kOs_9Z1hDFbdl43qlI3w50INn95aLea276FZi8dh6xgbDhpPMFKK62mHodqugHNN6ZsmRyzX5y1z0PZ-e_9BhBQw8R1gFQcONYaCnlFuh-5Q1RYFqpZBX-YjLFBTohdksV4JpVQBXWTyk6u8__udH-0NIE7RG8orVxk1cfpNuHUx7Iub1SX-Rs/s320/vlcsnap-2023-07-20-11h09m55s803.png"/></a></p><p><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjQq1IF5V5-ZrfyVypPOlwo597-SVULu2aeIo4uoqLK04w-FiJae6j9fnSTC2AXoOZ0flzqurg9C18dBFwIlqrjxKZ--wSu8M-UbKJVkNgcMCXSiNkb2dHRg2efiovV4qk4obSJb_wfdPuo4HnbhcDsCvR1AV82XGw2rFWJ3R8hjL90tgPweTbzRv-d9vM/s1400/vlcsnap-2023-07-20-11h10m13s135.png"><img alt="" width="320" data-original-height="1050" data-original-width="1400" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjQq1IF5V5-ZrfyVypPOlwo597-SVULu2aeIo4uoqLK04w-FiJae6j9fnSTC2AXoOZ0flzqurg9C18dBFwIlqrjxKZ--wSu8M-UbKJVkNgcMCXSiNkb2dHRg2efiovV4qk4obSJb_wfdPuo4HnbhcDsCvR1AV82XGw2rFWJ3R8hjL90tgPweTbzRv-d9vM/s320/vlcsnap-2023-07-20-11h10m13s135.png"/></a></p><p>

The AITB is now your own. Things to do: figure out how to branch to separate code immediately after power-on in the </p><tt>app3Evt</tt><p> handler at </p><tt>$06be</tt><p> (so far I get nothing but crashes trying to muck around there), figure out how the CD-ROM support works with the red ROM, and figure out a means to transfer an application disk image into memory with the real serial port (the AITB can use a serial printer, so there is at least some support for driving the Zilog SCC). And things <em>I</em> need to do: figure out what fuse I opened, or something, to make my own AITB not boot from SCSI. But now this exceptionally rare Apple machine should be much less of a mystery to you.
</p><p>
I would love to hear from you if you were involved in this machine&#39;s development (or can even just identify who was in our STB Bunch composite). If you&#39;d prefer not to post a public comment, you can E-mail me at ckaiser at floodgap dawt com.
</p><p>
The code we put together to help walk and modify the red ROM dump <a href="https://github.com/classilla/stbtools">is available on Github</a>.
</p>
</div></div>
  </body>
</html>
