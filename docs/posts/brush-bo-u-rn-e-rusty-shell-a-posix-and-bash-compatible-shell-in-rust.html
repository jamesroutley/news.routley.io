<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/reubeno/brush">Original</a>
    <h1>Brush (Bo(u)rn(e) RUsty SHell) a POSIX and Bash-Compatible Shell in Rust</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a href="https://crates.io/crates/brush-shell" rel="nofollow"><img src="https://camo.githubusercontent.com/0ca51096e82f1ec4d8b9ac01efdc8c0c0dab0ccd9ec029f870868748888ec86e/68747470733a2f2f696d672e736869656c64732e696f2f6372617465732f762f62727573682d7368656c6c3f7374796c653d666c61742d737175617265" alt="Published version" data-canonical-src="https://img.shields.io/crates/v/brush-shell?style=flat-square"/></a>
<a href="https://crates.io/crates/brush-shell" rel="nofollow"><img src="https://camo.githubusercontent.com/e18581221afe9d784f523662085d74d41b9735b8d6715ef137a5802123191ea9/68747470733a2f2f696d672e736869656c64732e696f2f6372617465732f642f62727573682d7368656c6c3f7374796c653d666c61742d737175617265" alt="Download count" data-canonical-src="https://img.shields.io/crates/d/brush-shell?style=flat-square"/></a>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/e5d8479ce59960d9ad796320a99f7b181a60acbdcdcd5c7e787d61b358b4d0fb/68747470733a2f2f696d672e736869656c64732e696f2f6372617465732f6d7372762f62727573682d7368656c6c"><img src="https://camo.githubusercontent.com/e5d8479ce59960d9ad796320a99f7b181a60acbdcdcd5c7e787d61b358b4d0fb/68747470733a2f2f696d672e736869656c64732e696f2f6372617465732f6d7372762f62727573682d7368656c6c" alt="MSRV" data-canonical-src="https://img.shields.io/crates/msrv/brush-shell"/></a>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/dbfe9cebb8b7aad11ae48b4159fb16d69543b9d1cfef075f167b0aa86e348672/68747470733a2f2f746f6b65692e72732f62312f6769746875622f72657562656e6f2f62727573683f63617465676f72793d636f6465"><img src="https://camo.githubusercontent.com/dbfe9cebb8b7aad11ae48b4159fb16d69543b9d1cfef075f167b0aa86e348672/68747470733a2f2f746f6b65692e72732f62312f6769746875622f72657562656e6f2f62727573683f63617465676f72793d636f6465" alt="Lines of code badge" data-canonical-src="https://tokei.rs/b1/github/reubeno/brush?category=code"/></a>
<a href="https://github.com/reubeno/brush/blob/main/LICENSE"><img src="https://camo.githubusercontent.com/cd0bfc1f47fd7a02efde25ce2186a8fdf66484289931c5528cc3f728cd6006be/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d4d49542d626c75653f7374796c653d666c61742d737175617265" alt="License" data-canonical-src="https://img.shields.io/badge/license-MIT-blue?style=flat-square"/></a>
<a href="https://github.com/reubeno/brush/actions/workflows/ci.yaml"><img src="https://github.com/reubeno/brush/actions/workflows/ci.yaml/badge.svg" alt="CI workflow badge"/></a></p>
<p dir="auto"><a href="https://repology.org/project/brush/versions" rel="nofollow"><img src="https://camo.githubusercontent.com/a627b53119ffc2ac8e3473da3ed96fed96d3e8a01df9d6adc1a5d1788790547d/68747470733a2f2f7265706f6c6f67792e6f72672f62616467652f766572746963616c2d616c6c7265706f732f62727573682e737667" alt="Packaging status" data-canonical-src="https://repology.org/badge/vertical-allrepos/brush.svg"/></a></p>

<p dir="auto"><code>brush</code> (<strong>B</strong>o(u)rn(e) <strong>RU</strong>sty <strong>SH</strong>ell) is a <a href="https://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html" rel="nofollow">POSIX-</a> and <a href="https://www.gnu.org/software/bash/" rel="nofollow">bash-</a>compatible shell,
implemented in Rust. It&#39;s built and tested on Linux and macOS, with experimental support on Windows. (Its Linux build is fully supported running on Windows via WSL.)</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://private-user-images.githubusercontent.com/10508433/404689022-0e64d1b9-7e4e-43be-8593-6c1b9607ac52.gif?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NDY2Mjc4NzMsIm5iZiI6MTc0NjYyNzU3MywicGF0aCI6Ii8xMDUwODQzMy80MDQ2ODkwMjItMGU2NGQxYjktN2U0ZS00M2JlLTg1OTMtNmMxYjk2MDdhYzUyLmdpZj9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTA1MDclMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwNTA3VDE0MTkzM1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTBhY2RhNjE4ZGFhM2JjNzViMTllY2NlNWE2NzVlYThhYWZiOTY0NzVlZjIwYjRlNTA5NTljOWRmZTk2YzBlMjEmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.i5uC7BViYbSMXOpLKyoczC6psz8A1qnD94Gv9ysYLk0"><img src="https://private-user-images.githubusercontent.com/10508433/404689022-0e64d1b9-7e4e-43be-8593-6c1b9607ac52.gif?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3NDY2Mjc4NzMsIm5iZiI6MTc0NjYyNzU3MywicGF0aCI6Ii8xMDUwODQzMy80MDQ2ODkwMjItMGU2NGQxYjktN2U0ZS00M2JlLTg1OTMtNmMxYjk2MDdhYzUyLmdpZj9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTA1MDclMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwNTA3VDE0MTkzM1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTBhY2RhNjE4ZGFhM2JjNzViMTllY2NlNWE2NzVlYThhYWZiOTY0NzVlZjIwYjRlNTA5NTljOWRmZTk2YzBlMjEmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.i5uC7BViYbSMXOpLKyoczC6psz8A1qnD94Gv9ysYLk0" alt="screenshot" data-animated-image=""/></a></p>
<p dir="auto"><code>brush</code> is functional for interactive use as a daily driver! It can execute most <code>sh</code> and <code>bash</code> scripts we&#39;ve
encountered. Known limitations are tracked with filed issues. Out of an abundance of caution,
we wouldn&#39;t recommend using it yet in <em>production</em> scenarios in case it doesn&#39;t behave identically
to your existing stable shell. (If you do find any behavioral differences, though, please report them with an
issue!)</p>
<p dir="auto">Contributions and feedback of all kinds are welcome! For more guidance, please consult our
<a href="https://github.com/reubeno/brush/blob/main/CONTRIBUTING.md">contribution guidelines</a>. For more technical details, please consult the
<a href="https://github.com/reubeno/brush/blob/main/docs/README.md">documentation</a> in this repo.</p>
<p dir="auto">This project was originally borne out of curiosity and a desire to learn. We&#39;re doing our best to keep that
attitude :).</p>

<p dir="auto">Available for use and distribution under the <a href="https://github.com/reubeno/brush/blob/main/LICENSE">MIT license</a>.</p>

<p dir="auto">We don&#39;t publish binary releases of <code>brush</code>, but if you have a working <code>rust</code> toolchain installed you can simply run:</p>
<div dir="auto" data-snippet-clipboard-copy-content="cargo install --locked brush-shell"><pre>cargo install --locked brush-shell</pre></div>
<p dir="auto">This will install the most recently released version of <code>brush</code> from <code>crates.io</code>. Alternatively, for the latest and
greatest bits, you can clone this repo and execute <code>cargo run</code>.</p>
<p dir="auto">If you don&#39;t have <code>rust</code> installed, we recommend installing it via <a href="https://rustup.rs/" rel="nofollow"><code>rustup</code></a>.</p>
<p dir="auto">(If you <em>are</em> interested in having a binary release, then please let us know in the &#39;Discussions&#39; area of this
project or by filing a feature request in &#39;Issues&#39;.)</p>
<p dir="auto">If you are a Nix user, you can also use the registered version.</p>
<div dir="auto" data-snippet-clipboard-copy-content="nix run &#39;github:NixOS/nixpkgs/nixpkgs-unstable#brush&#39; -- --version"><pre>nix run <span><span>&#39;</span>github:NixOS/nixpkgs/nixpkgs-unstable#brush<span>&#39;</span></span> -- --version</pre></div>
<p dir="auto">Arch Linux users can install <code>brush</code> <a href="https://aur.archlinux.org/packages/brush" rel="nofollow">from the AUR</a> with their <a href="https://wiki.archlinux.org/title/AUR_helpers" rel="nofollow">AUR helper</a> of choice, e.g.</p>

<p dir="auto">When you run <code>brush</code>, it should look exactly as <code>bash</code> would on your system since it processes <code>.bashrc</code> and
other usual configuration. If you&#39;d like to customize the look of <code>brush</code> to distinguish it from the other shells
installed on your system, then you can also author a <code>~/.brushrc</code> file.</p>

<p dir="auto">There are some known gaps in compatibility. Most notably:</p>
<ul dir="auto">
<li>
<p dir="auto"><strong>Some <code>set</code> and <code>shopt</code> options.</strong>
The <code>set</code> builtin is implemented, as is <code>set -x</code> and many frequently used <code>set</code>/<code>shopt</code> options, but a number aren&#39;t fully implemented. For example, <code>set -e</code> will execute but its semantics aren&#39;t applied across execution.</p>
</li>
<li>
<p dir="auto"><strong>Anything tagged with a <code>TODO</code> comment or where <code>error::unimp()</code> is used to return a &#34;not implemented&#34; error</strong>.
These aren&#39;t all tracked with GitHub issues right now, but there&#39;s a number of these scattered throughout the code base. Some are indicative of missing functionality that may be straightforward to implement; others may be more complicated.</p>
</li>
</ul>
<p dir="auto">If you feel so inclined, we&#39;d love contributions toward any of the above, with broadening test coverage, deeper compatibility evaluation, or really any other opportunities you can find to help us make this project better.</p>

<p dir="auto">This project is primarily tested by comparing its behavior with other existing shells, leveraging the latter as test oracles. The integration tests implemented in this repo include <a href="https://github.com/reubeno/brush/blob/main/brush-shell/tests/cases">550+ test cases</a> run on both this shell and an oracle, comparing standard output and exit codes.</p>
<p dir="auto">For more details, please consult the <a href="https://github.com/reubeno/brush/blob/main/docs/reference/integration-testing.md">reference documentation on integration testing</a>.</p>

<p dir="auto">There&#39;s a long list of OSS crates whose shoulders this project rests on. Notably, the following crates are directly relied on for major portions of shell functionality:</p>
<ul dir="auto">
<li><a href="https://github.com/nushell/reedline"><code>reedline</code></a> - for readline-like input and interactive usage</li>
<li><a href="https://github.com/clap-rs/clap"><code>clap</code></a> - command-line parsing, used both by the top-level brush CLI as well as built-in commands</li>
<li><a href="https://github.com/fancy-regex/fancy-regex"><code>fancy-regex</code></a> - relied on for everything regex</li>
<li><a href="https://github.com/tokio-rs/tokio"><code>tokio</code></a> - async, well, everything</li>
<li><a href="https://github.com/nix-rust/nix"><code>nix</code> rust crate</a> - higher-level APIs for Unix/POSIX system APIs</li>
</ul>
<p dir="auto">For testing, performance benchmarking, and other important engineering support, we use and love:</p>
<ul dir="auto">
<li><a href="https://github.com/tikv/pprof-rs"><code>pprof-rs</code></a> - for sampling-based CPU profiling</li>
<li><a href="https://github.com/bheisler/criterion.rs"><code>criterion.rs</code></a> - for statistics-based benchmarking</li>
<li><a href="https://github.com/scop/bash-completion"><code>bash-completion</code></a> - for its completion test suite and general completion support!</li>
</ul>
<div dir="auto"><h2 tabindex="-1" dir="auto">Links: other shell implementations</h2><a id="user-content-links-other-shell-implementations" aria-label="Permalink: Links: other shell implementations" href="#links-other-shell-implementations"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">There are a number of other POSIX-ish shells implemented in a non-C/C++ implementation language. Some inspirational examples include:</p>
<ul dir="auto">
<li><a href="https://www.nushell.sh/" rel="nofollow"><code>nushell</code></a> - modern Rust-implemented shell (which also provides the <code>reedline</code> crate we use!)</li>
<li><a href="https://github.com/shellgei/rusty_bash"><code>rusty_bash</code></a></li>
<li><a href="https://github.com/mvdan/sh"><code>mvdan/sh</code></a></li>
</ul>
<p dir="auto">We&#39;re sure there are plenty more; we&#39;re happy to include links to them as well.</p>
</article></div></div>
  </body>
</html>
