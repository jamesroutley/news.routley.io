<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/spyder-ide/spyder-docs/pull/332">Original</a>
    <h1>The shortest pull request ever</h1>
    
    <div id="readability-page-1" class="page"><div>
        <div>
  
  <task-lists disabled="" sortable="">
    <div>
      <p dir="auto">This is literally the smallest PR I&#39;ve ever done.</p>
<p dir="auto">It removes a zero width no-break space.</p>
<p dir="auto">But this char was breaking the inline literal next to it, see in <a href="https://docs.spyder-ide.org/current/videos/working-with-spyder.html#dropdown-1" rel="nofollow">this page</a>, the <code>``is_dark_font_color``</code> should have been interpreted by Sphinx and rendered in red:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/239510/194156834-06a80fee-0ec8-4c84-9963-158500d29a58.png"><img src="https://user-images.githubusercontent.com/239510/194156834-06a80fee-0ec8-4c84-9963-158500d29a58.png" alt="Capture d’écran du 2022-10-05 22-27-06"/></a></p>
<p dir="auto">The removed character is obviously <strong>not</strong> rendered in github &#34;files changed&#34; interface. Not in <code>git diff</code>, and <code>git show --color-words</code> either. Not in your editor, and not in your terminal, ... The character is a space. And a space with no width!!!</p>
<p dir="auto">If you really want to see it, a <code>git show | cat -A</code> can be helpfull, you&#39;ll see something like:</p>
<div dir="auto" data-snippet-clipboard-copy-content="-in the ``mainwindow.py`` file we import the M-oM-;M-?``is_dark_font_color``
+in the ``mainwindow.py`` file we import the ``is_dark_font_color``"><pre><span><span>-</span>in the ``mainwindow.py`` file we import the M-oM-;M-?``is_dark_font_color``</span>
<span><span>+</span>in the ``mainwindow.py`` file we import the ``is_dark_font_color``</span></pre></div>
<p dir="auto">But the paragraph is <strong>way</strong> longer than that so it&#39;s a bit hard to spot.</p>
<p dir="auto">For the curious the <code>M-...</code> notation denotes bytes in the range <code>[128;255]</code>. The 32 first of this range are then treated as if they were in the range <code>[0; 32]</code> and displayed using the <code>^</code> notation, so <code>\x80</code> is <code>M-^@</code>, and the other ones are just substracted by 128, so <code>\xa0</code> is <code>M- </code> (yes a space).</p>
<p dir="auto">So <code>M-o</code> is <code>\x6f + 128</code> (<code>\x6f</code> is the value for <code>o</code> in the ASCII table) = <code>\xef</code>. <code>M-;</code> is <code>\xbb</code> and <code>M-?</code> is <code>\xbf</code>. Gives us the sequence <code>\xef\xbb\xbf</code>.</p>
<p dir="auto">Still curious? The file is encoded using UTF-8, so to decode this UTF-8 sequence we need to extract relevant bits from it. In binary it looks like:</p>
<div data-snippet-clipboard-copy-content="11101111 10111011 10111111"><pre><code>11101111 10111011 10111111
</code></pre></div>
<p dir="auto">The leading <code>1110</code> means &#34;There&#39;s 3 bytes for this char&#34; (Count the ones, three ones → three bytes. The zero is just a delimiter). The trailing two bytes starts with &#34;10&#34; meaning &#34;we&#39;re trailing bytes&#34;.</p>
<p dir="auto">If we drop those markers (<code>1110</code> and <code>10</code> in front of bytes) and keep the remaining bits we&#39;re left with <code>1111111011111111</code>, which evaluates to 65279, which is in hexadecimal<code>0xfeff</code>. Yes, you recognize it, it&#39;s a <a href="https://en.wikipedia.org/wiki/Byte_order_mark" rel="nofollow">BOM</a>. Because yes a BOM is just a <code>ZERO WIDTH NO-BREAK SPACE</code>, isn&#39;t it beautiful?</p>
<p dir="auto">Do we really have to do the bit manipulation to discover what this character was? Obviously not, just use emacs&#39; <code>M-x describe char</code> on it:</p>
<div data-snippet-clipboard-copy-content="             position: 4646 of 14699 (32%), column: 380
            character: ﻿ (displayed as ﻿) (codepoint 65279, #o177377, #xfeff)
              charset: unicode (Unicode (ISO10646))
code point in charset: 0xFEFF
               script: arabic
               syntax: w 	which means: word
             to input: type &#34;C-x 8 RET feff&#34; or &#34;C-x 8 RET ZERO WIDTH NO-BREAK SPACE&#34;
          buffer code: #xEF #xBB #xBF
            file code: #xEF #xBB #xBF (encoded by coding system utf-8-unix)
              display: by this font (glyph code):
    ftcrhb:-GOOG-Noto Naskh Arabic UI-normal-normal-normal-*-18-*-*-*-*-0-iso10646-1 (#x5D5)

Character code properties: customize what to show
  name: ZERO WIDTH NO-BREAK SPACE
  old-name: BYTE ORDER MARK
  general-category: Cf (Other, Format)
  decomposition: (65279) (&#39;﻿&#39;)"><pre lang="text"><code>             position: 4646 of 14699 (32%), column: 380
            character: ﻿ (displayed as ﻿) (codepoint 65279, #o177377, #xfeff)
              charset: unicode (Unicode (ISO10646))
code point in charset: 0xFEFF
               script: arabic
               syntax: w 	which means: word
             to input: type &#34;C-x 8 RET feff&#34; or &#34;C-x 8 RET ZERO WIDTH NO-BREAK SPACE&#34;
          buffer code: #xEF #xBB #xBF
            file code: #xEF #xBB #xBF (encoded by coding system utf-8-unix)
              display: by this font (glyph code):
    ftcrhb:-GOOG-Noto Naskh Arabic UI-normal-normal-normal-*-18-*-*-*-*-0-iso10646-1 (#x5D5)

Character code properties: customize what to show
  name: ZERO WIDTH NO-BREAK SPACE
  old-name: BYTE ORDER MARK
  general-category: Cf (Other, Format)
  decomposition: (65279) (&#39;﻿&#39;)
</code></pre></div>
<p dir="auto">And this is literally the longest PR description I&#39;ve written.</p>
    </div>
  </task-lists>
  
</div>

      </div></div>
  </body>
</html>
