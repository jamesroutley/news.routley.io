<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/tpope/timl">Original</a>
    <h1>TimL: Clojure-like Lisp dialect that runs on and compiles down to Vimscript</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto">TimL is a Lisp dialect implemented in and compiling down to VimL, the
scripting language provided by the Vim text editor.  Think Clojure meets VimL.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-is-this-a-joke" aria-hidden="true" href="#is-this-a-joke"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Is this a joke?</h2>
<p dir="auto">If you mean the 6,000 lines of working code, then no, I poured hundreds upon
hundreds of very serious hours into that.  But if you&#39;re referring to the fact
it&#39;s woefully underdocumented, adds considerable overhead to an already slow
host platform, and ultimately unlikely to gain any traction, then yeah,
probably.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-language-features" aria-hidden="true" href="#language-features"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Language features</h2>
<ul dir="auto">
<li>Clojure like syntax and API, including everything from rich syntax literals
to destructuring.</li>
<li>Namespaces, including <code>refer</code> and <code>alias</code>.</li>
<li><code>timl.core</code>, a tiny but growing API resembling <code>clojure.core</code>.</li>
<li>The same persistent collection types and interfaces, including vectors, hash
maps, hash sets, lists, and lazy sequences.</li>
<li>Macros, including syntax quoting and the implicit <code>&amp;form</code> and <code>&amp;env</code>.</li>
<li>Metadata.  (Some collection types don&#39;t support it yet.)</li>
<li>Reference types, including vars, atoms, futures.</li>
<li>Extensible type system, including <code>defmethod</code> for duck typing.  (This is the
most significant departure from Clojure.)</li>
<li>Caching compiler generates real VimL.</li>
</ul>
<h2 tabindex="-1" dir="auto"><a id="user-content-viml-interop" aria-hidden="true" href="#viml-interop"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>VimL interop</h2>
<ul dir="auto">
<li>TimL functions are actually VimL dictionaries (objects) containing a
dictionary function (method) and a reference to the enclosing scope.</li>
<li>Defining a symbol <code>baz</code> in namespace <code>foo.bar</code> actually defines
<code>g:foo#bar.baz</code>.  If that symbol refers to something callable (like a
function), calling <code>foo#bar#baz()</code> on the VimL side will invoke it.</li>
<li>Arbitrary Vim variables and options can be referred to using VimL notation:
<code>b:did_ftplugin</code>, <code>v:version</code>, <code>&amp;expandtab</code>. You can also change them with
<code>set!</code>: <code>(set! &amp;filetype &#34;timl&#34;)</code>.</li>
<li><code>#*function</code> returns a reference to a built-in or user defined function.
You can call it like any other function: <code>(#*toupper &#34;TimL is pretty neat&#34;)</code>.</li>
<li>Interact with VimL exceptions with <code>throw</code>/<code>try</code>/<code>catch</code>/<code>finally</code>.</li>
<li>Call a Vim command with <code>execute</code>: <code>(execute &#34;wq&#34;)</code>.</li>
<li>Lisp macros are a wonderful way to encapsulate and hide a lot of the pain
points of VimL.  The current standard library barely scratches the surface
here.</li>
</ul>
<h2 tabindex="-1" dir="auto"><a id="user-content-getting-started" aria-hidden="true" href="#getting-started"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Getting started</h2>
<p dir="auto">If you don&#39;t have a preferred installation method, I recommend
installing <a href="https://github.com/tpope/vim-pathogen">pathogen.vim</a>, and
then simply copy and paste:</p>
<div data-snippet-clipboard-copy-content="cd ~/.vim/bundle
git clone git://github.com/tpope/timl.git"><pre><code>cd ~/.vim/bundle
git clone git://github.com/tpope/timl.git
</code></pre></div>
<p dir="auto">Once help tags have been generated, you can view the manual with <code>:help timl</code>.
There&#39;s not a whole lot there, yet.  If you know Clojure, you can probably
guess a bunch of the function names.</p>
<p dir="auto">Start a repl with <code>:TLrepl</code>.  Tab complete is your friend.  The first time may
take several seconds (if your computer is a piece of shit), but compilation is
cached, so subsequent invocations will be super quick, even if Vim is
restarted.</p>
<p dir="auto">The familiar <code>ns</code> macro from Clojure is mostly identical in TimL.
<code>:refer-clojure</code> is now <code>:refer-timl</code>, which is identical to
<code>(refer &#39;timl.core opts)</code>. <code>:use</code> only supports symbol arguments.</p>
<div data-snippet-clipboard-copy-content="(ns my.ns
  (:refer-timl :exclude [+])
  (:use timl.repl)
  (:require [timl.file :as file]
            [timl.test]))"><pre><code>(ns my.ns
  (:refer-timl :exclude [+])
  (:use timl.repl)
  (:require [timl.file :as file]
            [timl.test]))
</code></pre></div>
<p dir="auto">You can use Clojure&#39;s <code>in-ns</code>, <code>require</code>, <code>refer</code>, <code>alias</code>, and <code>use</code>,
however <code>use</code> and <code>require</code> are limited to a single argument.</p>
<div data-snippet-clipboard-copy-content="(in-ns &#39;my.ns)
(use &#39;timl.repl)
(require &#39;timl.file)
(alias &#39;file &#39;timl.file)"><pre><code>(in-ns &#39;my.ns)
(use &#39;timl.repl)
(require &#39;timl.file)
(alias &#39;file &#39;timl.file)
</code></pre></div>
<p dir="auto">Put files in <code>autoload/*.tim</code> in the runtime path and they will be requirable.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-license" aria-hidden="true" href="#license"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>License</h2>
<p dir="auto">Copyright Â© Tim Pope.</p>
<p dir="auto">The use and distribution terms for this software are covered by the <a href="http://opensource.org/licenses/eclipse-1.0.php" rel="nofollow">Eclipse
Public License 1.0</a>, which can
be found in the file epl-v10.html at the root of this distribution.</p>
<p dir="auto">By using this software in any fashion, you are agreeing to be bound by the
terms of this license.  You must not remove this notice, or any other, from
this software.</p>
</article>
          </div></div>
  </body>
</html>
