<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/jstrieb/poker-chipper">Original</a>
    <h1>Show HN: Allocate poker chips optimally with mixed-integer nonlinear programming</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a href="https://jstrieb.github.io/poker-chipper" rel="nofollow">Optimally
select poker chip denominations for cash games using constrained, nonlinear
optimization.</a></p>

<p dir="auto">Imagine hosting a small poker game. You know how many friends will attend, how
many chips you have, and the buy in. How do you pick chip denominations?</p>
<p dir="auto">Without Poker Chipper, picking chip denominations is manual and error-prone.
You first try to pick values that divide each other nicely and are easy to
remember. (Alternatively, struggle to recall the values from the last time you
played.) You next try to find a way to make the chosen values sum to the buy
in. Then, you backtrack whenever there aren&#39;t enough chips for everyone, or
when there are too many chips left over. Finally, you settle for a suboptimal
chip allocation so that you can actually start playing.</p>
<p dir="auto">With Poker Chipper, on the other hand, picking chip denominations is fast and
easy. Input the number of players, buy in, blinds, and number of chips. After
waiting a moment for the mathematically optimal results, you can save them for
next time, or share them with others. If you want to modify the results, adjust
the &#34;advanced options,&#34; and the chip denominations will be recomputed
accordingly.</p>

<p dir="auto">Poker Chipper uses mixed-integer nonlinear programming (MINLP), which is a form
of constrained, nonconvex optimization, to optimally pick poker chip
denominations.</p>
<p dir="auto">Optimization is performed using a &#34;solver&#34; – in this case,
<a href="https://www.scipopt.org/" rel="nofollow">SCIP</a>. Some inputs to Poker Chipper are translated
into solver constraints, which affect what denominations are admissible. Other
inputs influence the solver&#39;s objective function, which affects how candidate
denominations are evaluated, ranked, and chosen. In the user interface, inputs
affecting constraints, and inputs affecting the objective function are
described as influencing the &#34;requirements&#34; and &#34;score,&#34; respectively, of
candidate solutions.</p>
<p dir="auto">Poker Chipper is a fully static web application. In other words, all of the
processing involved in performing optimization occurs client-side – entirely in
the user&#39;s browser. The SCIP solver is designed to run natively, so Poker
Chipper bundles it for the browser by compiling SCIP to WebAssembly (WASM) with
<a href="https://emscripten.org/" rel="nofollow">Emscripten</a>.</p>


<p dir="auto">The links below are listed in the order the code should be read to understand
the application from the highest to lowest level.</p>
<ul dir="auto">
<li><a href="https://github.com/jstrieb/poker-chipper/blob/master/src/App.svelte"><code>src/App.svelte</code></a> – main high-level application</li>
<li><a href="https://github.com/jstrieb/poker-chipper/blob/master/src"><code>src/*.svelte</code></a> – UI components</li>
<li><a href="https://github.com/jstrieb/poker-chipper/blob/master/src/solve.js"><code>src/solve.js</code></a> – convert user inputs to MINLP model and solve
using WASM SCIP</li>
<li><a href="https://github.com/jstrieb/poker-chipper/blob/master/src/solveWorker.js"><code>src/solveWorker.js</code></a> – web worker to run solver in
non-blocking thread</li>
<li><a href="https://github.com/jstrieb/poker-chipper/blob/master/public/serviceWorker.js"><code>public/serviceWorker.js</code></a> – service worker for
caching and offline functionality</li>
<li><a href="https://github.com/jstrieb/poker-chipper/blob/master/public"><code>public/*</code></a> – PWA manifest, global stylesheet, favicons, etc.</li>
<li><a href="https://github.com/jstrieb/poker-chipper/blob/master/experiments"><code>experiments/*</code></a> – exploration of initial concept in Python
(with both Z3, and later, SCIP), and Dockerfile for compiling SCIP with
Emscripten</li>
<li><a href="https://github.com/jstrieb/poker-chipper/blob/master/src/compiled"><code>src/compiled/*</code></a> – SCIP compiled to WASM via Emscripten,
plus associated support files</li>
</ul>

<p dir="auto">In the diagram below, labeled arrows represent asynchronous fetch requests and
message passing.</p>
<section data-identity="9cbda2e5-1521-4775-afe6-9c3f6eab7f75" data-host="https://viewscreen.githubusercontent.com" data-src="https://viewscreen.githubusercontent.com/markdown/mermaid?docs_host=https%3A%2F%2Fdocs.github.com" data-type="mermaid" aria-label="mermaid rendered output container">
  <div data-json="{&#34;data&#34;:&#34;flowchart LR\n    A[Svelte Front End] --&amp;gt;|Solve Requests| B[\&#34;Web Worker\n    (non-blocking thread)\&#34;]\n    B --&amp;gt;|Solutions| A\n    A &amp;lt;--&amp;gt;|Static Assets| C[Service Worker]\n    B &amp;lt;--&amp;gt;|Solver Static Assets| C\n    C --&amp;gt;|Cache| C\n    C &amp;lt;--&amp;gt;|Static Assets| D[Web Server]\n&#34;}" data-plain="flowchart LR
    A[Svelte Front End] --&gt;|Solve Requests| B[&#34;Web Worker
    (non-blocking thread)&#34;]
    B --&gt;|Solutions| A
    A &lt;--&gt;|Static Assets| C[Service Worker]
    B &lt;--&gt;|Solver Static Assets| C
    C --&gt;|Cache| C
    C &lt;--&gt;|Static Assets| D[Web Server]
" dir="auto">
    <div dir="auto">
      <pre lang="mermaid" aria-label="Raw mermaid code">flowchart LR
    A[Svelte Front End] --&gt;|Solve Requests| B[&#34;Web Worker
    (non-blocking thread)&#34;]
    B --&gt;|Solutions| A
    A &lt;--&gt;|Static Assets| C[Service Worker]
    B &lt;--&gt;|Solver Static Assets| C
    C --&gt;|Cache| C
    C &lt;--&gt;|Static Assets| D[Web Server]
</pre>
    </div>
  </div>
  <span role="presentation">
    <svg style="box-sizing: content-box; color: var(--color-icon-primary);" width="16" height="16" viewBox="0 0 16 16" fill="none" data-view-component="true">
  <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-opacity="0.25" stroke-width="2" vector-effect="non-scaling-stroke" fill="none"></circle>
  <path d="M15 8a7.002 7.002 0 00-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" vector-effect="non-scaling-stroke"></path>
</svg>
  </span>
</section>


<p dir="auto">Poker Chipper is actively maintained. If there are no recent commits,
everything is running smoothly! As of the initial release, the code is stable,
and there are no major, outstanding features that remain to be added.</p>
<p dir="auto">Bug reports and feature requests via GitHub Issues are encouraged. Pull
requests with more than 20 lines of code are unlikely to be merged quickly,
unless associated with prior discussion or accompanied by substantial,
explanatory English prose. In other words, pull requests containing code
without context may be merged after much delay, or may not be merged at all.</p>
<p dir="auto">Since Poker Chipper is a fully static web application with no server-side
processing (outside of serving unchanging files), it is extremely scalable, and
has a very low maintenance burden. As such, even if something were to happen to
me, and I could not continue to work on the project, the <a href="https://jstrieb.github.io/poker-chipper/" rel="nofollow">public
version</a> should continue to remain
functional and available online as long as my GitHub account is open and the
<a href="https://jstrieb.github.io" rel="nofollow">jstrieb.github.io</a> domain is active.</p>

<p dir="auto">The best ways to support the project are to:</p>
<ul dir="auto">
<li>Share the project on sites like Twitter, Reddit, and Hacker News</li>
<li>Report any bugs, glitches, errors, or shortcomings that you find</li>
<li>Star the repository and follow me on GitHub</li>
<li>Host a version of the code translated into another language</li>
</ul>
<p dir="auto">If you insist on spending money to show your support, please do so in a way
that is widely beneficial. In particular, donations to the following
organizations help me, in addition to the general, Internet-using public:</p>
<ul dir="auto">
<li><a href="https://supporters.eff.org/donate/" rel="nofollow">Electronic Frontier Foundation</a></li>
<li><a href="https://archive.org/donate/index.php" rel="nofollow">The Internet Archive</a></li>
<li><a href="https://signal.org/donate/" rel="nofollow">Signal Foundation</a></li>
<li><a href="https://donate.mozilla.org/en-US/" rel="nofollow">Mozilla</a></li>
</ul>

<p dir="auto">Poker Chipper would not have been possible without help and feedback from:</p>
<ul dir="auto">
<li><a href="https://github.com/lsnow99">Logan Snow</a></li>
<li><a href="https://www.linkedin.com/in/amyjl" rel="nofollow">Amy Liu</a></li>
<li><a href="https://twitter.com/chrischerian" rel="nofollow">Chris Cherian</a></li>
<li><a href="https://www.linkedin.com/in/ani-chowdhury" rel="nofollow">Ani Chowdhury</a></li>
<li>Will Hooper</li>
</ul>
</article></div></div>
  </body>
</html>
