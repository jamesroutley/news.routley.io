<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://ratsplaydoom.com/">Original</a>
    <h1>Rats Play DOOM</h1>
    
    <div id="readability-page-1" class="page"><div>
        <section id="intro">
            <h2>Intro</h2>
            <p>We built a complete VR setup from scratch to let rats play DOOM. The system includes a motion-tracked treadmill ball, a panoramic headset, an input trigger, and a reward circuit. All hardware and software components are open sourced, including 3D-printable designs, circuit diagrams, firmware, and control software.</p>
            <p>The first version (v1) was built in New York by <a href="#team">Viktor</a>, who trained rats to walk through a corridor in DOOM using a simpler rig. That version was featured on Vice and PC Gamer. After moving back home, the project was paused. Public interest reignited development, leading to v2, a more advanced and modular version built in collaboration with electrical engineer <a href="#team">Sándor Makra</a>. <a href="#team">Akos Blaschek</a> later assisted significantly in documenting the project for open-sourcing, aiming to enable others to replicate and build upon this work. Key metallic components were designed and sourced in collaboration with <a href="https://szurwinkft.hu/" target="_blank" rel="noopener noreferrer">SZURWIN KFT</a>.</p>

            <h3>V1</h3>
            <ul>
                <li>Basic ball setup</li>
                <li>Rats trained to run forward</li>
                <li>Minimal sensors and mechanics</li>
                <li>No panoramic screen</li>
            </ul>
            <figure>
                <a href="https://ratsplaydoom.com/images/v1.jpg" target="_blank" rel="noopener noreferrer"><img src="https://ratsplaydoom.com/images/v1.jpg" alt="Rat VR Setup Version 1"/></a>
                <figcaption>Rat VR Setup Version 1</figcaption>
            </figure>

            <h3>V2</h3>
            <ul>
                <li>New ball driver mechanism for smoother movement</li>
                <li>Foldable AMOLED screen with 180° horizontal and 80° vertical FOV, Full HD resolution</li>
                <li>Upgraded sensors for movement tracking</li>
                <li>Reinforced feeder system with mixing motor</li>
                <li>Modular 3D-printable components</li>
                <li>Improved electronics reliability and safety</li>
            </ul>
            <figure>
                <a href="https://ratsplaydoom.com/images/v2.jpg" target="_blank" rel="noopener noreferrer"><img src="https://ratsplaydoom.com/images/v2.jpg" alt="Rat VR Setup Version 2"/></a>
                <figcaption>Rat VR Setup Version 2</figcaption>
            </figure>

            <figure>
                <a href="https://ratsplaydoom.com/images/rat_vr_setup.png" target="_blank" rel="noopener noreferrer"><img src="https://ratsplaydoom.com/images/rat_vr_setup.png" alt="Full setup from side showing rat on ball, screen around, trigger, and water tube."/></a>
                <figcaption>Full setup from side showing rat on ball, screen around, trigger, and water tube.</figcaption>
            </figure>

            <h3>Limitations</h3>
            <p>We reached the point of rat habituation but didn’t start training. Our rats (Todd, Kojima, Gabe) aged out before full testing. The setup works, but behavioral validation is pending.</p>
        </section>

        <section id="hardware">
            <h2>Hardware</h2>
            <p>The hardware is a comprehensive VR rig designed for rodents. It consists of a motion-tracked sphere that captures the rat&#39;s movements, a custom-built trigger for in-game actions, a curved panoramic screen for visual immersion, and an automated reward system that dispenses sugar water to reinforce behavior. All these components are mounted on a modular aluminum frame, creating a complete, self-contained environment for the rat to interact with the game.</p>
            <p><a href="https://ratsplaydoom.com/hardware-guide.html">View the Hardware Assembly Guide</a></p>

            <article>
                <h3>Visual Interface</h3>
                <p>The headset wraps around the rat’s head with a foldable AMOLED screen. It maximizes immersion without obstructing whisker space. The screen supports Full HD resolution.</p>
                <p>The headset frame also integrates several sensory components: two small air nozzles are positioned near the left and right whiskers, capable of delivering targeted air puffs on command (e.g., signaling wall collisions in-game). The frame provides a secure mounting point for the reward system&#39;s dispenser tube, placing it near the rat&#39;s mouth. Additionally, the design includes placeholders for miniature speakers near each ear, intended for future implementation of stereo audio cues.</p>
                <p>
                    <iframe src="https://www.youtube.com/embed/P9gwOoqymwU?autoplay=1&amp;mute=1&amp;controls=0&amp;loop=1&amp;playlist=P9gwOoqymwU&amp;modestbranding=1" title="YouTube video player - Headset Exploded View" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
                </p>
                <div>
                    <canvas id="headsetCanvas"></canvas>
                    <figure>
                        <a href="https://ratsplaydoom.com/images/headset.jpg" target="_blank" rel="noopener noreferrer"><img src="https://ratsplaydoom.com/images/headset.jpg" alt="Headset close-up from above."/></a>
                        <figcaption>Headset close-up.</figcaption>
                    </figure>
                </div>
                 <p>3D Model: Headset</p>
            </article>

            <article>
                <h3>Locomotion</h3>
                <p>Movement is captured via a free-spinning ball under the rat. Rotary sensors track displacement and convert it into game motion. The ball can also be driven by motors.</p>
                <p>These motors are used during training to roll the ball and simulate movement paths before a reward. This guides the rat on where to go, helping form movement-action associations. Like the trigger, this allows for programmatic training sequences with minimal initial input from the animal.</p>
                <p>
                    <iframe src="https://www.youtube.com/embed/Si52Hq2ywFA?autoplay=1&amp;mute=1&amp;controls=0&amp;loop=1&amp;playlist=Si52Hq2ywFA&amp;modestbranding=1" title="YouTube video player - Locomotion Exploded View" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
                </p>
                <p>
                    <iframe src="https://www.youtube.com/embed/I3_HG0WWtGk?autoplay=1&amp;mute=1&amp;controls=0&amp;loop=1&amp;playlist=I3_HG0WWtGk&amp;modestbranding=1" title="YouTube video player - Ball Sensor Manual Testing" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
                </p>
                 <div>
                    <canvas id="standCanvas"></canvas>
                    <figure>
                        <a href="https://ratsplaydoom.com/images/stand.jpg" target="_blank" rel="noopener noreferrer"><img src="https://ratsplaydoom.com/images/stand.jpg" alt="Ball mount showing driven/undriven modes and sensor placement."/></a>
                        <figcaption>Ball mount showing driven/undriven modes and sensor placement.</figcaption>
                    </figure>
                </div>
                 <p>3D Model: Stand/Ball</p>
            </article>

            <article>
                <h3>Trigger Input</h3>
                <p>The shooting input is a custom-built hand-operated lever. Rats pull it with their paws to fire. The lever is held in place by small springs, encased in a 3D-printed housing. It includes a rotary encoder to detect motion and a stepper motor to actuate it.</p>
                <p>The motor allows programmatic control—pulling the lever to demonstrate shooting. This enables training by pairing visual cues with mechanical motion, reinforcing the association before the rat initiates the action on its own.</p>
                <p>
                    <iframe src="https://www.youtube.com/embed/vIzxP3GrOaw?autoplay=1&amp;mute=1&amp;controls=0&amp;loop=1&amp;playlist=vIzxP3GrOaw&amp;modestbranding=1" title="YouTube video player - Trigger Manual Testing" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
                </p>
                 <div>
                     <canvas id="triggerCanvas"></canvas>
                    <figure>
                        <a href="https://ratsplaydoom.com/images/trigger.jpg" target="_blank" rel="noopener noreferrer"><img src="https://ratsplaydoom.com/images/trigger.jpg" alt="Close-up of trigger lever with encoder and motor."/></a>
                        <figcaption>Close-up of trigger lever with encoder and motor.</figcaption>
                    </figure>
                </div>
                <p>3D Model: Trigger</p>
            </article>

            <article>
                <h3>Reward System</h3>
                <p>Positive in-game actions trigger a liquid reward: sugar water delivered through a precise dispensing mechanism. The system consists of:</p>
                <ul>
                    <li>Mixer: Continuously stirs the sugar solution to maintain even concentration</li>
                    <li>Pump + Pressure Sensor: Keeps the line under constant pressure</li>
                    <li>Solenoid Valve: Magnetic valve that opens to release exact 10 µL doses</li>
                    <li>Dispenser: Positioned near the mouth for easy access</li>
                </ul>
                <p>This setup ensures accurate, repeatable reward delivery with minimal delay. The reward is synchronized with game events to reinforce desired behaviors.</p>
                <figure>
                    <a href="https://ratsplaydoom.com/images/reward_circuit.jpg" target="_blank" rel="noopener noreferrer"><img src="https://ratsplaydoom.com/images/reward_circuit.jpg" alt="Reward circuit with labeled mixer, pump, valve, and dispenser."/></a>
                    <figcaption>The messy but functional reward circuit from behind.</figcaption>
                </figure>
            </article>

            <article>
                <h3>Limitations</h3>
                <p>The current system assumes basic rat mobility and grooming behavior. Fine-tuning might be needed for rats of different sizes or temperaments. Trigger placement and reward tube flow may need calibration per subject.</p>
            </article>
        </section>

        <section id="software">
            <h2>Software</h2>
            <p>The setup is controlled through a modular Python system. The main entry point is <code>arena_scenario.py</code>, which runs the full control loop.</p>
            <p>The system includes:</p>
            <ul>
                <li>Motion capture: Reads movement from optical flow sensors mounted around the treadmill ball.</li>
                <li>Locomotion control: Drives the ball motors to guide the rat during training.</li>
                <li>Trigger input: Reads lever pulls, detects voluntary shooting actions.</li>
                <li>Reward delivery: Dispenses precise 10 μL sugar water rewards via a controlled solenoid valve and maintains constant line pressure.</li>
                <li>DOOM integration: Interfaces with a modified ViZDoom environment for real-time closed-loop behavior.</li>
                <li>Training logic: Enforces demonstrations and delivers rewards based on game state and rat behavior.</li>
            </ul>
            <p><a href="https://github.com/csiki/rat_vr2" target="_blank">View the Project on GitHub</a></p>
            <p>The software runs on a PC and communicates with a Raspberry Pi via TCP sockets. The Pi handles real-time sensor reading, ball actuation, and reward control; the PC processes the sensor data, runs the game, and sends high-level commands to the Pi.</p>
            <p>All major components—movement tracking, ball driving, trigger detection, and reward control—can be operated manually or in closed-loop mode. All control parameters (e.g., motor speeds, reward volumes) are set in Python code.</p>

            <h3>Limitations</h3>
            <p>There’s no in-built calibration suite. Users must validate sensor alignment and reward timing manually. Some microcontroller firmwares might require tuning based on hardware tolerances.</p>
        </section>

        <section id="results">
            <h2>Results</h2>
            <p>The rats successfully learned to navigate the virtual environment and trigger the shooting mechanism. Habituation took approximately two weeks per rat. While advanced training wasn&#39;t completed due to time constraints, initial data showed promising engagement with the system.</p>
            <figure>
                <img src="https://ratsplaydoom.com/images/placeholder_rat_playing.png" alt="Rat engaging with the VR setup during a session."/>
                <figcaption>Rat interacting with the VR setup.</figcaption>
            </figure>
            <h3>Limitations</h3>
            <p>Full behavioral validation requires longer training periods. Cross-subject variability wasn&#39;t extensively studied. The impact of prolonged VR exposure on rat well-being needs further research.</p>
        </section>

        <section id="what-now">
            <h2>What Now?</h2>
            <p>Interested in building your own animal VR setup? Feel free to reach out for guidance. We&#39;re also compiling a comprehensive <a href="https://ratsplaydoom.com/hardware-guide.html">Rat VR Build Guide</a>.</p>
            <p>At <a href="https://yolorun.capital" target="_blank" rel="noopener noreferrer">YoloRun.Capital</a>, we invest in ambitious, boundary-pushing projects like this, even the beautifully impractical ones. Have a wild idea? Let&#39;s talk.</p>
            <figure>
                <img src="https://ratsplaydoom.com/images/christmas_rat_600w.jpg" alt="A rat wearing a tiny Santa hat."/>

            </figure>
        </section>

        <section id="team">
            <h2>Team</h2>
            <div>
                <div>
                    <p><img src="https://ratsplaydoom.com/assets/images/team/viktor.jpg" alt="Viktor Tóth"/></p><h3>Viktor Tóth</h3>
                    <p>Gamer Rat Coach</p>
                    
                </div>
                <div>
                    <p><img src="https://ratsplaydoom.com/assets/images/team/sandor.jpg" alt="Sándor Makra"/></p><h3>Sándor Makra</h3>
                    <p>Electrical Engineer</p>
                     
                </div>
                <div>
                    <p><img src="https://ratsplaydoom.com/assets/images/team/akos.jpg" alt="Ákos Blaschek"/></p><h3>Ákos Blaschek</h3>
                    <p>Documentation Lead</p>
                     
                </div>
            </div>
        </section>

    </div></div>
  </body>
</html>
