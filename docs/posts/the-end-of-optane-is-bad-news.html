<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.theregister.com/2022/08/01/optane_intel_cancellation/">Original</a>
    <h1>The end of Optane is bad news</h1>
    
    <div id="readability-page-1" class="page"><div id="body">
<p><span>Analysis</span> Intel is ending its Optane product line of persistent memory and that is more disastrous for the industry than is visible on the surface.</p>
<p>The influence of ideas from the late 1960s and early 1970s is now so pervasive that almost nobody can imagine anything else, and the best ideas from the following generation are mostly forgotten.</p>
<p>Optane presented a radical, transformative technology but because of this legacy view, this technical debt, few in the industry realized just how radical Optane was. And so it bombed.</p>

    

<p>To get to the heart of this, let&#39;s step back for a long moment and ask, <em>what is the primary function of a computer file?</em></p>

        


        

<p>The first computers didn&#39;t have file systems. The giant machines of the 1940s and 1950s, built from tens of thousands of thermionic valves, only had a few words of memory. At first, programs were entered by physically wiring them into the computer by hand: only the data was in memory. The program ran, and printed out some results.</p>
<p>As capacities grew and we arrived at the <em>von Neumann architecture</em> in which the computer program is stored alongside the data in the same memory. In some early machines, that &#34;memory&#34; was magnetic storage: a spinning <a href="https://www.cs.utah.edu/~elb/folklore/mel.html" rel="nofollow">drum</a>.</p>

        

<p>To get it into the memory, it was read off paper: punch cards, or paper tape. When computer memories got big enough to store several programs at once, operating systems appeared: programs that managed other programs.</p>
<p>Still no file systems, though. There was RAM and there was I/O: printers, terminals, card readers and so on, but all the storage directly accessible to the computer was memory. In the 1960s, <em>memory</em> often meant <a href="https://www.theregister.com/2014/04/07/ibm_s_360_50_anniversary/?page=3">magnetic core storage</a>, which had one great advantage that&#39;s sometimes forgotten now: When you turned the computer off, whatever was in core store stayed there. Turn the computer back on, and its last program was still there.</p>
<p>Around this time, <a href="https://www.theregister.com/2011/09/16/ramac_55_year_anniversary/">the first hard disk drives</a> started to appear: expensive, relatively slow, but huge compared to working memory. The early operating systems were given another job: the problem of managing that vast secondary storage. Indexing its contents, finding those sections that were wanted and loading them into working memory.</p>
<h3>
  <span>Two levels of storage</span>
</h3>
<p>Once operating systems started managing disk drives, a distinction appeared: <em>primary</em> and <em>secondary storage</em>. Both directly accessible to the computer, not loaded and unloaded by a human operator like reels of paper tape or decks of punched cards. Primary storage appears right in the processor&#39;s memory map, and every individual word is directly readable or writable.</p>
<p>Secondary storage is a bigger, much slower, pool that the processor can&#39;t directly see, and can only access by requesting, or sending, whole blocks to another device, a disk controller, which fetches the contents of the specified blocks from a big pool of storage, or places them into that pool.</p>

        

<p>This split continued down into the eight-bit microcomputers of the 1970s and 1980s. The author fondly remembers attaching a <a href="https://www.theregister.com/2013/03/13/feature_the_sinclair_zx_microdrive_story/">ZX Microdrive to his 48K ZX Spectrum</a>. Suddenly, my Spectrum had secondary storage. The Spectrum&#39;s Z80 CPU had a 64kB memory map, of which a quarter was ROM. Each Microdrive cartridge, even though it was just 100kB or so, could store about <em>twice</em> the machine&#39;s entire usable memory. So there had to be a level of indirection: it was impossible to load the whole cartridge&#39;s contents into memory.</p>
<p>It wouldn&#39;t fit. So cartridges had an index, and then named blocks containing BASIC code, or machine code, or screen images, or data files.</p>
<p>Since microcomputers, we still call primary storage &#34;RAM&#34; and we still call secondary storage &#34;disks&#34; or &#34;drives&#34;, even though in many modern end-user computers, it&#39;s all just different types of electronics with no moving parts or separate media.</p>
<p>You start the computer by loading an OS from &#34;disk&#34; into RAM. Then, when you want to use a program, the OS loads <em>it</em> from &#34;disk&#34; into RAM, and then that program probably loads some data from disk into RAM. Even if it&#39;s a Chromebook and it doesn&#39;t have any other local apps, its single app loads data from another computer over the internet, which loads it from disk into RAM and then sends it to the laptop.</p>
<ul>

<li><a href="https://www.theregister.com/2022/07/29/intel_optane_memory_dead/">Why Intel killed its Optane memory business</a></li>

<li><a href="https://www.theregister.com/2022/07/29/intel_q2_earnings/">Intel experiences another kind of meltdown</a></li>

<li><a href="https://www.theregister.com/2022/05/31/samsung_intel_ceo_meeting/">Samsung and Intel bosses discuss silicon cooperation</a></li>

<li><a href="https://www.theregister.com/2022/03/07/intel_agilex_fpga/">Intel targets cryptocurrency mining, networks, and more with Agilex M-Series FPGAs</a></li>
</ul>
<p>Since UNIX was first written in 1969, this has become a mantra: &#34;Everything is a file.&#34; Unix-like OSes use the file system for all kinds of things that aren&#39;t files: access to the machine is governed by metadata on files, I/O devices are accessed as if they were files, you can play sounds by &#34;copying&#34; them to a sound device, and so on. Since UNIX V8 in 1984, there&#39;s even a <em>fake</em> file system, called <code>/proc</code>, that displays information about the memory and processes of the running system by generating <em>pretend files</em> that users and programs can read, and in some cases write.</p>
<p>Files are a powerful metaphor of sorts, which have proved versatile to a degree unimaginable in 1969, when Unix was written on a minicomputer with a maximum of 64k words of memory and no sound, graphics or networking. Files are ubiquitous now.</p>
<p>
  <strong>But files, and file systems, were only a crutch.</strong>
</p>
<p>The concept of the &#34;computer file&#34; was invented because memory was too expensive, too big, and too slow. The only way to attach millions of words of storage to a 1960s mainframe was a disk drive the size of a filing cabinet, and too much storage to fit into the computer&#39;s memory map.</p>
<p>So instead, mainframe companies designed disk controllers, and built a form of database into the OS. Imagine, for instance, a payroll program, maybe only a few thousand words in size, that could handle a file for tens of thousands of employees, by doing it in tiny chunks: read a row from the personnel file, and a row from the salaries file, compute a result, and write a row to the paycheck file, then repeat. The OS checks the indexes and converts this into instructions to the disk controller: &#34;here, fetch block 47 track 52, head 12, sector 34, and block 57 from track 4, head 7, sector 65… now, write 74.32 into this block…&#34;</p>
<p>SSDs appeared in the 1990s, and by the first decade of this century they were getting affordable. SSDs replace magnetic storage with electronic storage, but it&#39;s still secondary storage. SSDs pretend to be disk drives: the computer talks to a disk controller, and sends and receives sectors, and the drive converts them and shuffles around blocks of storage which can only be erased in chunks, typically of a megabytes or more, to emulate hard-disk-style functionality that writes 512-byte sectors.</p>
<p>The trouble is, flash memory has to be accessed this way. It&#39;s too slow to be mapped directly into the computer&#39;s memory, and it&#39;s impossible to rewrite flash byte-by-byte. In order to modify a byte in a block of flash, the rest of contents of that whole block must be copied elsewhere, and then a whole block wiped. This is not how computers&#39; memory controllers work.</p>
<h3>
  <span>The future was here… but it&#39;s gone</span>
</h3>
<p>Optane made it possible to eliminate that. Like core store, it is working memory: <strong>primary</strong> storage. Optane kit is as big and as cheap as disk drives. It shipped in the hundreds of gigabytes size range, the same sort of size of a modest SSD, but it could be fitted directly into a motherboard&#39;s DIMM slots. Every byte appeared right there in the processor&#39;s memory map, and every byte could be rewritten directly. No shuffling around blocks to erase them, like flash. And it supports millions of write cycles, rather than tens of thousands.</p>
<p>Many hundreds of gigs, even terabytes, of dynamic non-volatile storage, thousands of times faster and thousands of times more robust than flash memory. Not secondary storage on the other side of a disk controller, but right there in the memory map.</p>
<p>Not infinitely rewritable, no. So your computer needs some RAM as well, for holding variables and fast-changing data. But instead of &#34;loading&#34; programs from &#34;disk&#34; into &#34;RAM&#34; every time you want to use them, a program loads once, and then it&#39;s there in memory forever, no matter if there&#39;s a power cut, no matter if you turn your computer off for a week&#39;s holiday. Turn it back on, and all your apps are still right there in memory.</p>
<p>No more installing OSes, no more booting up. No more apps. The OS sits in memory all the time, and so do your apps. And if you have a terabyte or two of nonvolatile memory in your computer, what do you need SSDs for? It&#39;s all just memory. One small section is fast and infinitely rewritable, but its contents disappear when the power goes. The other 95 per cent holds its contents forever.</p>
<p>Sure, if the box is a server, you can have some spinning disks so you can manage petabytes of data. Data centers need that, but <em>very</em> few personal computers do.</p>
<p>Linux, of course, supported this. This particular vulture wrote the documentation for how to use it on a prominent enterprise distro. But Linux being Linux, everything must be a file, so it supported it by partitioning it and formatting it with a filesystem. Using primary storage to emulate secondary storage, in software.</p>
<p>No current mainstream OS understands the concept of a computer that <em>only</em> has primary storage, no secondary storage at all, but it&#39;s split between a small volatile section and a large nonvolatile section. It&#39;s hard to even describe it to people familiar with how current computers work. I have <a href="https://archive.fosdem.org/2021/schedule/event/new_type_of_computer/" rel="nofollow">tried</a>.</p>
<p>How do you find a program to run if there are no directories? How do you save stuff, if there&#39;s nowhere to save it <em>to?</em> How do you compile code, when there is no way to <code>#include</code> one file into another because there are no files, and where does the resulting binary go?</p>
<p>There <em>are</em> ideas out there for how to do this. <em>The Reg</em> <a href="https://www.theregister.com/2009/02/03/phantom_russian_os/">wrote about one of them</a> 13 years ago. There is also <a href="https://twizzler.io/" rel="nofollow">Twizzler</a>, a research project investigating how to make it look enough like a Unix system for existing software to use it. When a <a href="https://www.theregister.com/2010/04/08/hp_memristor/">lab boffin at HP invented the memristor</a>, HP <a href="https://www.theregister.com/2014/06/11/hp_memristor_the_machine/">got very excited</a> and <a href="https://www.theregister.com/2016/11/24/hpes_machinations_to_rewrite_server_design_laws/">came up with some big plans</a>… but it takes a long time to bring a new technology to the mass market, and eventually, <a href="https://www.theregister.com/2016/11/29/hp_labs_delivered_machine_proof_of_concept_prototype_but_machine_product_is_no_more/">HP gave up</a>.</p>
<p>But Intel made it work, produced this stuff, put it on the market… and not enough people were interested, and now it is giving up, too.</p>
<p>The future was here, but when viewed through the blurry scratched old lenses of 1960s minicomputer OS design, well – if everything is a file, this Optane was just a sort of really fast disk drive, right?</p>
<p>No, it wasn&#39;t. It was the biggest step forward since the minicomputer. But we blew it.</p>
<p>Goodbye, Optane. We hardly knew you. ®</p>                            

                </div></div>
  </body>
</html>
