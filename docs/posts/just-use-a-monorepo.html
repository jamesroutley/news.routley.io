<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://buttondown.email/blog/just-use-a-monorepo">Original</a>
    <h1>Just use a monorepo</h1>
    
    <div id="readability-page-1" class="page"><div><p><img src="https://buttondown.email/next-assets/img/monorepo.png" alt="A before-and-after of my setup."/></p>
<p>I wrote <a href="https://buttondown.email/blog/on-monorepos">last month</a> about having migrated Buttondown from a number of separate microrepositories to a single monorepo. I&#39;ve since <em>completed</em> the migration, and the slight irritation I felt from having to unwind a bunch of technical choices with deployment + continuous integration has faded.</p>
<p>I am here to tell you: if you are running a software business and you aren&#39;t at, like, Google-tier scale, just throw it all in a monorepo. I am <em>kicking</em> myself for not having done this to begin with.</p>
<p>Here is a list of I think <em>reasonable</em> drawbacks of having a monorepo if you are not a Google-tier company:</p>
<ol>
<li>You cannot apply role-based access controls to certain parts of the repository for security/compliance reasons.</li>
<li>You cannot open-source certain parts of your repository. (This was the biggest sticking point for me for a while — I want, ideally, everything in Buttondown to be open-source except the core plumbing and author-facing application.)</li>
</ol>
<p>Conversely, here are a list of things that became an order of magnitude <em>easier</em> now that my entire codebase is in a single repository:</p>
<ol>
<li>Rolling out API changes concomitantly with downstream changes to the documentation or the OpenAPI spec.</li>
<li>Introducing feature-level changes and the blog post announcing those changes.</li>
<li>Context-switching between different workspaces with subtly different configurations.</li>
</ol>
<p>You may be reading this short essay and thinking: &#34;Yeah, no shit! Of course you do not need a monorepo when you&#39;re talking about, like, 150K lines of code.&#34; Congratulations — you are sensible, and well adjusted, and certainly wiser than I was six months ago.</p>
<p>But I know there&#39;s a few of you out there who are clinging to <em>something</em> — some irrational reason why you have your welterweight project split across four separate repositories.</p>
<p>Maybe it&#39;s some abstract sense of purity; maybe it&#39;s because you didn&#39;t realize most IaaS let you deploy from a subfolder. Whatever the reason is: trust me. Move it into a monorepo. If you do and you end up regretting it, [email me] and I&#39;ll donate to the charity of your choice.</p>
<p>To wrap up, I will deputize two people who are smarter than I am who have <em>also</em> opined on the subject:</p>
<ol>
<li><a href="https://danluu.com/monorepo/">Dan Luu</a></li>
<li><a href="https://gregoryszorc.com/blog/2014/09/09/on-monolithic-repositories/">Gregory Szorc</a></li>
</ol><div><p>Liked this post? Follow Buttondown on</p><!-- --> <p><a href="https://twitter.com/buttondown">Twitter</a>. Or, you know,  <a href="https://weeknotes.buttondown.email">subscribe to the newsletter</a>.</p></div><div><p>Buttondown is the easiest way to start a newsletter. </p></div></div></div>
  </body>
</html>
