<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://antonz.org/fancy-ql/">Original</a>
    <h1>I don&#39;t need your query language</h1>
    
    <div id="readability-page-1" class="page"><div>
<div>
<article>
<div>
<div>
<header>

</header>
<p><em>This post may seem a bit harsh, but I‚Äôm tired of the ‚ÄúSQL shaming‚Äù that has somehow become a thing in the industry. I have a right to disagree, don‚Äôt I?</em></p>
<p>Every year or so, a new general-purpose database engine comes out. And that‚Äôs great! It can bring new valuable approaches, architectures, and tools (plus, building database engines is fun).</p>
<p>Often this new database engine comes with a new query language. And that‚Äôs probably good, too. Or maybe it‚Äôs not.</p>
<h2 id="simple-and-elegant">Simple and elegant</h2>
<figure>
<img src="https://antonz.org/fancy-ql/fancy-1.png" alt="An elegant query language for a more civilized age"/>
<figcaption>Oh, it&#39;s elegant and civilized? Sure, I&#39;ll bite.</figcaption>
</figure>
<p>What puzzles me is that every time the authors claim that having this brand-new query language is somehow a strength. It‚Äôs not. It‚Äôs a weakness. Learning a whole new language just to query your database is a burden. I don‚Äôt want to do that.</p>
<p>We already have a common ground language for general-purpose databases. It‚Äôs called SQL. I‚Äôd rather use it with your database.</p>
<p>üìù <em>I‚Äôm not talking about software that targets a specific narrow domain field. Having a separate domain language for specific use cases makes perfect sense.</em></p>
<p>Sure, your language is elegant. That doesn‚Äôt help me. First, it‚Äôs still easier to write a slightly longer query in SQL than to learn a new query language. Second, your supposedly simple language will become complex anyways ‚Äî as soon as I try to solve real-world tasks with it. So why bother?</p>
<h2 id="better-than-sql">Better than SQL</h2>
<figure>
<img src="https://antonz.org/fancy-ql/fancy-2.png" alt="A comparison that speaks for itself"/>
<figcaption>Just look at that ugly SQL beast.</figcaption>
</figure>
<p>Sometimes the authors of a new query language try to frame SQL as terribly complex. Let‚Äôs take an example from one of these ‚Äúpost-SQL‚Äù databases. A comparison that, according to the authors, speaks for itself.</p>
<p>üìù <em>I‚Äôm using a particular ‚Äúpost-SQL‚Äù database (without naming it) to illustrate my point here, because its landing page is a vivid example of ‚ÄúSQL shaming‚Äù. This is not a criticism of the database or its authors. I‚Äôm sure it‚Äôs a great product.</em></p>
<p>FancyQL:</p>
<pre tabindex="0"><code>select Movie {
  title,
  actors: {
   name
  },
};
</code></pre><p>SQL (as the authors of FancyQL see it):</p>
<div><pre tabindex="0"><code data-lang="sql"><span>SELECT</span>
  <span>title</span>,
  <span>Actors</span>.<span>name</span> <span>AS</span> <span>actor_name</span>
<span>FROM</span> <span>Movie</span>
 <span>LEFT</span> <span>JOIN</span> <span>Movie_Actors</span> <span>ON</span>
  <span>Movie</span>.<span>id</span> <span>=</span> <span>Movie_Actors</span>.<span>movie_id</span>
 <span>LEFT</span> <span>JOIN</span> <span>Person</span> <span>AS</span> <span>Actors</span> <span>ON</span>
  <span>Movie_Actors</span>.<span>person_id</span> <span>=</span> <span>Person</span>.<span>id</span>
</code></pre></div><p>SQL (as it may be):</p>
<div><pre tabindex="0"><code data-lang="sql"><span>select</span>
  <span>title</span>,
  <span>actors</span>.<span>name</span>
<span>from</span> <span>movies</span>
  <span>join</span> <span>movies_actors</span> <span>using</span>(<span>movie_id</span>)
  <span>join</span> <span>actors</span> <span>using</span>(<span>actor_id</span>)
</code></pre></div><p>Hmm. Another example?</p>
<p>FancyQL:</p>
<pre tabindex="0"><code>select Movie {
  title,
  actors: {
   name
  },
  rating := math::mean(.reviews.score)
} filter &#34;Zendaya&#34; in .actors.name;
</code></pre><p>SQL (as the authors of FancyQL see it):</p>
<div><pre tabindex="0"><code data-lang="sql"><span>SELECT</span>
  <span>title</span>,
  <span>Actors</span>.<span>name</span> <span>AS</span> <span>actor_name</span>,
  (<span>SELECT</span> <span>avg</span>(<span>score</span>)
    <span>FROM</span> <span>Movie_Reviews</span>
    <span>WHERE</span> <span>movie_id</span> <span>=</span> <span>Movie</span>.<span>id</span>) <span>AS</span> <span>rating</span>
<span>FROM</span>
  <span>Movie</span>
  <span>LEFT</span> <span>JOIN</span> <span>Movie_Actors</span> <span>ON</span>
    <span>Movie</span>.<span>id</span> <span>=</span> <span>Movie_Actors</span>.<span>movie_id</span>
  <span>LEFT</span> <span>JOIN</span> <span>Person</span> <span>AS</span> <span>Actors</span> <span>ON</span>
    <span>Movie_Actors</span>.<span>person_id</span> <span>=</span> <span>Person</span>.<span>id</span>
<span>WHERE</span>
  <span>&#39;Zendaya&#39;</span> <span>IN</span> (
    <span>SELECT</span> <span>Person</span>.<span>name</span>
    <span>FROM</span>
      <span>Movie_Actors</span>
      <span>INNER</span> <span>JOIN</span> <span>Person</span>
        <span>ON</span> <span>Movie_Actors</span>.<span>person_id</span> <span>=</span> <span>Person</span>.<span>id</span>
    <span>WHERE</span>
      <span>Movie_Actors</span>.<span>movie_id</span> <span>=</span> <span>Movie</span>.<span>id</span>)
</code></pre></div><p>SQL (as it may be):</p>
<div><pre tabindex="0"><code data-lang="sql"><span>select</span>
  <span>title</span>,
  <span>actors</span>.<span>name</span>,
  (<span>select</span> <span>avg</span>(<span>score</span>) <span>from</span> <span>reviews</span>
   <span>where</span> <span>movie_id</span> <span>=</span> <span>movies</span>.<span>movie_id</span>) <span>as</span> <span>rating</span>
<span>from</span> <span>movies</span>
  <span>join</span> <span>movies_actors</span> <span>using</span>(<span>movie_id</span>)
  <span>join</span> <span>actors</span> <span>using</span>(<span>actor_id</span>)
<span>where</span> <span>movie_id</span> <span>in</span> (
  <span>select</span> <span>movie_id</span>
  <span>from</span> <span>actors</span> <span>join</span> <span>movies_actors</span> <span>using</span>(<span>actor_id</span>)
  <span>where</span> <span>actors</span>.<span>name</span> <span>=</span> <span>&#39;Zendaya&#39;</span>
)
</code></pre></div><p><a href="https://gist.github.com/nalgeon/f80845eab71153eed7d41b5306d6d785">movies.sql</a></p>
<p>A bit verbose. But maybe SQL is not that complex after all? Otherwise, why would you paint it scarier than it really is?</p>
<h2 id="modern">Modern</h2>
<figure>
<img src="https://antonz.org/fancy-ql/fancy-3.png" alt="Designed for devs, not suits"/>
<figcaption>Let&#39;s throw in some suite-shaming!</figcaption>
</figure>
<p>Here is another common argument:</p>
<blockquote>
<p>SQL was designed with 1970s businessmen in mind, and it shows.</p>
</blockquote>
<p>True, SQL was designed in the 1970s. But how is that a weakness? Everyone knows SQL. All major database engines support SQL. SQL is expressive enough to solve any data-related task. SQL has a solid standards committee that maintains and improves it. What can your language offer besides being created in the 2020s?</p>
<p>I can go on, but I don‚Äôt think it‚Äôs necessary. My point is simple.</p>
<p>I don‚Äôt need your fancy query language. I‚Äôd stick with SQL.</p>
<p>Maybe it‚Äôs just me.</p>
<p><em>Follow <a href="https://twitter.com/ohmypy"><strong>@ohmypy</strong></a> on Twitter to keep up with new posts</em>¬†üöÄ</p>
</div>
</div></article>

</div>
</div></div>
  </body>
</html>
