<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/aserto-dev/topaz">Original</a>
    <h1>Show HN: Topaz: open-source authorization combining the best of OPA and Zanzibar</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/aserto-dev/topaz/blob/main/assets/logo.svg"><img src="https://github.com/aserto-dev/topaz/raw/main/assets/logo.svg" alt="topaz logo"/></a></p>

<p dir="auto"><a href="https://goreportcard.com/report/github.com/aserto-dev/topaz" rel="nofollow"><img src="https://camo.githubusercontent.com/ffb9a8347f1b521bf2f22d1711b1dbc39dbb2986f84c36cf0732fcf2990c6504/68747470733a2f2f676f7265706f7274636172642e636f6d2f62616467652f6769746875622e636f6d2f61736572746f2d6465762f746f70617a" alt="Go Report Card" data-canonical-src="https://goreportcard.com/badge/github.com/aserto-dev/topaz"/></a>
<a href="https://github.com/aserto-dev/topaz/actions/workflows/ci.yaml"><img src="https://github.com/aserto-dev/topaz/actions/workflows/ci.yaml/badge.svg" alt="ci"/></a>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/9227269126dac553ec3aedcb23ad6a4bb327772ad8b9921e265730c33c904e03/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f61736572746f2d6465762f746f70617a"><img src="https://camo.githubusercontent.com/9227269126dac553ec3aedcb23ad6a4bb327772ad8b9921e265730c33c904e03/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f61736572746f2d6465762f746f70617a" alt="Apache 2.0" data-canonical-src="https://img.shields.io/github/license/aserto-dev/topaz"/></a>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/e8d5de99cde8846d9f9f791e3d5d6270a47cbb87b19b796c33d5ec13ea46772a/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f762f7461672f61736572746f2d6465762f746f70617a"><img src="https://camo.githubusercontent.com/e8d5de99cde8846d9f9f791e3d5d6270a47cbb87b19b796c33d5ec13ea46772a/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f762f7461672f61736572746f2d6465762f746f70617a" alt="GitHub release (latest SemVer)" data-canonical-src="https://img.shields.io/github/v/tag/aserto-dev/topaz"/></a>
<a href="https://www.aserto.com/slack" rel="nofollow"><img src="https://camo.githubusercontent.com/4f22e33e41ffb3c56dac287388ff37b16365d4dd140d336f3781a2a54db5ca46/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f736c61636b2d4061736572746f636f6d6d756e6974792d79656c6c6f772e7376673f6c6f676f3d736c61636b" data-canonical-src="https://img.shields.io/badge/slack-@asertocommunity-yellow.svg?logo=slack"/></a>
<a href="https://www.topaz.sh/docs/intro" rel="nofollow"><img src="https://camo.githubusercontent.com/e8f33ee7d89a7df222222bca4ff7f226d49bb202b127aaaf6bb9d423f4b32df5/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f63732d2546302539462539352542362d626c7565" data-canonical-src="https://img.shields.io/badge/docs-%F0%9F%95%B6-blue"/></a>
<a href="https://twitter.com/intent/follow?screen_name=aserto_com" rel="nofollow"><img src="https://camo.githubusercontent.com/f8f13815f57a45a3cf5251b075c16936d8e9547a3688686176546e66f0d0135c/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f466f6c6c6f772d61736572746f5f5f636f6d2d626c75653f7374796c653d666c6174266c6f676f3d74776974746572" data-canonical-src="https://img.shields.io/badge/Follow-aserto__com-blue?style=flat&amp;logo=twitter"/></a></p>
<p dir="auto">Topaz is an open-source authorization service providing fine-grained, real-time, policy-based access control for applications and APIs.</p>
<p dir="auto">It uses the <a href="https://www.openpolicyagent.org/" rel="nofollow">Open Policy Agent</a> (OPA) as its decision engine, and provides a built-in directory that is inspired by the Google <a href="https://research.google/pubs/pub48190/" rel="nofollow">Zanzibar</a> data model.</p>
<p dir="auto">Authorization policies can leverage user attributes, group membership, application resources, and relationships between them. All data used for authorization is modeled and stored locally in an embedded database, so authorization decisions can be evaluated quickly and efficiently.</p>
<h2 dir="auto"><a id="user-content-documentation-and-support" aria-hidden="true" href="#documentation-and-support"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Documentation and support</h2>
<p dir="auto">Read more at <a href="https://www.topaz.sh" rel="nofollow">topaz.sh</a> and the <a href="https://www.topaz.sh/docs/intro" rel="nofollow">docs</a>.</p>
<p dir="auto">Join the community <a href="https://www.aserto.com/slack" rel="nofollow">Slack channel</a> for questions and help!</p>
<h2 dir="auto"><a id="user-content-benefits" aria-hidden="true" href="#benefits"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Benefits</h2>
<ul dir="auto">
<li><strong>Authorization in one place</strong>: a single authorization service, instead of spreading authorization logic everywhere.</li>
<li><strong>Fine-grained</strong>: following the Principle of Least Privilege, assign the smallest set of fine-grained permissions to each user or group.</li>
<li><strong>Policy-based</strong>: convert authorization &#34;spaghetti code&#34; into a policy expressed in its own domain-specific language, managed as code, and built into an immutable, signed artifact.</li>
<li><strong>Real-time</strong>: gate each protected resource with an authorization call that ensures the user has the right permission.</li>
<li><strong>Blazing fast</strong>: deploy the authorizer as a sidecar or microservice, right next to your app, for low latency and high availability.</li>
<li><strong>Comprehensive decision logging</strong>: log every decision to facilitate audit trails, compliance, and forensics.</li>
<li><strong>Flexible authorization model</strong>: Start simple, and grow from multi-tenant RBAC to ABAC or ReBAC, or a combination.</li>
<li><strong>Capture your domain model</strong>: Create object types and relationships that reflect your domain model.</li>
<li><strong>Separation of concerns</strong>: application developers can own the app logic, and security engineers can own the authorization policy.</li>
</ul>
<h2 dir="auto"><a id="user-content-table-of-contents" aria-hidden="true" href="#table-of-contents"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Table of Contents</h2>
<ul dir="auto">
<li><a href="#getting-topaz">Getting Topaz</a>
<ul dir="auto">
<li><a href="#installation">Installation</a></li>
<li><a href="#building-from-source">Building from source</a></li>
<li><a href="#running-with-docker">Running with Docker</a></li>
</ul>
</li>
<li><a href="#quickstart">Quickstart</a>
<ul dir="auto">
<li><a href="#install-topaz-authorizer-container-image">Install container image</a></li>
<li><a href="#create-a-configuration">Create config for Todo policy</a></li>
<li><a href="#start-topaz-in-interative-mode">Start in interactive mode</a></li>
<li><a href="#import-sample-data">Import sample data</a></li>
<li><a href="#issue-an-api-call">Issue an API call</a></li>
<li><a href="#issue-a-query">Issue a query</a></li>
<li><a href="#run-the-sample-application">Run the sample application</a></li>
</ul>
</li>
<li><a href="#command-line-options">Command Line</a></li>
<li><a href="#grpc-endpoints">gRPC Endpoints</a></li>
<li><a href="#credits">Credits</a></li>
<li><a href="#contribution-guidelines">Contribution Guidelines</a></li>
</ul>
<h2 dir="auto"><a id="user-content-getting-topaz" aria-hidden="true" href="#getting-topaz"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Getting Topaz</h2>
<h3 dir="auto"><a id="user-content-installation" aria-hidden="true" href="#installation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h3>
<p dir="auto"><code>topaz</code> is available on Linux, macOS and Windows platforms.</p>
<ul dir="auto">
<li>
<p dir="auto">Binaries for Linux, Windows and Mac are available as tarballs in the <a href="https://github.com/aserto-dev/topaz/releases">release</a> page.</p>
</li>
<li>
<p dir="auto">Via Homebrew for macOS or LinuxBrew for Linux</p>
<div dir="auto" data-snippet-clipboard-copy-content="brew tap aserto-dev/tap &amp;&amp; brew install aserto-dev/tap/topaz"><pre>brew tap aserto-dev/tap <span>&amp;&amp;</span> brew install aserto-dev/tap/topaz</pre></div>
</li>
<li>
<p dir="auto">Via a GO install</p>
<div dir="auto" data-snippet-clipboard-copy-content="go install github.com/topaz/cmd/topaz@latest"><pre>go install github.com/topaz/cmd/topaz@latest</pre></div>
</li>
</ul>
<h3 dir="auto"><a id="user-content-building-from-source" aria-hidden="true" href="#building-from-source"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Building from source</h3>
<p dir="auto"><code>topaz</code> is currently using go v1.17 or above. In order to build <code>topaz</code> from source you must:</p>
<ol dir="auto">
<li>
<p dir="auto">Install <a href="https://magefile.org/" rel="nofollow">mage</a></p>
</li>
<li>
<p dir="auto">Clone the repo</p>
</li>
<li>
<p dir="auto">Build and run the executable</p>
<div dir="auto" data-snippet-clipboard-copy-content="mage build &amp;&amp; ./dist/build_linux_amd64/topaz"><pre>mage build <span>&amp;&amp;</span> ./dist/build_linux_amd64/topaz</pre></div>
</li>
</ol>
<h3 dir="auto"><a id="user-content-running-with-docker" aria-hidden="true" href="#running-with-docker"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Running with Docker</h3>
<p dir="auto">You can run as a Docker container:</p>
<div dir="auto" data-snippet-clipboard-copy-content="docker run -it --rm ghcr.io/aserto-dev/topaz:latest --help"><pre>docker run -it --rm ghcr.io/aserto-dev/topaz:latest --help</pre></div>
<h2 dir="auto"><a id="user-content-quickstart" aria-hidden="true" href="#quickstart"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Quickstart</h2>
<p dir="auto">These instructions help you get Topaz up and running as the authorizer for a sample Todo app.</p>
<h3 dir="auto"><a id="user-content-install-topaz-authorizer-container-image" aria-hidden="true" href="#install-topaz-authorizer-container-image"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Install Topaz authorizer container image</h3>
<p dir="auto">The Topaz authorizer is packaged as a Docker container. You can get the latest image using the following command:</p>

<h3 dir="auto"><a id="user-content-create-a-configuration" aria-hidden="true" href="#create-a-configuration"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Create a configuration</h3>
<p dir="auto">This command creates a configuration file for the sample Todo <strong>policy image</strong>. A policy image is an OCI image that contains an OPA policy. The source code for the <code>opcr.io/aserto-tempaltes/policy-todo-rebac:latest</code> policy image can be found <a href="https://github.com/aserto-templates/template-policy-todo-rebac/tree/main/content/src/policies">here</a>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="topaz configure -d -s -r opcr.io/aserto-templates/policy-todo-rebac:latest todo"><pre>topaz configure -d -s -r opcr.io/aserto-templates/policy-todo-rebac:latest todo</pre></div>
<p dir="auto">The configuration file is generated in <code>$(HOME)/.config/topaz/cfg</code>.</p>
<ul dir="auto">
<li>the config instructs Topaz to create a local directory instance (<code>-d</code>)</li>
<li>when started, Topaz will seed the directory with default object types (<code>-s</code>)</li>
<li>the config references an authorization policy for a sample &#34;Todo&#34; app, retrieved from the Open Policy Registry as a container image</li>
<li>the config is named &#34;todo&#34;</li>
</ul>
<h3 dir="auto"><a id="user-content-start-topaz-in-interative-mode" aria-hidden="true" href="#start-topaz-in-interative-mode"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Start Topaz in interative mode</h3>

<h3 dir="auto"><a id="user-content-import-sample-data" aria-hidden="true" href="#import-sample-data"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Import sample data</h3>
<p dir="auto">Retrieve the &#34;Citadel&#34; json file, placing it in the current directory:</p>
<div dir="auto" data-snippet-clipboard-copy-content="curl https://raw.githubusercontent.com/aserto-dev/topaz/main/assets/citadel.json &gt;./citadel.json"><pre>curl https://raw.githubusercontent.com/aserto-dev/topaz/main/assets/citadel.json <span>&gt;</span>./citadel.json</pre></div>
<p dir="auto">Import the contents of the file into Topaz directory. This creates the sample users (Rick, Morty, and friends); groups; and relations.</p>

<h3 dir="auto"><a id="user-content-issue-an-api-call" aria-hidden="true" href="#issue-an-api-call"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Issue an API call</h3>
<p dir="auto">To verify that Topaz is running with the right policy image, you can issue a <code>curl</code> call to interact with the REST API.</p>
<p dir="auto">This API call retrieves the set of policies that Topaz has loaded:</p>
<div dir="auto" data-snippet-clipboard-copy-content="curl -k https://localhost:8383/api/v2/policies"><pre>curl -k https://localhost:8383/api/v2/policies</pre></div>
<h3 dir="auto"><a id="user-content-issue-a-query" aria-hidden="true" href="#issue-a-query"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Issue a query</h3>
<p dir="auto">Issue a query using the <code>is</code> REST API to verify that the user Rick is allowed to GET the list of todos:</p>
<div dir="auto" data-snippet-clipboard-copy-content="curl -k -X POST &#39;https://localhost:8383/api/v2/authz/is&#39; \
-H &#39;Content-Type: application/json&#39; \
-d &#39;{
     &#34;identity_context&#34;: {
          &#34;type&#34;: &#34;IDENTITY_TYPE_SUB&#34;,
          &#34;identity&#34;: &#34;rick@the-citadel.com&#34;
     },
     &#34;policy_context&#34;: {
          &#34;path&#34;: &#34;todoApp.GET.todos&#34;,
          &#34;decisions&#34;: [&#34;allowed&#34;]
     }
}&#39;"><pre>curl -k -X POST <span><span>&#39;</span>https://localhost:8383/api/v2/authz/is<span>&#39;</span></span> \
-H <span><span>&#39;</span>Content-Type: application/json<span>&#39;</span></span> \
-d <span><span>&#39;</span>{</span>
<span>     &#34;identity_context&#34;: {</span>
<span>          &#34;type&#34;: &#34;IDENTITY_TYPE_SUB&#34;,</span>
<span>          &#34;identity&#34;: &#34;rick@the-citadel.com&#34;</span>
<span>     },</span>
<span>     &#34;policy_context&#34;: {</span>
<span>          &#34;path&#34;: &#34;todoApp.GET.todos&#34;,</span>
<span>          &#34;decisions&#34;: [&#34;allowed&#34;]</span>
<span>     }</span>
<span>}<span>&#39;</span></span></pre></div>
<h3 dir="auto"><a id="user-content-run-the-sample-application" aria-hidden="true" href="#run-the-sample-application"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Run the sample application</h3>
<p dir="auto">To run the sample Todo app in the language of your choice, and see how Topaz is used to authorize requests, refer to the <a href="https://www.topaz.sh/docs/getting-started/samples" rel="nofollow">docs</a>.</p>
<p dir="auto">To start an interactive session with the Topaz endpoints, see the <a href="#grpc-endpoints">gRPC endpoints</a> section.</p>
<h2 dir="auto"><a id="user-content-command-line-options" aria-hidden="true" href="#command-line-options"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Command line options</h2>
<div dir="auto" data-snippet-clipboard-copy-content="$ topaz --help
Usage: topaz &lt;command&gt;

Topaz CLI

Commands:
  backup       backup directory data
  configure    configure topaz service
  export       export directory objects
  install      install topaz
  import       import directory objects
  load         load a manifest file
  restore      restore directory data
  run
  save         save a manifest file
  start        start topaz instance
  status       display topaz instance status
  stop         stop topaz instance
  version      version information
  uninstall    uninstall topaz, removes all locally installed artifacts

Flags:
  -h, --help    Show context-sensitive help.

Run &#34;topaz &lt;command&gt; --help&#34; for more information on a command."><pre>$ topaz --help
Usage: topaz <span>&lt;</span>command<span>&gt;</span>

Topaz CLI

Commands:
  backup       backup directory data
  configure    configure topaz service
  <span>export</span>       <span>export</span> directory objects
  install      install topaz
  import       import directory objects
  load         load a manifest file
  restore      restore directory data
  run
  save         save a manifest file
  start        start topaz instance
  status       display topaz instance status
  stop         stop topaz instance
  version      version information
  uninstall    uninstall topaz, removes all locally installed artifacts

Flags:
  -h, --help    Show context-sensitive help.

Run <span><span>&#34;</span>topaz &lt;command&gt; --help<span>&#34;</span></span> <span>for</span> more information on a command.</pre></div>
<h2 dir="auto"><a id="user-content-grpc-endpoints" aria-hidden="true" href="#grpc-endpoints"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>gRPC Endpoints</h2>
<p dir="auto">To interact with the authorizer endpoint, install <code>grpcui</code> or <code>grpcurl</code> and point them to <code>localhost:8282</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="grpcui --insecure localhost:8282"><pre>grpcui --insecure localhost:8282</pre></div>
<p dir="auto">To interact with the directory endpoint, use <code>localhost:9292</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="grpcui --insecure localhost:9292"><pre>grpcui --insecure localhost:9292</pre></div>
<p dir="auto">For more information on APIs, see the <a href="https://www.topaz.sh/docs/intro" rel="nofollow">docs</a>.</p>
<h2 dir="auto"><a id="user-content-demo" aria-hidden="true" href="#demo"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Demo</h2>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/aserto-dev/topaz/blob/main/assets/topaz.gif"><img src="https://github.com/aserto-dev/topaz/raw/main/assets/topaz.gif" alt="demo" data-animated-image=""/></a></p>
<h2 dir="auto"><a id="user-content-credits" aria-hidden="true" href="#credits"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Credits</h2>
<p dir="auto">Topaz uses a lot of great and amazing open source projects and libraries.</p>
<p dir="auto">A big thank you to all of them!</p>
<h2 dir="auto"><a id="user-content-contribution-guidelines" aria-hidden="true" href="#contribution-guidelines"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Contribution Guidelines</h2>
<p dir="auto">Topaz is a work in progress - if something is broken or there&#39;s a feature that you want, please file an issue and if so inclined submit a PR!</p>
<p dir="auto">We welcome contributions from the community! Here are some general guidelines:</p>
<ul dir="auto">
<li>File an issue first prior to submitting a PR!</li>
<li>Ensure all exported items are properly commented</li>
<li>If applicable, submit a test suite against your PR</li>
</ul>
</article>
          </div></div>
  </body>
</html>
