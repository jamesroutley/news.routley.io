<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://lwn.net/SubscriberLink/962787/35f1ff3af9031437/">Original</a>
    <h1>A modest update to Qubes OS</h1>
    
    <div id="readability-page-1" class="page"><div>
<!-- $Id: slink-trial,v 1.1 2005-11-04 21:27:01 corbet Exp $ -->
<center>
<table>
<tbody><tr><td>
<h3>Welcome to LWN.net</h3>
<p>
The following subscription-only content has been made available to you 
by an LWN subscriber.  Thousands of subscribers depend on LWN for the 
best news from the Linux and free software communities.  If you enjoy this 
article, please consider accepting the trial offer on the right.  Thank you
for visiting LWN.net!
</p></td><td>
<div>
<h3>Free trial subscription</h3>
           <p>
           Try LWN for free for 1 month: no payment
           or credit card required.  <a href="https://lwn.net/Promo/slink-trial2-3/claim">Activate
           your trial subscription now</a> and see why thousands of
           readers subscribe to LWN.net.
           
</p></div>
</td>
</tr>

</tbody></table>
</center>

<p><a href="https://www.qubes-os.org/">Qubes OS</a> is a security-focused desktop Linux distribution built on Fedora Linux and the <a href="https://www.qubes-os.org/faq/#why-does-qubes-use-xen-instead-of-kvm-or-some-other-hypervisor">Xen hypervisor</a>. Qubes uses virtualization to run applications, system services, and devices access via virtual machines called &#34;<a href="https://www.qubes-os.org/doc/glossary/#qube">qubes</a>&#34; that have varying levels of trust and <a href="https://www.qubes-os.org/doc/how-to-use-disposables/">persistence</a> to provide an open-source &#34;<q>reasonably secure</q>&#34; operating system with &#34;<q>serious privacy</q>&#34;. The Qubes 4.2.0 release, from <a href="https://www.qubes-os.org/doc/releases/4.2/release-notes/">December 2023</a>, brings a number of refinements to make Qubes OS easier to manage and use.</p>

<h4>A quick overview</h4>

<p>Qubes OS is designed to be a single-user desktop operating system that provides strong security out of the box through isolation between applications and services, rather than trying to ensure that the applications or services are secure in and of themselves. The vision for Qubes is laid out in the Qubes OS <a href="https://www.qubes-os.org/attachment/doc/arch-spec-0.3.pdf">architecture document</a> written in 2010. While that specification isn&#39;t fully implemented yet, each release brings Qubes a bit closer to the ideal.</p>

<p>As currently implemented, Qubes uses the Xen hypervisor to run a Fedora-based <a href="https://www.qubes-os.org/doc/glossary/#admin-qube">admin qube</a> (<a href="https://www.qubes-os.org/doc/glossary/#dom0">dom0</a>) with direct hardware access that provides administration and orchestration of unprivileged guest domains (<a href="https://www.qubes-os.org/doc/glossary/#domu">domU</a>) based on <a href="https://www.qubes-os.org/doc/templates/">templates</a> (VM data stored as LVM volumes) that are used to run applications (<a href="https://www.qubes-os.org/doc/glossary/#app-qube">app qubes</a>) or provide services (<a href="https://www.qubes-os.org/doc/glossary/#service-qube">service qubes</a>) like networking, USB access, and more to the app qubes. For example, networking and firewall services are each provided by separate system qubes (&#34;sys-net&#34; and &#34;sys-firewall&#34;, respectively), and access to USB devices is through &#34;sys-usb&#34;. Note that the Qubes website and documentation tend to use the term &#34;VM&#34; and &#34;qube&#34; interchangeably.</p>

<p>Templates are the starting point for app and system qubes—app qubes take their root file system (that is, programs and system files) from templates. Any software that users want to persist in an app qube should be installed in a template, rather than an app qube, otherwise it will be discarded when the app qube restarts. If a user wants Emacs or LibreOffice, the Qubes way is to install it into one of the templates and then spin up an app qube based on that template to use the application.</p>

<p>Each qube has a level of trust somewhere between &#34;unsafe and untrusted&#34; to &#34;safe and ultimately trusted&#34;. The admin qube, for example, is considered safe and ultimately trusted. The sys-net and sys-usb qubes are considered untrusted, and the firewall qube is considered moderately trusted. Qubes OS ties all of that together and presents the user with a coherent desktop experience. To the user, it is meant to feel like using a regular desktop environment and applications, rather than using half-dozen or more VMs that are unaware of one another. Qube windows are displayed with <a href="https://www.qubes-os.org/doc/getting-started/#color--security">colored borders</a>, to give users visual cues about which qube is running the application and its safety level.</p>

<blockquote>
<a href="https://lwn.net/Articles/962902/"><img src="https://static.lwn.net/images/2024/qubes-desktop-sm.png" alt="[Qubes OS desktop]" title="Qubes OS desktop"/></a>
</blockquote>

<p>LWN last looked at Qubes ahead of the <a href="https://lwn.net/Articles/873255/">4.1.0 release</a> in October 2021. That release made major overhauls to the Qubes architecture, splitting out display handling to its <a href="https://www.qubes-os.org/doc/gui-domain/">own domain</a> and making changes to the <a href="https://www.qubes-os.org/news/2020/06/22/new-qrexec-policy-system/">Qrexec</a> policy system. This release follows up those changes with a number of more user-visible changes such as rewrites of several Qubes GUI management tools, simpler <a href="https://www.qubes-os.org/doc/split-gpg/">split GPG</a> management (which lets users store private GPG keys in a trusted qube and make use of them in less trusted qubes), changes to default Fedora and Debian templates, and more.</p>

<p>Qubes&#39;s approach to security means a more complex, and <a href="https://lwn.net/Articles/764048/">sometimes cumbersome</a>, user experience. Moving from a Linux distribution like Fedora or Debian to Qubes OS will take more adjustment than one might expect. For example, installing software on a Fedora desktop is usually as simple as &#34;<tt>dnf install package</tt>&#34;. But installing software to use within a Fedora-based qube requires <a href="https://www.qubes-os.org/doc/how-to-install-software/">several additional steps</a> on Qubes OS, plus restarting VMs. Other activities, such as configuring a Bluetooth input or audio device is much more complicated and not well-documented. Then again, it&#39;s also not encouraged—Bluetooth isn&#39;t <a href="https://forum.qubes-os.org/t/wireless-bluetooth-support/5943">considered secure</a>, so why focus on making it easier to configure? But when it comes to using Qubes OS as intended, this release includes some major work to add polish and improve the user experience.</p>

<h4>GUI application improvements</h4>

<p>One of the first improvements users will notice is the redesigned <a href="https://www.qubes-os.org/news/2021/11/12/new-qubes-application-menu/">application menu</a>, first made available as a preview in Qubes 4.1, and now the default. On a &#34;normal&#34; Linux distribution, the menu of applications generally only has to display one version of Firefox, one terminal, one file manager, and so forth. Qubes, however, helps users work more securely by compartmentalizing applications to qubes by task or profile. How users <a href="https://www.qubes-os.org/doc/how-to-organize-your-qubes/">organize</a> their work is up to them, but Qubes offers &#34;work&#34;, &#34;personal&#34;, and &#34;untrusted&#34; qubes by default—each qube with its own installation of Firefox, terminal, and file manager. (These are color coded when running, so users might see a yellow border for personal applications, a blue border for work, and red for untrusted.)</p>

<p>The Qubes model of separating activities into isolated compartments is good for security—users can visit untrusted sites in the untrusted qube, restrict banking to another qube, and separate work in yet another qube—but more challenging to present in a user-friendly fashion. Prior versions of Qubes had a <a href="https://forum.qubes-os.org/t/guide-xfce-global-dark-mode-in-qubes-4-0-4-1/10757">single-menu layout</a> that was unwieldy as the number of applications, templates, and services grew. The current application menu organizes application qubes, template qubes, and service qubes separately, and breaks out Qubes tools like the global configuration and policy editor into their own menu. The effect is still busy compared to a &#34;regular&#34; desktop distribution, but it does seem a marked improvement over the old menu. The ability to add applications from various qubes to a Favorites menu is a great improvement, though there is no obvious way to configure the application menu to display favorites immediately when first opened. Perhaps this will show up in the next Qubes release—if it does, it will probably appear in the Qubes global configuration application.</p>

<p>The global configuration application in 4.2.0 represents work that the project started discussing in September 2021. In <a href="https://github.com/QubesOS/qubes-issues/issues/6898">the ticket</a> discussing the design, Nina Eleanor Alter described target demographics for the global UI as non-technical, high-risk users, and technical users &#34;<q>excited about Qubes but lacking the attention span or time to copiously read whitepapers or the docs</q>&#34;. Alter said that Linux users may be comfortable with multiple applets to configure system behaviors but, &#34;<q>it delivers a poor execution and discovery experience to all users</q>&#34;; and users coming from Windows or macOS expect a single settings UI.</p>

<p>The idea is to make Qubes more discoverable, and the new UI does this by bringing together settings for file access, clipboard handling, updates, USB devices, URL handling, miscellaneous general settings, and device information. Users have a single GUI for working with system-wide settings that were not particularly discoverable in prior versions, such as setting up split GPG.</p>

<p>The Create New Qube application has been updated too, though Qubes 4.2.0 seems to have shipped with the old and new applications with different labels in the Applications Menu. The new application is titled &#34;Create New Qube&#34; and the old application is listed as &#34;Create Qubes VM&#34;, though both show &#34;Create New Qube&#34; in the title bar when running.</p>

<blockquote>
<a href="https://lwn.net/Articles/962902#create"><img src="https://static.lwn.net/images/2024/qubes-create-new-side-sm.png" alt="[Create New Qubes applications]" title="Create New Qubes applications"/></a>
</blockquote>

<p>As shown in the screenshot, the new and improved version provides access to more options and settings, as well as some guidance provided via tooltips. (One note on tooltips in Qubes—while working in Qubes, tooltips displayed in various applications lingered long after moving the mouse, switching windows, or even navigating to another workspace.) The current iteration of the Create New Qube application does seem more intuitive than the old, and provides the ability choose the default applications available, set initial RAM for the qube, and more.</p>

<p>The Qubes Update application (appropriately) received an update in this release as well. Qubes includes Fedora, Debian, and Whonix templates as part of the default installation and provides access to many others. Over time it would be trivial to have half-a-dozen template OSes that need regular updates. The Update application streamlines this by checking in the background for updates and then notifying of updates for running qubes at regular intervals. It will also attempt to perform updates every seven days for templates that are not used in that timeframe, though this interval is configurable, or users can update them manually. After updates have been staged, the updater will offer to restart qubes based on the updated templates. Qubes that have running applications will not be targeted for restart by default, so users can run updates without fear that Qubes will unceremoniously shut down their work.</p>

<h4>Template updates</h4>

<p>Another interesting change with this release the <a href="https://github.com/QubesOS/qubes-issues/issues/7784">use of Xfce</a> editions for Fedora and Debian instead of GNOME to <a href="https://github.com/QubesOS/qubes-issues/issues/7028">reduce memory usage</a> and provide a better selection of default applications. Marek Marczykowski-Górecki said that Fedora&#39;s GNOME template has too many &#34;<q>problematic</q>&#34; packages that &#34;<q>either conflict with something or simply don&#39;t work with our GUI agent</q>&#34;. The project had been looking for ways to slim memory usage in Fedora qubes for some time, with a number of GNOME packages targeted for exclusion, including <a href="https://github.com/QubesOS/qubes-issues/issues/8403">GNOME Tracker</a>. Note that the Qubes OS default desktop has been Xfce <a href="https://www.qubes-os.org/doc/releases/3.2/release-notes/">since</a> the <a href="https://lwn.net/Articles/705827/">3.2 release</a> in September 2016.</p>

<p>Support for SELinux in Fedora templates has been a long time in coming. The <a href="https://github.com/QubesOS/qubes-issues/issues/4239">issue</a> tracking the work was opened in 2018, while the <a href="https://github.com/QubesOS/qubes-issues/issues/4239#issuecomment-1419947028">work finally landed</a> in February 2023 and then made its way into the 4.2.0 release. One might wonder why exactly users might need or want SELinux in Fedora qubes, given that Qubes OS is meant to be a single-user system. Each qube is already isolated from others and and the user has full run of each qube. Templates, for example, allow <a href="https://www.qubes-os.org/doc/vm-sudo/">sudo with no password</a> because all of the user data in a running qube is available to the same person anyway, so there&#39;s little sense in forcing them to type a password every time they use <tt>sudo</tt>. Even though Qubes does little to restrict user privileges within each qube, Marczykowski-Górecki <a href="https://github.com/QubesOS/qubes-issues/issues/4239#issuecomment-1712660098">noted</a> that the addition of SELinux is useful for applications that provide sandboxing inside a Fedora template, like Podman or bubblewrap, and also help provide extra hardening when using <tt>qvm-copy</tt> to send files between qubes.</p>

<h4>A modest update</h4>

<p>Overall, 4.2.0 is a somewhat modest update in terms of new features—though it does contain plenty of the usual version updates and <a href="https://github.com/QubesOS/qubes-issues/issues?q=is%3Aissue+is%3Aclosed+reason%3Acompleted+milestone%3A%22Release+4.2%22+-label%3A%22R%3A+cannot+reproduce%22+-label%3A%22R%3A+declined%22+-label%3A%22R%3A+duplicate%22+-label%3A%22R%3A+not+applicable%22+-label%3A%22R%3A+self-closed%22+-label%3A%22R%3A+upstream+issue%22+">bug fixes</a>. But the focus on improving Qubes OS usability is important. While popular Linux distributions like Fedora or Ubuntu count users in the millions, the Qubes project <a href="https://www.qubes-os.org/statistics/">counts</a> its users in the tens of thousands. Surely more users need what Qubes has to offer, but security tools that are too hard to use tend not to be used. Bolstering Qubes usability is just as important as striving toward implementing the Qubes architecture specification.</p></div></div>
  </body>
</html>
