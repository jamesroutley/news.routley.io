<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blogs.gnome.org/tbernard/2023/07/26/rethinking-window-management/">Original</a>
    <h1>Rethinking Window Management in Gnome</h1>
    
    <div id="readability-page-1" class="page"><div>
		<p>Window management is one of those areas I’m fascinated with because even after 50 years, nobody’s fully cracked it yet. <a href="https://en.wikipedia.org/wiki/Xerox_Alto">Ever since the dawn of time</a> we’ve relied on the <a href="https://en.wikipedia.org/wiki/WIMP_(computing)">window metaphor</a> as the primary way of multitasking on the desktop. In this metaphor, each app can spawn one or more rectangular windows, which are stacked by most recently used, and moved or resized manually.</p>
<figure id="attachment_9934" aria-describedby="caption-attachment-9934"><img decoding="async" loading="lazy" src="https://blogs.gnome.org/tbernard/files/2023/07/floating-windows2-1-1024x576.png" alt="" width="660" height="371" srcset="https://blogs.gnome.org/tbernard/files/2023/07/floating-windows2-1-1024x576.png 1024w, https://blogs.gnome.org/tbernard/files/2023/07/floating-windows2-1-300x169.png 300w, https://blogs.gnome.org/tbernard/files/2023/07/floating-windows2-1-768x432.png 768w, https://blogs.gnome.org/tbernard/files/2023/07/floating-windows2-1-1536x864.png 1536w, https://blogs.gnome.org/tbernard/files/2023/07/floating-windows2-1.png 1920w" sizes="(max-width: 660px) 100vw, 660px"/><figcaption id="caption-attachment-9934">Overlapping windows can get messy quickly</figcaption></figure>
<p>The traditional windowing system works well as long as you only have a handful of small windows, but issues emerge as soon the number and size of the windows grows. As new windows are opened, existing ones are obscured, sometimes completely hiding them from view. Or, when you open a maximized window, suddenly every other window is hidden.</p>
<p>Over the decades, different OSes have added different tools and workflows to deal with these issues, including workspaces, taskbars, and switchers. However, the basic primitives have not changed <a href="http://toastytech.com/guis/alto3.html">since the 70s</a> and, as a result, the issues have never gone away.</p>
<p>While most of us are used to this system and its quirks, that doesn’t mean it’s without problems. This is especially apparent when you do user research with people who are new to computing, including children and older people. Manually placing and sizing windows can be fiddly work, and requires close attention and precise motor control. It’s also what we jokingly refer to as <a href="https://zachholman.com/posts/shit-work">shit work</a>: it is work that the user has to do, which is generated by the system itself, and has no other purpose.</p>
<p>Most of the time you don’t care about exact window sizes and positions and just want to see the windows that you need for your current task. Often that’s just a single, maximized window. Sometimes it’s two or three windows next to each other. It’s incredibly rare that you need a dozen different overlapping windows. Yet this is what you end up with by default today, when you simply use the computer, opening apps as you need them. Messy is the default, and it’s up to you to clean it up.</p>
<h4>What about tiling?</h4>
<p>Traditional tiling window managers solve the hidden window problem by preventing windows from overlapping. While this works well in some cases, it falls short as a general replacement for stacked, floating windows. The first reason for this is that tiling window managers size windows according to the amount of available screen space, yet most apps are designed to be used at a certain size and aspect ratio. For example, chat apps are inherently narrow and end up having large amounts of empty space at large sizes. Similarly, reading a PDF in a tiny window is not fun.</p>
<figure id="attachment_9949" aria-describedby="caption-attachment-9949"><img decoding="async" loading="lazy" src="https://blogs.gnome.org/tbernard/files/2023/07/forge2-1024x576.png" alt="" width="660" height="371" srcset="https://blogs.gnome.org/tbernard/files/2023/07/forge2-1024x576.png 1024w, https://blogs.gnome.org/tbernard/files/2023/07/forge2-300x169.png 300w, https://blogs.gnome.org/tbernard/files/2023/07/forge2-768x432.png 768w, https://blogs.gnome.org/tbernard/files/2023/07/forge2-1536x864.png 1536w, https://blogs.gnome.org/tbernard/files/2023/07/forge2.png 1920w" sizes="(max-width: 660px) 100vw, 660px"/><figcaption id="caption-attachment-9949">GNOME 44 with the “<a href="https://extensions.gnome.org/extension/4481/forge">Forge</a>” tiling extension. Just because windows <em>can</em> be tall and narrow doesn’t mean they should be :)</figcaption></figure>
<p>Another issue with tiling window manager is that they place new windows in seemingly arbitrary positions. This is a consequence of them not having knowledge about the content of a window or the context in which it is being used, and leads to having to manually move or resize windows after the fact, which is exactly the kind of fiddling we want to avoid in the first place.</p>

<p>More constrained tiling window managers such as on iPadOS are interesting in that they’re more purposeful (you always intentionally create the tiling groups). However, this approach only allows tiling two windows side-by-side, and does not scale well to larger screens.</p>
<h4>History</h4>
<p>This topic has been of interest to the design team for a <a href="https://cassidyjames.com/blog/gnome-west-coast-summit">very long time</a>. I remember discussing it with Jakub at my first GUADEC in 2017, and there have been countless discussions, ideas, and concepts since. Some particular milestones in our thinking were the concept work leading up to <a href="https://blogs.gnome.org/shell-dev/2020/12/18/gnome-shell-ux-plans-for-gnome-40">GNOME 40</a> in <a href="https://blogs.gnome.org/tbernard/2019/12/02/gnome-shell-hackfest-2019">2019</a> and 2020, and the design sessions at the <a href="https://blogs.gnome.org/tbernard/2022/07/30/berlin-mini-guadec-2022">Berlin Mini GUADEC in 2022</a> and the Brno hackfest in 2023.</p>
<figure id="attachment_10020" aria-describedby="caption-attachment-10020"><img decoding="async" loading="lazy" src="https://blogs.gnome.org/tbernard/files/2023/07/2023-04-26-11-24-43-741-1024x768.jpg" alt="" width="660" height="495" srcset="https://blogs.gnome.org/tbernard/files/2023/07/2023-04-26-11-24-43-741-1024x768.jpg 1024w, https://blogs.gnome.org/tbernard/files/2023/07/2023-04-26-11-24-43-741-300x225.jpg 300w, https://blogs.gnome.org/tbernard/files/2023/07/2023-04-26-11-24-43-741-768x576.jpg 768w, https://blogs.gnome.org/tbernard/files/2023/07/2023-04-26-11-24-43-741-1536x1152.jpg 1536w, https://blogs.gnome.org/tbernard/files/2023/07/2023-04-26-11-24-43-741-2048x1536.jpg 2048w" sizes="(max-width: 660px) 100vw, 660px"/><figcaption id="caption-attachment-10020">Tiling BoF in Brno during the HDR hackfest. Left to right: Robert Mader, Marco Trevisan, Georges Stavracase, Jakub Steiner and Allan Day (remote), Florian Müllner, Jonas Dreßler</figcaption></figure>
<p>I personally have a bit of a tradition working on this problem for at least a few weeks per year. For example, during the first lockdown in 2020 I spent quite a bit of time trying to envision a tiling-first version of GNOME Shell.</p>
<figure id="attachment_9895" aria-describedby="caption-attachment-9895"><img decoding="async" loading="lazy" src="https://blogs.gnome.org/tbernard/files/2023/07/prometheus-1024x640.png" alt="" width="660" height="413" srcset="https://blogs.gnome.org/tbernard/files/2023/07/prometheus-1024x640.png 1024w, https://blogs.gnome.org/tbernard/files/2023/07/prometheus-300x188.png 300w, https://blogs.gnome.org/tbernard/files/2023/07/prometheus-768x480.png 768w, https://blogs.gnome.org/tbernard/files/2023/07/prometheus.png 1280w" sizes="(max-width: 660px) 100vw, 660px"/><figcaption id="caption-attachment-9895">2020 mockup for a tiling-first GNOME Shell. More mockups in the <a href="https://gitlab.gnome.org/Teams/Design/os-mockups/-/tree/master/mobile-shell/tiling">OS mockups repo on Gitlab</a>.</figcaption></figure>
<h4>Problems with our current tiling</h4>
<p>GNOME has had basic tiling functionality since early in the GNOME 3 series. While this is nice to have, it has obvious limitations:</p>
<ul>
<li>It’s completely manual</li>
<li>Only 2 windows are supported, and the current implementation is not extensible to more complex layouts</li>
<li>Tiled windows are not grouped in the window stack, so both windows are not raised simultaneously and other windows get in the way</li>
<li>Workspaces are manual, and not integrated into the workflow</li>
</ul>
<figure id="attachment_9957" aria-describedby="caption-attachment-9957"><img decoding="async" loading="lazy" src="https://blogs.gnome.org/tbernard/files/2023/07/tiling-status-quo-1024x576.png" alt="" width="660" height="371" srcset="https://blogs.gnome.org/tbernard/files/2023/07/tiling-status-quo-1024x576.png 1024w, https://blogs.gnome.org/tbernard/files/2023/07/tiling-status-quo-300x169.png 300w, https://blogs.gnome.org/tbernard/files/2023/07/tiling-status-quo-768x432.png 768w, https://blogs.gnome.org/tbernard/files/2023/07/tiling-status-quo-1536x864.png 1536w, https://blogs.gnome.org/tbernard/files/2023/07/tiling-status-quo.png 1920w" sizes="(max-width: 660px) 100vw, 660px"/><figcaption id="caption-attachment-9957">Because tiled windows are are currently mixed with overlapping floating windows they’re not really helping make things less messy in practice.</figcaption></figure>
<p>We’ve wanted <a href="https://gitlab.gnome.org/Teams/Design/os-mockups/-/issues/58">more powerful tiling</a> <a href="https://gitlab.gnome.org/Teams/Design/os-mockups/-/issues/169">for years</a>, but there has not been much progress due to the huge amount of work involved on the technical side and the lack of a clear design direction we were happy with. We now finally feel like the design is at a stage where we can take concrete next steps towards making it happen, which is very exciting!</p>
<h4>Get out of my way</h4>
<p>The key point we keep coming back to with this work is that, if we do add a new kind of window management to GNOME, it needs to be good enough to be the default. We don’t want to add yet another manual opt-in tool that doesn’t solve the problems the majority of people face.</p>
<p>To do this we landed on a number of high level ideas:</p>
<ul>
<li>Automatically do what people probably want, allow adjusting if needed</li>
<li>Make use of workspaces as a fully integrated part of the workflow</li>
<li>Richer metadata from apps to allow for better integration</li>
</ul>
<p>Our current concept imagines windows having three potential layout states:</p>
<ul>
<li><strong>Mosaic</strong>, a new window management mode which combines the best parts of tiling and floating</li>
<li><strong>Edge Tiling</strong>, i.e. windows splitting the screen edge-to-edge</li>
<li><strong>Floating</strong>, the classic stacked windows model</li>
</ul>

<p>Mosaic is the default behavior. You open a window, it opens centered on the screen at a size that makes the most sense for the app. For a web browser that might be maximized, for a weather app maybe only 700×500 pixels.</p>

<p>As you open more windows, the existing windows move aside to make room for the new ones. If a new window doesn’t fit (e.g. because it wants to be maximized) it moves to its own workspace. If the window layout comes close to filling the screen, the windows are automatically tiled.</p>

<p>You can also manually tile windows. If there’s enough space, other windows are left in a mosaic layout. However, if there’s not enough space for this mosaic layout, you’re prompted to pick another window to tile alongside.</p>

<p>You’re not limited to tiling just two windows side by side. Any tile (or the remaining space) can be split by dragging another window over it, and freely resized as the window minimum sizes allow.</p>

<p>There are always going to be cases that require placing a window in a specific position on the screen. The new system allows windows to be used with the classic floating behavior, on a layer above the mosaic/tiling windows. However, we think that this floating behaviour is going to be a relatively uncommon, similar to the existing “always on top” behavior that we have today.</p>
<p>There’s of course much more to this, but hopefully this gives an idea of what we have in mind in terms of behavior.</p>
<h4>New window metadata</h4>
<p>As mentioned above, to avoid the pitfalls of traditional tiling window managers we need more information from windows about their content. Windows can already set a fixed size and they have an implicit minimum size, but to build a great tiling experience we need more.</p>
<figure id="attachment_9972" aria-describedby="caption-attachment-9972"><img decoding="async" loading="lazy" src="https://blogs.gnome.org/tbernard/files/2023/07/huge-clocks-1024x576.png" alt="" width="660" height="371" srcset="https://blogs.gnome.org/tbernard/files/2023/07/huge-clocks-1024x576.png 1024w, https://blogs.gnome.org/tbernard/files/2023/07/huge-clocks-300x169.png 300w, https://blogs.gnome.org/tbernard/files/2023/07/huge-clocks-768x432.png 768w, https://blogs.gnome.org/tbernard/files/2023/07/huge-clocks-1536x864.png 1536w, https://blogs.gnome.org/tbernard/files/2023/07/huge-clocks-2048x1152.png 2048w" sizes="(max-width: 660px) 100vw, 660px"/><figcaption id="caption-attachment-9972">Some apps should probably never be maximized/tiled on a 4K monitor…</figcaption></figure>
<p>One important missing piece is having information on the maximum desired size of a window. This is the size beyond which the window content stops looking good. Not having this information is one of the reasons that traditional tiling window managers have issues, especially on larger screens. This maximum size would not be a hard limit and manual resizing would still be possible. Instead, the system would use the maximum size as one factor when it calculates an optimal window layout. For example, when tiling to the side of the screen, a window would only grow as wide as its maximum width rather than filling exactly half of the screen.</p>
<p>In addition, it’d be helpful to know the range of ideal sizes where an app works best. While an app may technically work at mobile sizes that’s probably not the best way to use that app if you have a large display. To stay with our chat example, you probably want to avoid folding the sidebar if it can be avoided, so the range of ideal sizes would be between the point where it becomes single pane and its maximum usable size.</p>
<p>Ideally these properties could be set dynamically depending on the window content. For example, a spreadsheet with a lot of columns but few rows could have a wider ideal size than one with lots of rows.</p>
<p>Depending on apps using new system APIs can be challenging and slow — it’s not easy to move the entire ecosystem! However, we think there’s a good chance of success in this case, due to the simplicity and universal usefulness of the API.</p>
<h4>Next steps</h4>
<p>At the Brno hackfest in April we had an initial discussion with GNOME Shell developers about many of the technical details. There is tentative agreement that we want to move in the direction outlined in this post, but there’s still a lot of work ahead.</p>
<p>On the design side, the biggest uncertainty is the mosaic behavior — it’s a novel approach to window management without much prior art. That’s exciting, but also makes it a bit risky to jump head-first into implementation. We’d like to do user research to validate some of our assumptions on different aspects of this, but it’s the kind of project that’s very difficult to test outside of an actual prototype that’s usable day to day.</p>
<p>If you’d like to get involved with this initiative, one great way to help out would be to work on an extension that implements (parts of) the mosaic behavior for testing and refining the interactions. If you’re interested in this, please reach out :)</p>
<p>There’s no timeline or roadmap at this stage, but it’s definitely 46+ material and likely to take multiple cycles. There are individual parts of this that could be worked on independently ahead of the more contingent pieces, for example tiling groups or new window metadata. Help in any of these areas would be appreciated.</p>
<p><em>This post is summarizing collaborative work over the past years by the entire design team (Allan Day, Jakub Steiner, Sam Hewitt, et al). In particular, thanks to Jakub for the awesome animations bringing the behaviors to life!</em></p>
	</div></div>
  </body>
</html>
