<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/maypok86/otter">Original</a>
    <h1>Otter, Fastest Go in-memory cache based on S3-FIFO algorithm</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><p dir="auto">
  <a target="_blank" rel="noopener noreferrer" href="https://github.com/maypok86/otter/blob/main/assets/logo.png"><img src="https://github.com/maypok86/otter/raw/main/assets/logo.png" width="40%" height="auto"/></a>
  </p><h2 tabindex="-1" dir="auto"><a id="user-content-high-performance-in-memory-cache" aria-hidden="true" tabindex="-1" href="#high-performance-in-memory-cache"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>High performance in-memory cache</h2>

<p dir="auto">
<a target="_blank" rel="noopener noreferrer" href="https://github.com/maypok86/otter/actions/workflows/test.yml/badge.svg"><img src="https://github.com/maypok86/otter/actions/workflows/test.yml/badge.svg"/></a>
<a href="https://codecov.io/gh/maypok86/otter" rel="nofollow">
    <img src="https://camo.githubusercontent.com/5ba1f726f8c8ce647e1986aa33709afb35f989a9e7d8666a4882745c8a032523/68747470733a2f2f636f6465636f762e696f2f67682f6d6179706f6b38362f6f747465722f67726170682f62616467652e7376673f746f6b656e3d4730504a464f52384946" data-canonical-src="https://codecov.io/gh/maypok86/otter/graph/badge.svg?token=G0PJFOR8IF"/>
</a>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/af85b5f8cb5222d92129fa14150c46580b174688cd0452ee2c6494395391fa2e/68747470733a2f2f676f7265706f7274636172642e636f6d2f62616467652f6769746875622e636f6d2f6d6179706f6b38362f6f74746572"><img src="https://camo.githubusercontent.com/af85b5f8cb5222d92129fa14150c46580b174688cd0452ee2c6494395391fa2e/68747470733a2f2f676f7265706f7274636172642e636f6d2f62616467652f6769746875622e636f6d2f6d6179706f6b38362f6f74746572" data-canonical-src="https://goreportcard.com/badge/github.com/maypok86/otter"/></a>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/eadbe9d0653062606371bd21eb03c3c9ce28f7ab08328972bd97cadf59724582/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f6d6179706f6b38362f6f74746572"><img src="https://camo.githubusercontent.com/eadbe9d0653062606371bd21eb03c3c9ce28f7ab08328972bd97cadf59724582/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f6d6179706f6b38362f6f74746572" data-canonical-src="https://img.shields.io/github/license/maypok86/otter"/></a>
<br/>
</p><h2 tabindex="-1" dir="auto"><a id="user-content--contents" aria-hidden="true" tabindex="-1" href="#-contents"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>üìñ Contents</h2>
<ul dir="auto">
<li><a href="#motivation">Motivation</a></li>
<li><a href="#related-works">Related works</a></li>
<li><a href="#features">Features</a></li>
<li><a href="#usage">Usage</a>
<ul dir="auto">
<li><a href="#requirements">Requirements</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#examples">Examples</a></li>
</ul>
</li>
<li><a href="#benchmarks">Benchmarks</a>
<ul dir="auto">
<li><a href="#performance">Performance</a></li>
<li><a href="#hit-ratio">Hit ratio</a></li>
</ul>
</li>
<li><a href="#contribute">Contribute</a></li>
<li><a href="#license">License</a></li>
</ul>
<h2 tabindex="-1" dir="auto"><a id="user-content--motivation-" aria-hidden="true" tabindex="-1" href="#-motivation-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>üí° Motivation <a id="user-content-motivation"></a></h2>
<p dir="auto">I once came across the fact that none of the Golang cache libraries are truly contention-free. All of them are just a standard map with mutex and some eviction policy. Unfortunately, these are not able to reach the speed of caches in other languages (such as <a href="https://github.com/ben-manes/caffeine">Caffeine</a>). For example, the fastest cache from Dgraph labs called <a href="https://github.com/dgraph-io/ristretto">Ristretto</a>, which was faster than competitors by 30% at best (Otter is many times faster) and had a <a href="https://github.com/dgraph-io/ristretto/issues/336" data-hovercard-type="issue" data-hovercard-url="/dgraph-io/ristretto/issues/336/hovercard">disgusting hit ratio</a> even though README says otherwise. This can be a problem in different applications because no one wants to bump the performance of a cache library and its bad hit ratio üôÇ. As a result, I wanted to get the fastest, easiest-to-use cache with excellent hit ratio and support from the authors and Otter is designed to correct this unfortunate misunderstanding.</p>
<p dir="auto"><strong>Please leave a ‚≠ê as motivation if you liked the idea üòÑ</strong></p>
<h2 tabindex="-1" dir="auto"><a id="user-content--related-works-" aria-hidden="true" tabindex="-1" href="#-related-works-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>üóÉ Related works <a id="user-content-related-works"></a></h2>
<p dir="auto">Otter is based on the following papers:</p>
<ul dir="auto">
<li><a href="http://web.cse.ohio-state.edu/hpcs/WWW/HTML/publications/papers/TR-09-1.pdf" rel="nofollow">BP-Wrapper: A Framework Making Any Replacement Algorithms (Almost) Lock Contention Free</a></li>
<li><a href="https://dl.acm.org/doi/10.1145/3600006.3613147" rel="nofollow">FIFO queues are all you need for cache eviction</a></li>
<li><a href="https://dl.acm.org/doi/fullHtml/10.1145/3422575.3422797" rel="nofollow">Bucket-Based Expiration Algorithm: Improving Eviction Efficiency for In-Memory Key-Value Database</a></li>
<li><a href="https://www.usenix.org/system/files/osdi20-yang.pdf" rel="nofollow">A large scale analysis of hundreds of in-memory cache clusters at Twitter</a></li>
</ul>
<h2 tabindex="-1" dir="auto"><a id="user-content--features-" aria-hidden="true" tabindex="-1" href="#-features-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>‚ú® Features <a id="user-content-features"></a></h2>
<p dir="auto">This library has lots of features such as:</p>
<ul dir="auto">
<li><strong>Simple API</strong>: Just set the parameters you want in the builder and enjoy</li>
<li><strong>Autoconfiguration</strong>: Otter is automatically configured based on the parallelism of your application</li>
<li><strong>Generics</strong>: You can safely use any comparable types as keys and any types as values</li>
<li><strong>TTL</strong>: Expired values will be automatically deleted from the cache</li>
<li><strong>Cost-based eviction</strong>: Otter supports eviction based on the cost of each item</li>
<li><strong>Excellent performance</strong>: Otter is currently the fastest cache library with a huge lead over the <a href="#performance">competition</a></li>
<li><strong>Great hit ratio</strong>: New S3-FIFO algorithm is used, which shows excellent <a href="#hit-ratio">results</a></li>
</ul>
<h2 tabindex="-1" dir="auto"><a id="user-content--usage-" aria-hidden="true" tabindex="-1" href="#-usage-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>üìö Usage <a id="user-content-usage"></a></h2>
<h3 tabindex="-1" dir="auto"><a id="user-content--requirements-" aria-hidden="true" tabindex="-1" href="#-requirements-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>üìã Requirements <a id="user-content-requirements"></a></h3>
<ul dir="auto">
<li>Go 1.18+</li>
</ul>
<h3 tabindex="-1" dir="auto"><a id="user-content-Ô∏è-installation-" aria-hidden="true" tabindex="-1" href="#Ô∏è-installation-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>üõ†Ô∏è Installation <a id="user-content-installation"></a></h3>
<div dir="auto" data-snippet-clipboard-copy-content="go get -u github.com/maypok86/otter"><pre>go get -u github.com/maypok86/otter</pre></div>
<h3 tabindex="-1" dir="auto"><a id="user-content-Ô∏è-examples-" aria-hidden="true" tabindex="-1" href="#Ô∏è-examples-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>‚úèÔ∏è Examples <a id="user-content-examples"></a></h3>
<p dir="auto"><strong>Builder</strong></p>
<p dir="auto">Otter uses a builder pattern that allows you to conveniently create a cache object with different parameters</p>
<div dir="auto" data-snippet-clipboard-copy-content="package main

import (
    &#34;github.com/maypok86/otter&#34;
)

func main() {
    // NewBuilder creates a builder and sets the future cache capacity to 1000 elements.
    // Returns an error if capacity &lt;= 0.
    builder, err := otter.NewBuilder[string, string](1000)
    if err != nil {
        panic(err)
    }

    // StatsEnabled determines whether statistics should be calculated when the cache is running.
    // By default, statistics calculating is disabled.
    builder.StatsEnabled(true)

    // Cost sets a function to dynamically calculate the weight of a key-value pair.
    // By default this function always returns 1.
    builder.Cost(func(key string, value string) uint32 {
        return uint32(len(value))
    })

    // Build creates a new cache object or
    // returns an error if invalid parameters were passed to the builder.
    cache, err := builder.Build()
    if err != nil {
        panic(err)
    }

    cache.Close()
}"><pre><span>package</span> main

<span>import</span> (
    <span>&#34;github.com/maypok86/otter&#34;</span>
)

<span>func</span> <span>main</span>() {
    <span>// NewBuilder creates a builder and sets the future cache capacity to 1000 elements.</span>
    <span>// Returns an error if capacity &lt;= 0.</span>
    <span>builder</span>, <span>err</span> <span>:=</span> <span>otter</span>.<span>NewBuilder</span>[<span>string</span>, <span>string</span>](<span>1000</span>)
    <span>if</span> <span>err</span> <span>!=</span> <span>nil</span> {
        <span>panic</span>(<span>err</span>)
    }

    <span>// StatsEnabled determines whether statistics should be calculated when the cache is running.</span>
    <span>// By default, statistics calculating is disabled.</span>
    <span>builder</span>.<span>StatsEnabled</span>(<span>true</span>)

    <span>// Cost sets a function to dynamically calculate the weight of a key-value pair.</span>
    <span>// By default this function always returns 1.</span>
    <span>builder</span>.<span>Cost</span>(<span>func</span>(<span>key</span> <span>string</span>, <span>value</span> <span>string</span>) <span>uint32</span> {
        <span>return</span> <span>uint32</span>(<span>len</span>(<span>value</span>))
    })

    <span>// Build creates a new cache object or</span>
    <span>// returns an error if invalid parameters were passed to the builder.</span>
    <span>cache</span>, <span>err</span> <span>:=</span> <span>builder</span>.<span>Build</span>()
    <span>if</span> <span>err</span> <span>!=</span> <span>nil</span> {
        <span>panic</span>(<span>err</span>)
    }

    <span>cache</span>.<span>Close</span>()
}</pre></div>
<p dir="auto"><strong>Cache</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="package main

import (
    &#34;fmt&#34;
    &#34;time&#34;

    &#34;github.com/maypok86/otter&#34;
)

func main() {
    // create a cache with capacity equal to 10000 elements
    cache, err := otter.MustBuilder[string, string](10_000).Build()
    if err != nil {
        panic(err)
    }

    // set key-value pair with ttl (1 hour) 
    cache.SetWithTTL(&#34;key&#34;, &#34;value&#34;, time.Hour)

    // get value from cache
    value, ok := cache.Get(&#34;key&#34;)
    if !ok {
        panic(&#34;not found key&#34;)
    }
    fmt.Println(value)

    // delete key-value pair from cache
    cache.Delete(&#34;key&#34;)

    // delete data and stop goroutines
    cache.Close()
}"><pre><span>package</span> main

<span>import</span> (
    <span>&#34;fmt&#34;</span>
    <span>&#34;time&#34;</span>

    <span>&#34;github.com/maypok86/otter&#34;</span>
)

<span>func</span> <span>main</span>() {
    <span>// create a cache with capacity equal to 10000 elements</span>
    <span>cache</span>, <span>err</span> <span>:=</span> <span>otter</span>.<span>MustBuilder</span>[<span>string</span>, <span>string</span>](<span>10_000</span>).<span>Build</span>()
    <span>if</span> <span>err</span> <span>!=</span> <span>nil</span> {
        <span>panic</span>(<span>err</span>)
    }

    <span>// set key-value pair with ttl (1 hour) </span>
    <span>cache</span>.<span>SetWithTTL</span>(<span>&#34;key&#34;</span>, <span>&#34;value&#34;</span>, <span>time</span>.<span>Hour</span>)

    <span>// get value from cache</span>
    <span>value</span>, <span>ok</span> <span>:=</span> <span>cache</span>.<span>Get</span>(<span>&#34;key&#34;</span>)
    <span>if</span> <span>!</span><span>ok</span> {
        <span>panic</span>(<span>&#34;not found key&#34;</span>)
    }
    <span>fmt</span>.<span>Println</span>(<span>value</span>)

    <span>// delete key-value pair from cache</span>
    <span>cache</span>.<span>Delete</span>(<span>&#34;key&#34;</span>)

    <span>// delete data and stop goroutines</span>
    <span>cache</span>.<span>Close</span>()
}</pre></div>
<h2 tabindex="-1" dir="auto"><a id="user-content--benchmarks-" aria-hidden="true" tabindex="-1" href="#-benchmarks-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>üìä Benchmarks <a id="user-content-benchmarks"></a></h2>
<p dir="auto">The benchmark code can be found <a href="https://github.com/maypok86/benchmarks">here</a></p>
<h3 tabindex="-1" dir="auto"><a id="user-content--performance-" aria-hidden="true" tabindex="-1" href="#-performance-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>üöÄ Performance <a id="user-content-performance"></a></h3>
<h4 tabindex="-1" dir="auto"><a id="user-content-read-100" aria-hidden="true" tabindex="-1" href="#read-100"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Read (100%)</h4>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/maypok86/otter/blob/main/assets/results/reads=100,writes=0.png"><img width="60%" src="https://github.com/maypok86/otter/raw/main/assets/results/reads=100,writes=0.png" alt="reads=100%,writes=0%"/></a></p>
<h4 tabindex="-1" dir="auto"><a id="user-content-read-75--write-25" aria-hidden="true" tabindex="-1" href="#read-75--write-25"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Read (75%) / Write (25%)</h4>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/maypok86/otter/blob/main/assets/results/reads=75,writes=25.png"><img width="60%" src="https://github.com/maypok86/otter/raw/main/assets/results/reads=75,writes=25.png" alt="reads=75%,writes=25%"/></a></p>
<h4 tabindex="-1" dir="auto"><a id="user-content-write-100" aria-hidden="true" tabindex="-1" href="#write-100"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Write (100%)</h4>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/maypok86/otter/blob/main/assets/results/reads=0,writes=100.png"><img width="60%" src="https://github.com/maypok86/otter/raw/main/assets/results/reads=0,writes=100.png" alt="reads=0%,writes=100%"/></a></p>
<h3 tabindex="-1" dir="auto"><a id="user-content--hit-ratio-" aria-hidden="true" tabindex="-1" href="#-hit-ratio-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>üéØ Hit ratio <a id="user-content-hit-ratio"></a></h3>
<h4 tabindex="-1" dir="auto"><a id="user-content-zipf" aria-hidden="true" tabindex="-1" href="#zipf"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Zipf</h4>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/maypok86/otter/blob/main/assets/results/zipf.png"><img width="60%" src="https://github.com/maypok86/otter/raw/main/assets/results/zipf.png" alt="zipf"/></a></p>
<h4 tabindex="-1" dir="auto"><a id="user-content-s3" aria-hidden="true" tabindex="-1" href="#s3"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>S3</h4>
<p dir="auto">This trace is described as &#34;disk read accesses initiated by a large commercial search engine in response to various web search requests.&#34;</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/maypok86/otter/blob/main/assets/results/s3.png"><img width="60%" src="https://github.com/maypok86/otter/raw/main/assets/results/s3.png" alt="s3"/></a></p>
<h4 tabindex="-1" dir="auto"><a id="user-content-ds1" aria-hidden="true" tabindex="-1" href="#ds1"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>DS1</h4>
<p dir="auto">This trace is described as &#34;a database server running at a commercial site running an ERP application on top of a commercial database.&#34;</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/maypok86/otter/blob/main/assets/results/ds1.png"><img width="60%" src="https://github.com/maypok86/otter/raw/main/assets/results/ds1.png" alt="ds1"/></a></p>
<h4 tabindex="-1" dir="auto"><a id="user-content-p3" aria-hidden="true" tabindex="-1" href="#p3"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>P3</h4>
<p dir="auto">The trace P3 was collected from workstations running Windows NT by using Vtrace
which captures disk operations through the use of device
filters</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/maypok86/otter/blob/main/assets/results/p3.png"><img width="60%" src="https://github.com/maypok86/otter/raw/main/assets/results/p3.png" alt="p3"/></a></p>
<h4 tabindex="-1" dir="auto"><a id="user-content-p8" aria-hidden="true" tabindex="-1" href="#p8"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>P8</h4>
<p dir="auto">The trace P8 was collected from workstations running Windows NT by using Vtrace
which captures disk operations through the use of device
filters</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/maypok86/otter/blob/main/assets/results/p8.png"><img width="60%" src="https://github.com/maypok86/otter/raw/main/assets/results/p8.png" alt="p8"/></a></p>
<h4 tabindex="-1" dir="auto"><a id="user-content-loop" aria-hidden="true" tabindex="-1" href="#loop"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>LOOP</h4>
<p dir="auto">This trace demonstrates a looping access pattern.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/maypok86/otter/blob/main/assets/results/loop.png"><img width="60%" src="https://github.com/maypok86/otter/raw/main/assets/results/loop.png" alt="loop"/></a></p>
<h4 tabindex="-1" dir="auto"><a id="user-content-oltp" aria-hidden="true" tabindex="-1" href="#oltp"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>OLTP</h4>
<p dir="auto">This trace is described as &#34;references to a CODASYL database for a one hour period.&#34;</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/maypok86/otter/blob/main/assets/results/oltp.png"><img width="60%" src="https://github.com/maypok86/otter/raw/main/assets/results/oltp.png" alt="oltp"/></a></p>
<p dir="auto">In summary, we have that S3-FIFO (otter) is inferior to W-TinyLFU (theine) on lfu friendly traces (databases, search, analytics), but has a greater or equal hit ratio on web traces.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content--contribute-" aria-hidden="true" tabindex="-1" href="#-contribute-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>üëè Contribute <a id="user-content-contribute"></a></h2>
<p dir="auto">Contributions are welcome as always, before submitting a new PR please make sure to open a new issue so community members can discuss it.
For more information please see <a href="https://github.com/maypok86/otter/blob/main/CONTRIBUTING.md">contribution guidelines</a>.</p>
<p dir="auto">Additionally, you might find existing open issues which can help with improvements.</p>
<p dir="auto">This project follows a standard <a href="https://github.com/maypok86/otter/blob/main/CODE_OF_CONDUCT.md">code of conduct</a> so that you can understand what actions will and will not be tolerated.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content--license-" aria-hidden="true" tabindex="-1" href="#-license-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>üìÑ License <a id="user-content-license"></a></h2>
<p dir="auto">This project is Apache 2.0 licensed, as found in the <a href="https://github.com/maypok86/otter/blob/main/LICENSE">LICENSE</a>.</p>
</article>
          </div></div>
  </body>
</html>
