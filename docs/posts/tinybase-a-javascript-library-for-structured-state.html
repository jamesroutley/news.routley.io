<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://tinybase.org">Original</a>
    <h1>TinyBase: A JavaScript library for structured state</h1>
    
    <div id="readability-page-1" class="page"><div><article id="home"><img src="https://tinybase.org/favicon.svg"/><section id="hero"><h2 id="a-javascript-library-for-structured-state">A JavaScript library for <em>structuredÂ state</em>.</h2><p>Using plain old JavaScript objects to manage data gets old very quickly. It&#39;s error-prone, tricky to track changes efficiently, and easy to mistakenly incur performance costs.</p><p><em>TinyBase is a smarter way to structure your application state:</em></p><ul><li>Familiar concepts of <a href="#set-and-get-tables-rows-and-cells">tables, rows, and cells</a>, and <a href="#apply-schemas-to-tables">schematization</a> to model your data domain.</li><li><a href="#register-listeners-at-any-granularity">Flexibly reactive</a> to reconciled updates, so you only spend cycles on the data that changes.</li><li><a href="#create-indexes-for-fast-lookups">Indexing</a>, <a href="#define-metrics-and-aggregations">metrics</a>, <a href="#configure-relationships-between-tables">relationships</a> - and even an <a href="#use-checkpoints-for-an-easy-undo-stack">undo stack</a> for your app state! - out of the box.</li><li>Easily <a href="#persist-data-to-browser-file-or-server">sync your data</a> to local or remote storage, and use <a href="#call-react-hooks-to-bind-to-data">idiomatic bindings</a> to your React UI.</li></ul><p><em>Tiny by name, tiny by nature</em>, TinyBase only costs <a href="#did-we-say-tiny">2.6kB - 5.5kB</a> when compressed, and has zero dependencies. And of course it&#39;s <a href="#well-tested-and-documented">well tested</a>, <a href="https://tinybase.org/guides/the-basics/getting-started">fully documented</a>, and <a href="https://github.com/tinyplex/tinybase">open source</a>. Other <a href="https://tinybase.org/guides/faq/">FAQs</a>?</p></section><hr/><p><a id="start" href="https://tinybase.org/guides/the-basics/getting-started">Get started</a></p><p><a href="https://tinybase.org/demos">Try the demos</a></p><p><a href="https://tinybase.org/api/store/interfaces/store/store/">Read the docs</a></p><hr/><section><h2 id="set-and-get-tables-rows-and-cells">Set and get tables, rows, and cells.</h2><p>Creating a <a href="https://tinybase.org/api/store/interfaces/store/store"><code>Store</code></a> requires just a simple call to the <a href="https://tinybase.org/api/store/functions/creation/createstore"><code>createStore</code></a> function. Once you have one, you can easily set <a href="https://tinybase.org/api/store/type-aliases/store/table"><code>Table</code></a>, <a href="https://tinybase.org/api/store/type-aliases/store/row"><code>Row</code></a>, or <a href="https://tinybase.org/api/store/type-aliases/store/cell"><code>Cell</code></a> values by their <a href="https://tinybase.org/api/common/type-aliases/identity/id"><code>Id</code></a>. And of course you can easily get the values back out again.</p><p>Read more about setting and changing data in <a href="https://tinybase.org/guides/the-basics">The Basics</a> guide.</p></section><pre><code><span>const</span> store <span>=</span> <span><a href="https://tinybase.org/api/store/functions/creation/createstore">createStore</a></span><span>(</span><span>)</span>
  <span>.</span><span><a href="https://tinybase.org/api/store/interfaces/store/store/methods/setter/settable">setTable</a></span><span>(</span><span>&#39;pets&#39;</span><span>,</span> <span>{</span><span>fido</span><span>:</span> <span>{</span><span>species</span><span>:</span> <span>&#39;dog&#39;</span><span>}</span><span>}</span><span>)</span>
  <span>.</span><span><a href="https://tinybase.org/api/store/interfaces/store/store/methods/setter/setcell">setCell</a></span><span>(</span><span>&#39;pets&#39;</span><span>,</span> <span>&#39;fido&#39;</span><span>,</span> <span>&#39;color&#39;</span><span>,</span> <span>&#39;brown&#39;</span><span>)</span><span>;</span>

console<span>.</span><span>log</span><span>(</span>store<span>.</span><span><a href="https://tinybase.org/api/store/interfaces/store/store/methods/getter/getrow">getRow</a></span><span>(</span><span>&#39;pets&#39;</span><span>,</span> <span>&#39;fido&#39;</span><span>)</span><span>)</span><span>;</span>

</code></pre><section><h2 id="register-listeners-at-any-granularity">Register listeners at any granularity.</h2><p>The magic starts to happen when you register listeners on a <a href="https://tinybase.org/api/store/interfaces/store/store"><code>Store</code></a>, <a href="https://tinybase.org/api/store/type-aliases/store/table"><code>Table</code></a>, <a href="https://tinybase.org/api/store/type-aliases/store/row"><code>Row</code></a>, or <a href="https://tinybase.org/api/store/type-aliases/store/cell"><code>Cell</code></a>. They get called when any part of that object changes. You can also use wildcards - useful when you don&#39;t know the <a href="https://tinybase.org/api/common/type-aliases/identity/id"><code>Id</code></a> of the objects that might change.</p><p>Read more about listeners in the <a href="https://tinybase.org/guides/the-basics/listening-to-stores">Listening To Stores</a> guide.</p></section><pre><code><span>const</span> listenerId <span>=</span> store<span>.</span><span><a href="https://tinybase.org/api/store/interfaces/store/store/methods/listener/addtablelistener">addTableListener</a></span><span>(</span><span>&#39;pets&#39;</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span>
  console<span>.</span><span>log</span><span>(</span><span>&#39;changed&#39;</span><span>)</span><span>,</span>
<span>)</span><span>;</span>

store<span>.</span><span><a href="https://tinybase.org/api/store/interfaces/store/store/methods/setter/setcell">setCell</a></span><span>(</span><span>&#39;pets&#39;</span><span>,</span> <span>&#39;fido&#39;</span><span>,</span> <span>&#39;sold&#39;</span><span>,</span> <span>false</span><span>)</span><span>;</span>


store<span>.</span><span>delListener</span><span>(</span>listenerId<span>)</span><span>;</span>
</code></pre><section><h2 id="call-react-hooks-to-bind-to-data">Call React hooks to bind to data.</h2><p>If you&#39;re using React in your application, the optional <a href="https://tinybase.org/api/ui-react"><code>ui-react</code></a> module provides hooks to bind to the data in a <a href="https://tinybase.org/api/store/interfaces/store/store"><code>Store</code></a>.</p><p>More magic! The <a href="https://tinybase.org/api/ui-react/functions/store-hooks/usecell"><code>useCell</code></a> hook in this example fetches the dog&#39;s color. But it also registers a listener on that cell that will fire and re-render the component whenever the value changes.</p><p>Basically you simply describe what data you want in your user interface and TinyBase will take care of the whole lifecycle of updating it for you.</p><p>Read more about the using hooks in the <a href="https://tinybase.org/guides/building-uis/using-react-hooks">Using React Hooks</a> guide.</p></section><pre><code><span>const</span> <span>App1</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>{</span>
  <span>const</span> color <span>=</span> <span><a href="https://tinybase.org/api/ui-react/functions/store-hooks/usecell">useCell</a></span><span>(</span><span>&#39;pets&#39;</span><span>,</span> <span>&#39;fido&#39;</span><span>,</span> <span>&#39;color&#39;</span><span>,</span> store<span>)</span><span>;</span>
  <span>return</span> <span><span><span>&lt;</span></span><span>&gt;</span></span><span>Color: </span><span>{</span>color<span>}</span><span><span><span>&lt;/</span></span><span>&gt;</span></span><span>;</span>
<span>}</span><span>;</span>

<span>const</span> app <span>=</span> document<span>.</span><span>createElement</span><span>(</span><span>&#39;div&#39;</span><span>)</span><span>;</span>
ReactDOM<span>.</span><span>render</span><span>(</span><span><span><span>&lt;</span><span>App1</span></span> <span>/&gt;</span></span><span>,</span> app<span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span>app<span>.</span>innerHTML<span>)</span><span>;</span>


store<span>.</span><span><a href="https://tinybase.org/api/store/interfaces/store/store/methods/setter/setcell">setCell</a></span><span>(</span><span>&#39;pets&#39;</span><span>,</span> <span>&#39;fido&#39;</span><span>,</span> <span>&#39;color&#39;</span><span>,</span> <span>&#39;walnut&#39;</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span>app<span>.</span>innerHTML<span>)</span><span>;</span>

</code></pre><section><h2 id="use-components-to-make-reactive-apps">Use components to make reactive apps.</h2><p>The react module provides simple React components with bindings that make it easy to create a fully reactive user interface based on a <a href="https://tinybase.org/api/store/interfaces/store/store"><code>Store</code></a>.</p><p>In this example, the library&#39;s <a href="https://tinybase.org/api/ui-react/functions/store-components/rowview"><code>RowView</code></a> component just needs a reference to the <a href="https://tinybase.org/api/store/interfaces/store/store"><code>Store</code></a>, the <code>tableId</code>, and the <code>rowId</code> in order to render the contents of that row. An optional <code>cellComponent</code> prop lets you override how you want each <a href="https://tinybase.org/api/store/type-aliases/store/cell"><code>Cell</code></a> rendered. Again, all the listeners and updates are taken care of for you.</p><p>The module also includes a context Provider that sets up default for an entire app to use, reducing the need to drill all your props down into your app&#39;s hierarchy.</p><p>Most of the demos showcase the use of these React hooks and components. Take a look at <a href="https://tinybase.org/demos/todo-app/todo-app-v1-the-basics">Todo App v1 (the basics)</a> to see these user interface binding patterns in action.</p><p>Read more about the <a href="https://tinybase.org/api/ui-react"><code>ui-react</code></a> module in the <a href="https://tinybase.org/guides/building-uis">Building UIs</a> guides.</p></section><pre><code><span>const</span> <span>MyCellView</span> <span>=</span> <span>(</span><span>props</span><span>)</span> <span>=&gt;</span> <span>(</span>
  <span><span><span>&lt;</span></span><span>&gt;</span></span><span>
    </span><span>{</span>props<span>.</span>cellId<span>}</span><span>: </span><span><span><span>&lt;</span><span><a href="https://tinybase.org/api/ui-react/functions/store-components/cellview">CellView</a></span></span> <span><span>{</span><span>...</span>props<span>}</span></span> <span>/&gt;</span></span><span>
    </span><span><span><span>&lt;</span>hr</span> <span>/&gt;</span></span><span>
  </span><span><span><span>&lt;/</span></span><span>&gt;</span></span>
<span>)</span><span>;</span>

<span>const</span> <span>App2</span> <span>=</span> <span>(</span><span>)</span> <span>=&gt;</span> <span>(</span>
  <span><span><span>&lt;</span><span><a href="https://tinybase.org/api/ui-react/functions/store-components/rowview">RowView</a></span></span>
    <span>store</span><span><span>=</span><span>{</span>store<span>}</span></span>
    <span>tableId</span><span><span>=</span><span>&#34;</span>pets<span>&#34;</span></span>
    <span>rowId</span><span><span>=</span><span>&#34;</span>fido<span>&#34;</span></span>
    <span>cellComponent</span><span><span>=</span><span>{</span>MyCellView<span>}</span></span>
  <span>/&gt;</span></span>
<span>)</span><span>;</span>

ReactDOM<span>.</span><span>render</span><span>(</span><span><span><span>&lt;</span><span>App2</span></span> <span>/&gt;</span></span><span>,</span> app<span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span>app<span>.</span>innerHTML<span>)</span><span>;</span>


store<span>.</span><span><a href="https://tinybase.org/api/store/interfaces/store/store/methods/setter/setcell">setCell</a></span><span>(</span><span>&#39;pets&#39;</span><span>,</span> <span>&#39;fido&#39;</span><span>,</span> <span>&#39;sold&#39;</span><span>,</span> <span>true</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span>app<span>.</span>innerHTML<span>)</span><span>;</span>


ReactDOM<span>.</span><span>unmountComponentAtNode</span><span>(</span>app<span>)</span><span>;</span>
</code></pre><section><h2 id="apply-schemas-to-tables">Apply schemas to tables.</h2><p>By default, a <a href="https://tinybase.org/api/store/type-aliases/store/row"><code>Row</code></a> can contain any arbitrary <a href="https://tinybase.org/api/store/type-aliases/store/cell"><code>Cell</code></a>. But you can add a schema to a <a href="https://tinybase.org/api/store/interfaces/store/store"><code>Store</code></a> to ensure that the values are always what you expect. For example, you can limit their types, and provide defaults. You can also create mutating listeners that can programmatically enforce a schema.</p><p>In this example, we set a second <a href="https://tinybase.org/api/store/type-aliases/store/row"><code>Row</code></a> without the <code>sold</code> <a href="https://tinybase.org/api/store/type-aliases/store/cell"><code>Cell</code></a> in it. The schema ensures it&#39;s present with default of <code>false</code>.</p><p>Read more about schemas in the <a href="https://tinybase.org/guides/schemas-and-persistence/using-schemas">Using Schemas</a> guide.</p></section><pre><code>store<span>.</span><span><a href="https://tinybase.org/api/store/interfaces/store/store/methods/setter/setschema">setSchema</a></span><span>(</span><span>{</span>
  <span>pets</span><span>:</span> <span>{</span>
    <span>species</span><span>:</span> <span>{</span><span>type</span><span>:</span> <span>&#39;string&#39;</span><span>}</span><span>,</span>
    <span>color</span><span>:</span> <span>{</span><span>type</span><span>:</span> <span>&#39;string&#39;</span><span>}</span><span>,</span>
    <span>sold</span><span>:</span> <span>{</span><span>type</span><span>:</span> <span>&#39;boolean&#39;</span><span>,</span> <span>default</span><span>:</span> <span>false</span><span>}</span><span>,</span>
  <span>}</span><span>,</span>
<span>}</span><span>)</span><span>;</span>

store<span>.</span><span><a href="https://tinybase.org/api/store/interfaces/store/store/methods/setter/setrow">setRow</a></span><span>(</span><span>&#39;pets&#39;</span><span>,</span> <span>&#39;felix&#39;</span><span>,</span> <span>{</span><span>species</span><span>:</span> <span>&#39;cat&#39;</span><span>}</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span>store<span>.</span><span><a href="https://tinybase.org/api/store/interfaces/store/store/methods/getter/getrow">getRow</a></span><span>(</span><span>&#39;pets&#39;</span><span>,</span> <span>&#39;felix&#39;</span><span>)</span><span>)</span><span>;</span>


store<span>.</span><span><a href="https://tinybase.org/api/store/interfaces/store/store/methods/deleter/delschema">delSchema</a></span><span>(</span><span>)</span><span>;</span>
</code></pre><section><h2 id="persist-data-to-browser-file-or-server">Persist data to browser, file, or server.</h2><p>You can easily persist a <a href="https://tinybase.org/api/store/interfaces/store/store"><code>Store</code></a> between browser page reloads or sessions. You can also synchronize it with a web endpoint, or (if you&#39;re using TinyBase in an appropriate environment), load and save it to a file.</p><p>Read more about persisters in the <a href="https://tinybase.org/guides/schemas-and-persistence/persisting-data">Persisting Data</a> guide.</p></section><pre><code><span>const</span> persister <span>=</span> <span><a href="https://tinybase.org/api/persisters/functions/creation/createsessionpersister">createSessionPersister</a></span><span>(</span>store<span>,</span> <span>&#39;demo&#39;</span><span>)</span><span>;</span>
<span>await</span> persister<span>.</span><span><a href="https://tinybase.org/api/persisters/interfaces/persister/persister/methods/save/save">save</a></span><span>(</span><span>)</span><span>;</span>

console<span>.</span><span>log</span><span>(</span>sessionStorage<span>.</span><span>getItem</span><span>(</span><span>&#39;demo&#39;</span><span>)</span><span>)</span><span>;</span>


persister<span>.</span><span>destroy</span><span>(</span><span>)</span><span>;</span>
sessionStorage<span>.</span><span><a href="https://tinybase.org/api/checkpoints/interfaces/checkpoints/checkpoints/methods/lifecycle/clear">clear</a></span><span>(</span><span>)</span><span>;</span>
</code></pre><section><h2 id="define-metrics-and-aggregations">Define metrics and aggregations.</h2><p>A <a href="https://tinybase.org/api/metrics/interfaces/metrics/metrics"><code>Metrics</code></a> object makes it easy to keep a running aggregation of <a href="https://tinybase.org/api/store/type-aliases/store/cell"><code>Cell</code></a> values in each <a href="https://tinybase.org/api/store/type-aliases/store/row"><code>Row</code></a> of a <a href="https://tinybase.org/api/store/type-aliases/store/table"><code>Table</code></a>. This is useful for counting rows, but also supports averages, ranges of values, or arbitrary aggregations.</p><p>In this example, we create a new table of the pet species, and keep a track of which is most expensive. When we add horses to our pet store, the listener detects that the highest price has changed.</p><p>Read more about <a href="https://tinybase.org/api/metrics/interfaces/metrics/metrics"><code>Metrics</code></a> in the <a href="https://tinybase.org/guides/metrics-and-indexes/using-metrics">Using Metrics</a> guide.</p></section><pre><code>store<span>.</span><span><a href="https://tinybase.org/api/store/interfaces/store/store/methods/setter/settable">setTable</a></span><span>(</span><span>&#39;species&#39;</span><span>,</span> <span>{</span>
  <span>dog</span><span>:</span> <span>{</span><span>price</span><span>:</span> <span>5</span><span>}</span><span>,</span>
  <span>cat</span><span>:</span> <span>{</span><span>price</span><span>:</span> <span>4</span><span>}</span><span>,</span>
  <span>worm</span><span>:</span> <span>{</span><span>price</span><span>:</span> <span>1</span><span>}</span><span>,</span>
<span>}</span><span>)</span><span>;</span>

<span>const</span> metrics <span>=</span> <span><a href="https://tinybase.org/api/metrics/functions/creation/createmetrics">createMetrics</a></span><span>(</span>store<span>)</span><span>;</span>
metrics<span>.</span><span><a href="https://tinybase.org/api/metrics/interfaces/metrics/metrics/methods/configuration/setmetricdefinition">setMetricDefinition</a></span><span>(</span>
  <span>&#39;highestPrice&#39;</span><span>,</span> 
  <span>&#39;species&#39;</span><span>,</span> 
  <span>&#39;max&#39;</span><span>,</span> 
  <span>&#39;price&#39;</span><span>,</span> 
<span>)</span><span>;</span>

console<span>.</span><span>log</span><span>(</span>metrics<span>.</span><span><a href="https://tinybase.org/api/metrics/interfaces/metrics/metrics/methods/getter/getmetric">getMetric</a></span><span>(</span><span>&#39;highestPrice&#39;</span><span>)</span><span>)</span><span>;</span>


metrics<span>.</span><span><a href="https://tinybase.org/api/metrics/interfaces/metrics/metrics/methods/listener/addmetriclistener">addMetricListener</a></span><span>(</span><span>&#39;highestPrice&#39;</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span>
  console<span>.</span><span>log</span><span>(</span>metrics<span>.</span><span><a href="https://tinybase.org/api/metrics/interfaces/metrics/metrics/methods/getter/getmetric">getMetric</a></span><span>(</span><span>&#39;highestPrice&#39;</span><span>)</span><span>)</span><span>,</span>
<span>)</span><span>;</span>
store<span>.</span><span><a href="https://tinybase.org/api/store/interfaces/store/store/methods/setter/setcell">setCell</a></span><span>(</span><span>&#39;species&#39;</span><span>,</span> <span>&#39;horse&#39;</span><span>,</span> <span>&#39;price&#39;</span><span>,</span> <span>20</span><span>)</span><span>;</span>


metrics<span>.</span><span>destroy</span><span>(</span><span>)</span><span>;</span>
</code></pre><section><h2 id="create-indexes-for-fast-lookups">Create indexes for fast lookups.</h2><p>An <a href="https://tinybase.org/api/indexes/interfaces/indexes/indexes"><code>Indexes</code></a> object makes it easy to look up all the <a href="https://tinybase.org/api/store/type-aliases/store/row"><code>Row</code></a> objects that have a certain value in a <a href="https://tinybase.org/api/store/type-aliases/store/cell"><code>Cell</code></a>.</p><p>In this example, we create an index on the <code>species</code> <a href="https://tinybase.org/api/store/type-aliases/store/cell"><code>Cell</code></a> values. We can then get the the list of distinct <a href="https://tinybase.org/api/store/type-aliases/store/cell"><code>Cell</code></a> value present for that index (known as &#39;slices&#39;), and the set of <a href="https://tinybase.org/api/store/type-aliases/store/row"><code>Row</code></a> objects that match each value.</p><p><a href="https://tinybase.org/api/indexes/interfaces/indexes/indexes"><code>Indexes</code></a> objects are reactive too. So you can set listeners on them just as you do for the data in the underlying <a href="https://tinybase.org/api/store/interfaces/store/store"><code>Store</code></a>.</p><p>Read more about <a href="https://tinybase.org/api/indexes/interfaces/indexes/indexes"><code>Indexes</code></a> in the <a href="https://tinybase.org/guides/metrics-and-indexes/using-indexes">Using Indexes</a> guide.</p></section><pre><code><span>const</span> indexes <span>=</span> <span><a href="https://tinybase.org/api/indexes/functions/creation/createindexes">createIndexes</a></span><span>(</span>store<span>)</span><span>;</span>
indexes<span>.</span><span><a href="https://tinybase.org/api/indexes/interfaces/indexes/indexes/methods/configuration/setindexdefinition">setIndexDefinition</a></span><span>(</span>
  <span>&#39;bySpecies&#39;</span><span>,</span> 
  <span>&#39;pets&#39;</span><span>,</span> 
  <span>&#39;species&#39;</span><span>,</span> 
<span>)</span><span>;</span>

console<span>.</span><span>log</span><span>(</span>indexes<span>.</span><span><a href="https://tinybase.org/api/indexes/interfaces/indexes/indexes/methods/getter/getsliceids">getSliceIds</a></span><span>(</span><span>&#39;bySpecies&#39;</span><span>)</span><span>)</span><span>;</span>

console<span>.</span><span>log</span><span>(</span>indexes<span>.</span><span><a href="https://tinybase.org/api/indexes/interfaces/indexes/indexes/methods/getter/getslicerowids">getSliceRowIds</a></span><span>(</span><span>&#39;bySpecies&#39;</span><span>,</span> <span>&#39;dog&#39;</span><span>)</span><span>)</span><span>;</span>


indexes<span>.</span><span><a href="https://tinybase.org/api/indexes/interfaces/indexes/indexes/methods/listener/addsliceidslistener">addSliceIdsListener</a></span><span>(</span><span>&#39;bySpecies&#39;</span><span>,</span> <span>(</span><span>)</span> <span>=&gt;</span>
  console<span>.</span><span>log</span><span>(</span>indexes<span>.</span><span><a href="https://tinybase.org/api/indexes/interfaces/indexes/indexes/methods/getter/getsliceids">getSliceIds</a></span><span>(</span><span>&#39;bySpecies&#39;</span><span>)</span><span>)</span><span>,</span>
<span>)</span><span>;</span>
store<span>.</span><span><a href="https://tinybase.org/api/store/interfaces/store/store/methods/setter/setrow">setRow</a></span><span>(</span><span>&#39;pets&#39;</span><span>,</span> <span>&#39;lowly&#39;</span><span>,</span> <span>{</span><span>species</span><span>:</span> <span>&#39;worm&#39;</span><span>}</span><span>)</span><span>;</span>


indexes<span>.</span><span>destroy</span><span>(</span><span>)</span><span>;</span>
</code></pre><section><h2 id="model-relationships-between-tables">Model relationships between tables.</h2><p>A <a href="https://tinybase.org/api/relationships/interfaces/relationships/relationships"><code>Relationships</code></a> object lets you associate a <a href="https://tinybase.org/api/store/type-aliases/store/row"><code>Row</code></a> in a local <a href="https://tinybase.org/api/store/type-aliases/store/table"><code>Table</code></a> with the <a href="https://tinybase.org/api/common/type-aliases/identity/id"><code>Id</code></a> of a <a href="https://tinybase.org/api/store/type-aliases/store/row"><code>Row</code></a> in a remote <a href="https://tinybase.org/api/store/type-aliases/store/table"><code>Table</code></a>. You can also reference a table to itself to create linked lists.</p><p>In this example, the <code>species</code> <a href="https://tinybase.org/api/store/type-aliases/store/cell"><code>Cell</code></a> of the <code>pets</code> <a href="https://tinybase.org/api/store/type-aliases/store/table"><code>Table</code></a> is used to create a relationship to the <code>species</code> <a href="https://tinybase.org/api/store/type-aliases/store/table"><code>Table</code></a>, so that we can access the price of a given pet.</p><p>Like everything else, you can set listeners on <a href="https://tinybase.org/api/relationships/interfaces/relationships/relationships"><code>Relationships</code></a> too.</p><p>Read more about <a href="https://tinybase.org/api/relationships/interfaces/relationships/relationships"><code>Relationships</code></a> in the <a href="https://tinybase.org/guides/relationships-and-checkpoints/using-relationships">Using Relationships</a> guide.</p></section><pre><code><span>const</span> relationships <span>=</span> <span><a href="https://tinybase.org/api/relationships/functions/creation/createrelationships">createRelationships</a></span><span>(</span>store<span>)</span><span>;</span>
relationships<span>.</span><span><a href="https://tinybase.org/api/relationships/interfaces/relationships/relationships/methods/configuration/setrelationshipdefinition">setRelationshipDefinition</a></span><span>(</span>
  <span>&#39;petSpecies&#39;</span><span>,</span> 
  <span>&#39;pets&#39;</span><span>,</span> 
  <span>&#39;species&#39;</span><span>,</span> 
  <span>&#39;species&#39;</span><span>,</span> 
<span>)</span><span>;</span>

console<span>.</span><span>log</span><span>(</span>
  store<span>.</span><span><a href="https://tinybase.org/api/store/interfaces/store/store/methods/getter/getcell">getCell</a></span><span>(</span>
    relationships<span>.</span><span><a href="https://tinybase.org/api/relationships/interfaces/relationships/relationships/methods/getter/getremotetableid">getRemoteTableId</a></span><span>(</span><span>&#39;petSpecies&#39;</span><span>)</span><span>,</span>
    relationships<span>.</span><span><a href="https://tinybase.org/api/relationships/interfaces/relationships/relationships/methods/getter/getremoterowid">getRemoteRowId</a></span><span>(</span><span>&#39;petSpecies&#39;</span><span>,</span> <span>&#39;fido&#39;</span><span>)</span><span>,</span>
    <span>&#39;price&#39;</span><span>,</span>
  <span>)</span><span>,</span>
<span>)</span><span>;</span>


relationships<span>.</span><span>destroy</span><span>(</span><span>)</span><span>;</span>
</code></pre><section><h2 id="set-checkpoints-for-an-undo-stack">Set checkpoints for an undo stack.</h2><p>A <a href="https://tinybase.org/api/checkpoints/interfaces/checkpoints/checkpoints"><code>Checkpoints</code></a> object lets you set checkpoints on a <a href="https://tinybase.org/api/store/interfaces/store/store"><code>Store</code></a>. Move forward and backward through them to create undo and redo functions.</p><p>In this example, we set a checkpoint, then sell one of the pets. Later, the pet is brought back to the shop, and we go back to that checkpoint to revert the store to its previous state.</p><p>Read more about <a href="https://tinybase.org/api/checkpoints/interfaces/checkpoints/checkpoints"><code>Checkpoints</code></a> in the <a href="https://tinybase.org/guides/relationships-and-checkpoints/using-checkpoints">Using Checkpoints</a> guide.</p></section><pre><code><span>const</span> checkpoints <span>=</span> <span><a href="https://tinybase.org/api/checkpoints/functions/creation/createcheckpoints">createCheckpoints</a></span><span>(</span>store<span>)</span><span>;</span>
checkpoints<span>.</span><span><a href="https://tinybase.org/api/checkpoints/interfaces/checkpoints/checkpoints/methods/setter/addcheckpoint">addCheckpoint</a></span><span>(</span><span>&#39;pre-sale&#39;</span><span>)</span><span>;</span>

store<span>.</span><span><a href="https://tinybase.org/api/store/interfaces/store/store/methods/setter/setcell">setCell</a></span><span>(</span><span>&#39;pets&#39;</span><span>,</span> <span>&#39;felix&#39;</span><span>,</span> <span>&#39;sold&#39;</span><span>,</span> <span>true</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span>store<span>.</span><span><a href="https://tinybase.org/api/store/interfaces/store/store/methods/getter/getcell">getCell</a></span><span>(</span><span>&#39;pets&#39;</span><span>,</span> <span>&#39;felix&#39;</span><span>,</span> <span>&#39;sold&#39;</span><span>)</span><span>)</span><span>;</span>


checkpoints<span>.</span><span><a href="https://tinybase.org/api/checkpoints/interfaces/checkpoints/checkpoints/methods/movement/gobackward">goBackward</a></span><span>(</span><span>)</span><span>;</span>
console<span>.</span><span>log</span><span>(</span>store<span>.</span><span><a href="https://tinybase.org/api/store/interfaces/store/store/methods/getter/getcell">getCell</a></span><span>(</span><span>&#39;pets&#39;</span><span>,</span> <span>&#39;felix&#39;</span><span>,</span> <span>&#39;sold&#39;</span><span>)</span><span>)</span><span>;</span>

</code></pre><section><h2 id="did-we-say-tiny">Did we say tiny?</h2><p>If you use the basic <a href="https://tinybase.org/api/store"><code>store</code></a> module alone, you&#39;ll only add a gzipped <em>2.6kB</em> to your app. You can incrementally add the other modules as you need more functionality, or get it all for <em>5.5kB</em>. The <code>ui-react</code> adaptor is just another <em>2.6kB</em>, and everything is fast.</p><p>Life&#39;s easy when you have zero dependencies.</p><p>Read more about how TinyBase is structured in the <a href="https://tinybase.org/guides/how-tinybase-is-built/architecture">Architecture</a> guide.</p></section><section><h2 id="well-tested-and-documented">Well tested and documented.</h2><p>TinyBase has <em>100.0%</em> test coverage, including the code throughout the documentation - even on this page! The guides, demos, and API examples are designed to make it as easy as possible to get up and running.</p><p>Read more about how TinyBase is tested in the Unit <a href="https://tinybase.org/guides/how-tinybase-is-built/testing">Testing</a> guide.</p></section><div><table><tbody><tr><th>Â </th><th>Total</th><th>Tested</th><th>Coverage</th></tr><tr><th>Lines</th><td>933</td><td>933</td><td>100.0%</td></tr><tr><th>Statements</th><td>1,018</td><td>1,018</td><td>100.0%</td></tr><tr><th>Functions</th><td>366</td><td>366</td><td>100.0%</td></tr><tr><th>Branches</th><td>341</td><td>341</td><td>100.0%</td></tr><tr><th>Tests</th><td colspan="3">1,712</td></tr><tr><th>Assertions</th><td colspan="3">7,959</td></tr></tbody></table></div><hr/><p><a id="start" href="https://tinybase.org/guides/the-basics/getting-started">Get started</a></p><p><a href="https://tinybase.org/demos">Try the demos</a></p><p><a href="https://tinybase.org/api/store/interfaces/store/store/">Read the docs</a></p><hr/><section><h2 id="follow">Follow</h2><ul><li>News and updates on <a href="https://twitter.com/tinybasejs">Twitter</a> and <a href="https://facebook.com/tinybasejs">Facebook</a>.</li><li><a href="https://github.com/tinyplex/tinybase/issues">Issues</a> and <a href="https://github.com/tinyplex/tinybase/releases">release notes</a> on <a href="https://github.com/tinyplex/tinybase">GitHub</a></li><li>Packages on <a href="https://www.npmjs.com/package/tinybase/v/1.0.3">NPM</a>.</li></ul></section><section><h2 id="about">About</h2><p>Building TinyBase was an interesting exercise in API design, minification, and documentation. It&#39;s not <a href="https://www.linkedin.com/in/jamespearce">my day job</a>, but I do intend to maintain it, so please provide feedback. I could not have done this without these great <a href="https://tinybase.org/guides/how-tinybase-is-built/credits/#giants">projects</a> and <a href="https://tinybase.org/guides/how-tinybase-is-built/credits/#and-friends">friends</a>, and I hope you enjoy using it!</p></section></article></div></div>
  </body>
</html>
