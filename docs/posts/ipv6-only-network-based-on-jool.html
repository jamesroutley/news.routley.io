<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://taoshu.in/unix/jool-nat64.html">Original</a>
    <h1>IPv6-only Network based on Jool</h1>
    
    <div id="readability-page-1" class="page"><article>
  
  
  <date data-updated="1736157080">2025-01-05</date>
    <span>‚è≥3.8 min(1.5k words)</span>
    <a href="https://taoshu.in/knowledge-graph/#/unix/jool-nat64.html" title="Knowledge Graph" target="_blank">üï∏Ô∏è</a>
    <a id="noad" href="https://taoshu.in/about.html#%E5%85%B3%E4%BA%8E%E5%B9%BF%E5%91%8A"></a>
      <nav id="TOC" role="doc-toc">
  <ul>
  <li><a href="#network-topology" id="toc-network-topology">Network Topology</a></li>
  <li><a href="#jool-vs-tayga" id="toc-jool-vs-tayga">Jool vs TAYGA</a></li>
  <li><a href="#install-jool" id="toc-install-jool">Install Jool</a></li>
  <li><a href="#stateful-nat64" id="toc-stateful-nat64">Stateful-NAT64</a></li>
  <li><a href="#dns64" id="toc-dns64">DNS64</a></li>
  <li><a href="#port-mapping" id="toc-port-mapping">Port Mapping</a></li>
  <li><a href="#persistence" id="toc-persistence">Persistence</a></li>
  </ul>
  </nav>
    <p>In this post, I will share experiences of my experiment of how to setting up the IPv6-only network on Linux using the Jool<a href="#fn1" id="fnref1" role="doc-noteref"><sup>1</sup></a>.</p>
    
    <p>Here is the classical topology of home network. All the hosts can access the Internet through one router. The router has dual stack of v4/v6. And all the LAN hosts have one /64 IPv6 prefix.</p>
    <pre><code>Internet
    |
+---+----+  10.0.0.1/32
| Router |  2001:db8::/64
+---+----+
    |
    +-------+-------------------+
            |2001:db8:1::/64     | 2001:db8:2::/64
      +-----+-----+       +-----+-----+
      |   Host 1  |       |   Host 2  |
      +-----+-----+       +-----+-----+</code></pre>
    <p>There are two problems we need to fix. Firstly, let the LAN hosts access the IPv4 Internet without mutual interference. Secondly, support IPv4-to-IPv6 port mapping so that the IPv4-only host in the Internet can reach the services hosted on the IPv6-only LAN hosts.</p>
    
    <p>The two tasks mentioned above can be both achieved through Jool.</p>
    <p>Besides the Jool, you may find the TAYGA<a href="#fn2" id="fnref2" role="doc-noteref"><sup>2</sup></a>. TAYGA is an out-of-kernel <strong>stateless</strong> NAT64 implementation for Linux that uses the <strong>TUN driver</strong> to exchange IPv4 and IPv6 packets with the kernel.</p>
    <p>TAYGA is not the proper choice because it only support the stateless NAT64, which means you need several public IPv4 addresses to to the IPv4-to-IPv6 mapping. Another drawback of TAYGA is that it uses the TUN devices, which may have performance issue.</p>
    <p>Moreover, the latest release of TAYGA is published on 2011, which means there are more than 15 years without new development.</p>
    <p>On the contrary, the Jool is another Open Source Ipv4/IPv6 Translator with active development. Jool support both stateless and stateful NAT64.</p>
    
    <p>Jool contains two parts, jool-dkms is for kernel modules, and jool-tools for user space tools.</p>
    <p>The Debian/Ubuntu user can install Jool by <code>apt</code></p>
    <div id="cb2"><pre><code><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span>apt</span> install jool-dkms jool-tools</span></code></pre></div>
    <p>The OpenWrt user can install the <code>jool-tools-netfilter</code> package. This will install <code>kmod-jool-netfilter</code> and other dependencies.</p>
    <p>I am using the Arch Linux. So I have to build Jool from source.</p>
    <p>Install the tools used by compiling</p>
    <div id="cb3"><pre><code><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span>pacman</span> <span>-S</span> base-devel linux-headers dkms tar</span></code></pre></div>
    <p>Get the source code</p>
    <div id="cb4"><pre><code><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span>wget</span> https://github.com/NICMx/Jool/releases/download/v4.1.13/jool-4.1.13.tar.gz</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span>tar</span> <span>-xzf</span> jool-4.1.13.tar.gz</span></code></pre></div>
    <p>Compiling the kernel modules</p>
    <div id="cb5"><pre><code><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span>dkms</span> install jool-4.1.13/</span></code></pre></div>
    <p>Compile and install the userspace applications</p>
    <div id="cb6"><pre><code><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span>cd</span> jool-4.1.13/</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span>./configure</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span>make</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span>make</span> install</span></code></pre></div>
    <p>We need to add the <code>/etc/modules-load.d/jool.conf</code> to let Arch Linux load the jool module automatically after booting.</p>
    <div id="cb7"><pre><code><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span>echo</span> jool <span>&gt;</span> /etc/modules-load.d/jool.conf</span></code></pre></div>
    <p>Now we can enable the stateful-nat64.</p>
    
    <p>The NAT64 use the fixed prefix of <code>64:ff9b::/96</code>. All the IPv4 address should be embed into this prefix and be treated as normal IPv6 address in the LAN hosts.</p>
    <p>In the router side, run the following command<a href="#fn3" id="fnref3" role="doc-noteref"><sup>3</sup></a> to create the NAT64 instance named after <code>z64</code>.</p>
    <div id="cb8"><pre><code><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span>jool</span> instance add <span>&#34;z64&#34;</span> <span>--netfilter</span> <span>--pool6</span> 64:ff9b::/96</span></code></pre></div>
    <p>The name of instance is z64. And the IPv6 address pool is <code>64:ff9b::/96</code>. All packet with the destination address of prefix of <code>64:ff9b::/96</code> will be translated into IPv4 packet with the address of default outing NIC. Jool will detect the outgoing network card automatically.</p>
    <p>Then you need to enable the ip forwarding option of kernel.</p>
    <div id="cb9"><pre><code><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span>sysctl</span> <span>-w</span> net.ipv6.conf.all.forwarding=1</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span>sysctl</span> <span>-w</span> net.ipv6.conf.default.forwarding=1</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span>sysctl</span> <span>-w</span> net.ipv4.ip_forward=1</span></code></pre></div>
    <p>and run the below command to load them</p>
    
    <p>Now the router is ready to do the NAT64 translation.</p>
    <p>In your LAN hosts, you can ping 1.1.1.1 with the following commands</p>
    <div id="cb11"><pre><code><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span>ping</span> <span>-c1</span> 64:ff9b::1.1.1.1</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span>PING</span> 64:ff9b::1.1.1.1 <span>(</span><span>64:ff9b::101:101</span><span>)</span> <span>56</span> data bytes</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span>64</span> bytes from 64:ff9b::101:101: icmp_seq=1 ttl=56 time=1.42 ms</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span>---</span> 64:ff9b::1.1.1.1 ping statistics <span>---</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span>1</span> packets transmitted, 1 received, 0% packet loss, time 0ms</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span>rtt</span> min/avg/max/mdev = 1.419/1.419/1.419/0.000 ms</span></code></pre></div>
    <p>The pseudo address of <code>64:ff9b::1.1.1.1</code> has been translated into <code>64:ff9b::101:101</code>. And the ICMP echo package with destination address of <code>64:ff9b::101:101</code> will be convert into 1.1.1.1 by Jool.</p>
    <p>It works like charming.</p>
    
    <p>With the help of Jool, we can ping the pseudo ipv4 address. However, we need to access the IPv4 services by the DNS name. It will be very convenient if the DNS can convert the IPv4 address (A records) into the pseudo IPv6 address. We can use the DNS64 service to do this job.</p>
    <p>If one DNS resolver support DNS64, it will try to query the AAAA records of the domain name. If there is only A records (IPv4 address), the resolver will return the pseudo IPv6 address with the <code>64:ff9b::/96</code> prefix as the AAAA record.</p>
    <p>Both the Public DNS of Google and Cloudflare support the DNS64 service.</p>
    <pre><code># google
2001:4860:4860::64
2001:4860:4860::6464
# cloudflare
2606:4700:4700::64
2606:4700:4700::6400</code></pre>
    <p>I recommend you to put both resolvers into your /etc/resolv.conf file to obtain the high availability.</p>
    <blockquote>
    <span><span>‚õî</span><span>Warning</span></span>
    <p>Do not set the DNS64 resolver into the /etc/resolv.conf of Jool host.</p>
    <p>Because the Jool only hooks itself to PRE_ROUTING. It does not attach itself to LOCAL_OUT. This means it can only translate traffic that inbounds from some interface (physical or otherwise). It does not intercept packets sourced from its own network namespace.</p>
    </blockquote>
    <p>And now you can ping github.com which is IPv4-only until 2024,</p>
    <div id="cb13"><pre><code><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span>ping</span> <span>-c1</span> github.com</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span>PING</span> github.com <span>(</span><span>64:ff9b::8c52:7403</span><span>)</span> <span>56</span> data bytes</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span>64</span> bytes from 64:ff9b::8c52:7403: icmp_seq=1 ttl=52 time=23.6 ms</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span>---</span> github.com ping statistics <span>---</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span>1</span> packets transmitted, 1 received, 0% packet loss, time 0ms</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span>rtt</span> min/avg/max/mdev = 23.624/23.624/23.624/0.000 ms</span></code></pre></div>
    <p>If you only want to let the LAN host access the IPv4 Internet, you can finish here. But if you want to run service on you LAN host and need to let the IPv4 host outside to access your service, you need continue read next section.</p>
    
    <p>Suppose you are running web server on port of 3000 on Host 1. And you need to let the client access your web server via IPv4 network. You have to set the IPv4-to-IPv6 port mapping for your service.</p>
    <p>By Jool, you can use the bib<a href="#fn4" id="fnref4" role="doc-noteref"><sup>4</sup></a> command to do this job:</p>
    <div id="cb14"><pre><code><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span>jool</span> <span>-i</span> z64 bib add 2001:db8::1#3000 10.0.0.1#3000 <span>--tcp</span></span></code></pre></div>
    <p>This will add one port mapping for tcp traffic. All traffic with destination of 10.0.0.1 and port of 3000 will be translated into 2001:db8::1 and port of 3000 and be forwarded to Host 1.</p>
    <p>However, if you try to run the aforementioned command, you will encounter the following error:</p>
    <pre><code>Error: The kernel module returned error 22: Transport address &#39;10.0.0.1#3000&#39;
does not belong to pool4.
Please add it there first.</code></pre>
    <p>As it reads, the port of 10.0.0.1#3000 does not belong to pool4. So what is in the pool4 currently? You can use the pool4 subcommand to check it.</p>
    
    <p>You will see nothing. The pool4 is empty.</p>
    <p>Every IPv6-to-IPv4 translation need the address pool of both v4 and v6. We only setup the pool6 in the previous section. If the pool4 is empty, how could Jool accomplish the traffic translation?</p>
    <p>According the document of pool4<a href="#fn5" id="fnref5" role="doc-noteref"><sup>5</sup></a>, an empty pool4 behaves differently from a populated pool4. Empty pool4 defaults to use ports 61001-65535 of whatever universe-scoped IPv4 addresses the node‚Äôs interfaces have.</p>
    <p>Then Jool is behaving as if pool4 were configured as follows:</p>
    <pre><code>+------------+-------+--------------------+-----------------+-------------+
|       Mark | Proto |     Max iterations |         Address |       Ports |
+------------+-------+--------------------+-----------------+-------------+
|          0 |   TCP |       1024 ( auto) |        10.0.0.1 | 61001-65535 |
+------------+-------+--------------------+-----------------+-------------+
|          0 |   UDP |       1024 ( auto) |        10.0.0.1 | 61001-65535 |
+------------+-------+--------------------+-----------------+-------------+
|          0 |  ICMP |       1024 ( auto) |        10.0.0.1 | 61001-65535 |
+------------+-------+--------------------+-----------------+-------------+</code></pre>
    <p>You can only mapping the port int the range of 61001-655535. Let‚Äôs adjust our bib command:</p>
    <div id="cb18"><pre><code><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span>jool</span> <span>-i</span> z64 bib add 2001:db8:1::#3000 10.0.0.1#63000 <span>--tcp</span></span></code></pre></div>
    <p>Now you can access the web service on Host 1 via the destination 10.0.0.1:63000.</p>
    <blockquote>
    <span><span>‚õî</span><span>Warning</span></span>
    <p>The port range of pool4 should not overlap with the ephemeral port range.</p>
    <p>The default ephemeral port range is 32768-61000, this is why Jool choose the 61001-65535 as it‚Äôs default mapping range.</p>
    </blockquote>
    <p>If you need to support more than 4534 simultaneous connections, you have to adjust the port range of pool4 and the ephemeral port range kernel.</p>
    <div id="cb19"><pre><code><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span>sysctl</span> <span>-w</span> net.ipv4.ip_local_port_range=<span>&#34;32768 40000&#34;</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span>jool</span> pool4 add 10.0.0.1 40001-61000 <span>--tcp</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span>jool</span> pool4 add 10.0.0.1 40001-61000 <span>--udp</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span>jool</span> pool4 add 10.0.0.1 40001-61000 <span>--icmp</span></span></code></pre></div>
    
    <p>All the above configurations will be reset after reboot. If you need toe persist these functions, you need do add some configuration file.</p>
    <p>First, load the jool module automatically.</p>
    <div id="cb20"><pre><code><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span>echo</span> jool <span>&gt;</span> /etc/modules-load.d/jool.conf</span></code></pre></div>
    <p>Then enable the forwarding for both IPv6 and IPv4:</p>
    <div id="cb21"><pre><code><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span>cat</span> <span>&lt;&lt;EOF</span> <span>&gt;</span> /etc/sysctl.d/99-ipv6.conf</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span>net.ipv6.conf.all.forwarding=1</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span>net.ipv6.conf.default.forwarding=1</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span>net.ipv4.ip_forward=1</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span>EOF</span></span></code></pre></div>
    <p>Third, setup the systemd service for Jool.</p>
    <div id="cb22"><pre><code><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span>cat</span> <span>&lt;&lt;EOF</span> <span>&gt;</span> /etc/systemd/system/jool.service</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span>[Unit]</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span>Description=Jool NAT64/SIIT Daemon</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span>After=network-online.target</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span>Wants=network-online.target</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span>[Service]</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span>Type=oneshot</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span>RemainAfterExit=yes</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span>ExecStart=/usr/local/bin/jool file handle /etc/jool/jool.conf</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a><span>[Install]</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span>WantedBy=multi-user.target</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a><span>EOF</span></span></code></pre></div>
    <p>The Type of this unit is oneshot, which means it will be triggered once. In the ExecStart part, we use the <code>jool file handle</code> to load the /etc/jool/jool.conf.</p>
    <div id="cb23"><pre><code><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span>{</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    <span>&#34;instance&#34;</span><span>:</span> <span>&#34;z64&#34;</span><span>,</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span>&#34;framework&#34;</span><span>:</span> <span>&#34;netfilter&#34;</span><span>,</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    <span>&#34;global&#34;</span><span>:</span> <span>{</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>        <span>&#34;pool6&#34;</span><span>:</span> <span>&#34;64:ff9b::/96&#34;</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    <span>},</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    <span>&#34;pool4&#34;</span><span>:</span> <span>[</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>        <span>{</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>            <span>&#34;protocol&#34;</span><span>:</span> <span>&#34;TCP&#34;</span><span>,</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>            <span>&#34;prefix&#34;</span><span>:</span> <span>&#34;10.0.0.1/32&#34;</span><span>,</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>            <span>&#34;port range&#34;</span><span>:</span> <span>&#34;50001-65535&#34;</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>        <span>}</span><span>,</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>        <span>{</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>            <span>&#34;protocol&#34;</span><span>:</span> <span>&#34;UDP&#34;</span><span>,</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>            <span>&#34;prefix&#34;</span><span>:</span> <span>&#34;10.0.0.1/32&#34;</span><span>,</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>            <span>&#34;port range&#34;</span><span>:</span> <span>&#34;50001-65535&#34;</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>        <span>}</span><span>,</span></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>        <span>{</span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>            <span>&#34;protocol&#34;</span><span>:</span> <span>&#34;ICMP&#34;</span><span>,</span></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>            <span>&#34;prefix&#34;</span><span>:</span> <span>&#34;10.0.0.1/32&#34;</span><span>,</span></span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>            <span>&#34;port range&#34;</span><span>:</span> <span>&#34;50001-65535&#34;</span></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>        <span>}</span></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>    <span>]</span><span>,</span></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>    <span>&#34;bib&#34;</span><span>:</span> <span>[</span></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>        <span>{</span></span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>            <span>&#34;protocol&#34;</span><span>:</span> <span>&#34;TCP&#34;</span><span>,</span></span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>            <span>&#34;ipv4 address&#34;</span><span>:</span> <span>&#34;10.0.0.1#53000&#34;</span><span>,</span></span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>            <span>&#34;ipv6 address&#34;</span><span>:</span> <span>&#34;2001:db8:1::#3000&#34;</span></span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a>        <span>}</span></span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a>    <span>]</span></span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a><span>}</span></span></code></pre></div>
    <p>Finally, enable the service unit:</p>
    <div id="cb24"><pre><code><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span>systemctl</span> enable <span>--now</span> jool</span></code></pre></div>
    <p>Then you can reboot the system. And all the NAT64 will work as plan.</p>
    <blockquote>
    <span><span>üí°</span><span>Tip</span></span>
    <p>More details of running IPv6 only network on OpenWRT can be found at <a href="https://ripe87.ripe.net/wp-content/uploads/presentations/8-IPv6-mostly_on_OpenWRT.pdf">https://ripe87.ripe.net/wp-content/uploads/presentations/8-IPv6-mostly_on_OpenWRT.pdf</a></p>
    </blockquote>
    <p>OK, this post will finish here. With Jool, we can setup pure IPv6 network for both outgoing and ingoing traffic. If you have any problem all advice, fell free to leave message to me.</p>
    
  </article></div>
  </body>
</html>
