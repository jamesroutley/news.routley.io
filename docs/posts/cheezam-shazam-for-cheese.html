<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://cheezam.fr/">Original</a>
    <h1>Cheezam â€“ Shazam for Cheese</h1>
    
    <div id="readability-page-1" class="page"><div>
                            <section id="javascript">
                                <pre><code>
var formdata = new FormData();
formdata.append(&#34;img&#34;, fileInput.files[0], &#34;many_cheese_3.jpg&#34;);

var requestOptions = {
    method: &#39;POST&#39;,
    body: formdata,
    redirect: &#39;follow&#39;
};

fetch(&#34;https://cheezam.fr/api/cheezam/prediction&#34;, requestOptions)
    .then(response =&gt; response.text())
    .then(result =&gt; console.log(result))
    .catch(error =&gt; console.log(&#39;error&#39;, error));
                                </code></pre>
                            </section>


                            <section id="node-axios">
                                <pre><code>
var axios = require(&#39;axios&#39;);
var FormData = require(&#39;form-data&#39;);
var fs = require(&#39;fs&#39;);
var data = new FormData();
data.append(&#39;img&#39;, fs.createReadStream(&#39;./many_cheese_3.jpg&#39;));

var config = {
    method: &#39;post&#39;,
    url: &#39;https://cheezam.fr/api/cheezam/prediction&#39;,
    headers: { 
    ...data.getHeaders()
    },
    data : data
};

axios(config)
.then(function (response) {
    console.log(JSON.stringify(response.data));
})
.catch(function (error) {
    console.log(error);
});
                        </code></pre>
                    </section>
             

                            <section id="python">
                                <pre><code>
import requests
url = &#34;https://cheezam.fr/api/cheezam/prediction&#34;
payload={}
files=[
    (&#39;img&#39;,(&#39;many_cheese_3.jpg&#39;,open(&#39;./many_cheese_3.jpg&#39;,&#39;rb&#39;),&#39;image/jpeg&#39;))
]
headers = {}
response = requests.request(&#34;POST&#34;, url, headers=headers, data=payload, files=files)
print(response.text)

                                </code></pre>
                            </section>

                            <section id="curl">
                                <pre><code>
curl --location --request POST &#39;https://cheezam.fr/api/cheezam/prediction&#39; \
--form &#39;img=@&#34;./many_cheese_3.jpg&#34;&#39;
                                </code></pre>
                            </section>

                            <section id="swift">
                                <pre><code>
import Foundation
#if canImport(FoundationNetworking)
import FoundationNetworking
#endif

var semaphore = DispatchSemaphore (value: 0)

let parameters = [
    [
    &#34;key&#34;: &#34;img&#34;,
    &#34;src&#34;: &#34;./many_cheese_3.jpg&#34;,
    &#34;type&#34;: &#34;file&#34;
    ]] as [[String : Any]]

let boundary = &#34;Boundary-\(UUID().uuidString)&#34;
var body = &#34;&#34;
var error: Error? = nil
for param in parameters {
    if param[&#34;disabled&#34;] == nil {
    let paramName = param[&#34;key&#34;]!
    body += &#34;--\(boundary)\r\n&#34;
    body += &#34;Content-Disposition:form-data; name=\&#34;\(paramName)\&#34;&#34;
    if param[&#34;contentType&#34;] != nil {
        body += &#34;\r\nContent-Type: \(param[&#34;contentType&#34;] as! String)&#34;
    }
    let paramType = param[&#34;type&#34;] as! String
    if paramType == &#34;text&#34; {
        let paramValue = param[&#34;value&#34;] as! String
        body += &#34;\r\n\r\n\(paramValue)\r\n&#34;
    } else {
        let paramSrc = param[&#34;src&#34;] as! String
        let fileData = try NSData(contentsOfFile:paramSrc, options:[]) as Data
        let fileContent = String(data: fileData, encoding: .utf8)!
        body += &#34;; filename=\&#34;\(paramSrc)\&#34;\r\n&#34;
        + &#34;Content-Type: \&#34;content-type header\&#34;\r\n\r\n\(fileContent)\r\n&#34;
    }
    }
}
body += &#34;--\(boundary)--\r\n&#34;;
let postData = body.data(using: .utf8)

var request = URLRequest(url: URL(string: &#34;https://cheezam.fr/api/cheezam/prediction&#34;)!,timeoutInterval: Double.infinity)
request.addValue(&#34;multipart/form-data; boundary=\(boundary)&#34;, forHTTPHeaderField: &#34;Content-Type&#34;)

request.httpMethod = &#34;POST&#34;
request.httpBody = postData

let task = URLSession.shared.dataTask(with: request) { data, response, error in 
    guard let data = data else {
    print(String(describing: error))
    semaphore.signal()
    return
    }
    print(String(data: data, encoding: .utf8)!)
    semaphore.signal()
}

task.resume()
semaphore.wait()
                                </code></pre>
                            </section>
                        </div></div>
  </body>
</html>
