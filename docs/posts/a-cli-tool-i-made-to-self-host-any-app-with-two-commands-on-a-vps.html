<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/MightyMoud/sidekick">Original</a>
    <h1>Show HN: A CLI tool I made to self-host any app with two commands on a VPS</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><div dir="auto">
  <p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/d8090e74ca92107b4fedd753fbb0acca5d706d94519efd3895c318d00dc8537b/68747470733a2f2f656d6f6a692e6172616e6a612e636f6d2f7374617469632f656d6f6a692d646174612f696d672d6170706c652d3136302f31663931632d31663366622e706e67"><img width="110px" src="https://camo.githubusercontent.com/d8090e74ca92107b4fedd753fbb0acca5d706d94519efd3895c318d00dc8537b/68747470733a2f2f656d6f6a692e6172616e6a612e636f6d2f7374617469632f656d6f6a692d646174612f696d672d6170706c652d3136302f31663931632d31663366622e706e67" data-canonical-src="https://emoji.aranja.com/static/emoji-data/img-apple-160/1f91c-1f3fb.png"/></a>
    <a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/1ddaacf5c40df0226d02f96a3fed5b0bfacb5f36b13c9b730c9908555ed96854/68747470733a2f2f656d6f6a692e6172616e6a612e636f6d2f7374617469632f656d6f6a692d646174612f696d672d6170706c652d3136302f31663931622d31663366622e706e67"><img width="110px" src="https://camo.githubusercontent.com/1ddaacf5c40df0226d02f96a3fed5b0bfacb5f36b13c9b730c9908555ed96854/68747470733a2f2f656d6f6a692e6172616e6a612e636f6d2f7374617469632f656d6f6a692d646174612f696d672d6170706c652d3136302f31663931622d31663366622e706e67" data-canonical-src="https://emoji.aranja.com/static/emoji-data/img-apple-160/1f91b-1f3fb.png"/></a>
  </p>
<p dir="auto">Bare metal to production ready in mins; imagine fly.io on your VPS</p>
  <p><a target="_blank" rel="noopener noreferrer" href="https://github.com/MightyMoud/sidekick/blob/main/demo/imgs/hero.png"><img width="500px" src="https://github.com/MightyMoud/sidekick/raw/main/demo/imgs/hero.png"/></a>
  </p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/87f8359efd18081619ea010935d720debfc9542a50cdddfcd83735d1fcac5844/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f6d69676874796d6f75642f736964656b69636b"><img src="https://camo.githubusercontent.com/87f8359efd18081619ea010935d720debfc9542a50cdddfcd83735d1fcac5844/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f6d69676874796d6f75642f736964656b69636b" alt="GitHub" data-canonical-src="https://img.shields.io/github/license/mightymoud/sidekick"/></a>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/36eff5114844440c8f3bffa3606482432197529c22fa5286a92ae0c7410862e1/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f676f2d6d6f642f676f2d76657273696f6e2f6d69676874796d6f75642f736964656b69636b"><img src="https://camo.githubusercontent.com/36eff5114844440c8f3bffa3606482432197529c22fa5286a92ae0c7410862e1/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f676f2d6d6f642f676f2d76657273696f6e2f6d69676874796d6f75642f736964656b69636b" alt="GitHub go.mod Go version" data-canonical-src="https://img.shields.io/github/go-mod/go-version/mightymoud/sidekick"/></a>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/e8963bc326d3337b2226323a6e01c069c998a6a512d1d123343cf8fc170483f9/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f762f7461672f6d69676874796d6f75642f736964656b69636b"><img src="https://camo.githubusercontent.com/e8963bc326d3337b2226323a6e01c069c998a6a512d1d123343cf8fc170483f9/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f762f7461672f6d69676874796d6f75642f736964656b69636b" alt="GitHub tag (latest SemVer)" data-canonical-src="https://img.shields.io/github/v/tag/mightymoud/sidekick"/></a></p>
</div>

<ul dir="auto">
<li>üëç One command VPS setup (docker, traefik, sops, age)</li>
<li>üíª deploy any application from a dockerfile</li>
<li>‚úä Zero downtime deployment</li>
<li>üåè High availbility and load balancing</li>
<li>üîí Zero config SSL Certs</li>
<li>‚úÖ Connect domains or use sslip.io out of the box</li>
<li>üî• Built in integration with SOPS</li>
<li>üõ∏ Escape the vendorlock forever</li>
</ul>

<p dir="auto">I&#39;m tired of the complexity involved in hosting my side projects. While some platforms, like Fly.io, stand out in the crowded field of Heroku replacements, I believe a simple VPS can be just as effective. That&#39;s why I created Sidekick: to make hosting side projects as straightforward, affordable, and production-ready as possible. You&#39;ll be surprised how much traffic a $8/month instance on DigitalOcean can handle.</p>

<p dir="auto">With GO installed on your system you need to run</p>
<div dir="auto" data-snippet-clipboard-copy-content="go install github.com/mightymoud/sidekick@latest"><pre>go install github.com/mightymoud/sidekick@latest</pre></div>

<p dir="auto">Sidekick helps you along all the steps of deployment on your VPS. From basic setup to zero downtime deploys, we got you! ‚úä</p>
<p dir="auto">First you need a VPS with Ubuntu LTS. I recommend DigitalOcean. Hetzner also gets very good reviews. You can host your own silicon too. As long as you have a public IP address you can use Sidekick.</p>
<p dir="auto">Just make sure the following is true:</p>
<ul dir="auto">
<li>VPS running Ubuntu - LTS recommended</li>
<li>SSH Public Key availble on your machine to login to VPS.</li>
</ul>
<p dir="auto">That&#39;s it!</p>

  <p><a target="_blank" rel="noopener noreferrer" href="https://github.com/MightyMoud/sidekick/blob/main/demo/imgs/init.png"><img width="500px" src="https://github.com/MightyMoud/sidekick/raw/main/demo/imgs/init.png"/></a>
  </p>
<p dir="auto">First you need to setup your VPS. To do this you need to run:</p>

<p dir="auto">Then you need to enter the following:</p>
<ul dir="auto">
<li>IP Address of your VPS</li>
<li>An email address to use for setting up SSL certs</li>
<li>Docker registery to host your docker images - defaults to <code>docker.io</code></li>
<li>Docker username in the said registery</li>
<li>Confirm you are currently logged in to that said registery with the username - This is needed to be able to push images on your behalf</li>
</ul>
<p dir="auto">After that Sidekick will setup many things on your VPS - Usually takes around 2 mins</p>
<details>
  <summary>What does Sidekick do when I run this command</summary>
<ul dir="auto">
<li>Login with <code>root</code> user</li>
<li>Make a new user <code>sidekick</code> and grant sudo access</li>
<li>Logout from <code>root</code> and login with <code>sidekick</code></li>
<li>Update and upgrade your Ubuntu system</li>
<li>Install <code>sops</code> and copy over the public key to your sidekick config file</li>
<li>Use <code>age</code> to make secret and public keys to use later for encrypting env file.</li>
<li>Send public key back to host machine to be used later for encryption</li>
<li>Install Docker</li>
<li>Setup Traefik and SSL certs on your VPS</li>
</ul>
</details>

  <p><a target="_blank" rel="noopener noreferrer" href="https://github.com/MightyMoud/sidekick/blob/main/demo/imgs/launch.png"><img width="500px" src="https://github.com/MightyMoud/sidekick/raw/main/demo/imgs/launch.png"/></a>
  </p>
<p dir="auto">In your application folder, make sure you have a working <code>Dockerfile</code> that you can build and run. Also make sure you know at which port your app is expecting to recieve traffic.</p>
<p dir="auto">Then run:</p>

<p dir="auto">Then you need to enter the following:</p>
<ul dir="auto">
<li>Url friendly name of your app - if you opt to use <code>sslip.io</code> domain for testing this would be your subdomain</li>
<li>HTTP exposed port for your app to get requests - Sidekick will scan your docker file to try to extract this number and default it.</li>
<li>Domain at which you want this application to be reachable - If you choose your own domain make sure to point the domain to your VPS IP address; otherwise we default to <code>sslip.io</code> domain so you can play around.</li>
<li>If you have any <code>env</code> file with secrets in it. Sidekick will attempt to find <code>.env</code> file in the root of your folder. Sidekick will use <code>sops</code> to encrypt your env file and inject the values securely at run time.</li>
</ul>
<p dir="auto">Should take around 2 more mins to be able to visit your application live on the web if all goes well.</p>
<details>
  <summary>What does Sidekick do when I run this command</summary>
<ul dir="auto">
<li>Build your docker image locally for linux</li>
<li>Push the docker image to the registery</li>
<li>Encrpt your env file, if available and push it to your VPS</li>
<li>Use sops to dycrpt your env file and start and env with the values injected</li>
<li>Spin up your docker image using docker compose and route traffic to it using Traefik on the specified port</li>
</ul>
</details>

  <p><a target="_blank" rel="noopener noreferrer" href="https://github.com/MightyMoud/sidekick/blob/main/demo/imgs/deploy.png"><img width="500px" src="https://github.com/MightyMoud/sidekick/raw/main/demo/imgs/deploy.png"/></a>
  </p>
With your application deployed, it&#39;s super simple to redeploy a new version.
<p dir="auto">At any point any time you need to only run:</p>

<p dir="auto">That&#39;s all. It won&#39;t take long, we use cache from earlier docker images, your latest version should be up soon.
Sidekick will deploy the new version without any downtime - you can see more in the source code.
This command will also do a couple of things behind the scenes. You can check that below</p>
<details>
  <summary>What does Sidekick do when I run this command</summary>
<ul dir="auto">
<li>Build your docker image locally for linux</li>
<li>Compare your latest env file checksum for changes from last time you deployed your application.</li>
<li>If your env file has changed, sidekick will re encrypt it and replace the encrypte.env file on your server.</li>
<li>Deploy the new version with zero downtime deploys so you don&#39;t miss any traffic.</li>
</ul>
</details>
<div dir="auto"><h3 tabindex="-1" dir="auto">Deploy a preview environment</h3><a id="user-content-deploy-a-preview-environment" aria-label="Permalink: Deploy a preview environment" href="#deploy-a-preview-environment"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
  <p><a target="_blank" rel="noopener noreferrer" href="https://github.com/MightyMoud/sidekick/blob/main/demo/imgs/preview.png"><img width="500px" src="https://github.com/MightyMoud/sidekick/raw/main/demo/imgs/preview.png"/></a>
  </p>
Sidekick also allows you to deploy preview envs at any point from your application. Preview envs are attached to your commit hash and require a clean git tree before you can initiate them. 
Once you have a clean git tree, you can run the following command to deploy a preview environment:

<details>
  <summary>What does Sidekick do when I run this command</summary>
<ul dir="auto">
<li>Build your docker image locally for linux</li>
<li>Tag the new image with the short checksum of your git commit</li>
<li>Compare your latest env file checksum for changes from last time you deployed your application.</li>
<li>If your env file has changed, sidekick will re encrypt it and replace the encrypte.env file on your server.</li>
<li>Add a new folder inside your app folder called &#34;preview&#34; where Sidekick will store and manage all your preview deployments</li>
<li>Deploy a new version of your app reachable on a short hash based subdomain</li>
</ul>
</details>

<ul dir="auto">
<li><a href="https://fly.io/" rel="nofollow">https://fly.io/</a></li>
<li><a href="https://kamal-deploy.org/" rel="nofollow">https://kamal-deploy.org/</a></li>
</ul>

<p dir="auto">Simple CLI tool that can help you:</p>
<ul dir="auto">
<li>Setup your VPS</li>
<li>Deploy all your side projects on a single VPS</li>
<li>Load balance multiple container per project</li>
<li>Deploy new versions with Zero downtime</li>
<li>Deploy preview environments with ease</li>
<li>Manage env secrets in a secure way</li>
<li>Connect any number of domains and subdomains to your projects with ease</li>
</ul>

<p dir="auto">You can easily remove sidekick if you hate it.</p>
<div dir="auto" data-snippet-clipboard-copy-content="// Mac/Linux
cd $HOME/go/bin
rm sidekick
cd ~/.config
rm -rf sidekick

// Win
cd %USERPROFILE%\go\bin
del sidekick.exe

// Powershell
cd $HOME\go\bin
Remove-Item sidekick.exe"><pre>// Mac/Linux
<span>cd</span> <span>$HOME</span>/go/bin
rm sidekick
<span>cd</span> <span>~</span>/.config
rm -rf sidekick

// Win
<span>cd</span> %USERPROFILE%<span>\g</span>o<span>\b</span>in
del sidekick.exe

// Powershell
<span>cd</span> <span>$HOME</span><span>\g</span>o<span>\b</span>in
Remove-Item sidekick.exe</pre></div>
<hr/>

<p dir="auto">I still have a couple more feature I want to add here. Also considering some of those to be on a paid version.</p>
<ul dir="auto">
<li>Preview env deployments</li>
<li>A way to deploy more complicated projects defined in docker compose file</li>
<li>Better zero downtime deploys with watchtower</li>
<li>Firewall setup</li>
<li>Managing multiple VPSs</li>
<li>Easy way to deploy databases with one command</li>
<li>TUI for monitoring your VPS</li>
<li>Streaming down compose logs - ala <code>fly logs</code></li>
<li>Auto deploy on image push - to work with CICD better</li>
</ul>
</article></div></div>
  </body>
</html>
