<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://jbkempf.com/blog/2024/ffmpeg-7.1.0/">Original</a>
    <h1>FFmpeg 7.1 release: a tons of codecs</h1>
    
    <div id="readability-page-1" class="page"><article>
          <div>
            
<p><strong>FFmpeg 7.1</strong> has been <a href="https://git.ffmpeg.org/gitweb/ffmpeg.git/tag/refs/tags/n7.1">released today</a>: a major release with numerous features that nevertheless maintains API compatibility with 7.0.</p>
<p>Knowing that <strong>FFmpeg 7.1</strong> is a LTS release, this is a major feat, in addition to the already very strong FFmpeg <strong>7.0</strong> release.</p>
<h2 id="vvc-decoder">VVC decoder</h2>
<p>We decided, a couple of years ago, to do our own <a href="https://en.wikipedia.org/wiki/Versatile_Video_Coding">VVC</a> decoder, instead of using the official <em>vvcdec</em> decoder.</p>
<p>The VVC decoder was a large project, notably done by <a href="https://summerofcode.withgoogle.com/">Google Summer of Code</a> students last year, and the main decoder landed in FFmpeg 7.0, but it was not complete, and was therefore marked as <em>experimental</em>.</p>
<p>This decoder shares some code with the H.264 and the HEVC decoders, which means that some assembly optimizations are shared or that most SEI parsing is shared <em>(for example, the H.274 Film Grain should work with VVC)</em>.</p>
<p>Finally, the VVC decoder is already fast on ARM and on x86, with new optimizations written, and the reuse of the optimizations from the previous decoders!</p>
<h3 id="more-vvc">More VVC</h3>
<p>In addition to the decoder, the <strong>vvcenc</strong> encoder is now available in FFmpeg, through the external library, so you should be able to encode directly in VVC in FFmpeg.</p>
<p>Finally, the <em>Intel</em> folks have added VVC hardware decoding through <strong>QSV</strong>.</p>
<h2 id="lc-evc-mv-hevc">LC-EVC, MV-HEVC</h2>
<p>On the MPEG side, two new codecs were added to the codebase: <strong>MV-HEVC</strong> and <strong>LC-EVC</strong>.</p>
<p>MV-HEVC is the 3D version of HEVC, that is used in recent iPhones and in the Apple Vision Pro.</p>
<p>Please note that <em>x265</em> should be able to encode in MV-HEVC now!</p>
<p>Very different from MV-HEVC, the <a href="https://en.wikipedia.org/wiki/LCEVC">LC-EVC</a> decoder was also added to this release too.</p>
<p>Adding this codec was quite complex for FFmpeg architecture, because we don’t have many enhancement codecs, and this made us leverage the Stream Groups concept that we’ve added also for IAMF. I expect that we see more of those type of codecs, in the future.</p>
<p>The <strong>LC-EVC</strong> decoder is now in FFmpeg, and it depends on an open-source external library, that is BSD-licensed!</p>
<p>Thanks <em>James</em> and <em>Anton</em> for those 2 decoders!</p>
<h2 id="xhe-aac-iamf">xHE-AAC, IAMF</h2>
<p><em>Lynne</em> spent a large part of her past year to work on a native <strong>xHE-AAC</strong> decoder.</p>
<p>Again, this required large preparatory work to prepare this new decoder. A lot of refactoring of the AAC decoder was necessary to support USAC and other features that got us this new xHE-AAC decoder.</p>
<p>As we’ve not seen many xHE-AAC streams in the wild, we’re not 100% sure of the compliance, but we’re sure it will improve when more samples are available.</p>
<p>On the other side of the spectrum, the <a href="https://aomedia.org/">AOM</a> <strong>IAMF</strong> decoder/demuxer, introduced in 7.0 got a lot of fixes and testing, so I’m now quite sure that the <strong>IAMF</strong> decoder is now production ready!</p>
<p>To finish on the audio side of things, support for <strong><a href="https://github.com/google/liblc3">LC3</a></strong>, the Low Complexity codec from Google, was also wired through the official external library.</p>
<h2 id="vulkan-hardware-encoding-and-other-hardware-news">Vulkan hardware encoding and other hardware news</h2>
<p>On of the other major feature of <strong>7.1</strong> done by <em>Lynne</em> is the support of encoding through <strong>Vulkan</strong>.</p>
<p>FFmpeg now supports H.264 and HEVC encoding through Vulkan. AV1 will come soon, I hope. <em>(Vulkan decoding was done in 6.1)</em></p>
<p>We also now have a <strong>D3D12 encoding</strong> for HEVC, after we added D3D12 decoder <em>(Decoding of H.264, HEVC, AV1 and others were added in 7.0)</em>.</p>
<h3 id="misc">Misc</h3>
<p>I would also like to mention, as the maintainer of <a href="https://www.videolan.org/developers/libdvdnav.html">libdvdread</a>, that <strong>DVD</strong> seeking was added to FFmpeg <strong>7.1</strong>, which makes the DVD playback complete.</p>
<p>And finally, the <strong>YUVJ</strong> pixel format is officially deprecated!</p>
<p>And like with <strong>dav1d</strong>, a large number of optimizations for <strong>ARM64</strong> and <strong>RISC-V</strong> were added to accelerate FFmpeg decoding on non-x86 platforms. Your mobiles will love it :)</p>
<h2 id="final-words-and-lts">Final words and LTS</h2>
<p>This is a very strong release, with a lot of important features and continuing the work that was started for <strong>7.0</strong>, which was a huge release because of the multi-threading development.</p>
<p>This release is more than 2700 commits, and the diff is around 211kLoC!</p>
<p>As for me, I consider FFmpeg 7.1 an LTS release, like the 5.1 release, so it’s a good release to bet on!</p>
<p><strong>I hope you Enjoy this release!</strong></p>

          </div>
        </article></div>
  </body>
</html>
