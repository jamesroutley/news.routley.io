<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://klimer.eu/2015/05/01/use-midnight-commander-like-a-pro/">Original</a>
    <h1>Use Midnight Commander like a pro (2015)</h1>
    
    <div id="readability-page-1" class="page"><div id="content-wrapper">
		<div id="content">

	<div id="primary">
		<main id="main" role="main">

		
			
<article id="post-37">
			<!-- .entry-header -->		<div>
			<p>
							<span>
					<a href="https://klimer.eu/category/linux/" rel="category tag">Linux</a>				</span></p><!-- .cat-links -->
			
			
			<p><span>
				<time datetime="2015-05-01T17:11:00+00:00">May 1, 2015</time><time datetime="2021-01-01T17:12:59+00:00">January 1, 2021</time>			</span>

			<span>6 Minutes</span>		</p></div><!-- .entry-meta -->
	
	<div>
		
<p>If you’ve used an <code>*nix</code> system, at some point you’ve stumbled upon <a href="http://www.midnight-commander.org/">Midnight Commander</a>, a file manager based on the venerable Norton Commander. You’re probably familiar with the basic operations (<code>F5</code> for copying, <code>F6</code> for moving, <code>F8</code> for deleting, etc.) and how to switch panels (ummm, the <code>Tab</code> key). But <code>mc</code> offers so much more than that. This article aims to show all the useful (YMMV) shortcuts and functionalities that are often overlooked. Most of them can be accessed using the menu (<code>F9</code>), but who has the time to do that?</p>



<p>Before we get started, let’s establish some facts. This article was written and tested on the following software:</p>



<ul><li>Midnight Commander 4.8.13</li><li>GNU bash 4.2.53</li></ul>



<p>Oh, and make sure you’re running a modern and UTF-8 friendly terminal – for example, rxvt-unicode.</p>







<p>There’s actually one thing I’d recommend doing before you run <code>mc</code>. <code>mc</code> has the ability to exit to its current directory. Meaning, you can navigate the filesystem using <code>mc</code> (sometimes it’s easier than <code>cd</code>ing into that one directory buried deep down <em>somewhere</em>) and when you quit <code>mc</code> (<code>F10</code>), your shell will automagically <code>cd</code> to that directory. This is done thanks to the <code>mc-wrapper</code> script that should be bundled with your installation of <code>mc</code>. The exact location is dependent on your distribution – in mine (Gentoo) it’s <code>/usr/libexec/mc/</code>, in Ubuntu supposedly it’s in <code>/usr/share/mc/bin/</code>. Once found, modify your <code>~/.bashrc</code>:</p>


<div><pre title="">alias mc=&#39;. /usr/libexec/mc/mc-wrapper.sh&#39;

</pre></div>


<p>Restart your shell, launch <code>mc</code>, change to another directory, exit and your shell should be set to that new directory.</p>







<ul><li><code>Insert</code> (<code>Ctrl + t</code> alternatively) – select files (for example, for copying, moving or deleting).</li><li><code>+</code> – select files based on a pattern.</li><li><code>\</code> –<em>un</em>select files based on a pattern.</li><li><code>*</code> – reverse selection. If nothing was selected, all files will get selected.</li></ul>







<ul><li>There’s a shell awaiting your command at the bottom of the screen – just start typing (when no other command dialog is open, of course).</li><li>Since <code>Tab</code> is bound to switching panels (or moving the focus in dialogs), you have to use <code>Esc Tab</code> to use autocompletion. Hit it twice to get all the possible completions (just like in a shell). This works in dialogs too.</li><li>If you want inspect the output of the command, do some input or just prefer a bigger console, no need to quit <code>mc</code>. Just hit <code>Ctrl + o</code> – the effect will be similar to putting <code>mc</code> in the background but with a nice perk. Your current working directory from <code>mc</code> will be passed on to the shell… and vice versa! Hit <code>Ctrl + o</code> again to return to <code>mc</code>.</li><li><code>Ctrl + Enter</code> or <code>Alt + Enter</code> – copy the currently selected file’s name to the shell.</li><li><code>Ctrl + Shift + Enter</code> – same as above, but the full path is copied.</li></ul>







<ul><li>The internal viewer has many built in modes for “previewing” the content of the file. Try “viewing” a binary, an archive, a DOC document or an image. In some cases, external programs are needed in order for this “previewing” to work.</li><li>If you want to preview the “raw” contents of the file, hit <code>Shift + F3</code>.</li><li>While the internal viewer and editor are powerful, sometimes you want to use your preferred software (<em>cough</em>vim<em>cough</em>). You can do so by setting the <code>PAGER</code> (for viewer) and <code>EDITOR</code> (for editor) variables (for example, in your <code>~/.bashrc</code> file). Then toggle the <code>Options -&gt; Configuration -&gt; Use interal edit/view</code> option (access the top menu by pressing <code>F9</code>).</li></ul>







<ul><li><code>Alt + ,</code> – switch <code>mc</code>’s layout from left-right to top-bottom. Mind = blown. Useful for operating on files with long names.</li><li><code>Alt + t</code> – switch the panel’s listing mode in a loop: default, brief, long, user-defined. “long” is especially useful, because it maximises one panel so that it takes full width of the window and longer filenames fit on screen.</li><li><code>Alt + i</code> – synchronize the active panel with the other panel. That is, show the current directory in the other panel.</li><li><code>Ctrl + u</code> – swap panels.</li><li><code>Alt + o</code> – if the currently selected file is a directory, load that directory on the other panel and move the selection to the next file. If the currently selected file is not a directory, load the parent directory on the other panel and moves the selection to the next file. This is useful for quick checking the contents of a list of directories.</li><li><code>Ctrl + PgUp</code> (or just left arrow, if you’ve enabled <code>Lynx-like motion</code>, see later) – move to the parent directory.</li><li><code>Alt + Shift + h</code> – show the directory history. Might be easier to navigate than going back one entry at a time.</li><li><code>Alt + y</code> – move to the previous directory in history.</li><li><code>Alt + u</code> – move to the next directory in history.</li></ul>







<ul><li><code>Alt + ?</code> – shows the full Find dialog.</li><li><code>Alt + s</code> or <code>Ctrl + s</code> – quick search mode. Start typing and the selection will move to the first matching file. Press the shortcut again to jump to another match. Use wildcards (<code>*</code>, <code>?</code>) for easier matching.</li></ul>







<ul><li><code>Ctrl + Space</code> – calculate the size of the selected directories. Press this shortcut when the selection is on <code>..</code> to calculate the size of all the directories in the current directory.</li><li><code>Ctrl + x s</code> (that is press <code>Ctrl + x</code>, <a href="https://www.youtube.com/watch?v=L0MK7qz13bU">let it go</a> and then press <code>s</code>) – create a symbolic link (change <code>s</code> to <code>l</code> for a hardlink). I find it very useful and intuitive – the link will, of course, be created in the other panel. You can change it’s destination and name, like with any other file operation.</li><li><code>Ctrl + x c</code> – open the <code>chmod</code> dialog.</li><li><code>Ctrl + x o</code> – open the <code>chown</code> dialog.</li></ul>







<p><code>mc</code> has a concept known as Virtual File System. Try “entering” an archive (<code>*.tar.gz</code>, <code>*.rpm</code> or even <code>*.jar</code>) – you’ll be able to browse the contents of the archive like a normal folder, without unpacking it first. You extract selected files from the archive by just copying them to the other panel. Bonus points: try “entering” a… <code>*.patch</code> file.</p>



<p>This concept is even more powerful when you realize that remote locations can be viewed the same way. A quick way to browse an FTP location is to just <code>cd</code> to it: <code>cd ftp://mirrors.tera-byte.com/pub/gentoo</code> (first Gentoo FTP mirror I found). You’ll be able to interact with files as you normally do. To exit this remote location, <code>cd</code> to a local directory. Just typing <code>cd</code> will suffice as it will take you to your home directory.</p>



<p>VFS works for SFTP and Samba shares too. Check the manpages for more information on how to specify user/pass, etc.</p>







<ul><li><strong>Configuration</strong><ul><li><code>Verbose operation</code> and <code>Compute totals</code> – so that operations like copy/move have a more detailed progress dialogs.</li></ul></li><li><strong>Layout</strong><ul><li><code>Equal split</code> – uncheck to define your own ratio for panels. Maybe you prefer one panel bigger than the other? Useful especially if you keep one of the panels in tree mode (or maybe info/quick view, too).</li><li>Uncheck <code>Hintbar visible</code> – one more line available, one less line of noise.</li></ul></li><li><strong>Panel options</strong><ul><li><code>Show backup files</code> and <code>Show hidden files</code> – I keep both enabled, as I often work with configuration files, etc.</li><li><code>Lynx-like motion</code> – mentioned above, makes left arrow go to parent directory, while the right arrow enters the directory under selection. Faster than <code>Home</code>, <code>Enter</code>, <code>Home</code>, <code>Enter</code>, etc. This options is quite smart, that is if the shell command line is not empty, the arrows work as usual and allow moving the cursor in the command line.</li><li><code>File highlight</code> -&gt; <code>File types</code> is useful, as it uses a different color for example for executable files. <code>Permissions</code>, for me, is not that useful, but I can definitely see it’s use, for example, for sysadmins.</li></ul></li><li><strong>Appearance</strong><ul><li>Only one option here, <code>Skins</code>. You can check out different skins shipped with <code>mc</code> – just select one from the list. I prefer <code>gotar</code>, because it plays well with my <a href="http://ethanschoonover.com/solarized">solarized</a> terminal colors.</li><li>Useful tip – set up a different skin when logged in as the <code>root</code> user. It’ll be easier to differentiate between root’s and normal user’s session, when you’re swapping between them (as is often the case).</li></ul></li></ul>







<ul><li>Define your own listing mode (<code>Right/Left</code> -&gt; <code>Listing mode...</code> -&gt; <code>User defined</code>). Hit <code>F1</code> to see available columns and options.</li><li>Play around in tree mode: <code>Right/Left</code> -&gt; <code>Tree</code> or <code>Command</code> -&gt; <code>Directory tree</code>.</li><li>Compare directories (<code>Ctrl + x d</code>)</li><li>Fill up the directory hotlist (<code>Ctrl + \</code>)</li></ul>



<p>Well, that was a lot to take in. Of course, this list is not complete (that’s what <code>man mc</code> is there for), but I’ve selected the commands and functionalities that are the most useful to <em>me</em>. Embrace the ones you find useful, forget the rest and learn about the other ones I’ve missed!</p>



<p>Happy browsing!</p>
	</div><!-- .entry-content -->

	<!-- .entry-footer -->

	<div>
				<p><strong>Published</strong>
			<time datetime="2015-05-01T17:11:00+00:00">May 1, 2015</time><time datetime="2021-01-01T17:12:59+00:00">January 1, 2021</time>		</p><!-- .site-posted-on -->
	</div>
</article><!-- #post-## -->

			
	<nav aria-label="Posts">
		<h2>Post navigation</h2>
		
	</nav>
			
<!-- #comments -->

		
		</main><!-- #main -->
	</div><!-- #primary -->

		</div><!-- #content -->

		<!-- #colophon -->
	</div></div>
  </body>
</html>
