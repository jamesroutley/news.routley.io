<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://mullvad.net/en/blog/announcing-gotatun-the-future-of-wireguard-at-mullvad-vpn">Original</a>
    <h1>GotaTun -- Mullvad&#39;s WireGuard Implementation in Rust</h1>
    
    <div id="readability-page-1" class="page"><div><!----><p><a href="https://github.com/mullvad/gotatun" rel="nofollow">GotaTun</a> is a WireGuard® implementation written in Rust aimed at being fast, efficient and reliable.</p>
<p>GotaTun is a fork of the <a href="https://github.com/cloudflare/boringtun" rel="nofollow">BoringTun</a> project from Cloudflare. This is not a new protocol or connection method, just WireGuard® written in <a href="https://rust-lang.org/" rel="nofollow">Rust</a>. The name GotaTun is a combination of the original project, BoringTun, and <a href="https://wikipedia.org/wiki/G%C3%B6tatunneln" rel="nofollow">Götatunneln</a>, a physical tunnel located in Gothenburg. We have integrated privacy enhancing features like <a href="https://blog.veitheller.de/vpn/daita">DAITA</a> &amp; <a href="https://blog.veitheller.de/help/multihop-wireguard">Multihop</a>, added first-class support for Android and used Rust to achieve great performance by using safe multi-threading and <a href="https://wikipedia.org/wiki/Zero-copy" rel="nofollow">zero-copy</a> memory strategies.</p>
<p>Last month we rolled it out to all our Android users, and we aim to ship it to the remaining platforms next year.</p>
<h2>Why GotaTun?</h2>
<p>Our mobile apps have relied on wireguard-go for several years, a cross-platform userspace implementation of WireGuard® in Go. wireguard-go has been the de-facto userspace implementation of WireGuard® to this date, and many VPN providers besides Mullvad use it. Since mid-2024 we have been maintaining a fork of </p>
<p>For Android apps distributed via the Google Play Store, Google collects crash reports and makes them available to developers. In the developer console we have seen that more than 85% of all crashes reported have stemmed from the wireguard-go. We have managed to solve some of the obscure issues over the years (<a href="https://github.com/mullvad/mullvadvpn-app/pull/6727" rel="nofollow">#6727</a> and <a href="https://github.com/mullvad/mullvadvpn-app/pull/7728" rel="nofollow">#7728</a> to name two examples), but many still remain. For these reasons we chose Android as the first platform to release GotaTun on, allowing us to see the impact right away.</p>
<p>Another challenge we have faced is interoperating Rust and Go. Currently, most of the service components of the Mullvad VPN app are written in Rust with the exception of wireguard-go. Crossing the boundary between Rust and Go is done using a <a href="https://wikipedia.org/wiki/Foreign_function_interface" rel="nofollow">foreign function interface</a> (FFI), which is inherently unsafe and complex. Since Go is a managed language with its own separate runtime, how it executes is opaque to the Rust code. If wireguard-go were to hang or crash, recovering stacktraces is not always possible which makes debugging the code cumbersome. Limited visibility insight into crashes stemming from Go has made troubleshooting and long-term maintenance tedious.</p>
<h3>Outcome</h3>
<p>The impact has been immediate. So far not a single crash has stemmed from GotaTun, meaning that all our old crashes from wireguard-go are now gone. Since rolling out GotaTun on Android with version 2025.10 in the end of November we’ve seen a big drop in the metric <a href="https://developer.android.com/topic/performance/vitals/crash#android-vitals" rel="nofollow">user-perceived crash rate</a>, from 0.40% to 0.01%, when comparing to previous releases. The feedback from users&#39; have also been positive, with reports of better speeds and lower battery usage.</p>
<p><img src="https://blog.veitheller.de/media/uploads/2025/gotatun.png" alt="" width="640" height="293"/></p>
<p><em>User-perceived crash rate</em></p>
<h3>Looking ahead</h3>
<p>We’ve reached the first major milestone with the release of GotaTun on Android, but we have a lot more exciting things in store for 2026.</p>
<ul>
<li>A third-party security audit will take place early next year.</li>
<li>We will replace wireguard-go with GotaTun across all platforms, including desktop and iOS.</li>
<li>More effort will be put into improving performance.</li>
</ul>
<p>We hope you are as excited as we are for 2026!</p><!----></div></div>
  </body>
</html>
