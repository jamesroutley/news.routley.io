<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/jovandeginste/workout-tracker">Original</a>
    <h1>Show HN: Workout Tracker – self-hosted, single binary web application</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto">A workout tracking web application for personal use (or family, friends), geared towards running and other GPX-based
activities</p>
<p dir="auto">Self-hosted, everything included.</p>
<p dir="auto">Heavily inspired by <a href="https://github.com/SamR1/FitTrackee">FitTrackee</a> ❤️.</p>


<p dir="auto">Run the latest master image from GitHub Container Registry:</p>
<div dir="auto" data-snippet-clipboard-copy-content="docker run -p 8080:8080 ghcr.io/jovandeginste/workout-tracker:master"><pre>docker run -p 8080:8080 ghcr.io/jovandeginste/workout-tracker:master</pre></div>
<p dir="auto">Open your browser at <code>http://localhost:8080</code></p>
<p dir="auto">To persist data and sessions, run:</p>
<div dir="auto" data-snippet-clipboard-copy-content="docker run -p 8080:8080 \
    -e WT_JWT_ENCRYPTION_KEY=my-secret-key \
    -v $PWD/data:/data \
    ghcr.io/jovandeginste/workout-tracker:master"><pre>docker run -p 8080:8080 \
    -e WT_JWT_ENCRYPTION_KEY=my-secret-key \
    -v <span>$PWD</span>/data:/data \
    ghcr.io/jovandeginste/workout-tracker:master</pre></div>
<p dir="auto">or use docker compose</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Create directory that stores your data
mkdir -p /opt/workout-tracker
cd /opt/workout-tracker

# Download the compose.yaml
curl https://raw.githubusercontent.com/jovandeginste/workout-tracker/master/compose.yaml --output compose.yaml

# Start the server
docker compose up -d"><pre><span><span>#</span> Create directory that stores your data</span>
mkdir -p /opt/workout-tracker
<span>cd</span> /opt/workout-tracker

<span><span>#</span> Download the compose.yaml</span>
curl https://raw.githubusercontent.com/jovandeginste/workout-tracker/master/compose.yaml --output compose.yaml

<span><span>#</span> Start the server</span>
docker compose up -d</pre></div>

<p dir="auto">Download a pre-built binary or build it yourself (see <a href="#development">Development</a> below).</p>
<div dir="auto" data-snippet-clipboard-copy-content="wget https://github.com/jovandeginste/workout-tracker/releases/download/v0.3.0/workout-tracker-v0.3.0-linux-amd64.tar.gz
tar xf workout-tracker-v0.3.0-linux-amd64.tar.gz
./workout-tracker"><pre>wget https://github.com/jovandeginste/workout-tracker/releases/download/v0.3.0/workout-tracker-v0.3.0-linux-amd64.tar.gz
tar xf workout-tracker-v0.3.0-linux-amd64.tar.gz
./workout-tracker</pre></div>
<p dir="auto">To persist sessions, run:</p>
<div dir="auto" data-snippet-clipboard-copy-content="export WT_JWT_ENCRYPTION_KEY=my-secret-key
./workout-tracker"><pre><span>export</span> WT_JWT_ENCRYPTION_KEY=my-secret-key
./workout-tracker</pre></div>
<p dir="auto">This will create a new database file in the current directory and start the web server at <code>http://localhost:8080</code>.</p>


<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://george.mand.is/jovandeginste/workout-tracker/blob/master/docs/dashboard.jpg"><img src="https://george.mand.is/jovandeginste/workout-tracker/raw/master/docs/dashboard.jpg" alt=""/></a>
Dashboard view with:</p>
<ul dir="auto">
<li>personal totals</li>
<li>running records</li>
<li>a calendar view</li>
<li>recent activities (by you and other users)</li>
</ul>

<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://george.mand.is/jovandeginste/workout-tracker/blob/master/docs/workout_overview.jpg"><img src="https://george.mand.is/jovandeginste/workout-tracker/raw/master/docs/workout_overview.jpg" alt=""/></a>
Overview of all your activities, with summaries. The columns are sortable.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Details of a single workout</h3><a id="user-content-details-of-a-single-workout" aria-label="Permalink: Details of a single workout" href="#details-of-a-single-workout"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://george.mand.is/jovandeginste/workout-tracker/blob/master/docs/single_workout.jpg"><img src="https://george.mand.is/jovandeginste/workout-tracker/raw/master/docs/single_workout.jpg" alt=""/></a>
Details of a workout, with:</p>
<ul dir="auto">
<li>a zoomable, dragable map of the GPX track with more details per point</li>
<li>many summarized statistics</li>
<li>a breakdown per kilometer</li>
<li>track color based on elevation of the segment</li>
</ul>
<div dir="auto"><h3 tabindex="-1" dir="auto">Tooltips for even more information</h3><a id="user-content-tooltips-for-even-more-information" aria-label="Permalink: Tooltips for even more information" href="#tooltips-for-even-more-information"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://george.mand.is/jovandeginste/workout-tracker/blob/master/docs/track.gif"><img src="https://george.mand.is/jovandeginste/workout-tracker/raw/master/docs/track.gif" alt="" data-animated-image=""/></a></p>
<ul dir="auto">
<li>green and red circle are start and end points of the track</li>
<li>every point on the track has a tooltip with a summary at that moment</li>
<li>hover over the breakdown per kilometer to highlight the point</li>
</ul>

<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://george.mand.is/jovandeginste/workout-tracker/blob/master/docs/upload_workouts.jpg"><img src="https://george.mand.is/jovandeginste/workout-tracker/raw/master/docs/upload_workouts.jpg" alt=""/></a></p>
<ul dir="auto">
<li>Upload one or multiple GPX files.</li>
<li>Pick the type (running, cycling, ...) or let the application guess based on average speed</li>
<li>The files are parsed when uploaded: statistics and other information are calculated and stored in the database (serialized).</li>
</ul>
<div dir="auto"><h3 tabindex="-1" dir="auto">Statistics to follow your progress</h3><a id="user-content-statistics-to-follow-your-progress" aria-label="Permalink: Statistics to follow your progress" href="#statistics-to-follow-your-progress"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://george.mand.is/jovandeginste/workout-tracker/blob/master/docs/statistics.jpg"><img src="https://george.mand.is/jovandeginste/workout-tracker/raw/master/docs/statistics.jpg" alt=""/></a></p>
<ul dir="auto">
<li>Graphs showing monthly aggregated statistics.</li>
</ul>
<div dir="auto"><h3 tabindex="-1" dir="auto">Basic multi-language support</h3><a id="user-content-basic-multi-language-support" aria-label="Permalink: Basic multi-language support" href="#basic-multi-language-support"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://george.mand.is/jovandeginste/workout-tracker/blob/master/docs/i18n.gif"><img src="https://george.mand.is/jovandeginste/workout-tracker/raw/master/docs/i18n.gif" alt="" data-animated-image=""/></a></p>
<ul dir="auto">
<li>Switch between (supported) languages</li>
<li>Use the language configured in the browser (default)</li>
<li>Very limited amount of languages supported for now 😄</li>
<li>Re-calculate all previously uploaded workouts (useful while developing)</li>
</ul>

<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://george.mand.is/jovandeginste/workout-tracker/blob/master/docs/responsive.png"><img src="https://george.mand.is/jovandeginste/workout-tracker/raw/master/docs/responsive.png" alt=""/></a></p>
<ul dir="auto">
<li>Usable on small and medium screens</li>
</ul>

<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://george.mand.is/jovandeginste/workout-tracker/blob/master/docs/single_workout-theme.jpg"><img src="https://george.mand.is/jovandeginste/workout-tracker/raw/master/docs/single_workout-theme.jpg" alt=""/></a></p>
<ul dir="auto">
<li>Browser decides whether to use light or dark mode, based on your preferences</li>
</ul>

<p dir="auto">The web server looks for a file <code>workout-tracker.yaml</code> (or <code>json</code> or <code>toml</code>) in the current directory, or takes it&#39;s
configuration from environment variables. The most important variable is the JWT encryption key. If you don&#39;t provide
it, the key is randomly generated every time the server starts, invalidating all current sessions.</p>
<p dir="auto">Generate a secure key and write it to <code>workout-tracker.yaml</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="echo &#34;jwt_encryption_key: $(pwgen -c 32)&#34; &gt; workout-tracker.yaml"><pre><span>echo</span> <span><span>&#34;</span>jwt_encryption_key: <span><span>$(</span>pwgen -c 32<span>)</span></span><span>&#34;</span></span> <span>&gt;</span> workout-tracker.yaml</pre></div>
<p dir="auto">or export it as an environment variable:</p>
<div dir="auto" data-snippet-clipboard-copy-content="export WT_JWT_ENCRYPTION_KEY=&#34;$(pwgen -c 32)&#34;"><pre><span>export</span> WT_JWT_ENCRYPTION_KEY=<span><span>&#34;</span><span><span>$(</span>pwgen -c 32<span>)</span></span><span>&#34;</span></span></pre></div>
<p dir="auto">See <code>workout-tracker.example.yaml</code> for more options and details.</p>
<p dir="auto">After starting the server, you can access it at <a href="http://localhost:8080" rel="nofollow">http://localhost:8080</a> (the default port). A login form is shown.</p>
<p dir="auto">If no users are in the database (eg. when starting with an empty database), a default <code>admin</code> user is created with
password <code>admin</code>. You should change this password in a production environment.</p>

<div dir="auto"><h3 tabindex="-1" dir="auto">Build and run it yourself</h3><a id="user-content-build-and-run-it-yourself" aria-label="Permalink: Build and run it yourself" href="#build-and-run-it-yourself"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>install go</li>
<li>clone the repository</li>
</ul>
<div dir="auto" data-snippet-clipboard-copy-content="go build ./
./workout-tracker"><pre>go build ./
./workout-tracker</pre></div>
<p dir="auto">This does not require npm or Tailwind, since the compiled css is included in the repository.</p>

<p dir="auto">You need to install Golang and npm.</p>
<p dir="auto">Because I keep forgetting how to build every component, I created a Makefile.</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Make everything. This is also the default target.
make all # Run tests and build all components

# Install system dependencies
make install-deps

# Testing
make test # Runs all the tests
make test-assets test-go # Run tests for the individual components

# Building
make build # Builds all components
make build-tw # Builds the Tailwind CSS output file
make build-server # Builds the web server
make build-docker # Performs all builds inside Docker containers, creates a Docker image

# Running it
make serve # Runs the compiled binary
make dev # Runs a wrapper that watches for changes, then rebuilds and restarts
make watch-tw # Runs the Tailwind CSS watcher (not useful unless you&#39;re debugging Tailwind CSS)

# Cleanin&#39; up
make clean # Removes build artifacts"><pre><span><span>#</span> Make everything. This is also the default target.</span>
make all <span><span>#</span> Run tests and build all components</span>

<span><span>#</span> Install system dependencies</span>
make install-deps

<span><span>#</span> Testing</span>
make <span>test</span> <span><span>#</span> Runs all the tests</span>
make test-assets test-go <span><span>#</span> Run tests for the individual components</span>

<span><span>#</span> Building</span>
make build <span><span>#</span> Builds all components</span>
make build-tw <span><span>#</span> Builds the Tailwind CSS output file</span>
make build-server <span><span>#</span> Builds the web server</span>
make build-docker <span><span>#</span> Performs all builds inside Docker containers, creates a Docker image</span>

<span><span>#</span> Running it</span>
make serve <span><span>#</span> Runs the compiled binary</span>
make dev <span><span>#</span> Runs a wrapper that watches for changes, then rebuilds and restarts</span>
make watch-tw <span><span>#</span> Runs the Tailwind CSS watcher (not useful unless you&#39;re debugging Tailwind CSS)</span>

<span><span>#</span> Cleanin&#39; up</span>
make clean <span><span>#</span> Removes build artifacts</span></pre></div>
<div dir="auto"><h2 tabindex="-1" dir="auto">What is this, technically?</h2><a id="user-content-what-is-this-technically" aria-label="Permalink: What is this, technically?" href="#what-is-this-technically"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">A single binary that runs on any platform, with no dependencies.</p>
<p dir="auto">The binary contains all assets to serve a web interface, through which you can upload your GPX files, visualize
your tracks and see their statistics and graphs. The web application is multi-user, with a simple registration and
authentication form, session cookies and JWT tokens). New accounts are inactive by default. An admin user can activate
(or edit, delete) accounts. The default database storage is a single SQLite file.</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">What technologies are used</h2><a id="user-content-what-technologies-are-used" aria-label="Permalink: What technologies are used" href="#what-technologies-are-used"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>Go, with some notable libraries
<ul dir="auto">
<li><a href="https://george.mand.is/jovandeginste/workout-tracker/blob/master/github.com/tkrajina/gpxgo">gpxgo</a></li>
<li><a href="https://echo.labstack.com/" rel="nofollow">Echo</a></li>
<li><a href="https://gorm.io" rel="nofollow">Gorm</a></li>
<li><a href="https://github.com/vorlif/spreak">Spreak</a></li>
</ul>
</li>
<li>HTML, CSS and JS
<ul dir="auto">
<li><a href="https://tailwindcss.com/" rel="nofollow">Tailwind CSS</a></li>
<li><a href="https://fontawesome.com/" rel="nofollow">Font Awesome</a></li>
<li><a href="https://fullcalendar.io/" rel="nofollow">FullCalendar</a></li>
<li><a href="https://leafletjs.com/" rel="nofollow">Leaflet</a></li>
<li><a href="https://www.kryogenix.org/code/browser/sorttable/" rel="nofollow">sorttable</a></li>
<li><a href="https://cdn.jsdelivr.net/npm/chart.js" rel="nofollow">Chart.js</a></li>
</ul>
</li>
<li>Docker</li>
</ul>
<p dir="auto">The application uses OpenStreetMap as its map provider and for geocoding a GPS coordinate to a location.</p>

<p dir="auto">This is a work in progress. If you find any problems, please let us know. The application is tested with GPX files from
these sources:</p>
<ul dir="auto">
<li>Garmin Connect (export to GPX)</li>
<li>FitoTrack (automatic export to GPX)</li>
</ul>

<ul dir="auto">
<li>write tests!!!!!</li>
<li>add support for authentication through a reverse proxy</li>
<li>make a dev-flag that doesn&#39;t embed all files in the binary</li>
<li>add support for generic database drivers
<ul dir="auto">
<li>added support for MySQL, but untested so far</li>
</ul>
</li>
<li>add support for other types of import files (eg. Garmin fit files)
<ul dir="auto">
<li>importing fit files works, kinda: there seems to be an issue with the elevation</li>
<li>see <a data-error-text="Failed to load title" data-id="2162753915" data-permission-text="Title is private" data-url="https://github.com/tormoder/fit/issues/87" data-hovercard-type="issue" data-hovercard-url="/tormoder/fit/issues/87/hovercard" href="https://github.com/tormoder/fit/issues/87">tormoder/fit#87</a></li>
<li><a href="https://www.fitfileviewer.com/" rel="nofollow">https://www.fitfileviewer.com/</a> gives the same elevation issue</li>
</ul>
</li>
<li>add support for auto-import from a folder (per user)</li>
<li>see if htmx is worth using
<ul dir="auto">
<li>first I need a use case</li>
</ul>
</li>
</ul>
</article></div></div>
  </body>
</html>
