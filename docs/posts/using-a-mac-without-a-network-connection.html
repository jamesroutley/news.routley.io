<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://eclecticlight.co/2023/03/14/using-a-mac-without-a-network-connection/">Original</a>
    <h1>Using a Mac without a network connection</h1>
    
    <div id="readability-page-1" class="page"><div data-first_letter="I">
		<p>If network connections are now so important to Macs, what can a Mac running Ventura do without being connected to a network? Can it still run apps, and how does it cope with tasks like Gatekeeper checks? This article explains what does and doesn’t work when a Mac running Ventura has no network connection at all.</p>
<p>To investigate this, rather than trying to block network connections on a Mac, I built a new version of my lightweight virtualiser Viable with the option to run completely locked down in a sandbox, without any shared folders, and with no network device available. This is an update to the sandboxed version of that app, ViableS. If you want to try this out yourself, ViableS 1.0.8 (beta 8) is available from here: <a title="viables1b8" href="https://eclecticlightdotcom.files.wordpress.com/2023/03/viables1b8-1.zip">viables1b8</a></p>
<p><span><img data-attachment-id="70890" data-permalink="https://eclecticlight.co/viables11080-2/" data-orig-file="https://eclecticlightdotcom.files.wordpress.com/2023/03/viables11080-1.jpg" data-orig-size="1184,980" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="viables11080" data-image-description="" data-image-caption="" data-medium-file="https://eclecticlightdotcom.files.wordpress.com/2023/03/viables11080-1.jpg?w=300" data-large-file="https://eclecticlightdotcom.files.wordpress.com/2023/03/viables11080-1.jpg?w=940" src="https://eclecticlightdotcom.files.wordpress.com/2023/03/viables11080-1.jpg?w=940" alt="viables11080" srcset="https://eclecticlightdotcom.files.wordpress.com/2023/03/viables11080-1.jpg?w=940 940w, https://eclecticlightdotcom.files.wordpress.com/2023/03/viables11080-1.jpg?w=150 150w, https://eclecticlightdotcom.files.wordpress.com/2023/03/viables11080-1.jpg?w=300 300w, https://eclecticlightdotcom.files.wordpress.com/2023/03/viables11080-1.jpg?w=768 768w, https://eclecticlightdotcom.files.wordpress.com/2023/03/viables11080-1.jpg?w=1024 1024w, https://eclecticlightdotcom.files.wordpress.com/2023/03/viables11080-1.jpg 1184w" sizes="(max-width: 940px) 100vw, 940px"/></span></p>
<p>This simply adds a checkbox so you can run a VM with or without its NAT network connection device.</p>
<h4>Installing macOS</h4>
<p>Setting up a macOS VM in ViableS is a two-step process. First, the VM has to be installed from an IPSW image into a new VM bundle. Once that’s done, you start that VM up for macOS to complete installation with personalisation and configuration, just as you would when your Mac first starts up into a new macOS boot volume group.</p>
<p><span><img data-attachment-id="70891" data-permalink="https://eclecticlight.co/xnonet01/" data-orig-file="https://eclecticlightdotcom.files.wordpress.com/2023/03/xnonet01.jpg" data-orig-size="1554,1166" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="xnonet01" data-image-description="" data-image-caption="" data-medium-file="https://eclecticlightdotcom.files.wordpress.com/2023/03/xnonet01.jpg?w=300" data-large-file="https://eclecticlightdotcom.files.wordpress.com/2023/03/xnonet01.jpg?w=940" src="https://eclecticlightdotcom.files.wordpress.com/2023/03/xnonet01.jpg?w=940" alt="xnonet01" srcset="https://eclecticlightdotcom.files.wordpress.com/2023/03/xnonet01.jpg?w=940 940w, https://eclecticlightdotcom.files.wordpress.com/2023/03/xnonet01.jpg?w=150 150w, https://eclecticlightdotcom.files.wordpress.com/2023/03/xnonet01.jpg?w=300 300w, https://eclecticlightdotcom.files.wordpress.com/2023/03/xnonet01.jpg?w=768 768w, https://eclecticlightdotcom.files.wordpress.com/2023/03/xnonet01.jpg?w=1024 1024w, https://eclecticlightdotcom.files.wordpress.com/2023/03/xnonet01.jpg 1554w" sizes="(max-width: 940px) 100vw, 940px"/></span></p>
<p>Early during that process, macOS 13.2 detected that no network was available, and offered to try connecting with Ethernet. The other option, admission of the sad fact that your Mac doesn’t connect to the internet, resulted in a dialog trying to persuade me that I really wanted to try again. But I persevered through its warnings, and the remaining configuration completed successfully.</p>
<p><span><img data-attachment-id="70892" data-permalink="https://eclecticlight.co/xnonet02/" data-orig-file="https://eclecticlightdotcom.files.wordpress.com/2023/03/xnonet02.jpg" data-orig-size="1552,1162" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="xnonet02" data-image-description="" data-image-caption="" data-medium-file="https://eclecticlightdotcom.files.wordpress.com/2023/03/xnonet02.jpg?w=300" data-large-file="https://eclecticlightdotcom.files.wordpress.com/2023/03/xnonet02.jpg?w=940" src="https://eclecticlightdotcom.files.wordpress.com/2023/03/xnonet02.jpg?w=940" alt="xnonet02" srcset="https://eclecticlightdotcom.files.wordpress.com/2023/03/xnonet02.jpg?w=940 940w, https://eclecticlightdotcom.files.wordpress.com/2023/03/xnonet02.jpg?w=150 150w, https://eclecticlightdotcom.files.wordpress.com/2023/03/xnonet02.jpg?w=300 300w, https://eclecticlightdotcom.files.wordpress.com/2023/03/xnonet02.jpg?w=768 768w, https://eclecticlightdotcom.files.wordpress.com/2023/03/xnonet02.jpg?w=1024 1024w, https://eclecticlightdotcom.files.wordpress.com/2023/03/xnonet02.jpg 1552w" sizes="(max-width: 940px) 100vw, 940px"/></span></p>
<p>Of course, without an internet connection, Software Update was unable to update the VM to 13.2.1, so for that I shut it down, enabled the network, opened that VM again and installed the macOS update. Once that was complete, I started the VM without the network, and it ran fine. Of course it had no Location Services, so didn’t have a clue which time zone it was in, so that and its clock had to be set manually.</p>
<p>There was a time when Apple provided standalone updater packages for macOS, but that came to an end with Big Sur, and its switch to this new update mechanism. If you had no option to enable a network connection, the only solution now is to use the full installer app. Many of us pointed this out to Apple early in Big Sur’s release cycle, but Apple has chosen not to provide standalone macOS updaters any more.</p>
<h4>Running apps</h4>
<p>To be able to assess what effects the absence of a network have on macOS and apps, I then needed to copy across additional software including Ulbow and other utilities, Pages, and the Xcode 14.2 xip file. I did that by running the VM briefly in Viable, using a shared folder, before returning to my networkless VM. In other circumstances, that could easily be performed using a removable disk.</p>
<p>Running the VM in a sandbox, without any network connection or shared folders, thus completely isolated from the host Mac except through input devices (keyboard and trackpad) and its display device, I then performed the following tasks:</p>
<ul>
<li>ran several apps for the first time, without quarantine;</li>
<li>ran one app with its quarantine flag set;</li>
<li>ran Pages and created a new document;</li>
<li>installed Xcode from its xip file;</li>
<li>ran Xcode for the first time, and completed its installation;</li>
<li>created a new project in Xcode, built and ran its Hello World demo app;</li>
<li>booted into Recovery mode and accessed Startup Security Utility and other tools.</li>
</ul>
<p>I encountered no difficulties or delays performing any of these tasks. Indeed, if anything, the first run of apps like Xcode was started with less delay than when an internet connection is available. Gatekeeper still asked me to confirm that I really did want to run the app that was in quarantine, but did so perfectly happily, and it was here that I first noticed the new com.apple.provenance extended attribute in action. Although WhatRoute had no network connection available, it too ran fine.</p>
<h4>Gatekeeper checks</h4>
<p>Log extracts covering Gatekeeper checks were obtained using Ulbow. Like most of my apps, Ulbow itself expects to be able to connect to the internet to check for its own updates, although it no longer checks its own security and integrity with a full signature check. Although neither of those connections was possible, those apps ran fine without a network.</p>
<p>During Gatekeeper checks, two internet connections are normally made, to api.apple-cloudkit.com for notarization checks, and ocsp2.apple.com for the validity of the code-signing certificate. The first of those was attempted once, failed, and was promptly abandoned. The OCSP check was attempted multiple times, but was also abandoned quickly.</p>
<p>Failure of those two online checks didn’t prevent or delay successful app launching.</p>
<h4>What doesn’t work</h4>
<p>Lightweight VMs don’t support connecting with an Apple ID in any case, and that prevents access to all App Store apps apart from Apple’s free products Pages, Numbers and Keynote, which run without being signed in. This also prevents signing in to iCloud services.</p>
<p>Although not tested, any third-party app that relies on signing into an account or on remote licence-checking will also fail without a network connection, obviously. Those that perform checks for updates, such as apps using Sparkle, shouldn’t be affected, but merely report that they were unable to check for updates.</p>
<p>The most obvious limitation of a VM with no network connection is reliance on network time services to correct system clocks, which drift noticeably and lose synchronisation with other Macs and devices with internet connections. Other services and apps not available, such as Messages and FaceTime, should be easy to identify.</p>
<h4>Summary</h4>
<p>In the complete absence of a network connection:</p>
<ul>
<li>macOS Ventura installs and configures correctly;</li>
<li>Gatekeeper first-run checks complete without delay, even when an app is in quarantine;</li>
<li>apps that don’t require a network connection function normally;</li>
<li>Pages, Numbers and Keynote function normally;</li>
<li>Xcode installs and runs normally, but without access to online accounts;</li>
<li>other App Store apps aren’t available;</li>
<li>signing into iCloud isn’t available;</li>
<li>Software Update, including macOS updates, isn’t available.</li>
</ul>
<p>For those requiring absolute privacy, and researchers wanting a completely sealed macOS testing environment, ViableS 1.0.8 (beta 8) now provides that.</p>
	</div></div>
  </body>
</html>
