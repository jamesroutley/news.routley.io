<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/looker-open-source/malloy">Original</a>
    <h1>Malloy – A Better SQL, from Looker</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
          <article itemprop="text">
<p dir="auto">Malloy is an experimental language for describing data relationships and transformations. It is both a semantic modeling language and a querying language that runs queries against a relational database. Malloy is currently available on BigQuery and Postgres. About Malloy:</p>
<ul dir="auto">
<li>Queries compile to SQL, optimized for your database</li>
<li>Computations are modular, composable, reusable, and extendable in ways that are consistent with modern programming paradigms</li>
<li>Excels at querying and producing nested data sets</li>
<li>The fan and chasm traps are solved, making it possible to aggregate anything in one query and reducing need for fact tables and overly complex SQL</li>
<li>Defaults are smart, and the language is concise (where SQL is verbose and often redundant)</li>
</ul>
<p dir="auto">Malloy is a language for anyone who works with SQL--whether you’re an analyst, data scientist, data engineer, or someone building a data application. If you know SQL, Malloy will feel familiar, while more powerful and efficient. Malloy allows you to model as you go, so there is no heavy up-front work before you can start answering complex questions, and you&#39;re never held back or restricted by the model.</p>
<p dir="auto">We&#39;ve built a Visual Studio Code extension to facilitate interacting with your data using Malloy. The extension provides a rich environment to create Malloy data models, query and transform data, and to create simple visualizations and dashboards.</p>

<p dir="auto">Currently, the Malloy extension works on Mac and Linux machines.</p>
<h2 dir="auto"><a id="user-content-1-download-visual-studio-code" aria-hidden="true" href="#1-download-visual-studio-code"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>1. Download Visual Studio Code</h2>
<p dir="auto">If you don&#39;t already have it, download <a href="https://code.visualstudio.com/" rel="nofollow">Visual Studio Code</a></p>
<h2 dir="auto"><a id="user-content-2-add-the-malloy-extension-from-the-visual-studio-code-marketplace" aria-hidden="true" href="#2-add-the-malloy-extension-from-the-visual-studio-code-marketplace"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2. Add the Malloy extension from the Visual Studio Code Marketplace</h2>
<p dir="auto">Open VS Code and click the Extensions button on the far left (it looks like 4 blocks with one flying away). This will open the Extension Marketplace. Search for &#34;Malloy&#34; and, once found, click &#34;Install&#34;</p>
<h2 dir="auto"><a id="user-content-3-open-the-malloy-extension-and-connect-to-your-database" aria-hidden="true" href="#3-open-the-malloy-extension-and-connect-to-your-database"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>3. Open the Malloy extension and connect to your database</h2>
<p dir="auto">Click on the Malloy icon on the left side of VS Code. This opens the Malloy view - a view that allows you to view schemas as you work with Malloy models and edit database connections.</p>
<p dir="auto">In the &#34;CONNECTIONS&#34; panel, click &#34;Edit Connections&#34;. This opens the connection manager page. Click &#34;Add Connection&#34;.</p>
<h3 dir="auto"><a id="user-content-postgres" aria-hidden="true" href="#postgres"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Postgres</h3>
<p dir="auto">Add the relevant database connection information. Once you click save, the password (if you have entered one) will be stored in your system keychain.</p>
<h3 dir="auto"><a id="user-content-bigquery" aria-hidden="true" href="#bigquery"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>BigQuery</h3>
<p dir="auto">Authenticating to BigQuery can be done either via oAuth (using your Google Cloud Account) or with a Service Account Key downloaded from Google Cloud</p>
<h4 dir="auto"><a id="user-content-using-oauth" aria-hidden="true" href="#using-oauth"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><strong>Using oAuth</strong></h4>
<p dir="auto">To access BigQuery with the Malloy Plugin, you will need to have BigQuery credentials available, and the <a href="https://cloud.google.com/sdk/gcloud" rel="nofollow">gcloud CLI</a> installed. Once it&#39;s installed, open a terminal and type the following:</p>
<div data-snippet-clipboard-copy-content="gcloud auth login --update-adc
gcloud config set project {my_project_id} --installation"><pre><code>gcloud auth login --update-adc
gcloud config set project {my_project_id} --installation
</code></pre></div>
<p dir="auto"><em>Replace <code>{my_project_id}</code> with the <strong>ID</strong> of the bigquery project you want to use &amp; bill to. If you&#39;re not sure what this ID is, open Cloud Console, and click on the dropdown at the top (just to the right of the &#34;Google Cloud Platform&#34; text) to view projects you have access to. If you don&#39;t already have a project, <a href="https://cloud.google.com/resource-manager/docs/creating-managing-projects" rel="nofollow">create one</a>.</em></p>
<h4 dir="auto"><a id="user-content-using-service-account-key" aria-hidden="true" href="#using-service-account-key"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><strong>Using Service Account Key</strong></h4>
<p dir="auto">Add the relevant account information to the new connection, and include the path to the service account key.</p>
<h2 dir="auto"><a id="user-content-4-test-the-connection" aria-hidden="true" href="#4-test-the-connection"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>4. Test the connection</h2>
<p dir="auto">Press &#34;test&#34; on the connection to confirm that you have successfully connected to the database.</p>
<h2 dir="auto"><a id="user-content-5-write-some-malloy" aria-hidden="true" href="#5-write-some-malloy"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>5. Write some Malloy!</h2>
<p dir="auto">It may be helpful to check out one of the walkthroughs under Documentation below, or try some of the BigQuery <a href="https://github.com/looker-open-source/malloy/tree/main/samples">sample models</a> on public datasets available on the repo before getting started.</p>
<p dir="auto">If you want to dive right in, create a file called <code>test.malloy</code> and try to create queries on your dataset - you can find examples <a href="https://looker-open-source.github.io/malloy/documentation/language/basic.html" rel="nofollow">here</a></p>

<ul dir="auto">
<li>Join the <a href="https://join.slack.com/t/malloy-community/shared_invite/zt-upi18gic-W2saeFu~VfaVM1~HIerJ7w" rel="nofollow"><strong>Malloy Slack Community!</strong></a> Use this community to ask questions, meet other Malloy users, and share ideas with one another.</li>
<li>Use <a href="https://github.com/looker-open-source/malloy/issues"><strong>GitHub issues</strong></a> in this Repo to provide feedback, suggest improvements, report bugs, and start new discussions.</li>
</ul>

<p dir="auto"><a href="https://looker-open-source.github.io/malloy/" rel="nofollow">Malloy Documentation</a></p>
<ul dir="auto">
<li><a href="https://looker-open-source.github.io/malloy/documentation/language/basic.html" rel="nofollow">Basics</a> - A quick introduction to the language</li>
<li><a href="https://looker-open-source.github.io/malloy/documentation/examples/ecommerce.html" rel="nofollow">eCommerce Example Analysis</a> - a walkthrough of the basics on an ecommerce dataset</li>
<li><a href="https://looker-open-source.github.io/malloy/documentation/examples/faa.html" rel="nofollow">Flights Example Analysis</a> - examples built on the NTSB flights public dataset</li>
<li><a href="https://looker-open-source.github.io/malloy/documentation/examples/iowa/iowa.html" rel="nofollow">Modeling Walkthrough</a> - introduction to modeling via the Iowa liquor sales public data set</li>
</ul>

<p dir="auto">SQL is complete but ugly: everything is expressible, but nothing is reusable; simple ideas are complex to express; the language is verbose and lacks smart defaults. Malloy is immediately understandable by SQL users, and far easier to use and learn.</p>
<p dir="auto">Key features and advantages:</p>
<ul dir="auto">
<li>Query and model in the same language - everything is reusable and extensible.</li>
<li>Malloy reads the schema so you don’t need to model everything. Malloy allows creation of re-usable metrics and logic, but there’s no need for boilerplate code that doesn’t add anything new.</li>
<li>Pipelining: output one query into the next easily for powerful advanced analysis.</li>
<li>Aggregating Subqueries let you build nested data sets to delve deeper into data quickly, and return complicated networks of data from single queries (like GraphQL).</li>
<li>Queries do more: Power an entire dashboard with a single query. Nested queries are batched together, scanning the data only once.</li>
<li>Indexes for unified suggest/search: Malloy automatically builds search indexes, making it easier to understand a dataset and filter values.</li>
<li>Built to optimize the database: make the most of BigQuery, utilizing BI engine, caching, reading/writing nested datasets extremely fast, and more.</li>
<li>Malloy models are purely about data; visualization and “styles” configurations live separately, keeping the model clean and easy to read.</li>
<li>Aggregates are safe and accurate: Malloy generates distinct keys when they’re needed to ensure it never fans out your data.</li>
<li>Nested tables are made approachable: you don’t have to model or flatten them; specify a query path and Malloy handles the rest.</li>
<li>Compiler-based error checking: Malloy understands sql expressions so the compiler catches errors as you write, before the query is run.</li>
</ul>

<p dir="auto">If you would like to <a href="https://github.com/looker-open-source/malloy/blob/main/CONTRIBUTING.md">work on Malloy</a>, you can find some helpful instructions about <a href="https://github.com/looker-open-source/malloy/blob/main/developing.md">developing Malloy</a> and <a href="https://github.com/looker-open-source/malloy/blob/main/documentation.md">developing documentation</a>.</p>
<p dir="auto">Malloy is not an officially supported Google product.</p>
</article>
        </div></div>
  </body>
</html>
