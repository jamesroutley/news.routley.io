<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://abstract.properties/devlog-a-sketch-of-this-application.html">Original</a>
    <h1>Devlog: a sketch of this application</h1>
    
    <div id="readability-page-1" class="page"><div>
                    <p>Time for devlog #3! <a href="https://abstract.properties/devlog-what-is-a-module.html">Last week&#39;s was here</a>.</p>
<p>This time I&#39;d like to describe the &#34;minimum viable&#34; application that I&#39;m building.</p>
<p>A picture is worth a thousand words, so here are a few showing the overall ideas.</p>

<a id="the-application" href="#the-application"><h2>The application</h2></a>
<p>Software is comprised of <strong>modules</strong>, which are the main unit of organizing a program.</p>
<p>I&#39;ve sometimes wanted &#34;comments&#34; in my code which were live representations of what the program does.</p>
<p>Like, a &#34;comment&#34; could be an instance of a visual UI component being built with some edge-case data, or it could be a
red/green light showing the pass/fail state of a unit test, which verifies outputs match certain inputs.</p>
<p>With that in mind, imagine an application which is meant to help you understand, build, and maintain modules:</p>
<figure>
  <img alt="A sketch of the application, showing a menu (main app actions), toolbar with selection &amp; creation tools, a module canvas, an inspector, and a status bar" src="https://abstract.properties/img/devlog/2024-10-22-app.860w.jpeg"/>
  <figcaption>The initial view, very &#34;Windows 95&#34; UI.</figcaption>
</figure>
<p>Instead of a module being a bunch of lines of source code, what if it was an arrangement of objects? Each could
represent a declaration/statement present in the module.</p>
<p>Selection tools could be used to arrange these objects in a way which best reflects the intent of the source code.</p>
<p>Creation tools could be used to create new objects in the module itself, and the Inspector could be used to modify the
properties of these objects.</p>
<p>But what are the objects that could live within the module canvas?</p>
<a id="the-" cell""="" href="#the-%22cell%22"><h3>The &#34;Cell&#34;</h3></a>
<p>In order for variables to be presented as UI, we could think of them as having two distinct, but related parts.</p>
<ul>
<li>Its &#34;value&#34; holds the <strong>runtime</strong> value associated with the variable</li>
<li>Its &#34;display&#34; holds arbitrary UI to show (and even interact with) the value the variable holds</li>
</ul>
<p>This &#34;display&#34; could be like a visual comment: something to help illustrate the cell&#39;s meaning.</p>
<figure>
  <img alt="A sketch of a cell, showing one side for UI display, another side for the value source code, and a number of properties (position, dimensions, value source code, display source code)" src="https://abstract.properties/img/devlog/2024-10-22-cell.860w.jpeg"/>
  <figcaption>A &#34;cell&#34; is a dynamic variable</figcaption>
</figure>
<p>Inside of the inspector, you may view all of a cell&#39;s properties:</p>
<ul>
<li>The position &amp; dimensions (so a cell can be positioned within the canvas)</li>
<li>The source code for the Value (dynamically evaluated to get the Value)</li>
<li>The source code for the Display (dynamically evaluated to get the Value)</li>
</ul>
<p>And each of these cell&#39;s properties (even position &amp; dimensions) may also be dynamically evaluated code.</p>
<p>Like how here, the <code>follower</code> cell follows the position of the <code>target</code> cell: <a href="https://board.abstract.properties/4596e53d60727f457dc787f55cd4862e8b729fff/#eyJ2ZXJzaW9uIjowLCJtYXhJZCI6MiwiY2VsbHMiOlt7ImlkZW50aWZpZXIiOiJ0YXJnZXQiLCJiaW5kaW5ncyI6W3sibmFtZSI6IiR4IiwibW9kZWwiOnsic291cmNlIjoiMCIsImlzUmVhZG9ubHkiOmZhbHNlfX0seyJuYW1lIjoiJHhQeCIsIm1vZGVsIjp7InNvdXJjZSI6ImAke3RoaXMuJHguZ2V0KCl9cHhgIiwiaXNSZWFkb25seSI6ZmFsc2V9fSx7Im5hbWUiOiIkeSIsIm1vZGVsIjp7InNvdXJjZSI6IjAiLCJpc1JlYWRvbmx5IjpmYWxzZX19LHsibmFtZSI6IiR5UHgiLCJtb2RlbCI6eyJzb3VyY2UiOiJgJHt0aGlzLiR5LmdldCgpfXB4YCIsImlzUmVhZG9ubHkiOmZhbHNlfX0seyJuYW1lIjoiJHZhbHVlIiwibW9kZWwiOnsic291cmNlIjoiXCJEcmFnIG1lIGFyb3VuZCFcIiIsImlzUmVhZG9ubHkiOmZhbHNlfX0seyJuYW1lIjoiJGRpc3BsYXkiLCJtb2RlbCI6eyJzb3VyY2UiOiI8ZGl2XG4gICAgY2xhc3M9XCJDZWxsUmVuZGVyZXJcIlxuICAgIHN0eWxlOnRvcD17dGhpcy4keVB4fVxuICAgIHN0eWxlOmxlZnQ9e3RoaXMuJHhQeH1cbj5cbiAgICA8Yj5OYW1lOiB7dGhpcy4kaWR9PC9iPlxuICAgIDxkaXY+e3RoaXMuJHZhbHVlfTwvZGl2PlxuPC9kaXY+IiwiaXNSZWFkb25seSI6ZmFsc2V9fV0sIngiOjE3NDcsInkiOjE4MTd9LHsiaWRlbnRpZmllciI6ImZvbGxvd2VyIiwiYmluZGluZ3MiOlt7Im5hbWUiOiIkeCIsIm1vZGVsIjp7InNvdXJjZSI6InRhcmdldC4keC5nZXQoKSArIDEwMCIsImlzUmVhZG9ubHkiOnRydWV9fSx7Im5hbWUiOiIkeFB4IiwibW9kZWwiOnsic291cmNlIjoiYCR7dGhpcy4keC5nZXQoKX1weGAiLCJpc1JlYWRvbmx5IjpmYWxzZX19LHsibmFtZSI6IiR5IiwibW9kZWwiOnsic291cmNlIjoidGFyZ2V0LiR5LmdldCgpICsgMTAwIiwiaXNSZWFkb25seSI6dHJ1ZX19LHsibmFtZSI6IiR5UHgiLCJtb2RlbCI6eyJzb3VyY2UiOiJgJHt0aGlzLiR5LmdldCgpfXB4YCIsImlzUmVhZG9ubHkiOmZhbHNlfX0seyJuYW1lIjoiJHZhbHVlIiwibW9kZWwiOnsic291cmNlIjoiPGRpdj5JIGZvbGxvdyA8Yj48Y29kZT50YXJnZXQ8L2NvZGU+PC9iPjwvZGl2PiIsImlzUmVhZG9ubHkiOmZhbHNlfX0seyJuYW1lIjoiJGRpc3BsYXkiLCJtb2RlbCI6eyJzb3VyY2UiOiI8ZGl2XG4gICAgY2xhc3M9XCJDZWxsUmVuZGVyZXJcIlxuICAgIHN0eWxlOnRvcD17dGhpcy4keVB4fVxuICAgIHN0eWxlOmxlZnQ9e3RoaXMuJHhQeH1cbj5cbiAgICA8Yj5OYW1lOiB7dGhpcy4kaWR9PC9iPlxuICAgIDxkaXY+e3RoaXMuJHZhbHVlfTwvZGl2PlxuPC9kaXY+IiwiaXNSZWFkb25seSI6ZmFsc2V9fV0sIngiOjE4NDcsInkiOjE5MTd9XX0=" target="_blank">Link to early build showing two cells</a>.</p>
<p>The idea here is that a cell is a name binding within the module.</p>
<p>And when accessed in code, a cell is represented as an object which can be interacted with in order to get the value
(and metadata).</p>
<p>I <em>think</em> that it&#39;d make sense for the <code>display</code> property (and <code>position</code> &amp; <code>dimensions</code>) of the cell to only exist at
&#34;dev time&#34; and &#34;debug time&#34;, but not be present in production builds.</p>
<p>This &#34;flip to see under the hood&#34; metaphor seems neat, but I don&#39;t know if it actually would be useful.</p>
<a id="functions" href="#functions"><h3>Functions</h3></a>
<p>If cells are like variable declarations, then we need functions too!</p>
<p>In code (at least in JavaScript), a function:</p>
<ul>
<li>Has a lexical scope, so its code can read its own names and the names declared &#34;outside&#34; of the function</li>
<li>Has a number of parameters, which are inputs to the function</li>
<li>May have a <code>return</code> value, which is the output of the function</li>
</ul>
<p>So maybe a function is just a &#34;box&#34; drawn around a portion of a module, which may itself contain other objects!</p>
<figure>
  <img alt="A sketch of a function, showing its name, parameters, and a canvas for the body (holding its own set of variables and a return cell)" src="https://abstract.properties/img/devlog/2024-10-22-function.860w.jpeg"/>
  <figcaption>A &#34;function&#34; is a scoped box with some input parameters</figcaption>
</figure>
<p>In the inspector, the function parameters could be changed and be given default values.</p>
<p>These function parameters then act just like &#34;cells&#34; that could be referenced like any other cell contained within the
function itself.</p>
<p>And the return value could also just be a &#34;cell&#34; which evaluates to an arbitrary value.</p>
<p>It&#39;s not depicted in the image here, but I&#39;d imagine that a &#34;function&#34; could also have a special &#34;display&#34; return value,
separate from the actual &#34;return&#34; cell.</p>
<p>This could allow the function to also have a visual representation.</p>
<p>Perhaps &#34;instances&#34; of a function could be created as objects in the canvas, which take input parameters and are
displayed as the UI drawn via this &#34;display&#34; return value. And code reading these &#34;instances&#34; would read the &#34;return&#34;
value of the function.</p>
<a id="other-objects" href="#other-objects"><h3>Other objects</h3></a>
<p>Besides &#34;cells&#34; and &#34;functions&#34; (and these &#34;instances&#34;), we would also
probably need a few other objects:</p>
<ul>
<li><strong>Collections</strong> could be dynamic arrays of values, which have a display function to show how a single value would look</li>
<li><strong>Module imports</strong> could be presented as objects imported by name from another module
<ul>
<li>I&#39;m thinking I/O and external state (like network, time, disk, etc...) could be done via special built-in modules</li>
</ul>
</li>
<li><strong>Side effects</strong> could map to arbitrary effectful statements -- though I&#39;m not sure how necessary this is...</li>
<li><strong>Comments</strong> could be like pure &#34;display&#34; cells -- they don&#39;t hold values, but they hold UI that can be used to
describe and interact with the code</li>
</ul>
<p>There probably are others, but I think with just that, it&#39;d be possible to build fully functioning applications with
this sort of tool.</p>
<a id="serialized-as-...-code?" href="#serialized-as-...-code%3F"><h3>Serialized as ... code?</h3></a>
<p>The underlying representation of a module (its &#34;cells&#34; and objects, their positions and attributes) could
just be code itself.</p>
<p>Like, <a href="https://board.abstract.properties/4596e53d60727f457dc787f55cd4862e8b729fff/#eyJ2ZXJzaW9uIjowLCJtYXhJZCI6MiwiY2VsbHMiOlt7ImlkZW50aWZpZXIiOiJ0YXJnZXQiLCJiaW5kaW5ncyI6W3sibmFtZSI6IiR4IiwibW9kZWwiOnsic291cmNlIjoiMCIsImlzUmVhZG9ubHkiOmZhbHNlfX0seyJuYW1lIjoiJHhQeCIsIm1vZGVsIjp7InNvdXJjZSI6ImAke3RoaXMuJHguZ2V0KCl9cHhgIiwiaXNSZWFkb25seSI6ZmFsc2V9fSx7Im5hbWUiOiIkeSIsIm1vZGVsIjp7InNvdXJjZSI6IjAiLCJpc1JlYWRvbmx5IjpmYWxzZX19LHsibmFtZSI6IiR5UHgiLCJtb2RlbCI6eyJzb3VyY2UiOiJgJHt0aGlzLiR5LmdldCgpfXB4YCIsImlzUmVhZG9ubHkiOmZhbHNlfX0seyJuYW1lIjoiJHZhbHVlIiwibW9kZWwiOnsic291cmNlIjoiXCJEcmFnIG1lIGFyb3VuZCFcIiIsImlzUmVhZG9ubHkiOmZhbHNlfX0seyJuYW1lIjoiJGRpc3BsYXkiLCJtb2RlbCI6eyJzb3VyY2UiOiI8ZGl2XG4gICAgY2xhc3M9XCJDZWxsUmVuZGVyZXJcIlxuICAgIHN0eWxlOnRvcD17dGhpcy4keVB4fVxuICAgIHN0eWxlOmxlZnQ9e3RoaXMuJHhQeH1cbj5cbiAgICA8Yj5OYW1lOiB7dGhpcy4kaWR9PC9iPlxuICAgIDxkaXY+e3RoaXMuJHZhbHVlfTwvZGl2PlxuPC9kaXY+IiwiaXNSZWFkb25seSI6ZmFsc2V9fV0sIngiOjE3NDcsInkiOjE4MTd9LHsiaWRlbnRpZmllciI6ImZvbGxvd2VyIiwiYmluZGluZ3MiOlt7Im5hbWUiOiIkeCIsIm1vZGVsIjp7InNvdXJjZSI6InRhcmdldC4keC5nZXQoKSArIDEwMCIsImlzUmVhZG9ubHkiOnRydWV9fSx7Im5hbWUiOiIkeFB4IiwibW9kZWwiOnsic291cmNlIjoiYCR7dGhpcy4keC5nZXQoKX1weGAiLCJpc1JlYWRvbmx5IjpmYWxzZX19LHsibmFtZSI6IiR5IiwibW9kZWwiOnsic291cmNlIjoidGFyZ2V0LiR5LmdldCgpICsgMTAwIiwiaXNSZWFkb25seSI6dHJ1ZX19LHsibmFtZSI6IiR5UHgiLCJtb2RlbCI6eyJzb3VyY2UiOiJgJHt0aGlzLiR5LmdldCgpfXB4YCIsImlzUmVhZG9ubHkiOmZhbHNlfX0seyJuYW1lIjoiJHZhbHVlIiwibW9kZWwiOnsic291cmNlIjoiPGRpdj5JIGZvbGxvdyA8Yj48Y29kZT50YXJnZXQ8L2NvZGU+PC9iPjwvZGl2PiIsImlzUmVhZG9ubHkiOmZhbHNlfX0seyJuYW1lIjoiJGRpc3BsYXkiLCJtb2RlbCI6eyJzb3VyY2UiOiI8ZGl2XG4gICAgY2xhc3M9XCJDZWxsUmVuZGVyZXJcIlxuICAgIHN0eWxlOnRvcD17dGhpcy4keVB4fVxuICAgIHN0eWxlOmxlZnQ9e3RoaXMuJHhQeH1cbj5cbiAgICA8Yj5OYW1lOiB7dGhpcy4kaWR9PC9iPlxuICAgIDxkaXY+e3RoaXMuJHZhbHVlfTwvZGl2PlxuPC9kaXY+IiwiaXNSZWFkb25seSI6ZmFsc2V9fV0sIngiOjE4NDcsInkiOjE5MTd9XX0=" target="_blank">our target/follower example module</a> could be serialized like this:</p>
<div><p><code>example.js</code></p><pre><span>import</span> <span>JSX</span>, { <span>Cell</span> } <span>from</span> <span>&#39;runtime&#39;</span>;

<span>export</span> <span>const</span> target = <span>new</span> <span>Cell</span>({
  $x() { <span>return</span> <span>0</span>; },
  $xPx() { <span>return</span> <span>`<span>${<span>this</span>.$x.get()}</span>px`</span>; },
  $y() { <span>return</span> <span>0</span>; },
  $yPx() { <span>return</span> <span>`<span>${<span>this</span>.$y.get()}</span>px`</span>; },
  $value() { <span>return</span> <span>&#34;Drag me around!&#34;</span>; },
  $display() { <span>return</span> (
    <span><span>&lt;<span>div</span>
      <span>class</span>=<span>&#34;CellRenderer&#34;</span>
      <span>style:top</span>=<span>{this.$yPx}</span>
      <span>style:left</span>=<span>{this.$yPx}</span>
    &gt;</span>
      <span>&lt;<span>b</span>&gt;</span>Name: {this.$id}<span>&lt;/<span>b</span>&gt;</span>
      <span>&lt;<span>div</span>&gt;</span>Name: {this.$value}<span>&lt;/<span>div</span>&gt;</span>
    <span>&lt;/<span>div</span>&gt;</span></span>
  ); },
  <span>overrides</span>: {
    <span>$x</span>: <span>1747</span>,
    <span>$y</span>: <span>1817</span>,
  },
});

<span>export</span> <span>const</span> follower = <span>new</span> <span>Cell</span>({
  $x() { <span>return</span> target.<span>$x</span>.<span>get</span>() + <span>100</span>; },
  $xPx() { <span>return</span> <span>`<span>${<span>this</span>.$x.get()}</span>px`</span>; },
  $y() { <span>return</span> target.<span>$y</span>.<span>get</span>() + <span>100</span>; },
  $yPx() { <span>return</span> <span>`<span>${<span>this</span>.$y.get()}</span>px`</span>; },
  $value() { <span>return</span> <span>&#34;Drag me around!&#34;</span>; },
  $display() { <span>return</span> (
    <span><span>&lt;<span>div</span>
      <span>class</span>=<span>&#34;CellRenderer&#34;</span>
      <span>style:top</span>=<span>{this.$yPx}</span>
      <span>style:left</span>=<span>{this.$yPx}</span>
    &gt;</span>
      <span>&lt;<span>b</span>&gt;</span>Name: {this.$id}<span>&lt;/<span>b</span>&gt;</span>
      <span>&lt;<span>div</span>&gt;</span>Name: {this.$value}<span>&lt;/<span>div</span>&gt;</span>
    <span>&lt;/<span>div</span>&gt;</span></span>
  ); },
  <span>overrides</span>: {
  },
});
</pre></div>
<p>This would be extremely powerful, since it would allow these modules to be tracked in <code>git</code> or any other SCM, be linted
/ typechecked with existing tools like <code>eslint</code> / <code>typescript</code>, or even maybe built with standard tools like <code>esbuild</code>!</p>
<a id="building" href="#building"><h3>Building</h3></a>
<p>Or maybe building is something done by the app itself?</p>
<p>One way to &#34;build&#34; a module into an application/library would be to choose a single cell in a module as the &#34;entry
point&#34; and let its value be built in a number of ways:</p>
<ul>
<li>&#34;render&#34; the cell&#39;s value into HTML, which could give you an interactive web application</li>
<li>&#34;export&#34; the cell&#39;s value as an object which has <code>{get, set, subscribe}</code> methods, allowing code to read, write, and
subscribe to changes to a cell</li>
</ul>
<p>Perhaps that&#39;s all that&#39;s needed initially?</p>
<p>It&#39;d be interesting to see how debugging could also be done in this application. Under the hood all data is tracked in a
big dependency graph, so it should be possible to record all of the data in this graph over a period of time, which
could lead to a sort of &#34;time travel debugging&#34; experience.</p>
<p>Anyway, this is what I&#39;m building. I&#39;m nearly done getting functions working, which will be my next deploy.</p>

                </div></div>
  </body>
</html>
