<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://rust-for-linux.com/drm-panic-qr-code-generator">Original</a>
    <h1>DRM Panic QR code generator</h1>
    
    <div id="readability-page-1" class="page">
        <!-- Provide site root to javascript -->
        

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        

        <!-- Set the theme before any content is loaded, prevents flash -->
        

        <!-- Hide / unhide sidebar before it is displayed -->
        

        <nav id="sidebar" aria-label="Table of contents" aria-hidden="false">
            
        
    
            
        </nav>

        <div id="page-wrapper">

            <div class="page">
                                
                

                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                

                <div id="content">
                    <main>
                        
<p>This is a simple QR code generator, to display the panic data as a QR code. It is specific to the DRM panic use case, and supports only some parts of the QR code specification.</p>
<h2 id="why-a-qr-code-in-a-panic-screen"><a href="#why-a-qr-code-in-a-panic-screen">Why a QR code in a panic screen?</a></h2>
<p>Kernel panic traces are usually displayed on the screen, but then it&#39;s hard to copy and paste them to a bug report, so that a developer can take a look, and fix the bug.</p>
<p>As QR code are now widespread, using that allows to easily copy and paste the panic traces in a bug report, which makes debugging much easier for both the user and the kernel developer.</p>
<p>The QR code has a better pixel density than text, that means you can put more debug data into a QR code, than you can see as text only on a standard monitor.</p>
<h2 id="why-rust"><a href="#why-rust">Why Rust?</a></h2>
<p>This project was written in rust, because memory safety is critical in a panic handler.</p>
<p>The QR code encoder is self-contained and only uses the provided memory buffer, so there is no need to add complex bindings, and it was easy to merge it in the kernel.</p>
<p>For this particular case, I found the Rust code to be cleaner, and easier to read than the C equivalent, even if I&#39;m much more experienced in C.</p>
<h2 id="availability"><a href="#availability">Availability</a></h2>
<p>The code was <a href="https://git.kernel.org/linus/cb5164ac43d0fc37ac6b45cabbc4d244068289ef">merged</a> into Linux kernel version v6.12-rc1. Arch Linux will enable it soon in its <a href="https://gitlab.archlinux.org/archlinux/packaging/packages/linux/-/commit/39947637f309b0862a383733d5acf7ae55122d10">kernel</a>.</p>
<h2 id="side-projects"><a href="#side-projects">Side projects</a></h2>
<p>An example web frontend to decode the panic data from the QR code: <a href="https://github.com/kdj0c/panic_report">https://github.com/kdj0c/panic_report</a>.</p>
<p>A few samples of a panic screen with a QR code are available here: <a href="https://github.com/kdj0c/panic_report/issues/1">https://github.com/kdj0c/panic_report/issues/1</a>.</p>
<p>You can test the same code in a standalone rust app (outside the kernel): <a href="https://gitlab.com/kdj0c/qr_panic">https://gitlab.com/kdj0c/qr_panic</a>.</p>
<p>I try to keep it up-to-date with the latest Linux kernel.</p>
<h2 id="maintenance"><a href="#maintenance">Maintenance</a></h2>
<p>The main author of the QR code generator is Jocelyn Falempe &lt;<a href="mailto:jfalempe@redhat.com">jfalempe@redhat.com</a>&gt;, with help from the Rust for Linux community.</p>

                    </main>

                    <nav aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a aria-keyshortcuts="Left" aria-label="Previous chapter" href="https://rust-for-linux.com/asix-phy-driver" rel="prev" title="Previous chapter">
                                <i></i>
                            </a>

                            <a aria-keyshortcuts="Right" aria-label="Next chapter" href="https://rust-for-linux.com/nova-gpu-driver" rel="next" title="Next chapter">
                                <i></i>
                            </a>

                        
                    </nav>
                </div>
            </div>

            <nav aria-label="Page navigation">
                    <a aria-keyshortcuts="Left" aria-label="Previous chapter" href="https://rust-for-linux.com/asix-phy-driver" rel="prev" title="Previous chapter">
                        <i></i>
                    </a>

                    <a aria-keyshortcuts="Right" aria-label="Next chapter" href="https://rust-for-linux.com/nova-gpu-driver" rel="next" title="Next chapter">
                        <i></i>
                    </a>
            </nav>

        </div>




        


        
        
        

        
        
        

        <!-- Custom JS scripts -->


    

</div>
  </body>
</html>
