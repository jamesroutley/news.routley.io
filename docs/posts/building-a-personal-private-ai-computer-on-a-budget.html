<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://ewintr.nl/posts/2025/building-a-personal-private-ai-computer-on-a-budget/">Original</a>
    <h1>Building a personal, private AI computer on a budget</h1>
    
    <div id="readability-page-1" class="page"><div>




<p>As everyone is well aware, the world is still going nuts trying to develop more, newer and better AI tools. Mostly by throwing absurd amounts of money at the problem. Many of those billions go towards building cheap or free services that operate at a significant loss. The tech giants that run them all are hoping to attract as many users as possible, so that they can capture the market, and become the dominant or only party that can offer them. It is the classic Silicon Valley playbook. Once dominance is reached, expect the enshittification to begin.</p>
<p>A likely way to earn back all that money for developing these LLMs will be by tweaking their outputs to the liking of whoever pays the most. An example of what that such tweaking looks like is <a href="https://www.theguardian.com/technology/2025/jan/28/we-tried-out-deepseek-it-works-well-until-we-asked-it-about-tiananmen-square-and-taiwan">the refusal of DeepSeek&#39;s R1 to discuss what happened at Tiananmen Square in 1989</a>. That one is obviously politically motivated, but ad-funded services won&#39;t exactly be fun either. In the future, I fully expect to be able to have a frank and honest discussion about the Tiananmen events with an American AI agent, but the only one I can afford will have assumed the persona of Father Christmas who, while holding a can of Coca-Cola, will intersperse the recounting of the tragic events with a joyful <em>&#34;Ho ho ho... Didn&#39;t you know? The holidays are coming!&#34;</em></p>
<p>Or maybe that is too far-fetched. Right now, dispite all that money, the most popular service for code completion still <a href="https://github.com/orgs/community/discussions/72603">has trouble working with a couple of simple words, despite them being present in every dictionary</a>. There must be a bug in the &#34;free speech&#34;, or something.</p>
<p>But there is hope. One of the tricks of an upcoming player to shake up the market, is to undercut the incumbents by releasing their model for free, under a permissive license. This is what DeepSeek just did with their DeepSeek-R1. Google did it earlier with the Gemma models, as did Meta with Llama. We can download these models ourselves and run them on our own hardware. Better yet, people can take these models and scrub the biases from them. And we can download those <a href="https://huggingface.co/huihui-ai/Llama-3.3-70B-Instruct-abliterated">scrubbed models</a> and run those on our own hardware. And then we can finally have some truly useful LLMs.</p>
<p>That hardware can be a hurdle, though. There are two options to choose from if you want to run an LLM locally. You can get a big, powerful video card from Nvidia, or you can buy an Apple. Either is expensive. The main spec that indicates how well an LLM will perform is the amount of memory available. VRAM in the case of GPUs, normal RAM in the case of Apples. Bigger is better here. More RAM means bigger models, which will dramatically improve the quality of the output. Personally, I&#39;d say one needs at least over 24GB to be able to run anything useful. That will fit a 32 billion parameter model with a little headroom to spare. Building, or buying, a workstation that is equipped to handle that can easily cost thousands of euros.</p>
<p>So what to do, if you don&#39;t have that amount of money to spare? You buy second-hand! This is a viable option, but as always, there is no such thing as a free lunch. Memory may be the primary concern, but don&#39;t underestimate the importance of memory bandwidth and other specs. Older equipment will have lower performance on those aspects. But let&#39;s not worry too much about that now. I am interested in building something that at least can run the LLMs in a usable way. Sure, the latest Nvidia card might do it faster, but the point is to be able to do it at all. Powerful online models can be nice, but one should at the very least have the option to switch to a local one, if the situation calls for it.</p>
<p>Below is my attempt to build such a capable AI computer without spending too much. I ended up with a workstation with 48GB of VRAM that cost me around 1700 euros. I could have done it for less. For instance, it was not strictly necessary to buy a brand new dummy GPU (see below), or I could have found someone that would 3D print the cooling fan shroud for me, instead of shipping a ready-made one from a faraway country. I&#39;ll admit, I got a bit impatient at the end when I found out I had to buy yet another part to make this work. For me, this was an acceptable tradeoff.</p>
<h2 id="hardware">Hardware</h2>
<p>This is the full cost breakdown:</p>
<table><thead><tr><th>Part</th><th>Price</th><th></th></tr></thead><tbody>
<tr><td>2 x Nvidia Tesla P40</td><td>€ 659,98</td><td>GPUs</td></tr>
<tr><td>HP Z440 Workstation</td><td>€ 568,50</td><td>I already owned this</td></tr>
<tr><td>NZXT C850 Gold</td><td>€ 135,17</td><td>Power supply</td></tr>
<tr><td>Gainward GT 1030</td><td>€ 108,75</td><td>Dummy GPU</td></tr>
<tr><td>Nvidia Tesla Cooling Fan Kit</td><td>€ 98,51</td><td>Including shipping</td></tr>
<tr><td>MODDIY Main Power Adaptor Cable</td><td>€ 39,99</td><td>HP sucks</td></tr>
<tr><td>Akasa Multifan Adapter</td><td>€ 5,05</td><td>For the GPU fans</td></tr>
<tr><td>Total</td><td>€ 1695.15</td><td></td></tr>
</tbody></table>
<p>And this is what it looked liked when it first booted up with all the parts installed:</p>
<p><img src="https://ewintr.nl/posts/2025/building-a-personal-private-ai-computer-on-a-budget/first-boot.jpg" alt="First boot"/></p>
<p>I&#39;ll give some context on the parts below, and after that, I&#39;ll run a few quick tests to get some numbers on the performance.</p>
<h3 id="hp-z440-workstation">HP Z440 Workstation</h3>
<p>The Z440 was an easy pick because I already owned it. This was the starting point. About two years ago, I wanted a computer that could serve as a host for my virtual machines. The Z440 has a Xeon processor with 12 cores, and this one sports 128GB of RAM. Many threads and a lot of memory, that should work for hosting VMs. I bought it secondhand and then swapped the 512GB hard drive for a 6TB one to store those virtual machines. 6TB is not required for running LLMs, and therefore I did not include it in the breakdown. But if you plan to collect many models, 512GB might not be enough.</p>
<p>I have come to like this workstation. It feels all very solid, and I haven&#39;t had any problems with it. At least, until I started this project. It turns out that HP does not like competition, and I encountered some difficulties when swapping components.</p>
<h3 id="2-x-nvidia-tesla-p40">2 x NVIDIA Tesla P40</h3>
<p>This is the magic ingredient. GPUs are expensive. But, as with the HP Z440, often one can find older equipment, that used to be top of the line and is still very capable, second-hand, for relatively little money. These Teslas were meant to run in server farms, for things like 3D rendering and other graphic processing. They come equipped with 24GB of VRAM. Nice. They fit in a PCI-Express 3.0 x16 slot. The Z440 has two of those, so we buy two. Now we have 48GB of VRAM. Double nice.</p>
<p>The catch is the part about that they were meant for servers. They will work fine in the PCIe slots of a normal workstation, but in servers the cooling is managed differently. Beefy GPUs consume a lot of power and can run very hot. That is the reason consumer GPUs always come equipped with big fans. The cards need to take care of their own cooling. The Teslas, however, have no fans whatsoever. They get just as hot, but expect the server to supply a steady flow of air to cool them. The enclosure of the card is somewhat shaped like a pipe, and you have two options: blow in air from one side or blow it in from the other side. How is that for flexibility? You absolutely must blow some air into it, though, or you will damage it as soon as you put it to work.</p>
<p>The solution is simple: just mount a fan on one end of the pipe. And indeed, it seems a whole cottage industry has grown of people that sell 3D-printed shrouds that hold a standard 60mm fan in just the right place. The problem is, the cards themselves are already quite bulky, and it is not easy to find a configuration that fits two cards and two fan mounts in the computer case. The seller who sold me my two Teslas was kind enough to include two fans with shrouds, but there was no way I could fit all of those into the case. So what do we do? We buy more parts.</p>
<h3 id="nzxt-c850-gold">NZXT C850 Gold</h3>
<p>This is where things got annoying. The HP Z440 had a 700 Watt PSU, which might have been enough. But I wasn&#39;t sure, and I needed to buy a new PSU anyway because it did not have the right connectors to power the Teslas. Using <a href="https://www.whatpsu.com/">this</a> handy website, I deduced that 850 Watt would be sufficient, and I bought the NZXT C850. It is a modular PSU, meaning that you only need to plug in the cables that you actually need. It came with a neat bag to store the spare cables. One day, I might give it a good cleaning and use it as a toiletry bag.</p>
<p>Unfortunately, HP does not like things that are not HP, so they made it difficult to swap the PSU. It does not fit physically, and they also changed the main board and CPU connectors. All PSUs I have ever seen in my life are rectangular boxes. The HP PSU also is a rectangular box, but with a cutout, making sure that none of the normal PSUs will fit. For no technical reason at all. This is just to mess with you.</p>
<p>The mounting was eventually solved by using two random holes in the grill that I somehow managed to align with the screw holes on the NZXT. It sort of hangs stable now, and I feel lucky that this worked. I have seen Youtube videos where people resorted to double-sided tape.</p>
<p>The connector required... another purchase.</p>
<p><img src="https://ewintr.nl/posts/2025/building-a-personal-private-ai-computer-on-a-budget/psu.jpg" alt="PSU"/></p>
<p>Not cool HP.</p>
<h3 id="gainward-gt-1030">Gainward GT 1030</h3>
<p>There is another issue with using server GPUs in this consumer workstation. The Teslas are intended to crunch numbers, not to play video games with. Consequently, they don&#39;t have any ports to connect a monitor to. The BIOS of the HP Z440 does not like this. It refuses to boot if there is no way to output a video signal. This computer will run headless, but we have no other choice. We have to get a third video card, that we don&#39;t to intent to use ever, just to keep the BIOS happy.</p>
<p>This can be the most scrappy card that you can find, of course, but there is a requirement: we must make it fit on the main board. The Teslas are bulky and fill the two PCIe 3.0 x16 slots. The only slots left that can physically hold a card are one PCIe x4 slot and one PCIe x8 slot. See <a href="https://duropc.com/the-difference-between-pcie-x1-x4-x8-x16-and-x32">this website</a> for some background on what those names mean. One cannot buy any x8 card, though, because often even when a GPU is advertised as x8, the actual connector on it might be just as wide as an x16. Electronically it is an x8, physically it is an x16. That won&#39;t work on this main board, we really need the small connector.</p>
<h3 id="nvidia-tesla-cooling-fan-kit">Nvidia Tesla Cooling Fan Kit</h3>
<p>As said, the challenge is to find a fan shroud that fits in the case. After some searching, I found <a href="https://www.ebay.com/itm/313527520178">this kit</a> on Ebay an bought two of them. They came delivered complete with a 40mm fan, and it all fits perfectly.</p>
<p>Be warned that they make an awful lot of noise. You don&#39;t want to keep a computer with these fans under your desk.</p>
<p>To keep an eye on the temperature, I whipped up this quick script and put it in a cron job. It periodically reads out the temperature on the GPUs and sends that to my Homeassistant server:</p>
<pre data-lang="bash"><code data-lang="bash"><span>#!/bin/bash
</span><span>
</span><span># Configuration
</span><span>HA_URL</span><span>=</span><span>&#34;</span><span>http://localhost:8123</span><span>&#34;
</span><span>TOKEN</span><span>=</span><span>&#34;</span><span>&lt;your_long_lived_access_token&gt;</span><span>&#34;
</span><span>
</span><span># Function to send data to HA sensor
</span><span>send_to_ha</span><span>() {
</span><span>    </span><span>local </span><span>gpu_id</span><span>=</span><span>$</span><span>1
</span><span>    </span><span>local </span><span>temp</span><span>=</span><span>$</span><span>2
</span><span>
</span><span>    </span><span># Define the payload for the REST API call
</span><span>    </span><span>PAYLOAD</span><span>=</span><span>&#39;</span><span>{&#34;state&#34;: &#34;</span><span>&#39;&#34;</span><span>$</span><span>temp</span><span>&#34;&#39;</span><span>&#34;}</span><span>&#39;
</span><span>
</span><span>    </span><span># Send POST request to update the state of a sensor entity in HA
</span><span>    </span><span>curl -X</span><span> POST \
</span><span>         -H </span><span>&#34;</span><span>Authorization: Bearer $</span><span>TOKEN</span><span>&#34; </span><span>\
</span><span>         -H </span><span>&#34;</span><span>Content-Type: application/json</span><span>&#34; </span><span>\
</span><span>         </span><span>&#34;</span><span>$</span><span>HA_URL</span><span>/api/states/sensor.gpu_${</span><span>gpu_id</span><span>}_temp</span><span>&#34; </span><span>\
</span><span>         --data </span><span>&#34;</span><span>$</span><span>PAYLOAD</span><span>&#34;
</span><span>}
</span><span>
</span><span># Get GPU temperatures using nvidia-smi and send them to HA
</span><span>nvidia-smi -q </span><span>| </span><span>grep </span><span>&#39;</span><span>GPU Current Temp</span><span>&#39; </span><span>| </span><span>awk </span><span>&#39;</span><span>{print $5}</span><span>&#39; </span><span>| </span><span>while </span><span>read </span><span>-r</span><span> temp; </span><span>do
</span><span>    </span><span># Assuming GPUs are indexed from 0 upwards
</span><span>    </span><span>gpu_id</span><span>=</span><span>$(($</span><span>gpu_id </span><span>+ </span><span>1</span><span>))
</span><span>    </span><span>if </span><span>[ </span><span>&#34;</span><span>$</span><span>temp</span><span>&#34; </span><span>]; </span><span>then
</span><span>        </span><span>send_to_ha </span><span>$(($</span><span>gpu_id </span><span>- </span><span>1</span><span>)) </span><span>&#34;</span><span>$</span><span>temp</span><span>&#34;
</span><span>    </span><span>fi
</span><span>done
</span><span>
</span><span># Reset GPU index counter (optional)
</span><span>unset gpu_id
</span></code></pre>
<p>In Homeassistant I added a graph to the dashboard that displays the values over time:</p>
<p><img src="https://ewintr.nl/posts/2025/building-a-personal-private-ai-computer-on-a-budget/gpu-temp.png" alt="GPU temperature"/></p>
<p>As one can see, the fans were noisy, but not particularly effective. 90 degrees is far too hot. I searched the internet for a reasonable upper limit but could not find anything specific. The documentation on the Nvidia site mentions a temperature of 47 degrees Celsius. But, what they mean by that is the temperature of the ambient air surrounding the GPU, not the measured value on the chip. You know, the number that actually is reported. Thanks, Nvidia. That was helpful.</p>
<p>After some further searching and reading the opinions of my fellow internet citizens, my guess is that things will be fine, provided that we keep it in the lower 70s. But don&#39;t quote me on that.</p>
<p>My first attempt to remedy the situation was by setting a maximum to the power consumption of the GPUs. According to <a href="https://old.reddit.com/r/LocalLLaMA/comments/1anh0vi/nvidia_p40_save_50_power_for_only_15_less/">this Reddit thread</a>, one can lower the power consumption of the cards by 45% at the cost of only 15% of the performance. I tried it and... did not notice any difference at all. I wasn&#39;t sure about the drop in performance, having only a couple of minutes of experience with this configuration at that point, but the temperature characteristics were definitely unchanged.</p>
<p>And then a light bulb flashed on in my head. You see, just before the GPU fans, there is a fan in the HP Z440 case. In the photo above, it is in the right corner, inside the black box. This is a fan that sucks air into the case, and I figured this would work in tandem with the GPU fans that blow air into the Teslas. But this case fan was not spinning at all, because the rest of the computer did not need any cooling. Looking into the BIOS, I found a setting for the <em>minimum idle speed</em> of the case fans. It ranged from 0 to 6 stars and was currently set to 0. Putting it at a higher setting did wonders for the temperature. It also made more noise.</p>
<p>I&#39;ll reluctantly admit that the third video card was helpful when adjusting the BIOS setting.</p>
<h3 id="moddiy-main-power-adaptor-cable-and-akasa-multifan-adaptor">MODDIY Main Power Adaptor Cable and Akasa Multifan Adaptor</h3>
<p>Fortunately, sometimes things just work. These two items were plug and play. The MODDIY adaptor cable connected the PSU to the main board and CPU power sockets.</p>
<p>I used the Akasa to power the GPU fans from a 4-pin Molex. It has the nice feature that it can power two fans with 12V and two with 5V. The latter obviously reduces the speed and thus the cooling power of the fan. But it also reduces noise. Fiddling a bit with this and the case fan setting, I found an acceptable tradeoff between noise and temperature. For now at least. Maybe I will need to revisit this in the summer.</p>
<h2 id="some-numbers">Some numbers</h2>
<p>Inference speed. I collected these numbers by running <code>ollama</code> with the <code>--verbose</code> flag and asking it five times to write a story and averaging the result:</p>
<pre><code><span>$ ollama run gemma2:27b --verbose
</span><span>&gt;&gt;&gt; Can you write me a story about a tortoise and a hare, but one
</span><span>that involves a race to get the most tokens per second?
</span></code></pre>
<p>Performancewise, <code>ollama</code> is configured with:</p>
<pre><code><span>OLLAMA_FLASH_ATTENTION=1
</span><span>OLLAMA_KV_CACHE_TYPE=q8_0
</span></code></pre>
<p>All models have the default quantization that <code>ollama</code> will pull for you if you don&#39;t specify anything.</p>
<table><thead><tr><th>Model</th><th>Max power</th><th>Tokens per second</th></tr></thead><tbody>
<tr><td>mistral-small:24b</td><td>250W</td><td>15.23</td></tr>
<tr><td>mistral-small:24b</td><td>140W</td><td>13.95</td></tr>
<tr><td>gemma2:27b</td><td>250W</td><td>13.90</td></tr>
<tr><td>gemma2:27b</td><td>140W</td><td>13.50</td></tr>
<tr><td>qwen2.5-coder:32b</td><td>250W</td><td>10.75</td></tr>
<tr><td>qwen2.5-coder:32b</td><td>140W</td><td>10.60</td></tr>
<tr><td>llama3.3:70b</td><td>250W</td><td>5.35</td></tr>
<tr><td>llama3.3:70b</td><td>140W</td><td>5.00</td></tr>
<tr><td>deepseek-r1:70b</td><td>250W</td><td>5.30</td></tr>
<tr><td>deepseek-r1:70b</td><td>140W</td><td>4.94</td></tr>
</tbody></table>
<p>Another important finding: Terry is by far the most popular name for a tortoise, followed by Turbo and Toby. Harry is a favorite for hares. All LLMs are loving alliteration.</p>
<h3 id="power-consumption">Power consumption</h3>
<p>Over the days I kept an eye on the power consumption of the workstation:</p>
<table><thead><tr><th>State</th><th>Power</th></tr></thead><tbody>
<tr><td>Idle</td><td>80W</td></tr>
<tr><td>32b model loaded</td><td>123W</td></tr>
<tr><td>32b model working</td><td>241W</td></tr>
<tr><td>70b model loaded</td><td>166W</td></tr>
<tr><td>70b model working</td><td>293W</td></tr>
</tbody></table>
<p>Note that these numbers were taken with the 140W power cap active.</p>
<p>As one can see, there is another tradeoff to be made. Keeping the model on the card improves latency, but consumes more power. My current setup is to have two models loaded, one for coding, the other for generic text processing, and keep them on the GPU for up to an hour after last use.</p>
<h2 id="conclusion">Conclusion</h2>
<p>After all that, am I happy that I started this project? Yes, I think I am.</p>
<p>I spent a bit more money than planned, but I got what I wanted: a way of locally running medium-sized models, completely under my own control.</p>
<p>It was a good choice to start with the workstation I already owned, and see how far I could come with that. If I had started with a new machine from scratch, it definitely would have cost me more. It would have taken me much longer too, as there would have been many more options to choose from. I would also have been very tempted to follow the hype and buy the latest and greatest of everything. New and shiny toys are fun. But if I buy something new, I want it to last for years. Confidently predicting where AI will go in 5 years time is impossible right now, so having a cheaper machine, that will last at least some while, feels satisfactory to me.</p>
<p>I wish you good luck on your own AI journey. I&#39;ll report back if I find something new or interesting.</p>


</div></div>
  </body>
</html>
