<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://hitchdev.com/strictyaml/">Original</a>
    <h1>StrictYAML</h1>
    
    <div id="readability-page-1" class="page"><div data-md-component="container">
      
      
        
          
        
      
      <main data-md-component="main">
        <div>
          
            
              
              
            
            
              
              
            
          
          <div data-md-component="content">
            <article>
              
                
                
                  
                
                <p><img alt="GitHub Repo stars" src="https://img.shields.io/github/stars/crdoconnor/strictyaml?style=social"/> 
<img alt="PyPI - Downloads" src="https://img.shields.io/pypi/dm/strictyaml"/></p>
<p>StrictYAML is a <a href="https://en.wikipedia.org/wiki/Type_safety">type-safe</a> YAML parser
that parses and validates a <a href="https://hitchdev.com/strictyaml/features-removed">restricted subset</a> of the <a href="https://hitchdev.com/strictyaml/what-is-yaml">YAML</a>
specification.</p>
<p>Priorities:</p>
<ul>
<li>Beautiful API</li>
<li>Refusing to parse <a href="https://hitchdev.com/strictyaml/features-removed">the ugly, hard to read and insecure features of YAML</a> like <a href="https://hitchdev.com/strictyaml/why/implicit-typing-removed">the Norway problem</a>.</li>
<li>Strict validation of markup and straightforward type casting.</li>
<li>Clear, readable exceptions with <strong>code snippets</strong> and <strong>line numbers</strong>.</li>
<li>Acting as a near-drop in replacement for pyyaml, ruamel.yaml or poyo.</li>
<li>Ability to read in YAML, make changes and write it out again with comments preserved.</li>
<li><a href="https://hitchdev.com/strictyaml/why/speed-not-a-priority">Not speed</a>, currently.</li>
</ul>
<p>Simple example:</p>
<div><pre><span></span><code><span># All about the character</span>
<span>name</span><span>:</span> <span>Ford Prefect</span>
<span>age</span><span>:</span> <span>42</span>
<span>possessions</span><span>:</span>
<span>-</span> <span>Towel</span>
</code></pre></div>
<div><pre><span></span><code><span>from</span> <span>strictyaml</span> <span>import</span> <span>load</span><span>,</span> <span>Map</span><span>,</span> <span>Str</span><span>,</span> <span>Int</span><span>,</span> <span>Seq</span><span>,</span> <span>YAMLError</span>
</code></pre></div>
<p>Default parse result:</p>
<div><pre><span></span><code><span>&gt;&gt;&gt;</span> <span>load</span><span>(</span><span>yaml_snippet</span><span>)</span>
<span>YAML</span><span>({</span><span>&#39;name&#39;</span><span>:</span> <span>&#39;Ford Prefect&#39;</span><span>,</span> <span>&#39;age&#39;</span><span>:</span> <span>&#39;42&#39;</span><span>,</span> <span>&#39;possessions&#39;</span><span>:</span> <span>[</span><span>&#39;Towel&#39;</span><span>]})</span>
</code></pre></div>
<p>All data is string, list or OrderedDict:</p>
<div><pre><span></span><code><span>&gt;&gt;&gt;</span> <span>load</span><span>(</span><span>yaml_snippet</span><span>)</span><span>.</span><span>data</span>
<span>{</span><span>&#39;name&#39;</span><span>:</span> <span>&#39;Ford Prefect&#39;</span><span>,</span> <span>&#39;age&#39;</span><span>:</span> <span>&#39;42&#39;</span><span>,</span> <span>&#39;possessions&#39;</span><span>:</span> <span>[</span><span>&#39;Towel&#39;</span><span>]}</span>
</code></pre></div>
<p>Quickstart with schema:</p>
<div><pre><span></span><code><span>from</span> <span>strictyaml</span> <span>import</span> <span>load</span><span>,</span> <span>Map</span><span>,</span> <span>Str</span><span>,</span> <span>Int</span><span>,</span> <span>Seq</span><span>,</span> <span>YAMLError</span>

<span>schema</span> <span>=</span> <span>Map</span><span>({</span><span>&#34;name&#34;</span><span>:</span> <span>Str</span><span>(),</span> <span>&#34;age&#34;</span><span>:</span> <span>Int</span><span>(),</span> <span>&#34;possessions&#34;</span><span>:</span> <span>Seq</span><span>(</span><span>Str</span><span>())})</span>
</code></pre></div>
<p>42 is now parsed as an integer:</p>
<div><pre><span></span><code><span>&gt;&gt;&gt;</span> <span>person</span> <span>=</span> <span>load</span><span>(</span><span>yaml_snippet</span><span>,</span> <span>schema</span><span>)</span>
<span>&gt;&gt;&gt;</span> <span>person</span><span>.</span><span>data</span>
<span>{</span><span>&#39;name&#39;</span><span>:</span> <span>&#39;Ford Prefect&#39;</span><span>,</span> <span>&#39;age&#39;</span><span>:</span> <span>42</span><span>,</span> <span>&#39;possessions&#39;</span><span>:</span> <span>[</span><span>&#39;Towel&#39;</span><span>]}</span>
</code></pre></div>
<p>A YAMLError will be raised if there are syntactic problems, violations of your schema or use of disallowed YAML features:</p>
<div><pre><span></span><code><span># All about the character</span>
<span>name</span><span>:</span> <span>Ford Prefect</span>
<span>age</span><span>:</span> <span>42</span>
</code></pre></div>
<p>For example, a schema violation:</p>
<div><pre><span></span><code><span>try</span><span>:</span>
    <span>person</span> <span>=</span> <span>load</span><span>(</span><span>yaml_snippet</span><span>,</span> <span>schema</span><span>)</span>
<span>except</span> <span>YAMLError</span> <span>as</span> <span>error</span><span>:</span>
    <span>print</span><span>(</span><span>error</span><span>)</span>
</code></pre></div>
<div><pre><span></span><code><span>while parsing a mapping</span>
  <span>in &#34;&lt;unicode string&gt;&#34;, line 1, column 1</span><span>:</span>
    <span># All about the character</span>
     <span>^ (line</span><span>:</span> <span>1)</span>
<span>required key(s) &#39;possessions&#39; not found</span>
  <span>in &#34;&lt;unicode string&gt;&#34;, line 3, column 1</span><span>:</span>
    <span>age</span><span>:</span> <span>&#39;42&#39;</span>
    <span>^ (line</span><span>:</span> <span>3)</span>
</code></pre></div>
<p>If parsed correctly:</p>
<div><pre><span></span><code><span>from</span> <span>strictyaml</span> <span>import</span> <span>load</span><span>,</span> <span>Map</span><span>,</span> <span>Str</span><span>,</span> <span>Int</span><span>,</span> <span>Seq</span><span>,</span> <span>YAMLError</span><span>,</span> <span>as_document</span>

<span>schema</span> <span>=</span> <span>Map</span><span>({</span><span>&#34;name&#34;</span><span>:</span> <span>Str</span><span>(),</span> <span>&#34;age&#34;</span><span>:</span> <span>Int</span><span>(),</span> <span>&#34;possessions&#34;</span><span>:</span> <span>Seq</span><span>(</span><span>Str</span><span>())})</span>
</code></pre></div>
<p>You can modify values and write out the YAML with comments preserved:</p>
<div><pre><span></span><code><span>person</span> <span>=</span> <span>load</span><span>(</span><span>yaml_snippet</span><span>,</span> <span>schema</span><span>)</span>
<span>person</span><span>[</span><span>&#39;age&#39;</span><span>]</span> <span>=</span> <span>43</span>
<span>print</span><span>(</span><span>person</span><span>.</span><span>as_yaml</span><span>())</span>
</code></pre></div>
<div><pre><span></span><code><span># All about the character</span>
<span>name</span><span>:</span> <span>Ford Prefect</span>
<span>age</span><span>:</span> <span>43</span>
<span>possessions</span><span>:</span>
<span>-</span> <span>Towel</span>
</code></pre></div>
<p>As well as look up line numbers:</p>
<div><pre><span></span><code><span>&gt;&gt;&gt;</span> <span>person</span> <span>=</span> <span>load</span><span>(</span><span>yaml_snippet</span><span>,</span> <span>schema</span><span>)</span>
<span>&gt;&gt;&gt;</span> <span>person</span><span>[</span><span>&#39;possessions&#39;</span><span>][</span><span>0</span><span>]</span><span>.</span><span>start_line</span>
<span>5</span>
</code></pre></div>
<p>And construct YAML documents from dicts or lists:</p>
<div><pre><span></span><code><span>print</span><span>(</span><span>as_document</span><span>({</span><span>&#34;x&#34;</span><span>:</span> <span>1</span><span>})</span><span>.</span><span>as_yaml</span><span>())</span>
</code></pre></div>

<h2 id="install">Install</h2>

<h2 id="why-strictyaml">Why StrictYAML?</h2>
<p>There are a number of formats and approaches that can achieve more or
less the same purpose as StrictYAML. I&#39;ve tried to make it the best one.
Below is a series of documented justifications:</p>
<ul>
<li><a href="https://hitchdev.com/strictyaml/why-not/environment-variables-as-config">Why avoid using environment variables as configuration?</a></li>
<li><a href="https://hitchdev.com/strictyaml/why-not/hjson">Why not use HJSON?</a></li>
<li><a href="https://hitchdev.com/strictyaml/why-not/hocon">Why not HOCON?</a></li>
<li><a href="https://hitchdev.com/strictyaml/why-not/ini">Why not use INI files?</a></li>
<li><a href="https://hitchdev.com/strictyaml/why-not/json-schema">Why not use JSON Schema for validation?</a></li>
<li><a href="https://hitchdev.com/strictyaml/why-not/json">Why not JSON for simple configuration files?</a></li>
<li><a href="https://hitchdev.com/strictyaml/why-not/json5">Why not JSON5?</a></li>
<li><a href="https://hitchdev.com/strictyaml/why-not/ordinary-yaml">Why not use the YAML 1.2 standard? - we don&#39;t need a new standard!</a></li>
<li><a href="https://hitchdev.com/strictyaml/why-not/pykwalify">Why not use kwalify with standard YAML to validate my YAML?</a></li>
<li><a href="https://hitchdev.com/strictyaml/why-not/python-schema">Why not use Python&#39;s schema library (or similar) for validation?</a></li>
<li><a href="https://hitchdev.com/strictyaml/why-not/sdlang">Why not use SDLang?</a></li>
<li><a href="https://hitchdev.com/strictyaml/why-not/toml">What is wrong with TOML?</a></li>
<li><a href="https://hitchdev.com/strictyaml/why-not/turing-complete-code">Why shouldn&#39;t I just use Python code for configuration?</a></li>
<li><a href="https://hitchdev.com/strictyaml/why-not/xml">Why not use XML for configuration or DSLs?</a></li>
</ul>
<h2 id="using-strictyaml">Using StrictYAML</h2>
<p>How to:</p>
<ul>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/howto/build-yaml-document">Build a YAML document from scratch in code</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/howto/either-or-validation">Either/or schema validation of different, equally valid different kinds of YAML</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/howto/label-exceptions">Labeling exceptions</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/howto/merge-yaml-documents">Merge YAML documents</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/howto/revalidation">Revalidate an already validated document</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/howto/roundtripping">Reading in YAML, editing it and writing it back out</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/howto/what-line">Get line numbers of YAML elements</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/howto/without-a-schema">Parsing YAML without a schema</a></li>
</ul>
<p>Compound validators:</p>
<ul>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/compound/fixed-length-sequences">Fixed length sequences (FixedSeq)</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/compound/map-combined">Mappings combining defined and undefined keys (MapCombined)</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/compound/map-pattern">Mappings with arbitrary key names (MapPattern)</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/compound/mapping-with-slug-keys">Mapping with defined keys and a custom key validator (Map)</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/compound/mapping-yaml-object">Using a YAML object of a parsed mapping</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/compound/mapping">Mappings with defined keys (Map)</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/compound/optional-keys-with-defaults">Optional keys with defaults (Map/Optional)</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/compound/optional-keys">Validating optional keys in mappings (Map)</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/compound/sequences-of-unique-items">Sequences of unique items (UniqueSeq)</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/compound/sequences">Sequence/list validator (Seq)</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/compound/update">Updating document with a schema</a></li>
</ul>
<p>Scalar validators:</p>
<ul>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/scalar/boolean">Boolean (Bool)</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/scalar/comma-separated">Parsing comma separated items (CommaSeparated)</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/scalar/datetime">Datetimes (Datetime)</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/scalar/decimal">Decimal numbers (Decimal)</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/scalar/email-and-url">Email and URL validators</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/scalar/empty">Empty key validation</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/scalar/enum">Enumerated scalars (Enum)</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/scalar/float">Floating point numbers (Float)</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/scalar/hexadecimal-integer">Hexadecimal Integers (HexInt)</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/scalar/integer">Integers (Int)</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/scalar/regular-expressions">Validating strings with regexes (Regex)</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/scalar/string">Parsing strings (Str)</a></li>
</ul>
<p>Restrictions:</p>
<ul>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/restrictions/disallowed-yaml">Disallowed YAML</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/restrictions/duplicate-keys">Duplicate keys</a></li>
<li><a href="https://hitchdev.com/strictyaml/using/alpha/restrictions/loading-dirty-yaml">Dirty load</a></li>
</ul>
<h2 id="design-justifications">Design justifications</h2>
<p>There are some design decisions in StrictYAML which are controversial
and/or not obvious. Those are documented here:</p>
<ul>
<li><a href="https://hitchdev.com/strictyaml/why/duplicate-keys-disallowed">What is wrong with duplicate keys?</a></li>
<li><a href="https://hitchdev.com/strictyaml/why/explicit-tags-removed">What is wrong with explicit tags?</a></li>
<li><a href="https://hitchdev.com/strictyaml/why/flow-style-removed">What is wrong with flow-style YAML?</a></li>
<li><a href="https://hitchdev.com/strictyaml/why/implicit-typing-removed">The Norway Problem - why StrictYAML refuses to do implicit typing and so should you</a></li>
<li><a href="https://hitchdev.com/strictyaml/why/node-anchors-and-references-removed">What is wrong with node anchors and references?</a></li>
<li><a href="https://hitchdev.com/strictyaml/why/not-parse-direct-representations-of-python-objects">Why does StrictYAML not parse direct representations of Python objects?</a></li>
<li><a href="https://hitchdev.com/strictyaml/why/only-parse-strings-not-files">Why does StrictYAML only parse from strings and not files?</a></li>
<li><a href="https://hitchdev.com/strictyaml/why/speed-not-a-priority">Why is parsing speed not a high priority for StrictYAML?</a></li>
<li><a href="https://hitchdev.com/strictyaml/why/syntax-typing-bad">What is syntax typing?</a></li>
<li><a href="https://hitchdev.com/strictyaml/why/turing-complete-schema">Why does StrictYAML make you define a schema in Python - a Turing-complete language?</a></li>
</ul>
<h2 id="star-contributors">Star Contributors</h2>
<ul>
<li>@wwoods</li>
<li>@chrisburr</li>
<li>@jnichols0</li>
</ul>
<h2 id="other-contributors">Other Contributors</h2>
<ul>
<li>@eulores</li>
<li>@WaltWoods</li>
<li>@ChristopherGS</li>
<li>@gvx</li>
<li>@AlexandreDecan</li>
<li>@lots0logs</li>
<li>@tobbez</li>
<li>@jaredsampson</li>
<li>@BoboTIG</li>
</ul>
<p>StrictYAML also includes code from <a href="https://yaml.readthedocs.io/en/latest/">ruamel.yaml</a>, Copyright Anthon van der Neut.</p>
<h2 id="contributing">Contributing</h2>
<ul>
<li>Before writing any code, please read the tutorial on <a href="https://hitchdev.com/approach/contributing-to-hitch-libraries/">contributing to hitchdev libraries</a>.</li>
<li>Before writing any code, if you&#39;re proposing a new feature, please raise it on github. If it&#39;s an existing feature / bug, please comment and briefly describe how you&#39;re going to implement it.</li>
<li>All code needs to come accompanied with a story that exercises it or a modification to an existing story. This is used both to test the code and build the documentation.</li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        

      
    </div></div>
  </body>
</html>
