<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.bitecode.dev/p/whats-up-python-epic-cpython-commit">Original</a>
    <h1>What&#39;s up Python? Epic CPython commit, Django 5 and 2FA for PyPI</h1>
    
    <div id="readability-page-1" class="page"><div><div><article><div class=""><div><div dir="auto"><ul><li><p><em>The best CPython commit of 2023</em></p></li><li><p><em>Django version 5</em></p></li><li><p><em>2FA gets mandatory on pypi for 2024</em></p></li><li><p><em>A proposal to clean up the logging module API</em></p></li></ul><p><span>Performance has been a busy topic this year, and </span><a href="https://www.bitecode.dev/p/whats-up-python-new-args-syntax-subinterpreters" rel="">we mentioned last month</a><span> the future JIT that was planned for 3.13.</span></p><p><span>With change </span><a href="https://github.com/python/cpython/pull/113465" rel="">GH-113464</a><span>, Brandt Bucher offers the whole community the Xmas gift of the first JIT related merge proposal.</span></p><p>Even if you don&#39;t intend to read the code, I strongly encourage you to read the commit message as it&#39;s made with a cheerful holiday spirit.</p><p><span>Since 3.13 alpha 2 is </span><a href="https://pythoninsider.blogspot.com/2023/11/python-3130-alpha-2-is-now-available.html" rel="">out of the oven</a><span>, it&#39;s all well in sync.</span></p><p><span>It&#39;s also a good time to remind you once again that 3.13 </span><a href="https://docs.python.org/dev/whatsnew/3.12.html#pending-removal-in-python-3-13" rel="">will deprecate a lot of things</a><span>, although there has been </span><a href="https://vstinner.github.io/remove-c-api-funcs-313.html" rel="">some push back on that side</a><span>, as people reminded Victor Stinner he is, as usual, a bit too enthusiastic about deleting stuff.</span></p><p><span>And since I&#39;m on the topic, </span><a href="https://www.python.org/downloads/release/python-3117/" rel="">3.11.7</a><span> and </span><a href="https://www.python.org/downloads/release/python-3121/" rel="">3.12.1</a><span> were also released. Those are bug fixes of course, but if you don&#39;t follow my advice to </span><a href="https://www.bitecode.dev/i/112502596/first-decide-on-the-version-of-python-you-need" rel="">stay one version behind</a><span>, at least I hope you waited until 3.12.1 because 3.x.0 are always full of holes.</span></p><p><span>Since you know now that </span><a href="https://www.bitecode.dev/p/beginners-should-use-django-not-flask" rel="">beginners should use Django and not Flask</a><span>, maybe you will be very interested that the latest release of the web framework </span><a href="https://docs.djangoproject.com/en/5.0/releases/5.0/" rel="">dropped this month</a><span>. </span></p><p>On the menu:</p><ul><li><p>The ORM used to allow dynamic default values for any field, but expected a Python function to provide them. We can now declare that the database should generate them. E.G:</p></li></ul><pre><code><code>from django.db import models
from django.db.models.functions import Now, Pi


class MyModel(models.Model):
    age = models.IntegerField(db_default=18)
    created = models.DateTimeField(db_default=Now())
    circumference = models.FloatField(db_default=2 * Pi())</code></code></pre><ul><li><p>Following in the same trend, the ORM now has a way for you to define fields generated on the database side, such as a field made from other fields. E.G:</p></li></ul><pre><code><code>from django.db import models
from django.db.models import F


class Square(models.Model):
    side = models.IntegerField()
    area = models.GeneratedField(
        expression=F(&#34;side&#34;) * F(&#34;side&#34;),
        output_field=models.BigIntegerField(),
        db_persist=True,
    )</code></code></pre><ul><li><p>Templates for form rendering have been simplified: you can now decide the granularity of what part of the form you want to customize, using field groups.</p></li><li><p><code>UUIDField</code><span> uses a correct UUID column on MariaDB 10.7.</span></p></li><li><p>Django now supports oracledb version 1.3.2 or higher, but cx_Oracle support is deprecated.</p></li><li><p>The asynchronous work in progress continues, with many more features supporting it, such as authentication or view decorators.</p></li></ul><p>Django 5 drops support for Python 3.9 and bellow, though, so if you use those, stay on the 4.2.X series.</p><p><span>New users of pypi had recently to activate 2FA to be able to manage their account. This test has proven successful, and given t</span><a href="https://blog.pypi.org/posts/2023-12-04-account-takeover/" rel="">he regular attacks on pypi</a><span>, </span><a href="https://blog.pypi.org/posts/2023-12-13-2fa-enforcement/" rel="">2FA will be rolled out for </a><strong><a href="https://blog.pypi.org/posts/2023-12-13-2fa-enforcement/" rel="">all users</a></strong><a href="https://blog.pypi.org/posts/2023-12-13-2fa-enforcement/" rel=""> in 2024</a><span>.</span></p><p>You have the choice between a security key like a yubikey, or a TOTP code.</p><p>I just tested the procedure, and it took only a few minutes, despite having 4 yubikeys and 2 TOTP apps to configure.</p><p>Very well implemented.</p><p><span>I have a love/hate relationship with the stdlib </span><a href="https://docs.python.org/3/library/logging.html" rel="">logging</a><span> module. On one hand, it means Python ships with a rich, versatile, fully functional logging module out of the box, that is so configurable you can pretty much do anything with it, and it&#39;s thread safe by default! It&#39;s kinda amazing, and rare enough to state it.</span></p><p>On the other hand, the API is terrible. It&#39;s verbose, counterintuitive, has bad default values, and is written in camel Case.</p><p><a href="https://github.com/metaperl/peps/blob/main/peps/pep-8106.rst" rel="">The draft of PEP 8106</a><span> aims to change this very last point, and at least provide a version of logging that would be PEP8 compliant. The idea is not to remove the old API, but at to come up with aliases that don&#39;t make you feel like you coding in 1998 Java.</span></p><p><span>So </span><code>logging.basicConfig</code><span> would also be available as </span><code>logging.basic_config</code><span>, </span><code>Logger.setLevel</code><span> would be available also as </span><code>Logger.set_level</code><span>, and so on.</span></p><p><span>The PEP is very bare bone and doesn&#39;t have a sponsor yet, so I wouldn&#39;t expect it to go very far. Plus, I&#39;m not saying this is the right solution. An </span><code>os.path</code><span> to </span><code>pathlib</code><span> new wrapper module would sit better with me.</span></p><p>But I like the fact it&#39;s shaking this tree.</p></div></div></div></article></div></div></div>
  </body>
</html>
