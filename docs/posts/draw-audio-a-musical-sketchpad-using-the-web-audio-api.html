<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://draw.audio">Original</a>
    <h1>Show HN: Draw.Audio – A musical sketchpad using the Web Audio API</h1>
    
    <div id="readability-page-1" class="page"><div id="quartz-body"><div><article><p><a href="https://leetcode.com/problems/valid-palindrome/">Valid Palindrome on leet code<svg aria-hidden="true" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>

<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="javascript" data-theme="github-light github-dark"><code data-language="javascript" data-theme="github-light github-dark"><span data-line=""><span>/**</span></span>
<span data-line=""><span> * </span><span>@param</span><span> {string}</span><span> s</span></span>
<span data-line=""><span> * </span><span>@return</span><span> {boolean}</span></span>
<span data-line=""><span> */</span></span>
<span data-line=""><span> </span></span>
<span data-line=""><span>var</span><span> isPalindrome</span><span> =</span><span> function</span><span>(</span><span>s</span><span>) {</span></span>
<span data-line=""><span>  let</span><span> n </span><span>=</span><span> s.</span><span>toLowerCase</span><span>().</span><span>replace</span><span>(</span><span>/</span><span>[</span><span>^</span><span>a-z]</span><span>/</span><span>g</span><span>, </span><span>&#39;&#39;</span><span>);</span></span>
<span data-line=""> </span>
<span data-line=""><span>  if</span><span> (n.</span><span>length</span><span> %</span><span> 2</span><span> ===</span><span> 0</span><span>){</span></span>
<span data-line=""><span>    let</span><span> firstHalf </span><span>=</span><span> n.</span><span>slice</span><span>(</span><span>0</span><span>, n.</span><span>length</span><span> /</span><span> 2</span><span>)</span></span>
<span data-line=""><span>    let</span><span> arr </span><span>=</span><span> firstHalf.</span><span>split</span><span>(</span><span>&#34;&#34;</span><span>)</span></span>
<span data-line=""><span>    arr.</span><span>reverse</span><span>()</span></span>
<span data-line=""><span>    let</span><span> arr2 </span><span>=</span><span> arr.</span><span>join</span><span>(</span><span>&#34;&#34;</span><span>)</span></span>
<span data-line=""><span>    console.</span><span>log</span><span>(arr2)</span></span>
<span data-line=""><span>    if</span><span> (arr2 </span><span>===</span><span> n.</span><span>slice</span><span>(n.</span><span>length</span><span>/</span><span>2</span><span>, n.</span><span>length</span><span>)){</span></span>
<span data-line=""><span>      return</span><span> true</span></span>
<span data-line=""><span>    }</span></span>
<span data-line=""><span>  } </span><span>else</span><span> {</span></span>
<span data-line=""><span>    let</span><span> firstHalf </span><span>=</span><span> n.</span><span>slice</span><span>(</span><span>0</span><span>, (n.</span><span>length</span><span>-</span><span>1</span><span>) </span><span>/</span><span> 2</span><span>)</span></span>
<span data-line=""><span>    let</span><span> arr </span><span>=</span><span> firstHalf.</span><span>split</span><span>(</span><span>&#34;&#34;</span><span>)</span></span>
<span data-line=""><span>    arr.</span><span>reverse</span><span>()</span></span>
<span data-line=""><span>    let</span><span> arr2 </span><span>=</span><span> arr.</span><span>join</span><span>(</span><span>&#34;&#34;</span><span>)</span></span>
<span data-line=""><span>    if</span><span> (arr2 </span><span>===</span><span> n.</span><span>slice</span><span>((n.</span><span>length</span><span> -</span><span> 1</span><span>)</span><span>/</span><span>2</span><span> +</span><span> 1</span><span>, n.</span><span>length</span><span>)){</span></span>
<span data-line=""><span>      return</span><span> true</span></span>
<span data-line=""><span>    }</span></span>
<span data-line=""><span>  }</span></span>
<span data-line=""> </span>
<span data-line=""><span>  return</span><span> false</span></span>
<span data-line=""><span>};</span></span></code></pre></figure>
<p>Very close! Far from eloquent, but for me, eloquence comes easiest with iteration. I was quick to index in on the problem, which was the the description asks for <em>alphanumeric</em> parsing, and I only did the <em>alpha</em> part of that.</p>
<p>Unfortunately, I made a silly mistake, and hastily replaced my <code>a-z</code> to <code>a-z1-9</code>, not even noticing that of course <code>0</code> is omitted from that range. So…very quickly fixed it, but then wasted 7 minutes in realizing how my fix was inadequate. I THEN preceded to almost rewrite the second half of the entire algorithm, not even thinking about how this is actually an <em>even</em> case anyways.</p>

<p>I returned to this really hungry to understand the basics of regex so I went into it here <a href="https://elijer.github.io/garden/devnotes/Regex-Baby-Steps" data-slug="devnotes/Regex-Baby-Steps">Regex Baby Steps</a>. After playing around a bit, I got this:</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="ts" data-theme="github-light github-dark"><code data-language="ts" data-theme="github-light github-dark"><span data-line=""><span>function</span><span> isPalindrome</span><span>(</span><span>s</span><span>:</span><span> string</span><span>)</span><span>:</span><span> boolean</span><span> {</span></span>
<span data-line=""><span>    const</span><span> str</span><span> =</span><span> s.</span><span>replace</span><span>(</span><span>/</span><span>[\W_]</span><span>+</span><span>/</span><span>g</span><span>, </span><span>&#39;&#39;</span><span>).</span><span>toLowerCase</span><span>()</span></span>
<span data-line=""><span>    const</span><span> backwards</span><span> =</span><span> str.</span><span>split</span><span>(</span><span>&#39;&#39;</span><span>).</span><span>reverse</span><span>().</span><span>join</span><span>(</span><span>&#39;&#39;</span><span>)</span></span>
<span data-line=""><span>    return</span><span> str </span><span>===</span><span> backwards</span></span>
<span data-line=""><span>};</span></span></code></pre></figure>
<p>Let me go back and see how it compares to the previous iteration.</p>
<p><em>checks previous code</em></p>
<p>Oh dear god that’s awful. Cool! making progress!</p></article><hr/></div></div></div>
  </body>
</html>
