<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.oddbird.net/2025/02/12/fluid-type/">Original</a>
    <h1>Reimagining Fluid Typography</h1>
    
    <div id="readability-page-1" class="page"><div data-main="" data-typeset="">
      <div data-callout="note"><p><strong>Note:</strong></p><p>We talked about some of these ideas
in our <a href="https://www.oddbird.net/2025/01/24/winging-it-15/">Winging It</a> live stream
last month
with Alan Stearns,
co-chair of the <span>CSS</span> Working Group.
Check that out for more discussion
of typography and <span>CSS</span> units!</p></div>
<p>The browser provides a default text size
based on user preferences,
and our text should be <em>relative to that preference</em>.
Establishing our root font-size with an <code>em</code> value
helps keep that relationship intact.</p>
<p>Similarly,
font ‘scales’ are intended to
maintain some <em>internal harmony</em>
across a range of different font sizes.
By establishing our entire scale in relative units
like <code>em</code> and <code>rem</code>,
we maintain a consistent relationship between sizes,
while allowing the entire system
to scale up or down
relative to user defaults
or browser <a href="https://www.oddbird.net/2024/07/09/zoomies/">(page) zoom</a>.</p>
<p>Recently,
‘fluid typography’ has pushed us
to incorporate viewport or container relative units
into our font sizing as well –
generally with a <code>clamp()</code> function
to integrate both <code>em</code>/<code>rem</code> and <code>vi</code>/<code>cqi</code> <em>inputs</em>
in a responsive algorithm
with lower and upper boundaries.
See <a href="https://utopia.fyi">utopia.fyi</a>
for the most common approach:</p>
<pre><code><span>:root</span> <span>{</span>
  <span>font-size</span><span>:</span> <span>clamp</span><span>(</span>1.125rem<span>,</span> 1.0815rem + 0.2174vi<span>,</span> 1.25rem<span>)</span><span>;</span>
<span>}</span></code></pre>
<p>Those numbers look a bit magical,
because they are.
Utopia asks us to start from a range of font sizes
defined in <code>px</code> values,
and then it does a conversion to <code>rem</code>
by assuming that <code>1rem == 16px</code>.
As long as that assumption holds true,
the math above will scale our font
from an <code>18px</code> minimum
to a <code>20px</code> maximum.</p>
<p>This is an assumption that developers often lean on,
even when we’re not doing fluid math.
It’s not an entirely reliable assumption,
but it matches the default in most browsers,
and things can feel pretty squishy
if we don’t do <em>some form</em> of translation-to-pixels.
How can we choose a font size
using units that are entirely untethered from the display?
What is <code>1rem</code> without a conversion?</p>
<p>It’s a reliable approach,
but the more I play with it
the more questions I have.
So let’s dig in,
and see if there are improvements we can make.</p>
<div data-callout="note"><p><strong>Note:</strong></p><p>Fluid calculations with viewport units
can cause accessibility issues
if we’re not careful.
So keep an eye on the warnings
that Utopia provides,
or jump over to <a href="https://fluid.style">fluid.style</a>
to test the page-zoom capabilities
of any fluid calculation.</p></div>

<p>I’ve been
<a href="https://www.miriamsuzanne.com/2024/01/24/have-preferences/">playing with my browser settings</a>,
starting with fonts
and then the default font-size.
These are settings that most browsers provide.
Since I generally prefer web text around <code>24px</code>,
that seems like an obvious preference to set, right?</p>
<p>But I’ve already designed my site
to have large text <em>relative to</em> the user default.
Ignoring the fluid bits for now,
I set the root <code>font-size</code> to roughly <code>1.5em</code> –
half again the size of the user setting.
When my preference was set to the default <code>16px</code>,
my site would already display text at <code>24px</code>.
Now that I’ve said I <em>want</em> <code>24px</code> font-size,
my site has increased to <code>36px</code>!</p>
<figure>
      <div><picture><source type="image/webp" srcset="/assets/images/blog/2025/font-scale-480w.webp 480w, /assets/images/blog/2025/font-scale-960w.webp 960w, /assets/images/blog/2025/font-scale-1440w.webp 1440w" sizes="(min-width: 45em) 50vw, 100vw"/><img alt="Two screenshots from my site, one with 16px preference and 24px rendered text - the other with much larger 24px preference and 36px rendered" loading="lazy" decoding="async" src="https://www.oddbird.net/assets/images/blog/2025/font-scale-480w.jpeg" width="1440" height="900" srcset="/assets/images/blog/2025/font-scale-480w.jpeg 480w, /assets/images/blog/2025/font-scale-960w.jpeg 960w, /assets/images/blog/2025/font-scale-1440w.jpeg 1440w" sizes="(min-width: 45em) 50vw, 100vw"/></picture></div><figcaption>I can make the text larger, but it never matches my preference</figcaption></figure>
<p>It seems like Chromium browsers
now have a way of selecting from the default <code>medium</code>
or a list of larger and smaller options:</p>
<ul>
<li>Very small</li>
<li>Small</li>
<li>Medium (recommended)</li>
<li>Large</li>
<li>Very large</li>
</ul>
<p>You can still get to an exact-font-size setting,
but it’s hidden away.
That change makes some sense to me,
and better reflects what’s happening.
I can make font sizes
generally larger or smaller across the web
(at least where sites use relative sizing) –
but I can’t actually establish
a single font size
that sites will directly respect.</p>
<p>The problem is
that’s not actually what I <em>want</em>
from setting a font-size preference.
My goal here
is not to make the text on every website
larger than it was before –
regardless of the existing design.
I really do want sites to <em>usually</em>
just give me text around <code>24px</code> (or ‘large’),
because that’s <em>a pretty good default for me</em>.
Sites with smaller body text
would ideally increase their font size,
but sites with the same size or larger text
certainly shouldn’t get <em>even bigger</em>.</p>
<p>It’s not just my site –
this has become a common practice across the industry.
And it means some of my favorite sites
already using large type
become <em>too large</em> when I set my browser preference.
So I had to remove that preference.</p>
<p>I see this situation play out over and over
on the web.
The lesson we often learn is
<em>users don’t set preferences</em>,
when the reality is that
<em>we applied their preferences badly</em>.
When the preference doesn’t do what I want,
of course I have to stop using that preference.</p>
<p>That leads us to an assumption that
the browser preference will always be <code>16px</code>.
We compare that to our mockups with <code>24px</code> fonts,
do some basic arithmetic,
and set our base font size to <code>1.5em</code>.
<em>Good enough</em>.</p>
<p><span>TL</span>;<span>DR</span> – Never do pixel math with <code>em</code> and <code>rem</code> units.
That’s where we went wrong,
by assuming that <code>16px == 1em</code> is a reliable fact.</p>
<p>In this case,
there’s a quick and easy solution
that would make font-size preferences work
across the board.
There’s a single root font size setting
that is guaranteed to match the user font size.
It’s generally kept a secret,
but Adrian Roselli
has broken the magician’s code
to bring us the good news:</p>
<blockquote data-quote="solo">
</blockquote>
<p><em>Don’t set a root font size.</em>
Adrian’s article is excellent,
and I think he’s probably right on this one.
The best base font size
is the user’s default font size –
set in the browser.</p>
<pre><code><span>html</span> <span>{</span>
  <span>/* no size is the best size */</span>
<span>}</span></code></pre>

<p>But I still have an issue,
because <em>the browser</em> doesn’t give me many options
for setting the preference.
And (not surprisingly)
one size does not fit all sites or situations.</p>
<p>I like reading large text,
but ‘large’ is a relative concept.
A font size of <code>72px</code>
is nearly unreadable on my phone,
but looks great for headings on my
external 20-inch monitor.
Similarly,
the common default <code>16px</code> font size
feels fine to me on a phone,
with limited line length,
but it’s smaller than I want
when I have 20 inches to fill.</p>
<p>Of course,
I could set different defaults
for different devices,
but that doesn’t help when I resize windows.
Even with the browser constantly running fullscreen,
my laptop is only sometimes plugged into
an external monitor.
When I unplug it, I have less space available.</p>
<p>Again I’ve heard a common refrain that
“users don’t resize their windows” –
but I find that entirely unbelievable.
In fact, I’d bet I’m in a very small minority
by using mostly fullscreen apps.
When I watch other people compute,
I expect to see a scattering of randomly-sized windows
overlapping each other on a single desktop.
That’s the default.
And so those overlapping windows
have to get dragged around and resized
in order to navigate through different tasks.
Average users don’t sit around
resizing windows up and down for fun,
like we do,
but they absolutely adjust the window size
to fit different tasks.
I set up a poll to see
<a href="https://front-end.social/@mia/113992409837989769">how people on Mastodon manage browser windows</a>.</p>
<p>As a web surfer,
I would like my default font size
to respond to those changes.
As a web author,
I would like my site to be responsive as well.
We design layouts that respond smoothly
from the smallest screen to the largest –
it seems absurd to keep the base font size
locked in place through that entire responsive process.</p>
<p>So <em>I want responsive typography</em>,
and browsers (as a rule)
don’t make that available in user settings.
There are some browsers (like Safari)
that accept arbitrary <span>CSS</span> preferences,
but that’s rare –
and only useful to people who write <span>CSS</span>.</p>
<p>There are a few ways I could imagine
approaching this.
Maybe we just add a slight scale factor
to the user default:</p>
<pre><code><span>html</span> <span>{</span>
  <span>font-size</span><span>:</span> <span>calc</span><span>(</span>1em + 1vw<span>)</span><span>;</span>
<span>}</span></code></pre>
<p>But that will always be larger than the user asked for.
So we could adjust it down slightly,
and provide clamps:</p>
<pre><code><span>html</span> <span>{</span>
  <span>font-size</span><span>:</span> <span>clamp</span><span>(</span>1em<span>,</span> 0.9em + 1vw<span>,</span> 1.5em<span>)</span><span>;</span>
<span>}</span></code></pre>
<p>This looks a lot like the common approach in structure,
but it has some distinct differences.
We’re not trying to achieve a specific font size
(or range of sizes)
by assuming the user has a <code>16px</code> default.
There’s no <em>calculation witchcraft</em> aimed
at some target value in our designer mind,
and the clamps are not related to my desired range of outcomes.
Instead we’re adding a slight responsiveness to the user value,
and using the clamps to keep our fluid value
within range of the user’s intent.</p>
<p>Relative units like <code>em</code> and <code>rem</code>
are excellent for <em>internal relationships</em> –
keeping the scale consistent between
body text and headings, for example.
But things always go wrong
when we try to treat <code>em</code> as an alias for <code>px</code>,
with mental conversions based on their assumed default relationship.
At that point we’re keeping <em>zoom</em>,
but discarding everything else about the user preference.</p>
<p>Any time you start doing mental math with <code>16px == 1em</code>,
stop yourself and ask if that math holds up
over a whole range of user preferences.</p>
<p>(It doesn’t. Don’t do it.)</p>

<p>I also have an issue
where my web-surfing preference for large text
does not apply equally to all sites.
When I’m reading a blog post,
I just want a nice big view of the text.
When I’m scanning bank transactions,
I’m happy for something a bit more compact.
I think browsers like Arc are on the right track
with per-site style adjustments.</p>
<p>We could take my responsive-default approach even further
by providing site-specific controls
as part of our <span>UI</span>.
We still want to make sure the defaults are reasonable,
based on the global preferences,
and only provide the <span>UI</span> as a progressive enhancement.
To quote accessibility expert Kate Kalcevich:</p>
<blockquote data-quote="solo">
</blockquote>
<p>I mocked up a (stand-alone) custom element
with a rough proof of concept.
I’m sure there are ways to improve it,
such as adjusting the values,
adding a form submit option,
or tracking the preference in local storage –
but I’m curious what you think.</p>
<p data-height="600" data-slug-hash="yyLLErw" data-default-tab="result" data-user="miriamsuzanne" data-embed-version="2">See the Pen <a href="https://codepen.io/miriamsuzanne/pen/yyLLErw">Fluid-Type Custom Element</a> by <a href="https://codepen.io/miriamsuzanne">@miriamsuzanne</a> on <a href="https://codepen.io">CodePen</a>.</p>
<p>It may not be the <em>Ideal Bestest</em> ™ base font size,
but we haven’t strayed far –
and we’ve avoided magic numbers
or calculation witchcraft.
Maybe the slight deviation is warranted
for a more responsive and user-adaptive site?</p>
<p>What do you think?
Let us know on <a href="https://front-end.social/@oddbird">Mastodon</a>
or <a href="https://bsky.app/profile/oddbird.dev/">Bluesky</a>!</p>

    </div></div>
  </body>
</html>
