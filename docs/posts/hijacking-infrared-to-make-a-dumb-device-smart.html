<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://kennedn.com/blog/posts/snowdon/">Original</a>
    <h1>Hijacking infrared to make a dumb device smart</h1>
    
    <div id="readability-page-1" class="page"><section>
    <p>Saturday, November 26, 2022</p></section><article>
<p>
    <img src="https://kennedn.com/blog/posts/snowdon/tv_side.jpg" width="45%"/>
    <img src="https://kennedn.com/blog/posts/snowdon/tv_front.jpg" width="45%"/>
</p>
<p>I own a very old â€˜flatâ€™ screen television from 2009. One of the reason this TV is still kicking around is because I have a strange sentimental affection for it. Another is that I have written <a href="https://github.com/kennedn/tvcom" target="_blank" rel="noopener noreferrer">automation</a>
 for it that works really well and it would be a pain  to migrate away from it.</p>
<p>It does have a problem however, the TV tends to hit resonance frequency very often with its built-in speakers, causing the body of the unit to vibrate something awful and produce some ear wrenching sounds as a result.</p>
<p>So, to extend the longevity of this relic, I decided to invest in a cheapo soundbar, the <a href="https://www.majority.co.uk/soundbars/snowdon/" target="_blank" rel="noopener noreferrer">Majority Snowdon II</a>
. This has worked to fix the resonance issue but has somewhat moved my problems laterally as it came with its own caveats. Namely, its a big dumb dumb.</p>
<p>Thatâ€™s right, itâ€™s not a smart device, its about as dumb as they come in 2022. It has an infrared remote, some physical buttons and thatâ€™s it! However, I had a plan when I bought this device. I thought I could probably make it smarter. So after losing the remote down the side of the couch for the 87th time I decided to crack it open and see what could be done.</p>
<details>
<summary>Table of Contents</summary>
<ul>
<li><a href="#start">Start</a>

<ul>
<li><a href="#plan-of-attack">Plan of Attack</a>
</li>
</ul>
</li>
<li><a href="#decoding-the-indicator-led">Decoding the Indicator LED</a>

<ul>
<li><a href="#wiring">Wiring</a>
</li>
<li><a href="#code">Code</a>
</li>
<li><a href="#demo">Demo</a>
</li>
</ul>
</li>
<li><a href="#mimicing-an-infrared-remote">Mimicing an Infrared Remote</a>

<ul>
<li><a href="#wiring-1">Wiring</a>
</li>
<li><a href="#code-1">Code</a>
</li>
<li><a href="#demo-1">Demo</a>
</li>
</ul>
</li>
<li><a href="#building-a-dunderhead-http-server-from-scratch">Building a dunderhead HTTP server from scratch</a>

<ul>
<li><a href="#what-even-is-http-anyway">What even is HTTP anyway?</a>
</li>
<li><a href="#code-2">Code</a>
</li>
<li><a href="#demo-2">Demo</a>
</li>
</ul>
</li>
<li><a href="#optional-recycling-unused-pins-for-swd-debugging">Optional: Recycling unused pins for SWD debugging</a>
</li>
<li><a href="#tying-it-all-together">Tying it all together</a>

<ul>
<li><a href="#wiring-2">Wiring</a>
</li>
<li><a href="#compiling-guide">Compiling Guide</a>
</li>
<li><a href="#api">API</a>
</li>
</ul>
</li>
<li><a href="#finish">Finish</a>
</li>
</ul>
</details>

<p>My original intentions when cracking this open was to start looking at datasheets for on-board chips to try and find a foothold somewhere on the board. However, looking at the mainboard, I was very quickly struck with an idea.</p>
<p>
    <img src="https://kennedn.com/blog/posts/snowdon/motherboard_front.jpg" width="41%"/>
    <img src="https://kennedn.com/blog/posts/snowdon/motherboard_front_closeup.jpg" width="50%"/>
</p>
<p>There are two very cleanly labelled connection jacks that go to the daughter board. And the daughter board just happens to host all of the interfacing options on the device: the physical buttons, an indicator LED and the infrared receiver.</p>
<p>So lets just hijack these pre-existing interfaces for our own purposes!</p>
<h2 id="plan-of-attack">Plan of Attack</h2>
<p>Now that we know the project has some feasbility, lets lay the ground rules for what success will look like. We want to be able to</p>
<ul>
<li>Get the current state of Snowdon using the RGB lines from the status LED</li>
<li>Mimic the signal coming in on the Infrared line so that we can send our own infrared commands to Snowdon</li>
</ul>
<p>We also want to have control over the new super powers we will bestow upon the Snowdon. At this point, I had already earmarked the Raspberry Pi Pico W as the microcontroller of choice for this project for a few reasons:</p>
<ol>
<li>It has a WiFi chip, which means we can turn the snowdon into a true IoT device</li>
<li>It has <a href="https://hackspace.raspberrypi.com/articles/what-is-programmable-i-o-on-raspberry-pi-pico" target="_blank" rel="noopener noreferrer">Programmable IO</a>
, which means we can write our own driver for the Infrared signalling.</li>
<li>It accepts 5v power in, which means we can power it directly from the mainboard</li>
<li>I had a bunch of them in my desk drawer ðŸ˜€</li>
</ol>

<p>The daughter board has a 4 pin RGB indicator LED that can display a number of colors. The LED is common anode which means it is active low. Each of the 3 color pins are broken out on a connection jack on the mainboard. The user manual actually tells us the possible colors and their meaning too:</p>
<table>
<thead>
<tr>
<th>State</th>
<th>LED Indicator Light</th>
</tr>
</thead>
<tbody>
<tr>
<td>Power Off</td>
<td>Red</td>
</tr>
<tr>
<td>AUX Mode</td>
<td>White</td>
</tr>
<tr>
<td>Line In Mode</td>
<td>Green</td>
</tr>
<tr>
<td>Optical Mode</td>
<td>Yellow</td>
</tr>
<tr>
<td>Bluetooth Ready</td>
<td>Flashing Blue</td>
</tr>
<tr>
<td>Bluetooth Connected</td>
<td>Blue</td>
</tr>
</tbody>
</table>
<p>This is enough information for us to decode which color is currently being displayed on the LED and infer a state from it.</p>
<p>We can achieve this easily by wiring 3 consecutive GPIO pins to the mainboard.</p>
<h2 id="wiring">Wiring</h2>
<table>
<tbody><tr><td>



<p>
  
    <svg xmlns="http://www.w3.org/2000/svg" font-family="Menlo,Lucida Console,monospace" viewBox="0 0 216 137">
      <g transform="translate(8,16)">
<path d="M 0,16 L 88,16" fill="none" stroke="currentColor"></path>
<path d="M 120,16 L 200,16" fill="none" stroke="currentColor"></path>
<path d="M 88,32 L 120,32" fill="none" stroke="currentColor"></path>
<path d="M 88,48 L 120,48" fill="none" stroke="currentColor"></path>
<path d="M 88,64 L 120,64" fill="none" stroke="currentColor"></path>
<path d="M 88,80 L 120,80" fill="none" stroke="currentColor"></path>
<path d="M 88,96 L 120,96" fill="none" stroke="currentColor"></path>
<path d="M 0,112 L 88,112" fill="none" stroke="currentColor"></path>
<path d="M 120,112 L 200,112" fill="none" stroke="currentColor"></path>
<path d="M 88,16 L 88,32" fill="none" stroke="currentColor"></path>
<path d="M 88,32 L 88,48" fill="none" stroke="currentColor"></path>
<path d="M 88,48 L 88,64" fill="none" stroke="currentColor"></path>
<path d="M 88,64 L 88,80" fill="none" stroke="currentColor"></path>
<path d="M 88,80 L 88,96" fill="none" stroke="currentColor"></path>
<path d="M 88,96 L 88,112" fill="none" stroke="currentColor"></path>
<path d="M 120,16 L 120,32" fill="none" stroke="currentColor"></path>
<path d="M 120,32 L 120,48" fill="none" stroke="currentColor"></path>
<path d="M 120,48 L 120,64" fill="none" stroke="currentColor"></path>
<path d="M 120,64 L 120,80" fill="none" stroke="currentColor"></path>
<path d="M 120,80 L 120,96" fill="none" stroke="currentColor"></path>
<path d="M 120,96 L 120,112" fill="none" stroke="currentColor"></path>
<text text-anchor="middle" x="8" y="4" fill="currentColor" style="font-size:1em">S</text>
<text text-anchor="middle" x="8" y="68" fill="currentColor" style="font-size:1em">G</text>
<text text-anchor="middle" x="16" y="4" fill="currentColor" style="font-size:1em">n</text>
<text text-anchor="middle" x="16" y="52" fill="currentColor" style="font-size:1em">B</text>
<text text-anchor="middle" x="16" y="68" fill="currentColor" style="font-size:1em">R</text>
<text text-anchor="middle" x="24" y="4" fill="currentColor" style="font-size:1em">o</text>
<text text-anchor="middle" x="24" y="52" fill="currentColor" style="font-size:1em">L</text>
<text text-anchor="middle" x="24" y="68" fill="currentColor" style="font-size:1em">E</text>
<text text-anchor="middle" x="24" y="84" fill="currentColor" style="font-size:1em">R</text>
<text text-anchor="middle" x="32" y="4" fill="currentColor" style="font-size:1em">w</text>
<text text-anchor="middle" x="32" y="52" fill="currentColor" style="font-size:1em">U</text>
<text text-anchor="middle" x="32" y="68" fill="currentColor" style="font-size:1em">E</text>
<text text-anchor="middle" x="32" y="84" fill="currentColor" style="font-size:1em">E</text>
<text text-anchor="middle" x="40" y="4" fill="currentColor" style="font-size:1em">d</text>
<text text-anchor="middle" x="40" y="52" fill="currentColor" style="font-size:1em">E</text>
<text text-anchor="middle" x="40" y="68" fill="currentColor" style="font-size:1em">N</text>
<text text-anchor="middle" x="40" y="84" fill="currentColor" style="font-size:1em">D</text>
<text text-anchor="middle" x="48" y="4" fill="currentColor" style="font-size:1em">o</text>
<text text-anchor="middle" x="48" y="52" fill="currentColor" style="font-size:1em">_</text>
<text text-anchor="middle" x="48" y="68" fill="currentColor" style="font-size:1em">_</text>
<text text-anchor="middle" x="48" y="84" fill="currentColor" style="font-size:1em">_</text>
<text text-anchor="middle" x="56" y="4" fill="currentColor" style="font-size:1em">n</text>
<text text-anchor="middle" x="56" y="36" fill="currentColor" style="font-size:1em">G</text>
<text text-anchor="middle" x="56" y="52" fill="currentColor" style="font-size:1em">L</text>
<text text-anchor="middle" x="56" y="68" fill="currentColor" style="font-size:1em">L</text>
<text text-anchor="middle" x="56" y="84" fill="currentColor" style="font-size:1em">L</text>
<text text-anchor="middle" x="56" y="100" fill="currentColor" style="font-size:1em">+</text>
<text text-anchor="middle" x="64" y="36" fill="currentColor" style="font-size:1em">N</text>
<text text-anchor="middle" x="64" y="52" fill="currentColor" style="font-size:1em">E</text>
<text text-anchor="middle" x="64" y="68" fill="currentColor" style="font-size:1em">E</text>
<text text-anchor="middle" x="64" y="84" fill="currentColor" style="font-size:1em">E</text>
<text text-anchor="middle" x="64" y="100" fill="currentColor" style="font-size:1em">5</text>
<text text-anchor="middle" x="72" y="36" fill="currentColor" style="font-size:1em">D</text>
<text text-anchor="middle" x="72" y="52" fill="currentColor" style="font-size:1em">D</text>
<text text-anchor="middle" x="72" y="68" fill="currentColor" style="font-size:1em">D</text>
<text text-anchor="middle" x="72" y="84" fill="currentColor" style="font-size:1em">D</text>
<text text-anchor="middle" x="72" y="100" fill="currentColor" style="font-size:1em">V</text>
<text text-anchor="middle" x="136" y="4" fill="currentColor" style="font-size:1em">R</text>
<text text-anchor="middle" x="136" y="36" fill="currentColor" style="font-size:1em">G</text>
<text text-anchor="middle" x="136" y="52" fill="currentColor" style="font-size:1em">G</text>
<text text-anchor="middle" x="136" y="68" fill="currentColor" style="font-size:1em">G</text>
<text text-anchor="middle" x="136" y="84" fill="currentColor" style="font-size:1em">G</text>
<text text-anchor="middle" x="136" y="100" fill="currentColor" style="font-size:1em">V</text>
<text text-anchor="middle" x="144" y="4" fill="currentColor" style="font-size:1em">a</text>
<text text-anchor="middle" x="144" y="36" fill="currentColor" style="font-size:1em">N</text>
<text text-anchor="middle" x="144" y="52" fill="currentColor" style="font-size:1em">P</text>
<text text-anchor="middle" x="144" y="68" fill="currentColor" style="font-size:1em">P</text>
<text text-anchor="middle" x="144" y="84" fill="currentColor" style="font-size:1em">P</text>
<text text-anchor="middle" x="144" y="100" fill="currentColor" style="font-size:1em">S</text>
<text text-anchor="middle" x="152" y="4" fill="currentColor" style="font-size:1em">s</text>
<text text-anchor="middle" x="152" y="36" fill="currentColor" style="font-size:1em">D</text>
<text text-anchor="middle" x="152" y="52" fill="currentColor" style="font-size:1em">I</text>
<text text-anchor="middle" x="152" y="68" fill="currentColor" style="font-size:1em">I</text>
<text text-anchor="middle" x="152" y="84" fill="currentColor" style="font-size:1em">I</text>
<text text-anchor="middle" x="152" y="100" fill="currentColor" style="font-size:1em">Y</text>
<text text-anchor="middle" x="160" y="4" fill="currentColor" style="font-size:1em">p</text>
<text text-anchor="middle" x="160" y="52" fill="currentColor" style="font-size:1em">O</text>
<text text-anchor="middle" x="160" y="68" fill="currentColor" style="font-size:1em">O</text>
<text text-anchor="middle" x="160" y="84" fill="currentColor" style="font-size:1em">O</text>
<text text-anchor="middle" x="160" y="100" fill="currentColor" style="font-size:1em">S</text>
<text text-anchor="middle" x="176" y="4" fill="currentColor" style="font-size:1em">P</text>
<text text-anchor="middle" x="176" y="52" fill="currentColor" style="font-size:1em">1</text>
<text text-anchor="middle" x="176" y="68" fill="currentColor" style="font-size:1em">1</text>
<text text-anchor="middle" x="176" y="84" fill="currentColor" style="font-size:1em">1</text>
<text text-anchor="middle" x="184" y="4" fill="currentColor" style="font-size:1em">i</text>
<text text-anchor="middle" x="184" y="52" fill="currentColor" style="font-size:1em">9</text>
<text text-anchor="middle" x="184" y="68" fill="currentColor" style="font-size:1em">8</text>
<text text-anchor="middle" x="184" y="84" fill="currentColor" style="font-size:1em">7</text>
</g>

    </svg>
  
</p>
</td>
<td>
    <img src="https://kennedn.com/blog/posts/snowdon/snowdon_fritzing_led.png"/>
</td></tr>
</tbody></table>
<h2 id="code">Code</h2>
<p>Since we are only concerned with 3 pins (17,18 &amp; 19), we can create a 32 bit bit-mask that will select only these pins:</p>
<div><pre tabindex="0"><code data-lang="c"><span><span><span>#define RGB_BASE_PIN 17
</span></span></span><span><span><span></span><span>const</span> <span>uint32_t</span> <span>RGB_MASK</span> <span>=</span> <span>1</span> <span>&lt;&lt;</span> <span>RGB_BASE_PIN</span> <span>|</span>     <span>// Pin 17
</span></span></span><span><span><span></span>                          <span>1</span> <span>&lt;&lt;</span> <span>RGB_BASE_PIN</span> <span>+</span> <span>1</span> <span>|</span> <span>// Pin 18
</span></span></span><span><span><span></span>                          <span>1</span> <span>&lt;&lt;</span> <span>RGB_BASE_PIN</span> <span>+</span> <span>2</span><span>;</span>  <span>// Pin 19
</span></span></span></code></pre></div><p>Then in our main loop we can initialise the pins as input with our mask:</p>
<div><pre tabindex="0"><code data-lang="c"><span><span><span>gpio_init_mask</span><span>(</span><span>RGB_MASK</span><span>);</span>
</span></span></code></pre></div><p>And then get the current value of each of the 3 pins by ANDing the value of the GPIO register with our mask. We then shift this to the right to clear out the left over zeros from our AND operation and end up with a 3 bit value representing our 3 color lines:</p>
<div><pre tabindex="0"><code data-lang="c"><span><span><span>// Extract desired bits from GPIO with RGB_MASK and shift right
</span></span></span><span><span><span>// This gives us a 3 bit value in the form 0b&lt;b&gt;&lt;g&gt;&lt;r&gt;
</span></span></span><span><span><span></span><span>uint32_t</span> <span>gpio</span> <span>=</span> <span>(</span><span>gpio_get_all</span><span>()</span> <span>&amp;</span> <span>RGB_MASK</span><span>)</span> <span>&gt;&gt;</span> <span>RGB_BASE_PIN</span><span>;</span>
</span></span></code></pre></div><p>Finally, we can pass this value into a switch statement and based on the value of the 3 color bits, we can print a different message:</p>
<div><pre tabindex="0"><code data-lang="c"><span><span><span>switch</span><span>(</span><span>gpio</span><span>)</span> <span>{</span>
</span></span><span><span>    <span>case</span> <span>0</span><span>b110</span><span>:</span> <span>// red
</span></span></span><span><span><span></span>        <span>printf</span><span>(</span><span>&#34;off</span><span>\n</span><span>&#34;</span><span>);</span>
</span></span><span><span>        <span>break</span><span>;</span>
</span></span><span><span>    <span>case</span> <span>0</span><span>b100</span><span>:</span> <span>// yellow
</span></span></span><span><span><span></span>        <span>printf</span><span>(</span><span>&#34;optical</span><span>\n</span><span>&#34;</span><span>);</span>
</span></span><span><span>        <span>break</span><span>;</span>
</span></span><span><span>    <span>case</span> <span>0</span><span>b000</span><span>:</span> <span>// white
</span></span></span><span><span><span></span>        <span>printf</span><span>(</span><span>&#34;aux</span><span>\n</span><span>&#34;</span><span>);</span>
</span></span><span><span>        <span>break</span><span>;</span>
</span></span><span><span>    <span>case</span> <span>0</span><span>b101</span><span>:</span> <span>// green
</span></span></span><span><span><span></span>        <span>printf</span><span>(</span><span>&#34;line-in</span><span>\n</span><span>&#34;</span><span>);</span>
</span></span><span><span>        <span>break</span><span>;</span>
</span></span><span><span>    <span>case</span> <span>0</span><span>b011</span><span>:</span> <span>// blue
</span></span></span><span><span><span></span>        <span>printf</span><span>(</span><span>&#34;bluetooth</span><span>\n</span><span>&#34;</span><span>);</span>
</span></span><span><span>        <span>break</span><span>;</span>
</span></span><span><span>    <span>case</span> <span>0</span><span>b111</span><span>:</span> <span>// off
</span></span></span><span><span><span></span>        <span>printf</span><span>(</span><span>&#34;none</span><span>\n</span><span>&#34;</span><span>);</span>
</span></span><span><span>        <span>break</span><span>;</span>
</span></span><span><span>    <span>default</span><span>:</span>
</span></span><span><span>        <span>printf</span><span>(</span><span>&#34;unknown</span><span>\n</span><span>&#34;</span><span>);</span>
</span></span><span><span>    <span>}</span>
</span></span></code></pre></div><details>
  <summary>Full code</summary>
<div><pre tabindex="0"><code data-lang="c"><span><span><span>#include</span> <span>&lt;stdio.h&gt;</span><span>
</span></span></span><span><span><span>#include</span> <span>&#34;pico/stdlib.h&#34;</span><span>
</span></span></span><span><span><span></span>
</span></span><span><span><span>#define RGB_BASE_PIN 17
</span></span></span><span><span><span></span><span>const</span> <span>uint32_t</span> <span>RGB_MASK</span> <span>=</span> <span>1</span> <span>&lt;&lt;</span> <span>RGB_BASE_PIN</span> <span>|</span>        <span>// Pin 17
</span></span></span><span><span><span></span>                          <span>1</span> <span>&lt;&lt;</span> <span>RGB_BASE_PIN</span> <span>+</span> <span>1</span> <span>|</span>    <span>// Pin 18
</span></span></span><span><span><span></span>                          <span>1</span> <span>&lt;&lt;</span> <span>RGB_BASE_PIN</span> <span>+</span> <span>2</span><span>;</span>     <span>// Pin 19
</span></span></span><span><span><span></span>
</span></span><span><span><span>int</span> <span>main</span><span>()</span> <span>{</span>
</span></span><span><span>    <span>stdio_init_all</span><span>();</span>
</span></span><span><span>    <span>// Enable pins 17, 18 &amp; 19 as input 
</span></span></span><span><span><span></span>    <span>gpio_init_mask</span><span>(</span><span>RGB_MASK</span><span>);</span>
</span></span><span><span>    <span>uint32_t</span> <span>gpio</span><span>;</span>
</span></span><span><span>    <span>while</span> <span>(</span><span>true</span><span>)</span> <span>{</span>
</span></span><span><span>        <span>// Extract desired bits from GPIO with RGB_MASK and shift right
</span></span></span><span><span><span></span>        <span>// This gives us a 3 bit value in the form 0b&lt;b&gt;&lt;g&gt;&lt;r&gt;
</span></span></span><span><span><span></span>        <span>gpio</span> <span>=</span> <span>(</span><span>gpio_get_all</span><span>()</span> <span>&amp;</span> <span>RGB_MASK</span><span>)</span> <span>&gt;&gt;</span> <span>RGB_BASE_PIN</span><span>;</span>
</span></span><span><span>        <span>// Perform comparisons on the 3 bits to determine the state of the RGB LED
</span></span></span><span><span><span></span>        <span>switch</span><span>(</span><span>gpio</span><span>)</span> <span>{</span>
</span></span><span><span>            <span>case</span> <span>0</span><span>b110</span><span>:</span> <span>// red
</span></span></span><span><span><span></span>                <span>printf</span><span>(</span><span>&#34;off</span><span>\n</span><span>&#34;</span><span>);</span>
</span></span><span><span>                <span>break</span><span>;</span>
</span></span><span><span>            <span>case</span> <span>0</span><span>b100</span><span>:</span> <span>// yellow
</span></span></span><span><span><span></span>                <span>printf</span><span>(</span><span>&#34;optical</span><span>\n</span><span>&#34;</span><span>);</span>
</span></span><span><span>                <span>break</span><span>;</span>
</span></span><span><span>            <span>case</span> <span>0</span><span>b000</span><span>:</span> <span>// white
</span></span></span><span><span><span></span>                <span>printf</span><span>(</span><span>&#34;aux</span><span>\n</span><span>&#34;</span><span>);</span>
</span></span><span><span>                <span>break</span><span>;</span>
</span></span><span><span>            <span>case</span> <span>0</span><span>b101</span><span>:</span> <span>// green
</span></span></span><span><span><span></span>                <span>printf</span><span>(</span><span>&#34;line-in</span><span>\n</span><span>&#34;</span><span>);</span>
</span></span><span><span>                <span>break</span><span>;</span>
</span></span><span><span>            <span>case</span> <span>0</span><span>b011</span><span>:</span> <span>// blue
</span></span></span><span><span><span></span>                <span>printf</span><span>(</span><span>&#34;bluetooth</span><span>\n</span><span>&#34;</span><span>);</span>
</span></span><span><span>                <span>break</span><span>;</span>
</span></span><span><span>            <span>case</span> <span>0</span><span>b111</span><span>:</span> <span>// off
</span></span></span><span><span><span></span>                <span>printf</span><span>(</span><span>&#34;none</span><span>\n</span><span>&#34;</span><span>);</span>
</span></span><span><span>                <span>break</span><span>;</span>
</span></span><span><span>            <span>default</span><span>:</span>
</span></span><span><span>                <span>printf</span><span>(</span><span>&#34;unknown</span><span>\n</span><span>&#34;</span><span>);</span>
</span></span><span><span>        <span>}</span>
</span></span><span><span>        <span>sleep_ms</span><span>(</span><span>500</span><span>);</span>
</span></span><span><span>    <span>}</span>
</span></span><span><span>    <span>return</span> <span>0</span><span>;</span>
</span></span><span><span><span>}</span>
</span></span></code></pre></div></details> 
<h2 id="demo">Demo</h2>
<p>This simulation demonstrates our ability to decode the color of an RGB LED. The switches on the breadboard can be toggled to â€˜hardcodeâ€™ an RGB value which our program will then decode on a 500ms timer.</p>
<div>
    
    <p><a target="_blank" href="https://wokwi.com/projects/349434548177601107">
        <img src="https://kennedn.com/blog/posts/snowdon/wokwi_badge.svg"/>
    </a></p><div>

<p>The infrared (IR) protocol used by the Snowdon and indeed in the majority of consumer products is called NEC. When you press a button on your remote, a single NEC message will be sent, carrying 32 bits (uint32_t) of information:
</p>
<ul>
<li>8 bit device address</li>
<li>8 bit device address (logical inverse)</li>
<li>8 bit command</li>
<li>8 bit command (logical inverse)</li>
</ul>
</div></div></article></div>
  </body>
</html>
