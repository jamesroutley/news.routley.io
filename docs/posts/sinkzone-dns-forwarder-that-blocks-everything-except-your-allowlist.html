<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/berbyte/sinkzone">Original</a>
    <h1>Show HN: Sinkzone DNS ‚Äì Forwarder that blocks everything except your allowlist</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<div dir="auto">
  <p><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/2522fb058b68a34eb74a8e79436b922b73dbc99b733677573a346b091d6b6a5b/68747470733a2f2f73686172652e6265722e73682f73696e6b7a6f6e652d73706c6173682e706e67"><img src="https://camo.githubusercontent.com/2522fb058b68a34eb74a8e79436b922b73dbc99b733677573a346b091d6b6a5b/68747470733a2f2f73686172652e6265722e73682f73696e6b7a6f6e652d73706c6173682e706e67" alt="Sinkzone: DNS-based Productivity Tool" width="600" data-canonical-src="https://share.ber.sh/sinkzone-splash.png"/></a></p>
  <p dir="auto">
      The internet is infinite. Your focus isn‚Äôt. </p><div dir="auto"><h2 tabindex="-1" dir="auto">Just a quiet, intentional internet.</h2><a id="user-content-just-a-quiet-intentional-internet" aria-label="Permalink: Just a quiet, intentional internet." href="#just-a-quiet-intentional-internet"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
    </div>
<hr/>
<details>
<summary><b>üìö Table of Contents</b></summary>
<ul dir="auto">
<li><a href="#what-is-sinkzone">What is Sinkzone?</a></li>
<li><a href="#motivation">Motivation</a></li>
<li><a href="#why-use-sinkzone">Why use Sinkzone?</a></li>
<li><a href="#key-features">Key Features</a></li>
<li><a href="#demos">Demos</a>
<ul dir="auto">
<li><a href="#terminal-user-interface-tui">Terminal User Interface (TUI)</a></li>
<li><a href="#command-line-interface-cli">Command Line Interface (CLI)</a></li>
</ul>
</li>
<li><a href="#quick-start">Quick Start</a>
<ul dir="auto">
<li><a href="#installation-by-platform">Installation by Platform</a></li>
</ul>
</li>
<li><a href="#documentation">Documentation</a>
<ul dir="auto">
<li><a href="#manual-page">Manual Page</a></li>
</ul>
</li>
<li><a href="#usage">Usage</a>
<ul dir="auto">
<li><a href="#common-commands">Common Commands</a></li>
<li><a href="#wildcard-patterns">Wildcard Patterns</a></li>
<li><a href="#tui-navigation">TUI Navigation</a></li>
</ul>
</li>
<li><a href="#how-it-works">How It Works</a>
<ul dir="auto">
<li><a href="#architecture">Architecture</a></li>
<li><a href="#api-endpoints">API Endpoints</a></li>
<li><a href="#normal-mode">Normal Mode</a></li>
<li><a href="#focus-mode">Focus Mode</a></li>
</ul>
</li>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#development">Development</a></li>
<li><a href="#license">License</a></li>
<li><a href="#contact">Contact</a></li>
</ul>
</details>
<hr/>

<p dir="auto">Sinkzone is a local DNS resolver that helps you eliminate distractions and get deep work done. It blocks all domains by default ‚Äî only the ones you explicitly allow can get through. This means notifications, social media, news, and other time-sinks are unreachable at the network level ‚Äî not just in your browser.</p>
<p dir="auto">It features a modern HTTP API, wildcard pattern support, and a beautiful terminal UI for real-time monitoring and control.</p>
<p dir="auto">It&#39;s lightweight, cross-platform, and built for hackers, makers, and anyone serious about focus.</p>

<p dir="auto">Most tools make you list what you want to block. But the internet is infinite ‚Äî that list never ends. It&#39;s much easier to list the few things you actually want to allow.</p>
<p dir="auto">Sinkzone was born from that insight. I was tired of coding sessions interrupted by Slack pings and email alerts. I needed something stronger than a browser plugin ‚Äî a system-level kill switch for distractions.</p>
<p dir="auto">Now I can code for hours uninterrupted. Even my son uses Sinkzone during chess practice to stay focused.</p>
<p dir="auto"><strong>Sinkzone exists because I needed it. Maybe you do too.</strong></p>
<hr/>

<ul dir="auto">
<li>Avoid distraction without browser extensions or hacks</li>
<li>Run locally on macOS, Linux and Windows ‚Äî no cloud, no telemetry</li>
<li>Perfect for deep work sessions, writing, coding, or child safety</li>
<li>Terminal UI included ‚Äî toggle modes, view logs, edit allowlist</li>
</ul>
<hr/>

<ul dir="auto">
<li><strong>DNS-level blocking</strong>: Stops distractions before they reach your apps</li>
<li><strong>Focus Mode</strong>: Block all but allowlisted domains for a set duration</li>
<li><strong>Wildcard Support</strong>: Use patterns like <code>*github*</code> or <code>*.google.com</code> for flexible domain matching</li>
<li><strong>HTTP API</strong>: RESTful API for monitoring and control</li>
<li><strong>Terminal UI</strong>: Real-time DNS traffic viewer with tabbed interface</li>
<li><strong>Memory-backed rules</strong>: Focus mode expires automatically</li>
<li><strong>Cross-platform</strong>: Works on macOS and Linux</li>
</ul>
<hr/>

<div dir="auto"><h3 tabindex="-1" dir="auto">Terminal User Interface (TUI)</h3><a id="user-content-terminal-user-interface-tui" aria-label="Permalink: Terminal User Interface (TUI)" href="#terminal-user-interface-tui"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The TUI provides real-time DNS monitoring and allowlist management:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/berbyte/sinkzone/blob/main/examples/demo-tui.gif"><img src="https://github.com/berbyte/sinkzone/raw/main/examples/demo-tui.gif" alt="TUI Demo" data-animated-image=""/></a></p>
<p dir="auto"><em>Real-time DNS traffic monitoring, allowlist management, and focus mode control</em></p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Command Line Interface (CLI)</h3><a id="user-content-command-line-interface-cli" aria-label="Permalink: Command Line Interface (CLI)" href="#command-line-interface-cli"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The CLI offers powerful command-line tools for system management:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/berbyte/sinkzone/blob/main/examples/demo-cli.gif"><img src="https://github.com/berbyte/sinkzone/raw/main/examples/demo-cli.gif" alt="CLI Demo" data-animated-image=""/></a></p>
<p dir="auto"><em>Command-line allowlist management, focus mode control, and system status monitoring</em></p>
<hr/>


<details>
<summary><b>üëâ macOS Installation</b></summary>
<p dir="auto"><strong>Homebrew (Recommended):</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="brew tap berbyte/ber
brew install sinkzone"><pre>brew tap berbyte/ber
brew install sinkzone</pre></div>
<p dir="auto"><strong>Manual Setup:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="# 1. Start the DNS Resolver (default port 53, requires admin privileges)
sudo sinkzone resolver

# 2. Launch the UI (in another terminal)
sinkzone tui

# 3. Enable Focus Mode
sinkzone focus start"><pre><span><span>#</span> 1. Start the DNS Resolver (default port 53, requires admin privileges)</span>
sudo sinkzone resolver

<span><span>#</span> 2. Launch the UI (in another terminal)</span>
sinkzone tui

<span><span>#</span> 3. Enable Focus Mode</span>
sinkzone focus start</pre></div>
<p dir="auto"><strong>Configure System DNS (Required):</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo networksetup -setdnsservers &#34;Wi-Fi&#34; 127.0.0.1"><pre>sudo networksetup -setdnsservers <span><span>&#34;</span>Wi-Fi<span>&#34;</span></span> 127.0.0.1</pre></div>
<p dir="auto"><strong>Direct Download:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="# Apple Silicon (M1/M2)
curl -L -o sinkzone https://github.com/berbyte/sinkzone/releases/latest/download/sinkzone-darwin-arm64
chmod +x sinkzone
sudo mv sinkzone /usr/local/bin/

# Intel Mac
curl -L -o sinkzone https://github.com/berbyte/sinkzone/releases/latest/download/sinkzone-darwin-amd64
chmod +x sinkzone
sudo mv sinkzone /usr/local/bin/"><pre><span><span>#</span> Apple Silicon (M1/M2)</span>
curl -L -o sinkzone https://github.com/berbyte/sinkzone/releases/latest/download/sinkzone-darwin-arm64
chmod +x sinkzone
sudo mv sinkzone /usr/local/bin/

<span><span>#</span> Intel Mac</span>
curl -L -o sinkzone https://github.com/berbyte/sinkzone/releases/latest/download/sinkzone-darwin-amd64
chmod +x sinkzone
sudo mv sinkzone /usr/local/bin/</pre></div>
</details>
<hr/>
<details>
<summary><b>üëâ Linux Installation</b></summary>
<p dir="auto"><strong>Package Managers (Recommended):</strong></p>
<p dir="auto"><strong>Debian/Ubuntu:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="# Download and install the .deb package
curl -L -O https://github.com/berbyte/sinkzone/releases/latest/download/sinkzone-linux-amd64.deb
sudo dpkg -i sinkzone-linux-amd64.deb"><pre><span><span>#</span> Download and install the .deb package</span>
curl -L -O https://github.com/berbyte/sinkzone/releases/latest/download/sinkzone-linux-amd64.deb
sudo dpkg -i sinkzone-linux-amd64.deb</pre></div>
<p dir="auto"><strong>Red Hat/Fedora/CentOS:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="# Download and install the .rpm package
curl -L -O https://github.com/berbyte/sinkzone/releases/latest/download/sinkzone-linux-amd64.rpm
sudo rpm -i sinkzone-linux-amd64.rpm"><pre><span><span>#</span> Download and install the .rpm package</span>
curl -L -O https://github.com/berbyte/sinkzone/releases/latest/download/sinkzone-linux-amd64.rpm
sudo rpm -i sinkzone-linux-amd64.rpm</pre></div>
<p dir="auto"><strong>Alpine Linux:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="# Download and install the .apk package
curl -L -O https://github.com/berbyte/sinkzone/releases/latest/download/sinkzone-linux-amd64.apk
sudo apk add --allow-untrusted sinkzone-linux-amd64.apk"><pre><span><span>#</span> Download and install the .apk package</span>
curl -L -O https://github.com/berbyte/sinkzone/releases/latest/download/sinkzone-linux-amd64.apk
sudo apk add --allow-untrusted sinkzone-linux-amd64.apk</pre></div>
<p dir="auto"><strong>Arch Linux:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="# Download and install the .pkg.tar.zst package
curl -L -O https://github.com/berbyte/sinkzone/releases/latest/download/sinkzone-linux-amd64.pkg.tar.zst
sudo pacman -U sinkzone-linux-amd64.pkg.tar.zst"><pre><span><span>#</span> Download and install the .pkg.tar.zst package</span>
curl -L -O https://github.com/berbyte/sinkzone/releases/latest/download/sinkzone-linux-amd64.pkg.tar.zst
sudo pacman -U sinkzone-linux-amd64.pkg.tar.zst</pre></div>
<p dir="auto"><strong>Manual Installation:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="# AMD64
curl -L -o sinkzone https://github.com/berbyte/sinkzone/releases/latest/download/sinkzone-linux-amd64
chmod +x sinkzone
sudo mv sinkzone /usr/local/bin/

# ARM64
curl -L -o sinkzone https://github.com/berbyte/sinkzone/releases/latest/download/sinkzone-linux-arm64
chmod +x sinkzone
sudo mv sinkzone /usr/local/bin/"><pre><span><span>#</span> AMD64</span>
curl -L -o sinkzone https://github.com/berbyte/sinkzone/releases/latest/download/sinkzone-linux-amd64
chmod +x sinkzone
sudo mv sinkzone /usr/local/bin/

<span><span>#</span> ARM64</span>
curl -L -o sinkzone https://github.com/berbyte/sinkzone/releases/latest/download/sinkzone-linux-arm64
chmod +x sinkzone
sudo mv sinkzone /usr/local/bin/</pre></div>
<p dir="auto"><strong>Manual Setup:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="# 1. Start the DNS Resolver (default port 53, requires admin privileges)
sudo sinkzone resolver

# 2. Launch the UI (in another terminal)
sinkzone tui

# 3. Enable Focus Mode
sinkzone focus start"><pre><span><span>#</span> 1. Start the DNS Resolver (default port 53, requires admin privileges)</span>
sudo sinkzone resolver

<span><span>#</span> 2. Launch the UI (in another terminal)</span>
sinkzone tui

<span><span>#</span> 3. Enable Focus Mode</span>
sinkzone focus start</pre></div>
<p dir="auto"><strong>Configure System DNS (Required):</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="echo &#34;nameserver 127.0.0.1&#34; | sudo tee /etc/resolv.conf"><pre><span>echo</span> <span><span>&#34;</span>nameserver 127.0.0.1<span>&#34;</span></span> <span>|</span> sudo tee /etc/resolv.conf</pre></div>
<p dir="auto"><strong>Note:</strong> Package installations include the manual page. Run <code>man sinkzone</code> for detailed documentation.</p>
</details>
<hr/>
<details>
<summary><b>üëâ Windows Installation</b></summary>
<p dir="auto"><strong>Direct Download:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="# AMD64
Invoke-WebRequest -Uri &#34;https://github.com/berbyte/sinkzone/releases/latest/download/sinkzone-windows-amd64.exe&#34; -OutFile &#34;sinkzone.exe&#34;
# Move to a directory in your PATH (e.g., C:\Windows\System32 or create a custom directory)
Move-Item sinkzone.exe C:\Windows\System32\sinkzone.exe

# ARM64
Invoke-WebRequest -Uri &#34;https://github.com/berbyte/sinkzone/releases/latest/download/sinkzone-windows-arm64.exe&#34; -OutFile &#34;sinkzone.exe&#34;
# Move to a directory in your PATH (e.g., C:\Windows\System32 or create a custom directory)
Move-Item sinkzone.exe C:\Windows\System32\sinkzone.exe"><pre><span><span>#</span> AMD64</span>
<span>Invoke-WebRequest</span> <span>-</span>Uri <span><span>&#34;</span>https://github.com/berbyte/sinkzone/releases/latest/download/sinkzone-windows-amd64.exe<span>&#34;</span></span> <span>-</span>OutFile <span><span>&#34;</span>sinkzone.exe<span>&#34;</span></span>
<span><span>#</span> Move to a directory in your PATH (e.g., C:\Windows\System32 or create a custom directory)</span>
<span>Move-Item</span> <span>sinkzone.exe</span> C:\Windows\System32\<span>sinkzone.exe</span>

<span><span>#</span> ARM64</span>
<span>Invoke-WebRequest</span> <span>-</span>Uri <span><span>&#34;</span>https://github.com/berbyte/sinkzone/releases/latest/download/sinkzone-windows-arm64.exe<span>&#34;</span></span> <span>-</span>OutFile <span><span>&#34;</span>sinkzone.exe<span>&#34;</span></span>
<span><span>#</span> Move to a directory in your PATH (e.g., C:\Windows\System32 or create a custom directory)</span>
<span>Move-Item</span> <span>sinkzone.exe</span> C:\Windows\System32\<span>sinkzone.exe</span></pre></div>
<p dir="auto"><strong>Manual Setup:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="# 1. Start the DNS Resolver (run as Administrator for port 53)
sinkzone resolver

# 2. Launch the UI (in another terminal)
sinkzone tui

# 3. Enable Focus Mode
sinkzone focus start"><pre><span><span>#</span> 1. Start the DNS Resolver (run as Administrator for port 53)</span>
sinkzone resolver

<span><span>#</span> 2. Launch the UI (in another terminal)</span>
sinkzone tui

<span><span>#</span> 3. Enable Focus Mode</span>
sinkzone focus start</pre></div>
<p dir="auto"><strong>Configure System DNS (Required):</strong></p>
<ul dir="auto">
<li>Open Network &amp; Internet settings</li>
<li>Change adapter options</li>
<li>Right-click your network adapter ‚Üí Properties</li>
<li>Select &#34;Internet Protocol Version 4 (TCP/IPv4)&#34; ‚Üí Properties</li>
<li>Select &#34;Use the following DNS server addresses&#34;</li>
<li>Enter <code>127.0.0.1</code> as the preferred DNS server</li>
</ul>
<p dir="auto"><strong>Note:</strong> On Windows, you may need to run the resolver as Administrator for port 53, or use an unprivileged port like 5353.</p>
</details>
<hr/>
<details>
<summary><b>üëâ Build from Source</b></summary>
<div dir="auto" data-snippet-clipboard-copy-content="# Clone and build
git clone https://github.com/berbyte/sinkzone.git
cd sinkzone
go build -o sinkzone .

# Follow the manual setup steps above for your platform"><pre><span><span>#</span> Clone and build</span>
git clone https://github.com/berbyte/sinkzone.git
<span>cd</span> sinkzone
go build -o sinkzone <span>.</span>

<span><span>#</span> Follow the manual setup steps above for your platform</span></pre></div>
</details>
<hr/>


<p dir="auto">For detailed documentation, run:</p>

<hr/>


<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>sinkzone monitor</code></td>
<td>Show last 20 DNS requests</td>
</tr>
<tr>
<td><code>sinkzone tui</code></td>
<td>Launch the terminal UI</td>
</tr>
<tr>
<td><code>sinkzone resolver</code></td>
<td>Start DNS resolver on port 53</td>
</tr>
<tr>
<td><code>sinkzone focus start</code></td>
<td>Enable focus mode for 1 hour</td>
</tr>
<tr>
<td><code>sinkzone focus --disable</code></td>
<td>Disable focus mode immediately</td>
</tr>
<tr>
<td><code>sinkzone status</code></td>
<td>View current focus mode state</td>
</tr>
<tr>
<td><code>sinkzone allowlist add &lt;domain&gt;</code></td>
<td>Add domain to allowlist</td>
</tr>
<tr>
<td><code>sinkzone allowlist add &#34;*github*&#34;</code></td>
<td>Add wildcard pattern</td>
</tr>
<tr>
<td><code>sinkzone allowlist remove &lt;domain&gt;</code></td>
<td>Remove domain from allowlist</td>
</tr>
<tr>
<td><code>sinkzone allowlist list</code></td>
<td>List all allowed domains</td>
</tr>
<tr>
<td><code>sinkzone config set resolver &lt;ip&gt;</code></td>
<td>Set resolver IP</td>
</tr>
<tr>
<td><code>sinkzone man</code></td>
<td>Show manual page</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><strong>Note:</strong> On Unix-like systems (macOS/Linux), you may need to run <code>sudo sinkzone resolver</code> for port 53. On Windows, run as Administrator or use an unprivileged port like 5353.</p>

<p dir="auto">Sinkzone supports wildcard patterns for flexible domain matching:</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Pattern</th>
<th>Matches</th>
<th>Examples</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>*github*</code></td>
<td>Any domain containing &#34;github&#34;</td>
<td><code>github.com</code>, <code>api.github.com</code>, <code>githubusercontent.com</code></td>
</tr>
<tr>
<td><code>*.google.com</code></td>
<td>All subdomains of google.com</td>
<td><code>maps.google.com</code>, <code>drive.google.com</code>, <code>docs.google.com</code></td>
</tr>
<tr>
<td><code>api.*.com</code></td>
<td>Any api subdomain of .com domains</td>
<td><code>api.github.com</code>, <code>api.example.com</code>, <code>api.stackoverflow.com</code></td>
</tr>
<tr>
<td><code>exact.com</code></td>
<td>Exact domain match only</td>
<td><code>exact.com</code> (not <code>sub.exact.com</code>)</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><strong>Examples:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="# Allow all GitHub-related domains
sinkzone allowlist add &#34;*github*&#34;

# Allow all Google subdomains
sinkzone allowlist add &#34;*.google.com&#34;

# Allow all API subdomains
sinkzone allowlist add &#34;api.*.com&#34;

# Allow exact domain
sinkzone allowlist add &#34;stackoverflow.com&#34;"><pre><span><span>#</span> Allow all GitHub-related domains</span>
sinkzone allowlist add <span><span>&#34;</span>*github*<span>&#34;</span></span>

<span><span>#</span> Allow all Google subdomains</span>
sinkzone allowlist add <span><span>&#34;</span>*.google.com<span>&#34;</span></span>

<span><span>#</span> Allow all API subdomains</span>
sinkzone allowlist add <span><span>&#34;</span>api.*.com<span>&#34;</span></span>

<span><span>#</span> Allow exact domain</span>
sinkzone allowlist add <span><span>&#34;</span>stackoverflow.com<span>&#34;</span></span></pre></div>

<ul dir="auto">
<li>
<p dir="auto"><code>‚Üê</code>/<code>‚Üí</code>: Switch tabs</p>
</li>
<li>
<p dir="auto"><code>f</code>: Enable focus mode (1 hour)</p>
</li>
<li>
<p dir="auto"><code>ESC</code>: Quit</p>
</li>
<li>
<p dir="auto">Tabs include:</p>
<ul dir="auto">
<li><strong>Monitor</strong>: Real-time DNS traffic</li>
<li><strong>Allowlist</strong>: Add or remove allowed domains</li>
<li><strong>Settings</strong>: DNS resolver config</li>
</ul>
</li>
</ul>


<p dir="auto">Sinkzone is composed of three parts:</p>
<ul dir="auto">
<li><strong>Resolver</strong>: A local DNS server that intercepts queries and maintains real-time data via HTTP API.</li>
<li><strong>HTTP API Server</strong>: Provides REST endpoints for monitoring DNS queries and controlling focus mode.</li>
<li><strong>TUI/CLI</strong>: User interfaces that communicate with the resolver via HTTP API.</li>
<li><strong>TUI</strong>: A terminal UI for interacting with and monitoring the system via HTTP API.</li>
</ul>

<p dir="auto">The resolver exposes the following HTTP endpoints:</p>
<ul dir="auto">
<li><code>GET /api/queries</code> - Get the last 100 DNS queries</li>
<li><code>GET /api/focus</code> - Get current focus mode state</li>
<li><code>POST /api/focus</code> - Set focus mode (enabled/disabled, duration)</li>
<li><code>GET /api/state</code> - Get complete resolver state</li>
<li><code>GET /health</code> - Health check endpoint</li>
</ul>
<p dir="auto"><strong>API Usage Examples:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="# Start resolver with custom API port
sinkzone resolver --port 53 --api-port 8080

# Use CLI with custom API URL
sinkzone monitor --api-url http://127.0.0.1:8080
sinkzone focus --enable --api-url http://127.0.0.1:8080
sinkzone tui --api-url http://127.0.0.1:8080

# Direct API calls
curl http://127.0.0.1:8080/api/queries
curl http://127.0.0.1:8080/api/focus
curl -X POST http://127.0.0.1:8080/api/focus \
  -H &#34;Content-Type: application/json&#34; \
  -d &#39;{&#34;enabled&#34;: true, &#34;duration&#34;: &#34;1h&#34;}&#39;"><pre><span><span>#</span> Start resolver with custom API port</span>
sinkzone resolver --port 53 --api-port 8080

<span><span>#</span> Use CLI with custom API URL</span>
sinkzone monitor --api-url http://127.0.0.1:8080
sinkzone focus --enable --api-url http://127.0.0.1:8080
sinkzone tui --api-url http://127.0.0.1:8080

<span><span>#</span> Direct API calls</span>
curl http://127.0.0.1:8080/api/queries
curl http://127.0.0.1:8080/api/focus
curl -X POST http://127.0.0.1:8080/api/focus \
  -H <span><span>&#34;</span>Content-Type: application/json<span>&#34;</span></span> \
  -d <span><span>&#39;</span>{&#34;enabled&#34;: true, &#34;duration&#34;: &#34;1h&#34;}<span>&#39;</span></span></pre></div>

<ul dir="auto">
<li>All DNS queries are forwarded to upstream resolvers</li>
<li>You can view and manage DNS traffic and allowlist</li>
</ul>

<ul dir="auto">
<li>Only allowlisted domains resolve</li>
<li>Everything else returns <code>NXDOMAIN</code></li>
<li>Automatically expires after specified duration</li>
<li>Allowlist is reloaded when focus mode is enabled (changes take effect on new focus sessions)</li>
</ul>
<hr/>

<p dir="auto">Files are stored in <code>~/.sinkzone/</code>:</p>
<ul dir="auto">
<li><code>sinkzone.yaml</code>: Main config</li>
<li><code>allowlist.txt</code>: Simple text file containing allowed domains (supports wildcard patterns)</li>
<li><code>resolver.pid</code>: Process ID file for the DNS resolver</li>
</ul>
<p dir="auto"><strong>Allowlist Format:</strong></p>
<div data-snippet-clipboard-copy-content="# Comments start with #
github.com
stackoverflow.com
*github*
*.google.com
api.*.com"><pre><code># Comments start with #
github.com
stackoverflow.com
*github*
*.google.com
api.*.com
</code></pre></div>
<hr/>

<div dir="auto" data-snippet-clipboard-copy-content="# Build binary
go build -o sinkzone .

# Run tests
go test ./...

# Run resolver with custom ports
sinkzone resolver --port 5353 --api-port 8080

# Test API endpoints
curl http://127.0.0.1:8080/health
curl http://127.0.0.1:8080/api/queries

# Run TUI with custom API URL
sinkzone tui --api-url http://127.0.0.1:8080"><pre><span><span>#</span> Build binary</span>
go build -o sinkzone <span>.</span>

<span><span>#</span> Run tests</span>
go <span>test</span> ./...

<span><span>#</span> Run resolver with custom ports</span>
sinkzone resolver --port 5353 --api-port 8080

<span><span>#</span> Test API endpoints</span>
curl http://127.0.0.1:8080/health
curl http://127.0.0.1:8080/api/queries

<span><span>#</span> Run TUI with custom API URL</span>
sinkzone tui --api-url http://127.0.0.1:8080</pre></div>
<p dir="auto"><strong>Architecture:</strong></p>
<ul dir="auto">
<li>DNS Server: Handles DNS resolution and blocking</li>
<li>HTTP API Server: Provides REST endpoints for monitoring and control</li>
<li>CLI/TUI: User interfaces that communicate via HTTP API</li>
</ul>
<p dir="auto">PRs and issues welcome. We love contributors.</p>
<hr/>

<p dir="auto">MIT License. See the <a href="https://github.com/berbyte/sinkzone/blob/main/LICENSE">LICENSE</a> file for full details.</p>
<hr/>

<ul dir="auto">
<li>Email: <a href="mailto:dominis@ber.run">dominis@ber.run</a></li>
<li>GitHub: <a href="https://github.com/berbyte/sinkzone">github.com/berbyte/sinkzone</a></li>
</ul>
<p dir="auto">(<a href="#readme-top">back to top</a>)</p>
</article></div></div>
  </body>
</html>
