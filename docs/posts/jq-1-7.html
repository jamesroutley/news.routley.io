<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/jqlang/jq/releases">Original</a>
    <h1>jq 1.7</h1>
    
    <div id="readability-page-1" class="page"><div data-pjax="" data-hpc="">
      <section aria-labelledby="hd-63debe55">
  <h2 id="hd-63debe55">jq 1.7</h2>

  <div>
    


    <div>
  <div data-view-component="true">
  
  <div data-view-component="true">      

        <div data-pjax="true" data-test-selector="body-content" data-view-component="true"><p>After a five year hiatus we&#39;re back with a GitHub organization, with new admins and new maintainers who have brought a great deal of energy to make a long-awaited and long-needed new release.  We&#39;re very grateful for all the new owners, admins, and maintainers.  Special thanks go to Owen Ou (<a data-hovercard-type="user" data-hovercard-url="/users/owenthereal/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/owenthereal">@owenthereal</a>) for pushing to set up a new GitHub organization for jq, Stephen Dolan (<a data-hovercard-type="user" data-hovercard-url="/users/stedolan/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/stedolan">@stedolan</a>) for transferring the jq repository to the new organization, <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> for doing a great deal of work to get the release done, Mattias Wadman (<a data-hovercard-type="user" data-hovercard-url="/users/wader/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/wader">@wader</a>) and Emanuele Torre (<a data-hovercard-type="user" data-hovercard-url="/users/emanuele6/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/emanuele6">@emanuele6</a>) for many PRs and code reviews.  Many others also contributed PRs, issues, and code reviews as well, and you can find their contributions in the Git log and on the <a href="https://github.com/jqlang/jq/issues?q=is%3Aclosed+sort%3Aupdated-desc">closed issues and PRs page</a>.</p>
<h2>What&#39;s Changed</h2>
<p>Since the last stable release many things have happened:</p>
<ul>
<li>jq now lives at <a href="https://github.com/jqlang">https://github.com/jqlang</a></li>
<li>New maintainers, admins, and owners have been recruited.
<ul>
<li>A list of <a href="https://github.com/jqlang/jq/blob/jq-1.7/AUTHORS#L4-L14">current maintainers</a></li>
</ul>
</li>
<li>NEWS file is replaced by NEWS.md with Markdown format. <a data-hovercard-type="user" data-hovercard-url="/users/wader/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/wader">@wader</a> <a data-error-text="Failed to load title" data-id="1738474692" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2599" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2599/hovercard" href="https://github.com/jqlang/jq/pull/2599">#2599</a></li>
<li>CI, scan builds, release, website builds etc now use GitHub actions. <a data-hovercard-type="user" data-hovercard-url="/users/owenthereal/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/owenthereal">@owenthereal</a> <a data-hovercard-type="user" data-hovercard-url="/users/wader/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/wader">@wader</a> <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1729567864" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2596" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2596/hovercard" href="https://github.com/jqlang/jq/pull/2596">#2596</a> <a data-error-text="Failed to load title" data-id="1740680914" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2603" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2603/hovercard" href="https://github.com/jqlang/jq/pull/2603">#2603</a> <a data-error-text="Failed to load title" data-id="1762130614" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2620" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2620/hovercard" href="https://github.com/jqlang/jq/pull/2620">#2620</a> <a data-error-text="Failed to load title" data-id="1808784927" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2723" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2723/hovercard" href="https://github.com/jqlang/jq/pull/2723">#2723</a></li>
<li>Lots of documentation improvements and fixes.</li>
<li>Website updated with new section search box, better section ids for linking, dark mode, etc. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1772445579" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2628" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2628/hovercard" href="https://github.com/jqlang/jq/pull/2628">#2628</a></li>
<li>Release builds for:
<ul>
<li>Linux <code>amd64</code>, <code>arm64</code>, <code>armel</code>, <code>armhf</code>, <code>i386</code>, <code>mips</code>, <code>mips64</code>, <code>mips64el</code>, <code>mips64r6</code>, <code>mips64r6el</code>, <code>mipsel</code>, <code>mipsr6</code>, <code>mipsr6el</code>, <code>powerpc</code>, <code>ppc64el</code>, <code>riscv64</code> and <code>s390x</code></li>
<li>macOS <code>amd64</code> and <code>arm64</code></li>
<li>Windows <code>i386</code> and <code>amd64</code></li>
<li>Docker <code>linux/386</code>, <code>linux/amd64</code>, <code>linux/arm64</code>, <code>linux/mips64le</code>, <code>linux/ppc64le</code>, <code>linux/riscv64</code> and <code>linux/s390x</code></li>
<li>More details see <a data-hovercard-type="user" data-hovercard-url="/users/owenthereal/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/owenthereal">@owenthereal</a> <a data-error-text="Failed to load title" data-id="1792983221" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2665" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2665/hovercard" href="https://github.com/jqlang/jq/pull/2665">#2665</a></li>
</ul>
</li>
<li>Docker images are now available from <code>ghcr.io/jqlang/jq</code> instead of Docker Hub. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1787880656" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2652" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2652/hovercard" href="https://github.com/jqlang/jq/pull/2652">#2652</a> <a data-error-text="Failed to load title" data-id="1795762353" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2686" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2686/hovercard" href="https://github.com/jqlang/jq/pull/2686">#2686</a></li>
<li>OSS-fuzz. <a data-hovercard-type="user" data-hovercard-url="/users/DavidKorczynski/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/DavidKorczynski">@DavidKorczynski</a> <a data-error-text="Failed to load title" data-id="1818209321" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2760" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2760/hovercard" href="https://github.com/jqlang/jq/pull/2760">#2760</a> <a data-error-text="Failed to load title" data-id="1818352447" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2762" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2762/hovercard" href="https://github.com/jqlang/jq/pull/2762">#2762</a></li>
</ul>
<p>Full commit log can be found at <a href="https://github.com/jqlang/jq/compare/jq-1.6...jq-1.7"><tt>jq-1.6...jq-1.7</tt></a> but here are some highlights:</p>
<h2>CLI changes</h2>
<ul>
<li>
<p>Make object key color configurable using <code>JQ_COLORS</code> environment variable. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-hovercard-type="user" data-hovercard-url="/users/haguenau/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/haguenau">@haguenau</a> <a data-hovercard-type="user" data-hovercard-url="/users/ericpruitt/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ericpruitt">@ericpruitt</a> <a data-error-text="Failed to load title" data-id="1799965646" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2703" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2703/hovercard" href="https://github.com/jqlang/jq/pull/2703">#2703</a></p>
<div data-snippet-clipboard-copy-content="# this would make &#34;field&#34; bold yellow (`1;33`, the last value)
$ JQ_COLORS=&#34;0;90:0;37:0;37:0;37:0;32:1;37:1;37:1;33&#34; ./jq -n &#39;{field: 123}&#39;
{
  &#34;field&#34;: 123
}"><pre><span><span>#</span> this would make &#34;field&#34; bold yellow (`1;33`, the last value)</span>
$ JQ_COLORS=<span><span>&#34;</span>0;90:0;37:0;37:0;37:0;32:1;37:1;37:1;33<span>&#34;</span></span> ./jq -n <span><span>&#39;</span>{field: 123}<span>&#39;</span></span>
{
  <span><span>&#34;</span>field<span>&#34;</span></span>: 123
}</pre></div>
</li>
<li>
<p>Change the default color of null to Bright Black. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1837752567" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2824" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2824/hovercard" href="https://github.com/jqlang/jq/pull/2824">#2824</a></p>
</li>
<li>
<p>Respect <code>NO_COLOR</code> environment variable to disable color output. See <a href="https://no-color.org" rel="nofollow">https://no-color.org</a> for details. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1810922319" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2728" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2728/hovercard" href="https://github.com/jqlang/jq/pull/2728">#2728</a></p>
</li>
<li>
<p>Improved <code>--help</code> output. Now mentions all options and nicer order. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-hovercard-type="user" data-hovercard-url="/users/wader/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/wader">@wader</a> <a data-error-text="Failed to load title" data-id="1816782071" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2747" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2747/hovercard" href="https://github.com/jqlang/jq/pull/2747">#2747</a> <a data-error-text="Failed to load title" data-id="1819331936" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2766" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2766/hovercard" href="https://github.com/jqlang/jq/pull/2766">#2766</a> <a data-error-text="Failed to load title" data-id="1829422393" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2799" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2799/hovercard" href="https://github.com/jqlang/jq/pull/2799">#2799</a></p>
</li>
<li>
<p>Fix multiple issues of exit code using <code>--exit-code</code>/<code>-e</code> option. <a data-hovercard-type="user" data-hovercard-url="/users/ryo1kato/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ryo1kato">@ryo1kato</a> <a data-error-text="Failed to load title" data-id="345558069" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/1697" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/1697/hovercard" href="https://github.com/jqlang/jq/pull/1697">#1697</a></p>
<div data-snippet-clipboard-copy-content="# true-ish last output value exits with zero
$ jq -ne true ; echo $?
true
0
# false-ish last output value (false and null) exits with 1
$ jq -ne false ; echo $?
false
1
# no output value exists with 4
$ jq -ne empty ; echo $?
4"><pre><span><span>#</span> true-ish last output value exits with zero</span>
$ jq -ne <span>true</span> <span>;</span> <span>echo</span> <span>$?</span>
<span>true</span>
0
<span><span>#</span> false-ish last output value (false and null) exits with 1</span>
$ jq -ne <span>false</span> <span>;</span> <span>echo</span> <span>$?</span>
<span>false</span>
1
<span><span>#</span> no output value exists with 4</span>
$ jq -ne empty <span>;</span> <span>echo</span> <span>$?</span>
4</pre></div>
</li>
<li>
<p>Add <code>--binary</code>/<code>-b</code> on Windows for binary output. To get <code>\n</code> instead of <code>\r\n</code> line endings. <a data-hovercard-type="user" data-hovercard-url="/users/nicowilliams/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/nicowilliams">@nicowilliams</a> <a data-hovercard-type="commit" data-hovercard-url="https://github.com/jqlang/jq/commit/0dab2b18d73e561f5118011a65cc9877bf21c110/hovercard" href="https://github.com/jqlang/jq/commit/0dab2b18d73e561f5118011a65cc9877bf21c110"><tt>0dab2b1</tt></a></p>
</li>
<li>
<p>Add <code>--raw-output0</code> for NUL (zero byte) separated output. <a data-hovercard-type="user" data-hovercard-url="/users/asottile/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/asottile">@asottile</a> <a data-hovercard-type="user" data-hovercard-url="/users/pabs3/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/pabs3">@pabs3</a> <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="506448541" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/1990" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/1990/hovercard" href="https://github.com/jqlang/jq/pull/1990">#1990</a> <a data-error-text="Failed to load title" data-id="775591796" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2235" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2235/hovercard" href="https://github.com/jqlang/jq/pull/2235">#2235</a> <a data-error-text="Failed to load title" data-id="1795601300" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2684" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2684/hovercard" href="https://github.com/jqlang/jq/pull/2684">#2684</a></p>
<div data-snippet-clipboard-copy-content="# will output a zero byte after each output
$ jq -n --raw-output0 &#39;1,2,3&#39; | xxd
00000000: 3100 3200 3300                           1.2.3.
# can be used with xargs -0
$ jq -n --raw-output0 &#39;&#34;a&#34;,&#34;b&#34;,&#34;c&#34;&#39; | xargs -0 -n1
a
b
c
$ jq -n --raw-output0 &#39;&#34;a b c&#34;, &#34;d\ne\nf&#34;&#39; | xargs -0 printf &#39;[%s]\n&#39;
[a b c]
[d
e
f]
# can be used with read -d &#39;&#39;
$ while IFS= read -r -d &#39;&#39; json; do
&gt;   jq &#39;.name&#39; &lt;&lt;&lt; &#34;$json&#34;
&gt; done &lt; &lt;(jq -n --raw-output0 &#39;{name:&#34;a b c&#34;},{name:&#34;d\ne\nf&#34;}&#39;)
&#34;a b c&#34;
&#34;d\ne\nf&#34;
# also it&#39;s an error to output a string containing a NUL when using NUL separator
$ jq -n --raw-output0 &#39;&#34;\u0000&#34;&#39;
jq: error (at &lt;unknown&gt;): Cannot dump a string containing NUL with --raw-output0 option"><pre><span><span>#</span> will output a zero byte after each output</span>
$ jq -n --raw-output0 <span><span>&#39;</span>1,2,3<span>&#39;</span></span> <span>|</span> xxd
00000000: 3100 3200 3300                           1.2.3.
<span><span>#</span> can be used with xargs -0</span>
$ jq -n --raw-output0 <span><span>&#39;</span>&#34;a&#34;,&#34;b&#34;,&#34;c&#34;<span>&#39;</span></span> <span>|</span> xargs -0 -n1
a
b
c
$ jq -n --raw-output0 <span><span>&#39;</span>&#34;a b c&#34;, &#34;d\ne\nf&#34;<span>&#39;</span></span> <span>|</span> xargs -0 <span>printf</span> <span><span>&#39;</span>[%s]\n<span>&#39;</span></span>
[a b c]
[d
e
f]
<span><span>#</span> can be used with read -d &#39;&#39;</span>
$ <span>while</span> IFS= <span>read</span> -r -d <span><span>&#39;</span><span>&#39;</span></span> json<span>;</span> <span>do</span>
<span>&gt;</span>   jq <span><span>&#39;</span>.name<span>&#39;</span></span> <span>&lt;&lt;&lt;</span> <span><span>&#34;</span>$json<span>&#34;</span></span>
<span>&gt;</span> <span>done</span> <span>&lt;</span> <span><span>&lt;(</span>jq -n --raw-output0 <span><span>&#39;</span>{name:&#34;a b c&#34;},{name:&#34;d\ne\nf&#34;}<span>&#39;</span></span><span>)</span></span>
<span><span>&#34;</span>a b c<span>&#34;</span></span>
<span><span>&#34;</span>d\ne\nf<span>&#34;</span></span>
<span><span>#</span> also it&#39;s an error to output a string containing a NUL when using NUL separator</span>
$ jq -n --raw-output0 <span><span>&#39;</span>&#34;\u0000&#34;<span>&#39;</span></span>
jq: error (at <span>&lt;</span>unknown<span>&gt;</span>): Cannot dump a string containing NUL with --raw-output0 option</pre></div>
</li>
<li>
<p>Fix assert crash and validate JSON for <code>--jsonarg</code>. <a data-hovercard-type="user" data-hovercard-url="/users/wader/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/wader">@wader</a> <a data-error-text="Failed to load title" data-id="1789901731" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2658" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2658/hovercard" href="https://github.com/jqlang/jq/pull/2658">#2658</a></p>
</li>
<li>
<p>Remove deprecated <code>--argfile</code> option. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1820219091" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2768" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2768/hovercard" href="https://github.com/jqlang/jq/pull/2768">#2768</a></p>
</li>
<li>
<p>Enable stack protection. <a data-hovercard-type="user" data-hovercard-url="/users/nicowilliams/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/nicowilliams">@nicowilliams</a> <a data-error-text="Failed to load title" data-id="1830144482" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2801" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2801/hovercard" href="https://github.com/jqlang/jq/pull/2801">#2801</a></p>
</li>
</ul>
<h2>Language changes</h2>
<ul>
<li>
<p>Use decimal number literals to preserve precision. Comparison operations respects precision but arithmetic operations might truncate. <a data-hovercard-type="user" data-hovercard-url="/users/leonid-s-usov/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/leonid-s-usov">@leonid-s-usov</a> <a data-error-text="Failed to load title" data-id="374686122" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/1752" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/1752/hovercard" href="https://github.com/jqlang/jq/pull/1752">#1752</a></p>
<div data-snippet-clipboard-copy-content="# precision is preserved
$ echo &#39;100000000000000000&#39; | jq .
100000000000000000
# comparison respects precision (this is false in JavaScript)
$ jq -n &#39;100000000000000000 &lt; 100000000000000001&#39;
true
# sort/0 works
$ jq -n -c &#39;[100000000000000001, 100000000000000003, 100000000000000004, 100000000000000002] | sort&#39;
[100000000000000001,100000000000000002,100000000000000003,100000000000000004]
# arithmetic operations might truncate (same as JavaScript)
$ jq -n &#39;100000000000000000 + 10&#39;
100000000000000020"><pre><span><span>#</span> precision is preserved</span>
$ <span>echo</span> <span><span>&#39;</span>100000000000000000<span>&#39;</span></span> <span>|</span> jq <span>.</span>
100000000000000000
<span><span>#</span> comparison respects precision (this is false in JavaScript)</span>
$ jq -n <span><span>&#39;</span>100000000000000000 &lt; 100000000000000001<span>&#39;</span></span>
<span>true</span>
<span><span>#</span> sort/0 works</span>
$ jq -n -c <span><span>&#39;</span>[100000000000000001, 100000000000000003, 100000000000000004, 100000000000000002] | sort<span>&#39;</span></span>
[100000000000000001,100000000000000002,100000000000000003,100000000000000004]
<span><span>#</span> arithmetic operations might truncate (same as JavaScript)</span>
$ jq -n <span><span>&#39;</span>100000000000000000 + 10<span>&#39;</span></span>
100000000000000020</pre></div>
</li>
<li>
<p>Adds new builtin <code>pick(stream)</code> to emit a projection of the input object or array. <a data-hovercard-type="user" data-hovercard-url="/users/pkoppstein/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/pkoppstein">@pkoppstein</a> <a data-error-text="Failed to load title" data-id="1789113417" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2656" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2656/hovercard" href="https://github.com/jqlang/jq/pull/2656">#2656</a> <a data-error-text="Failed to load title" data-id="1825295139" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2779" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2779/hovercard" href="https://github.com/jqlang/jq/pull/2779">#2779</a></p>
<div data-snippet-clipboard-copy-content="$ jq -n &#39;{&#34;a&#34;: 1, &#34;b&#34;: {&#34;c&#34;: 2, &#34;d&#34;: 3}, &#34;e&#34;: 4} | pick(.a, .b.c, .x)&#39;
{
  &#34;a&#34;: 1,
  &#34;b&#34;: {
    &#34;c&#34;: 2
  },
  &#34;x&#34;: null
}"><pre>$ jq -n <span><span>&#39;</span>{&#34;a&#34;: 1, &#34;b&#34;: {&#34;c&#34;: 2, &#34;d&#34;: 3}, &#34;e&#34;: 4} | pick(.a, .b.c, .x)<span>&#39;</span></span>
{
  <span><span>&#34;</span>a<span>&#34;</span></span>: 1,
  <span><span>&#34;</span>b<span>&#34;</span></span>: {
    <span><span>&#34;</span>c<span>&#34;</span></span>: 2
  },
  <span><span>&#34;</span>x<span>&#34;</span></span>: null
}</pre></div>
</li>
<li>
<p>Adds new builtin <code>debug(msgs)</code> that works like <code>debug</code> but applies a filter on the input before writing to stderr. <a data-hovercard-type="user" data-hovercard-url="/users/pkoppstein/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/pkoppstein">@pkoppstein</a> <a data-error-text="Failed to load title" data-id="1802067988" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2710" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2710/hovercard" href="https://github.com/jqlang/jq/pull/2710">#2710</a></p>
<div data-snippet-clipboard-copy-content="$ jq -n &#39;1 as $x | 2 | debug(&#34;Entering function foo with $x == \($x)&#34;, .) | (.+1)&#39;
[&#34;DEBUG:&#34;,&#34;Entering function foo with $x == 1&#34;]
[&#34;DEBUG:&#34;,2]
3
$ jq -n &#39;{a: 1, b: 2, c: 3} | debug({a, b, sum: (.a+.b)})&#39;
[&#34;DEBUG:&#34;,{&#34;a&#34;:1,&#34;b&#34;:2,&#34;sum&#34;:3}]
{
  &#34;a&#34;: 1,
  &#34;b&#34;: 2,
  &#34;c&#34;: 3
}"><pre>$ jq -n <span><span>&#39;</span>1 as $x | 2 | debug(&#34;Entering function foo with $x == \($x)&#34;, .) | (.+1)<span>&#39;</span></span>
[<span><span>&#34;</span>DEBUG:<span>&#34;</span></span>,<span><span>&#34;</span>Entering function foo with <span>$x</span> == 1<span>&#34;</span></span>]
[<span><span>&#34;</span>DEBUG:<span>&#34;</span></span>,2]
3
$ jq -n <span><span>&#39;</span>{a: 1, b: 2, c: 3} | debug({a, b, sum: (.a+.b)})<span>&#39;</span></span>
[<span><span>&#34;</span>DEBUG:<span>&#34;</span></span>,{<span><span>&#34;</span>a<span>&#34;</span></span>:1,<span><span>&#34;</span>b<span>&#34;</span></span>:2,<span><span>&#34;</span>sum<span>&#34;</span></span>:3}]
{
  <span><span>&#34;</span>a<span>&#34;</span></span>: 1,
  <span><span>&#34;</span>b<span>&#34;</span></span>: 2,
  <span><span>&#34;</span>c<span>&#34;</span></span>: 3
}</pre></div>
</li>
<li>
<p>Adds new builtin <code>scan($re; $flags)</code>. Was documented but not implemented. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="480954690" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/1961" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/1961/hovercard" href="https://github.com/jqlang/jq/pull/1961">#1961</a></p>
<div data-snippet-clipboard-copy-content="# look for pattern &#34;ab&#34; in &#34;abAB&#34; ignoring casing
$ jq -n &#39;&#34;abAB&#34; | scan(&#34;ab&#34;; &#34;i&#34;)&#39;
&#34;ab&#34;
&#34;AB&#34;"><pre><span><span>#</span> look for pattern &#34;ab&#34; in &#34;abAB&#34; ignoring casing</span>
$ jq -n <span><span>&#39;</span>&#34;abAB&#34; | scan(&#34;ab&#34;; &#34;i&#34;)<span>&#39;</span></span>
<span><span>&#34;</span>ab<span>&#34;</span></span>
<span><span>&#34;</span>AB<span>&#34;</span></span></pre></div>
</li>
<li>
<p>Adds new builtin <code>abs</code> to get absolute value. This potentially allows the literal value of numbers to be preserved as <code>length</code> and <code>fabs</code> convert to float. <a data-hovercard-type="user" data-hovercard-url="/users/pkoppstein/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/pkoppstein">@pkoppstein</a> <a data-error-text="Failed to load title" data-id="1819486782" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2767" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2767/hovercard" href="https://github.com/jqlang/jq/pull/2767">#2767</a></p>
</li>
<li>
<p>Allow <code>if</code> without <code>else</code>-branch. When skipped the <code>else</code>-branch will be <code>.</code> (identity). <a data-hovercard-type="user" data-hovercard-url="/users/chancez/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/chancez">@chancez</a> <a data-hovercard-type="user" data-hovercard-url="/users/wader/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/wader">@wader</a> <a data-error-text="Failed to load title" data-id="410595732" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/1825" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/1825/hovercard" href="https://github.com/jqlang/jq/pull/1825">#1825</a> <a data-error-text="Failed to load title" data-id="1363866585" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2481" data-hovercard-type="issue" data-hovercard-url="/jqlang/jq/issues/2481/hovercard" href="https://github.com/jqlang/jq/issues/2481">#2481</a></p>
<div data-snippet-clipboard-copy-content="# convert 1 to &#34;one&#34; otherwise keep as is
$ jq -n &#39;1,2 | if . == 1 then &#34;one&#34; end&#39;
&#34;one&#34;
2
# behaves the same as
$ jq -n &#39;1,2 | if . == 1 then &#34;one&#34; else . end&#39;
&#34;one&#34;
2
# also works with elif
$ jq -n &#39;1,2,3 | if . == 1 then &#34;one&#34; elif . == 2 then &#34;two&#34; end
&#34;one&#34;
&#34;two&#34;
3"><pre><span><span>#</span> convert 1 to &#34;one&#34; otherwise keep as is</span>
$ jq -n <span><span>&#39;</span>1,2 | if . == 1 then &#34;one&#34; end<span>&#39;</span></span>
<span><span>&#34;</span>one<span>&#34;</span></span>
2
<span><span>#</span> behaves the same as</span>
$ jq -n <span><span>&#39;</span>1,2 | if . == 1 then &#34;one&#34; else . end<span>&#39;</span></span>
<span><span>&#34;</span>one<span>&#34;</span></span>
2
<span><span>#</span> also works with elif</span>
$ jq -n <span><span>&#39;</span>1,2,3 | if . == 1 then &#34;one&#34; elif . == 2 then &#34;two&#34; end</span>
<span>&#34;one&#34;</span>
<span>&#34;two&#34;</span>
<span>3</span></pre></div>
</li>
<li>
<p>Allow use of <code>$binding</code> as key in object literals. <a data-hovercard-type="user" data-hovercard-url="/users/nicowilliams/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/nicowilliams">@nicowilliams</a> <a data-hovercard-type="commit" data-hovercard-url="https://github.com/jqlang/jq/commit/8ea4a5584edb7f54e19cddb6240984d3a543f4f1/hovercard" href="https://github.com/jqlang/jq/commit/8ea4a5584edb7f54e19cddb6240984d3a543f4f1"><tt>8ea4a55</tt></a></p>
<div data-snippet-clipboard-copy-content="$ jq -n &#39;&#34;a&#34; as $key | {$key: 123}&#39;
{
  &#34;a&#34;: 123
}
# previously parentheses were needed
$ jq -n &#39;&#34;a&#34; as $key | {($key): 123}&#39;
{
  &#34;a&#34;: 123
}"><pre>$ jq -n <span><span>&#39;</span>&#34;a&#34; as $key | {$key: 123}<span>&#39;</span></span>
{
  <span><span>&#34;</span>a<span>&#34;</span></span>: 123
}
<span><span>#</span> previously parentheses were needed</span>
$ jq -n <span><span>&#39;</span>&#34;a&#34; as $key | {($key): 123}<span>&#39;</span></span>
{
  <span><span>&#34;</span>a<span>&#34;</span></span>: 123
}</pre></div>
</li>
<li>
<p>Allow dot between chained indexes when using <code>.[&#34;index&#34;]</code> <a data-hovercard-type="user" data-hovercard-url="/users/nicowilliams/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/nicowilliams">@nicowilliams</a> <a data-error-text="Failed to load title" data-id="161502362" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/1168" data-hovercard-type="issue" data-hovercard-url="/jqlang/jq/issues/1168/hovercard" href="https://github.com/jqlang/jq/issues/1168">#1168</a></p>
<div data-snippet-clipboard-copy-content="$ jq -n &#39;{&#34;a&#34;: {&#34;b&#34;: 123}} | .a[&#34;b&#34;]&#39;
123
# now this also works
$ jq -n &#39;{&#34;a&#34;: {&#34;b&#34;: 123}} | .a.[&#34;b&#34;]&#39;
123"><pre>$ jq -n <span><span>&#39;</span>{&#34;a&#34;: {&#34;b&#34;: 123}} | .a[&#34;b&#34;]<span>&#39;</span></span>
123
<span><span>#</span> now this also works</span>
$ jq -n <span><span>&#39;</span>{&#34;a&#34;: {&#34;b&#34;: 123}} | .a.[&#34;b&#34;]<span>&#39;</span></span>
123</pre></div>
</li>
<li>
<p>Allow dot for chained value iterator <code>.[]</code>, <code>.[]?</code> <a data-hovercard-type="user" data-hovercard-url="/users/wader/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/wader">@wader</a> <a data-error-text="Failed to load title" data-id="1786492375" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2650" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2650/hovercard" href="https://github.com/jqlang/jq/pull/2650">#2650</a></p>
<div data-snippet-clipboard-copy-content="$ jq -n &#39;{&#34;a&#34;: [123]} | .a[]&#39;
123
# now this also works
$ jq -n &#39;{&#34;a&#34;: [123]} | .a.[]&#39;
123"><pre>$ jq -n <span><span>&#39;</span>{&#34;a&#34;: [123]} | .a[]<span>&#39;</span></span>
123
<span><span>#</span> now this also works</span>
$ jq -n <span><span>&#39;</span>{&#34;a&#34;: [123]} | .a.[]<span>&#39;</span></span>
123</pre></div>
</li>
<li>
<p>Fix try/catch catches more than it should. <a data-hovercard-type="user" data-hovercard-url="/users/nicowilliams/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/nicowilliams">@nicowilliams</a> <a data-error-text="Failed to load title" data-id="1816897661" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2750" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2750/hovercard" href="https://github.com/jqlang/jq/pull/2750">#2750</a></p>
</li>
<li>
<p>Speed up and refactor some builtins, also remove <code>scalars_or_empty/0</code>. <a data-hovercard-type="user" data-hovercard-url="/users/muhmuhten/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/muhmuhten">@muhmuhten</a> <a data-error-text="Failed to load title" data-id="414575632" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/1845" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/1845/hovercard" href="https://github.com/jqlang/jq/pull/1845">#1845</a></p>
</li>
<li>
<p>Now <code>halt</code> and <code>halt_error</code> exit immediately instead of continuing to the next input. <a data-hovercard-type="user" data-hovercard-url="/users/emanuele6/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/emanuele6">@emanuele6</a> <a data-error-text="Failed to load title" data-id="1793800694" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2667" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2667/hovercard" href="https://github.com/jqlang/jq/pull/2667">#2667</a></p>
</li>
<li>
<p>Fix issue converting string to number after previous convert error. <a data-hovercard-type="user" data-hovercard-url="/users/thalman/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/thalman">@thalman</a> <a data-error-text="Failed to load title" data-id="1109079679" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2400" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2400/hovercard" href="https://github.com/jqlang/jq/pull/2400">#2400</a></p>
</li>
<li>
<p>Fix issue representing large numbers on some platforms causing invalid JSON output. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1790607154" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2661" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2661/hovercard" href="https://github.com/jqlang/jq/pull/2661">#2661</a></p>
</li>
<li>
<p>Fix deletion using assigning empty against arrays. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="627092290" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2133" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2133/hovercard" href="https://github.com/jqlang/jq/pull/2133">#2133</a></p>
<div data-snippet-clipboard-copy-content="# now this works as expected, filter out all values over 2 by assigning empty
$ jq -c &#39;(.[] | select(. &gt;= 2)) |= empty&#39; &lt;&lt;&lt; &#39;[1,5,3,0,7]&#39;
[1,0]"><pre><span><span>#</span> now this works as expected, filter out all values over 2 by assigning empty</span>
$ jq -c <span><span>&#39;</span>(.[] | select(. &gt;= 2)) |= empty<span>&#39;</span></span> <span>&lt;&lt;&lt;</span> <span><span>&#39;</span>[1,5,3,0,7]<span>&#39;</span></span>
[1,0]</pre></div>
</li>
<li>
<p>Allow keywords to be used as binding name in more places. <a data-hovercard-type="user" data-hovercard-url="/users/emanuele6/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/emanuele6">@emanuele6</a> <a data-error-text="Failed to load title" data-id="1795517266" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2681" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2681/hovercard" href="https://github.com/jqlang/jq/pull/2681">#2681</a></p>
</li>
<li>
<p>Allow using <code>nan</code> as NaN in JSON. <a data-hovercard-type="user" data-hovercard-url="/users/emanuele6/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/emanuele6">@emanuele6</a> <a data-error-text="Failed to load title" data-id="1803431686" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2712" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2712/hovercard" href="https://github.com/jqlang/jq/pull/2712">#2712</a></p>
</li>
<li>
<p>Expose a module&#39;s function names in <code>modulemeta</code>. <a data-hovercard-type="user" data-hovercard-url="/users/mrwilson/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/mrwilson">@mrwilson</a> <a data-error-text="Failed to load title" data-id="1847942165" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2837" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2837/hovercard" href="https://github.com/jqlang/jq/pull/2837">#2837</a></p>
</li>
<li>
<p>Fix <code>contains/1</code> to handle strings with NUL. <a data-hovercard-type="user" data-hovercard-url="/users/nicowilliams/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/nicowilliams">@nicowilliams</a> <a data-hovercard-type="commit" data-hovercard-url="https://github.com/jqlang/jq/commit/61cd6dbb3b7f3423d49a1a9beb2b82ad16a34755/hovercard" href="https://github.com/jqlang/jq/commit/61cd6dbb3b7f3423d49a1a9beb2b82ad16a34755"><tt>61cd6db</tt></a></p>
</li>
<li>
<p>Fix <code>stderr/0</code> to output raw text without any decoration. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1816965365" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2751" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2751/hovercard" href="https://github.com/jqlang/jq/pull/2751">#2751</a></p>
</li>
<li>
<p>Fix <code>nth/2</code> to emit empty on index out of range. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1795223102" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2674" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2674/hovercard" href="https://github.com/jqlang/jq/pull/2674">#2674</a></p>
</li>
<li>
<p>Fix <code>implode</code> to not assert and instead replace invalid unicode codepoints. <a data-hovercard-type="user" data-hovercard-url="/users/wader/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/wader">@wader</a> <a data-error-text="Failed to load title" data-id="1784689804" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2646" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2646/hovercard" href="https://github.com/jqlang/jq/pull/2646">#2646</a></p>
</li>
<li>
<p>Fix <code>indices/1</code> and <code>rindex/1</code> in case of overlapping matches in strings. <a data-hovercard-type="user" data-hovercard-url="/users/emanuele6/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/emanuele6">@emanuele6</a> <a data-error-text="Failed to load title" data-id="1805666775" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2718" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2718/hovercard" href="https://github.com/jqlang/jq/pull/2718">#2718</a></p>
</li>
<li>
<p>Fix <code>sub/3</code> to resolve issues involving global search-and-replace (gsub) operations. <a data-hovercard-type="user" data-hovercard-url="/users/pkoppstein/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/pkoppstein">@pkoppstein</a> <a data-error-text="Failed to load title" data-id="1780192433" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2641" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2641/hovercard" href="https://github.com/jqlang/jq/pull/2641">#2641</a></p>
</li>
<li>
<p>Fix <code>significand/0</code>, <code>gamma/0</code> and <code>drem/2</code> to be available on macOS. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1817021065" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2756" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2756/hovercard" href="https://github.com/jqlang/jq/pull/2756">#2756</a> <a data-error-text="Failed to load title" data-id="1823321958" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2775" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2775/hovercard" href="https://github.com/jqlang/jq/pull/2775">#2775</a></p>
</li>
<li>
<p>Fix empty regular expression matches. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1795262942" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2677" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2677/hovercard" href="https://github.com/jqlang/jq/pull/2677">#2677</a></p>
</li>
<li>
<p>Fix overflow exception of the modulo operator. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1773199304" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2629" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2629/hovercard" href="https://github.com/jqlang/jq/pull/2629">#2629</a></p>
</li>
<li>
<p>Fix string multiplication by 0 (and less than 1) to emit empty string. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="637850708" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2142" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2142/hovercard" href="https://github.com/jqlang/jq/pull/2142">#2142</a></p>
</li>
<li>
<p>Fix segfault when using libjq and threads. <a data-hovercard-type="user" data-hovercard-url="/users/thalman/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/thalman">@thalman</a> <a data-error-text="Failed to load title" data-id="1605548253" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2546" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2546/hovercard" href="https://github.com/jqlang/jq/pull/2546">#2546</a></p>
</li>
<li>
<p>Fix constant folding of division and reminder with zero divisor. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1829339933" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2797" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2797/hovercard" href="https://github.com/jqlang/jq/pull/2797">#2797</a></p>
</li>
<li>
<p>Fix <code>error/0</code>, <code>error/1</code> to throw null error. <a data-hovercard-type="user" data-hovercard-url="/users/emanuele6/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/emanuele6">@emanuele6</a> <a data-error-text="Failed to load title" data-id="1837338753" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2823" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2823/hovercard" href="https://github.com/jqlang/jq/pull/2823">#2823</a></p>
</li>
<li>
<p>Simpler and faster <code>transpose</code>. <a data-hovercard-type="user" data-hovercard-url="/users/pkoppstein/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/pkoppstein">@pkoppstein</a> <a data-error-text="Failed to load title" data-id="1817532711" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2758" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2758/hovercard" href="https://github.com/jqlang/jq/pull/2758">#2758</a></p>
</li>
<li>
<p>Simple and efficient implementation of <code>walk/1</code>. <a data-hovercard-type="user" data-hovercard-url="/users/pkoppstein/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/pkoppstein">@pkoppstein</a> <a data-error-text="Failed to load title" data-id="1829093174" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2795" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2795/hovercard" href="https://github.com/jqlang/jq/pull/2795">#2795</a></p>
</li>
<li>
<p>Remove deprecated filters <code>leaf_paths</code>, <code>recurse_down</code>. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1793571720" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2666" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2666/hovercard" href="https://github.com/jqlang/jq/pull/2666">#2666</a></p>
</li>
</ul>
<p><strong>Full Changelog</strong>: <a href="https://github.com/jqlang/jq/compare/jq-1.7rc2...jq-1.7"><tt>jq-1.7rc2...jq-1.7</tt></a></p></div>
</div>
  
</div></div>

  </div>
  </section>
  <section aria-labelledby="hd-8e867a43">
  <h2 id="hd-8e867a43">jq 1.7rc2</h2>

  <div>
    


    <div>
  <div data-view-component="true">
  
  <div data-view-component="true">      

        <div data-pjax="true" data-test-selector="body-content" data-view-component="true"><p>Note that this is a pre-release. Feedback is welcome <a data-error-text="Failed to load title" data-id="1868583795" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2862" data-hovercard-type="issue" data-hovercard-url="/jqlang/jq/issues/2862/hovercard" href="https://github.com/jqlang/jq/issues/2862">#2862</a>.</p>
<hr/>
<p>After a five year hiatus we&#39;re back with a GitHub organization, with new admins and new maintainers who have brought a great deal of energy to make a long-awaited and long-needed new release.</p>
<p>Since the last stable release many things have happened:</p>
<ul>
<li>jq now lives at <a href="https://github.com/jqlang">https://github.com/jqlang</a></li>
<li>New maintainers, admins, and owners have been recruited.
<ul>
<li>A list of <a href="https://github.com/jqlang/jq/blob/jq-1.7/AUTHORS#L4-L14">current maintainers</a></li>
</ul>
</li>
<li>NEWS file is replaced by NEWS.md with Markdown format. <a data-hovercard-type="user" data-hovercard-url="/users/wader/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/wader">@wader</a> <a data-error-text="Failed to load title" data-id="1738474692" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2599" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2599/hovercard" href="https://github.com/jqlang/jq/pull/2599">#2599</a></li>
<li>CI, scan builds, release, website builds etc now use GitHub actions. <a data-hovercard-type="user" data-hovercard-url="/users/owenthereal/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/owenthereal">@owenthereal</a> <a data-hovercard-type="user" data-hovercard-url="/users/wader/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/wader">@wader</a> <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1729567864" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2596" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2596/hovercard" href="https://github.com/jqlang/jq/pull/2596">#2596</a> <a data-error-text="Failed to load title" data-id="1740680914" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2603" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2603/hovercard" href="https://github.com/jqlang/jq/pull/2603">#2603</a> <a data-error-text="Failed to load title" data-id="1762130614" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2620" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2620/hovercard" href="https://github.com/jqlang/jq/pull/2620">#2620</a> <a data-error-text="Failed to load title" data-id="1808784927" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2723" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2723/hovercard" href="https://github.com/jqlang/jq/pull/2723">#2723</a></li>
<li>Lots of documentation improvements and fixes.</li>
<li>Website updated with new section search box, better section ids for linking, dark mode, etc. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1772445579" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2628" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2628/hovercard" href="https://github.com/jqlang/jq/pull/2628">#2628</a></li>
<li>Release builds for:
<ul>
<li>Linux <code>amd64</code>, <code>arm64</code>, <code>armel</code>, <code>armhf</code>, <code>i386</code>, <code>mips</code>, <code>mips64</code>, <code>mips64el</code>, <code>mips64r6</code>, <code>mips64r6el</code>, <code>mipsel</code>, <code>mipsr6</code>, <code>mipsr6el</code>, <code>powerpc</code>, <code>ppc64el</code>, <code>riscv64</code> and <code>s390x</code></li>
<li>macOS <code>amd64</code> and <code>arm64</code></li>
<li>Windows <code>i386</code> and <code>amd64</code></li>
<li>Docker <code>linux/386</code>, <code>linux/amd64</code>, <code>linux/arm64</code>, <code>linux/mips64le</code>, <code>linux/ppc64le</code>, <code>linux/riscv64</code> and <code>linux/s390x</code></li>
<li>More details see <a data-hovercard-type="user" data-hovercard-url="/users/owenthereal/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/owenthereal">@owenthereal</a> <a data-error-text="Failed to load title" data-id="1792983221" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2665" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2665/hovercard" href="https://github.com/jqlang/jq/pull/2665">#2665</a></li>
</ul>
</li>
<li>Docker images are now available from <code>ghcr.io/jqlang/jq</code> instead of Docker Hub. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1787880656" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2652" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2652/hovercard" href="https://github.com/jqlang/jq/pull/2652">#2652</a> <a data-error-text="Failed to load title" data-id="1795762353" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2686" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2686/hovercard" href="https://github.com/jqlang/jq/pull/2686">#2686</a></li>
<li>OSS-fuzz. <a data-hovercard-type="user" data-hovercard-url="/users/DavidKorczynski/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/DavidKorczynski">@DavidKorczynski</a> <a data-error-text="Failed to load title" data-id="1818209321" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2760" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2760/hovercard" href="https://github.com/jqlang/jq/pull/2760">#2760</a> <a data-error-text="Failed to load title" data-id="1818352447" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2762" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2762/hovercard" href="https://github.com/jqlang/jq/pull/2762">#2762</a></li>
</ul>
<p>Full commit log can be found at <a href="https://github.com/jqlang/jq/compare/jq-1.6...jq-1.7rc2"><tt>jq-1.6...jq-1.7rc2</tt></a> but here are some highlights:</p>
<h2>CLI changes</h2>
<ul>
<li>
<p>Make object key color configurable using <code>JQ_COLORS</code> environment variable. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-hovercard-type="user" data-hovercard-url="/users/haguenau/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/haguenau">@haguenau</a> <a data-hovercard-type="user" data-hovercard-url="/users/ericpruitt/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ericpruitt">@ericpruitt</a> <a data-error-text="Failed to load title" data-id="1799965646" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2703" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2703/hovercard" href="https://github.com/jqlang/jq/pull/2703">#2703</a></p>
<div data-snippet-clipboard-copy-content="# this would make &#34;field&#34; bold yellow (`1;33`, the last value)
$ JQ_COLORS=&#34;0;90:0;37:0;37:0;37:0;32:1;37:1;37:1;33&#34; ./jq -n &#39;{field: 123}&#39;
{
  &#34;field&#34;: 123
}"><pre><span><span>#</span> this would make &#34;field&#34; bold yellow (`1;33`, the last value)</span>
$ JQ_COLORS=<span><span>&#34;</span>0;90:0;37:0;37:0;37:0;32:1;37:1;37:1;33<span>&#34;</span></span> ./jq -n <span><span>&#39;</span>{field: 123}<span>&#39;</span></span>
{
  <span><span>&#34;</span>field<span>&#34;</span></span>: 123
}</pre></div>
</li>
<li>
<p>Change the default color of null to Bright Black. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1837752567" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2824" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2824/hovercard" href="https://github.com/jqlang/jq/pull/2824">#2824</a></p>
</li>
<li>
<p>Respect <code>NO_COLOR</code> environment variable to disable color output. See <a href="https://no-color.org" rel="nofollow">https://no-color.org</a> for details. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1810922319" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2728" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2728/hovercard" href="https://github.com/jqlang/jq/pull/2728">#2728</a></p>
</li>
<li>
<p>Improved <code>--help</code> output. Now mentions all options and nicer order. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-hovercard-type="user" data-hovercard-url="/users/wader/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/wader">@wader</a> <a data-error-text="Failed to load title" data-id="1816782071" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2747" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2747/hovercard" href="https://github.com/jqlang/jq/pull/2747">#2747</a> <a data-error-text="Failed to load title" data-id="1819331936" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2766" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2766/hovercard" href="https://github.com/jqlang/jq/pull/2766">#2766</a> <a data-error-text="Failed to load title" data-id="1829422393" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2799" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2799/hovercard" href="https://github.com/jqlang/jq/pull/2799">#2799</a></p>
</li>
<li>
<p>Fix multiple issues of exit code using <code>--exit-code</code>/<code>-e</code> option. <a data-hovercard-type="user" data-hovercard-url="/users/ryo1kato/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ryo1kato">@ryo1kato</a> <a data-error-text="Failed to load title" data-id="345558069" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/1697" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/1697/hovercard" href="https://github.com/jqlang/jq/pull/1697">#1697</a></p>
<div data-snippet-clipboard-copy-content="# true-ish last output value exits with zero
$ jq -ne true ; echo $?
true
0
# false-ish last output value (false and null) exits with 1
$ jq -ne false ; echo $?
false
1
# no output value exists with 4
$ jq -ne empty ; echo $?
4"><pre><span><span>#</span> true-ish last output value exits with zero</span>
$ jq -ne <span>true</span> <span>;</span> <span>echo</span> <span>$?</span>
<span>true</span>
0
<span><span>#</span> false-ish last output value (false and null) exits with 1</span>
$ jq -ne <span>false</span> <span>;</span> <span>echo</span> <span>$?</span>
<span>false</span>
1
<span><span>#</span> no output value exists with 4</span>
$ jq -ne empty <span>;</span> <span>echo</span> <span>$?</span>
4</pre></div>
</li>
<li>
<p>Add <code>--binary</code>/<code>-b</code> on Windows for binary output. To get <code>\n</code> instead of <code>\r\n</code> line endings. <a data-hovercard-type="user" data-hovercard-url="/users/nicowilliams/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/nicowilliams">@nicowilliams</a> <a data-hovercard-type="commit" data-hovercard-url="https://github.com/jqlang/jq/commit/0dab2b18d73e561f5118011a65cc9877bf21c110/hovercard" href="https://github.com/jqlang/jq/commit/0dab2b18d73e561f5118011a65cc9877bf21c110"><tt>0dab2b1</tt></a></p>
</li>
<li>
<p>Add <code>--raw-output0</code> for NUL (zero byte) separated output. <a data-hovercard-type="user" data-hovercard-url="/users/asottile/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/asottile">@asottile</a> <a data-hovercard-type="user" data-hovercard-url="/users/pabs3/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/pabs3">@pabs3</a> <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="506448541" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/1990" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/1990/hovercard" href="https://github.com/jqlang/jq/pull/1990">#1990</a> <a data-error-text="Failed to load title" data-id="775591796" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2235" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2235/hovercard" href="https://github.com/jqlang/jq/pull/2235">#2235</a> <a data-error-text="Failed to load title" data-id="1795601300" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2684" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2684/hovercard" href="https://github.com/jqlang/jq/pull/2684">#2684</a></p>
<div data-snippet-clipboard-copy-content="# will output a zero byte after each output
$ jq -n --raw-output0 &#39;1,2,3&#39; | xxd
00000000: 3100 3200 3300                           1.2.3.
# can be used with xargs -0
$ jq -n --raw-output0 &#39;&#34;a&#34;,&#34;b&#34;,&#34;c&#34;&#39; | xargs -0 -n1
a
b
c
$ jq -n --raw-output0 &#39;&#34;a b c&#34;, &#34;d\ne\nf&#34;&#39; | xargs -0 printf &#39;[%s]\n&#39;
[a b c]
[d
e
f]
# can be used with read -d &#39;&#39;
$ while IFS= read -r -d &#39;&#39; json; do
&gt;   jq &#39;.name&#39; &lt;&lt;&lt; &#34;$json&#34;
&gt; done &lt; &lt;(jq -n --raw-output0 &#39;{name:&#34;a b c&#34;},{name:&#34;d\ne\nf&#34;}&#39;)
&#34;a b c&#34;
&#34;d\ne\nf&#34;
# also it&#39;s an error to output a string containing a NUL when using NUL separator
$ jq -n --raw-output0 &#39;&#34;\u0000&#34;&#39;
jq: error (at &lt;unknown&gt;): Cannot dump a string containing NUL with --raw-output0 option"><pre><span><span>#</span> will output a zero byte after each output</span>
$ jq -n --raw-output0 <span><span>&#39;</span>1,2,3<span>&#39;</span></span> <span>|</span> xxd
00000000: 3100 3200 3300                           1.2.3.
<span><span>#</span> can be used with xargs -0</span>
$ jq -n --raw-output0 <span><span>&#39;</span>&#34;a&#34;,&#34;b&#34;,&#34;c&#34;<span>&#39;</span></span> <span>|</span> xargs -0 -n1
a
b
c
$ jq -n --raw-output0 <span><span>&#39;</span>&#34;a b c&#34;, &#34;d\ne\nf&#34;<span>&#39;</span></span> <span>|</span> xargs -0 <span>printf</span> <span><span>&#39;</span>[%s]\n<span>&#39;</span></span>
[a b c]
[d
e
f]
<span><span>#</span> can be used with read -d &#39;&#39;</span>
$ <span>while</span> IFS= <span>read</span> -r -d <span><span>&#39;</span><span>&#39;</span></span> json<span>;</span> <span>do</span>
<span>&gt;</span>   jq <span><span>&#39;</span>.name<span>&#39;</span></span> <span>&lt;&lt;&lt;</span> <span><span>&#34;</span>$json<span>&#34;</span></span>
<span>&gt;</span> <span>done</span> <span>&lt;</span> <span><span>&lt;(</span>jq -n --raw-output0 <span><span>&#39;</span>{name:&#34;a b c&#34;},{name:&#34;d\ne\nf&#34;}<span>&#39;</span></span><span>)</span></span>
<span><span>&#34;</span>a b c<span>&#34;</span></span>
<span><span>&#34;</span>d\ne\nf<span>&#34;</span></span>
<span><span>#</span> also it&#39;s an error to output a string containing a NUL when using NUL separator</span>
$ jq -n --raw-output0 <span><span>&#39;</span>&#34;\u0000&#34;<span>&#39;</span></span>
jq: error (at <span>&lt;</span>unknown<span>&gt;</span>): Cannot dump a string containing NUL with --raw-output0 option</pre></div>
</li>
<li>
<p>Fix assert crash and validate JSON for <code>--jsonarg</code>. <a data-hovercard-type="user" data-hovercard-url="/users/wader/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/wader">@wader</a> <a data-error-text="Failed to load title" data-id="1789901731" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2658" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2658/hovercard" href="https://github.com/jqlang/jq/pull/2658">#2658</a></p>
</li>
<li>
<p>Remove deprecated <code>--argfile</code> option. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1820219091" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2768" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2768/hovercard" href="https://github.com/jqlang/jq/pull/2768">#2768</a></p>
</li>
<li>
<p>Enable stack protection. <a data-hovercard-type="user" data-hovercard-url="/users/nicowilliams/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/nicowilliams">@nicowilliams</a> <a data-error-text="Failed to load title" data-id="1830144482" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2801" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2801/hovercard" href="https://github.com/jqlang/jq/pull/2801">#2801</a></p>
</li>
</ul>
<h2>Language changes</h2>
<ul>
<li>
<p>Use decimal number literals to preserve precision. Comparison operations respects precision but arithmetic operations might truncate. <a data-hovercard-type="user" data-hovercard-url="/users/leonid-s-usov/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/leonid-s-usov">@leonid-s-usov</a> <a data-error-text="Failed to load title" data-id="374686122" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/1752" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/1752/hovercard" href="https://github.com/jqlang/jq/pull/1752">#1752</a></p>
<div data-snippet-clipboard-copy-content="# precision is preserved
$ echo &#39;100000000000000000&#39; | jq .
100000000000000000
# comparison respects precision (this is false in JavaScript)
$ jq -n &#39;100000000000000000 &lt; 100000000000000001&#39;
true
# sort/0 works
$ jq -n -c &#39;[100000000000000001, 100000000000000003, 100000000000000004, 100000000000000002] | sort&#39;
[100000000000000001,100000000000000002,100000000000000003,100000000000000004]
# arithmetic operations might truncate (same as JavaScript)
$ jq -n &#39;100000000000000000 + 10&#39;
100000000000000020"><pre><span><span>#</span> precision is preserved</span>
$ <span>echo</span> <span><span>&#39;</span>100000000000000000<span>&#39;</span></span> <span>|</span> jq <span>.</span>
100000000000000000
<span><span>#</span> comparison respects precision (this is false in JavaScript)</span>
$ jq -n <span><span>&#39;</span>100000000000000000 &lt; 100000000000000001<span>&#39;</span></span>
<span>true</span>
<span><span>#</span> sort/0 works</span>
$ jq -n -c <span><span>&#39;</span>[100000000000000001, 100000000000000003, 100000000000000004, 100000000000000002] | sort<span>&#39;</span></span>
[100000000000000001,100000000000000002,100000000000000003,100000000000000004]
<span><span>#</span> arithmetic operations might truncate (same as JavaScript)</span>
$ jq -n <span><span>&#39;</span>100000000000000000 + 10<span>&#39;</span></span>
100000000000000020</pre></div>
</li>
<li>
<p>Adds new builtin <code>pick(stream)</code> to emit a projection of the input object or array. <a data-hovercard-type="user" data-hovercard-url="/users/pkoppstein/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/pkoppstein">@pkoppstein</a> <a data-error-text="Failed to load title" data-id="1789113417" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2656" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2656/hovercard" href="https://github.com/jqlang/jq/pull/2656">#2656</a> <a data-error-text="Failed to load title" data-id="1825295139" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2779" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2779/hovercard" href="https://github.com/jqlang/jq/pull/2779">#2779</a></p>
<div data-snippet-clipboard-copy-content="$ jq -n &#39;{&#34;a&#34;: 1, &#34;b&#34;: {&#34;c&#34;: 2, &#34;d&#34;: 3}, &#34;e&#34;: 4} | pick(.a, .b.c, .x)&#39;
{
  &#34;a&#34;: 1,
  &#34;b&#34;: {
    &#34;c&#34;: 2
  },
  &#34;x&#34;: null
}"><pre>$ jq -n <span><span>&#39;</span>{&#34;a&#34;: 1, &#34;b&#34;: {&#34;c&#34;: 2, &#34;d&#34;: 3}, &#34;e&#34;: 4} | pick(.a, .b.c, .x)<span>&#39;</span></span>
{
  <span><span>&#34;</span>a<span>&#34;</span></span>: 1,
  <span><span>&#34;</span>b<span>&#34;</span></span>: {
    <span><span>&#34;</span>c<span>&#34;</span></span>: 2
  },
  <span><span>&#34;</span>x<span>&#34;</span></span>: null
}</pre></div>
</li>
<li>
<p>Adds new builtin <code>debug(msgs)</code> that works like <code>debug</code> but applies a filter on the input before writing to stderr. <a data-hovercard-type="user" data-hovercard-url="/users/pkoppstein/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/pkoppstein">@pkoppstein</a> <a data-error-text="Failed to load title" data-id="1802067988" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2710" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2710/hovercard" href="https://github.com/jqlang/jq/pull/2710">#2710</a></p>
<div data-snippet-clipboard-copy-content="$ jq -n &#39;1 as $x | 2 | debug(&#34;Entering function foo with $x == \($x)&#34;, .) | (.+1)&#39;
[&#34;DEBUG:&#34;,&#34;Entering function foo with $x == 1&#34;]
[&#34;DEBUG:&#34;,2]
3
$ jq -n &#39;{a: 1, b: 2, c: 3} | debug({a, b, sum: (.a+.b)})&#39;
[&#34;DEBUG:&#34;,{&#34;a&#34;:1,&#34;b&#34;:2,&#34;sum&#34;:3}]
{
  &#34;a&#34;: 1,
  &#34;b&#34;: 2,
  &#34;c&#34;: 3
}"><pre>$ jq -n <span><span>&#39;</span>1 as $x | 2 | debug(&#34;Entering function foo with $x == \($x)&#34;, .) | (.+1)<span>&#39;</span></span>
[<span><span>&#34;</span>DEBUG:<span>&#34;</span></span>,<span><span>&#34;</span>Entering function foo with <span>$x</span> == 1<span>&#34;</span></span>]
[<span><span>&#34;</span>DEBUG:<span>&#34;</span></span>,2]
3
$ jq -n <span><span>&#39;</span>{a: 1, b: 2, c: 3} | debug({a, b, sum: (.a+.b)})<span>&#39;</span></span>
[<span><span>&#34;</span>DEBUG:<span>&#34;</span></span>,{<span><span>&#34;</span>a<span>&#34;</span></span>:1,<span><span>&#34;</span>b<span>&#34;</span></span>:2,<span><span>&#34;</span>sum<span>&#34;</span></span>:3}]
{
  <span><span>&#34;</span>a<span>&#34;</span></span>: 1,
  <span><span>&#34;</span>b<span>&#34;</span></span>: 2,
  <span><span>&#34;</span>c<span>&#34;</span></span>: 3
}</pre></div>
</li>
<li>
<p>Adds new builtin <code>scan($re; $flags)</code>. Was documented but not implemented. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="480954690" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/1961" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/1961/hovercard" href="https://github.com/jqlang/jq/pull/1961">#1961</a></p>
<div data-snippet-clipboard-copy-content="# look for pattern &#34;ab&#34; in &#34;abAB&#34; ignoring casing
$ jq -n &#39;&#34;abAB&#34; | scan(&#34;ab&#34;; &#34;i&#34;)&#39;
&#34;ab&#34;
&#34;AB&#34;"><pre><span><span>#</span> look for pattern &#34;ab&#34; in &#34;abAB&#34; ignoring casing</span>
$ jq -n <span><span>&#39;</span>&#34;abAB&#34; | scan(&#34;ab&#34;; &#34;i&#34;)<span>&#39;</span></span>
<span><span>&#34;</span>ab<span>&#34;</span></span>
<span><span>&#34;</span>AB<span>&#34;</span></span></pre></div>
</li>
<li>
<p>Adds new builtin <code>abs</code> to get absolute value. This potentially allows the literal value of numbers to be preserved as <code>length</code> and <code>fabs</code> convert to float. <a data-hovercard-type="user" data-hovercard-url="/users/pkoppstein/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/pkoppstein">@pkoppstein</a> <a data-error-text="Failed to load title" data-id="1819486782" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2767" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2767/hovercard" href="https://github.com/jqlang/jq/pull/2767">#2767</a></p>
</li>
<li>
<p>Allow <code>if</code> without <code>else</code>-branch. When skipped the <code>else</code>-branch will be <code>.</code> (identity). <a data-hovercard-type="user" data-hovercard-url="/users/chancez/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/chancez">@chancez</a> <a data-hovercard-type="user" data-hovercard-url="/users/wader/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/wader">@wader</a> <a data-error-text="Failed to load title" data-id="410595732" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/1825" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/1825/hovercard" href="https://github.com/jqlang/jq/pull/1825">#1825</a> <a data-error-text="Failed to load title" data-id="1363866585" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2481" data-hovercard-type="issue" data-hovercard-url="/jqlang/jq/issues/2481/hovercard" href="https://github.com/jqlang/jq/issues/2481">#2481</a></p>
<div data-snippet-clipboard-copy-content="# convert 1 to &#34;one&#34; otherwise keep as is
$ jq -n &#39;1,2 | if . == 1 then &#34;one&#34; end&#39;
&#34;one&#34;
2
# behaves the same as
$ jq -n &#39;1,2 | if . == 1 then &#34;one&#34; else . end&#39;
&#34;one&#34;
2
# also works with elif
$ jq -n &#39;1,2,3 | if . == 1 then &#34;one&#34; elif . == 2 then &#34;two&#34; end
&#34;one&#34;
&#34;two&#34;
3"><pre><span><span>#</span> convert 1 to &#34;one&#34; otherwise keep as is</span>
$ jq -n <span><span>&#39;</span>1,2 | if . == 1 then &#34;one&#34; end<span>&#39;</span></span>
<span><span>&#34;</span>one<span>&#34;</span></span>
2
<span><span>#</span> behaves the same as</span>
$ jq -n <span><span>&#39;</span>1,2 | if . == 1 then &#34;one&#34; else . end<span>&#39;</span></span>
<span><span>&#34;</span>one<span>&#34;</span></span>
2
<span><span>#</span> also works with elif</span>
$ jq -n <span><span>&#39;</span>1,2,3 | if . == 1 then &#34;one&#34; elif . == 2 then &#34;two&#34; end</span>
<span>&#34;one&#34;</span>
<span>&#34;two&#34;</span>
<span>3</span></pre></div>
</li>
<li>
<p>Allow use of <code>$binding</code> as key in object literals. <a data-hovercard-type="user" data-hovercard-url="/users/nicowilliams/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/nicowilliams">@nicowilliams</a> <a data-hovercard-type="commit" data-hovercard-url="https://github.com/jqlang/jq/commit/8ea4a5584edb7f54e19cddb6240984d3a543f4f1/hovercard" href="https://github.com/jqlang/jq/commit/8ea4a5584edb7f54e19cddb6240984d3a543f4f1"><tt>8ea4a55</tt></a></p>
<div data-snippet-clipboard-copy-content="$ jq -n &#39;&#34;a&#34; as $key | {$key: 123}&#39;
{
  &#34;a&#34;: 123
}
# previously parentheses were needed
$ jq -n &#39;&#34;a&#34; as $key | {($key): 123}&#39;
{
  &#34;a&#34;: 123
}"><pre>$ jq -n <span><span>&#39;</span>&#34;a&#34; as $key | {$key: 123}<span>&#39;</span></span>
{
  <span><span>&#34;</span>a<span>&#34;</span></span>: 123
}
<span><span>#</span> previously parentheses were needed</span>
$ jq -n <span><span>&#39;</span>&#34;a&#34; as $key | {($key): 123}<span>&#39;</span></span>
{
  <span><span>&#34;</span>a<span>&#34;</span></span>: 123
}</pre></div>
</li>
<li>
<p>Allow dot between chained indexes when using <code>.[&#34;index&#34;]</code> <a data-hovercard-type="user" data-hovercard-url="/users/nicowilliams/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/nicowilliams">@nicowilliams</a> <a data-error-text="Failed to load title" data-id="161502362" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/1168" data-hovercard-type="issue" data-hovercard-url="/jqlang/jq/issues/1168/hovercard" href="https://github.com/jqlang/jq/issues/1168">#1168</a></p>
<div data-snippet-clipboard-copy-content="$ jq -n &#39;{&#34;a&#34;: {&#34;b&#34;: 123}} | .a[&#34;b&#34;]&#39;
123
# now this also works
$ jq -n &#39;{&#34;a&#34;: {&#34;b&#34;: 123}} | .a.[&#34;b&#34;]&#39;
123"><pre>$ jq -n <span><span>&#39;</span>{&#34;a&#34;: {&#34;b&#34;: 123}} | .a[&#34;b&#34;]<span>&#39;</span></span>
123
<span><span>#</span> now this also works</span>
$ jq -n <span><span>&#39;</span>{&#34;a&#34;: {&#34;b&#34;: 123}} | .a.[&#34;b&#34;]<span>&#39;</span></span>
123</pre></div>
</li>
<li>
<p>Allow dot for chained value iterator <code>.[]</code>, <code>.[]?</code> <a data-hovercard-type="user" data-hovercard-url="/users/wader/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/wader">@wader</a> <a data-error-text="Failed to load title" data-id="1786492375" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2650" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2650/hovercard" href="https://github.com/jqlang/jq/pull/2650">#2650</a></p>
<div data-snippet-clipboard-copy-content="$ jq -n &#39;{&#34;a&#34;: [123]} | .a[]&#39;
123
# now this also works
$ jq -n &#39;{&#34;a&#34;: [123]} | .a.[]&#39;
123"><pre>$ jq -n <span><span>&#39;</span>{&#34;a&#34;: [123]} | .a[]<span>&#39;</span></span>
123
<span><span>#</span> now this also works</span>
$ jq -n <span><span>&#39;</span>{&#34;a&#34;: [123]} | .a.[]<span>&#39;</span></span>
123</pre></div>
</li>
<li>
<p>Fix try/catch catches more than it should. <a data-hovercard-type="user" data-hovercard-url="/users/nicowilliams/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/nicowilliams">@nicowilliams</a> <a data-error-text="Failed to load title" data-id="1816897661" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2750" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2750/hovercard" href="https://github.com/jqlang/jq/pull/2750">#2750</a></p>
</li>
<li>
<p>Speed up and refactor some builtins, also remove <code>scalars_or_empty/0</code>. <a data-hovercard-type="user" data-hovercard-url="/users/muhmuhten/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/muhmuhten">@muhmuhten</a> <a data-error-text="Failed to load title" data-id="414575632" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/1845" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/1845/hovercard" href="https://github.com/jqlang/jq/pull/1845">#1845</a></p>
</li>
<li>
<p>Now <code>halt</code> and <code>halt_error</code> exit immediately instead of continuing to the next input. <a data-hovercard-type="user" data-hovercard-url="/users/emanuele6/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/emanuele6">@emanuele6</a> <a data-error-text="Failed to load title" data-id="1793800694" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2667" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2667/hovercard" href="https://github.com/jqlang/jq/pull/2667">#2667</a></p>
</li>
<li>
<p>Fix issue converting string to number after previous convert error. <a data-hovercard-type="user" data-hovercard-url="/users/thalman/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/thalman">@thalman</a> <a data-error-text="Failed to load title" data-id="1109079679" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2400" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2400/hovercard" href="https://github.com/jqlang/jq/pull/2400">#2400</a></p>
</li>
<li>
<p>Fix issue representing large numbers on some platforms causing invalid JSON output. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1790607154" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2661" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2661/hovercard" href="https://github.com/jqlang/jq/pull/2661">#2661</a></p>
</li>
<li>
<p>Fix deletion using assigning empty against arrays. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="627092290" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2133" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2133/hovercard" href="https://github.com/jqlang/jq/pull/2133">#2133</a></p>
<div data-snippet-clipboard-copy-content="# now this works as expected, filter out all values over 2 by assigning empty
$ jq -c &#39;(.[] | select(. &gt;= 2)) |= empty&#39; &lt;&lt;&lt; &#39;[1,5,3,0,7]&#39;
[1,0]"><pre><span><span>#</span> now this works as expected, filter out all values over 2 by assigning empty</span>
$ jq -c <span><span>&#39;</span>(.[] | select(. &gt;= 2)) |= empty<span>&#39;</span></span> <span>&lt;&lt;&lt;</span> <span><span>&#39;</span>[1,5,3,0,7]<span>&#39;</span></span>
[1,0]</pre></div>
</li>
<li>
<p>Allow keywords to be used as binding name in more places. <a data-hovercard-type="user" data-hovercard-url="/users/emanuele6/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/emanuele6">@emanuele6</a> <a data-error-text="Failed to load title" data-id="1795517266" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2681" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2681/hovercard" href="https://github.com/jqlang/jq/pull/2681">#2681</a></p>
</li>
<li>
<p>Allow using <code>nan</code> as NaN in JSON. <a data-hovercard-type="user" data-hovercard-url="/users/emanuele6/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/emanuele6">@emanuele6</a> <a data-error-text="Failed to load title" data-id="1803431686" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2712" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2712/hovercard" href="https://github.com/jqlang/jq/pull/2712">#2712</a></p>
</li>
<li>
<p>Expose a module&#39;s function names in <code>modulemeta</code>. <a data-hovercard-type="user" data-hovercard-url="/users/mrwilson/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/mrwilson">@mrwilson</a> <a data-error-text="Failed to load title" data-id="1847942165" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2837" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2837/hovercard" href="https://github.com/jqlang/jq/pull/2837">#2837</a></p>
</li>
<li>
<p>Fix <code>contains/1</code> to handle strings with NUL. <a data-hovercard-type="user" data-hovercard-url="/users/nicowilliams/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/nicowilliams">@nicowilliams</a> <a data-hovercard-type="commit" data-hovercard-url="https://github.com/jqlang/jq/commit/61cd6dbb3b7f3423d49a1a9beb2b82ad16a34755/hovercard" href="https://github.com/jqlang/jq/commit/61cd6dbb3b7f3423d49a1a9beb2b82ad16a34755"><tt>61cd6db</tt></a></p>
</li>
<li>
<p>Fix <code>stderr/0</code> to output raw text without any decoration. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1816965365" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2751" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2751/hovercard" href="https://github.com/jqlang/jq/pull/2751">#2751</a></p>
</li>
<li>
<p>Fix <code>nth/2</code> to emit empty on index out of range. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1795223102" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2674" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2674/hovercard" href="https://github.com/jqlang/jq/pull/2674">#2674</a></p>
</li>
<li>
<p>Fix <code>implode</code> to not assert and instead replace invalid unicode codepoints. <a data-hovercard-type="user" data-hovercard-url="/users/wader/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/wader">@wader</a> <a data-error-text="Failed to load title" data-id="1784689804" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2646" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2646/hovercard" href="https://github.com/jqlang/jq/pull/2646">#2646</a></p>
</li>
<li>
<p>Fix <code>indices/1</code> and <code>rindex/1</code> in case of overlapping matches in strings. <a data-hovercard-type="user" data-hovercard-url="/users/emanuele6/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/emanuele6">@emanuele6</a> <a data-error-text="Failed to load title" data-id="1805666775" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2718" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2718/hovercard" href="https://github.com/jqlang/jq/pull/2718">#2718</a></p>
</li>
<li>
<p>Fix <code>sub/3</code> to resolve issues involving global search-and-replace (gsub) operations. <a data-hovercard-type="user" data-hovercard-url="/users/pkoppstein/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/pkoppstein">@pkoppstein</a> <a data-error-text="Failed to load title" data-id="1780192433" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2641" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2641/hovercard" href="https://github.com/jqlang/jq/pull/2641">#2641</a></p>
</li>
<li>
<p>Fix <code>significand/0</code>, <code>gamma/0</code> and <code>drem/2</code> to be available on macOS. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1817021065" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2756" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2756/hovercard" href="https://github.com/jqlang/jq/pull/2756">#2756</a> <a data-error-text="Failed to load title" data-id="1823321958" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2775" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2775/hovercard" href="https://github.com/jqlang/jq/pull/2775">#2775</a></p>
</li>
<li>
<p>Fix empty regular expression matches. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1795262942" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2677" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2677/hovercard" href="https://github.com/jqlang/jq/pull/2677">#2677</a></p>
</li>
<li>
<p>Fix overflow exception of the modulo operator. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1773199304" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2629" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2629/hovercard" href="https://github.com/jqlang/jq/pull/2629">#2629</a></p>
</li>
<li>
<p>Fix string multiplication by 0 (and less than 1) to emit empty string. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="637850708" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2142" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2142/hovercard" href="https://github.com/jqlang/jq/pull/2142">#2142</a></p>
</li>
<li>
<p>Fix segfault when using libjq and threads. <a data-hovercard-type="user" data-hovercard-url="/users/thalman/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/thalman">@thalman</a> <a data-error-text="Failed to load title" data-id="1605548253" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2546" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2546/hovercard" href="https://github.com/jqlang/jq/pull/2546">#2546</a></p>
</li>
<li>
<p>Fix constant folding of division and reminder with zero divisor. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1829339933" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2797" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2797/hovercard" href="https://github.com/jqlang/jq/pull/2797">#2797</a></p>
</li>
<li>
<p>Fix <code>error/0</code>, <code>error/1</code> to throw null error. <a data-hovercard-type="user" data-hovercard-url="/users/emanuele6/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/emanuele6">@emanuele6</a> <a data-error-text="Failed to load title" data-id="1837338753" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2823" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2823/hovercard" href="https://github.com/jqlang/jq/pull/2823">#2823</a></p>
</li>
<li>
<p>Simpler and faster <code>transpose</code>. <a data-hovercard-type="user" data-hovercard-url="/users/pkoppstein/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/pkoppstein">@pkoppstein</a> <a data-error-text="Failed to load title" data-id="1817532711" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2758" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2758/hovercard" href="https://github.com/jqlang/jq/pull/2758">#2758</a></p>
</li>
<li>
<p>Simple and efficient implementation of <code>walk/1</code>. <a data-hovercard-type="user" data-hovercard-url="/users/pkoppstein/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/pkoppstein">@pkoppstein</a> <a data-error-text="Failed to load title" data-id="1829093174" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2795" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2795/hovercard" href="https://github.com/jqlang/jq/pull/2795">#2795</a></p>
</li>
<li>
<p>Remove deprecated filters <code>leaf_paths</code>, <code>recurse_down</code>. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1793571720" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2666" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2666/hovercard" href="https://github.com/jqlang/jq/pull/2666">#2666</a></p>
</li>
</ul></div>
</div>
  
</div></div>

  </div>
  </section>
  <section aria-labelledby="hd-77184427">
  <h2 id="hd-77184427">jq 1.7rc1</h2>

  <div>
    


    <div>
  <div data-view-component="true">
  
  <div data-view-component="true">      

        <div data-pjax="true" data-test-selector="body-content" data-view-component="true"><p>Note that this is a pre-release. Feedback is welcome <a data-error-text="Failed to load title" data-id="1830203549" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2802" data-hovercard-type="issue" data-hovercard-url="/jqlang/jq/issues/2802/hovercard" href="https://github.com/jqlang/jq/issues/2802">#2802</a>.</p>
<hr/>
<p>After a five year hiatus we&#39;re back with a GitHub organization, with new admins and new maintainers who have brought a great deal of energy to make a long-awaited and long-needed new release.</p>
<p>Since the last stable release many things have happened:</p>
<ul>
<li>jq now lives at <a href="https://github.com/jqlang">https://github.com/jqlang</a></li>
<li>New maintainers, admins, and owners have been recruited.
<ul>
<li>A list of <a href="https://github.com/jqlang/jq/blob/70bbd10b0b58e797d03963264fc934879bb44454/AUTHORS#L4-L13">current maintainers</a></li>
</ul>
</li>
<li>CI, scan builds, release builds etc now use GitHub actions. <a data-hovercard-type="user" data-hovercard-url="/users/owenthereal/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/owenthereal">@owenthereal</a> <a data-error-text="Failed to load title" data-id="1729567864" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2596" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2596/hovercard" href="https://github.com/jqlang/jq/pull/2596">#2596</a> <a data-error-text="Failed to load title" data-id="1762130614" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2620" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2620/hovercard" href="https://github.com/jqlang/jq/pull/2620">#2620</a></li>
<li>Lots of documentation improvements and fixes.</li>
<li>Web site updated with new auto complete, better section ids for linking, dark mode, etc. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1772445579" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2628" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2628/hovercard" href="https://github.com/jqlang/jq/pull/2628">#2628</a></li>
<li>Release builds for:
<ul>
<li>Linux <code>amd64</code>, <code>arm64</code>, <code>armel</code>, <code>armhf</code>, <code>i386</code>, <code>mips</code>, <code>mips64</code>, <code>mips64el</code>, <code>mips64r6</code>, <code>mips64r6el</code>, <code>mipsel</code>, <code>mipsr6</code>, <code>mipsr6el</code>, <code>powerpc</code>, <code>ppc64el</code>, <code>riscv64</code> and <code>s390x</code></li>
<li>macOS <code>amd64</code> and <code>arm64</code></li>
<li>Windows <code>i386</code> and  <code>amd64</code></li>
<li>Docker <code>linux/386</code>, <code>linux/amd64</code>, <code>linux/arm64</code>, <code>linux/mips64le</code>, <code>linux/ppc64le</code>, <code>linux/riscv64</code> and <code>linux/s390x</code></li>
<li>More details see <a data-hovercard-type="user" data-hovercard-url="/users/owenthereal/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/owenthereal">@owenthereal</a> <a data-error-text="Failed to load title" data-id="1792983221" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2665" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2665/hovercard" href="https://github.com/jqlang/jq/pull/2665">#2665</a></li>
</ul>
</li>
<li>Docker images are now available from <code>ghcr.io/jqlang/jq</code> instead of docker hub. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1787880656" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2652" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2652/hovercard" href="https://github.com/jqlang/jq/pull/2652">#2652</a></li>
<li>OSS-fuzz. <a data-hovercard-type="user" data-hovercard-url="/users/DavidKorczynski/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/DavidKorczynski">@DavidKorczynski</a> <a data-error-text="Failed to load title" data-id="1818209321" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2760" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2760/hovercard" href="https://github.com/jqlang/jq/pull/2760">#2760</a> <a data-error-text="Failed to load title" data-id="1818352447" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2762" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2762/hovercard" href="https://github.com/jqlang/jq/pull/2762">#2762</a></li>
</ul>
<p>Full commit log can be found at <a href="https://github.com/jqlang/jq/compare/jq-1.6...jq-1.7rc1"><tt>jq-1.6...jq-1.7rc1</tt></a> but here are some highlights:</p>
<h2>CLI changes</h2>
<ul>
<li>
<p>Make object key color configurable using <code>JQ_COLORS</code> environment variable. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-hovercard-type="user" data-hovercard-url="/users/haguenau/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/haguenau">@haguenau</a> <a data-hovercard-type="user" data-hovercard-url="/users/ericpruitt/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ericpruitt">@ericpruitt</a> <a data-error-text="Failed to load title" data-id="1799965646" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2703" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2703/hovercard" href="https://github.com/jqlang/jq/pull/2703">#2703</a></p>
<div data-snippet-clipboard-copy-content="# this would make &#34;field&#34; yellow (33, the last value)
$ JQ_COLORS=&#34;1;30:0;37:0;37:0;37:0;32:1;37:1;37:1;33&#34; ./jq -n &#39;{field: 123}&#39;
{
  &#34;field&#34;: 123
}"><pre><span><span>#</span> this would make &#34;field&#34; yellow (33, the last value)</span>
$ JQ_COLORS=<span><span>&#34;</span>1;30:0;37:0;37:0;37:0;32:1;37:1;37:1;33<span>&#34;</span></span> ./jq -n <span><span>&#39;</span>{field: 123}<span>&#39;</span></span>
{
  <span><span>&#34;</span>field<span>&#34;</span></span>: 123
}</pre></div>
</li>
<li>
<p>Respect <code>NO_COLOR</code> environment variable to disable color output. See <a href="https://no-color.org" rel="nofollow">https://no-color.org</a> for details. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1810922319" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2728" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2728/hovercard" href="https://github.com/jqlang/jq/pull/2728">#2728</a></p>
</li>
<li>
<p>Improved <code>--help</code> output. Now mentions all options and nicer order. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1816782071" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2747" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2747/hovercard" href="https://github.com/jqlang/jq/pull/2747">#2747</a> <a data-error-text="Failed to load title" data-id="1819331936" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2766" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2766/hovercard" href="https://github.com/jqlang/jq/pull/2766">#2766</a></p>
</li>
<li>
<p>Last output value can now control exit code using <code>--exit-code</code>/<code>-e</code>. <a data-hovercard-type="user" data-hovercard-url="/users/ryo1kato/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ryo1kato">@ryo1kato</a> <a data-error-text="Failed to load title" data-id="345558069" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/1697" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/1697/hovercard" href="https://github.com/jqlang/jq/pull/1697">#1697</a></p>
<div data-snippet-clipboard-copy-content="# true-ish last output value exits with zero
$ jq -ne true ; echo $?
true
0
# false-ish last output value (false and null) exits with 1
$ jq -ne false ; echo $?
false
1
# no output value exists with 4
$ jq -ne empty ; echo $?
4"><pre><span><span>#</span> true-ish last output value exits with zero</span>
$ jq -ne <span>true</span> <span>;</span> <span>echo</span> <span>$?</span>
<span>true</span>
0
<span><span>#</span> false-ish last output value (false and null) exits with 1</span>
$ jq -ne <span>false</span> <span>;</span> <span>echo</span> <span>$?</span>
<span>false</span>
1
<span><span>#</span> no output value exists with 4</span>
$ jq -ne empty <span>;</span> <span>echo</span> <span>$?</span>
4</pre></div>
</li>
<li>
<p>Add <code>--binary</code>/<code>-b</code> on Windows for binary output. To get <code>\n</code> instead of <code>\r\n</code> line endings. <a data-hovercard-type="commit" data-hovercard-url="https://github.com/jqlang/jq/commit/0dab2b18d73e561f5118011a65cc9877bf21c110/hovercard" href="https://github.com/jqlang/jq/commit/0dab2b18d73e561f5118011a65cc9877bf21c110"><tt>0dab2b1</tt></a> <a data-hovercard-type="user" data-hovercard-url="/users/nicowilliams/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/nicowilliams">@nicowilliams</a></p>
</li>
<li>
<p>Add <code>--raw-output0</code> for NUL (zero byte) separated output. <a data-hovercard-type="user" data-hovercard-url="/users/asottile/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/asottile">@asottile</a> <a data-hovercard-type="user" data-hovercard-url="/users/pabs3/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/pabs3">@pabs3</a> <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="506448541" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/1990" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/1990/hovercard" href="https://github.com/jqlang/jq/pull/1990">#1990</a> <a data-error-text="Failed to load title" data-id="775591796" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2235" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2235/hovercard" href="https://github.com/jqlang/jq/pull/2235">#2235</a> <a data-error-text="Failed to load title" data-id="1795601300" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2684" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2684/hovercard" href="https://github.com/jqlang/jq/pull/2684">#2684</a></p>
<div data-snippet-clipboard-copy-content="# will output a zero byte after each output
$ jq -n --raw-output0 &#39;1,2,3&#39; | xxd
00000000: 3100 3200 3300                           1.2.3.
# can be used with xargs -0
$ jq -n --raw-output0 &#39;&#34;a&#34;,&#34;b&#34;,&#34;c&#34;&#39; | xargs -0 -n1
a
b
c
$ jq -n --raw-output0 &#39;&#34;a b c&#34;, &#34;d\ne\nf&#34;&#39; | xargs -0 printf &#39;%q\n&#39;
&#39;a b c&#39;
&#39;d&#39;$&#39;\n&#39;&#39;e&#39;$&#39;\n&#39;&#39;f&#39;
# can be used with read -d &#39;&#39;
$ while IFS= read -r -d &#39;&#39; json; do
&gt;   jq &#39;.name&#39; &lt;&lt;&lt; &#34;$json&#34;
&gt; done &lt; &lt;(jq -n --raw-output0 &#39;{name:&#34;a b c&#34;},{name:&#34;d\ne\nf&#34;}&#39;)
&#34;a b c&#34;
&#34;d\ne\nf&#34;
# also it&#39;s an error to output a string containing a NUL when using NUL separator
$ jq -n --raw-output0 &#39;&#34;\u0000&#34;&#39;
jq: error (at &lt;unknown&gt;): Cannot dump a string containing NUL with --raw-output0 option"><pre><span><span>#</span> will output a zero byte after each output</span>
$ jq -n --raw-output0 <span><span>&#39;</span>1,2,3<span>&#39;</span></span> <span>|</span> xxd
00000000: 3100 3200 3300                           1.2.3.
<span><span>#</span> can be used with xargs -0</span>
$ jq -n --raw-output0 <span><span>&#39;</span>&#34;a&#34;,&#34;b&#34;,&#34;c&#34;<span>&#39;</span></span> <span>|</span> xargs -0 -n1
a
b
c
$ jq -n --raw-output0 <span><span>&#39;</span>&#34;a b c&#34;, &#34;d\ne\nf&#34;<span>&#39;</span></span> <span>|</span> xargs -0 <span>printf</span> <span><span>&#39;</span>%q\n<span>&#39;</span></span>
<span><span>&#39;</span>a b c<span>&#39;</span></span>
<span><span>&#39;</span>d<span>&#39;</span></span><span><span>$&#39;</span><span>\n</span><span>&#39;</span></span><span><span>&#39;</span>e<span>&#39;</span></span><span><span>$&#39;</span><span>\n</span><span>&#39;</span></span><span><span>&#39;</span>f<span>&#39;</span></span>
<span><span>#</span> can be used with read -d &#39;&#39;</span>
$ <span>while</span> IFS= <span>read</span> -r -d <span><span>&#39;</span><span>&#39;</span></span> json<span>;</span> <span>do</span>
<span>&gt;</span>   jq <span><span>&#39;</span>.name<span>&#39;</span></span> <span>&lt;&lt;&lt;</span> <span><span>&#34;</span>$json<span>&#34;</span></span>
<span>&gt;</span> <span>done</span> <span>&lt;</span> <span><span>&lt;(</span>jq -n --raw-output0 <span><span>&#39;</span>{name:&#34;a b c&#34;},{name:&#34;d\ne\nf&#34;}<span>&#39;</span></span><span>)</span></span>
<span><span>&#34;</span>a b c<span>&#34;</span></span>
<span><span>&#34;</span>d\ne\nf<span>&#34;</span></span>
<span><span>#</span> also it&#39;s an error to output a string containing a NUL when using NUL separator</span>
$ jq -n --raw-output0 <span><span>&#39;</span>&#34;\u0000&#34;<span>&#39;</span></span>
jq: error (at <span>&lt;</span>unknown<span>&gt;</span>): Cannot dump a string containing NUL with --raw-output0 option</pre></div>
</li>
<li>
<p>Fix assert crash and validate JSON for <code>--jsonarg</code>. <a data-hovercard-type="user" data-hovercard-url="/users/wader/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/wader">@wader</a> <a data-error-text="Failed to load title" data-id="1789901731" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2658" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2658/hovercard" href="https://github.com/jqlang/jq/pull/2658">#2658</a></p>
</li>
<li>
<p>Remove deprecated <code>--argfile</code> option. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1820219091" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2768" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2768/hovercard" href="https://github.com/jqlang/jq/pull/2768">#2768</a></p>
</li>
</ul>
<h2>Language changes</h2>
<ul>
<li>
<p>Use decimal number literals to preserve precision. Comparison operations respects precision but arithmetic operations might truncate. <a data-hovercard-type="user" data-hovercard-url="/users/leonid-s-usov/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/leonid-s-usov">@leonid-s-usov</a> <a data-error-text="Failed to load title" data-id="374686122" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/1752" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/1752/hovercard" href="https://github.com/jqlang/jq/pull/1752">#1752</a></p>
<div data-snippet-clipboard-copy-content="# precision is preserved
$ jq -n &#39;100000000000000000&#39;
100000000000000000
# comparison respects precision (this is false in JavaScript)
$ jq -n &#39;100000000000000000 &lt; 100000000000000001&#39;
true
# arithmetic operations might truncate (same as JavaScript)
$ jq -n &#39;100000000000000000+10&#39;
100000000000000020"><pre><span><span>#</span> precision is preserved</span>
$ jq -n <span><span>&#39;</span>100000000000000000<span>&#39;</span></span>
100000000000000000
<span><span>#</span> comparison respects precision (this is false in JavaScript)</span>
$ jq -n <span><span>&#39;</span>100000000000000000 &lt; 100000000000000001<span>&#39;</span></span>
<span>true</span>
<span><span>#</span> arithmetic operations might truncate (same as JavaScript)</span>
$ jq -n <span><span>&#39;</span>100000000000000000+10<span>&#39;</span></span>
100000000000000020</pre></div>
</li>
<li>
<p>Adds new builtin <code>pick(stream)</code> to emit a projection of the input object or array. <a data-hovercard-type="user" data-hovercard-url="/users/pkoppstein/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/pkoppstein">@pkoppstein</a> <a data-error-text="Failed to load title" data-id="1789113417" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2656" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2656/hovercard" href="https://github.com/jqlang/jq/pull/2656">#2656</a></p>
<div data-snippet-clipboard-copy-content="$ jq -n &#39;{&#34;a&#34;: 1, &#34;b&#34;: {&#34;c&#34;: 2, &#34;d&#34;: 3}, &#34;e&#34;: 4} | pick(.a, .b.c, .x)&#39;
{
  &#34;a&#34;: 1,
  &#34;b&#34;: {
    &#34;c&#34;: 2
  },
  &#34;x&#34;: null
}"><pre>$ jq -n <span><span>&#39;</span>{&#34;a&#34;: 1, &#34;b&#34;: {&#34;c&#34;: 2, &#34;d&#34;: 3}, &#34;e&#34;: 4} | pick(.a, .b.c, .x)<span>&#39;</span></span>
{
  <span><span>&#34;</span>a<span>&#34;</span></span>: 1,
  <span><span>&#34;</span>b<span>&#34;</span></span>: {
    <span><span>&#34;</span>c<span>&#34;</span></span>: 2
  },
  <span><span>&#34;</span>x<span>&#34;</span></span>: null
}</pre></div>
</li>
<li>
<p>Adds new builtin <code>debug(msgs)</code> that works like <code>debug</code> but applies a filter on the input before writing to stderr. <a data-hovercard-type="user" data-hovercard-url="/users/pkoppstein/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/pkoppstein">@pkoppstein</a> <a data-error-text="Failed to load title" data-id="1802067988" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2710" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2710/hovercard" href="https://github.com/jqlang/jq/pull/2710">#2710</a></p>
<div data-snippet-clipboard-copy-content="$ jq -n &#39;1 as $x | 2 | debug(&#34;Entering function foo with $x == \($x)&#34;, .) | (.+1)&#39;
[&#34;DEBUG:&#34;,&#34;Entering function foo with $x == 1&#34;]
[&#34;DEBUG:&#34;,2]
3
$ jq -n &#39;{a: 1, b: 2, c: 3} | debug({a, b, sum: (.a+.b)})&#39;
[&#34;DEBUG:&#34;,{&#34;a&#34;:1,&#34;b&#34;:2,&#34;sum&#34;:3}]
{
  &#34;a&#34;: 1,
  &#34;b&#34;: 2,
  &#34;c&#34;: 3
}"><pre>$ jq -n <span><span>&#39;</span>1 as $x | 2 | debug(&#34;Entering function foo with $x == \($x)&#34;, .) | (.+1)<span>&#39;</span></span>
[<span><span>&#34;</span>DEBUG:<span>&#34;</span></span>,<span><span>&#34;</span>Entering function foo with <span>$x</span> == 1<span>&#34;</span></span>]
[<span><span>&#34;</span>DEBUG:<span>&#34;</span></span>,2]
3
$ jq -n <span><span>&#39;</span>{a: 1, b: 2, c: 3} | debug({a, b, sum: (.a+.b)})<span>&#39;</span></span>
[<span><span>&#34;</span>DEBUG:<span>&#34;</span></span>,{<span><span>&#34;</span>a<span>&#34;</span></span>:1,<span><span>&#34;</span>b<span>&#34;</span></span>:2,<span><span>&#34;</span>sum<span>&#34;</span></span>:3}]
{
  <span><span>&#34;</span>a<span>&#34;</span></span>: 1,
  <span><span>&#34;</span>b<span>&#34;</span></span>: 2,
  <span><span>&#34;</span>c<span>&#34;</span></span>: 3
}</pre></div>
</li>
<li>
<p>Adds new builtin <code>scan($re; $flags)</code>. Was documented but not implemented. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="480954690" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/1961" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/1961/hovercard" href="https://github.com/jqlang/jq/pull/1961">#1961</a></p>
<div data-snippet-clipboard-copy-content="# look for pattern &#34;ab&#34; in &#34;abAB&#34; ignoring casing
$ jq -n &#39;&#34;abAB&#34; | scan(&#34;ab&#34;; &#34;i&#34;)&#39;
&#34;ab&#34;
&#34;AB&#34;"><pre><span><span>#</span> look for pattern &#34;ab&#34; in &#34;abAB&#34; ignoring casing</span>
$ jq -n <span><span>&#39;</span>&#34;abAB&#34; | scan(&#34;ab&#34;; &#34;i&#34;)<span>&#39;</span></span>
<span><span>&#34;</span>ab<span>&#34;</span></span>
<span><span>&#34;</span>AB<span>&#34;</span></span></pre></div>
</li>
<li>
<p>Adds new builtin <code>abs</code> to get absolute value. This potentially allows the literal value of numbers to be preserved as <code>length</code> and <code>fabs</code> convert to float. <a data-hovercard-type="user" data-hovercard-url="/users/pkoppstein/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/pkoppstein">@pkoppstein</a> <a data-error-text="Failed to load title" data-id="1819486782" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2767" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2767/hovercard" href="https://github.com/jqlang/jq/pull/2767">#2767</a></p>
</li>
<li>
<p>Allow <code>if</code> without <code>else</code>-branch. When skipped the <code>else</code>-branch will be <code>.</code> (identity). <a data-hovercard-type="user" data-hovercard-url="/users/chancez/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/chancez">@chancez</a> <a data-hovercard-type="user" data-hovercard-url="/users/wader/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/wader">@wader</a> <a data-error-text="Failed to load title" data-id="410595732" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/1825" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/1825/hovercard" href="https://github.com/jqlang/jq/pull/1825">#1825</a> <a data-error-text="Failed to load title" data-id="1363866585" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2481" data-hovercard-type="issue" data-hovercard-url="/jqlang/jq/issues/2481/hovercard" href="https://github.com/jqlang/jq/issues/2481">#2481</a></p>
<div data-snippet-clipboard-copy-content="# convert 1 to &#34;one&#34; otherwise keep as is
$ jq -n &#39;1,2 | if . == 1 then &#34;one&#34; end&#39;
&#34;one&#34;
2
# behaves the same as
$ jq -n &#39;1,2 | if . == 1 then &#34;one&#34; else . end&#39;
&#34;one&#34;
2
# also works with elif
$ jq -n &#39;1,2,3 | if . == 1 then &#34;one&#34; elif . == 2 then &#34;two&#34; end
&#34;one&#34;
&#34;two&#34;
3"><pre><span><span>#</span> convert 1 to &#34;one&#34; otherwise keep as is</span>
$ jq -n <span><span>&#39;</span>1,2 | if . == 1 then &#34;one&#34; end<span>&#39;</span></span>
<span><span>&#34;</span>one<span>&#34;</span></span>
2
<span><span>#</span> behaves the same as</span>
$ jq -n <span><span>&#39;</span>1,2 | if . == 1 then &#34;one&#34; else . end<span>&#39;</span></span>
<span><span>&#34;</span>one<span>&#34;</span></span>
2
<span><span>#</span> also works with elif</span>
$ jq -n <span><span>&#39;</span>1,2,3 | if . == 1 then &#34;one&#34; elif . == 2 then &#34;two&#34; end</span>
<span>&#34;one&#34;</span>
<span>&#34;two&#34;</span>
<span>3</span></pre></div>
</li>
<li>
<p>Allow use of <code>$binding</code> as key in object literals. <a data-hovercard-type="commit" data-hovercard-url="https://github.com/jqlang/jq/commit/8ea4a5584edb7f54e19cddb6240984d3a543f4f1/hovercard" href="https://github.com/jqlang/jq/commit/8ea4a5584edb7f54e19cddb6240984d3a543f4f1"><tt>8ea4a55</tt></a> <a data-hovercard-type="user" data-hovercard-url="/users/nicowilliams/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/nicowilliams">@nicowilliams</a></p>
<div data-snippet-clipboard-copy-content="$ jq -n &#39;&#34;a&#34; as $key | {$key: 123}&#39;
{
  &#34;a&#34;: 123
}
# previously parentheses were needed
$ jq -n &#39;&#34;a&#34; as $key | {($key): 123}&#39;
{
  &#34;a&#34;: 123
}"><pre>$ jq -n <span><span>&#39;</span>&#34;a&#34; as $key | {$key: 123}<span>&#39;</span></span>
{
  <span><span>&#34;</span>a<span>&#34;</span></span>: 123
}
<span><span>#</span> previously parentheses were needed</span>
$ jq -n <span><span>&#39;</span>&#34;a&#34; as $key | {($key): 123}<span>&#39;</span></span>
{
  <span><span>&#34;</span>a<span>&#34;</span></span>: 123
}</pre></div>
</li>
<li>
<p>Allow dot between chained indexes when using <code>.[&#34;index&#34;]</code> <a data-hovercard-type="user" data-hovercard-url="/users/nicowilliams/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/nicowilliams">@nicowilliams</a> <a data-error-text="Failed to load title" data-id="161502362" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/1168" data-hovercard-type="issue" data-hovercard-url="/jqlang/jq/issues/1168/hovercard" href="https://github.com/jqlang/jq/issues/1168">#1168</a></p>
<div data-snippet-clipboard-copy-content="$ jq -n &#39;{&#34;a&#34;: {&#34;b&#34;: 123}} | .a[&#34;b&#34;]&#39;
123
# now this works also
$ jq -n &#39;{&#34;a&#34;: {&#34;b&#34;: 123}} | .a.[&#34;b&#34;]&#39;
123"><pre>$ jq -n <span><span>&#39;</span>{&#34;a&#34;: {&#34;b&#34;: 123}} | .a[&#34;b&#34;]<span>&#39;</span></span>
123
<span><span>#</span> now this works also</span>
$ jq -n <span><span>&#39;</span>{&#34;a&#34;: {&#34;b&#34;: 123}} | .a.[&#34;b&#34;]<span>&#39;</span></span>
123</pre></div>
</li>
<li>
<p>Fix try/catch catches more than it should. <a data-hovercard-type="user" data-hovercard-url="/users/nicowilliams/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/nicowilliams">@nicowilliams</a> <a data-error-text="Failed to load title" data-id="1816897661" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2750" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2750/hovercard" href="https://github.com/jqlang/jq/pull/2750">#2750</a></p>
</li>
<li>
<p>Speed up and refactor some builtins, also remove <code>scalars_or_empty/0</code>. <a data-hovercard-type="user" data-hovercard-url="/users/muhmuhten/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/muhmuhten">@muhmuhten</a> <a data-error-text="Failed to load title" data-id="414575632" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/1845" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/1845/hovercard" href="https://github.com/jqlang/jq/pull/1845">#1845</a></p>
</li>
<li>
<p>Now <code>halt</code> and <code>halt_error</code> exit immediately instead of continuing to the next input. <a data-hovercard-type="user" data-hovercard-url="/users/emanuele6/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/emanuele6">@emanuele6</a> <a data-error-text="Failed to load title" data-id="1793800694" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2667" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2667/hovercard" href="https://github.com/jqlang/jq/pull/2667">#2667</a></p>
</li>
<li>
<p>Fix issue converting string to number after previous convert error. <a data-hovercard-type="user" data-hovercard-url="/users/thalman/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/thalman">@thalman</a> <a data-error-text="Failed to load title" data-id="1109079679" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2400" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2400/hovercard" href="https://github.com/jqlang/jq/pull/2400">#2400</a></p>
</li>
<li>
<p>Make 0 divided by 0 result in NaN consistently. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="792710542" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2253" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2253/hovercard" href="https://github.com/jqlang/jq/pull/2253">#2253</a></p>
</li>
<li>
<p>Fix issue representing large numbers on some platforms causing invalid JSON output. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1790607154" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2661" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2661/hovercard" href="https://github.com/jqlang/jq/pull/2661">#2661</a></p>
</li>
<li>
<p>Fix deletion using assigning empty against arrays. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="627092290" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2133" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2133/hovercard" href="https://github.com/jqlang/jq/pull/2133">#2133</a></p>
<div data-snippet-clipboard-copy-content="# now this works as expected, filter out all values over 2 by assigning empty
$ jq -c &#39;(.[] | select(. &gt;= 2)) |= empty&#39; &lt;&lt;&lt; &#39;[1,5,3,0,7]&#39;
[1,0]"><pre><span><span>#</span> now this works as expected, filter out all values over 2 by assigning empty</span>
$ jq -c <span><span>&#39;</span>(.[] | select(. &gt;= 2)) |= empty<span>&#39;</span></span> <span>&lt;&lt;&lt;</span> <span><span>&#39;</span>[1,5,3,0,7]<span>&#39;</span></span>
[1,0]</pre></div>
</li>
<li>
<p>Fix <code>stderr/0</code> to output raw text without any decoration. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1816965365" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2751" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2751/hovercard" href="https://github.com/jqlang/jq/pull/2751">#2751</a></p>
</li>
<li>
<p>Fix <code>nth/2</code> to emit empty on index out of range. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1795223102" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2674" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2674/hovercard" href="https://github.com/jqlang/jq/pull/2674">#2674</a></p>
</li>
<li>
<p>Fix <code>implode</code> to not assert and instead replace invalid unicode codepoints. <a data-hovercard-type="user" data-hovercard-url="/users/wader/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/wader">@wader</a> <a data-error-text="Failed to load title" data-id="1784689804" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2646" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2646/hovercard" href="https://github.com/jqlang/jq/pull/2646">#2646</a></p>
</li>
<li>
<p>Simpler and faster <code>transpose</code>. <a data-hovercard-type="user" data-hovercard-url="/users/pkoppstein/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/pkoppstein">@pkoppstein</a> <a data-error-text="Failed to load title" data-id="1817532711" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2758" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2758/hovercard" href="https://github.com/jqlang/jq/pull/2758">#2758</a></p>
</li>
<li>
<p>Allow keywords to be used as binding name in more places. <a data-hovercard-type="user" data-hovercard-url="/users/emanuele6/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/emanuele6">@emanuele6</a> <a data-error-text="Failed to load title" data-id="1795517266" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2681" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2681/hovercard" href="https://github.com/jqlang/jq/pull/2681">#2681</a></p>
</li>
<li>
<p>Allow using <code>nan</code> as NaN in JSON. <a data-hovercard-type="user" data-hovercard-url="/users/emanuele6/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/emanuele6">@emanuele6</a> <a data-error-text="Failed to load title" data-id="1803431686" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2712" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2712/hovercard" href="https://github.com/jqlang/jq/pull/2712">#2712</a></p>
</li>
<li>
<p>Fix indices/1 and rindex/1 in case of overlapping matches in strings. <a data-hovercard-type="user" data-hovercard-url="/users/emanuele6/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/emanuele6">@emanuele6</a> <a data-error-text="Failed to load title" data-id="1805666775" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2718" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2718/hovercard" href="https://github.com/jqlang/jq/pull/2718">#2718</a></p>
</li>
<li>
<p>Enable <code>significand/0</code>, <code>gamma/0</code> and <code>drem/2</code> on macOS. <a data-hovercard-type="user" data-hovercard-url="/users/itchyny/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/itchyny">@itchyny</a> <a data-error-text="Failed to load title" data-id="1817021065" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2756" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2756/hovercard" href="https://github.com/jqlang/jq/pull/2756">#2756</a> <a data-error-text="Failed to load title" data-id="1823321958" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2775" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2775/hovercard" href="https://github.com/jqlang/jq/pull/2775">#2775</a></p>
</li>
<li>
<p>Fix segfault when using libjq and threads. <a data-hovercard-type="user" data-hovercard-url="/users/thalman/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/thalman">@thalman</a> <a data-error-text="Failed to load title" data-id="1605548253" data-permission-text="Title is private" data-url="https://github.com/jqlang/jq/issues/2546" data-hovercard-type="pull_request" data-hovercard-url="/jqlang/jq/pull/2546/hovercard" href="https://github.com/jqlang/jq/pull/2546">#2546</a></p>
</li>
</ul></div>
</div>
  
</div></div>

  </div>
  </section>
  <section aria-labelledby="hd-caeaec79">
  <h2 id="hd-caeaec79">jq 1.6</h2>

  <div>
    


    <div>
  <div data-view-component="true">
  
  <div data-view-component="true">      

        <div data-pjax="true" data-test-selector="body-content" data-view-component="true"><h2>New in this release since 1.5:</h2>
<ul>
<li>Destructuring Alternation</li>
<li>New Builtins:
<ul>
<li><code>builtins/0</code></li>
<li><code>stderr/0</code></li>
<li><code>halt/0, halt_error/1</code></li>
<li><code>isempty/1</code></li>
<li><code>walk/1</code></li>
<li><code>utf8bytelength/1</code></li>
<li><code>localtime/0, strflocaltime/1</code></li>
<li>SQL-style builtins</li>
<li>and more!</li>
</ul>
</li>
<li>Add support for ASAN and UBSAN</li>
<li>Make it easier to use jq with shebangs (<a data-hovercard-type="commit" data-hovercard-url="https://github.com/jqlang/jq/commit/8f6f28c8d3fd6fb85439add3e812edeb5a887999/hovercard" href="https://github.com/jqlang/jq/commit/8f6f28c8d3fd6fb85439add3e812edeb5a887999"><tt>8f6f28c</tt></a>)</li>
<li>Add <code>$ENV</code> builtin variable to access environment</li>
<li>Add <code>JQ_COLORS</code> env var for configuring the output colors</li>
</ul>
<h2>Bug fixes:</h2>
<ul>
<li>Calling <code>jq</code> without a program argument now always assumes <code>.</code> for the program, regardless of stdin/stdout. (<a data-hovercard-type="commit" data-hovercard-url="https://github.com/jqlang/jq/commit/5fe053671a768d28bc9773719cc4a9a35e72f30d/hovercard" href="https://github.com/jqlang/jq/commit/5fe053671a768d28bc9773719cc4a9a35e72f30d"><tt>5fe0536</tt></a>)</li>
<li>Make sorting stable regardless of qsort. (<a data-hovercard-type="commit" data-hovercard-url="https://github.com/jqlang/jq/commit/7835a724d65708f4511e5d26c5ae9a1a5c1da576/hovercard" href="https://github.com/jqlang/jq/commit/7835a724d65708f4511e5d26c5ae9a1a5c1da576"><tt>7835a72</tt></a>)</li>
<li>Adds a local oniguruma submodule and the <code>./configure --with-oniguruma=builtin</code> option to make it easier to build with oniguruma support on systems where you can&#39;t install system-level libraries. (<a data-hovercard-type="commit" data-hovercard-url="https://github.com/jqlang/jq/commit/c6374b6a1fce85687af3bffd3fa0f9541d174cb9/hovercard" href="https://github.com/jqlang/jq/commit/c6374b6a1fce85687af3bffd3fa0f9541d174cb9"><tt>c6374b6</tt></a> and <a data-hovercard-type="commit" data-hovercard-url="https://github.com/jqlang/jq/commit/02bad4b298d4d2bc8e29c3f0d744700652cfd832/hovercard" href="https://github.com/jqlang/jq/commit/02bad4b298d4d2bc8e29c3f0d744700652cfd832"><tt>02bad4b</tt></a>)</li>
<li>And much more!</li>
</ul></div>
</div>
  
</div></div>

  </div>
  </section>
  <section aria-labelledby="hd-8346789a">
  <h2 id="hd-8346789a">jq 1.5</h2>

  <div>
    


    <div>
  <div data-view-component="true">
  
  <div data-view-component="true">      

        <div data-pjax="true" data-test-selector="body-content" data-view-component="true"><p>Thanks to the 20+ developers who have sent us PRs since 1.4, and the many contributors to issues and the wiki.</p>
<p>The manual for jq 1.5 can be found at <a href="https://stedolan.github.io/jq/manual/v1.5/" rel="nofollow">https://stedolan.github.io/jq/manual/v1.5/</a></p>
<p>Salient new features since 1.4:</p>
<ul>
<li>
<p>regexp support (using Oniguruma)!</p>
</li>
<li>
<p>a proper module system</p>
<p><code>import &#34;foo/bar&#34; as bar; # import foo/bar.jq&#39;s defs into a bar::* namespace</code></p>
<p>and</p>
<p><code>include &#34;foo/bar&#34;; # import foo/bar.jq&#39;s defs into the top-level</code></p>
</li>
<li>
<p>destructuring syntax (<code>. as [$first, $second, {$foo, $bar}] | ...</code>)</p>
</li>
<li>
<p>math functions</p>
</li>
<li>
<p>an online streaming parser</p>
</li>
<li>
<p>minimal I/O builtions (<code>inputs</code>, <code>debug</code>)</p>
<p>One can now write:</p>
<p><code>jq -n &#39;reduce inputs as $i ( ... )&#39;</code></p>
<p>to reduce inputs in an online way without having to slurp them first!  This works with streaming too.</p>
</li>
<li>
<p>try/catch, for catching and handling errors (this makes for a dynamic non-local exit system)</p>
</li>
<li>
<p>a lexical non-local exit system</p>
<p>One can now say</p>
<p><code>label $foo | ..... | break $foo</code></p>
<p>where the break causes control to return to the label $foo, which</p>
</li>
<li>
<p>tail call optimization (TCO), which allows efficient recursion in jq</p>
</li>
<li>
<p>a variety of new control structure builtins (e.g., <code>while(cond; exp)</code>, <code>repeat(exp)</code>, <code>until(cond; next)</code>), many of which internally use TCO</p>
</li>
<li>
<p>an enhanced form of <code>reduce</code>: <code>foreach exp as $name (init_exp; update_exp; extract_exp)</code></p>
</li>
<li>
<p>the ability to read module data files</p>
<p><code>import &#34;foo/bar&#34; as $bar; # read foo/bar.json, bind to $bar::bar</code></p>
</li>
<li>
<p><code>--argjson var &#39;&lt;JSON text&gt;&#39;</code></p>
<p>Using --arg var  bit me too many times :)</p>
</li>
<li>
<p><code>--slurpfile var &#34;filename&#34;</code></p>
<p>Replaces the <code>--argfile</code> form (which is now deprecated but remains for backward compatibility).</p>
</li>
<li>
<p>support for application/json-seq (RFC7464)</p>
</li>
<li>
<p>a large variety of new utility functions, many being community contributions (e.g., <code>bsearch</code>, for binary searching arrays)</p>
</li>
<li>
<p>datetime functions</p>
</li>
<li>
<p>a variety of performance enhancements</p>
</li>
<li>
<p><code>def($a): ...;</code> is now allowed as an equivalent of <code>def(a): a as $a | ...;</code></p>
</li>
<li>
<p>test and build improvements, including gcov support</p>
</li>
</ul>
<p>Lastly, don&#39;t forget the wiki!  The wiki has a lot of new content since 1.4, much of it contributed by the community.</p></div>
</div>
  
</div></div>

  </div>
  </section>
  <section aria-labelledby="hd-f26647b6">
  <h2 id="hd-f26647b6">jq 1.5 release candidate 2</h2>

  <div>
    


    <div>
  <div data-view-component="true">
  
  <div data-view-component="true">      

        <div data-pjax="true" data-test-selector="body-content" data-view-component="true"><p>Thanks to the 20+ developers who have sent us PRs since 1.4, and the many contributors to issues and the wiki.  We&#39;re nearing a 1.5 release, finally.</p>
<p>Salient new features since 1.4:</p>
<ul>
<li>
<p>regexp support (using Oniguruma)!</p>
</li>
<li>
<p>a proper module system</p>
<p><code>import &#34;foo/bar&#34; as bar; # import foo/bar.jq&#39;s defs into a bar::* namespace</code></p>
<p>and</p>
<p><code>include &#34;foo/bar&#34;; # import foo/bar.jq&#39;s defs into the top-level</code></p>
</li>
<li>
<p>destructuring syntax (<code>. as [$first, $second, {$foo, $bar}] | ...</code>)</p>
</li>
<li>
<p>math functions</p>
</li>
<li>
<p>an online streaming parser</p>
</li>
<li>
<p>minimal I/O builtions (<code>inputs</code>, <code>debug</code>)</p>
<p>One can now write:</p>
<p><code>jq -n &#39;reduce inputs as $i ( ... )&#39;</code></p>
<p>to reduce inputs in an online way without having to slurp them first!  This works with streaming too.</p>
</li>
<li>
<p>try/catch, for catching and handling errors (this makes for a dynamic non-local exit system)</p>
</li>
<li>
<p>a lexical non-local exit system</p>
<p>One can now say</p>
<p><code>label $foo | ..... | break $foo</code></p>
<p>where the break causes control to return to the label $foo, which</p>
</li>
<li>
<p>tail call optimization (TCO), which allows efficient recursion in jq</p>
</li>
<li>
<p>a variety of new control structure builtins (e.g., <code>while(cond; exp)</code>, <code>repeat(exp)</code>, <code>until(cond; next)</code>), many of which internally use TCO</p>
</li>
<li>
<p>an enhanced form of <code>reduce</code>: <code>foreach exp as $name (init_exp; update_exp; extract_exp)</code></p>
</li>
<li>
<p>the ability to read module data files</p>
<p><code>import &#34;foo/bar&#34; as $bar; # read foo/bar.json, bind to $bar::bar</code></p>
</li>
<li>
<p><code>--argjson var &#39;&lt;JSON text&gt;&#39;</code></p>
<p>Using --arg var  bit me too many times :)</p>
</li>
<li>
<p><code>--slurpfile var &#34;filename&#34;</code></p>
<p>Replaces the <code>--argfile</code> form (which is now deprecated but remains for backward compatibility).</p>
</li>
<li>
<p>support for application/json-seq (RFC7464)</p>
</li>
<li>
<p>a large variety of new utility functions, many being community contributions (e.g., <code>bsearch</code>, for binary searching arrays)</p>
</li>
<li>
<p>datetime functions</p>
</li>
<li>
<p>a variety of performance enhancements</p>
</li>
<li>
<p><code>def($a): ...;</code> is now allowed as an equivalent of <code>def(a): a as $a | ...;</code></p>
</li>
<li>
<p>test and build improvements, including gcov support</p>
</li>
</ul>
<p>Lastly, don&#39;t forget the wiki!  The wiki has a lot of new content since 1.4, much of it contributed by the community.</p></div>
</div>
  
</div></div>

  </div>
  </section>
  <section aria-labelledby="hd-7f9d0cad">
  <h2 id="hd-7f9d0cad">1.5 release candidate 1</h2>

  <div>
    


    <div>
  <div data-view-component="true">
  
  <div data-view-component="true">      

        <div data-pjax="true" data-test-selector="body-content" data-view-component="true"><p>Salient new features since 1.4:</p>
<ul>
<li>
<p>regexp support (using Oniguruma)</p>
</li>
<li>
<p>an online streaming parser</p>
<p>Included is the ability to control reading of inputs from the jq</p>
<p>Finally we can write:</p>
<p>jq -n &#39;reduce inputs as $i ( ... )&#39; # reduce online!</p>
<p>to reduce inputs without slurping them first.  This works with</p>
</li>
<li>
<p>try/catch, for catching and handling errors (this makes for a dynamic non-local exit system)</p>
</li>
<li>
<p>a lexical non-local exit system</p>
<p>Using try/catch to break out of control structures was not a good</p>
<p>You can now say</p>
<p>label $foo | ..... | break $foo</p>
<p>where the break causes control to return to the label $foo, which</p>
</li>
<li>
<p>tail call optimization (TCO), which allows efficient recursion in jq</p>
</li>
<li>
<p>a variety of new control structure builtins (e.g., <code>while(cond; exp)</code>, <code>repeat(exp)</code>, <code>until(cond; next)</code>)</p>
</li>
<li>
<p>an enhanced form of <code>reduce</code>: <code>foreach exp as $name (init_exp; update_exp; extract_exp)</code></p>
</li>
<li>
<p>a proper module system</p>
<p>import &#34;foo/bar&#34; as bar; # import foo/bar.jq&#39;s defs into a bar::* namespace</p>
</li>
<li>
<p>the ability to read module data files</p>
<p>import &#34;foo/bar&#34; as $bar; # read foo/bar.json, bind to $bar::bar</p>
</li>
<li>
<p><code>--argjson var &#39;&lt;JSON text&gt;&#39;</code></p>
<p>Using --arg var  bit me too many times :)</p>
</li>
<li>
<p><code>--in-place</code> / <code>-i</code> for in-place editing of files</p>
</li>
<li>
<p>support for application/json-seq.</p>
</li>
<li>
<p>a variety of new utility functions, many being community contributions</p>
</li>
<li>
<p>a variety of performance enhancements (e.g., constant folding)</p>
</li>
<li>
<p><code>def($a): ...;</code> is now allowed as an equivalent of <code>def(a): a as $a | ...;</code></p>
</li>
</ul>
<p>Lastly, don&#39;t forget the wiki!  It has a lot of new content since 1.4, much of it contributed by the community.</p></div>
</div>
  
</div></div>

  </div>
  </section>
  <section aria-labelledby="hd-d6393892">
  <h2 id="hd-d6393892">jq 1.4</h2>

  
  </section>
  <section aria-labelledby="hd-922d97ed">
  <h2 id="hd-922d97ed">jq 1.3</h2>

  
  </section>
  <section aria-labelledby="hd-1e190f12">
  <h2 id="hd-1e190f12">jq 1.2</h2>

  
  </section>


    

    
</div></div>
  </body>
</html>
