<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.skyvern.com/how-we-accidentally-burned-through-200gb-of-proxy-bandwidth-in-6-hours/">Original</a>
    <h1>We accidentally burned through 200GB of proxy bandwidth in 6 hours</h1>
    
    <div id="readability-page-1" class="page"><div id="site-main">
<article>

    <header>

        

        


        <div>
        <section>

            <ul>
                <li>
                    <a href="https://blog.skyvern.com/author/suchintan/" aria-label="Read more of Suchintan Singh">
                        <img src="https://blog.skyvern.com/content/images/size/w100/2024/03/1553633530342.jpeg" alt="Suchintan Singh"/>
                    </a>
                </li>
            </ul>

            <div>
                
                <p><time datetime="2024-09-18">Sep 18, 2024</time>
                        <span><span>â€¢</span> 2 min read</span>
                </p>
            </div>

        </section>
        </div>

            <figure>
                <img srcset="/content/images/size/w300/2024/08/Ghost-Admin-Image.png 300w,
                            /content/images/size/w600/2024/08/Ghost-Admin-Image.png 600w,
                            /content/images/size/w1000/2024/08/Ghost-Admin-Image.png 1000w,
                            /content/images/size/w2000/2024/08/Ghost-Admin-Image.png 2000w" sizes="(min-width: 1400px) 1400px, 92vw" src="https://blog.skyvern.com/content/images/size/w2000/2024/08/Ghost-Admin-Image.png" alt="How we accidentally burned through 200GB of proxy bandwidth in 6 hours"/>
            </figure>

    </header>

    <section>
        <p><strong>Context</strong></p><p>Skyvern is an AI agent that helps companies automate workflows in the browser. We run leverage proxy networks and run headful browser instances in the cloud to facilitate most of our automations.</p><p>ðŸ˜± 200GB of proxy bandwidth was approximately $500 burned over the course of 6 hours</p><p><strong>One fatal morning</strong></p><p>I woke up one morning to an alarm on my phone â€“ Skyvern&#39;s failure rate was through the roof. Classic startup moment.</p><p>Looking through our alerts, I noticed that our proxy bandwidth alert had fired off. That&#39;s weird â€“ we just renewed our plan a few days ago, and should have enough quota to last a month.</p><p>I took a look at our metrics and saw something that made my heart sink â€“ we just burned through 200GB of proxy bandwidth in the last 6 hours. HOW DID THAT HAPPEN?</p><figure><img src="https://blog.skyvern.com/content/images/2024/08/image-2.png" alt="" loading="lazy" width="1600" height="308" srcset="https://blog.skyvern.com/content/images/size/w600/2024/08/image-2.png 600w, https://blog.skyvern.com/content/images/size/w1000/2024/08/image-2.png 1000w, https://blog.skyvern.com/content/images/2024/08/image-2.png 1600w" sizes="(min-width: 720px) 720px"/><figcaption><span>Proxy bandwidth going through the roof</span></figcaption></figure><p>My first thought was â€“ did we get compromised? We give all new users $5 of credits to play around with.. and have had users try to abuse it before. Did someone figure out how to create millions of accounts and burn our bandwidth?</p><p><strong>Digging deeper</strong></p><p>Taking a quick look at our usage stats.. no.. nothing out of the ordinary. </p><p>OK. Let&#39;s dig a little bit deeper â€“ where is this bandwidth going?</p><figure><img src="https://blog.skyvern.com/content/images/2024/08/image-3.png" alt="" loading="lazy" width="2000" height="1001" srcset="https://blog.skyvern.com/content/images/size/w600/2024/08/image-3.png 600w, https://blog.skyvern.com/content/images/size/w1000/2024/08/image-3.png 1000w, https://blog.skyvern.com/content/images/size/w1600/2024/08/image-3.png 1600w, https://blog.skyvern.com/content/images/2024/08/image-3.png 2000w" sizes="(min-width: 720px) 720px"/></figure><p>What&#39;s going on? Why is there a random call to <a href="http://optimizationguide-pa.googleapis.com/?ref=blog.skyvern.com" rel="noopener noreferrer">optimizationguide-pa.googleapis.com</a><a href="https://skyvern.slack.com/archives/C05B62MHYKW/p1722006341046559?thread_ts=1722005282.450889&amp;cid=C05B62MHYKW&amp;ref=blog.skyvern.com">11:05</a> occupying 70MB of bandwidth.. over and over and over again?</p><p>Doing a quick google search revealed this thread:</p><p><a href="https://www.reddit.com/r/chrome/comments/truz5d/the_chrome_downloads_for_no_reason_whatsoever/?ref=blog.skyvern.com" rel="noopener noreferrer">https://www.reddit.com/r/chrome/comments/truz5d/the_chrome_downloads_for_no_reason_whatsoever/</a></p><p>and </p><p><a href="https://support.google.com/chrome/thread/157884177/chrome-appearing-to-download-without-me-downloading-anything?hl=en&amp;ref=blog.skyvern.com" rel="noopener noreferrer">https://support.google.com/chrome/thread/157884177/chrome-appearing-to-download-without-me-downloading-anything?hl=en</a></p><p>OK this is starting to make sense. Google&#39;s downloading a machine learning model in the background to cache, and we seem to be downloading it over and over again</p><p>We don&#39;t currently persist browser state between sessions.. did we end up in a state where google wants to cache the model, and we keep resetting to the uncached version? </p><p><strong>Potential Solution</strong></p><p>We have a few options to fix this:</p><p>#1 - Run chrome locally and save the locally generated <code>user_data_dir</code> which includes the model, effectively caching it.</p><p>Problem: if the model became stale it would re-trigger the download again in the future</p><p>#2 - Introduce a rule into our sidecar proxy to block this specific google URL â€“ prevent Google from downloading the model in the first place</p>
<!--kg-card-begin: html-->
<p data-split-side="right" data-lock-side-selection=""><span data-code-marker="+"><span>  - </span><span>DOMAIN-SUFFIX,optimizationguide-pa.googleapis.com,REJECT</span></span></p>
<!--kg-card-end: html-->
<p><strong>Going back to sleep</strong></p><p>We decided to do both to solve this problem. We updated our <code>user_data_dir</code> to get a quick fix out, and also updated our sidecar proxy to block that specific URL from triggering downloads in the future</p>
    </section>


</article>
</div></div>
  </body>
</html>
