<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://miccah.io/posts/rust-display-trait.html">Original</a>
    <h1>Rust’s Display Trait</h1>
    
    <div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p>Rust’s trait system is pretty cool, and one of the common traits is
<a href="https://doc.rust-lang.org/std/fmt/trait.Display.html">Display</a>. Defining an
implementation for this trait will allow you to use the standard formatter <code>{}</code>
with your type, but the official example is a bit misleading.</p>

<div><div><pre><code><span>use</span> <span>std</span><span>::</span><span>fmt</span><span>;</span>

<span>struct</span> <span>Point</span> <span>{</span>
    <span>x</span><span>:</span> <span>i32</span><span>,</span>
    <span>y</span><span>:</span> <span>i32</span><span>,</span>
<span>}</span>

<span>impl</span> <span>fmt</span><span>::</span><span>Display</span> <span>for</span> <span>Point</span> <span>{</span>
    <span>fn</span> <span>fmt</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>f</span><span>:</span> <span>&amp;</span><span>mut</span> <span>fmt</span><span>::</span><span>Formatter</span><span>&lt;</span><span>&#39;_</span><span>&gt;</span><span>)</span> <span>-&gt;</span> <span>fmt</span><span>::</span><span>Result</span> <span>{</span>
        <span>write!</span><span>(</span><span>f</span><span>,</span> <span>&#34;({}, {})&#34;</span><span>,</span> <span>self</span><span>.x</span><span>,</span> <span>self</span><span>.y</span><span>)</span>
    <span>}</span>
<span>}</span>

<span>fn</span> <span>main</span><span>()</span> <span>{</span>
    <span>let</span> <span>origin</span> <span>=</span> <span>Point</span> <span>{</span> <span>x</span><span>:</span> <span>0</span><span>,</span> <span>y</span><span>:</span> <span>0</span> <span>};</span>
    <span>println!</span><span>(</span><span>&#34;The origin is: {origin}&#34;</span><span>);</span>
<span>}</span>
</code></pre></div></div>



<p>Well, that output is expected, but what if we add some padding?
This should right align, using <code>-</code> as padding, and a width of 10
(<a href="https://doc.rust-lang.org/std/fmt/index.html">reference</a>).</p>

<div><div><pre><code><span>fn</span> <span>main</span><span>()</span> <span>{</span>
    <span>let</span> <span>origin</span> <span>=</span> <span>Point</span> <span>{</span> <span>x</span><span>:</span> <span>0</span><span>,</span> <span>y</span><span>:</span> <span>0</span> <span>};</span>
    <span>println!</span><span>(</span><span>&#34;The origin is: |{origin:-&gt;10}|&#34;</span><span>);</span>
<span>}</span>
</code></pre></div></div>



<p>Hm.. so format specifiers just get thrown away? It actually depends on how
<code>Display</code> is implemented, which is why I say the example is misleading. Let’s
fix it to respect formatting.</p>

<div><div><pre><code><span>impl</span> <span>fmt</span><span>::</span><span>Display</span> <span>for</span> <span>Point</span> <span>{</span>
    <span>fn</span> <span>fmt</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>f</span><span>:</span> <span>&amp;</span><span>mut</span> <span>fmt</span><span>::</span><span>Formatter</span><span>&lt;</span><span>&#39;_</span><span>&gt;</span><span>)</span> <span>-&gt;</span> <span>fmt</span><span>::</span><span>Result</span> <span>{</span>
        <span>format!</span><span>(</span><span>&#34;({}, {})&#34;</span><span>,</span> <span>self</span><span>.x</span><span>,</span> <span>self</span><span>.y</span><span>)</span><span>.fmt</span><span>(</span><span>f</span><span>)</span>
    <span>}</span>
<span>}</span>
</code></pre></div></div>

<div><div><pre><code>The origin is: |----(0, 0)|
</code></pre></div></div>

<p>Yay!</p>

<p>What we’re doing here is generating a <code>String</code> and using its <code>Display</code>
implementation to format it as expected. Note that we can also use any of the
methods provided by
<a href="https://doc.rust-lang.org/std/fmt/struct.Formatter.html">Formatter</a>
if we want to pass formatting to our <code>Point</code> attributes too.</p>

<p>P.S. implementing <code>Display</code> allows you to call <code>to_string()</code> as well, which is
pretty neat.</p>

  </div>
</article>

      </div>
    </div></div>
  </body>
</html>
