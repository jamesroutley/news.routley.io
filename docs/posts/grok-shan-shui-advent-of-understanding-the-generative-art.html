<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://zverok.github.io/blog/2021-12-28-grok-shan-shui.html">Original</a>
    <h1>Grok {Shan, Shui}*: Advent of understanding the generative art</h1>
    
    <div id="readability-page-1" class="page"><article>
    <p><strong>I spent 24 days digging into the code of <a href="https://github.com/LingDong-/shan-shui-inf">{Shan, Shui}*</a> Chinese painting generator and lived to tell the story.</strong></p>

<p>While a lot of fellow developers spent this year’s advent on solving this year’s <a href="https://adventofcode.com/">Advent of Code</a> puzzles, I decided to have my own little “advent.”</p>

<p>A few weeks before December, I’ve stumbled upon an awesome <a href="https://github.com/LingDong-/shan-shui-inf">generative art project</a> by developer and artist <a href="https://github.com/LingDong-">Lingong Huang</a>. It generates infinite (and surprisingly varying) scrolls of Chinese paintings like this:</p>

<p><img src="https://zverok.github.io/img/advent2021/image00.png" alt=""/></p>

<p>It struck me with its beauty—as well as with the fact that I don’t have the slightest idea of how it might work. After half-an-hour looking into the <a href="https://github.com/LingDong-/shan-shui-inf/blob/master/index.html">code</a>, I knew I wanted to have some level of understanding of how those things are done in general—and this one, in particular—enough to spend some hours on it. So, I thought, let it be my “advent”—and that happened.</p>

<h2 id="trying-to-understand">Trying to understand</h2>

<p>My usual way to understand how others’ code works is to translate it into another language. I did <a href="https://github.com/zverok/xkcdize">quite</a> <a href="https://github.com/zverok/drosterize">a</a> <a href="https://github.com/zverok/magic_cloud">few</a> <a href="https://zverok.github.io/blog/2020-05-16-ruby-as-apl.html">projects</a> <a href="https://github.com/molybdenum-99/mormor">of</a> <a href="https://zverok.github.io/spellchecker.html">this kind</a>. And deciding on what language to translate it to, I made a weird decision: to just rewrite (some parts of the) <code>{Shan, Shui}*</code> in the same JavaScript—but using modern features of the latest versions and semi-functional style of chained computations I am fond of.</p>

<p>This is not to say the original author’s code was “bad,” and I made it “good”—nothing of the kind. I just experimented with how things <em>might</em> be expressed so they would be closer to my reading/writing habits—just as <em>some</em> goal making me understand them.</p>

<p>The result of the project is the diary below. By the end of 24 advent days, I haven’t seen/read/rewritten all parts of the algorithm—that would require trice this amount of time, probably. But I went through all the layers of the picture and got <em>some</em> understanding on how things are done there—from a singular brushstroke to generating a whole mountain with a small village and a forest. And I didn’t lose my awe, and I am trying to pass it to others.</p>

<p>For the impatient: you can probably just go through the <a href="https://zverok.github.io/advent2021/day01.html">day 1 intro</a> and then go immediately to <a href="https://zverok.github.io/advent2021/day24.html">day 24</a> with the overview of everything I’ve understood on the road. But I hope that reading through the whole diary might also be of some fun. There are small philosophical bits here and there, too, discussing how the code <em>might</em> be written, and it can be either insightful or repulsing, or both.</p>

<blockquote>
  <p>Note that JS is not my mother tongue. While using modern features for better expression of the meaning, I probably still went far for the modern preferred JS <em>style</em>: say, I dropped a lot of <code>var</code>s everywhere (never bothering with <code>let</code>/<code>const</code>, though I probably should’ve) and didn’t use any linter/autoformatter. So it might be a somewhat painful reading or a JS developer by trade.</p>

  <p>And English is not my first language either. Usually, I use at least Grammarly to make sure the texts are decent… But with the amount of work this project brought, I can only promise the diary was spellchecked. Have mercy.</p>
</blockquote>

<p>So, here goes!</p>

<h2 id="the-diary-of-grokking">The diary of grokking!</h2>

<ul>
  <li><strong><a href="https://zverok.github.io/advent2021/day01.html">Day 01: Advent of <code>Grok {Shan, Shui}*</code></a></strong>—Intro to the project and the way I am planning (planned) to do it.</li>
  <li><strong><a href="https://zverok.github.io/advent2021/day02.html">Day 02: Overview and starting to change the code</a></strong>—Analysing the whole, and starting to read &amp; rewrite one of the tree-generating functions, <code>tree01</code>…</li>
  <li><strong><a href="https://zverok.github.io/advent2021/day03.html">Day 03: Fighting the tree</a></strong>—…and continue…</li>
  <li><strong><a href="https://zverok.github.io/advent2021/day04.html">Day 04: Making sense of the tree</a></strong>—…and continue; also look into <code>poly</code> and <code>blob</code> low-level shapes-generating functions.</li>
  <li><strong><a href="https://zverok.github.io/advent2021/day05.html">Day 05: Moar treees!</a></strong>—Finalize <code>tree01</code> and look into another tree, <code>tree02</code>,</li>
  <li><strong><a href="https://zverok.github.io/advent2021/day06.html">Day 06: Even moar treees!</a></strong>—…and <code>tree03</code>.</li>
  <li><strong><a href="https://zverok.github.io/advent2021/day07.html">Day 07: Build me a house</a></strong>—With trees being (somewhat) understood, starting to look into how architectural elements are made, starting with <code>arch02</code>; which turned out to be a tough nut to crack. A lot of simple arithmetic, but, like, a lot of it! So I started with the <code>box</code> function for drawing parallelepipeds…</li>
  <li><strong><a href="https://zverok.github.io/advent2021/day08.html">Day 08: What’s in a box?</a></strong>—…and spent on it…</li>
  <li><strong><a href="https://zverok.github.io/advent2021/day09.html">Day 09: Lines and boxes</a></strong>—…good…</li>
  <li><strong><a href="https://zverok.github.io/advent2021/day10.html">Day 10: (there are no good puns with the word “stroke”)</a></strong>—…few days, finishing with other small(ish) functions.</li>
  <li><strong><a href="https://zverok.github.io/advent2021/day11.html">Day 11: Back to home</a></strong>—And with that, considering the <code>arch02</code> logic more or less understood.</li>
  <li><strong><a href="https://zverok.github.io/advent2021/day12.html">Day 12: Seeing the forest behind the trees</a></strong>—Starting anew, from top-to-bottom now, I started to look into <code>chunkloader</code> function that created big parts of the landscape.</li>
  <li><strong><a href="https://zverok.github.io/advent2021/day13.html">Day 13: Plan for the mountains</a></strong>—…and into the <code>mountplanner</code> function that decides which landscape feature would be where…</li>
  <li><strong><a href="https://zverok.github.io/advent2021/day14.html">Day 14: Mountain-planning, continued</a></strong>—..and looked into how it decides on a list of big objects.</li>
  <li><strong><a href="https://zverok.github.io/advent2021/day15.html">Day 15: Between the landscape and the tree</a></strong>—Then, I started with the last big endeavor: the thing between chunk and a singular tree: a <code>mountain</code> with all the contours, trees, and houses.</li>
  <li><strong><a href="https://zverok.github.io/advent2021/day16.html">Day 16: Deeper into the mountain</a></strong>—…and…</li>
  <li><strong><a href="https://zverok.github.io/advent2021/day17.html">Day 17: Let’s Vegetate!</a></strong>—…continued…</li>
  <li><strong><a href="https://zverok.github.io/advent2021/day18.html">Day 18: Generation details</a></strong>—…to do…</li>
  <li><strong><a href="https://zverok.github.io/advent2021/day19.html">Day 19: Wrapping up the mountain</a></strong>—…so…</li>
  <li><strong><a href="https://zverok.github.io/advent2021/day20.html">Day 20: REALLY wrapping up the mountain</a></strong>—…for a while.</li>
  <li><strong><a href="https://zverok.github.io/advent2021/day21.html">Day 21: Now what?</a></strong>—Then, I reviewed the big picture: planning and rendering “chunks”</li>
  <li><strong><a href="https://zverok.github.io/advent2021/day22.html">Day 22: Where were we?..</a></strong>—…and how it is made truly infinite.</li>
  <li><strong><a href="https://zverok.github.io/advent2021/day23.html">Day 23: Housekeeping</a></strong>—The technical one, explaining how I’ll organize the project/diary to wrap it up.</li>
  <li><strong><a href="https://zverok.github.io/advent2021/day24.html">Day 24: Putting it all together</a></strong>—The most important one, summarizing all of the findings and outcomes of the investigation!</li>
</ul>

<h2 id="ps">PS</h2>

<p>You know what? I have a Substack now! And <em>a lot</em> of plans for writings for the upcoming year.</p>



  </article></div>
  </body>
</html>
