<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://tamerc.com/posts/ask-hn-who-is-hiring/">Original</a>
    <h1>Insights from over 10,000 comments on &#34;Ask HN: Who Is Hiring&#34; using GPT-4o</h1>
    
    <div id="readability-page-1" class="page"><div><p><strong>TL;DR</strong>: By structuring 10,000 comments on Hacker News using a predefined response_scheme for GPT-4o and LangChain’s ability to force structured output from the LLM, I’ve tried to get a feeling for current job market and trends.</p><h3 id="why">why</h3><p>Looking back at pictures of my NYC visit last year, I thought: why not live there at some point?</p><figure><img loading="lazy" src="https://tamerc.com/posts/ask-hn-who-is-hiring/nyc_short.png#center" alt="shot on Top of The Rock, April &amp;lsquo;23"/><figcaption><p>shot on Top of The Rock, April ‘23</p></figcaption></figure><p>But since NYC’s costs of living are a multiple of my current conditions, the only possibility of me ever being able to afford moving to NYC would be by having a job there. Such job would have to be:</p><ul><li>sponsoring visa</li><li>fitting my skills, tech stack and experience level</li><li>remote or located in nyc</li></ul><p>Skimming through some job postings I quickly got the feeling that $p(\exists \text{ job} \in {\text{jobs}} : \text{job} = \text{offered})$ is not high at the moment.
While I would think I have a good feeling of the current needs and trends for a person working in the software industry, the only references I have are X (formerly Twitter) and LinkedIn, both of which I would say are not the most unbiased or sincerest sources, since timelines aren’t really timelines anymore and algorithms are picking content with the maximum likelihood of giving you a dopamine shot.
Hacker News though, with its simplistic approach to design and ranking, seemed to be a more honest representation of the job market (that the <a href="https://github.com/HackerNews/API">HN-API</a> is dead-simple <em>obviously</em> didn’t play any role). So how realistic is it for me to find such a job, actually? While this may not be quantifiable (at least for me), I can at least quantify other things.</p><p>In this blog post, I want to demonstrate that by combining LLMs, features like JSON-Mode and classic data science methods, one can get an understanding of any topic really quick.</p><h3 id="methodology">methodology</h3><p>My process looked roughly like this:</p><ol><li>Using <a href="https://www.selenium.dev">Selenium</a>, I used a script to google iteratively for strings <code>query = f&#34;ask hn who is hiring {month} {year}&#34;</code> to get the IDs of the items that represent the monthly threads.</li><li>Then, using the forementioned HN-API, I’ve gathered a list of the IDs of the top-comments on these threads. Click <a href="https://hacker-news.firebaseio.com/v0/item/40846428.json?print=pretty">here</a> to see how such a list looks like for the latest “Ask HN: Who is hiring? (July 2024)” thread. Use the API again, I’ve saved the content of the comment into an sqlite3 database.</li><li>Afterwards, I’ve iterated through the comments, and classified them with GPT-4o using following scheme:<div><pre tabindex="0"><code data-lang="python"><span><span><span>class</span> <span>HNJobPosting</span><span>(</span><span>BaseModel</span><span>):</span>
</span></span><span><span>    <span>&#34;&#34;&#34;Job posting from Hacker News.&#34;&#34;&#34;</span>
</span></span><span><span>    <span>comment_id</span><span>:</span> <span>int</span> <span>=</span> <span>&#34;The ID of the comment that contains the job posting, given at the beginning.&#34;</span>
</span></span><span><span>    <span>location</span><span>:</span> <span>str</span> <span>=</span> <span>Field</span><span>(</span><span>description</span><span>=</span><span>&#34;The location of the job&#34;</span><span>)</span>
</span></span><span><span>    <span>remote</span><span>:</span> <span>bool</span> <span>=</span> <span>Field</span><span>(</span><span>description</span><span>=</span><span>&#34;Indicates if the job is remote - if not known, set to false. HAS TO BE A BOOLEAN VALUE!&#34;</span><span>)</span>
</span></span><span><span>    <span>job_type</span><span>:</span> <span>str</span> <span>=</span> <span>Field</span><span>(</span><span>description</span><span>=</span><span>&#34;The type of job (e.g., full-time, part-time, contract, intern, etc.)&#34;</span><span>)</span>
</span></span><span><span>    <span>salary_range</span><span>:</span> <span>str</span> <span>=</span> <span>Field</span><span>(</span><span>description</span><span>=</span><span>&#34;The salary range offered for the job&#34;</span><span>)</span>
</span></span><span><span>    <span># and so forth...</span>
</span></span></code></pre></div>To understand how this is implemented, you can lookup this <a href="https://python.langchain.com/v0.2/docs/how_to/structured_output/">LangChain guide</a>. The v0.2 docs are slightly better than the previous ones, but I really hope that LangChain will finally agree on an API and start to document it nicely. Notably, the <code>bool</code> type itself is not sufficient to realibly get back a <code>False</code> or <code>True</code> - the passive aggressive <em>HAS TO BE A BOOLEAN VALUE!</em> has helped to fix this.</li><li>The results were saved in the database and I’ve used classic SQL to extract the data that is visualized in the following charts.</li></ol><p>By using LangChain’s <code>llm.batch(array)</code> method the processing is parallelized and was pretty fast, around 1 minute per thread. See below for some stats:</p><table><thead><tr><th>thread</th><th>total tokens</th><th>input</th><th>output</th><th>requests</th><th>cost</th><th>runtime</th></tr></thead><tbody><tr><td>June 2024</td><td>260,989</td><td>215,580</td><td>45,409</td><td>362</td><td><strong>1.759035$</strong></td><td><code>65.1s</code></td></tr><tr><td>May 2024</td><td>303,133</td><td>250,168</td><td>52,965</td><td>433</td><td><strong>2.045315$</strong></td><td><code>57.7s</code></td></tr><tr><td>April 2024</td><td>228,113</td><td>189,088</td><td>39,025</td><td>318</td><td><strong>1.530815$</strong></td><td><code>43.5s</code></td></tr></tbody></table><p>…</p><p>While the scraping and storing of the comments is cheap and fast, you notice that the costs of running these batches is not. Therefore, I’ve let the script run back until May 2022. This resulted in <strong>10,891</strong> comments processed, <strong>54.09$</strong> spent and ranks as one of my more expensive Sunday evening boredom activities.
Writing the code, extracting the data from the API and running the processing on the comments (excluding the clean-up and visualizations) took around 90 minutes. At this point I’d like to thank Github Co-Pilot to write me my boilerplate code.</p><p>Since Hacker News is using incremental IDs, we can visualize the activity on Hacker News by plotting the numerical differences between the thread indices per month:</p><p>So, let’s try to get some informations out of the categorized comments.</p><h3 id="results">results</h3><h4 id="how-many-jobs-allow-remote-working">how many jobs allow remote working?</h4><p>Unsurprisingly, during the pandemic, only a fifth of the jobs did not explicitly support remote working. Surprisingly however, this has not decreased as much as I would have expected.</p></div></div>
  </body>
</html>
