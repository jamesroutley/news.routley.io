<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://systemsapproach.substack.com/p/was-mpls-traffic-engineering-worthwhile">Original</a>
    <h1>Was MPLS Traffic Engineering Worthwhile?</h1>
    
    <div id="readability-page-1" class="page"><div><div><article><div class=""><div><div dir="auto"><p>One of the topics we keep coming back to at Systems Approach is “when should a feature be made part of a platform”. This question is at the heart of much of the work we have done over the years, and it is a reason we keep returning to the end-to-end argument in all sorts of contexts. This week we’re looking back at how the arguments played out in the context of traffic engineering. </p><p><span>By far the most controversial technology I have worked on in my career is MPLS traffic engineering (MPLS-TE). I can remember pretty well how the first ideas came about. I had joined Cisco a few months earlier (in 1995) and I was part of a team tasked with figuring out some way to combine the properties of ATM (asynchronous transfer mode) switching with IP routing. Even the idea that ATM and IP might coexist was somewhat controversial at the time. A solid chunk of the telco industry had lined up behind ATM as the future of packet switching and were planning to upgrade the telephone network from something that supported voice only to “Broadband ISDN” based on ATM. People in this world had a tendency to dismiss IP and Ethernet as “legacy” technologies. At the same time, the Internet community was growing rapidly as the Web took off and Internet access started to become something that consumers could get via dial-up modems or their employers. </span><a href="https://en.wikipedia.org/wiki/Steve_Deering" rel="">Steve Deering</a><span>, an Internet pioneer, famously remarked that ATM would never get enough traction even to create a legacy (which was ultimately not far off the mark). </span></p><p><span>As discussed </span><a href="https://systemsapproach.substack.com/p/was-mpls-necessary" rel="">in a previous post</a><span>, Yakov Rekhter had written out the basic ideas of MPLS (a.k.a. tag switching) in a two-page paper that set the direction for our team at Cisco. Our small team was going out on customer visits, mostly to the large ISPs who relied on Cisco for their routers, trying to determine whether the tag switching idea would interest them. At one such meeting I asked the customer (who was quite a character) whether he saw any value in having ATM switches (equipped with the tag switching software that did not yet exist) in his network. He picked up my business card (which had the words “ATM Business Unit” on it), left the room, and returned with a pair of scissors and some sticky tape. After cutting my card into strips, he put the fragments in front of me with the tape and asked me to show how I could add value by reassembling it. (This was clearly a joke about the need to break packets into small cells to send them over ATM networks.) I was taken aback by this but he certainly made his point in a memorable way.</span></p><p>You can get a sense of why MPLS was so controversial from that story. A person who was strongly committed to the IP architecture viewed ATM as worse than useless, and from his perspective, MPLS was just ATM in another form. From another perspective, MPLS was a distortion of the original vision of ATM, so we were not winning fans among traditional telco types either. Of course, if you take a middle position that irritates people at both ends of a spectrum, that doesn’t necessarily mean you’re doing the wrong thing. Nor does it prove you are right.</p><p>Some time later I had my first experience of talking to a trade journalist about my work. He interviewed me and some of the MPLS skeptics. Fortunately, I had someone from Cisco’s PR department on the call, because the resulting article was pretty embarrassing (for me). With a title along the lines of “MPLS: Bad for the Net?” it quoted me as follows: “MPLS is a significant deviation from the Internet architecture and some people think it should be stopped at all costs.” Calling MPLS “a significant deviation” wasn’t in any sense a Cisco position. The PR person had good notes and was able to verify what I had actually said: “Some people think MPLS is a significant deviation from the Internet architecture and should be stopped at all costs.” A correction was issued the following week (long after everyone with any interest had read the article and tucked away deep in the magazine as these things tend to be). I didn’t do a lot more press in my time at Cisco and that was fine with me.</p><p><span>I’ve </span><a href="https://systemsapproach.substack.com/p/was-mpls-necessary" rel="">already written</a><span> about how valuable MPLS turned out to be for enterprise VPNs, but what about traffic engineering? Here I think the results are mixed and harder to quantify. While certainly there was a solid amount of deployment of MPLS-TE, it didn’t become an essential service of ISPs in the way MPLS VPNs did. If you want to make the case that MPLS-TE was really valuable, I think the </span><a href="https://open.substack.com/pub/systemsapproach/p/how-traffic-engineering-became-a?r=cxpek&amp;utm_campaign=post&amp;utm_medium=web" rel="">strongest published arguments</a><span> relate to its use in the massive backbones of </span><a href="https://research.google/pubs/pub41761/" rel="">Google</a><span> and </span><a href="https://www.microsoft.com/en-us/research/wp-content/uploads/2017/01/swan-msrc-jul2013.pdf" rel="">Azure</a><span>. By applying SDN to the control plane of MPLS, the operators of these hyperscale networks are able to perform network-wide optimizations and squeeze out the performance gains that we hoped to achieve in the early days of MPLS-TE. But with the original, distributed MPLS-TE control plane (based on </span><a href="https://www.rfc-editor.org/rfc/rfc3209.html" rel="">RSVP - the Resource ReSerVation Protocol</a><span>) those gains were harder to achieve (because there was no global control), and equally hard to quantify. No-one was going to run a substantive A/B test on their network with and without MPLS-TE. (There was additional controversy over the choice of extending RSVP rather than building a new protocol, but that’s a story for another day.)</span></p><p><span>It wasn’t hard to make a </span><em>theoretical</em><span> argument that MPLS-TE could improve network performance and average link utilization, by moving traffic from congested links to uncongested ones. The hard part was proving that it would actually do a better job in practice than the more traditional methods such as using link weights and multipath routing to achieve the same ends. In the end, we had two disjoint sets of customers who passionately believed in their positions: one set holding that MPLS-TE was completely useless, the other believing they could only achieve their utilization and performance objectives by deploying MPLS-TE. It was a classic case of “listen to the customer” and we did, developing an increasingly complex set of MPLS features for the second group while continuing to develop the traditional feature set for the first group. We were lucky to have the resources to do this; it was reported that the requirement to support MPLS became a barrier to entry for some router vendors in the ISP market. Conspiracy theorists might (and did) argue that this was all part of Cisco’s cunning plan: make products complex just to raise that barrier to entry for competition. I can honestly say that this was not the case with MPLS, in that we really did have customer demand for the complexity. </span></p><p><span>All of this ancient history came back to mind recently as we’ve had a series of fascinating discussions about the </span><a href="https://web.mit.edu/Saltzer/www/publications/endtoend/endtoend.pdf" rel="">end-to-end argument</a><span> prompted by our </span><a href="https://systemsapproach.substack.com/p/rpc-vs-tcp-redux" rel="">recent pieces</a><span> on networking support for RPC. I highly recommend occasional re-reading of the original paper, because most people take away the simple message “dumb core, smart end-hosts”, which is a massive oversimplification. The E2E paper actually makes a strong case for putting some functionality inside the network, particularly to improve performance, and offers a nuanced argument about how to decide when “enough is enough” regarding those in-network functions. In many respects my whole career was a set of efforts to decide when putting something into the network was a good idea from the end-to-end perspective. Did we get it right in the case of traffic engineering? We did what the customers wanted, giving them a tool to manage traffic that wasn’t available previously. Of course, it’s </span><a href="https://hbr.org/2013/01/stop-listening-to-your-custome" rel="">not always a good idea</a><span> to listen to customers, and more isn’t always better. </span><a href="https://www.postel.org/postel.html" rel="">Jon Postel</a><span>, the original RFC editor, put his finger on the issue: </span></p><blockquote><p><em>“[There was] a space that we were exploring and, in the early days, we figured out this consistent path through the space: IP, TCP, and so on. What&#39;s been happening over the last few years is that the IETF is filling the rest of the space with every alternative approach, not necessarily any better.”</em></p></blockquote><p>As one of the people who was “filling the space” at the time, I still don’t know if we made things better by doing so. </p><p><span>Further to our recent post on </span><a href="https://open.substack.com/pub/systemsapproach/p/putting-large-language-models-in?r=cxpek&amp;utm_campaign=post&amp;utm_medium=web" rel="">Large Language Models</a><span>, Donald Michie’s matchbox-based machine learning system of the 1960s is apparently </span><a href="https://www.ed.ac.uk/informatics/60-years-of-computer-science-and-ai/60-years-of-computer-science-and-ai-events/general-public/experimental-life-menace" rel="">being rebuilt</a><span>. And speaking of computing pioneers, the Turing award this year goes to Ethernet inventor (and one-time </span><a href="https://www.ibiblio.org/pjones/ils310/msg00259.html" rel="">Internet skeptic</a><span>) </span><a href="https://awards.acm.org/about/2022-turing" rel="">Bob Metcalfe</a><span>. With Ethernet progressing from 3Mbps in 1973 to 400Gbps today (with no end in sight), Metcalfe certainly has earned his place in networking’s hall of fame.</span></p><p><span>Now that we have made it possible to pay for this newsletter, we’d like to thank the people who have signed up. Perhaps you could try asking your company to reimburse the small subscription fee as a business expense – </span><a href="https://docs.google.com/document/d/1bmYKZ-PtdIcFkbBJCPZm6w-vIt9N1dLZQYGoqHXiX18/edit?usp=sharing" rel="">here is a template</a><span> to help. And don’t forget to </span><a href="https://discuss.systems/@SystemsAppr" rel="">join us on Mastodon</a><span>. </span></p></div></div></div></article></div></div></div>
  </body>
</html>
