<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.openbsd.org/71.html">Original</a>
    <h1>OpenBSD 7.1</h1>
    
    <div id="readability-page-1" class="page">
<h2 id="OpenBSD">
<a href="https://www.openbsd.org/index.html">
<i>Open</i><b>BSD</b></a>
7.1
</h2>

<table>
<tbody><tr>
<td>
<a href="https://www.openbsd.org/images/TheGreatWaveOffCalgary.png">
<img width="227" height="303" src="https://www.openbsd.org/images/TheGreatWaveOffCalgary-s.gif" alt="The Great Wave off Calgary"/></a>
</td><td>
Released Apr 21, 2022. (52nd OpenBSD release)</td></tr></tbody></table>

<hr/>

<section id="new">
<h3>What&#39;s New</h3>
<p>
This is a partial list of new features and systems included in OpenBSD 7.1.
For a comprehensive list, see the <a href="https://www.openbsd.org/plus71.html">changelog</a> leading
to 7.1.

</p><ul>

<li>New/extended platforms:
  <ul>
    <li>Support for Apple Silicon Macs has improved and is ready for general use:
    <ul>
	    <li>Added <a href="https://man.openbsd.org/aplspi.4">aplspi(4)</a>, a driver for the SPI controller found on the Apple M1 SoC.
	    </li><li>Added <a href="https://man.openbsd.org/aplhidev.4">aplhidev(4)</a> support for the keyboard/touchpad on Apple M1 laptops.
	    </li><li>Introduced <a href="https://man.openbsd.org/aplpmgr.4">aplpmgr(4)</a>, a driver for the power management controller found on Apple SoCs.
	    </li><li>Introduced <a href="https://man.openbsd.org/aplmbox.4">aplmbox(4)</a>, a driver for the mailbox that provides a communication channel with additional cores integrated on Apple SoCs.
	    </li><li>Introduced <a href="https://man.openbsd.org/apliic.4">apliic(4)</a>, a driver for the I2C controller found on Apple SoCs.
	    </li><li>Added the chip ids used on Apple M1 Pro/Max and Apple T2 Macs to <a href="https://man.openbsd.org/bwfm.4">bwfm(4)</a>.
	    </li><li>Rewrote arm64 kernel FPU handling code to fix the random crashes seen with SMP kernels on Apple M1.
	    </li><li>Restricted the <a href="https://man.openbsd.org/pci.4">pci(4)</a> ioctl interface to devices detected by the kernel, preventing Xorg PCI probes from breaking the WiFi chip on M1 macs.
	    </li><li>Introduced <a href="https://man.openbsd.org/aplsmc.4">aplsmc(4)</a>, a driver for the SMC found on Apple M1 SoCs.
	    </li><li>Introduced <a href="https://man.openbsd.org/aplnco.4">aplnco(4)</a>, a driver for the Numerically-controlled oscillator (NCO) clock which drives the audio clocks on Apple silicon.
	    </li><li>Introduced <a href="https://man.openbsd.org/tascodec.4">tascodec(4)</a>, a driver for the TI TAS2770/TAS5770 digital audio amplifier codec found on Apple M1 Macs.
	    </li><li>Introduced <a href="https://man.openbsd.org/apldma.4">apldma(4)</a>, a driver for the DMA controller found on Apple SoCs.
	    </li><li>Added support to explicitly power on some PCIe devices on the M1 and M1 Pro/Max through a GPIO controlled by the SMC.
	    </li><li>Added <a href="https://man.openbsd.org/aplcpu.4">aplcpu(4)</a>, a driver to control the CPU performance levels on Apple SoCs.
	    </li><li>Modified <a href="https://man.openbsd.org/aplintc.4">aplintc(4)</a> to support a newer interrupt controller, making OpenBSD run on M1 Pro/Max machines.
	    </li><li>Added nvmem support to <a href="https://man.openbsd.org/aplpmu.4">aplpmu(4)</a> and made it available on Apple SPMI PMUs.
	    </li><li>Added RTC support to <a href="https://man.openbsd.org/aplsmc.4">aplsmc(4)</a>.
	    </li><li>Made the arm64 ramdisk installer fetch <a href="https://man.openbsd.org/bwfm.4">bwfm(4)</a> firmware from the EFI System Partition on Apple Silicon devices for use during installation and addition to the newly installed system.
	    </li><li>Added support for controlling keyboard LEDs to <a href="https://man.openbsd.org/aplhidev.4">aplhidev(4)</a>.	
	    </li><li>Added basic GPIO support to <a href="https://man.openbsd.org/aplsmc.4">aplsmc(4)</a>.
	    </li><li>Ensured <a href="https://man.openbsd.org/apldart.4">apldart(4)</a> keeps the DART enabled in front of the display controller to preserve its access to the framebuffer and continued display.
	    </li><li>Fixed reading motherboard time on Apple machines with old SMC firmware.
	    </li><li>Implemented reboot/powerdown support in <a href="https://man.openbsd.org/aplsmc.4">aplsmc(4)</a>.
	    </li><li>Implemented <a href="https://man.openbsd.org/aplintc.4">aplintc(4)</a> support for multiple dies, making OpenBSD work on the M1 Ultra.
    </li></ul>
    </li><li>Support for other <a href="https://www.openbsd.org/arm64.html">arm64</a> architecture hardware was also improved with the following changes:
    <ul>
	<li>Introduced <a href="https://man.openbsd.org/gpiocharger.4">gpiocharger(4)</a>, a
		driver providing support for battery chargers connected to GPIO pins,
		such as those found on the Pinebook Pro.
	</li><li>Introduced <a href="https://man.openbsd.org/gpioleds.4">gpioleds(4)</a> for arm64, a
		driver providing support for LEDs connected to GPIO pins, such as
		those found on the Pinebook Pro.
	</li><li>Added <a href="https://man.openbsd.org/gpiokeys.4">gpiokeys(4)</a>
		for arm64, a driver which handles events triggered by GPIO keys such
		as lid status and power button.
	</li><li>Added pclk clock used by <a href="https://man.openbsd.org/dwdog.4">dwdog(4)</a> on RK3399 to <a href="https://man.openbsd.org/rkclock.4">rkclock(4)</a>.
	</li><li>Introduced <a href="https://man.openbsd.org/mpfclock.4">mpfclock(4)</a>, a driver
		for the PolarFire SoC MSS clock controller.
	</li><li>Introduced <a href="https://man.openbsd.org/cdsdhc.4">cdsdhc(4)</a>, a driver for
		the Cadence SD/SDIO/eMMC host controller.
	</li><li>Introduced <a href="https://man.openbsd.org/mpfiic.4">mpfiic(4)</a>, a driver for
		the PolarFire SoC MSS I2C controller.
	</li><li>Introduced <a href="https://man.openbsd.org/mpfgpio.4">mpfgpio(4)</a>, a driver for
		the PolarFire SoC MSS GPIO controller.
	</li><li>Enabled <a href="https://man.openbsd.org/cduart.4">cduart(4)</a>
		on arm64.
	</li><li>Added <a href="https://man.openbsd.org/mvpinctrl.4">mvpinctrl(4)</a> support
		for the CP115 block found on Marvell CN9K SoCs.
	</li><li>Added <a href="https://man.openbsd.org/mvclock.4">mvclock(4)</a>
		support for the AP807 block found on Marvell CN9K SoCs.
    </li></ul>
    </li><li>Changes on other architectures:
    <ul>
	<li>Enabled <a href="https://man.openbsd.org/uhid.4">uhid(4)</a>/<a href="https://man.openbsd.org/fido.4">fido(4)</a> on riscv64.
	</li><li>Allowed riscv64 installation on a disk with a GPT.
	</li><li>Added missing locking to <a href="https://man.openbsd.org/pmap_extract.9">pmap_extract(9)</a> and
		<a href="https://man.openbsd.org/pmap_unwire.9">pmap_unwire(9)</a> on
		arm64 and riscv64.
	</li><li>Improved stack unwinding on riscv64 in <a href="https://man.openbsd.org/ddb.4">ddb(4)</a>.
	</li><li>Fixed kernel stack alignment on riscv64.
	</li><li>Fixed RISC-V lld link code when dealing with object files created with &#34;ld -b&#34;.
	</li><li>Made sure nothing can map address zero on RISC-V.
	</li><li>Made sure armv7,arm64 and risc-v FDT bootloader code does not write beyond the FDT data structure.
	</li><li>Fixed booting from an IDE block device on the Sun Blade 100.
	</li><li>Fixed <a href="https://man.openbsd.org/radeondrm.4">radeondrm(4)</a> console colors on sparc64.
	</li><li>Enabled <a href="https://man.openbsd.org/dt.4">dt(4)</a> on
		macppc.
	</li><li>Increased <a href="https://man.openbsd.org/ddb.1">ddb(1)</a>
		access to registers on macppc and powerpc64.
	</li><li>Enabled enforcing of RLIMIT_MEMLOCK on powerpc64.
	</li><li>Allowed <a href="https://man.openbsd.org/ddb.4">ddb(4)</a> trace
		through interrupt on macppc.
  </li></ul>
</li></ul>

</li><li>Various kernel improvements:
  <ul>
	<li>Made futexes work in shared anonymous memory.
	</li><li>Improved tracking of mbuf memory usage in the whole system.
	</li><li>Switched to using long filenames by default with <a href="https://man.openbsd.org/mount_msdos.8">mount_msdos(8)</a>.
	</li><li>Fixed memory leak in <a href="https://man.openbsd.org/fuse.4">fuse(4)</a> when calling <a href="https://man.openbsd.org/namei.9">namei(9)</a>.

	</li><li>Fixed establishing legacy INTx interrupts on machines without a
		(usable) MSI interrupt controller.
	</li><li>Cleaned up irrelevant uses of 3rd mode_t parameter for <a href="https://man.openbsd.org/open.2">open(2)</a>/<a href="https://man.openbsd.org/openat.2">openat(2)</a>, unused when not
		creating files.
	</li><li>Reworked garbage collector for <a href="https://man.openbsd.org/unix.4">unix(4)</a> sockets to prevent
		potential kernel panics.
	</li><li>Changed the power management <a href="https://man.openbsd.org/sysctl.8">sysctl(8)</a>
		hw.perfpolicy to &#34;auto&#34; at startup, defaulting to 100%
		performance with AC power connected and using the auto algorithm when
		on battery.
	</li><li>Aligned memory allocation for USB device drivers and USB HC
		drivers, enlarging the USB memory pool.
	</li><li>Prevent panic in <a href="https://man.openbsd.org/softraid.4">softraid(4)</a> while
		rebooting if softraid has been disabled.

	</li><li>Fixed hibernate setups where removal of a <a href="https://man.openbsd.org/umass.4">umass(4)</a> device results in
		a renumbered <a href="https://man.openbsd.org/softraid.4">softraid(4)</a> boot device.
	</li><li>Fix hibernate on newer hardware by allowing more memory ranges.
	</li><li>If CPU sleep state S4 is not available, use S5 for the
		ACPI-transitions in hibernate support.
	</li><li>Added code to update hw.power whenever AC state changes on
		resume.
	</li><li>Fixed a panic by prohibiting renames of tmpfs mount-points.
	</li><li>Fixed double free after allocation failure in <a href="https://man.openbsd.org/bpf.4">bpf(4)</a>.
  </li></ul>

</li><li>SMP Improvements
  <ul>
	<li>Made pipe event filters MP-safe.
	</li><li>Set klist lock for sockets to make socket event filters MP-safe.
	</li><li>Implemented <a href="https://man.openbsd.org/poll.2">poll(2)</a>,
		<a href="https://man.openbsd.org/select.2">select(2)</a>, <a href="https://man.openbsd.org/ppoll.2">ppoll(2)</a> and <a href="https://man.openbsd.org/pselect.2">pselect(2)</a> on top of
		kqueue.
	</li><li>Unlocked top part of UVM fault handler on mips64.
	</li><li>Unlocked the <a href="https://man.openbsd.org/kevent.2">kevent(2)</a> system call.
	</li><li>Made the kqread event filter MP-safe.
	</li><li>Reduced the time overhead of <a href="https://man.openbsd.org/kqueue.2">kqueue(2)</a>-based <a href="https://man.openbsd.org/poll.2">poll(2)</a> and <a href="https://man.openbsd.org/select.2">select(2)</a> systems calls by
		keeping knotes between the system calls.
	</li><li>Unlocked <a href="https://man.openbsd.org/accept.2">accept(2)</a>
		and <a href="https://man.openbsd.org/accept4.2">accept4(2)</a>
		syscalls.
	</li><li>Prevented <a href="https://man.openbsd.org/select.2">select(2)</a> from blocking if
		registering found pending events.
	</li><li>Protected <a href="https://man.openbsd.org/ipsec.4">ipsec(4)</a>
		input and output with the kernel lock to allow forwarding of non-ipsec
		traffic in parallel.
	</li><li>Unlocked the bottom part of the uvm fault handler.
	</li><li>Unlocked <a href="https://man.openbsd.org/getpeername.2">getpeername(2)</a>.
	</li><li>Made <a href="https://man.openbsd.org/bpf.4">bpf(4)</a> MP-safe.
	</li><li>Implemented the <a href="https://man.openbsd.org/poll.2">poll(2)</a> system call on top
		of the <a href="https://man.openbsd.org/kqueue.2">kqueue(2)</a>
		subsystem, obsoleting the old, non-MP-safe poll backend.
	</li><li>Made <a href="https://man.openbsd.org/audio.4">audio(4)</a> event filters MP-safe.
	</li><li>Unlocked <a href="https://man.openbsd.org/getsockname.2">getsockname(2)</a>.
	</li><li>Added kernel interfaces for atomic load and store functions for int and long to be used in reference counted struct members.
  </li></ul>

</li><li>Direct Rendering Manager
  <ul>
	<li>Updated <a href="https://man.openbsd.org/drm.4">drm(4)</a>
	    to Linux 5.15.26
	</li><li><a href="https://man.openbsd.org/inteldrm.4">inteldrm(4)</a>:
	    support for Elkhart Lake, Jasper Lake, Rocket Lake
	</li><li><a href="https://man.openbsd.org/drm.4">amdgpu(4)</a>:
	    support for Van Gogh APU, Rembrandt &#34;Yellow Carp&#34; Ryzen 6000 APU,
	    Navi 22 &#34;Navy Flounder&#34;, Navi 23 &#34;Dimgrey Cavefish&#34;,
	    Navi 24 &#34;Beige Goby&#34;
  </li></ul>

</li><li>VMM/VMD improvements
  <ul>
	<li>Retired <a href="https://man.openbsd.org/OpenBSD-7.0/switch.4">
	    switch(4)</a> support in <a href="https://man.openbsd.org/vmd.8">
	    vmd(8)</a>.
	</li><li>Fixed a bug where <a href="https://man.openbsd.org/vmd.8">vmd(8)</a>
	    would exit when requesting a new VM and hitting memory resource
	    limits.
	</li><li>Fixed <a href="https://man.openbsd.org/vmm.4">vmm(4)</a> state
	    corruption on Intel hosts.
	</li><li>Fixed <a href="https://man.openbsd.org/vmm.4">vmm(4)</a> cpuid leaf
	    clamping when the host has an invariant TSC.
	</li><li>Added quiesce/wakeup hooks to <a href="https://man.openbsd.org/vmm.4">
	    vmm(4)</a> allowing Intel hosts to suspend and hibernate safely with
	    running guests.
	</li><li>Added a new login class for <a href="https://man.openbsd.org/vmd.8">
	    vmd(8)</a> on amd64.
	</li><li>Fixed broken <a href="https://man.openbsd.org/vmd.8">vmd(8)</a>
		&#34;boot device cdrom&#34; feature after a fix in seabios.
	</li><li>Reintroduced support for <a href="https://man.openbsd.org/vmctl.8">vmctl(8)</a> <code>start -B net
		-b bsd.rd</code>, which emulates a PXE boot and performs an
		autoinstall.
	</li><li>Made <a href="https://man.openbsd.org/vmm.4">vmm(4)</a> <a href="https://man.openbsd.org/dt.4">dt(4)</a> tracepoints amd64-only.
  </li></ul>

</li><li>Various new userland features:
  <ul>
	<li>Added <a href="https://man.openbsd.org/realpath.1">realpath(1)</a>, a wrapper
		for <a href="https://man.openbsd.org/realpath.3">realpath(3)</a> for
		use in ports.
	</li><li>Added <a href="https://man.openbsd.org/rcctl.8">rcctl(8)</a> &#34;ls
		rogue&#34; to show daemons which are running but not set as &#34;enabled&#34; in
		<a href="https://man.openbsd.org/rc.conf.local.8">rc.conf.local(8)</a>.
	</li><li>Implemented probe variables in BPFtrace (<a href="https://man.openbsd.org/bt.5">bt(5)</a>).
	</li><li>Provided common <a href="https://man.openbsd.org/btrace.8">btrace(8)</a> scripts
		kprofile.bt (to save kernel stackframes and produce flamegraphs) and
		runqlat.bt (to measure the latency of the scheduler runqueues).
	</li><li>DNSSEC support: Implemented RFC6840 (AD flag processing) in the libc resolver, if
		using trusted name servers specified with &#39;trust-ad&#39; in <a href="https://man.openbsd.org/resolv.conf.5">resolv.conf(5)</a>
	</li><li>Enabled support for displaying an estimated battery recharge time
		in <a href="https://man.openbsd.org/apm.8">apm(8)</a> and <a href="https://man.openbsd.org/apmd.8">apmd(8)</a>.
	</li><li>Introduced support for storing capability databases in
		/etc/login.conf.d, allowing easy addition of custom login classes from
		packages and made <a href="https://man.openbsd.org/rcctl.8">rcctl(8)</a> look for the login
		class in both login.conf and login.conf.d/${class}.
	</li><li>Added a <a href="https://man.openbsd.org/malloc.3">malloc(3)</a>
		cache of regions between 128k and 2M to accommodate programs
		allocating and deallocating regions of these sizes quickly.
`	</li><li>Added <a href="https://man.openbsd.org/pax.1">pax(1)</a> support
		for mtime/atime/ctime extended headers (in not-SMALL builds).
	</li><li>Added -k flag to <a href="https://man.openbsd.org/gzip.1">gzip(1)</a> and <a href="https://man.openbsd.org/gunzip.1">gunzip(1)</a> to retain
		(de)compressed file.
	</li><li>Implemented <a href="https://man.openbsd.org/openrsync.1">openrsync(1)</a> --compare-dest, allowing specification of additional directories to check for files to be available.
	</li><li>Implemented <a href="https://man.openbsd.org/openrsync.1">openrsync(1)</a> --max-size and --min-size.
  </li></ul>

</li><li>Various bugfixes and tweaks in userland:
  <ul>
	<li>Reliability and performance of
		<a href="https://man.openbsd.org/pkg_add.1">pkg_add(1)</a>:
		fixed a bug which resulted in a &#34;XXX&#34; warning for
		&#34;shouldn&#39;t ever happen&#34; situations in a scenario that
		was actually harmless.
		Also, massive improvement of performances in scenarios like
		texlive updates, by reducing filesystem names churn when
		updated files didn&#39;t change.
	</li><li>Enabled subpixel rendering in FreeType.
	</li><li>Updated xorg-server to 21.1.3, leaving in place an earlier change
		to compute the screen resolution from dimensions returned by the
		screen, reverted by upstream.
	</li><li>Allowed bare numbers for key and mouse bindings in <a href="https://man.openbsd.org/cwm.1">cwm(1)</a>.
	</li><li>Added a <a href="https://man.openbsd.org/cwm.1">cwm(1)</a>
		&#34;group-last&#34; command that shows only the previously active group.
	</li><li>Fixed glass console and <a href="https://man.openbsd.org/getty.8">getty(8)</a> interference with Xorg on arm64.

	</li><li>Fixed octal escape parsing in <a href="https://man.openbsd.org/tr.1">tr(1)</a> backslash().
	</li><li>Added <a href="https://man.openbsd.org/uniq.1">uniq(1)</a>
		support for arbitrarily long input lines.
	</li><li>Made <a href="https://man.openbsd.org/uniq.1">uniq(1)</a> ignore
		trailing newlines when comparing lines.
	</li><li>Made <a href="https://man.openbsd.org/uniq.1">uniq(1)</a> skip()
		each input line only once, improving performance.
	</li><li>Increased <a href="https://man.openbsd.org/tee.1">tee(1)</a> I/O
		buffer size from 8KB to 64KB.
	</li><li>Improved performance of <a href="https://man.openbsd.org/rev.1">rev(1)</a>.
	</li><li>Made <a href="https://man.openbsd.org/ed.1">ed(1)</a> flush all
		stdio streams before running a shell command.
	</li><li>Prevented a file descriptor leak in <a href="https://man.openbsd.org/touch.1">touch(1)</a> after <a href="https://man.openbsd.org/futimens.2">futimens(2)</a> failure.
	</li><li>Added <a href="https://man.openbsd.org/seq.1">seq(1)</a>, a
		command to print sequences of numbers.

	</li><li>Set cpuspeed to 0 in <a href="https://man.openbsd.org/apm.8">apm(8)</a> when hw.cpuspeed
		cannot be retrieved.

	</li><li>Copied the <a href="https://man.openbsd.org/cos.3">cos(3)</a>
		cosine software implementation from FreeBSD-13, and disabled assembly
		implementations of trig functions on x86 platforms.
	</li><li>Added optimization for tiny x in <a href="https://man.openbsd.org/cos.3">cos(3)</a> and <a href="https://man.openbsd.org/sin.3">sin(3)</a> trigonometry
		functions.

	</li><li>Switched <a href="https://man.openbsd.org/aucat.1">aucat(1)</a>
		internal sample representation and default file encoding to 24-bit.
	</li><li>Switched <a href="https://man.openbsd.org/sndiod.8">sndiod(8)</a>
		internal sample representation to 24-bit fixed point.

	</li><li>Allowed passing a different signal than SIGTERM in the default
		rc_stop() function in <a href="https://man.openbsd.org/rc.subr.8">rc.subr(8)</a>.
	</li><li>Improved and simplified timer handling in <a href="https://man.openbsd.org/rc.d.8">rc.d(8)</a> &#34;stop&#34; and &#34;reload&#34;.

	</li><li>Made <a href="https://man.openbsd.org/fdisk.8">fdisk(8)</a>
		-b available on all architectures.
	</li><li>Removed the constraint that <a href="https://man.openbsd.org/fdisk.8">fdisk(8)</a> -b block
		count and block offset must be greater than 63.
	</li><li>Made <a href="https://man.openbsd.org/fdisk.8">fdisk(8)</a> -b
		partitions other than EFI System partitions DOSACTIVE.
	</li><li>Switched to using <a href="https://man.openbsd.org/fdisk.8">fdisk(8)</a> -b to create boot
		partitions on multiple architectures.
	</li><li>Removed <a href="https://man.openbsd.org/fdisk.8">fdisk(8)</a>
		&#34;disk&#34; editing command.
	</li><li>Prevented <a href="https://man.openbsd.org/fdisk.8">fdisk(8)</a>
		from initializing an MBR to have overlapping partitions 0 and 3.
	</li><li>Allowed <a href="https://man.openbsd.org/fdisk.8">fdisk(8)</a> to
		extend the default OpenBSD partition to the end of the disk, rather
		than truncating at the end of the last full cylinder.
	</li><li>Corrected GPT checksums written by <a href="https://man.openbsd.org/fdisk.8">fdisk(8)</a> on big-endian
		architectures to be little-endian as per spec.
	</li><li>Made <a href="https://man.openbsd.org/fdisk.8">fdisk(8)</a> -A
		preserve BIOS boot partition.
	</li><li>Made <a href="https://man.openbsd.org/fdisk.8">fdisk(8)</a> -A
		preserve the EFI System partition on GPT disks with Apple APFS partitions.
	</li><li>Removed the builtin MBR from <a href="https://man.openbsd.org/fdisk.8">fdisk(8)</a>.
	</li><li>Removed the &#34;rpath&#34; and &#34;wpath&#34; pledges from <a href="https://man.openbsd.org/fdisk.8">fdisk(8)</a>.
	</li><li>Ensured <a href="https://man.openbsd.org/fdisk.8">fdisk(8)</a>
		creates the default OpenBSD MBR partition only when there is space for it.
	</li><li>Ensured <a href="https://man.openbsd.org/fdisk.8">fdisk(8)</a>
		does not set MBR DOSACTIVE flag on unused partitions when initializing MBR.
	</li><li>Reduced the alignment space <a href="https://man.openbsd.org/fdisk.8">fdisk(8)</a>
		inserts before the start of the default OpenBSD partition.

	</li><li>Merged bugfixes from upstream into <a href="https://man.openbsd.org/less.1">less(1)</a> including fixes for
		the prompt hiding feature (CTRL-P) and an integer overflow.
	</li><li>Fixed possible use after free with long lines in <a href="https://man.openbsd.org/less.1">less(1)</a>.
	</li><li>Fixed file descriptor leak of /dev/tty on <a href="https://man.openbsd.org/doas.1">doas(1)</a> auth failure.
	</li><li>Replaced <a href="https://man.openbsd.org/lrint.3">lrint(3)</a>,
		<a href="https://man.openbsd.org/lrintf.3">lrintf(3)</a>, <a href="https://man.openbsd.org/llrint.3">llrint(3)</a> and <a href="https://man.openbsd.org/llrintf.3">llrintf(3)</a>
		implementations from NetBSD with the existing FreeBSD implementations
		we were already using for <a href="https://man.openbsd.org/lrintl.3">lrintl(3)</a> and <a href="https://man.openbsd.org/llrintl.3">llrintl(3)</a>.
	</li><li>In various games, call <a href="https://man.openbsd.org/pledge.2">pledge(2)</a>
		later to prevent it from killing various games using ncurses when both
		stdout and stderr are redirected to a non-tty.
	</li><li>Switched LLD_ARCHs (architectures using the LLVM <a href="https://man.openbsd.org/ld.lld.1">ld.lld(1)</a> linker) to also
		user the LLVM archiver <a href="https://man.openbsd.org/llvm-ar.1">llvm-ar(1)</a>.
	</li><li>Added openvpn ports (udp/1194 &amp; tcp/1194) to /etc/services.
	</li><li>Prevented an access to uninitialized memory in <a href="https://man.openbsd.org/awk.1">awk(1)</a>.
	</li><li>Fixed <a href="https://man.openbsd.org/vi.1">vi(1)</a> recovery
		mode.
	</li><li>Extended and reordered the process accounting information
		structure <a href="https://man.openbsd.org/acct.5">acct(5)</a>. Flag
		Day for the <a href="https://man.openbsd.org/acct.2">acct(2)</a> file
		format.
	</li><li>Fixed <a href="https://man.openbsd.org/setusercontext.3">setusercontext(3)</a>
		error when /etc/login.conf is not present.
  </li></ul>

</li><li>Improved hardware support and driver bugfixes, including:
  <ul>
	<li>Added support to <a href="https://man.openbsd.org/pchgpio.4">pchgpio(4)</a> for Cannon
		Lake H and Tiger Lake H platforms.
	</li><li>Ensured use of the correct encoding in xenocara when /etc/kbdtype
		is present with an attached <a href="https://man.openbsd.org/ucc.4">ucc(4)</a> keyboard.
	</li><li>Added support for tpm2 CRB interface to <a href="https://man.openbsd.org/tpm.4">tpm(4)</a>, fixing recent S4
		regressions on the Surface Go 2 caused by a firmware change.
`	</li><li>Ensured armv7 and arm64 efiboot allocate fresh memory for the
		device tree with at least one page of free space to extend into. This
		fixes booting on VMWare Fusion.
	</li><li>Stopped binding audio devices exposed by <a href="https://man.openbsd.org/sndiod.8">sndiod(8)</a> to physical
		devices. <!-- XXX check this -->
	</li><li>Fixed handling of interrupts shared between multiple <a href="https://man.openbsd.org/dwiic.4">swiic(4)</a> devices.
	</li><li>Introduced <a href="https://man.openbsd.org/iicmux.4">iicmux(4)</a>, a driver that
		switches between I2C busses connected to a single I2C controller by
		using the pin muxing facilities of an SoC.
	</li><li>Introduced <a href="https://man.openbsd.org/pcyrtc.4">pcyrtc(4)</a>, a driver for
		the NXP PCF85063A/TP RTC chips.
	</li><li>Fixed a panic when running <a href="https://man.openbsd.org/utvfu.4">utvfu(4)</a> on <a href="https://man.openbsd.org/xhci.4">xhci(4)</a>.
	</li><li>Added <a href="https://man.openbsd.org/acpipci.4">acpipci(4)</a>
		support for interrupts represented by ACPI PCI Interrupt Link Devices,
		making PCI interrupts work on QEMU&#39;s SBSA target.
	</li><li>Added handling of multi-port controllers to <a href="https://man.openbsd.org/uslcom.4">uslcom(4)</a>.
	</li><li>Make <a href="https://man.openbsd.org/com.4">com(4)</a> attach
		over <a href="https://man.openbsd.org/acpi.4">acpi(4)</a> on amd64.
	</li><li>Added address locators for the ACPI &#34;bus&#34; and used these to fix
		the order of the <a href="https://man.openbsd.org/com.4">com(4)</a>
		devices to match the traditional order on the ISA bus.
	</li><li>Added Intel Jasper Lake to the <a href="https://man.openbsd.org/azalia.4">azalia(4)</a> audio driver.
	</li><li>Ensured <a href="https://man.openbsd.org/azalia.4">azalia(4)</a>
		matches on Intel 300 Series audio, fixing attaching on the Dell G3
		3590.
	</li><li>Added Synopsys Designware UART support to <a href="https://man.openbsd.org/com.4">com(4)</a>.
	</li><li>Fixed an issue where <a href="https://man.openbsd.org/com.4">com(4)</a> would attach for a
		disabled serial port leading to misdirection of the hardware variant
		and a subsequent hang when /etc/rc runs <a href="https://man.openbsd.org/ttyflags.8">ttyflags(8)</a> -a.
	</li><li>Fixed <a href="https://man.openbsd.org/sdhc.4">sdhc(4)</a> for
		Jasper Lake eMMC.
	</li><li>Improved how quirks are handled on <a href="https://man.openbsd.org/sdhc.4">sdhc(4)</a>-compatible drivers.
	</li><li>Enabled <a href="https://man.openbsd.org/acpibat.4">acpibat(4)</a> use with the
		Surface Go 3.
	</li><li>Fixed suspend/resume issues with <a href="https://man.openbsd.org/com.4">com(4)</a> at <a href="https://man.openbsd.org/acpi.4">acpi(4)</a>.
	</li><li>Correlated <a href="https://man.openbsd.org/uaudio.4">uaudio(4)</a> and <a href="https://man.openbsd.org/ucc.4">ucc(4)</a> devices
		to adjust the volume of the correct audio device
		rather than the first one attached.
	</li><li>Enabled FIFO support in <a href="https://man.openbsd.org/pluart.4">pluart(4)</a>.
	</li><li>Added support for XBox One game controller.
	</li><li>Stopped suspending the <a href="https://man.openbsd.org/tpm.4">tpm(4)</a> device upon
		hibernation, preventing some systems from hanging when hibernating a
		second time.
	</li><li>Fixed <a href="https://man.openbsd.org/hilkbd.4">hilkbd(4)</a>
		Swedish keyboard layout on non-PS/2 style keyboards.
  </li></ul>

</li><li>New or improved network hardware support:
  <ul>
	<li>Added support to <a href="https://man.openbsd.org/umb.4">umb(4)</a> for SIMCom SIM7600.
	</li><li>Fixed an interrupt storm on <a href="https://man.openbsd.org/dwge.4">dwge(4)</a> variants which
		support Energy Efficient Ethernet when connected to a switch which
		does so as well.
	</li><li>Made <a href="https://man.openbsd.org/dwge.4">dwge(4)</a> and <a href="https://man.openbsd.org/dwxe.4">dwxe(4)</a> MP-safe.</li>
	<li>Added <a href="https://man.openbsd.org/igc.4">igc(4)</a>, a
		driver for the Intel 2.5Gb Ethernet controllers.
	</li><li>Implemented <a href="https://man.openbsd.org/em.4">em(4)</a>
		support for selecting SMGII or SerDes mode depending on the plugged-in
		SFP transceiver and for reading out transceiver information via <a href="https://man.openbsd.org/ifconfig.8">ifconfig(8)</a>.
	</li><li>Enabled hardware vlan tagging for <a href="https://man.openbsd.org/ixl.4">ixl(4)</a>.
	</li><li>Re-enabled <a href="https://man.openbsd.org/ixl.4">ixl(4)</a>
		IPv4, TCP4/6 and UDP4/6 checksum offloading.  \ </li><li>Enabled receive
		checksum offloading on <a href="https://man.openbsd.org/ixl.4">ixl(4)</a>.
	</li><li>Prevented a possible deadlock in <a href="https://man.openbsd.org/cad.4">cad(4)</a>.
	</li><li>Prevented <a href="https://man.openbsd.org/aq.4">aq(4)</a> nics
		from writing to mbufs taken off the ring when the interface was taken
		down.
	</li><li>Fixed receive filter handling and vlan packet reception in <a href="https://man.openbsd.org/aq.4">aq(4)</a>.
	</li><li>Enabled vlan and checksum offloads in <a href="https://man.openbsd.org/aq.4">aq(4)</a>.
	</li><li>Enabled interrupt moderation in <a href="https://man.openbsd.org/aq.4">aq(4)</a>, aiming at around 20k
		per second.
	</li><li>Fixed <a href="https://man.openbsd.org/ure.4">ure(4)</a> vlan
		transmission with hw tagging.
	</li><li>Added preliminary <a href="https://man.openbsd.org/ure.4">ure(4)</a> support for RTL8156B
		and bug fixes for RTL8153/RTL8156.
	</li><li>Reworked <a href="https://man.openbsd.org/ix.4">ix(4)</a>
		checksum/vlan offloading and enabled it for IPv6.
	</li><li>Enabled IP header checksum offloading in <a href="https://man.openbsd.org/ix.4">ix(4)</a>.
	</li><li>Fixed <a href="https://man.openbsd.org/msk.4">msk(4)</a> operation
		after interface state changes.
	</li><li>Enabled <a href="https://man.openbsd.org/vmx.4">vmx(4)</a> on arm64.
  </li></ul>

</li><li>Added or improved wireless network drivers:
  <ul>
	<li>Introduced <a href="https://man.openbsd.org/mtw.4">mtw(4)</a>, a
		driver for MediaTek MT7601U USB wifi devices, enabled on amd64, i386, macppc, and arm64.
	</li><li>Added 802.11n Tx aggregation support to the <a href="https://man.openbsd.org/iwx.4">iwx(4)</a> driver.
	</li><li>Added support for 802.11n 40MHz channels, and 802.11ac 80MHz channels, to the <a href="https://man.openbsd.org/iwm.4">iwm(4)</a> and <a href="https://man.openbsd.org/iwx.4">iwx(4)</a> drivers.
	</li><li>Reset the Tx watchdog timer when a block ack notification is received by
		<a href="https://man.openbsd.org/iwx.4">iwx(4)</a> and <a href="https://man.openbsd.org/iwm.4">iwm(4)</a> firmware to prevent spurios device timeouts.
	</li><li>Prevent invalid net80211 state transitions in the
	        <a href="https://man.openbsd.org/iwm.4">iwm(4)</a> and
		<a href="https://man.openbsd.org/iwx.4">iwx(4)</a> drivers
		to avoid a potential hang.
	</li><li>Fixed a panic when <a href="https://man.openbsd.org/iwx.4">iwx(4)</a> cannot find firmware
		at boot time.
	</li><li>Fixed <a href="https://man.openbsd.org/iwm.4">iwm(4)</a>
		performance drop after roaming between APs in 11n mode.
	</li><li>When roaming with <a href="https://man.openbsd.org/iwm.4">iwm(4)</a> or
	   <a href="https://man.openbsd.org/iwx.4">iwx(4)</a>, keep the old BSSID available for use by firmware
	   commands which tear down device state before switching to the new AP.
	</li><li>Fix race conditions in the <a href="https://man.openbsd.org/iwm.4">iwm(4)</a> and
	   <a href="https://man.openbsd.org/iwx.4">iwx(4)</a> drivers while roaming between APs with
	   outstanding frames on transmit queues.
	</li><li>Reverted to use <a href="https://man.openbsd.org/iwm.4">iwm(4)</a> firmware v17 on Intel
		AC 7265, fixing instability issues on X1 Carbon gen3.
	</li><li>Explicitly stop <a href="https://man.openbsd.org/iwx.4">iwx(4)</a> Rx block ack sessions when
		roaming between access points.
	</li><li>Fixed monitor mode on <a href="https://man.openbsd.org/iwm.4">iwm(4)</a> and <a href="https://man.openbsd.org/iwx.4">iwx(4)</a>.
	</li><li>Let <a href="https://man.openbsd.org/iwx.4">iwx(4)</a> and <a href="https://man.openbsd.org/iwm.4">iwm(4)</a> use per-Tx-queue
		interface timers to ensure the Tx watchdog triggers if a particular Tx queue gets
		stuck.
	</li><li>Switched <a href="https://man.openbsd.org/iwx.4">iwx(4)</a> to new -67 firmware images, and updated <a href="https://man.openbsd.org/iwm.4">iwm(4)</a> 9260 and 9560 firmware, to address INTEL-SA-00509.
	</li><li>Made <a href="https://man.openbsd.org/iwm.4">iwm(4)</a> attach to PCI devices with product ID 0x31dc, part of the 9560 chip family.
	</li><li>Fixed wrong pointer assignment causing the <a href="https://man.openbsd.org/iwx.4">iwx(4)</a>
	driver to read Rx block ack request information from the wrong offset.
	</li><li>Fixed and reenabled use of probe requests during scans on <a href="https://man.openbsd.org/iwm.4">iwm(4)</a> and <a href="https://man.openbsd.org/iwx.4">iwx(4)</a>.
	</li><li>Fixed attach of multiple <a href="https://man.openbsd.org/iwm.4">iwm(4)</a> or <a href="https://man.openbsd.org/iwx.4">iwx(4)</a> interfaces in the same machine.
	</li><li>Fixed <a href="https://man.openbsd.org/iwn.4">iwn(4)</a> with 4965 devices.
	</li><li>Improved roaming stability on <a href="https://man.openbsd.org/iwn.4">iwn(4)</a>, particularly with wpa_supplicant.
	</li><li>Added relicensed wireless firmwares from Realtek for <a href="https://man.openbsd.org/rsu.4">rsu(4)</a>, <a href="https://man.openbsd.org/rtwn.4">rtwn(4)</a> and <a href="https://man.openbsd.org/urtwn.4">urtwn(4)</a> devices, allowing
		these devices to work without requiring a separate firmware download.
	</li><li>Added a workaround for buggy <a href="https://man.openbsd.org/athn.4">athn(4)</a> devices to prevent
		filling up the node cache when used in hostap mode.
	</li><li>Applied a workaround in <a href="https://man.openbsd.org/mvkpcie.4">mvkpcie(4)</a> to fix an
		external abort under load with <a href="https://man.openbsd.org/athn.4">athn(4)</a>.
	</li><li>Made <a href="https://man.openbsd.org/athn.4">athn(4)</a> attach
		to the Sony UWA-BR100.
	</li><li>Fixed &#34;(null node)&#34; panics on <a href="https://man.openbsd.org/run.4">run(4)</a>.
	</li><li>Disabled minimum power consumption in <a href="https://man.openbsd.org/bwfm.4">bwfm(4)</a> hostap mode,
		improving connection reliability when used as an access point.
	</li><li>Added support for the BCM4387 to <a href="https://man.openbsd.org/bwfm.4">bwfm(4)</a>.
	</li><li>Improved TX performance on <a href="https://man.openbsd.org/urtwn.4">urtwn(4)</a> RTL8192EU devices.
	</li><li>Fix TX rate used by <a href="https://man.openbsd.org/rtwn.4">rtwn(4)</a> and <a href="https://man.openbsd.org/urtwn.4">urtwn(4)</a> for RTS frames.
  </li></ul>

</li><li>IEEE 802.11 wireless stack improvements and bugfixes:
  <ul>
	<li>Added an ADDBA_OFFLOAD capability for wifi devices to manage Tx block ack sessions entirely in firmware.
	</li><li>Added support for 40MHz channels to net80211 Tx rate adaptation in 11n mode.
	</li><li>Added monitoring of 20/40MHz channel width changes in beacons sent by our access point, notifying drivers when the channel width has changed.
	</li><li>Introduced an optional background-scan handler for wireless drivers, which drivers can use to take control of the device teardown sequence, ensuring that race conditions between firmware state and net80211 state are avoided.
	</li><li>Taught the net80211 stack to remove corresponding frames from ic_pwrsaveq when a power-saving client decides to leave our hostap interface, preventing a panic in the <a href="https://man.openbsd.org/athn.4">athn(4)</a> driver.
	</li><li>Added initial 802.11ac (VHT) support to the wifi stack.
	</li><li>Made <a href="https://man.openbsd.org/tcpdump.8">tcpdump(8)</a> show 802.11ac VHT capability and operation IEs with the IEEE802_11_RADIO data link type (-y) in verbose (-v) mode.
	</li><li>Added 802.11ac/VHT TX rate adaptation support to net80211.
	</li><li>When choosing networks during SSID selection, give a higher score to 11ac and 11n access points, prioritizing 11ac.
	</li><li>When choosing from a set of access points for a given SSID, prefer APs on 5GHz channels over APs on 2GHz channels. This was already supposed to happen in earlier OpenBSD releases but did not always work as intended.
  </li></ul>

</li><li>Generic network stack improvements and bugfixes:
  <ul>
	<li>Fixed <a href="https://man.openbsd.org/pfctl.8">pfctl(8)</a> $nr incorrect macro expansion.
	</li><li>Fixed <a href="https://man.openbsd.org/pfctl.8">pfctl(8)</a> rdr-to rules failing on certain port ranges when explicitly specified.
	</li><li>Ensured the <a href="https://man.openbsd.org/pf.4">pf(4)</a> &#34;set prio&#34; values are checked consistently.
	</li><li>Made &#34;set skip on ...&#34; in <a href="https://man.openbsd.org/pf.conf.5">pf.conf(5)</a> dynamic, with
		this, &#34;set skip&#34; can be used on interfaces that are not configured
		yet.
	</li><li>Protected <a href="https://man.openbsd.org/pfsync.4">pfsync(4)</a> tdb flags and
		lists with a mutex to prevent crashes involving pfsync, IPsec and
		parallel forwarding.

	</li><li>Added support for PPP IPCP extensions for DNS to <a href="https://man.openbsd.org/sppp.4">sppp(4)</a>.
	</li><li>Added display of DNS information from <a href="https://man.openbsd.org/sppp.4">sppp(4)</a> to <a href="https://man.openbsd.org/ifconfig.8">ifconfig(8)</a>.
	</li><li>Switched to calculating <a href="https://man.openbsd.org/pppoe.4">pppoe(4)</a> session duration
		using system uptime rather than UTC.

	</li><li>Fixed <a href="https://man.openbsd.org/veb.4">veb(4)</a> vport
		handling to prevent improper drop of packets leaving a vport
		interface.
	</li><li>Prevented tweaks to <a href="https://man.openbsd.org/tun.4">tun(4)</a> if_flags when the
		NET_LOCK isn&#39;t held.
	</li><li>Prevented reopening of <a href="https://man.openbsd.org/tun.4">tun(4)</a>/<a href="https://man.openbsd.org/tap.4">tap(4)</a> interfaces which are
		being destroyed.
	</li><li>Rewrote <a href="https://man.openbsd.org/vxlan.4">vxlan(4)</a> to
		operate independently of <a href="https://man.openbsd.org/bridge.4">bridge(4)</a>, create and bind
		udp sockets and prevent loops.
	</li><li>Stopped hiding the mtu on &#34;bridge&#34; interfaces which do handle l3
		traffic in <a href="https://man.openbsd.org/ifconfig.8">ifconfig(8)</a>.
	</li><li>Added mbuf tags to prevent output loops in <a href="https://man.openbsd.org/etherip.4">etherip(4)</a>.
	</li><li>Added rtable capability to <a href="https://man.openbsd.org/login.conf.5">login.conf(5)</a>,
		allowing to specify the rtable a process uses.
	</li><li>Made <a href="https://man.openbsd.org/su.1">su(1)</a> honor the
		login class routing table when doing a full login with su -l.
	</li><li>Fix IP output routines on raw sockets so route sourceaddr can
		take effect using <a href="https://man.openbsd.org/sendto.2">sendto(2)</a> or similar.
	</li><li>Ensured <a href="https://man.openbsd.org/pcap_lookupdev.3">pcap_lookupdev(3)</a>
		matches only on complete interface names.
  </li></ul>

</li><li>Installer and upgrade improvements:
  <ul>
	<li>Corrected installer to understand &#34;inet autoconf&#34; properly in <a href="https://man.openbsd.org/hostname.if.5">hostname.if(5)</a> files.
	</li><li>Stopped prompting whether to fall back to HTTP in the installer,
		making the fallback automatic.
	</li><li>Used <a href="https://man.openbsd.org/ifconfig.8">ifconfig(8)</a>
		&#34;join&#34; command by default in <a href="https://man.openbsd.org/hostname.if.5">hostname.if(5)</a> files,
		replacing the old &#34;nwid&#34;.
	</li><li>Replace custom bootloader installation code with <a href="https://man.openbsd.org/installboot.8">installboot(8)</a> on
		riscv64 and armv7 architecture installations.
	</li><li>New logic for <a href="https://man.openbsd.org/pkg_add.1">pkg_add(1)</a> to avoid
		excessive moving of files during updates when possible.
	</li><li>Documented OpenBSD installation and upgrade customization using the <a href="https://man.openbsd.org/install.site.5">install.site(5)</a> file.
	</li><li>Corrected &#34;!&#34; escape handling in the installer when accepting WEP/WPA passphrase.
	</li><li>Prevented a potential race which could make <a href="https://man.openbsd.org/umount.8">umount(8)</a> fail spuriously
		in the installer.
	</li><li>Made <a href="https://man.openbsd.org/config.8">config(8)</a> -e
		work with ramdisk kernels.
	</li><li>Made <a href="https://man.openbsd.org/config.8">config(8)</a> -c
		cmdfile use lines from the command file for all input, not just
		commands. This allows complex actions like changing device parameters.
	</li><li>Ensured that an interrupted arm64 install from the ramdisk kernel
		can be restarted.
	</li><li>Made redistributable firmwares available across all architectures.
	</li><li>Returned to a shell-script based <a href="https://man.openbsd.org/fw_update.8">fw_update(8)</a>, written
		to be usable by the install script, allowing earlier retrieval of
		downloaded firmwares.
	</li><li>Stopped <a href="https://man.openbsd.org/fw_update.8">fw_update(8)</a> from
		downloading SHA256.sig when not needed, to allow installing local
		files without network access.
	</li><li>Modified the installer to use <a href="https://man.openbsd.org/fw_update.8">fw_update(8)</a> to install
		non-free firmware files if present on the install media.
	</li><li>Made <a href="https://man.openbsd.org/fw_update.8">fw_update(8)</a>
		re-download existing files with failed checksums.
	</li><li>Made <a href="https://man.openbsd.org/fw_update.8">fw_update(8)</a> use the
		/snapshots directory only on -current snapshot installations.
  </li></ul>

</li><li>Security improvements:
  <ul>
	<li>Clear the length of keys in <a href="https://man.openbsd.org/vnconfig.8">vnconfig(8)</a> alongside keys themselves.
	</li><li>Removed hifn(4), safe(4) and ubsec(4) crypto drivers.
	</li><li>Added call to <a href="https://man.openbsd.org/unveil.2">unveil(2)</a> to restrict <a href="https://man.openbsd.org/stty.1">stty(1)</a> -f filesystem access.
	</li><li>Disabled <a href="https://man.openbsd.org/xterm.1">xterm(1)</a> mouse tracking by default.
	</li><li>On arm64 architectures, use &#34;rng-seed&#34; and &#34;kaslr-seed&#34; properties from the device tree to mix extra entropy into the random pool.
	</li><li>Made <a href="https://man.openbsd.org/apmd.8">apmd(8)</a> replace /etc/random.seed for hibernate-resumes.
	</li><li>Restricted <a href="https://man.openbsd.org/usbhidctl.1">usbhidctl(1)</a> and <a href="https://man.openbsd.org/usbhidaction.1">usbhidaction(1)</a> file
		system access with <a href="https://man.openbsd.org/unveil.2">unveil(2)</a>.
	</li><li>Added <a href="https://man.openbsd.org/ps.1">ps(1)</a> status flag &#34;c&#34; to indicate a process is chrooted.
	</li><li>In <a href="https://man.openbsd.org/rpc.rusersd.8">rpc.rusersd(8)</a> <a href="https://man.openbsd.org/unveil.2">unveil(2)</a> &#34;/dev&#34; read-only
		instead of using <a href="https://man.openbsd.org/chroot.2">chroot(2)</a>.
  </li></ul>

</li><li>Routing daemons and other userland network improvements:
  <ul>

	<li><i>switchd(8)</i>, the software-defined networking (SDN) sflow
		controller was removed. While interesting the OpenFlow implementation
		never managed to really get into a usable state.
	</li><li>Switched <a href="https://man.openbsd.org/nsd.8">nsd(8)</a> to enable default DNS cookies on, matching behavior as released in OpenBSD 7.0.
	</li><li>Ensured enabled resolvers are honored by <a href="https://man.openbsd.org/unwind.8">unwind(8)</a> to keep unused forwarders disabled properly.
	</li><li>Installed missing scope identifiers for IPv6 link-local addresses for <a href="https://man.openbsd.org/unwind.8">unwind(8)</a> and <a href="https://man.openbsd.org/resolvd.8">resolvd(8)</a>.
	</li><li>Allowed interface names as scope-id in IPv6 link-local addresses in <a href="https://man.openbsd.org/unbound.8">unbound(8)</a>.
	</li><li>Let <a href="https://man.openbsd.org/unwind.8">unwind(8)</a> probe for DNS64 presence with an absolute name, so asr doesn&#39;t add search domains and retry.
	</li><li>Stopped duplicating &#34;Connection: close&#34; headers in <a href="https://man.openbsd.org/relayd.8">relayd(8)</a>, only adding it if it&#39;s not a websocket response.
	</li><li>Modified <a href="https://man.openbsd.org/syslog.conf.5">syslog.conf(5)</a> examples to use TLS rather than the plaintext protocols.
	</li><li>Stopped ignoring <a href="https://man.openbsd.org/carp.4">carp(4)</a> interfaces in <a href="https://man.openbsd.org/dhcpleased.8">dhcpleased(8)</a>.
	</li><li>Made the <a href="https://man.openbsd.org/dhcpleased.8">dhcpleased(8)</a> host name DHCP option configurable.
	</li><li>Prevented a crash in <a href="https://man.openbsd.org/slaacd.8">slaacd(8)</a> due to updating an interface which no longer exists.
	</li><li>Prevented a potential crash when <a href="https://man.openbsd.org/slaacd.8">slaacd(8)</a> receives more than 7 nameservers.
	</li><li>Fixed crash in <a href="https://man.openbsd.org/slaacd.8">slaacd(8)</a> when receiving a negative length field for DNS labels.
	</li><li>Fix <a href="https://man.openbsd.org/unveil.2">unveil(2)</a> in <a href="https://man.openbsd.org/ldapd.8">ldapd(8)</a>, create permissions are required for databases.
	</li><li>Made <a href="https://man.openbsd.org/dhcpd.8">dhcpd(8)</a> start listening on interface in &#39;down&#39; state. Interfaces can come up later, at which point dhcpd(8) will start receiving packets.
	</li><li>Added a basic printer for EAPOL packets to <a href="https://man.openbsd.org/tcpdump.8">tcpdump(8)</a>.
	</li><li>Made <a href="https://man.openbsd.org/ping.8">ping(8)</a> print out the source address and sequence number when the signature on an icmp echo reply doesn&#39;t match.
	</li><li>Rate limit <a href="https://man.openbsd.org/rad.8">rad(8)</a> router advertisements according to RFC 4861.

	</li><li>In <a href="https://man.openbsd.org/smtpd.8">smtpd(8)</a>,
	<ul>
	    <li>Stop verifying the cert or CA for a relay using opportunistic TLS.
	    </li><li>Enabled TLS verify by default for outbound &#34;smtps://&#34; and &#34;smtp+tls://&#34;, restoring documented <a href="https://man.openbsd.org/smtpd.8">smtpd(8)</a> behavior.
	</li></ul>

	</li><li><a href="https://man.openbsd.org/httpd.8">httpd(8)</a> received new features and bugfixes:
	<ul>
	    <li>Respond with 400 Bad Request when a client sends header lines without a colon.
	    </li><li>Added protocol version checking.
	    </li><li>Annotated an <a href="https://man.openbsd.org/httpd.8">httpd(8)</a> 413 error with &#34;request body too large&#34; in the error log.
	    </li><li>Corrected <a href="https://man.openbsd.org/httpd.8">httpd(8)</a> version string
		checking, responding with 505 Version Not Supported rather than 400
		Bad Request when the version format is incorrect.
	    </li><li>Stop sending content alongside responses to HEAD requests.
	    </li><li>Added support for custom error pages.
	    </li><li>Added a gzip-static option to <a href="https://man.openbsd.org/httpd.conf.5">httpd.conf(5)</a>,
		allowing delivery of precompressed files with content-encoding gzip.
	    </li><li>Improved handling of static compressed gzip files.
	</li></ul>

	</li><li>IPsec support was improved:
	<ul>
	    <li>Made <a href="https://man.openbsd.org/iked.conf.5">iked.conf(5)</a> proto config option accept a list to allow specifying multiple protocols for a single policy.
	    </li><li>Fixed removal of SAs that could not be flushed with <a href="https://man.openbsd.org/ipsecctl.8">ipsecctl(8)</a> -F.
	    </li><li>Changed <a href="https://man.openbsd.org/isakmpd.8">isakmpd(8)</a> to log a warning when proto is NULL rather than dereferencing it.
	    </li><li>Fixed broken key exchange negotiation with matching proposals in <a href="https://man.openbsd.org/iked.8">iked(8)</a>.
	    </li><li>Added <a href="https://man.openbsd.org/ikectl.8">ikectl(8)</a> &#34;show certinfo&#34; to show trusted CAs and certificates.
	    </li><li>Added <a href="https://man.openbsd.org/iked.8">iked(8)</a> -V to display the version.
	    </li><li>Fixed a bug where <a href="https://man.openbsd.org/iked.8">iked(8)</a> sent zero-prefixed NAT-T messages on port 500, causing parsing errors.
	    </li><li>Improved message fragment retransmissions for <a href="https://man.openbsd.org/iked.8">iked(8)</a>.
	    </li><li>Make sure <a href="https://man.openbsd.org/iked.8">iked(8)</a> vroute messages are correctly aligned, fixes autoconfiguration of addresses on octeon.
	</li></ul>
	</li><li><a href="https://man.openbsd.org/rpki-client.8">rpki-client(8)</a> was
		made more resilient regarding untrusted input. The following
		bugfixes and improvements were made:
	<ul>
	    <li>Added support for validating BGPsec Router Public Keys.
	    </li><li>Fix issues with chunked transfer encoding in the RRDP HTTP client.
	    </li><li>Cleanup and improvement of how IO is handled.
	    </li><li>Improvements in the way X509 certificates are verified.
	    </li><li>Limit the number of concurrent rsync processes.
	    </li><li>Fix CRLF in tal files.
	    </li><li>Enforce the correct namespace of rrdp files.
	    </li><li>Fail certificate verification if a certificate contains unknown
		critical extensions.
	    </li><li>Improve cleanup of rrdp directory contents.
	    </li><li>Introduce a validated cache which holds all the files that have
		successfully been verified by rpki-client.
	    </li><li>Add a new option &#39;-f &lt;file&gt;&#39; to validate a signed object in a file
		against the RPKI cache.
	    </li><li>Add various RFC 6488 compliance checks to improve the CMS parser.
	    </li><li>Improve RRDP replication through less aggressive cache cleanup.
	    </li><li>Add a check whether a given Manifest EE certificate is listed on the
		applicable CRL.
	    </li><li>For forward compatibility permit ASPA object to appear on Manifests.
	    </li><li>Various improvements to the &#39;-f &lt;file&gt;&#39; diagnostic option to
		now also validate files containing Trust Anchor certs and CRLs.
	    </li><li>Do not apply timezone offsets when converting X509 times.  X509
		times are in UTC and comparing them to times in different timezones
		would cause validity problems.
	</li></ul>
	</li><li>In <a href="https://man.openbsd.org/bgpd.conf.5">bgpd(8)</a>,
	<ul>
	    <li>The <a href="https://man.openbsd.org/bgpd.8">bgpd</a> login
		class datasize attribute (in <a href="https://man.openbsd.org/login.conf.5">login.conf(5)</a>) was set
		to either 16G or 1G, depending on architecture.
	    </li><li>Macro expansion in the config file was improved. It is now possible
		to expand &#39;set large-community $myAS:$location:$transit&#39;.
	    </li><li>Added a &#34;port&#34; option to &#34;listen on&#34; and the &#34;neighbor&#34; section
		in <a href="https://man.openbsd.org/bgpd.conf.5">bgpd.conf(5)</a> to make it
		possible to bind and connect to non-default ports.
	    </li><li>The RIB codebase was refactored in order to add multipath
		support in an upcoming release.
	</li></ul>
  </li></ul>

</li><li><a href="https://man.openbsd.org/tmux">tmux(1)</a> improvements and bug fixes:
  <ul>
	<li>Fixed a crash in <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> when a session with
		multiple clients is destroyed but tmux does not close completely due
		to other sessions.
	</li><li>Fixed a <a href="https://man.openbsd.org/tmux.1">tmux(1)</a>
		redraw problem on automargin terminals.
	</li><li>Fixed a problem with repeat in <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> copy mode.
	</li><li>Added -T to set a popup title in <a href="https://man.openbsd.org/tmux.1">tmux(1)</a>.
	</li><li>Added -s and -S to <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> display-popup to set
		popup and border style.
	</li><li>Fixed application-set fg and bg in <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> panes.
	</li><li>Added a way to force a color to RGB in <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> and a format to
		display it.
	</li><li>Added a cursor-colour option to <a href="https://man.openbsd.org/tmux.1">tmux(1)</a>.
	</li><li>Added a cursor-style option to <a href="https://man.openbsd.org/tmux.1">tmux(1)</a>.
	</li><li>Added a pane-border-format pane option to <a href="https://man.openbsd.org/tmux.1">tmux(1)</a>.
	</li><li>Added attempts to turn on less-capable mouse modes when <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> turns on more-capable ones, in case the terminal doesn&#39;t support the desired mode.
	</li><li>Added a <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> option to show arrows for the active pane indicator.
	</li><li>Added a key in <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> copy mode to toggle the position indicator.
	</li><li>Added an option in <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> to set the character for unused areas of the terminal.
	</li><li>Add <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> option to control if it scrolls into history on clear.
	</li><li>Added OSC 7 capability to <a href="https://man.openbsd.org/tmux.1">tmux(1)</a> for setting titles.
  </li></ul>

</li><li>LibreSSL version 3.5.2
  <ul>
    <li>New Features
    <ul>
      <li>The RFC 3779 API was ported from OpenSSL.</li><li>Certificate Transparency was ported from OpenSSL.</li></ul>

    </li><li>Portable Improvements
    <ul>
      <li>Enabled ASAN CI on Linux platform.<br/>
      </li><li>Fixed various POSIX compliance and other portability issues</li><li>Add libmd as platform specific libraries for Solaris.<br/>
      </li><li>Set IA-64 compiler flag only if it is HP-UX with IA-64.<br/>
      </li><li>Enabled and scheduled Coverity scans.<br/>
    </li></ul>

    </li><li>Compatibility Changes
    <ul>
      <li>Most structs that were previously defined in the following headers
          are now opaque as they are in OpenSSL 1.1:</li><li>Switch TLSv1.3 cipher names from AEAD- to OpenSSL&#39;s TLS_</li><li>Subject alternative names and name constraints are now validated
          when they are added to certificates.</li><li>Attempt to opportunistically use the host name for SNI in s_client
      </li><li>Allow non-standard name constraints of the form @domain.com.
    </li></ul>

    </li><li>Bug fixes
    <ul>
      <li>Avoid infinite loop for custom curves of order 1.<br/>
      </li><li>Avoid infinite loop on parsing DSA private keys.<br/>
      </li><li>Prevent a malicious certificate from causing an infinite loop.<br/>
      </li><li>In some situations, the verifier would discard the error on an
          unvalidated certificate chain.</li><li>Avoid an infinite loop in SSL_shutdown()
      </li><li>Handle zero byte reads/writes that trigger handshakes in the
          TLSv1.3 stack.
      </li><li>A long standing memleak in libtls CRL handling was fixed
      </li><li>Allow name constraints with a leading dot.
      </li><li>Fix NULL dereferences in openssl(1) cms option parsing.
      </li><li>Do not zero the computed cofactor on ec_guess_cofactor() success.
      </li><li>Bound cofactor in EC_GROUP_set_generator() to reduce the number of
          bogus groups that can be described with nonsensical parameters.
      </li><li>Avoid various potential segfaults in EVP_PKEY_CTX_free() in low
          memory conditions.
    </li></ul>

    </li><li>Internal Improvements
    <ul>
      <li>Cache the SHA-512 hash instead of the SHA-1 hash and cache
          notBefore and notAfter times when X.509 certificates are parsed.
      </li><li>The X.509 lookup code has been simplified and cleaned up.
      </li><li>Fixed numerous issues flagged by coverity and the cryptofuzz project.
      </li><li>Increased the number of Miller-Rabin checks in DH and DSA
          key/parameter generation.
      </li><li>Started using the bytestring API in libcrypto for cleaner and
          safer code.
      </li><li>Convert asn1_d2i_ex_primitive()/asn1_collect() from BUF_MEM to CBB
      </li><li>Clean up d2i_ASN1_BOOLEAN() and i2d_ASN1_BOOLEAN()
      </li><li>Consolidate ASN.1 universal tag type data
      </li><li>Rewrite ASN.1 identifier/length parsing in CBS
      </li><li>Make OBJ_obj2nid() work correctly with NID_undef
      </li><li>Untangle ssl3_get_message() return values
      </li><li>Provide a way to determine our maximum legacy version
      </li><li>Add explicit CBS_contains_zero_byte() check in CBS_strdup()
      </li><li>Improve SNI hostname validation
      </li><li>Ensure SSL_set_tlsext_host_name() is given a valid hostname
      </li><li>Factor out/rewrite DHE key exchange
      </li><li>Convert server serialisation of DHE parameters/public key to new
          functions
      </li><li>Provide CBS_get_last_u8(), CBS_get_u64(), CBS_add_u64() and various
          CBS_peek_* functions.
      </li><li>Use CBS_get_last_u8() to find the content type in TLSv1.3 records
      </li><li>Correct SSL_get_peer_cert_chain() when used with the TLSv1.3 stack
      </li><li>Only allow zero length key shares when we know we&#39;re doing HRR
      </li><li>Pull key share group/length CBB code up from
          tls13_key_share_public()
      </li><li>Refactor ssl3_get_server_kex_ecdhe() to separate parsing and
          validation.
      </li><li>Allocate and free the EVP_AEAD_CTX struct in
          tls13_record_protection.
      </li><li>Convert legacy TLS client and server to tls_key_share
      </li><li>Clean up pkey handling in ssl3_get_server_key_exchange()
      </li><li>Fix GOST skip certificate verify handling
      </li><li>Simplify SSL_get_peer_certificate()
      </li><li>Cleanup/simplify ssl_cert_type()
      </li><li>The openssl(1) cms, smime and ts subcommands option handling was
          converted and the C source was cleaned up.
      </li><li>Limit OID text conversion to 64 bits per arc.
      </li><li>Clean up and simplify memory BIO code.
      </li><li>Reduce number of memmove() calls in memory BIOs.
      </li><li>Factor out alert handling code in the legacy stack.
      </li><li>Add sanity checks on p and q in old_dsa_priv_decode()
      </li><li>Cache the SHA-512 hash instead of the SHA-1 for CRLs.
      </li><li>Suppress various compiler warnings for old gcc versions.
      </li><li>Rework ASN1_STRING_set().
      </li><li>Clean up and simplify ssl3_renegotiate{,_check}().
      </li><li>Rewrite legacy TLS and DTLS unexpected handshake message handling.
      </li><li>Simplify SSL_do_handshake().
      </li><li>Rewrite ASCII/text to ASN.1 object conversion.
      </li><li>Convert {c2i,d2i}_ASN1_OBJECT() to CBS.
      </li><li>Clean up {dtls1,ssl3}_read_bytes().
      </li><li>Be more careful with embedded and terminating NULs in the new
          name constraints code.
      </li><li>Various minor code cleanup in openssl(1) pkcs12.
      </li><li>Simplify priv_key handling in d2i_ECPrivateKey().
    </li></ul>

    </li><li>Documentation improvements
    <ul>
      <li>45 new manual pages, most of which were written from scratch.</li><li>Update d2i_ASN1_OBJECT(3) documentation to reflect reality after
          refactoring and bug fixes.
      </li><li>Fixed numerous minor grammar, spelling, wording, and punctuation
          issues.
    </li></ul>
  </li></ul>

</li><li>OpenSSH 9.0
 <ul>
  <li>Security
  <ul>
    <!-- OpenSSH 8.9 -->
    <li>Near miss in <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>:
        fix an integer overflow in the user authentication path
        that, in conjunction with other logic errors, could have yielded
        unauthenticated access under difficult to exploit conditions.</li></ul>
  </li><li>Potentially incompatible changes
  <ul>
    <!-- OpenSSH 8.9 -->
    <li>In OpenSSH 8.9 the FIDO security key middleware interface
        changed and increments SSH_SK_VERSION_MAJOR.
    <!-- OpenSSH 9.0 -->
    </li><li>This release switches <a href="https://man.openbsd.org/scp.1">scp(1)</a>
        from using the legacy scp/rcp protocol
        to using the SFTP protocol by default.</li></ul>

  </li><li>New features
  <ul>
    <!-- OpenSSH 8.9 -->
    <li><a href="https://man.openbsd.org/ssh.1">ssh(1)</a>,
        <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>,
        <a href="https://man.openbsd.org/ssh-add.1">ssh-add(1)</a>,
        <a href="https://man.openbsd.org/ssh-agent.1">ssh-agent(1)</a>:
        add a system for restricting forwarding and use of keys added to
        <a href="https://man.openbsd.org/ssh-agent.1">ssh-agent(1)</a>
        A detailed description of the feature is available at
        https://www.openssh.com/agent-restrict.html and the protocol
        extensions are documented in the
        <a href="https://cvsweb.openbsd.org/src/usr.bin/ssh/PROTOCOL?annotate=OPENBSD_7_1">PROTOCOL</a> and
        <a href="https://cvsweb.openbsd.org/src/usr.bin/ssh/PROTOCOL.agent?annotate=OPENBSD_7_1">PROTOCOL.agent</a> files in the source release.
    </li><li><a href="https://man.openbsd.org/ssh.1">ssh(1)</a>,
        <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>:
        add the sntrup761x25519-sha512@openssh.com hybrid
        ECDH/x25519 + Streamlined NTRU Prime post-quantum KEX to the
        default KEXAlgorithms list (after the ECDH methods but before the
        prime-group DH ones).
    </li><li><a href="https://man.openbsd.org/ssh-keygen.1">ssh-keygen(1)</a>:
        when downloading resident keys from a FIDO token,
        pass back the user ID that was used when the key was created and
        append it to the filename the key is written to (if it is not the
        default). Avoids keys being clobbered if the user created multiple
        resident keys with the same application string but different user
        IDs.
    </li><li><a href="https://man.openbsd.org/ssh-keygen.1">ssh-keygen(1)</a>,
        <a href="https://man.openbsd.org/ssh.1">ssh(1)</a>,
        <a href="https://man.openbsd.org/ssh-agent.1">ssh-agent(1)</a>:
        better handling for FIDO keys
        on tokens that provide user verification (UV) on the device itself,
        including biometric keys, avoiding unnecessary PIN prompts.
    </li><li><a href="https://man.openbsd.org/ssh-keygen.1">ssh-keygen(1)</a>: add &#34;ssh-keygen -Y match-principals&#34; operation to
        perform matching of principals names against an allowed signers
        file. To be used towards a TOFU model for SSH signatures in git.
    </li><li><a href="https://man.openbsd.org/ssh-add.1">ssh-add(1)</a>,
        <a href="https://man.openbsd.org/ssh-agent.1">ssh-agent(1)</a>:
        allow pin-required FIDO keys to be added
        to <a href="https://man.openbsd.org/ssh-agent.1">ssh-agent(1)</a>.
        $SSH_ASKPASS will be used to request the PIN at authentication time.
    </li><li><a href="https://man.openbsd.org/ssh-keygen.1">ssh-keygen(1)</a>:
        allow selection of hash at sshsig signing time
        (either sha512 (default) or sha256).
    </li><li><a href="https://man.openbsd.org/ssh.1">ssh(1)</a>,
        <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>:
        read network data directly to the packet input
        buffer instead of indirectly via a small stack buffer. Provides a
        modest performance improvement.
    </li><li><a href="https://man.openbsd.org/ssh.1">ssh(1)</a>,
        <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>:
        read data directly to the channel input buffer,
        providing a similar modest performance improvement.
    </li><li><a href="https://man.openbsd.org/ssh.1">ssh(1)</a>:
        extend the PubkeyAuthentication configuration directive to
        accept yes|no|unbound|host-bound to allow control over one of the
        protocol extensions used to implement agent-restricted keys.
    <!-- OpenSSH 9.0 -->
    </li><li><a href="https://man.openbsd.org/ssh.1">ssh(1)</a>,
        <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>:
        use the hybrid Streamlined NTRU Prime + x25519 key
        exchange method by default (&#34;sntrup761x25519-sha512@openssh.com&#34;).
        The NTRU algorithm is believed to resist attacks enabled by future
        quantum computers and is paired with the X25519 ECDH key exchange
        (the previous default) as a backstop against any weaknesses in
        NTRU Prime that may be discovered in the future. The combination
        ensures that the hybrid exchange offers at least as good security
        as the status quo.</li><li><a href="https://man.openbsd.org/sftp-server.8">sftp-server(8)</a>:
        support the &#34;copy-data&#34; extension to allow server-
        side copying of files/data, following the design in
        draft-ietf-secsh-filexfer-extensions-00.
    </li><li><a href="https://man.openbsd.org/sftp.1">sftp(1)</a>:
        add a &#34;cp&#34; command to allow the sftp client to perform
        server-side file copies.
  </li></ul>

  </li><li>Bugfixes
  <ul>
    <!-- OpenSSH 8.9 -->
    <li><a href="https://man.openbsd.org/sshd.8">sshd(8)</a>:
        document that CASignatureAlgorithms, ExposeAuthInfo and
        PubkeyAuthOptions can be used in a Match block.
    </li><li><a href="https://man.openbsd.org/sshd.8">sshd(8)</a>:
        fix possible string truncation when constructing paths to
        .rhosts/.shosts files with very long user home directory names.
    </li><li>ssh-keysign(1): unbreak for KEX algorithms that use SHA384/512
        exchange hashes
    </li><li><a href="https://man.openbsd.org/ssh.1">ssh(1)</a>:
        don&#39;t put the TTY into raw mode when SessionType=none,
        avoids ^C being unable to kill such a session.
    </li><li><a href="https://man.openbsd.org/scp.1">scp(1)</a>:
        fix some corner-case bugs in SFTP-mode handling of
        ~-prefixed paths.
    </li><li><a href="https://man.openbsd.org/ssh.1">ssh(1)</a>:
        unbreak hostbased auth using RSA keys. Allow
        <a href="https://man.openbsd.org/ssh.1">ssh(1)</a> to
        select RSA keys when only RSA/SHA2 signature algorithms are
        configured (this is the default case). Previously RSA keys were
        not being considered in the default case.
    </li><li>ssh-keysign(1): make ssh-keysign use the requested signature
        algorithm and not the default for the key type. Part of unbreaking
        hostbased auth for RSA/SHA2 keys.
    </li><li><a href="https://man.openbsd.org/ssh.1">ssh(1)</a>:
        stricter UpdateHostkey signature verification logic on
        the client- side. Require RSA/SHA2 signatures for RSA hostkeys
        except when RSA/SHA1 was explicitly negotiated during initial
        KEX
    </li><li><a href="https://man.openbsd.org/ssh.1">ssh(1)</a>,
        <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>:
        fix signature algorithm selection logic for
        UpdateHostkeys on the server side. The previous code tried to
        prefer RSA/SHA2 for hostkey proofs of RSA keys, but missed some
        cases. This will use RSA/SHA2 signatures for RSA keys if the
        client proposed these algorithms in initial KEX.
    </li><li>All: convert all uses of
        <a href="https://man.openbsd.org/select.2">select(2)</a>/
        <a href="https://man.openbsd.org/pselect.2">pselect(2)</a> to
        <a href="https://man.openbsd.org/poll.2">poll(2)</a>/
        <a href="https://man.openbsd.org/ppoll.2">ppoll(2)</a>.
        This includes the mainloops in
        <a href="https://man.openbsd.org/ssh.1">ssh(1)</a>,
        <a href="https://man.openbsd.org/ssh-agent.1">ssh-agent(1)</a>,
        <a href="https://man.openbsd.org/ssh-agent.1">ssh-agent(1)</a>
        and <a href="https://man.openbsd.org/sftp-server.8">sftp-server(8)</a>,
        as well as the <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>
        listen loop and all other FD read/writability checks.
    </li><li><a href="https://man.openbsd.org/ssh-keygen.1">ssh-keygen(1)</a>:
        the &#34;-Y find-principals&#34; command was verifying key
        validity when using ca certs but not with simple key lifetimes
        within the allowed signers file.
    </li><li><a href="https://man.openbsd.org/ssh-keygen.1">ssh-keygen(1)</a>:
        make sshsig verify-time argument parsing optional
    </li><li><a href="https://man.openbsd.org/sshd.8">sshd(8)</a>:
        fix truncation in rhosts/shosts path construction.
    </li><li><a href="https://man.openbsd.org/ssh.1">ssh(1)</a>,
        <a href="https://man.openbsd.org/ssh-agent.1">ssh-agent(1)</a>:
        avoid xmalloc(0) for PKCS#11 keyid for ECDSA
        keys (we already did this for RSA keys). Avoids fatal errors for
        PKCS#11 libraries that return empty keyid, e.g. Microchip ATECC608B
        &#34;cryptoauthlib&#34;
    </li><li><a href="https://man.openbsd.org/ssh.1">ssh(1)</a>,
        <a href="https://man.openbsd.org/ssh-agent.1">ssh-agent(1)</a>:
        improve the testing of credentials against
        inserted FIDO: ask the token whether a particular key belongs to
        it in cases where the token supports on-token user-verification
        (e.g. biometrics) rather than just assuming that it will accept it.</li><li><a href="https://man.openbsd.org/ssh.1">ssh(1)</a>,
        <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>:
        correct value for IPTOS_DSCP_LE. It needs to
        allow for the preceding two ECN bits.
    </li><li><a href="https://man.openbsd.org/ssh-keygen.1">ssh-keygen(1)</a>:
        add missing -O option to usage() for the &#34;-Y sign&#34; option.
    </li><li><a href="https://man.openbsd.org/ssh-keygen.1">ssh-keygen(1)</a>:
        fix a NULL deref when using the find-principals
        function, when matching an allowed_signers line that contains a
        namespace restriction, but no restriction specified on the
        command-line
    </li><li><a href="https://man.openbsd.org/ssh-agent.1">ssh-agent(1)</a>:
        fix memleak in process_extension(); oss-fuzz issue #42719
    </li><li><a href="https://man.openbsd.org/ssh.1">ssh(1)</a>:
        suppress &#34;Connection to xxx closed&#34; messages when LogLevel
        is set to &#34;error&#34; or above.
    </li><li><a href="https://man.openbsd.org/ssh.1">ssh(1)</a>,
        <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>:
        use correct zlib flags when inflate(3)-ing compressed packet data.
    </li><li><a href="https://man.openbsd.org/scp.1">scp(1)</a>:
        when recursively transferring files in SFTP mode, create the
        destination directory if it doesn&#39;t already exist to match
        <a href="https://man.openbsd.org/scp.1">scp(1)</a> in
        legacy RCP mode behaviour.
    </li><li><a href="https://man.openbsd.org/scp.1">scp(1)</a>:
        many improvements in error message consistency between
        <a href="https://man.openbsd.org/scp.1">scp(1)</a>
        in SFTP mode vs legacy RCP mode.
    </li><li><a href="https://man.openbsd.org/sshd.8">sshd(8)</a>:
        fix potential race in SIGTERM handling
    </li><li><a href="https://man.openbsd.org/ssh.1">ssh(1)</a>,
        <a href="https://man.openbsd.org/sshd.8">sshd(8))</a>:
        since DSA keys are deprecated, move them to the end of the default
        list of public keys so that they will be tried last.
    </li><li><a href="https://man.openbsd.org/ssh-keygen.1">ssh-keygen(1)</a>:
        allow &#39;ssh-keygen -Y find-principals&#39; to match
        wildcard principals in allowed_signers files
    <!-- OpenSSH 9.0 -->
    </li><li><a href="https://man.openbsd.org/ssh.1">ssh(1)</a>,
        <a href="https://man.openbsd.org/sshd.8">sshd(8)</a>:
        fix
        <a href="https://man.openbsd.org/poll.2">poll(2)</a> spin when a
        channel&#39;s output fd closes without data in the channel buffer.
    </li><li><a href="https://man.openbsd.org/sshd.8">sshd(8)</a>:
        pack pollfd array in server listen/accept loop. Could
        cause the server to hang/spin when MaxStartups &gt; RLIMIT_NOFILE
    </li><li><a href="https://man.openbsd.org/ssh-keygen.1">ssh-keygen(1)</a>:
        avoid NULL deref via the find-principals and check-novalidate operations.
    </li><li><a href="https://man.openbsd.org/scp.1">scp(1)</a>:
        fix a memory leak in argument processing.
    </li><li><a href="https://man.openbsd.org/sshd.8">sshd(8)</a>:
        don&#39;t try to resolve ListenAddress directives in the sshd
        re-exec path. They are unused after re-exec and parsing errors
        (possible for example if the host&#39;s network configuration changed)
        could prevent connections from being accepted.
    </li><li><a href="https://man.openbsd.org/sshd.8">sshd(8)</a>:
        when refusing a public key authentication request from a
        client for using an unapproved or unsupported signature algorithm
        include the algorithm name in the log message to make debugging
        easier.
  </li></ul>
</li></ul>

</li><li>mandoc 1.14.6 plus several bugfixes, including:
    <ul>
	<li>Fixed <a href="https://man.openbsd.org/man.1">man(1)</a>
		to always read the configuration file and respect
		the other directives contained in it,
		even when the manpath is overridden by other means.
	</li><li>Fixed a memory leak in
		<a href="https://man.openbsd.org/man.1">man(1)</a>
		that mattered when many names were given on the command line.
	</li><li>Fixed a small memory leak in the
		<a href="https://man.openbsd.org/roff.7">roff(7)</a> parser
		that occurred each time a user-defined macro was called.
        </li><li>Fixed the width of the <code>\h</code> (horizontal motion)
		<a href="https://man.openbsd.org/roff.7">roff(7)</a>
		escape sequence in the PostScript and PDF output modes.
    </li></ul>

</li><li>Ports and packages:
  <p>Many pre-built packages for each architecture:
  <!-- number of FTP packages minus SHA256, SHA256.sig, index.txt -->
  </p><ul>
    <li>aarch64:    11081
    </li><li>amd64:      11301
    </li><li>arm:         8372
    </li><li>i386:       10136
    </li><li>mips64:      8708
    </li><li>powerpc:     9290
    </li><li>powerpc64:   9132
    </li><li>riscv64:     9108
    </li><li>sparc64:     9288
  </li></ul>

  <p>Some highlights:
  </p><ul>
    <li>Asterisk 16.25.1, 18.11.1 and 19.3.1
    </li><li>Audacity 2.4.2
    </li><li>CMake 3.20.3
    </li><li>Chromium 100.0.4896.75
    </li><li>Emacs 27.2
    </li><li>FFmpeg 4.4.1
    </li><li>GCC 8.4.0 and 11.2.0
    </li><li>GHC 8.10.6
    </li><li>GNOME 41.5
    </li><li>Go 1.17.7
    </li><li>JDK 8u322, 11.0.14 and 17.0.2
    </li><li>KDE Applications 21.12.2
    </li><li>KDE Frameworks 5.91.0
    </li><li>Krita 5.0.2
    </li><li>LLVM/Clang 13.0.0
    </li><li>LibreOffice 7.3.2.2
    </li><li>Lua 5.1.5, 5.2.4 and 5.3.6
    </li><li>MariaDB 10.6.7
    </li><li>Mono 6.12.0.122
    </li><li>Mozilla Firefox 99.0 and ESR 91.8.0
    </li><li>Mozilla Thunderbird 91.8.0
    </li><li>Mutt 2.2.2 and NeoMutt 20211029
    </li><li>Node.js 16.14.2
    </li><li>OCaml 4.12.1
    </li><li>OpenLDAP 2.4.59
    </li><li>PHP 7.4.28, 8.0.17 and 8.1.4
    </li><li>Postfix 3.5.14
    </li><li>PostgreSQL 14.2
    </li><li>Python 2.7.18, 3.8.13, 3.9.12 and 3.10.4
    </li><li>Qt 5.15.2 and 6.0.4
    </li><li>R 4.1.2
    </li><li>Ruby 2.7.5, 3.0.3 and 3.1.1
    </li><li>Rust 1.59.0
    </li><li>SQLite 2.8.17 and 3.38.2
    </li><li>Shotcut 21.10.31
    </li><li>Sudo 1.9.10
    </li><li>Suricata 6.0.4
    </li><li>Tcl/Tk 8.5.19 and 8.6.8
    </li><li>TeX Live 2021
    </li><li>Vim 8.2.4600 and Neovim 0.6.1
    </li><li>Xfce 4.16
  </li></ul>
  </li><li>As usual, steady improvements in manual pages and other documentation.

</li><li>The system includes the following major components from outside suppliers:
  <ul>
    <li>Xenocara (based on X.Org 7.7 with xserver 1.21.1.3 + patches,
        freetype 2.11.0, fontconfig 2.12.94, Mesa 21.3.7, xterm 369,
        xkeyboard-config 2.20, fonttosfnt 1.2.2 and more)
    </li><li>LLVM/Clang 13.0.0 (+ patches)
    </li><li>GCC 4.2.1 (+ patches) and 3.3.6 (+ patches)
    </li><li>Perl 5.32.1 (+ patches)
    </li><li>NSD 4.4.0
    </li><li>Unbound 1.15.0
    </li><li>Ncurses 5.7
    </li><li>Binutils 2.17 (+ patches)
    </li><li>Gdb 6.3 (+ patches)
    </li><li>Awk October 12, 2021
    </li><li>Expat 2.4.7
  </li></ul>

</li></ul>
</section>

<hr/>

<section id="install">
<h3>How to install</h3>
<p>
Please refer to the following files on the mirror site for
extensive details on how to install OpenBSD 7.1 on your machine:

</p><ul>
<li><a href="https://ftp.openbsd.org/pub/OpenBSD/7.1/alpha/INSTALL.alpha">
	.../OpenBSD/7.1/alpha/INSTALL.alpha</a>
</li><li><a href="https://ftp.openbsd.org/pub/OpenBSD/7.1/amd64/INSTALL.amd64">
	.../OpenBSD/7.1/amd64/INSTALL.amd64</a>
</li><li><a href="https://ftp.openbsd.org/pub/OpenBSD/7.1/arm64/INSTALL.arm64">
	.../OpenBSD/7.1/arm64/INSTALL.arm64</a>
</li><li><a href="https://ftp.openbsd.org/pub/OpenBSD/7.1/armv7/INSTALL.armv7">
	.../OpenBSD/7.1/armv7/INSTALL.armv7</a>
</li><li><a href="https://ftp.openbsd.org/pub/OpenBSD/7.1/hppa/INSTALL.hppa">
	.../OpenBSD/7.1/hppa/INSTALL.hppa</a>
</li><li><a href="https://ftp.openbsd.org/pub/OpenBSD/7.1/i386/INSTALL.i386">
	.../OpenBSD/7.1/i386/INSTALL.i386</a>
</li><li><a href="https://ftp.openbsd.org/pub/OpenBSD/7.1/landisk/INSTALL.landisk">
	.../OpenBSD/7.1/landisk/INSTALL.landisk</a>
</li><li><a href="https://ftp.openbsd.org/pub/OpenBSD/7.1/luna88k/INSTALL.luna88k">
	.../OpenBSD/7.1/luna88k/INSTALL.luna88k</a>
</li><li><a href="https://ftp.openbsd.org/pub/OpenBSD/7.1/macppc/INSTALL.macppc">
	.../OpenBSD/7.1/macppc/INSTALL.macppc</a>
</li><li><a href="https://ftp.openbsd.org/pub/OpenBSD/7.1/octeon/INSTALL.octeon">
	.../OpenBSD/7.1/octeon/INSTALL.octeon</a>
</li><li><a href="https://ftp.openbsd.org/pub/OpenBSD/7.1/powerpc64/INSTALL.powerpc64">
	.../OpenBSD/7.1/powerpc64/INSTALL.powerpc64</a>
</li><li><a href="https://ftp.openbsd.org/pub/OpenBSD/7.1/riscv64/INSTALL.riscv64">
	.../OpenBSD/7.1/riscv64/INSTALL.riscv64</a>
</li><li><a href="https://ftp.openbsd.org/pub/OpenBSD/7.1/sparc64/INSTALL.sparc64">
	.../OpenBSD/7.1/sparc64/INSTALL.sparc64</a>
</li></ul>
</section>

<hr/>

<section id="quickinstall">
<p>
Quick installer information for people familiar with OpenBSD, and the use of
the &#34;<a href="https://man.openbsd.org/disklabel.8">disklabel</a> -E&#34; command.
If you are at all confused when installing OpenBSD, read the relevant
INSTALL.* file as listed above!

</p><h3>OpenBSD/alpha:</h3>

<p>
If your machine can boot from CD, you can write <i>install71.iso</i> or
<i>cd71.iso</i> to a CD and boot from it.
Refer to INSTALL.alpha for more details.

</p><h3>OpenBSD/amd64:</h3>

<p>
If your machine can boot from CD, you can write <i>install71.iso</i> or
<i>cd71.iso</i> to a CD and boot from it.
You may need to adjust your BIOS options first.

</p><p>
If your machine can boot from USB, you can write <i>install71.img</i> or
<i>miniroot71.img</i> to a USB stick and boot from it.

</p><p>
If you can&#39;t boot from a CD, floppy disk, or USB,
you can install across the network using PXE as described in the included
INSTALL.amd64 document.

</p><p>
If you are planning to dual boot OpenBSD with another OS, you will need to
read INSTALL.amd64.

</p><h3>OpenBSD/arm64:</h3>

<p>
Write <i>install71.img</i> or <i>miniroot71.img</i> to a disk and boot from it
after connecting to the serial console.  Refer to INSTALL.arm64 for more
details.

</p><h3>OpenBSD/armv7:</h3>

<p>
Write a system specific miniroot to an SD card and boot from it after connecting
to the serial console.  Refer to INSTALL.armv7 for more details.

</p><h3>OpenBSD/hppa:</h3>

<p>
Boot over the network by following the instructions in INSTALL.hppa or the
<a href="https://www.openbsd.org/hppa.html#install">hppa platform page</a>.

</p><h3>OpenBSD/i386:</h3>

<p>
If your machine can boot from CD, you can write <i>install71.iso</i> or
<i>cd71.iso</i> to a CD and boot from it.
You may need to adjust your BIOS options first.

</p><p>
If your machine can boot from USB, you can write <i>install71.img</i> or
<i>miniroot71.img</i> to a USB stick and boot from it.

</p><p>
If you can&#39;t boot from a CD, floppy disk, or USB,
you can install across the network using PXE as described in
the included INSTALL.i386 document.

</p><p>
If you are planning on dual booting OpenBSD with another OS, you will need to
read INSTALL.i386.

</p><h3>OpenBSD/landisk:</h3>

<p>
Write <i>miniroot71.img</i> to the start of the CF
or disk, and boot normally.

</p><h3>OpenBSD/luna88k:</h3>

<p>
Copy &#39;boot&#39; and &#39;bsd.rd&#39; to a Mach or UniOS partition, and boot the bootloader
from the PROM, and then bsd.rd from the bootloader.
Refer to the instructions in INSTALL.luna88k for more details.

</p><h3>OpenBSD/macppc:</h3>

<p>
Burn the image from a mirror site to a CDROM, and power on your machine
while holding down the <i>C</i> key until the display turns on and
shows <i>OpenBSD/macppc boot</i>.

</p><p>
Alternatively, at the Open Firmware prompt, enter <i>boot cd:,ofwboot
/7.1/macppc/bsd.rd</i>

</p><h3>OpenBSD/octeon:</h3>

<p>
After connecting a serial port, boot bsd.rd over the network via DHCP/tftp.
Refer to the instructions in INSTALL.octeon for more details.

</p><h3>OpenBSD/powerpc64:</h3>

<p>
To install, write <i>install71.img</i> or <i>miniroot71.img</i> to a
USB stick, plug it into the machine and choose the <i>OpenBSD
install</i> menu item in Petitboot.
Refer to the instructions in INSTALL.powerpc64 for more details.

</p><h3>OpenBSD/riscv64:</h3>

<p>
To install, write <i>install71.img</i> or <i>miniroot71.img</i> to a
USB stick, and boot with that drive plugged in.
Make sure you also have the microSD card plugged in that shipped with the
HiFive Unmatched board.
Refer to the instructions in INSTALL.riscv64 for more details.

</p><h3>OpenBSD/sparc64:</h3>

<p>
Burn the image from a mirror site to a CDROM, boot from it, and type
<i>boot cdrom</i>.

</p><p>
If this doesn&#39;t work, or if you don&#39;t have a CDROM drive, you can write
<i>floppy71.img</i> or <i>floppyB71.img</i>
(depending on your machine) to a floppy and boot it with <i>boot
floppy</i>. Refer to INSTALL.sparc64 for details.

</p><p>
Make sure you use a properly formatted floppy with NO BAD BLOCKS or your install
will most likely fail.

</p><p>
You can also write <i>miniroot71.img</i> to the swap partition on
the disk and boot with <i>boot disk:b</i>.

</p><p>
If nothing works, you can boot over the network as described in INSTALL.sparc64.
</p></section>

<hr/>

<section id="upgrade">
<h3>How to upgrade</h3>
<p>
If you already have an OpenBSD 7.0 system, and do not want to reinstall,
upgrade instructions and advice can be found in the
<a href="https://www.openbsd.org/faq/upgrade71.html">Upgrade Guide</a>.
</p></section>

<hr/>

<section id="sourcecode">
<h3>Notes about the source code</h3>
<p>
<code>src.tar.gz</code> contains a source archive starting at <code>/usr/src</code>.
This file contains everything you need except for the kernel sources,
which are in a separate archive.
To extract:
</p><blockquote><pre># <kbd>mkdir -p /usr/src</kbd>
# <kbd>cd /usr/src</kbd>
# <kbd>tar xvfz /tmp/src.tar.gz</kbd>
</pre></blockquote>
<p>
<code>sys.tar.gz</code> contains a source archive starting at <code>/usr/src/sys</code>.
This file contains all the kernel sources you need to rebuild kernels.
To extract:
</p><blockquote><pre># <kbd>mkdir -p /usr/src/sys</kbd>
# <kbd>cd /usr/src</kbd>
# <kbd>tar xvfz /tmp/sys.tar.gz</kbd>
</pre></blockquote>
<p>
Both of these trees are a regular CVS checkout.  Using these trees it
is possible to get a head-start on using the anoncvs servers as
described <a href="https://www.openbsd.org/anoncvs.html">here</a>.
Using these files
results in a much faster initial CVS update than you could expect from
a fresh checkout of the full OpenBSD source tree.
</p></section>

<hr/>

<section id="ports">
<h3>Ports Tree</h3>
<p>
A ports tree archive is also provided.  To extract:
</p><blockquote><pre># <kbd>cd /usr</kbd>
# <kbd>tar xvfz /tmp/ports.tar.gz</kbd>
</pre></blockquote>
<p>
Go read the <a href="https://www.openbsd.org/faq/ports/index.html">ports</a> page
if you know nothing about ports
at this point.  This text is not a manual of how to use ports.
Rather, it is a set of notes meant to kickstart the user on the
OpenBSD ports system.
</p><p>
The <i>ports/</i> directory represents a CVS checkout of our ports.
As with our complete source tree, our ports tree is available via
<a href="https://www.openbsd.org/anoncvs.html">AnonCVS</a>.
So, in order to keep up to date with the -stable branch, you must make
the <i>ports/</i> tree available on a read-write medium and update the tree
with a command like:
</p><blockquote><pre># <kbd>cd /usr/ports</kbd>
# <kbd>cvs -d anoncvs@server.openbsd.org:/cvs update -Pd -rOPENBSD_7_1</kbd>
</pre></blockquote>
<p>
[Of course, you must replace the server name here with a nearby anoncvs
server.]
</p><p>
Note that most ports are available as packages on our mirrors. Updated
ports for the 7.1 release will be made available if problems arise.
</p><p>
If you&#39;re interested in seeing a port added, would like to help out, or just
would like to know more, the mailing list
<a href="https://www.openbsd.org/mail.html">ports@openbsd.org</a> is a good place to know.
</p></section>


</div>
  </body>
</html>
