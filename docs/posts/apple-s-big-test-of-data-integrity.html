<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://eclecticlight.co/2023/05/30/apples-big-test-of-data-integrity/">Original</a>
    <h1>Apple’s big test of data integrity</h1>
    
    <div id="readability-page-1" class="page"><article id="post-72338">
	
	<!-- .entry-header -->

	
		<div data-first_letter="W">
		<p>Well over two years ago, when Apple released Big Sur, it started the largest test of data integrity ever undertaken on Macs, and quite possibly the largest on any personal computer, in the Signed System Volume (SSV). Over the period since 12 November 2020, every T2 and Apple silicon Mac that has booted Big Sur, Monterey or Ventura in default Full Security mode has verified every last bit of their 9 GB SSV.</p>
<p>Apple describes this process in its <a href="https://support.apple.com/en-gb/guide/security/secd698747c9/web" target="_blank">Platform Security Guide</a>. During macOS installation or update, a tree of SHA-256 hashes is built for the snapshot made of the System volume. During the boot process, unless boot security has been downgraded from Full Security, the contents of that SSV are verified against its tree of hashes. In the event that they don’t match perfectly: “the startup process halts and the user is prompted to reinstall macOS”.</p>
<p>Because the SSV is a snapshot, APFS makes both its file system and all its data read-only to all other processes. However, errors in APFS could result in unintended changes to the snapshot, and it remains fully exposed to changes taking place below file system level, including ‘bit rot’. Those have commonly been ascribed to failures in the storage medium, and factors such as cosmic rays that have been claimed to be responsible for data corruption. Thus every T2 and Apple silicon Mac booting Big Sur or later in Full Security mode has contributed a measure of data integrity.</p>
<p>No one outside Apple knows exactly how many Macs have taken part in this large-scale test. Since the release of Big Sur, Apple has sold around 20 million Macs each year, all of which are running Big Sur or later. Many existing Intel Macs with T2 chips have also been upgraded to Big Sur or later. At the very least, macOS 11 or later must have been installed and run on tens of millions of Macs, possibly as many as 100 million in total. Even if most of those Macs aren’t booted daily, but left to sleep every night, each of them will have booted once for each macOS update or upgrade since installing Big Sur or later. In total, those Macs must have completed hundreds or even thousands of millions of verifications of their SSV.</p>
<p>Although I believe that I have heard of one user whose Mac didn’t complete a macOS update successfully, and was prompted to reinstall macOS, such events appear to have been exceptional in Big Sur and later. It certainly doesn’t appear to have occurred sufficiently frequently to become noticeable on popular internet discussion forums or support groups, although other problems updating macOS are often more widely reported. My own experience with a minimum of four different Macs is that I have never encountered a verification failure against the tree of hashes, nor has this ever occurred in any of the virtual machines in which I have macOS installed.</p>
<p>While these are anecdotal and not statistical, they’re worth putting into the context of comparable failures, such as those requiring replacement of the logic board. Since the release of the first M1 Macs, I have heard of several, but no more than a dozen, Apple silicon Macs that have undergone logic board replacement. In some of those cases, the repair may have been precautionary rather than the result of any discrete hardware failure. However, in my experience an Apple silicon Mac is more likely to require logic board replacement than it is to fail to verify its SSV against its tree of hashes. So while none of us can rule out data corruption due to cosmic rays and similar causes, the chance of that happening appears extremely remote, and probably the least of your concerns with modern Macs.</p>
<p>If you know otherwise, please don’t hesitate to let me know.</p>
	</div><!-- .entry-content -->

	
	<!-- .entry-footer -->

</article></div>
  </body>
</html>
