<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.greg.technology/2023/11/15/you-can-use-github-actions-to-track-your-web-analytics-for-free-sorta.html">Original</a>
    <h1>you can use github actions to track your web analytics for free (sorta)</h1>
    
    <div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p>I’m <em>not</em> done exploring funny uses of Github Actions, ok.</p>

<p><a href="https://blog.greg.technology/2023/10/09/you-can-use-github-actions-to-run-a-backend-web-server-kinda.html">Part I was how to run a web backend using GitHub Actions</a>. This is Part II.</p>

<hr/>

<h4 id="tldr-you-can-use-github-actions-to-track-your-web-analytics-for-free-sorta">TLDR » You can use GitHub Actions to track your web analytics for free!! sorta.</h4>

<hr/>

<p>Why:</p>
<ul>
  <li>I don’t know</li>
  <li>cause you can.</li>
</ul>

<p>Also, it’s fun. And finally, GitHub Actions should have some way of running backend code (called/triggered by web? anonymous users?) because that would be so great, but that’s just my take. give us web code server hosting already.</p>

<h4 id="how-does-it-work">How does it work?</h4>

<ul>
  <li>your frontend javascript code pings the GitHub API and asks it to run a workflow
    <ul>
      <li>YES, you will need to encode your personal access token in your frontend</li>
      <li>YES, GitHub says to <a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens#keeping-your-personal-access-tokens-secure">not do that</a></li>
      <li>YES, you should not do that</li>
      <li>BUT, you can set your personal access token to “”””&#34;”only”””” have the <code>actions:write</code> permissions on a single repo, and, <em>as far as I can tell</em>, someone could mess with your analytics very lightly by disabling your workflow (i.e. turning it off), but they couldn’t … do… other. terrible. things. I think. I’m pretty sure! Like, 70% sure.</li>
      <li><a href="https://gist.github.com/gregsadetsky/47357f6f5ceeea8a898aafbaa8375c50">the code on the frontend looks like this</a>.</li>
    </ul>
  </li>
  <li>GitHub Actions will receive the request to run the workflow from the frontend and comply</li>
  <li>the <a href="https://github.com/gregsadetsky/github-actions-free-analytics/blob/main/.github/workflows/log.yaml">GitHub Actions workflow file is this one</a>. you need to add this workflow file to your repo.</li>
  <li>the workflow file will create a .json file for the web request under <code>.logs</code> and commit that to your repo</li>
</ul>

<h4 id="pros--cons">Pros / Cons</h4>

<p><strong>Cons</strong></p>

<ul>
  <li>this should never be used in production by anyone.</li>
  <li>personal access tokens are… probably not okay to publish on frontend web sites.</li>
  <li>your repo will be littered with .json files for every web request
    <ul>
      <li>((were I to continue pursuing this - and I won’t - I would create a second workflow that runs every 5 minutes, and merges all of the log json files into a single file, as a sort of map/reduce.))</li>
    </ul>
  </li>
</ul>

<p><strong>Pros</strong></p>

<ul>
  <li>you never have to login to Google Analytics again</li>
</ul>

<p>(fin)</p>

  </div>
</article>
      </div>
    </div></div>
  </body>
</html>
