<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/viperproject/prusti-dev">Original</a>
    <h1>Prusti: Static Analyzer for Rust</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto"><a href="https://github.com/viperproject/prusti-dev/actions/workflows/test.yml?query=branch%3Amaster"><img src="https://github.com/viperproject/prusti-dev/actions/workflows/test.yml/badge.svg?branch=master" alt="Test"/></a>
<a href="https://github.com/viperproject/prusti-dev/actions/workflows/deploy.yml?query=branch%3Amaster"><img src="https://github.com/viperproject/prusti-dev/actions/workflows/deploy.yml/badge.svg?branch=master" alt="Deploy"/></a>
<a href="https://codecov.io/gh/viperproject/prusti-dev" rel="nofollow"><img src="https://camo.githubusercontent.com/f5100ee3f1a080925e8f445dfd265b79a6bc3afef1934eb9a5332fa7cf7af9b1/68747470733a2f2f636f6465636f762e696f2f67682f766970657270726f6a6563742f7072757374692d6465762f6272616e63682f6d61737465722f67726170682f62616467652e737667" alt="Test coverage" data-canonical-src="https://codecov.io/gh/viperproject/prusti-dev/branch/master/graph/badge.svg"/></a>
<a href="https://prusti.zulipchat.com/" rel="nofollow"><img src="https://camo.githubusercontent.com/70962afcfd0dc4629b5a92fda4616f620195c09f5bc5c59c8d425d5974eacf6d/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f5a756c69702d6a6f696e5f636861742d627269676874677265656e2e737667" alt="Project chat" data-canonical-src="https://img.shields.io/badge/Zulip-join_chat-brightgreen.svg"/></a></p>
<p dir="auto"><a href="http://www.pm.inf.ethz.ch/research/prusti.html" rel="nofollow">Prusti</a> is a prototype verifier for Rust,
built upon the <a href="http://www.pm.inf.ethz.ch/research/viper.html" rel="nofollow">Viper verification infrastructure</a>.</p>
<p dir="auto">By default Prusti verifies absence of integer overflows and panics by proving that statements such as <code>unreachable!()</code> and <code>panic!()</code> are unreachable.
Overflow checking can be disabled with a configuration flag, treating all integers as unbounded.
In Prusti, the functional behaviour of a function can be specified by using annotations, among which are preconditions, postconditions, and loop invariants.
The tool checks them, reporting error messages when the code does not adhere to the provided specification.</p>
<h2 dir="auto"><a id="user-content-documentation" aria-hidden="true" href="#documentation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Documentation</h2>
<ul dir="auto">
<li>The <a href="https://viperproject.github.io/prusti-dev/user-guide/" rel="nofollow">user guide</a> contains installation instructions, a guided tutorial and a description of various verification features.</li>
<li>The <a href="https://viperproject.github.io/prusti-dev/dev-guide/" rel="nofollow">developer guide</a> contains Prusti details intended to make the project more approachable for new contributors.</li>
</ul>
<p dir="auto">Do you still have questions? Open an issue or contact us on the <a href="https://prusti.zulipchat.com/" rel="nofollow">Zulip chat</a>.</p>
<h2 dir="auto"><a id="user-content-quick-example" aria-hidden="true" href="#quick-example"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Quick example</h2>
<ol dir="auto">
<li>Take the following program:
<div dir="auto" data-snippet-clipboard-copy-content="/// A monotonically increasing discrete function, with domain [0, domain_size)
trait Function {
  fn domain_size(&amp;self) -&gt; usize;
  fn eval(&amp;self, x: usize) -&gt; i32;
}

/// Find the `x` s.t. `f(x) == target`
fn bisect&lt;T: Function&gt;(f: &amp;T, target: i32) -&gt; Option&lt;usize&gt; {
  let mut low = 0;
  let mut high = f.domain_size();
  while low &lt; high {
    let mid = (low + high) / 2;
    let mid_val = f.eval(mid);
    if mid_val &lt; target {
      low = mid + 1;
    } else if mid_val &gt; target {
      high = mid;
    } else {
      return Some(mid)
    }
  }
  None
}"><pre><span>/// A monotonically increasing discrete function, with domain [0, domain_size)</span>
<span>trait</span> <span>Function</span> <span>{</span>
  <span>fn</span> <span>domain_size</span><span>(</span><span>&amp;</span><span>self</span><span>)</span> -&gt; <span>usize</span><span>;</span>
  <span>fn</span> <span>eval</span><span>(</span><span>&amp;</span><span>self</span><span>,</span> <span>x</span><span>:</span> <span>usize</span><span>)</span> -&gt; <span>i32</span><span>;</span>
<span>}</span>

<span>/// Find the `x` s.t. `f(x) == target`</span>
<span>fn</span> <span>bisect</span><span>&lt;</span><span>T</span><span>:</span> <span>Function</span><span>&gt;</span><span>(</span><span>f</span><span>:</span> <span>&amp;</span><span>T</span><span>,</span> <span>target</span><span>:</span> <span>i32</span><span>)</span> -&gt; <span>Option</span><span>&lt;</span><span>usize</span><span>&gt;</span> <span>{</span>
  <span>let</span> <span>mut</span> low = <span>0</span><span>;</span>
  <span>let</span> <span>mut</span> high = f<span>.</span><span>domain_size</span><span>(</span><span>)</span><span>;</span>
  <span>while</span> low &lt; high <span>{</span>
    <span>let</span> mid = <span>(</span>low + high<span>)</span> / <span>2</span><span>;</span>
    <span>let</span> mid_val = f<span>.</span><span>eval</span><span>(</span>mid<span>)</span><span>;</span>
    <span>if</span> mid_val &lt; target <span>{</span>
      low = mid + <span>1</span><span>;</span>
    <span>}</span> <span>else</span> <span>if</span> mid_val &gt; target <span>{</span>
      high = mid<span>;</span>
    <span>}</span> <span>else</span> <span>{</span>
      <span>return</span> <span>Some</span><span>(</span>mid<span>)</span>
    <span>}</span>
  <span>}</span>
  <span>None</span>
<span>}</span></pre></div>
</li>
<li>Run Prusti. You get the following error:
<div data-snippet-clipboard-copy-content="error: [Prusti: verification error] assertion might fail with &#34;attempt to add with overflow&#34;
  --&gt; example.rs:12:15
   |
12 |     let mid = (low + high) / 2;
   |               ^^^^^^^^^^^^

Verification failed"><pre><code>error: [Prusti: verification error] assertion might fail with &#34;attempt to add with overflow&#34;
  --&gt; example.rs:12:15
   |
12 |     let mid = (low + high) / 2;
   |               ^^^^^^^^^^^^

Verification failed
</code></pre></div>
</li>
<li>Fix the buggy line with <code>let mid = low + ((high - low) / 2);</code></li>
<li>Run Prusti. Now the <code>bisect</code> function verifies.</li>
</ol>
<p dir="auto">Congratulations! You just proved absence of panics and integer overflows in the <code>bisect</code> function. To additionally prove that the result is correct (i.e. such that <code>f(x) == target</code>), see <a href="https://github.com/viperproject/prusti-dev/blob/master/prusti-tests/tests/verify_overflow/pass/overflow/bisect.rs">this example</a>.</p>
<h2 dir="auto"><a id="user-content-using-prusti" aria-hidden="true" href="#using-prusti"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Using Prusti</h2>
<p dir="auto">The easiest way to try out Prusti is by using the <a href="https://marketplace.visualstudio.com/items?itemName=viper-admin.prusti-assistant" rel="nofollow">&#34;Prusti Assistant&#34;</a> extension for VS Code.</p>
<p dir="auto">Alternatively, if you wish to use Prusti from the command line there are three options:</p>
<ul dir="auto">
<li>Download the precompiled binaries for Ubuntu, Windows, or MacOS from a <a href="https://github.com/viperproject/prusti-dev/releases">GitHub release</a>.</li>
<li>Compile from the source code, by installing <a href="https://rustup.rs/" rel="nofollow">rustup</a>, running <code>./x.py setup</code> and then <code>./x.py build --release</code>.</li>
<li>(unmaintained) Build a Docker image from this <a href="https://github.com/viperproject/prusti-dev/blob/master/Dockerfile"><code>Dockerfile</code></a>.</li>
</ul>
<p dir="auto">All three options provide the <code>prusti-rustc</code> and <code>cargo-prusti</code> programs that can be used analogously to, respectively, <code>rustc</code> and <code>cargo check</code>.
For more detailed instructions, refer to the guides linked above.</p>
</article>
          </div></div>
  </body>
</html>
