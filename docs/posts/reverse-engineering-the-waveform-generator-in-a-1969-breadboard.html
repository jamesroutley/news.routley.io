<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.righto.com/2022/03/reverse-engineering-waveform-generator.html">Original</a>
    <h1>Reverse-engineering the waveform generator in a 1969 breadboard</h1>
    
    <div id="readability-page-1" class="page"><div id="post-body-563953239488125692" itemprop="description articleBody">


<p>How hard could it be to fix a vintage solderless breadboard that doesn&#39;t quite work?
The &#34;elite 2 circuit design test system&#34; below combined a solderless breadboard with some supporting circuitry: power supplies,
a waveform generator, a pulse generator, switches, and lights.
CuriousMarc found one of these breadboards on eBay, but the function generator didn&#39;t work, so we set out to repair it.</p>
<!-- https://www.google.com/books/edition/EEE/UHNJAQAAIAAJ -->

<p><a href="https://static.righto.com/images/breadboard/breadboard.jpg"><img alt="The E&amp;L Instruments elite 2 solderless breadboard has a variety of supporting circuitry." height="313" src="https://static.righto.com/images/breadboard/breadboard-w500.jpg" title="The E&amp;L Instruments elite 2 solderless breadboard has a variety of supporting circuitry." width="500"/></a></p><p>The E&amp;L Instruments elite 2 solderless breadboard has a variety of supporting circuitry.</p>
<p>I figured that the waveform and pulse generators would be simple circuits, but they turn out to be implemented with
a board crammed full of components, including over 40 transistors.
I reverse-engineered the circuitry and found some interesting circuits inside, including
op-amps implemented from discrete transistors.
This complexity probably explains the shockingly high price of this breadboard:
$1300 in 1969 (equivalent to $10,000 in current dollars).<span id="fnref:brochure"><a href="#fn:brochure">1</a></span></p>
<p><a href="https://static.righto.com/images/breadboard/board-labeled.jpg"><img alt="The circuit board for the function/pulse generator is crammed full of components. The upper part holds the waveform circuitry while the lower part holds the pulse generator." height="457" src="https://static.righto.com/images/breadboard/board-labeled-w500.jpg" title="The circuit board for the function/pulse generator is crammed full of components. The upper part holds the waveform circuitry while the lower part holds the pulse generator." width="500"/></a></p><p>The circuit board for the function/pulse generator is crammed full of components. The upper part holds the waveform circuitry while the lower part holds the pulse generator.</p>
<h2>The waveform generator</h2>
<p>The breadboard has a waveform generator that produces triangle, square, and sine waves over a wide frequency range, up to
1 megahertz.
These waveforms are generated through a complex circuit that charges and discharges an integrator to produce the triangle
wave.
A comparator turns the triangle wave into a square wave.
Finally, a sine-wave shaping network produces a sine wave from the triangle wave.</p>
<h3>Triangle-wave generator</h3>
<p>The oscillator&#39;s frequency is selected by resistors and capacitors.
The faster the capacitor charges through the resistor, the higher the frequency. Thus, increasing the capacitance and resistance
slows the oscillation.
The frequency range knob turns a vintage wafer rotary switch to select one of seven different resistors and capacitors, allowing frequencies over a wide range from
1 Hertz to 1 megahertz. 
A potentiometer adjusts the frequency within the range to provide the exact desired frequency.</p>
<p>The triangle wave is generated from an op-amp integrator circuit, using the approach below.
This circuit uses the capacitor to integrate the input voltage, producing the output voltage.
The result is that the square wave input increases or decreases the output linearly, yielding a triangle wave.
(The op-amp keeps that right side of R1 at ground, so the current that charges the capacitor is proportional to the input voltage.
In contrast, in a simple R-C charging circuit, the capacitor charges exponentially; the charging current drops as the capacitor&#39;s
voltage increases.)</p>
<p><a href="https://static.righto.com/images/breadboard/integrator.jpg"><img alt="A simplified op-amp integrator, based on image by Rutujadeshpande, CC BY-SA 3.0." height="256" src="https://static.righto.com/images/breadboard/integrator-w350.jpg" title="A simplified op-amp integrator, based on image by Rutujadeshpande, CC BY-SA 3.0." width="350"/></a></p>
<p>To make an oscillator, the other piece is a comparator to provide the square wave input to the integrator.
The comparator reverses direction at the top and bottom of the triangle wave, as
shown below.
When the input to the integrator is positive, the integrator output climbs linearly.
This output is fed into the comparator, along with a limit level (red dots).
When the output exceeds the upper limit at &#34;A&#34;, the comparator output becomes negative.
Since the comparator output is used as the integrator input, the integrator now discharges and the signal drops.
When the signal drops below the limit at B, the comparator switches on and the process repeats.
A hysteresis circuit changes the comparator level (dotted red line) at A and B, setting the upper and lower limits of the triangle wave.<span id="fnref:hysteresis"><a href="#fn:hysteresis">2</a></span></p>
<p><a href="https://static.righto.com/images/breadboard/triangle-generation.jpg"><img alt="The triangle-wave generation process." height="267" src="https://static.righto.com/images/breadboard/triangle-generation-w500.jpg" title="The triangle-wave generation process." width="500"/></a></p><p>The triangle-wave generation process.</p>
<p>The comparator is a <a href="https://archive.org/details/bitsavers_tidataBooktrolCircuitsDataBookforDesignEngineers2e_16425287/page/259/mode/1up">710HC</a>, a simple differential comparator integrated circuit introduced by Fairchild around 1965.
This is one of just two integrated circuits on the board.<span id="fnref:710"><a href="#fn:710">3</a></span>
The IC is packaged in an 8-pin circular metal can.
This package was common at the time for analog integrated circuits, as the metal can provided shielding.</p>
<p><a href="https://static.righto.com/images/breadboard/710hc.jpg"><img alt="The 710HC comparator is packaged in a round metal case." height="290" src="https://static.righto.com/images/breadboard/710hc-w300.jpg" title="The 710HC comparator is packaged in a round metal case." width="300"/></a></p><p>The 710HC comparator is packaged in a round metal case.</p>
<h3>Op-amp</h3>
<p>The op-amp is a key component of the integrator.
Although integrated-circuit op-amps date back to <a href="https://spectrum.ieee.org/chip-hall-of-fame-fairchild-semiconductor-a741-opamp">1963</a>,
this board builds op-amps out of discrete components.
The integrator op-amp consists of seven transistors, along with a bunch of resistors and capacitors, as shown below.
The heart of the op-amp is the differential pair (Q30 and Q32), a standard analog circuit.
A fixed current is fed into the differential pair transistors.
If one transistor has a slightly higher input than the other, that transistor turns on and most of the current will go through that transistor.
Thus, the differential pair amplifies the difference between the inputs, the key function of an op-amp.
Additional amplification is provided by Q33, while Q34 and Q35 buffer the dual outputs.</p>
<p><a href="https://static.righto.com/images/breadboard/op-amp.jpg"><img alt="Implementation of an op-amp in the waveform generator." height="338" src="https://static.righto.com/images/breadboard/op-amp-w600.jpg" title="Implementation of an op-amp in the waveform generator." width="600"/></a></p><p>Implementation of an op-amp in the waveform generator.</p>
<p>The output amplifier for the waveform circuit uses another discrete op-amp. This one has two stages of differential pairs for
additional amplification, followed by power transistors to produce a high-current output.
Another op-amp circuit is used in the sine-wave shaper, discussed below.</p>
<h3>Sine-wave shaper</h3>
<p>The board uses a surprising technique to generate sine waves: it synthesizes a sine wave from the triangle wave.
Specifically, a resistor-diode network shapes the sine wave using piecewise-linear segments.
The idea is to use diodes as switches that turn on as the signal level crosses various points.
This adds resistance into the circuit, changing the slope. 
The result is a sine wave with less than 1% distortion.</p>
<p><a href="https://static.righto.com/images/breadboard/sine-shaper.jpg"><img alt="This diagram explains the sine-wave shaping network. From HP Journal, Nov 1965." height="402" src="https://static.righto.com/images/breadboard/sine-shaper-w500.jpg" title="This diagram explains the sine-wave shaping network. From HP Journal, Nov 1965." width="500"/></a></p><p>This diagram explains the sine-wave shaping network. From <a href="https://www.hpl.hp.com/hpjournal/pdfs/IssuePDFs/1965-11.pdf">HP Journal</a>, Nov 1965.</p>
<p>The sine-wave shaper appears to be inspired by the similar circuit in the <a href="https://www.hpl.hp.com/hpjournal/pdfs/IssuePDFs/1965-11.pdf">HP 3300A Function Generator</a>, introduced in 1965.
The schematic below shows the HP 3300A&#39;s sine-wave shaper; the breadboard&#39;s network is similar.
The resistances are carefully chosen to achieve the sine wave.
Similar resistor-diode networks were also used in analog computers to implement arbitrary functions, sometimes with user-adjustable
resistances to change the function.</p>
<p><a href="https://static.righto.com/images/breadboard/diode-network.png"><img alt="The sine-shaping circuit from the HP 3300A is very similar to the circuit in the breadboard. The resistor-diode network is highlighted. The surrounding circuitry biases the network and amplifies the output. From the Service Manual Fig 6-2." height="419" src="https://static.righto.com/images/breadboard/diode-network-w700.png" title="The sine-shaping circuit from the HP 3300A is very similar to the circuit in the breadboard. The resistor-diode network is highlighted. The surrounding circuitry biases the network and amplifies the output. From the Service Manual Fig 6-2." width="700"/></a></p><p>The sine-shaping circuit from the HP 3300A is very similar to the circuit in the breadboard. The resistor-diode network is highlighted. The surrounding circuitry biases the network and amplifies the output. From the <a href="https://radionerds.com/images/4/4c/TM_11-6625-2495-14%26P.PDF">Service Manual</a> Fig 6-2.</p>
<h2>Pulse generator</h2>
<p>The pulse generator produces pulses from 100 ns to 100 ms wide.
These pulses can be triggered by the waveform generator, an external trigger input, or a &#34;one-shot&#34; pushbutton.
The pulse width is controlled by a switch-selectable resistor-capacitor network.</p>
<p>The most unusual part of the pulse generator is how the output circuit adjusts the pulse amplitude.
Instead of simply adjusting the amplification, the circuit changes the voltage that powers the output amplifier.
This variable voltage is produced by an LM305 voltage regulator IC, adjusted by the amplitude knob on the breadboard.
A four-transistor circuit produces the matching negative voltage.<span id="fnref:negative"><a href="#fn:negative">4</a></span>
These voltages power a fairly complex output stage with two circuits.
One circuit produces positive pulses, while the other produces negative pulses.</p>
<p><a href="https://static.righto.com/images/breadboard/lm305a.jpg"><img alt="The LM305A integrated circuit is in an old-fashioned metal can." height="228" src="https://static.righto.com/images/breadboard/lm305a-w300.jpg" title="The LM305A integrated circuit is in an old-fashioned metal can." width="300"/></a></p><p>The LM305A integrated circuit is in an old-fashioned metal can.</p>
<h2>Conclusion</h2>
<p>A prototyping breadboard may seem like a simple product, but everything becomes more complicated when built with 1969 technology.
This breadboard includes a precision waveform generator and power supplies, designed for high accuracy, so it was almost like
having test equipment included.
But these features came at a steep price, equivalent to $10,000 today.</p>
<p>After I reverse-engineered the board,<span id="fnref:reverse"><a href="#fn:reverse">5</a></span> CuriousMarc used the schematic to fix the problems.
The breadboard turned out to be in bad shape with a broken wire, a bunch of bad transistors, and a failed bridge rectifier
in the power supply.<span id="fnref:power-supply"><a href="#fn:power-supply">6</a></span>
It&#39;s unclear why the board had so many problems, more than you&#39;d expect from age alone.
Maybe the power supply over-voltaged the components at some point?
My full schematic for the board is <a href="https://static.righto.com/images/breadboard/schematic.pdf">here</a>.<span id="fnref:disclaimer"><a href="#fn:disclaimer">7</a></span></p>
<p><a href="https://static.righto.com/images/breadboard/bad-transistors.jpg"><img alt="Some of the bad transistors that needed to be replaced." height="330" src="https://static.righto.com/images/breadboard/bad-transistors-w500.jpg" title="Some of the bad transistors that needed to be replaced." width="500"/></a></p><p>Some of the bad transistors that needed to be replaced.</p>
<p>Follow me on Twitter <a href="https://twitter.com/kenshirriff">@kenshirriff</a> for more posts. I also have an <a href="https://www.righto.com/feeds/posts/default">RSS feed</a>.</p>
<h2>Notes and references</h2>


</div></div>
  </body>
</html>
