<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/gue-ni/redstart">Original</a>
    <h1>Show HN: A Lisp Interpreter for Shell Scripting</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/gue-ni/lisp/actions/workflows/build.yml/badge.svg"><img src="https://github.com/gue-ni/lisp/actions/workflows/build.yml/badge.svg" alt="build workflow status"/></a></p>
<p dir="auto">Redstart (named after the <a href="https://en.wikipedia.org/wiki/Common_redstart" rel="nofollow">bird</a>) is
a lightweight Lisp interpreter written in C++ with a focus on shell scripting.
It lets you combine the expressive power of Lisp with the practicality of the
Unix shell: you can run commands, capture output, pipe between processes, and
still use Lisp syntax for logic and structure. Think of it as writing your shell
scripts in Lisp instead of Bash.</p>

<div dir="auto" data-snippet-clipboard-copy-content="bash &lt;(curl -s https://raw.githubusercontent.com/gue-ni/redstart/refs/heads/master/tools/install.sh)"><pre>bash <span><span>&lt;(</span>curl -s https://raw.githubusercontent.com/gue-ni/redstart/refs/heads/master/tools/install.sh<span>)</span></span></pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="# Start the REPL
rst

# Run a script
rst my_script.lsp"><pre><span><span>#</span> Start the REPL</span>
rst

<span><span>#</span> Run a script</span>
rst my_script.lsp</pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="; pipe output of &#39;ls&#39; to &#39;grep&#39;
(pipe (sh ls -la) (sh grep &#34;*.txt&#34;))

; save the output of &#39;cat&#39; to variable &#39;content&#39;
(defvar content ($ (sh cat &#34;my-file.txt&#34;)))

; pipe the output of the function &#39;hello&#39; into the &#39;rev&#39; command
(defun hello (name)
  (strcat &#34;Hello &#34; name &#34;!&#34;))

(pipe (&lt;&lt;&lt; (hello &#34;Jakob&#34;)) (sh rev))
; =&gt; !bokaJ olleH

; eqivalent to &#39;sudo apt update &amp;&amp; sudo apt upgrade -y&#39; in bash
(and (sh sudo apt update) (sh sudo apt upgrade -y))

; define a function that uses &#39;scp&#39; to upload some files to a server
(defun upload (source)
  (let ((user &#34;root&#34;)
        (host &#34;example.com&#34;)
        (target-dir &#34;/var/www/files/&#34;)
        (target (strcat user &#34;@&#34; host &#34;:&#34; target-dir)))
    (sh scp source target)))

; execute &#39;ls&#39; command, capture result
($ (sh ls))

; use _ to access result of last expression, split on newline
(defvar files (split &#34;\n&#34; _))

; upload all files
(for-each upload files)"><pre><span><span>;</span> pipe output of &#39;ls&#39; to &#39;grep&#39;</span>
(pipe (sh ls -la) (sh grep <span><span>&#34;</span>*.txt<span>&#34;</span></span>))

<span><span>;</span> save the output of &#39;cat&#39; to variable &#39;content&#39;</span>
(<span>defvar</span> content ($ (sh cat <span><span>&#34;</span>my-file.txt<span>&#34;</span></span>)))

<span><span>;</span> pipe the output of the function &#39;hello&#39; into the &#39;rev&#39; command</span>
(<span>defun</span> <span>hello</span> (name)
  (strcat <span><span>&#34;</span>Hello <span>&#34;</span></span> name <span><span>&#34;</span>!<span>&#34;</span></span>))

(pipe (&lt;&lt;&lt; (hello <span><span>&#34;</span>Jakob<span>&#34;</span></span>)) (sh rev))
<span><span>;</span> =&gt; !bokaJ olleH</span>

<span><span>;</span> eqivalent to &#39;sudo apt update &amp;&amp; sudo apt upgrade -y&#39; in bash</span>
(<span>and</span> (sh sudo apt update) (sh sudo apt upgrade -y))

<span><span>;</span> define a function that uses &#39;scp&#39; to upload some files to a server</span>
(<span>defun</span> <span>upload</span> (source)
  (<span>let</span> ((user <span><span>&#34;</span>root<span>&#34;</span></span>)
        (host <span><span>&#34;</span>example.com<span>&#34;</span></span>)
        (target-dir <span><span>&#34;</span>/var/www/files/<span>&#34;</span></span>)
        (target (strcat user <span><span>&#34;</span>@<span>&#34;</span></span> host <span><span>&#34;</span>:<span>&#34;</span></span> target-dir)))
    (sh scp source target)))

<span><span>;</span> execute &#39;ls&#39; command, capture result</span>
($ (sh ls))

<span><span>;</span> use _ to access result of last expression, split on newline</span>
(<span>defvar</span> files (split <span><span>&#34;</span><span>\n</span><span>&#34;</span></span> _))

<span><span>;</span> upload all files</span>
(for-each upload files)</pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="; recursive functions
(defun factorial (n)
    (if (= n 0)
        1
        (* n (factorial (- n 1)))))

(factorial 5) ; =&gt; 120"><pre><span><span>;</span> recursive functions</span>
(<span>defun</span> <span>factorial</span> (n)
    (<span>if</span> (<span>=</span> n <span>0</span>)
        <span>1</span>
        (<span>*</span> n (factorial (<span>-</span> n <span>1</span>)))))

(factorial <span>5</span>) <span><span>;</span> =&gt; 120</span></pre></div>
<div dir="auto" data-snippet-clipboard-copy-content="; closures
(defun make-adder (a)
  (lambda (b) (+ a b)))

(defvar add5 (make-adder 5))

(add5 3) ; =&gt; 8"><pre><span><span>;</span> closures</span>
(<span>defun</span> <span>make-adder</span> (a)
  (<span>lambda</span> (b) (<span>+</span> a b)))

(<span>defvar</span> add5 (make-adder <span>5</span>))

(add5 <span>3</span>) <span><span>;</span> =&gt; 8</span></pre></div>

<ul dir="auto">
<li><a href="https://github.com/gue-ni/redstart/blob/master/doc/getting-started.md">Getting Started</a></li>
<li><a href="https://github.com/gue-ni/redstart/blob/master/doc/shell-scripting.md">Shell Scripting</a></li>
</ul>
</article></div></div>
  </body>
</html>
