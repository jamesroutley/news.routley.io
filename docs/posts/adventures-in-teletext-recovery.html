<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/">Original</a>
    <h1>Adventures in Teletext Recovery</h1>
    
    <div id="readability-page-1" class="page"><div>
          
          
          <an-date><p>7 May 2019 | Updated 29 May 2022</p></an-date>
          <p>Before I had Internet access at home, I used to use teletext to get my fix of Digitiser and chess pages. Sometimes a horoscope for my amusement. Using it was as simple as a telephone: type in a 3 digit number, wait a bit and up popped the page of text. It was not a fast medium, and prone to interference, but it worked well. Later on, I would use Freeview&#39;s <abbr title="Multimedia and Hypermedia information coding Expert Group">MHEG-5</abbr> digital text to revise for my GCSEs.</p>
          <p>I always thought that the pages I&#39;d seen were lost to history. After all, there is no offical archive of teletext pages, and I always thought video recorders cropped off the relevant lines from the picture. (Pressing text while watching a videotape does nothing, you see.) But that&#39;s not correct! The teletext lines are indeed recorded onto tape, but the fidelity of VHS isn&#39;t high enough for the teletext decoder to work out the data.</p>
          <p>Thanks to modern PCs, TV capture cards and most importantly of all Alistair Buxton&#39;s <a href="https://github.com/ali1234/vhs-teletext">vhs-teletext software</a>, it is now possible to capture the teletext lines from VHS tape and recover the pages. My nostalgia compels me to try and get some history!</p>
          <p>This post is going to be part what-I-did and part tutorial for anyone else looking to do the same.</p>
          <h3>Installing the Software</h3>
          <p>vhs-teletext needs Python 3, VBI recordings (the part of the picture with teletext data), and ideally Linux. I decided to install Ubuntu 19.04 as it had the latest version of Python, supported my capture card, and worked on the computer I was intending to capture with.</p>
          <p>After installing Ubuntu and cloning the repository from Github, installing the software needed the following commands:</p>
          <an-mono-box>sudo apt install python3-setuptools python3-numpy python3-scipy python3-opengl
sudo python3 setup.py install</an-mono-box>
          <h3>Getting a Capture Card</h3>
          <h4>Attempt One: Compro C100 [SAA7134]</h4>
          <p>I already had a capture card with a Philips SAA7134 chip, so I thought I&#39;d try that first. The VBI device <an-mono>/dev/vbi0</an-mono> was available, and I could see the video picture itself via mplayer. However, all my attempts to record VBI data with this card failed. I suspect it&#39;s down to a configuration issue, and I might&#39;ve been able to modify the SAA7131 file to work with my SAA7134 until...</p>
          <h4>Attempt Two: Pinnacle MiroVideo [bt848]</h4>
          <p>I decided to get my hands on a Brooktree 848 based capture card. Alistair uses a bttv card, so this seemed to be the easiest way to get up and going. I bought it, removed the Compro C100 and inserted this one.</p>
          <p>The card also exposed <an-mono>/dev/vbi0</an-mono>, but I could not get a picture at all through mplayer. It was just a green screen. I learned through dmesg that the bttv driver was attempting to autodetect the card I have, without success. Luckily, it is possible to tell it which one I have with a configuration file. So, in my installation of Ubuntu 19.04, I created a bttv.conf file with these contents:</p>
          <an-mono-box>options card=1 tuner=0 radio=0</an-mono-box>
          <p>One reboot later, I had a picture and VBI data as well. I switched from using composite video to S-Video in order to get a sharper picture. Although my VCR does not transmit any colour information through S-Video, teletext doesn&#39;t use it. It improved the results considerably.</p>
          <h3>Capturing the VBI</h3>
          <p>Use this command to start recording the VBI data to a file:</p>
          <an-mono-box>teletext record -d /dev/vbi0 &gt; your_file.vbi</an-mono-box>
          <p>(If you have more than one capture card installed, the device might not be vbi0.)</p>
          <p>It&#39;s a good idea to capture a few seconds, then inspect the file to make sure you are actually getting something. CTRL-C stops it. You can inspect the recorded VBI data with the command:</p>
          <an-mono-box>teletext vbiview your_file.vbi</an-mono-box>
          <p>This will bring up a window that shows you the recorded VBI lines, two fields at once and stretched vertically for easier viewing. Areas highlighted in green are recognised as potentially being teletext data, red is not. Here are some examples from my recordings:</p>
          <div>
            <an-img-grid>
              <an-img-item>
                <a href="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/vbi1.png">
                  <img src="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/vbi1.png" alt="Blank VBI."/></a>
                <an-caption><p>Blank. There are several possible explanations for this: a problem with the capture card, the input source is wrong, or the video tape you&#39;re capturing doesn&#39;t have any teletext on it. (e.g. a recording from Freeview.)</p></an-caption>
              </an-img-item>
              <an-img-item>
                <a href="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/vbi2.png">
                  <img src="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/vbi2.png" alt="Garbage VBI."/></a>
                <an-caption><p>Teletext data is possibly there, but the signal is all over the place. Check the main video - you will probably find it is noisy. Make sure the tape is OK, the heads are clean and the tracking is correct.</p></an-caption>
              </an-img-item>
            </an-img-grid>
            <an-img-grid>
              <an-img-item>
                <a href="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/vbi3.png">
                  <img src="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/vbi3.png" alt="Misaligned VBI."/></a>
                <an-caption><p>Better, but still not quite right. One of the heads is not reading that bit of the tape perfectly. If you attempt to decode this, you will not get any complete pages.</p></an-caption>
              </an-img-item>
              <an-img-item>
                <a href="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/vbi4.png">
                  <img src="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/vbi4.png" alt="Valid VBI."/></a>
                <an-caption><p>The data is there and all aligned correctly.</p></an-caption>
              </an-img-item>
            </an-img-grid>
          </div>
          <p>If all is good, then you can make a longer capture. Although even a few seconds can yield a whole bunch of pages (one half page per field at 50 fps can add up fast), a 10 minute capture is a good minimum. Recording the whole programme might help the decoding process even more, at a larger time cost.</p>
          <h3>Decoding the Pages</h3>
          <p>Once you have the VBI file, decoding the data can be done with this command:</p>
          <an-mono-box>teletext deconvolve your_file.vbi &gt; your_file.t42</an-mono-box>
          <p>Be warned, this is the slowest part of the whole process. It seems it can be sped up with a CUDA compatible graphics card, but I don&#39;t have one.</p>
          <p>When the decoding is done, you can try to make the stream more accurate. Teletext pages are repeated over and over again. By comparing all given instances of a particular page, a &#34;most likely&#34; version can be generated. This is why a long recording can be better. The command to do this is:</p>
          <an-mono-box>teletext squash your_file.t42 &gt; your_file_squashed.t42</an-mono-box>
          <p>If you want to get an overview of the pages within your decoded t42 file, you can filter out all the first/header rows:</p>
          <an-mono-box>teletext filter -r 0 your_file.t42</an-mono-box>
          <p>And to view a page, you can use:</p>
          <an-mono-box>teletext filter -p 100 your_file.t42</an-mono-box>
          <p>Every single version of the page within the stream will be shown.</p>
          <h3>Interesting Finds</h3>
          <p>Here is a selection of some pages I thought were amusing.</p>
          <div>
            <an-img-grid>
              <an-img-item>
                <a href="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/01.png">
                  <img src="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/01.png" alt="Digitiser front page."/></a>
              </an-img-item>
              <an-img-item>
                <a href="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/02.png">
                  <img src="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/02.png" alt="Digitiser article."/></a>
              </an-img-item>
            </an-img-grid>
            <an-caption><p>I did find one complete Digitiser set during this experiment. You can find more Digitiser content at <a href="https://superpage58.com">Super Page 58</a>.</p></an-caption>
            <an-img-grid>
              <an-img-item>
                <a href="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/03.png">
                  <img src="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/03.png" alt="Westcountry region teletext index page."/></a>
              </an-img-item>
              <an-img-item>
                <a href="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/04.png">
                  <img src="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/04.png" alt="Local birthday greetings."/></a>
              </an-img-item>
            </an-img-grid>
            <an-caption><p>I completely forgot about the old ITV Westcountry region branding and idents.</p></an-caption>
            <an-img-grid>
              <an-img-item>
                <a href="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/05.png">
                  <img src="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/05.png" alt="BBC diet clinic."/></a>
              </an-img-item>
              <an-img-item>
                <a href="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/06.png">
                  <img src="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/06.png" alt="BBC stop and search procedures."/></a>
              </an-img-item>
            </an-img-grid>
            <an-caption><p>Pages from BBC&#39;s internal teletext service Telfax were occasionally broadcast within data packets alongside Ceefax.</p></an-caption>
            <an-img-grid>
              <an-img-item>
                <a href="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/07.png">
                  <img src="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/07.png" alt="Oracle animated steam train test page."/></a>
              </an-img-item>
              <an-img-item>
                <a href="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/08.png">
                  <img src="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/08.png" alt="Mysterious teletext log page 6AA."/></a>
              </an-img-item>
            </an-img-grid>
            <an-caption><p>An Oracle test page testing &#39;hold&#39; graphics, and a Teletext status log. I don&#39;t know what it means.</p></an-caption>
            <an-img-grid>
              <an-img-item>
                <a href="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/09.png">
                  <img src="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/09.png" alt="Sauce index page."/></a>
              </an-img-item>
              <an-img-item>
                <a href="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/10.png">
                  <img src="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/10.png" alt="Preview of Babylon 5."/></a>
              </an-img-item>
            </an-img-grid>
            <an-caption><p>The front page of the short-lived teen magazine Sauce, and a 4-Tel preview of Babylon 5.</p></an-caption>
            <an-img-grid>
              <an-img-item>
                <a href="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/11.png">
                  <img src="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/11.png" alt="CBBC Studio 9 index page."/></a>
              </an-img-item>
              <an-img-item>
                <a href="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/12.png">
                  <img src="https://www.andrewnile.co.uk/blog/adventures-in-teletext-recovery/12.png" alt="Blue Peter index page."/></a>
              </an-img-item>
            </an-img-grid>
            <an-caption><p>CBBC: Studio 9 and Blue Peter.</p></an-caption>
          </div>
          <p>All teletext page contents are © their relevent owners (BBC, Oracle, and Teletext).</p>
          <p>This was a nostalgic experience, and there are at least 400 more hours of tape to sift through. Even the gaps between two different recorded programmes can uncover lost pages, so everything must be watched. I might revisit this topic with more screens in the future.</p>
          
          <h3>Updates!</h3>
          <p>I originally wrote this article in 2019, when I was still relatively new to teletext recovery. I have checked over the instructions, and they are still valid for the current version of <an-mono>vhs-teletext</an-mono>.</p>
          <p>I have also added a few more screens to this page, but you can find lots more from a wide variety of services in <a href="https://archive.teletextarchaeologist.org">The Teletext Archaeologist&#39;s archive.</a></p>
          <p><a href="https://www.andrewnile.co.uk/blog/">Return to Blog Index</a></p>
        </div></div>
  </body>
</html>
