<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://abe.today/blogs/main/floppy8-a-tiny-computer-in-a-floppy-drive">Original</a>
    <h1>Floppy8 – A Tiny Computer, in a Floppy Drive (2023)</h1>
    
    <div id="readability-page-1" class="page"><div itemprop="articleBody">
          <p>This post covers the design and creation of the Floppy8, a microcomputer and cartridge system which fits inside a floppy drive.</p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/Screenshot_from_2023-02-23_15-07-54_600x600.png?v=1677186494" alt=""/></p>
<p>To see it in action, checkout this video!</p>
<p><iframe src="https://www.youtube.com/embed/zvp-eqWCjGU" title="Floppy8 Demo" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="" width="337" height="600" frameborder="0"></iframe></p>
<p>The Floppy8 plays 4K movies and games on custom cartridges, features wireless controllers, status lights, motorized cartridge ejection and more!</p>
<p>Similar to a Famicon or Super Nintendo, the cartridge sticks out, allowing the label to still be partially visible. The front button safely unmounts and ejects the cart when pressed. The RGB indicator LED flashes different colors for waiting, mounting, running and error states.</p>
<p>The wireless controllers are modified off-the-shelf NES clones which have a beige color and replaced d-pads along with extra added weights for that premium feel.</p>
<h2>How (and why) I Made It</h2>
<p><span>Please note: This post contains affiliate links to many of the parts used in this build!</span></p>
<p>If you&#39;re like me, you often find yourself browsing Ebay (the online auction site) for weird items in the middle of the night (the time that isn&#39;t day) . One evening, while searching for floppy drives, I came across this little gorgeous little guy</p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/s-l1600_240x240.jpg?v=1676999242" alt=""/><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/s-l16002_240x240.jpg?v=1676999255" alt=""/></p>
<p>Strangely, the listing identified it as an <a href="https://www.google.com/search?tbm=isch&amp;q=amiga%201010&amp;tbs=imgo:1" target="_blank" rel="noopener noreferrer">Amiga 1010 disk drive</a>. Maybe it is? But it doesn&#39;t look like one and I can not find anything that looks similar to it. The mystery intrigued me slightly, but the beautifully simple industrial design intrigued me more. </p>
<h2>Week 0: The Plan</h2>
<p>I had a simple dream for this project...</p>
<ol>
<li>Design a new physical media format that hit a mix of nostalgia and practicality</li>
<li>Mount some computer inside the case to read that media</li>
<li>Design a drive that had a satisfying tactical feel when inserting a cartridge / floppy</li>
<li>Replace the status LED</li>
<li>Replace the mechanical front-eject button with one to eject the new cart type</li>
<li>Leave all original pieces unmodified so they could be put back if needed</li>
<li>Make it actually practical to use and enjoy!</li>
</ol>
<p>On paper a simple task, in practice this project tested my patience and was one of the hardest things I&#39;ve ever done. As someone who has never done any really practical 3D printing... or electrical engineering... or anything - we had a lot to tackle.</p>
<h2>Week 1: It&#39;s real small</h2>
<p>Once the drive finally arrived, I realized how small it really was (which implies that if it <i>is</i> some Amiga 1010 variant that it&#39;s probably a late model due to its scale).</p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/tiny_600x600.png?v=1677002508" alt=""/></p>
<p>The device shipped from Australia and still has a &#34;Bruining Headlam Computers&#34; sticker on it, I assume this is from when it was last serviced many decades ago. This did not help in solving the mystery of what this drive actually was, but I kept the sticker for nostalgia and to keep with my goal of being able to restore the drive to it&#39;s original state if needed.</p>
<p>Although it was about 105mm by 43mm and around 5&#34; deep the real concern for me was the height of the floppy disk hole in the front cover. I knew I needed to retain this part so whatever new disk / cartridge format I invented would need to fit within this narrow slow. Luckily, this drive has a slightly taller than average hole, which allows our new cartridges about 4mm of height to play with.</p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/floppy8_240x240.png?v=1677002638" alt=""/> <img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/floppy8-2_240x240.png?v=1677002653" alt="" width="224" height="180"/></p>
<p>The other mind-blowing thing was the amazing condition of the device. It looked almost new, with just a few hints of wear. I was as careful as possible to avoid new scratches, dings or other tarnish as I began work on the device.</p>
<p>Sadly over the weeks of working with this device, some of the paint around the front has some very small chips. This saddens me, but I&#39;ll be even more careful in the future.</p>
<h2>Week 2: We need Cartridges</h2>
<p>Before I could begin laying out any internals, I needed a sense of how the new physical media would work so designing the new media / floppy / cartridge (whatever you&#39;d like to call it) was the top concern in the first few days. I needed to validate that I could manufacture something which was only 4mm tall and held some form of flash media <i>and</i> fit my aesthetic goals. </p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/floppy-circuit_240x240.png?v=1677002986" alt=""/><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/floppy-circuit-2_240x240.png?v=1677003001" alt="" width="233" height="237"/></p>
<p>Wow! My brother&#39;s designs, visually, looked fantastic. They replicted the original disks very closely and they were easy to manufacture. </p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/cart-0_480x480.png?v=1677003044" alt=""/></p>
<p>The initial prototype was compelling. I used the free tool, <a href="https://penpot.app">Penpot</a> to modify existing art for a game and printed a label on a cart I designed. Initially, I intended to use small USB flash memory sticks embedded in the cart, but I found that the square edges of a USB make it hard to align into a socket (more on this later). They were also slow when benchmarked and just kinda ugly. I would soon pivot to embedding micro SD cards in the 3D printed carts - which works well. </p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/cart_480x480.gif?v=1677003075" alt=""/> </p>
<p>The cart design was finalized pretty quickly and aside from small fit tweaks the design stayed the same from early on. It was a nice constant to have and a good motivator to hold and look at during frustrating days. </p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/carts_480x480.png?v=1677003603" alt=""/></p>
<p>Around this same time, I also began work on the software which would power the computer. I initially began with a Raspbian base (when I thought I would use a Raspberry Pi) and began customizing it to my liking, reducing the desktop UI, changing splash screens, etc.</p>
<p>I knew I would need a fair bit of logic to recognize the insertion of the carts, mount them, run an autostart, then once the program exited or the eject button was pressed it needed to attempt to safely kill the program (if that failed, non-safely kill it) then unmount the drive and trigger a servo to eject the cart. While this was happening it would also be updating the front LED to indicate the device&#39;s status.</p>
<p>Originally, I wrote the code as <a href="https://gist.github.com/abeisgoat/b0567184214297cbfe2b2912d132f848" title="a bash script">a bash script</a> and this worked fine until I had many signals coming from different places (e.g. a program exit or eject button press may trigger the eject process). I eventually gave up and wrote the whole software stack in Node and used <a href="https://www.npmjs.com/package/firmata">firmata</a> to talk to the Arduino hardware. </p>
<p>In order to get the LED status to indicate an inserted, but unmounted cart, I used dmesg to read the kernel logs early and reflect insertion before the cart was mounted. I then used fairly straight forward logic to handle cart, LED, and program status.</p>
<p>The final setup requires each cart to have <strong></strong><em>autostart.sh</em> and an <em>autokill.sh</em> along with any binaries / media it needs. Ideally those scripts will boot the program then safely kill it once the eject button is pressed, but it will also force quit if the program hangs.</p>
<p>The software never changed much after this point, just tweaks to make it more reliable.</p>
<p>However, what did change a lot after this point was my approach to getting a Micro SD card reader to fit in the small gap inside the carts where the edge connector of the Micro SD card sticks out.</p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/Screenshot_from_2023-02-23_16-42-43_480x480.png?v=1677192177" alt=""/></p>
<p>After buying and ripping apart a dozen or so SD card readers, I finally found this incredibly tiny USB-C reader which fits perfectly in the gap in the cart. Designing the rest of the drive bay would mean figuring out how to mount this card reader while also aligning the rest of the cart properly so it would smoothly insert when pushed in.</p>
<p>This wasn&#39;t <em>that</em> hard but did involve a lot of prototyping as tolerances on 3D printers are not great, so even though something was modeled to fit, that was no guarantee.</p>
<h2>Week 3-6: So many unknowns...</h2>
<p>Once I had a mostly-finished cart design I had to begin prototyping the computer, I knew I had a few big unknowns I had to explore. Some easier than others - but all challenges none-the-less.</p>
<ol>
<li>Is a Raspberry Pi powerful enough to do everything I want to do?</li>
<li>How can I create an eject mechanism for the cartridges?</li>
<li>How can I control the front-facing LED?</li>
<li>Do I need fans?</li>
<li>Will the metal case block wifi?</li>
<li>How will I fit all the wires?</li>
</ol>
<p>Let&#39;s start at the beginning...</p>
<h3>Is a Raspberry Pi powerful enough to do everything I want to do?</h3>
<p>No - they are not. My initial tests showed the Pi of <i>barely</i> being capable of playing 4K video and definitely not at an acceptable framerate. In my tests, emulator and game performance was terrible for anything but the oldest consoles. This made me question all the Raspberry Pi emulator devices around - either my hardware / software was just terrible or folks aren&#39;t really playing those devices much.</p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/latte-panda_480x480.png?v=1677003630" alt=""/></p>

<h3>How can I create an eject mechanism for the cartridges?</h3>
<p>I knew early on that I wanted the device to be able to &#34;eject&#34; carts. I experimented with many types of spring-loaded mechanisms, latches, etc but in the end I ended up simply placing a servo with a cog which rotates and pushes the cart out. The actual implementation was simple, but getting power to the servo was tricky. I tried various electircal-engineery ways to get a high amperage 5v line for the servo, but nothing worked. At one point I thought I&#39;d put a battery pack inside the device which would be kept charged and used only for the high-amp spikes for the servo, but somehow in testing I managed to miswire that and burn up the servo. So my final decision was to pull from the 5v line on the LattePanda but put a 0.4amp fuse to protect the board in the case of a jammed servo causing an amperage spike and harming the board. In practice this has worked perfectly fine and despite jams / etc the fuse has never tripped and the board has never shown any issue.</p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/servo_480x480.png?v=1677003666" alt=""/></p>
<h3>How can I control the front-facing LED?</h3>
<p>Controlling an RGB LED is, apparently, trivial.</p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/led_480x480.png?v=1677003693" alt=""/></p>
<p>After soldering up some resistors (for some reason, idk it&#39;s what the internet said) you can control the colors straight from a couple PWM pins on an Arduino. This worked quickly and reliably. The terrible mess pictured above was replaced by a nicer heat-shrunk LED later, but the first attempt also worked, it was just ugly.</p>
<h3>Do I need fans?</h3>
<p>Early on, I did some heat stress testing by placing the Latte Panda inside the case and completely blocking the front and back with scrap plastic.</p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/heat_480x480.png?v=1677003722" alt=""/></p>
<p>I let the device sit playing 4K video for several hours. The Latte Panda kept a steady 69c internal temp. Warm, but reasonable. The metal case works as a decent radiator and helps expell the warmth into the surrounding air. This was not completely similar to the final build, but it was close enough that I was confident the onboard fan would keep the device cool enough. </p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/heat2_480x480.png?v=1677003743" alt=""/></p>
<p>This was not informative, but it was cool to look at.</p>
<h3>Will the metal case block wifi?</h3>
<p>This is a quick one - no. Nice.</p>
<h3>How will I fit all the wires?</h3>
<p>I ended up crimping many custom wires for this project. I invested in some <a href="https://amzn.to/3kA3n3G">nice wire</a> for another project and used it all over this one. I also bought a <a href="https://amzn.to/3Dcs2lh">wire-stripper</a> and a <a href="https://amzn.to/3H1vr7M">crimp kit</a>. The most critical and difficult wire to create was the short USB-C wire which attached the Micro SD reader for the carts to the USB headers on the Latte Panda.</p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/wire_480x480.png?v=1677003772" alt=""/></p>
<p>This required soldering to a small <a href="https://amzn.to/3wrefUm">USB-C female port</a>.</p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/usbc_240x240.png?v=1677003792" alt=""/></p>
<p>Most of the other wires were simple - just short :)</p>
<h2>Week 7-10: 3D Printing!</h2>
<p>As the prototyping of core elements began to subside it became time to begin iterating on the most complex element of the Floppy8, the designs for the internal brackets / drive which would actually hold all the components securely.</p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/3d-breakout_600x600.png?v=1677003823" alt=""/></p>
<p>As I mentioned before, I used Tinkercad for all the CAD work. This screenshot shows a small percentage of all the digital artifacts of this build. In total I would design and print 201 STL files for this project. Slowly tweaking and iterating fits, tolerance, feels - not to mention iterating on the overall designs as needs came up. </p>
<ol>
<li>
<b>Button (Dark Grey)</b> - This is used to replace the stock front button with one which has a short throw and flairs at the bottom.</li>
<li>
<b>Button Mount (Orange)</b> - This bracket holds the small circuit board which the front button is mounted to.</li>
<li>
<b>Cover Mount (Red)</b> - The original front cover and the button mount screw to this bracket. It has additional holes to attach it to the cart shifter.</li>
<li>
<b>Cart Shifter (Light Blue)</b> - This L shaped piece has two feet on the backside which the Latte Panda rests on and a slight slope on the front to help shift the cart upward and into the actual bay.</li>
<li>
<b>Drive Bay (Brown)</b> - This holds the actual cart when inserted along with the Micro SD card reader. It also serves as a mount for the Servo bracket (Pink) and LED bracket (Light Purple / Beige).</li>
<li>
<b>Servo Bracket (Pink)</b> - This bracket holds the micro-sized servo and screws to the Drive Bay and Cover Mount to add rigidity.</li>
<li>
<b>LED Bracket (Beige and Light Purple)</b> - This wraps about the LED assembly and holds it against the Cover Mount while being screwed to the Drive Bay.</li>
<li>
<b>Rear Bracket (Yellow)</b> - This bracket has the feet for the rear Latte Panda screw holes and also has a mount point for the power switch in the top left. It also has screw holes for the back cover.</li>
<li>
<b>Back Cover (Green)</b> - This cover / vent serve as the back plate for the device.</li>
<li>
<b>Port Cover (Orange)</b> - This removable port cover has carefully cut holes for the USB-C and HDMI ports on the Latte panda, but because the ports are a bit sunk into the device, the piece pops out in case the cables need to go deeper than the plate allows.</li>
<li>
<b>Metal Rods (Dark Grey)</b> - These pieces are made from 3mm risers which have been screwed together to the proper length, then sealed in heat-shrink tubing. They are included in the model for context.</li>
</ol>
<p>It&#39;s worth nothing all the parts are printed without supports except the Cover Mount which has those small corners cut out to allow for the heads of screws to attach to the metal riser rods. As that corner is an unsupported overhand on two sides, it needed supports.</p>
<h2>Week 11: Assembly</h2>
<p>As I printed I would attempt to put pieces together, iterate, print again. I learned to design pieces to be small to save print time and slowly over weeks the device started to emerge.</p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/near-final-assembly_480x480.png?v=1677003861" alt=""/></p>
<p>With some assembly working correctly, I was able to check how the Floppy8 would feel with a cart inserted. I wanted it to resemble a Super Nintendo or a Famicom, with the cart label still visible when inserted.</p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/fit_480x480.png?v=1677003887" alt=""/></p>
<p>One of the last elements to sort out was how to mount the internal switch for the front button (and how to replace the front button with one which matched the plastic of the front cover). I tried various options to recreate the visible element of the button, I tried making a mold and casting it in resin, etc. I eventually just printed it and resigned to sanding it smooth. I also found <a href="https://amzn.to/3EDmlOa">these adorable PCBs</a> on Amazon which are perfect to mount a single button.</p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/Screenshot_from_2023-02-23_15-49-17_480x480.png?v=1677188971" alt=""/></p>
<p>I like this close up because it helps to show how fucked up projects are when you look at them up close. In real life the Floppy8 looks fantastic because it fits in the original shell, but up close the internals have lots of bits which were printed bad or screw holes I had to drill out or whatever. These things aren&#39;t as perfect as photos make them look, so don&#39;t get down on yourself if your project isn&#39;t perfect.</p>
<p>Anyway, after getting these last elements sorted the whole thing felt fantastic to me - it felt real. I kept iterating then one day, like the flip of a switch, I realized we were almost done. I reprinted all the existing parts in black to help reduce unintended internal LED glow and began putting together the final bits.</p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/assembly_600x600.png?v=1677003908" alt=""/></p>
<p>Putting all the pieces together, including a lot of wire crimping, we ended up with a functional but unhoused Floppy8.</p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/assembled_600x600.png?v=1677003936" alt=""/></p>
<p>Testing at this point confirmed that our cartridges were read, the servo ejects them, the LED reflects the status, it all worked. Perhaps amazingly it also all fit in the case.</p>
<h2>Week 12: Final Polish and Controllers</h2>
<p>As the final bits and bobs began to line up I was finally able to do some real testing for heat, cartridge seating, and ~vibe~.</p>
<p>Heat wise, amazingly, even with all the junk in the case the Latte Panda stayed cool. However, there are some air vents directly below the cartridge slot which pump a lot of heat up around the cart. Originally the SD cart reader was mounted in the place with hot glue... you can see where this is going.</p>
<p>Aside from dripping glue down onto the Panda (which luckily missed the fan by a few mil) the glue was also prone to shifting over the course of a long gaming session or film. I redesigned the cartridge slot as two parts, one which aligns the carts and one which firmly holds the SD reader.</p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/Screenshot_from_2023-02-23_15-44-05_480x480.png?v=1677188782" alt=""/></p>
<p>This redesign made the feel of inserting a cart <em>way</em> better.</p>
<p>I also took this opportunity to work on input devices! I picked up this pair of <a href="https://amzn.to/3Kxryur">clone NES controllers</a>. I also purchase the official Nintendo Switch Bluetooth NES controllers, but the after-market clones are actually beige, not grey like the official ones - so I opted to go with those.</p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/Screenshot_from_2023-02-24_13-25-46_480x480.png?v=1677266875" alt=""/></p>
<p>I made a few small modifications to the controllers. I replaced the cheap looking matte d-pad with the one from the official controllers so it had the imprinted arrows and felt more premium. Then I took a note out of the book of toy-makers I added a bunch of weight to the controller to make it feel more real.</p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/Screenshot_from_2023-02-24_13-27-09_480x480.png?v=1677266988" alt=""/></p>
<p>I glued in a ton of ball bearings and tbh this makes way more difference than you&#39;d think! The other very small detail was the light bleed from the connection LED.</p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/Screenshot_from_2023-02-24_13-26-48_480x480.png?v=1677266981" alt=""/></p>
<p>This small detail highlighted the cheapness / thinness of the plastic, so I used a small piece of heat-shrink tubing around the LED to help focus the light.</p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/Screenshot_from_2023-02-24_13-26-57_480x480.png?v=1677267126" alt=""/></p>
<p>It&#39;s another super tiny detail, but it makes everything feel more polished.</p>
<p>I also purchased a replacement <a href="https://amzn.to/3XTj6Ja">Fire TV remote</a> (which is just bluetooth and works great with Linux) along with an after-market beige shell for it.</p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/Screenshot_from_2023-02-24_13-34-44_240x240.png?v=1677267398" alt=""/></p>
<p>Sadly the shell is shipping from China and has a ~2mo wide delivery window. So it hasn&#39;t arrived yet. When it does, I&#39;ll look into removing branding from the remote&#39;s buttons and replacing the shell so we have a proper remote! I considered buying an actual old beige remote, but they realistically didn&#39;t have all the buttons I wanted, but if I find the right one, I may migrate the insides of the Fire TV remote to a whole new home in something truly retro!</p>
<h2>Anyway, we&#39;re done...</h2>
<p>Finally after weeks of tweaking, ups and down, frustrations and almost giving up at least once a day for weeks, it was done.</p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/Screenshot_from_2023-02-23_15-10-03_600x600.png?v=1677186628" alt=""/></p>
<p>I was able to sit, watch a film, play a game, etc. I made a lot of mistakes, wasted a lot of filament, but at the end of the day I&#39;m very proud that I kept pushing and didn&#39;t give up. I&#39;ll probably never use the Floppy8 much, but I&#39;m proud to have it on my desk.</p>
<p><img src="https://cdn.shopify.com/s/files/1/0688/6146/0502/files/IMG_4722_600x600.jpg?v=1677189226" alt=""/></p>
<p>Thanks for reading and happy hacking!</p>
        </div></div>
  </body>
</html>
