<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://andregarzia.com/2025/03/why-i-choose-lua-for-this-blog.html">Original</a>
    <h1>Why I chose Lua for this blog</h1>
    
    <div id="readability-page-1" class="page"><article>
        <div itemprop="articleBody">
          
          
          
<p>This blog used to run using with a stack based on <a href="https://racket-lang.org/">Racket</a> using <a href="https://docs.racket-lang.org/pollen/">Pollen</a> and <a href="https://andregarzia.com/2022/05/How-this-blog-works-or-embracing-chaos.html">lots of hacks on top of it</a>. At some point I realised that my setup was working against me. The moving parts and workflow I created added too much friction to keep my blog active. That happened mostly because it was a static generator trying to behave as if it was dynamic website with an editing interface. That can be done really well — cue <a href="https://getgrav.org/">Grav CMS</a> — but that was not the case for me.</p>
<p>Once I decided to rewrite this blog as a simpler system, I faced the dilema of what stack to choose. The obvious choice for me would be Javascript, it is the language I use more often and one that I am quite confortable with. Still, I don&#39;t think it is a wise choice for the kind of blog I want to maintain.</p>
<p>Talking to some friends recently, I noticed that many people I know that have implemented their own blogging systems face many challenges keeping them running over many years. Not because it is hard to keep software running, but because their stack of choice is moving faster than their codebase.</p>
<p>This problem is specially prevalent in the Javascript world. It is almost a crime that JS as understood by the browser is this beautiful language with extreme retrocompatibility, while JS as understood and used by the current tooling and workflows is this mess moving at lightspeed. Let me unpack that for a bit.</p>
<p>You can open a web page from 1995 on your browser of choice and it will just work because browser vendors try really hard to make sure they don&#39;t break the web.</p>
<p>Developers who built the whole ecosystem of NodeJS, NPM, and all those libraries and frameworks don&#39;t share the same ethos. They all make a big case of semantic versioning and thus being able to handle breaking changes, but they have breaking changes all the time. You&#39;d be hardpressed to actually run some JS code from ten years ago based on NodeJS and NPM. There is a big chance that dependencies might be gone, broken, or it might be incompatible with the current NodeJS.</p>
<blockquote>
<p>I know this sounds like FUD, and that for many many projects, maybe even most projects, that will not be the case. But I heard from many people that keeping their blogging systems up to date requires a lot more work than they would like to do and if they don&#39;t, then they&#39;re screwed.</p>
</blockquote>
<p>That is also true about other languages even though many of them move at a slower speed. A friend recently complained about a blogging system he implemented that requires Ruby 2.0 and that keeping that running sucks.</p>
<p>I want a simpler blogging system; one that requires minimal changes over time.</p>
<h3>Now we talk about Lua</h3>
<p><a href="https://lua.org">Lua</a> is a wonderful and nimble language that is <a href="https://andregarzia.com/2021/01/lua-a-misunderstood-language.html">often misunderstood</a>.</p>
<p>One characteristic that I love about it, is that is evolves very slowly. Lua 5.1 was introduced in 2006, Lua 5.4 which is the current version initial release was in 2020. Yes, there are point released in between, but you can see how much slower it moves when compared to JS.</p>
<p>The differences between Lua 5.1 and Lua 5.4 are minimal when compared with how much other languages changed in the same time period.</p>
<p>Lua only requires a C89 compiler to bootstrap itself. It is very easy to make Lua work and even easier to make it interface with something.</p>
<p>JS is a lot larger than Lua, there is more to understand and more to remember. My blog needs are very simple and Lua can handle them with ease.</p>
<h2>How this blog works</h2>
<p>This is an old-school blog. I uses <a href="https://en.wikipedia.org/wiki/Common_Gateway_Interface">cgi-bin</a> — aka Comon Gateway Interface — scripts to run it. It is a dynamic website with a <a href="https://sqlite.org">SQLite</a> database holding its data. When you open a page, it fetches the data from a database and assembles a HTML to send to the browser using <a href="https://luarocks.org/modules/olivine-labs/lustache">Mustache</a> templates.</p>
<p>One process per request. Like the old days.</p>
<p>You might argue that if I went with NodeJS, I&#39;d be able to serve more requests using fewer resources. That is true. I don&#39;t need to serve that many requests though. My peak access was a couple years ago with 50k visitors on a week, even my old Racket blog could handle that fine. The Lua one should handle it too; and if it breaks it breaks. I&#39;m a flawed human being, my code can be flawed too, we&#39;re in this together, holding hands.</p>
<p>Your blog is your place to experiment and program how you want it. You can drop the JS fatigue, you can drop your fancy Haskell types, you can just do whatever you find fun and keep going (and that includes JS and Haskell if that&#39;s your thing. You do you).</p>
<p>Cause I&#39;m using Lua, I don&#39;t have as many libraries and frameworks available to me as JS people have, but I still have quite a large collection via <a href="https://luarocks.org">Luarocks</a>. I try not to add many dependencies to my blog. At the moment there are about ten and that is mostly because Lua is a batteries-not-included language so you start from a minimal core and build things up to suit your needs.</p>
<p>For a lot of things I went with the questionable choice of implementing things myself. I got my own little CGI library. It is 200 lines long and does the bare minimum to make this blog work. I got my own little libraries for many things. <a href="https://www.w3.org/TR/micropub/">Micropub</a> and <a href="https://indieauth.net/">IndieAuth</a> were all implemented by hand.</p>
<p>At the moment I&#39;m <strike>despairing</strike> <strike>frustrated</strike> having a lot of fun implementing <a href="https://indieweb.org/Webmention">WebMentions</a>. Doing the <a href="https://microformats.org/wiki/microformats2">Microformats2</a> <strike>exorcism</strike> extraction on my own is teaching me a lot of things.</p>
<p>What I want to say is that by choosing a small language that moves very slowly and very few dependencies, I can keep all of my blogging system in my head. I can make sure it will run without too much change for the next ten or twenty years.</p>
<blockquote>
<p>Lua is a lego set, a toolkit, it adapts to you and your needs. I don&#39;t need to keep chasing the new shiny or the latest framework du jour. I can focus on making the features I want and actually understanding how they work.</p>
</blockquote>
<p>Instead of installing a single dependency in another language and it pulling a hundred of other small dependencies all of which were transpiled into something the engine understands to the point that understanding how all the pieces work and fit together takes more time than to learn a new language, I decided to keep things simple.</p>
<p>I got 29 Luarocks installed here and that is for all my Lua projects in this machine. That is my blog, my game development, my own work scripts for my day job. Not even half of those are for my blog.</p>
<p>I often see wisdom in websites such as Hacker News and Lobsters around the idea of &#34;choosing boring&#34; because it is proven, safe, easier to maintain. I think that boring is not necessarily applicable to my case. I don&#39;t find Lua boring at all, but all that those blog posts talk about that kind of mindset are all applicable to my own choices here.</p>
<p>Next time you&#39;re building your own blogging software, consider for a bit for how long do you want to maintain it. I first started blogging on macOS 8 in 2001. I choose badly many times and in the end couldn&#39;t keep my content moving forward in time with me as softwares I used or created became impossible to run. The last two changes: from JS to Racket and from Racket to Lua have been a lot safer and I managed to carry all my content forward into increasingly simpler setups and workflows.</p>
<p>My blogging system is not becoming more complex over the years, it is becoming smaller, because with each change I select a stack that is more nimble and smaller than the one I had before. I don&#39;t think I can go smaller than Lua though.</p>
<p>By small I mean:</p>
<ul>
<li>A language I can fully understand and keep on my head.</li>
<li>A language that I know how to build the engine and can do it if needed.</li>
<li>An engine that requires very few resources and is easy to interface with third-party libraries in native code.</li>
</ul>
<p>I chose Lua because of all that, and I&#39;m happy with it and hope this engine will see me through the next ten or so years.</p>

        </div>
      </article></div>
  </body>
</html>
