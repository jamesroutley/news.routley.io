<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/inkeliz/karmem">Original</a>
    <h1>Karmem: A fast binary serialization format faster than Google Flatbuffers</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto">Karmem is a fast binary serialization format. The priority of Karmem is to be
easy to use while been fast as possible. It&#39;s optimized to take Golang and
TinyGo&#39;s maximum performance and is efficient for repeatable reads, reading
different content of the same type. Karmem has proven to be ten times faster
than Google Flatbuffers, with the additional overhead of bounds-checking
included.</p>
<blockquote>
<p dir="auto"><g-emoji alias="warning" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/26a0.png">‚ö†Ô∏è</g-emoji> Karmem still under development, the API is not stable. However, serialization-format itself is unlike to change and
should remain backward compatible with older versions.</p>
</blockquote>

<ul dir="auto">
<li><a href="#Motivation"><g-emoji alias="monocle_face" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f9d0.png">üßê</g-emoji> Motivation</a></li>
<li><a href="#Usage"><g-emoji alias="brain" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f9e0.png">üß†</g-emoji> Usage</a></li>
<li><a href="#Benchmark"><g-emoji alias="runner" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f3c3.png">üèÉ</g-emoji> Benchmark</a></li>
<li><a href="#Languages"><g-emoji alias="earth_americas" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f30e.png">üåé</g-emoji>Languages</a></li>
<li><a href="#Schema"><g-emoji alias="orange_book" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4d9.png">üìô</g-emoji> Schema</a>
<ul dir="auto">
<li>Example</li>
<li>Types</li>
<li>Structs</li>
<li>Enum</li>
</ul>
</li>
<li><a href="#Generator"><g-emoji alias="hammer_and_wrench" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f6e0.png">üõ†Ô∏è</g-emoji> Generator</a></li>
<li><a href="#Security"><g-emoji alias="lock" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f512.png">üîí</g-emoji> Security</a></li>
</ul>

<p dir="auto">Karmem was create to solve one single issue: make easy to transfer data between WebAssembly host and guest. While still
portable for non-WebAssembly languages. We are experimenting with an &#34;event-command pattern&#34; between wasm-host and
wasm-guest in one project, but sharing data is very expensive, and FFI calls are not cheap either. Karmem encodes once
and shares the same content with multiple guests, regardless of the language, making it very efficient. Also, even using
Object-API to decode, it&#39;s fast enough, and Karmem was designed to take advantage of that pattern, avoid allocations,
and re-use the same struct for multiple data.</p>
<p dir="auto">Why not use <a href="https://github.com/jedisct1/witx-codegen">Witx</a>? It is good project and aimed to WASM, however it seems
more complex and defines not just data-structure, but functions, which I&#39;m trying to avoid. Also, it is not intended to
be portable to non-wasm. Why not use <a href="https://google.github.io/flatbuffers/" rel="nofollow">Flatbuffers</a>? We tried, but it&#39;s not fast
enough and also causes panics due to the lack of bound-checking. Why not use <a href="https://capnproto.org/" rel="nofollow">Cap&#39;n&#39;Proto</a>? It&#39;s
a good alternative but lacks implementation for Zig and AssemblyScript, which is top-priority, it also have more
allocations and the generated API is harder to use, compared than Karmem.</p>

<p dir="auto">That is a small example of how use Karmem.</p>
<h3 dir="auto"><a id="user-content-schema" aria-hidden="true" href="#schema"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Schema</h3>
<div data-snippet-clipboard-copy-content="karmem app @golang.package(`app`);  
  
enum SocialNetwork uint8 { Unknown; Facebook; Instagram; Twitter; TikTok; }  
  
struct ProfileData table {  
    Network SocialNetwork;  
    Username []char;  
    ID uint64;  
}  
  
struct Profile inline {  
    Data ProfileData;  
}  
  
struct AccountData table {  
    ID uint64;  
    Email []char;  
    Profiles []Profile;  
}"><pre><span>karmem</span> <span>app</span> @<span>golang</span>.<span>package</span>(<span>`app`</span>);  
  
<span>enum</span> <span>SocialNetwork</span> <span>uint8</span> { <span>Unknown</span>; <span>Facebook</span>; <span>Instagram</span>; <span>Twitter</span>; <span>TikTok</span>; }  
  
<span>struct</span> <span>ProfileData</span> <span>table</span> {  
    <span>Network</span> <span>SocialNetwork</span>;  
    <span>Username</span> []<span>char</span>;  
    <span>ID</span> <span>uint64</span>;  
}  
  
<span>struct</span> <span>Profile</span> <span>inline</span> {  
    <span>Data</span> <span>ProfileData</span>;  
}  
  
<span>struct</span> <span>AccountData</span> <span>table</span> {  
    <span>ID</span> <span>uint64</span>;  
    <span>Email</span> []<span>char</span>;  
    <span>Profiles</span> []<span>Profile</span>;  
}</pre></div>
<p dir="auto">Generate the code using <code>go run karmem.org/cmd/karmem build --golang -o &#34;km&#34; app.km</code>.</p>
<h3 dir="auto"><a id="user-content-encoding" aria-hidden="true" href="#encoding"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Encoding</h3>
<p dir="auto">In order to encode, use should create an native struct and then encode it.</p>
<div data-snippet-clipboard-copy-content="var writerPool = sync.Pool{New: func() any { return karmem.NewWriter(1024) }}

func main() {
	var writer = writerPool.Get().(*karmem.Writer)

	content := app.AccountData{
		ID:    42,
		Email: &#34;example@email.com&#34;,
		Profiles: []app.Profile{
			{Data: app.ProfileData{
				Network:  app.SocialNetworkFacebook,
				Username: &#34;inkeliz&#34;,
				ID:       123,
			}},
			{Data: app.ProfileData{
				Network:  app.SocialNetworkFacebook,
				Username: &#34;karmem&#34;,
				ID:       231,
			}},
			{Data: app.ProfileData{
				Network:  app.SocialNetworkInstagram,
				Username: &#34;inkeliz&#34;,
				ID:       312,
			}},
		},
	}

	if _, err := content.WriteAsRoot(writer); err != nil {
		panic(err)
	}

	encoded := writer.Bytes()
	_ = encoded // Do something with encoded data

	writer.Reset()
	writerPool.Put(writer)
}"><pre><span>var</span> <span>writerPool</span> <span>=</span> sync.<span>Pool</span>{<span>New</span>: <span>func</span>() <span>any</span> { <span>return</span> <span>karmem</span>.<span>NewWriter</span>(<span>1024</span>) }}

<span>func</span> <span>main</span>() {
	<span>var</span> <span>writer</span> <span>=</span> <span>writerPool</span>.<span>Get</span>().(<span>*</span>karmem.<span>Writer</span>)

	<span>content</span> <span>:=</span> app.<span>AccountData</span>{
		<span>ID</span>:    <span>42</span>,
		<span>Email</span>: <span>&#34;example@email.com&#34;</span>,
		<span>Profiles</span>: []app.<span>Profile</span>{
			{<span>Data</span>: app.<span>ProfileData</span>{
				<span>Network</span>:  <span>app</span>.<span>SocialNetworkFacebook</span>,
				<span>Username</span>: <span>&#34;inkeliz&#34;</span>,
				<span>ID</span>:       <span>123</span>,
			}},
			{<span>Data</span>: app.<span>ProfileData</span>{
				<span>Network</span>:  <span>app</span>.<span>SocialNetworkFacebook</span>,
				<span>Username</span>: <span>&#34;karmem&#34;</span>,
				<span>ID</span>:       <span>231</span>,
			}},
			{<span>Data</span>: app.<span>ProfileData</span>{
				<span>Network</span>:  <span>app</span>.<span>SocialNetworkInstagram</span>,
				<span>Username</span>: <span>&#34;inkeliz&#34;</span>,
				<span>ID</span>:       <span>312</span>,
			}},
		},
	}

	<span>if</span> <span>_</span>, <span>err</span> <span>:=</span> <span>content</span>.<span>WriteAsRoot</span>(<span>writer</span>); <span>err</span> <span>!=</span> <span>nil</span> {
		<span>panic</span>(<span>err</span>)
	}

	<span>encoded</span> <span>:=</span> <span>writer</span>.<span>Bytes</span>()
	<span>_</span> <span>=</span> <span>encoded</span> <span>// Do something with encoded data</span>

	<span>writer</span>.<span>Reset</span>()
	<span>writerPool</span>.<span>Put</span>(<span>writer</span>)
}</pre></div>
<h3 dir="auto"><a id="user-content-reading" aria-hidden="true" href="#reading"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Reading</h3>
<p dir="auto">Instead of decoding it to another struct, you can read some fields directly, without any additional decoding. In this
example, we only need the username of each profile.</p>
<div data-snippet-clipboard-copy-content="func decodes(encoded []byte) {
	reader := karmem.NewReader(encoded)
	account := app.NewAccountDataViewer(reader, 0)

	profiles := account.Profiles(reader)
	for i := range profiles {
		fmt.Println(string(profiles[i].Data(reader).Username(reader)))
	}
}"><pre><span>func</span> <span>decodes</span>(<span>encoded</span> []<span>byte</span>) {
	<span>reader</span> <span>:=</span> <span>karmem</span>.<span>NewReader</span>(<span>encoded</span>)
	<span>account</span> <span>:=</span> <span>app</span>.<span>NewAccountDataViewer</span>(<span>reader</span>, <span>0</span>)

	<span>profiles</span> <span>:=</span> <span>account</span>.<span>Profiles</span>(<span>reader</span>)
	<span>for</span> <span>i</span> <span>:=</span> <span>range</span> <span>profiles</span> {
		<span>fmt</span>.<span>Println</span>(<span>string</span>(<span>profiles</span>[<span>i</span>].<span>Data</span>(<span>reader</span>).<span>Username</span>(<span>reader</span>)))
	}
}</pre></div>
<p dir="auto">Notice, we use <code>NewAccountDataViewer</code>, any <code>Viewer</code> is just a Viewer, and doesn&#39;t copy the backend data.</p>
<h3 dir="auto"><a id="user-content-decoding" aria-hidden="true" href="#decoding"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Decoding</h3>
<p dir="auto">You can also decode it to an existent struct. In some cases, it&#39;s better if you re-use the same struct for multiples
reads.</p>
<div data-snippet-clipboard-copy-content="var accountPool = sync.Pool{New: func() any { return new(app.AccountData) }}

func decodes(encoded []byte) {
	account := accountPool.Get().(*app.AccountData)
	account.ReadAsRoot(karmem.NewReader(encoded))

	profiles := account.Profiles
	for i := range profiles {
		fmt.Println(profiles[i].Data.Username)
	}

	accountPool.Put(account)
}"><pre><span>var</span> <span>accountPool</span> <span>=</span> sync.<span>Pool</span>{<span>New</span>: <span>func</span>() <span>any</span> { <span>return</span> <span>new</span>(app.<span>AccountData</span>) }}

<span>func</span> <span>decodes</span>(<span>encoded</span> []<span>byte</span>) {
	<span>account</span> <span>:=</span> <span>accountPool</span>.<span>Get</span>().(<span>*</span>app.<span>AccountData</span>)
	<span>account</span>.<span>ReadAsRoot</span>(<span>karmem</span>.<span>NewReader</span>(<span>encoded</span>))

	<span>profiles</span> <span>:=</span> <span>account</span>.<span>Profiles</span>
	<span>for</span> <span>i</span> <span>:=</span> <span>range</span> <span>profiles</span> {
		<span>fmt</span>.<span>Println</span>(<span>profiles</span>[<span>i</span>].<span>Data</span>.<span>Username</span>)
	}

	<span>accountPool</span>.<span>Put</span>(<span>account</span>)
}</pre></div>

<h3 dir="auto"><a id="user-content-flatbuffers-vs-karmem" aria-hidden="true" href="#flatbuffers-vs-karmem"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Flatbuffers vs Karmem</h3>
<p dir="auto">Using similar schema with Flatbuffers and Karmem. Karmem is almost 10 times faster than Google Flatbuffers.</p>
<p dir="auto"><strong>Native (MacOS/ARM64 - M1):</strong></p>
<div data-snippet-clipboard-copy-content="name               flatbuffers/op    karmem/op    delta
EncodeObjectAPI-8    1.46ms ¬± 0%    0.32ms ¬± 0%   -78.22%  (p=0.008 n=5+5)
DecodeObjectAPI-8    2.16ms ¬± 0%    0.15ms ¬± 0%   -93.14%  (p=0.008 n=5+5)
DecodeSumVec3-8       887¬µs ¬± 1%      99¬µs ¬± 1%   -88.86%  (p=0.008 n=5+5)

name               flatbuffers/op   karmem/op   delta
EncodeObjectAPI-8    12.1kB ¬± 0%     0.0kB       -100.00%  (p=0.008 n=5+5)
DecodeObjectAPI-8    2.74MB ¬± 0%    0.03MB ¬± 0%   -98.83%  (p=0.008 n=5+5)
DecodeSumVec3-8       0.00B          0.00B           ~     (all equal)    

name               flatbuffers/op  karmem/op  delta
EncodeObjectAPI-8     1.00k ¬± 0%     0.00k       -100.00%  (p=0.008 n=5+5)
DecodeObjectAPI-8      108k ¬± 0%        1k ¬± 0%   -99.07%  (p=0.008 n=5+5)
DecodeSumVec3-8        0.00           0.00           ~     (all equal)"><pre><code>name               flatbuffers/op    karmem/op    delta
EncodeObjectAPI-8    1.46ms ¬± 0%    0.32ms ¬± 0%   -78.22%  (p=0.008 n=5+5)
DecodeObjectAPI-8    2.16ms ¬± 0%    0.15ms ¬± 0%   -93.14%  (p=0.008 n=5+5)
DecodeSumVec3-8       887¬µs ¬± 1%      99¬µs ¬± 1%   -88.86%  (p=0.008 n=5+5)

name               flatbuffers/op   karmem/op   delta
EncodeObjectAPI-8    12.1kB ¬± 0%     0.0kB       -100.00%  (p=0.008 n=5+5)
DecodeObjectAPI-8    2.74MB ¬± 0%    0.03MB ¬± 0%   -98.83%  (p=0.008 n=5+5)
DecodeSumVec3-8       0.00B          0.00B           ~     (all equal)    

name               flatbuffers/op  karmem/op  delta
EncodeObjectAPI-8     1.00k ¬± 0%     0.00k       -100.00%  (p=0.008 n=5+5)
DecodeObjectAPI-8      108k ¬± 0%        1k ¬± 0%   -99.07%  (p=0.008 n=5+5)
DecodeSumVec3-8        0.00           0.00           ~     (all equal)
</code></pre></div>
<p dir="auto"><strong>WebAssembly on Wazero (MacOS/ARM64 - M1):</strong></p>
<div data-snippet-clipboard-copy-content="name               flatbuffers/op    karmem/op    delta
EncodeObjectAPI-8    10.1ms ¬± 0%     2.5ms ¬± 0%  -75.27%  (p=0.016 n=4+5)
DecodeObjectAPI-8    31.1ms ¬± 0%     1.2ms ¬± 0%  -96.18%  (p=0.008 n=5+5)
DecodeSumVec3-8      4.44ms ¬± 0%    0.47ms ¬± 0%  -89.41%  (p=0.008 n=5+5)

name               flatbuffers/op   karmem/op   delta
EncodeObjectAPI-8    3.02kB ¬± 0%    3.02kB ¬± 0%     ~     (all equal)
DecodeObjectAPI-8    2.16MB ¬± 0%    0.01MB ¬± 0%  -99.45%  (p=0.008 n=5+5)
DecodeSumVec3-8      1.25kB ¬± 0%    1.25kB ¬± 0%     ~     (all equal)

name               flatbuffers/op  karmem/op  delta
EncodeObjectAPI-8      4.00 ¬± 0%      4.00 ¬± 0%     ~     (all equal)
DecodeObjectAPI-8      5.00 ¬± 0%      5.00 ¬± 0%     ~     (all equal)
DecodeSumVec3-8        5.00 ¬± 0%      5.00 ¬± 0%     ~     (all equal)"><pre><code>name               flatbuffers/op    karmem/op    delta
EncodeObjectAPI-8    10.1ms ¬± 0%     2.5ms ¬± 0%  -75.27%  (p=0.016 n=4+5)
DecodeObjectAPI-8    31.1ms ¬± 0%     1.2ms ¬± 0%  -96.18%  (p=0.008 n=5+5)
DecodeSumVec3-8      4.44ms ¬± 0%    0.47ms ¬± 0%  -89.41%  (p=0.008 n=5+5)

name               flatbuffers/op   karmem/op   delta
EncodeObjectAPI-8    3.02kB ¬± 0%    3.02kB ¬± 0%     ~     (all equal)
DecodeObjectAPI-8    2.16MB ¬± 0%    0.01MB ¬± 0%  -99.45%  (p=0.008 n=5+5)
DecodeSumVec3-8      1.25kB ¬± 0%    1.25kB ¬± 0%     ~     (all equal)

name               flatbuffers/op  karmem/op  delta
EncodeObjectAPI-8      4.00 ¬± 0%      4.00 ¬± 0%     ~     (all equal)
DecodeObjectAPI-8      5.00 ¬± 0%      5.00 ¬± 0%     ~     (all equal)
DecodeSumVec3-8        5.00 ¬± 0%      5.00 ¬± 0%     ~     (all equal)
</code></pre></div>
<h3 dir="auto"><a id="user-content-raw-struct-vs-karmem" aria-hidden="true" href="#raw-struct-vs-karmem"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Raw-Struct vs Karmem</h3>
<p dir="auto">The performance is nearly the same when comparing reading non-serialized data from a native struct and reading it from a
karmem-serialized data.</p>
<p dir="auto"><strong>Native (MacOS/ARM64 - M1):</strong></p>
<div data-snippet-clipboard-copy-content="name             old time/op    new time/op    delta
DecodeSumVec3-8    93.7¬µs ¬± 0%    98.8¬µs ¬± 1%  +5.38%  (p=0.008 n=5+5)

name             old alloc/op   new alloc/op   delta
DecodeSumVec3-8     0.00B          0.00B         ~     (all equal)

name             old allocs/op  new allocs/op  delta
DecodeSumVec3-8      0.00           0.00         ~     (all equal)"><pre><code>name             old time/op    new time/op    delta
DecodeSumVec3-8    93.7¬µs ¬± 0%    98.8¬µs ¬± 1%  +5.38%  (p=0.008 n=5+5)

name             old alloc/op   new alloc/op   delta
DecodeSumVec3-8     0.00B          0.00B         ~     (all equal)

name             old allocs/op  new allocs/op  delta
DecodeSumVec3-8      0.00           0.00         ~     (all equal)
</code></pre></div>
<h3 dir="auto"><a id="user-content-karmem-vs-karmem" aria-hidden="true" href="#karmem-vs-karmem"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Karmem vs Karmem</h3>
<p dir="auto">That is an comparison with all supported languages.</p>
<p dir="auto"><strong>WebAssembly on Wazero (MacOS/ARM64 - M1):</strong></p>
<div data-snippet-clipboard-copy-content="name \ time/op     result/wasi-go-km.out  result/wasi-as-km.out  result/wasi-zig-km.out  result/wasi-c-km.out  result/wasi-swift-km.out
DecodeSumVec3-8               470¬µs ¬± 0%             932¬µs ¬± 0%              231¬µs ¬± 0%            230¬µs ¬± 0%              97822¬µs ¬± 5%
DecodeObjectAPI-8            1.19ms ¬± 0%            3.70ms ¬± 0%             0.62ms ¬± 0%           0.56ms ¬± 0%              74.72ms ¬± 4%
EncodeObjectAPI-8            2.52ms ¬± 0%            2.98ms ¬± 2%             0.71ms ¬± 0%           0.67ms ¬± 0%              42.45ms ¬± 7%

name \ alloc/op    result/wasi-go-km.out  result/wasi-as-km.out  result/wasi-zig-km.out  result/wasi-c-km.out  result/wasi-swift-km.out
DecodeSumVec3-8              1.25kB ¬± 0%           12.72kB ¬± 0%             1.25kB ¬± 0%           1.25kB ¬± 0%               2.99kB ¬± 0%
DecodeObjectAPI-8            11.9kB ¬± 1%            74.2kB ¬± 0%            164.3kB ¬± 0%            1.2kB ¬± 0%              291.7kB ¬± 3%
EncodeObjectAPI-8            3.02kB ¬± 0%           38.38kB ¬± 0%             1.23kB ¬± 0%           1.23kB ¬± 0%               2.98kB ¬± 0%

name \ allocs/op   result/wasi-go-km.out  result/wasi-as-km.out  result/wasi-zig-km.out  result/wasi-c-km.out  result/wasi-swift-km.out
DecodeSumVec3-8                5.00 ¬± 0%              5.00 ¬± 0%               5.00 ¬± 0%             5.00 ¬± 0%                35.00 ¬± 0%
DecodeObjectAPI-8              5.00 ¬± 0%              4.00 ¬± 0%               4.00 ¬± 0%             4.00 ¬± 0%                35.00 ¬± 0%
EncodeObjectAPI-8              4.00 ¬± 0%              3.00 ¬± 0%               3.00 ¬± 0%             3.00 ¬± 0%                33.00 ¬± 0%"><pre><code>name \ time/op     result/wasi-go-km.out  result/wasi-as-km.out  result/wasi-zig-km.out  result/wasi-c-km.out  result/wasi-swift-km.out
DecodeSumVec3-8               470¬µs ¬± 0%             932¬µs ¬± 0%              231¬µs ¬± 0%            230¬µs ¬± 0%              97822¬µs ¬± 5%
DecodeObjectAPI-8            1.19ms ¬± 0%            3.70ms ¬± 0%             0.62ms ¬± 0%           0.56ms ¬± 0%              74.72ms ¬± 4%
EncodeObjectAPI-8            2.52ms ¬± 0%            2.98ms ¬± 2%             0.71ms ¬± 0%           0.67ms ¬± 0%              42.45ms ¬± 7%

name \ alloc/op    result/wasi-go-km.out  result/wasi-as-km.out  result/wasi-zig-km.out  result/wasi-c-km.out  result/wasi-swift-km.out
DecodeSumVec3-8              1.25kB ¬± 0%           12.72kB ¬± 0%             1.25kB ¬± 0%           1.25kB ¬± 0%               2.99kB ¬± 0%
DecodeObjectAPI-8            11.9kB ¬± 1%            74.2kB ¬± 0%            164.3kB ¬± 0%            1.2kB ¬± 0%              291.7kB ¬± 3%
EncodeObjectAPI-8            3.02kB ¬± 0%           38.38kB ¬± 0%             1.23kB ¬± 0%           1.23kB ¬± 0%               2.98kB ¬± 0%

name \ allocs/op   result/wasi-go-km.out  result/wasi-as-km.out  result/wasi-zig-km.out  result/wasi-c-km.out  result/wasi-swift-km.out
DecodeSumVec3-8                5.00 ¬± 0%              5.00 ¬± 0%               5.00 ¬± 0%             5.00 ¬± 0%                35.00 ¬± 0%
DecodeObjectAPI-8              5.00 ¬± 0%              4.00 ¬± 0%               4.00 ¬± 0%             4.00 ¬± 0%                35.00 ¬± 0%
EncodeObjectAPI-8              4.00 ¬± 0%              3.00 ¬± 0%               3.00 ¬± 0%             3.00 ¬± 0%                33.00 ¬± 0%
</code></pre></div>

<p dir="auto">Currently, we have focus on WebAssembly, and because of that those are the languages supported:</p>
<ul dir="auto">
<li>AssemblyScript</li>
<li>Golang/TinyGo</li>
<li><del>Swift/SwiftWasm</del></li>
<li>Zig</li>
<li>C</li>
</ul>
<h3 dir="auto"><a id="user-content-features" aria-hidden="true" href="#features"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Features</h3>
<table>
<thead>
<tr>
<th>Features</th>
<th>Golang</th>
<th>Zig</th>
<th>AssemblyScript</th>
<th>Swift</th>
<th>C</th>
</tr>
</thead>
<tbody>
<tr>
<td>Performance</td>
<td>Good</td>
<td>Excellent</td>
<td>Good</td>
<td>Horrible</td>
<td>Excellent</td>
</tr>
<tr>
<td>Priority</td>
<td>High</td>
<td>High</td>
<td>High</td>
<td>Low</td>
<td>High</td>
</tr>
<tr>
<td><strong>Encoding</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Object Encoding</td>
<td><g-emoji alias="heavy_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2714.png">‚úîÔ∏è</g-emoji></td>
<td><g-emoji alias="heavy_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2714.png">‚úîÔ∏è</g-emoji></td>
<td><g-emoji alias="heavy_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2714.png">‚úîÔ∏è</g-emoji></td>
<td><g-emoji alias="heavy_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2714.png">‚úîÔ∏è</g-emoji></td>
<td><g-emoji alias="heavy_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2714.png">‚úîÔ∏è</g-emoji></td>
</tr>
<tr>
<td>Raw Encoding</td>
<td><g-emoji alias="x" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png">‚ùå</g-emoji></td>
<td><g-emoji alias="x" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png">‚ùå</g-emoji></td>
<td><g-emoji alias="x" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png">‚ùå</g-emoji></td>
<td><g-emoji alias="x" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png">‚ùå</g-emoji></td>
<td><g-emoji alias="x" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png">‚ùå</g-emoji></td>
</tr>
<tr>
<td>Zero-Copy</td>
<td><g-emoji alias="x" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png">‚ùå</g-emoji></td>
<td><g-emoji alias="x" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png">‚ùå</g-emoji></td>
<td><g-emoji alias="x" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png">‚ùå</g-emoji></td>
<td><g-emoji alias="x" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png">‚ùå</g-emoji></td>
<td><g-emoji alias="x" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png">‚ùå</g-emoji></td>
</tr>
<tr>
<td><strong>Decoding</strong></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Object Decoding</td>
<td><g-emoji alias="heavy_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2714.png">‚úîÔ∏è</g-emoji></td>
<td><g-emoji alias="heavy_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2714.png">‚úîÔ∏è</g-emoji></td>
<td><g-emoji alias="heavy_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2714.png">‚úîÔ∏è</g-emoji></td>
<td><g-emoji alias="heavy_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2714.png">‚úîÔ∏è</g-emoji></td>
<td><g-emoji alias="heavy_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2714.png">‚úîÔ∏è</g-emoji></td>
</tr>
<tr>
<td>Object Re-Use</td>
<td><g-emoji alias="heavy_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2714.png">‚úîÔ∏è</g-emoji></td>
<td><g-emoji alias="heavy_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2714.png">‚úîÔ∏è</g-emoji></td>
<td><g-emoji alias="heavy_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2714.png">‚úîÔ∏è</g-emoji></td>
<td><g-emoji alias="x" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png">‚ùå</g-emoji></td>
<td><g-emoji alias="heavy_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2714.png">‚úîÔ∏è</g-emoji></td>
</tr>
<tr>
<td>Random-Access</td>
<td><g-emoji alias="heavy_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2714.png">‚úîÔ∏è</g-emoji></td>
<td><g-emoji alias="heavy_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2714.png">‚úîÔ∏è</g-emoji></td>
<td><g-emoji alias="heavy_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2714.png">‚úîÔ∏è</g-emoji></td>
<td><g-emoji alias="heavy_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2714.png">‚úîÔ∏è</g-emoji></td>
<td><g-emoji alias="heavy_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2714.png">‚úîÔ∏è</g-emoji></td>
</tr>
<tr>
<td>Zero-Copy</td>
<td><g-emoji alias="heavy_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2714.png">‚úîÔ∏è</g-emoji></td>
<td><g-emoji alias="heavy_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2714.png">‚úîÔ∏è</g-emoji></td>
<td><g-emoji alias="heavy_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2714.png">‚úîÔ∏è</g-emoji></td>
<td><g-emoji alias="x" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png">‚ùå</g-emoji></td>
<td><g-emoji alias="heavy_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2714.png">‚úîÔ∏è</g-emoji></td>
</tr>
<tr>
<td>Native Array</td>
<td><g-emoji alias="heavy_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2714.png">‚úîÔ∏è</g-emoji></td>
<td><g-emoji alias="heavy_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2714.png">‚úîÔ∏è</g-emoji></td>
<td><g-emoji alias="x" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png">‚ùå</g-emoji></td>
<td><g-emoji alias="x" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png">‚ùå</g-emoji></td>
<td><g-emoji alias="heavy_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2714.png">‚úîÔ∏è</g-emoji></td>
</tr>
</tbody>
</table>

<p dir="auto">Karmem uses a custom schema language, which defines structs, enums and types.</p>
<h3 dir="auto"><a id="user-content-example" aria-hidden="true" href="#example"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example</h3>
<p dir="auto">The schema is very simple to understand and define:</p>
<div data-snippet-clipboard-copy-content="karmem game @golang.package(`km`) @assemblyscript.import(`../../assemblyscript/karmem`);

enum Team uint8 {Humans;Orcs;Zombies;Robots;Aliens;}

struct Vec3 inline {
    X float32;
    Y float32;
    Z float32;
}

struct MonsterData table {
    Pos Vec3;
    Mana int16;
    Health int16;
    Name []char;
    Team Team;
    Inventory [&lt;128]byte;
    Hitbox [4]float64;
    Status []int32;
    Path [&lt;128]Vec3;
}

struct Monster inline {
    Data MonsterData;
}

struct State table {
    Monsters [&lt;2000]Monster;
}"><pre>karmem <span>game</span> @<span>golang</span>.<span>package</span>(<span>`km`</span>) @<span>assemblyscript</span>.<span>import</span>(<span>`../../assemblyscript/karmem`</span>);

<span>enum</span> <span>Team</span> <span>uint8</span> {<span>Humans</span>;<span>Orcs</span>;<span>Zombies</span>;<span>Robots</span>;<span>Aliens</span>;}

<span>struct</span> <span>Vec3</span> <span>inline</span> {
    <span>X</span> <span>float32</span>;
    <span>Y</span> <span>float32</span>;
    <span>Z</span> <span>float32</span>;
}

<span>struct</span> <span>MonsterData</span> <span>table</span> {
    <span>Pos</span> <span>Vec3</span>;
    <span>Mana</span> <span>int16</span>;
    <span>Health</span> <span>int16</span>;
    <span>Name</span> []<span>char</span>;
    <span>Team</span> <span>Team</span>;
    <span>Inventory</span> [<span>&lt;</span><span>128</span>]<span>byte</span>;
    <span>Hitbox</span> [<span>4</span>]<span>float64</span>;
    <span>Status</span> []<span>int32</span>;
    <span>Path</span> [<span>&lt;</span><span>128</span>]<span>Vec3</span>;
}

<span>struct</span> <span>Monster</span> <span>inline</span> {
    <span>Data</span> <span>MonsterData</span>;
}

<span>struct</span> <span>State</span> <span>table</span> {
    <span>Monsters</span> [<span>&lt;</span><span>2000</span>]<span>Monster</span>;
}</pre></div>
<h3 dir="auto"><a id="user-content-header" aria-hidden="true" href="#header"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Header:</h3>
<p dir="auto">Every file must begin with: <code>karmem {name};</code>, other optional options can be defined, as shown above.</p>
<h3 dir="auto"><a id="user-content-types" aria-hidden="true" href="#types"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Types:</h3>
<p dir="auto"><strong>Primitives</strong>:</p>
<ul dir="auto">
<li>Unsigned Integers:
<code>uint8</code>, <code>uint16</code>, <code>uint32</code>, <code>uint64</code></li>
<li>Signed Integers:
<code>int8</code>, <code>int16</code>, <code>int32,</code> <code>int64</code></li>
<li>Floats:
<code>float32</code>, <code>float64</code></li>
<li>Boolean:
<code>bool</code></li>
<li>Byte:
<code>byte</code>, <code>char</code></li>
</ul>
<p dir="auto">It&#39;s not possible to defined optional or nullable types.</p>
<p dir="auto"><strong>Arrays</strong>:</p>
<ul dir="auto">
<li>Fixed:
<code>[{Length}]{Type}</code> (example: <code>[123]uint16</code>, <code>[3]float32</code>)</li>
<li>Dynamic:
<code>[]{Type}</code> (example: <code>[]char</code>, <code>[]uint64</code>)</li>
<li>Limited:
<code>[&lt;{Length}]{Type}</code> (example: <code>[&lt;512]float64</code>, <code>[&lt;42]byte</code>)</li>
</ul>
<p dir="auto">It&#39;s not possible to have slice of tables or slices of enums or slice of slices. However, it&#39;s possible to wrap those
types inside one inline-struct.</p>
<h3 dir="auto"><a id="user-content-struct" aria-hidden="true" href="#struct"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Struct:</h3>
<p dir="auto">Currently, Karmem has two structs types: inline and table.</p>
<p dir="auto"><strong>Inline:</strong>
Inline structs, as the name suggests, are inlined when used. That reduces the size and may improve the performance.
However, it can&#39;t have their definition changed. In order words: you can&#39;t edit the description of one inline struct
without breaking compatibility.</p>
<div data-snippet-clipboard-copy-content="struct Vec3 inline {
X float32;
Y float32;
Z float32;
}"><pre><span>struct</span> <span>Vec3</span> <span>inline</span> {
<span>X</span> <span>float32</span>;
<span>Y</span> <span>float32</span>;
<span>Z</span> <span>float32</span>;
}</pre></div>
<p dir="auto"><em>That struct is exactly the same of <code>[3]float32</code> and will have the same serialization result. Because of that, any
change of this struct (for instance, change it to <code>float64</code> or adding new fields) will break the compatibility.</em></p>
<p dir="auto"><strong>Tables:</strong>
Tables can be used when backward compatibility matters. For example, tables can have new fields append at the bottom
without breaking compatibility.</p>
<div data-snippet-clipboard-copy-content="struct User table {
Name []char;
Email []char;
Password []char;
}"><pre><span>struct</span> <span>User</span> <span>table</span> {
<span>Name</span> []<span>char</span>;
<span>Email</span> []<span>char</span>;
<span>Password</span> []<span>char</span>;
}</pre></div>
<p dir="auto">Let&#39;s consider that you need another field... For tables, it&#39;s not an issue:</p>
<div data-snippet-clipboard-copy-content="struct User table {
Name []char;
Email []char;
Password []char;
Telephone []char;
}"><pre><span>struct</span> <span>User</span> <span>table</span> {
<span>Name</span> []<span>char</span>;
<span>Email</span> []<span>char</span>;
<span>Password</span> []<span>char</span>;
<span>Telephone</span> []<span>char</span>;
}</pre></div>
<p dir="auto">Since it&#39;s a table, you can add new fields at the bottom of the struct, and both versions are compatible between them.</p>
<h3 dir="auto"><a id="user-content-enums" aria-hidden="true" href="#enums"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Enums:</h3>
<p dir="auto">Enums can be used as an alias to Integers type, such as <code>uint8</code>.</p>
<div data-snippet-clipboard-copy-content="enum Team uint8 {
Unknown;
Humans;
Orcs;
Zombies = 255;
}"><pre><code>enum Team uint8 {
Unknown;
Humans;
Orcs;
Zombies = 255;
}
</code></pre></div>
<p dir="auto">Enums must start with a zero value, the default value in all cases. If the value of any enum is omitted, it will use the
order of enum as value.</p>

<p dir="auto">Once you have a schema defined, you can generate the code. First, you need to <code>karmem</code> installed, get it from the
releases page or run it with go.</p>
<div data-snippet-clipboard-copy-content="karmem build --assemblyscript -o &#34;output-folder&#34; your-schema.km"><pre><code>karmem build --assemblyscript -o &#34;output-folder&#34; your-schema.km
</code></pre></div>
<p dir="auto"><em>If you already have Golang installed, you can use <code>go karmem.org/cmd build --zig -o &#34;output-folder&#34; your-schema.km</code>
instead.</em></p>
<p dir="auto"><strong>Commands:</strong></p>
<p dir="auto"><strong><code>build</code></strong></p>
<ul dir="auto">
<li><code>--zig</code>: Enable generation for Zig</li>
<li><code>--golang</code>: Enable generation for Golang</li>
<li><code>--assemblyscript</code>: Enable generation for AssemblyScript</li>
<li><code>--swift</code>: Enable generation for Swift</li>
<li><code>-o &lt;dir&gt;</code>: Defines the output folder</li>
<li><code>&lt;input-file&gt;</code>: Defines the input schema</li>
</ul>

<p dir="auto">Karmem is fast and is also aimed to be secure and stable for general usage.</p>
<p dir="auto"><strong>Out Of Bounds</strong></p>
<p dir="auto">Karmem includes bounds-checking to prevent out-of-bounds reading and avoid crashes and panics. That is something that
Google Protobuf doesn&#39;t have, and malformed content will cause panic. However, it doesn&#39;t fix all possible
vulnerabilities.</p>
<p dir="auto"><strong>Resource Exhaustion</strong></p>
<p dir="auto">Karmem allows one pointer/offset can be re-used multiple times in the same message. Unfortunately, that behaviour makes
it possible for a short message to generate more extensive arrays than the message size. Currently, the only mitigation
for that issue is using Limited-Arrays instead of Arrays and avoiding Object-API decode.</p>
</article>
          </div></div>
  </body>
</html>
