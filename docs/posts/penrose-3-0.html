<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://penrose.cs.cmu.edu/blog/v3">Original</a>
    <h1>Penrose 3.0</h1>
    
    <div id="readability-page-1" class="page"><div data-v-39b3cdb2=""><div data-v-39b3cdb2=""><div><!--[--><!--]--><p>We are excited to announce <a href="https://penrose.cs.cmu.edu/">Penrose</a> 3.0! We&#39;ve added many exciting diagrams to our collection, reworked our core API, and improved support for more complex geometric queries... among many other things!</p><hr/><p><a href="https://penrose.cs.cmu.edu/">Penrose</a> is a tool for making beautiful diagrams in any area of science, mathematics, or engineering. It‚Äôs made for those of us who can‚Äôt (or don‚Äôt want to!) draw beautiful diagrams by hand.</p><h2 id="üé®-new-diagrams" tabindex="-1">üé® New Diagrams <a href="#üé®-new-diagrams" aria-label="Permalink to &#34;üé® New Diagrams&#34;">‚Äã</a></h2><p>No Penrose release is complete without new beautiful diagrams. Here are some of the new diagrams added to our repo in this release. We also added a new <a href="https://penrose.cs.cmu.edu/examples">gallery page</a> to our site.</p><p>Keenan Crane recently made <a href="https://github.com/GeometryCollective/wost-simple" target="_blank" rel="noreferrer">a tutorial of the walk-on-stars algorithm fully illustrated by Penrose</a>. This is the first LaTeX document made with Penrose, made possible by these new features:</p><ul><li>&#34;SVG (TeX)&#34; export: now you can export a Penrose diagram from the <a href="https://penrose.cs.cmu.edu/try/index.html" target="_blank" rel="noreferrer">IDE</a> as an SVG with labels optimized for imports using <a href="https://www.ctan.org/tex-archive/graphics/svg" target="_blank" rel="noreferrer">the LaTeX <code>svg</code> package</a>. Keenan made the label font style and size consistent with the rest of his document.</li><li><code>roger</code> command-line rendering: <a href="https://github.com/penrose/penrose/pull/1387" target="_blank" rel="noreferrer"><code>roger</code> is now a headless renderer for Penrose diagrams!</a></li></ul><h2 id="üë©‚Äçüíª-a-more-ergonomic-api-for-penrose-core" tabindex="-1">üë©‚Äçüíª A more ergonomic API for <code>@penrose/core</code> <a href="#üë©‚Äçüíª-a-more-ergonomic-api-for-penrose-core" aria-label="Permalink to &#34;üë©‚Äçüíª A more ergonomic API for `@penrose/core`&#34;">‚Äã</a></h2><p>Over the past few months we&#39;ve simplified our programmatic API to make it easier for you to use Penrose in your own programs. Take a look at our docs for the <a href="https://penrose.cs.cmu.edu/docs/ref/api">high-level</a> and <a href="https://penrose.cs.cmu.edu/docs/ref/optimization-api">low-level</a> parts of our API!</p><div><p><label for="tab-V2OKGNC">highlevel.js</label><label for="tab-XkgGgjN">lowlevel.js</label></p><div><div><p><span>javascript</span></p><pre><code><span><span>import</span><span> </span><span>{</span><span> </span><span>compile</span><span>,</span><span> </span><span>optimize</span><span>,</span><span> </span><span>toSVG</span><span>,</span><span> </span><span>showError</span><span> </span><span>}</span><span> </span><span>from</span><span> </span><span>&#34;</span><span>@penrose/core</span><span>&#34;</span><span>;</span></span>
<span><span>import</span><span> trio </span><span>from</span><span> </span><span>&#34;</span><span>./trio.js</span><span>&#34;</span><span>;</span></span>
<span></span>
<span><span>const</span><span> compiled </span><span>=</span><span> </span><span>await</span><span> </span><span>compile</span><span>(trio)</span><span>;</span></span>
<span><span>// handle compilation errors</span></span>
<span><span>if</span><span> (compiled</span><span>.</span><span>isErr</span><span>()) </span><span>{</span></span>
<span><span>  </span><span>throw</span><span> </span><span>new</span><span> </span><span>Error</span><span>(</span><span>showError</span><span>(</span><span>compiled</span><span>.</span><span>error</span><span>))</span><span>;</span></span>
<span><span>}</span></span>
<span><span>const</span><span> converged </span><span>=</span><span> </span><span>optimize</span><span>(compiled</span><span>.</span><span>value)</span><span>;</span></span>
<span><span>// handle optimization errors</span></span>
<span><span>if</span><span> (converged</span><span>.</span><span>isErr</span><span>()) </span><span>{</span></span>
<span><span>  </span><span>throw</span><span> </span><span>new</span><span> </span><span>Error</span><span>(</span><span>showError</span><span>(</span><span>converged</span><span>.</span><span>error</span><span>))</span><span>;</span></span>
<span><span>}</span></span>
<span><span>// render the diagram state as an SVG</span></span>
<span><span>const</span><span> rendered </span><span>=</span><span> </span><span>await</span><span> </span><span>toSVG</span><span>(converged</span><span>.</span><span>value</span><span>,</span><span> </span><span>async</span><span> </span><span>()</span><span> </span><span>=&gt;</span><span> </span><span>undefined</span><span>)</span><span>;</span></span>
<span><span>const</span><span> container </span><span>=</span><span> document</span><span>.</span><span>getElementById</span><span>(</span><span>&#34;</span><span>diagram</span><span>&#34;</span><span>)</span><span>;</span></span>
<span><span>container</span><span>.</span><span>appendChild</span><span>(rendered)</span><span>;</span></span></code></pre></div><div><p><span>javascript</span></p><pre><code><span><span>import</span><span> </span><span>{</span><span> </span><span>variable</span><span>,</span><span> </span><span>pow</span><span>,</span><span> </span><span>sub</span><span>,</span><span> </span><span>problem</span><span> </span><span>}</span><span> </span><span>from</span><span> </span><span>&#34;</span><span>@penrose/core</span><span>&#34;</span><span>;</span></span>
<span><span>const</span><span> x </span><span>=</span><span> </span><span>variable</span><span>(</span><span>10</span><span>)</span><span>;</span></span>
<span><span>const</span><span> problem </span><span>=</span><span> </span><span>await</span><span> </span><span>problem</span><span>(</span><span>{</span><span> </span><span>constraints</span><span>:</span><span> [</span><span>pow</span><span>(</span><span>sub</span><span>(x</span><span>,</span><span> </span><span>5</span><span>)</span><span>,</span><span> </span><span>2</span><span>)] </span><span>}</span><span>)</span><span>;</span></span>
<span><span>const</span><span> </span><span>{</span><span> vals </span><span>}</span><span> </span><span>=</span><span> problem</span><span>.</span><span>start</span><span>(</span><span>{}</span><span>)</span><span>.</span><span>run</span><span>(</span><span>{}</span><span>)</span><span>;</span></span>
<span><span>console</span><span>.</span><span>log</span><span>(problem</span><span>.</span><span>converged)</span><span>;</span><span> </span><span>// true</span></span>
<span><span>console</span><span>.</span><span>log</span><span>(x)</span><span>;</span><span> </span><span>// a value closer to 5</span></span></code></pre></div></div></div><h2 id="üìê-geometry-queries-and-curve-support" tabindex="-1">üìê Geometry queries and curve support <a href="#üìê-geometry-queries-and-curve-support" aria-label="Permalink to &#34;üìê Geometry queries and curve support&#34;">‚Äã</a></h2><p>Many of the new diagrams in our gallery make use of some pretty powerful graphics functions we&#39;ve been adding to our library. You can find more information for them in <a href="https://penrose.cs.cmu.edu/docs/ref/style/functions">our docs</a>, but here are a few fun ones:</p><ul><li><code>rayIntersect</code> gives the first intersection point with a shape along a ray</li><li><code>closestSilhouettePoint</code> gives a shape&#39;s closest silhouette point to a point</li><li><code>isEquilateral</code> and <code>isEquiangular</code> constrain polygons to be more regular</li><li><code>curvatures</code> gives the curvature at each control point along a curve</li><li><code>inflectionEnergy</code> integrates the derivative of curvature raised to a power</li></ul><h2 id="üëÄ-and-more" tabindex="-1">üëÄ And more! <a href="#üëÄ-and-more" aria-label="Permalink to &#34;üëÄ And more!&#34;">‚Äã</a></h2><p>These only scratch the surface of all we&#39;ve been working on! Take a look at our <a href="https://github.com/penrose/penrose/blob/main/CHANGELOG.md#v300-2023-07-14" target="_blank" rel="noreferrer">changelog</a> to see the full list of changes, or check out some of our recent <a href="https://penrose.cs.cmu.edu/blog">blog</a> posts for deep dives into topics we didn&#39;t cover here:</p><ul><li><a href="https://penrose.cs.cmu.edu/blog/staged-layout">Diagram Layout in Stages</a></li><li><a href="https://penrose.cs.cmu.edu/blog/new-language-features">What Have We Done to the Languages?</a></li><li><a href="https://penrose.cs.cmu.edu/blog/wasm">Switching to Wasm for 10x Speedup</a></li></ul><p>We&#39;d love to have you diagram with us! Join our <a href="https://discord.gg/a7VXJU4dfR" target="_blank" rel="noreferrer">Discord</a> and share a diagram you make in Penrose, or if you&#39;re feeling more adventurous, check out our <a href="https://github.com/penrose/penrose/blob/main/CONTRIBUTING.md" target="_blank" rel="noreferrer"><code>CONTRIBUTING.md</code></a> on GitHub for information about hacking on Penrose itself.</p><p><strong>Happy diagramming!</strong></p></div></div></div></div>
  </body>
</html>
