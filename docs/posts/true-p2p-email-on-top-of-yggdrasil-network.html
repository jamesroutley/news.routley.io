<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/JB-SelfCompany/Tyr">Original</a>
    <h1>True P2P Email on Top of Yggdrasil Network</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><strong>English | <a href="https://ntietz.com/JB-SelfCompany/Tyr/blob/main/README.ru.md">–†—É—Å—Å–∫–∏–π</a></strong></p>
<p dir="auto">True P2P Email on top of Yggdrasil Network</p>

<p dir="auto">We&#39;re taught that email must go through servers. Why? Because the Internet was built around centralized infrastructure. Every email you send travels through multiple servers - your provider&#39;s server, maybe a few relay servers, and finally your recipient&#39;s provider&#39;s server. Each hop is a potential point of surveillance, censorship, or failure.</p>
<p dir="auto">Even &#34;encrypted&#34; email solutions still rely on these centralized servers. They encrypt the message content but the metadata - who you&#39;re talking to, when, how often - is visible to anyone watching the servers.</p>
<p dir="auto">But there is a network, called <a href="https://yggdrasil-network.github.io/" rel="nofollow">Yggdrasil</a>, that gives everyone a free IPv6 and doesn&#39;t need a blessing from your ISP. We finally have this possibility to use true P2P email. And moreover, this network has strong encryption to protect all data that flows from one IP to another.</p>
<p dir="auto">So, Tyr brings true peer-to-peer email to your Android device using these unusual conditions. Unlike traditional email clients, Tyr doesn&#39;t need:</p>
<ol dir="auto">
<li>Centralized mail servers (the connections are straight P2P)</li>
<li>Message encryption layers (the network takes care of that)</li>
<li>Port forwarding or STUN/TURN servers (Yggdrasil handles NAT traversal)</li>
</ol>
<div dir="auto"><h3 tabindex="-1" dir="auto">What does Tyr already have?</h3><a id="user-content-what-does-tyr-already-have" aria-label="Permalink: What does Tyr already have?" href="#what-does-tyr-already-have"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ol dir="auto">
<li>Full integration with DeltaChat and ArcaneChat - the best decentralized messengers</li>
<li>Local SMTP/IMAP server running on your device</li>
<li>Automatic Ed25519 key generation for your mail identity</li>
<li>Connection to the Yggdrasil Network with configurable peers</li>
<li>Auto-start on boot for always-on availability</li>
<li>Encrypted backup &amp; restore with password protection</li>
<li>Automatic recovery from Android Keystore issues (Samsung devices)</li>
</ol>
<p dir="auto">One of Tyr&#39;s strong points is censorship circumvention: you can connect to any of hundreds of available Yggdrasil nodes, host your own, or even build a private network. Email freedom is literally in your hands.</p>

<p dir="auto">Tyr runs a complete email server right on your Android device, using the Yggdrasil network for transport. The <a href="https://github.com/JB-SelfCompany/yggmail-android">Yggmail</a> mail server (built in Go) is embedded as a library inside the app and runs as a foreground service.</p>
<p dir="auto">On top of Yggdrasil, it provides standard SMTP and IMAP protocols on localhost (127.0.0.1:1025 and 127.0.0.1:1143). Any email client can connect to these ports - but we recommend DeltaChat or ArcaneChat for the best P2P messaging experience.</p>
<p dir="auto">Every Tyr installation generates unique Ed25519 cryptographic keys. Your mail address is derived from your public key, making it: <code>&lt;64-hex-characters&gt;@yggmail</code>. This means your identity is cryptographically verifiable and cannot be spoofed.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">DeltaChat/ArcaneChat Integration</h3><a id="user-content-deltachatarcanechat-integration" aria-label="Permalink: DeltaChat/ArcaneChat Integration" href="#deltachatarcanechat-integration"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">DeltaChat and ArcaneChat are perfect companions for Tyr. These are messengers that use email protocols but provide modern chat interfaces. When you configure DeltaChat/ArcaneChat to use Tyr&#39;s local server:</p>
<ol dir="auto">
<li>DeltaChat/ArcaneChat sends messages via SMTP to Tyr</li>
<li>Tyr wraps them in Yggmail protocol and sends through Yggdrasil</li>
<li>The recipient&#39;s Tyr receives the message via Yggdrasil</li>
<li>Their DeltaChat/ArcaneChat fetches it via IMAP from their local Tyr</li>
<li>All this happens peer-to-peer, with no central servers</li>
</ol>
<div dir="auto"><h2 tabindex="-1" dir="auto">Setting up DeltaChat/ArcaneChat with Tyr</h2><a id="user-content-setting-up-deltachatarcanechat-with-tyr" aria-label="Permalink: Setting up DeltaChat/ArcaneChat with Tyr" href="#setting-up-deltachatarcanechat-with-tyr"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">Option 1: Automatic Setup (Recommended)</h3><a id="user-content-option-1-automatic-setup-recommended" aria-label="Permalink: Option 1: Automatic Setup (Recommended)" href="#option-1-automatic-setup-recommended"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ol dir="auto">
<li>Install Tyr and complete the onboarding (set password, configure peers)</li>
<li>Start the Yggmail service in Tyr</li>
<li>Install DeltaChat or ArcaneChat from F-Droid or Google Play</li>
<li>In Tyr&#39;s main screen, tap <strong>&#34;Setup DeltaChat/ArcaneChat&#34;</strong></li>
<li>Tyr will automatically open DeltaChat/ArcaneChat with pre-configured settings</li>
<li>Complete the setup and start chatting!</li>
</ol>

<p dir="auto">If automatic setup doesn&#39;t work:</p>
<ol dir="auto">
<li>Install Tyr and complete the onboarding (set password, configure peers)</li>
<li>Start the Yggmail service in Tyr</li>
<li>Copy your mail address from the main screen (looks like <code>abc123...@yggmail</code>)</li>
<li>Install DeltaChat or ArcaneChat from F-Droid or Google Play</li>
<li>In DeltaChat/ArcaneChat, tap <strong>&#34;Create a new profile&#34;</strong></li>
<li>Enter a name and optionally select an avatar</li>
<li>Tap <strong>&#34;Use a different server&#34;</strong> (below the login fields)</li>
<li>Enter your Yggmail address and the password you set in Tyr</li>
<li>Tap &#34;‚úì&#34; in the top right corner to complete setup</li>
</ol>
<p dir="auto"><strong>Important</strong>: Tyr must be running for DeltaChat/ArcaneChat to send and receive messages. Enable auto-start in Tyr settings for seamless experience.</p>


<ul dir="auto">
<li>Android Studio (latest version recommended)</li>
<li>JDK 17</li>
<li>Android SDK (API 23-36)</li>
<li>Go 1.21+ and gomobile (only if rebuilding yggmail.aar)</li>
</ul>

<ol dir="auto">
<li>Clone the repository:</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="git clone &lt;repository-url&gt;
cd Tyr"><pre>git clone <span>&lt;</span>repository-url<span>&gt;</span>
<span>cd</span> Tyr</pre></div>
<ol start="2" dir="auto">
<li>Build debug APK:</li>
</ol>

<ol start="3" dir="auto">
<li>Install to connected device:</li>
</ol>

<p dir="auto">APKs will be in <code>app/build/outputs/apk/debug/</code> or <code>app/build/outputs/apk/release/</code></p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Rebuilding yggmail.aar (optional)</h3><a id="user-content-rebuilding-yggmailaar-optional" aria-label="Permalink: Rebuilding yggmail.aar (optional)" href="#rebuilding-yggmailaar-optional"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">If you need to rebuild the Yggmail library:</p>
<div dir="auto" data-snippet-clipboard-copy-content="cd ../yggmail/mobile
# On Windows:
..\build-android.bat
# On Unix:
gomobile bind -target=android -androidapi 23 -javapkg=com.jbselfcompany.tyr -ldflags=&#34;-checklinkname=0&#34; -o yggmail.aar ."><pre><span>cd</span> ../yggmail/mobile
<span><span>#</span> On Windows:</span>
..<span>\b</span>uild-android.bat
<span><span>#</span> On Unix:</span>
gomobile <span>bind</span> -target=android -androidapi 23 -javapkg=com.jbselfcompany.tyr -ldflags=<span><span>&#34;</span>-checklinkname=0<span>&#34;</span></span> -o yggmail.aar <span>.</span></pre></div>
<p dir="auto">Then copy <code>yggmail.aar</code> to <code>Tyr/app/libs/</code></p>

<ul dir="auto">
<li><strong>Language</strong>: Kotlin 2.2.20</li>
<li><strong>Min SDK</strong>: 23 (Android 6.0)</li>
<li><strong>Target SDK</strong>: 33 (Android 13)</li>
<li><strong>Architecture</strong>: Layered (UI ‚Üí Service ‚Üí Data)</li>
<li><strong>Mail server</strong>: Yggmail (Go library, embedded via gomobile)</li>
<li><strong>Network</strong>: Yggdrasil overlay network</li>
<li><strong>Localization</strong>: English, Russian</li>
</ul>

<p dir="auto">üîí <strong>Security implementation</strong>:</p>
<ul dir="auto">
<li><strong>Passwords are encrypted</strong> using Android Keystore System (AES256-GCM encryption)</li>
<li><strong>Automatic Keystore recovery</strong>: Handles Android Keystore issues on Samsung and other devices automatically</li>
<li><strong>Network encryption</strong> provided by Yggdrasil Network for all peer-to-peer communications</li>
<li><strong>Local-only access</strong>: SMTP/IMAP ports (1025/1143) are bound to localhost only, not accessible from network</li>
<li><strong>Cryptographic identity</strong>: Ed25519 keys ensure your mail address cannot be spoofed</li>
<li><strong>Encrypted backups</strong>: Configuration and keys can be backed up with password protection</li>
</ul>

<ul dir="auto">
<li><a href="https://github.com/JB-SelfCompany/yggmail-android">Yggmail</a>: The mail transfer agent that powers Tyr</li>
<li><a href="https://github.com/Revertron/Mimir">Mimir</a>: P2P messenger on Yggdrasil (sister project)</li>
<li><a href="https://yggdrasil-network.github.io/" rel="nofollow">Yggdrasil Network</a>: The mesh network infrastructure</li>
<li><a href="https://delta.chat/" rel="nofollow">DeltaChat</a>: Recommended email-based messenger client</li>
<li><a href="https://github.com/ArcaneChat/android">ArcaneChat</a>: Alternative email-based messenger client</li>
</ul>

<p dir="auto">Tyr is open source software. The Yggmail library uses Mozilla Public License v. 2.0.</p>
<p dir="auto">See <code>LICENSE</code> file for full details</p>
</article></div></div>
  </body>
</html>
