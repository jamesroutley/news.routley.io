<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/cotowali/cotowali">Original</a>
    <h1>A statically typed scripting language that transpiles to Posix sh</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<div dir="auto">
  <p><a target="_blank" rel="noopener noreferrer" href="https://raw.githubusercontent.com/cotowali/design/main/assets/cotowali.svg?sanitize=true"><img width="200" src="https://raw.githubusercontent.com/cotowali/design/main/assets/cotowali.svg?sanitize=true"/></a></p>
  <p dir="auto">A statically typed scripting language that transpile into POSIX sh</p>
  <p><a href="http://mozilla.org/MPL/2.0/" rel="nofollow">
    <img alt="License: MPL 2.0" src="https://camo.githubusercontent.com/a419e436759ad2847b173199f8195b77862f28aab5da33825a13bee2ce83f2a2/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d4d504c253230322e302d626c75652e7376673f7374796c653d666c61742d737175617265" data-canonical-src="https://img.shields.io/badge/License-MPL%202.0-blue.svg?style=flat-square"/>
  </a>
</p></div>
<h2 dir="auto"><a id="user-content-concepts-of-cotowali" aria-hidden="true" href="#concepts-of-cotowali"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Concepts of Cotowali</h2>
<ul dir="auto">
<li>Outputs shell script that is fully compliant with POSIX standards.</li>
<li>Simple syntax.</li>
<li>Simple static type system.</li>
<li>Syntax for shell specific feature like pipe and redirection.</li>
</ul>
<h2 dir="auto"><a id="user-content-example" aria-hidden="true" href="#example"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example</h2>
<div data-snippet-clipboard-copy-content="fn fib(n: int): int {
  if n &lt; 2 {
    return n
  }
  return fib(n - 1) + fib(n - 2)
}

fn int |&gt; twice() |&gt; int {
   var n = 0
   read(&amp;n)
   return n * 2
}

assert(fib(6) == 8)
assert((fib(6) |&gt; twice()) == 16)

fn ...int |&gt; sum() |&gt; int {
  var v: int
  var res = 0
  while read(&amp;v) {
    res += v
  }
  return res
}

fn ...int |&gt; twice_each() |&gt; ...int {
  var n: int
  while read(&amp;n) {
    yield n * 2
  }
}

assert((seq(3) |&gt; sum()) == 6)
assert((seq(3) |&gt; twice_each() |&gt; sum()) == 12)

// Call command by `@command` syntax with pipeline operator
assert(((1, 2) |&gt; @awk(&#39;{print $1 + $2}&#39;)) == &#39;3&#39;)"><pre><code>fn fib(n: int): int {
  if n &lt; 2 {
    return n
  }
  return fib(n - 1) + fib(n - 2)
}

fn int |&gt; twice() |&gt; int {
   var n = 0
   read(&amp;n)
   return n * 2
}

assert(fib(6) == 8)
assert((fib(6) |&gt; twice()) == 16)

fn ...int |&gt; sum() |&gt; int {
  var v: int
  var res = 0
  while read(&amp;v) {
    res += v
  }
  return res
}

fn ...int |&gt; twice_each() |&gt; ...int {
  var n: int
  while read(&amp;n) {
    yield n * 2
  }
}

assert((seq(3) |&gt; sum()) == 6)
assert((seq(3) |&gt; twice_each() |&gt; sum()) == 12)

// Call command by `@command` syntax with pipeline operator
assert(((1, 2) |&gt; @awk(&#39;{print $1 + $2}&#39;)) == &#39;3&#39;)
</code></pre></div>
<p dir="auto"><a href="https://github.com/cotowali/cotowali/blob/main/examples">There is more examples</a></p>
<h2 dir="auto"><a id="user-content-installation" aria-hidden="true" href="#installation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h2>
<h3 dir="auto"><a id="user-content-use-konryu-cotowali-installer-written-in-cotowali" aria-hidden="true" href="#use-konryu-cotowali-installer-written-in-cotowali"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Use <a href="https://github.com/cotowali/konryu">Konryu</a> (cotowali installer written in cotowali)</h3>
<div data-snippet-clipboard-copy-content="curl -sSL https://konryu.cotowali.org | sh
# add to your shell config like .bashrc
export PATH=&#34;$HOME/.konryu/bin:$PATH&#34;
eval &#34;$(konryu init)&#34;"><pre><code>curl -sSL https://konryu.cotowali.org | sh
# add to your shell config like .bashrc
export PATH=&#34;$HOME/.konryu/bin:$PATH&#34;
eval &#34;$(konryu init)&#34;
</code></pre></div>
<h3 dir="auto"><a id="user-content-build-from-source" aria-hidden="true" href="#build-from-source"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Build from source</h3>
<ol start="0" dir="auto">
<li>
<p dir="auto">Install required tools</p>
<ul dir="auto">
<li>
<p dir="auto"><a href="https://github.com/vlang/v">The V Programming Language</a></p>
<div data-snippet-clipboard-copy-content="git clone https://github.com/vlang/v
cd v
make"><pre><code>git clone https://github.com/vlang/v
cd v
make
</code></pre></div>
</li>
<li>
<p dir="auto"><a href="https://github.com/zakuro9715/z">zakuro9715/z</a></p>
<div data-snippet-clipboard-copy-content="go install github.com/zakuro9715/z
# or
curl -sSL gobinaries.com/zakuro9715/z | sh"><pre><code>go install github.com/zakuro9715/z
# or
curl -sSL gobinaries.com/zakuro9715/z | sh
</code></pre></div>
</li>
</ul>
</li>
<li>
<p dir="auto">Build</p>

</li>
<li>
<p dir="auto">Install</p>
<div data-snippet-clipboard-copy-content="sudo z symlink
# or
sudo z install"><pre><code>sudo z symlink
# or
sudo z install
</code></pre></div>
</li>
</ol>
<h2 dir="auto"><a id="user-content-how-to-use" aria-hidden="true" href="#how-to-use"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How to use</h2>
<div data-snippet-clipboard-copy-content="# compile
lic examples/add.li

# execution
lic examples/add.li | sh
# or
lic run examples/add.li"><pre><code># compile
lic examples/add.li

# execution
lic examples/add.li | sh
# or
lic run examples/add.li
</code></pre></div>
<h2 dir="auto"><a id="user-content-development" aria-hidden="true" href="#development"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Development</h2>
<p dir="auto">See <a href="https://github.com/cotowali/cotowali/blob/main/docs/development.md">docs/development.md</a></p>
<h3 dir="auto"><a id="user-content-docker" aria-hidden="true" href="#docker"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Docker</h3>

<h2 dir="auto"><a id="user-content-author" aria-hidden="true" href="#author"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Author</h2>
<p dir="auto"><a href="https://twitter.com/zakuro9715" rel="nofollow">zakuro</a> &lt;<a href="mailto:z@kuro.red">z@kuro.red</a>&gt;</p>
<h2 dir="auto"><a id="user-content-acknowledgements" aria-hidden="true" href="#acknowledgements"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Acknowledgements</h2>
<p dir="auto">Cotowali is supported by 2021 Exploratory IT Human Resources Project (<a href="https://www.ipa.go.jp/english/humandev/third.html" rel="nofollow">The MITOU Program</a> by IPA: Information-technology Promotion Agency, Japan.</p>
</article>
          </div></div>
  </body>
</html>
