<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.justinmath.com/individualized-spaced-repetition-in-hierarchical-knowledge-structures/">Original</a>
    <h1>Individualized Spaced Repetition in Hierarchical Knowledge Structures</h1>
    
    <div id="readability-page-1" class="page"><div><header><!----><p>by Justin Skycak on <time datetime="2023-10-05T00:00:00-07:00">October 05, 2023</time></p><!--<p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Published:</strong> <time datetime="2023-10-05T00:00:00-07:00">October 05, 2023</time></p>--></header><section itemprop="text"><p><SPAN size="3em"> <i>Spaced repetition is complicated in hierarchical bodies of knowledge, like mathematics, because repetitions on advanced topics should &#34;trickle down&#34; to update the repetition schedules of simpler topics that are implicitly practiced (while being discounted appropriately since these repetitions are often too early to count for full credit towards the next repetition). However, I developed a model of Fractional Implicit Repetition (FIRe) that not only accounts for implicit &#34;trickle-down&#34; repetitions but also minimizes the number of reviews by choosing reviews whose implicit repetitions &#34;knock out&#34; other due reviews (like dominos), and calibrates the speed of the spaced repetition process to each individual student on each individual topic (student ability and topic difficulty are competing factors).</i> </SPAN></p><p><SPAN size="2em"> <i>This post is part of the book <a target="_blank" href="https://justinmath.com/books">The Math Academy Way: Using the Power of Science to Supercharge Student Learning (Working Draft, Oct 2023)</a>.</i> <SPAN color="gray"><i>Suggested citation:</i> Skycak, J., advised by Roberts, J. (2023). Optimized, Individualized Spaced Repetition in Hierarchical Knowledge Structures. In <i>The Math Academy Way: Using the Power of Science to Supercharge Student Learning (Working Draft, Oct 2023).</i> https://justinmath.com/individualized-spaced-repetition-in-hierarchical-knowledge-structures/</SPAN> </SPAN></p><hr/><p>To my best knowledge, the current literature on mathematical models for determining optimal review spacing is limited to the setting of independent flashcard-like tasks. Many subjects, in contrast, are highly connected bodies of knowledge. This introduces significant modeling complexities: for instance, repetitions on advanced topics should “trickle down” to update the repetition schedules of simpler topics that are implicitly practiced (while being discounted appropriately since these repetitions are often too early to count for full credit towards the next repetition).</p><p>To overcome this hurdle at <a target="_blank" href="https://mathacademy.com/">Math Academy</a>, I developed a model of <b>Fractional Implicit Repetition (FIRe)</b> that not only accounts for implicit “trickle-down” repetitions but also</p><ul><li>minimizes the number of reviews by choosing reviews whose implicit repetitions &#34;knock out&#34; other due reviews (like dominos), and</li><li>calibrates the spaced repetition process to each individual student on each individual topic (student ability and topic difficulty are competing factors -- high student ability speeds up the overall student-topic learning speed, while high topic difficulty slows it down).</li></ul><SPAN size="3em"><br/></SPAN><p>This model was the product of years of intense R&amp;D (from 2019-22). While the specific implementation is proprietary, I can talk about the high-level ideas here. The essential components have become fairly stable by now (though I do continue refining the model each year).</p><h2>Repetition Compression</h2><p>A common criticism of spaced repetition is that it requires an overwhelming number of reviews. While this can be true if spaced repetition is used to learn unrelated flashcards, there is something special about the subject of mathematics that can be used to avoid this issue.</p><p>Unlike independent flashcards, mathematics is a hierarchical and highly connected body of knowledge. Whenever a student solves an advanced mathematical problem, there are many simpler mathematical skills that they practice implicitly. In other words, in mathematics, advanced skills tend to <b>encompass</b> many simpler skills.</p><p>As a result, whenever a student has due reviews, they can typically be compressed into a much smaller set of learning tasks that implicitly covers (i.e. provides repetitions on) all of the due reviews. I call this process <b>repetition compression</b>.</p><p>To illustrate, consider the following multiplication problem, in which we multiply the two-digit number 39 by the one-digit number 6:</p><center><img src="https://justinmath.com/files/blog/39-times-6.png" alt="icon"/></center><p>In order to perform the multiplication above, we have to multiply one-digit numbers and add a one-digit number to a two-digit number:</p><ul><li>First, we multiply 6 × 9 = 54. We carry the 5 and write the 4 at the bottom.</li><li>Then, we multiply 6 × 3 = 18 and add 18 + 5 = 23. We write 23 at the bottom.</li></ul><p>In other words, <i>Multiplying a Two-Digit Number by a One-Digit Number</i> encompasses <i>Multiplying One-Digit Numbers and Adding a One-Digit Number to a Two-Digit Number</i>.</p><p>We can visualize this using an <b>encompassing graph</b> as shown below. The encompassing graph is similar to a prerequisite graph, except the arrows indicate that a simpler topic is encompassed by a more advanced topic. (Encompassed topics are usually prerequisites, but prerequisites are often not fully encompassed.)</p><center><img src="https://justinmath.com/files/blog/multiplication-encompassing-graph.png" alt="icon"/></center><p>Now, suppose that a student is due for reviews on all three of these topics. Because of the encompassings, the only review that they will actually have to do is <i>Multiplying a Two-Digit Number by a One-Digit Number</i>. When they complete this review, it will implicitly provide repetitions on the topics that it encompasses because the student has effectively practiced those skills as well.</p><center><img src="https://justinmath.com/files/blog/repetition-compression.png" alt="icon"/></center><p>In general, the more encompassings there are, the fewer reviews are actually required. And mathematics has <i>lots</i> of encompassings!</p><h2>Learning Efficiency</h2><p>In physics, nothing can travel faster than the speed of light. It is the theoretical maximum speed that any physical object can attain. A universal constant.</p><p>In the context of spaced repetition, there is an analogous concept: <b>theoretical maximum learning efficiency</b>. In theory, given a sufficiently encompassed body of knowledge, it is possible to complete all your spaced repetitions without ever having to explicitly review previously-learned material.</p><p>As a simple demonstration, consider a sequence of topics where the first topic is fully encompassed by the second, which is fully encompassed by the third, which is fully encompassed by the fourth, and so on.</p><center><img src="https://justinmath.com/files/blog/encompassing-graph-max-efficiency.png" alt="icon"/></center><p>Each time you learn the next topic, all the topics below receive full implicit repetitions. Assuming that you never run out of new topics to learn, the only reason you would ever need to do an explicit repetition is if you get stuck repeatedly attempting and failing to learn the next topic.</p><p>By contrast, there is also a concept of theoretical minimum learning efficiency. This is precisely the setting of independent flashcards – or equivalently, a set of topics without any encompassings.</p><center><img src="https://justinmath.com/files/blog/encompassing-graph-min-efficiency.png" alt="icon"/></center><p>In this setting, no topic can receive implicit repetitions from any other topic. Every single review must be done explicitly.</p><p>It’s important to realize that <i>a graph does not have to be fully encompassed, or even nearly fully encompassed, for its maximum learning efficiency to approach the theoretical limit.</i> Even if most relationships between topics are non-encompassing, a considerable minority of encompassings goes a long way.</p><center><img src="https://justinmath.com/files/blog/learning-efficiency-vs-encompassing-density.png" alt="icon"/></center><h2>Fractional Implicit Repetition (FIRe)</h2><p>Now that we’ve introduced the idea of repetition compression, let’s extend to the general idea of <b>fractional implicit repetitions (FIRe)</b> flowing through an encompassing graph.</p><p>FIRe generalizes spaced repetition to hierarchical bodies of knowledge where</p><ol><li>repetitions on advanced topics &#34;trickle down&#34; implicitly to simpler topics through encompassing relationships, and</li><li>simpler topics receiving lots of implicit repetitions discount the repetitions appropriately (since they are often too early to count for full credit towards the next repetition).</li></ol><SPAN size="3em"><br/></SPAN><p><b>Concrete Example</b></p><p>As a concrete example, recall that <i>Multiplying a Two-Digit Number by a One-Digit Number</i> encompasses <i>Multiplying One-Digit Numbers</i> and <i>Adding a One-Digit Number to a Two-Digit Number</i>.</p><p>If you pass a review on <i>Multiplying a Two-Digit Number by a One-Digit Number</i>, then the repetition will also flow backward to reward <i>Multiplying One-Digit Numbers</i> and <i>Adding a One-Digit Number to a Two-Digit Number</i> because you’ve just shown evidence that you still know how to perform these skills.</p><center><img src="https://justinmath.com/files/blog/repetition-compression.png" alt="icon"/></center><p>On the other hand, if you fail a repetition on <i>Adding a One-Digit Number to a Two-Digit Number</i>, then the failed repetition will also flow forward to penalize <i>Multiplying a Two-Digit Number by a One-Digit Number</i>. If you can’t add a one-digit number to a two-digit number, then there’s no way you’re able to multiply a two-digit number by a one-digit number. The same thing happens if you fail a repetition on <i>Multiplying One-Digit Numbers</i>.</p><center><img src="https://justinmath.com/files/blog/penalty-flowing-up-graph.png" alt="icon"/></center><p><b>Visualizing Repetition Flow</b></p><p>Note that repetition flows can extend many layers deep – not just to directly encompassed topics, but also to “second-order” topics that are encompassed by the encompassed topics, and then to third-order topics that are encompassed by second-order topics, and so on.</p><p>Visually, credit travels downwards through the knowledge graph like lightning bolts.</p><center><img src="https://justinmath.com/files/blog/credit-flowing-down-many-layers.png" alt="icon"/></center><p>Penalties travel upwards through the knowledge graph like growing trees.</p><center><img src="https://justinmath.com/files/blog/penalty-flowing-up-many-layers.png" alt="icon"/></center><p><b>Partial Encompassings</b></p><p>FIRe also naturally handles cases of <b>partial encompassings</b>, in which only some part of a simpler topic is practiced implicitly in an advanced topic. This occurs more frequently in higher-level math.</p><p>For instance, in calculus, advanced integration techniques like integration by parts require you to calculate integrals of a variety of mathematical functions such as polynomials, exponentials, and trigonometric functions. But some of those functions might only appear in a portion of the integration by parts problems. So, if you complete a repetition on integration by parts, you should only receive a fraction of a repetition towards each partially-encompassed topic.</p><p>In the diagram below, we label encompassings with numerical <b>weights</b> that represent what fraction of each simpler topic is practiced during the more advanced topic. You can loosely interpret each weight as representing the probability that a random problem from the advanced topic encompasses a random problem from the simpler topic.</p><center><img src="https://justinmath.com/files/blog/encompassing-weights.png" alt="icon"/></center><p>FIRe extends repetition flows many layers deep through fractional encompassings as well. The end result is that repetitions</p><ol><li>travel unhindered along a &#34;trunk&#34; of full encompassings, and</li><li>fade off along partial encompassings branching outwards from the trunk.</li></ol><SPAN size="3em"><br/></SPAN> <center><img src="https://justinmath.com/files/blog/partial-repetitions-flowing-down-many-layers.png" alt="icon"/></center><p><b>Setting Encompassing Weights Manually</b></p><p>Because encompassing weights are set manually, it is not feasible to set an explicit weight between every pair of topics in the graph. We have thousands of topics, so the full pairwise weight matrix would contain tens of millions of entries. How do we set all those weights?</p><p>It turns out that it is not actually necessary to explicitly set every weight in the matrix. It suffices to set only the weights for topic pairs where</p><ol><li>the weight has a nontrivial value,</li><li>the weight cannot otherwise be inferred using repetition flow, and</li><li>the distance between the topics in the prerequisite graph is low,</li></ol><p>and assume that all other weights not computed implicitly during repetition flow are zero. The reasoning behind these conditions is as follows:</p><ol><li>The magnitude of the weight represents the magnitude of the implicit repetition credit. In order for an implicit repetition to make an impact on staving off explicit reviews, it has to be associated with a nontrivial amount of credit.</li><li>If repetition flow can infer a weight, then nothing will change if the weight is set manually (unless the manually-set weight is being used to correct a value that would otherwise be inferred by repetition flow).</li><li>If two topics are far apart in the prerequisite graph, then their weight will not make much of an impact on staving off reviews, even if it is a full encompassing. In that case, by the time the student reaches the more advanced topic, they will already have done most of their explicit reviews on the simpler topic.</li></ol><p>Conveniently, the weights that satisfy the above conditions tend to be those along direct and key prerequisite edges, the number of which scales linearly with the number of topics. This makes it feasible to set encompassing weights manually: one weight for each direct or key prerequisite</p><p>Note that it is not unusual to find direct and key prerequisite edges with a weight as low as zero. This can happen when a topic requires some amount of conceptual familiarity with the prerequisite, but does not require the student to actually have mastered the prerequisite to the point of being able to solve problems in the prerequisite topic.</p><h2>Calibrating to Individual Students and Topics</h2><p>The speed at which students learn (and remember what they’ve learned) varies from student to student. It has been shown that stronger students learn faster and remember longer, while weaker students learn slower and forget more quickly (e.g., <a target="_blank" href="https://apps.dtic.mil/sti/pdfs/ADA212765.pdf">Kyllonen &amp; Tirre, 1988</a>; <a target="_blank" href="https://jeffberg.github.io/cv/papers/Zerr_2018_PsychologicalScience.pdf">Zerr et al., 2018</a>; <a target="_blank" href="https://journals.sagepub.com/doi/full/10.1177/0963721419869005">McDermott &amp; Zerr, 2019</a>). Similarly, learning speed also varies across topics: easier topics are learned faster and remembered longer, while harder topics take longer to learn and are forgotten more quickly.</p><p>So, for each student, each topic has a learning speed that depends on the student’s ability and the topic’s difficulty. Student ability and topic difficulty are competing factors – high student ability speeds up the overall student-topic learning speed, while high topic difficulty slows it down. In this view, a student-topic learning speed can be measured as a ratio between</p><ol><li>the speedup due to student ability, and</li><li>the slowdown due to topic difficulty.</li></ol><center><img src="https://justinmath.com/files/blog/student-topic-learning-speed-ratio.png" alt="icon"/></center><p>Student-topic learning speeds are used to adjust the speed of the spaced review process.</p><ul><li>For instance, if a student does a review on a topic for which their learning speed is 2x, then that review counts as being worth 2 spaced repetitions.</li><li>Likewise, if a student does a review on a topic for which their learning speed is 0.5x, then that review counts as being worth 0.5 spaced repetitions.</li></ul><SPAN size="3em"><br/></SPAN> <center><img src="https://justinmath.com/files/blog/spaced-repetition-at-different-speeds.png" alt="icon"/></center><p>Student-topic learning speeds are also considered within the fractional implicit repetition algorithm. Weaker students often have trouble absorbing implicit repetitions on difficult topics – they have a harder time generalizing that “what I learned earlier is a special case (or component) of what I’m learning now.”</p><p>So, whenever a topic’s spaced repetition process is being slowed down (i.e. whenever the student-topic learning speed is less than 1), it’s best to discard all incoming implicit repetition credit and instead force explicit reviews. In other words, the topic will not receive any implicit repetition credit that would normally “trickle down” from more advanced topics that encompass it.</p><p>It makes sense for the decision of whether or not to force explicit reviews to be based on the student-topic learning speed because when a topic’s spaced repetition process is being slowed down, it indicates that the topic is considered rather difficult relative to the student’s ability.</p><p>Lastly, it’s important to realize that while there are a number of factors that could affect a student’s learning speed, such as their aptitude, forgetting rate, level of interest/motivation, or how tired or distracted they typically are while working on learning tasks – these factors are ultimately only as relevant as their effects on the student’s observed performance. Consequently, each student’s individual learning curve can be calibrated appropriately on the sole basis of their observed performance.</p><h2>High-Level Structure of Spaced Repetition Model</h2><p>At a high level, the structure of my spaced repetition model can be summarized as follows:</p><center> $$\begin{align*} repNum &amp;\to \max \left( 0, \phantom{,} repNum + speed \cdot decay^{\, failed} \cdot netWork \right) \\ memory &amp;\to \max \left( 0, \phantom{,} memory + netWork \right) (0.5)^{ \, days \, / \, interval} \end{align*}$$ </center> <SPAN size="3em"><br/></SPAN><ul><li> $repNum=$ how many successful rounds of spaced repetition the student has accumulated on a particular topic. </li></ul><SPAN size="3em"><br/></SPAN> <center><img src="https://justinmath.com/files/blog/high-level-structure-of-math-academys-spaced-repetition-model.png" alt="high level structure of math academy&#39;s spaced repetition model"/></center><h2>Some Clarifications in Response to Follow-Up Questions</h2><p>I received some great follow-up questions about this post after it gained some traction on HackerNews (July 2024). Here are some points I’d like to clarify about the above approach:</p><p><i>The learner is first introduced to the topics through mastery learning</i>, i.e., they do not learn a new topic until they have already seen and mastered the prerequisite topics. It’s only in the review phase when we do all the stuff involving “knocking out” repetitions implicitly.</p><p><i>Students are not simply memorizing answers.</i> The questions are different every time, testing the same concept / process but not allowing students to simply memorize the answer.</p><p><i>What happens if a student is shown a topic but doesn’t remember one of the necessary prerequisites?</i> There are both theoretical and practical safeguards. For the sake of explanation, let’s say topic A is a prerequisite for topic B.</p><ul><li><p><i>Theoretical safeguard:</i> if you are at risk of forgetting A in the near future, then you&#39;ll have a repetition due on A right now, which means you&#39;re going to review it right now (by &#34;knocking it out&#34; with some more advanced topic if possible, but if that&#39;s not possible, then we&#39;ll give you an explicit review of B itself).</p><p>In general, if a repetition is due, we&#39;re not going to wait for an &#34;implicit knock-out&#34; opportunity to open up and let you forget it while we wait. We&#39;ll just say &#34;okay, guess we can&#39;t knock this one out implicitly right now&#34; and give you an explicit review.</p></li><li><p><i>Practical safeguard:</i> suppose that for whatever reason, the review timing is a little miscalibrated and a student ends up having forgotten more of A than we&#39;d like when they&#39;re shown B. Even then, they haven&#39;t forgotten A completely, and they can refresh on A pretty easily. Often, that refresher is within B itself: for instance, if you&#39;re learning to solve equations of the form $ax+b=cx+d,$ then the explanation is going to include a thorough reminder of how to solve $ax+b=c.$</p><p>And even in other cases where that reminder might not be as thorough, if you&#39;re too fuzzy on A to follow the explanation in B, then you can just refer back to the content where you learned A and freshen up: &#34;Huh, that thing in B is familiar but it involves A and I forgot how you do some part of A... okay, look back at A&#39;s lesson... ah yeah, that&#39;s right, that&#39;s how you do it. Okay, back to B.&#34; And then the act of solving problems in B solidifies your refreshed memory on A.</p><p>In the worst-case scenario, if a student manages to completely forget A to the point where they are unable to freshen up on it by looking at the reference material, then we also have a remediation process in place to explicitly given them extra practice on A. In B&#39;s lesson, we keep track of where prerequisites are used, so if a student &#34;plateaus&#34; on the lesson for B (i.e., they fail the lesson twice in a row without getting any further the second time), then we trigger remedial learning tasks on the prerequisites where the student got stuck.</p></li></ul><SPAN size="3em"><br/></SPAN><p>Feel free to <a target="_blank" href="https://justinmath.com/contact">contact</a> me if you have any follow-up questions.</p><h2>References</h2><p>Kyllonen, P. C., &amp; Tirre, W. C. (1988). <a target="_blank" href="https://apps.dtic.mil/sti/pdfs/ADA212765.pdf">Individual differences in associative learning and forgetting.</a> <i>Intelligence, 12</i>(4), 393-421.</p><p>McDermott, K. B., &amp; Zerr, C. L. (2019). <a target="_blank" href="https://journals.sagepub.com/doi/full/10.1177/0963721419869005">Individual differences in learning efficiency.</a> <i>Current Directions in Psychological Science, 28</i>(6), 607-613.</p><p>Zerr, C. L., Berg, J. J., Nelson, S. M., Fishell, A. K., Savalia, N. K., &amp; McDermott, K. B. (2018). <a target="_blank" href="https://jeffberg.github.io/cv/papers/Zerr_2018_PsychologicalScience.pdf">Learning efficiency: Identifying individual differences in learning rate and retention in healthy adults.</a> <i>Psychological science, 29</i>(9), 1436-1450.</p><hr/><p><SPAN size="2em"> <i>This post is part of the book <a target="_blank" href="https://justinmath.com/books">The Math Academy Way: Using the Power of Science to Supercharge Student Learning (Working Draft, Oct 2023)</a>.</i> <SPAN color="gray"><i>Suggested citation:</i> Skycak, J., advised by Roberts, J. (2023). Optimized, Individualized Spaced Repetition in Hierarchical Knowledge Structures. In <i>The Math Academy Way: Using the Power of Science to Supercharge Student Learning (Working Draft, Oct 2023).</i> https://justinmath.com/individualized-spaced-repetition-in-hierarchical-knowledge-structures/</SPAN> </SPAN></p><!-- keep original code below (not sure if it is used) --></section></div></div>
  </body>
</html>
