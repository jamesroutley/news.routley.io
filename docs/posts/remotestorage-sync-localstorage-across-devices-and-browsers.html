<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/FrigadeHQ/remote-storage">Original</a>
    <h1>Show HN: RemoteStorage – sync localStorage across devices and browsers</h1>
    
    <div id="readability-page-1" class="page"><section><p>Zvol are volumes backed by a zfs pool. They are quite popular as vm disk images.</p>
<p>Sometimes you just want to examine them in the host; here is how to mount them.</p>
<p>When the pool is imported, they show up under <code>/dev/zvol/&lt;path to zvol dataset&gt;</code>. At this point they are just raw drives, and kernel knows nothing
about its structure. To be able to mount them, we first need to read its
partition structure and create partition specific <code>/dev/</code> entires with
<code>kpartx(8)</code><a href="#fn1" id="fnref1" role="doc-noteref"><sup>1</sup></a>.</p>
<pre><code># -a for add
kpartx -a /dev/zvol/&lt;pathtozvol&gt;</code></pre>
<p>This will create corresponding devices for partitions under <code>/dev/mapper</code></p>
<pre><code>$:/dev/mapper]# ls -al
total 0
drwxr-xr-x  2 root root     120 Jan 12 17:04 .
drwxr-xr-x 20 root root    3980 Jan 12 17:04 ..
crw-------  1 root root 10, 236 Jan 12 17:00 control
lrwxrwxrwx  1 root root       7 Jan 12 17:04 root-zvol1 -&gt; ../dm-0
lrwxrwxrwx  1 root root       7 Jan 12 17:04 root-zvol2 -&gt; ../dm-1
lrwxrwxrwx  1 root root       7 Jan 12 17:04 root-zvol3 -&gt; ../dm-2</code></pre>
<p>Now you can mount them as a regular disk with <code>mount</code>.</p>
<pre><code>mount /dev/mapper/root-zvol1 /mnt</code></pre>
<section id="footnotes" role="doc-endnotes">
<hr/>
<ol>
<li id="fn1"><p>In nixos, <code>kpartx</code> is part of package <a href="https://search.nixos.org/packages?channel=23.11&amp;show=multipath-tools&amp;from=0&amp;size=50&amp;sort=relevance&amp;type=packages&amp;query=kpartx"><code>multipath-tools</code></a><a href="#fnref1" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></section></div>
  </body>
</html>
