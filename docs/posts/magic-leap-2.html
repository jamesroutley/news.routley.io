<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.magicleap.com/magic-leap-2">Original</a>
    <h1>Magic Leap 2</h1>
    
    <div id="readability-page-1" class="page"><article>
    

    <p><strong>Thursday, October  6, 2022</strong></p>

    <p>I&#39;ve set up a homelab finally!
This is something I&#39;ve wanted for a while and finally the timing was right.
The right project came along to justify it, so I took the plunge.</p>
<p>Naturally, that leads to a few questions:
What&#39;s a home lab?
Why do you want one?
And what is the shiny hardware?
(That last one is the dessert if you get through the rest ðŸ˜‰.)</p>

<p>Oh, and is it &#34;homelab&#34; or &#34;home lab&#34;?
Google Search Trends seem to indicate that it should be &#34;homelab&#34; in this context.
When people search for &#34;home lab&#34; it&#39;s about science labs or dogs.
When people search for &#34;homelab&#34; it&#39;s about computer stuff.
So, that&#39;s the spelling I&#39;ll be using!</p>
<p>A homelab is, simply put, a place to experiment with technology at home!
It can take a variety of forms, but that&#39;s the crux of it.
Some people have homelabs of rackmount hardware, but it can be as simple as an old laptop or a Raspberry Pi.</p>
<p>Ultimately, people use them for a variety of different things.
From &#34;lab&#34; in the word, you figure that it&#39;s a place for experimentation, not production.
That doesn&#39;t always end up as the case:
Some people run &#34;home production&#34; instead of &#34;homelab&#34;, but it&#39;s a big tent.
All are welcome.</p>
<p>There are basically two camps that I see homelabs fall into:</p>
<ul>
<li>
<p>Used for hosting services:
You&#39;ll see a lot of people hosting things for their own use.
Things like <a href="https://pi-hole.net/">Pi-hole</a> for ad blocking) and photo sharing apps fall into this bucket.
There&#39;s a lot of emphasis in this group on frugality and deal seeking.</p>
</li>
<li>
<p>Used for experimentation:
You&#39;ll see people doing infrastructure and DevOps, security experiments, etc.
This is the camp I fall into.
I don&#39;t want my homelab to run anything that someone depends on.
I&#39;m also willing to spend a little more on it for expediency.</p>
</li>
</ul>

<p>I mean, servers are fun.
But I did say the right project came along to justify it.
Or to rationalize it, at least.</p>
<p>Right now I&#39;m attending <a href="https://www.recurse.com/">Recurse Center</a>, and one of my projects is making <a href="https://github.com/ntietz/anode-kv">a key-value store</a>.
When I benchmark even just the protocol parser on my laptop, timing varies by 50% if Zoom is open.
This makes for a bad test.
I want to have a consistent test environment that I can run benchmarks on.</p>
<p>I would also like to have extra computing power to throw at things like tournaments of chess engines, since I&#39;m working on <a href="https://github.com/ntietz/patzer">a chess engine</a> at RC as well.</p>
<p>I could do both of these using cloud servers, but... that can get expensive pretty quickly.
This way I have an always-available local box that I pay for once and can use (and abuse).
As a comparison, an equivalent AWS instance to what I got would cost the same amount after being on for 20 days.
I could turn it on only when I need it, but in the long run having this machine is much more cost effective.</p>
<p>Also the hardware is shiny, and it makes my Rust builds significantly faster (30 seconds instead of 50 seconds for a full rebuild).</p>

<p>Okay, okay, I&#39;ll tell you about the hardware.
I got a used <a href="https://www.dell.com/en-us/shop/workstations-isv-certified/precision-7910/spd/precision-t7910-workstation">Dell T7910</a> from <a href="https://pcserverandparts.com/">PC Server and Parts</a>.
This was originally a video editing workstation, so it has a ton of PCI available, which will be handy for storage.
Inside it, it has 2 Intel Xeon E5-2690 v4 CPUs (28 cores / 56 threads) and 128 GB DDR4 registered ECC RAM.
I also have a paltry 1 TB SSD, which I plan on using as the boot drive but eventually augmenting with spinning disks and NVMe SSDs in those totally extra PCI slots.</p>
<p>&#34;But Nicholas, that&#39;s ridiculous. That hardware is so overkill.&#34;</p>
<p>Yes, you&#39;re not wrong.</p>
<p>But it&#39;s shiny, and it&#39;ll last me a long time.
It&#39;s accelerating my Rust builds and that&#39;s actually a real productivity boost.
And it was cheap.
It&#39;s a used workstation from 2017, so it&#39;s much much cheaper than new hardware.</p>

<p>Okay, so this is the saga, and it was painful.
At first, I wanted to set it up with Proxmox so that I can provision VMs.
And I wanted to do that provisioning with Terraform and Ansible.
This wasn&#39;t an entirely spurious decision: I wanted to be able to benchmark things in isolation, and thought that would be a good approach.</p>
<p>Ultimately, it was a very painful decision, though.
I never <em>quite</em> got things working and I was having really weird network issues, where I could not initiate outgoing connections from the VMs.
And eventually I broke things so badly, I couldn&#39;t even ssh into them!</p>
<p>In the end, I realized that I didn&#39;t... really... need to do this?
Why am I doing Proxmox again?
Oh right, because I thought it was the &#34;right&#34; way to do it.
No, no, that&#39;s okay.
I&#39;ll do things the quick and dirty way ðŸ˜€.</p>
<p>Instead of all the fuss, I just installed Fedora on it and called it a day.
If I want VMs, I can explore things like Firecracker in the future, too!</p>
<p>Well, that was the end of the first part.
But I couldn&#39;t get the thing to boot consistently!
I had to mash F12 to get into the boot menu every time, because the drives connect through a SAS RAID controller.
This controller permits direct mount of drives which aren&#39;t in RAID, but it seemingly does <em>not</em> permit default booting off one.
Sigh.
This is a big problem for me!
If the power goes of and I&#39;m away, I want to be able to wake the computer with a WOL packet, then have it come back up.</p>
<p>Fortunately, the solution was pretty straightforward.
A fellow Recurser pointed out I should probably just connect that drive directly with SATA instead of through the SAS array controller.
I could... but there are only two SATA ports on my mainboard and they&#39;re both in use!
It turned out that the second one was not in use, but had a cable plugged in and cable managed into the back of the case for exactly this sort of use case.
I plugged in my boot drive to that instead and everything came on!
Reboots are consistent now, and it always comes back on.</p>

<p>I don&#39;t know!
It depends.
If you have something you want to use it for, by all means!
It can be rewarding and useful.
It can also be a new hobby that sucks up a bunch of your time and money.</p>
<p>Gamble wisely.</p>
<hr/>
<p>Thanks to fellow Recurser Mikael Lindqvist who paired with me on writing this blog post!
It was a super fun way to get a post written, and I&#39;d recommend trying it.</p>

  </article><p>If you have comments or find errors, please <a href="mailto:blogfeedback@ntietz.com">email me</a>! For updates when I post new things, I have a lovely <a href="https://ntietz.com/atom.xml">RSS feed</a> you can use.
</p></div>
  </body>
</html>
