<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://lemire.me/blog/2023/01/23/international-domain-names-where-does-https-mesagefactory-ca-lead-you/">Original</a>
    <h1>International domain names: where does https://meßagefactory.ca lead you?</h1>
    
    <div id="readability-page-1" class="page"><div>
<p>Originally, the domain part of a web address was all ASCII (so no accents, no emojis, no Chinese characters). This was extended a long time ago thanks to something called <a href="https://en.wikipedia.org/wiki/Internationalized_domain_name">internationalized domain name</a> (IDN).</p>
<p>Today, in theory, you can use any Unicode character you like as part of a domain name, including emojis. Whether that is wise is something else.</p>
<p>What does the standard says? Given a domain name, we should identify its labels. They are normally separated by dots (.) into labels: www.microsoft.com has three labels. But you may also use other Unicode characters as separators (<span> ., ．, 。, ｡). Each label is further processed. If it is all ASCII, then it is left as is. Otherwise, we must convert it to an ASCII code called “punycode” after doing the following according to RFC 3454:</span></p>
<ul>
<li>Map characters (section 3 of <span>RFC 3454),</span></li>
<li>Normalize (section 4 of <span>RFC 3454),</span></li>
<li>Reject forbidden characters,</li>
<li><span>Optionally reject based on unassigned code points (section 7).</span></li>
</ul>
<p>And then you get to the <a href="https://lemire.me/blog/2023/01/04/emojis-in-domain-names-punycode-and-performance/">punycode algorithm</a>. There are further conditions to be satisfied, such as the domain name in ASCII cannot exceed 255 bytes.</p>
<p>That’s quite a lot of work. The goal is to transcribe each Unicode domain name into an ASCII domain name. You would hope that it would be a well-defined algorithm: given a Unicode domain name, there should be a unique output.</p>
<p>Let us choose a common non-ASCII character, the letter ß, called Eszett. Let me create a link with this character:</p>
<ul>
<li>
<ul>
<li><a href="https://meßagefactory.ca">https://meßagefactory.ca</a></li>
</ul>
</li>
</ul>
<p>What happens if you click on this link? The result depends on your browser. If you are using Microsoft Edge, Google Chrome or the Brave browser, you may end up at <a href="https://messagefactory.ca/">https://messagefactory.ca/</a>. If you are using Safari or Firefox  you may end up at <a href="https://xn--meagefactory-m9a.ca">https://xn--meagefactory-m9a.ca</a>. Of course, your results may vary depending on your exact system. Under ios (iPhone), I expect that the Safari behaviour will prevail irrespective of your browser.</p>
<p>Not what I expected.</p>
</div></div>
  </body>
</html>
