<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/copy/v86">Original</a>
    <h1>V86: x86 virtualization in the browser, recompiling x86 to WASM on the fly</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><p dir="auto"><a href="https://gitter.im/copy/v86" rel="nofollow"><img src="https://camo.githubusercontent.com/5dbac0213da25c445bd11f168587c11a200ba153ef3014e8408e462e410169b3/68747470733a2f2f6261646765732e6769747465722e696d2f4a6f696e253230436861742e737667" alt="Join the chat at https://gitter.im/copy/v86" data-canonical-src="https://badges.gitter.im/Join%20Chat.svg"/></a></p>
<p dir="auto">v86 emulates an x86-compatible CPU and hardware. Machine code is translated to
WebAssembly modules at runtime in order to achieve decent performance. Here&#39;s a
list of emulated hardware:</p>
<ul dir="auto">
<li>An x86-compatible CPU. The instruction set is around Pentium III level,
including full SSE2 support. Some features are missing, in particular:
<ul dir="auto">
<li>Task gates, far calls in protected mode</li>
<li>Some 16 bit protected mode features</li>
<li>Single stepping (trap flag, debug registers)</li>
<li>Some exceptions, especially floating point and SSE</li>
<li>Multicore</li>
<li>64-bit extensions</li>
</ul>
</li>
<li>A floating point unit (FPU). Calculations are done using the Berkeley
SoftFloat library and therefore should be precise (but slow). Trigonometric
and log functions are emulated using 64-bit floats and may be less precise.
Not all FPU exceptions are supported.</li>
<li>A floppy disk controller (8272A).</li>
<li>An 8042 Keyboard Controller, PS2. With mouse support.</li>
<li>An 8254 Programmable Interval Timer (PIT).</li>
<li>An 8259 Programmable Interrupt Controller (PIC).</li>
<li>Partial APIC support.</li>
<li>A CMOS Real Time Clock (RTC).</li>
<li>A generic VGA card with SVGA support and Bochs VBE Extensions.</li>
<li>A PCI bus. This one is partly incomplete and not used by every device.</li>
<li>An IDE disk controller.</li>
<li>An NE2000 (8390) PCI network card.</li>
<li>A virtio filesystem.</li>
<li>A SoundBlaster 16 sound card.</li>
</ul>
<h2 dir="auto"><a id="user-content-demos" aria-hidden="true" href="#demos"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Demos</h2>
<p dir="auto"><a href="https://copy.sh/v86/?profile=archlinux" rel="nofollow">Arch Linux</a> —
<a href="https://copy.sh/v86/?profile=dsl" rel="nofollow">Damn Small Linux</a> —
<a href="https://copy.sh/v86/?profile=buildroot" rel="nofollow">Buildroot Linux</a> —
<a href="https://copy.sh/v86/?profile=reactos" rel="nofollow">ReactOS</a> —
<a href="https://copy.sh/v86/?profile=windows2000" rel="nofollow">Windows 2000</a> —
<a href="https://copy.sh/v86/?profile=windows98" rel="nofollow">Windows 98</a> —
<a href="https://copy.sh/v86/?profile=windows95" rel="nofollow">Windows 95</a> —
<a href="https://copy.sh/v86/?profile=windows1" rel="nofollow">Windows 1.01</a> —
<a href="https://copy.sh/v86/?profile=msdos" rel="nofollow">MS-DOS</a> —
<a href="https://copy.sh/v86/?profile=freedos" rel="nofollow">FreeDOS</a> —
<a href="https://copy.sh/v86/?profile=freebsd" rel="nofollow">FreeBSD</a> —
<a href="https://copy.sh/v86/?profile=openbsd" rel="nofollow">OpenBSD</a> —
<a href="https://copy.sh/v86/?profile=9front" rel="nofollow">9front</a> —
<a href="https://copy.sh/v86/?profile=haiku" rel="nofollow">Haiku</a> —
<a href="https://copy.sh/v86/?profile=oberon" rel="nofollow">Oberon</a> —
<a href="https://copy.sh/v86/?profile=kolibrios" rel="nofollow">KolibriOS</a> —
<a href="https://copy.sh/v86/?profile=qnx" rel="nofollow">QNX</a></p>
<h2 dir="auto"><a id="user-content-compatibility" aria-hidden="true" href="#compatibility"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Compatibility</h2>
<p dir="auto">Here&#39;s an overview of the operating systems supported in v86:</p>
<ul dir="auto">
<li>Linux works pretty well. 64-bit kernels are not supported.
<ul dir="auto">
<li>Damn Small Linux (2.4 Kernel) works.</li>
<li>All tested versions of TinyCore work.</li>
<li><a href="https://buildroot.uclibc.org" rel="nofollow">BuildRoot</a> can be used to build a minimal
image. <a href="https://github.com/humphd/browser-vm">humphd/browser-vm</a> has some
useful scripts for building one.</li>
<li>Archlinux works. See <a href="https://github.com/copy/v86/blob/master/docs/archlinux.md">archlinux.md</a> for building an image.</li>
<li>Debian works. An image can be built from a Dockerfile, see <a href="https://github.com/copy/v86/blob/master/tools/docker/debian">tools/docker/debian/</a>.</li>
<li>Ubuntu up to 10.04 works.</li>
<li>Alpine Linux works.</li>
</ul>
</li>
<li>ReactOS works.</li>
<li>FreeDOS, Windows 1.01 and MS-DOS run very well.</li>
<li>KolibriOS works.</li>
<li>Haiku works.</li>
<li>Android x86 1.6-r2 works if one selects VESA mode at the boot prompt. Newer
versions may work if compiled without SSE3. See <a href="https://github.com/copy/v86/issues/224" data-hovercard-type="issue" data-hovercard-url="/copy/v86/issues/224/hovercard">#224</a>.</li>
<li>Windows 1, 3.0, 95, 98, ME and 2000 work. Other versions currently don&#39;t (see <a href="https://github.com/copy/v86/issues/86" data-hovercard-type="issue" data-hovercard-url="/copy/v86/issues/86/hovercard">#86</a>, <a href="https://github.com/copy/v86/issues/208" data-hovercard-type="issue" data-hovercard-url="/copy/v86/issues/208/hovercard">#208</a>).
<ul dir="auto">
<li>In Windows 2000 and higher the PC type has to be changed from ACPI PC to Standard PC</li>
</ul>
</li>
<li>Many hobby operating systems work.</li>
<li>9front works.</li>
<li>Plan 9 doesn&#39;t work.</li>
<li>QNX works.</li>
<li>OS/2 doesn&#39;t work.</li>
<li>FreeBSD works.</li>
<li>OpenBSD works with a specific boot configuration. At the <code>boot&gt;</code> prompt type
<code>boot -c</code>, then at the <code>UKC&gt;</code> prompt <code>disable mpbios</code> and <code>exit</code>.</li>
<li>NetBSD works only with a custom kernel, see <a href="https://github.com/copy/v86/issues/350" data-hovercard-type="issue" data-hovercard-url="/copy/v86/issues/350/hovercard">#350</a>.</li>
<li>Older versions of SerenityOS work (1.0.gc460f4a is a known working version).</li>
</ul>
<p dir="auto">You can get some infos on the disk images here: <a href="https://github.com/copy/images">https://github.com/copy/images</a>.</p>
<h2 dir="auto"><a id="user-content-how-to-build-run-and-embed" aria-hidden="true" href="#how-to-build-run-and-embed"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How to build, run and embed?</h2>
<p dir="auto">You need:</p>
<ul dir="auto">
<li>make</li>
<li>Rust with the wasm32-unknown-unknown target</li>
<li>A version of clang compatible with Rust</li>
<li>java (for Closure Compiler, not necessary when using <code>debug.html</code>)</li>
<li>nodejs (a recent version is required, v16.11.1 is known to be working)</li>
<li>To run tests: nasm, gdb, qemu-system, gcc, libc-i386 and rustfmt</li>
</ul>
<p dir="auto">See <a href="https://github.com/copy/v86/blob/master/tools/docker/test-image/Dockerfile">tools/docker/test-image/Dockerfile</a>
for a full setup on Debian or
<a href="https://docs.microsoft.com/en-us/windows/wsl/install" rel="nofollow">WSL</a>.</p>
<ul dir="auto">
<li>Run <code>make</code> to build the debug build (at <code>debug.html</code>).</li>
<li>Run <code>make all</code> to build the optimized build (at <code>index.html</code>).</li>
<li>ROM and disk images are loaded via XHR, so if you want to try out <code>index.html</code>
locally, make sure to serve it from a local webserver. You can use <code>make run</code>
to serve the files using Python&#39;s http module.</li>
<li>If you only want to embed v86 in a webpage you can use libv86.js. For usage,
check out the <a href="https://github.com/copy/v86/blob/master/examples">examples</a>. You can download it from the release section.</li>
</ul>
<h3 dir="auto"><a id="user-content-alternatively-to-build-using-docker" aria-hidden="true" href="#alternatively-to-build-using-docker"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Alternatively, to build using docker</h3>
<ul dir="auto">
<li>If you have docker installed, you can run the whole system inside a container.</li>
<li>See <code>tools/docker/exec</code> to find Dockerfile required for this.</li>
<li>You can run <code>docker build -f tools/docker/exec/Dockerfile -t v86:alpine-3.14 .</code> from the root directory to generate docker image.</li>
<li>Then you can simply run <code>docker run -it -p 8000:8000 v86:alpine-3.14</code> to start the server.</li>
<li>Check <code>localhost:8000</code> for hosted server.</li>
</ul>
<h2 dir="auto"><a id="user-content-testing" aria-hidden="true" href="#testing"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Testing</h2>
<p dir="auto">The disk images for testing are not included in this repository. You can
download them directly from the website using:</p>
<p dir="auto"><code>wget -P images/ https://k.copy.sh/{linux.iso,linux4.iso,buildroot-bzimage.bin,openbsd-floppy.img,kolibri.img,windows101.img,os8.img,freedos722.img}</code></p>
<p dir="auto">Run all tests: <code>make jshint rustfmt kvm-unit-test nasmtests nasmtests-force-jit expect-tests jitpagingtests qemutests rust-test tests</code></p>
<p dir="auto">See <a href="https://github.com/copy/v86/blob/master/tests/Readme.md">tests/Readme.md</a> for more infos.</p>
<h2 dir="auto"><a id="user-content-api-examples" aria-hidden="true" href="#api-examples"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>API examples</h2>
<ul dir="auto">
<li><a href="https://github.com/copy/v86/blob/master/examples/basic.html">Basic</a></li>
<li><a href="https://github.com/copy/v86/blob/master/examples/serial.html">Programatically using the serial terminal</a></li>
<li><a href="https://github.com/copy/v86/blob/master/examples/lua.html">A Lua interpreter</a></li>
<li><a href="https://github.com/copy/v86/blob/master/examples/two_instances.html">Two instances in one window</a></li>
<li><a href="https://github.com/copy/v86/blob/master/examples/save_restore.html">Saving and restoring emulator state</a></li>
</ul>
<p dir="auto">Using v86 for your own purposes is as easy as:</p>
<div data-snippet-clipboard-copy-content="var emulator = new V86Starter({
    screen_container: document.getElementById(&#34;screen_container&#34;),
    bios: {
        url: &#34;../../bios/seabios.bin&#34;,
    },
    vga_bios: {
        url: &#34;../../bios/vgabios.bin&#34;,
    },
    cdrom: {
        url: &#34;../../images/linux.iso&#34;,
    },
    autostart: true,
});"><pre><span>var</span> <span>emulator</span> <span>=</span> <span>new</span> <span>V86Starter</span><span>(</span><span>{</span>
    <span>screen_container</span>: <span>document</span><span>.</span><span>getElementById</span><span>(</span><span>&#34;screen_container&#34;</span><span>)</span><span>,</span>
    <span>bios</span>: <span>{</span>
        <span>url</span>: <span>&#34;../../bios/seabios.bin&#34;</span><span>,</span>
    <span>}</span><span>,</span>
    <span>vga_bios</span>: <span>{</span>
        <span>url</span>: <span>&#34;../../bios/vgabios.bin&#34;</span><span>,</span>
    <span>}</span><span>,</span>
    <span>cdrom</span>: <span>{</span>
        <span>url</span>: <span>&#34;../../images/linux.iso&#34;</span><span>,</span>
    <span>}</span><span>,</span>
    <span>autostart</span>: <span>true</span><span>,</span>
<span>}</span><span>)</span><span>;</span></pre></div>
<p dir="auto">See <a href="https://github.com/copy/v86/blob/master/src/browser/starter.js">starter.js</a>.</p>
<h2 dir="auto"><a id="user-content-license" aria-hidden="true" href="#license"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h2>
<p dir="auto">v86 is distributed under the terms of the Simplified BSD License, see
<a href="https://github.com/copy/v86/blob/master/LICENSE">LICENSE</a>. The following third-party dependencies are included in the
repository under their own licenses:</p>
<ul dir="auto">
<li><a href="https://github.com/copy/v86/blob/master/lib/softfloat/softfloat.c"><code>lib/softfloat/softfloat.c</code></a></li>
<li><a href="https://github.com/copy/v86/blob/master/lib/zstd/zstddeclib.c"><code>lib/zstd/zstddeclib.c</code></a></li>
<li><a href="https://github.com/copy/v86/blob/master/tests/kvm-unit-tests"><code>tests/kvm-unit-tests/</code></a></li>
<li><a href="https://github.com/copy/v86/blob/master/tests/qemutests"><code>tests/qemutests/</code></a></li>
</ul>
<h2 dir="auto"><a id="user-content-credits" aria-hidden="true" href="#credits"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Credits</h2>
<ul dir="auto">
<li>CPU test cases via <a href="https://wiki.qemu.org/Main_Page" rel="nofollow">QEMU</a></li>
<li>More tests via <a href="https://www.linux-kvm.org/page/KVM-unit-tests" rel="nofollow">kvm-unit-tests</a></li>
<li><a href="https://github.com/facebook/zstd">zstd</a> support is included for better compression of state images</li>
<li><a href="http://www.jhauser.us/arithmetic/SoftFloat.html" rel="nofollow">Berkeley SoftFloat</a> is included to precisely emulate 80-bit floating point numbers</li>
<li><a href="https://github.com/s-macke/jor1k">The jor1k project</a> for 9p, filesystem and uart drivers</li>
<li><a href="https://winworldpc.com/" rel="nofollow">WinWorld</a> sources of some old operating systems</li>
</ul>
<h2 dir="auto"><a id="user-content-more-questions" aria-hidden="true" href="#more-questions"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>More questions?</h2>
<p dir="auto">Shoot me an email to <code>copy@copy.sh</code>. Please report bugs on GitHub.</p>
<h2 dir="auto"><a id="user-content-author" aria-hidden="true" href="#author"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Author</h2>
<p dir="auto">Fabian Hemmer (<a href="https://copy.sh/" rel="nofollow">https://copy.sh/</a>, <code>copy@copy.sh</code>)</p>
</article>
          </div></div>
  </body>
</html>
