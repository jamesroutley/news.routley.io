<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/Beariish/bolt">Original</a>
    <h1>Show HN: Bolt â€“ A super-fast, statically-typed scripting language written in C</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">A <em>lightweight</em>, <strong>lightning-fast</strong>, type-safe embeddable language for real-time applications.</p>
<div dir="auto" data-snippet-clipboard-copy-content="import print, error, Error from core
import abs, epsilon from math

// The return type of safe_divide is inferred to be `Error | number`
fn safe_divide(a: number, b: number) {
    if abs(b) &lt; epsilon {
        return error(&#34;Cannot divide by zero!&#34;)
    }

    return a / b
}

match let result = safe_divide(10, 5) {
    is Error {
        // The type of result is narrowed in this branch!
        print(&#34;Failed to divide:&#34;, result.what)
    }

    is number {
        print(&#34;The answer is&#34;, result)
    }
}"><pre><span>import</span> <span>print</span><span>,</span> <span>error</span><span>,</span> <span>Error</span> <span>from</span> <span>core</span>
<span>import</span> <span>abs</span><span>,</span> <span>epsilon</span> <span>from</span> <span>math</span>

<span>// The return type of safe_divide is inferred to be `Error | number`</span>
<span>fn</span> <span>safe_divide</span><span>(</span><span>a</span>: <span>number</span><span>,</span> <span>b</span>: <span>number</span><span>)</span><span></span> <span>{</span>
    <span>if</span> <span>abs</span><span>(</span><span>b</span><span>)</span> <span>&lt;</span> <span>epsilon</span> <span>{</span>
        <span>return</span> <span>error</span><span>(</span><span>&#34;Cannot divide by zero!&#34;</span><span>)</span>
    <span>}</span>

    <span>return</span> <span>a</span> <span>/</span> <span>b</span>
<span>}</span>

<span>match</span> <span>let</span> <span>result</span> <span>=</span> <span>safe_divide</span><span>(</span><span>10</span><span>,</span> <span>5</span><span>)</span><span></span> <span>{</span>
    <span>is</span> <span>Error</span> <span>{</span>
        <span>// The type of result is narrowed in this branch!</span>
        <span>print</span><span>(</span><span>&#34;Failed to divide:&#34;</span><span>,</span> <span>result</span><span>.</span><span>what</span><span>)</span>
    <span>}</span>

    <span>is</span> <span>number</span> <span>{</span>
        <span>print</span><span>(</span><span>&#34;The answer is&#34;</span><span>,</span> <span>result</span><span>)</span>
    <span>}</span>
<span>}</span></pre></div>

<ul dir="auto">
<li><a href="https://github.com/Beariish/bolt/blob/main/doc/Bolt%20Performance.md">Lightning-fast performance</a>, outperforming other languages in its class</li>
<li>Compact implementation, leaving a minimal impact on build size while remaining consise enough to browse.</li>
<li>Blazingly quick compilation, plow through code at over 500kloc/thread/second. That&#39;s 50&#39;000 lines in the blink of an eye.</li>
<li>Ease of embedding, only a handful of lines to get going</li>
<li>Rich type system to catch errors before code is ran, with plenty of support for extending it from native code</li>
<li>Embed-first design, prioritizing inter-language performance and agility</li>
</ul>

<ul dir="auto">
<li><strong><a href="https://github.com/Beariish/bolt/blob/main/doc/Bolt%20Programming%20Guide.md">Bolt programming guide</a></strong></li>
<li><strong><a href="https://github.com/Beariish/bolt/tree/main/doc/Bolt%20Standard%20Library">Bolt standard library reference</a></strong></li>
<li><strong><a href="https://github.com/Beariish/bolt/tree/main/doc/Bolt%20Embedding%20Guide.md">Bolt embedding and API reference</a></strong></li>
<li><strong><a href="https://github.com/Beariish/bolt/blob/main/doc/Bolt%20Performance.md">Bolt performance</a></strong></li>
<li><strong><a href="https://github.com/Beariish/bolt/blob/main/doc/Bolt%20Users.md">Notable Bolt users</a></strong></li>
</ul>

<p dir="auto">Bolt only depends on the C standard library as well as <code>libm</code> on Unix-based systems.
Some standard library modules include things like file and system IO, but these can be disabled easily.
By default, Bolt sets up an environment that uses <code>malloc</code>/<code>realloc</code>/<code>free</code>, but this is also easy to configure.
Bolt also embeds my other library <a href="https://github.com/Beariish/picomatch">picomatch</a> for regex parsing</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Minimal embedding example</h2><a id="user-content-minimal-embedding-example" aria-label="Permalink: Minimal embedding example" href="#minimal-embedding-example"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The <a href="https://github.com/Beariish/bolt/blob/main/bolt-cli/main.c">bolt-cli</a> program provides a very consice example of how to embed bolt an an application, see the <a href="https://github.com/Beariish/bolt/tree/main/doc/Bolt%20Embedding%20Guide.md">Bolt embedding guide</a> for more details.</p>

<p dir="auto">The <a href="https://github.com/Beariish/bolt/tree/main/examples">examples</a> folder contains a few short examples of ideomatically written bolt code. Check out the <a href="https://github.com/Beariish/bolt/tree/main/tests">tests</a> and <a href="https://github.com/Beariish/bolt/tree/main/benchmarks">benchmarks</a> folders as wel for some more in-depth language overview.</p>

<p dir="auto">Bolt currently only builds on x64. 32-bit architectures are explicitly not supported, arm and riscv are untested.
Running <code>cmake</code> in the root directory of the project will generate a static library for the language, as well as the CLI tool.
For more information and options regarding embedding Bolt in your application, see <code>bt_config.h</code>.
See below for the status of Bolt on each relevant compiler.</p>

<p dir="auto">Please note that Bolt is <strong>not</strong> yet stable, expect to encounter compiler bugs and crashes. If you do, opening an issue with replicable Bolt code would be much appreciated ðŸ˜Š</p>
<p dir="auto"><a href="https://github.com/Beariish/bolt/actions/workflows/cmake-multi-platform.yml"><img src="https://github.com/Beariish/bolt/actions/workflows/cmake-multi-platform.yml/badge.svg" alt="Build Status"/></a></p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Compiler</th>
<th>Status</th>
<th>Reason</th>
</tr>
</thead>
<tbody>
<tr>
<td>MSVC</td>
<td>âœ…</td>
<td>no issues</td>
</tr>
<tr>
<td>GCC</td>
<td>âœ…ðŸŸ¨</td>
<td>all functional, some warnings</td>
</tr>
<tr>
<td>Clang</td>
<td>âœ…ðŸŸ¨</td>
<td>all functional, some warnings</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>

<p dir="auto">Bolt is a very opinionated project, and any contributions should take the vision into account.</p>
<p dir="auto">Bugfixes are likely to be accepted as long as they&#39;re within reason and don&#39;t change any expected behaviour. Adding tests in case of regression is very much appreciated as well. A clean run of <code>/tests/all</code> is expected of course.</p>
<p dir="auto">Optimizations may also be accepted for minor versions under similar criteria. A before/after run of <code>/benchmarks/all</code> is expected to evaluate the impact and make sure nothing else regresses. If the specific optimization isn&#39;t captured in any existing benchmark, adding one is required.</p>
<p dir="auto">Feature additions will need a lot of consideration, Bolt is very intentionally minimal in its&#39; design and featureset. I highly suggest you submit some kind of proposal or plan before starting any significant work on a feature to review. Use cases, performance, and implementation cost will all be expected to be justified.</p>

<p dir="auto">Bolt is licensed under MIT. See LICENSE for more information.</p>
</article></div></div>
  </body>
</html>
