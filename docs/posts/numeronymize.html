<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://leancrew.com/all-this/2024/07/numeronymize/">Original</a>
    <h1>Numeronymize</h1>
    
    <div id="readability-page-1" class="page"><div id="container">
       <!-- header -->
      
      <div id="content">
        <p>
          <span></span>
          <a href="https://leancrew.com/all-this/2024/07/happy-2460496/">Previous post</a>        </p>
        
        <p>July  5, 2024 at  5:07 PM by Dr. Drang</p>
        <p>Anil Dash <a href="https://me.dm/@anildash/112734317490713205">quote-tweeted</a> <a href="https://mastodon.hccp.org/@igb/112734309177807110">this post</a> from Ian Brown on Mastodon this morning:</p>

<blockquote>
  <p>I was so excited to learn that abbreviations like “a11y” or “c14n” are called “numeronyms” that I wrote an #Emacs^H^H^H^H^H^H #E3s extension to make it easier to use them.</p>
</blockquote>

<p>The tweet<sup id="fnref:tweet"><a href="#fn:tweet" rel="footnote">1</a></sup> links to <a href="https://github.com/igb/numeronymize">this GitHub page</a>. First I thought it was funny to see a link to an Emacs Lisp script the day after I posted about <a href="https://leancrew.com/all-this/2024/07/happy-2460496/">my <code>date-convert</code> script</a>. Then I thought “I want to be able to do that, but not in Emacs.” So I built this Keyboard Maestro macro, which I also called Numeronymize:</p>

<p><img width="80%" src="https://leancrew.com/all-this/images2024/20240705-KM%20Numeronymize.png" alt="Screenshot of Keyboard Maestro Numeronymize macro" title="KM Numeronymize"/></p>

<p>If you <a href="https://leancrew.com/all-this/downloads/Numeronymize.kmmacros">download</a> and install it, it will appear in your Global Macro Group.</p>

<p>Here’s how to use it: Type the word you want to numeronymize in any editable text field. For example,</p>

<pre><code>accessibility
</code></pre>

<p>With the cursor blinking at the end of the word, type ⌃⌥⌘3 (on standard American keyboards, the number symbol, #, is on the 3 key). The word before the cursor will be selected and shortened to its numeronym,</p>

<pre><code>a11y
</code></pre>

<p>Honestly, I don’t think I’ll be using this macro very much, but it was fun and easy to write. The key is the Perl one-liner in the third step:</p>

<pre><code>/usr/bin/perl -C -pe &#39;s/(.)(.+)(.)/$1 . length($2) . $3/e&#39;
</code></pre>

<p>I have more than one Perl executable on my computer, so I’m being explicit here about calling the one in <code>/usr/bin</code> that comes with macOS. The <code>-C</code> switch tells Perl to treat the input and output as UTF-8 (more on this below); the <code>-p</code> switch tells it to loop through the input, apply the code to it, and print out the result; and the <code>-e</code> switch tells it to treat the following string as the code to execute:</p>

<pre><code>s/(.)(.+)(.)/$1 . length($2) . $3/e
</code></pre>

<p>This is the cool part, because <a href="https://perldoc.perl.org/perlop#Regexp-Quote-Like-Operators">Perl’s substitute command</a> has an <code>e</code> option that means “evaluate.” It treats the replacement as a chunk of Perl code, evaluates it, and returns the result. Here, it concatenates the first letter, the length of the middle string of characters, and the final letter. When I saw what Brown’s numeronymize extension did, I immediately thought of this feature of Perl and knew I could do it in a one-liner.</p>

<p>The <a href="https://perldoc.perl.org/perlrun#-C-%5Bnumber/list%5D"><code>-C</code> switch</a> isn’t needed if all we care about are words made of ASCII characters. But what if we want to shorten this?</p>

<pre><code>streichholzschächtelchen
</code></pre>

<p>Without the <code>-C</code>, we’d get</p>

<pre><code>s23n
</code></pre>

<p>because the <code>length</code> function normally returns the length in bytes, and the <code>ä</code> takes up two bytes. But with the <code>-C</code>, <code>length</code> understands that we want characters, not bytes, so the macro returns</p>

<pre><code>s22n
</code></pre>

<p>which is what we want.</p>

<p>A couple of other notes:</p>

<ul>
<li>The macro starts out by simulating the ⌥⇧← keyboard combination to select the word to the left of the cursor. My thinking was that I’d most often use this macro right after typing or pasting a long word. So it made sense to have the macro do the word selection this way. If you think it would be better to do the selection yourself, delete this first step.</li>
<li>Because I use the clipboard to copy the long word and to hold the shortened numeronym before pasting, two items are added to Keyboard Maestro’s clipboard history. But because they’re just temporary items, I don’t think they belong in the history, so the last two steps in the macro delete the most recent two items in the clipboard history.</li>
</ul>

<p>Thanks to Ian Brown for making the Emacs extension and to Anil Dash for bringing it to wide attention. Dash says his favorite numeronym is “e13n,” but I think he’s leaving out one of the T’s.</p>


        <p>
          <span></span>
          <a href="https://leancrew.com/all-this/2024/07/happy-2460496/">Previous post</a>        </p>

      </div> <!-- content -->
      
       <!-- sidebar -->
       
       <!-- footer -->
    </div></div>
  </body>
</html>
