<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://lcamtuf.substack.com/p/signal-reflections-in-electronic">Original</a>
    <h1>Signal reflections in electronic circuits</h1>
    
    <div id="readability-page-1" class="page"><div><div dir="auto"><p><span>In some of the earlier articles on this blog, I talked about two important and hard-to-grasp phenomena that interfere with the design of high-speed digital circuits. The first one are </span><a href="https://lcamtuf.substack.com/p/energy-in-electronic-circuits" rel="">signal distortions</a><span> contributed by PCB parasitics; the other is the </span><a href="https://lcamtuf.substack.com/p/square-waves-or-non-elephant-biology" rel="">peculiar nature of square waves</a><span> that makes them far more unruly than sinusoidal waveforms.</span></p><p>Today, I’d like to tackle one of the boss fights of electronic circuit design: signal reflections. This peculiar phenomenon was first observed on long-distance transmission lines, and then kept cropping up in radio design. It manifested as echoes of previously-transmitted signals, seemingly “bouncing back” off impedance discontinuities. It happened whenever you had a source with high current capacity driving a low-power load over a sufficiently long run of wire. More confusingly, the same issue occurred with wimpy sources driving power-hungry devices.</p><p>In modern times, reflections are a recurring headache for ultra-high-speed digital electronics — and although they seldom interfere with hobby projects, they’re still worth learning about.  Alas, most of the common-sense explanations you find online don’t make a whole lot of sense; for example, the optical analogy used by Wikipedia will leave you scratching your head. So, let’s try another approach.</p><h3>The speed of electricity<div id="§the-speed-of-electricity"><div></div></div></h3><p>Electronic signals do not propagate through wires instantaneously, but we know they travel fast; to measure their speed, it is possible to conduct a simple experiment. Let’s take a 100 ft (30.5 m) run of coaxial cable, connect one side it to a signal generator, and the other to a 47 Ω resistor (this roughly matches the current capacity of the signal generator). Finally, let’s bring the ends close together and let’s hook up a pair of oscilloscope leads.</p><p>The beauty of coaxial cables is that virtually the entire electromagnetic field is contained within the structure of the cable, so the signal can’t take any shortcuts — even if the coax is coiled on the workshop floor. By measuring the delay between the signal entering the cable (yellow trace) and exiting it (blue), we can figure out how quickly it traversed 100 feet of wire:</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F18084edb-678f-42a5-8edb-31c50dd13d22_1920x1080.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F18084edb-678f-42a5-8edb-31c50dd13d22_1920x1080.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F18084edb-678f-42a5-8edb-31c50dd13d22_1920x1080.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F18084edb-678f-42a5-8edb-31c50dd13d22_1920x1080.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F18084edb-678f-42a5-8edb-31c50dd13d22_1920x1080.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F18084edb-678f-42a5-8edb-31c50dd13d22_1920x1080.png" width="1456" height="819" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/18084edb-678f-42a5-8edb-31c50dd13d22_1920x1080.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:819,&#34;width&#34;:1456,&#34;resizeWidth&#34;:null,&#34;bytes&#34;:129493,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:false,&#34;topImage&#34;:true,&#34;internalRedirect&#34;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F18084edb-678f-42a5-8edb-31c50dd13d22_1920x1080.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F18084edb-678f-42a5-8edb-31c50dd13d22_1920x1080.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F18084edb-678f-42a5-8edb-31c50dd13d22_1920x1080.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F18084edb-678f-42a5-8edb-31c50dd13d22_1920x1080.png 1456w" sizes="100vw" fetchpriority="high"/></picture></div></a><figcaption><em>Measuring signal propagation speed.</em></figcaption></figure></div><p>The measurement points to a propagation delay of about 127 nanoseconds. This indicates signal speed of 0.24 m/ns — 240,000 km/s — or about 80% the speed of light in vacuum. </p><p>This result is, in essence, the fundamental constraint on the exchange of information in that medium. And it’s pretty cool that we can make this measurement at home!</p><h3>Getting spooky with resistors<div id="§getting-spooky-with-resistors"><div></div></div></h3><p>Next, let’s remove the 47 Ω resistor on the far end of the cable and replace it with 10 Ω. This resistor will admit far more current than the signal generator can provide, so one would expect to see the resulting voltage swing of the square wave to be greatly attenuated. But does this happen instantly, or is there a delay? Let’s find out:</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8d6d8205-c69d-4351-8f44-35d5b438e82e_1920x1080.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8d6d8205-c69d-4351-8f44-35d5b438e82e_1920x1080.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8d6d8205-c69d-4351-8f44-35d5b438e82e_1920x1080.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8d6d8205-c69d-4351-8f44-35d5b438e82e_1920x1080.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8d6d8205-c69d-4351-8f44-35d5b438e82e_1920x1080.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8d6d8205-c69d-4351-8f44-35d5b438e82e_1920x1080.png" width="1456" height="819" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/8d6d8205-c69d-4351-8f44-35d5b438e82e_1920x1080.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:819,&#34;width&#34;:1456,&#34;resizeWidth&#34;:null,&#34;bytes&#34;:113691,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8d6d8205-c69d-4351-8f44-35d5b438e82e_1920x1080.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8d6d8205-c69d-4351-8f44-35d5b438e82e_1920x1080.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8d6d8205-c69d-4351-8f44-35d5b438e82e_1920x1080.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F8d6d8205-c69d-4351-8f44-35d5b438e82e_1920x1080.png 1456w" sizes="100vw" loading="lazy"/></picture></div></a><figcaption><em>Experiment 1: driving a low-impedance load.</em></figcaption></figure></div><p>The yellow trace represents the desired waveform; the blue one is the actual voltage as measured on the signal generator’s output port. For the first ~255 nanoseconds after every transition, the blue waveform appears fairly normal; but then, the rug is pulled and the voltage suddenly drops.</p><p>What’s going on? Simply put, it would violate causality if the signal generator could know what the resistor connected on the other end is going to do before the electromagnetic wave makes it there and back. For the duration of that roundtrip, pushing electrons into the coax cable necessarily takes the same amount of effort whether it’s an open circuit or a short. Only after that, the reality of driving a low-impedance load suddenly sets in.</p><p>If this sounds unconvincing, let’s switch from square waves to shorter pulses. With this change, the echo will show up after the fact, precisely on schedule — and now pulling the voltage negative:</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44c0793b-b0db-4de3-9d4a-1561c8a230e4_1920x1080.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44c0793b-b0db-4de3-9d4a-1561c8a230e4_1920x1080.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44c0793b-b0db-4de3-9d4a-1561c8a230e4_1920x1080.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44c0793b-b0db-4de3-9d4a-1561c8a230e4_1920x1080.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44c0793b-b0db-4de3-9d4a-1561c8a230e4_1920x1080.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44c0793b-b0db-4de3-9d4a-1561c8a230e4_1920x1080.png" width="1456" height="819" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/44c0793b-b0db-4de3-9d4a-1561c8a230e4_1920x1080.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:819,&#34;width&#34;:1456,&#34;resizeWidth&#34;:null,&#34;bytes&#34;:128047,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44c0793b-b0db-4de3-9d4a-1561c8a230e4_1920x1080.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44c0793b-b0db-4de3-9d4a-1561c8a230e4_1920x1080.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44c0793b-b0db-4de3-9d4a-1561c8a230e4_1920x1080.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F44c0793b-b0db-4de3-9d4a-1561c8a230e4_1920x1080.png 1456w" sizes="100vw" loading="lazy"/></picture></div></a><figcaption><em>Messing around and finding out.</em></figcaption></figure></div><p>The generator could try harder to fight it, but that would only make things worse; the phantom electromotive force it sees across its terminals is an echo of its own actions, shifted in time. </p><p>At the risk of restating what might be obvious, the experiment we just conducted involved a high-impedance (low-current) signal generator driving a low-impedance (power-hungry) load. Coincidentally, this is where most other non-mathematical explanations of signal reflections fall short: after all, if you have a trickle of water flowing into a large drainpipe, why does anything bounce back at all? And what’s up with the inverted polarity? </p><p>For these reasons and more, interpreting the effect as a relativistic consequence of prior actions — rather than leaning on wonky optical or hydraulic analogies — makes more sense.</p><h3>What about the other way round?<div id="§what-about-the-other-way-round"><div></div></div></h3><p>For completeness, let’s observe what happens if we remove the 4.7 Ω resistor at the end of the line and replace it with 1 kΩ. This allows only a fraction of the generator’s maximum output current to flow through the load. In effect, we now have a comparatively low-impedance source driving a high-impedance device:</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd574120a-d56d-4407-9833-bc888a575904_1920x1080.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd574120a-d56d-4407-9833-bc888a575904_1920x1080.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd574120a-d56d-4407-9833-bc888a575904_1920x1080.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd574120a-d56d-4407-9833-bc888a575904_1920x1080.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd574120a-d56d-4407-9833-bc888a575904_1920x1080.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd574120a-d56d-4407-9833-bc888a575904_1920x1080.png" width="1456" height="819" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/d574120a-d56d-4407-9833-bc888a575904_1920x1080.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:819,&#34;width&#34;:1456,&#34;resizeWidth&#34;:null,&#34;bytes&#34;:114301,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd574120a-d56d-4407-9833-bc888a575904_1920x1080.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd574120a-d56d-4407-9833-bc888a575904_1920x1080.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd574120a-d56d-4407-9833-bc888a575904_1920x1080.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fd574120a-d56d-4407-9833-bc888a575904_1920x1080.png 1456w" sizes="100vw" loading="lazy"/></picture></div></a><figcaption><em>Experiment 2: driving a high-impedance load.</em></figcaption></figure></div><p>Once again, for the first ~255 nanoseconds, the generator is merrily pushing electrons onto the wire, full steam ahead. Only then, our familiar phantom electromotive force shows up and says “actually, these had nowhere to go, so here’s your energy back.” In the earlier experiment, the voltage suddenly sagged; here, it shoots up to almost twice the expected value.</p><p>If we repeat the experiment with short pulses instead of square waves, we can isolate the echo and see that in contrast to the earlier test, it has the same polarity as the initial pulse:</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F68377631-fa2c-407d-a1fc-a9a27e425d85_1920x1080.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F68377631-fa2c-407d-a1fc-a9a27e425d85_1920x1080.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F68377631-fa2c-407d-a1fc-a9a27e425d85_1920x1080.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F68377631-fa2c-407d-a1fc-a9a27e425d85_1920x1080.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F68377631-fa2c-407d-a1fc-a9a27e425d85_1920x1080.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F68377631-fa2c-407d-a1fc-a9a27e425d85_1920x1080.png" width="1456" height="819" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/68377631-fa2c-407d-a1fc-a9a27e425d85_1920x1080.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:819,&#34;width&#34;:1456,&#34;resizeWidth&#34;:null,&#34;bytes&#34;:111078,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F68377631-fa2c-407d-a1fc-a9a27e425d85_1920x1080.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F68377631-fa2c-407d-a1fc-a9a27e425d85_1920x1080.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F68377631-fa2c-407d-a1fc-a9a27e425d85_1920x1080.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F68377631-fa2c-407d-a1fc-a9a27e425d85_1920x1080.png 1456w" sizes="100vw" loading="lazy"/></picture></div></a><figcaption><em>What goes around, comes around.</em></figcaption></figure></div><h3>Modeling cable impedance<div id="§modeling-cable-impedance"><div></div></div></h3><p>The discussion so far considered the consequences of driving a mismatched device on the other end of a wire, but we glanced over the question of how difficult it is to push electrons down the transmission line in the nanoseconds before we can “see” the load.</p><p>During that period, the line is clearly not behaving as an electrical short: after all, in the first experiment, the generator successfully created the desired voltage across its terminals, at least for a brief while. The coaxial cable is also not an open circuit: in the second experiment, we evidently succeeded at transmitting energy toward the load, which came back later and caused the voltage to shoot up.</p><p>The actual answer is a parameter called “specific impedance.” Impedance is an overloaded term, but the idea can be explained by modeling our coaxial cable as a series of segments that are short in proportion to the wavelength of our signal. In this model, each of the chained segments is essentially a small capacitor between the signal line and the return path, the segment’s capacitance governed by the conductor’s geometry and the properties of the surrounding dielectric:</p><div><figure><a target="_blank" href="https://substackcdn.com/image/fetch/f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2108e4d7-9b23-436c-9b16-e512170385de_2642x1274.png" data-component-name="Image2ToDOM" rel=""><div><picture><source type="image/webp" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2108e4d7-9b23-436c-9b16-e512170385de_2642x1274.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2108e4d7-9b23-436c-9b16-e512170385de_2642x1274.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2108e4d7-9b23-436c-9b16-e512170385de_2642x1274.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_webp,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2108e4d7-9b23-436c-9b16-e512170385de_2642x1274.png 1456w" sizes="100vw"/><img src="https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2108e4d7-9b23-436c-9b16-e512170385de_2642x1274.png" width="1456" height="702" data-attrs="{&#34;src&#34;:&#34;https://substack-post-media.s3.amazonaws.com/public/images/2108e4d7-9b23-436c-9b16-e512170385de_2642x1274.png&#34;,&#34;srcNoWatermark&#34;:null,&#34;fullscreen&#34;:null,&#34;imageSize&#34;:null,&#34;height&#34;:702,&#34;width&#34;:1456,&#34;resizeWidth&#34;:null,&#34;bytes&#34;:302569,&#34;alt&#34;:null,&#34;title&#34;:null,&#34;type&#34;:&#34;image/png&#34;,&#34;href&#34;:null,&#34;belowTheFold&#34;:true,&#34;topImage&#34;:false,&#34;internalRedirect&#34;:null}" alt="" srcset="https://substackcdn.com/image/fetch/w_424,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2108e4d7-9b23-436c-9b16-e512170385de_2642x1274.png 424w, https://substackcdn.com/image/fetch/w_848,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2108e4d7-9b23-436c-9b16-e512170385de_2642x1274.png 848w, https://substackcdn.com/image/fetch/w_1272,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2108e4d7-9b23-436c-9b16-e512170385de_2642x1274.png 1272w, https://substackcdn.com/image/fetch/w_1456,c_limit,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2F2108e4d7-9b23-436c-9b16-e512170385de_2642x1274.png 1456w" sizes="100vw" loading="lazy"/></picture></div></a><figcaption><em>Modeling coaxial cable as a series of tiny capacitors.</em></figcaption></figure></div><p>At any given time, the propagating wavefront is charging just a small handful of these capacitors; the ones behind are already taken care of, and the ones in front are out of reach. It follows that the apparent impedance of the remains constant for the duration of signal propagation, regardless of the cable’s length.</p><p>Ideally, the specific impedance of the transmission line should be matched to the transmitter; that said, a mismatch at the source is less dramatic than a mismatch at the destination. If the specific impedance of the cable is too low, the transmitter will not be able to build up the desired voltage right away — not until the impedance of the load begins to keep the current in check. Conversely, if the specific impedance of the line is too high, the initial current through the load will be lower than it could be.</p><p>Most coaxial cables are designed to exhibit specific impedance of 50 Ω or 75 Ω; meanwhile, standard traces on a two-layer PCB usually measure around 100 to 150 Ω. To be clear, despite the use of a familiar unit of measurement, this doesn’t mean that the conductor exhibits such resistance to steady currents; it’s simply a way to reason about what happens during signal propagation in a sufficiently long transmission line.</p><h3>Do I need to care?<div id="§do-i-need-to-care"><div></div></div></h3><p>That depends. When your signal’s travel time is short in proportion to the its rate of change, the reflections from picoseconds or nanoseconds ago are nearly identical to what you’re pushing onto the wire right now — so the phenomenon has no practical consequences.</p><p>For sine waves, the conservative rule of thumb is that if your wire or PCB trace is shorter than one tenth of the wavelength, you don’t need to worry about impedance matching. For signals contained on a small printed circuit board, sine frequencies below 200-400 MHz should require no special precautions on this front. That said, on the upper end, you still need to think about conventional parasitics and RFI.</p><p><span>Of course, there is that </span><a href="https://lcamtuf.substack.com/p/square-waves-or-non-elephant-biology" rel="">gotcha we talked about</a><span> for square waves: they can be thought of as a sum of sine harmonics, and depending on edge rise times, there might be a fair amount of energy present as high as 11 times the fundamental signal frequency; in other words, a 10 MHz signal might have some properties of a 110 MHz pure-sine wave. This doesn’t always spell trouble — digital signals are meant to withstand a fair amount of distortion — but broadly speaking, some caution is advised at PCB data bus frequencies above 50-100 MHz.</span></p><p>When PCB reflections start getting in the way of digital signaling, the usual culprit is a low-impedance source driving a comparatively high-impedance load (e.g., a MOSFET gate). The simplest remedy may be adding a “sink” resistor on the receiving end, connected to the signal’s return path. This is usually paired with a series resistor on the driving side, both to limit peak current and to at least roughly match the specific impedance of the trace.</p><p>At gigahertz frequencies, the task gets more complicated: the impedance might need to modeled with greater precision and then kept in check with specific board stackups, exotic substrate materials, and the avoidance of vias. That said, at that point, many other convenient circuit design abstractions break down too.</p><div data-component-name="SubscribeWidget"><div><div><form action="/api/v1/free?nojs=true" method="post" novalidate=""><div></div></form></div></div></div><p><em><span>For a catalog of my other articles on electronics, </span><a href="https://lcamtuf.coredump.cx/offsite.shtml" rel="">click here</a><span>.</span></em></p></div></div></div>
  </body>
</html>
