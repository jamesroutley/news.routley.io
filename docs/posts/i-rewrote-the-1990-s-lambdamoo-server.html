<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/rdaum/moor">Original</a>
    <h1>Show HN: I rewrote the 1990&#39;s LambdaMOO server</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto">&#34;Moor&#34; is a multi-user, programmable server, coded in Rust, designed to be able to run the original LambdaMOO core as a starting point, with various improvements at the server level to provide a more modern foundation for future development.</p>
<p dir="auto">LambdaMOO is a MUD -- aka a shared, multi-user, text-based virtual world -- that first opened to the public in 1990 and is still in operation.  LambdaMOO was and remains unusual in that it is a highly programmable, persistent-world MUD.  In particular, LambdaMOO provides a dynamically programmable environment (&#34;live coding&#34; similar to Smalltalk) that supports programming by many users.</p>
<p dir="auto">Unlike many MUDs, LambdaMOO is not solely focused on role playing games, although its programmability has enabled users to develop RPGs implemented inside LambdaMOO.)</p>
<p dir="auto">Chances are if you landed here you already know all this, but I have a blurb here
<a href="https://github.com/rdaum/moor/blob/main/doc/lambda-background.md">here</a> briefly summarizing more about LambdaMOO and why it&#39;s interesting.</p>
<p dir="auto">(note: &#34;moor&#34; name is provisional and awful, alternative suggestions accepted)</p>
<h2 tabindex="-1" id="user-content-project-goals--status" dir="auto"><a href="#project-goals--status">Project goals / status<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<p dir="auto">The intent here is to start out at least fully compatible with LambdaMOO 1.8.x series and to be able to read and
execute existing cores, and the 1.0 feature release is targeting this rather ambitious but also rather restricted goal.
(Primarily to maintain focus so I don&#39;t get distracted by the shiny things I&#39;ve wanted to do for the last 30 years.)</p>
<h3 tabindex="-1" id="user-content-lambdamoo-is-30-years-old-why-remain-compatible" dir="auto"><a href="#lambdamoo-is-30-years-old-why-remain-compatible">LambdaMOO is 30+ years old, why remain compatible?<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<ul dir="auto">
<li>Because it&#39;s easy to go into the weeds creating new things, and never finishing. By having a concrete goal, and something
to compare and test against, I may actually get somewhere.</li>
<li>Because the <em>actual</em> useful and hard parts of those old MOO-type systems was the &#34;user-space&#34; type pieces (like
LambdaCore/JHCore etc) and by making a new system run those old cores, there&#39;s more win.</li>
<li>Because LambdaMOO itself is actually a very <em>complicated system with a lot of moving parts</em>. There&#39;s a compiler,</li>
</ul>
<h3 tabindex="-1" id="user-content-current-status--features" dir="auto"><a href="#current-status--features">Current status / features<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<ul dir="auto">
<li>Pretty much feature complete / compatible with LambdaMOO 1.8.1 with a few caveats (see below)</li>
<li>Can load and run LambdaMOO 1.8.x cores.</li>
<li>Have tested against JaysHouseCore, and most of the functionality is there. Bugs are becoming increasingly rare.</li>
<li>Hosts websocket, &#34;telnet&#34; (classic line oriented TCP connection), and console connections. MCP clients work, with
remove editing, etc.</li>
<li>Objects are stored in a concurrent transactional object database -- safe, consistent and happy. The architecture
allows for cleanly adding different storage backends for new scenarios.</li>
<li>Monitoring/metrics support via Prometheus-compatible export.</li>
<li>Separate network-host vs daemon process architecture means that upgrades/restarts can happen in-place without
dropping live connections.</li>
</ul>
<p dir="auto">Here&#39;s a screenshot of the <code>JaysHouseCore</code> world running in <code>moor</code>, connected to with the classic <code>rmoo</code> Emacs client,
editing a MOO verb:</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/rdaum/moor/blob/main/doc/screenshot-rmoo.png"><img src="https://github.com/rdaum/moor/raw/main/doc/screenshot-rmoo.png" alt="drawing" width="400"/></a></p>
<h2 tabindex="-1" id="user-content-how-do-i-use-it" dir="auto"><a href="#how-do-i-use-it">How do I use it?<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<p dir="auto">The easiest way to get started is to run the <code>docker compose</code> setup. This will bring up a complete server with <code>telnet</code>
and <code>websocket</code> interfaces. The server will be setup with an initial <code>JaysHouseCore</code> core import, and will be set up with
metrics monitoring via Grafana and VictoriaMetrics.</p>
<p dir="auto">To do this, take a look at the local <code>docker-compose.yml</code> file, instructions are there, but it really just amounts to:</p>

<p dir="auto">Then connect (with your favourite MUD/MOO client) to <code>localhost:8888</code> and follow the login instauctions. Classic
clients like <code>TinyFugue</code> will work fine, and there are some newer clients like <a href="https://github.com/Blightmud/Blightmud">BlightMud</a>
that should work fine. (A partial -- and probably outdated list of clients -- can be found here: <a href="https://lisdude.com/moo/#clients" rel="nofollow">https://lisdude.com/moo/#clients</a>)</p>
<p dir="auto">Once you&#39;re familiar with how the docker setup works, you can get more creative.</p>
<p dir="auto">An actual production deployment can be fairly easily derived from the <code>docker-compose.yml</code> file, and the provided <code>Dockerfile</code>.</p>
<h3 tabindex="-1" id="user-content-why-would-i-use-this-instead-of-the-original-lambdamoo-server" dir="auto"><a href="#why-would-i-use-this-instead-of-the-original-lambdamoo-server">Why would I use this instead of the original LambdaMOO server?<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<ul dir="auto">
<li>Because it&#39;s new and shiny and fun.</li>
<li>Because its codebase is more modern and easier to add to and maintain.</li>
<li>Because it&#39;s getting ongoing development.</li>
<li>Because it has an exciting future.</li>
</ul>
<h3 tabindex="-1" id="user-content-missing--next-steps-before-10" dir="auto"><a href="#missing--next-steps-before-10">Missing / Next steps before 1.0<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<ul dir="auto">
<li>Bugs, bugs, bugs. Collect em&#39; all.</li>
<li>Generally, open issues / missing features can be seen here: <a href="https://github.com/rdaum/moor/issues">https://github.com/rdaum/moor/issues</a> (but there are also
plenty of TODOs in the code not yet captured as issues.)</li>
<li>Major missing features:
<ul dir="auto">
<li>Quota support.</li>
<li>Background tasks resumption after restart (from DB and from textdump load.)</li>
<li>Dump to a backup <code>textdump</code> format.</li>
<li><code>$do_command</code>; LambdaMOO has the ability to attempt execution of a command through
user code on <code>#0:do_command</code>; if that fails, it then dispatches through the regular
built-in command handler. I need to get around to this.</li>
<li><code>read</code>; This is used for prompts, password changes, editor, etc. It&#39;s slightly tricky
because of the &#39;transactional&#39; nature of I/O in Moor where all verb and I/O operations
can be retried on transaction commit failure. Haven&#39;t decided what to do about this.</li>
<li>Actual transaction retry on commit-conflict. (Mainly because without actual users and stress testing I haven&#39;t
been able to provoke this scenario to test against yet. The hooks are there, just not done.)</li>
</ul>
</li>
<li>Improvements needed:
<ul dir="auto">
<li>Performance improvements. Especially caching at the DB layer is missing and this thing will run dog-slow
without it</li>
<li>Better auth (SSO, OAuth2, etc?). Better crypt/password support.</li>
</ul>
</li>
</ul>
<h3 tabindex="-1" id="user-content-unsupported-features-that-might-not-get-supported" dir="auto"><a href="#unsupported-features-that-might-not-get-supported">Unsupported features that might not get supported<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<ul dir="auto">
<li><code>encode_binary</code> &amp; <code>decode_binary</code>:  These two functions allow for escaped binary
sequences along with a network option for sending them, etc.
But:
<ul dir="auto">
<li><code>moor</code>&#39;s strings are utf8 so arbitrary byte sequences aren&#39;t going to cut it and</li>
<li>we&#39;re on a websocket, and have better ways of doing binary than encoding it into the
output.</li>
<li>The alternative will be to provide a <code>binary</code> type that can be used for this purpose
and to have special <code>notify</code> calls for emitting them to the client.</li>
</ul>
</li>
<li>Network connections, outbound and inbound (e.g. <code>open_network_connection</code>, <code>listen</code>,</li>
</ul>
<h3 tabindex="-1" id="user-content-but-then" dir="auto"><a href="#but-then">But then...<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h3>
<p dir="auto">The following are targeted as eventual goals / additions once 1.0 (fall 2023) is out the door:</p>
<ul dir="auto">
<li>A richer front-end experience. Support for websockets as a connection method means that the server can provide
a richer narrative stream to browsers (with in-core support assistance.) A client which provides a full proper
UI experience with interactive UI components, graphical elements, and so on are the end-goal here.</li>
<li>Support for multiple programming language for programming MOO verbs/objects. The backend has been written such that
this is feasible. Authoring verbs in JavaScript/TypeScript will be the first target, and WebAssembly modules are
also a possibility. These verbs would still run within the same shared environment and use the same shared object
environment, but would allow for a more modern programming experience.</li>
<li>A more scalable server architecture; the system right now is divided into separate &#34;host&#34; frontends for network</li>
<li>Enhancements to the MOO data model and language, to support a richer / smoother authoring experience. Some ideas
are:
<ul dir="auto">
<li>Datalog-style relations / predicates; for managing logical relationships between entities. This could allow
bidirectional (or more) relationships like already exist with e.g. <code>location</code>/<code>contents</code>, but more generalized,
and to allow for making complex worlds easier to maintain.</li>
<li>Adding a map/dictionary type. MOO predates the existence of dictionary types as a standard type in most languages.</li>
<li>Adding a <code>binary</code> type. MOO&#39;s type system is very string-oriented, and there&#39;s not an elegant way to represent
arbitrary binary data. (There&#39;s <code>encode_binary</code> and <code>decode_binary</code> builtins, but these are not the way I&#39;d do it
today.)</li>
<li>and so on</li>
</ul>
</li>
</ul>
<h2 tabindex="-1" id="user-content-license" dir="auto"><a href="#license">License.<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<p dir="auto">Currently licensed under the Apache 2.0 license. See LICENSE file for details.</p>
<h2 tabindex="-1" id="user-content-contribute-and-help" dir="auto"><a href="#contribute-and-help">Contribute and help!<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<p dir="auto">Contributions are welcome and encouraged.</p>
<p dir="auto">Right now the best way to contribute is to run the system and report bugs, or to try to run your own LambdaMOO core
and report bugs. (Or to fix bugs and submit PRs!)</p>
<h2 tabindex="-1" id="user-content-enjoy" dir="auto"><a href="#enjoy">Enjoy.<svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></h2>
<p dir="auto">Ryan (ryan.daum @ gmail.com)</p>
</article>
          </div></div>
  </body>
</html>
