<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.ssh.com/academy/ssh/port#the-story-of-getting-ssh-port-22">Original</a>
    <h1>How SSH port became 22</h1>
    
    <div id="readability-page-1" class="page"><p><span id="hs_cos_wrapper_post_body" data-hs-cos-general-type="meta_field" data-hs-cos-type="rich_text"><div>

<h2 id="how-ssh-port-became-22">How SSH port became 22</h2>
<p>The default <a href="https://www.ssh.com/ssh/"><span>SSH</span></a> port is 22. It is not a coincidence. This is a story of how it got that port.</p>
<p>When I (<a href="https://ylonen.org" target="_target"><span>Tatu Ylonen</span></a> first published this story in April 2017, it went viral and got about 120,000 readers in three days.</p>
<h2 id="the-story-of-getting-ssh-port-22">The story of getting SSH port 22</h2>
<p>I wrote the initial version of SSH (Secure Shell) in Spring 1995. It was a time when <a href="https://www.ssh.com/ssh/telnet"><span>telnet</span></a> and <a href="https://www.ssh.com/ssh/ftp"><span>FTP</span></a> were widely used.</p>
<p>Anyway, I designed SSH to replace both <code>telnet</code> (port 23) and <code>ftp</code> (port 21). Port 22 was free. It was conveniently between the ports for <code>telnet</code> and <code>ftp</code>. I figured having that port number might be one of those small things that would give some aura of credibility. But how could I get that port number? I had never allocated one, but I knew somebody who had allocated a port.</p>
<p>The basic process for port allocation was fairly simple at that time. Internet was smaller and we were in the very early stages of the Internet boom. Port numbers were allocated by IANA (Internet Assigned Numbers Authority). At the time, that meant an esteemed Internet pioneer called <a href="https://en.wikipedia.org/wiki/Jon_Postel" target="_target"><span>Jon Postel</span></a> and <a href="https://en.wikipedia.org/wiki/Joyce_K._Reynolds" target="_target"><span>Joyce K. Reynolds</span></a>. Among other things, Jon had been the editor of such minor protocol standards as IP (RFC 791), ICMP (RFC 792), and TCP (RFC 793). Some of you may have heard of them.</p>
<p>To me Jon felt outright scary, having authored all the main Internet RFCs!</p>
<p>Anyway, just before announcing <code>ssh-1.0</code> in July 1995, I sent this e-mail to IANA:</p>
<pre><code>From ylo Mon Jul 10 11:45:48 +0300 1995 From: Tatu Ylonen &lt;ylo@cs.hut.fi&gt;</code></pre>
<p>The next day, I had an e-mail from Joyce waiting in my mailbox:</p>
<pre><code>Date: Mon, 10 Jul 1995 15:35:33 -0700 From: jkrey@ISI.EDU To: ylo@cs.hut.fi Subject: </code></pre>
<p>There we were! SSH port was 22!!!</p>
<p>On July 12, 1995, at 2:32am, I announced a final beta version to my beta testers at Helsinki University of Technology. At 5:23pm I announced ssh-1.0.0 packages to my beta testers. At 5:51pm on July 12, 1995, I sent an announcement about SSH (Secure Shell) to the <code>cypherpunks@toad.com</code> mailing list. I also posted it to a few newsgroups, mailing lists, and directly to selected people who had discussed related topics on the Internet.</p>

<p><!--HubSpot Call-to-Action Code --><span id="hs-cta-wrapper-71ea567e-a081-4096-91e1-6d85a2ecadf7"><span id="hs-cta-71ea567e-a081-4096-91e1-6d85a2ecadf7"><!--[if lte IE 8]><div id="hs-cta-ie-element"></div><![endif]--><a href="https://cta-redirect.hubspot.com/cta/redirect/470387/71ea567e-a081-4096-91e1-6d85a2ecadf7"><img id="hs-cta-img-71ea567e-a081-4096-91e1-6d85a2ecadf7" src="https://no-cache.hubspot.com/cta/default/470387/71ea567e-a081-4096-91e1-6d85a2ecadf7.png" alt="New call-to-action"/></a></span></span><!-- end HubSpot Call-to-Action Code --></p>
<h2 id="changing-the-ssh-port-in-the-server">Changing the SSH port in the server</h2>
<p>By default, the SSH server still runs in port 22. However, there are occasions when it is run in a different port. Testing use is one reason. Running multiple configurations on the same host is another. Rarely, it may also be run without root privileges, in which case it must be run in a non-privileged port (i.e., port number &gt;= 1024).</p>
<p>The port number can be configured by changing the <code>Port 22</code> directive in <a href="https://www.ssh.com/ssh/sshd_config"><span>/etc/ssh/sshd_config</span></a>. It can also be specified using the <code>-p &lt;port&gt;</code> option to <a href="https://www.ssh.com/ssh/sshd"><span>sshd</span></a>. The SSH client and <a href="https://www.ssh.com/academy/ssh/sftp-ssh-file-transfer-protocol" rel="noopener"><span>sftp</span></a> programs also support the <code>-p &lt;port&gt;</code> option.</p>
<h2 id="specifying-ssh-port-number-on-the-command-line">Specifying SSH port number on the command line</h2>
<p>The <code>-p &lt;port&gt;</code> option can be used to specify the port number to connect to when using the <code>ssh</code> command on Linux. The <code>-P &lt;port&gt;</code> (note: capital P) option can be used with <a href="https://www.ssh.com/academy/ssh/sftp-ssh-file-transfer-protocol" rel="noopener"><span>SFTP</span></a> and <code>scp</code>. The SSH port number command line setting overrides any value configured in configuration files.</p>
<h2 id="configuring-ssh-access-through-firewalls">Configuring SSH access through firewalls</h2>
<p>SSH is one of the few protocols that are frequently permitted through firewalls. Unrestricted outbound SSH is very common, especially in smaller and more technical organizations. Inbound SSH is usually restricted to one or very few servers.</p>
<p><!--HubSpot Call-to-Action Code --><span id="hs-cta-wrapper-c9b74ea5-71cd-4d28-866a-810b91cbdc7d"><span id="hs-cta-c9b74ea5-71cd-4d28-866a-810b91cbdc7d"><!--[if lte IE 8]><div id="hs-cta-ie-element"></div><![endif]--><a href="https://cta-redirect.hubspot.com/cta/redirect/470387/c9b74ea5-71cd-4d28-866a-810b91cbdc7d" target="_blank" rel="noopener"><img id="hs-cta-img-c9b74ea5-71cd-4d28-866a-810b91cbdc7d" src="https://no-cache.hubspot.com/cta/default/470387/c9b74ea5-71cd-4d28-866a-810b91cbdc7d.png" alt="privileged access management"/></a></span></span><!-- end HubSpot Call-to-Action Code --></p>
<h3 id="outbound-ssh">Outbound SSH</h3>
<p>Configuring outbound SSH in a firewall is very easy. If there are restrictions on outgoing traffic at all, just create a rule that allows TCP port 22 to go out. That is all. If you want to restrict the destination addresses, you can also limit the rule to only permit access to your organization&#39;s external servers in the cloud, or to a <a href="https://www.ssh.com/iam/jump-server"><span>jump server</span></a> that guards cloud access.</p>
<h3 id="back-tunneling-is-a-risk">Back-tunneling is a risk</h3>
<p>Unrestricted outbound SSH can, however, be risky. The SSH protocol supports <a href="https://www.ssh.com/ssh/tunneling"><span>tunneling</span></a>. The basic idea is that it is possible to have the SSH server on an external server listen to connections from anywhere, forward those back into the organization, and then make a connection to some Internal server.</p>
<p>This can be very convenient in some environments. Developers and system administrators frequently use it to open a tunnel that they can use to gain remote access from their home or from their laptop when they are travelling.</p>
<p>However, it generally violates policy and takes control away from firewall administrators and the security team. It can, for example, violate <a href="https://www.ssh.com/compliance/pci/"><span>PCI</span></a>, <a href="https://www.ssh.com/compliance/hipaa/security-rule"><span>HIPAA</span></a>, or <a href="https://www.ssh.com/compliance/nist-800-53/"><span>NIST SP 800-53</span></a>. It can be used by hackers and foreign intelligence agencies to leave backdoors into organizations<a href="https://www.ssh.com/products/cryptoauditor/"><span></span></a></p>
<h3 id="inbound-ssh-access">Inbound SSH access</h3>
<p>For inbound access, there are a few practical alternatives:</p>
<ul>
<li>
<p>Configure firewall to forward all connections to port 22 to a particular IP address on the internal network or <a href="https://en.wikipedia.org/wiki/DMZ_(computing)" target="_target"><span>DMZ</span></a>.</p>
</li>
<li>
<p>Use different ports on the firewall to access different servers.</p>
</li>
<li>
<p>Only allow SSH access after you have logged in using a VPN (Virtual Private Network), typically using the <span>IPsec</span> protocol.</p>
</li>
</ul>
<h2 id="enabling-ssh-access-via-iptables">Enabling SSH access via iptables</h2>
<p><a href="https://en.wikipedia.org/wiki/Iptables" target="_target"><span>Iptables</span></a> is a host firewall built into the Linux kernel. It is typically configured to protect the server by preventing access to any ports that have not been expressly opened.</p>
<p>If <code>iptables</code> is enabled on the server, the following commands can be used to permit incoming SSH access. They must be run as root.</p>
<pre><code>iptables -A INPUT -p tcp --dport 22 -m conntrack --ctstate NEW,ESTABLISHED -j ACCEPT </code></pre>
<p>If you want to save the rules permanently, on some systems that can be done with the command:</p>
<pre><code>service iptables save<br/></code></pre>
<p><img src="https://www.ssh.com/hubfs/Imported_Blog_Media/SSH_port_at_firewall_can_permit_tunneling_to_banks-2.png" alt="SSH port at firewall can permit tunneling to banks" loading="lazy"/></p></div></span>
    </p></div>
  </body>
</html>
