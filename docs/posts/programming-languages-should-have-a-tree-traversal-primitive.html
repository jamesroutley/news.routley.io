<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.tylerglaiel.com/p/programming-languages-should-have">Original</a>
    <h1>Programming languages should have a tree traversal primitive</h1>
    
    <div id="readability-page-1" class="page"><div><div><div><article><div><div><div dir="auto"><p>There should be a control flow construct in programming languages that can handle tree-like traversal in a nice way, similar to how for/foreach loops can handle linear traversal. It&#39;s a bit of a missing gap in the current set of control flow constructs most languages these days have settled on. Its a thing I end up having to do *all the time* and it seems like there should be some shortcuts for it.</p><p>I posted a thought about this recently and was thinking about how I would want something like that to look like. I can&#39;t find anything similar in any other languages. I&#39;m most familiar with C++, so my sample code here is going to be C++-ish, but its general enough that you could fit it into basically anything else. I&#39;m not a language design expert, so this is more of a loose idea than a formal proposal. </p><pre><code>for_tree(Node* N = mytreeroot; N != NULL; N : {N-&gt;left, N-&gt;right}){
	print(N-&gt;value);
}</code></pre><p>with the specifics removed, this is *almost* the same syntax as an existing for loop</p><pre><code>for_tree(init; condition; branch){
	//body
}</code></pre><p>It&#39;s basically a for loop that branches instead of continuing linearly. </p><p><span>&#34;</span><strong>init</strong><span>&#34; here runs when you enter the for_tree loop, exactly the same as a normal for loop</span></p><p>Well, this is significantly easier and less error prone than implementing recursive functions for every operation you&#39;d want to do on every type of tree, plus all the relevant code ends up in-place and readable. This would likely compile down to the same code that a recursive function would anyway. It&#39;s just a nice shortcut, the same way for is a nice shortcut for gotos and labels.</p><pre><code>for_tree(Node* N = mytreeroot; N != NULL; N : {N-&gt;left, N-&gt;right}){
	print(N-&gt;value);
}</code></pre><p>would compile down into the equivalent of</p><pre><code>void for_tree_internal(Node* N){
	print(N-&gt;value);
	for(Node* n2 : {N-&gt;left, N-&gt;right}){
		if(n2 != NULL){
			for_tree_internal(n2);
		}
	}
}
for_tree_internal(mytreeroot);</code></pre><p>Doesn&#39;t for_tree(...) look a lot nicer and simpler and less error prone than needing to implement a recursive function for each operation you would want to do on a tree?</p><p>Additionally, for_tree would offer a few more benefits that you couldn&#39;t easily do with a recursive function, for instance being able to use break, continue, and return from within the function body. Those would behave similarly to how a for loop does.</p><pre><code>for_tree(Node* N = mytreeroot; N != NULL; N : {N-&gt;left, N-&gt;right}){
	if(N-&gt;value == 10) {
		found = true;
		break; //would break out of the entire for_tree block,
                       //unwinding the stack in the process
	}
}</code></pre><p>There is an additional flow construct that could be added here, &#34;prune&#34;, which would prevent the loop from traversing into the branches off of the current node. </p><pre><code>for_tree(Node* N = mytreeroot; N != NULL; N : {N-&gt;left, N-&gt;right}){
	if(N-&gt;value == 10) {
		prune; //dont need to check any children of this node
	}
}</code></pre><p>Well a range based for loop requires that your tree exist in memory AND that you have an iterator defined for your tree. With for_tree you could operate on an entirely implicit tree, without needing to define any iterators or generator functions. Here&#39;s an example where I&#39;m checking every single string composed of &#34;a&#34;, &#34;b&#34;, and &#34;c&#34; of length 8 or less.</p><pre><code>for_tree(string x = &#34;&#34;; x.size() &lt;= 8; x : {x+&#34;a&#34;, x+&#34;b&#34;, x+&#34;c&#34;}){
	print(x);
}</code></pre><p>This is an operation that requires &#34;tree-like traversal&#34; but is not iterating over a data structure that exists in memory. You can do that entire thing inside for_tree. It&#39;s entirely agnostic to any underlying data structures you are or aren&#39;t using. The &#34;prune&#34; flow described earlier is also something you can&#39;t get from a range based for loop. </p><p>There is a bit of a footgun here, which is that in that above string example its actually generating and rejecting all of the strings of length 9. A normal for loop *also* reaches the state after its last valid state before exiting, its just kind of not that much of an issue with a linear for loop where that will usually be like, one extra addition and conditional check. On the other hand, &#34;one level deeper&#34; in a tree traversal means checking the validity of multiple times as many leaf nodes as you need to. </p><p>You could resolve this manually in multiple ways, generate an empty branch list if you are at a leaf already</p><pre><code>for_tree(string x = &#34;&#34;; x.size() &lt;= 8; 
x : x.size() &lt; 8 ? {x+&#34;a&#34;, x+&#34;b&#34;, x+&#34;c&#34;} : {}){
	print(x);
}</code></pre><p>or just prune in the function body</p><pre><code>for_tree(string x = &#34;&#34;; x.size() &lt;= 8; x : {x+&#34;a&#34;, x+&#34;b&#34;, x+&#34;c&#34;}){
	print(x);
	if(x.size() == 8) prune;
}</code></pre><p>There may be a better way to resolve that, but would have to pull the syntax further away from a for loop I think. Anyway.</p><p>So, a depth first search is pretty simple, uses minimal extra memory, and works great with the stack that we are already using. BFS requires a lot of extra memory (enough that it would likely need to use the heap) and is more complex. If you really wanted to you could do an alternate function like for_tree_breadth_first(...), but I think the extra complexity needed for a BFS might be too much for a “primitive” construct. Or maybe not.</p><p>I’m adding this one more question after reading the discussions about this post:</p><p><span>Tree-like relationships show up ALL THE TIME when programming stuff, even when not explicitly representing something as a tree. Like obviously if you have a “MyTree” you can just use a foreach and iterators to traverse it. The benefit of abstracting this kind of control flow out is the ability to handle implicit trees or other constructs that would like to be traversed in a similar way to a tree. If you have objects that reference multiple other objects, in some way, you have a tree-like relationship, even if you aren’t specifically representing that as a Tree. The code to crawl this is mostly the same everywhere, so its prime space for being abstracted out.</span><br/></p><p><span>Anyway, as a bonus here&#39;s a test C++ implementation that tries to get as close to this as possible with a bunch of templates and macros. The usage is uglier, and a few constructs do not work (ex, you cant return from within a for_tree here), but its kind of a neat proof of concept I think.</span><br/></p><div data-attrs="{&#34;innerHTML&#34;:&#34;&lt;div id=\&#34;gist137690106\&#34; class=\&#34;gist\&#34;&gt;\n    &lt;div class=\&#34;gist-file\&#34; translate=\&#34;no\&#34; data-color-mode=\&#34;light\&#34; data-light-theme=\&#34;light\&#34;&gt;\n      &lt;div class=\&#34;gist-data\&#34;&gt;\n        &lt;div class=\&#34;js-gist-file-update-container js-task-list-container\&#34;&gt;\n  &lt;div id=\&#34;file-treetraversal-cpp\&#34; class=\&#34;file my-2\&#34;&gt;\n    \n    &lt;div itemprop=\&#34;text\&#34;\n      class=\&#34;Box-body p-0 blob-wrapper data type-c  \&#34;\n      style=\&#34;overflow: auto\&#34; tabindex=\&#34;0\&#34; role=\&#34;region\&#34;\n      aria-label=\&#34;treetraversal.cpp content, created by TylerGlaiel on 03:36AM today.\&#34;\n    &gt;\n\n        \n&lt;div class=\&#34;js-check-hidden-unicode js-blob-code-container blob-code-content\&#34;&gt;\n\n  &lt;template class=\&#34;js-file-alert-template\&#34;&gt;\n  &lt;div data-view-component=\&#34;true\&#34; class=\&#34;flash flash-warn flash-full d-flex flex-items-center\&#34;&gt;\n  &lt;svg aria-hidden=\&#34;true\&#34; height=\&#34;16\&#34; viewBox=\&#34;0 0 16 16\&#34; version=\&#34;1.1\&#34; width=\&#34;16\&#34; data-view-component=\&#34;true\&#34; class=\&#34;octicon octicon-alert\&#34;&gt;\n    &lt;path d=\&#34;M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z\&#34;&gt;&lt;/path&gt;\n&lt;/svg&gt;\n    &lt;span&gt;\n      This file contains hidden or bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.\n      &lt;a class=\&#34;Link--inTextBlock\&#34; href=\&#34;https://github.co/hiddenchars\&#34; target=\&#34;_blank\&#34;&gt;Learn more about bidirectional Unicode characters&lt;/a&gt;\n    &lt;/span&gt;\n\n\n  &lt;div data-view-component=\&#34;true\&#34; class=\&#34;flash-action\&#34;&gt;        &lt;a href=\&#34;{{ revealButtonHref }}\&#34; data-view-component=\&#34;true\&#34; class=\&#34;btn-sm btn\&#34;&gt;    Show hidden characters\n&lt;/a&gt;\n&lt;/div&gt;\n&lt;/div&gt;&lt;/template&gt;\n&lt;template class=\&#34;js-line-alert-template\&#34;&gt;\n  &lt;span aria-label=\&#34;This line has hidden Unicode characters\&#34; data-view-component=\&#34;true\&#34; class=\&#34;line-alert tooltipped tooltipped-e\&#34;&gt;\n    &lt;svg aria-hidden=\&#34;true\&#34; height=\&#34;16\&#34; viewBox=\&#34;0 0 16 16\&#34; version=\&#34;1.1\&#34; width=\&#34;16\&#34; data-view-component=\&#34;true\&#34; class=\&#34;octicon octicon-alert\&#34;&gt;\n    &lt;path d=\&#34;M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z\&#34;&gt;&lt;/path&gt;\n&lt;/svg&gt;\n&lt;/span&gt;&lt;/template&gt;\n\n  &lt;table data-hpc class=\&#34;highlight tab-size js-file-line-container\&#34; data-tab-size=\&#34;8\&#34; data-paste-markdown-skip data-tagsearch-path=\&#34;treetraversal.cpp\&#34;&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L1\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;1\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC1\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;#&lt;span class=\&#34;pl-k\&#34;&gt;include&lt;/span&gt; &lt;span class=\&#34;pl-s\&#34;&gt;&lt;span class=\&#34;pl-pds\&#34;&gt;&amp;lt;&lt;/span&gt;vector&lt;span class=\&#34;pl-pds\&#34;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L2\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;2\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC2\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;#&lt;span class=\&#34;pl-k\&#34;&gt;include&lt;/span&gt; &lt;span class=\&#34;pl-s\&#34;&gt;&lt;span class=\&#34;pl-pds\&#34;&gt;&amp;lt;&lt;/span&gt;string&lt;span class=\&#34;pl-pds\&#34;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L3\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;3\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC3\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;#&lt;span class=\&#34;pl-k\&#34;&gt;include&lt;/span&gt; &lt;span class=\&#34;pl-s\&#34;&gt;&lt;span class=\&#34;pl-pds\&#34;&gt;&amp;lt;&lt;/span&gt;iostream&lt;span class=\&#34;pl-pds\&#34;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L4\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;4\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC4\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;\n&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L5\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;5\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC5\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;&lt;span class=\&#34;pl-k\&#34;&gt;enum&lt;/span&gt; &lt;span class=\&#34;pl-k\&#34;&gt;class&lt;/span&gt; &lt;span class=\&#34;pl-en\&#34;&gt;_tree_return&lt;/span&gt; {&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L6\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;6\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC6\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;    Continue = &lt;span class=\&#34;pl-c1\&#34;&gt;0&lt;/span&gt;,&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L7\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;7\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC7\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;    Prune,&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L8\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;8\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC8\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;    Break&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L9\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;9\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC9\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;};&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L10\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;10\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC10\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;\n&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L11\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;11\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC11\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;&lt;span class=\&#34;pl-k\&#34;&gt;template&lt;/span&gt;&amp;lt;&lt;span class=\&#34;pl-k\&#34;&gt;typename&lt;/span&gt; T, &lt;span class=\&#34;pl-k\&#34;&gt;typename&lt;/span&gt; F1, &lt;span class=\&#34;pl-k\&#34;&gt;typename&lt;/span&gt; F2, &lt;span class=\&#34;pl-k\&#34;&gt;typename&lt;/span&gt; F3&amp;gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L12\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;12\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC12\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;_tree_return _for_tree(T initial, F1 condition, F2 branch, F3 visit) {&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L13\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;13\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC13\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;    _tree_return result = &lt;span class=\&#34;pl-c1\&#34;&gt;visit&lt;/span&gt;(initial);&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L14\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;14\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC14\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;    &lt;span class=\&#34;pl-k\&#34;&gt;if&lt;/span&gt;(result == _tree_return::Break) &lt;span class=\&#34;pl-k\&#34;&gt;return&lt;/span&gt; _tree_return::Break;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L15\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;15\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC15\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;\n&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L16\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;16\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC16\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;    &lt;span class=\&#34;pl-k\&#34;&gt;if&lt;/span&gt;(result != _tree_return::Prune) {&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L17\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;17\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC17\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;        &lt;span class=\&#34;pl-k\&#34;&gt;for&lt;/span&gt;(T subnode : &lt;span class=\&#34;pl-c1\&#34;&gt;branch&lt;/span&gt;(initial)) {&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L18\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;18\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC18\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;            &lt;span class=\&#34;pl-k\&#34;&gt;if&lt;/span&gt;(&lt;span class=\&#34;pl-c1\&#34;&gt;condition&lt;/span&gt;(subnode)) {&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L19\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;19\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC19\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;                _tree_return result = &lt;span class=\&#34;pl-c1\&#34;&gt;_for_tree&lt;/span&gt;(subnode, condition, branch, visit);&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L20\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;20\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC20\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;                &lt;span class=\&#34;pl-k\&#34;&gt;if&lt;/span&gt;(result == _tree_return::Break) &lt;span class=\&#34;pl-k\&#34;&gt;return&lt;/span&gt; _tree_return::Break;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L21\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;21\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC21\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;            }&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L22\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;22\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC22\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;        }&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L23\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;23\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC23\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;    }&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L24\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;24\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC24\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;    &lt;span class=\&#34;pl-k\&#34;&gt;return&lt;/span&gt; _tree_return::Continue;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L25\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;25\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC25\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;}&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L26\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;26\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC26\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;\n&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L27\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;27\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC27\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;#&lt;span class=\&#34;pl-k\&#34;&gt;define&lt;/span&gt; &lt;span class=\&#34;pl-en\&#34;&gt;tree_break&lt;/span&gt; &lt;span class=\&#34;pl-k\&#34;&gt;return&lt;/span&gt; _tree_return::Break&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L28\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;28\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC28\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;#&lt;span class=\&#34;pl-k\&#34;&gt;define&lt;/span&gt; &lt;span class=\&#34;pl-en\&#34;&gt;tree_prune&lt;/span&gt; &lt;span class=\&#34;pl-k\&#34;&gt;return&lt;/span&gt; _tree_return::Prune&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L29\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;29\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC29\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;#&lt;span class=\&#34;pl-k\&#34;&gt;define&lt;/span&gt; &lt;span class=\&#34;pl-en\&#34;&gt;tree_continue&lt;/span&gt; &lt;span class=\&#34;pl-k\&#34;&gt;return&lt;/span&gt; _tree_return::Continue&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L30\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;30\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC30\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;\n&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L31\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;31\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC31\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;                                                          &lt;span class=\&#34;pl-c\&#34;&gt;&lt;span class=\&#34;pl-c\&#34;&gt;//&lt;/span&gt;v-- semicolon to not allow you to get the return value here&lt;/span&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L32\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;32\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC32\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;#&lt;span class=\&#34;pl-k\&#34;&gt;define&lt;/span&gt; &lt;span class=\&#34;pl-en\&#34;&gt;for_tree&lt;/span&gt;(&lt;span class=\&#34;pl-v\&#34;&gt;XName, Xinitial, Condition, Branch, Visit&lt;/span&gt;) ;_for_tree(Xinitial, \\&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L33\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;33\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC33\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;[&amp;amp;](decltype(Xinitial) XName){ &lt;span class=\&#34;pl-k\&#34;&gt;return&lt;/span&gt; Condition; }, \\&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L34\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;34\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC34\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;[&amp;amp;](decltype(Xinitial) XName){ &lt;span class=\&#34;pl-k\&#34;&gt;return&lt;/span&gt; std::vector&amp;lt;&lt;span class=\&#34;pl-c1\&#34;&gt;decltype&lt;/span&gt;(Xinitial)&amp;gt;Branch; }, \\&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L35\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;35\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC35\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;[&amp;amp;](decltype(Xinitial) XName){ Visit; &lt;span class=\&#34;pl-k\&#34;&gt;return&lt;/span&gt; _tree_return::Continue; })&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L36\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;36\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC36\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;&lt;span class=\&#34;pl-c\&#34;&gt;&lt;span class=\&#34;pl-c\&#34;&gt;//&lt;/span&gt;excuse the use of a std::vector in there, I guess you cant return an initialize_list from a lambda&lt;/span&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L37\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;37\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC37\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;&lt;span class=\&#34;pl-c\&#34;&gt;&lt;span class=\&#34;pl-c\&#34;&gt;//&lt;/span&gt;that wouldn&amp;#39;t really be an issue if this was implemented at the language level instead of hacked together from lambdas and macros&lt;/span&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L38\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;38\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC38\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;\n&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L39\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;39\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC39\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;&lt;span class=\&#34;pl-k\&#34;&gt;struct&lt;/span&gt; &lt;span class=\&#34;pl-en\&#34;&gt;Node&lt;/span&gt; {&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L40\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;40\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC40\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;    Node* left = &lt;span class=\&#34;pl-c1\&#34;&gt;NULL&lt;/span&gt;;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L41\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;41\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC41\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;    Node* right = &lt;span class=\&#34;pl-c1\&#34;&gt;NULL&lt;/span&gt;;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L42\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;42\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC42\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;    std::string value;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L43\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;43\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC43\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;    &lt;span class=\&#34;pl-en\&#34;&gt;Node&lt;/span&gt;(std::string value):value(value){}&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L44\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;44\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC44\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;};&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L45\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;45\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC45\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;\n&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L46\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;46\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC46\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;&lt;span class=\&#34;pl-k\&#34;&gt;int&lt;/span&gt; &lt;span class=\&#34;pl-en\&#34;&gt;main&lt;/span&gt;() {&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L47\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;47\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC47\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;    &lt;span class=\&#34;pl-c\&#34;&gt;&lt;span class=\&#34;pl-c\&#34;&gt;//&lt;/span&gt;syntax is a little uglier than it could be if it was native&lt;/span&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L48\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;48\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC48\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;    &lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L49\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;49\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC49\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;    &lt;span class=\&#34;pl-c\&#34;&gt;&lt;span class=\&#34;pl-c\&#34;&gt;//&lt;/span&gt;imperative tree sample&lt;/span&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L50\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;50\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC50\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;    &lt;span class=\&#34;pl-c1\&#34;&gt;for_tree&lt;/span&gt;(x, &lt;span class=\&#34;pl-c1\&#34;&gt;std::string&lt;/span&gt;(&lt;span class=\&#34;pl-s\&#34;&gt;&lt;span class=\&#34;pl-pds\&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=\&#34;pl-pds\&#34;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;), x.&lt;span class=\&#34;pl-c1\&#34;&gt;size&lt;/span&gt;()&amp;lt;=&lt;span class=\&#34;pl-c1\&#34;&gt;8&lt;/span&gt;, ({x+&lt;span class=\&#34;pl-s\&#34;&gt;&lt;span class=\&#34;pl-pds\&#34;&gt;&amp;quot;&lt;/span&gt;a&lt;span class=\&#34;pl-pds\&#34;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;, x+&lt;span class=\&#34;pl-s\&#34;&gt;&lt;span class=\&#34;pl-pds\&#34;&gt;&amp;quot;&lt;/span&gt;b&lt;span class=\&#34;pl-pds\&#34;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;, x+&lt;span class=\&#34;pl-s\&#34;&gt;&lt;span class=\&#34;pl-pds\&#34;&gt;&amp;quot;&lt;/span&gt;c&lt;span class=\&#34;pl-pds\&#34;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;}), {&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L51\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;51\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC51\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;        std::cout &amp;lt;&amp;lt; x &amp;lt;&amp;lt; std::endl;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L52\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;52\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC52\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;    });&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L53\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;53\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC53\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;    &lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L54\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;54\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC54\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;    &lt;span class=\&#34;pl-c\&#34;&gt;&lt;span class=\&#34;pl-c\&#34;&gt;//&lt;/span&gt;tree structure sample&lt;/span&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L55\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;55\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC55\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;    Node &lt;span class=\&#34;pl-smi\&#34;&gt;mytree&lt;/span&gt;(&lt;span class=\&#34;pl-s\&#34;&gt;&lt;span class=\&#34;pl-pds\&#34;&gt;&amp;quot;&lt;/span&gt;root&lt;span class=\&#34;pl-pds\&#34;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;);&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L56\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;56\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC56\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;    mytree.&lt;span class=\&#34;pl-smi\&#34;&gt;left&lt;/span&gt; = &lt;span class=\&#34;pl-k\&#34;&gt;new&lt;/span&gt; &lt;span class=\&#34;pl-c1\&#34;&gt;Node&lt;/span&gt;(&lt;span class=\&#34;pl-s\&#34;&gt;&lt;span class=\&#34;pl-pds\&#34;&gt;&amp;quot;&lt;/span&gt;left&lt;span class=\&#34;pl-pds\&#34;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;);&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L57\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;57\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC57\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;    mytree.&lt;span class=\&#34;pl-smi\&#34;&gt;right&lt;/span&gt; = &lt;span class=\&#34;pl-k\&#34;&gt;new&lt;/span&gt; &lt;span class=\&#34;pl-c1\&#34;&gt;Node&lt;/span&gt;(&lt;span class=\&#34;pl-s\&#34;&gt;&lt;span class=\&#34;pl-pds\&#34;&gt;&amp;quot;&lt;/span&gt;right&lt;span class=\&#34;pl-pds\&#34;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;);&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L58\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;58\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC58\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;    mytree.&lt;span class=\&#34;pl-smi\&#34;&gt;left&lt;/span&gt;-&amp;gt;&lt;span class=\&#34;pl-smi\&#34;&gt;left&lt;/span&gt; = &lt;span class=\&#34;pl-k\&#34;&gt;new&lt;/span&gt; &lt;span class=\&#34;pl-c1\&#34;&gt;Node&lt;/span&gt;(&lt;span class=\&#34;pl-s\&#34;&gt;&lt;span class=\&#34;pl-pds\&#34;&gt;&amp;quot;&lt;/span&gt;leftleft&lt;span class=\&#34;pl-pds\&#34;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;);&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L59\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;59\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC59\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;    &lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L60\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;60\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC60\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;    &lt;span class=\&#34;pl-c1\&#34;&gt;for_tree&lt;/span&gt;(x, &amp;amp;mytree, x != &lt;span class=\&#34;pl-c1\&#34;&gt;NULL&lt;/span&gt;, ({x-&amp;gt;&lt;span class=\&#34;pl-smi\&#34;&gt;left&lt;/span&gt;, x-&amp;gt;&lt;span class=\&#34;pl-smi\&#34;&gt;right&lt;/span&gt;}), {&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L61\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;61\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC61\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;        std::cout &amp;lt;&amp;lt; x-&amp;gt;&lt;span class=\&#34;pl-smi\&#34;&gt;value&lt;/span&gt; &amp;lt;&amp;lt; std::endl;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L62\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;62\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC62\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;    });&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L63\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;63\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC63\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;\n&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L64\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;64\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC64\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;    &lt;span class=\&#34;pl-k\&#34;&gt;return&lt;/span&gt; &lt;span class=\&#34;pl-c1\&#34;&gt;0&lt;/span&gt;;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-L65\&#34; class=\&#34;blob-num js-line-number js-blob-rnum\&#34; data-line-number=\&#34;65\&#34;&gt;&lt;/td&gt;\n          &lt;td id=\&#34;file-treetraversal-cpp-LC65\&#34; class=\&#34;blob-code blob-code-inner js-file-line\&#34;&gt;}&lt;/td&gt;\n        &lt;/tr&gt;\n  &lt;/table&gt;\n&lt;/div&gt;\n\n\n    &lt;/div&gt;\n\n  &lt;/div&gt;\n&lt;/div&gt;\n\n      &lt;/div&gt;\n      &lt;div class=\&#34;gist-meta\&#34;&gt;\n        &lt;a href=\&#34;https://gist.github.com/TylerGlaiel/7b6fa06628883148e4403b3cc616fdec/raw/f0d4bf0e8043ae6c6bdad2146daddbe9d0cb3b88/treetraversal.cpp\&#34; style=\&#34;float:right\&#34; class=\&#34;Link--inTextBlock\&#34;&gt;view raw&lt;/a&gt;\n        &lt;a href=\&#34;https://gist.github.com/TylerGlaiel/7b6fa06628883148e4403b3cc616fdec#file-treetraversal-cpp\&#34; class=\&#34;Link--inTextBlock\&#34;&gt;\n          treetraversal.cpp\n        &lt;/a&gt;\n        hosted with &amp;#10084; by &lt;a class=\&#34;Link--inTextBlock\&#34; href=\&#34;https://github.com\&#34;&gt;GitHub&lt;/a&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&#34;,&#34;stylesheet&#34;:&#34;https://github.githubassets.com/assets/gist-embed-b1ee75c43dbe.css&#34;}" data-component-name="GitgistToDOM"><div id="gist137690106"><div data-color-mode="light" data-light-theme="light"><div><div><div id="file-treetraversal-cpp"><div itemprop="text"><div><div data-view-component="true"><p><span>
  
    

    </span><span><span>
      This file contains hidden or bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
      </span><a href="https://github.co/hiddenchars" target="_blank" rel="">Learn more about bidirectional Unicode characters</a><span>
    </span></span><span>


  </span></p></div><table data-hpc="" data-tab-size="8" data-paste-markdown-skip="" data-tagsearch-path="treetraversal.cpp"><tbody><tr><td id="file-treetraversal-cpp-L1" data-line-number="1"></td><td id="file-treetraversal-cpp-LC1"><span>#</span><span>include</span><span> </span><span><span>&lt;</span><span>vector</span><span>&gt;</span></span></td></tr><tr><td id="file-treetraversal-cpp-L2" data-line-number="2"></td><td id="file-treetraversal-cpp-LC2"><span>#</span><span>include</span><span> </span><span><span>&lt;</span><span>string</span><span>&gt;</span></span></td></tr><tr><td id="file-treetraversal-cpp-L3" data-line-number="3"></td><td id="file-treetraversal-cpp-LC3"><span>#</span><span>include</span><span> </span><span><span>&lt;</span><span>iostream</span><span>&gt;</span></span></td></tr><tr><td id="file-treetraversal-cpp-L4" data-line-number="4"></td><td id="file-treetraversal-cpp-LC4">
</td></tr><tr><td id="file-treetraversal-cpp-L5" data-line-number="5"></td><td id="file-treetraversal-cpp-LC5"><span>enum</span><span> </span><span>class</span><span> </span><span>_tree_return</span><span> {</span></td></tr><tr><td id="file-treetraversal-cpp-L6" data-line-number="6"></td><td id="file-treetraversal-cpp-LC6"><span>    Continue = </span><span>0</span><span>,</span></td></tr><tr><td id="file-treetraversal-cpp-L7" data-line-number="7"></td><td id="file-treetraversal-cpp-LC7">    Prune,</td></tr><tr><td id="file-treetraversal-cpp-L8" data-line-number="8"></td><td id="file-treetraversal-cpp-LC8">    Break</td></tr><tr><td id="file-treetraversal-cpp-L9" data-line-number="9"></td><td id="file-treetraversal-cpp-LC9">};</td></tr><tr><td id="file-treetraversal-cpp-L10" data-line-number="10"></td><td id="file-treetraversal-cpp-LC10">
</td></tr><tr><td id="file-treetraversal-cpp-L11" data-line-number="11"></td><td id="file-treetraversal-cpp-LC11"><span>template</span><span>&lt;</span><span>typename</span><span> T, </span><span>typename</span><span> F1, </span><span>typename</span><span> F2, </span><span>typename</span><span> F3&gt;</span></td></tr><tr><td id="file-treetraversal-cpp-L12" data-line-number="12"></td><td id="file-treetraversal-cpp-LC12">_tree_return _for_tree(T initial, F1 condition, F2 branch, F3 visit) {</td></tr><tr><td id="file-treetraversal-cpp-L13" data-line-number="13"></td><td id="file-treetraversal-cpp-LC13"><span>    _tree_return result = </span><span>visit</span><span>(initial);</span></td></tr><tr><td id="file-treetraversal-cpp-L14" data-line-number="14"></td><td id="file-treetraversal-cpp-LC14"><span>    </span><span>if</span><span>(result == _tree_return::Break) </span><span>return</span><span> _tree_return::Break;</span></td></tr><tr><td id="file-treetraversal-cpp-L15" data-line-number="15"></td><td id="file-treetraversal-cpp-LC15">
</td></tr><tr><td id="file-treetraversal-cpp-L16" data-line-number="16"></td><td id="file-treetraversal-cpp-LC16"><span>    </span><span>if</span><span>(result != _tree_return::Prune) {</span></td></tr><tr><td id="file-treetraversal-cpp-L17" data-line-number="17"></td><td id="file-treetraversal-cpp-LC17"><span>        </span><span>for</span><span>(T subnode : </span><span>branch</span><span>(initial)) {</span></td></tr><tr><td id="file-treetraversal-cpp-L18" data-line-number="18"></td><td id="file-treetraversal-cpp-LC18"><span>            </span><span>if</span><span>(</span><span>condition</span><span>(subnode)) {</span></td></tr><tr><td id="file-treetraversal-cpp-L19" data-line-number="19"></td><td id="file-treetraversal-cpp-LC19"><span>                _tree_return result = </span><span>_for_tree</span><span>(subnode, condition, branch, visit);</span></td></tr><tr><td id="file-treetraversal-cpp-L20" data-line-number="20"></td><td id="file-treetraversal-cpp-LC20"><span>                </span><span>if</span><span>(result == _tree_return::Break) </span><span>return</span><span> _tree_return::Break;</span></td></tr><tr><td id="file-treetraversal-cpp-L21" data-line-number="21"></td><td id="file-treetraversal-cpp-LC21">            }</td></tr><tr><td id="file-treetraversal-cpp-L22" data-line-number="22"></td><td id="file-treetraversal-cpp-LC22">        }</td></tr><tr><td id="file-treetraversal-cpp-L23" data-line-number="23"></td><td id="file-treetraversal-cpp-LC23">    }</td></tr><tr><td id="file-treetraversal-cpp-L24" data-line-number="24"></td><td id="file-treetraversal-cpp-LC24"><span>    </span><span>return</span><span> _tree_return::Continue;</span></td></tr><tr><td id="file-treetraversal-cpp-L25" data-line-number="25"></td><td id="file-treetraversal-cpp-LC25">}</td></tr><tr><td id="file-treetraversal-cpp-L26" data-line-number="26"></td><td id="file-treetraversal-cpp-LC26">
</td></tr><tr><td id="file-treetraversal-cpp-L27" data-line-number="27"></td><td id="file-treetraversal-cpp-LC27"><span>#</span><span>define</span><span> </span><span>tree_break</span><span> </span><span>return</span><span> _tree_return::Break</span></td></tr><tr><td id="file-treetraversal-cpp-L28" data-line-number="28"></td><td id="file-treetraversal-cpp-LC28"><span>#</span><span>define</span><span> </span><span>tree_prune</span><span> </span><span>return</span><span> _tree_return::Prune</span></td></tr><tr><td id="file-treetraversal-cpp-L29" data-line-number="29"></td><td id="file-treetraversal-cpp-LC29"><span>#</span><span>define</span><span> </span><span>tree_continue</span><span> </span><span>return</span><span> _tree_return::Continue</span></td></tr><tr><td id="file-treetraversal-cpp-L30" data-line-number="30"></td><td id="file-treetraversal-cpp-LC30">
</td></tr><tr><td id="file-treetraversal-cpp-L31" data-line-number="31"></td><td id="file-treetraversal-cpp-LC31"><span>                                                          </span><span><span>//</span><span>v-- semicolon to not allow you to get the return value here</span></span></td></tr><tr><td id="file-treetraversal-cpp-L32" data-line-number="32"></td><td id="file-treetraversal-cpp-LC32"><span>#</span><span>define</span><span> </span><span>for_tree</span><span>(</span><span>XName, Xinitial, Condition, Branch, Visit</span><span>) ;_for_tree(Xinitial, \</span></td></tr><tr><td id="file-treetraversal-cpp-L33" data-line-number="33"></td><td id="file-treetraversal-cpp-LC33"><span>[&amp;](decltype(Xinitial) XName){ </span><span>return</span><span> Condition; }, \</span></td></tr><tr><td id="file-treetraversal-cpp-L34" data-line-number="34"></td><td id="file-treetraversal-cpp-LC34"><span>[&amp;](decltype(Xinitial) XName){ </span><span>return</span><span> std::vector&lt;</span><span>decltype</span><span>(Xinitial)&gt;Branch; }, \</span></td></tr><tr><td id="file-treetraversal-cpp-L35" data-line-number="35"></td><td id="file-treetraversal-cpp-LC35"><span>[&amp;](decltype(Xinitial) XName){ Visit; </span><span>return</span><span> _tree_return::Continue; })</span></td></tr><tr><td id="file-treetraversal-cpp-L36" data-line-number="36"></td><td id="file-treetraversal-cpp-LC36"><span><span>//</span><span>excuse the use of a std::vector in there, I guess you cant return an initialize_list from a lambda</span></span></td></tr><tr><td id="file-treetraversal-cpp-L37" data-line-number="37"></td><td id="file-treetraversal-cpp-LC37"><span><span>//</span><span>that wouldn&#39;t really be an issue if this was implemented at the language level instead of hacked together from lambdas and macros</span></span></td></tr><tr><td id="file-treetraversal-cpp-L38" data-line-number="38"></td><td id="file-treetraversal-cpp-LC38">
</td></tr><tr><td id="file-treetraversal-cpp-L39" data-line-number="39"></td><td id="file-treetraversal-cpp-LC39"><span>struct</span><span> </span><span>Node</span><span> {</span></td></tr><tr><td id="file-treetraversal-cpp-L40" data-line-number="40"></td><td id="file-treetraversal-cpp-LC40"><span>    Node* left = </span><span>NULL</span><span>;</span></td></tr><tr><td id="file-treetraversal-cpp-L41" data-line-number="41"></td><td id="file-treetraversal-cpp-LC41"><span>    Node* right = </span><span>NULL</span><span>;</span></td></tr><tr><td id="file-treetraversal-cpp-L42" data-line-number="42"></td><td id="file-treetraversal-cpp-LC42">    std::string value;</td></tr><tr><td id="file-treetraversal-cpp-L43" data-line-number="43"></td><td id="file-treetraversal-cpp-LC43"><span>    </span><span>Node</span><span>(std::string value):value(value){}</span></td></tr><tr><td id="file-treetraversal-cpp-L44" data-line-number="44"></td><td id="file-treetraversal-cpp-LC44">};</td></tr><tr><td id="file-treetraversal-cpp-L45" data-line-number="45"></td><td id="file-treetraversal-cpp-LC45">
</td></tr><tr><td id="file-treetraversal-cpp-L46" data-line-number="46"></td><td id="file-treetraversal-cpp-LC46"><span>int</span><span> </span><span>main</span><span>() {</span></td></tr><tr><td id="file-treetraversal-cpp-L47" data-line-number="47"></td><td id="file-treetraversal-cpp-LC47"><span>    </span><span><span>//</span><span>syntax is a little uglier than it could be if it was native</span></span></td></tr><tr><td id="file-treetraversal-cpp-L48" data-line-number="48"></td><td id="file-treetraversal-cpp-LC48">    </td></tr><tr><td id="file-treetraversal-cpp-L49" data-line-number="49"></td><td id="file-treetraversal-cpp-LC49"><span>    </span><span><span>//</span><span>imperative tree sample</span></span></td></tr><tr><td id="file-treetraversal-cpp-L50" data-line-number="50"></td><td id="file-treetraversal-cpp-LC50"><span>    </span><span>for_tree</span><span>(x, </span><span>std::string</span><span>(</span><span><span>&#34;</span><span>&#34;</span></span><span>), x.</span><span>size</span><span>()&lt;=</span><span>8</span><span>, ({x+</span><span><span>&#34;</span><span>a</span><span>&#34;</span></span><span>, x+</span><span><span>&#34;</span><span>b</span><span>&#34;</span></span><span>, x+</span><span><span>&#34;</span><span>c</span><span>&#34;</span></span><span>}), {</span></td></tr><tr><td id="file-treetraversal-cpp-L51" data-line-number="51"></td><td id="file-treetraversal-cpp-LC51">        std::cout &lt;&lt; x &lt;&lt; std::endl;</td></tr><tr><td id="file-treetraversal-cpp-L52" data-line-number="52"></td><td id="file-treetraversal-cpp-LC52">    });</td></tr><tr><td id="file-treetraversal-cpp-L53" data-line-number="53"></td><td id="file-treetraversal-cpp-LC53">    </td></tr><tr><td id="file-treetraversal-cpp-L54" data-line-number="54"></td><td id="file-treetraversal-cpp-LC54"><span>    </span><span><span>//</span><span>tree structure sample</span></span></td></tr><tr><td id="file-treetraversal-cpp-L55" data-line-number="55"></td><td id="file-treetraversal-cpp-LC55"><span>    Node </span><span>mytree</span><span>(</span><span><span>&#34;</span><span>root</span><span>&#34;</span></span><span>);</span></td></tr><tr><td id="file-treetraversal-cpp-L56" data-line-number="56"></td><td id="file-treetraversal-cpp-LC56"><span>    mytree.</span><span>left</span><span> = </span><span>new</span><span> </span><span>Node</span><span>(</span><span><span>&#34;</span><span>left</span><span>&#34;</span></span><span>);</span></td></tr><tr><td id="file-treetraversal-cpp-L57" data-line-number="57"></td><td id="file-treetraversal-cpp-LC57"><span>    mytree.</span><span>right</span><span> = </span><span>new</span><span> </span><span>Node</span><span>(</span><span><span>&#34;</span><span>right</span><span>&#34;</span></span><span>);</span></td></tr><tr><td id="file-treetraversal-cpp-L58" data-line-number="58"></td><td id="file-treetraversal-cpp-LC58"><span>    mytree.</span><span>left</span><span>-&gt;</span><span>left</span><span> = </span><span>new</span><span> </span><span>Node</span><span>(</span><span><span>&#34;</span><span>leftleft</span><span>&#34;</span></span><span>);</span></td></tr><tr><td id="file-treetraversal-cpp-L59" data-line-number="59"></td><td id="file-treetraversal-cpp-LC59">    </td></tr><tr><td id="file-treetraversal-cpp-L60" data-line-number="60"></td><td id="file-treetraversal-cpp-LC60"><span>    </span><span>for_tree</span><span>(x, &amp;mytree, x != </span><span>NULL</span><span>, ({x-&gt;</span><span>left</span><span>, x-&gt;</span><span>right</span><span>}), {</span></td></tr><tr><td id="file-treetraversal-cpp-L61" data-line-number="61"></td><td id="file-treetraversal-cpp-LC61"><span>        std::cout &lt;&lt; x-&gt;</span><span>value</span><span> &lt;&lt; std::endl;</span></td></tr><tr><td id="file-treetraversal-cpp-L62" data-line-number="62"></td><td id="file-treetraversal-cpp-LC62">    });</td></tr><tr><td id="file-treetraversal-cpp-L63" data-line-number="63"></td><td id="file-treetraversal-cpp-LC63">
</td></tr><tr><td id="file-treetraversal-cpp-L64" data-line-number="64"></td><td id="file-treetraversal-cpp-LC64"><span>    </span><span>return</span><span> </span><span>0</span><span>;</span></td></tr><tr><td id="file-treetraversal-cpp-L65" data-line-number="65"></td><td id="file-treetraversal-cpp-LC65">}</td></tr></tbody></table></div></div></div></div></div></div></div></div></div></div></div></article></div></div></div><div><div id="discussion"><div><h4>Discussion about this post</h4></div></div></div></div>
  </body>
</html>
