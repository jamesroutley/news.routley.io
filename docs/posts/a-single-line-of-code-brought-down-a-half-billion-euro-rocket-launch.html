<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://jam.dev/blog/famous-bugs-rocket-launch/">Original</a>
    <h1>A single line of code brought down a half-billion euro rocket launch</h1>
    
    <div id="readability-page-1" class="page"><div id="site-main">
    <article>

        <header>

                <section>
                    <p>
                        Famous bugs
                    </p>
                </section>

            


            <div>
                <section>
                    <ul>  
                        <li>
                            <a href="https://jam.dev/blog/author/michael/">
                                <span>
                                    <img src="https://jam.dev/blog/content/images/2023/02/flipCV.jpg" alt="Michael Stroe"/>
                                </span> 
                            </a>
                        </li>
                    </ul>
                    <div> 
                         
                        <p><time datetime="2023-02-02">Feb 2, 2023</time>
                            <span><span>‚Ä¢</span> 4 min read</span>
                        </p>
                    </div> 
                </section>
            </div>


        </header>

        <section>
            <p>It‚Äôs Tuesday, June 4th, 1996, and the European Space Agency is set to launch its new Ariane 5 rocket for the first time. This is the culmination of a decade of design, testing and a budget spending billions of euros.</p><figure><img src="https://jam.dev/blog/content/images/2023/02/image--7--copy-1.png" alt="" loading="lazy" width="450" height="582"/><figcaption>Ariane-5 rocket in preparation for launch (Credits ESA 1996)</figcaption></figure><p>The goal of Ariane 5 is simple, but the stakes are high. It was designed to carry large, expensive payloads, both for scientific experiments and commercial purposes.</p><p>The rocket carried no astronauts. The first payload, the Cluster spacecraft, was made of four very expensive scientific satellites weighing 2,600 lbs each, to be delivered on an elliptical orbit.</p><p>Just <em>40 seconds</em> after take-off, however, huge chunks of metal and burning fragments of Ariane Flight 501 are crashing down over the launch area. A shocking disaster for the ESA and a rough setback for the mission.</p><figure><img src="https://jam.dev/blog/content/images/2023/02/Ariane_501_explosion-1.jpg" alt="" loading="lazy" width="385" height="584"/><figcaption>Photo of Ariane 501 Flight, a few seconds after explosion (Credits ESA 1996)</figcaption></figure><p>The cause? A simple, and very much avoidable coding bug, from a piece of dead code, left over from the previous Ariane 4 mission, which started nearly a decade before. Here‚Äôs what happened exactly.</p><p>The Ariane Flight 501 leaves the launchpad and accelerates smoothly according to its predetermined path towards space. Inside, the guidance system is constantly tracking the rocket‚Äôs trajectory and sending data over to the main on-board computer. To achieve this, the guidance system converts the velocity readings, from 64 bit floating point to 16 bit signed integer.</p><p>Okay, let‚Äôs take a moment and think about what this actually means. With 16-bit unsigned integers, you can store anything from 0 to 65,535. If you use the first bit to store a sign (positive/negative) and your 16-bit signed integer now covers everything from -32,768 to +32,767 (only 15 bits left for the actual number). Anything bigger than these values and you‚Äôve run out of bits.</p><p>On the other hand, floating point numbers are stored a bit differently. They were designed to track a wider range of numbers, using the same number of bits. For example, even a 16-bit (‚Äúdouble precision‚Äù) float stores a value ranging between -1.8e+308 and -2.2e-308. Now, try storing one into a 16-bit signed integer, and the number is very much out of the bounds of the signed integer. Go further and try storing a 64-bit float and the situation is made worse.</p><p>So what happened when the inevitable came true? Well, in this case, when the 16-bit signed integer was used, the conversion from float to integer wrapped around to the beginning again and finally ran into the very familiar <em>integer overflow</em>. Riight, so back to the rocket story.</p><p>The guidance system reads the horizontal velocity data of the rocket (a 64 bit floating point) and, unsuccessfully, tries converting it to a 16 bit integer to send over to the main computer.</p><p>However, the reading is larger than the biggest possible 16 bit integer, a conversion is tried and fails. Usually, a well-designed system would have a procedure built-in to handle an overflow error and send a sensible message to the main computer. This, however, wasn‚Äôt one of those cases.</p><p>The guidance system proceeds to send an error message instead of the horizontal velocity value and shuts down immediately.</p><p>But wait a minute, there might be a saving chance! The system is designed to have a backup, standby system, which unfortunately, runs the exact same code. It tries the same conversion, gets the same error and just 72 milliseconds later, promptly crashes.</p><p>Because there was no exception handling code, the main computer interprets the data as real navigation data and considers it as an indication that the rocket is wildly off-course. In an attempt to save itself from a nonexistent threat, the full nozzle deflections of the boosters are fired up, putting immense aerodynamic strain on the rocket, which starts tearing apart the rocket immediately.</p><figure><img src="https://jam.dev/blog/content/images/2023/02/image--6--2.png" alt="" loading="lazy" width="450" height="640"/><figcaption>Scientist and the HM-7B rocket engine, used in multiple Ariane missions (Credits ESA)</figcaption></figure><p>Registering that things couldn‚Äôt be worse anyway, the computer decides to trigger the self-destruct mechanism and puts on a fireworks display (worth some ‚Ç¨500 million at the time).</p><p>So what was the ultimate cause of this very short, very expensive and catastrophic flight? A line of code converting a 64-bit floating point to a signed integer, which led to an overflow passed directly to the main computer, that interpreted it as real data.</p><p>The same software was designed and used successfully on many flights previously, on the Ariane 4 rockets, which were <em>much smaller</em>. But the new Ariane 5 model was designed to fly faster than the systems engineers had planned when that code was originally created.</p><p>That same higher velocity led to the overflow error, which could have been caught easily. But it wasn‚Äôt.</p><p>The worst part? The code wasn‚Äôt necessary after takeoff, it was only part of the launch pad alignment process. But sometimes a trivial glitch might delay a launch by a few seconds and, in trying to save having to reset the whole system, the original software engineers decided that the sequence of code should run for an extra‚Ä¶ <em>40 seconds</em> after the scheduled liftoff.</p><p><em>This is the first post in our series on famous bugs! At </em><a href="https://jam.dev/"><em>Jam</em></a><em>, we help people catch bugs before they crash rocket ships, or worse, production. Hope you&#39;ll give Jam a try!</em></p>
        </section>

        <section> 
            <div>
                <div>
                    <h2>Dealing with bugs is üí©, but not with Jam.</h2>
                    <p><span>Capture bugs fast, in a format that thousands of developers love.</span>
                </p></div>
                
            </div>
        </section>

    </article>
</div></div>
  </body>
</html>
