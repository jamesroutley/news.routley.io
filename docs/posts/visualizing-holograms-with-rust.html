<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://datum-b.com/blog/visualizing_holograms">Original</a>
    <h1>Visualizing Holograms with Rust</h1>
    
    <div id="readability-page-1" class="page"><div>
        <p><a href="https://datum-b.com/home">
        <img src="https://datum-b.com/static/dblogo.png" width="60%" max-width="50%" height="auto" alt="Made with PowerPoint"/>
        </a></p>
    <p>12 March, 2023</p>
    <p>A key strategy in making any career transition is identifying and filling gaps in your technical knowledge and experience. As a mechanical engineer transitioning to more software-oriented work, one of these gaps is my lack of collaborative experience on software projects. This post outlines some of the work I’ve contributed to <a href="https://github.com/samuelselleck/holographit">holographit</a>, a tool for generating real-life holograms from 3D models, with three other colleagues from my batch at <a href="https://www.recurse.com">the Recurse Center</a></p>
<p>I met <a href="https://samuelselleck.com/">Samuel Selleck</a> and <a href="https://github.com/benjaminwgordon">Ben Gordon</a> the first week at RC, and we all had the same goal: work on a collaborative project using the Rust programming language. We wanted to take the next step beyond tutorials and Advent of Code type problems, and we wanted to build something technical from the ground up: not leveraging an existing machine learning framework and calling it a new thing.</p>
<p>We took a few days of brainstorming ideas before we were inspired by <a href="https://www.youtube.com/watch?v=sv-38lwV6vc">this YouTube video</a> describing how to make hand-made holograms, simply by inscribing arcs in a shiny surface. We thought that it would be fun to make a Rust library to generate arcs for these holograms based off of a 3D model, and to eventually generate G-code to automate the scribing process with a CNC machine. <a href="https://github.com/shartse">Sara Hartse</a> joined the team soon after we started, and in addition to working on the code, has helped all of us learn to collaborate using GitHub.</p>
<p>We initially chose to separate the project into a few modules, with the following approximate data pipeline. Given a 3D .obj (wavefront) model:</p>
<ul>
<li>The <strong>interpolator</strong> picks out edges and returns a vector of points in x, y, and z coordinates.</li>
<li>The <strong>scriber</strong> generates an SVG file with circles drawn at each point; the size of the circles are based on the z coordinates, which helps to create the illusion of depth. The output of the scriber can then be used to generate machine code to realize a physical manifestation of the hologram.</li>
<li>The <strong>visualizer</strong> generates an animated SVG to simulate how a scribed hologram may appear.</li>
</ul>
<p>Creating these virtual holograms is done in a few steps, as shown below: find the edges of the model, interpolate points along those edges at a set density, scribe a circle about each point, and then project a virtual light source onto the circles, illuminating short arcs to create an image. My focus on this project has been on the visualizer, the final step in the process.</p>
<figure>
<img src="https://datum-b.com/static/post_images/holographit_process.png" alt=""/><figcaption>Process for generating a simple hologram: given a set of edges, interpolate discrete points, then scribe circles, and finally project light to illuminate small portions of those circles.</figcaption>
</figure>
<h2 id="illuminating-curves">Illuminating Curves</h2>
<p>So how does a hologram work? A true <a href="https://en.wikipedia.org/wiki/Holography">hologram</a> involves some pretty complex optics including lasers and wave splitting. What we’re doing here is much simpler, but the results are no less interesting to look at.</p>
<p>If you scribe an arc in a shiny surface and then look at it under a bright light, you’ll see the reflection of that light in a small subset of the arc. If you tip and tilt the surface (or move your head, or move the light), the perceived location of the reflection in the arc changes, as if the point of light were moving back and forth along the scribed arc.</p>
<p>The math that drives the current implementation of the visualizer is fairly simple: given a scribed circle and a light source, find the vector from the light source to the center of the circle. Then illuminate an arc of the circle a few degrees to either side of the point where that vector crosses the circle. When the light source moves, the illuminated section of the circle moves as well.</p>
<figure>
<img src="https://datum-b.com/static/post_images/moving_light.svg" alt=""/><figcaption>A single light source (yellow) illuminating a scribed circle. The red arc represents the reflected section that is seen by the observer.</figcaption>
</figure>
<p>A single point doesn’t look so impressive here, but an icosahedron with over 3,000 scribed circles looks pretty cool:</p>
<figure>
<img src="https://datum-b.com/static/post_images/icosahedron.svg" alt=""/><figcaption>Icosahedron generated from 3,181 scribed circles, and animated with a moving light source.</figcaption>
</figure>
<p>While fun to look at, the current state of the visualizer leaves room for improvement. The most noticeable issue with the above image is the distortion; the icosahedron has been smooshed in the vertical direction. This is due to the arcs being scribed as circular, whereas the arcs that would form an undistorted hologram are considerably more complicated. Take a look again at the rendering of the rectangle from the beginning of this article: this one is squished in the horizontal direction, as the light source is above and to the left of the circles. This causes the light to catch the insides of the circles that make up the right edge of the rectangles:</p>
<figure>
<img src="https://datum-b.com/static/post_images/rectangle_distorted.png" alt=""/><figcaption>Generating holograms using circular arcs causes distortion.</figcaption>
</figure>
<p>Understanding the geometry behind making an undistorted hologram is not something we’ve tackled yet, and we’re a few steps away from implementing the more complex arcs that allow for clearer images, as well as the illusion of opaque surfaces. Before we get there, the goal is to bring our modules together so that the end-to-end process of generating holograms is fully streamlined.</p>
<p>From the start, we’ve worked towards an idea of a minimum viable product - something we can easily show to our colleagues, and start to collect feedback, use cases, and ideas for improvement. Our goal is to have a browser-based front end to capture the full process. The implementation will be iterative, with a first attempt built on passing the input and output files between client and server. A more challenging and more performant implementation will use WebAssembly to run most of the code on the client side.</p>
<h2 id="written-in-rust-because-we-can">Written in Rust, Because we Can</h2>
<p>In a <a href="https://devtools.fm/episode/50">recent podcast interview</a>, Steve Klabnik, one of the authors of <a href="https://doc.rust-lang.org/stable/book/title-page.html">the Rust book</a>, described the learning curve of Rust as “a ten foot wall.” In other words, there is a big push-up one has to do before being able to do anything effectively. With other languages, there can be a shallower but longer learning curve, where the fundamentals are understood but the “gotcha’s” just keep coming and coming.</p>
<p>I’m just about over that ten foot wall in my Rust journey; the syntax is at my fingertips, I’m starting to learn what parts I don’t know, and the development flow is making sense. As I <a href="https://datum-b.com/blog/first_impressions_on_learning">remarked previously</a>, there is a lot to be said for understanding what the borrow-checker is all about, and for having a sense of heap vs. stack allocation.</p>
<p>We are in that wonderful stage in a project where it’s just starting to work. The scope of work that can still be done is huge, and the work that’s been completed thus far is small enough that adding new features or improving existing ones doesn’t demand a complete refactor or otherwise significant buying down of technical debt. This, combined with being on the verge of cresting the ten foot wall of Rust, has led to a high-point in my programming journey.</p>
<p>One of my favorite things about the <a href="https://www.recurse.com">Recurse Center</a> is that we can do projects because we want to, and we are encouraged to choose our tools and technology stacks based on what is interesting to us, even if it isn’t the typical or accepted solution.</p>
<p>I strongly believe that the best way to learn any programming language is to work on a project from the ground up. Doing so collaboratively is accelerating the learning process. For me, the unwritten requirements of this project are, “we shall collaborate”, and “we shall do so in Rust.” And so we have.</p>


        <hr/>
        <h2>About</h2>
        <p>I am a new software engineer with nearly a decade of specialized experience in mechanical engineering. This blog chronicles my journey with coding, agile hardware development, and leadership principles.</p>

        <div>
            <a href="mailto:thoughts@datum-b.com">
<svg fill="none" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M4 7.00005L10.2 11.65C11.2667 12.45 12.7333 12.45 13.8 11.65L20 7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke="white"></path>
<rect x="3" y="5" width="18" height="14" rx="2" stroke-width="2" stroke-linecap="round" stroke="white"></rect>
</svg>
            </a><a href="https://recurse.social/@blair">
<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xml:space="preserve"><path d="M21.327 8.566c0-4.339-2.843-5.61-2.843-5.61-1.433-.658-3.894-.935-6.451-.956h-.063c-2.557.021-5.016.298-6.45.956 0 0-2.843 1.272-2.843 5.61 0 .993-.019 2.181.012 3.441.103 4.243.778 8.425 4.701 9.463 1.809.479 3.362.579 4.612.51 2.268-.126 3.541-.809 3.541-.809l-.075-1.646s-1.621.511-3.441.449c-1.804-.062-3.707-.194-3.999-2.409a4.523 4.523 0 0 1-.04-.621s1.77.433 4.014.536c1.372.063 2.658-.08 3.965-.236 2.506-.299 4.688-1.843 4.962-3.254.434-2.223.398-5.424.398-5.424zm-3.353 5.59h-2.081V9.057c0-1.075-.452-1.62-1.357-1.62-1 0-1.501.647-1.501 1.927v2.791h-2.069V9.364c0-1.28-.501-1.927-1.502-1.927-.905 0-1.357.546-1.357 1.62v5.099H6.026V8.903c0-1.074.273-1.927.823-2.558.566-.631 1.307-.955 2.228-.955 1.065 0 1.872.409 2.405 1.228l.518.869.519-.869c.533-.819 1.34-1.228 2.405-1.228.92 0 1.662.324 2.228.955.549.631.822 1.484.822 2.558v5.253z"></path></svg></a>
            <a href="https://github.com/blairfrandeen">
                 <svg width="24" height="24" aria-hidden="true" viewBox="0 0 16 16" version="1.1" data-view-component="true">
    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
</svg></a>
            <a href="https://datum-b.com/feed/">
                <svg width="24" height="24" title="RSS Feed Icon" role="img" aria-label="RSS Feed Icon" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" tabindex="-1"><path d="M576 1344q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm512 123q2 28-17 48-18 21-47 21h-135q-25 0-43-16.5t-20-41.5q-22-229-184.5-391.5t-391.5-184.5q-25-2-41.5-20t-16.5-43v-135q0-29 21-47 17-17 43-17h5q160 13 306 80.5t259 181.5q114 113 181.5 259t80.5 306zm512 2q2 27-18 47-18 20-46 20h-143q-26 0-44.5-17.5t-19.5-42.5q-12-215-101-408.5t-231.5-336-336-231.5-408.5-102q-25-1-42.5-19.5t-17.5-43.5v-143q0-28 20-46 18-18 44-18h3q262 13 501.5 120t425.5 294q187 186 294 425.5t120 501.5z"></path></svg></a>
        <p>© 2022 - 2023. The views expressed here are solely my own and do not reflect those of my employer.</p>
        </div>
    </div></div>
  </body>
</html>
