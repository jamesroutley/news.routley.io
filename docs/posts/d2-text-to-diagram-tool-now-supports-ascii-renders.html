<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://d2lang.com/blog/ascii/">Original</a>
    <h1>D2 (text to diagram tool) now supports ASCII renders</h1>
    
    <div id="readability-page-1" class="page"><div id="__blog-post-container"><p>In the latest release of D2 (0.7.1), we introduce ASCII outputs.</p>
<p>Any output file with extension <code>txt</code> will use the ASCII renderer to write to it.</p>
<!-- -->
<p>Here is an example of their rendering from the <a href="https://github.com/terrastruct/d2-vim" target="_blank" rel="noopener noreferrer">D2 Vim extension</a>. The user opens a <code>.d2</code> file and opens a preview window, which updates upon every save.</p>
<p><img decoding="async" loading="lazy" alt="D2 Vim preview" src="https://d2lang.com/assets/images/preview-d04cd1ad32fec06203b93a3ac64d903f.gif" width="1159" height="1470"/></p>
<h2 id="code-documentation">Code documentation<a href="#code-documentation" aria-label="Direct link to Code documentation" title="Direct link to Code documentation">​</a></h2>
<p>Perhaps the most useful place for ASCII diagrams is in the source code comments. Small
simple diagrams next to functions or classes can serve to be much clearer than describing
a flow.</p>
<p>Here again the Vim extension demonstrates a functionality to write some d2 code and
replace the selection with the ASCII render.</p>
<p><img decoding="async" loading="lazy" alt="D2 Vim replace" src="https://d2lang.com/assets/images/replace-7658a2addaa42da73547218f1cffe1d5.gif" width="1159" height="1470"/></p>
<h2 id="unicode-and-standard-ascii">Unicode and standard ASCII<a href="#unicode-and-standard-ascii" aria-label="Direct link to Unicode and standard ASCII" title="Direct link to Unicode and standard ASCII">​</a></h2>
<p>The default character set of ASCII renders is unicode, which has nicer box-drawing
characters. If you&#39;d like true ASCII for maximum portability, you can specify this with
the flag <code>--ascii-mode=standard</code>.</p>
<h2 id="limitations">Limitations<a href="#limitations" aria-label="Direct link to Limitations" title="Direct link to Limitations">​</a></h2>
<div><p><span><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Alpha</p><p>Note that the ASCII renderer should be considered in alpha stage. There will be many
corner cases, areas of improvements, and outright bugs. If you enjoy using it, we&#39;d
appreciate you taking the time to file any issues you run into:
<a href="https://github.com/terrastruct/d2/issues" target="_blank" rel="noopener noreferrer">https://github.com/terrastruct/d2/issues</a>.</p></div>
<p>The ASCII renderer is a downscale of the layout determined by the ELK layout engine with
some post-processing to further compact it.</p>
<ul>
<li>No styles are supported<!-- -->
<ul>
<li>Some will never be, e.g. <code>animated</code> and <code>font</code> don&#39;t make sense in ASCII.</li>
<li>Some may in the future with limited scope, e.g. colors when rendered to terminal.<!-- -->
<ul>
<li>By extension, themes are moot</li>
</ul>
</li>
<li>Some should be considered TODOs, e.g. <code>double-border</code> and <code>multiple</code></li>
</ul>
</li>
<li>Uneven spacing<!-- -->
<ul>
<li>Sometimes the downscaling results in a box with uneven spacing, e.g. a rectangle with
width 5 and the label is 2 chars. Due to discrete coordinate space in ASCII renders, some
outputs may look less even than their SVG counterparts.</li>
</ul>
</li>
<li>Certain things just can&#39;t render<!-- -->
<ul>
<li>Special text, e.g. Markdown, Latex, Code</li>
<li>Images and icons</li>
<li>UML classes and SQL tables</li>
<li>Right now these aren&#39;t special-handled -- whether removing them from the diagram or
using some placeholder is the right choice is tbd.</li>
</ul>
</li>
<li>Not all shapes are supported<!-- -->
<ul>
<li>Here&#39;s what all the shapes render as in ASCII. Some of these, like cloud and circle,
have curves that don&#39;t translate well to ASCII. We render these as a rectangle and add
a little icon for what it&#39;s supposed to represent in the top-left. These are subject to
change. For now we recommend rendering without custom shapes.</li>
</ul>
</li>
</ul>
<!-- -->
<h2 id="try-it-yourself">Try it yourself<a href="#try-it-yourself" aria-label="Direct link to Try it yourself" title="Direct link to Try it yourself">​</a></h2>
<p>This is live now in the D2 Playground. Try opening the below code block (click top right
of it).</p>
</div></div>
  </body>
</html>
