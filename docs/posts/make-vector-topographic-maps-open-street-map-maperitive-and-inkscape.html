<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://tech.michaelaltfield.net/2024/10/01/osm-contours-svg-maperitive/">Original</a>
    <h1>Make Vector Topographic Maps (Open Street Map, Maperitive, and Inkscape)</h1>
    
    <div id="readability-page-1" class="page"><div><p>This guide will show you how to generate vector-based <strong>topopgraphic maps</strong>, for printing very large &amp; <strong>high-quality paper wall maps using inkscape</strong>. All of the tools used in this guide are free (as in beer).</p>
<p><a href="https://community.silabs.com/2024/10/01/osm-contours-svg-maperitive/"><img decoding="async" fetchpriority="high" src="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_featuredImage1.jpg.pagespeed.ic.ZB-kuRexDF.jpg" alt="How-to Guide to Making Vector Topo Maps with Maperitive and Inkscape" width="1200" height="628" srcset="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_featuredImage1.jpg.pagespeed.ic.ZB-kuRexDF.jpg 1200w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_featuredImage1-300x157.jpg.pagespeed.ic.en31slCiPt.jpg 300w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_featuredImage1-1024x536.jpg.pagespeed.ic.06WldQXGv1.jpg 1024w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_featuredImage1-768x402.jpg.pagespeed.ic.5hCDHO-H1H.jpg 768w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_featuredImage1-150x79.jpg.pagespeed.ic.LYeb2XK35z.jpg 150w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_featuredImage1-400x209.jpg.pagespeed.ic.6UbEZepdaX.jpg 400w" sizes="(max-width: 1200px) 100vw, 1200px"/></a></p>

<p>I recently volunteered at a Biological Research Station located on the eastern slopes of the Andes mountains. If the skies were clear (which is almost never, as it&#39;s a cloud forest), you would have a great view overlooking the Amazon Rainforest below.</p>
<div id="attachment_4104"><p><a href="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_volcan-antisana-2015-06-14.jpg"><img aria-describedby="caption-attachment-4104" decoding="async" src="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/640x427xosm-contours-svg-maperitive_volcan-antisana-2015-06-14-1024x683.jpg.pagespeed.ic.vsGkG4ha7R.jpg" alt="Photo of a lush green, mountainous forest. In the background is a glacial-covered summit." width="640" height="427" srcset="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_volcan-antisana-2015-06-14-1024x683.jpg.pagespeed.ic.tZCPMaPmc6.jpg 1024w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_volcan-antisana-2015-06-14-300x200.jpg.pagespeed.ic.13B5txQgHZ.jpg 300w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_volcan-antisana-2015-06-14-768x512.jpg.pagespeed.ic.u-nxwx4FvD.jpg 768w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_volcan-antisana-2015-06-14-150x100.jpg.pagespeed.ic.FEX0TWpOK-.jpg 150w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_volcan-antisana-2015-06-14-400x267.jpg.pagespeed.ic.6DPYVeB5UV.jpg 400w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_volcan-antisana-2015-06-14.jpg.pagespeed.ic.MIlCQF4Rzg.jpg 1086w" sizes="(max-width: 640px) 100vw, 640px"/></a></p><p id="caption-attachment-4104">Yanayacu is in a cloud forest on the east slopes of the Andes mountains, just 30 km from the summit of the glacial-capped <a href="https://en.wikipedia.org/wiki/Antisana">Antisana</a> volcano (<a href="https://commons.wikimedia.org/wiki/File:Volc%C3%A1n_Antisana_2015-06-14_(9)_(39680659444).jpg">source</a>)</p></div>
<p>The field station was many years old with some permanent structures and a network of established trails that meandered towards the border of Antisana National Park – a protected area rich with biodiversity that attracts biologists from around the world. At the top of the park is a glacial-capped  volcano with a summit at 5,753 meters.</p>
<p>Surprisingly, though Estacion Biologicia Yanayacu was over 30 years old, nobody ever prepared a proper map of their trails. And certainly there was no high-resolution topographical map of the area to be found at the Station.</p>
<p>That was my task: to <strong>generate maps that we could bring to a local print shop to print-out huge 1-3 meter topographical maps</strong>.</p>
<p>And if you want to print massive posters that don&#39;t look terrible, you&#39;re going to be working with <strong>vector graphics</strong>. However, most of the tools that I found for browsing Open Street Map data that included contour lines couldn&#39;t export an SVG. And the tools I found that <em>could</em> export an SVG, couldn&#39;t export contour lines.</p>
<p>It took me several days to figure out how to render a topographical map and <strong>export it as an SVG</strong>. This article will explain how, so <strong>you can produce a vector-based topographical map in about half a day</strong> of work.</p>
<h2>Assumptions</h2>
<p>This guide was written in 2024, and it uses the following software and versions:</p>
<ol>
<li>Debian 12 (bookworm)</li>
<li>OsmAnd~ v4.7.10</li>
<li>JOSM v18646</li>
<li>Maperitive v2.4.3</li>
<li>Inkscape v1.2.2</li>
</ol>
<h2>The Tools</h2>
<p>Unfortunately, there&#39;s no all-in-one app that will let you just load a slippy map, zoom-in, draw a box, and hit &#34;export as SVG&#34;. We&#39;ll be using a few different tools to meet our needs.</p>

<h3>OsmAnd</h3>
<p><a href="https://osmand.net/">OsmAnd</a> is a mobile app.</p>
<p>We&#39;ll be using OsmAnd to walk around on the trails and generate GPX files (which contain a set of GPS coordinates and some metadata). We&#39;ll use these coordinates to generate vector lines of a trail overlaying the topographic map.</p>
<p>If you just want a topographic map without trails (or your trails are already marked on OSM data), then you won&#39;t need this tool.</p>
<p>In this guide we&#39;ll be using OsmAnd, but you an also use other apps -- such as <a href="https://organicmaps.app/">Organic Maps</a>, <a href="https://maps.me/">Maps.me</a>, or <a href="https://www.gaiagps.com/">Gaia</a>.</p>

<h3>JOSM</h3>
<p><a href="https://josm.openstreetmap.de/">JOSM</a> is a java-based tool for editing Open Street Map data.</p>
<p>We&#39;ll be using JOSM to upload the paths of our trails (recorded GPX files from OsmAnd) and also to download additional data (rivers, national park boundary line, road to the trailhead, etc). We&#39;ll then be able to combine all of this data into a larger GPX file, which will eventually become vector lines overlaying the topographic map.</p>
<p>You can skip this if you just want contour lines without things like rivers, roads, trails, buildings, and park borders.</p>
<div id="attachment_4077"><p><a href="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_srtm1.jpg"><img aria-describedby="caption-attachment-4077" decoding="async" loading="lazy" src="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_srtm1-197x300.jpg.pagespeed.ic.HrucjVw2E4.jpg" alt="Artist rendering shows a space shuttle with a purple beam emanating from it to a blue, cloudy sphere below. Attached to the shuttle is a long mast with a device at the end of it, where another purple beam emanates down to the same point on Earth, at a different angle." width="197" height="300" srcset="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_srtm1-197x300.jpg.pagespeed.ic.HrucjVw2E4.jpg 197w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_srtm1-99x150.jpg.pagespeed.ic.O2gR-EaV_M.jpg 99w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_srtm1-400x609.jpg.pagespeed.ic.fGErlcakZS.jpg 400w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_srtm1.jpg.pagespeed.ic.ZQCpPiK0IZ.jpg 561w" sizes="(max-width: 197px) 100vw, 197px"/></a></p><p id="caption-attachment-4077">This illustration shows the Space Shuttle Endeavour orbiting ~233 kilometers above Earth. The two anternae, one located in the Shuttle bay and the other located on a 60-meter mast, were able to penetrate clouds, obtaining 3-dimentional topographic images of the world&#39;s surface (source: <a href="https://commons.wikimedia.org/wiki/File:Shuttle_Radar_Topographic_Mission_(SRTM)_Illustration.jpg">NASA</a>)</p></div>
<h3>View Finder Panoramas</h3>
<p>Have you ever wondered how you can zoom-in almost anywhere in the world and see contour lines? I always thought that this was the result of some herculean effort of surveyors scaling mountains and descending canyons the world-over. But, no -- it&#39;s a product of the US Space Shuttle program.</p>
<p>In the year 2000, an international program called <a href="https://en.wikipedia.org/wiki/Shuttle_Radar_Topography_Mission">SRTM (Shuttle Radar Topography Mission)</a> was launched into space with the Endaevor Space Shuttle. It consisted of a special radar system tethered to the shuttle with a 60 meter mast as it orbited the earth.</p>
<p>When the shuttle returned to earth, the majority of our planet&#39;s contours were mapped. This data was placed on the public domain. Today, it is the main data source for elevation data in most maps.</p>
<p>While the data from SRTM was a huge boon to cartographers, it did have some gaps. Namely: elevation data <a href="https://en.wikipedia.org/wiki/Shuttle_Radar_Topography_Mission#No-data_areas">was missing</a> in very tall mountains and very low canyons. Subsequent work was done to fill-in these gaps. One particular source that ingested the SRTM data, completed its gaps, and made the results public is Jonathan de Ferranti&#39;s <a href="https://viewfinderpanoramas.org/Coverage%20map%20viewfinderpanoramas_org3.htm">viewfinderpanoramas.org</a>.</p>
<p>We will be downloading <code><a href="https://stackoverflow.com/questions/357415/how-to-read-nasa-hgt-binary-files">.hgt</a></code> files from View Finder Panoramas in order to generate vector contour lines for our topographical map.</p>

<h3>Maperitive</h3>
<p><a href="http://maperitive.net">Maperitive</a> is a <a href="http://maperitive.net/docs/FAQ.html#Where%20is%20the%20source%20code?">closed-source</a> .NET-based mapping software (which runs fine in Linux with <a href="https://www.mono-project.com/">mono</a>).</p>
<p>We&#39;ll be using Maperitive to tie together our GPX tracks, generate contour lines, generate hillshades, and export it all as a SVG.</p>

<h3>Inkscape</h3>
<p><a href="https://inkscape.org/">Inkscape</a> is a cross-platform app for artists working with vector graphics.</p>
<p>We&#39;ll be using inkscape to make some final touches to our vector image, such as hiding some paths, changing their stroke color/shape/thickness, and adding/moving text labels. Finally, we&#39;ll use inkscape to export a gigantic, high-definition <code>.png</code> raster image (to send to the print shop).</p>

<p>This section will describe how to make the map.</p>
<h2 id="walk">Walk the Walk</h2>
<p>Most of the work to make a map will be done in-front of a computer screen, but—if you want to map a trail—first you gotta walk the walk.</p>
<p>Check the weather. Wear good boots. Pack your lunch. Bring a rain coat. Make sure your phone is fully charged.</p>
<p><a href="https://www.osmand.net/docs/user/start-with/first-steps#install-osmand">Download OsmAnd</a> and <a href="https://www.osmand.net/docs/user/start-with/download-maps">the offline maps</a> of your area. <a href="https://www.osmand.net/docs/user/plugins/configure-plugins/#enable--disable">Enable</a> the <a href="https://www.osmand.net/docs/user/plugins/trip-recording">Trip recording</a> plugin.</p>

		
		

<p>When you arrive to the trailhead, open OsmAnd and wait for a GPS lock. Then press the &#34;REC&#34; button, make sure &#34;Show on map&#34; is enabled, and tap &#34;Start&#34;.</p>

		
		

<p>If this is your first time doing this, then I do recommend checking your phone periodically to make sure that a line tracing your walking path is overlaying the map. It&#39;s possible that your OS is set to conserve your battery, which might turn off your GPS module when the phone is in your pocket.</p>
<p>Take your time. Enjoy yourself. But try not to walk off-path (your GPS will track that and it may be confusing to you later).</p>
<p>When you&#39;ve reached the end of the trail, click the &#34;REC(ord)&#34; button again (which now will say the distance of your track, but still have a red &#34;recording&#34; icon) and tap &#34;Finish&#34;. Give it a name.</p>

		
		

<p>Later, when you&#39;ve returned to your computer desk, you can export the path of your walk that you just recorded as a <code>.gpx</code> file by going to the OsmAnd Menu -&gt; My Places -&gt; Rec. Tap on the name of the trace, then click options -&gt; Share.</p>

		
		

<p>I typically share it with the <a href="https://f-droid.org/packages/com.mateusrodcosta.apps.share2storage/">Save Locally</a> app in order to save it to my phone&#39;s disk.</p>

		
		

<p>Copying files from your phone to your computer is outside the scope of this article, but you could either use a cable, sdcard, or apps like <a href="https://onionshare.org/">OnionShare</a> or <a href="https://syncthing.net/">Syncthing</a>.</p>
<h2>Downloading and Editing GPX Tracks</h2>
<p>Next, let&#39;s open our <code>.gpx</code> tracks on the computer and also download paths of other user-contributed data about the same area from Open Street Map (eg the path of rivers, roads, and other trails).</p>
<h3>Install JOSM</h3>
<p>I think the best cross-platform tool to download and edit OSM data is <a href="https://josm.openstreetmap.de/">JOSM</a>. There&#39;s a few ways to install it in Debian.</p>
<p>JOSM is in the default repos, but it will give you an older version.</p>
<pre title=""># this is the best and safest way to install JOSM
sudo apt-get install josm
</pre>
<p>If you want a newer version, you can also <a href="https://josm.openstreetmap.de/wiki/Download#GNUDebian">install JOSM</a> from the <a href="https://backports.debian.org/Instructions/">official Debian backports</a> repo.</p>
<pre title="">cat &lt;&lt; EOF | sudo tee /etc/apt/sources.list.d/backports.list
deb http://deb.debian.org/debian bookworm-backports main
EOF
sudo apt-get update
sudo apt-get install -t bookworm-backports josm
</pre>
<p>Lastly, you <em>can</em> just download and run the latest version. But I would only do this in some ephemeral &amp; sandboxed VM, since it&#39;s not safe.</p>
<blockquote><p>
⚠ WARNING: Downloading and installing software outside of <code>apt</code> is <em>not</em> recommended. By default, <code>apt</code> will <a href="https://wiki.debian.org/SecureApt">cryptographically verify the authenticity</a> of everything that it downloads (since 2005) before installing it. Whereas downloading a <code>.jar</code> (even with https) could lead to you installing malicious software.</p>
<p>If you must download software without verifying its authenticity (eg with PGP signatures), then you should at least check it with <a href="https://community.silabs.com/3tofu">3TOFU</a>.
</p></blockquote>
<pre title=""># WARNING: this is not safe and could download malicious code!
wget https://josm.openstreetmap.de/josm-tested.jar
java -jar josm-tested.jar
</pre>
<h3>Downloading Data in JOSM</h3>
<p>Open JOSM with the josm command.</p>
<pre title="">user@disp4463:~$ josm
Using /usr/lib/jvm/java-17-openjdk-amd64/bin/java to execute josm.
...
</pre>
<p>After opening JOSM, click the &#34;Download&#34; button.</p>

		
		

<p>Pan the world map to your area of interest using the arrow buttons, and then zoom-in with your mouse wheel (or touchpad scroll gesture). Left-mouse-click and drag to draw a red box that highlights the area where you want to make a map. Then click &#34;Download&#34; to download the OSM data within the box.</p>
<h3>Import Data into JOSM</h3>
<p>Click the &#34;Open&#34; button.</p>

		
		

<p>Browse to the GPX file that you copied from your phone, select it, and click the &#34;Open&#34; button.</p>
<h2>Edit Data in JOSM</h2>
<p>After opening your <code>.gpx</code> file in JOSM, a new row will appear in the <a href="https://josm.openstreetmap.de/wiki/Help/Dialog/LayerList">Layers List</a> panel. Right-click on this new layer and choose &#34;<a href="https://josm.openstreetmap.de/wiki/Help/Action/ConvertToDataLayer">Convert to data layer</a>&#34;.</p>
<div id="attachment_3992"><p><a href="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_josm-convert1.jpg"><img aria-describedby="caption-attachment-3992" decoding="async" loading="lazy" src="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_josm-convert1.jpg.pagespeed.ic.k78S0JpSmV.jpg" alt="Screenshot of the JOSM application showing a big looping path. There is also some square buildings, a WC icon, and some additional paths." width="800" height="600" srcset="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_josm-convert1.jpg.pagespeed.ic.k78S0JpSmV.jpg 800w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_josm-convert1-300x225.jpg.pagespeed.ic.m8Kq5Yv2X_.jpg 300w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_josm-convert1-768x576.jpg.pagespeed.ic.OTuqnXclas.jpg 768w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_josm-convert1-150x113.jpg.pagespeed.ic.zecarPkAV6.jpg 150w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_josm-convert1-400x300.jpg.pagespeed.ic.3adBHHvT9P.jpg 400w" sizes="(max-width: 800px) 100vw, 800px"/></a></p><p id="caption-attachment-3992">Right Click -&gt; Convert to data layer</p></div>
<p>For privacy, I usually only convert the name, elevation, and accuracy metadata of my points.</p>
<p>You&#39;ll likely want to have JOSM automagically &#34;simplify&#34; your tracks. I usually take the default of one point every 3 meters.</p>

		
		

<p>Now your GPX track should be a set of points connected by lines. You can click on any point to move or delete it. I recommend spending some time &#34;cleaning up&#34; your track (such as removing the trace of you walking in circles at the trailhead or that time you went off-trail to pee).</p>

		
		

<p>For more information on editing a <a href="https://josm.openstreetmap.de/wiki/Help/Concepts/Object#Ways">way</a> in JOSM, see the <a href="https://josm.openstreetmap.de/wiki/Introduction#YourfirsteditwithJOSM">official JOSM documentation</a>.</p>
<div id="attachment_4006"><p><a href="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_josm-upload1.jpg"><img aria-describedby="caption-attachment-4006" decoding="async" loading="lazy" src="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_josm-upload1.jpg.pagespeed.ic.MAtC6KLXH4.jpg" alt="Screenshot of the JOSM application. The &#34;Upload&#34; button is highlighted." width="800" height="600" srcset="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_josm-upload1.jpg.pagespeed.ic.MAtC6KLXH4.jpg 800w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_josm-upload1-300x225.jpg.pagespeed.ic.tGl5X57rvP.jpg 300w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_josm-upload1-768x576.jpg.pagespeed.ic.FBQQyymH8Q.jpg 768w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_josm-upload1-150x113.jpg.pagespeed.ic.pWr3CL40Ic.jpg 150w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_josm-upload1-400x300.jpg.pagespeed.ic.kX9yzwZGq9.jpg 400w" sizes="(max-width: 800px) 100vw, 800px"/></a></p><p id="caption-attachment-4006">(optional) upload your trail to OSM&#39;s public data set</p></div>
<p>Optionally, after you edited the trail, you can use JOSM to upload it to be publicly available in the OSM data set. To do so, you&#39;ll want to <a href="https://www.openstreetmap.org/user/new">signup for an OSM account</a> and click the <a href="https://josm.openstreetmap.de/wiki/Introduction#UploadingtoOSM">upload button in JOSM</a>.</p>
<h3>Export Data from JOSM</h3>
<p>Finally, let&#39;s export this data (our path and the downloaded OSM nodes/paths) from JOSM. We could either export each layer separately, or we could make our lives easier by mergeing both layers into one before exporting both layers as a single <code>.gpx</code> file.</p>
<p>To merge the layers, click Edit -&gt; Merge layer</p>
<p>There&#39;s only two layers, so go ahead and click &#34;Merge layer&#34; again</p>

		
		

<p>We&#39;re just merging &amp; exporting this for local use (not for upload to OSM), so go ahead and click &#34;Continue&#34; on the warning</p>

		
		

<p>Now, to export the nodes and paths from JOSM, click File -&gt; Save As</p>
<p>We&#39;ll want to save this as a .gpx again, so change the filename from .osm to .gpx</p>

		
		

<h2 id="download-contour-data">Downloading Contour Data</h2>
<p>Next, let&#39;s download the SRTM-derived relief data from <a href="https://viewfinderpanoramas.org/Coverage%20map%20viewfinderpanoramas_org3.htm">viewfinderpanoramas.org</a></p>
<ul>
<li><a href="https://viewfinderpanoramas.org/Coverage%20map%20viewfinderpanoramas_org3.htm">viewfinderpanoramas.org/Coverage%20map%20viewfinderpanoramas_org3.htm</a></li>
</ul>
<div id="attachment_4029"><p><a href="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_viewfinderpanoramas-download1.jpg"><img aria-describedby="caption-attachment-4029" decoding="async" loading="lazy" src="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_viewfinderpanoramas-download1.jpg.pagespeed.ic.b8QHvEhybU.jpg" alt="Screenshot of the Firefox application browsing the website &#39;viewfinderpanoramas.org. The mouse cursor hovers over eastern Ecaudor, and a tooltip &#34;SA18&#34; is visible. The lower-left of the browser shows the URL &#34;https://viewfinderpanoramas.org/dem3/SA18.zip&#34;" width="800" height="600" srcset="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_viewfinderpanoramas-download1.jpg.pagespeed.ic.b8QHvEhybU.jpg 800w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_viewfinderpanoramas-download1-300x225.jpg.pagespeed.ic.hHloFIsHLd.jpg 300w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_viewfinderpanoramas-download1-768x576.jpg.pagespeed.ic.HpX7C-J628.jpg 768w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_viewfinderpanoramas-download1-150x113.jpg.pagespeed.ic.Aj6LwjLxiR.jpg 150w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_viewfinderpanoramas-download1-400x300.jpg.pagespeed.ic.F7it_ovDQr.jpg 400w" sizes="(max-width: 800px) 100vw, 800px"/></a></p><p id="caption-attachment-4029">Click to download the tile where you&#39;re mapping. We download eastern Ecuador, which is &#39;<code>SA18.zip</code>&#39;</p></div>
<p>The data is split into <code>.zip</code> files projected onto a map. Just click on the square of the map that contains the area that you want to map to download the corresponding <code>.zip</code> file.</p>
<p>You might need to download more than one file. The country lines are absent, so we downloaded both &#39;<code>SA17.zip</code>&#39; and &#39;<code>SA18.zip</code>&#39;.</p>
<h2 id="vector-topo">Generate the Vector Topo Map</h2>
<p>Next, let&#39;s use Maperitive to line-up our <code>.gpx</code> tracks exported from JOSM and generate some vector contour lines around it.</p>
<h3>Install Maperitive</h3>
<p>The best tool I found for generating an SVG from contour data is Maperitive. Unfortunately, Maperitive was designed for Windows. Fortunately, it does run fine in Linux. You don&#39;t even need to install wine. Just install the mono package.</p>
<p>First, install the prerequisites.</p>
<pre title="">sudo apt-get install mono-complete
</pre>
<p>Now download, extract, and launch Maperitive</p>
<blockquote><p>
⚠ WARNING: Downloading and installing software outside of <code>apt</code> is <em>not</em> recommended. By default, <code>apt</code> will cryptographically verify the authenticity of everything that it downloads before installing it. Whereas downloading and running a script from the Internet (even with https) could lead to you installing malicious software.</p>
<p>If you must download software without verifying its authenticity (eg with PGP signatures), then you should at least check it with <a href="https://community.silabs.com/3tofu">3TOFU</a>.</p>
<p>Moreover, Maperitive is closed-source software that hasn&#39;t been audited (and cannot easily be done-so because the author won&#39;t release the source code). Security researches can&#39;t, for example, read the sourcecode of Maperitive to determine if it&#39;s installing a keylogger to steal your passwords or monitoring your Internet activity to sell to data brokers. In practice, most closed-source software does malicious things, so you probably should only install Maperitive in a sandboxed VM that you delete after you&#39;ve printed your map.
</p></blockquote>
<pre title=""># WARNING: this is not safe and could download malicious code!
mkdir Maperitive
cd Maperitive

wget http://maperitive.net/download/Maperitive-latest.zip
unzip Maperitive-latest.zip
cd Maperitive

# create data dir for contours .hgt files
mkdir -p Cache/Rasters/SRTMV3R3/

# allow script to be executable
chmod +x Maperitive.sh
</pre>
<p>Finally, you can open Maperitive in linux by executing the <code>Maperitive.sh</code> script</p>
<pre title="">./Maperitive.sh
</pre>

		
		

<h3>Import Contour Data</h3>
<p>Maperitive is a powerful piece of software. It has a GUI, but most options (and parameters for commands) can only be accessed by the command prompt.</p>
<div id="attachment_4023"><p><a href="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_maperitive-init2.jpg"><img aria-describedby="caption-attachment-4023" decoding="async" loading="lazy" src="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_maperitive-init2.jpg.pagespeed.ic.8O59PYX1wf.jpg" alt="Screenshot of the Maperitive application showing the execution of the &#34;use-ruleset alias=default&#34; and &#34;add-web-map&#34; commands, whose output is &#34;READY&#34;. A single layer named &#34;Web map (OSM Mapnik)&#34; is highlighted." width="750" height="501" srcset="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_maperitive-init2.jpg.pagespeed.ic.8O59PYX1wf.jpg 750w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_maperitive-init2-300x200.jpg.pagespeed.ic.k6rSqhX2OB.jpg 300w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_maperitive-init2-150x100.jpg.pagespeed.ic.9wkmpkyj5Q.jpg 150w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_maperitive-init2-400x267.jpg.pagespeed.ic.jLBrsqI1Nj.jpg 400w" sizes="(max-width: 750px) 100vw, 750px"/></a></p><p id="caption-attachment-4023">When Maperitive first opens, you can see that the `<code>use-ruleset</code>` and `<code>add-web-map</code>` commands were executed on startup.</p></div>
<p>Mapertive has the ability to import its content data from several distinct <a href="http://maperitive.net/docs/Commands/SetDemSource.html#Using%20Built-In%20DEM%20Sources">DEM Sources</a> (<a href="https://en.wikipedia.org/wiki/Digital_elevation_model">Digital Elevation Models</a>).</p>
<p>By default, Mapertive is set to use the US government&#39;s SRTM source, but I&#39;ve never had that work for me (and <a href="https://projects.webvoss.de/2017/06/03/creating-the-perfect-hiking-map-for-germany-and-other-countries/#SRTM_Elevation_Data">it&#39;s not just me</a>). That&#39;s why we <a href="#download-contour-data">downloaded the Vector Topo data above</a>.</p>
<pre title=""># by default, Maperitive fails to download the SRTM data; use Vector Topo .hgt files instead
&gt; generate-contours
   Loading digital elevation model...
   SRTM index is missing, it will be generated...
   Indexing SRTM tiles for the &#39;Australia&#39; region.
   Error downloading SRTM data (reason: The remote server returned an error: (404) Not Found.)
</pre>
<div id="attachment_4008"><p><a href="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_maperitive-contours1.jpg"><img aria-describedby="caption-attachment-4008" decoding="async" loading="lazy" src="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_maperitive-contours1.jpg.pagespeed.ic.m-WiTkYAeh.jpg" alt="Screenshot of the Maperitive application showing the execution of the &#34;generate-contours&#34; command, whose output has an error = &#34;Error downloading SRTM data (reason: The remote server returned an error: (404) Not Found.)&#34;" width="750" height="501" srcset="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_maperitive-contours1.jpg.pagespeed.ic.m-WiTkYAeh.jpg 750w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_maperitive-contours1-300x200.jpg.pagespeed.ic.qIdrP-Lu5y.jpg 300w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_maperitive-contours1-150x100.jpg.pagespeed.ic.gVv6X0OCsj.jpg 150w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_maperitive-contours1-400x267.jpg.pagespeed.ic.RVfRVr2Uyt.jpg 400w" sizes="(max-width: 750px) 100vw, 750px"/></a></p><p id="caption-attachment-4008">Mapertive fails OOTB to download SRTM data for contours</p></div>
<p>Before we can import the Vector Topo data into Maperitive, we have to create a new DEM source. We do that with the <a href="http://maperitive.net/docs/Commands/SetDemSource.html">set-dem-source</a> command.</p>
<p>Execute the following command inside the Maperitive GUI&#39;s command prompt:</p>
<pre title="">set-dem-source SRTMV3R3
</pre>

		
		

<p>After executing the above command in Mapertitive, we must extract the <code><a href="https://stackoverflow.com/questions/357415/how-to-read-nasa-hgt-binary-files">.hgt</a></code> files from the <a href="#download-contour-data">Vector Topo <code>.zip</code> file(s)</a> and paste them into this <code>Maperitive/Cache/Rasters/SRTMV3R3/</code> folder.</p>
<h3>Set Geometry Bounds</h3>
<p>Above the command prompt in Maperitive is a map. Left-mouse-click-and-drag to pan. Zoom-out and zoom-in to the area you want to map with the mouse wheel (or touchpad scroll gesture). Then click Map -&gt; Set Geometry Bounds to draw a red-box around the viewbox to select the area that you want to map.</p>
<p>Zoom-out a bit, and you can see the bounds of the red box. You can click the yellow corners of the red box to resize the box as needed.</p>

		
		

<p>Note that the command prompt window shows the `set-geo-bounds` command that it executed when you clicked &#34;Set Geometry Bounds&#34; – including the parameters that define the bounds of the box.</p>
<p>Maperitive is a software that&#39;s dealing with some big data sets. In fact, the amount of memory that it uses is literally always visible in the bottom-right corner of the app. It&#39;s quite possible that you might, at some point, kick-off a processing command that exhausts your system&#39;s memory, causing Maperitive to crash. For this reason, I think it&#39;s super helpful that all Maperitive actions can be entered as a command. This allows you to write a set of idempotent commands that you can execute  in Mapertivie, to quickly return to where you were before it crashed.</p>
<p>I recommend spending a few minutes manually executing the <a href="http://maperitive.net/docs/Commands/SetGeometryBounds.html">set-geo-bounds</a> command – changing the parameters bit-by-bit until the box meets your needs. Then write-down the full command so you can easily paste it into Maperitive on a subsequent run to draw the same bounding box.</p>
<p>For the purpose of this guide, we&#39;ll be using the following box:</p>
<pre title="">set-geo-bounds -77.92,-0.6,-77.885,-0.5916
</pre>
<div id="attachment_4019"><p><a href="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_maperitive-geo-bounds3.jpg"><img aria-describedby="caption-attachment-4019" decoding="async" loading="lazy" src="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_maperitive-geo-bounds3.jpg.pagespeed.ic.NZGSMnqRFN.jpg" alt="Screenshot of the Maperitive application showing the execution of the &#34;set-geo-bounds -77.92,-0.6,-77.885,-0.5916&#34; command" width="750" height="501" srcset="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_maperitive-geo-bounds3.jpg.pagespeed.ic.NZGSMnqRFN.jpg 750w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_maperitive-geo-bounds3-300x200.jpg.pagespeed.ic.rvHs4NtBnN.jpg 300w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_maperitive-geo-bounds3-150x100.jpg.pagespeed.ic.J_ZkLD5xlJ.jpg 150w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_maperitive-geo-bounds3-400x267.jpg.pagespeed.ic.x3Ml9DcEKM.jpg 400w" sizes="(max-width: 750px) 100vw, 750px"/></a></p><p id="caption-attachment-4019">We can specify the geo-bounds on the command-line for precision and reproducibility</p></div>
<p>After executing the above command, you&#39;ll have a red box drawn around the Yanayacu Biological Station and the surrounding Antisana National Park near Cosanga, Ecuador. You may need to zoom-out and pan to South America to view the geo-bound red box.</p>
<h3>Generate Contours</h3>
<p>Finally, we can actually generate our contour lines. You can do this by Tools -&gt; Generate Relief Contours</p>

		
		

<p>Or you can generate contours with the `<code>generate-controus</code>&#39; command (which has the added benefit of letting us set the coutour line interval).</p>
<pre title="">generate-contours interval=10
</pre>

		
		

<h3>Generate Hillshades</h3>
<p>If you&#39;d like, you can also generate hillshades. There&#39;s a few different &#34;methods&#34; you can use. We&#39;ll use the author of Maperitive (Igor Brejc)&#39;s method <a href="http://maperitive.net/docs/Commands/GenerateReliefImageIgor.html">generate-relief-igor</a> with 1.25 intensity.</p>
<pre title="">generate-relief-igor intensity=1.25
</pre>
<p>A few notes about this:</p>
<ol>
<li>The hillshades will look terrible and blocky in Maperitive; they will look fine once exported to <code>.svg</code></li>
<li>The hillshades will export as raster bitmaps, not vectors. But since they&#39;re just semi-transparent gradients, it should look ok when scaled-up</li>
</ol>

		
		

<h3>Customize Contour Lines</h3>
<p>How frequently do you want a contour to be drawn? Every 50 meters? Every 10 meters? Every 1 meter? And how frequently do you want the text to appear, indicating the elevation of a given line? Every 100 meters?</p>
<p>You can control these settings in Mapertive with <a href="http://maperitive.net/docs/Rendering_Rules_Introduction.html">Rendering Rules</a>.</p>
<p>Maperitive comes with a few different sets of Rendering Rules, which can be found in the <code>Maperitive/Rules/</code> directory</p>
<pre title="">user@disp4463:~/Maperitive$ ls Rules/
Default.mrules       Experimental.mrules  Hiking.mrules      urbanight.mrules
GoogleMaps.mrules    PowerLines.mrules    Wireframe.mrules
user@disp4463:~/Maperitive$ 
</pre>
<p>I found that I liked the detail of the contour lines provided by the <code>Hiking.mrules</code> rules, but that ruleset hid my GPX tracks for some reason.</p>
<p>The easiest way I found was to just edit the <code>Default.mrules</code> file, copying &amp; pasting the relevant sections from the <code>Hiking.mrules</code> file back into the <code>Default.mrules</code> file. Then, the only other thing that I customized was to increase the <code>font-size</code> -- because I wanted the elevation printed on the major contour lines to be visible when printed on A4-size paper, a posterboard, and even when a cheap printer with low DPI is used.</p>
<p>Here&#39;s the two relevant sections as they originally appeared in <code>Default.mrules</code></p>
<pre title="">                contour major : contour[@isMulti(elevation, 100)]
                contour minor : contour[@isMulti(elevation, 20) and not @isMulti(elevation, 100)]
</pre>
<pre title="">        target: contour*
                define
                        line-color : #7f3300
                        line-opacity : 0.35
                        curved : true
                if : *major
                        define
                                map.rendering.contour.label : true
                                min-zoom : 9
                                line-width : 11:0.1;11.9:1;12:2
                                font-size : 10
                                font-style : italic
                                font-weight : normal
                                text-halo-width : 35%
                                text-halo-opacity : 1
                                text-halo-color : #F1EEE8
                else
                        define
                                min-zoom : 12
                                line-width : 1
                draw : contour
</pre>
<p>Here&#39;s as they appear in <code>Hiking.mrules</code>.</p>
<pre title="">                contour major : contour[@isMulti(elevation, 50)]
                contour minor : contour[@isMulti(elevation, 10) and not @isMulti(elevation, 50)]
</pre>
<pre title="">        target: contour*
                define
                        line-color : #7f3300
                        line-opacity : 0.6
                        curved : true
                if : *major
                        define
                                map.rendering.contour.label : true
                                min-zoom : 12
                                line-width : 11:0.75;13:1.25;15:2
                                font-size : 10
                                font-style : italic
                                font-weight : normal
                                text-halo-width : 35%
                                text-halo-opacity : 1
                                text-halo-color : #F1EEE8
                else
                        define
                                min-zoom : 13
                                line-width : 0.65
                draw : contour
</pre>
<p>And here&#39;s a diff of the original <code>Default.mrules</code> file vs the one after my edits.</p>
<pre title="">user@disp4463:~/Maperitive$ diff Rules/Default.mrules.orig Rules/Default.mrules
126,127c126,127
&lt; 		contour major : contour[@isMulti(elevation, 100)]
&lt; 		contour minor : contour[@isMulti(elevation, 20) and not @isMulti(elevation, 100)]
---
&gt; 		contour major : contour[@isMulti(elevation, 50)]
&gt; 		contour minor : contour[@isMulti(elevation, 10) and not @isMulti(elevation, 50)]
1352c1352
&lt; 			line-opacity : 0.35
---
&gt; 			line-opacity : 0.6
1357,1359c1357,1359
&lt; 				min-zoom : 9
&lt; 				line-width : 11:0.1;11.9:1;12:2
&lt; 				font-size : 10
---
&gt; 				min-zoom : 12
&gt; 				line-width : 11:0.75;13:1.25;15:2
&gt; 				font-size : 5120
1367,1368c1367,1368
&lt; 				min-zoom : 12
&lt; 				line-width : 1
---
&gt; 				min-zoom : 13
&gt; 				line-width : 0.65
1375c1375
&lt; 		draw : line
\ No newline at end of file
---
&gt; 		draw : line
user@disp4463:~/Maperitive$ less Rules/Default.mrules.orig 
</pre>
<h3>Add <code>.gpx</code></h3>
<p>To overlay the trace of your walk along the trail on the map, open your <code>.gpx</code> file in Maperitive.</p>

		
		

<p>Go to <code>File</code> -&gt; <code>Open Map Source</code>, then browse and select your <code>.gpx</code> file.</p>
<h3>Export <code>.svg</code></h3>
<p>Finally, we want to export all of this data from Maperitive to a <code>.svg</code> file.</p>
<p>Note that some data in Maperitive can <em>not</em> be exported as a vector. Layers like <a href="http://maperitive.net/docs/Commands/AddWebMap.html">Web Maps</a> are loaded as <a href="https://wiki.openstreetmap.org/wiki/Raster_tiles">rasterized tiles</a>.</p>
<p>Before you export to your <code>.svg</code> file, you probably want to go through each of your current <a href="http://maperitive.net/docs/Map_Layering.html">Map Layers</a>. We only want the following layers:</p>
<ol>
<li><strong>Contours(SQLite)</strong> - Our contour lines layer, generated with the <code>generate-contours</code> command</li>
<li><strong>Image(&#39;...Maperitive/Temp/relief...png)</strong> - Our hillshades layer, generated with the <code>generate-relief-igor</code> command</li>
<li><strong>GPX file...</strong> - OSM data from JOSM and the trace of our walk on the trail</li>
</ol>
<p>You may see additional layers that Maperitive added automatically, such as a &#34;<code>Web map</code>&#34;. You probably want to hide these layers before exporting the <code>.svg</code> file. Hide them by clicking the yellow &#34;star&#34; icon next to the Map Layer&#39;s name.</p>

		
		

<p>The Maperitive command to export the map to an <code>.svg</code> file is <a href="http://maperitive.net/docs/Commands/ExportSvg.html">export-svg</a>. This command takes many arguments. We&#39;ll be using it with the <code>zoom</code> argument.</p>
<pre title="">export-svg zoom=18
</pre>
<p>The above command will output an &#39;<code>output.svg</code>&#39; file, located in the &#39;<code>Maperitive/output/</code>&#39; directory.</p>
<p>Note that we chose zoom level 18. The bigger the number, the more &#34;zoomed-in&#34; and the bigger the file. You may want to increase or decrease the zoom level to meet your needs, but I found that 18 worked well for our map.</p>

		
		

<h2>Finalize in Inkscape</h2>
<p>Rather than open the <code>.svg</code> file in inkscape, I recommend:</p>
<ol>
<li>Create a <em>new</em> inkscape document</li>
<li>Set the page size of the inkscape document to the actual dimensions on which you plan to print your map (on paper), and</li>
<li>Import the Maperitive-exported &#39;<code>output.svg</code>&#39; file <em>into</em> the new inkscape document</li>
</ol>
<h3>Create Inkscape New Document</h3>
<p><a href="https://inkscape.org/release/">Download</a>, install, and open a new inkscape document. Go to File -&gt; Document Properties.</p>
<div id="attachment_3960"><p><a href="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_inkscape-doc1.jpg"><img aria-describedby="caption-attachment-3960" decoding="async" loading="lazy" src="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_inkscape-doc1.jpg.pagespeed.ic.ZbwoDnaABN.jpg" alt="Screenshot of the inkscape application with &#34;Document Properties&#34; in the File Menu highlighted" width="800" height="600" srcset="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_inkscape-doc1.jpg.pagespeed.ic.ZbwoDnaABN.jpg 800w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_inkscape-doc1-300x225.jpg.pagespeed.ic.kbrmyP0LDv.jpg 300w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_inkscape-doc1-768x576.jpg.pagespeed.ic.WxJgqL2hB0.jpg 768w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_inkscape-doc1-150x113.jpg.pagespeed.ic.yeoh5otR_Y.jpg 150w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_inkscape-doc1-400x300.jpg.pagespeed.ic.ApiWA2WXFo.jpg 400w" sizes="(max-width: 800px) 100vw, 800px"/></a></p><p id="caption-attachment-3960">File -&gt; Document Properties</p></div>
<p>We decided to make a map 1,200 mm x 675 mm (that&#39;s 1.2 meters wide by 0.675 meters tall), so we set the document units to <code>mm</code>, set the width to <code>1200.000</code>, and set the heght to <code>675.000</code></p>

		
		

<h3>Import Maperitive <code>.svg</code> into Inkscape</h3>
<p>After your page dimensions are set correctly, go to <code>File</code> -&gt; <code>Import...</code>, and browse to the &#39;<code>Maperitive/output/output.svg</code>&#39; file that you produced above. In the pop-up that follows, click &#34;<code>Include SVG image as editable object(s) in the current file</code>&#34;</p>

		
		

<p>At this point, you probably want to save your document before continuing -- working with large map files have a tendency to crash programs. Go to <code>File</code> -&gt; <code>Save as...</code> and save this new inkscape document as an <code>.svg</code> file somewhere on your computer.</p>

		
		

<h3>Scale</h3>
<p>If your map is too big, <a href="https://inkscape.org/doc/tutorials/basic/tutorial-basic.html">scale</a> it <a href="http://tavmjong.free.fr/INKSCAPE/MANUAL/html/Transforms.html#Transforms-Mouse" <="" a="">down to the size</a> of your document.</p>

		
		

<p>If your map is too small, you might want to consider re-exporting a new <code>output.svg</code> file from Maperitive -- but this time use a slightly higher number for your &#39;<code>zoom=</code>&#39; parameter.</p>
<blockquote><p>
ⓘ Note: Maperative has a maximum zoom level, such that if you keep increasing the &#39;<code>zoom=</code>&#39; parameter, the output file won&#39;t get any bigger.</p>
<p>You can <a href="http://maperitive.net/docs/FAQ.html#How%20do%20I%20increase%20the%20maximum%20zoom%20level?">increase the maximum zoom level in Maperitive</a> using the <a href="http://maperitive.net/docs/Commands/SetSetting.html">set-setting</a> command. For example, the following command will increase the maximum zoom level to 21</p>
<pre title="">set-setting name=map.max-zoom value=21
</pre>
</blockquote>
<p>When your map looks slightly larger than your page, click-and-drag the map layer so it&#39;s positioned directly over your page, and then continue to shrink it until it fits into your page as-desired.</p>

		
		

<h3>Customize Lines and Stroke</h3>
<p>The <code>.gpx</code> data that you exported from Maperitive (and also the contour lines) should appear in the Inkscape <a href="http://tavmjong.free.fr/INKSCAPE/MANUAL/html/Layers.html">Layers and Objects</a> tab under the a sub-group named &#34;Line artwork&#34;.</p>

		
		

<p>If it appears as a single large, un-editable shape, you may need to</p>
<ol>
<li>Select the object in the layer list</li>
<li>Click Path -&gt; Object to Path</li>
<li>Open the <a href="http://tavmjong.free.fr/INKSCAPE/MANUAL/html/Attributes-Fill-Stroke.html">Fill and Stroke</a> dialog by clicking &#34;Object -&gt; Fill and Stroke&#34;</li>
<li>In the &#34;Fill&#34; tab, click the &#34;X&#34; icon to select &#34;No paint&#34; for the path&#39;s Fill</li>
</ol>

		
		

<p>You should now be able to click on a given line segment to edit its appearance. For example</p>
<ol>
<li>Click on the line that traces your path following the trail</li>
<li>In the &#34;Fill and Stroke&#34; dialog, click on the &#34;Stroke paint&#34; tab</li>
<li>Click on the &#34;Flat color&#34; icon</li>
<li>Choose a different color on the color wheel</li>
<li>In the &#34;Fill and Stroke&#34; dialog, click on the &#34;Stroke style&#34; tab</li>
<li>Change the &#34;Width&#34; to &#34;10.000&#34; mm</li>
<li>Change the &#34;Dashes&#34; dropdown to a solid line or a style of dashes to trace the line</li>
</ol>

		
		

<p>In this example, we change the stroke of the &#34;national park boundary&#34; line to be thick, green, and dashed.</p>

		
		

<p>In addition to changing the color, thickness, and stroke pattern of the lines, you can also hide some lines that you don&#39;t want to appear.</p>
<h3>Embed raster images</h3>
<p>At this point, the hillshades in the svg are referenced externally. That is to say, if you send just the <code>.svg</code> file to a colleague (without the externally-referenced <code>.png</code> file), then inkscape will show a <a href="https://inkscape-manuals.readthedocs.io/en/latest/import-pictures.html">big red X</a> instead of the hillshades gradient.</p>
<div id="attachment_3963"><p><a href="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_inkscape-embed1.jpg"><img aria-describedby="caption-attachment-3963" decoding="async" loading="lazy" src="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_inkscape-embed1.jpg.pagespeed.ic._ufWSgrHVL.jpg" alt="Screenshot of the inkscape application showing a topographic map with a big red &#34;X&#34; displayed over it" width="800" height="600" srcset="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_inkscape-embed1.jpg.pagespeed.ic._ufWSgrHVL.jpg 800w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_inkscape-embed1-300x225.jpg.pagespeed.ic.OMeBeASE2s.jpg 300w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_inkscape-embed1-768x576.jpg.pagespeed.ic.Z8b0kYDOdt.jpg 768w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_inkscape-embed1-150x113.jpg.pagespeed.ic.Xj3ghwP_PX.jpg 150w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_inkscape-embed1-400x300.jpg.pagespeed.ic.Q_35DKeOxU.jpg 400w" sizes="(max-width: 800px) 100vw, 800px"/></a></p><p id="caption-attachment-3963">Inkscape displays a large red &#34;X&#34; if it can&#39;t find the externally-referenced raster image</p></div>
<pre title="">&lt;!-- externally-referenced hillshades png file --&gt;
&lt;image
   id=&#34;symbol_bitmap_1&#34;
   width=&#34;47&#34;
   height=&#34;32&#34;
   transform=&#34;matrix(154.68,0,0,-157.29,41259.53,22405.23)&#34;
   xlink:href=&#34;../../../Maperitive/output/relief_638543156646443800.12.png&#34; /&gt;
</pre>
<p>To prevent this issue in the future, go ahead and embed the hillshades data directly into the <code>.svg</code> file (in our map, it was only 2 KB) by right clicking on the raster layer and selecting <a href="https://inkscape-manuals.readthedocs.io/en/latest/import-pictures.html">Embed Image</a></p>

		
		

<pre title="">&lt;!-- embedded hillshades png data --&gt;
&lt;image
   id=&#34;symbol_bitmap_1&#34;
   width=&#34;47&#34;
   height=&#34;32&#34;
   transform=&#34;matrix(154.68,0,0,-157.29,41259.53,22405.23)&#34;
   xlink:href=&#34;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAgCAYAAACCcSF5AAAABGdBTUEAALGPC/xhBQAAAAFzUkdC
AK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAABmxJREFU
WIVlmFuT20QQhT9Jvq7tTbK7JKSgCAVvUMUb//9H8MIDL6SKIgnJ7np90cryhYc5x90YValsaWZ6
Tt9O96iiXL8CNfACaIAD8BH4HfhKdwM8a6wGhnp+BhZAD3zS+HfALbAB/gGWaV2l+6Q1B+Co51p4
Dnoe6PmosUP6XzUavAOuBGKozX4D3gAvgT2wA8bauBPoXmvvJHgreWNgJABo/f4CZK3/nuOrEYZK
z6ekjOdWQGPNdsBTmvQFeAdMNdYmCxx0X0vIVkqv9X4iAJ3WTGSYLq0nWTV7wrIHkmHjOhqsQJ3B
X2twLQvNgZ+16G/gvcZHGh9qg6UA9VJyk4BtBeoVxXvtBQB7ASJc/GwlDNyGq/RcAfUgLa60wUkg
X8pqddroGlgJdKf5NcVTbVLM+dFK1kxrT1Jyn/bNoAzySFwet1In7XFskpCdBg3qjuIBu2xCieUn
ShLaWq2F6d2tnlspYMWP/B8YhCcMMFvXzw4rYwU42fJdGlxr8RL4kRISRyIv1gLXa/47ipfeS/Bc
768SgF6K29JmHl8HzfW7iggdzx0QoXQChgZ/Q3GlJ4+BP4G3AvuXxk/pdwO8FtixFB5TktyWbAR2
KGWOSUafrJovY3ICm5kGBBn0wMFh8zXF+jOC7r5QWGSkzZ3QTwJ+pXmesxSQeQL+TMmRRhtPBcJx
PCS8kem00bwBwe+7dLfAzlo+E9Tk+LegqQA2AjIUWDOKmeZZv5+1bkIUlVbrR3pveU5gz8sE4igw
DoeV8+Ec840sNhLYXhs4zhbAtxL0BxEOFrTS8ygpvtKzc8DxbKU6KW9rovkey4ltRQdE8h5zfI0p
DHOSpQZEYn7S/42eve6WSO6ZFO+Isl8Tcdqk556g5x1BGC5QI8nP1j9d3GeqNCW+EQgXn7eyekeU
/54o4a/1/kEyZoT7DcbJaW5fSAH3Ni1RjR0aI4L3d5pnNjy3CbYglGR81sIFkUAzoqL2mvOZiFtX
2E7zOoIdfG3SnDsKtZqhfGXvWBG0LnvKiVx5A2+6FqgxUSknBAstgPs0viSK1JiIZ9Oiw6fTuhUl
1KaEhyba18asCHp1c7fVb27aGms+lnWmRJ+zleBvJGxDcaGB1gLvJF9QQuea0lr7zuFhYwyIVsKG
2xEUeSU5w+SZIxf5lN22BR4FDP0/CABaaFdOiVh+pTVOtgPRhWYedx7Ysq7ctqar7FQyXThNHq4F
Dp9zkXISNrLwI/AhKbAlXLeQQnu9G+r/PSUXHikJbPq0u6e6r/hv1Wz0bkDJJyfkjXCtk7Wz8nuD
n1Hc70x3XFUCtqFUVrt6LKFLrTfwPZHEDpclJSTcodZaf0NJ3lz6V1L+SdZ3buQ+x6xzpspbovNz
vOUuzlWyJcrzUrdbgKMAjYmC4pbCyUqab1Zz5R1pLM99KZk2phvEntTPu+01JU2lvRPJ81yq1wnc
KlnW1nWYuKzvtGZHHCPdMruxq4jG7kDxZAv8JINuiMK5J51h3xFuv5LARwFzgXB85hOQ6dXrZno/
puRFZqZnAXggkt0t9pY4vLjtzfE+11jOo3Nv870GPhJ0lFtVU1jus92TONzcq7TpnVliIQU+EO2F
mYgLWTZSbh9cqFylh6Qi1QA/yBKO7QnRY/jX9Gb+HRAx7gLlyvxAkIAL3Z0sXCUZbsrq9HvuHIlz
hkGfPe+w+YX4xLEk6GtLxK17FVvUVdbs4ZOTrdQRse1zp+nSlxOwJcLV14ESZhXlO9CQEh3uOE/5
u81rCXggCkZL9CX5wLCnxLQPHjXRBnsD06J7/UryXWHz6cptxguiKasoeedEnsuY7jDPVDmguPWF
NrvXb55sq5t3JxSKdYu7ooSdY9qhZg/Ywl2SbYXatJfpE8ppzlR9TRx4DqQiNdHvTHdHcHg+splt
rLDzoiaqYJPeW1FbuUkyrVj+dOh8Mh1eGsOs1AG7/EVqpUlzop95IMp7vl19p0RfYzn+BOI6cExj
Pui4ffZnRIdTLozOGyt0Spbfk2LeWWxetVVNfZnb86e3OdH7++TUpXGfkvZEH+4zr5ssK3pDfCbc
E6crezR/rKqA6vIz255SrO4F+DZZ0Nb1YnO5n/Ocnjh1ndI7KN6ykv6+6QO3Q3CbrG4yMPjzF4bM
827Ccovg+HNH6Y1y0XLxcHEbpf9mFRuoo3jKiuXPIX1atyd6mYwvHwV3/wKDONhHv3UmWAAAAABJ
RU5ErkJggg==
&#34; /&gt;
</pre>
<h3>Export <code>.png</code></h3>
<p>When you&#39;re satisfied with your map, you&#39;ll want to export it as a raster image.</p>
<p>Unfortunately, <code>.svg</code> files render differently in web browsers (eg firefox), Adobe Illustrator, and Inkscape. Since your local print shop may not use the exact same software as you, it&#39;s best to export it as a huge raster image.</p>
<p>Click <code>File</code> -&gt; <code>Export...</code></p>
<div id="attachment_3966"><p><a href="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_inkscape-export1.jpg"><img aria-describedby="caption-attachment-3966" decoding="async" loading="lazy" src="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_inkscape-export1.jpg.pagespeed.ic.eLHrTMdF4R.jpg" alt="Screenshot of the inkscape application showing the &#34;File&#34; menu expanded and the &#34;Export...&#34; option highlighted" width="800" height="600" srcset="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_inkscape-export1.jpg.pagespeed.ic.eLHrTMdF4R.jpg 800w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_inkscape-export1-300x225.jpg.pagespeed.ic.OlwSbQteUE.jpg 300w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_inkscape-export1-768x576.jpg.pagespeed.ic.HNtg4O0aID.jpg 768w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_inkscape-export1-150x113.jpg.pagespeed.ic.BTUB04Asj4.jpg 150w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_inkscape-export1-400x300.jpg 400w" sizes="(max-width: 800px) 100vw, 800px"/></a></p><p id="caption-attachment-3966">File -&gt; Export...</p></div>
<p>Here you can only choose the size in pixels, not mm (you <em>did</em> set the document properties first, rather than editing the &#39;<code>output.svg</code>&#39; file directly, <em>right?</em>). If you&#39;re going to print on paper that&#39;s <em>exactly</em> the same size as the page size that you set in the document properties, then just export it at 300 DPI.</p>
<div id="attachment_3967"><p><a href="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_inkscape-export2.jpg"><img aria-describedby="caption-attachment-3967" decoding="async" loading="lazy" src="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_inkscape-export2.jpg" alt="Screenshot of the inkscape application showing the &#34;Export&#34; tab with &#34;Page&#34; and &#34;DPI: 600&#34; highlighted. The filename input field is set to &#34;yanayacu_topo.png&#34; and the &#34;Export&#34; button is also highlighted." width="800" height="600" srcset="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_inkscape-export2.jpg 800w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_inkscape-export2-300x225.jpg 300w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_inkscape-export2-768x576.jpg 768w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_inkscape-export2-150x113.jpg 150w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_inkscape-export2-400x300.jpg 400w" sizes="(max-width: 800px) 100vw, 800px"/></a></p><p id="caption-attachment-3967">Ask the print shop what is the DPI of their printer</p></div>
<p>If you&#39;re going to print it on paper that&#39;s twice the size of your document, export it at 600 DPI.</p>
<p>If you&#39;re going to print it on paper that&#39;s half the size of your document, it should be fine to export it at 150 DPI.</p>
<p>You also might want to talk with your print shop before you export to <code>.png</code>. If their printer prints at 600 DPI, then you should export at 600 DPI instead of 300 DPI. They&#39;ll know better than you or me what DPI the image should have.</p>
<p>For example, here&#39;s the (A4-sized) topo map that I built for Yanayacu.</p>
<div id="attachment_3919"><p><a href="https://github.com/maltfield/yanayacu/blob/3bb3fdf17668cd4d0a75c9fb24c89a18b2c4d3b3/maps/yanayacu_topo/yanayacu_topo_400mmx225mm.png?raw=true"><img aria-describedby="caption-attachment-3919" decoding="async" loading="lazy" src="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_yanayacu_topo_small.png" alt="Image shows a topographical map of a mountainous area. The title reads &#34;Yanayacu&#34;. The elevation ranges from 2,100 to 2,900. The bottom-left has a small font that reads &#34;Map by Michael Altfield / github.com/maltfield/yanayacu&#34;" width="1182" height="665" srcset="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_yanayacu_topo_small.png.pagespeed.ic.HwDgVXi3-B.jpg 1182w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_yanayacu_topo_small-300x169.png 300w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_yanayacu_topo_small-1024x576.png 1024w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_yanayacu_topo_small-768x432.png 768w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_yanayacu_topo_small-150x84.png 150w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_yanayacu_topo_small-400x225.png 400w" sizes="(max-width: 1182px) 100vw, 1182px"/></a></p><p id="caption-attachment-3919">Final (raster) export, ready for sending to the print shop (<a href="https://github.com/maltfield/yanayacu/blob/main/maps/yanayacu_topo/yanayacu_topo.svg">source svg</a>)</p></div>
<p>Note that I changed the stroke and thickness of the National Park boundary to be large and green, I changed the path of the road (downloaded from OSM data in JOSM) to be thick and black, and I changed my GPX tracks (recorded in OsmAnd and merged with the OSM data in JOSM) to be thin, dashed, and red.</p>
<p>The source <code>.svg</code> file for the above image can be found <a href="https://github.com/maltfield/yanayacu/tree/main/maps/yanayacu_topo">here</a></p>
<ul>
<li><a href="https://github.com/maltfield/yanayacu/tree/main/maps/yanayacu_topo">github.com/maltfield/yanayacu/tree/main/maps/yanayacu_topo</a></li>
</ul>
<p>I also used this method to generate a simplified &#34;trail map&#34; of Yanayacu (without contour lines). The workflow was similar, except I didn&#39;t generate contour nor hillshades layers in Maperitive before exporting as a <code>.svg</code></p>

<p>The source <code>.svg</code> file for the above image can be found <a href="https://github.com/maltfield/yanayacu/tree/main/maps/yanayacu_trail_guide">here</a></p>
<ul>
<li><a href="https://github.com/maltfield/yanayacu/tree/main/maps/yanayacu_trail_guide">github.com/maltfield/yanayacu/tree/main/maps/yanayacu_trail_guide</a></li>
</ul>

<p>This section will outline some problems with this guide&#39;s approach to creating vector-based topographical maps.</p>
<h2>Raster Hillshades</h2>
<p>While Maperitive can generate and export contour lines as vectors, it cannot generate and export hillshades as vectors.</p>
<p>The hillshades generated by Maperitive are a ~2 KB <code>.png</code> file that&#39;s referenced externally by the &#39;<code>output.svg</code>&#39; file that Maperitive produces.</p>
<h2>Not FOSS</h2>
<p>The most glaring issue with this guide is that it heavily depends on Mapertive, which is a closed-source software designed in .NET. The author is actively <a href="http://maperitive.net/docs/FAQ.html#Where%20is%20the%20source%20code?">hostile to the GPL</a>.</p>
<div id="attachment_4007"><p><a href="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_maperitive-con1.jpg"><img aria-describedby="caption-attachment-4007" decoding="async" loading="lazy" src="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_maperitive-con1.jpg" alt="Screenshot of the Firefox application viewing the page &#34;maperitivenet/docs/FAQ.html#Where is the source code?&#34;. 3 questions &amp; answers are visible. The first question is &#34;Q: I would like to see the source code of Maperitive.&#34;. It has answer &#34;A: You can&#39;t. Maperitive is not an open source application.&#34;" width="800" height="600" srcset="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_maperitive-con1.jpg 800w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_maperitive-con1-300x225.jpg 300w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/osm-contours-svg-maperitive_maperitive-con1-768x576.jpg 768w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_maperitive-con1-150x113.jpg.pagespeed.ic.5sd3aMe-rk.jpg 150w, https://tech.michaelaltfield.net/wp-content/uploads/sites/5/xosm-contours-svg-maperitive_maperitive-con1-400x300.jpg.pagespeed.ic.ymEXfN_S6t.jpg 400w" sizes="(max-width: 800px) 100vw, 800px"/></a></p><p id="caption-attachment-4007">Mapertive is closed-source software and its author is hostile to the open licensing.</p></div>
<p>The biggest consequences of this are:</p>
<ol>
<li>Some (exclusively FOSS-only) orgs cannot use the software in this guide</li>
<li>If there&#39;s a bug in Maperitive (and I found many), then the community cannot find &amp; submit patches</li>
<li>If the author stops developing Maperitive, then nobody can fork and continue development of Maperitive</li>
<li>There isn&#39;t a very large Maperitive community, partially because of the issues above</li>
<li>Because the sourcecode cannot be viewed by security researchers, it could easily be doing something nasty, like recording all your keystrokes (including the passwords you type) and uploading a log of the websites you visit. The security risks are enormous. See #1 above.</li>
</ol>
<p>One suggestion that I found was to <a href="https://www.fisherck.com/projects/2020/2/23/topographical-push-pin-map">use QGIS instead of Maperitive</a>. If you know of any guides that describe how to use QGIS to generate vector-based topographical maps, then please link to it in the comments or email me.</p>

<p>The reader may be interested in the following guides, as well.</p>
<ul>
<li><a href="https://projects.webvoss.de/2017/06/03/creating-the-perfect-hiking-map-for-germany-and-other-countries/">Creating the “Perfect” Hiking Map for Germany and other Countries</a> by Hauke Voss</li>
<li><a href="https://www.fisherck.com/projects/2020/2/23/topographical-push-pin-map">Topographical Push Pin Map</a> by Christopher Fisher</li>
<li><a href="https://edutechwiki.unige.ch/en/Maperitive_for_laser_cutting_and_3D_printing">Maperitive for laser cutting and 3D printing</a></li>
</ul>
<div itemtype="http://schema.org/Person" itemscope="" itemprop="author"><div><p><img src="https://tech.michaelaltfield.net/wp-content/uploads/sites/5/2019/04/100x100xavatar_square_150.jpg.pagespeed.ic.lvLST4AWRQ.jpg" width="100" height="100" alt="headshot of Michael Altfield" itemprop="image"/></p><div><div itemprop="description"><p>Hi, I’m Michael Altfield. I write articles about opsec, privacy, and devops <a href="https://michaelaltfield.net/biography/">➡</a></p>
<p><a href="https://michaelaltfield.net/biography/">About Michael</a></p>
</div></div></div></div></div></div>
  </body>
</html>
