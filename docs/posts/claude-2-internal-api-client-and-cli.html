<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/Explosion-Scratch/claude-unofficial-api">Original</a>
    <h1>Claude 2 Internal API Client and CLI</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<details open="">
  <summary>
    <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true">
    <path d="M16 3.75v8.5a.75.75 0 0 1-1.136.643L11 10.575v.675A1.75 1.75 0 0 1 9.25 13h-7.5A1.75 1.75 0 0 1 0 11.25v-6.5C0 3.784.784 3 1.75 3h7.5c.966 0 1.75.784 1.75 1.75v.675l3.864-2.318A.75.75 0 0 1 16 3.75Zm-6.5 1a.25.25 0 0 0-.25-.25h-7.5a.25.25 0 0 0-.25.25v6.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-6.5ZM11 8.825l3.5 2.1v-5.85l-3.5 2.1Z"></path>
</svg>
    <span aria-label="Video description demo_sped.mp4">demo_sped.mp4</span>
    <span></span>
  </summary>

  <video src="https://user-images.githubusercontent.com/61319150/253622962-6c3f706d-bddf-42e6-9745-aa1f7561ca40.mp4" data-canonical-src="https://user-images.githubusercontent.com/61319150/253622962-6c3f706d-bddf-42e6-9745-aa1f7561ca40.mp4" controls="controls" muted="muted">

  </video>
</details>

<p dir="auto">This is a lightweight JavaScript library for interacting with the <a href="https://www.claude.ai/" rel="nofollow">Claude AI</a> chatbot&#39;s unofficial internal API.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-features" aria-hidden="true" href="#features"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Features</h2>
<ul dir="auto">
<li><g-emoji alias="speech_balloon" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4ac.png">ðŸ’¬</g-emoji> Start new conversations</li>
<li><g-emoji alias="paperclip" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4ce.png">ðŸ“Ž</g-emoji> Upload files</li>
<li><g-emoji alias="earth_americas" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f30e.png">ðŸŒŽ</g-emoji> Isomorphic (supposing you setup a proxy, cors make me sad)</li>
<li><g-emoji alias="arrows_counterclockwise" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f504.png">ðŸ”„</g-emoji> Async/await ready with modern syntax</li>
<li><g-emoji alias="floppy_disk" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4be.png">ðŸ’¾</g-emoji> Get and respond to existing conversations</li>
<li><g-emoji alias="rocket" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f680.png">ðŸš€</g-emoji> Upcoming: Retrying responses, <a href="https://arxiv.org/abs/2303.11366" rel="nofollow">Reflexion</a> implementation <del>deleting chats, proxy support</del></li>
<li><g-emoji alias="muscle" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4aa.png">ðŸ’ª</g-emoji> Supports all claude models (<code>claude-2</code>, <code>claude-1.3</code>, <code>claude-instant-100k</code> - See <code>--model</code> flag)</li>
</ul>
<h2 tabindex="-1" dir="auto"><a id="user-content-installation" aria-hidden="true" href="#installation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Installation</h2>

<h2 tabindex="-1" dir="auto"><a id="user-content-cli-installation" aria-hidden="true" href="#cli-installation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>CLI installation</h2>
<div data-snippet-clipboard-copy-content="npm install -g claude-cli"><pre><code>npm install -g claude-cli
</code></pre></div>
<blockquote>
<p dir="auto"><span><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</span>
Run <code>claude --help</code> for more info about the CLI</p>
</blockquote>
<h2 tabindex="-1" dir="auto"><a id="user-content-usage" aria-hidden="true" href="#usage"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Usage</h2>
<p dir="auto">First, import the library:</p>
<div dir="auto" data-snippet-clipboard-copy-content="const Claude = require(&#39;claude-ai&#39;); "><pre><span>const</span> <span>Claude</span> <span>=</span> <span>require</span><span>(</span><span>&#39;claude-ai&#39;</span><span>)</span><span>;</span> </pre></div>
<p dir="auto">Initialize a new Claude instance with your session key:</p>
<blockquote>
<p dir="auto"><span><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</span>
Get <code>sessionKey</code> from the <code>sessionKey</code> cookie via the Claude website.</p>
</blockquote>
<div dir="auto" data-snippet-clipboard-copy-content="const claude = new Claude({
  sessionKey: &#39;YOUR_SESSION_KEY&#39; 
});"><pre><span>const</span> <span>claude</span> <span>=</span> <span>new</span> <span>Claude</span><span>(</span><span>{</span>
  <span>sessionKey</span>: <span>&#39;YOUR_SESSION_KEY&#39;</span> 
<span>}</span><span>)</span><span>;</span></pre></div>
<p dir="auto">Start a conversation by calling <code>startConversation()</code> with a prompt message (or get existing conversations via <code>.getConversations()</code>):</p>
<div dir="auto" data-snippet-clipboard-copy-content="const conversation = await claude.startConversation(&#39;Hello Claude!&#39;);"><pre><span>const</span> <span>conversation</span> <span>=</span> <span>await</span> <span>claude</span><span>.</span><span>startConversation</span><span>(</span><span>&#39;Hello Claude!&#39;</span><span>)</span><span>;</span></pre></div>
<p dir="auto">The <code>Conversation</code> instance exposes methods like <code>sendMessage()</code> to continue the chat:</p>
<div dir="auto" data-snippet-clipboard-copy-content="await conversation.sendMessage(&#39;How are you today?&#39;);"><pre><span>await</span> <span>conversation</span><span>.</span><span>sendMessage</span><span>(</span><span>&#39;How are you today?&#39;</span><span>)</span><span>;</span></pre></div>
<p dir="auto">The full code would look like:</p>
<div dir="auto" data-snippet-clipboard-copy-content="const Claude = require(&#39;claude-ai&#39;);

const claude = new Claude({
  sessionKey: &#39;YOUR_SESSION_KEY&#39;
});

const conversation = await claude.startConversation(&#39;Hello Claude!&#39;);

await conversation.sendMessage(&#39;How are you today?&#39;);"><pre><span>const</span> <span>Claude</span> <span>=</span> <span>require</span><span>(</span><span>&#39;claude-ai&#39;</span><span>)</span><span>;</span>

<span>const</span> <span>claude</span> <span>=</span> <span>new</span> <span>Claude</span><span>(</span><span>{</span>
  <span>sessionKey</span>: <span>&#39;YOUR_SESSION_KEY&#39;</span>
<span>}</span><span>)</span><span>;</span>

<span>const</span> <span>conversation</span> <span>=</span> <span>await</span> <span>claude</span><span>.</span><span>startConversation</span><span>(</span><span>&#39;Hello Claude!&#39;</span><span>)</span><span>;</span>

<span>await</span> <span>conversation</span><span>.</span><span>sendMessage</span><span>(</span><span>&#39;How are you today?&#39;</span><span>)</span><span>;</span></pre></div>
<p dir="auto">See the <a href="#documentation">documentation</a> below for the full API reference.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-documentation" aria-hidden="true" href="#documentation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Documentation</h2>
<h3 tabindex="-1" dir="auto"><a id="user-content-claude" aria-hidden="true" href="#claude"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a><code>Claude</code></h3>
<p dir="auto">The main class for interfacing with the Claude API.</p>
<p dir="auto"><strong>Constructor:</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="const claude_instance = new Claude({
  sessionKey: string,
  proxy: string | ({endpoint, options}) =&gt; ({endpoint, options})
})"><pre><span>const</span> <span>claude_instance</span> <span>=</span> <span>new</span> <span>Claude</span><span>(</span><span>{</span>
  <span>sessionKey</span>: <span>string</span><span>,</span>
  <span>proxy</span>: <span>string</span> <span>|</span> <span>(</span><span>{</span>endpoint<span>,</span> options<span>}</span><span>)</span> <span>=&gt;</span> <span>(</span><span>{</span>endpoint<span>,</span> options<span>}</span><span>)</span>
<span>}</span><span>)</span></pre></div>
<ul dir="auto">
<li>If proxy is a function it will be passed the API route to fetch as well as the fetch options which can then be manipulated before running through fetch. If you&#39;re feeling adventurous you could also just modify the <code>claude.request</code> functionnn (see source for more info)</li>
<li>If <code>proxy</code> is a string, it will simply be prepended before the API endpoint, example: <code>https://claude.ai/</code></li>
</ul>
<p dir="auto"><strong>Parameters:</strong></p>
<ul dir="auto">
<li><code>sessionKey</code> - Your Claude <code>sessionKey</code> cookie</li>
</ul>
<p dir="auto"><strong>Methods (on an instance):</strong></p>
<ul dir="auto">
<li><code>startConversation(prompt)</code> - Starts a new conversation with the given prompt message</li>
<li><code>getConversations()</code> - Gets recent conversations</li>
<li><code>clearConversations()</code> - Clear all conversations</li>
<li><code>uploadFile(file)</code> - Uploads a file</li>
</ul>
<h3 tabindex="-1" dir="auto"><a id="user-content-conversation" aria-hidden="true" href="#conversation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a><code>Conversation</code></h3>
<p dir="auto">Returned by <code>Claude.startConversation()</code>.</p>
<p dir="auto"><strong>Methods:</strong></p>
<ul dir="auto">
<li><code>sendMessage(message, options)</code> - Sends a followup message in the conversation</li>
<li><code>getInfo()</code> - Gets the conversation (includes messages, name, created_at, update_at, etc)</li>
<li><code>delete()</code> - Delete the conversation (returns fetch response)</li>
</ul>
<p dir="auto"><strong>SendMessage Options:</strong></p>
<ul dir="auto">
<li><code>timezone</code> - The timezone for completion</li>
<li><code>attachments</code> - Array of file attachments</li>
<li><code>model</code> - The Claude model to use (default: <code>claude-2</code>, other models that I know of include <code>claude-1.3</code>, and <code>claude-instant-100k</code>. Seems to also accept <code>claude-1</code> but transform it to <code>claude-1.3</code>)</li>
<li><code>done</code> - Callback when completed</li>
<li><code>progress</code> - Progress callback</li>
</ul>
<h2 tabindex="-1" dir="auto"><a id="user-content-contributing" aria-hidden="true" href="#contributing"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Contributing</h2>
<p dir="auto">Contributions welcome! This library was created by @Explosion-Scratch on GitHub. Please submit PRs to help improve it.</p>
</article>
          </div></div>
  </body>
</html>
