<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://zakhary.dev/blog/gbc-web-button">Original</a>
    <h1>GBC Boot Animation 88×31 Web Button</h1>
    
    <div id="readability-page-1" class="page"><article> <header>    </header> <hr/> <section> <p>Like many other 90s styles coming back in fashion, I’ve been seeing those retro
<a href="https://indieweb.org/88x31" rel="nofollow" target="_blank">88x31</a> web buttons on more personal websites these days. What a throwback.
Naturally, I scoured the internet to find buttons to add to my footer (see
below). Since I couldn’t find a Game Boy one that I liked, obviously I had to
make my own.</p>
<p>There’s only one problem: I’m not patient (read: talented) enough to make the
art myself.</p>
<h2 id="the-concept"><a rel="nofollow" href="#the-concept">The Concept</a></h2>
<p>My idea was to use the boot animation from the Game Boy Color placed inside the
traditional grey frame. Something like this:</p>
<figure>
  <img src="https://blog.veitheller.de/img/usr/8304eeab.png" alt="Mock-up of the web button"/>
  <figcaption>
    A rough mock-up of the web button.
  </figcaption>
</figure>
<p>Not too complicated, right? So you’d think.</p>
<h2 id="animating"><a rel="nofollow" href="#animating">Animating</a></h2>
<p>First, we’ve got to find a way to export the animation from boot ROM. The
easiest way I could think of to do that was to play it in an emulator and
save screenshots of each frame individually. Well, in order to do that we need a
way to stop the emulator at each frame. Thankfully, the emulator I used has
breakpoints.</p>
<p>So, where should those breakpoints go? Time for a quick crash course:</p>
<p>The animation is programmed into the Game Boy’s boot ROM in GBZ80 assembly. This
is proprietary code written by Nintendo that powers up the system and validates
the cartridge before handing off execution to the game. Thankfully, some smart
people have done the hard work of (1) dumping, (2) disassembling, and (3)
labelling the <a href="https://gist.github.com/drhelius/6063265" rel="nofollow" target="_blank">boot ROM</a> for us.</p>
<p>For each Game Boy frame, there’s a period of time where the LCD idles before
drawing the next frame. This is called <a href="https://en.wikipedia.org/wiki/Vertical_blanking_interval" rel="nofollow" target="_blank">vblank</a>. Taking a look at the
disassembly, we can see where vblank occurs:</p>
<pre tabindex="0"><code><span><span>; =============== S U B R O U T I N E =======================================</span></span>
<span></span>
<span><span>; Wait until LCD VBlank Interrupt is flagged.</span></span>
<span><span>;</span></span>
<span><span>; Input: None.</span></span>
<span><span>; Output: None.</span></span>
<span></span>
<span><span>Wait_for_next_VBLANK</span><span>:</span></span>
<span><span>    push</span><span>    hl</span></span>
<span><span>    ld  hl, $FF0F</span></span>
<span><span>    res </span><span>0</span><span>, [hl]</span></span>
<span></span>
<span><span>_wait_vblank_loop</span><span>:</span></span>
<span><span>    bit </span><span>0</span><span>, [hl]       </span><span>; wait until hardware sets the vblank flag (bit 0 of FF0F)</span></span>
<span><span>    jr  z, _wait_vblank_loop</span></span>
<span><span>    pop</span><span> hl</span></span>
<span><span>    ret</span></span>
<span><span>; End of function Wait_for_next_VBLANK</span></span></code></pre>
<p>Using the debugger, we can see that this function is called from the following
code:</p>
<pre tabindex="0"><code><span><span>sub_0291</span><span>:</span></span>
<span><span>    call</span><span>    Wait_for_next_VBLANK</span></span>
<span><span>    ; -- snip --</span></span></code></pre>
<p>As we can see from the generated label <code>sub_0291</code>, this block probably lives at
address <code>$0291</code>. Putting a breakpoint here and stepping into the function
reveals the address of <code>Wait_for_next_VBLANK</code> to be <code>$0211</code>. After a quick reset
and setting the breakpoint, we can step through each frame of the animation.</p>
<p>This next part was a bit tedious: I repeatedly <code>continue</code>d the debugger, taking
an emulator screenshot at each frame. Once that was done, I had 175
screenshots at 160x144 saved as PNGs on my desktop. Using some quick ✨
<code>magick</code> ✨, I collected these into a GIF with this command:</p>
<pre tabindex="0"><code><span><span>magick</span><span> -delay</span><span> 1.6742706299</span><span> -loop</span><span> 0</span><span> *</span><span>.png</span><span>(</span><span>n</span><span>) </span><span>animation.gif</span></span></code></pre>
<p>Of note is the delay time, ~0.0167s, and the zsh-ism <code>*.png(n)</code> to sort
the expanded glob.</p>
<p>Anyways, here’s what it looks like:</p>
<figure>
  <img src="https://blog.veitheller.de/img/usr/d3dba7d5.gif" alt="Game Boy Color boot animation"/>
  <figcaption>
    Captured animation from the Game Boy Color boot ROM.
  </figcaption>
</figure>
<h2 id="making-art"><a rel="nofollow" href="#making-art">Making Art</a></h2>
<p>Now that we’ve <del>copied Nintendo’s homework</del> made our Game Boy animation, it’s
time to reshape it into an artistic web button masterpiece.</p>
<h3 id="cropping"><a rel="nofollow" href="#cropping">Cropping</a></h3>
<p>Next up we’ve got to crop the animation to the desired 88x31. Let’s load up the
GIF to see how big the logo is. I used <a href="https://www.aseprite.org" rel="nofollow" target="_blank">Aseprite</a> for this, but really any
application that lets you count pixels in an image will do. Doing this, we see
the “Game Boy” text logo is… 127x22 pixels wide. Hmm. That’s too big to fit
into an 88x31 button, but I guess that makes sense considering the Game Boy
Color’s screen is 160x144 pixels. It’ll have to be scaled down later.</p>
<p>Measuring the logo’s starting location to be <code>(x: 16, y: 48)</code>, we can now crop
away. Cropping a GIF sounds like it should be a lot of work, but it can be
easily accomplished on the CLI with, you guessed it, <code>magick</code>:</p>
<pre tabindex="0"><code><span><span>magick</span><span> animation.gif</span><span> -crop</span><span> 127x22+16+48</span><span> +repage</span><span> cropped.gif</span></span></code></pre>
<figure>
  <img src="https://blog.veitheller.de/img/usr/76e784fc.gif" alt="Animated Game Boy logo"/>
  <figcaption>
    Cropped animation showing the Game Boy logo.
  </figcaption>
</figure>
<h3 id="scaling"><a rel="nofollow" href="#scaling">Scaling</a></h3>
<p>The cropped logo needs to be scaled to fit into 88x31. Say it with me folks.
<code>magick</code>:</p>
<pre tabindex="0"><code><span><span>magick</span><span> cropped.gif</span><span> -resize</span><span> 82x</span><span> scaled.gif</span></span></code></pre>
<p>This scales (resizes) the GIF to be 82 pixels wide while maintaining the aspect
ratio, the result being 82x14. I chose 82 pixels wide specifically since that’ll
allow us to fit for the next stage.</p>
<figure>
  <img src="https://blog.veitheller.de/img/usr/a68bd208.gif" alt="Animated Game Boy logo (downscaled)"/>
  <figcaption>
    Scaled animation showing the (smaller) Game Boy logo.
  </figcaption>
</figure>
<h3 id="framing"><a rel="nofollow" href="#framing">Framing</a></h3>
<p>Several of the 88x31 buttons I found online have a common frame with a
2-pixel-wide border. It looks like this:</p>
<figure>
  <img src="https://blog.veitheller.de/img/usr/1782903c.png" alt="Blank 88x31 template with centre"/>
  <img src="https://blog.veitheller.de/img/usr/93b415d3.png" alt="Empty 88x31 frame without centre"/>
  <figcaption>
    Common 88x31 button frame, with and without the centre.
  </figcaption>
</figure>
<p>To apply this frame to the scaled animation, we’ll need to do the following:</p>
<ol>
<li>Centre the scaled animation into a 88x31 space;</li>
<li>Fill in the newly added space with grey;</li>
<li>Add the border frame on top of the animation.</li>
</ol>
<p>Hopefully you know the drill by now:</p>
<pre tabindex="0"><code><span><span>magick</span><span> scaled.gif</span><span> \</span></span>
<span><span>    -gravity</span><span> center</span><span> -background</span><span> &#34;#C0C0C0&#34;</span><span> -extent</span><span> 88x31</span><span> \</span></span>
<span><span>    -coalesce</span><span> null:</span><span> frame.png</span><span> -layers</span><span> composite</span><span> \</span></span>
<span><span>    framed.gif</span></span></code></pre>
<p>Aaaand we’re done! Let’s take a look at the finished product in all its glory.</p>
<figure>
  <img src="https://blog.veitheller.de/img/usr/5b782a58.gif" alt="Framed web button with white surrounding the logo"/>
  <figcaption>
    Something doesn&#39;t look quite right here.
  </figcaption>
</figure>
<p>Wait, what’s that ugly white square doing there? Oh, right. The animation had a
white background. Gotta fix that I guess.</p>
<h3 id="fixing-that"><a rel="nofollow" href="#fixing-that">Fixing That</a></h3>
<p>This is actually quite straightforward. Removing the white background is easy,
although if we do it with what we currently have there ends up being undesirable
artifacts caused by the prior scaling.</p>
<pre tabindex="0"><code><span><span>magick</span><span> framed.gif</span><span> -fill</span><span> &#34;#C0C0C0&#34;</span><span> -opaque</span><span> &#34;#FFFFFF&#34;</span><span> fixed.gif</span></span></code></pre>
<figure>
  <img src="https://blog.veitheller.de/img/usr/bead6a98.gif" alt="Animation with white background removed that has scaling artifacts"/>
  <figcaption>
    Replacing the white background at this stage doesn&#39;t really work.
  </figcaption>
</figure>
<p>The trick here is to replace the white background before scaling. Here’s also a
really great opportunity to fully show off how powerful ImageMagick’s transform
pipeline can be. Going back to our uncropped animation, we can apply all
previous steps at once like so.</p>
<pre tabindex="0"><code><span><span>magick</span><span> animation.gif</span><span> \</span></span>
<span><span>    -crop</span><span> 127x22+16+48</span><span> +repage</span><span> \ </span><span>        # crop 127x22 logo from animation</span></span>
<span><span>    -fill</span><span> &#34;#C0C0C0&#34;</span><span> -opaque</span><span> &#34;#FFFFFF&#34;</span><span> \ </span><span> # NEW: replace background with grey</span></span>
<span><span>    -resize</span><span> 82x</span><span> \ </span><span>                       # scale animation to 82x14</span></span>
<span><span>    -gravity</span><span> center</span><span> \ </span><span>                   # place logo in centre</span></span>
<span><span>    -background</span><span> &#34;#C0C0C0&#34;</span><span> \ </span><span>             # use grey for added background</span></span>
<span><span>    -extent</span><span> 88x31</span><span> \ </span><span>                     # expand animation to 88x31</span></span>
<span><span>    -coalesce</span><span> null:</span><span> frame.png</span><span> \ </span><span>         # apply frame border</span></span>
<span><span>    -layers</span><span> composite</span><span> \ </span><span>                 # composites each frame</span></span>
<span><span>    fixed.gif</span></span></code></pre>
<p>It’s amazing that we can do all this in a single command! Let’s admire our
finished product.</p>
<figure>
  <img src="https://blog.veitheller.de/img/usr/06a4ef60.gif" alt="Game Boy logo animation with ghosting on fadeout"/>
  <figcaption>
    Did anyone else see that ghost?
  </figcaption>
</figure>
<h2 id="exorcism"><a rel="nofollow" href="#exorcism">Exorcism</a></h2>
<p>As we all know, the final stage of any good art project is excising tormented
apparitions from our glorious creation!</p>
<p>See that shadow of the logo that appears as it fades away? That’s called
ghosting, and is caused by the original animation’s fade going to white instead
of the grey we’ve chosen as our new background colour.</p>
<h3 id="remapping"><a rel="nofollow" href="#remapping">Remapping</a></h3>
<p>Fixing this is going to be a little more tricky than it was for the compression
artifacts above. In order to fix this, we’ll need remap the transition colours
so that the logo’s blue-to-white transition instead fades to grey.</p>
<p>To do this, we’ll first need a way to identify all those transition colours.
Extracting the frames of the animation will allow us to analyze their colours in
a histogram:</p>
<pre tabindex="0"><code><span><span># Extract original animation&#39;s frames</span></span>
<span><span>mkdir</span><span> frames</span></span>
<span><span>magick</span><span> animation.gif</span><span> frames/%03d.png</span></span>
<span></span>
<span><span># Analyze each frame&#39;s colours</span></span>
<span><span>for</span><span> frame</span><span> in</span><span> frames/*</span><span>(</span><span>n</span><span>); </span><span>do</span></span>
<span><span>    echo</span><span> &#34;frame: </span><span>$frame</span><span>&#34;</span></span>
<span><span>    magick</span><span> &#34;</span><span>$frame</span><span>&#34;</span><span> -format</span><span> %c</span><span> histogram:info:</span></span>
<span><span>done</span></span></code></pre>
<p>Running this script will produce a ton of output. Let’s take a look at some
samples near the end.</p>
<pre><code>-- snip --
frame: frames/160.png
           209: (232,232,232) #E8E8E8 grey91
          1560: (232,238,255) #E8EEFF srgb(232,238,255)
         21271: (255,255,255) #FFFFFF white
frame: frames/161.png
           209: (243,243,243) #F3F3F3 srgb(243,243,243)
          1560: (243,246,255) #F3F6FF srgb(243,246,255)
         21271: (255,255,255) #FFFFFF white
frame: frames/162.png
           209: (247,247,247) #F7F7F7 grey97
          1560: (247,249,255) #F7F9FF srgb(247,249,255)
         21271: (255,255,255) #FFFFFF white
frame: frames/163.png
            29: (250,251,255) #FAFBFF srgb(250,251,255)
         23011: (255,255,255) #FFFFFF white
frame: frames/164.png
         23040: (255,255,255) #FFFFFF gray(255)
frame: frames/165.png
         23040: (255,255,255) #FFFFFF gray(255)
frame: frames/166.png
         23040: (255,255,255) #FFFFFF gray(255)
-- snip --
</code></pre>
<p>It’s not immediately obvious what we’re looking for here, but we can see that by
frame 164 there’s only one colour. That corresponds to the whiteout at the end
of the animation. Looking a few frames before, we consistently see 209 frames
helpfully labelled as grey, and 1560 frames in some other colour. Conspicuously,
that other colour only varies in red and green, but remains fully blue.</p>
<figure>
  <img src="https://blog.veitheller.de/img/usr/d3dba7d5.gif" alt="Game Boy Color boot animation"/>
  <figcaption>
    Let&#39;s take another look at that captured animation.
  </figcaption>
</figure>
<p>Matching that up with the animation, those 1560 pixels must be the fading logo.
With a little Unix wizardry we can extract the colour hex codes from this
output to obtain an exact list of the blue-to-white transition colours!</p>
<details>
  <summary>Fade colours (blue to white)</summary>
<pre><code>#006BFF
#066CFF
#0C6DFF
#146FFF
#1C71FF
#2474FF
#2D77FF
#387CFF
#4281FF
#4C86FF
#588DFF
#6494FF
#719CFF
#7DA3FF
#89ABFF
#95B3FF
#A1BBFF
#ACC3FF
#B6CAFF
#C0D1FF
#CAD8FF
#D2DEFF
#DAE4FF
#E1E9FF
#E8EEFF
#F3F6FF
#F7F9FF
#FAFBFF
#FFFFFF
</code></pre>
</details>
<p>From this list, the logo fade transitions from <code>[#006BFF, #FFFFFF)</code>.
Since we’re updating the background colour to <code>#C0C0C0</code>, we’ll need a way to
modify the transition colours to instead fade to that shade of grey.
Functionally, for each colour we (1) compute how far along the transition we
are, then (2) use this value to re-compute an equivalent transition colour in
the desired fade range.</p>
<p>Here’s where I’ll admit my shame: by this point I was getting lazy and didn’t
feel like using my brain to write my own colour interpolation. So I turned to
the AI overlords to do this work for me.</p>
<details>
  <summary>Interpolation script (AI slop)</summary>
<pre tabindex="0"><code><span><span>def</span><span> hex_to_rgb</span><span>(hex):</span></span>
<span><span>    &#34;&#34;&#34;Convert hex string (#RRGGBB) to RGB tuple.&#34;&#34;&#34;</span></span>
<span><span>    return</span><span> tuple</span><span>(</span><span>int</span><span>(</span><span>hex</span><span>.</span><span>lstrip</span><span>(</span><span>&#39;#&#39;</span><span>)[i:i</span><span>+</span><span>2</span><span>], </span><span>16</span><span>) </span><span>for</span><span> i </span><span>in</span><span> (</span><span>0</span><span>, </span><span>2</span><span>, </span><span>4</span><span>))</span></span>
<span></span>
<span><span>def</span><span> rgb_to_hex</span><span>(rgb):</span></span>
<span><span>    &#34;&#34;&#34;Convert RGB tuple to hex string (#RRGGBB).&#34;&#34;&#34;</span></span>
<span><span>    return</span><span> &#34;#</span><span>{</span><span>:02X</span><span>}{</span><span>:02X</span><span>}{</span><span>:02X</span><span>}</span><span>&#34;</span><span>.</span><span>format</span><span>(</span><span>*</span><span>rgb)</span></span>
<span></span>
<span><span>def</span><span> remap_color</span><span>(color,</span><span> start_old,</span><span> end_old,</span><span> start_new,</span><span> end_new):</span></span>
<span><span>    &#34;&#34;&#34;Remap a color from old range to new range.&#34;&#34;&#34;</span></span>
<span><span>    r_old, g_old, b_old </span><span>=</span><span> start_old</span></span>
<span><span>    r_end_old, g_end_old, b_end_old </span><span>=</span><span> end_old</span></span>
<span><span>    r_new_start, g_new_start, b_new_start </span><span>=</span><span> start_new</span></span>
<span><span>    r_new_end, g_new_end, b_new_end </span><span>=</span><span> end_new</span></span>
<span><span>    r, g, b </span><span>=</span><span> color</span></span>
<span></span>
<span><span>    # Compute relative position t in old range</span></span>
<span><span>    t </span><span>=</span><span> (</span></span>
<span><span>        (r </span><span>-</span><span> r_old) </span><span>/</span><span> (r_end_old </span><span>-</span><span> r_old) </span><span>if</span><span> r_end_old </span><span>!=</span><span> r_old </span><span>else</span><span> 0</span></span>
<span><span>    )  </span><span># using red as representative; you could average channels instead</span></span>
<span></span>
<span><span>    # Map to new range</span></span>
<span><span>    r_mapped </span><span>=</span><span> round</span><span>(r_new_start </span><span>+</span><span> t </span><span>*</span><span> (r_new_end </span><span>-</span><span> r_new_start))</span></span>
<span><span>    g_mapped </span><span>=</span><span> round</span><span>(g_new_start </span><span>+</span><span> t </span><span>*</span><span> (g_new_end </span><span>-</span><span> g_new_start))</span></span>
<span><span>    b_mapped </span><span>=</span><span> round</span><span>(b_new_start </span><span>+</span><span> t </span><span>*</span><span> (b_new_end </span><span>-</span><span> b_new_start))</span></span>
<span></span>
<span><span>    # Clamp values between 0-255</span></span>
<span><span>    r_mapped </span><span>=</span><span> min</span><span>(</span><span>max</span><span>(r_mapped, </span><span>0</span><span>), </span><span>255</span><span>)</span></span>
<span><span>    g_mapped </span><span>=</span><span> min</span><span>(</span><span>max</span><span>(g_mapped, </span><span>0</span><span>), </span><span>255</span><span>)</span></span>
<span><span>    b_mapped </span><span>=</span><span> min</span><span>(</span><span>max</span><span>(b_mapped, </span><span>0</span><span>), </span><span>255</span><span>)</span></span>
<span></span>
<span><span>    return</span><span> (r_mapped, g_mapped, b_mapped)</span></span>
<span></span>
<span><span># Define old and new ranges</span></span>
<span><span>start_old </span><span>=</span><span> hex_to_rgb</span><span>(</span><span>&#34;#006BFF&#34;</span><span>)</span></span>
<span><span>end_old   </span><span>=</span><span> hex_to_rgb</span><span>(</span><span>&#34;#FFFFFF&#34;</span><span>)</span></span>
<span></span>
<span><span>start_new </span><span>=</span><span> hex_to_rgb</span><span>(</span><span>&#34;#006BFF&#34;</span><span>)</span></span>
<span><span>end_new   </span><span>=</span><span> hex_to_rgb</span><span>(</span><span>&#34;#C0C0C0&#34;</span><span>)</span></span>
<span></span>
<span><span># Process file</span></span>
<span><span>with</span><span> open</span><span>(</span><span>&#34;color.txt&#34;</span><span>, </span><span>&#34;r&#34;</span><span>) </span><span>as</span><span> f:</span></span>
<span><span>    colors </span><span>=</span><span> [line</span><span>.</span><span>strip</span><span>() </span><span>for</span><span> line </span><span>in</span><span> f </span><span>if</span><span> line</span><span>.</span><span>strip</span><span>()]</span></span>
<span></span>
<span><span>fixed_colors </span><span>=</span><span> []</span></span>
<span><span>for</span><span> hex_color </span><span>in</span><span> colors:</span></span>
<span><span>    rgb </span><span>=</span><span> hex_to_rgb</span><span>(hex_color)</span></span>
<span><span>    new_rgb </span><span>=</span><span> remap_color</span><span>(rgb, start_old, end_old, start_new, end_new)</span></span>
<span><span>    fixed_colors</span><span>.</span><span>append</span><span>(</span><span>rgb_to_hex</span><span>(new_rgb))</span></span>
<span></span>
<span><span># Write output</span></span>
<span><span>with</span><span> open</span><span>(</span><span>&#34;remap.txt&#34;</span><span>, </span><span>&#34;w&#34;</span><span>) </span><span>as</span><span> f:</span></span>
<span><span>    f</span><span>.</span><span>write</span><span>(</span><span>&#34;</span><span>\n</span><span>&#34;</span><span>.</span><span>join</span><span>(fixed_colors))</span></span>
<span></span>
<span><span>print</span><span>(</span><span>&#34;Finished! Fixed colors saved to remap.txt&#34;</span><span>)</span></span></code></pre>
</details>
<p>Looks great, I’m sure it works fine.</p>
<details>
  <summary>Fade colours (blue to grey)</summary>
<pre><code>#006BFF
#056DFE
#096FFC
#0F72FA
#1574F8
#1B77F6
#227AF4
#2A7EF1
#3281EF
#3984EC
#4288E9
#4B8CE6
#5591E3
#5E95E0
#6799DD
#709DDA
#79A1D7
#82A4D5
#89A8D2
#91ABD0
#98AECD
#9EB1CB
#A4B4C9
#A9B6C7
#AFB8C6
#B7BCC3
#BABDC2
#BCBEC1
#C0C0C0
</code></pre>
</details>
<p>Huh. This looks surprisingly correct. Adding in <code>#FFFFFF</code> to the original list
and running again, we see that it does indeed get transformed to <code>#C0C0C0</code>. As
an additional sanity check, here are generated images of the palettes we intend
to swap.</p>
<figure>
  <img src="https://blog.veitheller.de/img/usr/78b8d029.png" alt="Palette from blue to white" width="112"/>
  <img src="https://blog.veitheller.de/img/usr/3d0b4004.png" alt="Palette from blue to grey" width="112"/>
  <figcaption>
    Comparison of original and replacement colour palettes.
  </figcaption>
</figure>
<p>All that’s left is to perform the colour substitution. Admittedly, I was having
some trouble doing this using ImageMagick’s <code>-clut</code>, so I arrived at a much less
elegant solution: use a series of <code>-fill</code>/<code>-opaque</code> to manually replace each
colour. Adding the following to the bottom of the Python script, we can at least
automate writing all that out.</p>
<pre tabindex="0"><code><span><span># Generate ImageMagick command</span></span>
<span><span>cmd </span><span>=</span><span> &#34;&#34;</span></span>
<span><span>for</span><span> old, new </span><span>in</span><span> zip</span><span>(colors, fixed_colors):</span></span>
<span><span>    cmd </span><span>+=</span><span> f</span><span>&#39; -fill &#34;</span><span>{</span><span>new</span><span>}</span><span>&#34; -opaque &#34;</span><span>{</span><span>old</span><span>}</span><span>&#34; </span><span>\\\n</span><span>&#39;</span></span>
<span></span>
<span><span>print</span><span>(</span><span>f</span><span>&#34;Generated ImageMagick replacement:</span><span>\n</span><span>{</span><span>cmd</span><span>}</span><span>&#34;</span><span>)</span></span></code></pre>
<details>
  <summary>Generated replacement options</summary>
<pre><code>-fill &#34;#006BFF&#34; -opaque &#34;#006BFF&#34; \
-fill &#34;#056DFE&#34; -opaque &#34;#066CFF&#34; \
-fill &#34;#096FFC&#34; -opaque &#34;#0C6DFF&#34; \
-fill &#34;#0F72FA&#34; -opaque &#34;#146FFF&#34; \
-fill &#34;#1574F8&#34; -opaque &#34;#1C71FF&#34; \
-fill &#34;#1B77F6&#34; -opaque &#34;#2474FF&#34; \
-fill &#34;#227AF4&#34; -opaque &#34;#2D77FF&#34; \
-fill &#34;#2A7EF1&#34; -opaque &#34;#387CFF&#34; \
-fill &#34;#3281EF&#34; -opaque &#34;#4281FF&#34; \
-fill &#34;#3984EC&#34; -opaque &#34;#4C86FF&#34; \
-fill &#34;#4288E9&#34; -opaque &#34;#588DFF&#34; \
-fill &#34;#4B8CE6&#34; -opaque &#34;#6494FF&#34; \
-fill &#34;#5591E3&#34; -opaque &#34;#719CFF&#34; \
-fill &#34;#5E95E0&#34; -opaque &#34;#7DA3FF&#34; \
-fill &#34;#6799DD&#34; -opaque &#34;#89ABFF&#34; \
-fill &#34;#709DDA&#34; -opaque &#34;#95B3FF&#34; \
-fill &#34;#79A1D7&#34; -opaque &#34;#A1BBFF&#34; \
-fill &#34;#82A4D5&#34; -opaque &#34;#ACC3FF&#34; \
-fill &#34;#89A8D2&#34; -opaque &#34;#B6CAFF&#34; \
-fill &#34;#91ABD0&#34; -opaque &#34;#C0D1FF&#34; \
-fill &#34;#98AECD&#34; -opaque &#34;#CAD8FF&#34; \
-fill &#34;#9EB1CB&#34; -opaque &#34;#D2DEFF&#34; \
-fill &#34;#A4B4C9&#34; -opaque &#34;#DAE4FF&#34; \
-fill &#34;#A9B6C7&#34; -opaque &#34;#E1E9FF&#34; \
-fill &#34;#AFB8C6&#34; -opaque &#34;#E8EEFF&#34; \
-fill &#34;#B7BCC3&#34; -opaque &#34;#F3F6FF&#34; \
-fill &#34;#BABDC2&#34; -opaque &#34;#F7F9FF&#34; \
-fill &#34;#BCBEC1&#34; -opaque &#34;#FAFBFF&#34; \
-fill &#34;#C0C0C0&#34; -opaque &#34;#FFFFFF&#34; \
</code></pre>
</details>
<p>Putting it all together, we obtain a monstrosity that looks like this:</p>
<pre tabindex="0"><code><span><span>magick</span><span> animation.gif</span><span> \</span></span>
<span><span>    -crop</span><span> 127x22+16+48</span><span> +repage</span><span> \ </span><span>        # crop 127x22 logo from animation</span></span>
<span><span>    \</span><span> # remap transition colours from white to grey</span></span>
<span><span>    -fill</span><span> &#34;#006BFF&#34;</span><span> -opaque</span><span> &#34;#006BFF&#34;</span><span> \</span></span>
<span><span>    -fill</span><span> &#34;#056DFE&#34;</span><span> -opaque</span><span> &#34;#066CFF&#34;</span><span> \</span></span>
<span><span>    -fill</span><span> &#34;#096FFC&#34;</span><span> -opaque</span><span> &#34;#0C6DFF&#34;</span><span> \</span></span>
<span><span>    -fill</span><span> &#34;#0F72FA&#34;</span><span> -opaque</span><span> &#34;#146FFF&#34;</span><span> \</span></span>
<span><span>    -fill</span><span> &#34;#1574F8&#34;</span><span> -opaque</span><span> &#34;#1C71FF&#34;</span><span> \</span></span>
<span><span>    -fill</span><span> &#34;#1B77F6&#34;</span><span> -opaque</span><span> &#34;#2474FF&#34;</span><span> \</span></span>
<span><span>    -fill</span><span> &#34;#227AF4&#34;</span><span> -opaque</span><span> &#34;#2D77FF&#34;</span><span> \</span></span>
<span><span>    -fill</span><span> &#34;#2A7EF1&#34;</span><span> -opaque</span><span> &#34;#387CFF&#34;</span><span> \</span></span>
<span><span>    -fill</span><span> &#34;#3281EF&#34;</span><span> -opaque</span><span> &#34;#4281FF&#34;</span><span> \</span></span>
<span><span>    -fill</span><span> &#34;#3984EC&#34;</span><span> -opaque</span><span> &#34;#4C86FF&#34;</span><span> \</span></span>
<span><span>    -fill</span><span> &#34;#4288E9&#34;</span><span> -opaque</span><span> &#34;#588DFF&#34;</span><span> \</span></span>
<span><span>    -fill</span><span> &#34;#4B8CE6&#34;</span><span> -opaque</span><span> &#34;#6494FF&#34;</span><span> \</span></span>
<span><span>    -fill</span><span> &#34;#5591E3&#34;</span><span> -opaque</span><span> &#34;#719CFF&#34;</span><span> \</span></span>
<span><span>    -fill</span><span> &#34;#5E95E0&#34;</span><span> -opaque</span><span> &#34;#7DA3FF&#34;</span><span> \</span></span>
<span><span>    -fill</span><span> &#34;#6799DD&#34;</span><span> -opaque</span><span> &#34;#89ABFF&#34;</span><span> \</span></span>
<span><span>    -fill</span><span> &#34;#709DDA&#34;</span><span> -opaque</span><span> &#34;#95B3FF&#34;</span><span> \</span></span>
<span><span>    -fill</span><span> &#34;#79A1D7&#34;</span><span> -opaque</span><span> &#34;#A1BBFF&#34;</span><span> \</span></span>
<span><span>    -fill</span><span> &#34;#82A4D5&#34;</span><span> -opaque</span><span> &#34;#ACC3FF&#34;</span><span> \</span></span>
<span><span>    -fill</span><span> &#34;#89A8D2&#34;</span><span> -opaque</span><span> &#34;#B6CAFF&#34;</span><span> \</span></span>
<span><span>    -fill</span><span> &#34;#91ABD0&#34;</span><span> -opaque</span><span> &#34;#C0D1FF&#34;</span><span> \</span></span>
<span><span>    -fill</span><span> &#34;#98AECD&#34;</span><span> -opaque</span><span> &#34;#CAD8FF&#34;</span><span> \</span></span>
<span><span>    -fill</span><span> &#34;#9EB1CB&#34;</span><span> -opaque</span><span> &#34;#D2DEFF&#34;</span><span> \</span></span>
<span><span>    -fill</span><span> &#34;#A4B4C9&#34;</span><span> -opaque</span><span> &#34;#DAE4FF&#34;</span><span> \</span></span>
<span><span>    -fill</span><span> &#34;#A9B6C7&#34;</span><span> -opaque</span><span> &#34;#E1E9FF&#34;</span><span> \</span></span>
<span><span>    -fill</span><span> &#34;#AFB8C6&#34;</span><span> -opaque</span><span> &#34;#E8EEFF&#34;</span><span> \</span></span>
<span><span>    -fill</span><span> &#34;#B7BCC3&#34;</span><span> -opaque</span><span> &#34;#F3F6FF&#34;</span><span> \</span></span>
<span><span>    -fill</span><span> &#34;#BABDC2&#34;</span><span> -opaque</span><span> &#34;#F7F9FF&#34;</span><span> \</span></span>
<span><span>    -fill</span><span> &#34;#BCBEC1&#34;</span><span> -opaque</span><span> &#34;#FAFBFF&#34;</span><span> \</span></span>
<span><span>    -fill</span><span> &#34;#C0C0C0&#34;</span><span> -opaque</span><span> &#34;#FFFFFF&#34;</span><span> \ </span><span> # replace background with grey</span></span>
<span><span>    -resize</span><span> 82x</span><span> \ </span><span>                       # scale animation to 82x14</span></span>
<span><span>    -gravity</span><span> center</span><span> \ </span><span>                   # place logo in centre</span></span>
<span><span>    -background</span><span> &#34;#C0C0C0&#34;</span><span> \ </span><span>             # use grey for added background</span></span>
<span><span>    -extent</span><span> 88x31</span><span> \ </span><span>                     # expand animation to 88x31</span></span>
<span><span>    -coalesce</span><span> null:</span><span> frame.png</span><span> \ </span><span>         # apply frame border</span></span>
<span><span>    -layers</span><span> composite</span><span> \ </span><span>                 # composites each frame</span></span>
<span><span>    button.gif</span></span></code></pre>
<h2 id="conclusion"><a rel="nofollow" href="#conclusion">Conclusion</a></h2>
<p>As someone who doesn’t have an artistic bone in my body (doctor’s diagnosis), I
think it turned out pretty great! I learned a lot about ImageMagick throughout
this adventure, and I hope you did too. Please feel free to use this button
however you wish. Attribution is not at all necessary, but is welcome and
appreciated regardless.</p>
<figure>
  <img src="https://blog.veitheller.de/img/usr/abc6e97e.gif" alt="Game Boy Color boot animation web button"/>
  <figcaption>
    Here it is in all its glory!
  </figcaption>
</figure>
<p>Well, I guess all that’s left is this final plea: Nintendo, please don’t sue me.</p>
 </section>  </article></div>
  </body>
</html>
