<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/jcalabro/uscope">Original</a>
    <h1>Show HN: Uscope, a new Linux debugger written from scratch</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a href="https://ci.uscope.dev/repos/1" rel="nofollow"><img src="https://camo.githubusercontent.com/1a18ed67a95c00d763718cbf2d98ff723894ff292cb129c66d8b63e0a15e3040/68747470733a2f2f63692e7573636f70652e6465762f6170692f6261646765732f312f7374617475732e737667" alt="status-badge" data-canonical-src="https://ci.uscope.dev/api/badges/1/status.svg"/></a></p>
<a target="_blank" rel="noopener noreferrer" href="https://private-user-images.githubusercontent.com/8205547/405439211-8ad10ca9-42d1-4afe-8397-74b8a92a69f5.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3Mzg0MTYxMTEsIm5iZiI6MTczODQxNTgxMSwicGF0aCI6Ii84MjA1NTQ3LzQwNTQzOTIxMS04YWQxMGNhOS00MmQxLTRhZmUtODM5Ny03NGI4YTkyYTY5ZjUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MDIwMSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTAyMDFUMTMxNjUxWiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9Yjk2NGZlNDFiMzBjMGRmZDgxZDA3MmFmOWEzYTIzYWFmODg0OGY0NGMzOWJiOTc4ZmYyOGU5OTRlMGRhYzM5MSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.VsUViIry8ligfDR1C8D8rAM2wcRh2N8AvybB765ljpw"><img src="https://private-user-images.githubusercontent.com/8205547/405439211-8ad10ca9-42d1-4afe-8397-74b8a92a69f5.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3Mzg0MTYxMTEsIm5iZiI6MTczODQxNTgxMSwicGF0aCI6Ii84MjA1NTQ3LzQwNTQzOTIxMS04YWQxMGNhOS00MmQxLTRhZmUtODM5Ny03NGI4YTkyYTY5ZjUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MDIwMSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTAyMDFUMTMxNjUxWiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9Yjk2NGZlNDFiMzBjMGRmZDgxZDA3MmFmOWEzYTIzYWFmODg0OGY0NGMzOWJiOTc4ZmYyOGU5OTRlMGRhYzM5MSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.VsUViIry8ligfDR1C8D8rAM2wcRh2N8AvybB765ljpw"/></a>

<p dir="auto">uscope (pronounced &#34;microscope&#34;) is a native code graphical debugger and introspection toolchain for Linux.</p>
<p dir="auto"><a href="https://calabro.io/uscope" rel="nofollow">See here</a> for background and motivation on the project.</p>
<p dir="auto">Join the <a href="https://discord.gg/bPWC6PZPhR" rel="nofollow">Discord</a> if you&#39;re interested in talking debuggers.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Project Status and Roadmap</h3><a id="user-content-project-status-and-roadmap" aria-label="Permalink: Project Status and Roadmap" href="#project-status-and-roadmap"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">uscope is not far enough along to consider using as a daily-driver. It&#39;s a side project I&#39;m working on for fun and because I need a better debugger for my own use.</p>
<p dir="auto">This is a birds-eye overview of the features I&#39;d like implemented before I&#39;d personally be able to completely ditch other &#34;traditional&#34; debuggers. In no particular order:</p>
<ul dir="auto">
<li>Ensure that all table-stakes debugger operations are rock-solid and fast
<ul dir="auto">
<li>Debug symbol parsing</li>
<li>Subordinate process control flow (i.e. stepping)</li>
<li>Basic variable value rendering</li>
<li>Stack unwinding</li>
<li>etc.</li>
</ul>
</li>
<li>Support for visualization of common data types in several languages (preliminary C and Zig support is already underway)
<ul dir="auto">
<li>Adding at least C++ and Go even though they&#39;re very complicated languages since that&#39;s what I use for work</li>
<li>Also planning on supporting at least Rust, Odin, and Jai</li>
<li>In general, we will design a system that handles transforming data in to user-friendly visualization that is flexible, extensible, and not tied to any one language</li>
</ul>
</li>
<li>Support for multi-threaded programs</li>
<li>Debug tests by clicking on them, at least for programs with built-in testing solutions like Zig, Go, etc.</li>
<li>Run to cursor</li>
<li>User-friendly source code navigation (i.e. go to definition, find all references, etc.)</li>
<li>Better config file management
<ul dir="auto">
<li>I don&#39;t want to have to manually edit config files; I want to have the debugger configure them for me via the GUI</li>
</ul>
</li>
</ul>
<p dir="auto">Other long-term features that will be implemented are:</p>
<ul dir="auto">
<li>Build as a library so other people can build other interesting things as well
<ul dir="auto">
<li>The GUI debugger will be the first consumer of that library (in the same way <a href="https://github.com/mitchellh/ghostty">Ghostty</a> is the first consumer of libghostty)</li>
</ul>
</li>
<li>Many more types of domain-specific data visualizations
<ul dir="auto">
<li>For example, I work on chess engines for my day job, and it would be amazing to have a debugger that natively understands my position encoding and automatically visually renders interactive chess boards</li>
</ul>
</li>
<li>Remote debugging</li>
<li>Conditional breakpoints</li>
<li>Data/address breakpoints (i.e. break when an address is accessed or a variable mutated)</li>
<li>Trace points (observe variable values over time without actually pausing the subordinate program)</li>
<li>Load and view core dumps</li>
<li>Assembly viewer</li>
<li>Ability to track and visualize system calls (similar to <a href="https://man7.org/linux/man-pages/man1/strace.1.html" rel="nofollow">strace</a>)</li>
<li>Various <code>/proc</code> views (there&#39;s lots of interesting information in there)</li>
<li>Complete UI/UX revamp
<ul dir="auto">
<li>Dear ImGUI has been decent, but it has its limitations; we&#39;ll probably just end up writing our own if I had to guess</li>
<li>I&#39;m really looking for a fast UI system that allows my users to write interesting visualization plugins for their own needs with minimal effort</li>
</ul>
</li>
<li>macOS and Windows support</li>
<li>What is important to <em>you</em>? Let me know!</li>
</ul>
<p dir="auto">Similarly, the following features are non-goals of the project:</p>
<ul dir="auto">
<li>Supporting non-native languages (i.e. Java, Python, etc.)</li>
</ul>

<p dir="auto">We do not provide pre-built binaries or package manager distributions yet.</p>
<p dir="auto">To build from source, clone the repo and run <code>zig build</code>. Ensure you&#39;re using the exact version of zig specified in <a href="https://github.com/jcalabro/uscope/blob/main/zig_version.txt">zig_version.txt</a>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="git clone git@github.com:jcalabro/uscope.git
cd uscope
zig build -Doptimize=ReleaseSafe -Drelease"><pre>git clone git@github.com:jcalabro/uscope.git
<span>cd</span> uscope
zig build -Doptimize=ReleaseSafe -Drelease</pre></div>
<p dir="auto">You&#39;ll probably want to create a global config file at <code>$XDG_CONFIG_HOME/uscope/config.ini</code> like this (though we&#39;ll create an empty config for you if one does not already exist):</p>
<div dir="auto" data-snippet-clipboard-copy-content="[log]
level=debug
regions=all"><pre><span>[log]</span>
<span>level</span>=debug
<span>regions</span>=all</pre></div>
<p dir="auto">And a you&#39;ll need to create a local, project-specific config file at <code>$(pwd)/.uscope/config.ini</code>, whose only required field is <code>target.path</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="[target]
path=./assets/zigprint/out # required: the path to the binary to debug
# args=...
# stop_on_entry=true
# watch_expressions=...

[sources]
# for convenience, opens this file upon launch and sets breakpoints on lines 33 and 96
open_files=assets/zigprint/main.zig:33:96

# to open multiple files on launch, you could do something like:
# open_files=first.c:1:2, second.c:3:4"><pre><span>[target]</span>
<span>path</span>=./assets/zigprint/out <span><span>#</span> required: the path to the binary to debug</span>
<span><span>#</span> args=...</span>
<span><span>#</span> stop_on_entry=true</span>
<span><span>#</span> watch_expressions=...</span>

<span>[sources]</span>
<span><span>#</span> for convenience, opens this file upon launch and sets breakpoints on lines 33 and 96</span>
<span>open_files</span>=assets/zigprint/main.zig:33:96

<span><span>#</span> to open multiple files on launch, you could do something like:</span>
<span><span>#</span> open_files=first.c:1:2, second.c:3:4</span></pre></div>
<p dir="auto">Then, to create a development build, you can do any of:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# create and run a debug binary
zig build run

# create and run a debug binary with the race detector enabled
zig build run -Drace

# run all tests
zig build test

# run a test by name
zig build test -Dfilter=&#39;compile unit header parse errors&#39;

# run a subset of tests based on a prefix match (i.e. this runs all simulator tests)
zig build test -Dfilter=sim:"><pre><span><span>#</span> create and run a debug binary</span>
zig build run

<span><span>#</span> create and run a debug binary with the race detector enabled</span>
zig build run -Drace

<span><span>#</span> run all tests</span>
zig build <span>test</span>

<span><span>#</span> run a test by name</span>
zig build <span>test</span> -Dfilter=<span><span>&#39;</span>compile unit header parse errors<span>&#39;</span></span>

<span><span>#</span> run a subset of tests based on a prefix match (i.e. this runs all simulator tests)</span>
zig build <span>test</span> -Dfilter=sim:</pre></div>
<p dir="auto">The <code>Primary</code> view is open by defaults, which includes views in to source code, program stdout/stderr, variables, registers, etc. To launch the subordinate, press <code>r</code>, and press <code>k</code> to kill a running subordinate. Click lines of source code to add/remove breakpoints. When you&#39;re stopped at a breakpoint, you can:</p>
<ul dir="auto">
<li><code>c</code>: continue execution</li>
<li><code>k</code>: kill the subprocess</li>
<li><code>w</code>: step out</li>
<li><code>a</code>: single step (one assembly instruction)</li>
<li><code>s</code>: step in</li>
<li><code>d</code>: step next</li>
</ul>
<p dir="auto">To quickly navigate between multiple open source files, press <code>ctrl+j</code> to move one source file to the left (according to the order of tabs), and press <code>ctrl+;</code> to move one to the right. Press <code>ctrl+d</code> to close the open source file. Press <code>ctrl+q</code> in the primary view to quickly exit the debugger.</p>
<p dir="auto">Additionally, we&#39;ve taken a bit of inspiration from the <a href="https://helix-editor.com/" rel="nofollow">Helix editor</a> for menu navigation. Press <code>space</code> to open the view picker, then choose a view to open. Press <code>ctrl+d</code>, <code>ctrl+c</code>, or <code>ctrl+q</code> at any time in any sub-view to go back to the main view.</p>
<p dir="auto">The program outputs a user-friendly log by default to:</p>

<p dir="auto">This repo comes pre-packaged with a bunch of small, simple source programs in various languages in the <code>assets/</code> directory. To build them all, ensure you have all the toolchains you could possibly neeed installed and:</p>

<p dir="auto">The compiler versions used to build all the asset programs in CI are in the <a href="https://github.com/jcalabro/uscope/blob/main/Dockerfile">Dockerfile</a>. You run the tests without docker as demonstrated above, or with docker using:</p>
<div dir="auto" data-snippet-clipboard-copy-content="docker build -t uscope .
docker run --rm -it -v $(pwd):/uscope uscope
cd /uscope/assets
./build.sh
cd ..
zig build test -Drace"><pre>docker build -t uscope <span>.</span>
docker run --rm -it -v <span><span>$(</span>pwd<span>)</span></span>:/uscope uscope
<span>cd</span> /uscope/assets
./build.sh
<span>cd</span> ..
zig build <span>test</span> -Drace</pre></div>

<div dir="auto"><h5 tabindex="-1" dir="auto">1. When will this project be mature enough to use for my day to day work?</h5><a id="user-content-1-when-will-this-project-be-mature-enough-to-use-for-my-day-to-day-work" aria-label="Permalink: 1. When will this project be mature enough to use for my day to day work?" href="#1-when-will-this-project-be-mature-enough-to-use-for-my-day-to-day-work"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Probably a long time (could easily be a year or more). I have a day job, and this is a passion project I work on in my spare time. Check back often for updates!</p>

<p dir="auto">The absolute best thing you can do is reach out and talk debuggers so I know that there is interest in the the project. We have a <a href="https://discord.gg/bPWC6PZPhR" rel="nofollow">Discord</a>, and you can find my email on my personal site. I love hearing from you!</p>
<p dir="auto">Adding features, fixing bugs, and creating tests that move us further along the path towards being able to use this for day-to-day work is also apprecaited! If you&#39;re thinking about tackling a major new feature, I&#39;d recommend reaching out first to make sure we&#39;re on the same page and effort isn&#39;t wasted going in the wrong direciton.</p>
<p dir="auto">You could also consider <a href="https://github.com/sponsors/jcalabro">sponsoring my work</a>. This is a very strong signal to me that I&#39;m focused on things that matter.</p>
<p dir="auto">Additionally, please consider donating to the <a href="https://ziglang.org/zsf/" rel="nofollow">Zig Software Foundation</a>!</p>
<div dir="auto"><h5 tabindex="-1" dir="auto">3. Will you provide pre-built binaries?</h5><a id="user-content-3-will-you-provide-pre-built-binaries" aria-label="Permalink: 3. Will you provide pre-built binaries?" href="#3-will-you-provide-pre-built-binaries"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Once the project is further along, yes, but not now.</p>
<div dir="auto"><h5 tabindex="-1" dir="auto">4. Why are you building a library for debugging, not just a new debugger? And why not just use DAP?</h5><a id="user-content-4-why-are-you-building-a-library-for-debugging-not-just-a-new-debugger-and-why-not-just-use-dap" aria-label="Permalink: 4. Why are you building a library for debugging, not just a new debugger? And why not just use DAP?" href="#4-why-are-you-building-a-library-for-debugging-not-just-a-new-debugger-and-why-not-just-use-dap"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">There are a wide variety of use-cases for an introspection library outside of traditional debuggers (i.e. reverse engineering tools, novel forms of debuggers, etc.). By making this system reusable and nicely packaged, it encourages the entire ecosystem of debugging tools to improve, not just this one project. That being said, we are focusing intently on the traditional debugger first, and then once the core of the system is solid, we will make it more intentionally accessible to other consumers.</p>
<p dir="auto">Regarding <a href="https://microsoft.github.io/debug-adapter-protocol" rel="nofollow">DAP</a>, This toolchain intends to be lower-level and broader in scope than something like DAP would enable. I do not think DAP is very good, but lots of editors out there already speak it, so we&#39;re partially stuck with it. However, by creating an introspection library, we easily create a separate DAP-compatible executable in separate from the native GUI we&#39;re building so that way neither is bloated by the other.</p>
<p dir="auto">In short, building as a library allows us all to build many novel, simple, and focused introspection tools.</p>
</article></div></div>
  </body>
</html>
