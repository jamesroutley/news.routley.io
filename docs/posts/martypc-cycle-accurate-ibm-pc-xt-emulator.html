<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.vogons.org/viewtopic.php?t=94972">Original</a>
    <h1>MartyPC, cycle accurate IBM PC/XT emulator</h1>
    
    <div id="readability-page-1" class="page"><div role="note" aria-label="Poster info">
												
	
	<dl role="associationlist definitionlist" data-hide-below-sxs-post="">
					<p role="presentation">
																	<dt role="associationlistitemkey term">Rank</dt>
				<dd role="associationlistitemvalue definition">Newbie</dd>
																</p>
		
						<p role="presentation">
			<dt role="associationlistitemkey term" data-icon="topic"><span aria-hidden="true" data-icon-slot="" title="Posts"></span><span>Posts</span></dt>
			<dd role="associationlistitemvalue definition">4</dd>
		</p>
	
			<p role="presentation">
			<dt role="associationlistitemkey term" data-icon="show-guests"><span aria-hidden="true" data-icon-slot="" title="Joined"></span><span>Joined</span></dt>
			<dd role="associationlistitemvalue definition">2011-10-21, 14:45</dd>
		</p>
		
										<p role="presentation">
				<dt role="associationlistitemkey term" data-icon="location"><span aria-hidden="true" data-icon-slot="" title="Location"></span><span>Location</span></dt>
				<dd role="associationlistitemvalue definition">Copenhagen, Denmark</dd>
			</p>
							
				
	</dl>

				</div><div>
						
								
	

						
						<div><p>&gt; But I would recommend in general that if you build from source you just drop the executable into the directory structure from a release. I don&#39;t know if i&#39;ll be keeping that &#39;install&#39; directory in the source tree.</p> 

<p>Ok, didn&#39;t know that.</p>

<p>&gt; When you say slow, do you mean moving debug windows around? or the general emulation performance? Can you take a screenshot of the Performance window?</p>

<p>emulation performance.</p>

<p>&gt; What model CPU does it have?</p>

<p>i3-7100U, running at 2.40GHz (power is plugged in and I turned all the power saving off).</p>

<p>&gt;The GPU is not used to emulate the CGA, so what you see on the emulated screen is largely irrelevant. It is used to composite the display buffer with the GUI windows - I&#39;m a bit surprised that this has  turned out to be such a challenge for a lot of PCs.  I might make an SDL front end for lower-spec machines or configurations where a fast GPU isn&#39;t available.</p>

<p>Yes, I found your shader.  Isn&#39;t it just a simple image copy, possibly with a bit of filtering?</p>

<p>&gt; minuszerodegrees says that 131 is the &#39;cassette port wrap-around (loopback) test&#39;, interesting.  Does it boot with Turbo off?</p> 

<p>Nope.  Same error.  I quit the emulator and started it again to be sure.</p>

<p>&gt; I think I will add a Machine Info window that will show which ROM is in use; but in general, it will pick the newest set by release date.  So if you have all three known versions of the 5150 bios in the ROMs folder it will use the October &#39;82  BIOS.</p>

<p>I&#39;d be happy with a println! <span data-version="6.1" data-src="1f600" data-alt="grinning face">ðŸ˜€</span></p>

<p>&gt; In general, I&#39;d recommend emulating a 5160 with the 1986 BIOS unless you have a specific interest in the 5150.  MartyPC will hot-patch the 1986 5160 BIOS to speed up the memory test dramatically, because I got tired of waiting ages for it to boot myself.  I could do this for every BIOS version, but it&#39;s just a matter of finding the right offsets and defining the patches for each ROM.</p>

<p>I wanted to see Arena 5150 -- but I&#39;ll gladly take that speed hack!</p>

<p>I haven&#39;t tried the 5160 emulation yet.</p>

<p>&gt; &#39;Render time&#39; reported by MartyPC isn&#39;t EGUI&#39;s render time, so we can&#39;t compare the two, it&#39;s mainly comprised of three steps: converting the indexed color CGA output to RGBA, scaling it, and optionally converting it for composite monitor simulation.</p>

<p>Oh, I thought it was.</p>

<p>&gt; Your render time is extremely high - mine is well under 1ms.  So you&#39;re bumping up against 16ms frame times, which means you won&#39;t be keeping 60fps.  Can you go to Display menu and uncheck &#39;Correct Aspect Ratio&#39; and tell me what that drops your render time down to?  0.1.2 introduced SIMD-enabled aspect correction, and I&#39;m wondering if you have some CPU incompatibility - if turning off aspect correction drastically improves render time that would be a smoking gun.</p>

<p>Doesn&#39;t seem to make a difference.  I also looked at the GPU% in Task Manager.  It is around 8.7% with or without &#34;Correct Aspect Ratio&#34; when there are no egui windows open and the CPU is running and doing memory test.  I know the 620 is very slow compared to a modern, real graphics card -- but it can do 400 GFLOPS and 24 Gtexels/s.  I have no idea what it spends 8.7% on!</p>

<p>I&#39;ll play with 5160 and hopefully figure out how to use Tracy in the next couple of days.  I&#39;ll get back when I know more.  So far this rust + egui + shader journey has been great fun so I definitely want to continue.</p>

<p><a href="https://github.com/wolfpld/tracy">https://github.com/wolfpld/tracy</a></p>

<p>(I haven&#39;t figured out how to use Vogons&#39; quotes yet -- sorry about that.)</p></div>

						
						

																								
											</div></div>
  </body>
</html>
