<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/openpcc/openpcc">Original</a>
    <h1>Open Source Implementation of Apple&#39;s Private Compute Cloud</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">OpenPCC is an open-source framework for provably private AI inference, inspired by Appleâ€™s Private Cloud Compute but fully open, auditable, and deployable on your own infrastructure. It allows anyone to run open or custom AI models without exposing prompts, outputs, or logs - enforcing privacy with encrypted streaming, hardware attestation, and unlinkable requests.</p>
<p dir="auto">OpenPCC is designed to become a transparent, community-governed standard for AI data privacy.</p>
<p dir="auto">Read the OpenPCC Whitepaper: <a href="https://github.com/openpcc/openpcc/blob/main/whitepaper/openpcc.pdf">https://github.com/openpcc/openpcc/blob/main/whitepaper/openpcc.pdf</a></p>

<p dir="auto">Confident Security is building a fully managed service, called CONFSEC, based on the OpenPCC standard. To learn more and sign up, visit <a href="https://confident.security" rel="nofollow">https://confident.security</a>.</p>

<p dir="auto">This repo contains the code for an OpenPCC compliant go client as well as a c library that is used as the basis of python and javascript clients. In addition, it contains a number of in-memory services that can be used to exercise the client.</p>

<p dir="auto">Refer to <a href="https://github.com/confidentsecurity/confidentcompute">https://github.com/confidentsecurity/confidentcompute</a> for the related compute node implementation that accompanies this repo.</p>

<p dir="auto">see cmd/test-client/main.go for a local dev example. To connect to a prod service, it would look something like this:</p>
<div dir="auto" data-snippet-clipboard-copy-content="import (
    &#34;context&#34;
    &#34;fmt&#34;
    &#34;net/http&#34;
    &#34;os&#34;
    &#34;strings&#34;

    &#34;github.com/openpcc/openpcc&#34;
    &#34;github.com/openpcc/openpcc/inttest&#34;
    &#34;github.com/openpcc/openpcc/transparency&#34;
)

func makePCCRequest() error {
    ctx := context.Background()

    identityPolicy := transparency.IdentityPolicy{
		OIDCSubjectRegex: &#34;^https://github.com/confidentsecurity/T/.github/workflows.*&#34;,
		OIDCIssuerRegex:  &#34;https://token.actions.githubusercontent.com&#34;,
    }

    cfg := openpcc.DefaultConfig()
    cfg.APIURL = &#34;https://app.confident.security&#34;
    cfg.APIKey = &#34;{Your API Key here}&#34;
    cfg.TransparencyVerifier = transparency.DefaultVerifierConfig()
    cfg.TransparencyIdentityPolicy = &amp;identityPolicy

    client, err := openpcc.NewFromConfig(ctx, cfg)
    if err != nil {
        return fmt.Errorf(&#34;failed to create openpcc client: %w&#34;, err)
    }

    // Inference requests use OpenAI API generate format
    body := &#34;{\&#34;model\&#34;:\&#34;qwen3:1.7b\&#34;,\&#34;prompt\&#34;:\&#34;why is the sky blue?\&#34;}&#34;
    // nosemgrep: problem-based-packs.insecure-transport.go-stdlib.http-customized-request.http-customized-request
    req, err := http.NewRequest(&#34;POST&#34;, &#34;http://confsec.invalid/v1/completions&#34;, strings.NewReader(body))
    if err != nil {
        return err
    }
    // add a tag to the request to route request to compute nodes that are running the specified model
    req.Header.Add(&#34;X-Confsec-Node-Tags&#34;, &#34;qwen3:1.7b&#34;)

    resp, err := client.RoundTrip(req)
    if err != nil {
        return err
    }

    return nil
}"><pre><span>import</span> (
    <span>&#34;context&#34;</span>
    <span>&#34;fmt&#34;</span>
    <span>&#34;net/http&#34;</span>
    <span>&#34;os&#34;</span>
    <span>&#34;strings&#34;</span>

    <span>&#34;github.com/openpcc/openpcc&#34;</span>
    <span>&#34;github.com/openpcc/openpcc/inttest&#34;</span>
    <span>&#34;github.com/openpcc/openpcc/transparency&#34;</span>
)

<span>func</span> <span>makePCCRequest</span>() <span>error</span> {
    <span>ctx</span> <span>:=</span> <span>context</span>.<span>Background</span>()

    <span>identityPolicy</span> <span>:=</span> transparency.<span>IdentityPolicy</span>{
		<span>OIDCSubjectRegex</span>: <span>&#34;^https://github.com/confidentsecurity/T/.github/workflows.*&#34;</span>,
		<span>OIDCIssuerRegex</span>:  <span>&#34;https://token.actions.githubusercontent.com&#34;</span>,
    }

    <span>cfg</span> <span>:=</span> <span>openpcc</span>.<span>DefaultConfig</span>()
    <span>cfg</span>.<span>APIURL</span> <span>=</span> <span>&#34;https://app.confident.security&#34;</span>
    <span>cfg</span>.<span>APIKey</span> <span>=</span> <span>&#34;{Your API Key here}&#34;</span>
    <span>cfg</span>.<span>TransparencyVerifier</span> <span>=</span> <span>transparency</span>.<span>DefaultVerifierConfig</span>()
    <span>cfg</span>.<span>TransparencyIdentityPolicy</span> <span>=</span> <span>&amp;</span><span>identityPolicy</span>

    <span>client</span>, <span>err</span> <span>:=</span> <span>openpcc</span>.<span>NewFromConfig</span>(<span>ctx</span>, <span>cfg</span>)
    <span>if</span> <span>err</span> <span>!=</span> <span>nil</span> {
        <span>return</span> <span>fmt</span>.<span>Errorf</span>(<span>&#34;failed to create openpcc client: %w&#34;</span>, <span>err</span>)
    }

    <span>// Inference requests use OpenAI API generate format</span>
    <span>body</span> <span>:=</span> <span>&#34;{<span>\&#34;</span>model<span>\&#34;</span>:<span>\&#34;</span>qwen3:1.7b<span>\&#34;</span>,<span>\&#34;</span>prompt<span>\&#34;</span>:<span>\&#34;</span>why is the sky blue?<span>\&#34;</span>}&#34;</span>
    <span>// nosemgrep: problem-based-packs.insecure-transport.go-stdlib.http-customized-request.http-customized-request</span>
    <span>req</span>, <span>err</span> <span>:=</span> <span>http</span>.<span>NewRequest</span>(<span>&#34;POST&#34;</span>, <span>&#34;http://confsec.invalid/v1/completions&#34;</span>, <span>strings</span>.<span>NewReader</span>(<span>body</span>))
    <span>if</span> <span>err</span> <span>!=</span> <span>nil</span> {
        <span>return</span> <span>err</span>
    }
    <span>// add a tag to the request to route request to compute nodes that are running the specified model</span>
    <span>req</span>.<span>Header</span>.<span>Add</span>(<span>&#34;X-Confsec-Node-Tags&#34;</span>, <span>&#34;qwen3:1.7b&#34;</span>)

    <span>resp</span>, <span>err</span> <span>:=</span> <span>client</span>.<span>RoundTrip</span>(<span>req</span>)
    <span>if</span> <span>err</span> <span>!=</span> <span>nil</span> {
        <span>return</span> <span>err</span>
    }

    <span>return</span> <span>nil</span>
}</pre></div>

<p dir="auto">Dev commands are run using the go tool <a href="https://magefile.org" rel="nofollow"><code>mage</code></a></p>
<p dir="auto">you can run it just from the go.mod tool install with <code>go tool mage [cmd]</code>, or you can install mage itself to save the key presses: <code>go install github.com/magefile/mage@latest</code></p>
<p dir="auto"><code>mage</code> will print a list of commands (see /magefiles/* for the source of the commands)</p>
<p dir="auto">To exercise the library in development, use <code>mage runMemServices</code> to run all the in-memory OpenPCC services. Then use <code>mage runClient</code> to make a test request into the system.</p>
</article></div></div>
  </body>
</html>
