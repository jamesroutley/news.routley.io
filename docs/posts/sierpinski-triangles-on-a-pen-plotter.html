<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.scd31.com/posts/sierpinski-triangle">Original</a>
    <h1>Sierpinski Triangles on a Pen Plotter</h1>
    
    <div id="readability-page-1" class="page"><div><section><p><a href="https://www.scd31.com/img/sierpinski.jpg"><img src="https://www.scd31.com/thumb/sierpinski.jpg"/></a></p><p>There&#39;s a pretty cool algorithm for drawing Sierpinski triangles. Wikipedia calls it the <a href="https://en.wikipedia.org/wiki/Sierpi%C5%84ski_triangle#Chaos_game">Chaos Game</a>. I&#39;ll explain how the algorithm works below:</p><ol><li><p>Your triangle consists of 3 points: <code>p1</code>, <code>p2</code>, and <code>p3</code>.</p></li><li><p>Choose a random current point. For simplicity you can just hardcode this.</p></li><li><p>Draw a dot at that point</p></li><li><p>Choose a random triangle point (<code>p1</code>, <code>p2</code>, or <code>p3</code>)</p></li><li><p>Find the point in the middle of your current point and your random triangle point.</p></li><li><p>This is now your new current point.</p></li><li><p>Go to step 3</p></li></ol><p>This is a pretty simple algorithm, and you&#39;d probably expect it to just fill the triangle with random points. Amazingly, what you get instead is a Sierpinkski triangle!</p><p>I&#39;ve written this algorithm before, but I&#39;ve only ever drawn to an image. I thought it would be fun to control a pen plotter instead.</p><p>The pen plotter I have access to is an HP7440A. It takes ASCII commands over serial, meaning it&#39;s super easy to control. In fact, the hardest part was getting the pen into the plotter, but that was purely due to me having no idea what I&#39;m doing. Next time will be easier!</p><p>The code lives <a href="https://gitlab.scd31.com/stephen/sierpinski-plotter">here</a>. It&#39;s pretty simple - generate the random points, and for each one, move the pen to the correct position, move it down and up, and repeat. There&#39;s a bit of initialization logic (initialize the plotter, select the correct pen, and set the velocity to maximum).</p><p>One extra bit of logic prevents overflowing the pen plotter&#39;s tiny input buffer. This is not a technique of my own, but the idea is to execute the &#34;OA;&#34; command, which doesn&#39;t return until the pen has stopped moving, and then waiting for a carriage return betore continuing execution. There&#39;s probably a smarter way using hardware flow control. I&#39;m used to not using hardware flow control, though, because I only ever solder up my serial cables with TX, RX, and ground.</p><p>Quick blog post - just wanted to show off my cool triangles (:</p></section></div></div>
  </body>
</html>
