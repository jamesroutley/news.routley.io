<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.zulip.com/2021/12/01/zulip-server-4-8-security-release/">Original</a>
    <h1>Zulip Server 4.8 security release</h1>
    
    <div id="readability-page-1" class="page"><div id="site-main">
    <article>

        <header>

            <section>
                <a href="https://blog.zulip.com/tag/release-announcements/">Release announcements</a>
            </section>

            


            <div>
                <section>
                    <ul>
                        <li>
                            <a href="https://maxread.substack.com/author/alex/">
                                <img src="https://www.gravatar.com/avatar/6040af6e26d481c0e5fd4ac2fe4ea460?s=250&amp;d=mm&amp;r=x" alt="Alex Vandiver"/>
                            </a>
                        </li>
                    </ul>
                    <div>
                        
                        <p><time datetime="2021-12-01">Dec 1, 2021</time>
                            <span><span>•</span> 2 min read</span>
                        </p>
                    </div>
                </section>
            </div>

        </header>

        <section>
            <p>We released Zulip Server 4.8 today! This is a security release, containing important security fixes, as well as important cherry-picked bug fixes, since Zulip Server 4.7.</p><h2 id="deprecating-support-for-ubuntu-1804-bionic">Deprecating support for Ubuntu 18.04 Bionic</h2><p>With this release, we are deprecating support for Ubuntu 18.04 Bionic. Specifically, Ubuntu 18.04 will be supported in the rest of the Zulip Server 4.x series, but will not be supported in the upcoming Zulip Server 5.0 release.</p><p>While Ubuntu 18.04 is expected to reach the <a href="https://endoflife.date/ubuntu" rel="noreferrer nofollow noopener">end of standard support in April 2023</a>, packages in its <code>universe</code> package set (including <code>nginx-full</code>, <code>redis-server</code>, and <code>supervisor</code>) are already out of support. Additionally, it only contains support for Python 3.6, which <a href="https://endoflife.date/python" rel="noreferrer nofollow noopener">reaches EOL at the end of 2021</a>.</p><p>We recommend planning to upgrade any Zulip servers you manage which are running on Ubuntu 18.04 over the next few months. See our<a href="https://zulip.readthedocs.io/en/latest/production/upgrade-or-modify.html#upgrading-the-operating-system" rel="noreferrer nofollow noopener"> OS upgrade documentation</a> for how to correctly upgrade a Zulip server.</p><h2 id="notable-changes">Notable changes</h2><!--kg-card-begin: markdown--><ul>
<li>CVE-2021-43791: Zulip could fail to enforce expiration dates on confirmation keys, allowing users to potentially use expired invitations, self-registrations, or realm creation links.</li>
<li>Began installing <a href="https://github.com/stripe/smokescreen">Smokescreen</a> to harden Zulip against <a href="https://owasp.org/www-community/attacks/Server_Side_Request_Forgery">SSRF</a> attacks by default. Zulip has offered Smokescreen as an option since Zulip 4.0. Existing installs which configured an outgoing proxy which is not on <code>localhost:4750</code> will continue to use that; all other installations will begin having a Smokescreen installation listening on 127.0.0.1, which Zulip will proxy traffic through. The version of Smokescreen was also upgraded.</li>
<li>Replaced the <a href="https://github.com/atmos/camo">camo</a> image proxy with <a href="https://github.com/cactus/go-camo">go-camo</a>, a maintained reimplementation that also protects against <a href="https://owasp.org/www-community/attacks/Server_Side_Request_Forgery">SSRF</a> attacks. This server now listens only on 127.0.0.1 when it is deployed as part of a standalone deployment.</li>
<li>Began using camo for images displayed in <a href="https://zulip.com/help/allow-image-link-previews">URL preview</a><a href="https://zulip.com/help/allow-image-link-previews">s</a>. This improves privacy and also resolves an issue where an image link to a third party server with an expired or otherwise invalid SSL certificate would trigger a confusing pop-up window for Zulip Desktop users.</li>
<li>Fixed a bug which could cause Tornado to shut down improperly (causing an immediate full-page reload for their clients) when restarting a heavily loaded Zulip server.</li>
<li>Updated Python dependencies.</li>
<li>Truncated large “remove” mobile notification events so that marking hundreds of private messages or other notifiable messages as read at once won’t exceed Apple’s 4 KB notification size limit.</li>
<li>Slack importer improvements:
<ul>
<li>Ensured that generated fake email addresses for Slack bots are unique.</li>
<li>Added support for importing Slack exports from a directory, not just a .zip file.</li>
<li>Provided better error messages with invalid Slack tokens.</li>
<li>Added support for non-ASCII Unicode folder names on Windows.</li>
</ul>
</li>
<li>Add support for V3 Pagerduty webhook.</li>
<li>Updated documentation for Apache SSO, which now requires additional configuration now that Zulip uses a C extension (the <code>re2</code> module).</li>
<li>Fixed a bug where an empty name in a SAML response would raise an error.</li>
<li>Ensured that <code>deliver_scheduled_emails</code> and <code>deliver_scheduled_messages</code> did not double-deliver if run on multiple servers at once.</li>
<li>Extended Certbot troubleshooting documentation.</li>
<li>Fixed a bug in soft deactivation catch-up code, in cases where a race condition had created multiple subscription deactivation entries for a single user and single stream in the audit log.</li>
<li>Updated translations, including adding a Sinhala translation.</li>
</ul>
<!--kg-card-end: markdown--><h2 id="upgrading"><strong>Upgrading</strong></h2><p>We recommend that all installations upgrade to this new release. See the <a href="https://zulip.readthedocs.io/en/stable/production/upgrade-or-modify.html#upgrading-to-a-release" rel="noreferrer nofollow noopener"><u>upgrade instructions</u></a> in the Zulip documentation. If you need help, best-effort support is available on <u><a href="https://zulip.com/developer-community/">chat.zulip.org</a></u>.</p><p>We love feedback from the Zulip user community. Here are a few ways you can connect:</p><ul><li>Join <u><a href="https://zulip.com/developer-community/">chat.zulip.org</a></u> and provide feedback directly to the development community!</li><li><a href="https://twitter.com/zulip" rel="noreferrer nofollow noopener"><u>Follow us on Twitter</u></a>, or join our <a href="https://groups.google.com/forum/#!forum/zulip-announce" rel="noreferrer nofollow noopener"><u>announcement mailing list</u></a> (or <a href="https://blog.zulip.com/#subscribe" rel="noreferrer nofollow noopener"><u>subscribe to the blog posts</u></a>, which are mostly a subset of the already low-volume mailing list).</li></ul>
        </section>


    </article>
</div></div>
  </body>
</html>
