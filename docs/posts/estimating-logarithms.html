<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://obrhubr.org/logarithm-estimation">Original</a>
    <h1>Estimating Logarithms</h1>
    
    <div id="readability-page-1" class="page"><div>
	<p>While reading through the fantastic book <em><a href="https://www.lostartoflogarithms.com/">The Lost Art of Logarithms</a></em> by <a href="https://www.charlespetzold.com/">Charles Petzold</a> I was nerd-sniped by a <a href="https://www.lostartoflogarithms.com/chapter04/">simple method</a> of estimating the logarithm of any number base 10. According to the book, it was developed by <a href="https://en.wikipedia.org/wiki/John_Napier">John Napier</a> (the father of the logarithm) about 1615.</p>

<blockquote>
  <p>In french the natural logarithm is also called “le logarithm <strong>népérien</strong>” in reference to the mathematician.</p>
</blockquote>

<h2 id="the-method">The Method</h2>

<p>We note that due to the nature of the logarithm (always referring to base 10 from here one out), the logarithm of any number <span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span>N</span></span></span></span> is approximately equal to the number of digits of <span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span>N</span></span></span></span> minus one. This is quite easy to see when thinking about numbers between 100 and 1000 for example:</p>

<span><span><span><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mn>100</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>≤</mo><mi>N</mi><mo>&lt;</mo><mn>1000</mn></mrow></mstyle></mtd><mtd></mtd><mtd></mtd></mtr><mtr><mtd></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext> </mtext><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mn>100</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>≤</mo><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>&lt;</mo><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mn>100</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd></mtd><mtd></mtd></mtr><mtr><mtd></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext> </mtext><mn>2</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>≤</mo><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo><mo>&lt;</mo><mn>3</mn></mrow></mstyle></mtd><mtd></mtd><mtd></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{align} 100 &amp;\leq N &lt; 1000 \\\ \log(100) &amp;\leq \log(N) &lt; \log(100) \\\ 2 &amp;\leq \log(N) &lt; 3  \end{align}</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span><span><span><span><span><span></span><span><span>100</span></span></span><span><span></span><span><span> </span><span>lo<span>g</span></span><span>(</span><span>100</span><span>)</span></span></span><span><span></span><span><span> </span><span>2</span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span><span><span><span><span><span><span></span><span><span></span><span></span><span>≤</span><span></span><span>N</span><span></span><span>&lt;</span><span></span><span>1000</span></span></span><span><span></span><span><span></span><span></span><span>≤</span><span></span><span>lo<span>g</span></span><span>(</span><span>N</span><span>)</span><span></span><span>&lt;</span><span></span><span>lo<span>g</span></span><span>(</span><span>100</span><span>)</span></span></span><span><span></span><span><span></span><span></span><span>≤</span><span></span><span>lo<span>g</span></span><span>(</span><span>N</span><span>)</span><span></span><span>&lt;</span><span></span><span>3</span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span></span><span><span><span><span><span><span></span><span></span></span><span><span></span><span></span></span><span><span></span><span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span></span></span>

<p>This approximation by itself might seem useless at first: knowing that the logarithm of 5 is between 0 and 1 is pointless. But in combination with the following property of logarithms:</p>

<span><span><span><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><msup><mi>a</mi><mi>b</mi></msup><mo stretchy="false">)</mo><mo>=</mo><mi>b</mi><mo>⋅</mo><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\log(a ^ b) = b \cdot \log(a)</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span>lo<span>g</span></span><span>(</span><span><span>a</span><span><span><span><span><span><span></span><span><span>b</span></span></span></span></span></span></span></span><span>)</span><span></span><span>=</span><span></span></span><span><span></span><span>b</span><span></span><span>⋅</span><span></span></span><span><span></span><span>lo<span>g</span></span><span>(</span><span>a</span><span>)</span></span></span></span></span>

<p>We can calculate the logarithm of any number with arbitrary precision using the following this algorithm. We note <span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">#</mi><mi>N</mi></mrow><annotation encoding="application/x-tex">\#N</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span>#</span><span>N</span></span></span></span> as the number of digits of N minus one.</p>

<span><span><span><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>≈</mo><mi mathvariant="normal">#</mi><mi>N</mi></mrow></mstyle></mtd><mtd></mtd><mtd></mtd></mtr><mtr><mtd></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext> </mtext><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><msup><mi>N</mi><mn>10</mn></msup><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>≈</mo><mi mathvariant="normal">#</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>10</mn></msup><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd></mtd><mtd></mtd></mtr><mtr><mtd></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext> </mtext><mn>10</mn><mo>⋅</mo><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>≈</mo><mi mathvariant="normal">#</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>10</mn></msup><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd></mtd><mtd></mtd></mtr><mtr><mtd></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext> </mtext><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>≈</mo><mfrac><mrow><mi mathvariant="normal">#</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>10</mn></msup><mo stretchy="false">)</mo></mrow><mn>10</mn></mfrac></mrow></mstyle></mtd><mtd></mtd><mtd></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{align} \log(N) &amp;\approx \# N \\\ \log(N ^{10}) &amp;\approx \#({N^{10}}) \\\ 10 \cdot \log(N) &amp;\approx \#({N^{10}}) \\\ \log(N) &amp;\approx \frac{\#({N^{10}})}{10} \end{align}</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span><span><span><span><span><span></span><span><span>lo<span>g</span></span><span>(</span><span>N</span><span>)</span></span></span><span><span></span><span><span> </span><span>lo<span>g</span></span><span>(</span><span><span>N</span><span><span><span><span><span><span></span><span><span><span>10</span></span></span></span></span></span></span></span></span><span>)</span></span></span><span><span></span><span><span> </span><span>10</span><span></span><span>⋅</span><span></span><span>lo<span>g</span></span><span>(</span><span>N</span><span>)</span></span></span><span><span></span><span><span> </span><span>lo<span>g</span></span><span>(</span><span>N</span><span>)</span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span><span><span><span><span><span><span></span><span><span></span><span></span><span>≈</span><span></span><span>#</span><span>N</span></span></span><span><span></span><span><span></span><span></span><span>≈</span><span></span><span>#</span><span>(</span><span><span><span>N</span><span><span><span><span><span><span></span><span><span><span>10</span></span></span></span></span></span></span></span></span></span><span>)</span></span></span><span><span></span><span><span></span><span></span><span>≈</span><span></span><span>#</span><span>(</span><span><span><span>N</span><span><span><span><span><span><span></span><span><span><span>10</span></span></span></span></span></span></span></span></span></span><span>)</span></span></span><span><span></span><span><span></span><span></span><span>≈</span><span></span><span><span></span><span><span><span><span><span><span></span><span><span>10</span></span></span><span><span></span><span></span></span><span><span></span><span><span>#</span><span>(</span><span><span><span>N</span><span><span><span><span><span><span></span><span><span><span>10</span></span></span></span></span></span></span></span></span></span><span>)</span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span><span></span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span></span><span><span><span><span><span><span></span><span></span></span><span><span></span><span></span></span><span><span></span><span></span></span><span><span></span><span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span></span></span></span>

<p>Increase the exponent from 100 to 1000 and you’ve added another digit of precision.</p>

<p><a href="https://de.wikipedia.org/wiki/Henry_Briggs">Henry Briggs</a> used this method to compute the logarithms of 2 and 7 to the 14th digit. Calculating <span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mn>1</mn><msup><mn>0</mn><mn>14</mn></msup></mrow></msup></mrow><annotation encoding="application/x-tex">2^{10^{14}}</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span>2</span><span><span><span><span><span><span></span><span><span><span>1</span><span><span>0</span><span><span><span><span><span><span></span><span><span><span>14</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span> must have been quite a task. He probably rounded the values a lot before multiplying, as there is no use to the first few digits at those scales.</p>

<p>Simply exchanging the complexity of calculating the logarithm with an extremely tedious exponentiation isn’t very useful, we are lacking one more insight…</p>

<h2 id="one-more-trick">One more Trick</h2>

<p>Fortunately, between the 17th century and today, mathematicians came up with something that makes this task a lot easier: scientific notation.</p>

<p><span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>5</mn><mn>10</mn></msup><mo>≈</mo><mn>9.8</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mn>6</mn></msup></mrow><annotation encoding="application/x-tex">5^{10} \approx 9.8 \cdot 10^6</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span>5</span><span><span><span><span><span><span></span><span><span><span>10</span></span></span></span></span></span></span></span></span><span></span><span>≈</span><span></span></span><span><span></span><span>9.8</span><span></span><span>⋅</span><span></span></span><span><span></span><span>1</span><span><span>0</span><span><span><span><span><span><span></span><span><span>6</span></span></span></span></span></span></span></span></span></span></span> and <span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>5</mn><mn>20</mn></msup><mo>=</mo><msup><mn>5</mn><mn>10</mn></msup><mo>⋅</mo><msup><mn>5</mn><mn>10</mn></msup></mrow><annotation encoding="application/x-tex">5^{20} = 5^{10} \cdot 5^{10}</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span>5</span><span><span><span><span><span><span></span><span><span><span>20</span></span></span></span></span></span></span></span></span><span></span><span>=</span><span></span></span><span><span></span><span><span>5</span><span><span><span><span><span><span></span><span><span><span>10</span></span></span></span></span></span></span></span></span><span></span><span>⋅</span><span></span></span><span><span></span><span><span>5</span><span><span><span><span><span><span></span><span><span><span>10</span></span></span></span></span></span></span></span></span></span></span></span>. Thus <span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>5</mn><mn>20</mn></msup><mo>≈</mo><mn>9.8</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mn>6</mn></msup><mo>⋅</mo><mn>9.8</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mn>6</mn></msup><mo>≈</mo><mn>9.8</mn><mo>⋅</mo><mn>9.8</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mn>12</mn></msup><mo>≈</mo><mn>9.6</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mn>13</mn></msup></mrow><annotation encoding="application/x-tex">5^{20} \approx 9.8 \cdot 10^6 \cdot 9.8 \cdot 10^6 \approx 9.8 \cdot 9.8 \cdot 10^{12} \approx 9.6 \cdot 10^{13}</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span>5</span><span><span><span><span><span><span></span><span><span><span>20</span></span></span></span></span></span></span></span></span><span></span><span>≈</span><span></span></span><span><span></span><span>9.8</span><span></span><span>⋅</span><span></span></span><span><span></span><span>1</span><span><span>0</span><span><span><span><span><span><span></span><span><span>6</span></span></span></span></span></span></span></span><span></span><span>⋅</span><span></span></span><span><span></span><span>9.8</span><span></span><span>⋅</span><span></span></span><span><span></span><span>1</span><span><span>0</span><span><span><span><span><span><span></span><span><span>6</span></span></span></span></span></span></span></span><span></span><span>≈</span><span></span></span><span><span></span><span>9.8</span><span></span><span>⋅</span><span></span></span><span><span></span><span>9.8</span><span></span><span>⋅</span><span></span></span><span><span></span><span>1</span><span><span>0</span><span><span><span><span><span><span></span><span><span><span>12</span></span></span></span></span></span></span></span></span><span></span><span>≈</span><span></span></span><span><span></span><span>9.6</span><span></span><span>⋅</span><span></span></span><span><span></span><span>1</span><span><span>0</span><span><span><span><span><span><span></span><span><span><span>13</span></span></span></span></span></span></span></span></span></span></span></span>. This was a lot easier to do than what it looked like before converting to scientific notation. And instead of starting from 0 everytime, we can use the results from our previous calculation and simpler additions and multiplications to gain more precision.</p>

<p>Knowing that <span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mn>5</mn><mo stretchy="false">)</mo><mo>≈</mo><mfrac><mrow><mi mathvariant="normal">#</mi><mo stretchy="false">(</mo><mn>9.6</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mn>13</mn></msup><mo stretchy="false">)</mo></mrow><mn>20</mn></mfrac><mo>≈</mo><mfrac><mn>13</mn><mn>20</mn></mfrac><mo>≈</mo><mn>0.65</mn></mrow><annotation encoding="application/x-tex">\log(5) \approx \frac{\#(9.6 \cdot 10^{13})}{20} \approx \frac{13}{20} \approx 0.65</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span>lo<span>g</span></span><span>(</span><span>5</span><span>)</span><span></span><span>≈</span><span></span></span><span><span></span><span><span></span><span><span><span><span><span><span></span><span><span><span>20</span></span></span></span><span><span></span><span></span></span><span><span></span><span><span><span>#</span><span>(</span><span>9.6</span><span>⋅</span><span>1</span><span><span>0</span><span><span><span><span><span><span></span><span><span><span>13</span></span></span></span></span></span></span></span></span><span>)</span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span><span></span></span><span></span><span>≈</span><span></span></span><span><span></span><span><span></span><span><span><span><span><span><span></span><span><span><span>20</span></span></span></span><span><span></span><span></span></span><span><span></span><span><span><span>13</span></span></span></span></span><span>​</span></span><span><span><span></span></span></span></span></span><span></span></span><span></span><span>≈</span><span></span></span><span><span></span><span>0.65</span></span></span></span>, which isn’t too far from the correct <span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.69</mn></mrow><annotation encoding="application/x-tex">0.69</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span>0.69</span></span></span></span>. To increase the exponent to <span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>5</mn><mn>100</mn></msup></mrow><annotation encoding="application/x-tex">5^{100}</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span>5</span><span><span><span><span><span><span></span><span><span><span>100</span></span></span></span></span></span></span></span></span></span></span></span>, which will gain us even more precision, we will use the fact that <span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>5</mn><mn>100</mn></msup><mo>=</mo><msup><mn>5</mn><mrow><mn>1</mn><msup><mn>0</mn><mn>10</mn></msup></mrow></msup><mo>≈</mo><mn>9.</mn><msup><mn>8</mn><mn>10</mn></msup><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><msup><mn>6</mn><mn>10</mn></msup></msup><mo>≈</mo><mn>8.2</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mn>69</mn></msup></mrow><annotation encoding="application/x-tex">5^{100} = 5^{10^{10}} \approx 9.8^{10} \cdot 10^{6^{10}} \approx 8.2 \cdot 10^{69}</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span>5</span><span><span><span><span><span><span></span><span><span><span>100</span></span></span></span></span></span></span></span></span><span></span><span>=</span><span></span></span><span><span></span><span><span>5</span><span><span><span><span><span><span></span><span><span><span>1</span><span><span>0</span><span><span><span><span><span><span></span><span><span><span>10</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span></span><span>≈</span><span></span></span><span><span></span><span>9.</span><span><span>8</span><span><span><span><span><span><span></span><span><span><span>10</span></span></span></span></span></span></span></span></span><span></span><span>⋅</span><span></span></span><span><span></span><span>1</span><span><span>0</span><span><span><span><span><span><span></span><span><span><span><span>6</span><span><span><span><span><span><span></span><span><span><span>10</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span></span><span>≈</span><span></span></span><span><span></span><span>8.2</span><span></span><span>⋅</span><span></span></span><span><span></span><span>1</span><span><span>0</span><span><span><span><span><span><span></span><span><span><span>69</span></span></span></span></span></span></span></span></span></span></span></span>.</p>

<p>By repeating these steps and keeping previous results, we only ever have to multiply the mantissa (always smaller than 10) with itself and the exponent by 2. After only 10 repetitions of exponentiating by 2 (a total of 20 rather trivial multiplications) we’ll have 4 digits of precision.</p>

<h2 id="in-code">In Code</h2>

<p>This is still a lot of work to do by hand and thus I went ahead and wrote a little python script that starts from <span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>N</mi><mn>10</mn></msup></mrow><annotation encoding="application/x-tex">N^{10}</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span>N</span><span><span><span><span><span><span></span><span><span><span>10</span></span></span></span></span></span></span></span></span></span></span></span> and calculates the logarithm up to arbitrary precision.</p>

<div><div><pre><code><span>import</span> <span>math</span>
<span>import</span> <span>decimal</span>
<span>decimal</span><span>.</span><span>getcontext</span><span>().</span><span>prec</span> <span>=</span> <span>100</span>

<span>def</span> <span>get_scientific</span><span>(</span><span>num</span><span>):</span>
    <span>num</span> <span>=</span> <span>decimal</span><span>.</span><span>Decimal</span><span>(</span><span>num</span><span>)</span>
    
    <span># Calculate length of the number in a &#39;naive&#39; way, without using the log
</span>    <span># Using log10 here would kind of defeat the point
</span>    <span># Because the length never exceeds 10, counting them manually is always possible
</span>    <span>length</span> <span>=</span> <span>len</span><span>(</span><span>str</span><span>(</span><span>math</span><span>.</span><span>floor</span><span>(</span><span>num</span><span>)))</span> <span>-</span> <span>1</span>
    <span>mantissa</span> <span>=</span> <span>num</span> <span>/</span> <span>(</span><span>10</span> <span>**</span> <span>length</span><span>)</span>
    
    <span>return</span> <span>mantissa</span><span>,</span> <span>length</span>

<span>def</span> <span>count_digits</span><span>(</span><span>num</span><span>,</span> <span>precision</span><span>:</span> <span>int</span><span>):</span>
    <span>assert</span><span>(</span><span>precision</span> <span>&gt;</span> <span>0</span><span>)</span>
    
    <span>mantissa</span><span>,</span> <span>exponent</span> <span>=</span> <span>get_scientific</span><span>(</span><span>num</span> <span>**</span> <span>10</span><span>)</span>
    
    <span># Apply the trick here by doing the calculation iteratively
</span>    <span>for</span> <span>_</span> <span>in</span> <span>range</span><span>(</span><span>precision</span> <span>-</span> <span>1</span><span>):</span>
        <span># Use the properties of exponents
</span>        <span># (m x 10^exp)^10 = m^10 x 10^(10 * exp)
</span>        <span>mantissa</span> <span>=</span> <span>mantissa</span> <span>**</span> <span>10</span>
        <span>exponent</span> <span>*=</span> <span>10</span>
        
        <span>mantissa</span><span>,</span> <span>new_exponent</span> <span>=</span> <span>get_scientific</span><span>(</span><span>mantissa</span><span>)</span>
        <span># Calculate the contribution of the new mantissa to the exponent and add it
</span>        <span>exponent</span> <span>+=</span> <span>new_exponent</span>

    <span>return</span> <span>exponent</span>
    
<span>def</span> <span>logarithm</span><span>(</span><span>num</span><span>,</span> <span>precision</span><span>):</span>
    <span># Count the number of digits
</span>    <span>n_digits</span> <span>=</span> <span>count_digits</span><span>(</span><span>num</span><span>,</span> <span>precision</span><span>)</span>
    <span># Divide by the exponent
</span>    <span>result</span> <span>=</span> <span>n_digits</span> <span>/</span> <span>decimal</span><span>.</span><span>Decimal</span><span>(</span><span>10</span> <span>**</span> <span>precision</span><span>)</span>
    
    <span>return</span> <span>f</span><span>&#34;</span><span>{</span><span>result</span><span>:</span><span>.</span><span>{</span><span>precision</span><span>}</span><span>f</span><span>}</span><span>&#34;</span>
</code></pre></div></div>

<p>For each additional digit of precision, it calculates <span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>N</mi><msup><mtext>prev</mtext><mn>10</mn></msup></msup></mrow><annotation encoding="application/x-tex">N^{\text{prev}^{10}}</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span>N</span><span><span><span><span><span><span></span><span><span><span><span><span>prev</span></span><span><span><span><span><span><span></span><span><span><span>10</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>, where the scientific form of <span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>N</mi><mtext>prev</mtext></msup></mrow><annotation encoding="application/x-tex">N^{\text{prev}}</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span>N</span><span><span><span><span><span><span></span><span><span><span><span>prev</span></span></span></span></span></span></span></span></span></span></span></span></span> is already known, starting with <span><span><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>N</mi><mn>10</mn></msup></mrow><annotation encoding="application/x-tex">N^{10}</annotation></semantics></math></span><span aria-hidden="true"><span><span></span><span><span>N</span><span><span><span><span><span><span></span><span><span><span>10</span></span></span></span></span></span></span></span></span></span></span></span>. This makes the calculation a matter of exponentiating the mantissa by 10 and multiplying the exponent by 10. <del>Rinse</del> keep the previous results and repeat.</p>

<p>I’m not super happy with the implementation because of the <code>decimal</code> import which could probably be made unnecessary by doing some string manipulations.</p>



<p>I wrote this little post in order to remember this neat little trick better and to maybe expose some people who wouldn’t have read chapter 4 in the book to it. I can only recommend checking out the <a href="https://www.lostartoflogarithms.com/">content straight from the source, online and for free</a>!</p>


</div></div>
  </body>
</html>
