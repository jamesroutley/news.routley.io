<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.ruby-lang.org/en/news/2025/11/17/ruby-4-0-0-preview2-released/">Original</a>
    <h1>Ruby 4.0.0 Preview2 Released</h1>
    
    <div id="readability-page-1" class="page"><div id="content">
    <p>Posted by naruse on 17 Nov 2025</p>

    
<p>We are pleased to announce the release of Ruby 4.0.0-preview2. Ruby 4.0 updates its Unicode version to 17,0.0, and so on.</p>

<h2>Language changes</h2>

<ul>
  <li><code>*nil</code> no longer calls <code>nil.to_a</code>, similar to how <code>**nil</code> does
not call <code>nil.to_hash</code>.  [[Feature #21047]]</li>
</ul>

<h2>Core classes updates</h2>

<p>Note: We’re only listing notable updates of Core class.</p>

<ul>
  <li>
    <p>Binding</p>

    <ul>
      <li><code>Binding#local_variables</code> does no longer include numbered parameters.
Also, <code>Binding#local_variable_get</code> and <code>Binding#local_variable_set</code> reject to handle numbered parameters.
[[Bug #21049]]</li>
    </ul>
  </li>
  <li>
    <p>IO</p>

    <ul>
      <li><code>IO.select</code> accepts +Float::INFINITY+ as a timeout argument.
[[Feature #20610]]</li>
    </ul>
  </li>
  <li>
    <p>String</p>

    <ul>
      <li>Update Unicode to Version 17.0.0 and Emoji Version 17.0. [[Feature #19908]][[Feature #20724]][[Feature #21275]]
  (also applies to Regexp)</li>
    </ul>
  </li>
</ul>

<h2>Standard Library updates</h2>

<p>Note: We’re only listing notable updates of Standard librarires.</p>

<ul>
  <li>ostruct 0.6.1</li>
  <li>pstore 0.2.0</li>
  <li>benchmark 0.4.0</li>
  <li>logger 1.7.0</li>
  <li>rdoc 6.13.1</li>
  <li>win32ole 1.9.2</li>
  <li>irb 1.15.2</li>
  <li>reline 0.6.1</li>
  <li>readline 0.0.4</li>
  <li>fiddle 1.1.6</li>
</ul>

<h2>Compatibility issues</h2>

<p>Note: Excluding feature bug fixes.</p>

<h2>Standard library compatibility issues</h2>

<h2>C API updates</h2>

<h2>JIT</h2>

<ul>
  <li>YJIT
    <ul>
      <li>YJIT stats
        <ul>
          <li><code>ratio_in_yjit</code> no longer works in the default build.
Use <code>--enable-yjit=stats</code> on <code>configure</code> to enable it on <code>--yjit-stats</code>.</li>
          <li>Add <code>invalidate_everything</code> to default stats, which is
incremented when every code is invalidated by TracePoint.</li>
        </ul>
      </li>
      <li>Add <code>mem_size:</code> and <code>call_threshold:</code> options to <code>RubyVM::YJIT.enable</code>.</li>
    </ul>
  </li>
  <li>ZJIT
    <ul>
      <li>Add an experimental method-based JIT compiler.
Use <code>--enable-zjit</code> on <code>configure</code> to enable the <code>--zjit</code> support.</li>
      <li>As of Ruby 4.0.0-preview2, ZJIT is not yet ready for speeding up most benchmarks.
Please refrain from evaluating ZJIT just yet. Stay tuned for the Ruby 4.0 release.</li>
    </ul>
  </li>
  <li>RJIT
    <ul>
      <li><code>--rjit</code> is removed. We will move the implementation of the third-party JIT API
to the <a href="https://github.com/ruby/rjit">ruby/rjit</a> repository.</li>
    </ul>
  </li>
</ul>

<h2>Miscellaneous changes</h2>

<p>See <a href="https://github.com/ruby/ruby/blob/v4_0_0_preview2/NEWS.md">NEWS</a>
or <a href="https://github.com/ruby/ruby/compare/v3_4_0...v4_0_0_preview2">commit logs</a>
for more details.</p>

<p>With those changes, <a href="https://github.com/ruby/ruby/compare/v3_4_0...v4_0_0_preview2#file_bucket">3607 files changed, 197451 insertions(+), 285607 deletions(-)</a>
since Ruby 3.4.0!</p>

<h2>Download</h2>

<ul>
  <li>
    <p><a href="https://cache.ruby-lang.org/pub/ruby/4.0/ruby-4.0.0-preview2.tar.gz">https://cache.ruby-lang.org/pub/ruby/4.0/ruby-4.0.0-preview2.tar.gz</a></p>

    <div><div><pre><code>SIZE: 23444451
SHA1: 132e450bbee3f61ed0b463ed1e2bd3a3a324339c
SHA256: 0a3330dae710302e11f7f0323e83219ab3c6517984691a312c662f329c5120e1
SHA512: b5e681cc84be59148485b9a2212dcf54d61cfee27431ceddb49bedc8baa913ec8b36da43242cb4f1791b25e4bfc1dcf72b5527288a0656f2933da898d0e0b40f
</code></pre></div>    </div>
  </li>
  <li>
    <p><a href="https://cache.ruby-lang.org/pub/ruby/4.0/ruby-4.0.0-preview2.tar.xz">https://cache.ruby-lang.org/pub/ruby/4.0/ruby-4.0.0-preview2.tar.xz</a></p>

    <div><div><pre><code>SIZE: 17554228
SHA1: f8e8b98ea85ac82610ab601a21dc9a90c5c56a97
SHA256: 0b92b15466d77a9d7e59e4a75f050d42cd50fe96c951d2b3b9f8029394cd9a43
SHA512: 7afaa8d8e832ef0ded28f1caf874da69f16105e1b3aad5947c6911364159b4c6ebd3d7ea5d7d86708e9f2f06a047921b8302ca6e75ec429a3da846845f896976
</code></pre></div>    </div>
  </li>
  <li>
    <p><a href="https://cache.ruby-lang.org/pub/ruby/4.0/ruby-4.0.0-preview2.zip">https://cache.ruby-lang.org/pub/ruby/4.0/ruby-4.0.0-preview2.zip</a></p>

    <div><div><pre><code>SIZE: 28933540
SHA1: 48a235cfbfd4252dce81da870c792e32309e62b9
SHA256: f5c68ee44dfcb76b61c07c437fa945814dfc516570b1c921506ac886960160ca
SHA512: 508c685e46a641c74e2968daf650559503ce2bcaac3403654713adb2345c3ede2bace929294a1367afecac5edd6b2c42fa833f5313456f78c79151d310c860cf
</code></pre></div>    </div>
  </li>
</ul>

<h2>What is Ruby</h2>

<p>Ruby was first developed by Matz (Yukihiro Matsumoto) in 1993,
and is now developed as Open Source. It runs on multiple platforms
and is used all over the world especially for web development.</p>

  </div></div>
  </body>
</html>
