<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.home-assistant.io/blog/2023/04/27/year-of-the-voice-chapter-2/">Original</a>
    <h1>Year of the Voice ‚Äì Chapter 2: Let&#39;s talk</h1>
    
    <div id="readability-page-1" class="page"><div>
<div>
<div>
<article>
<header>


</header>
<p>This year is Home Assistant‚Äôs <a href="https://www.home-assistant.io/blog/2022/12/20/year-of-voice/">Year of the Voice</a>. It is our goal for 2023 to let users control Home Assistant in their own language. Today we‚Äôre presenting Chapter 2, our second milestone in building towards this goal.</p>
<p>In <a href="https://www.home-assistant.io/blog/2023/01/26/year-of-the-voice-chapter-1/">Chapter 1</a>, we focused on intents ‚Äì what the user wants to do. Today, the Home Assistant community has translated common smart home commands and responses into <a href="https://home-assistant.github.io/intents/" rel="external nofollow">45 languages</a>, closing in on the 62 languages that Home Assistant supports.</p>
<p>For Chapter 2, we‚Äôve expanded beyond text to now include audio; specifically, turning audio (speech) into text, and text back into speech. With this functionality, <a href="https://www.home-assistant.io/docs/assist/">Home Assistant‚Äôs Assist feature</a> is now able to provide a full voice interface for users to interact with.</p>
<p>A voice assistant also needs hardware, so today we‚Äôre launching ESPHome support for Assist and; to top it off: we‚Äôre launching the World‚Äôs Most Private Voice Assistant. Keep reading to see what that entails.</p>
<p><em>To watch the video presentation of this blog post, including live demos, check <a href="https://youtube.com/live/Tk-pnm7FY7c?feature=share" rel="external nofollow">the recording of our live stream.</a></em></p>

<a name="read-more"></a>
<h2>
<a name="composing-voice-assistants" href="#composing-voice-assistants"></a> Composing Voice Assistants</h2>
<p>The new <a href="https://next.home-assistant.io/integrations/assist_pipeline/">Assist Pipeline integration</a> allows you to configure all components that make up a voice assistant in a single place.</p>
<p>For voice commands, pipelines start with audio. A speech-to-text system determines the words the user speaks, which are then forwarded to a conversation agent. The intent is extracted from the text by the agent and executed by Home Assistant. At this point, ‚Äúturn on the light‚Äù would cause your light to turn on üí°. The last part of the pipeline is text-to-speech, where the agent‚Äôs response is spoken back to you. This may be a simple confirmation (‚ÄúTurned on light‚Äù) or the answer to a question, such as ‚ÄúWhich lights are on?‚Äù</p>
<p>
<img src="https://www.home-assistant.io/images/blog/2023-04-27-year-of-the-voice-chapter-2/assist-config.png"/>
Screenshot of the new Assist configuration in Home Assistant.
</p>
<p>With the new Voice Assistant settings page users can create multiple assistants, mixing and matching voice services. Want a U.S. English assistant that responds with a British accent? No problem. What about a second assistant that listens for Dutch, German, or French voice commands? Or maybe you want to throw ChatGPT in the mix. Create as many assistants as you want, and use them from the <a href="https://www.home-assistant.io/docs/assist/">Assist dialog</a> as well as voice assistant hardware for Home Assistant.</p>
<p>Interacting with many different services means that many different things can go wrong. To help users figure out what went wrong, we‚Äôve built extensive debug tooling for voice assistants into Home Assistant. You can always inspect the last 10 interactions per voice assistant.</p>
<p>
<img src="https://www.home-assistant.io/images/blog/2023-04-27-year-of-the-voice-chapter-2/assist-debug.png"/>
Screenshot of the new Assist debug tool.
</p>
<h2>
<a name="voice-assistant-powered-by-home-assistant-cloud" href="#voice-assistant-powered-by-home-assistant-cloud"></a> Voice Assistant powered by Home Assistant Cloud</h2>
<p>The <a href="https://www.nabucasa.com" rel="external nofollow">Home Assistant Cloud</a> subscription, besides end-to-end encrypted remote connection, includes state of the art speech-to-text and text-to-speech services. This allows your voice assistant to speak 130+ languages (including dialects like Peruvian Spanish) and is extremely fast to respond. Sample:</p>

<p>As a subscriber, you can directly start using voice in Home Assistant. You will not need any extra hardware or software to get started.</p>
<p>In addition to high quality speech-to-text and text-to-speech for your voice assistants, you will also be supporting the development of Home Assistant itself.</p>
<p><a href="https://www.nabucasa.com" rel="external nofollow">Join Home Assistant Cloud today</a></p>
<h2>
<a name="the-fully-local-voice-assistant" href="#the-fully-local-voice-assistant"></a> The fully local voice assistant</h2>
<p>With Home Assistant you can be guaranteed two things: there will be options and one of those options will be local. With our voice assistant that‚Äôs no different.</p>
<h3>
<a name="piper-our-new-model-for-high-quality-local-text-to-speech" href="#piper-our-new-model-for-high-quality-local-text-to-speech"></a> Piper: our new model for high quality local text-to-speech</h3>
<p>To make quality text-to-speech running locally possible, we‚Äôve had to create our own text-to-speech system that is optimized for running on a Raspberry Pi 4. It‚Äôs called Piper.</p>
<img src="https://www.home-assistant.io/images/assist/piper-logo.svg" alt="Piper logo"/>
<p>Piper uses <a href="https://github.com/jaywalnut310/vits/" rel="external nofollow">modern machine learning algorithms</a> for realistic-sounding speech but can still generate audio quickly. On a Raspberry Pi 4, Piper can generate 2 seconds of audio with only 1 second of processing time. More powerful CPUs, such as the Intel Core i5, can generate 17 seconds of audio in the same amount of time. Sample:</p>

<p><em>For more samples, see <a href="https://rhasspy.github.io/piper-samples" rel="external nofollow">the Piper website</a></em></p>
<p>An <a href="https://my.home-assistant.io/redirect/supervisor_addon?addon=core_piper" target="_blank">add-on with Piper</a> is available now for Home Assistant with <a href="https://rhasspy.github.io/piper-samples" rel="external nofollow">over 40 voices across 18 languages</a>, including: Catalan, Danish, German, English, Spanish, Finnish, French, Greek, Italian, Kazakh, Nepali, Dutch, Norwegian, Polish, Brazilian Portuguese, Ukrainian, Vietnamese, and Chinese. Voices for Piper are trained from <a href="http://www.openslr.org/" rel="external nofollow">open audio datasets</a>, many of which come from <a href="https://librivox.org/" rel="external nofollow">free audiobooks read by volunteers</a>. If you‚Äôre interested in contributing your voice, <a href="https://www.home-assistant.io/cdn-cgi/l/email-protection#7d0b12141e183d131c1f081e1c0e1c531e1210">let us know!</a></p>
<h3>
<a name="local-speech-to-text-with-openai-whisper" href="#local-speech-to-text-with-openai-whisper"></a> Local speech-to-text with OpenAI Whisper</h3>
<p><a href="https://github.com/openai/whisper" rel="external nofollow">Whisper</a> is an open source speech-to-text model created by OpenAI that runs locally. Since its release in 2022, Whisper has been improved by the open source community to run on less powerful hardware by projects such as <a href="https://github.com/ggerganov/whisper.cpp" rel="external nofollow">whisper.cpp</a> and <a href="https://github.com/guillaumekln/faster-whisper/" rel="external nofollow">faster-whisper</a>. In less than a year of progress, Whisper is now capable of providing speech-to-text for <a href="https://github.com/openai/whisper#available-models-and-languages" rel="external nofollow">dozens of languages</a> on small servers and single-board computers!</p>
<p>An <a href="https://my.home-assistant.io/redirect/supervisor_addon?addon=core_whisper" target="_blank">add-on using faster-whisper</a> is available now for Home Assistant. On a Raspberry Pi 4, voice commands can take around 7 seconds to process with about 200 MB of RAM used. An Intel Core i5 CPU or better is capable of sub-second response times and can run larger (and more accurate) versions of Whisper.</p>
<h2>
<a name="wyoming-the-voice-assistant-glue" href="#wyoming-the-voice-assistant-glue"></a> Wyoming: the voice assistant glue</h2>
<p>Voice assistants share many common functions, such as speech-to-text, intent-recognition, and text-to-speech. We created the <a href="https://github.com/rhasspy/rhasspy3/blob/master/docs/wyoming.md" rel="external nofollow">Wyoming protocol</a> to provide a small set of standard messages for talking to voice assistant services, including the ability to stream audio.</p>
<p>Wyoming allows developers to focus on the core of a voice service without having to commit to a specific networking stack like HTTP or MQTT. This protocol is compatible with the upcoming <a href="https://github.com/rhasspy/rhasspy3/" rel="external nofollow">version 3.0 of Rhasspy</a>, so both projects can share voice services.</p>
<p>With Wyoming, we‚Äôre trying to kickstart a more interoperable open voice ecosystem that makes sharing components across projects and platforms easy. Developers and scientists wishing to experiment with new voice technologies need only implement a small set of messages to integrate with other voice assistant projects.</p>
<p>The Whisper and Piper add-ons mentioned above are integrated into Home Assistant via the new <a href="https://next.home-assistant.io/integrations/wyoming/">Wyoming integration</a>. Wyoming services can also be run on other machines and still integrate into Home Assistant.</p>
<h2>
<a name="esphome-powered-voice-assistants" href="#esphome-powered-voice-assistants"></a> ESPHome powered voice assistants</h2>
<p><a href="https://esphome.io" rel="external nofollow">ESPHome</a> is our software for microcontrollers. Instead of programming, users define how their sensors are connected in a YAML file. ESPHome will read this file and generate and install software on your microcontroller to make this data accessible in Home Assistant.</p>
<p>Today we‚Äôre launching support for building voice assistants using ESPHome. Connect a microphone to your ESPHome device, and you can control your smart home with your voice. Include a speaker and the smart home will speak back.</p>

<p>We‚Äôve been focusing on the <a href="https://shop.m5stack.com/products/atom-echo-smart-speaker-dev-kit?ref=NabuCasa" rel="external nofollow">M5STACK ATOM Echo</a> for testing and development. For $13 it comes with a microphone and a speaker in a nice little box. We‚Äôve created a tutorial to turn this device into a voice remote directly from your browser!</p>
<p><a href="https://next.home-assistant.io/projects/thirteen-usd-voice-remote/">Tutorial: create a $13 voice remote for Home Assistant.</a></p>
<p><a href="https://esphome.io/components/voice_assistant.html" rel="external nofollow">ESPHome Voice Assistant documentation.</a></p>
<h2>
<a name="worlds-most-private-voice-assistant" href="#worlds-most-private-voice-assistant"></a> World‚Äôs Most Private Voice Assistant</h2>
<p>If you were designing the world‚Äôs most private voice assistant, what features would it have? To start, it should only listen when you‚Äôre ready to talk, rather than all the time. And when it responds, you should be the only one to hear it. This sounds strangely familiar‚Ä¶ü§î</p>
<p>A phone! No, not the featureless rectangle you have in your pocket; an analog phone. These great creatures once ruled the Earth with twisty cords and unique looks to match your style. Analog phones have a familiar interface that‚Äôs hard to beat: pick up the phone to listen/speak and put it down when done.</p>
<p>With Home Assistant‚Äôs new <a href="https://next.home-assistant.io/integrations/voip/">Voice-over-IP integration</a>, you can now use an ‚Äúold school‚Äù phone to control your smart home!</p>

<p>By configuring off-hook autodial, your phone will automatically call Home Assistant when you pick it up. Speak your voice command or question, and listen for the response. The conversation will continue as long as you please: speak more commands/questions, or simply hang up. Assign a unique voice assistant/pipeline to each VoIP adapter, enabling dedicated phones for specific languages.</p>
<p>We‚Äôve focused our initial efforts on supporting <a href="https://amzn.to/40k7mRa" rel="external nofollow">the Grandstream HT801 Voice-over-IP box</a>. It works with any phone with an RJ11 connector, and connects directly to Home Assistant. There is no need for an extra server.</p>
<p><a href="https://next.home-assistant.io/projects/worlds-most-private-voice-assistant/">Tutorial: create your own World‚Äôs Most Private Voice Assistant</a></p>
<p>
<lite-youtube videoid="eLx8_NAqptk" videotitle="World‚Äôs Most Private Voice Assistant meets ChatGPT"></lite-youtube>
Give your voice assistant personality using the OpenAI integration.
</p>
<p><em>Some links on this page are affiliate links and purchases using these links support the Home Assistant project.</em></p>
</article>



</div>

</div>
</div></div>
  </body>
</html>
