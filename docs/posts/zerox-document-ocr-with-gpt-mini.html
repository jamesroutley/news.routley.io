<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/getomni-ai/zerox">Original</a>
    <h1>Show HN: Zerox â€“ Document OCR with GPT-mini</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://loeber.substack.com/getomni-ai/zerox/blob/main/examples/heroImage.png"><img src="https://loeber.substack.com/getomni-ai/zerox/raw/main/examples/heroImage.png" alt="Hero Image"/></a></p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Zerox OCR</h2><a id="user-content-zerox-ocr" aria-label="Permalink: Zerox OCR" href="#zerox-ocr"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">A dead simple way of OCR-ing a document for AI ingestion. Documents are meant to be a visual representation after all. With weird layouts, tables, charts, etc. The vision models just make sense!</p>
<p dir="auto">The general logic:</p>
<ul dir="auto">
<li>Pass in a PDF (URL or file buffer)</li>
<li>Turn the PDF into a series of images</li>
<li>Pass each image to GPT and ask nicely for Markdown</li>
<li>Aggregate the responses and return Markdown</li>
</ul>
<p dir="auto">Sounds pretty basic! But with the <code>gpt-4o-mini</code> this method is price competitive with existing products, with meaningfully better results.</p>
<div dir="auto"><h4 tabindex="-1" dir="auto">Pricing Comparison</h4><a id="user-content-pricing-comparison" aria-label="Permalink: Pricing Comparison" href="#pricing-comparison"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This is how the pricing stacks up to other document processers. Running 1,000 pages with Zerox uses about 25M input tokens and 0.4M output tokens.</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Service</th>
<th>Cost</th>
<th>Accuracy</th>
<th>Table Quality</th>
</tr>
</thead>
<tbody>
<tr>
<td>AWS Textract <a href="https://aws.amazon.com/textract/pricing/#:~:text=Amazon%20Textract%20API%20pricing" rel="nofollow">[1]</a></td>
<td>$1.50 / 1,000 pages</td>
<td>Low</td>
<td>Low</td>
</tr>
<tr>
<td>Google Document AI <a href="https://cloud.google.com/document-ai/pricing" rel="nofollow">[2]</a></td>
<td>$1.50 / 1,000 pages</td>
<td>Low</td>
<td>Low</td>
</tr>
<tr>
<td>Azure Document AI <a href="https://azure.microsoft.com/en-us/pricing/details/ai-document-intelligence/" rel="nofollow">[3]</a></td>
<td>$1.50 / 1,000 pages</td>
<td>Mid</td>
<td>Low</td>
</tr>
<tr>
<td>Unstructured (PDF) <a href="https://unstructured.io/api-key-hosted#:~:text=Cost%20and%20Usage%20%0AGuidelines" rel="nofollow">[4]</a></td>
<td>$10.00 / 1,000 pages</td>
<td>Mid</td>
<td>Mid</td>
</tr>
<tr>
<td>------------------------</td>
<td>--------------------</td>
<td>--------</td>
<td>-------------</td>
</tr>
<tr>
<td>Zerox (gpt-mini)</td>
<td>$ 4.00 / 1,000 pages</td>
<td>High</td>
<td>High</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<div dir="auto"><h2 tabindex="-1" dir="auto">Installation</h2><a id="user-content-installation" aria-label="Permalink: Installation" href="#installation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto" data-snippet-clipboard-copy-content="npm install zerox"><pre>npm install zerox</pre></div>
<p dir="auto">Zerox uses <code>graphicsmagick</code> and <code>ghostscript</code> for the pdf =&gt; image processing step. These should be pulled automatically, but you may need to manually install.</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Usage</h2><a id="user-content-usage" aria-label="Permalink: Usage" href="#usage"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><strong>With file URL</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="import { zerox } from &#34;zerox&#34;;

const result = await zerox({
  filePath: &#34;https://omni-demo-data.s3.amazonaws.com/test/cs101.pdf&#34;,
  openaiAPIKey: process.env.OPENAI_API_KEY,
});"><pre><span>import</span> <span>{</span> <span>zerox</span> <span>}</span> <span>from</span> <span>&#34;zerox&#34;</span><span>;</span>

<span>const</span> <span>result</span> <span>=</span> <span>await</span> <span>zerox</span><span>(</span><span>{</span>
  <span>filePath</span>: <span>&#34;https://omni-demo-data.s3.amazonaws.com/test/cs101.pdf&#34;</span><span>,</span>
  <span>openaiAPIKey</span>: <span>process</span><span>.</span><span>env</span><span>.</span><span>OPENAI_API_KEY</span><span>,</span>
<span>}</span><span>)</span><span>;</span></pre></div>
<p dir="auto"><strong>From local path</strong></p>
<div dir="auto" data-snippet-clipboard-copy-content="import path from &#34;path&#34;;
import { zerox } from &#34;zerox&#34;;

const result = await zerox({
  filePath: path.resolve(__dirname, &#34;./cs101.pdf&#34;),
  openaiAPIKey: process.env.OPENAI_API_KEY,
});"><pre><span>import</span> <span>path</span> <span>from</span> <span>&#34;path&#34;</span><span>;</span>
<span>import</span> <span>{</span> <span>zerox</span> <span>}</span> <span>from</span> <span>&#34;zerox&#34;</span><span>;</span>

<span>const</span> <span>result</span> <span>=</span> <span>await</span> <span>zerox</span><span>(</span><span>{</span>
  <span>filePath</span>: <span>path</span><span>.</span><span>resolve</span><span>(</span><span>__dirname</span><span>,</span> <span>&#34;./cs101.pdf&#34;</span><span>)</span><span>,</span>
  <span>openaiAPIKey</span>: <span>process</span><span>.</span><span>env</span><span>.</span><span>OPENAI_API_KEY</span><span>,</span>
<span>}</span><span>)</span><span>;</span></pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">Options</h3><a id="user-content-options" aria-label="Permalink: Options" href="#options"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto" data-snippet-clipboard-copy-content="const result = await zerox({
  // Required
  filePath: &#34;path/to/file&#34;,
  openaiAPIKey: process.env.OPENAI_API_KEY,

  // Optional
  concurrency: 10, // Number of pages to run at a time.
  maintainFormat: false, // Slower but helps maintain consistent formatting.
  cleanup: true, // Clear images from tmp after run.
  outputDir: undefined, // Save combined result.md to a file
  tempDir: &#34;/os/tmp&#34;, // Directory to use for temporary files (default: system temp directory)
});"><pre><span>const</span> <span>result</span> <span>=</span> <span>await</span> <span>zerox</span><span>(</span><span>{</span>
  <span>// Required</span>
  <span>filePath</span>: <span>&#34;path/to/file&#34;</span><span>,</span>
  <span>openaiAPIKey</span>: <span>process</span><span>.</span><span>env</span><span>.</span><span>OPENAI_API_KEY</span><span>,</span>

  <span>// Optional</span>
  <span>concurrency</span>: <span>10</span><span>,</span> <span>// Number of pages to run at a time.</span>
  <span>maintainFormat</span>: <span>false</span><span>,</span> <span>// Slower but helps maintain consistent formatting.</span>
  <span>cleanup</span>: <span>true</span><span>,</span> <span>// Clear images from tmp after run.</span>
  <span>outputDir</span>: <span>undefined</span><span>,</span> <span>// Save combined result.md to a file</span>
  <span>tempDir</span>: <span>&#34;/os/tmp&#34;</span><span>,</span> <span>// Directory to use for temporary files (default: system temp directory)</span>
<span>}</span><span>)</span><span>;</span></pre></div>
<p dir="auto">The <code>maintainFormat</code> option trys to return the markdown in a consistent format by passing the output of a prior page in as additional context for the next page. This requires the requests to run synchronously, so it&#39;s a lot slower. But valueable if your documents have a lot of tabular data, or frequently have tables that cross pages.</p>
<div data-snippet-clipboard-copy-content="Request #1 =&gt; page_1_image
Request #2 =&gt; page_1_markdown + page_2_image
Request #3 =&gt; page_2_markdown + page_3_image"><pre><code>Request #1 =&gt; page_1_image
Request #2 =&gt; page_1_markdown + page_2_image
Request #3 =&gt; page_2_markdown + page_3_image
</code></pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">Example Output</h3><a id="user-content-example-output" aria-label="Permalink: Example Output" href="#example-output"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto" data-snippet-clipboard-copy-content="{
  completionTime: 10038,
  fileName: &#39;invoice_36258&#39;,
  inputTokens: 25543,
  outputTokens: 210,
  pages: [
    {
      content: &#39;# INVOICE # 36258\n&#39; +
        &#39;**Date:** Mar 06 2012  \n&#39; +
        &#39;**Ship Mode:** First Class  \n&#39; +
        &#39;**Balance Due:** $50.10  \n&#39; +
        &#39;## Bill To:\n&#39; +
        &#39;Aaron Bergman  \n&#39; +
        &#39;98103, Seattle,  \n&#39; +
        &#39;Washington, United States  \n&#39; +
        &#39;## Ship To:\n&#39; +
        &#39;Aaron Bergman  \n&#39; +
        &#39;98103, Seattle,  \n&#39; +
        &#39;Washington, United States  \n&#39; +
        &#39;\n&#39; +
        &#39;| Item                                       | Quantity | Rate   | Amount  |\n&#39; +
        &#39;|--------------------------------------------|----------|--------|---------|\n&#39; +
        &#34;| Global Push Button Manager&#39;s Chair, Indigo | 1        | $48.71 | $48.71  |\n&#34; +
        &#39;| Chairs, Furniture, FUR-CH-4421             |          |        |         |\n&#39; +
        &#39;\n&#39; +
        &#39;**Subtotal:** $48.71  \n&#39; +
        &#39;**Discount (20%):** $9.74  \n&#39; +
        &#39;**Shipping:** $11.13  \n&#39; +
        &#39;**Total:** $50.10  \n&#39; +
        &#39;---\n&#39; +
        &#39;**Notes:**  \n&#39; +
        &#39;Thanks for your business!  \n&#39; +
        &#39;**Terms:**  \n&#39; +
        &#39;Order ID : CA-2012-AB10015140-40974  &#39;,
      page: 1,
      contentLength: 747
    }
  ]
}"><pre><span>{</span>
  <span>completionTime</span>: <span>10038</span><span>,</span>
  <span>fileName</span>: <span>&#39;invoice_36258&#39;</span><span>,</span>
  <span>inputTokens</span>: <span>25543</span><span>,</span>
  <span>outputTokens</span>: <span>210</span><span>,</span>
  <span>pages</span>: <span>[</span>
    <span>{</span>
      <span>content</span>: <span>&#39;# INVOICE # 36258\n&#39;</span> <span>+</span>
        <span>&#39;**Date:** Mar 06 2012  \n&#39;</span> <span>+</span>
        <span>&#39;**Ship Mode:** First Class  \n&#39;</span> <span>+</span>
        <span>&#39;**Balance Due:** $50.10  \n&#39;</span> <span>+</span>
        <span>&#39;## Bill To:\n&#39;</span> <span>+</span>
        <span>&#39;Aaron Bergman  \n&#39;</span> <span>+</span>
        <span>&#39;98103, Seattle,  \n&#39;</span> <span>+</span>
        <span>&#39;Washington, United States  \n&#39;</span> <span>+</span>
        <span>&#39;## Ship To:\n&#39;</span> <span>+</span>
        <span>&#39;Aaron Bergman  \n&#39;</span> <span>+</span>
        <span>&#39;98103, Seattle,  \n&#39;</span> <span>+</span>
        <span>&#39;Washington, United States  \n&#39;</span> <span>+</span>
        <span>&#39;\n&#39;</span> <span>+</span>
        <span>&#39;| Item                                       | Quantity | Rate   | Amount  |\n&#39;</span> <span>+</span>
        <span>&#39;|--------------------------------------------|----------|--------|---------|\n&#39;</span> <span>+</span>
        <span>&#34;| Global Push Button Manager&#39;s Chair, Indigo | 1        | $48.71 | $48.71  |\n&#34;</span> <span>+</span>
        <span>&#39;| Chairs, Furniture, FUR-CH-4421             |          |        |         |\n&#39;</span> <span>+</span>
        <span>&#39;\n&#39;</span> <span>+</span>
        <span>&#39;**Subtotal:** $48.71  \n&#39;</span> <span>+</span>
        <span>&#39;**Discount (20%):** $9.74  \n&#39;</span> <span>+</span>
        <span>&#39;**Shipping:** $11.13  \n&#39;</span> <span>+</span>
        <span>&#39;**Total:** $50.10  \n&#39;</span> <span>+</span>
        <span>&#39;---\n&#39;</span> <span>+</span>
        <span>&#39;**Notes:**  \n&#39;</span> <span>+</span>
        <span>&#39;Thanks for your business!  \n&#39;</span> <span>+</span>
        <span>&#39;**Terms:**  \n&#39;</span> <span>+</span>
        <span>&#39;Order ID : CA-2012-AB10015140-40974  &#39;</span><span>,</span>
      <span>page</span>: <span>1</span><span>,</span>
      <span>contentLength</span>: <span>747</span>
    <span>}</span>
  <span>]</span>
<span>}</span></pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">License</h3><a id="user-content-license" aria-label="Permalink: License" href="#license"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This project is licensed under the MIT License.</p>
</article></div></div>
  </body>
</html>
