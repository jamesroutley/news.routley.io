<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/dehydrated-io/dehydrated">Original</a>
    <h1>Dehydrated: Letsencrypt/acme client implemented as a shell-script</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/dehydrated-io/dehydrated/blob/master/docs/logo.png"><img src="https://github.com/dehydrated-io/dehydrated/raw/master/docs/logo.png" alt=""/></a></p>
<p dir="auto">Dehydrated is a client for signing certificates with an ACME-server (e.g. Let&#39;s Encrypt) implemented as a relatively simple (zsh-compatible) bash-script.
This client supports both ACME v1 and the new ACME v2 including support for wildcard certificates!</p>
<p dir="auto">It uses the <code>openssl</code> utility for everything related to actually handling keys and certificates, so you need to have that installed.</p>
<p dir="auto">Other dependencies are: cURL, sed, grep, awk, mktemp (all found pre-installed on almost any system, cURL being the only exception).</p>
<p dir="auto">Current features:</p>
<ul dir="auto">
<li>Signing of a list of domains (including wildcard domains!)</li>
<li>Signing of a custom CSR (either standalone or completely automated using hooks!)</li>
<li>Renewal if a certificate is about to expire or defined set of domains changed</li>
<li>Certificate revocation</li>
<li>and lots more..</li>
</ul>
<p dir="auto">Please keep in mind that this software, the ACME-protocol and all supported CA servers out there are relatively young and there might be a few issues. Feel free to report any issues you find with this script or contribute by submitting a pull request,
but please check for duplicates first (feel free to comment on those to get things rolling).</p>

<p dir="auto">For getting started I recommend taking a look at <a href="https://github.com/dehydrated-io/dehydrated/blob/master/docs/domains_txt.md">docs/domains_txt.md</a>, <a href="https://github.com/dehydrated-io/dehydrated/blob/master/docs/wellknown.md">docs/wellknown.md</a> and the <a href="#usage">Usage</a> section on this page (you&#39;ll probably only need the <code>-c</code> option).</p>
<p dir="auto">Generally you want to set up your WELLKNOWN path first, and then fill in domains.txt.</p>
<p dir="auto"><strong>Please note that you should use the staging URL when experimenting with this script to not hit Let&#39;s Encrypt&#39;s rate limits.</strong> See <a href="https://github.com/dehydrated-io/dehydrated/blob/master/docs/staging.md">docs/staging.md</a>.</p>
<p dir="auto">If you have any problems take a look at our <a href="https://github.com/dehydrated-io/dehydrated/blob/master/docs/troubleshooting.md">Troubleshooting</a> guide.</p>

<p dir="auto">dehydrated is looking for a config file in a few different places, it will use the first one it can find in this order:</p>
<ul dir="auto">
<li><code>/etc/dehydrated/config</code></li>
<li><code>/usr/local/etc/dehydrated/config</code></li>
<li>The current working directory of your shell</li>
<li>The directory from which dehydrated was run</li>
</ul>
<p dir="auto">Have a look at <a href="https://github.com/dehydrated-io/dehydrated/blob/master/docs/examples/config">docs/examples/config</a> to get started, copy it to e.g. <code>/etc/dehydrated/config</code>
and edit it to fit your needs.</p>

<div data-snippet-clipboard-copy-content="Usage: ./dehydrated [-h] [command [argument]] [parameter [argument]] [parameter [argument]] ...

Default command: help

Commands:
 --version (-v)                   Print version information
 --display-terms                  Display current terms of service
 --register                       Register account key
 --account                        Update account contact information
 --cron (-c)                      Sign/renew non-existent/changed/expiring certificates.
 --signcsr (-s) path/to/csr.pem   Sign a given CSR, output CRT on stdout (advanced usage)
 --revoke (-r) path/to/cert.pem   Revoke specified certificate
 --deactivate                     Deactivate account
 --cleanup (-gc)                  Move unused certificate files to archive directory
 --cleanup-delete (-gcd)          Deletes (!) unused certificate files
 --help (-h)                      Show help text
 --env (-e)                       Output configuration variables for use in other scripts

Parameters:
 --accept-terms                   Accept CAs terms of service
 --full-chain (-fc)               Print full chain when using --signcsr
 --ipv4 (-4)                      Resolve names to IPv4 addresses only
 --ipv6 (-6)                      Resolve names to IPv6 addresses only
 --domain (-d) domain.tld         Use specified domain name(s) instead of domains.txt entry (one certificate!)
 --ca url/preset                  Use specified CA URL or preset
 --alias certalias                Use specified name for certificate directory (and per-certificate config) instead of the primary domain (only used if --domain is specified)
 --keep-going (-g)                Keep going after encountering an error while creating/renewing multiple certificates in cron mode
 --force (-x)                     Force certificate renewal even if it is not due to expire within RENEW_DAYS
 --force-validation               Force revalidation of domain names (used in combination with --force)
 --no-lock (-n)                   Don&#39;t use lockfile (potentially dangerous!)
 --lock-suffix example.com        Suffix lockfile name with a string (useful for with -d)
 --ocsp                           Sets option in CSR indicating OCSP stapling to be mandatory
 --privkey (-p) path/to/key.pem   Use specified private key instead of account key (useful for revocation)
 --domains-txt path/to/domains.txt Use specified domains.txt instead of default/configured one
 --config (-f) path/to/config     Use specified config file
 --hook (-k) path/to/hook.sh      Use specified script for hooks
 --preferred-chain issuer-cn      Use alternative certificate chain identified by issuer CN
 --out (-o) certs/directory       Output certificates into the specified directory
 --alpn alpn-certs/directory      Output alpn verification certificates into the specified directory
 --challenge (-t) http-01|dns-01|tls-alpn-01 Which challenge should be used? Currently http-01, dns-01, and tls-alpn-01 are supported
 --algo (-a) rsa|prime256v1|secp384r1 Which public key algorithm should be used? Supported: rsa, prime256v1 and secp384r1"><pre lang="text"><code>Usage: ./dehydrated [-h] [command [argument]] [parameter [argument]] [parameter [argument]] ...

Default command: help

Commands:
 --version (-v)                   Print version information
 --display-terms                  Display current terms of service
 --register                       Register account key
 --account                        Update account contact information
 --cron (-c)                      Sign/renew non-existent/changed/expiring certificates.
 --signcsr (-s) path/to/csr.pem   Sign a given CSR, output CRT on stdout (advanced usage)
 --revoke (-r) path/to/cert.pem   Revoke specified certificate
 --deactivate                     Deactivate account
 --cleanup (-gc)                  Move unused certificate files to archive directory
 --cleanup-delete (-gcd)          Deletes (!) unused certificate files
 --help (-h)                      Show help text
 --env (-e)                       Output configuration variables for use in other scripts

Parameters:
 --accept-terms                   Accept CAs terms of service
 --full-chain (-fc)               Print full chain when using --signcsr
 --ipv4 (-4)                      Resolve names to IPv4 addresses only
 --ipv6 (-6)                      Resolve names to IPv6 addresses only
 --domain (-d) domain.tld         Use specified domain name(s) instead of domains.txt entry (one certificate!)
 --ca url/preset                  Use specified CA URL or preset
 --alias certalias                Use specified name for certificate directory (and per-certificate config) instead of the primary domain (only used if --domain is specified)
 --keep-going (-g)                Keep going after encountering an error while creating/renewing multiple certificates in cron mode
 --force (-x)                     Force certificate renewal even if it is not due to expire within RENEW_DAYS
 --force-validation               Force revalidation of domain names (used in combination with --force)
 --no-lock (-n)                   Don&#39;t use lockfile (potentially dangerous!)
 --lock-suffix example.com        Suffix lockfile name with a string (useful for with -d)
 --ocsp                           Sets option in CSR indicating OCSP stapling to be mandatory
 --privkey (-p) path/to/key.pem   Use specified private key instead of account key (useful for revocation)
 --domains-txt path/to/domains.txt Use specified domains.txt instead of default/configured one
 --config (-f) path/to/config     Use specified config file
 --hook (-k) path/to/hook.sh      Use specified script for hooks
 --preferred-chain issuer-cn      Use alternative certificate chain identified by issuer CN
 --out (-o) certs/directory       Output certificates into the specified directory
 --alpn alpn-certs/directory      Output alpn verification certificates into the specified directory
 --challenge (-t) http-01|dns-01|tls-alpn-01 Which challenge should be used? Currently http-01, dns-01, and tls-alpn-01 are supported
 --algo (-a) rsa|prime256v1|secp384r1 Which public key algorithm should be used? Supported: rsa, prime256v1 and secp384r1
</code></pre></div>

<p dir="auto">Dehydrated has an official IRC-channel <code>#dehydrated</code> on libera.chat that can be used for general discussion and suggestions.</p>
<p dir="auto">The channel can also be accessed with Matrix using the official libera.chat bridge at <code>#dehydrated:libera.chat</code>.</p>
</article></div></div>
  </body>
</html>
