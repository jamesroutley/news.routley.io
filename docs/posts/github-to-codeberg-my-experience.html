<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://eldred.fr/blog/forge-migration/">Original</a>
    <h1>GitHub to Codeberg: My Experience</h1>
    
    <div id="readability-page-1" class="page"><div itemscope="" itemtype="https://schema.org/Article"><hgroup><p>Published <time datetime="2025-11-29" itemprop="datePublished">Sat 29 Nov 2025</time>. Estimated reading time: 11 minutes.</p></hgroup><meta content="2097" itemprop="wordCount"/><hr/><p>In which I talk about the process involved in switching forges, and how well that went.</p><span id="continue-reading"></span><p>Spoiler alert: this very site that you‚Äôre reading this on is not served from <a href="https://github.io">GitHub Pages</a> anymore! At this point, I‚Äôd call my migration successful. But it took more than clicking a single button, so let‚Äôs talk about the steps involved, at least for me. I‚Äôm hoping that it can <a href="https://eldred.fr/blog/codeberg/#isso-8">help be an example for other people</a>, and show that it‚Äôs actually not that complicated.</p><h2 id="my-migration-process">(My) migration process</h2><p>First, I took an hour or so to set up my profile picture, email address(es), SSH keys‚Ä¶</p><h3 id="step-1-migrating-the-repos">Step 1: migrating the repos</h3><p>This wasn‚Äôt difficult, because <a href="https://forgejo.org">Forgejo</a> (the forge software that powers Codeberg) offers a ‚Äúmigrate from GitHub‚Äù functionality. You need to <a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens#creating-a-personal-access-token-classic">generate a PAT on GitHub</a> to import things like issues (which is awesome!), and as a bonus it also speeds up the process.</p><p>It <em>was</em>, however, tedious, because the process was entirely manual (perhaps there‚Äôs a way to automate it, like by using some <a href="https://codeberg.org/forgejo-contrib/delightful-forgejo#command-line">Forgejo CLI tool</a>, but I didn‚Äôt bother looking into that). And, due to GitHub API rate limits, whenever I tried importing two repos at the same time, one or both would fail. (It wasn‚Äôt <em>too</em> bad, though, since I could fill out the migration page for the next while one was in progress; and generally, it took me roughly as long to fill it out as it took Codeberg to perform the import.)</p><p>I‚Äôm really happy that issues, PRs, wikis, and releases can be imported flawlessly: this makes it possible to not have to refer to GitHub anymore!</p><h3 id="step-2-repointing-links-to-codeberg">Step 2: repointing links to Codeberg</h3><p>Of course I don‚Äôt control all links that point to my stuff, but I could at least run <code>rg -F github.com/ISSOtm</code> in my home directory, to catch those within my own repos. It‚Äôs possible to automate the replacing process:</p><pre data-lang="bash"><code data-lang="bash"><span><span><span>$</span></span><span> sed<span><span> --</span>in-place</span><span><span> --</span>regexp-extended</span> <span><span>&#39;</span>s,github.com/ISSOtm,codeberg.org/ISSOtm,<span>&#39;</span></span> <span>&lt;</span>files...<span>&gt;</span>
</span></span></code></pre><p>‚Ä¶and if you‚Äôre feeling like bulk-replacing all files in a directory:</p><pre data-lang="bash"><code data-lang="bash"><span><span><span>$</span></span><span> find <span>&lt;</span>directory<span>&gt;</span> <span>-</span>type f<span><span> -</span>exec</span> sed<span><span> -</span>Ei</span> <span><span>&#39;</span>s,github.com/ISSOtm,codeberg.org/ISSOtm<span>&#39;</span></span> <span><span>{</span><span>}</span></span> +</span>
</span></code></pre><p>Repositories, however, may still be pointing to GitHub:</p><pre data-lang="bash"><code data-lang="bash"><span><span><span>$</span></span><span> git remote<span><span> -</span>v</span></span>
</span><span><span><span>origin</span></span><span>	git@github.com:ISSOtm/rsgbds.git (fetch</span><span></span>)
</span><span><span><span>origin</span></span><span>	git@github.com:ISSOtm/rsgbds.git (push</span><span></span>)
</span></code></pre><p>You can either manually <code>git remote set-url origin git@codeberg.org:ISSOtm/rsgbds.git</code> (or the equivalent if you‚Äôre using HTTPS), or use one of the replace commands above, since remote URLs are stored textually:</p><pre data-lang="bash"><code data-lang="bash"><span></span><span><span><span>$</span></span><span> find .git<span><span> -</span>name</span> config<span><span> -</span>exec</span> sed<span><span> -</span>Ei</span> <span><span>&#39;</span>s,github.com:ISSOtm,codeberg.org:ISSOtm,<span>&#39;</span></span> <span><span>{</span><span>}</span></span> + </span></span><span>
</span><span></span><span><span><span>$</span></span><span> find <span>*</span><span>*</span>/.git<span><span> -</span>name</span> config<span><span> -</span>exec</span> sed<span><span> -</span>Ei</span> <span><span>&#39;</span>s,github.com:ISSOtm,codeberg.org:ISSOtm,<span>&#39;</span></span> <span><span>{</span><span>}</span></span> + </span></span></code></pre><p>‚Ä¶then it‚Äôs a matter of pushing the changes to all of the repos.</p><h3 id="step-3-stubbing-out-the-github-repos">Step 3: stubbing out the GitHub repos</h3><p>I also wanted to make it clear that my repos were now living on Codeberg; so, I created a little script in an empty directory:</p><pre data-lang="bash" data-name="stub_out.sh"><code data-lang="bash" data-name="stub_out.sh"><span></span><span><span><span>set</span></span><span> -euo pipefail</span>
</span><span>
</span><span><span><span>git</span></span><span> remote set-url origin git@github.com:ISSOtm/<span><span>$</span><span>1</span></span></span>
</span><span><span><span>cat</span></span><span> <span><span>&lt;&lt;</span><span>EOF</span></span> <span><span>&gt;</span>README.md</span><span>
</span></span></span><span><span><span># Moved to https://codeberg.org/ISSOtm/<span><span>$</span><span>1</span></span>
</span></span></span><span><span><span>
</span></span></span><span><span><span>[See my blog](http://eldred.fr/blog/codeberg) as to why.
</span></span></span><span><span><span><span>EOF</span></span></span>
</span><span><span><span>git</span></span><span> add README.md</span>
</span><span><span><span>git</span></span><span> commit<span><span> --</span>amend</span><span><span> --</span>message</span> <span><span>&#39;</span>Add move notice<span>&#39;</span></span></span>
</span><span><span><span>git</span></span><span> push<span><span> --</span>force</span></span>
</span><span><span><span>gh</span></span><span> repo edit<span><span> --</span>description</span> <span><span>&#34;</span>Moved to https://codeberg.org/ISSOtm/<span><span>$</span><span>1</span></span><span>&#34;</span></span><span><span> --</span>homepage</span> <span><span>&#34;</span>https://codeberg.org/ISSOtm/<span><span>$</span><span>1</span></span><span>&#34;</span></span></span>
</span><span><span><span>gh</span></span><span> repo archive<span><span> --</span>yes</span></span>
</span></code></pre><p>Then, to run it:</p><pre data-lang="bash"><code data-lang="bash"><span><span><span>$</span></span><span> chmod +x stub_out.sh</span>
</span><span><span><span>$</span></span><span> git init</span>
</span><span><span><span>$</span></span><span> git remote add origin <span><span>&#39;</span><span>&#39;</span></span></span>
</span><span><span><span>$</span></span><span> ./stub_out.sh rsgbds</span>
</span><span><span><span>$</span></span><span> ./stub_out.sh fortISSimO</span>
</span><span></span></code></pre><p>The automation made it not painful, so this went pretty well.</p><h3 id="step-4-porting-ci">Step 4: porting CI</h3><p>Now, onto the harder stuff :)</p><p>The first interesting thing that I noticed is this section of <a href="https://codeberg.org/actions/meta/#rules-and-conditions">Codeberg‚Äôs CI documentation</a>:</p><blockquote><p>Running CI/CD pipelines can use significant amounts of energy. As much as it is tempting to have green checkmarks everywhere, running the jobs costs real money and has environmental costs.</p><p>Unlike other giant platforms, we do not encourage you to write ‚Äúheavy‚Äù pipelines and charge you for the cost later. We expect you to carefully consider the costs and benefits from your pipelines and reduce CI/CD usage to a minimum amount necessary to guarantee consistent quality for your projects.</p></blockquote><p>That got me to think about which projects of mine really need CI, and ultimately, I decided that I would only need CI for publishing my website, and the documentation of <a href="https://codeberg.org/ISSOtm/gb-starter-kit/src/branch/doc">gb-starter-kit</a> and <a href="https://codeberg.org/ISSOtm/fortISSimO/src/branch/master/manual">fortISSimO</a>; the rest of my projects don‚Äôt get contributions anyway, so I can live without CI on them, at least for now.</p><p>Anyway, Codeberg actually has two different CI solutions: <a href="https://docs.codeberg.org/ci/#using-codeberg&#39;s-instance-of-woodpecker-ci">Woodpecker</a>, and <a href="https://docs.codeberg.org/ci/actions">Forgejo Actions</a>; the former seems to be more powerful, but you need to apply for access, and the latter is very close to GitHub Actions, which should facilitate the migration. So I picked Forgejo Actions, even though it‚Äôs marked as being in beta.</p><p>It‚Äôs not very difficult to port a YAML file from GHA to Forgejo Actions; for example, look at <a href="https://codeberg.org/ISSOtm/gb-starter-kit/commit/93a455d01b62e7c8aa64e7d357029102ebce54fb">the commit porting gb-starter-kit‚Äôs publishing CI</a>. (This doesn‚Äôt really appear as a diff, since I‚Äôve moved the file; but it‚Äôs small, so it‚Äôs easy to compare manually.)</p><p>Here are some salient points:</p><ul><li>Actions are normally just referred to as <code>owner/repo</code>, but Forgejo supports cloning <em>any</em> Git repo, especially across forges. It‚Äôs actually recommended to use full URLs always, so you don‚Äôt rely on the default prefix, which is configurable by the instance admin and thus not necessarily portable.</li><li>I could have kept the files in <code>.github/workflows</code>, since Forgejo <a href="https://forgejo.org/docs/latest/user/actions/overview/#workflows">picks up that directory automatically</a> if <code>.forgejo/workflows</code> doesn‚Äôt exist; however, I think it‚Äôs more convenient to keep un-migrated scripts in <code>.github</code> and migrated ones in <code>.forgejo</code>.</li><li>Most Actions (the individual steps, not the workflow files) actually work out of the box on Forgejo Actions. Nice!</li><li>Codeberg‚Äôs runners differ from GitHub‚Äôs significantly: they have <em>way</em> less software installed by default, fewer resources, and only Linux runners are provided (Ubuntu by default, but you can use <a href="https://hub.docker.com/">any Docker container image</a>). macOS and Windows being non-free OSes, Codeberg has no plans to offer either of those! For both philosophical and financial reasons. If this is a deal-breaker for you, consider cross-compiling, or bringing your own runner.</li><li>Unless low latency is crucial, consider using <a href="https://codeberg.org/actions/meta/#lazy-runners">the lazy runners</a> for better load balancing and possibly greener energy consumption. In practice I haven‚Äôt seen delays beyond a few minutes, which is acceptable to me.</li></ul><p>I actually spent some extra time trying to use less compute to perform my CI jobs, somewhat motivated by the small size of the runners, and because I‚Äôm guessing that the smaller the runner you‚Äôre picking, the faster your job will be able to be scheduled. <a href="https://codeberg.org/ISSOtm/gb-starter-kit/commit/fe48963">Here is one such commit</a>; note in particular line 50, where I tried using a Docker image with LaTeX preinstalled, which saves the time taken by <code>apt install</code> and requires fewer writes to the filesystem, <a href="https://codeberg.org/actions/meta/#available-runners">freeing up RAM</a>.</p><h3 id="step-5-re-hosting-my-website">Step 5: re-hosting my website</h3><p>All of the previous steps were done within the span of a few days; however, since my website (this very website) was hosted using GitHub Pages, I couldn‚Äôt migrate its repos (yes, plural: you can configure individual repos to be published separately, which is how e.g. <a href="https://eldred.fr/fortISSimO">https://eldred.fr/fortISSimO</a> is published, despite not being in the website‚Äôs main repo).</p><p>Nominally, Codeberg has an equivalent, <a href="https://codeberg.page">Codeberg Pages</a>; however, as mentioned on that page, <q>the software behind this feature is currently in maintenance mode</q>, because of complexity and performance issues. So I left it at that for roughly a month, hoping there‚Äôll eventually be an update. Also, subprojects are published as subdomains instead of subdirectories, which would have broken links (e.g. <code>http://eldred.fr/fortISSimO</code> would have become <code>http://fortISSimO.eldred.fr</code>). Meh‚Ä¶</p><p>And then (by chance lol) I discovered <a href="https://codeberg.org/git-pages/git-pages">git-pages</a> and its public instance <a href="https://grebedoc.dev">Grebedoc</a>! It functions much like GitHub Pages, though with a bit more setup since it‚Äôs not integrated within the forge itself.</p><p>git-pages actually has several niceties:</p><ul><li>My website had zero downtime during the entire migration, as git-pages <a href="https://grebedoc.dev/#zero-downtime">supports</a> uploading your website before updating your DNS records!</li><li>It <a href="https://grebedoc.dev/#redirects">also supports</a> server-side redirects, which lets me redirect people who still go to http://eldred.fr/gb-asm-tutorial/* to its new home, for example. People have been getting 404s because of incomplete client-side coverage on my side, but no more!</li><li>It <a href="https://grebedoc.dev/#headers">also also supports</a> custom headers; I‚Äôm not particularly interested in <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">CORS</a>, but I‚Äôve used that file to <a href="https://codeberg.org/ISSOtm/eldred.fr/commit/51a1718ea6f017520dfac27855c3f2cb032a09b4">pay my respects</a>.</li></ul><p>Oh, and also, <a href="https://blog.codeberg.org/letter-from-codeberg-onwards-and-upwards.html">Codeberg‚Äôs November 2025 newsletter</a> mentions that <q>Codeberg is planning to gradually migrate to [git-pages]</q>. Exciting!</p><p>I‚Äôm actually much happier using this than GitHub Pages; so, I‚Äôve joined <a href="https://www.patreon.com/whitequark">Catherine‚Äôs Patreon</a>, because I want to see this go far.</p><h3 id="time-tracking">Time tracking</h3><p>Steps 1 through 3 (migrating the repos) took me the better part of an afternoon; step 4 (porting CI) took me another afternoon, mostly to learn the new CI system; and step 5 (the website) took me‚Ä¶ well, it should have taken an afternoon, but I used the opportunity to also pay down some tech debt (merging my slides repo into my main website), which took a few days due to required rearchitecting.</p><p>All in all, even with 45 repos migrated, this basically took a weekend. And I didn‚Äôt find it annoying!</p><p>Since the task seemed really daunting, <a href="https://ncase.me/anxiety">my anxiety</a> caused me to procrastinate this a lot, but in the end it was little work. One of the reasons I‚Äôm writing this is to let other people know that, so they can overcome their own anxiety. Maybe. :P</p><h2 id="what-now">What now?</h2><p>All in all, I‚Äôm very happy with this migration! As far as I can tell, nothing on this website has broken, and I‚Äôve tried reasonably containing the breakage over on GitHub: I have truncated the <code>master</code> branches, but all other branches and tags remain in place (mostly due to laziness lol), permalinks (e.g. <code>https://github.com/ISSOtm/gb-bootroms/blob/c8ed9e106e0ab1193a57071820e46358006c79d0/src/dmg.asm</code>) still work, only non-perma links (e.g. <code>https://github.com/ISSOtm/gb-bootroms/blob/master/src/dmg.asm</code>) are broken, but those are unreliable in the first place anyway.</p><p>Since that means that all of my code <em>is</em> still on GitHub, I <em>want</em> to delete my repos; but that would be a bad idea at this point, due to leaving no redirects or anything. I‚Äôll consider that again in‚Ä¶ idk, a year or something. I would also like to delete my GitHub account (like I have deleted my Twitter account when‚Ä¶ *gestures vaguely*), but not only do I need my repos to be up, I also need my account to contribute to projects that are still on GitHub.</p><p>One downside of this migration is that since I‚Äôm moving off of The Main Forge, my projects are likely to get fewer contributions‚Ä¶ But I wasn‚Äôt getting many in the first place, and some people have already made accounts on Codeberg to keep contributing to my stuff. Likewise, I‚Äôm not really worried about discoverability. We‚Äôll see I guess lol ü§∑‚Äç‚ôÇÔ∏è</p><p>Lastly, I‚Äôm writing this after the migration, and I haven‚Äôt really taken notes during it; so, if I‚Äôve forgotten any steps, feel free to let me know in the comments below or by <a href="https://codeberg.org/ISSOtm/eldred.fr/issues/new">opening an issue</a>, and I‚Äôll edit this article.</p><p>Cheers!</p><h2 id="special-thanks">Special thanks</h2><ul><li><a href="https://mastodon.social/@whitequark">Catherine ‚Äòwhitequark‚Äô</a> for her work on git-pages and for being part of the ops team for Grebedoc</li><li><a href="https://servfail.network">SERVFAIL network</a> (<a href="https://sdomi.pl">domi</a>, <a href="https://scholz.ruhr">Merlin</a>, <a href="https://famfo.xyz">famfo</a>, <a href="https://donotsta.re/aprl">aprl</a>, and all of #servfail) for being my awesome DNS providers</li><li>Codeberg team and Forgejo contributors for making all of this possible in the first place</li></ul><hr/><nav><ul></ul><ul><li>Earlier post: <a href="https://eldred.fr/blog/codeberg/">Migrating my code to Codeberg</a></li></ul></nav><hr/></div></div>
  </body>
</html>
