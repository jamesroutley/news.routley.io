<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.file0.dev">Original</a>
    <h1>Show HN: File0 â€“ An easier way to manage files in serverless apps</h1>
    
    <div id="readability-page-1" class="page"><div><pre><code>import { S3Client, PutObjectAclCommand } from &#39;@aws-sdk/client-s3&#39;;</code></pre><pre><code></code></pre><pre><code>const s3 = new S3Client({</code></pre><pre><code>  region: region,</code></pre><pre><code>  credentials: {</code></pre><pre><code>    accessKeyId: process.env.S3_ACCESS_KEY_ID,</code></pre><pre><code>    secretAccessKey: process.env.S3_SECRET_ACCESS_KEY</code></pre><pre><code>  }</code></pre><pre><code>});</code></pre><pre><code></code></pre><pre><code>const bucketPolicy = {</code></pre><pre><code>  Version: &#34;2012-10-17&#34;,</code></pre><pre><code>  Statement: [</code></pre><pre><code>    {</code></pre><pre><code>        Effect: &#34;Allow&#34;,</code></pre><pre><code>        Principal: &#34;*&#34;,</code></pre><pre><code>        Action: &#34;s3:GetObject&#34;,</code></pre><pre><code>        Resource: &#34;arn:aws:s3:::mybucket/image.png&#34;</code></pre><pre><code>    }</code></pre><pre><code>  ];</code></pre><pre><code>};</code></pre><pre><code></code></pre><pre><code>const policyParams = {</code></pre><pre><code>  Bucket: bucketName,</code></pre><pre><code>  Policy: JSON.stringify(bucketPolicy)</code></pre><pre><code>};</code></pre><pre><code></code></pre><pre><code>const command = new PutBucketPolicyCommand(policyParams);</code></pre><pre><code>const response = await s3.send(command);</code></pre></div></div>
  </body>
</html>
