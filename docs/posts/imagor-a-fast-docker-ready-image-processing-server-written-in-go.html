<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/cshum/imagor">Original</a>
    <h1>Imagor: A fast, Docker-ready image processing server written in Go</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
          <article itemprop="text">
<p dir="auto">Imagor is a fast, Docker-ready image processing server written in Go.</p>
<p dir="auto">Imagor uses one of the most efficient image processing library
<a href="https://github.com/libvips/libvips">libvips</a> (with <a href="https://github.com/davidbyttow/govips">govips</a>). It is typically 4-8x <a href="https://github.com/libvips/libvips/wiki/Speed-and-memory-use">faster</a> than using the quickest ImageMagick and GraphicsMagick settings.</p>
<p dir="auto">Imagor is a Go library that is easily extensible, ready to be installed and used in any Unix environment, and ready to be containerized using Docker.</p>
<p dir="auto">Imagor adopts the <a href="https://thumbor.readthedocs.io/en/latest/usage.html#image-endpoint" rel="nofollow">Thumbor</a> URL syntax and covers most of the web image processing use cases. If these fit your requirements, Imagor would be a lightweight, high performance drop-in replacement.</p>
<h3 dir="auto"><a id="user-content-quick-start" aria-hidden="true" href="#quick-start"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Quick Start</h3>
<div data-snippet-clipboard-copy-content="docker run -p 8000:8000 shumc/imagor -imagor-unsafe"><pre>docker run -p 8000:8000 shumc/imagor -imagor-unsafe</pre></div>
<p dir="auto">Try out the following image URLs:</p>
<div data-snippet-clipboard-copy-content="# original images
https://raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher.png
https://raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher-front.png

http://localhost:8000/unsafe/500x500/top/https://raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher.png
http://localhost:8000/unsafe/fit-in/500x500/filters:fill(white):format(jpeg)/raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher.png
http://localhost:8000/unsafe/fit-in/-500x500/10x10/filters:hue(290):saturation(100):fill(yellow):format(jpeg):quality(80)/raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher.png
http://localhost:8000/unsafe/fit-in/800x800/filters:fill(white):watermark(raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher-front.png,repeat,bottom,10):format(jpeg)/raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher.png"><pre><code># original images
https://raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher.png
https://raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher-front.png

http://localhost:8000/unsafe/500x500/top/https://raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher.png
http://localhost:8000/unsafe/fit-in/500x500/filters:fill(white):format(jpeg)/raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher.png
http://localhost:8000/unsafe/fit-in/-500x500/10x10/filters:hue(290):saturation(100):fill(yellow):format(jpeg):quality(80)/raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher.png
http://localhost:8000/unsafe/fit-in/800x800/filters:fill(white):watermark(raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher-front.png,repeat,bottom,10):format(jpeg)/raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher.png
</code></pre></div>
<h4 dir="auto"><a id="user-content-docker-compose-example" aria-hidden="true" href="#docker-compose-example"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Docker Compose Example</h4>
<p dir="auto">Imagor with File Loader and Storage using mounted volume:</p>
<div data-snippet-clipboard-copy-content="version: &#34;3&#34;
services:
  imagor:
    image: shumc/imagor:latest
    volumes:
      - ./:/mnt/data
    environment:
      PORT: 8000
      IMAGOR_UNSAFE: 1 # unsafe URL
      FILE_LOADER_BASE_DIR: /mnt/data # enable file loader by specifying base dir
      FILE_STORAGE_BASE_DIR: /mnt/data # enable file storage by specifying base dir
    ports:
      - &#34;8000:8000&#34;"><pre><span>version</span>: <span><span>&#34;</span>3<span>&#34;</span></span>
<span>services</span>:
  <span>imagor</span>:
    <span>image</span>: <span>shumc/imagor:latest</span>
    <span>volumes</span>:
      - <span>./:/mnt/data</span>
    <span>environment</span>:
      <span>PORT</span>: <span>8000</span>
      <span>IMAGOR_UNSAFE</span>: <span>1</span> <span><span>#</span> unsafe URL</span>
      <span>FILE_LOADER_BASE_DIR</span>: <span>/mnt/data </span><span><span>#</span> enable file loader by specifying base dir</span>
      <span>FILE_STORAGE_BASE_DIR</span>: <span>/mnt/data </span><span><span>#</span> enable file storage by specifying base dir</span>
    <span>ports</span>:
      - <span><span>&#34;</span>8000:8000<span>&#34;</span></span></pre></div>
<p dir="auto">Imagor with AWS S3 Loader and Storage:</p>
<div data-snippet-clipboard-copy-content="version: &#34;3&#34;
services:
  imagor:
    image: shumc/imagor:latest
    environment:
      PORT: 8000
      IMAGOR_SECRET: mysecret # secret key for URL signature
      AWS_ACCESS_KEY_ID: ...
      AWS_SECRET_ACCESS_KEY: ...
      AWS_REGION: ...
      S3_LOADER_BUCKET: mybucket # enable S3 loader by specifying loader bucket
      S3_LOADER_BASE_DIR: images # optional
      S3_STORAGE_BUCKET: mybucket # enable S3 storage by specifying storage bucket
      S3_STORAGE_BASE_DIR: images # optional
    ports:
      - &#34;8000:8000&#34;"><pre><span>version</span>: <span><span>&#34;</span>3<span>&#34;</span></span>
<span>services</span>:
  <span>imagor</span>:
    <span>image</span>: <span>shumc/imagor:latest</span>
    <span>environment</span>:
      <span>PORT</span>: <span>8000</span>
      <span>IMAGOR_SECRET</span>: <span>mysecret </span><span><span>#</span> secret key for URL signature</span>
      <span>AWS_ACCESS_KEY_ID</span>: <span>...</span>
      <span>AWS_SECRET_ACCESS_KEY</span>: <span>...</span>
      <span>AWS_REGION</span>: <span>...</span>
      <span>S3_LOADER_BUCKET</span>: <span>mybucket </span><span><span>#</span> enable S3 loader by specifying loader bucket</span>
      <span>S3_LOADER_BASE_DIR</span>: <span>images </span><span><span>#</span> optional</span>
      <span>S3_STORAGE_BUCKET</span>: <span>mybucket </span><span><span>#</span> enable S3 storage by specifying storage bucket</span>
      <span>S3_STORAGE_BASE_DIR</span>: <span>images </span><span><span>#</span> optional</span>
    <span>ports</span>:
      - <span><span>&#34;</span>8000:8000<span>&#34;</span></span></pre></div>
<h3 dir="auto"><a id="user-content-imagor-endpoint" aria-hidden="true" href="#imagor-endpoint"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Imagor Endpoint</h3>
<p dir="auto">Imagor endpoint is a series of URL parts which defines the image operations, followed by the image URI:</p>
<div data-snippet-clipboard-copy-content="/HASH|unsafe/trim/AxB:CxD/fit-in/stretch/-Ex-F/GxH/HALIGN/VALIGN/smart/filters:NAME(ARGS):NAME(ARGS):.../IMAGE"><pre><code>/HASH|unsafe/trim/AxB:CxD/fit-in/stretch/-Ex-F/GxH/HALIGN/VALIGN/smart/filters:NAME(ARGS):NAME(ARGS):.../IMAGE
</code></pre></div>
<ul dir="auto">
<li><code>HASH</code> is the URL Signature hash, or <code>unsafe</code> if unsafe mode is used</li>
<li><code>trim</code> removes surrounding space in images using top-left pixel color</li>
<li><code>AxB:CxD</code> means manually crop the image at left-top point <code>AxB</code> and right-bottom point <code>CxD</code></li>
<li><code>fit-in</code> means that the generated image should not be auto-cropped and otherwise just fit in an imaginary box specified by <code>ExF</code></li>
<li><code>stretch</code> means resize the image to <code>ExF</code> without keeping its aspect ratios</li>
<li><code>-Ex-F</code> means resize the image to be <code>ExF</code> of width per height size. The minus signs mean flip horizontally and vertically</li>
<li><code>GxH</code> add horizontal padding <code>G</code> and vertical padding <code>H</code> under <code>fit-in</code></li>
<li><code>HALIGN</code> is horizontal alignment of crop. Accepts <code>left</code>, <code>right</code> or <code>center</code>, defaults to <code>center</code></li>
<li><code>VALIGN</code> is vertical alignment of crop. Accepts <code>top</code>, <code>bottom</code> or <code>middle</code>, defaults to <code>middle</code></li>
<li><code>smart</code> means using smart detection of focal points</li>
<li><code>filters</code> a pipeline of image filter operations to be applied, see filters section</li>
<li><code>IMAGE</code> is the image URI</li>
</ul>
<p dir="auto">Imagor provides utilities for previewing and generating Imagor endpoint URI:</p>
<h4 dir="auto"><a id="user-content-get-params" aria-hidden="true" href="#get-params"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>GET /params</code></h4>
<p dir="auto">Prepending <code>/params</code> to the existing endpoint returns the endpoint attributes in JSON form, useful for preview:</p>
<div data-snippet-clipboard-copy-content="curl http://localhost:8000/params/g5bMqZvxaQK65qFPaP1qlJOTuLM=/fit-in/500x400/0x20/filters:fill(white)/raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher.png

{
  &#34;path&#34;: &#34;fit-in/500x400/0x20/filters:fill(white)/raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher.png&#34;,
  &#34;image&#34;: &#34;raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher.png&#34;,
  &#34;hash&#34;: &#34;g5bMqZvxaQK65qFPaP1qlJOTuLM=&#34;,
  &#34;fit_in&#34;: true,
  &#34;width&#34;: 500,
  &#34;height&#34;: 400,
  &#34;v_padding&#34;: 20,
  &#34;filters&#34;: [
    {
      &#34;name&#34;: &#34;fill&#34;,
      &#34;args&#34;: &#34;white&#34;
    }
  ]
}"><pre><code>curl http://localhost:8000/params/g5bMqZvxaQK65qFPaP1qlJOTuLM=/fit-in/500x400/0x20/filters:fill(white)/raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher.png

{
  &#34;path&#34;: &#34;fit-in/500x400/0x20/filters:fill(white)/raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher.png&#34;,
  &#34;image&#34;: &#34;raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher.png&#34;,
  &#34;hash&#34;: &#34;g5bMqZvxaQK65qFPaP1qlJOTuLM=&#34;,
  &#34;fit_in&#34;: true,
  &#34;width&#34;: 500,
  &#34;height&#34;: 400,
  &#34;v_padding&#34;: 20,
  &#34;filters&#34;: [
    {
      &#34;name&#34;: &#34;fill&#34;,
      &#34;args&#34;: &#34;white&#34;
    }
  ]
}
</code></pre></div>
<h4 dir="auto"><a id="user-content-imagorpath-package" aria-hidden="true" href="#imagorpath-package"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>imagorpath</code> package</h4>
<p dir="auto">Imagor Go library provides a <code>imagorpath</code> package which
allows you to parse and generate Imagor endpoint using the <code>Params</code> struct:</p>
<div data-snippet-clipboard-copy-content="import &#34;github.com/cshum/imagor/imagorpath&#34;

...

func Test(t *testing.T) {
	params := imagorpath.Params{
		Image:    &#34;raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher.png&#34;,
		FitIn:    true,
		Width:    500,
		Height:   400,
		VPadding: 20,
		Filters: imagorpath.Filters{
			{
				Name: &#34;fill&#34;,
				Args: &#34;white&#34;,
			},
		},
	}

	// generate signed Imagor endpoint from Params struct with secret
	path := imagorpath.Generate(params, &#34;mysecret&#34;)

	assert.Equal(t, path, &#34;g5bMqZvxaQK65qFPaP1qlJOTuLM=/fit-in/500x400/0x20/filters:fill(white)/raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher.png&#34;)
}
"><pre><span>import</span> <span>&#34;github.com/cshum/imagor/imagorpath&#34;</span>

<span>...</span>

<span>func</span> <span>Test</span>(<span>t</span> <span>*</span>testing.<span>T</span>) {
	<span>params</span> <span>:=</span> imagorpath.<span>Params</span>{
		<span>Image</span>:    <span>&#34;raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher.png&#34;</span>,
		<span>FitIn</span>:    <span>true</span>,
		<span>Width</span>:    <span>500</span>,
		<span>Height</span>:   <span>400</span>,
		<span>VPadding</span>: <span>20</span>,
		<span>Filters</span>: imagorpath.<span>Filters</span>{
			{
				<span>Name</span>: <span>&#34;fill&#34;</span>,
				<span>Args</span>: <span>&#34;white&#34;</span>,
			},
		},
	}

	<span>// generate signed Imagor endpoint from Params struct with secret</span>
	<span>path</span> <span>:=</span> <span>imagorpath</span>.<span>Generate</span>(<span>params</span>, <span>&#34;mysecret&#34;</span>)

	<span>assert</span>.<span>Equal</span>(<span>t</span>, <span>path</span>, <span>&#34;g5bMqZvxaQK65qFPaP1qlJOTuLM=/fit-in/500x400/0x20/filters:fill(white)/raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher.png&#34;</span>)
}</pre></div>
<h3 dir="auto"><a id="user-content-url-signature" aria-hidden="true" href="#url-signature"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>URL Signature</h3>
<p dir="auto">In production environment, it is highly recommended turning off <code>IMAGOR_UNSAFE</code> and setup <code>IMAGOR_SECRET</code> to avoid DDoS attacks that abuse multiple image operations.</p>
<p dir="auto">The hash is based on HMAC digest, created by taking the URL path (excluding /unsafe/) with secret. The hash is then base64url-encoded.
An example in Go:</p>
<div data-snippet-clipboard-copy-content="func SignPath(path, secret string) string {
	h := hmac.New(sha1.New, []byte(secret))
	h.Write([]byte(strings.TrimPrefix(path, &#34;/&#34;)))
	hash := base64.URLEncoding.EncodeToString(h.Sum(nil))
	return hash + &#34;/&#34; + path
}

func main() {
	fmt.Println(SignPath(&#34;500x500/top/raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher.png&#34;, &#34;mysecret&#34;))
	// RArq3FZw_bqxLcpKo1WI0aX_q7s=/fit-in/500x500/filters:fill(white):format(jpeg)/raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher.png
}"><pre><span>func</span> <span>SignPath</span>(<span>path</span>, <span>secret</span> <span>string</span>) <span>string</span> {
	<span>h</span> <span>:=</span> <span>hmac</span>.<span>New</span>(<span>sha1</span>.<span>New</span>, []<span>byte</span>(<span>secret</span>))
	<span>h</span>.<span>Write</span>([]<span>byte</span>(<span>strings</span>.<span>TrimPrefix</span>(<span>path</span>, <span>&#34;/&#34;</span>)))
	<span>hash</span> <span>:=</span> <span>base64</span>.<span>URLEncoding</span>.<span>EncodeToString</span>(<span>h</span>.<span>Sum</span>(<span>nil</span>))
	<span>return</span> <span>hash</span> <span>+</span> <span>&#34;/&#34;</span> <span>+</span> <span>path</span>
}

<span>func</span> <span>main</span>() {
	<span>fmt</span>.<span>Println</span>(<span>SignPath</span>(<span>&#34;500x500/top/raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher.png&#34;</span>, <span>&#34;mysecret&#34;</span>))
	<span>// RArq3FZw_bqxLcpKo1WI0aX_q7s=/fit-in/500x500/filters:fill(white):format(jpeg)/raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher.png</span>
}</pre></div>
<h3 dir="auto"><a id="user-content-filters" aria-hidden="true" href="#filters"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Filters</h3>
<p dir="auto">Filters <code>/filters:NAME(ARGS):NAME(ARGS):.../</code> is a pipeline of image operations that will be sequentially applied to the image. Examples:</p>
<div data-snippet-clipboard-copy-content="/filters:fill(white):format(jpeg)/
/filters:hue(290):saturation(100):fill(yellow):format(jpeg):quality(80)/
/filters:fill(white):watermark(raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher-front.png,repeat,bottom,10):format(jpeg)/"><pre><code>/filters:fill(white):format(jpeg)/
/filters:hue(290):saturation(100):fill(yellow):format(jpeg):quality(80)/
/filters:fill(white):watermark(raw.githubusercontent.com/golang-samples/gopher-vector/master/gopher-front.png,repeat,bottom,10):format(jpeg)/
</code></pre></div>
<p dir="auto">Imagor supports the following filters:</p>
<ul dir="auto">
<li><code>background_color(color)</code> sets the background color of a transparent image
<ul dir="auto">
<li><code>color</code> the color name or hexadecimal rgb expression without the “#” character</li>
</ul>
</li>
<li><code>blur(sigma)</code> applies gaussian blur to the image</li>
<li><code>brightness(amount)</code> increases or decreases the image brightness
<ul dir="auto">
<li><code>amount</code> -100 to 100, the amount in % to increase or decrease the image brightness</li>
</ul>
</li>
<li><code>contrast(amount)</code> increases or decreases the image contrast
<ul dir="auto">
<li><code>amount</code> -100 to 100, the amount in % to increase or decrease the image contrast</li>
</ul>
</li>
<li><code>fill(color)</code> fill the missing area or transparent image with the specified color:
<ul dir="auto">
<li><code>color</code> - color name or hexadecimal rgb expression without the “#” character
<ul dir="auto">
<li>If color is &#34;blur&#34; - missing parts are filled with blurred original image.</li>
<li>If color is &#34;auto&#34; - the top left image pixel will be chosen as the filling color</li>
</ul>
</li>
</ul>
</li>
<li><code>format(format)</code> specifies the output format of the image
<ul dir="auto">
<li><code>format</code> accepts jpeg, png, webp, gif, jp2, tiff</li>
</ul>
</li>
<li><code>grayscale()</code> changes the image to grayscale</li>
<li><code>hue(angle)</code> increases or decreases the image hue
<ul dir="auto">
<li><code>angle</code> the angle in degree to increase or decrease the hue rotation</li>
</ul>
</li>
<li><code>quality(amount)</code> changes the overall quality of the image, does nothing for png
<ul dir="auto">
<li><code>amount</code> 0 to 100, the quality level in %</li>
</ul>
</li>
<li><code>rgb(r,g,b)</code> amount of color in each of the rgb channels in %. Can range from -100 to 100</li>
<li><code>rotate(angle)</code> rotates the given image according to the angle value passed
<ul dir="auto">
<li><code>angle</code> accepts 0, 90, 180, 270</li>
</ul>
</li>
<li><code>round_corner(rx [, ry [, color]])</code> adds rounded corners to the image with the specified color as background
<ul dir="auto">
<li><code>rx</code>, <code>ry</code> amount of pixel to use as radius. ry = rx if ry is not provided</li>
<li><code>color</code> the color name or hexadecimal rgb expression without the “#” character</li>
</ul>
</li>
<li><code>saturation(amount)</code> increases or decreases the image saturation
<ul dir="auto">
<li><code>amount</code> -100 to 100, the amount in % to increase or decrease the image saturation</li>
</ul>
</li>
<li><code>sharpen(sigma)</code> sharpens the image</li>
<li><code>trim([tolerance [, position]])</code> apply trim operation as part of the filter pipeline
<ul dir="auto">
<li><code>tolerance</code> the euclidean distance between the colors to get trimmed within the tolerance, default 1</li>
<li><code>position</code> default using <code>top-left</code> pixel color unless specified <code>bottom-right</code></li>
</ul>
</li>
<li><code>upscale()</code> upscale the image if <code>fit-in</code> is used</li>
<li><code>watermark(image, x, y, alpha [, w_ratio [, h_ratio]])</code> adds a watermark to the image. It can be positioned inside the image with the alpha channel specified and optionally resized based on the image size by specifying the ratio
<ul dir="auto">
<li><code>image</code> watermark image URI, using the same image loader configured for Imagor</li>
<li><code>x</code> horizontal position that the watermark will be in:
<ul dir="auto">
<li>Positive numbers indicate position from the left and negative numbers indicate position from the right.</li>
<li>Number followed by a <code>p</code> e.g. 20p means calculating the value from the image width as percentage</li>
<li><code>left</code>,<code>right</code>,<code>center</code> positioned left, right or centered respectively</li>
<li><code>repeat</code> the watermark will be repeated horizontally</li>
</ul>
</li>
<li><code>y</code> vertical position that the watermark will be in:
<ul dir="auto">
<li>Positive numbers indicate position from the top and negative numbers indicate position from the bottom.</li>
<li>Number followed by a <code>p</code> e.g. 20p means calculating the value from the image height as percentage</li>
<li><code>top</code>,<code>bottom</code>,<code>center</code> positioned top, bottom or centered respectively</li>
<li><code>repeat</code> the watermark will be repeated vertically</li>
</ul>
</li>
<li><code>alpha</code> watermark image transparency, a number between 0 (fully opaque) and 100 (fully transparent).</li>
<li><code>w_ratio</code> percentage of the width of the image the watermark should fit-in</li>
<li><code>h_ratio</code> percentage of the height of the image the watermark should fit-in</li>
</ul>
</li>
</ul>
<h3 dir="auto"><a id="user-content-configurations" aria-hidden="true" href="#configurations"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Configurations</h3>
<p dir="auto">Imagor supports command-line arguments, see available options <code>imagor -h</code>. You may check <a href="https://github.com/cshum/imagor/blob/master/cmd/imagor/main.go">main.go</a> for better understanding the initialization sequences.</p>
<p dir="auto">Imagor also supports environment variables or <code>.env</code> file for the arguments equivalent in capitalized snake case. For instances <code>-imagor-secret</code> would become <code>IMAGOR_SECRET</code>:</p>
<div data-snippet-clipboard-copy-content="# both are equivalent

imagor -debug -imagor-secret=1234

DEBUG=1 IMAGOR_SECRET=1234 imagor"><pre><span><span>#</span> both are equivalent</span>

imagor -debug -imagor-secret=1234

DEBUG=1 IMAGOR_SECRET=1234 imagor</pre></div>
<p dir="auto">Available options:</p>
<div data-snippet-clipboard-copy-content="imagor -h
Usage of imagor:
  -debug
        Debug mode
  -port int
        Sever port (default 8000)

  -imagor-secret string
        Secret key for signing Imagor URL
  -imagor-unsafe
        Unsafe Imagor that does not require URL signature. Prone to URL tampering
  -imagor-version
        Imagor version
  -imagor-cache-header-ttl duration
        Imagor HTTP cache header ttl for successful image response (default 24h0m0s)
  -imagor-request-timeout duration
        Timeout for performing imagor request (default 30s)
  -imagor-load-timeout duration
        Timeout for Imagor Loader request, should be smaller than imagor-request-timeout (default 20s)
  -imagor-save-timeout duration
        Timeout for saving image for storage (default 1m0s)

  -server-address string
        Server address
  -server-cors
        Enable CORS
  -server-strip-query-string
        Enable strip query string redirection
  -server-path-prefix string
        Server path prefix

  -vips-concurrency-level int
        VIPS concurrency level. Default to the number of CPU cores.
  -vips-disable-blur
        VIPS disable blur operations for vips processor
  -vips-disable-filters string
        VIPS disable filters by csv e.g. blur,watermark,rgb
  -vips-max-filter-ops int
        VIPS maximum number of filter operations allowed (default 10)

  -http-loader-allowed-sources string
        HTTP Loader allowed hosts whitelist to load images from if set. Accept csv wth glob pattern e.g. *.google.com,*.github.com.
  -http-loader-default-scheme string
        HTTP Loader default scheme if not specified by image path. Set &#34;nil&#34; to disable default scheme. (default &#34;https&#34;)
  -http-loader-forward-headers string
        Forward request header to HTTP Loader request by csv e.g. User-Agent,Accept
  -http-loader-forward-all-headers
        Forward all request headers to HTTP Loader request
  -http-loader-insecure-skip-verify-transport
        HTTP Loader to use HTTP transport with InsecureSkipVerify true
  -http-loader-max-allowed-size int
        HTTP Loader maximum allowed size in bytes for loading images if set
  -http-loader-disable
        Disable HTTP Loader

  -file-loader-base-dir string
        Base directory for File Loader. Will activate File Loader only if this value present
  -file-loader-path-prefix string
        Base path prefix for File Loader

  -file-storage-base-dir string
        Base directory for File Storage. Will activate File Storage only if this value present
  -file-storage-path-prefix string
        Base path prefix for File Storage

  -aws-access-key-id string
        AWS Access Key ID. Required if using S3 Loader or S3 Storage
  -aws-region string
        AWS Region. Required if using S3 Loader or S3 Storage
  -aws-secret-access-key string
        AWS Secret Access Key. Required if using S3 Loader or S3 Storage

  -s3-loader-base-dir string
        Base directory for S3 Loader (default &#34;/&#34;)
  -s3-loader-bucket string
        S3 Bucket for S3 Loader. Will activate S3 Loader only if this value present
  -s3-loader-path-prefix string
        Base path prefix for S3 Loader (default &#34;/&#34;)

  -s3-storage-base-dir string
        Base directory for S3 Storage
  -s3-storage-bucket string
        S3 Bucket for S3 Storage. Will activate S3 Storage only if this value present
  -s3-storage-path-prefix string
        Base path prefix for S3 Storage
  -s3-storage-acl string
        Upload ACL for S3 Storage (default &#34;public-read&#34;)
"><pre><code>imagor -h
Usage of imagor:
  -debug
        Debug mode
  -port int
        Sever port (default 8000)

  -imagor-secret string
        Secret key for signing Imagor URL
  -imagor-unsafe
        Unsafe Imagor that does not require URL signature. Prone to URL tampering
  -imagor-version
        Imagor version
  -imagor-cache-header-ttl duration
        Imagor HTTP cache header ttl for successful image response (default 24h0m0s)
  -imagor-request-timeout duration
        Timeout for performing imagor request (default 30s)
  -imagor-load-timeout duration
        Timeout for Imagor Loader request, should be smaller than imagor-request-timeout (default 20s)
  -imagor-save-timeout duration
        Timeout for saving image for storage (default 1m0s)

  -server-address string
        Server address
  -server-cors
        Enable CORS
  -server-strip-query-string
        Enable strip query string redirection
  -server-path-prefix string
        Server path prefix

  -vips-concurrency-level int
        VIPS concurrency level. Default to the number of CPU cores.
  -vips-disable-blur
        VIPS disable blur operations for vips processor
  -vips-disable-filters string
        VIPS disable filters by csv e.g. blur,watermark,rgb
  -vips-max-filter-ops int
        VIPS maximum number of filter operations allowed (default 10)

  -http-loader-allowed-sources string
        HTTP Loader allowed hosts whitelist to load images from if set. Accept csv wth glob pattern e.g. *.google.com,*.github.com.
  -http-loader-default-scheme string
        HTTP Loader default scheme if not specified by image path. Set &#34;nil&#34; to disable default scheme. (default &#34;https&#34;)
  -http-loader-forward-headers string
        Forward request header to HTTP Loader request by csv e.g. User-Agent,Accept
  -http-loader-forward-all-headers
        Forward all request headers to HTTP Loader request
  -http-loader-insecure-skip-verify-transport
        HTTP Loader to use HTTP transport with InsecureSkipVerify true
  -http-loader-max-allowed-size int
        HTTP Loader maximum allowed size in bytes for loading images if set
  -http-loader-disable
        Disable HTTP Loader

  -file-loader-base-dir string
        Base directory for File Loader. Will activate File Loader only if this value present
  -file-loader-path-prefix string
        Base path prefix for File Loader

  -file-storage-base-dir string
        Base directory for File Storage. Will activate File Storage only if this value present
  -file-storage-path-prefix string
        Base path prefix for File Storage

  -aws-access-key-id string
        AWS Access Key ID. Required if using S3 Loader or S3 Storage
  -aws-region string
        AWS Region. Required if using S3 Loader or S3 Storage
  -aws-secret-access-key string
        AWS Secret Access Key. Required if using S3 Loader or S3 Storage

  -s3-loader-base-dir string
        Base directory for S3 Loader (default &#34;/&#34;)
  -s3-loader-bucket string
        S3 Bucket for S3 Loader. Will activate S3 Loader only if this value present
  -s3-loader-path-prefix string
        Base path prefix for S3 Loader (default &#34;/&#34;)

  -s3-storage-base-dir string
        Base directory for S3 Storage
  -s3-storage-bucket string
        S3 Bucket for S3 Storage. Will activate S3 Storage only if this value present
  -s3-storage-path-prefix string
        Base path prefix for S3 Storage
  -s3-storage-acl string
        Upload ACL for S3 Storage (default &#34;public-read&#34;)

</code></pre></div>
</article>
        </div></div>
  </body>
</html>
