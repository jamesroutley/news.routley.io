<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/for-GET/katt">Original</a>
    <h1>KATT (Klarna API Testing Tool) Is an HTTP-Based API Testing Tool for Erlang</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto">KATT (Klarna API Testing Tool) is an HTTP-based API testing tool for Erlang,
, though it can work just as well as a CLI tool.</p>
<p dir="auto">Use for shooting HTTP requests in a sequential order and verifying the response.
Any relevant difference between expected and actual responses will cause a
failure.</p>
<p dir="auto">Install from git or <a href="https://hex.pm/packages/katt" rel="nofollow">https://hex.pm/packages/katt</a> .</p>
<p dir="auto">For convenience, <a href="https://hub.docker.com/r/ysoftwareab/katt" rel="nofollow">available as a Docker image too</a>: <code>docker run --rm -it -v $PWD:$PWD -w $PWD ysoftwareab/katt ...</code>.</p>
<p dir="auto">And <a href="https://github.com/whalebrew/whalebrew">whalebrew package</a>: <code>brew install whalebrew &amp;&amp; sudo whalebrew install ysoftwareab/katt; katt ...</code></p>
<h2 dir="auto"><a id="user-content-quick-start-on-katt-and-apib-files" aria-hidden="true" href="#quick-start-on-katt-and-apib-files"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Quick start on KATT and APIB files</h2>
<h3 dir="auto"><a id="user-content-example" aria-hidden="true" href="#example"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Example</h3>
<p dir="auto"><a href="https://github.com/for-GET/katt/blob/master/doc/example-httpbin.apib">An example is worth a 1000 words. Have a look!</a></p>
<h3 dir="auto"><a id="user-content-params" aria-hidden="true" href="#params"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Params</h3>
<p dir="auto">If some values are static (constants) and you want to reuse them across multiple requests,
you can add one or more params like below</p>
<div data-snippet-clipboard-copy-content="PARAM a_string=&#34;with some text&#34;
PARAM a_boolean=true
PARAM a_null=null
PARAM a_float=1.1
PARAM an_integer=1"><pre><code>PARAM a_string=&#34;with some text&#34;
PARAM a_boolean=true
PARAM a_null=null
PARAM a_float=1.1
PARAM an_integer=1
</code></pre></div>
<h3 dir="auto"><a id="user-content-validator" aria-hidden="true" href="#validator"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Validator</h3>
<p dir="auto">The builtin validator supports</p>
<ul dir="auto">
<li>basic text validation</li>
<li>more advanced validation of HTTP headers</li>
<li>JSON validation <code>application/json</code>, <code>application/*+json</code></li>
<li>URL-encoded validation <code>application/x-www-form-urlencoded</code></li>
</ul>
<h3 dir="auto"><a id="user-content-tags" aria-hidden="true" href="#tags"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Tags</h3>
<p dir="auto">The validator makes use of a few tags with special meaning:</p>
<p dir="auto"><code>&#34;{{_}}&#34;</code>
Match anything including undefined (i.e. no real validation).</p>
<p dir="auto"><code>&#34;{{expected}}&#34;</code>
Match anything but undefined (i.e. no real validation, only check existence).</p>
<p dir="auto"><code>&#34;{{unexpected}}&#34;</code>
Match nothing (i.e. no real validation, only check lack of existence)</p>
<p dir="auto"><code>&#34;{{&gt;key}}&#34;</code>
Store value of the whole string (key must be unique within testcase)</p>
<p dir="auto"><code>&#34;{{&lt;key}}&#34;</code>
Recall stored value.</p>
<p dir="auto">The <code>&#34;{{_}}&#34;</code> tag can also be used as a JSON object&#39;s property in order to
validate any other additional properties.</p>
<p dir="auto">By default, the builtin validator will allow additional properties in an object
structure, or additional items in an array structure. To counteract that
default, one can do <code>{..., &#34;{{_}}&#34;: &#34;{{unexpected}}&#34;}</code> or
<code>[..., &#34;{{unexpected}}&#34;]</code>, effectively making a rule that no properties/items
are expected beyond the ones defined.</p>
<h3 dir="auto"><a id="user-content-headers" aria-hidden="true" href="#headers"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Headers</h3>
<p dir="auto">A request can also be configured via HTTP request headers:</p>
<ul dir="auto">
<li><code>x-katt-content-type</code> would set a request content-type, without sending a <code>content-type</code> HTTP header</li>
<li><code>x-katt-description</code> would take precedence over the transaction&#39;s description</li>
<li><code>x-katt-request-timeout</code> would take precedence over the <code>request_timeout</code> param</li>
<li><code>x-katt-request-sleep</code> would delay the request for a specific amount of milliseconds</li>
<li><code>x-katt-transform</code> would call the <code>tranform</code> callback with its value as <code>id</code></li>
</ul>
<p dir="auto">A response can also be configured via HTTP response headers:</p>
<ul dir="auto">
<li><code>x-katt-content-type</code> would set a response (expected and actual) content-type, without expecting/receiving a <code>content-type</code> HTTP header</li>
<li><code>x-katt-transform</code> would call the <code>tranform</code> callback with its value as <code>id</code></li>
</ul>
<h3 dir="auto"><a id="user-content-set-extension" aria-hidden="true" href="#set-extension"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>set</code> extension</h3>
<p dir="auto"><code>set</code> will ignore the order of an array&#39;s items, and just check for existence:</p>
<div data-snippet-clipboard-copy-content="{
  &#34;some_array&#34;: {
    &#34;{{type}}&#34;: &#34;set&#34;,
    &#34;value&#34;: [1, 2, 3]
  }
}"><pre><code>{
  &#34;some_array&#34;: {
    &#34;{{type}}&#34;: &#34;set&#34;,
    &#34;value&#34;: [1, 2, 3]
  }
}
</code></pre></div>
<p dir="auto">So the above would validate against JSON instances such as
<code>{&#34;some_array&#34;: [1, 3, 2]}</code>, or <code>{&#34;some_array&#34;: [3, 2, 1]}</code>,
or even <code>{&#34;some_array&#34;: [4, 3, 2, 1]}</code> unless we add <code>{{unexpected}}</code>.</p>
<h3 dir="auto"><a id="user-content-runtime_value-extension" aria-hidden="true" href="#runtime_value-extension"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>runtime_value</code> extension</h3>
<p dir="auto"><code>runtime_value</code> would just run code (only <code>erlang</code> and <code>shell</code> supported for now),
while having access to <code>ParentKey</code>, <code>Actual</code>, <code>ItemsMode</code> and <code>Callbacks</code>,
and return the expected value and matched against the actual one.</p>
<div data-snippet-clipboard-copy-content="{
  &#34;rfc1123&#34;: {
    &#34;{{type}}&#34;: &#34;runtime_value&#34;,
    &#34;erlang&#34;: &#34;list_to_binary(httpd_util:rfc1123_date(calendar:now_to_datetime(erlang:now())))&#34;
  }
}"><pre><code>{
  &#34;rfc1123&#34;: {
    &#34;{{type}}&#34;: &#34;runtime_value&#34;,
    &#34;erlang&#34;: &#34;list_to_binary(httpd_util:rfc1123_date(calendar:now_to_datetime(erlang:now())))&#34;
  }
}
</code></pre></div>
<p dir="auto">or in array format</p>
<div data-snippet-clipboard-copy-content="{
  &#34;rfc1123&#34;: {
    &#34;{{type}}&#34;: &#34;runtime_value&#34;,
    &#34;erlang&#34;: [&#34;list_to_binary(&#34;,
               &#34;  httpd_util:rfc1123_date(&#34;,
               &#34;    calendar:now_to_datetime(&#34;,
               &#34;      erlang:now()&#34;,
               &#34;)))&#34;
              ]
  }
}"><pre><code>{
  &#34;rfc1123&#34;: {
    &#34;{{type}}&#34;: &#34;runtime_value&#34;,
    &#34;erlang&#34;: [&#34;list_to_binary(&#34;,
               &#34;  httpd_util:rfc1123_date(&#34;,
               &#34;    calendar:now_to_datetime(&#34;,
               &#34;      erlang:now()&#34;,
               &#34;)))&#34;
              ]
  }
}
</code></pre></div>
<h3 dir="auto"><a id="user-content-runtime_validation-extension" aria-hidden="true" href="#runtime_validation-extension"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><code>runtime_validation</code> extension</h3>
<p dir="auto"><code>runtime_validation</code> would just run code (only <code>erlang</code> and <code>shell</code> supported for now),
while having access to <code>ParentKey</code>, <code>Actual</code>, <code>ItemsMode</code> and <code>Callbacks</code>,
and return</p>
<ul dir="auto">
<li><code>{pass, [{&#34;Key&#34;, &#34;Value&#34;}]}</code> i.e. validation passed, store new param &#34;Key&#34; with value &#34;Value&#34;</li>
<li><code>{not_equal, {Key, Expected, Actual}}</code></li>
<li><code>{not_equal, {Key, Expected, Actual, [{&#34;more&#34;, &#34;info&#34;}]}}</code></li>
</ul>
<div data-snippet-clipboard-copy-content="{
  &#34;rfc1123&#34;: {
    &#34;{{type}}&#34;: &#34;runtime_validation&#34;,
    &#34;erlang&#34;: &#34;Expected = httpd_util:rfc1123_date(calendar:now_to_datetime(erlang:now())), case Actual =:= Expected of true -&gt; {pass, []}; false -&gt; {not_equal, {ParentKey, Expected, Actual}} end&#34;
  }
}"><pre><code>{
  &#34;rfc1123&#34;: {
    &#34;{{type}}&#34;: &#34;runtime_validation&#34;,
    &#34;erlang&#34;: &#34;Expected = httpd_util:rfc1123_date(calendar:now_to_datetime(erlang:now())), case Actual =:= Expected of true -&gt; {pass, []}; false -&gt; {not_equal, {ParentKey, Expected, Actual}} end&#34;
  }
}
</code></pre></div>
<p dir="auto">or in array format</p>
<div data-snippet-clipboard-copy-content="{
  &#34;rfc1123&#34;: {
    &#34;{{type}}&#34;: &#34;runtime_validation&#34;,
    &#34;erlang&#34;: [&#34;Expected = httpd_util:rfc1123_date(calendar:now_to_datetime(erlang:now())),&#34;,
               &#34;case Actual =:= Expected of&#34;,
               &#34;  true -&gt;&#34;,
               &#34;    {pass, []};&#34;,
               &#34;  false -&gt;&#34;,
               &#34;    {not_equal, {ParentKey, Expected, Actual}}&#34;,
               &#34;end&#34;
              ]
  }
}"><pre><code>{
  &#34;rfc1123&#34;: {
    &#34;{{type}}&#34;: &#34;runtime_validation&#34;,
    &#34;erlang&#34;: [&#34;Expected = httpd_util:rfc1123_date(calendar:now_to_datetime(erlang:now())),&#34;,
               &#34;case Actual =:= Expected of&#34;,
               &#34;  true -&gt;&#34;,
               &#34;    {pass, []};&#34;,
               &#34;  false -&gt;&#34;,
               &#34;    {not_equal, {ParentKey, Expected, Actual}}&#34;,
               &#34;end&#34;
              ]
  }
}
</code></pre></div>
<hr/>
<h2 dir="auto"><a id="user-content-command-line-interface" aria-hidden="true" href="#command-line-interface"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Command-Line Interface</h2>
<p dir="auto">You can either build the <code>bin/katt</code> executable yourself (just type <code>make</code>),
or you can use a Docker image a call it with <code>docker run ysoftwareab/katt</code>.</p>
<p dir="auto">You can fire up <code>katt</code> from the CLI, with</p>
<div dir="auto" data-snippet-clipboard-copy-content="bin/katt base_url=http://httpbin.org my_name=Joe your_name=Mike -- doc/example-httpbin.apib"><pre>bin/katt base_url=http://httpbin.org my_name=Joe your_name=Mike -- doc/example-httpbin.apib</pre></div>
<p dir="auto">If you want non-string params, use <code>:=</code> as a separator e.g. <code>my_int:=123</code>.</p>
<p dir="auto">You can also output the result in JSON format, with <code>--json</code>, and beautify it e.g. with python</p>
<div dir="auto" data-snippet-clipboard-copy-content="bin/katt --json base_url=http://httpbin.org my_name=Joe your_name=Mike -- doc/example-httpbin.apib | python -m json.tool"><pre>bin/katt --json base_url=http://httpbin.org my_name=Joe your_name=Mike -- doc/example-httpbin.apib <span>|</span> python -m json.tool</pre></div>
<p dir="auto">Check <code>bin/katt --help</code> for a full list of arguments.</p>
<hr/>
<h2 dir="auto"><a id="user-content-erlang-interface" aria-hidden="true" href="#erlang-interface"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Erlang Interface</h2>
<p dir="auto">A simple example that will make requests to a third party server:</p>
<div dir="auto" data-snippet-clipboard-copy-content="ERL_LIBS=_build/default/deps erl $(for f in _build/default/lib/*/ebin; do echo &#34;-pa $f&#34;; done) -noshell -eval &#39;
  application:ensure_all_started(katt),
  BlueprintFile = &#34;doc/example-httpbin.apib&#34;,
  Params = [{base_url, &#34;http://httpbin.org&#34;}, {my_name, &#34;Joe&#34;}, {your_name, &#34;Mike&#34;}],
  io:format(&#34;~p~n&#34;, [katt:run(BlueprintFile, Params)]).
&#39; -s init stop"><pre>ERL_LIBS=_build/default/deps erl <span><span>$(</span>for f <span>in</span> _build/default/lib/<span>*</span>/ebin<span>;</span> <span>do</span> <span>echo</span> <span><span>&#34;</span>-pa <span>$f</span><span>&#34;</span></span><span>;</span> done<span>)</span></span> -noshell -eval <span><span>&#39;</span></span>
<span>  application:ensure_all_started(katt),</span>
<span>  BlueprintFile = &#34;doc/example-httpbin.apib&#34;,</span>
<span>  Params = [{base_url, &#34;http://httpbin.org&#34;}, {my_name, &#34;Joe&#34;}, {your_name, &#34;Mike&#34;}],</span>
<span>  io:format(&#34;~p~n&#34;, [katt:run(BlueprintFile, Params)]).</span>
<span><span>&#39;</span></span> -s init stop</pre></div>
<p dir="auto">... or run the code passed to -eval from the Erlang shell, assuming that you
have started the Erlang shell from the repo&#39;s root directory with
<code>ERL_LIBS=_build/default/deps erl $(for f in _build/default/lib/*/ebin; do echo &#34;-pa $f&#34;; done)</code> .</p>
<p dir="auto"><code>katt:run</code> is to be called with</p>
<ul dir="auto">
<li><code>filename</code></li>
<li><code>params</code> (optional)
<ul dir="auto">
<li><code>base_url</code>, alternatively you can use the legacy
<ul dir="auto">
<li><code>protocol</code></li>
<li><code>hostname</code></li>
<li><code>port</code></li>
<li><code>base_path</code></li>
</ul>
</li>
<li><code>request_timeout</code></li>
<li><code>scenario_timeout</code></li>
</ul>
</li>
<li><code>callbacks</code> (optional)
<ul dir="auto">
<li><code>ext</code> to be called with <code>scope</code> (recall_body, parse, validate_body, validate_type)</li>
<li><code>recall</code> to be called with <code>syntax</code>, <code>text</code>, <code>params</code>, <code>callbacks</code></li>
<li><code>parse</code> to be called with <code>headers</code>, <code>body</code>, <code>params</code>, <code>callbacks</code></li>
<li><code>request</code> to be called with <code>request</code>, <code>params</code>, <code>callbacks</code></li>
<li><code>validate</code> to be called with <code>expected</code>, <code>actual</code>, <code>params</code>, <code>callbacks</code></li>
<li><code>progress</code> to be called with <code>transaction_result</code></li>
<li><code>text_diff</code> to be called with <code>text</code>, <code>text</code></li>
<li><code>transform</code> to be called with <code>id</code>, <code>katt_request</code> or <code>{katt_response, actual_response}</code>, <code>params</code>, <code>callbacks</code></li>
</ul>
</li>
</ul>
<hr/>
<h2 dir="auto"><a id="user-content-if-you-would-like-to-convert-a-har-file-to-an-apib-file" aria-hidden="true" href="#if-you-would-like-to-convert-a-har-file-to-an-apib-file"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>If you would like to convert a HAR file to an APIB file</h2>
<p dir="auto">The HTTP Archive format or HAR, is a JSON-formatted archive file format
for logging of a web browser&#39;s interaction with a site, <a href="https://dvcs.w3.org/hg/webperf/raw-file/tip/specs/HAR/Overview.html" rel="nofollow">standardized by
the Web Performance Working Group of the World Wide Web Consortium (W3C)</a>.</p>
<p dir="auto">For example, to convert <a href="https://github.com/for-GET/katt/blob/master/doc/example-teapot.har">doc/example-teapot.har</a>
into <a href="https://github.com/for-GET/katt/blob/master/doc/example-teapot.apib">doc/example-teapot.apib</a>, run:</p>
<div dir="auto" data-snippet-clipboard-copy-content="bin/katt from-har --apib -- doc/example-teapot.har &gt; doc/example-teapot.apib"><pre>bin/katt from-har --apib -- doc/example-teapot.har <span>&gt;</span> doc/example-teapot.apib</pre></div>
<h2 dir="auto"><a id="user-content-if-you-would-like-to-disable-json-support" aria-hidden="true" href="#if-you-would-like-to-disable-json-support"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>If you would like to disable JSON support</h2>
<div dir="auto" data-snippet-clipboard-copy-content="OnlyText = fun(_Scope) -&gt; [] end,
katt:run(&#34;text_only_scenario.apib&#34;, [], [{ext, OnlyText}])."><pre><span>OnlyText</span> <span>=</span> <span>fun</span>(<span>_Scope</span>) -&gt; [] <span>end</span>,
<span>katt</span>:<span>run</span>(<span><span>&#34;</span>text_only_scenario.apib<span>&#34;</span></span>, [], [{<span>ext</span>, <span>OnlyText</span>}]).</pre></div>
<h2 dir="auto"><a id="user-content-if-you-would-like-to-add-xml-support" aria-hidden="true" href="#if-you-would-like-to-add-xml-support"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>If you would like to add XML support</h2>
<div dir="auto" data-snippet-clipboard-copy-content="PlusXml =
  fun(recall_body) -&gt;
    [ fun custom_callbacks_xml:recall_body/4
    ] ++ katt_callbacks:ext(recall_body);
  fun(parse) -&gt;
    [ fun custom_callbacks_xml:parse/5
    ] ++ katt_callbacks:ext(parse);
  fun(validate_body) -&gt;
    [ fun custom_callbacks_xml:validate_body/3
    ] ++ katt_callbacks:ext(validate_body),
  fun(validate_type) -&gt;
    [ fun custom_callbacks_xml:validate_type/7
    ] ++ katt_callbacks:ext(validate_type),
katt:run(&#34;xml_scenario.apib&#34;, [], [{ext, PlusXml}])."><pre><span>PlusXml</span> <span>=</span>
  <span>fun</span>(<span>recall_body</span>) <span>-&gt;</span>
    [ <span>fun</span> <span>custom_callbacks_xml</span>:<span>recall_body</span>/<span>4</span>
    ] <span>++</span> <span>katt_callbacks</span>:<span>ext</span>(<span>recall_body</span>);
  <span>fun</span>(<span>parse</span>) <span>-&gt;</span>
    [ <span>fun</span> <span>custom_callbacks_xml</span>:<span>parse</span>/<span>5</span>
    ] <span>++</span> <span>katt_callbacks</span>:<span>ext</span>(<span>parse</span>);
  <span>fun</span>(<span>validate_body</span>) <span>-&gt;</span>
    [ <span>fun</span> <span>custom_callbacks_xml</span>:<span>validate_body</span>/<span>3</span>
    ] <span>++</span> <span>katt_callbacks</span>:<span>ext</span>(<span>validate_body</span>),
  <span>fun</span>(<span>validate_type</span>) -&gt;
    [ <span>fun</span> <span>custom_callbacks_xml</span>:<span>validate_type</span>/<span>7</span>
    ] <span>++</span> <span>katt_callbacks</span>:<span>ext</span>(<span>validate_type</span>),
<span>katt</span>:<span>run</span>(<span><span>&#34;</span>xml_scenario.apib<span>&#34;</span></span>, [], [{<span>ext</span>, <span>PlusXml</span>}]).</pre></div>
<p dir="auto">See <a href="https://github.com/for-GET/katt/blob/master/src/katt_callbacks_json.erl">src/katt_callbacks_json.erl</a> to see how your
<code>custom_callbacks_xml</code> module should be implemented.</p>
<h2 dir="auto"><a id="user-content-if-you-would-like-to-build-katt-with-almost-no-dependencies" aria-hidden="true" href="#if-you-would-like-to-build-katt-with-almost-no-dependencies"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>If you would like to build KATT with almost no dependencies</h2>
<div dir="auto" data-snippet-clipboard-copy-content="export KATT_BARE_MODE=true
# or
touch _build/BARE_MODE"><pre><span>export</span> KATT_BARE_MODE=true
<span><span>#</span> or</span>
touch _build/BARE_MODE</pre></div>
<hr/>
<h2 dir="auto"><a id="user-content-contributing" aria-hidden="true" href="#contributing"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Contributing</h2>
<p dir="auto">A pull-request is most welcome. Please make sure that the following criteria are
fulfilled before making your pull-request:</p>
<ul dir="auto">
<li>Include a description regarding what has been changed and why.</li>
<li>Make sure that the changed or added functionality (if you modify code) is
covered by unit tests.</li>
<li>Make sure that all unit tests pass.</li>
</ul>
<h2 dir="auto"><a id="user-content-license" aria-hidden="true" href="#license"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h2>
<p dir="auto"><a href="https://github.com/for-GET/katt/blob/master/LICENSE">Apache 2.0</a></p>
<p dir="auto">* Despite the &#34;Klarna&#34; mention, this repository is not affiliated with Klarna AB.
KATT was indeed born at Klarna, and Klarna AB holds copyright for parts of the code,
but it is now being maintained outside the company, by its original authors and new contributors.</p>
</article>
          </div></div>
  </body>
</html>
