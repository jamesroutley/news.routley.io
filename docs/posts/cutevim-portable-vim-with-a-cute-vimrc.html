<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/csdvrx/CuteVim">Original</a>
    <h1>Show HN: CuteVim ‚Äì¬†Portable Vim with a cute vimrc</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto">There&#39;s both a light and dark mode:
<a target="_blank" rel="noopener noreferrer" href="https://github.com/csdvrx/CuteVim/blob/main/screenshots/cute-vim.png"><img src="https://github.com/csdvrx/CuteVim/raw/main/screenshots/cute-vim.png" alt="screenshot of vim in dark mode inside wezterm over vim in light mode inside foot"/></a></p>
<p dir="auto">You can move the current line by holding the Alt key, and quickly change the appearance with the F8/F9/F10 keys:
<a target="_blank" rel="noopener noreferrer" href="https://github.com/csdvrx/CuteVim/blob/main/recordings/alt-keys-f8-f9-10.gif"><img src="https://github.com/csdvrx/CuteVim/raw/main/recordings/alt-keys-f8-f9-10.gif" alt="recording of vim in light mode using alt arrows to move the current line, then f8 f9 f10 to change the appearance" data-animated-image=""/></a></p>
<p dir="auto">You can also move blocks of text by selecting a range (first hold the Shift key then use the arrows) which can then be moved around by holding both Control and Shift and using the arrow keys:
<a target="_blank" rel="noopener noreferrer" href="https://github.com/csdvrx/CuteVim/blob/main/recordings/shift-arrows_then_ctrl-shift.gif"><img src="https://github.com/csdvrx/CuteVim/raw/main/recordings/shift-arrows_then_ctrl-shift.gif" alt="recording of vim in light mode using ctrl shift arrows to move a block of text" data-animated-image=""/></a></p>

<p dir="auto">Just <a target="_blank" rel="noopener noreferrer nofollow" href="https://raw.githubusercontent.com/csdvrx/CuteVim/main/release/cutevim-20231225.com"><img src="https://raw.githubusercontent.com/csdvrx/CuteVim/main/release/cutevim-20231225.com" alt="download the Christmas release"/></a> rename it vim.com and run it:</p>
<ul dir="auto">
<li>
<p dir="auto"><code>wget https://raw.githubusercontent.com/csdvrx/CuteVim/main/release/cutevim-20231225.com</code></p>
</li>
<li>
<p dir="auto"><code>cp cutevim-20231225.com vim.com</code></p>
</li>
<li>
<p dir="auto"><code>chmod +x ./vim.com</code></p>
</li>
<li>
<p dir="auto"><code>./vim.com -u /zip/usr/share/vim/vimrc</code></p>
</li>
</ul>
<p dir="auto">The last line is important: without it, if you already have a .vimrc, it would be read.</p>

<p dir="auto">CuteVim is a minimal configuration file (TODO: it&#39;s not all included in .vimrc yet) to give sensible defaults to Vim, like:</p>
<ul dir="auto">
<li>
<p dir="auto">a tabline on top, showing the filename and ISO timestamp, the encoding (with the unicode byte-order-mark if applicable), the position in a (x=column, y=row) space with the hexadecimal value of the character you see and the position within the file in box hexadecimal and percentage</p>
</li>
<li>
<p dir="auto">a line counter on the left, with both the current line number (hilighted and underlined to quickly see it) and the relative line numbers (dimmer) to type vim commands that apply to a length in lines (like <code>:d5</code> to delete the next 5 lines)</p>
</li>
<li>
<p dir="auto">saving backups of files in ~/.vim/backup every time you save, and keeping an undo-per file</p>
</li>
<li>
<p dir="auto">restoring the cursor position to where you last edited the file</p>
</li>
<li>
<p dir="auto">selecting lines with the shift keys and the arrows</p>
</li>
<li>
<p dir="auto">moving lines, blocks of lines or words with Alt and the arrows, and text or blocks of text with Ctrl-Shift and the arrows</p>
</li>
<li>
<p dir="auto">having separate functions for Control keys and their results, for example to separate Tab (which indent the current line) and Ctrl-I (which jumps the cursor position following the edit history, best used with Ctrl-O) thanks to <a href="https://invisible-island.net/xterm/modified-keys.html" rel="nofollow">xterm &#39;modifyotherkeys&#39; (MOK)</a></p>
</li>
<li>
<p dir="auto">showing otherwise invisible characters (like tabs and control codes, or spaces on empty lines) using colors to avoid breaking copy-paste</p>
</li>
<li>
<p dir="auto">playing ball with Wayland by having one shared copy-paste buffer</p>
</li>
<li>
<p dir="auto">overriding dark themes to replace the uggly muddy darkgreys by a pure #000000 black: this is ideal on OLED screens which can do pitchblack and give you a higher constrast</p>
</li>
</ul>

<p dir="auto">If you don&#39;t like readline or Windows shortcuts, some of my choices may be questionable.</p>
<p dir="auto">Fortunately, the .vimrc should be easy to understand thanks to all the comments, and you should be able to adjust it to match your preferences.</p>
<p dir="auto">PS: If you don&#39;t have an OLED screen, don&#39;t comment out <code>autocmd ColorScheme * call OLED_Black()</code> around line 1162. Instead, go buy an OLED screen! It&#39;s really worth it!!</p>

<p dir="auto">Press F8 to show hidden characters, F9 to cycle through the themes, F10 to toggle the rainbow indent</p>
<p dir="auto">The .vimrc is made to recognize which terminal you are using, and start in either a light or dark profile: I use both foot (light) and wezterm (dark).</p>
<p dir="auto">If you use Windows Terminal, you can also configure UUIDs to recognize the profile</p>

<p dir="auto">Because I feel bad when Ctrl-A doesn&#39;t get me to the beginning of the line, and Ctrl-E to the End.</p>
<p dir="auto">I like it better when Ctrl-K also cuts from the cursor to the end of the line, and Ctrl-U to the beginning.</p>
<p dir="auto">I&#39;m fully happy when all the Ctrl keys &#34;work as they should&#34;, like:</p>
<ul dir="auto">
<li>
<p dir="auto">if Control-Arrows can jump around words and lines,</p>
</li>
<li>
<p dir="auto">while both Ctrl-W and Ctrl-Backspace removes the previous word,</p>
</li>
<li>
<p dir="auto">and both Ctrl-S and Ctrl-Delete remove the next word</p>
</li>
</ul>
<p dir="auto">I often have different shortcuts to do the same thing because I&#39;m whimsical and I like to use one or the other depending on the mood :)</p>

<p dir="auto">I use Wayland (to be precise, <a href="https://github.com/hyprwm/Hyprland">the best composer of all for a keyboard centric workflow: hyprland</a>) so Xorg is not well tested.</p>
<p dir="auto">I will try add other functions for Xorg if the defaults don&#39;t work.</p>

<p dir="auto">I wanted to have a cute editor for <a href="http://github.com/csdvrx/cosmopolinux">‚ò™ ‚òÆ$m‚ú°‚úùüçèlinux</a> without having to carry too many files around, because I sometimes forget to take them in a tarball or a zip file.</p>
<p dir="auto">So CuteVim configuration mostly fit within .vimrc, the one file I will not forget to take!</p>
<p dir="auto">It&#39;s also much easier to make a release: it only takes <code>./zip -r vim.com usr/share/vim/vimrc</code> to refresh it.</p>

<p dir="auto">Use <code>refresh.sh</code> which does the following:</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-get-clean-binaries" aria-hidden="true" tabindex="-1" href="#get-clean-binaries"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Get clean binaries</h2>
<div data-snippet-clipboard-copy-content="rm -f vim.com zip.com unzip.com
wget https://cosmo.zip/pub/cosmos/bin/vim -O vim.com
wget https://cosmo.zip/pub/cosmos/bin/zip -O zip.com
wget https://cosmo.zip/pub/cosmos/bin/unzip -O unzip.com"><pre><code>rm -f vim.com zip.com unzip.com
wget https://cosmo.zip/pub/cosmos/bin/vim -O vim.com
wget https://cosmo.zip/pub/cosmos/bin/zip -O zip.com
wget https://cosmo.zip/pub/cosmos/bin/unzip -O unzip.com
</code></pre></div>
<h2 tabindex="-1" dir="auto"><a id="user-content-add-vimrc-in-the-right-place" aria-hidden="true" tabindex="-1" href="#add-vimrc-in-the-right-place"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>Add vimrc in the right place</h2>
<div data-snippet-clipboard-copy-content="./zip -r vim.com usr/share/vim/vimrc"><pre><code>./zip -r vim.com usr/share/vim/vimrc
</code></pre></div>
<h2 tabindex="-1" dir="auto"><a id="user-content-how-do-we-know-its-the-right-place" aria-hidden="true" tabindex="-1" href="#how-do-we-know-its-the-right-place"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>How do we know it&#39;s the right place?</h2>
<p dir="auto">First, check what&#39;s the default path for this version</p>
<div data-snippet-clipboard-copy-content="./vim.com --version | grep usr/share"><pre><code>./vim.com --version | grep usr/share
</code></pre></div>
<p dir="auto">You&#39;ll see <code>fall-back for $VIM: &#34;/zip/usr/share/vim&#34;</code></p>
<p dir="auto">Now, check with <code>--strace</code> what&#39;s happening:</p>
<div data-snippet-clipboard-copy-content="vim.com --strace 2&gt; vim.strace.txt
# (then type :q!)"><pre><code>vim.com --strace 2&gt; vim.strace.txt
# (then type :q!)
</code></pre></div>
<p dir="auto">Use grep on the strace file to skip to the important parts:</p>
<div data-snippet-clipboard-copy-content="grep zip.usr.share.vim vim.strace.txt |grep defaults.vim | less

grep zip.usr.share.vim vim.vanilla.strace.txt |grep vimrc"><pre><code>grep zip.usr.share.vim vim.strace.txt |grep defaults.vim | less

grep zip.usr.share.vim vim.vanilla.strace.txt |grep vimrc
</code></pre></div>
<p dir="auto">You&#39;ll see:</p>
<p dir="auto">grep zip.usr.share.vim vim.vanilla.strace.txt |grep vimrc</p>
<div data-snippet-clipboard-copy-content="SYS 1646170 1646170         12&#39;999&#39;983 fstatat(AT_FDCWD, &#34;/zip/usr/share/vim/vim90/defaults.vim&#34;, [{.st_size=4&#39;952, .st_blocks=2&#39;560/512, .st_mode=0100644, .st_dev=0x172120, .st_ino=0x1097916, .st_blksize=65&#39;536}], 0) ‚Üí 0 ENOTSUP
SYS 1646170 1646170         13&#39;032&#39;512 openat(AT_FDCWD, &#34;/zip/usr/share/vim/vim90/defaults.vim&#34;, O_RDONLY) ‚Üí 3 ENOTSUP"><pre><code>SYS 1646170 1646170         12&#39;999&#39;983 fstatat(AT_FDCWD, &#34;/zip/usr/share/vim/vim90/defaults.vim&#34;, [{.st_size=4&#39;952, .st_blocks=2&#39;560/512, .st_mode=0100644, .st_dev=0x172120, .st_ino=0x1097916, .st_blksize=65&#39;536}], 0) ‚Üí 0 ENOTSUP
SYS 1646170 1646170         13&#39;032&#39;512 openat(AT_FDCWD, &#34;/zip/usr/share/vim/vim90/defaults.vim&#34;, O_RDONLY) ‚Üí 3 ENOTSUP
</code></pre></div>
<p dir="auto">And earlier than this:</p>
<div data-snippet-clipboard-copy-content="SYS 1646170 1646170         12&#39;917&#39;060 fstatat(AT_FDCWD, &#34;/zip/usr/share/vim/vimrc&#34;, [n/a], 0) ‚Üí -1 ENOENT
SYS 1646170 1646170         12&#39;920&#39;202 openat(AT_FDCWD, &#34;/zip/usr/share/vim/vimrc&#34;, O_RDONLY) ‚Üí -1 ENOENT"><pre><code>SYS 1646170 1646170         12&#39;917&#39;060 fstatat(AT_FDCWD, &#34;/zip/usr/share/vim/vimrc&#34;, [n/a], 0) ‚Üí -1 ENOENT
SYS 1646170 1646170         12&#39;920&#39;202 openat(AT_FDCWD, &#34;/zip/usr/share/vim/vimrc&#34;, O_RDONLY) ‚Üí -1 ENOENT
</code></pre></div>
<p dir="auto">This is why we do <code>./zip -r vim.com usr/share/vim/vimrc</code>, to embed a vimrc from <code>./usr/share/vim/vimrc</code> inside the zip part of the APE, which maps to the path <code>/zip/usr/share/vim/vimrc</code></p>
<p dir="auto">Running vim.com again with strace, the file is seen:</p>
<div data-snippet-clipboard-copy-content=" SYS 1650340 1650340        114&#39;662&#39;106 fstatat(AT_FDCWD, &#34;/zip/usr/share/vim/vimrc&#34;, [{.st_size=42&#39;484, .st_blocks=14&#39;848/512, .st_mode=0100644, .st_dev=0x7c98aa, .st_ino=0x10b712f, .st_blksize=65&#39;536}], 0) ‚Üí 0 ENOTSUP"><pre><code> SYS 1650340 1650340        114&#39;662&#39;106 fstatat(AT_FDCWD, &#34;/zip/usr/share/vim/vimrc&#34;, [{.st_size=42&#39;484, .st_blocks=14&#39;848/512, .st_mode=0100644, .st_dev=0x7c98aa, .st_ino=0x10b712f, .st_blksize=65&#39;536}], 0) ‚Üí 0 ENOTSUP
</code></pre></div>
<p dir="auto">42484 is the size, ENOTSUP is just because of O_RDONLY</p>

<p dir="auto">CuteVim still depends on ~/.vim/after/syntax for italics within .vim files, and ~/.vim/colors for the <a href="https://en.wikipedia.org/wiki/Solarized" rel="nofollow">default Solarized theme</a></p>
<p dir="auto">I&#39;ll try to eventually fit everything inside the .vimrc (or at least switch to a default vim there if missing ~/.vim/colors/solarized*.vim), which will unify the APE and the non-APE experience</p>
</article>
          </div></div>
  </body>
</html>
