<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://tylercipriani.com/blog/2023/03/31/private-ish-github-repos/">Original</a>
    <h1>GitHub Private Repos Considered Private-­Ish</h1>
    
    <div id="readability-page-1" class="page"><article class="page">







<div id="pagebody">

<section id="content" role="main">
<blockquote>
<p>This week, we discovered that GitHub.com’s RSA SSH private key was
briefly exposed in a public GitHub repository.</p>
<p>– <a href="https://github.blog/2023-03-23-we-updated-our-rsa-ssh-host-key/">GitHub’s
“We updated our RSA SSH host key” blog</a>, 2023-03-23</p>
</blockquote>
<p>GitHub private repos lull us into lazy thinking.</p>
<p>We cram our secrets into git, then shove it off to the most expansive
code forge in the history of humanity, and <strong>most of the time:
everything’s fine.</strong></p>
<p>But <a href="https://github.blog/2023-03-23-we-updated-our-rsa-ssh-host-key/">GitHub’s
ssh host key leak</a> last week demonstrates that <strong>private repos
are, at best, private-ish</strong>.</p>
<p>Secrets get out. <a href="https://www.youtube.com/watch?v=kiVVzxoPTtg">🦖 Life finds a
way</a>.</p>
<section id="how-repos-become-public">
<h2>How repos become public 💀</h2>
<p>There are oodles of trivial ways you can spill your git secrets to
the world.</p>
<ul>
<li>📢 <strong>Publish your <code>.git</code> directory</strong> –
Exposing the entire history of your code through server misconfiguration
or deployment mistakes is <a href="https://www.google.com/search?q=%22.git%22+intitle%3A%22index+of%22">alarmingly.
common.</a></li>
<li>🎣 <strong>Get phished</strong> – Even cool kids can have their
passwords stolen. Examples in the wild:
<ul>
<li><a href="https://slack.com/intl/en-gb/blog/news/slack-security-update">Slack</a></li>
<li><a href="https://dropbox.tech/security/a-recent-phishing-campaign-targeting-dropbox">Dropbox</a>.</li>
</ul></li>
<li>🥄 <strong>Bad fork</strong> – Especially true with the
GitHub/GitLab model—a developer forks a private repo and makes it
public. Examples in the wild:
<ul>
<li><a href="https://www.wired.com/story/uber-paid-off-hackers-to-hide-a-57-million-user-data-breach/">Uber’s
“$57M” data breach</a></li>
<li><a href="https://hackerone.com/reports/694931">Equifax
incident</a></li>
<li><a href="https://hackerone.com/reports/716292">Starbucks</a></li>
</ul></li>
<li>🖱️ <strong>Click the wrong button</strong> – You’re a handful of
button clicks away from making a private repo public—miscommunication or
confusing UI can leave you exposed.</li>
</ul>
</section>
<section id="move-fast-leak-things">
<h2>Move fast, leak things 🚰</h2>
<p>Most of the people at GitHub and GitLab are humans. And humans make
mistakes (especially when they’re on a deadline).</p>
<p>Back in 2016, GitHub had an incident where private repos <a href="https://github.blog/2016-10-28-incident-report-inadvertent-private-repository-disclosure/">exposed
to unauthorized users</a>.</p>
<p>And GitLab has had at least three incidents matching the search
“GitLab+Private repos” in the Common Vulnerabilities and Exposures (CVE)
database (<a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-22167">1</a>,
<a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-13277">2</a>,
<a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-13303">3</a>).</p>
</section>
<section id="mitigations">
<h2>Mitigations 🛠️</h2>
<p>In the spirit of <a href="https://medium.com/@jpaulreed/why-blameless-postmortems-might-feel-wrong-cbeee00d51b2">blame-aware
postmortems</a>—what can we do to fix this?</p>
<p><strong>Easy fixes</strong></p>
<ul>
<li>Keep your <code>.git</code> directory to yourself. Avoid deploying
it. Configure your webserver to deny access to it if you do.</li>
<li>Setup <a href="https://docs.github.com/en/authentication/securing-your-account-with-two-factor-authentication-2fa/accessing-github-using-two-factor-authentication">two-factor
authentication</a>, like, Right. Now. Bonus points if your second factor
is a hardware key.</li>
<li>Audit your access control on your forge of choice.</li>
</ul>
<p><strong>Impossible fixes</strong></p>
<p>It’s impossible to prevent a zero-day that exposes your private
repo.</p>
<p>So, if you’re worried about it: <strong>stop putting sensitive data
into private repositories</strong>.</p>
<p>Especially the kind that would damage your reputation if it got
out:</p>
<ul>
<li>Passwords/production credentials</li>
<li>Personally identifying information (PII) of users</li>
<li>Any code, data, or metadata you expect to be permanently
private</li>
</ul>
<p>You can set a policy and ensure developers use secret scanners as
pre-commit git hooks. Inject secrets into your application at
runtime.</p>
<p>Beyond runtime secrets? Keep that junk out of git.</p>
</section>

</section>









</div>



</article></div>
  </body>
</html>
