<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://cachemon.github.io/SIEVE-website/blog/2023/12/17/sieve-is-simpler-than-lru/">Original</a>
    <h1>Sieve is simpler than LRU</h1>
    
    <div id="readability-page-1" class="page"><div data-md-component="container"> <main data-md-component="main"> <div>   <div data-md-component="content">  <article>  <p>Caching is a method of storing temporary data for quick access to keep the online world running smoothly. But with limited space, comes a critical decision: what to keep and what to discard. This is where <strong>eviction algorithms</strong> come into play. Our team recently designed a new cache eviction algorithm called <strong>SIEVE</strong>: it is both very effective and simple with just one FIFO queue.</p> <!-- more --> <h2 id="the-importance-of-simplicity">The Importance of Simplicity<a href="#the-importance-of-simplicity" title="Permanent link">¶</a></h2> <p>In the world of cache eviction algorithms, there&#39;s something to be said for keeping it simple. Complex algorithms, for all their sophistication, can bring their own set of headaches. They can be tricky to debug, sometimes unexpectedly drag down efficiency, and even put a damper on throughput and scalability because of their higher computational needs. </p> <p>On the flip side, simpler eviction methods, though maybe not as flashy in managing cache, have a knack for improving system throughput and scalability. Just look at examples like <a href="https://www.usenix.org/conference/nsdi13/technical-sessions/presentation/fan">MemC3</a> and <a href="https://www.usenix.org/conference/nsdi21/presentation/yang-juncheng">Segcache</a>. They rely on straightforward approaches like FIFO and manage to significantly boost system performance. It turns out, sometimes, the best move is to keep things uncomplicated!</p> <h2 id="meet-sieve-the-harmony-of-simplicity-and-efficiency">Meet SIEVE: The Harmony of Simplicity and Efficiency<a href="#meet-sieve-the-harmony-of-simplicity-and-efficiency" title="Permanent link">¶</a></h2> <p>SIEVE is an algorithm that decides what to keep in the cache and what to discard. But unlike its predecessors, it does this with a flair for simplicity and efficiency.</p> <h3 id="a-technical-walkthrough-of-sieve">A Technical Walkthrough of SIEVE<a href="#a-technical-walkthrough-of-sieve" title="Permanent link">¶</a></h3> <p>SIEVE is built on a FIFO queue, supplemented by a &#34;hand&#34; pointer that navigates through the cache. Each object in the queue has a bit indicating whether it&#39;s been visited. On a cache hit, SIEVE marks the object as visited. On a cache miss, SIEVE checks the object pointed to by the hand. If the object has been visited, its visited bit is reset, and the hand moves to the next position, keeping the retained object in its original position in the queue. This continues until an unvisited object is found and evicted. After eviction, the hand moves to the next position.</p> <figure> <p><img src="https://cachemon.github.io/SIEVE-website/blog/assets/sieve/sieve_diagram_animation.gif" alt="sieve-diagram-gif"/> </p> <figcaption>An iilustration of SIEVE</figcaption> </figure> <p>At first glance, SIEVE is similar to CLOCK/Second Chance/FIFO-Reinsertion - <em>Note that they are different implementations of the same eviction algorithm</em>. Each algorithm maintains a single queue in which each object is associated with a visited bit to track its access status. Visited objects are retained (also called &#34;survived&#34;) during an eviction. Notably, new objects are inserted at the head of the queue in both SIEVE and FIFO-Reinsertion. However, the hand in SIEVE moves from the tail to the head over time, whereas the hand in FIFO-Reinsertion stays at the tail. <strong>The key difference is where a retained object is kept.</strong> SIEVE keeps it in the old position, while FIFO-Reinsertion inserts it at the head, together with newly inserted objects.</p> <figure> <p><img src="https://cachemon.github.io/SIEVE-website/blog/assets/sieve/sieve-diagram.png" alt="figure-sieve-efficiency-small"/> </p> <figcaption>SIEVE vs. CLOCK</figcaption> </figure> <!-- ```bash title="SIEVE pseudocode"
Input: The request x, doubly-linked queue T, cache size C, hand p
1: if x is in T then                            # Cache Hit
2:     x.visited <- true
3: else                                         # Cache Miss
4:     if |T| = C then                          # Cache Full
5:         obj <- p
6:         if obj is NULL then
7:             obj <- tail of T
8:         while obj.visited = true do
9:             obj.visited <- false
10:            obj <- obj.prev
11:            if obj is NULL then
12:                obj <- tail of T
13:        p <- obj.prev
14:        Discard obj in T                     # Eviction
15:    Insert x in the head of T
16:    x.visited <- false                       # Insertion
``` --> <p>For anyone interested, see the <a href="#sieve-cache-code">sieve cache implementation code</a> at the end of this blog post for a detailed example.</p> <h3 id="sieves-real-world-impact-a-performance-breakdown">SIEVE&#39;s Real-World Impact: A Performance Breakdown<a href="#sieves-real-world-impact-a-performance-breakdown" title="Permanent link">¶</a></h3> <p>SIEVE&#39;s practicality shines in its real-world application. </p> <h4 id="efficiency">Efficiency<a href="#efficiency" title="Permanent link">¶</a></h4> <p>Our evaluation, involving over 1559 traces from diverse datasets that together contain 247,017 million requests to 14,852 million objects, show that SIEVE outperforms all state-of-the-art eviction algorithms on more than 45% of the traces.</p> <p>The following figure shows the miss ratio reduction (from FIFO) of different algorithms across traces. The whiskers on the boxplots are defined using p10 and p90, allowing us to disregard extreme data and concentrate on the typical cases. SIEVE demonstrates the most significant reductions across nearly all percentiles. For example, SIEVE reduces FIFO’s miss ratio by more than 42% on 10% of the traces (top whisker) with a mean of 21% on the one of the largest CDN company dataset. As a comparison, all other algorithms have smaller reductions on this dataset. Compared to advanced algorithms, e.g., ARC, SIEVE reduces ARC miss ratio by up to 63.2% with a mean of 1.5%.</p> <!-- While SIEVE excels with large caches, it faces competition at smaller sizes from algorithms like TwoQ and LHD. This is due to their ability to quickly discard low-value objects, a challenge for SIEVE when cache space is limited. However, at larger cache sizes, where real-world applications often operate, SIEVE consistently outperforms its peers. --> <figure> <p><img src="https://cachemon.github.io/SIEVE-website/blog/assets/sieve/efficiency-large.png" alt="figure-sieve-efficiency-large"/></p> <!-- <figcaption>Image caption</figcaption> --> </figure> <h4 id="simplicity">Simplicity<a href="#simplicity" title="Permanent link">¶</a></h4> <p>SIEVE is very simple. We delved into the most popular cache libraries and systems across five diverse programming languages: C++, Go, JavaScript, Python, and Rust. </p> <p>Despite the varied ways LRU is implemented across these libraries - some opt for doubly-linked lists, others for arrays - integrating SIEVE turned out to be a breeze. Whether it&#39;s the structural differences or the coding style, SIEVE slotted in smoothly. As illustrated in the Table, the required code changes to replace LRU with SIEVE were minimal. In all cases, it took no more than 21 lines of code modifications (tests not included).</p> <figure> <table> <thead> <tr> <th>Cache library</th> <th>Language</th> <th>Lines</th> <th>Hour of Work</th> </tr> </thead> <tbody> <tr> <td><a href="https://github.com/cacheMon/groupcache">groupcache</a></td> <td>Golang</td> <td>21</td> <td>&lt;1</td> </tr> <tr> <td><a href="https://github.com/cacheMon/mnemonist">mnemonist</a></td> <td>Javascript</td> <td>12</td> <td>1</td> </tr> <tr> <td><a href="https://github.com/cacheMon/lru-rs">lru-rs</a></td> <td>Rust</td> <td>16</td> <td>1</td> </tr> <tr> <td><a href="https://github.com/cacheMon/lru-dict">lru-dict</a></td> <td>Python + C</td> <td>21</td> <td>&lt;1</td> </tr> </tbody> </table> </figure> <h4 id="throughput">Throughput<a href="#throughput" title="Permanent link">¶</a></h4> <p>Besides efficiency, throughput is the other important metric for caching systems. Although we have implemented SIEVE in five different libraries, we focus on Cachelib’s results.</p> <p>Compared to these LRU-based algorithms, SIEVE does not require “promotion” at each cache hit. Therefore, it is faster and more scalable. At a single thread, SIEVE is 16% (17%) faster than the optimized LRU (TwoQ) and on the tested traces. At 16 threads, SIEVE shows more than 2× higher throughput than the optimized LRU and TwoQ.</p> <!-- In Cachelib, LRU and TwoQ have been tweaked for better scalability. With smart moves like limiting promotion frequency and introducing lock combining, we've seen a 6× increase in throughput at 16 threads, a significant jump from just one thread on the Twitter trace. On the other hand, the classic, unoptimized LRU hits its limit at 4 threads.

SIEVE takes a different approach, eliminating the need for promotion with each cache hit. This simplicity pays off. On a single thread, SIEVE is 16% faster than the spruced-up LRU and 17% quicker than TwoQ on both traces. When ramped up to 16 threads, SIEVE's throughput more than doubles compared to these algorithms on the Meta trace, showcasing its effortless scalability. --> <h3 id="sieve-is-beyond-an-eviction-algorithm">SIEVE is beyond an eviction algorithm<a href="#sieve-is-beyond-an-eviction-algorithm" title="Permanent link">¶</a></h3> <p>SIEVE isn&#39;t just playing the part of a cache eviction algorithm; it&#39;s stepping up as a cache design superstar. Think of it like giving a fresh spin to classics. We&#39;ve plugged SIEVE into <a href="https://www.usenix.org/conference/hotstorage18/presentation/vietri">LeCaR</a>, <a href="https://www.vldb.org/conf/1994/P439.PDF">TwoQ</a>, <a href="https://www.usenix.org/conference/fast-03/arc-self-tuning-low-overhead-replacement-cache">ARC</a>, and <a href="https://dl.acm.org/doi/10.1145/3600006.3613147">S3-FIFO</a>, swapping out their LRU or FIFO queue for a SIEVE one.</p> <p>Swapping LRU with SIEVE in these algorithms isn&#39;t just a minor tweak; it&#39;s more like giving them a turbo boost. Take ARC-SIEVE, for instance – it&#39;s turning heads with its slick efficiency, especially noticeable across different cache sizes. We didn&#39;t stop there. We pushed SIEVE a bit further by letting it peek into the future – well, sort of. We tested how well it could guess the next request. It turns out, with this extra bit of foresight, SIEVE is nailing it, outperforming the rest in almost all scenarios.</p> <figure> <p><img src="https://cachemon.github.io/SIEVE-website/blog/assets/sieve/sieve_queue_all_large.svg" alt="figure-sieve-efficiency-small"/> </p> <!-- <figcaption>An iilustration of SIEVE</figcaption> --> </figure> <h3 id="sieve-is-not-scan-resistant">SIEVE is not scan-resistant<a href="#sieve-is-not-scan-resistant" title="Permanent link">¶</a></h3> <p>Besides web cache workloads, we evaluated SIEVE on some block cache workloads. However, we find that SIEVE sometimes shows a miss ratio higher than LRU. The primary reason for this discrepancy is that SIEVE is not scan-resistant. In block cache workloads, which frequently feature scans, popular objects often intermingle with objects from scans. Consequently, both types of objects are rapidly evicted after insertion.</p> <p><a href="https://brooker.co.za/blog/2023/12/15/sieve.html">Marc&#39;s latest blog post</a> has explored the idea of making sieve scan-resistant by adding a small counter for each item. It shows some wins and losses on different workloads. We&#39;re really excited to see how this plays out in the real world. If you&#39;re an engineer, a tech enthusiast, or just someone who enjoys playing around with systems, we&#39;d absolutely love for you to give SIEVE a whirl in your setups. </p> <h2 id="wed-love-to-hear-from-you">We&#39;d Love to Hear from you<a href="#wed-love-to-hear-from-you" title="Permanent link">¶</a></h2> <p>As we wrap up this blog post, we would like to give a big shoutout to the people and organizations that open-sourced and shared the traces. We believe SIEVE presents an intriguing opportunity to explore and enhance the efficiency of web caching. <strong>If you have questions, thoughts, or if you&#39;ve given SIEVE a try, we&#39;re eager to hear from you! Don&#39;t hesitate to get in touch :-)</strong></p> <h2 id="appendix">Appendix<a href="#appendix" title="Permanent link">¶</a></h2> <div id="sieve-cache-code"> <div><p><span>SIEVE Python Implementation</span></p><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span>class</span> <span>Node</span><span>:</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    <span>def</span> <span>__init__</span><span>(</span><span>self</span><span>,</span> <span>value</span><span>):</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>        <span>self</span><span>.</span><span>value</span> <span>=</span> <span>value</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>        <span>self</span><span>.</span><span>visited</span> <span>=</span> <span>False</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>        <span>self</span><span>.</span><span>prev</span> <span>=</span> <span>None</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>        <span>self</span><span>.</span><span>next</span> <span>=</span> <span>None</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span>class</span> <span>SieveCache</span><span>:</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>    <span>def</span> <span>__init__</span><span>(</span><span>self</span><span>,</span> <span>capacity</span><span>):</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>        <span>self</span><span>.</span><span>capacity</span> <span>=</span> <span>capacity</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>        <span>self</span><span>.</span><span>cache</span> <span>=</span> <span>{}</span>  <span># To store cache items as {value: node}</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>        <span>self</span><span>.</span><span>head</span> <span>=</span> <span>None</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>        <span>self</span><span>.</span><span>tail</span> <span>=</span> <span>None</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>        <span>self</span><span>.</span><span>hand</span> <span>=</span> <span>None</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>        <span>self</span><span>.</span><span>size</span> <span>=</span> <span>0</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>    <span>def</span> <span>_add_to_head</span><span>(</span><span>self</span><span>,</span> <span>node</span><span>):</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>        <span>node</span><span>.</span><span>next</span> <span>=</span> <span>self</span><span>.</span><span>head</span>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>        <span>node</span><span>.</span><span>prev</span> <span>=</span> <span>None</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>        <span>if</span> <span>self</span><span>.</span><span>head</span><span>:</span>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>            <span>self</span><span>.</span><span>head</span><span>.</span><span>prev</span> <span>=</span> <span>node</span>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>        <span>self</span><span>.</span><span>head</span> <span>=</span> <span>node</span>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>        <span>if</span> <span>self</span><span>.</span><span>tail</span> <span>is</span> <span>None</span><span>:</span>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>            <span>self</span><span>.</span><span>tail</span> <span>=</span> <span>node</span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>    <span>def</span> <span>_remove_node</span><span>(</span><span>self</span><span>,</span> <span>node</span><span>):</span>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>        <span>if</span> <span>node</span><span>.</span><span>prev</span><span>:</span>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a>            <span>node</span><span>.</span><span>prev</span><span>.</span><span>next</span> <span>=</span> <span>node</span><span>.</span><span>next</span>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>        <span>else</span><span>:</span>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>            <span>self</span><span>.</span><span>head</span> <span>=</span> <span>node</span><span>.</span><span>next</span>
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a>        <span>if</span> <span>node</span><span>.</span><span>next</span><span>:</span>
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a>            <span>node</span><span>.</span><span>next</span><span>.</span><span>prev</span> <span>=</span> <span>node</span><span>.</span><span>prev</span>
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a>        <span>else</span><span>:</span>
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a>            <span>self</span><span>.</span><span>tail</span> <span>=</span> <span>node</span><span>.</span><span>prev</span>
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a>
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a>    <span>def</span> <span>_evict</span><span>(</span><span>self</span><span>):</span>
</span><span id="__span-0-37"><a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a>        <span>obj</span> <span>=</span> <span>self</span><span>.</span><span>hand</span> <span>if</span> <span>self</span><span>.</span><span>hand</span> <span>else</span> <span>self</span><span>.</span><span>tail</span>
</span><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a>        <span>while</span> <span>obj</span> <span>and</span> <span>obj</span><span>.</span><span>visited</span><span>:</span>
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a>            <span>obj</span><span>.</span><span>visited</span> <span>=</span> <span>False</span>
</span><span id="__span-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40" href="#__codelineno-0-40"></a>            <span>obj</span> <span>=</span> <span>obj</span><span>.</span><span>prev</span> <span>if</span> <span>obj</span><span>.</span><span>prev</span> <span>else</span> <span>self</span><span>.</span><span>tail</span>
</span><span id="__span-0-41"><a id="__codelineno-0-41" name="__codelineno-0-41" href="#__codelineno-0-41"></a>        <span>self</span><span>.</span><span>hand</span> <span>=</span> <span>obj</span><span>.</span><span>prev</span> <span>if</span> <span>obj</span><span>.</span><span>prev</span> <span>else</span> <span>None</span>
</span><span id="__span-0-42"><a id="__codelineno-0-42" name="__codelineno-0-42" href="#__codelineno-0-42"></a>        <span>del</span> <span>self</span><span>.</span><span>cache</span><span>[</span><span>obj</span><span>.</span><span>value</span><span>]</span>
</span><span id="__span-0-43"><a id="__codelineno-0-43" name="__codelineno-0-43" href="#__codelineno-0-43"></a>        <span>self</span><span>.</span><span>_remove_node</span><span>(</span><span>obj</span><span>)</span>
</span><span id="__span-0-44"><a id="__codelineno-0-44" name="__codelineno-0-44" href="#__codelineno-0-44"></a>        <span>self</span><span>.</span><span>size</span> <span>-=</span> <span>1</span>
</span><span id="__span-0-45"><a id="__codelineno-0-45" name="__codelineno-0-45" href="#__codelineno-0-45"></a>
</span><span id="__span-0-46"><a id="__codelineno-0-46" name="__codelineno-0-46" href="#__codelineno-0-46"></a>    <span>def</span> <span>access</span><span>(</span><span>self</span><span>,</span> <span>x</span><span>):</span>
</span><span id="__span-0-47"><a id="__codelineno-0-47" name="__codelineno-0-47" href="#__codelineno-0-47"></a>        <span>if</span> <span>x</span> <span>in</span> <span>self</span><span>.</span><span>cache</span><span>:</span>  <span># Cache Hit</span>
</span><span id="__span-0-48"><a id="__codelineno-0-48" name="__codelineno-0-48" href="#__codelineno-0-48"></a>            <span>node</span> <span>=</span> <span>self</span><span>.</span><span>cache</span><span>[</span><span>x</span><span>]</span>
</span><span id="__span-0-49"><a id="__codelineno-0-49" name="__codelineno-0-49" href="#__codelineno-0-49"></a>            <span>node</span><span>.</span><span>visited</span> <span>=</span> <span>True</span>
</span><span id="__span-0-50"><a id="__codelineno-0-50" name="__codelineno-0-50" href="#__codelineno-0-50"></a>        <span>else</span><span>:</span>  <span># Cache Miss</span>
</span><span id="__span-0-51"><a id="__codelineno-0-51" name="__codelineno-0-51" href="#__codelineno-0-51"></a>            <span>if</span> <span>self</span><span>.</span><span>size</span> <span>==</span> <span>self</span><span>.</span><span>capacity</span><span>:</span>  <span># Cache Full</span>
</span><span id="__span-0-52"><a id="__codelineno-0-52" name="__codelineno-0-52" href="#__codelineno-0-52"></a>                <span>self</span><span>.</span><span>_evict</span><span>()</span>  <span># Eviction</span>
</span><span id="__span-0-53"><a id="__codelineno-0-53" name="__codelineno-0-53" href="#__codelineno-0-53"></a>            <span>new_node</span> <span>=</span> <span>Node</span><span>(</span><span>x</span><span>)</span>
</span><span id="__span-0-54"><a id="__codelineno-0-54" name="__codelineno-0-54" href="#__codelineno-0-54"></a>            <span>self</span><span>.</span><span>_add_to_head</span><span>(</span><span>new_node</span><span>)</span>
</span><span id="__span-0-55"><a id="__codelineno-0-55" name="__codelineno-0-55" href="#__codelineno-0-55"></a>            <span>self</span><span>.</span><span>cache</span><span>[</span><span>x</span><span>]</span> <span>=</span> <span>new_node</span>
</span><span id="__span-0-56"><a id="__codelineno-0-56" name="__codelineno-0-56" href="#__codelineno-0-56"></a>            <span>self</span><span>.</span><span>size</span> <span>+=</span> <span>1</span>
</span><span id="__span-0-57"><a id="__codelineno-0-57" name="__codelineno-0-57" href="#__codelineno-0-57"></a>            <span>new_node</span><span>.</span><span>visited</span> <span>=</span> <span>False</span>  <span># Insertion</span>
</span><span id="__span-0-58"><a id="__codelineno-0-58" name="__codelineno-0-58" href="#__codelineno-0-58"></a>
</span><span id="__span-0-59"><a id="__codelineno-0-59" name="__codelineno-0-59" href="#__codelineno-0-59"></a>    <span>def</span> <span>show_cache</span><span>(</span><span>self</span><span>):</span>
</span><span id="__span-0-60"><a id="__codelineno-0-60" name="__codelineno-0-60" href="#__codelineno-0-60"></a>        <span>current</span> <span>=</span> <span>self</span><span>.</span><span>head</span>
</span><span id="__span-0-61"><a id="__codelineno-0-61" name="__codelineno-0-61" href="#__codelineno-0-61"></a>        <span>while</span> <span>current</span><span>:</span>
</span><span id="__span-0-62"><a id="__codelineno-0-62" name="__codelineno-0-62" href="#__codelineno-0-62"></a>            <span>print</span><span>(</span><span>f</span><span>&#39;</span><span>{</span><span>current</span><span>.</span><span>value</span><span>}</span><span> (Visited: </span><span>{</span><span>current</span><span>.</span><span>visited</span><span>}</span><span>)&#39;</span><span>,</span> <span>end</span><span>=</span><span>&#39; -&gt; &#39;</span> <span>if</span> <span>current</span><span>.</span><span>next</span> <span>else</span> <span>&#39;</span><span>\n</span><span>&#39;</span><span>)</span>
</span><span id="__span-0-63"><a id="__codelineno-0-63" name="__codelineno-0-63" href="#__codelineno-0-63"></a>            <span>current</span> <span>=</span> <span>current</span><span>.</span><span>next</span>
</span><span id="__span-0-64"><a id="__codelineno-0-64" name="__codelineno-0-64" href="#__codelineno-0-64"></a>
</span><span id="__span-0-65"><a id="__codelineno-0-65" name="__codelineno-0-65" href="#__codelineno-0-65"></a><span># Example usage</span>
</span><span id="__span-0-66"><a id="__codelineno-0-66" name="__codelineno-0-66" href="#__codelineno-0-66"></a><span>cache</span> <span>=</span> <span>SieveCache</span><span>(</span><span>3</span><span>)</span>
</span><span id="__span-0-67"><a id="__codelineno-0-67" name="__codelineno-0-67" href="#__codelineno-0-67"></a><span>cache</span><span>.</span><span>access</span><span>(</span><span>&#39;A&#39;</span><span>)</span>
</span><span id="__span-0-68"><a id="__codelineno-0-68" name="__codelineno-0-68" href="#__codelineno-0-68"></a><span>cache</span><span>.</span><span>access</span><span>(</span><span>&#39;B&#39;</span><span>)</span>
</span><span id="__span-0-69"><a id="__codelineno-0-69" name="__codelineno-0-69" href="#__codelineno-0-69"></a><span>cache</span><span>.</span><span>access</span><span>(</span><span>&#39;C&#39;</span><span>)</span>
</span><span id="__span-0-70"><a id="__codelineno-0-70" name="__codelineno-0-70" href="#__codelineno-0-70"></a><span>cache</span><span>.</span><span>access</span><span>(</span><span>&#39;D&#39;</span><span>)</span>
</span><span id="__span-0-71"><a id="__codelineno-0-71" name="__codelineno-0-71" href="#__codelineno-0-71"></a><span>cache</span><span>.</span><span>show_cache</span><span>()</span>
</span></code></pre></div> </div> </article> </div> </div>  </main>  </div></div>
  </body>
</html>
