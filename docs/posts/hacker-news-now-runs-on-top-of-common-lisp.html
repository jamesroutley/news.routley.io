<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://lisp-journey.gitlab.io/blog/hacker-news-now-runs-on-top-of-common-lisp/">Original</a>
    <h1>Hacker News now runs on top of Common Lisp</h1>
    
    <div id="readability-page-1" class="page"><div><p><a href="https://news.ycombinator.com">Hacker News</a> was written in the
<a href="http://arclanguage.org/">Arc</a> lisp dialect, a dialect created by Paul
Graham. Arc was implemented on top of Racket, but that has now
changed. HN runs on top of SBCL since a few months.</p>

<p>But why? For performance reasons.</p>

<blockquote>
<p>I recently noticed that Hacker News no longer uses paging for long
threads. In the past, when a discussion grew large, we had to click
“More” to load the next page of comments, and dang would
occasionally post helpful tips to remind us about this feature.
Was there an announcement regarding this change? Has anyone else still seen paging recently? I’d love to know more details—especially the technical aspects or considerations that went into the decision.</p>
</blockquote>

<p>Answer:</p>

<blockquote>
<p>It’s because Clarc is finally out.</p>
</blockquote>

<p><a href="https://news.ycombinator.com/item?id=41679215">dang, Sept. 2024</a></p>

<blockquote>
<p>[Clarc] is much faster and also will easily let HN run on multiple cores. It’s been in the works for years, mainly because I rarely find time to work on it, but it’s all pretty close to done.</p>
</blockquote>

<p><a href="https://news.ycombinator.com/item?id=32597291">dang, 2022</a></p>

<p>How it’s done:</p>

<blockquote>
<p>there’s now an Arc-to-JS called Lilt, and an Arc-to-Common Lisp called Clarc. In order to make those easier to develop, we reworked the lower depths of the existing Arc implementation to build Arc up in stages. The bottom one is called arc0, then arc1 is written in arc0, and arc2 in arc1. The one at the top (arc2, I think) is full Arc. This isn’t novel, but it makes reimplementation easier since you pack as much as possible in the later stages, and only arc0 needs to be written in the underlying system (Racket, JS, or CL).</p>
</blockquote>

<p><a href="https://news.ycombinator.com/item?id=21550123">dang, 2019</a></p>

<p>But Clarc’s code isn’t released:</p>

<blockquote>
<p>Much of the HN codebase consists of anti-abuse measures that would stop working if people knew about them. Unfortunately.
separating out the secret parts would by now be a lot of work. The time to do it will be if and when we eventually release the alternative Arc implementations we’ve been working on.</p>
</blockquote>

<p><a href="https://news.ycombinator.com/item?id=21546438">https://news.ycombinator.com/item?id=21546438</a></p>

<p>Congrats for the successful “splash-free” transition though.</p>
</div></div>
  </body>
</html>
