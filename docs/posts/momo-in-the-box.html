<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://datum-b.com/blog/momo_in_the_box">Original</a>
    <h1>Momo in the Box</h1>
    
    <div id="readability-page-1" class="page"><div>
        <p><a href="https://github.com/home">
        <img src="https://github.com/static/dblogo.png" width="60%" max-width="50%" height="auto" alt="Made with PowerPoint"/>
        </a></p>
    <p>26 February, 2023</p>
    <p>I’ve undertaken a project in my batch at <a href="https://www.recurse.com">the Recurse Center</a> that combines mechanical, software, and electrical engineering, and is resulting in a usable and relatable end-product. <strong>The Momobox</strong> is a DIY MP3 player for toddlers (okay, one toddler in particular), built with a Raspberry Pi Pico, CircuitPython, a 3D printer, and a broken-down soldering iron. The goal is to have the project <a href="https://github.com/blairfrandeen/momobox">fully documented</a> such that an inclined hobbyist could build their own.</p>
<p>The idea was sparked by the <a href="https://us.tonies.com/">Toniebox</a>, a commercially available equivalent. The main idea is that the box is operated by placing a figurine, called a Tonie, on top, which activates an MP3 player to tell a story or play a song. What turns me off from the commercial product is that the cost of additional “Tonies” is somewhat outrageous: $15 or so for half an hour of additional content. I decided to build our daughter her own unique version, where we invest the patience to 3D-print her own special “Momies”, and I learn me some hardware hacking in the process.</p>
<h2 id="minimum-viable-momo">Minimum Viable Momo</h2>
<p>The idea of a Minimum Viable Product (MVP) is common in several industries, and it’s a principle that I have found to be useful: get the thing that you are making to the stage where it can be given to the end user, and use that to start to generate feedback, iterate, and improve. I’ve identified the MVP for the Momobox as having the following requirements satisfied:</p>
<ul>
<li>
Able to play one song when a Momie with an embedded RFID chip is brought nearby. <em>(Ok if this song is manually loaded into the electronics without a nice front-end)</em></li>
<li>
Stops playing when the Momie is removed.</li>
<li>
Powered by a battery.</li>
<li>
Volume is adjustable to an appropriate level. <em>(Ok if this is done via software or hard-to-reach hardware)</em></li>
<li>
Momie is secured to the top of the enclosure with a magnet.</li>
<li>
Housed in a mechanical enclosure that is more-or-less toddler-proof.</li>
</ul>
<p>The check-boxes above indicate the state of the Momobox as of this writing. It’s showing promise, but still runs off of USB power, and it has a big breadboard sticking out the back. Not at all toddler-proof!</p>
<figure>
<img src="https://github.com/static/post_images/momobox_static.png" alt=""/><figcaption>Momobox in its current glory - breadboard and all!</figcaption>
</figure>
<h2 id="quality-of-life-improvements">Quality of Life Improvements</h2>
<p>One thing to note about the present state of Momobox and the MVP requirements is that it won’t a cinch to administer: to add a new song, I’ll have to unscrew the lid, remove the SD card, and manually load the MP3 file via my PC. Then I’ll have to plug in the Momobox, scan the RFID tag and look at the output from the console, and hard-code a new line into the dictionary the main Python script:</p>
<div id="cb1"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span># Dictionary to map RFID codes to song/story path names</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a><span># </span><span>TODO</span><span>: Make this into human-readable file outside of</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a><span># operational code</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a>LIBRARY <span>=</span> {</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a>    <span>&#34;23d95433&#34;</span>: <span>&#34;wappin.mp3&#34;</span>, <span># Elmer Fudd vs. Bugs Bunney Rap Battle</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true"></a>    <span>&#34;b8003433&#34;</span>: <span>&#34;shavingcream.mp3&#34;</span>, <span># The shaving cream song...</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true"></a>    <span>&#34;88046318&#34;</span>: <span>&#34;wildthings.mp3&#34;</span>, <span># Where the Wild Things Are!</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true"></a>}</span></code></pre></div>
<p>I’ve learned that it’s easy to get bogged down trying to implement error handling, fool-proofing, and nice-to-haves at the start of a project. Making a hard-coded dictionary in the main script may not be an engineering “best practice,” but it gets the job done. Importantly, it’s easy to refactor the code once the real administration logic has been implemented.</p>
<p>The list of features that should be implemented before Momobox is considered truly done:</p>
<ol type="1">
<li>Easy-to-use administrative interface. Plug in the Momobox, type a terminal command to bring it into administrative mode. Type another terminal command to recognize the Momie that’s currently on top, and associate that with a story or song that’s in MP3 format on your hard drive, and upload that directly to the Momobox.</li>
<li>Built-in (or customize-able) sounds that play for events such as low-battery or an unrecognized Momie.</li>
<li>Some power-optimization to extend battery life for as long as possible. This includes a sleep mode - but what will wake it?</li>
</ol>
<p>The final “feature” of this product should be complete documentation, so that a Momobox can be built without having to go through all the trouble that I’m currently in. The <a href="https://github.com/blairfrandeen/momobox">Momobox GitHub repository</a> has most of this for the current state of the project. The CAD for the 3D-printed parts is hosted on <a href="https://cad.onshape.com/documents/79b0dabc494fde770de26b57/w/b19bbc68ed3995e5b344c842/e/d2a39d4dcadbb5ff28daf759">OnShape</a>, and STL files for what I’ve currently printed are on GitHub.</p>
<h2 id="build-your-own">Build your own!</h2>
<p>One advantage of this implementation is that it’s economically feasible for someone who already has a 3D printer and a soldering setup. The table below lists all of the components with links to vendors, for a total cost of just over $50; probably about $65 if you include tax &amp; shipping. This cost includes enough RFID tags and magnets to keep your kid entertained for a good while.</p>
<table>
<thead>
<tr>
<th>Component</th>
<th>Price</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://www.digikey.com/en/products/detail/raspberry-pi/SC0915/13624793">Raspberry Pi Pico</a></td>
<td>$4.00</td>
</tr>
<tr>
<td><a href="https://www.adafruit.com/product/1313">Speaker</a></td>
<td>$1.95</td>
</tr>
<tr>
<td><a href="https://learn.adafruit.com/adafruit-pam8302-mono-2-5w-class-d-audio-amplifier">Amplifer</a></td>
<td>$3.95</td>
</tr>
<tr>
<td><a href="https://www.adafruit.com/product/4236">Battery</a></td>
<td>$6.95</td>
</tr>
<tr>
<td><a href="https://www.adafruit.com/product/4682">Micro SD Card Breakout Board</a></td>
<td>$3.50</td>
</tr>
<tr>
<td><a href="https://www.adafruit.com/product/5252">Micro SD Card</a></td>
<td>$4.95</td>
</tr>
<tr>
<td><a href="https://www.adafruit.com/product/5397">Battery Charger</a></td>
<td>$4.95</td>
</tr>
<tr>
<td><a href="https://usa.banggood.com/3_3V-RC522-Chip-IC-Card-Induction-Module-RFID-Reader-13_56MHz-10Mbit-or-s-p-81067.html?gmcCountry=US&amp;currency=USD&amp;cur_warehouse=CN&amp;createTmp=1&amp;ad_id=&amp;msclkid=201fb5263991119ea9a6d6dce09d6911">RFID Sensor</a></td>
<td>$2.99</td>
</tr>
<tr>
<td><a href="https://www.amazon.com/dp/B08Z7P7L3R?psc=1&amp;ref=ppx_yo2ov_dt_b_product_details">RFID Tags(20X)</a></td>
<td>$8.00</td>
</tr>
<tr>
<td><a href="https://www.amazon.com/Creative-Hobbies-thickness-Universal-Frigidaires/dp/B014Q4HNVO/ref=sr_1_3?crid=2HKDJZ9MP3YTA&amp;keywords=ring+magnet&amp;qid=1676586462&amp;sprefix=ring+magnet%2Caps%2C165&amp;sr=8-3">Ring Magnets (29X)</a></td>
<td>$10.99</td>
</tr>
<tr>
<td><strong>Total</strong></td>
<td><strong>$52.23</strong></td>
</tr>
</tbody>
</table>
<p>Not included in the above cost: fasteners, connecting wire, solder, super-glue, and 3D-printer filament. Mostly things I’d expect an industrious maker to have on hand. And if not, perhaps the Momobox is the excuse you need to invest in that new soldering iron or 3D-printer!</p>
<p>I specifically didn’t include fasteners in the cost above, as I plan to re-think some of the mechanical aspects of the design such that most fasteners aren’t required. The present design includes some very nice <a href="https://www.mcmaster.com/94180A331/">tapered heat-set inserts</a>, which are both excellent and prohibitively expensive as a result of buying them in large quantities. Ideally, the bill of materials for Momobox should be more to the tune of going down to your local Ace Hardware store and purchasing a handful of screws out of their bins for a few cents each.</p>
<figure>
<img src="https://github.com/static/post_images/heat_set_inserts.png" alt=""/><figcaption>Tapered brass heat-set inserts are excellent for making robust mechanical enclosures from 3D printed parts. Use your soldeirng iron to press them in. I’m looking to replace this for momobox to make building one more accessible.</figcaption>
</figure>
<h2 id="fingers-and-brain">Fingers and Brain</h2>
<p>A theme that’s come up in my first weeks at <a href="https://recurse.com">the Recurse Center</a> is “fingers vs. brain” in the context of scoping which projects to work on. A “fingers” project involves a lot of doing, a lot of tying together disparate pieces, a lot of integrating, documenting, and testing. A “brain” project involves more thinking, more heavy math, and getting to that state of complete stuckness that the Zen Buddhists rave about. It’s recommended to have both a fingers project and a brain project going simultaneously.</p>
<figure>
<img src="https://github.com/static/post_images/rfid_soldering.png" alt=""/><figcaption>More soldering than anyone ever wanted to see me do – wiring up the RFID RC522 board that’s mounted to the inside of the lid.</figcaption>
</figure>
<p>Momobox is, right now, firmly in the “fingers” camp. I’ve been looking at the various components from as high a level as I can, and the software is all run with <a href="https://circuitpython.org/">CircuitPython</a> which claims to be “the easiest way to program microcontollers.” I am incorporating a breadth of new knowledge on this project, from soldering to the <a href="https://microcontrollerslab.com/introduction-to-spi-communication-protocol/">SPI protocol</a>, so having the software be in a high-level language that I can write from memory helps keep things moving along.</p>
<p>Of course, easiness is almost always a trade for performance or versatility, and this project is no exception. In the present stage, the goal is to get it to MVP, even if it’s held together with zip-ties and duct tape; literally and figuratively.</p>
<p>What lies beyond the MVP for Momobox is yet to be fully discovered. I’ve already been over terrain that is littered with rabbit-holes and areas for improvement. Should I rewrite the firmware in Rust? Should I start investigating what bits are being sent into and out of my microcontroller, and look for ways to optimize them? Maybe I should learn Blender and do a more elegant design; maybe I should learn to design printed circuit boards and make a custom board for Momobox to reduce build time, and possibly cost.</p>
<p>In truth, I’m pushing hard to get to the MVP so that I can set it down and work on something else. My brain needs exercise, and Rust projects are calling. On the other hand, I’ve been encouraged by the interest and positive feedback that this project has sparked, and I plan to keep my fingers busy over the next few weeks while I see it to completion.</p>


        <hr/>
        <h2>About</h2>
        <p>I am a new software engineer with nearly a decade of specialized experience in mechanical engineering. This blog chronicles my journey with coding, agile hardware development, and leadership principles.</p>

        <div>
            <p><a href="mailto:thoughts@datum-b.com">Email</a> ~ 
            <a href="https://github.com/blairfrandeen">Github</a> ~
            <a href="https://github.com/feed/">Atom</a></p><p>© 2022 - 2023</p><p>The views expressed here are solely my own and do not reflect those of my employer.</p>
        </div>
    </div></div>
  </body>
</html>
