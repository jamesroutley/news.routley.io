<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/mattsroufe/esp32_rc_cars">Original</a>
    <h1>Show HN: ESP32 RC Cars</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://www.wildlondon.org.uk/mattsroufe/esp32_rc_cars/blob/main/car_photo.jpeg"><img src="https://www.wildlondon.org.uk/mattsroufe/esp32_rc_cars/raw/main/car_photo.jpeg" alt=""/></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://www.wildlondon.org.uk/mattsroufe/esp32_rc_cars/blob/main/screenshot.png"><img src="https://www.wildlondon.org.uk/mattsroufe/esp32_rc_cars/raw/main/screenshot.png" alt=""/></a></p>

<p dir="auto"><a href="https://youtu.be/OubYFXmvA1E" rel="nofollow">https://youtu.be/OubYFXmvA1E</a></p>
<p dir="auto">This project demonstrates an ESP32-based remote-controlled camera system capable of transmitting live video streams over WebSockets and controlling motors and servos. A Python server application manages WebSocket communication and provides a web interface to view and control the ESP32 devices.</p>

<ul dir="auto">
<li>Live video streaming from an ESP32-CAM to a web server.</li>
<li>Remote control of a motor and a servo via WebSocket commands.</li>
<li>Automatic timeout to reset motor and servo to default states.</li>
<li>Dynamic multi-client video feed canvas on the server.</li>
</ul>
<hr/>

<ul dir="auto">
<li>ESP32-CAM (AI Thinker module or compatible board).</li>
<li>Motor and servo connected to appropriate GPIO pins.</li>
<li>Stable 5V power supply for the ESP32-CAM.</li>
<li>Optional SD card (if required for other functionalities).</li>
<li>Wi-Fi network for communication.</li>
</ul>
<hr/>



<ul dir="auto">
<li><code>WiFi.h</code> for Wi-Fi connectivity.</li>
<li><code>ArduinoWebsockets.h</code> for WebSocket communication.</li>
<li><code>esp_camera.h</code> for ESP32-CAM camera control.</li>
<li><code>ServoControl.h</code> and <code>Esc.h</code> for controlling the servo and motor.</li>
<li><code>Arduino.h</code> for standard Arduino functions.</li>
</ul>


<p dir="auto">Install the following Python libraries:</p>
<div dir="auto" data-snippet-clipboard-copy-content="pip3 install aiohttp opencv-python numpy"><pre>pip3 install aiohttp opencv-python numpy</pre></div>
<hr/>


<ol dir="auto">
<li>Modify the <code>secrets.h</code> file to include your Wi-Fi credentials and WebSocket server URL:</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="#define WIFI_SSID &#34;YourWiFiSSID&#34;
#define WIFI_PASSWORD &#34;YourWiFiPassword&#34;
#define WS_SERVER_URL &#34;ws://YourServerIP:Port&#34;"><pre>#<span>define</span> <span>WIFI_SSID</span> <span><span>&#34;</span>YourWiFiSSID<span>&#34;</span></span>
#<span>define</span> <span>WIFI_PASSWORD</span> <span><span>&#34;</span>YourWiFiPassword<span>&#34;</span></span>
#<span>define</span> <span>WS_SERVER_URL</span> <span><span>&#34;</span>ws://YourServerIP:Port<span>&#34;</span></span></pre></div>
<ol start="2" dir="auto">
<li>Ensure the GPIO pins for the camera module, motor, and servo match your hardware setup:</li>
</ol>
<ul dir="auto">
<li>Camera GPIO pins are pre-configured for the AI Thinker ESP32-CAM board.</li>
<li>Update motor and servo pins if necessary.</li>
</ul>

<ol dir="auto">
<li>Place the server script in a directory with an <code>index.html</code> file for the web interface.</li>
<li>Start the server:</li>
</ol>

<p dir="auto">The server will be accessible on <code>http://localhost:8080/</code>.</p>
<hr/>


<ol dir="auto">
<li>Upload the provided sketch to your ESP32-CAM using the Arduino IDE or a compatible platform.</li>
<li>Monitor the serial output to ensure successful connection to Wi-Fi and the WebSocket server.</li>
</ol>

<ol dir="auto">
<li>Run the Python server script.</li>
<li>Open the web interface in a browser to view the live video streams.</li>
<li>Send control commands via the WebSocket connection.</li>
</ol>

<ul dir="auto">
<li><code>MOTOR:&lt;speed&gt;</code>: Set motor speed (-255 to 255).</li>
<li><code>SERVO:&lt;angle&gt;</code>: Set servo angle (0 to 180).</li>
<li><code>CONTROL:&lt;speed&gt;:&lt;angle&gt;</code>: Control both motor speed and servo angle simultaneously.</li>
</ul>
<hr/>


<ul dir="auto">
<li><strong>Wi-Fi</strong>: Connects to the specified Wi-Fi network.</li>
<li><strong>Camera</strong>: Configures the ESP32-CAM with the appropriate settings for video streaming.</li>
<li><strong>WebSocket</strong>: Establishes a WebSocket connection with the server.</li>
</ul>

<p dir="auto">If no control commands are received within a predefined timeout period, the motor speed resets to <code>0</code>, and the servo angle resets to <code>90</code>.</p>

<ul dir="auto">
<li>Handles WebSocket communication with multiple ESP32 clients.</li>
<li>Processes incoming video frames and dynamically arranges them in a grid.</li>
<li>Streams the grid of video frames to the web interface.</li>
</ul>
<hr/>

<ul dir="auto">
<li>
<p dir="auto"><strong>Connection Issues</strong>:</p>
<ul dir="auto">
<li>Verify Wi-Fi credentials in <code>secrets.h</code>.</li>
<li>Check that the WebSocket server is running and accessible.</li>
</ul>
</li>
<li>
<p dir="auto"><strong>Video Stream Issues</strong>:</p>
<ul dir="auto">
<li>Ensure proper power supply to the ESP32-CAM.</li>
<li>Verify camera initialization settings.</li>
</ul>
</li>
</ul>
<hr/>

<p dir="auto">This project is open-source and available under the MIT License.</p>
<hr/>

<p dir="auto">Feel free to submit issues or pull requests to improve the application!</p>
</article></div></div>
  </body>
</html>
