<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://bbenchoff.github.io/pages/LinuxDevice.html">Original</a>
    <h1>A Minimum Viable Computer, or Linux for $15</h1>
    
    <div id="readability-page-1" class="page"><div>
      <header>
        <a href="http://bbenchoff.github.io">
	
	<hr/>
	</a><a href="mailto:benchoff@gmail.com">Email</a>
        </header>
      <section>

      

<p><img src="https://blog.plover.com/images/Linux/Front.png" alt="Front of Device"/></p>

<p>This is a ‘Linux Swiss Army Knife’, offering maximum utility while still being able to fit in your pocket. Is it fast? No. Can it run a GUI? Also no. But it can run scripts, ping a server, toggle a few GPIOs, and interact with a USB device. This is a minimum viable computer that can:</p>

<ul>
  <li>Run Linux. Just command line.</li>
  <li>Has a keyboard. No touchscreen display.</li>
  <li>Has a USB port. To connect to other things.</li>
  <li>Some sort of battery power, I guess.</li>
</ul>

<p>That’s about it. Could you do all of this with a smartphone? Yeah, kinda, if you root prepaid Android phone, but even that would cost more than $30. I know I can build something cheaper.</p>

<p>Given the list of requirements, I know I need some sort of SoC, perferrably as cheap as possible. I need a keyboard of some sort, preferrably as cheap as possible. I need a screen, some sort of battery system, and some sort of storage. All preferrably as cheap as possible. I think I’ve cracked this problem, and I’ve come up with a computer that runs Linux and costs about $15 USD.</p>

<h3 id="tldr-gimme-the-specs">TL;DR, Gimme the specs:</h3>

<ul>
  <li>Allwinner F1C100s SoC
    <ul>
      <li>ARM926EJ-S CPU @ 533 MHz</li>
      <li>32 MB DDR (64 MB with pin-compatable F1C200s)</li>
      <li>Runs Linux! A recent version of Linux!</li>
    </ul>
  </li>
  <li>2.3” IPS TFT
    <ul>
      <li>320 by 240 pixel resolution</li>
      <li>ILI9342 controller (SPI)</li>
    </ul>
  </li>
  <li>USB 2.0 over USB-A connector
    <ul>
      <li>5V to devices</li>
    </ul>
  </li>
  <li>48-key keyboard
    <ul>
      <li>Silicone membrane, like a TV remote control</li>
      <li>Yes, you can type any character you want</li>
    </ul>
  </li>
  <li>microSD card for storage
    <ul>
      <li>How could you possibly fill up 64 GB of storage?</li>
    </ul>
  </li>
  <li>2x AAA NiMH battery
    <ul>
      <li>The battery life is long enough</li>
      <li>Charge over USB C @ 500mA</li>
    </ul>
  </li>
  <li>Licensed!
    <ul>
      <li>There’s a few drivers I had to write for this, I’ll submit a patch eventually.</li>
      <li>Everything else is licensed as permissively as possible</li>
      <li>Even though Allwinner hates giving their code back.</li>
      <li>Yes ‘Open Hardware’ means more than PDFs of schematics</li>
    </ul>
  </li>
  <li>Low Price!
    <ul>
      <li>It costs $10,000 USD to build one of these</li>
      <li>The ten thousandth one costs $15</li>
    </ul>
  </li>
  <li>Designed for 2021
    <ul>
      <li>I can buy all the parts right now, in quantity.</li>
    </ul>
  </li>
</ul>

<h2 id="design-considerations">Design considerations</h2>

<p><img src="https://blog.plover.com/images/Linux/AnnotatedBoard.png" alt="Annotated PCB"/></p>

<p>The most consequential design decision is the Linux SoC. For this I chose the <a href="https://linux-sunxi.org/F1C100s">Allwinner F1C100s</a>, an ARM9 core running at 533MHz with an integrated 32MB of DDR (the F1C200s bumps the memory up to 64MB and is drop-in pin compatible).</p>

<p>The schematic is based on a now-discontinued dev board, the <a href="https://linux-sunxi.org/LicheePi_Nano">LicheePi Nano</a> and a board from <a href="https://jaycarlson.net/embedded-linux/#f1c200s">Jay Carlson’s Embedded Linux series</a>, with a few changes. Basic system bring-up is simple – just get three power rails (3.3V, 2.5V, 1.1V), add a clock and sprinkle some caps and resistors on the board. After that, you have a Linux console over serial. Alterations to the reference designs include changing the display connection from 16-bit RGB to SPI, deleting the SPI flash, and adding a microSD card. These changes were made to add additional GPIOs (for the keyboard) and to aid in programming and assembly (now everything runs off the SD card, flashing a ROM no longer required).</p>

<p><a href="https://github.com/bbenchoff/NixDevice">I have Buildroot running on this chip</a> thanks to the efforts of others. It boots from an SD card and puts a terminal on a SPI display. Everything kinda just works thanks to <a href="https://linux-sunxi.org/F1C100s">some very cool people working on the sunxi stuff for Linux</a>.</p>

<p>The design of the keyboard is unconventional, as a suite of tact switches would be expensive both in component cost and assembly cost. Instead, I’m using a <a href="https://bbenchoff.github.io/pages/keyboard.html">silicone membrane keyboard</a>, much like what you would find on a TV remote control. Because the electrical connections for the keyboard is printed on the circuit board, this type of keyboard is essentially free.</p>

<p>The silicone membrane keyboard does come with a drawback – it requires a plastic enclosure. That’s acceptable, as any ‘pocket computer’ device needs an enclosure anyway. My enclosure is a two-piece clamshell snap-fit design requiring no tools to assemble or disassemble. The cost is about $1 in quantity, and will be screen printed with alt keyboard combinations above each key.</p>

<p>Powering the device is challenging, as using lithium cells would mean more stringent requirements in regards to shipping and transport. Instead of lithium cells, this device uses AAA NiMH cells. While providing less overall power per unit mass of lithium, it’s significantly less expensive than lithium. This design can also be modified for AA NiMH cells for more than twice the runtime at the expense of a slightly thicker enclosure.</p>

<p><img src="https://blog.plover.com/images/Linux/Back.png" alt="The ports on the device"/></p>

<p>The ‘back’ or ‘top’ of the device contains all the ports. These include a USB Type-A port, where you can easily attach a WiFi or Bluetooth adapter, USB keyboard, webcam, or really <em>any other device</em>. lsusb works, so have fun with that.</p>

<p>The storage on this device is through a SD card – I’ve sourced a few 8GB cards and they work fine, but at scale 32GB or 64GB are more readily available. This is the second most expensive line item in the BOM, coming in at about $2/each at quantity 10,000.</p>

<p><img src="https://blog.plover.com/images/Linux/Board.png" alt="Board Layout"/></p>

<p>The PCB is a simple 2-layer board. There’s really nothing novel here except the contact pads for the silicone membrane keyboard.</p>

<h3 id="earlier-renderings-of-the-device">Earlier renderings of the device</h3>

<p><img src="https://blog.plover.com/images/SAB-4.png" alt="Handheld Linux Thing"/>
<img src="https://blog.plover.com/images/SAB-5.png" alt="Handheld Linux Thing"/></p>

<h2 id="does-it-really-cost-15">Does it really cost $15?</h2>

<p>The answer to the big question, “How much does it cost?” is, “What the market will bear”. In short, yes, if you’re counting the BOM cost in quantities greater than 10,000. That said, let’s go into the cost breakdown. This is an abridged but still accurate BOM, with costs for each row in the last column.</p>

<table>
  <thead>
    <tr>
      <th>Device</th>
      <th>Description</th>
      <th>Cost @ QTY 1000</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>CPU</td>
      <td>F1C100s</td>
      <td>$0.75</td>
    </tr>
    <tr>
      <td>Display</td>
      <td>ILI9342</td>
      <td>$2.20</td>
    </tr>
    <tr>
      <td>Keyboard</td>
      <td>custom</td>
      <td>$1.20</td>
    </tr>
    <tr>
      <td>Enclosure</td>
      <td>custom</td>
      <td>$1.70</td>
    </tr>
    <tr>
      <td>PCB</td>
      <td>custom</td>
      <td>$2.00</td>
    </tr>
    <tr>
      <td>C1, C6, C8</td>
      <td>22uF</td>
      <td>$0.15</td>
    </tr>
    <tr>
      <td>C2, C3</td>
      <td>1uF</td>
      <td>$0.02</td>
    </tr>
    <tr>
      <td>C9..C13..C17</td>
      <td>100nF</td>
      <td>$0.0045</td>
    </tr>
    <tr>
      <td>C12</td>
      <td>2.2uF</td>
      <td>$0.0011</td>
    </tr>
    <tr>
      <td>C18, C19</td>
      <td>1uF</td>
      <td>$0.002</td>
    </tr>
    <tr>
      <td>Resistors (20)</td>
      <td>Jellybean</td>
      <td>$0.015</td>
    </tr>
    <tr>
      <td>IC2</td>
      <td>MCP1642B</td>
      <td>$0.93</td>
    </tr>
    <tr>
      <td>J1</td>
      <td>Display conn</td>
      <td>$0.52584</td>
    </tr>
    <tr>
      <td>L1</td>
      <td>4.7uH</td>
      <td>$0.31790</td>
    </tr>
    <tr>
      <td>L2..L4</td>
      <td>2.2uH</td>
      <td>$0.0126</td>
    </tr>
    <tr>
      <td>SW1</td>
      <td>Switch</td>
      <td>$0.10</td>
    </tr>
    <tr>
      <td>Q1</td>
      <td>Mosfet</td>
      <td>$0.16</td>
    </tr>
    <tr>
      <td>T1</td>
      <td>Thermistor</td>
      <td>$0.10659</td>
    </tr>
    <tr>
      <td>Conn1…4</td>
      <td>Battery conn.</td>
      <td>$1.10</td>
    </tr>
    <tr>
      <td>Type C</td>
      <td>Type C conn.</td>
      <td>$0.1894</td>
    </tr>
    <tr>
      <td>Type A</td>
      <td>Type A conn.</td>
      <td>$0.0496</td>
    </tr>
    <tr>
      <td>U2..U4</td>
      <td>MT3420B</td>
      <td>$0.22</td>
    </tr>
    <tr>
      <td>Y1</td>
      <td>Crystal 12MHz</td>
      <td>$0.12</td>
    </tr>
    <tr>
      <td>SD card</td>
      <td>64GB</td>
      <td>$2.20</td>
    </tr>
    <tr>
      <td>Battery (2)</td>
      <td>AAA NiMH</td>
      <td>$1.10</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
      <td><strong>TOTAL $14.16079</strong></td>
    </tr>
  </tbody>
</table>

<p>There you go, a full Linux computer for under fifteen bucks parts. Assembly is not included, and better component selection (caps, another crystal, and a generic version of the battery clip) would drop a few cents off the build. But I’ll call this a $15 computer for the clickbait headline. Speaking of clickbait, if you want to build <em>one</em> of these things, It’ll cost you about ten grand. The first one costs ten grand, the ten thousandth one costs fifteen bucks.</p>

<p>I can buy all of the components for this device right now at the beginning of 2022, in the depths of a component shortage. Give me six months and I’ll give you a tens of thousands of these things.</p>

<h2 id="what-can-it-do">What can it do?</h2>

<p><img src="https://blog.plover.com/images/Linux/Doom.png" alt="Silicone Membrane Keyboard"/></p>

<p>What can a $15 Linux computer do? First off, yes, <a href="https://www.chocolate-doom.org/wiki/index.php/Chocolate_Doom">it can run Doom</a>. Chocolate Doom is actually a default package in Buildroot, which is awesome.</p>

<p>Instead of me telling you what this device can do, instead let me ask what <em>you</em> can do with command line Linux, a keyboard, and a USB port. Do you want software defined radio? Sure thing, there’s a package for that. Do you want this thing to be a crypto wallet? No problem, in fact you can display your expensive monkeys on the screen. Want to compile your own code on this thing? Go ahead. There’s even a few GPIOs left open and broken out, have fun with that. There’s one SPI and a few I2Cs that aren’t connected to anything.</p>

<p>This is, in short, a device that can do anything. It’s just really small and really, really cheap.</p>

<p>One thing I’m not even going to attempt is a GUI. You’re stuck with command line unless someone hacks something else in.</p>

<h2 id="design-considerations-and-further-work">Design considerations and further work</h2>

<p>This is not the final design for this device, because I do not believe there is any one design that can fufill all use cases. There are a few obvious things that could be changed, depending on what the user wants:</p>

<h3 id="usb-ports">USB Ports</h3>

<p>The current device uses USB-C only for power and charging, with a single USB-A port for peripherals (WiFi adapter, etc). This limits the device somewhat. The F1C100s only has one USB port but can do OTG, so a simpler one-port design is possible. This would enable the device to use <a href="https://www.kernel.org/doc/html/v4.19/driver-api/usb/gadget.html">USB Gadget mode</a>, allowing it to act as a host or device. The pros and cons of this are debatable, and I chose the ability to plug in a USB WiFi adapter. Still, it could change.</p>

<h3 id="a-bigger-display">A bigger display</h3>

<p>The display is only 320x240, which is really too small to be used as a terminal. I believe the minimum resolution for a console is 640x480 or 800x480. I’ve already <a href="https://bbenchoff.github.io/pages/dumb.html">written a driver for a 800x480 display</a>, and it could work over SPI. This display is somewhat expensive, with a bare panel coming in at $12, also necessatiating a larger enclosure with increased cost. Still, that’s an option.</p>

<h3 id="a-bigger-keyboard">A bigger keyboard</h3>

<p>The current keyboard has 47 keys (space is duplicated on each side), which the mechanical keyboard mafia tells me is enough to completely replicate the function of an IBM 104 key keyboard. There are many, many more GPIOs available on the port I’m using for the keyboard. This device could support 110 keys easily, and even more by stealing pins from other GPIO ports. I decided against this because 47 keys is enough, and more keys cost more money.</p>

<h3 id="break-out-the-gpios">Break out the GPIOs</h3>

<p>There are a host of GPIOs that can be broken out to more devices. These GPIOs support I2C, SPI, I2S, UART, and even IrDA. While I’m limited by the form factor, I would really like to break these signals out into a useful header in future iterations. The only question is what format this header would take. I’m extremely partial to the <a href="https://hackaday.com/2019/03/20/introducing-the-shitty-add-on-v1-69bis-standard/">Shitty Add-On spec I created</a>, but finding the right connector to implement this is difficult. If anyone knows of a right angle, keyed, 2x3, female, SMD IDC connector, please email me. They simply don’t exist. Of course, since I’m already making the plastic enclosure I could engineer <em>something</em>…</p>

<h2 id="in-closing">In Closing…</h2>

<p>Do I plan to make this thing available? Yes, eventually. If you want to see this go into production, ping me <a href="https://twitter.com/ViolenceWorks">on my twitter</a>.</p>

<p><a href="https://blog.plover.com/">back</a></p>


      </section>


      
    </div></div>
  </body>
</html>
