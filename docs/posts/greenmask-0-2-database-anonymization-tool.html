<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/GreenmaskIO/greenmask">Original</a>
    <h1>Show HN: Greenmask 0.2 – Database anonymization tool</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<div dir="auto"><h2 tabindex="-1" dir="auto">Dump anonymization and synthetic data generation tool</h2><a id="user-content-dump-anonymization-and-synthetic-data-generation-tool" aria-label="Permalink: Dump anonymization and synthetic data generation tool" href="#dump-anonymization-and-synthetic-data-generation-tool"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><strong>Greenmask</strong> is a powerful open-source utility that is designed for logical database backup dumping,
anonymization, synthetic data generation and restoration. It has ported PostgreSQL libraries, making it reliable.
It is stateless and does not require any changes to your database schema. It is designed to be highly customizable and
backward-compatible with existing PostgreSQL utilities, fast and reliable.</p>
<p dir="auto"><a href="https://discord.com/invite/rKBKvDECfd" rel="nofollow"><img src="https://camo.githubusercontent.com/dba34524bea681839ed8e62eb4b78720077fb86c1908fab19bba95e82f193cf2/68747470733a2f2f696d672e736869656c64732e696f2f646973636f72642f313137393432323532353239343339393438383f6c6162656c3d446973636f7264266c6f676f3d646973636f7264" alt="Discord" data-canonical-src="https://img.shields.io/discord/1179422525294399488?label=Discord&amp;logo=discord"/></a>
<a href="https://t.me/greenmask_community" rel="nofollow"><img src="https://camo.githubusercontent.com/79ea15eec0d0dcd2ecfe2313563e75b5dd6bb999d4e73e7a4a25fbbf61b3b57e/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f54656c656772616d2d4a6f696e253230436861742d626c75652e7376673f6c6f676f3d74656c656772616d" alt="Telegram" data-canonical-src="https://img.shields.io/badge/Telegram-Join%20Chat-blue.svg?logo=telegram"/></a>
<a href="https://twitter.com/GreenmaskIO" rel="nofollow"><img src="https://camo.githubusercontent.com/7ba4cecf6d6e189d5276eb460ee8d0c6159cfbec1154207c7bc657f6cb506316/68747470733a2f2f696d672e736869656c64732e696f2f747769747465722f666f6c6c6f772f477265656e6d61736b494f" alt="X (formerly Twitter) Follow" data-canonical-src="https://img.shields.io/twitter/follow/GreenmaskIO"/></a></p>
<p dir="auto"><a href="https://github.com/GreenmaskIO/greenmask/actions/workflows/release.yml"><img src="https://github.com/greenmaskio/greenmask/workflows/ci/badge.svg" alt="Build status"/></a>
<a href="https://docs.greenmask.io" rel="nofollow"><img src="https://camo.githubusercontent.com/1a5daa2002aae52e28b869f1907ff99534f4cd34dc7753ddebf2caa26ffb7820/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f646f63732d6c61746573742d626c7565" alt="Documentation" data-canonical-src="https://img.shields.io/badge/docs-latest-blue"/></a>
<a href="https://github.com/greenmaskio/greenmask/blob/main/LICENSE"><img src="https://camo.githubusercontent.com/3f589e595271abd150fe154b98d79e6ce3c087e4037b9c72e6e652850a56fe68/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f677265656e6d61736b696f2f677265656e6d61736b" alt="License" data-canonical-src="https://img.shields.io/github/license/greenmaskio/greenmask"/></a>
<a href="https://github.com/greenmaskio/greenmask/releases/latest"><img src="https://camo.githubusercontent.com/7378ffa9e10a0767783759485169d0a103c9b83e6bf9ce763e1068c1b8cf22eb/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f762f72656c656173652f677265656e6d61736b696f2f677265656e6d61736b" alt="GitHub Release" data-canonical-src="https://img.shields.io/github/v/release/greenmaskio/greenmask"/></a>
<a href="https://somsubhra.github.io/github-release-stats/?username=greenmaskio&amp;repository=greenmask&amp;page=1&amp;per_page=5" rel="nofollow"><img src="https://camo.githubusercontent.com/828564016cd6256a205c36a3eb7f7708172891a54721a601fdf4a67e4fbd06f3/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f646f776e6c6f6164732f677265656e6d61736b696f2f677265656e6d61736b2f746f74616c" alt="GitHub Downloads (all assets, all releases)" data-canonical-src="https://img.shields.io/github/downloads/greenmaskio/greenmask/total"/></a>
<a href="https://hub.docker.com/r/greenmask/greenmask" rel="nofollow"><img src="https://camo.githubusercontent.com/119316cc17ff935dec74e0d72e018f74381135d8e8f967fd9fc79ba57e3c3202/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f70756c6c732f677265656e6d61736b2f677265656e6d61736b" alt="Docker pulls" data-canonical-src="https://img.shields.io/docker/pulls/greenmask/greenmask"/></a>
<a href="https://goreportcard.com/report/github.com/greenmaskio/greenmask" rel="nofollow"><img src="https://camo.githubusercontent.com/45046dd1fb299f35d8ed6c20ca5de40aa6c26320a60ff2db6d9976da62b1b4bb/68747470733a2f2f676f7265706f7274636172642e636f6d2f62616467652f6769746875622e636f6d2f677265656e6d61736b696f2f677265656e6d61736b" alt="Go Report Card" data-canonical-src="https://goreportcard.com/badge/github.com/greenmaskio/greenmask"/></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/GreenmaskIO/greenmask/blob/main/docs/assets/schema.png"><img src="https://github.com/GreenmaskIO/greenmask/raw/main/docs/assets/schema.png" alt="schema.png"/></a></p>

<p dir="auto">Greenmask has a <a href="https://docs.greenmask.io/latest/playground/" rel="nofollow">Playground</a> - it is a sandbox environment in Docker with
sample databases included to help you try Greenmask without any additional actions</p>
<ol dir="auto">
<li>
<p dir="auto">Clone the <code>greenmask</code> repository and navigate to its directory by running the following commands:</p>
<div dir="auto" data-snippet-clipboard-copy-content="git clone git@github.com:GreenmaskIO/greenmask.git &amp;&amp; cd greenmask"><pre>git clone git@github.com:GreenmaskIO/greenmask.git <span>&amp;&amp;</span> <span>cd</span> greenmask</pre></div>
</li>
<li>
<p dir="auto">Once you have cloned the repository, start the environment by running Docker Compose:</p>
<div dir="auto" data-snippet-clipboard-copy-content="docker-compose run greenmask"><pre>docker-compose run greenmask</pre></div>
</li>
</ol>

<ul dir="auto">
<li><strong><a href="https://docs.greenmask.io/latest/built_in_transformers/transformation_engines/#hash-engine" rel="nofollow">Deterministic transformers</a></strong>
— deterministic approach to data transformation based on the hash
functions. This ensures that the same input data will always produce the same output data. Almost each transformer
supports either <code>random</code> or <code>hash</code> engine making it universal for any use case.</li>
<li><strong><a href="https://docs.greenmask.io/latest/built_in_transformers/dynamic_parameters/" rel="nofollow">Dynamic parameters</a></strong> — almost each
transformer supports dynamic parameters, allowing to parametrize the
transformer dynamically from the table column value. This is helpful for resolving the functional dependencies
between columns and satisfying the constraints.</li>
<li><strong><a href="https://docs.greenmask.io/latest/commands/validate/" rel="nofollow">Transformation validation and easy maintainable</a></strong> - During
configuration process, Greenmask provides validation
warnings, data transformation diff and schema diff features, allowing you to monitor and maintain transformations
effectively
throughout the software lifecycle. Schema diff helps to avoid data leakage when schema changed.</li>
<li><strong><a href="https://docs.greenmask.io/latest/configuration/?h=partition#dump-section" rel="nofollow">Partitioned tables transformation inheritance</a></strong>
— Define transformation configurations once and apply them to all
partitions within partitioned tables (using <code>apply_for_inherited</code> parameter), simplifying the anonymization process.</li>
<li><strong>Stateless</strong> - Greenmask operates as a logical dump and does not impact your existing database schema.</li>
<li><strong>Cross-platform</strong> - Can be easily built and executed on any platform, thanks to its Go-based architecture,
which eliminates platform dependencies.</li>
<li><strong>Database type safe</strong> - Ensures data integrity by validating data and utilizing the database driver for
encoding and decoding operations. This approach guarantees the preservation of data formats.</li>
<li><strong>Backward compatible</strong> - It fully supports the same features and protocols as existing vanilla PostgreSQL utilities.
Dumps created by Greenmask can be successfully restored using the pg_restore utility.</li>
<li><strong>Extensible</strong> - Users have the flexibility
to <a href="https://docs.greenmask.io/latest/built_in_transformers/standard_transformers/cmd/" rel="nofollow">implement domain-based transformations</a>
in any programming language or
use <a href="https://docs.greenmask.io/latest/built_in_transformers/advanced_transformers/" rel="nofollow">predefined templates</a>.</li>
<li><strong>Integrable</strong> - Integrate seamlessly into your CI/CD system for automated database anonymization and
restoration.</li>
<li><strong>Parallel execution</strong> - Take advantage of parallel dumping and restoration, significantly reducing the time required
to deliver results.</li>
<li><strong>Provide variety of storages</strong> - offers a variety of storage options for local and remote data storage,
including directories and S3-like storage solutions.</li>
<li><strong><a href="https://docs.greenmask.io/latest/commands/dump/?h=pgzip#pgzip-compression" rel="nofollow">Pgzip support for faster compression</a></strong> — by
setting <code>--pgzip</code>, it can speeds up the dump and restoration
processes through parallel compression.</li>
</ul>

<p dir="auto">Greenmask is ideal for various scenarios, including:</p>
<ul dir="auto">
<li><strong>Backup and Restoration</strong>. Use Greenmask for your daily routines involving logical backup dumping and restoration. It
seamlessly handles tasks like table restoration after truncation. Its functionality closely mirrors that of pg_dump
and pg_restore, making it a straightforward replacement.</li>
<li><strong>Anonymization, Transformation, and Data Masking</strong>. Employ Greenmask for anonymizing, transforming, and masking
backups, especially when setting up a staging environment or for analytical purposes. It simplifies the deployment of
a pre-production environment with consistently anonymized data, facilitating faster time-to-market in the development
lifecycle.</li>
</ul>

<p dir="auto">It is evident that the most appropriate approach for executing logical backup dumping and restoration is by leveraging
the core PostgreSQL utilities, specifically pg_dump and pg_restore. <strong>Greenmask</strong> has been purposefully designed to
align with PostgreSQL&#39;s native utilities, ensuring compatibility. Greenmask primarily handles data dumping
operations independently and delegates the responsibilities of schema dumping and restoration to pg_dump and pg_restore,
maintaining seamless integration with PostgreSQL&#39;s standard tools.</p>

<p dir="auto">Greenmask uses the <strong>directory format</strong> of <em>pg_dump</em> and <em>pg_restore</em>. This format is particularly suitable for
parallel execution and partial restoration, and it includes clear metadata files that aid in determining the backup and
restoration steps. Greenmask has been optimized to work seamlessly with remote storage systems and anonymization
procedures.</p>

<ul dir="auto">
<li><strong>s3</strong> - This option supports any S3-like storage system, including AWS S3, making it versatile and adaptable to
various cloud-based storage solutions.</li>
<li><strong>directory</strong> - This is the standard choice, representing the ordinary filesystem directory for local storage.</li>
</ul>
<div dir="auto"><h4 tabindex="-1" dir="auto">Data Anonymization and Validation</h4><a id="user-content-data-anonymization-and-validation" aria-label="Permalink: Data Anonymization and Validation" href="#data-anonymization-and-validation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Greenmask works with <strong>COPY lines</strong>, collects schema metadata using the Golang driver, and employs this driver in the
encoding and decoding process. The <strong>validate command</strong> offers a way to assess the impact on both schema
(<strong>validation warnings</strong>) and data (<strong>transformation and displaying differences</strong>). This command allows you to validate
the schema and data transformations, ensuring the desired outcomes during the Anonymization process.</p>

<p dir="auto">If your table schema relies on functional dependencies between columns, you can address this challenge using the
<a href="https://docs.greenmask.io/latest/built_in_transformers/dynamic_parameters/" rel="nofollow">Dynamic parameters</a>. By setting dynamic
parameters, you can resolve such as created_at and updated_at cases, where the
updated_at must be greater or equal than the created_at.</p>
<p dir="auto">If you need to implement custom logic imperatively use
<a href="https://docs.greenmask.io/latest/built_in_transformers/advanced_transformers/template_record/" rel="nofollow">TemplateRecord</a> or
<a href="https://docs.greenmask.io/latest/built_in_transformers/advanced_transformers/template/" rel="nofollow">Template</a> transformers.</p>
<p dir="auto">Greenmask provides a framework for creating your custom transformers, which can be reused efficiently. These
transformers can be seamlessly integrated without requiring recompilation, thanks to the PIPE (stdin/stdout)
interaction.</p>
<p dir="auto">Furthermore, Greenmask&#39;s architecture is designed to be highly extensible, making it possible to introduce other
interaction protocols, such as HTTP or Socket, for conducting anonymization procedures.</p>
<div dir="auto"><h4 tabindex="-1" dir="auto">PostgreSQL Version Compatibility</h4><a id="user-content-postgresql-version-compatibility" aria-label="Permalink: PostgreSQL Version Compatibility" href="#postgresql-version-compatibility"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><strong>Greenmask</strong> is compatible with PostgreSQL versions <strong>11 and higher</strong>.</p>

<ul dir="auto">
<li><a href="https://docs.greenmask.io" rel="nofollow">Documentation</a></li>
<li>Email: <strong><a href="mailto:support@greenmask.io">support@greenmask.io</a></strong></li>
<li><a href="https://twitter.com/GreenmaskIO" rel="nofollow">Twitter</a></li>
<li><a href="https://t.me/greenmask_community" rel="nofollow">Telegram</a></li>
<li><a href="https://discord.com/invite/rKBKvDECfd" rel="nofollow">Discord</a></li>
<li><a href="https://hub.docker.com/r/greenmask/greenmask" rel="nofollow">DockerHub</a></li>
</ul>

<ul dir="auto">
<li>Utilized the  <a href="https://postgrespro.com/community/demodb" rel="nofollow">Demo database</a>, provided by PostgresPro, for integration
testing purposes.</li>
<li>Employed the <a href="https://github.com/morenoh149/postgresDBSamples">adventureworks database</a> created
by <code>morenoh149/postgresDBSamples</code>, in the Docker Compose playground.</li>
</ul>
</article></div></div>
  </body>
</html>
