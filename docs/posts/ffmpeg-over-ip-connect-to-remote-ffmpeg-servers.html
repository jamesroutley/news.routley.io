<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/steelbrain/ffmpeg-over-ip">Original</a>
    <h1>Show HN: FFmpeg-over-IP â€“ Connect to remote FFmpeg servers</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">Connect to remote ffmpeg servers. Are you tired of unsuccessfully trying to pass your GPU through to a docker
container running in a VM? So was I! <code>ffmpeg-over-ip</code> allows you to run an ffmpeg server on a machine with access
to a GPU (Linux, Windows, or Mac) and connect to it from a remote machine. The only thing you need is Node.js
installed and a shared filesystem (could be NFS, SMB, etc.) between the two machines.</p>

<p dir="auto"><code>ffmpeg-over-ip</code> consists of two main parts, the server and the client. Both are packed neatly into single JS
files. You can download these from the <a href="https://www.npmjs.com/package/ffmpeg-over-ip?activeTab=code" rel="nofollow">npm interface</a> or by <code>npm install ffmpeg-over-ip</code> and then copying
them to the relevant places. You don&#39;t need any <code>node_modules</code> to run the server or the client.</p>
<p dir="auto">The javascript files require Node.js runtime to work. If you want standalone files that you can mount in a docker
container, you can find these in the <a href="https://github.com/steelbrain/ffmpeg-over-ip/releases">Github Releases</a>. On the releases page, you may have to click <strong>&#34;Show all
assets&#34;</strong> to see the files.</p>

<p dir="auto">The server and the client are both configured using JSONC (JSON with comments) configuration files. The paths
of these files can be flexible. To identify which paths are being used, you can invoke either with <code>--debug-print-search-paths</code>.</p>
<p dir="auto">Template/example configuration files are provided in this repository for your convinience. Unless the server and the client
share the same filesystem, you may have to specify <code>rewrites</code> in the server configuration file.</p>

<p dir="auto">Both the server and the client files are executable, so long as there is a Node.js installation available. If you intend
to use this in a docker container, you can directly mount the client file to where the container would expect a regular
ffmpeg executable to be, ie <code>docker run -v ./path/to/client-bin:/usr/lib/jellyfin-ffmpeg/ffmpeg ...</code>.</p>
<p dir="auto">The server and the client communicate commands over HTTP, so make sure that whatever port you specify on the server is
allowed through the firewall.</p>
<p dir="auto">Assuming you <strong>download one of the release files</strong>, here&#39;s what the usage would look like</p>
<p dir="auto">On the client side</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ ./ffmpeg-over-ip-client --debug-print-search-paths # See the places where it&#39;ll look for config
$ cp template.ffmpeg-over-ip.client.jsonc ffmpeg-over-ip.client.jsonc # Add config to one of the places
$ nano ffmpeg-over-ip.client.jsonc # Change the stuff you want
$ ./ffmpeg-over-ip-client &lt;use like ffmpeg, add ffmpeg args here&gt;"><pre>$ ./ffmpeg-over-ip-client --debug-print-search-paths <span><span>#</span> See the places where it&#39;ll look for config</span>
$ cp template.ffmpeg-over-ip.client.jsonc ffmpeg-over-ip.client.jsonc <span><span>#</span> Add config to one of the places</span>
$ nano ffmpeg-over-ip.client.jsonc <span><span>#</span> Change the stuff you want</span>
$ ./ffmpeg-over-ip-client <span>&lt;</span>use like ffmpeg, add ffmpeg args here<span>&gt;</span></pre></div>
<p dir="auto">On the server side</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ ./ffmpeg-over-ip-server --debug-print-search-paths # See the places where it&#39;ll look for config
$ cp template.ffmpeg-over-ip.server.jsonc ffmpeg-over-ip.server.jsonc # Add config to one of the places
$ nano ffmpeg-over-ip.server.jsonc # Change the stuff you want, especially the rewrites
$ ./ffmpeg-over-ip-server"><pre>$ ./ffmpeg-over-ip-server --debug-print-search-paths <span><span>#</span> See the places where it&#39;ll look for config</span>
$ cp template.ffmpeg-over-ip.server.jsonc ffmpeg-over-ip.server.jsonc <span><span>#</span> Add config to one of the places</span>
$ nano ffmpeg-over-ip.server.jsonc <span><span>#</span> Change the stuff you want, especially the rewrites</span>
$ ./ffmpeg-over-ip-server</pre></div>
<p dir="auto">Assuming you want to <strong>download these from npm</strong>, here&#39;s how you would do it</p>
<p dir="auto">On the client side:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ npm install ffmpeg-over-ip
$ ./node_modules/.bin/ffmpeg-over-ip-client --debug-print-search-paths # See the places where it&#39;ll look for config
$ cp template.ffmpeg-over-ip.client.jsonc ffmpeg-over-ip.client.jsonc # Add config to one of the places
$ nano ffmpeg-over-ip.client.jsonc # Change the stuff you want
$ ./node_modules/.bin/ffmpeg-over-ip-client &lt;use like ffmpeg, add ffmpeg args here&gt;"><pre>$ npm install ffmpeg-over-ip
$ ./node_modules/.bin/ffmpeg-over-ip-client --debug-print-search-paths <span><span>#</span> See the places where it&#39;ll look for config</span>
$ cp template.ffmpeg-over-ip.client.jsonc ffmpeg-over-ip.client.jsonc <span><span>#</span> Add config to one of the places</span>
$ nano ffmpeg-over-ip.client.jsonc <span><span>#</span> Change the stuff you want</span>
$ ./node_modules/.bin/ffmpeg-over-ip-client <span>&lt;</span>use like ffmpeg, add ffmpeg args here<span>&gt;</span></pre></div>
<p dir="auto">On the server side:</p>
<div dir="auto" data-snippet-clipboard-copy-content="$ npm install ffmpeg-over-ip
$ ./node_modules/.bin/ffmpeg-over-ip-server --debug-print-search-paths # See the places where it&#39;ll look for config
$ cp template.ffmpeg-over-ip.server.jsonc ffmpeg-over-ip.server.jsonc # Add config to one of the places
$ nano ffmpeg-over-ip.server.jsonc # Change the stuff you want, especially the rewrites
$ ./node_modules/.bin/ffmpeg-over-ip-server"><pre>$ npm install ffmpeg-over-ip
$ ./node_modules/.bin/ffmpeg-over-ip-server --debug-print-search-paths <span><span>#</span> See the places where it&#39;ll look for config</span>
$ cp template.ffmpeg-over-ip.server.jsonc ffmpeg-over-ip.server.jsonc <span><span>#</span> Add config to one of the places</span>
$ nano ffmpeg-over-ip.server.jsonc <span><span>#</span> Change the stuff you want, especially the rewrites</span>
$ ./node_modules/.bin/ffmpeg-over-ip-server</pre></div>

<p dir="auto">The contents of this project are licensed under the terms of the MIT License.</p>
</article></div></div>
  </body>
</html>
