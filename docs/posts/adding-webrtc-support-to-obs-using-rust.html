<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/obsproject/obs-studio/pull/7926">Original</a>
    <h1>Adding WebRTC support to OBS using Rust</h1>
    
    <div id="readability-page-1" class="page"><div>
        <div>
  
  <task-lists disabled="" sortable="">
    <div>
      <p dir="auto">Co-authored-by: Sean DuBois <a href="mailto:sean@siobud.com">sean@siobud.com</a></p>
<p dir="auto">First and foremost, thanks to the original author of the draft PR for webrtc Colin Edwards (DDRBoxman).</p>
<h3 dir="auto">Description</h3>
<p dir="auto">This PR adds WebRTC support to OBS. WebRTC is an alternative to RTMP that is being adopted by more services. Adding WebRTC support to OBS would benefit OBS and its users greatly. These are some of the highlights. Following this I also have a FAQ for questions we have already received regarding this PR.</p>
<p dir="auto">This initial version is intentionally simplified to only support output. Later PRs will add source support.</p>
<p dir="auto">Specifically, this adds a plugin that extends support for:</p>
<ul dir="auto">
<li>WebRTC Service type with recommended settings for maximum compatibility with webrtc peers</li>
<li>WebRTC Output</li>
<li>Rust implementation of the WebRTC stack with FFI bindings</li>
</ul>
<p dir="auto">Remaining tasks:</p>
<ul>
<li> Fix-up remaining CI build environments to correctly install and build rust</li>
<li> Ensure that the rust static libraries are built against the correct OSX compatability version</li>
<li> Emit the correct dropped frames amount from peer stats</li>
<li> ...</li>
</ul>
<h3 dir="auto">Motivation and Context</h3>
<h4 dir="auto">Subsecond Latency</h4>
<p dir="auto">With WebRTC we are able to achieve sub second latency. With our initial measurements we see ~120 Milliseconds from Broadcaster to Playback. We believe we can continue to bring down this number as well.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/231018/207683150-35cabe9a-8d25-491b-9f7e-8409ae9fdcd3.png"><img src="https://user-images.githubusercontent.com/231018/207683150-35cabe9a-8d25-491b-9f7e-8409ae9fdcd3.png" alt="image"/></a></p>
<p dir="auto">Interactive latency lets broadcasters create new experiences they couldn’t before. OBS users can now create interactive experiences with their viewers. This would allow talk shows and other productions that require conversational latency to use OBS.</p>
<h4 dir="auto">Remove FTL from OBS</h4>
<p dir="auto">FTL is a protocol that was created for Mixer. It provided sub-second latency and was used by a few Open Source projects and streaming services. The protocol has been abandoned and it would be nice to remove it from OBS. Adding WebRTC would make that possible since it provides the latency required in addition to the many benefits inherent in the WebRTC stack like encryption, network topology strategies, robust congestion control, etc.</p>
<h4 dir="auto">Latest in Video Compression</h4>
<p dir="auto">WebRTC will let OBS users experiment with newer codecs. WebRTC is flexible in what codecs it supports so users could use H265 and AV1.</p>
<p dir="auto">AV1 users are reporting a <a href="https://engineering.fb.com/2018/04/10/video-engineering/av1-beats-x264-and-libvpx-vp9-in-practical-use-case/" rel="nofollow">50% reduction in bandwidth required</a>.</p>
<h4 dir="auto">Broadcast all angles</h4>
<p dir="auto">WebRTC supports multiple video streams in the same session. OBS could experiment with broadcasting multiple scenes at once! Viewers could then switch between scenes or different views in the same game.</p>
<h4 dir="auto">Simulcast</h4>
<p dir="auto">WebRTC allows broadcasters to upload multiple streams of different quality. OBS users could upload ‘high’, ‘med’, and ‘low’ streams themselves. This would reduce the server costs greatly, allowing more</p>
<h4 dir="auto">Peer-to-Peer (if you need it)</h4>
<p dir="auto">With WebRTC OBS users could share their video without needing a video server at all! WebRTC can establish a P2P connection so users could send video from OBS directly to their users. No more worrying about setting up special servers to ingest and transcode.</p>
<p dir="auto">In the future we could add a WebRTC source. Then broadcasters could add WebRTC sources to their scenes. This means low latency collaboration with no backend required!</p>
<h3 dir="auto">How Has This Been Tested?</h3>
<p dir="auto">This has currently been tested on Linux and Mac with locally run broadcast-box as well as remotely hosted WHIP endpoints.</p>
<p dir="auto">Configurations tested:</p>
<ul dir="auto">
<li>Mac OSX M1 Monterey</li>
<li>Debian Sid</li>
</ul>
<p dir="auto">Original draft PR: <a data-error-text="Failed to load title" data-id="1352565460" data-permission-text="Title is private" data-url="https://github.com/obsproject/obs-studio/issues/7192" data-hovercard-type="pull_request" data-hovercard-url="/obsproject/obs-studio/pull/7192/hovercard" href="https://github.com/obsproject/obs-studio/pull/7192">#7192</a></p>
<h3 dir="auto">Types of changes</h3>


<ul dir="auto">
<li>New feature (non-breaking change which adds functionality)</li>
</ul>





<h3 dir="auto">Checklist:</h3>


<ul>
<li> My code has been run through <a href="https://github.com/obsproject/obs-studio/blob/master/.clang-format">clang-format</a>.</li>
<li> I have read the <a href="https://github.com/obsproject/obs-studio/blob/master/CONTRIBUTING.rst"><strong>contributing</strong> document</a>.</li>
<li> My code is not on the master branch.</li>
<li> The code has been tested.</li>
<li> All commit messages are properly formatted and commits squashed where appropriate.</li>
<li> I have included updates to all appropriate documentation.</li>
</ul>
    </div>
  </task-lists>
  
</div>

      </div></div>
  </body>
</html>
