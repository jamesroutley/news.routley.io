<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://developer.chrome.com/blog/help-css-nesting/">Original</a>
    <h1>Help pick a syntax for CSS nesting</h1>
    
    <div id="readability-page-1" class="page"><div><p>CSS nesting is a convenience syntax addition that allows CSS to be added inside of a ruleset. If you&#39;ve used <a href="https://sass-lang.com/guide#:~:text=throughout%20the%C2%A0site.-,Nesting,-When%20writing%20HTML">SCSS</a>, <a href="https://lesscss.org/features/#features-overview-feature-nested-rules">Less</a> or <a href="https://stylus-lang.com/docs/selectors.html#partial-reference">Stylus</a>, then you&#39;ve most certainly seen a few flavors of this:</p><pre><code><span>.nesting </span><span>{</span></code></pre><p>Which after being compiled to regular CSS by the preprocessor, turns into regular CSS like this:</p><pre><code><span>.nesting</span> <span>{</span></code></pre><p>An official CSS version of this syntax is being strongly considered and we have a split in preference that we&#39;d like to employ the help of the community to break the tie. The rest of this post will be introducing the syntax options so you can feel informed to take a survey at the end.</p><details><summary></summary><p>There are a few reasons the most popular nesting syntax can&#39;t be used as is:</p><ol><li><p><b>Ambiguous parsing</b></p></li><li><p><b>Preprocessor parsing conflicts</b></p></li><li><p><b>Waiting for <a href="https://web.dev/css-is-and-where/"><code>:is()</code></a></b></p></li></ol></details><h2 id="overview-of-what-were-comparing" tabindex="-1"><a href="#overview-of-what-were-comparing" aria-hidden="true">#</a> Overview of what we&#39;re comparing</h2><p>We want to get CSS nesting right, and in that spirit we&#39;re including the community. The following sections will help describe the three possible versions we&#39;re evaluating. We&#39;ll then go over some examples of usage for comparison, and at the end there will be a light survey asking you which you preferred overall.</p><h3 id="option-1-nest" tabindex="-1"><a href="#option-1-nest" aria-hidden="true">#</a> Option 1: @nest</h3><p>This is the current specified syntax in <a href="https://www.w3.org/TR/css-nesting-1/">CSS Nesting 1</a>. It offers a convenient way to nest appending styles by starting new nested selectors with <code>&amp;</code>. It also offers <code>@nest</code> as a way to place the <code>&amp;</code> context anywhere inside a new selector, like when you&#39;re not just appending subjects. It&#39;s flexible and minimal but at the expense of needing to remember <code>@nest</code> or <code>&amp;</code> depending on your use case.</p><h3 id="option-2-nest-restricted" tabindex="-1"><a href="#option-2-nest-restricted" aria-hidden="true">#</a> Option 2: @nest restricted</h3><p>This is a stricter alternative, in an attempt to reduce the expense mentioned of remembering two nesting methods. This restricted syntax only allows nesting to occur following <code>@nest</code>, so there&#39;s no append only convenience pattern. Removing ambiguity of choice, creating one easy to remember way to nest, but sacrifices terseness in favor of convention.</p><p>It&#39;s worth noting that the less restricted <code>@nest</code> syntax (Option 1) could use a linter to enforce a usage rule across a team, in case they together decided they didn&#39;t like the ambiguity or terseness. Changing the spec may be an extreme measure.</p><h3 id="option-3-brackets" tabindex="-1"><a href="#option-3-brackets" aria-hidden="true">#</a> Option 3: Brackets</h3><p>In order to avoid the double-syntax or extra clutter involved with the <code>@nest</code> proposals, <a href="https://www.miriamsuzanne.com/">Miriam Suzanne</a> and <a href="https://twitter.com/fantasai">Elika Etemad</a> proposed an <a href="https://github.com/w3c/csswg-drafts/issues/4748#issuecomment-924118287">alternative syntax</a> that instead relies on additional curly-brackets. This provides syntax clarity, with only two extra characters, and no new at-rules. It also allows nested rules to be grouped by the type of nesting required, as a way of simplifying multiple similarly nested selectors.</p><h2 id="example-1-direct-nesting" tabindex="-1"><a href="#example-1-direct-nesting" aria-hidden="true">#</a> Example 1 - Direct nesting</h2><h3 id="nest" tabindex="-1"><a href="#nest" aria-hidden="true">#</a> @nest</h3><pre><code><span>.foo</span> <span>{</span></code></pre><h3 id="nest-always" tabindex="-1"><a href="#nest-always" aria-hidden="true">#</a> @nest always</h3><pre><code><span>.foo</span> <span>{</span></code></pre><h3 id="brackets" tabindex="-1"><a href="#brackets" aria-hidden="true">#</a> brackets</h3><pre><code><span>.foo</span> <span>{</span></code></pre><h3 id="equivalent-css" tabindex="-1"><a href="#equivalent-css" aria-hidden="true">#</a> Equivalent CSS</h3><pre><code><span>.foo</span> <span>{</span></code></pre><h2 id="example-2-compound-nesting" tabindex="-1"><a href="#example-2-compound-nesting" aria-hidden="true">#</a> Example 2 - Compound nesting</h2><h3 id="nest-1" tabindex="-1"><a href="#nest-1" aria-hidden="true">#</a> @nest</h3><pre><code><span>.foo</span> <span>{</span></code></pre><h3 id="nest-always-1" tabindex="-1"><a href="#nest-always-1" aria-hidden="true">#</a> @nest always</h3><pre><code><span>.foo</span> <span>{</span></code></pre><h3 id="brackets-1" tabindex="-1"><a href="#brackets-1" aria-hidden="true">#</a> brackets</h3><pre><code><span>.foo</span> <span>{</span></code></pre><h3 id="equivalent-css-1" tabindex="-1"><a href="#equivalent-css-1" aria-hidden="true">#</a> Equivalent CSS</h3><pre><code><span>.foo</span> <span>{</span></code></pre><h2 id="example-3-selector-lists-and-nesting" tabindex="-1"><a href="#example-3-selector-lists-and-nesting" aria-hidden="true">#</a> Example 3 - Selector lists and nesting</h2><h3 id="nest-2" tabindex="-1"><a href="#nest-2" aria-hidden="true">#</a> @nest</h3><pre><code><span>.foo, .bar</span> <span>{</span></code></pre><h3 id="nest-always-2" tabindex="-1"><a href="#nest-always-2" aria-hidden="true">#</a> @nest always</h3><pre><code><span>.foo, .bar</span> <span>{</span></code></pre><h3 id="brackets-2" tabindex="-1"><a href="#brackets-2" aria-hidden="true">#</a> brackets</h3><pre><code><span>.foo, .bar</span> <span>{</span></code></pre><h3 id="equivalent-css-2" tabindex="-1"><a href="#equivalent-css-2" aria-hidden="true">#</a> Equivalent CSS</h3><pre><code><span>.foo, .bar</span> <span>{</span></code></pre><h2 id="example-4-multiple-levels" tabindex="-1"><a href="#example-4-multiple-levels" aria-hidden="true">#</a> Example 4 - Multiple levels</h2><h3 id="nest-3" tabindex="-1"><a href="#nest-3" aria-hidden="true">#</a> @nest</h3><pre><code><span>figure</span> <span>{</span></code></pre><h3 id="nest-always-3" tabindex="-1"><a href="#nest-always-3" aria-hidden="true">#</a> @nest always</h3><pre><code><span>figure</span> <span>{</span></code></pre><h3 id="brackets-3" tabindex="-1"><a href="#brackets-3" aria-hidden="true">#</a> brackets</h3><pre><code><span>figure</span> <span>{</span></code></pre><h3 id="equivalent-css-3" tabindex="-1"><a href="#equivalent-css-3" aria-hidden="true">#</a> Equivalent CSS</h3><pre><code><span>figure</span> <span>{</span></code></pre><h2 id="example-5-parent-nesting-or-subject-changing" tabindex="-1"><a href="#example-5-parent-nesting-or-subject-changing" aria-hidden="true">#</a> Example 5 - Parent nesting or subject changing</h2><h3 id="nest-4" tabindex="-1"><a href="#nest-4" aria-hidden="true">#</a> @nest</h3><pre><code><span>.foo</span> <span>{</span></code></pre><h3 id="nest-always-4" tabindex="-1"><a href="#nest-always-4" aria-hidden="true">#</a> @nest always</h3><pre><code><span>.foo</span> <span>{</span></code></pre><h3 id="brackets-4" tabindex="-1"><a href="#brackets-4" aria-hidden="true">#</a> brackets</h3><pre><code><span>.foo</span> <span>{</span></code></pre><h3 id="equivalent-css-4" tabindex="-1"><a href="#equivalent-css-4" aria-hidden="true">#</a> Equivalent CSS</h3><pre><code><span>.foo</span> <span>{</span></code></pre><h2 id="example-6-mixing-direct-and-parent-nesting" tabindex="-1"><a href="#example-6-mixing-direct-and-parent-nesting" aria-hidden="true">#</a> Example 6 - Mixing direct and parent nesting</h2><h3 id="nest-5" tabindex="-1"><a href="#nest-5" aria-hidden="true">#</a> @nest</h3><pre><code><span>.foo</span> <span>{</span></code></pre><h3 id="nest-always-5" tabindex="-1"><a href="#nest-always-5" aria-hidden="true">#</a> @nest always</h3><pre><code><span>.foo</span> <span>{</span></code></pre><h3 id="brackets-5" tabindex="-1"><a href="#brackets-5" aria-hidden="true">#</a> brackets</h3><pre><code><span>.foo</span> <span>{</span></code></pre><h3 id="equivalent-css-5" tabindex="-1"><a href="#equivalent-css-5" aria-hidden="true">#</a> Equivalent CSS</h3><pre><code><span>.foo</span> <span>{</span></code></pre><h3 id="nest-6" tabindex="-1"><a href="#nest-6" aria-hidden="true">#</a> @nest</h3><pre><code><span>.foo</span> <span>{</span></code></pre><h4 id="or-explicitly-extended" tabindex="-1"><a href="#or-explicitly-extended" aria-hidden="true">#</a> or explicitly / extended</h4><pre><code><span>.foo</span> <span>{</span></code></pre><h3 id="nest-always-is-always-explicit" tabindex="-1"><a href="#nest-always-is-always-explicit" aria-hidden="true">#</a> @nest always (is always explicit)</h3><pre><code><span>.foo</span> <span>{</span></code></pre><h3 id="brackets-6" tabindex="-1"><a href="#brackets-6" aria-hidden="true">#</a> brackets</h3><pre><code><span>.foo</span> <span>{</span></code></pre><h4 id="or-explicitly-extended-1" tabindex="-1"><a href="#or-explicitly-extended-1" aria-hidden="true">#</a> or explicitly / extended</h4><pre><code><span>.foo</span> <span>{</span></code></pre><h3 id="equivalent-css-6" tabindex="-1"><a href="#equivalent-css-6" aria-hidden="true">#</a> Equivalent CSS</h3><pre><code><span>.foo</span> <span>{</span></code></pre><p>There&#39;s a convenience syntax called implicit nesting. The top/first examples in each example show the implicit nesting feature, where the scope of the style rules are applied to the implicit selector scope they are nested within. Implicit nesting does need adjusting when more than one nested selector needs to exist, at which point you&#39;ll need to refactor to the explicit nesting style.</p><h2 id="example-8-nesting-groups" tabindex="-1"><a href="#example-8-nesting-groups" aria-hidden="true">#</a> Example 8 - Nesting groups</h2><h3 id="nest-7" tabindex="-1"><a href="#nest-7" aria-hidden="true">#</a> @nest</h3><pre><code><span>fieldset</span> <span>{</span></code></pre><h3 id="nest-always-6" tabindex="-1"><a href="#nest-always-6" aria-hidden="true">#</a> @nest always</h3><pre><code><span>fieldset</span> <span>{</span></code></pre><h3 id="brackets-7" tabindex="-1"><a href="#brackets-7" aria-hidden="true">#</a> brackets</h3><pre><code><span>fieldset</span> <span>{</span></code></pre><h3 id="equivalent-css-7" tabindex="-1"><a href="#equivalent-css-7" aria-hidden="true">#</a> Equivalent CSS</h3><pre><code><span>fieldset</span> <span>{</span></code></pre><h2 id="example-9-complex-nesting-group-kitchen-sink" tabindex="-1"><a href="#example-9-complex-nesting-group-kitchen-sink" aria-hidden="true">#</a> Example 9 - Complex nesting group &#34;Kitchen Sink&#34;</h2><h3 id="nest-8" tabindex="-1"><a href="#nest-8" aria-hidden="true">#</a> @nest</h3><pre><code><span>dialog</span> <span>{</span></code></pre><h3 id="nest-always-7" tabindex="-1"><a href="#nest-always-7" aria-hidden="true">#</a> @nest always</h3><pre><code><span>dialog</span> <span>{</span></code></pre><h3 id="brackets-8" tabindex="-1"><a href="#brackets-8" aria-hidden="true">#</a> brackets</h3><pre><code><span>dialog</span> <span>{</span></code></pre><h3 id="equivalent-css-8" tabindex="-1"><a href="#equivalent-css-8" aria-hidden="true">#</a> Equivalent CSS</h3><pre><code><span>dialog</span> <span>{</span></code></pre><h2 id="time-to-vote" tabindex="-1"><a href="#time-to-vote" aria-hidden="true">#</a> Time to vote</h2><p>Hopefully you feel that was a fair comparison and sample platter of the syntax options we&#39;re evaluating. Please review them carefully and let us know which you prefer below. We appreciate you helping us advance CSS nesting to a syntax we all will come to know and love!</p><p><a href="https://goo.gle/nesting">Take the survey!</a></p></div></div>
  </body>
</html>
