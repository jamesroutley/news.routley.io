<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.djmurphy.net/blog/clo-gaelach/">Original</a>
    <h1>Adding insular script like it&#39;s 1626</h1>
    
    <div id="readability-page-1" class="page"><div data-astro-cid-bvzihdzo="">  <p>I’m a generation removed from when Irish children were taught to read and write in insular Irish script the Cló Gaelach.</p>
<p><a href="https://www.ninearrow.com/shop/p/clo-gaelach"><img src="https://www.djmurphy.net/main-web-clo-gaelach.jpg" alt="artistic print of the Irish alphabet in old script"/></a></p><p>Here’s a beautiful print of the full alphabet in old script, with a couple of extra symbols used for etcetera, from <a href="https://www.ninearrow.com/">Nine Arrow</a>, who has also <a href="https://www.ninearrow.com/blog/clo-gaelach-project">fallen down this rabbit hole</a>.</p>
<p>While my parents’ primary association with it are literally being rapped on the knuckles for getting it wrong, for me it’s the type of official signage on old buildings and at historical sites - it’s antiquity and heritage. (For more examples, check out the <a href="https://nicolevolmering.ie/closcape/">CLÓSCAPE Project</a>, dedicated to cataloging use around Dublin.)</p>
<p><img src="https://www.djmurphy.net/cros-an-araldaig.jpg" alt="Engraving over a school in Ireland in old Irish script" width="1008" height="194"/></p><p>The “old script” was created when medieval monks evolved the latin script to encode the <em>sound</em> of Irish. It uses a dot over a consonant to indicate it should soften according to grammatical rules.</p>
<p>Few printers had insular typesets and typewriters were rare and difficult to use, with modifier dots rather than distinct characters. Applying them required typing the letter, then backspace, then typing the dot - not very ergonomic. This made producing print slow and expensive.</p>
<figure><img src="https://www.djmurphy.net/gaelic_typewriter.jpg" alt="A typewriter with Gaelic characters" height="400"/><figcaption>A Gaelic typewriter. (Image via <a href="https://www.galwaycitymuseum.ie/">Galway City Museum</a>)</figcaption></figure>
<p>The solution was to switch to using a pure latin character set, with the dot being replaced with a “h” after the letter. This is why you get Irish names like “Sadhbh” that improbably rhyme with “five”. It’s much less phonetic because you have to look at the preceeding letter to understand what the “h” modifier is going to do, and you have to process letters in groups to understand what sound they make.</p>
<p>I’m a bit wistful that something so distinctive and beautiful and endemic has been lost, and (not having to learn to write another character set) to my mind the old script’s approach of preserving the majority word shape while still capturing the phonetic content is a better writing system. I have been thinking about how use modern tools to add the old back into modern media gracefully. There have been typographers making Gaelic fonts for a long time - <a href="https://www.gaelchlo.com">gaelchlo.com</a> is the central repository of these, but we also need to perform some letter substitutions to really achieve the old script.</p>
<p>From an accessibility and data portability perspective the ship has sailed. While Google Translate can (impressively and improbably) handle Cló Gaelach, other Irish language reference sites of record like <a href="https://teanglann.ie">teanglann.ie</a> or <a href="https://abair.ie">abair.ie</a> cannot. There is a “ga” language tag you can use to indicate to screen readers that text is in Irish, but I wouldn’t expect Irish text in Cló Gaelach to work with the Irish language NVDA screenreader plugin (I don’t have a copy of Windows to check though). So, while we might like to visually replace the “aitches” to achieve the look of the old script, we should preserve the original text.</p>
<p>Luckily there is a feature in OTF typefaces called <a href="https://learn.microsoft.com/en-us/dotnet/desktop/wpf/advanced/opentype-font-features#ligatures">“discretionary ligatures”</a> - these allow us to modify a script font to define optional ligatures that can be selected on or off, that won’t mess with the original text. It seemed like adding some ligatures to the relevant consonant-séimhiú pairs might work.</p>
<p>I gave it a try - I opened my favorite Cló Gaelach font <a href="https://www.gaelchlo.com/urgc.html">Úrchló GC</a> using <a href="https://fontforge.org">Font Forge</a> and:</p>
<ol>
<li>Added a discretionary ligature table</li>
</ol>
<p><img src="https://www.djmurphy.net/ff_1.png" alt="FontForge screenshot of adding a discretionary ligature table"/></p><ol start="2">
<li>Added a subtable for substitutions - replace all the relevant consonant + h with the dotted constant. (And for flair replace the latin etcetera (&amp;) with the <a href="https://en.wiktionary.org/wiki/%E2%81%8A">Tironian et</a> - a piece of shorthand credited to <a href="https://en.wikipedia.org/wiki/Marcus_Tullius_Tiro">Tiro</a>, scribe of <a href="https://en.wikipedia.org/wiki/Cicero">Cicero</a>, and still in use in Irish today.)</li>
</ol>
<p><img src="https://www.djmurphy.net/ff_2.png" alt="FontForge screenshot of adding a subtable for substitutions"/></p><ol start="3">
<li>Because this is discretionary and so off by default, enable it by setting the font-variant-ligatures:</li>
</ol>
<pre tabindex="0" data-language="css"><code><span><span>gaeilge {</span></span>
<span><span>  font-family</span><span>: </span><span>&#34;urgc&#34;</span><span>, </span><span>sans-serif</span><span>;</span></span>
<span><span>  font-variant-ligatures</span><span>: </span><span>discretionary-ligatures</span><span>;</span></span>
<span><span>}</span></span></code></pre>
<p>… and <span data-astro-cid-erkczdmv=""> <span lang="ga" data-astro-cid-erkczdmv="">feidhmíonn sé!</span>  </span> <ruby aria-hidden="true" data-astro-cid-erkczdmv=""> <span lang="ga" data-astro-cid-erkczdmv="">feidhmíonn sé!</span>  </ruby>  - it works!
This approach means that while the user sees the ligatures, the underlying text is still preserved for copy-paste and presentation to screen readers.</p>
<p>Ok, but you might say whatever about sprinkling Irish on a website not really about the Irish language, including it in an ancient ableit beautiful script that’s niche even in Ireland might be a little self-indulgent. To which I say it might <a href="https://resonantcomputing.org/">resonate</a> with a few people, and it’s fun and you’ve already agreed it’s beautiful but ok, I hear you. To preserve the flow for non-Irish readers, I’m playing with repurposing the HTML <code>&lt;ruby&gt;</code> element. These are ordinarily used to <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/ruby">give pronunciation hints for east-Asian scripts</a>, but for right now this seems like an interesing way to preserve reading flow for the <span data-astro-cid-erkczdmv=""> <span lang="ga" data-astro-cid-erkczdmv="">cúpla focail</span> <span lang="en" data-astro-cid-erkczdmv=""> (meaning: couple of words)</span> </span> <ruby aria-hidden="true" data-astro-cid-erkczdmv=""> <span lang="ga" data-astro-cid-erkczdmv="">cúpla focail</span> <rp data-astro-cid-erkczdmv="">(</rp>
      <rt data-astro-cid-erkczdmv="">couple of words</rt>
      <rp data-astro-cid-erkczdmv="">)</rp> </ruby>  of Irish I’m ever liable to use.</p>
<p>Hmm, but what about screen readers? Well, trying to replicate the visual approach, which is to give priority to the gaelic script over the translation, I decided to have screenreaders speak “[the Irish text] meaning: [translation]”. It turns out the <code>&lt;ruby&gt;</code> element does not have defined screenreader behavior yet, and wanting to provide both <code>lang=&#34;ga&#34;</code> for the gaelic text and <code>lang=&#34;en&#34;</code> for the translation out of principle was a bit tricky, you can see (and judge) my approach below.
I’m using Astro as a blogging framework, it allows me to define components that I can use like HTML elements. My Gaeilge.astro component looks like</p>
<pre tabindex="0" data-language="html"><code><span><span>&lt;!-- Gaeilge.astro --&gt;</span></span>
<span><span>---</span></span>
<span><span>interface Props {</span></span>
<span><span>  translation?: string;</span></span>
<span><span>}</span></span>
<span></span>
<span><span>const { translation } = Astro.props;</span></span>
<span><span>const slotContent = (await Astro.slots.render(&#34;default&#34;)).trim();</span></span>
<span><span>const plainText = slotContent.replace(/</span><span>&lt;</span><span>[^&gt;]*&gt;/g, &#34;&#34;);</span></span>
<span><span>---</span></span>
<span></span>
<span><span>&lt;</span><span>span</span><span> class</span><span>=</span><span>&#34;sr-only&#34;</span><span>&gt;</span></span>
<span><span>  &lt;</span><span>span</span><span> lang</span><span>=</span><span>&#34;ga&#34;</span><span>&gt;{plainText}&lt;/</span><span>span</span><span>&gt;</span></span>
<span><span>  {translation &amp;&amp; &lt;</span><span>span</span><span> lang</span><span>=</span><span>&#34;en&#34;</span><span>&gt; (meaning: {translation})&lt;/</span><span>span</span><span>&gt;}</span></span>
<span><span>&lt;/</span><span>span</span><span>&gt;</span></span>
<span><span>&lt;</span><span>ruby</span><span> aria-hidden</span><span>=</span><span>&#34;true&#34;</span><span>&gt;</span></span>
<span><span>  &lt;</span><span>span</span><span> class</span><span>=</span><span>&#34;gaeilge-text&#34;</span><span> lang</span><span>=</span><span>&#34;ga&#34;</span><span> set:html</span><span>=</span><span>{slotContent}</span><span> /</span><span>&gt;</span></span>
<span><span>  {</span></span>
<span><span>    translation &amp;&amp; (</span></span>
<span><span>      &lt;</span><span>rp</span><span>&gt;(&lt;/</span><span>rp</span><span>&gt;</span></span>
<span><span>      &lt;</span><span>rt</span><span>&gt;{translation}&lt;/</span><span>rt</span><span>&gt;</span></span>
<span><span>      &lt;</span><span>rp</span><span>&gt;)&lt;/</span><span>rp</span><span>&gt;</span></span>
<span><span>    )</span></span>
<span><span>  }</span></span>
<span><span>&lt;/</span><span>ruby</span><span>&gt;</span></span>
<span></span>
<span><span>&lt;</span><span>style</span><span>&gt;</span></span>
<span><span>  ruby</span><span> &gt;</span><span> rt</span><span> {</span></span>
<span><span>    text-align</span><span>: </span><span>left</span><span>;</span></span>
<span><span>    font-weight</span><span>: </span><span>lighter</span><span>;</span></span>
<span><span>    font-size</span><span>: </span><span>0.75</span><span>em</span><span>;</span></span>
<span><span>  }</span></span>
<span><span>  .gaeilge-text</span><span> {</span></span>
<span><span>    font-family</span><span>: </span><span>&#34;urgc&#34;</span><span>, </span><span>sans-serif</span><span>;</span></span>
<span><span>    font-variant-ligatures</span><span>: </span><span>discretionary-ligatures</span><span>;</span></span>
<span><span>    font-feature-settings</span><span>: </span><span>&#34;ss01&#34;</span><span> 1</span><span>;</span></span>
<span><span>  }</span></span>
<span><span>&lt;/</span><span>style</span><span>&gt;</span></span></code></pre>
</div></div>
  </body>
</html>
