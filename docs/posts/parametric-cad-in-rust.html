<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://campedersen.com/vcad">Original</a>
    <h1>Parametric CAD in Rust</h1>
    
    <div id="readability-page-1" class="page"><div><div><main><article>
<!-- -->
<!-- -->
<p>I keep designing physical parts for <a href="https://muni.works" target="_blank" rel="noreferrer">our robots</a>. Motor mounts, sensor brackets, wheel hubs. Every time, the workflow is the same: open a GUI CAD program, click around for an hour, export an STL, realize the bolt pattern is 2mm off, repeat.</p>
<p>I wanted to write my parts the way I write firmware. In <span>Rust</span>. With types. With version control. With the ability to change one number and regenerate everything.</p>
<p>So I built <a href="https://vcad.io" target="_blank" rel="noreferrer">vcad</a>.</p>
<!--$?--><template id="B:0"></template><pre><code>cargo add vcad
</code></pre><!--/$-->
<!-- -->
<h2>The idea</h2>
<p>A part is just geometry with a name. You create primitives, combine them with boolean operations, and export. That&#39;s it.</p>
<!--$?--><template id="B:1"></template><pre><code>use vcad::{centered_cube, centered_cylinder, bolt_pattern};

let plate = centered_cube(&#34;plate&#34;, 120.0, 80.0, 5.0);
let bore = centered_cylinder(&#34;bore&#34;, 15.0, 10.0, 64);
let bolts = bolt_pattern(6, 50.0, 4.5, 10.0, 32);

let part = plate - bore - bolts;
part.write_stl(&#34;plate.stl&#34;).unwrap();
</code></pre><!--/$-->
<p>That minus sign is a real <span>boolean difference</span>. <code>+</code> is union. <code>&amp;</code> is intersection. Operator overloads make CSG feel like arithmetic.</p>
<img alt="Rendered mounting plate with center bore and bolt pattern" loading="lazy" width="800" height="600" decoding="async" data-nimg="1" sizes="100vw" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fplate.e621cd8a.png&amp;w=640&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 640w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fplate.e621cd8a.png&amp;w=750&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 750w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fplate.e621cd8a.png&amp;w=828&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 828w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fplate.e621cd8a.png&amp;w=1080&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 1080w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fplate.e621cd8a.png&amp;w=1200&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 1200w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fplate.e621cd8a.png&amp;w=1920&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 1920w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fplate.e621cd8a.png&amp;w=2048&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 2048w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fplate.e621cd8a.png&amp;w=3840&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 3840w" src="https://campedersen.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fplate.e621cd8a.png&amp;w=3840&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu"/>
<p>The plate above has a center bore, four corner mounting holes, and a six-bolt circle pattern. Twelve lines of code. One STL file. Done.</p>
<!-- -->
<h2>What you can build</h2>
<p>The API is small on purpose. Primitives, booleans, transforms, patterns. That&#39;s the whole language. But it composes well.</p>
<p>An <span>L-bracket</span> with mounting holes in both faces:</p>
<!--$?--><template id="B:2"></template><pre><code>let base = centered_cube(&#34;base&#34;, 60.0, 40.0, 4.0);
let wall = centered_cube(&#34;wall&#34;, 60.0, 4.0, 36.0)
    .translate(0.0, -18.0, 20.0);
let bracket = base + wall - base_holes - wall_holes;
</code></pre><!--/$-->
<img alt="Rendered L-bracket with mounting holes" loading="lazy" width="800" height="600" decoding="async" data-nimg="1" sizes="100vw" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fbracket.116b5ee4.png&amp;w=640&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 640w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fbracket.116b5ee4.png&amp;w=750&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 750w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fbracket.116b5ee4.png&amp;w=828&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 828w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fbracket.116b5ee4.png&amp;w=1080&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 1080w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fbracket.116b5ee4.png&amp;w=1200&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 1200w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fbracket.116b5ee4.png&amp;w=1920&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 1920w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fbracket.116b5ee4.png&amp;w=2048&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 2048w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fbracket.116b5ee4.png&amp;w=3840&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 3840w" src="https://campedersen.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fbracket.116b5ee4.png&amp;w=3840&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu"/>
<p>A <span>flanged hub</span> with a bolt circle:</p>
<!--$?--><template id="B:3"></template><pre><code>let hub = centered_cylinder(&#34;hub&#34;, 15.0, 20.0, 64);
let flange = centered_cylinder(&#34;flange&#34;, 30.0, 4.0, 64)
    .translate(0.0, 0.0, -10.0);
let part = hub + flange - bore - bolt_pattern(6, 45.0, 3.0, 8.0, 32);
</code></pre><!--/$-->
<img alt="Rendered flanged hub with bolt circle" loading="lazy" width="800" height="800" decoding="async" data-nimg="1" sizes="100vw" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fhub.ebc63e06.png&amp;w=640&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 640w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fhub.ebc63e06.png&amp;w=750&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 750w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fhub.ebc63e06.png&amp;w=828&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 828w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fhub.ebc63e06.png&amp;w=1080&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 1080w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fhub.ebc63e06.png&amp;w=1200&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 1200w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fhub.ebc63e06.png&amp;w=1920&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 1920w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fhub.ebc63e06.png&amp;w=2048&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 2048w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fhub.ebc63e06.png&amp;w=3840&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 3840w" src="https://campedersen.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fhub.ebc63e06.png&amp;w=3840&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu"/>
<p>A <span>radial vent</span> pattern cut from a disc — one slot, repeated eight times:</p>
<!--$?--><template id="B:4"></template><pre><code>let slot = centered_cube(&#34;slot&#34;, 15.0, 2.0, 10.0);
let vents = slot.circular_pattern(20.0, 8);
let panel = centered_cylinder(&#34;panel&#34;, 35.0, 3.0, 64) - vents;
</code></pre><!--/$-->
<img alt="Rendered radial vent panel" loading="lazy" width="800" height="800" decoding="async" data-nimg="1" sizes="100vw" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fvent.09f35e4c.png&amp;w=640&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 640w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fvent.09f35e4c.png&amp;w=750&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 750w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fvent.09f35e4c.png&amp;w=828&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 828w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fvent.09f35e4c.png&amp;w=1080&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 1080w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fvent.09f35e4c.png&amp;w=1200&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 1200w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fvent.09f35e4c.png&amp;w=1920&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 1920w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fvent.09f35e4c.png&amp;w=2048&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 2048w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fvent.09f35e4c.png&amp;w=3840&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 3840w" src="https://campedersen.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fvent.09f35e4c.png&amp;w=3840&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu"/>
<p>Every part here is <span>parametric</span>. Change the bolt count, the radius, the wall thickness — one number changes and the whole part regenerates. No clicking. No undo. Just recompile.</p>
<!-- -->
<h2>Multi-material export</h2>
<p>STL is fine for 3D printing, but it throws away all material information. For visualization, vcad exports <span>glTF</span> scenes with PBR materials defined in TOML:</p>
<!--$?--><template id="B:5"></template><pre><code>let materials = Materials::parse(r#&#34;
    [materials.body]
    color = [0.32, 0.72, 0.95]
    metallic = 0.1
    roughness = 0.5

    [materials.antenna]
    color = [0.95, 0.3, 0.35]
    metallic = 0.3
&#34;#).unwrap();

let mut scene = Scene::new(&#34;mascot&#34;);
scene.add(body, &#34;body&#34;);
scene.add(antenna_ball, &#34;antenna&#34;);
export_scene_glb(&amp;scene, &amp;materials, &#34;mascot.glb&#34;).unwrap();
</code></pre><!--/$-->
<img alt="vcad mascot — a friendly robot built from CSG primitives" loading="lazy" width="800" height="800" decoding="async" data-nimg="1" sizes="100vw" srcset="/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fmascot.4a695c9b.png&amp;w=640&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 640w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fmascot.4a695c9b.png&amp;w=750&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 750w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fmascot.4a695c9b.png&amp;w=828&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 828w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fmascot.4a695c9b.png&amp;w=1080&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 1080w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fmascot.4a695c9b.png&amp;w=1200&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 1200w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fmascot.4a695c9b.png&amp;w=1920&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 1920w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fmascot.4a695c9b.png&amp;w=2048&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 2048w, /_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fmascot.4a695c9b.png&amp;w=3840&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu 3840w" src="https://campedersen.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fmascot.4a695c9b.png&amp;w=3840&amp;q=75&amp;dpl=dpl_4SSPLkaizuw2DyCB9jwq6avkjRQu"/>
<p>That&#39;s our mascot. Entirely CSG. A rounded cube intersected with a sphere for the body, spheres for eyes, cylinders for arms. Eight materials, seventeen parts, one GLB file.</p>
<!-- -->
<h2>Why Rust</h2>
<p>The geometry engine is <a href="https://github.com/elalish/manifold" target="_blank" rel="noreferrer">manifold</a>, which guarantees watertight meshes from boolean operations. The Rust bindings give us zero-cost abstractions over the C++ core — the operator overloads compile down to direct manifold calls. No garbage collection pauses. No floating point surprises from a scripting layer.</p>
<p>But honestly, the main reason is <span>the toolchain</span>. <code>cargo test</code> runs 21 unit tests that verify volumes, surface areas, bounding boxes, and export round-trips. <code>cargo clippy</code> catches issues before they become parts with holes in the wrong place. Types prevent you from passing a radius where a diameter was expected.</p>
<p>CAD files <em>should</em> be code. Code has tests, reviews, diffs, and CI. An STL file has... bytes.</p>
<!-- -->
<h2>Built for agents</h2>
<p>One thing I care about that most CAD tools don&#39;t: vcad is designed to be used by <span>AI coding agents</span>.</p>
<p>The <a href="https://github.com/ecto/vcad" target="_blank" rel="noreferrer">README</a> has full API tables, a cookbook with copy-pasteable recipes, and a section on <a href="https://github.com/ahujasid/blender-mcp" target="_blank" rel="noreferrer">Blender MCP</a> integration. An agent can read the docs, generate a part, export it, import it into Blender, position a camera, and render a preview — all in one conversation.</p>
<p>Every render in this post was made that way. Claude generated the geometry with vcad, imported each STL/GLB into Blender via MCP, set up studio lighting, and rendered to PNG. No human touched Blender.</p>
<p>The feedback loop is: describe a part → code generates → mesh exports → render previews → iterate. All in the terminal.</p>
<!-- -->
<h2>Try it</h2>
<!--$?--><template id="B:6"></template><pre><code>cargo add vcad
</code></pre><!--/$-->
<ul>
<li><strong>Docs:</strong> <a href="https://docs.rs/vcad" target="_blank" rel="noreferrer">docs.rs/vcad</a></li>
<li><strong>Source:</strong> <a href="https://github.com/ecto/vcad" target="_blank" rel="noreferrer">github.com/ecto/vcad</a></li>
<li><strong>Site:</strong> <a href="https://vcad.io" target="_blank" rel="noreferrer">vcad.io</a></li>
</ul>
<p>It&#39;s MIT licensed. The first version is 0.1 — there&#39;s a lot more to build. Fillets, chamfers, threads, an interactive web GUI. But the core is solid: primitives, booleans, transforms, export. Everything you need to stop clicking and start typing.</p>
<p>Go make something.</p></article><!--$--><!--/$--></main></div></div></div>
  </body>
</html>
