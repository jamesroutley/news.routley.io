<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://sdiehl.github.io/typechecker-zoo/">Original</a>
    <h1>Typechecker Zoo</h1>
    
    <div id="readability-page-1" class="page">
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2>Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        

        <!-- Set the theme before any content is loaded, prevents flash -->
        

        

        <!-- Hide / unhide sidebar before it is displayed -->
        

        <nav id="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox></mdbook-sidebar-scrollbox>
            
            
        </nav>

        <div id="page-wrapper">

            <div class="page">
                
                

                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                

                <div id="content">
                    <main>
                        
<p>This is a pet project of mine I’ve been working on for a while. We’re going to create minimal implementations of the most successful static type systems of the last 50 years. This will involve making toy implementations of programming languages and the core typechecking algorithms. These obviously have evolved a lot over the years, so we’ll start with the simple ones and proceed all the way up to modern dependent types. Basically a fun romp through half a century of programming language design.</p>
<p>We’re going to implement them all in Rust. For no particularly reason, other than it has a decent parser ecosystem and is easy to install. And I like the ironic synthesis of building pure functional languages in a language which is decidedly non-functional. It’s a bit of a heaven-and-hell thing going on, and I’ll leave it up to you to decide on the chirality of that metaphor.</p>
<p>This is going to be a more a fun weekend side project, rather than a formal introduction to these systems. If you want authoritative resources read <a href="https://www.cis.upenn.edu/~bcpierce/tapl/">TAPL</a>, <a href="https://www.cis.upenn.edu/~bcpierce/attapl/">ATTAPL</a> and <a href="http://profs.sci.univr.it/~merro/files/harper.pdf">PFPL</a> for the theory and proofs. And also read the primary sources for each typechecker which are linked in the <a href="https://sdiehl.github.io/appendices/bibliography.html">appendix</a>.</p>
<p>While the textbooks and papers are great they often focus on the theory in depth and don’t cover the gritty implementation of how to actualy code these kind of typecheckers in real code. In terms of how to lay out the data structures, logic, abstract syntax trees, etc. So we’re going for fun implementation of the gory details of these systems that could be done in a weekend.</p>
<p>The examples are implemented in fairly idiomatic Rust with a full parser and test suite, using the usual compiler libraries such as <a href="https://lalrpop.github.io/lalrpop/">larlpop</a>, <a href="https://logos.maciej.codes/">logos</a>, <a href="https://github.com/zesterer/ariadne">ariadne</a>, etc. They are obviously simplified and code golfed versions of the full implementations so that they can be easily understood and modified. But they should be a LOT easier to understand than trying to read production implementations. Parsing is also a solved problem, and <a href="https://www.stephendiehl.com/posts/mlir_introduction/">MLIR exists</a> so I’m not really going to focus on either because that’s increasingly something we offload to libraries.</p>
<p>The four little critters we’re going to build are:</p>
<div>
<a href="https://sdiehl.github.io/typechecker-zoo/foundations/lambda-calculus.html">
<img src="https://sdiehl.github.io/typechecker-zoo/lambda.png" alt="Lambda calculus symbol"/>
</a>
<p><a href="https://sdiehl.github.io/typechecker-zoo/foundations/lambda-calculus.html"><strong>Algorithm W</strong></a> <em>(775 lines of code)</em></p>
<p>Robin Milner’s classic Hindley-Milner type inference algorithm from <em>A Theory of Type Polymorphism in Programming</em>. A toy <strong>polymorphic lambda calculus</strong>.</p>
</div>
<div>
<a href="https://sdiehl.github.io/typechecker-zoo/implementations/system-f/system-f.html">
<img src="https://sdiehl.github.io/typechecker-zoo/ocaml.png" alt="OCaml logo"/>
</a>
<p><a href="https://sdiehl.github.io/typechecker-zoo/implementations/system-f/system-f.html"><strong>System F</strong></a> <em>(1090 lines of code)</em></p>
<p>Second-order lambda calculus with parametric polymorphism using bidirectional type checking. A <strong>Mini-OCaml</strong></p>
<p>An implementation of DK algorithm from <em>Complete and Easy Bidirectional Typechecking for Higher-rank Polymorphism</em> by Dunfield and Krishnaswami.</p>
</div>
<div>
<a href="https://sdiehl.github.io/typechecker-zoo/implementations/system-f-omega/system-f-omega.html">
<img src="https://sdiehl.github.io/typechecker-zoo/haskell.png" alt="Haskell logo"/>
</a>
<p><a href="https://sdiehl.github.io/typechecker-zoo/implementations/system-f-omega/system-f-omega.html"><strong>System F-ω</strong></a> <em>(3196 lines of code)</em></p>
<p>Complete implementation of System F-ω with higher-kinded types, bidirectional type checking, existential type variables, polymorphic constructor applications, pattern matching, and datatypes. A <strong>Haskell-lite</strong>.</p>
<p>Uses the method of <em>A Mechanical Formalization of Higher-Ranked Polymorphic Type Inference</em> by Zhao et al.</p>
</div>
<div>
<a href="https://sdiehl.github.io/typechecker-zoo/implementations/coc/calculus-of-constructions.html">
<img src="https://sdiehl.github.io/typechecker-zoo/lean.png" alt="Lean logo"/>
</a>
<p><a href="https://sdiehl.github.io/typechecker-zoo/implementations/coc/calculus-of-constructions.html"><strong>Calculus of Constructions</strong></a> <em>(6000 lines of code)</em></p>
<p>The Calculus of Constructions with a countable hierarchy of non-cumulative universes and inductive types. A <strong>teeny Lean-inspired dependent type checker</strong>.</p>
<p>Uses a bidirectional dependent typechecker outlined in <em>A Universe Polymorphic Type System</em> by Vladimir Voevodsky.</p>
</div>
<p>This is an MIT licensed project and just something I do as a hobby in my spare time, so if you notice a typo in the prose or code open up a <a href="https://github.com/sdiehl/typechecker-zoo">pull request on Github</a> and I will be very thankful!</p>

                    </main>

                    <nav aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->

                            <a rel="next prefetch" href="https://sdiehl.github.io/typechecker-zoo/foundations/type-systems.html" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i></i>
                            </a>

                        
                    </nav>
                </div>
            </div>

            <nav aria-label="Page navigation">

                    <a rel="next prefetch" href="https://sdiehl.github.io/typechecker-zoo/foundations/type-systems.html" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i></i>
                    </a>
            </nav>

        </div>




        


        
        
        

        
        
        

        <!-- Custom JS scripts -->
        



    </div>
    

</div>
  </body>
</html>
