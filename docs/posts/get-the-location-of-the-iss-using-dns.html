<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://shkspr.mobi/blog/2025/07/get-the-location-of-the-iss-using-dns/">Original</a>
    <h1>Get the location of the ISS using DNS</h1>
    
    <div id="readability-page-1" class="page"><div itemprop="https://schema.org/articleBody">
					<p>I love DNS esoterica. Weird little things that you can shove in the global directory to be distributed around the world instantly(ish).</p>
					<p>Domain names, like <code>www.example.com</code> usually resolve to servers. As much as we think of &#34;the cloud&#34; as being some intangible morass of ethereal Turing-machines floating in probability space, the more prosaic reality is that they&#39;re just boxen in data centres. They have a physical location.</p>
					<p>Got a tricky machine which is playing silly-buggers? Wouldn&#39;t it be nice to know exactly where it is? That way you can visit and give it some <a href="https://tvtropes.org/pmwiki/pmwiki.php/Main/PercussiveMaintenance">percussive maintenance</a>.</p>
					<p>Enter the DNS LOC record!</p>
					<p>The snappily titled <a href="https://www.rfc-editor.org/rfc/rfc1876.html">RFC 1876</a> is an <em>experimental</em> standard. It allows you to create a DNS record which specifies the latitude and longitude of your server. Of course, some data-centres are very tall and some are underground. So it also contains an altitude parameter.</p>
					<p>The standard allows for a minimum altitude of -100,000 metres - deep enough for any bunker! The maximum altitude is 42,849,672 metres which is high enough to allow it to be used on <a href="https://www.esa.int/Enabling_Support/Space_Transportation/Types_of_orbits#GEO">satellites in geostationary orbit</a>.</p>
					<p>So, as a bit of fun, I decided to create <code>where-is-the-iss.dedyn.io</code></p>
					<p>It isn&#39;t a website. You can&#39;t ping it. There&#39;s no way to interact with it <em>except</em> by using DNS.  Yup! You can use a DNS query to get the (approximate) location of the International Space Station!</p>
					<p>Linux and Mac users<sup id="fnref:win"><a href="#fn:win" role="doc-noteref" title="I don&#39;t think there&#39;s a way for Windows users to look up LOC records using PowerShell or the Command Prompt.">0</a></sup> can run:</p>
					<p><code>dig where-is-the-iss.dedyn.io LOC</code></p>
					<p>And receive back the latest position of the ISS:</p>
					<pre itemscope="" itemtype="https://schema.org/SoftwareSourceCode"><code itemprop="text">;; ANSWER SECTION:
where-is-the-iss.dedyn.io. 1066 IN  LOC 47 24 53.500 N 66 12 12.070 W 430520m 10000m 10000m 10000m
</code></pre>
					<p>The DNS records are updated every 15 minutes on a best-effort basis<sup id="fnref:nasa"><a href="#fn:nasa" role="doc-noteref" title="Look, I&#39;m not NASA, OK? If you&#39;re using this to help you dock then I cannot be held responsible.">1</a></sup>.</p>
					<h2 id="how">
						<a href="#how">How</a>
					</h2>
					<p>The lovely people at <a href="https://www.n2yo.com">N2YO</a> have a website which allows you to track <em>loads</em> of objects in orbit.  They also have an <a href="https://www.n2yo.com/api/">easy to use API</a> with a generous free tier.</p>
					<p>Calling <code>https://api.n2yo.com/rest/v1/satellite/positions/25544/0/0/0/1/&amp;apiKey=_____</code> gets back the latest position:</p>
					<pre itemscope="" itemtype="https://schema.org/SoftwareSourceCode"><span><img alt="" height="32" src="https://shkspr.mobi/blog/wp-content/plugins/tempest-highlight//svg/json.svg" width="32"/><span itemprop="programmingLanguage"> JSON</span></span><code itemprop="text"><span>{</span>
    <span>&#34;info&#34;</span>: <span>{</span>
        <span>&#34;satname&#34;</span>: <span>&#34;SPACE STATION&#34;</span>,
        <span>&#34;satid&#34;</span>: 25544,
        <span>&#34;transactionscount&#34;</span>: 7
    <span>}</span>,
    <span>&#34;positions&#34;</span>: <span>[</span>
        <span>{</span>
            <span>&#34;satlatitude&#34;</span>: -21.25409321,
            <span>&#34;satlongitude&#34;</span>: 140.3335763,
            <span>&#34;sataltitude&#34;</span>: 420.09,
            <span>&#34;azimuth&#34;</span>: 292.92,
            <span>&#34;elevation&#34;</span>: -70.95,
            <span>&#34;ra&#34;</span>: 202.69300845,
            <span>&#34;dec&#34;</span>: -32.16097472,
            <span>&#34;timestamp&#34;</span>: 1751366048,
            <span>&#34;eclipsed&#34;</span>: true
        <span>}</span>
    <span>]</span>
<span>}</span>
</code></pre>
					<p>Note that the altitude is in Km, whereas the LOC format requires m.</p>
					<p>The latitude and longitude are in decimal format - they need to be converted to Degrees, Minutes, and Seconds.</p>
					<p>There were only a few free domain name providers who offer an API for updating LOC records.  I went for <a href="https://desec.io/">deSEC</a> a charity from Berlin. They have <a href="https://desec.readthedocs.io/en/latest/">comprehensive API documentation</a>.</p>
					<p>Adding the initial LOC record is done with:</p>
					<pre itemscope="" itemtype="https://schema.org/SoftwareSourceCode"><span><img alt="" height="32" src="https://shkspr.mobi/blog/wp-content/plugins/tempest-highlight//svg/bash.svg" width="32"/><span itemprop="programmingLanguage"> Bash</span></span><code itemprop="text">curl https://desec.io/api/v1/domains/where-is-the-iss.dedyn.io/rrsets/ \
    --header &#34;Authorization: Token _______&#34; \
    --header &#34;Content-Type: application/json&#34; --data @- &lt;&lt;&lt; \
    &#39;{&#34;type&#34;: &#34;LOC&#34;, &#34;records&#34;: [&#34;40 16 25.712 S 29 32 36.243 W 427550m 0.00m 10000m 10m&#34;], &#34;ttl&#34;: 900}&#39;
</code></pre>
					<p>However, updating the record is a little trickier. it needs to be sent as an <a href="https://desec.readthedocs.io/en/latest/dns/rrsets.html#modifying-an-rrset">HTTP PATCH</a> to a subtly different URl. The PATCH only needs to send the data which have changed.</p>
					<pre itemscope="" itemtype="https://schema.org/SoftwareSourceCode"><span><img alt="" height="32" src="https://shkspr.mobi/blog/wp-content/plugins/tempest-highlight//svg/bash.svg" width="32"/><span itemprop="programmingLanguage"> Bash</span></span><code itemprop="text">curl -X PATCH https://desec.io/api/v1/domains/where-is-the-iss.dedyn.io/rrsets/@/LOC/ \
    --header &#34;Authorization: Token _______&#34; \
    --header &#34;Content-Type: application/json&#34; --data @- &lt;&lt;&lt; \
    &#39;{&#34;records&#34;: [&#34;40 16 25.712 S 29 32 36.243 W 427550m 0.00m 10000m 10m&#34;]}&#39;
</code></pre>
					<p>I set the <a href="https://ttl-calc.com/">Time To Live</a> at 900 seconds. Every 15 minutes my code runs to update the record<sup id="fnref:api"><a href="#fn:api" role="doc-noteref" title="I suppose you could build an API with unlimited request limits by distributing data via DNS TXT records. Would best suit static or infrequently updating data. Push it once to DNS and let everyone…">2</a></sup>. That keeps me well within the API limits for both services.  I could add TXT records showing when it was last updated, or other sorts of unstructured data, but I think this is enough for a quick proof-of-concept.</p>
					<p>There you have it! A complex and silly way to demonstrate how DNS can be used to hold the most unlikely of records<sup id="fnref:naptr"><a href="#fn:naptr" role="doc-noteref" title="See if you can find the other interesting record I&#39;ve added to DNS!">3</a></sup>.  Say, I wonder how you&#39;d represent the co-ordinates of the Mars Rover…?</p>
					<h2 id="further-reading">
						<a href="#further-reading">Further Reading</a>
					</h2>
					<p>For more DNS weirdness, please see my other posts:</p>
					<ul>
						<li>
							<a href="https://shkspr.mobi/blog/2022/08/dns-esoterica-bimi-svg-in-dns-txt-wtf/">BIMI - SVG in DNS TXT WTF?!</a>
						</li>
						<li>
							<a href="https://shkspr.mobi/blog/2022/07/dns-esoterica-why-you-cant-dig-switzerland/">Why you can&#39;t dig Switzerland</a>
						</li>
					</ul>
					
				</div></div>
  </body>
</html>
