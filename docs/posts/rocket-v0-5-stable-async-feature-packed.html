<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://rocket.rs/v0.5/news/2023-11-17-version-0.5/">Original</a>
    <h1>Rocket v0.5: Stable, Async, Feature-Packed</h1>
    
    <div id="readability-page-1" class="page"><section><div><article><p><strong>Posted by <a href="https://sergio.bz">Sergio Benitez</a> on Nov 17, 2023</strong></p><p>Four years, four release candidates, a thousand commits, and over a thousand issues, discussions, and PRs later, I am <del>relieved</del> thrilled to announce the general availability of Rocket v0.5.</p><blockquote><p><strong>Rocket</strong> is an async backend web framework for Rust with a focus on usability, security, extensibility, and speed. Rocket makes it simple to write secure web applications without sacrificing productivity or performance.</p></blockquote><p>We encourage all users to upgrade. For a guided migration from Rocket v0.4 to Rocket v0.5, please consult the newly available <a href="https://rocket.rs/v0.5/guide/upgrading">upgrading guide</a>. Rocket v0.4 will continue to be supported and receive security updates until the time Rocket v0.6 is released.</p><div><p><span><b>Note:</b> This is a co-announcement <a href="https://rocket.rs/v0.5/news/2023-11-17-rwf2-prelaunch/">along with the prelaunch</a> of <a href="https://rwf2.org">RWF2</a>.</span></p><p>We&#39;re addressing the community&#39;s concerns regarding the pace of Rocket&#39;s development, leadership, and release cadence in a separate announcement. Please see the accompanying <a href="https://rocket.rs/v0.5/news/2023-11-17-rwf2-prelaunch/">RWF2 prelaunch announcement</a> to learn more and see how you can get involved.</p></div><h3 id="whats-new">What&#39;s New?<a href="#whats-new" title="perma link">#</a></h3><p>Almost every bit has been reevaluated with a focus on usability and developer productivity, security, and consistency across the library and <a href="https://rocket.rs/v0.5/guide/faq/#releases">broader ecosystem</a>. The changes are numerous, so we focus on the most noteworthy changes here and encourage everyone to read the <a href="https://github.com/SergioBenitez/Rocket/blob/v0.5.0/CHANGELOG.md">CHANGELOG</a> for a complete list. For answers to frequently asked questions, see the new <a href="https://rocket.rs/v0.5/guide/faq">FAQ</a>.</p><h4 id="support-for-stable-rustc-since-rc1">‚öì Support for Stable <code>rustc</code><badge>since <code>rc.1</code></badge><a href="#support-for-stable-rustc-since-rc1" title="perma link">#</a></h4><p>Rocket v0.5 compiles and builds on Rust stable. You can now compile and build Rocket applications with <code>rustc</code> from the stable release channel and remove all <code>#![feature(..)]</code> crate attributes. The complete canonical example with a single <code>hello</code> route becomes:</p><div><table><tbody><tr><td></td><td><div><pre><span></span><span>#[macro_use]</span><span> </span><span>extern</span><span> </span><span>crate</span><span> </span><span>rocket</span><span>;</span>

<span>#[get(</span><span>&#34;/&lt;name&gt;/&lt;age&gt;&#34;</span><span>)]</span>
<span>fn</span> <span>hello</span><span>(</span><span>name</span>: <span>&amp;</span><span>str</span><span>,</span><span> </span><span>age</span>: <span>u8</span><span>)</span><span> </span>-&gt; <span>String</span> <span>{</span>
<span>    </span><span>format!</span><span>(</span><span>&#34;Hello, {} year old named {}!&#34;</span><span>,</span><span> </span><span>age</span><span>,</span><span> </span><span>name</span><span>)</span>
<span>}</span>

<span>#[launch]</span>
<span>fn</span> <span>rocket</span><span>()</span><span> </span>-&gt; <span>_</span><span> </span><span>{</span>
<span>    </span><span>rocket</span>::<span>build</span><span>().</span><span>mount</span><span>(</span><span>&#34;/hello&#34;</span><span>,</span><span> </span><span>routes</span><span>!</span><span>[</span><span>hello</span><span>])</span>
<span>}</span>
</pre></div></td></tr></tbody></table></div><details><summary>See a <code>diff</code> of the changes from v0.4.</summary><div><table><tbody><tr><td><div><pre><span> 1</span>
<span> 2</span>
<span> 3</span>
<span> 4</span>
<span> 5</span>
<span> 6</span>
<span> 7</span>
<span> 8</span>
<span> 9</span>
<span>10</span>
<span>11</span>
<span>12</span>
<span>13</span>
<span>14</span>
<span>15</span>
<span>16</span>
<span>17</span></pre></div></td><td><div><pre><span></span><span>- #![feature(proc_macro_hygiene, decl_macro)]</span>
<span>-</span>
<span> </span>#[macro_use] extern crate rocket;

<span> </span>#[get(&#34;/&lt;name&gt;/&lt;age&gt;&#34;)]
<span>- fn hello(name: String, age: u8) -&gt; String {</span>
<span>+ fn hello(name: &amp;str, age: u8) -&gt; String {</span>
<span> </span>    format!(&#34;Hello, {} year old named {}!&#34;, age, name)
}

<span>- fn main() {</span>
<span>-     rocket::ignite().mount(&#34;/hello&#34;, routes![hello]).launch();</span>
<span>- }</span>
<span>+ #[launch]</span>
<span>+ fn rocket() -&gt; _ {</span>
<span>+     rocket::build().mount(&#34;/hello&#34;, routes![hello])</span>
<span>+ }</span>
</pre></div></td></tr></tbody></table></div></details><p>Note the new <a href="https://api.rocket.rs/master/rocket/attr.launch.html"><code>launch</code></a> attribute, which simplifies starting an <code>async</code> runtime for Rocket applications. See the <a href="https://rocket.rs/v0.5/guide/upgrading">migration guide</a> for more on transitioning to a stable toolchain.</p><h4 id="async-io-since-rc1">üì• Async I/O<badge>since <code>rc.1</code></badge><a href="#async-io-since-rc1" title="perma link">#</a></h4><p>Rocket&#39;s core request handling was rebuilt in v0.5 to take advantage of the latest <code>async</code> networking facilities in Rust. Backed by <code>tokio</code>, Rocket automatically multiplexes request handling across <code>async</code> tasks on all of the available cores on the machine. As a result, route handlers can now be declared <code>async</code> and make use of <code>await</code> syntax:</p><div><table><tbody><tr><td><div><pre><span> 1</span>
<span> 2</span>
<span> 3</span>
<span> 4</span>
<span> 5</span>
<span> 6</span>
<span> 7</span>
<span> 8</span>
<span> 9</span>
<span>10</span>
<span>11</span>
<span>12</span></pre></div></td><td><div><pre><span></span><span>use</span><span> </span><span>rocket</span>::<span>tokio</span><span>;</span>
<span>use</span><span> </span><span>rocket</span>::<span>data</span>::<span>{</span><span>Data</span><span>,</span><span> </span><span>ToByteUnit</span><span>};</span>

<span>#[post(</span><span>&#34;/debug&#34;</span><span>, data = </span><span>&#34;&lt;data&gt;&#34;</span><span>)]</span>
<span>async</span><span> </span><span>fn</span> <span>debug</span><span>(</span><span>data</span>: <span>Data</span><span>&lt;&#39;</span><span>_</span><span>&gt;</span><span>)</span><span> </span>-&gt; <span>std</span>::<span>io</span>::<span>Result</span><span>&lt;</span><span>()</span><span>&gt;</span><span> </span><span>{</span>
<span>    </span><span>// Stream at most 512KiB all of the body data to stdout.</span>
<span>    </span><span>data</span><span>.</span><span>open</span><span>(</span><span>512.</span><span>kibibytes</span><span>())</span>
<span>        </span><span>.</span><span>stream_to</span><span>(</span><span>tokio</span>::<span>io</span>::<span>stdout</span><span>())</span>
<span>        </span><span>.</span><span>await</span><span>?</span><span>;</span>

<span>    </span><span>Ok</span><span>(())</span>
<span>}</span>
</pre></div></td></tr></tbody></table></div><p>See the <a href="https://rocket.rs/guide/upgrading#blocking-io">Blocking I/O</a> section of the upgrading guide for complete details on the <code>async</code> I/O transition.</p><h4 id="sentinels-since-rc1">üíÇ Sentinels<badge>since <code>rc.1</code></badge><a href="#sentinels-since-rc1" title="perma link">#</a></h4><p>Rocket v0.5 introduces <a href="https://api.rocket.rs/master/rocket/trait.Sentinel.html">sentinels</a>. Entirely unique to Rocket, sentinels offer an automatic last line of defense against runtime errors by enabling any type that appears in a route to abort application launch under invalid conditions. For example, the <a href="https://api.rocket.rs/master/rocket/struct.State.html"><code>&amp;State&lt;T&gt;</code></a> guard in v0.5 is a <a href="https://api.rocket.rs/master/rocket/trait.Sentinel.html"><code>Sentinel</code></a> that aborts launch if the type <code>T</code> is not in managed state, thus preventing associated runtime errors.</p><p><a href="https://api.rocket.rs/master/rocket/trait.Sentinel.html"><code>Sentinel</code></a>s can be implemented outside of Rocket, too, and you should seek to do so whenever possible. For instance, the <a href="https://api.rocket.rs/master/rocket_dyn_templates/struct.Template.html"><code>Template</code></a> type from <a href="https://api.rocket.rs/master/rocket_dyn_templates/index.html"><code>rocket_dyn_templates</code></a> is a sentinel that ensures templates are properly registered. As another example, consider a <code>MyResponder</code> that expects:</p><ul><li>A specific type <code>T</code> to be in managed state.</li><li>An catcher to be registered for the <code>400</code> status code.</li></ul><p>Making <code>MyResponder</code> a sentinel that guards against these conditions is as simple as:</p><div><table><tbody><tr><td></td><td><div><pre><span></span><span>use</span><span> </span><span>rocket</span>::<span>{</span><span>Rocket</span><span>,</span><span> </span><span>Ignite</span><span>,</span><span> </span><span>Sentinel</span><span>};</span>

<span>impl</span><span> </span><span>Sentinel</span><span> </span><span>for</span><span> </span><span>MyResponder</span><span> </span><span>{</span>
<span>    </span><span>fn</span> <span>abort</span><span>(</span><span>r</span>: <span>&amp;</span><span>Rocket</span><span>&lt;</span><span>Ignite</span><span>&gt;</span><span>)</span><span> </span>-&gt; <span>bool</span> <span>{</span>
<span>        </span><span>r</span><span>.</span><span>state</span>::<span>&lt;</span><span>T</span><span>&gt;</span><span>().</span><span>is_none</span><span>()</span><span> </span><span>||</span><span> </span><span>!</span><span>r</span><span>.</span><span>catchers</span><span>().</span><span>any</span><span>(</span><span>|</span><span>c</span><span>|</span><span> </span><span>c</span><span>.</span><span>code</span><span> </span><span>==</span><span> </span><span>Some</span><span>(</span><span>400</span><span>))</span>
<span>    </span><span>}</span>
<span>}</span>
</pre></div></td></tr></tbody></table></div><h4 id="streams-and-sse-since-rc1">‚òÑÔ∏è Streams and SSE<badge>since <code>rc.1</code></badge><a href="#streams-and-sse-since-rc1" title="perma link">#</a></h4><p>Powered by the new asynchronous core, Rocket v0.5 introduces real-time, typed <code>async</code> <a href="https://api.rocket.rs/master/rocket/response/stream/index.html">streams</a>. The new <a href="https://rocket.rs/guide/responses/#async-streams">async streams</a> section of the guide contains further details, and we encourage all interested parties to see the new real-time, multi-room <a href="https://github.com/SergioBenitez/Rocket/tree/master/examples/chat">chat example</a>.</p><p>As a taste of what&#39;s possible, the following <code>stream</code> route emits a <code>&#34;pong&#34;</code> Server-Sent Event every <code>n</code> seconds, defaulting to <code>1</code>:</p><div><table><tbody><tr><td><div><pre><span> 1</span>
<span> 2</span>
<span> 3</span>
<span> 4</span>
<span> 5</span>
<span> 6</span>
<span> 7</span>
<span> 8</span>
<span> 9</span>
<span>10</span>
<span>11</span>
<span>12</span>
<span>13</span></pre></div></td><td><div><pre><span></span><span>use</span><span> </span><span>rocket</span>::<span>tokio</span>::<span>time</span>::<span>{</span><span>interval</span><span>,</span><span> </span><span>Duration</span><span>};</span>
<span>use</span><span> </span><span>rocket</span>::<span>response</span>::<span>stream</span>::<span>{</span><span>Event</span><span>,</span><span> </span><span>EventStream</span><span>};;</span>

<span>#[get(</span><span>&#34;/ping?&lt;n&gt;&#34;</span><span>)]</span>
<span>fn</span> <span>stream</span><span>(</span><span>n</span>: <span>Option</span><span>&lt;</span><span>u64</span><span>&gt;</span><span>)</span><span> </span>-&gt; <span>EventStream</span><span>!</span><span>[]</span><span> </span><span>{</span>
<span>    </span><span>EventStream</span><span>!</span><span> </span><span>{</span>
<span>        </span><span>let</span><span> </span><span>mut</span><span> </span><span>timer</span><span> </span><span>=</span><span> </span><span>interval</span><span>(</span><span>Duration</span>::<span>from_secs</span><span>(</span><span>n</span><span>.</span><span>unwrap_or</span><span>(</span><span>1</span><span>)));</span>
<span>        </span><span>loop</span><span> </span><span>{</span>
<span>            </span><span>yield</span><span> </span><span>Event</span>::<span>data</span><span>(</span><span>&#34;pong&#34;</span><span>);</span>
<span>            </span><span>timer</span><span>.</span><span>tick</span><span>().</span><span>await</span><span>;</span>
<span>        </span><span>}</span>
<span>    </span><span>}</span>
<span>}</span>
</pre></div></td></tr></tbody></table></div><h4 id="websockets-since-rc4">üîå WebSockets<badge>since <code>rc.4</code></badge><a href="#websockets-since-rc4" title="perma link">#</a></h4><p>Rocket v0.5 introduces support for HTTP connection upgrades via a new <a href="https://api.rocket.rs/master/rocket/response/struct.Response.html#upgrading">upgrade API</a>. The API allows responders to assume control of raw I/O with the client in an existing HTTP connection, thus allowing HTTP connections to be <em>upgraded</em> to any protocol, including WebSockets!</p><p>The newly introduced <a href="https://api.rocket.rs/master/rocket_ws"><code>rocket_ws</code></a> library takes advantage of the new API to implement first-class support for WebSockets entirely outside of Rocket&#39;s core. Working with <code>rocket_ws</code> to implement an echo server looks like this:</p><div><table><tbody><tr><td></td><td><div><pre><span></span><span>use</span><span> </span><span>rocket_ws</span>::<span>{</span><span>WebSocket</span><span>,</span><span> </span><span>Stream</span><span>};</span>

<span>#[get(</span><span>&#34;/echo&#34;</span><span>)]</span>
<span>fn</span> <span>echo_compose</span><span>(</span><span>ws</span>: <span>WebSocket</span><span>)</span><span> </span>-&gt; <span>Stream</span><span>!</span><span>[</span><span>&#39;</span><span>static</span><span>]</span><span> </span><span>{</span>
<span>    </span><span>ws</span><span>.</span><span>stream</span><span>(</span><span>|</span><span>io</span><span>|</span><span> </span><span>io</span><span>)</span>
<span>}</span>
</pre></div></td></tr></tbody></table></div><p>Just like the newly introduced <code>async</code> streams, <code>rocket_ws</code> also supports using generator syntax for WebSocket messages:</p><div><table><tbody><tr><td></td><td><div><pre><span></span><span>use</span><span> </span><span>rocket_ws</span>::<span>{</span><span>WebSocket</span><span>,</span><span> </span><span>Stream</span><span>};</span>

<span>#[get(</span><span>&#34;/echo&#34;</span><span>)]</span>
<span>fn</span> <span>echo_stream</span><span>(</span><span>ws</span>: <span>WebSocket</span><span>)</span><span> </span>-&gt; <span>Stream</span><span>!</span><span>[</span><span>&#39;</span><span>static</span><span>]</span><span> </span><span>{</span>
<span>    </span><span>Stream</span><span>!</span><span> </span><span>{</span><span> </span><span>ws</span><span> </span><span>=&gt;</span>
<span>        </span><span>for</span><span> </span><span>await</span><span> </span><span>message</span><span> </span><span>in</span><span> </span><span>ws</span><span> </span><span>{</span>
<span>            </span><span>yield</span><span> </span><span>message</span><span>?</span><span>;</span>
<span>        </span><span>}</span>
<span>    </span><span>}</span>
<span>}</span>
</pre></div></td></tr></tbody></table></div><p>For complete usage details, see the <a href="https://api.rocket.rs/master/rocket_ws"><code>rocket_ws</code></a> documentation.</p><h4 id="comprehensive-forms-since-rc1">üìù Comprehensive Forms<badge>since <code>rc.1</code></badge><a href="#comprehensive-forms-since-rc1" title="perma link">#</a></h4><p>Rocket v0.5 entirely revamps <a href="https://rocket.rs/guide/requests#forms">forms</a> with support for <a href="https://rocket.rs/guide/requests#multipart">multipart uploads</a>, <a href="https://rocket.rs/guide/requests#collections">arbitrary collections</a> with <a href="https://rocket.rs/guide/requests#nesting">arbitrary nesting</a>, <a href="https://rocket.rs/guide/requests#ad-hoc-validation">ad-hoc validation</a>, and an improved <a href="https://api.rocket.rs/master/rocket/derive.FromForm.html"><code>FromForm</code> derive</a>, obviating the need for nearly all custom implementations of <code>FromForm</code> or <code>FromFormField</code>. Rocket&#39;s new wire protocol for forms allows applications to express <em>any structure</em> with <em>any level of nesting and collection</em> without any custom code, eclipsing what&#39;s offered by other web frameworks.</p><p>As an illustrative example, consider the following structures:</p><div><table><tbody><tr><td><div><pre><span> 1</span>
<span> 2</span>
<span> 3</span>
<span> 4</span>
<span> 5</span>
<span> 6</span>
<span> 7</span>
<span> 8</span>
<span> 9</span>
<span>10</span>
<span>11</span>
<span>12</span>
<span>13</span>
<span>14</span>
<span>15</span>
<span>16</span>
<span>17</span>
<span>18</span>
<span>19</span></pre></div></td><td><div><pre><span></span><span>use</span><span> </span><span>rocket</span>::<span>form</span>::<span>FromForm</span><span>;</span>

<span>#[derive(FromForm)]</span>
<span>struct</span> <span>MyForm</span><span>&lt;&#39;</span><span>r</span><span>&gt;</span><span> </span><span>{</span>
<span>    </span><span>owner</span>: <span>Person</span><span>&lt;&#39;</span><span>r</span><span>&gt;</span><span>,</span>
<span>    </span><span>pet</span>: <span>Pet</span><span>&lt;&#39;</span><span>r</span><span>&gt;</span><span>,</span>
<span>}</span>

<span>#[derive(FromForm)]</span>
<span>struct</span> <span>Person</span><span>&lt;&#39;</span><span>r</span><span>&gt;</span><span> </span><span>{</span>
<span>    </span><span>name</span>: <span>&amp;</span><span>&#39;</span><span>r</span> <span>str</span>
<span>}</span>

<span>#[derive(FromForm)]</span>
<span>struct</span> <span>Pet</span><span>&lt;&#39;</span><span>r</span><span>&gt;</span><span> </span><span>{</span>
<span>    </span><span>name</span>: <span>&amp;</span><span>&#39;</span><span>r</span> <span>str</span><span>,</span>
<span>    </span><span>#[field(validate = eq(true))]</span>
<span>    </span><span>good_pet</span>: <span>bool</span><span>,</span>
<span>}</span>
</pre></div></td></tr></tbody></table></div><p>To parse request data into a <code>MyForm</code>, a form with fields of <code>owner.name</code>, <code>pet.name</code>, and <code>pet.good_pet</code> must be submitted. The ad-hoc validation on <code>good_pet</code> validates that <code>good_pet</code> parses as <code>true</code>. Such a form, URL-encoded, may look like:</p><div><table><tbody><tr><td></td><td><div><pre><span></span><span>&#34;owner.name=Bob&amp;pet.name=Sally&amp;pet.good_pet=yes&#34;</span>
</pre></div></td></tr></tbody></table></div><p>Rocket&#39;s derived <code>FromForm</code> implementation for <code>MyForm</code> will automatically parse such a submission into the correct value:</p><div><table><tbody><tr><td></td><td><div><pre><span></span><span>MyForm</span><span> </span><span>{</span>
<span>    </span><span>owner</span>: <span>Person</span><span> </span><span>{</span>
<span>        </span><span>name</span>: <span>&#34;Bob&#34;</span><span>.</span><span>into</span><span>()</span>
<span>    </span><span>},</span>
<span>    </span><span>pet</span>: <span>Pet</span><span> </span><span>{</span>
<span>        </span><span>name</span>: <span>&#34;Sally&#34;</span><span>.</span><span>into</span><span>(),</span>
<span>        </span><span>good_pet</span>: <span>true</span><span>,</span>
<span>    </span><span>}</span>
<span>}</span>
</pre></div></td></tr></tbody></table></div><p>The rewritten <a href="https://rocket.rs/guide/requests/#forms">forms guide</a> provides complete details on revamped forms support.</p><h4 id="and-so-much-more">üöÄ And so much more!<a href="#and-so-much-more" title="perma link">#</a></h4><p>Rocket v0.5 introduces over <strong>40</strong> new features and major improvements! We encourage everyone to review the <a href="https://github.com/SergioBenitez/Rocket/blob/v0.5.0/CHANGELOG.md">CHANGELOG</a> to learn about them all. Here are a few more we don&#39;t want you to miss:</p><ul><li>An automatically enabled <a href="https://api.rocket.rs/master/rocket/shield/struct.Shield.html"><code>Shield</code></a>: security and privacy headers for all responses.</li><li><a href="https://api.rocket.rs/master/rocket/config/struct.Shutdown.html#summary">Graceful shutdown</a> with configurable grace periods, <a href="https://api.rocket.rs/master/rocket/struct.Shutdown.html">notification</a>, and <a href="https://api.rocket.rs/master/rocket/fairing/trait.Fairing.html#shutdown">shutdown fairings</a>.</li><li>An entirely new, flexible and robust <a href="https://rocket.rs/guide/configuration/#configuration">configuration system</a> based on <a href="https://docs.rs/figment/">Figment</a>.</li><li>Type-system enforced <a href="https://rocket.rs/guide/requests/#streaming">incoming data limits</a> to mitigate memory-based DoS attacks.</li><li>Support for <a href="https://rocket.rs/guide/configuration/#mutual-tls">mutual TLS</a> and client <a href="https://api.rocket.rs/master/rocket/mtls/struct.Certificate.html"><code>Certificate</code></a>s.</li><li>Asynchronous database pooling support via <a href="https://api.rocket.rs/master/rocket_db_pools/index.html"><code>rocket_db_pools</code></a>.</li><li>Compile-time URI literals via a fully revamped <a href="https://api.rocket.rs/master/rocket/macro.uri.html"><code>uri!</code></a> macro.</li></ul><h3 id="whats-next">What&#39;s Next?<a href="#whats-next" title="perma link">#</a></h3><p>We think Rocket provides the most productive and confidence-inspiring web development experience in Rust today, but as always, there&#39;s room for improvement. To that end, here&#39;s what&#39;s on the docket for the next major release:</p><ol><li><p><strong>Migration to RWF2</strong></p><p>Discussed further in the <a href="https://rocket.rs/v0.5/news/2023-11-17-rwf2-prelaunch/">RWF2 prelaunch announcement</a>, Rocket will transition to being managed by the newly formed Rocket Web Framework Foundation: <em>RWF2</em>. The net effect is increased development transparency, including public roadmaps and periodic updates, financial support for high-quality contributions, and codified pathways into the project&#39;s governance.</p></li><li><p><strong>Pluggable Connection Listeners</strong></p><p>Rocket currently expects and enjoins connection origination via TCP/IP. While sufficient for the common case, it excludes other desirable interfaces such as Unix Domain Sockets (UDS).</p><p>In the next major release, Rocket will expose [an interface for implementing and plugging-in custom connection listeners]. Rocket itself will make use of this interface to expose more common mediums out-of-the-box, such as the aforementioned UDS.</p></li><li><p><strong>Native <code>async</code> Traits</strong></p><p>Given the <a href="https://github.com/rust-lang/rust/pull/115822">stabilization of <code>async fn</code> in traits</a>, the next major release will seek to eliminate Rocket&#39;s dependence on <code>#[async_trait]</code> opting instead for native <code>async</code> traits. This will greatly improve our documentation, which currently calls out the attribute for each affected trait, as well as offer modest performance improvements.</p></li><li><p><a href="https://github.com/SergioBenitez/Rocket/issues/749"><strong>Typed Catchers</strong></a></p><p>Today&#39;s catchers cannot receive strictly typed error data. This results in workarounds where error data is queried for well-typedness at runtime. While it <em>has</em> been possible to implement a form of typed error catching prior, doing so necessitated limiting error data to <code>&#39;static</code> values, as other Rust web frameworks do, a concession we&#39;re unwilling to make.</p><p>After much experimentation, we have an approach that is ergonomic to use, safe, and correct, all without the <code>&#39;static</code> limitation. This will allow error catchers to &#34;pattern match&#34; against error types at compile-time. At runtime, Rocket will match emerging error types against the declared catchers and call the appropriate catcher with the fully-typed value.</p></li><li><p><strong>Short-Circuitable Request Processing</strong></p><p>Whether with success or failure, fairings and guards cannot presently terminate request processing early. The rationale for forbidding this functionality was that it would allow third-party crates and plugins to dictate responses without offering any recourse to the top-level application.</p><p>With the advent of typed catchers, however, we now have a mechanism by which a top-level application can intercept early responses via their type, resolving the prior concern. As such, in the next major release, fairings and guards will be able to respond to requests early, and catchers will be able to intercept those early responses at will.</p></li><li><p><strong>Associated Resources</strong></p><p>Often a set of routes will share a set requirements. For example, they may share a URI prefix, subset of guards, and some managed state. In today&#39;s Rocket, these common requirements must be repeatedly specified for each route. While this is by design (we <em>want</em> a route&#39;s requirements to be obvious), the repetition is arduous and potentially error prone.</p><p>In an upcoming major release, Rocket will introduce new mechanisms by which a set of routes can share an explicitly declared set of requirements. Their <em>explicit</em> and <em>declarative</em> nature results in requirements that are simultaneously obvious <em>and</em> declared once.</p><p>We&#39;re really excited about this upcoming change and will be announcing more in the near future.</p></li><li><p><strong>Performance Improvements</strong></p><p>Rocket appears to lag behind other Rust web frameworks in benchmarks. This is partly due to <a href="https://rocket.rs/guide/faq/#performance">poor benchmarking</a>, partly due to security-minded design decisions, and partially due to unexploited opportunities. In the next release, we&#39;ll be addressing the latter points. Specifically:</p><ul><li><p><em>Explore making work stealing optional.</em></p><p>Rocket currently defaults to using tokio&#39;s multithreaded, work-stealing scheduler. This avoids tail latency issues when faced with irregular and heterogeneous tasks at the expense of throughput due to higher bookkeeping costs associated with work stealing. Other Rust web frameworks instead opt to use tokio&#39;s single-threaded scheduler, which while theoretically suboptimal, may yield better performance results in practice, especially when benchmarking homogeneous workloads.</p><p>While we believe work-stealing schedulers are the right choice for the majority of applications desireing robust performance characteristics, we also believe the choice should be the user&#39;s. We&#39;ll seek to make this choice easier in the next release.</p></li><li><p><em>Reduce conversions from external to internal HTTP types.</em></p><p>Rocket revalidates and sometimes copies incoming HTTP request data. In Rocket v0.5, we began transitioning to a model where we revalidate security insensitive data in debug mode only, allowing for bugs to be caught and reported while reducing performance impacts in production. In the next release, we seek to extend this approach.</p></li></ul></li></ol><h3 id="thank-you">‚ù§Ô∏è Thank You<a href="#thank-you" title="perma link">#</a></h3><p>A very special thank you to <a href="https://github.com/SergioBenitez/Rocket/commits?author=jebrosen">Jeb Rosen</a>, Rocket&#39;s maintainer from v0.4 to v0.5-rc.1, without whom Rocket v0.5 wouldn&#39;t exist. Jeb is responsible for leading the migration to <code>async</code> and Rust stable along with tireless efforts to improve Rocket&#39;s documentation and address the community. Rocket is better for having had Jeb along for the ride. Thank you, Jeb.</p><p>A special thank you to all of Rocket&#39;s users, especially those who diligently waded through all four release candidates, raised issues, and participated on <a href="https://github.com/SergioBenitez/Rocket">GitHub</a> and the <a href="https://chat.mozilla.org/#/room/#rocket:mozilla.org">Matrix channel</a>. You all are an awesome, kind, and thoughtful bunch. Thank you.</p><p>A heartfelt <em>thank you</em> as well to <em>all</em> <strong>148</strong> who contributed to Rocket v0.5:</p><ul><li>Aaron Leopold</li><li>Abdullah Alyan</li><li>Aditya</li><li>Alex Macleod</li><li>Alex Sears</li><li>Alexander van Ratingen</li><li>ami-GS</li><li>Antoine Martin</li><li>arctic-alpaca</li><li>arlecchino</li><li>Arthur Woimb√©e</li><li>atouchet</li><li>Aurora</li><li>badoken</li><li>Beep LIN</li><li>Ben Sully</li><li>Benedikt Weber</li><li>Benjamin B</li><li>BlackDex</li><li>Bonex</li><li>Brenden Matthews</li><li>Brendon Federko</li><li>Brett Buford</li><li>Cedric Hutchings</li><li>Cezar Halmagean</li><li>Charles-Axel Dein</li><li>Compro Prasad</li><li>cui fliter</li><li>Daniel Wiesenberg</li><li>David Venhoek</li><li>Dimitri Sabadie</li><li>Dinu Blanovschi</li><li>Dominik Boehi</li><li>Doni Rubiagatra</li><li>Edgar Onghena</li><li>Edwin Svensson</li><li>est31</li><li>Felix Suominen</li><li>Fenhl</li><li>Filip Gospodinov</li><li>Flying-Toast</li><li>Follpvosten</li><li>Francois Stephany</li><li>Gabriel Fontes</li><li>gcarq</li><li>George Cheng</li><li>Giles Cope</li><li>Gon√ßalo Ribeiro</li><li>hiyoko3m</li><li>Howard Su</li><li>hpodhaisky</li><li>Ian Jackson</li><li>IFcoltransG</li><li>Indosaram</li><li>inyourface34456</li><li>J. Cohen</li><li>Jacob Pratt</li><li>Jacob Sharf</li><li>Jacob Simpson</li><li>Jakub DƒÖbek</li><li>Jakub Wieczorek</li><li>James Tai</li><li>Jason Hinch</li><li>Jeb Rosen</li><li>Jeremy Kaplan</li><li>Jieyou Xu</li><li>Joakim Soderlund</li><li>Johannes Liebermann</li><li>John-John Tedro</li><li>Jonah Br√ºchert</li><li>Jonas M√∏ller</li><li>Jonathan Dickinson</li><li>Jonty</li><li>Joscha</li><li>Joshua Nitschke</li><li>JR Heard</li><li>Juhasz Sandor</li><li>Julian B√ºttner</li><li>Juraj Fiala</li><li>Kenneth Allen</li><li>Kevin Wang</li><li>Kian-Meng Ang</li><li>Konrad Borowski</li><li>Leonora Tindall</li><li>Lev Kokotov</li><li>lewis</li><li>Lionel G</li><li>Lucille Blumire</li><li>Mai-Lapyst</li><li>Manuel</li><li>Manuel Transfeld</li><li>Marc Schreiber</li><li>Marc-Stefan Cassola</li><li>Marshall Bowers</li><li>Martin1887</li><li>Martinez</li><li>Matthew Pomes</li><li>Maxime Guerreiro</li><li>meltinglava</li><li>Michael Howell</li><li>Mikail Bagishov</li><li>mixio</li><li>multisn8</li><li>Necmettin Karakaya</li><li>Ning Sun</li><li>Nya</li><li>Paolo Barbolini</li><li>Paul Smith</li><li>Paul van Tilburg</li><li>Paul Weaver</li><li>pennae</li><li>Petr Portnov</li><li>philipp</li><li>Pieter Frenssen</li><li>PROgrm_JARvis</li><li>Razican</li><li>Redrield</li><li>Riley Patterson</li><li>Rodolphe Br√©ard</li><li>Roger Mo</li><li>RotesWasser</li><li>rotoclone</li><li>Ruben Schmidmeister</li><li>Rudi Floren</li><li>R√©mi Lauzier</li><li>Samuele Esposito</li><li>Scott McMurray</li><li>Sergio Benitez</li><li>Silas Sewell</li><li>Soham Roy</li><li>Steven Murdoch</li><li>Stuart Hinson</li><li>Thibaud Martinez</li><li>Thomas Eckert</li><li>ThouCheese</li><li>Tilen Pintariƒç</li><li>timando</li><li>timokoesters</li><li>toshokan</li><li>TotalKrill</li><li>Unpublished</li><li>Vasili</li><li>Vladimir Ignatev</li><li>Wesley Norris</li><li>xelivous</li><li>YetAnotherMinion</li><li>Yohannes Kifle</li><li>Yusuke Kominami</li></ul><h3 id="get-involved">Get Involved<a href="#get-involved" title="perma link">#</a></h3><p>Looking to help with Rocket? To contribute code, head over to <a href="https://github.com/SergioBenitez/Rocket">GitHub</a>. To get involved with the project, see the <a href="https://rocket.rs/v0.5/news/2023-11-17-rwf2-prelaunch/">RWF2 prelaunch announcement</a>. We&#39;d love to have you.</p></article></div></section></div>
  </body>
</html>
