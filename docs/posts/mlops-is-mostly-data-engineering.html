<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.cpard.xyz/posts/mlops_is_mostly_data_engineering/">Original</a>
    <h1>MLOps is mostly data engineering</h1>
    
    <div id="readability-page-1" class="page"><div>
				<h2 id="mlops-is-mostly-data-engineering">MLOps is Mostly Data Engineering</h2>

<h2 id="introduction">Introduction</h2>
<p>MLOps is a relatively recent term. A quick search on <a href="https://trends.google.com/trends/explore?date=2019-01-01%202023-03-11&amp;q=%2Fg%2F11h1vbjpbg&amp;hl=en">Google Trends</a> reveals that the term started being searched for, around the end of 2019.</p>
<p><img src="https://www.cpard.xyz/img/ml1.png" alt="im1"/></p>
<p>Upon examining the trend line above, we can observe a significant spike that occurred at the end of 2021. Since then, the interest has remained high.</p>
<p>ML is not something new though, if we check <a href="https://trends.google.com/trends/explore?date=all&amp;q=Machine%20Learning&amp;hl=en">Google Trends for that term</a>, we will see that the term exists since 2004 and with the interest growing exponentially, since 2015.</p>
<p><img src="https://www.cpard.xyz/img/ml2.png" alt="im2"/>
Interest Over Time for the term Machine Learning on Google</p>
<p>Machine learning has made amazing progress in the past 10 years, with some of the most important achievements in tech being related to it.</p>
<p>The rapid growth of machine learning is what sparked the creation of MLOps as a category. With the pace of innovation around ML accelerating, teams and companies have started to have issues keeping up.</p>
<p>Building and operating ML products started putting a lot of pressure on the data and ML engineering teams and where’s there’s pain there’s also opportunity!</p>
<p>More and more people started seeing opportunities for bringing new products to the market, promising to turn every company out there with any data, into an AI driven organization.</p>
<p>And just like this, we reached to the state of the industry you can see below.</p>
<p><img src="https://www.cpard.xyz/img/ml3.png" alt="im3"/></p>
<p>MLOps category as included in <a href="https://mattturck.com/landscape/mad2023.pdf">MAD 2023</a></p>
<p>Keep in mind that the above landscape includes only companies labeled as “MLOps” and there are overlaps with other categories in the ML category of <em><strong>MAD</strong></em> <strong><strong>2023</strong></strong>.</p>
<p>43 vendors, around $1B in investments without accounting for public companies like Google and AWS investing in the space.</p>
<p>What are all these companies offering? Let’s see!</p>
<h2 id="what-is-inside-an-mlops-platform">What is inside an MLOps platform?</h2>
<p>The MLOps vendors can be split among a number of product categories.</p>
<ul>
<li>Deployment &amp; Serving of models, i.e. OctoML</li>
<li>Model Quality and Monitoring, i.e. Weights &amp; Biases</li>
<li>Model training, i.e. AWS Sagemaker</li>
<li>Feature Stores, i.e. Tecton</li>
</ul>
<p>It’s important to mention here that the above categories are supplementary in many cases, for example if you use a Feature Store, you also need a service for model training.</p>
<p>If you pay attention to the product categories above, you will notice that there is nothing particularly unique about them in the grand scheme of things.</p>
<p>What do I mean by that:</p>
<p><strong>Deployment and serving of models</strong> → This is a common operation found in both data engineering and software engineering. People have been deploying pipelines or even better, deploying applications of various complexity way before ML was a thing.</p>
<p><strong>Model quality and Monitoring</strong> → This is a unique problem to ML. The way you monitor a model for quality is not the same as you do with a software project or a data pipeline. But this is only part of the quality problem as we will see later.</p>
<p><strong>Model training</strong> → This is unique to ML but building models is nothing new, the question is what has changed in the past five years that requires a completely different paradigm in doing it?</p>
<p><strong>Feature stores</strong> → This is one of the most interesting products of MLOps, for the uninitiated the first thing that comes to mind is some kind of specialized data base but feature stores are actually more than that. They are a complete data infrastructure architecture that is proposed and attempted to be productized. How different it is from the classic data infrastructure architectures? We will see.</p>
<p>Let’s see how each one of the above categories overlap (or not) with Data Engineering and what that means.</p>
<h2 id="deployment--serving-of-models">Deployment &amp; Serving of Models</h2>
<p>This is one of the most interesting aspects of MLOps in my opinion. Mainly because this is the part where the outcome of the work an ML Engineer does gets to the point where concrete value can be generated out of it.</p>
<p>A recommender can serve recommendations to users and fraud detection can be applied in real time.</p>
<p>But what is interesting here is that this process doesn’t have much to do with ML, the engineering problems are more related to product engineering.</p>
<p>We can think of a model as a function that requires some input and generates some output. To deliver value with this function we need a way to add it as part of the product experience we are delivering.</p>
<p>In engineering terms that means that we have to wrap the model as a service with a clean API that will be exposed to the product engineers.</p>
<p>Then we need to deploy this service in a scalable and predictable way, just like we do with any other service for our product.</p>
<p>After that we need to operate the service and ensure that it is provisioned the resources needed based on demand.</p>
<p>We also need to monitor the service for problems and be able to fix them as soon as possible.</p>
<p>Finally, we want to have some kind of continuous deployment - integration process to deploy updates to the service. Just like we do with any other service of our product.</p>
<p>As we can see, the above process is almost identical to managing the release cycle of any other software component out there while it’s primarily the product engineering involved as a stakeholder.</p>
<p>After all they have to ensure that the new functionality the model provides is integrated in the right way to the product without disrupting its operations.</p>
<p>There’s one specific need that is imposed to the engineering and ops teams because of having to work with ML models and this is related to monitoring the performance of the model itself but we will talk more about this later.</p>
<p>The question here is, if integrating a model to our product doesn’t differ than any other feature we release about the product, in terms of the release and platform engineering and operations, why do we need a whole new category of products?</p>
<p>My opinion here is that the industry is trying to solve the unique challenges of turning models into services by building complete new platforms, but this is less than optimal.</p>
<p>The true need here is developer tooling that will enrich the existing and proven platforms and methodologies for releasing and operating software at scale for the case of doing that with ML models as the foundational software artifact.</p>
<p>We don’t need MLOps engineers, we need tools that will allow ML Engineers to package their work in a way that the platform and release engineers will be able to consume and produce the artifacts needed for the product engineers to integrate into the product.</p>
<p>A recurrent pattern I see is an attempt from vendors who are trying to become category creators to define a new type of engineer.</p>
<p>In most cases, this is a crossover between existing roles, i.e. analytics engineer where you have someone who’s primarily an analyst but also does some part of the data engineering work, e.g. creates pipelines.</p>
<p>This is probably a smart marketing move but the world doesn’t work like that. New roles emerge and cannot be forced by a vendor.</p>
<p>Why we would like ML Engineers to assume responsibilities of a release or platform engineer? Why we would like the former to be introduced to a completely new category of tools that sounds alien to their practice?</p>
<p>Separation of concerns is a good thing both in software architecture and in organizational design.</p>
<h2 id="model-quality-and-monitoring">Model Quality and Monitoring</h2>
<p>This is where things are getting really interesting. quality assurance, control and monitoring is a huge topic in software engineering. In a way and with a bit of exaggeration, these are the elements that turn software engineering into… engineering.</p>
<p>There are many best practices and mature platforms for software quality related tasks. The problem is, that ML models can easily challenge these.</p>
<p>You might have heard that quality in data infrastructure is hard and it is. It’s not just the software that we have to monitor for quality, it’s also the data. And data is a different beast when it comes to applying quality concepts.</p>
<p>in ML the situation is even worse. You pretty much have a black box system generated and you need to monitor its performance by just observing its outputs based on the inputs it gets in production.</p>
<p>Because of this, Model quality and monitoring is usually mentioned together with terms like model drift. Where the model is monitored in terms of its “predictive” performance over time and if it drops under a threshold, we know that we need to retrain it with fresh data.</p>
<p>Which makes sense, right? As our product changes and our customers behaviors change, the model needs to get retrained to consider these changes.</p>
<p>I have two main arguments here.</p>
<p>The first is, how different is the observability of model quality metrics like drift different to any product related monitoring? In product we keep monitoring the performance of our features, do people engage with them in the way we expect? If something changed and engagement dropped, we should address that, right?</p>
<p>These are all part of what is usually referred as experimentation infrastructure for product and big part of it requires the right data infrastructure and data engineering to exist.</p>
<p>No matter how unique ML models are, at the end we are going to be observing a service - feature on how it performs interacting with our users and based on the data we collect, figure out if action is needed.</p>
<p>My feeling is that there’s a lot of overlap here between the ML observability and the data infra - engineering foundations that the organization is building for product experimentation.</p>
<p>My other argument is about data quality in general. ML models are built on top of data, their quality is a direct reflection of the quality of data used to build them.</p>
<p>This is a serious problem that data engineering is constantly fighting with and I can’t see how the replication of this process is helping in any way to solve the problem.</p>
<p>Data engineers are the people who are monitoring the data from its capture to the point where the ML engineer can use it. They have access to the whole supply chain of data and they can monitor and add controls at any point of that chain.</p>
<p>Adding another platform that is overlapping with both the data engineering and product engineering quality controls is not going to solve the problem and in the worst case it might make it even worse.</p>
<p>Again, the solution here is engineering tooling to enrich the existing architectures and solutions. Finding out what quality for data entails and equip the people who’s job is to ensure data and product quality to extend their reach into the ML models too.</p>
<h2 id="model-training">Model Training</h2>
<p>This is a short one to be honest. Model Training has more to do with Cloud Computing than anything else and in my opinion this is the space where the big cloud providers are mainly delivering value today. The main reason being the need for hardware to exist to do the actual training.</p>
<p>But in the general case, model training is nothing more than a data pipeline. Data is read from a number of sources and gets transformed through the application of a training algorithm. It doesn’t matter that much if this going to happen in the CPU or the GPU.</p>
<p>This is the bread and butter of Data Engineering, the tooling exists already and the main differentiation that I see here is the cloud compute abstraction where we are talking about a completely different category of infrastructure anyway.</p>
<p>Model training at scale should be part of the data engineering discipline as they have the tooling already, they have the responsibility for the SLAs on the data needed and they can control that release lifecycle much better.</p>
<p>Do the ML people bother with these operations? I can’t see why to be honest. I believe they would prefer to spend more time in building new models than dealing with operations for data crunching at scale.</p>
<p>I’m getting boring at this point but again, we don’t need new platforms. We just need to give the right tooling to DEs to communicate effectively with both ML and production engineers and add model training as another step in their ETL pipelines.</p>
<h2 id="feature-stores">Feature Stores</h2>
<p>I left Feature Stores for the end on purpose as they are a great example of the overlap with data engineering while their popularity is a great indication that something is not right with the current state of data infrastructure.</p>
<p><img src="https://www.tecton.ai/wp-content/uploads/2020/10/whatisfeaturestore2.svg" alt="feature"/>
The above is a feature store architecture as presented by Tecton, one of the first and most popular feature store vendors.</p>
<p>Looking at that we see that we have:</p>
<ol>
<li>Stream data sources</li>
<li>Batch data sources</li>
<li>Transformations</li>
<li>Storage</li>
<li>Serving</li>
<li>Model serving and training</li>
</ol>
<p>Feature stores are similar to a typical data infrastructure architecture used by companies that require both streaming and batch processing capabilities. However, they specialize in supporting machine learning features by serving only one type of data consumer - the ML model.</p>
<p>Vendors have packaged the feature store architecture into products, which has caused some confusion. Some may question the need for another Spark or Flink cluster for real-time feature generation, especially if they are already using those tools for ETL jobs. However, feature stores are useful because they describe what needs to be added to existing data infrastructure to effectively productize machine learning.</p>
<p>As a product, feature stores should focus on building tooling and practices for data, ML, and product engineers to work together more effectively. Any additional overhead and complexity should be carefully evaluated to ensure that the benefits of using a feature store outweigh the costs.</p>
<p>Vendors should focus on providing useful tooling to support this, rather than duplicating existing data infrastructure.</p>
<h2 id="final-thoughts">Final Thoughts</h2>
<p>I hope that by reading this essay you didn’t feel like I’m trying to dismiss MLOps because I’m not.</p>
<p>I believe that ML and its productization is important and will become even more important in the future and for this to happen the right tooling is needed.</p>
<p>But it’s time for the MLOps industry to mature and understand who the right audience is, what the problems are and bring the next iteration of solutions in the market.</p>
<p>Money and time was spent and lessons should have been learned. I can’t wait to see what the next iteration of these products will be.</p>
<p>There’s a lot of opportunity ahead!</p>
			</div></div>
  </body>
</html>
