<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://developer.apple.com/metal/cpp/">Original</a>
    
    <div id="readability-page-1" class="page"><div id="main" role="main">

		<section>
			<div>
				<div>
					<div>
						

						<p>Metal-cpp is a low-overhead C++ interface for Metal that helps developers add Metal functionality to graphics apps, games, and game engines that are written in C++.</p>

						<h3>Highlights</h3>

						<ul>
							<li>Drop in C++ alternative interface to the Metal Objective-C headers.</li>
							<li>Direct mapping of all Metal Objective-C classes, constants and enums to C++ in the MTL C++ namespace.</li>
							<li>No measurable overhead compared to calling Metal Objective-C headers, due to inlining of C++ function calls.</li>
							<li>No usage of wrapper containers that require additional allocations.</li>
							<li>Identical header files and function/constant/enum availability for iOS, iPadOS, macOS and tvOS.</li>
							<li>Backwards compatibility: All <code>bool MTL::Device::supports...()</code> functions check if their required selectors exist and automatically return <code>false</code> if not.</li>
							<li>String <code>(ErrorDomain)</code> constants are weak linked and automatically set to <code>nullptr</code> if not available.</li>
						</ul>
					

						<h3>Installation instructions</h3>

						<h4>Step 1. Prepare your Mac</h4>

						<ul>
							<li>Open <a href="https://developer.apple.com/xcode/">Xcode</a> on your Mac. <span>Xcode 9.3</span> or later includes C++17, which is the minimum required by Metal-cpp because of the use of <code>constexpr</code> in <code>NS::Object</code>.</li>
							<li>Download and extract the contents of the follow zip file. <p><a href="https://developer.apple.com/metal/cpp/files/metal-cpp_macOS12_iOS15.zip">metal-cpp_macOS12_iOS15.zip</a></p></li>
						</ul>

						<h4>Step 2. Add the metal-cpp folder to your build system’s header search path</h4>

						<ul>
							<li>In Xcode
								
							</li>
						</ul>

						<h4>Step 3. Generate the implementation</h4>

						<ul>
							<li>metal-cpp is a header-only library. To generate the implementation, in <em>one</em> of your .cpp files add the following code:
<div><pre><code>#define NS_PRIVATE_IMPLEMENTATION
#define CA_PRIVATE_IMPLEMENTATION
#define MTL_PRIVATE_IMPLEMENTATION
#include <span>&lt;Foundation/Foundation.hpp&gt;
#include &lt;Metal/Metal.hpp&gt;</span>
#include <span>&lt;QuartzCore/QuartzCore.hpp&gt;</span></code></pre></div>
							</li>
							<li>Note: it is also possible to include the metal-cpp headers with quote marks.</li>
						</ul>

						<h4>Step 4. Use metal-cpp</h4>

						<ul>
							<li>From any files that need to reference metal-cpp objects or types, simply include the headers to make the symbols available.
<div><pre><code>#include <span>&lt;Foundation/Foundation.hpp&gt;
#include &lt;Metal/Metal.hpp&gt;</span>
#include <span>&lt;QuartzCore/QuartzCore.hpp&gt;</span></code></pre></div>
							</li>
							<li>Important: do not define the NS, MTL or CA _PRIVATE_IMPLEMENTATION macros more than once.</li>
						</ul>

						<h3>Metal-cpp single header alternative</h3>

						<p>For convenience, you can alternatively use metal-cpp as a single-header include in your project.</p>

						<p>After you have extracted the zip file contents, run the following command from the terminal to generate a single include header:</p>
<div><pre><code>.<span>/SingleHeader/</span>MakeSingleHeader.py Foundation/Foundation.hpp QuartzCore/QuartzCore.hpp Metal/Metal.hpp</code></pre></div>

						<p>Once completed, the command will have generated a single file <code>./SingleHeader/Metal.hpp</code> that includes everything you need to use metal-cpp in your project.</p>

						<p>Do remember to generate the implementation in one .cpp file:</p>

<div><pre><code>#define NS_PRIVATE_IMPLEMENTATION
#define CA_PRIVATE_IMPLEMENTATION
#define MTL_PRIVATE_IMPLEMENTATION
<span>#include &lt;Metal/Metal.hpp&gt;</span></code></pre></div>

						<h3>Memory management considerations</h3>

						<p>Metal-cpp follows the object allocation policies of Cocoa and Cocoa Touch. Understanding those rules is especially important when using metal-cpp because C++ objects are not eligible for automatic reference counting (ARC). For more information, refer to the readme file in the metal-cpp download.</p>

					</div>
				</div>
			</div>
		</section>

	</div></div>
  </body>
</html>
