<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://suberic.net/~dmm/projects/mystical/README.html">Original</a>
    <h1>Mystical</h1>
    
    <div id="readability-page-1" class="page">


<p><img src="https://suberic.net/~dmm/projects/mystical/images/quicksort_example.png" alt="quicksort example"/></p>
<p>I wanted to make a programming language that resembled magical circles. This is more like a way to write PostScript that looks like a magical circle, but I will refer to it as Mystical in this document.</p>
<h2>Rings</h2>
<p>The structure of Mystical is based on rings. These are circular bands of text and sigils, with an inner and outer border. The content of the main ring of a program starts at the rightmost (3:00) point and flow continues widdershins (counter-clockwise) both to respect postscript&#39;s angles and to reflect the assumption that these rings should be written from the outside.  Subsidiary rings start from their attachment point to their caller.</p>
<p>There are three types of rings in Mystical:</p>
<ul>
<li>executable arrays, written in <code>{</code> <code>}</code> in PostScript, are represented with simple circular borders on the inside and outside of the ring, with a star of some sort inside. The start/end point is marked by a symbol based on the &#34;work complete&#34; symbol from alchemy.</li>
<li>non-executable arrays, written in <code>[</code> <code>]</code> in PostScript, are the same but without the star. The start/end point is marked with a simple triangle.</li>
<li>dictionaries, written in <code>&lt;&lt;</code> <code>&gt;&gt;</code> in PostScript, are polygons with a double outer border and a single inner border. The start/end point is marked the same as the array.</li>
</ul>
<table>
<thead>
<tr>
<th>xarray</th>
<th>array</th>
<th>dict</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/xarray_example.png" alt="xarray example"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/array_example.png" alt="array example"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/dict_example.png" alt="dict example"/></td>
</tr>
<tr>
<td><code>{ 0 0 currentlinewidth 1.5 mul 0 360 arc fill }</code></td>
<td><code>[ 0 1 2 1.5 40 360 (Hooray World) ]</code></td>
<td><code>&lt;&lt; /longname (Mystical) /w 45 /h 8 /x 23 &gt;&gt;</code></td>
</tr>
</tbody>
</table>
<p>(Note that the entries in the dict image are in a different order than the PostScript text since dict insertion order is not preserved in PostScript.)</p>
<p>When one of these structures appear inside a different structure, a small circle or dot at the inclusion point is connected to a line which leads to the subsidiary ring&#39;s start/end sigil.</p>
<p><img src="https://suberic.net/~dmm/projects/mystical/images/link_example.png" alt="link example"/></p>
<pre><code>[
    0 1 2 1.5 40 360 &lt;&lt;
        /longname (Mystical) /w 45 /h 8 /x 23
    &gt;&gt;
]
</code></pre>
<p>It is theoretically possible to use <code>[ ]</code> and <code>&lt;&lt; &gt;&gt;</code> in PostScript in ways that Mystical can&#39;t handle:</p>
<pre><code>[ 1 2 3 split { ] /first exch def [ } if 4 5 6 ] /final exch def
</code></pre>
<p>so don&#39;t do that.</p>
<p>Other commands like <code>gsave/grestore</code> and <code>begin/end</code> are more likely to be used in non-balanced or loop-crossing ways so those are treated as normal sigils below.</p>
<h2>Text and Sigils</h2>
<p>The rings&#39; rims contain text or sigils.  Sigils are symbols that stand in for operators, variables, or other keywords. Any name, written in PostScript as <code>/name</code>, is instead written with a triangle surrounding or superimposing the text of the name or its sigil.  Any strings, written in () in Postscript, are cartouche-like shapes containing the string text.</p>
<table>
<thead>
<tr>
<th>array</th>
<th>/array</th>
<th>(array)</th>
<th>foo</th>
<th>/foo</th>
<th>/foobar</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/operator_array.png" alt="array sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/name_array.png" alt="/array sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/string_array.png" alt="array string"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/operator_foo.png" alt="foo"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/name_foo.png" alt="foo name"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/name_foobar.png" alt="foobar name"/></td>
</tr>
</tbody>
</table>
<h3>Standard Sigils</h3>
<p>Many built-in operators have been given their own sigils.  These are used in place of the text of the operator if it appears as a name or operator (but not if it appears as a string).  I have generally made these sigils based on the initial of the command and an illustration of the concept, though in some cases I have taken a more fully illustrative route or created some standard visual language.  Some examples are below - see <a href="https://suberic.net/~dmm/projects/mystical/docs/operators.html">Standard Sigils</a> for a full list.</p>
<h4>Sample sigils</h4>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_dup.png" alt="dup sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_copy.png" alt="copy sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_add.png" alt="add sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_mul.png" alt="mul sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_neg.png" alt="neg sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_for.png" alt="for sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_forall.png" alt="forall sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_repeat.png" alt="repeat sigil"/></td>
</tr>
<tr>
<td>dup</td>
<td>copy</td>
<td>add</td>
<td>mul</td>
<td>neg</td>
<td>for</td>
<td>forall</td>
<td>repeat</td>
</tr>
<tr>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_if.png" alt="if sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_ifelse.png" alt="ifelse sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_eq.png" alt="eq sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_ne.png" alt="ne sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_ge.png" alt="ge sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_gt.png" alt="gt sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_le.png" alt="le sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_lt.png" alt="lt sigil"/></td>
</tr>
<tr>
<td>if</td>
<td>ifelse</td>
<td>eq</td>
<td>ne</td>
<td>ge</td>
<td>gt</td>
<td>le</td>
<td>lt</td>
</tr>
<tr>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_moveto.png" alt="moveto sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_lineto.png" alt="lineto sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_arc.png" alt="arc sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_arcn.png" alt="arcn sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_curveto.png" alt="curveto sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_closepath.png" alt="closepath sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_stroke.png" alt="stroke sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_fill.png" alt="fill sigil"/></td>
</tr>
<tr>
<td>moveto</td>
<td>lineto</td>
<td>arc</td>
<td>arcn</td>
<td>curveto</td>
<td>closepath</td>
<td>stroke</td>
<td>fill</td>
</tr>
<tr>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_gsave.png" alt="gsave sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_grestore.png" alt="grestore sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_translate.png" alt="translate sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_scale.png" alt="scale sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_rotate.png" alt="rotate sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_setmatrix.png" alt="setmatrix sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_currentmatrix.png" alt="currentmatrix sigil"/></td>
<td></td>
</tr>
<tr>
<td>gsave</td>
<td>grestore</td>
<td>translate</td>
<td>scale</td>
<td>rotate</td>
<td>setmatrix</td>
<td>currentmatrix</td>
<td></td>
</tr>
<tr>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_setrgbcolor.png" alt="setrgbcolor sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_currentrgbcolor.png" alt="currentrgbcolor sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_setcmykcolor.png" alt="setcmykcolor sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_currentcmykcolor.png" alt="currentcmykcolor sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_sethsbcolor.png" alt="sethsbcolor sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_currenthsbcolor.png" alt="currenthsbcolor sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_setgray.png" alt="setgray sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_currentgray.png" alt="currentgray sigil"/></td>
</tr>
<tr>
<td>setrgbcolor</td>
<td>currentrgbcolor</td>
<td>setcmykcolor</td>
<td>currentcmykcolor</td>
<td>sethsbcolor</td>
<td>currenthsbcolor</td>
<td>setgray</td>
<td>currentgray</td>
</tr>
<tr>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_dict.png" alt="dict sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_begin.png" alt="begin sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_end.png" alt="end sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_def.png" alt="def sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_get.png" alt="get sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_put.png" alt="put sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_length.png" alt="length sigil"/></td>
<td></td>
</tr>
<tr>
<td>dict</td>
<td>begin</td>
<td>end</td>
<td>def</td>
<td>get</td>
<td>put</td>
<td>length</td>
<td></td>
</tr>
</tbody>
</table>
<h3>User Sigils</h3>
<p>Sigils for new functions or names can be added to <code>sigil_bank</code> at runtime.  They should fit into the 1-unit square centered on the origin, so no coordinate should be more than 0.5 (of course, you can transform your coordinate system for convenience).  If you use <code>nstroke</code> instead of <code>stroke</code> you will get the same calligraphic effect as the standard sigils.</p>
<p>Sigils for user variables can be designed with any sigil system.  My examples mostly use letter collision, inspired by Spare&#39;s Chaos Magick system, but anything that turns a word into a symbol will work - kameas, wheels, Square Word Calligraphy, Circular Gallifreyan, sitelen sitelen, illustration, puns, etc.  New names based on official operators can incorporate the standard sigils for those operators.</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_arg.png" alt="arg sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_dot.png" alt="dot sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_softscale.png" alt="softscale sigil"/></td>
<td><img src="https://suberic.net/~dmm/projects/mystical/images/sigil_nstroke.png" alt="nstroke sigil"/></td>
</tr>
<tr>
<td>arg</td>
<td>dot</td>
<td>softscale</td>
<td>nstroke</td>
</tr>
</tbody>
</table>
<h2>Ligature for <code>/name { ring } def</code></h2>
<p>There is a sigil for <code>def</code> but a very common pattern is to push a name, push a function, and def the name to the function. To save space and to emphasize this definition, there is special syntax for this case consisting of the usual name triangle with the end of the link line directly below it, and the def sigil is omitted entirely. This is extended to the other two ring types for simplicity. Any other use of <code>def</code> will just use the def sigil as normal.</p>
<table>
<thead>
<tr>
<th><img src="https://suberic.net/~dmm/projects/mystical/images/ligature_example.png" alt="ligature example"/></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>{ ...  /even { 2 mod 0 eq } def ...  }</code></td>
</tr>
</tbody>
</table>
<p>This only applies inside of executable arrays. I considered a similar ligature for /name { ring } in dictionaries but there&#39;s too much chance of getting it wrong.</p>
<h2>Sample Algorithms</h2>
<p>Quicksort is the illustration at the top of this page.</p>
<p>Euclid&#39;s GCD algorithm (using my <code>/arg {exch def} def</code> function from dmmlib):</p>
<p><img src="https://suberic.net/~dmm/projects/mystical/images/gcd_example.png" alt="gcd example"/></p>
<h2>Functions to generate Mystical images</h2>
<p>All of these are defined in &#34;mystical.ps&#34;.</p>
<p><code>mystical</code>: takes an array, xarray, or dict and renders it in mystical, descending into substructures as necessary.  The entire image will be scaled to fit into a unit circle.</p>
<p><code>mystical_evoke</code>: The same as <code>mystical</code> but it takes a name that is looked up in the current dictionary.</p>
<p><code>mystical_evoke_label</code>:  Like <code>mystical_evoke</code> but adds a name-def ligature with the name at the top and orients the image so that the name sigil is right-side-up.</p>
<p>All of these have versions with <code>_unscaled</code> appended to them that skip the scaling step.  The rings will be 1 unit thick so the image will be quite large.</p>
<h3>layout issues</h3>
<p>Currently the code figures out the layout of the subcircles so that nothing collides, but it&#39;s overly safe so most programs will be very spread out.  For the examples on this page I ran the parsing/layout functions (<code>mystical_get_spell</code> and <code>mystical_make_evocation_ligature</code>) and then adjusted the results before calling the draw functions <code>draw_sigil</code> and <code>draw_link</code>.  I&#39;m intending to improve the default layout somewhat.</p>
<h2>Is this a programming language?</h2>
<p>At the moment it&#39;s a way to draw a PostScript program - there&#39;s no interpreter that will ingest a Mystical image and perform the appropriate computation.  It could be run and interpreted by a human, or (more likely) a human could read it and turn it into a PostScript program and run that.  I&#39;ll leave further philosophical arguments to other people for now.</p>
<h2>Could this work for other languages?</h2>
<p>This approach seems applicable to other language with just operators, such as Forth. Languages with more complicated statements might be more difficult, and I don&#39;t know if a new ring for every brace or indent will be overly busy.</p>

<hr/><p><a href="https://github.com/denismm/mystical_ps">Download on github</a></p><hr/><p><a href="https://codeberg.org/yomikoma/mystical_ps">Download on codeberg</a></p><hr/>
<address>This page generated 2025-05-16 by <a href="https://suberic.net/~dmm/">Denis</a>.</address>


</div>
  </body>
</html>
