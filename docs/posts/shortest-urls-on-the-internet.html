<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://jameswillia.ms/posts/shortest-urls.html">Original</a>
    <h1>Shortest URLs on the Internet</h1>
    
    <div id="readability-page-1" class="page"><div>
      

      
      
<article>
  
  
  <h5>August 29, 2022</h5>



  

  


  <p>What’s the shortest URL for which content is served on the internet? There are
<a href="https://en.wikipedia.org/wiki/Single-letter_second-level_domain">quite a few</a>
single-letter second-level domains that are used in very short URLs, such
as Google’s <a href="http://g.co">http://g.co</a> or Facebook’s <a href="https://m.me">https://m.me</a>.</p>
<p>But we can go shorter than this: there’s nothing stopping TLD registry operators
serving A records at the apexes of their TLD zones. For example, if Verisign
(the operator of the <code>com</code> TLD registry) wished, they could add an A record at
the apex of the <code>com</code> TLD zone – <code>com</code> would then resolve to that IP, and your
browser would connect to that IP when you visited <code>https://com</code>.</p>
<p>Does any registry operator actually do this though? Surprisingly, the answer is
yes.</p>
<hr/>
<p>First, let’s find a list of TLDs which have A records.</p>
<pre><code>$ wget https://data.iana.org/TLD/tlds-alpha-by-domain.txt
$ &lt;tlds-alpha-by-domain.txt tail -n+2 | xargs -I{} ./get_a_record_tsv.sh {} &gt; tld-a-records.tsv
</code></pre><p>where <code>get_a_record_tsv.sh</code> is:</p>
<div><pre><code data-lang="bash"><span>#!/usr/bin/env bash
</span><span></span>set -euo pipefail

name<span>=</span><span>&#34;</span>$1<span>&#34;</span>
records<span>=</span><span>$(</span>dig +short @8.8.8.8 <span>&#34;</span>$name<span>&#34;</span> | head -n1<span>)</span>

echo -e <span>&#34;</span><span>${</span>name<span>}</span><span>\t</span><span>${</span>records<span>}</span><span>&#34;</span>
</code></pre></div><p>Now, let’s get the TLDs that have A records:</p>
<pre><code>$ &lt;tld-a-records.tsv grep -Ev $&#39;\t$&#39;
AI	209.59.119.34
ARAB	127.0.53.53
CM	195.24.205.60
IN	e.root-servers.net.
KIDS	127.0.53.53
MD	e.root-servers.net.
MG	a.root-servers.net.
MR	m.root-servers.net.
MUSIC	127.0.53.53
MX	a.root-servers.net.
PN	139.162.17.173
TK	217.119.57.22
UZ	91.212.89.8
WS	64.70.19.33
XN--L1ACC	218.100.84.27
XN--MXTQ1M	127.0.53.53
XN--NGBRX	127.0.53.53
</code></pre><p>Some of these aren’t relevant to us:</p>
<ul>
<li>There’s a bunch that have A records pointing at <code>127.0.53.53</code> (which is an
internal IP): <a href="https://icannwiki.org/.arab">arab</a>,
<a href="https://icannwiki.org/.%D8%B9%D8%B1%D8%A8">عرب</a> (translates to “arab”),
<a href="https://icannwiki.org/.kids">kids</a>, <a href="https://icannwiki.org/.music">music</a>,
and <a href="https://icannwiki.org/.%E6%94%BF%E5%BA%9C">政府</a> (translates to
“government”). It turns out this is a <a href="https://www.icann.org/resources/pages/name-collision-2013-12-06-en">special IP
address</a>
designed to alert network adminstrators of <em>name collisions</em>: cases where
networks have privately been using names underneath TLDs which used to be
free, but have now been allocated as gTLDs. The <code>53.53</code> is a reference to port
53, the port on which DNS nameservers listen.</li>
<li>Some have A records pointing to the root servers. I’m not sure why this is - I
think it might be because no DNS has been configured in the TLD zone for these
TLDs. <em>Edit:</em> matttpt on HN <a href="https://news.ycombinator.com/item?id=32802795">pointed out the reason for
this</a>.</li>
</ul>
<p>Filtering out the TLDs mentioned above, we get:</p>
<pre><code>AI	209.59.119.34
CM	195.24.205.60
PN	139.162.17.173
TK	217.119.57.22
UZ	91.212.89.8
WS	64.70.19.33
XN--L1ACC	218.100.84.27
</code></pre><p>These are, in turn, the ccTLDs for <a href="https://en.wikipedia.org/wiki/Anguilla">Anguilla</a>,
<a href="https://en.wikipedia.org/wiki/Cameroon">Cameroon</a>,
<a href="https://en.wikipedia.org/wiki/Pitcairn_Islands">the Pitcairn Islands</a>,
<a href="https://en.wikipedia.org/wiki/Tokelau">Tokelau</a>,
<a href="https://en.wikipedia.org/wiki/Uzbekistan">Uzbekistan</a>,
<a href="https://en.wikipedia.org/wiki/Samoa">Samoa</a> and
<a href="https://en.wikipedia.org/wiki/Mongolia">Mongolia</a> (the TLD is an <a href="https://icannwiki.org/Internationalized_Domain_Name">internationalised
ccTLD</a> in this case).</p>
<hr/>
<p>Let’s open up the TLDs we found in a browser and see what happens:</p>
<pre><code>$ &lt;tld-a-records.tsv cut -f1 | xargs -I{} xdg-open &#39;http://{}&#39;
$ &lt;tld-a-records.tsv cut -f1 | xargs -I{} xdg-open &#39;https://{}&#39;
</code></pre><p>Some of them do indeed load:</p>
<ul>
<li><a href="http://ai.">http://ai</a> is a nice retro landing page for “Offshore Information
Services”, who <a href="https://icannwiki.org/.ai">seem to maintain the .ai TLD</a></li>
<li><a href="http://pn.">http://pn</a> serves an “it works” page; <a href="https://pn.">https://pn</a> serves “hello world” (with an invalid certificate)</li>
<li><a href="http://uz.">http://uz</a> serves a HTTP 500; <a href="https://uz.">https://uz</a> serves the
Uzbekistan ccTLD’s homepage (with an invalid certificate)</li>
<li><a href="http://%d0%bc%d0%be%d0%bd.">http://мон</a> eventually serves a blank page, but does also serve a
<a href="http://xn--l1acc./favicon.ico">favicon</a>; <a href="https://%d0%bc%d0%be%d0%bd.">https://мон</a>
eventually serves a default Apache landing page (with an invalid certificate)</li>
</ul>
<figure>
    <img src="https://jameswillia.ms/images/anguilla.png" alt="Screenshot of http://ai"/> <figcaption>
            <p>Screenshot of http://ai</p>
        </figcaption>
</figure>

<p>The others either time out or refuse the connection.</p>
<hr/>
<p><a href="https://www.icann.org/news/announcement-2013-08-30-en">This practice – publishing A records at TLD apexes – is discouraged by
ICANN</a>:</p>
<blockquote>
<p><em>Recommendation</em>: Dotless domains will not be universally reachable and the
SSAC recommends strongly against their use. As a result, the SSAC also
recommends that the use of DNS resource records such as A, AAAA, and MX in the
apex of a TopLevel Domain (TLD) be contractually prohibited where appropriate
and strongly discouraged in all cases.</p>
</blockquote>
<p>And, furthermore, <a href="https://www.icann.org/en/announcements/details/new-gtld-dotless-domain-names-prohibited-30-8-2013-en">the use of dotless domains is prohibited for new
gTLDs</a>.</p>
<hr/>
<p>Bonus fact: there’s also nothing stopping ICANN adding an A record to the apex
of the root zone, which would theoretically make the empty hostname resolvable.
I imagine most browsers etc. would consider a URL with an empty hostname
invalid – Chrome considers both <code>http://</code> and <code>http://.</code> invalid, at least.</p>

</article>
 
      

      

      
  
  
  
 

      </div></div>
  </body>
</html>
