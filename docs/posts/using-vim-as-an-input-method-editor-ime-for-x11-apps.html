<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/algon-320/vime">Original</a>
    <h1>Show HN: Using Vim as an input method editor (IME) for X11 apps</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto">Using Vim as an <a href="https://en.wikipedia.org/wiki/Input_method" rel="nofollow">input method editor</a> for X11 applications.</p>
<ul dir="auto">
<li>Like other IMEs, you can use vime (almost) anywhere you need to input text.</li>
<li>Unlike other IMEs, vime itself does not provide any text conversion to different languages.</li>
</ul>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/algon-320/vime/blob/main/docs/demo.gif"><img src="https://github.com/algon-320/vime/raw/main/docs/demo.gif" alt="demo" data-animated-image=""/></a></p>
<p dir="auto">In the above demo, I used <a href="https://github.com/fcitx/fcitx5">fcitx</a> with vime to input Japanese sentences.</p>
<h2 dir="auto"><a id="user-content-installation" aria-hidden="true" href="#installation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h2>
<ol dir="auto">
<li>Clone this repo recursively, and then apply patches to the dependencies:</li>
</ol>
<div data-snippet-clipboard-copy-content="$ git clone https://github.com/algon-320/vime.git --recursive
$ ./apply_patches.sh"><pre><code>$ git clone https://github.com/algon-320/vime.git --recursive
$ ./apply_patches.sh
</code></pre></div>
<ol start="2" dir="auto">
<li>Copy the configuration files:</li>
</ol>
<div data-snippet-clipboard-copy-content="$ mkdir -p ~/.config/vime
$ cp config_example/* ~/.config/vime"><pre><code>$ mkdir -p ~/.config/vime
$ cp config_example/* ~/.config/vime
</code></pre></div>
<ol start="3" dir="auto">
<li>Install the terminfo for <code>toyterm</code>, which is a terminal emulator vime uses to run Vim:</li>
</ol>
<div data-snippet-clipboard-copy-content="$ tic -x -o ~/.terminfo/ toyterm/toyterm.info"><pre><code>$ tic -x -o ~/.terminfo/ toyterm/toyterm.info
</code></pre></div>
<ol start="4" dir="auto">
<li>(Optionally) Install vime:</li>
</ol>
<div data-snippet-clipboard-copy-content="$ cargo install --path ./vime"><pre><code>$ cargo install --path ./vime
</code></pre></div>
<p dir="auto">To uninstall vime, do the opposite:</p>
<div data-snippet-clipboard-copy-content="$ cargo uninstall vime
$ rm -r ~/.config/vime
$ rm ~/.terminfo/t/toyterm.info"><pre><code>$ cargo uninstall vime
$ rm -r ~/.config/vime
$ rm ~/.terminfo/t/toyterm.info
</code></pre></div>
<h2 dir="auto"><a id="user-content-usage" aria-hidden="true" href="#usage"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h2>
<ol dir="auto">
<li>Start a vime process:</li>
</ol>

<p dir="auto">or if you installed vime:</p>

<p dir="auto">Note for those who are using another input method, you can use it with vime.
To do that, please make sure <code>$XMODIFIERS</code> is defined properly for the vime process.
For example to use <code>fcitx</code> with vime:</p>
<div data-snippet-clipboard-copy-content="$ XMODIFIERS=&#34;@im=fcitx&#34; vime"><pre><code>$ XMODIFIERS=&#34;@im=fcitx&#34; vime
</code></pre></div>
<ol start="2" dir="auto">
<li>(Open another terminal and) set the following environment variables:</li>
</ol>
<div data-snippet-clipboard-copy-content="$ export XMODIFIERS=&#34;@im=vime&#34; # for X11 apps
$ export GTK_IM_MODULE=&#34;xim&#34;   # for GTK apps
$ export  QT_IM_MODULE=&#34;xim&#34;   # for Qt apps"><pre><code>$ export XMODIFIERS=&#34;@im=vime&#34; # for X11 apps
$ export GTK_IM_MODULE=&#34;xim&#34;   # for GTK apps
$ export  QT_IM_MODULE=&#34;xim&#34;   # for Qt apps
</code></pre></div>
<p dir="auto">NOTE: vime might not work in Qt apps for now.
I am going to create a Qt plugin to work properly, but it is WIP yet.</p>
<ol start="3" dir="auto">
<li>Start your favorite application (e.g. Firefox).</li>
<li>Focus any input field (e.g. HTML form).</li>
<li>Hit <kbd>Alt</kbd>+<kbd>RightShift</kbd> key to trigger (toggle) vime.</li>
<li>Write some text and save it with <code>:wq</code> normally.</li>
<li>The text you&#39;ve just written would be inserted in the input field.</li>
</ol>
<h2 dir="auto"><a id="user-content-customization" aria-hidden="true" href="#customization"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Customization</h2>
<h3 dir="auto"><a id="user-content-vimrc" aria-hidden="true" href="#vimrc"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>vimrc</h3>
<p dir="auto">Since vime starts a Vim with <code>~/.config/vime/vimrc</code> by default,
you can customize vim behavior by editing it.</p>
<h3 dir="auto"><a id="user-content-different-text-editor" aria-hidden="true" href="#different-text-editor"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>different text editor</h3>
<p dir="auto">If your favorite text editor is runnable in a terminal, then you should be able to use it as input method.
To change the editor to use, set <code>VIME_EDITOR</code> environment variable for the vime process.
If the variable is not defined, vime will use <code>/usr/bin/vim -u ~/.config/vime/vimrc</code> instead.</p>
<p dir="auto">The following example shows how to use Emacs as an input method:</p>
<div data-snippet-clipboard-copy-content="$ VIME_EDITOR=&#39;/usr/bin/emacs -nw&#39; vime"><pre><code>$ VIME_EDITOR=&#39;/usr/bin/emacs -nw&#39; vime
</code></pre></div>
<h3 dir="auto"><a id="user-content-trigger-key" aria-hidden="true" href="#trigger-key"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>trigger key</h3>
<p dir="auto">To change the key combination to trigger vime, edit <code>trigger_key_state</code> and <code>trigger_key_keycode</code> fields in <code>~/.config/vime/config.toml</code>.</p>
<ul dir="auto">
<li><code>trigger_key_state</code> is the state of modifier keys.</li>
<li><code>trigger_key_keycode</code> is the keycode of the key.</li>
<li>Note that these values can differ for different physical keyboards.</li>
</ul>
<p dir="auto">You can use the <code>xev</code> utility to lookup the values of your favorite key combination.</p>
<h3 dir="auto"><a id="user-content-terminal-appearance" aria-hidden="true" href="#terminal-appearance"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>terminal appearance</h3>
<p dir="auto">You can also configure the terminal by editing <code>~/.config/vime/config.toml</code>.</p>
<p dir="auto">See the <a href="https://github.com/algon-320/toyterm">toyterm</a> repo for details about toyterm.</p>
<h2 dir="auto"><a id="user-content-license" aria-hidden="true" href="#license"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h2>
<ul dir="auto">
<li><code>patches/xcb-imdkit-rs.patch</code>, the patch file for <a href="https://github.com/H-M-H/xcb-imdkit-rs">xcb-imdkit-rs</a>, is licensed under LGPLv2.1</li>
<li><code>patches/winit.patch</code>, the patch file for <a href="https://github.com/rust-windowing/winit">winit</a>, is licensed under Apache-2.0</li>
<li>the other parts are licensed under Apache-2.0</li>
</ul>
<hr/>
<h2 dir="auto"><a id="user-content-architecture" aria-hidden="true" href="#architecture"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Architecture</h2>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/algon-320/vime/blob/main/docs/architecture.png"><img src="https://github.com/algon-320/vime/raw/main/docs/architecture.png" alt="architecture"/></a></p>
</article>
          </div></div>
  </body>
</html>
