<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://mosquitocapital.substack.com/p/the-mystery-blips">Original</a>
    <h1>Mystery Blips</h1>
    
    <div id="readability-page-1" class="page"><div><div><article><div class=""><div><div dir="auto"><p><span>My first team at FB was SRO: Site Reliability Operations.</span></p><p><span>Let&#39;s just say the oncall was stressful.</span></p><p><span>You&#39;re just sitting there, watching charts. For 3 hours. Or you&#39;re the backup oncall, ready to take over watching charts if your primary needs to pee or get a snack. That&#39;s really how we did things then. Watch charts and alerts, and wait for something to break. No pagers, no alerting noises, just... Watching the charts, waiting for something to break</span><a id="footnote-anchor-1" href="#footnote-1" rel="">1</a><span>. It seems almost barbaric in comparison to the systems FB would have for oncall by the time I left, but it&#39;s what we had and </span><strong>everyone relied on us to keep the site up</strong><span>.</span></p><p>Once something died, you could literally watch the money draining away from the company while the site was down. Could see the millions of people unable to use the site. And you&#39;d know that you, just you, and no one else, were in charge of getting it back up.</p><p>Again. Stressful.</p><p>Anyway. The dynamic was this: roughly a dozen people are sitting around quietly typing, one person is slightly on edge, and one person is either waiting for the hammer to fall or is in FULL CRISIS MODE. </p><p>If nothing was broken, you&#39;d just sit there. Scanning charts visually, waiting for things to turn red if they dropped too much, looking for anomalies. Very, very often, the shape of the red charts instantly confirmed a SEV. Important metrics dive off a cliff, and it&#39;s time to pull folks into IRC, wake them up if need be, escalate to an IMOC - whatever was called for to get things resolved.</p><p><span>So, usually, if an alarm fired off and its chart went red: something was seriously broken.</span></p><p>You&#39;d find some unexplained massive spike in Egress (the amount of data flowing out of FB to its users), and then it would just... Go away. No more Blip. Or you&#39;d have a 3-minute spike in 5XX errors (server-side errors that often meant either a slow or broken experience for the user), but then after those 3 minutes they&#39;d go back down and you&#39;d never see them again.</p><p><span>Chasing down the Blips can teach you a </span><em>lot</em><span> about how a complex system functions. Sometimes it can help you find real problems before they happen. And a lot of the time, they&#39;ll teach you only one thing: That complex systems are chaotic, and sometimes things just harmlessly Blip and you&#39;ll never know why.</span></p><p>Our general policy was that if a Blip was big enough to set off an alert, we&#39;d give it at least a cursory look.</p><p>So one morning, I&#39;m in the office. I&#39;m oncall. I&#39;m staring at the charts. It&#39;s one of my very first shifts.</p><p><span>And I get the mother of all Blips. Massive spike in egress, posts, likes</span><a id="footnote-anchor-2" href="#footnote-2" rel="">2</a><span>, everything. Blip.</span></p><p>So I start to take a look. No alerts from other systems, no corresponding spike in 5XX, nothing seems to be under load, no large changes pushed out at that time, just a big fat blip. The metrics all seemed to be a little bit low before the blip, but that was the only anomaly.</p><p>I decide it&#39;s just one of those things, and let it be. The site seems perfectly healthy.</p><p>Seventeen minutes pass. I stare at charts, chitchat on IRC, and relax.</p><p>BLIP. Holy hell. The dashboard glitters red. All the major metrics go nuts. Egress, posts, likes.</p><p>Now I&#39;m really worried. These blips aren&#39;t happening on round numbers like 11:30 or 11:45, which would indicate an automated system. Something is up.</p><p>I take to IRC. &#34;Does anyone know if there are any large changes happening to the site right now?&#34;</p><p>A couple people chime in, nothing going on. I&#39;m wondering if it&#39;s time to file a SEV, so I pull in some slightly more experienced SROs to take a look.</p><p>&#34;Wow. Look at that depressed traffic before the blip. Maybe something is delaying reporting of metrics and then dumping it all at once?&#34;</p><p>We continue down this path a while. Looking through logs, comparing charts. Traffic trends downward and downward, and I&#39;m starting to feel worried...</p><p><strong>BLIP.</strong></p><p>Holy hell. Through the roof. Egress, posts, likes. Skyrocket and crash back down. But this time, they stay elevated for several minutes before going back to normal.</p><p>These spikes are not happening on a regular cadence. They&#39;re shooting up higher each time. It&#39;s time to call in the big boys. This looks like a SEV.</p><p>I run over to someone&#39;s desk, an SRO who had been with the team for years. I explain what&#39;s going on, and he comes to my desk to look at the charts.</p><p>Concern spreads across his face. &#34;Wow. That&#39;s a disturbing pattern. You guys checked for events, right?&#34;</p><p>&#34;Events? Yeah, no deploys, no major system changes, nothing going on with the network, no...&#34;</p><p>&#34;What? No, I mean like... Events. News. Did you check for that?&#34;</p><p>&#34;What?&#34;</p><p>&#34;Check the news. Look for major events happening.&#34;</p><p>So I go to a news aggregator and start to browse while they look on. It&#39;s a quiet day. </p><p>&#34;I don&#39;t see anything, nothing is really happening. Maybe a queueing system hasâ€¦&#34;</p><p><span>&#34;I know what it is. Go to </span><em>&lt;xyz website&gt;</em><span>.&#34;</span></p><p><span>I type in the URL, smack Enter, wait for it to load, and...</span></p><p>I&#39;m staring at the screen dumbfounded. Really?</p><p>It&#39;s a soccer game. </p><p>Final score: 2-1.</p></div></div></div></article></div></div></div>
  </body>
</html>
