<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/tinfever/FU-Dyson-BMS">Original</a>
    <h1>(Unofficial) Firmware Upgrade for Dyson V6/V7 Vacuum Battery Management System</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<h3 dir="auto"><a id="user-content-an-unofficial-firmware-upgrade-for-dyson-v6v7-vacuum-battery-management-system-bms" aria-hidden="true" href="#an-unofficial-firmware-upgrade-for-dyson-v6v7-vacuum-battery-management-system-bms"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>An (Unofficial) Firmware Upgrade for Dyson V6/V7 Vacuum Battery Management System (BMS)</h3>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/46428760/168486653-8b8b696d-0bcb-4679-95c9-0377f26ec008.jpg"><img src="https://user-images.githubusercontent.com/46428760/168486653-8b8b696d-0bcb-4679-95c9-0377f26ec008.jpg" alt="Github Header Image"/></a></p>
<hr/>
<p dir="auto"><strong>Dyson vacuum batteries are designed to fail.</strong></p>
<p dir="auto">Here&#39;s why:</p>
<ol dir="auto">
<li>Series battery cells in a battery pack inevitably become imbalanced. This is extremely common and why cell balancing was invented.</li>
<li>Dyson uses a very nice ISL94208 battery management IC that includes cell balancing. It only requires 6 resistors that cost $0.00371 each, or 2.2 cents in total for six. <sup><a href="#user-content-fn-1-9fbf825c75b239cbf4e24068d35792e6" id="user-content-fnref-1-9fbf825c75b239cbf4e24068d35792e6" data-footnote-ref="" aria-describedby="footnote-label">1</a></sup></li>
<li>Dyson did not install these resistors. (They even designed the V6 board, PCB 61462, to support them. They just left them out.)</li>
<li>Rather than letting an unbalanced pack naturally result in lower usable capacity, when the cells go moderately (300mV) out of balance (by design, see step 3) Dyson programmed the battery to stop working...permanently. It will give you the 32 red blinks of death and will not charge or discharge again. It could not be fixed. Until now. <sup><a href="#user-content-fn-2-9fbf825c75b239cbf4e24068d35792e6" id="user-content-fnref-2-9fbf825c75b239cbf4e24068d35792e6" data-footnote-ref="" aria-describedby="footnote-label">2</a></sup></li>
</ol>
<p><a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/46428760/168484825-c1c25766-edcf-4af1-a2fb-f534d9acf39a.png"><img src="https://user-images.githubusercontent.com/46428760/168484825-c1c25766-edcf-4af1-a2fb-f534d9acf39a.png" width="400"/></a></p>
<p dir="auto">FU-Dyson-BMS is a replacement firmware for the microcontroller inside Dyson V6/V7 vacuum batteries. By using this firmware, your battery pack will not become unusable if the cells become imbalanced, you will just have reduced battery capacity as usual. It will also allow you to replace the battery cells to repair your battery, rather than be forced to replace it.</p>
<p dir="auto">Demonstration, disassembly, and programming video:</p>
<p dir="auto"><a href="https://www.youtube.com/watch?v=dwyA5rBjncg" rel="nofollow">https://www.youtube.com/watch?v=dwyA5rBjncg</a></p>
<p dir="auto"><a href="https://www.youtube.com/watch?v=dwyA5rBjncg" rel="nofollow"><img src="https://camo.githubusercontent.com/80b4b930c4ba022262d5f2c9846f59b2d8160a4adb8b6e548436be7e237d5922/68747470733a2f2f696d672e796f75747562652e636f6d2f76692f647779413572426a6e63672f302e6a7067" alt="FU-Dyson-BMS - (Unofficial) Firmware Upgrade for Dyson V6/V7 Vacuum Battery Management System" data-canonical-src="https://img.youtube.com/vi/dwyA5rBjncg/0.jpg"/></a></p>
<h2 dir="auto"><a id="user-content-revolutionary-features" aria-hidden="true" href="#revolutionary-features"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Revolutionary features:</h2>
<ul dir="auto">
<li>Cell balance LED indicator</li>
<li>State of charge LED indicator</li>
<li>Robust fault handling and logging</li>
<li>Total runtime tracking</li>
<li>Can be run in debug mode for near-real-time diagnostics</li>
<li>Doesn&#39;t brick itself!</li>
<li>Doesn&#39;t generate e-waste and try to take your money when your cells go out of balance!</li>
</ul>
<h2 dir="auto"><a id="user-content-why-you-would-want-this" aria-hidden="true" href="#why-you-would-want-this"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Why you would want this:</h2>
<ul dir="auto">
<li>You want to vacuum your apartment but your cells became slightly out of balance because you left the vacuum off the charger for too long and now your vacuum doesn’t work (ask me how I know)</li>
<li>You want to replace a bad cell in your battery pack</li>
<li>You want to understand what your battery is doing and why.</li>
<li>You don’t like feeling like a cash cow being squeezed for all you’re worth.</li>
</ul>
<h2 dir="auto"><a id="user-content-compatible-vacuumsbatteries" aria-hidden="true" href="#compatible-vacuumsbatteries"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Compatible vacuums/batteries:</h2>
<ul dir="auto">
<li>Dyson V7 - Model SV11 - PCB 279857 - Compatible + Tested</li>
</ul>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/tinfever/FU-Dyson-BMS/blob/main/hardware-info/images/V7%20SV11%20-%20PCB%20279857.jpg"><img src="https://github.com/tinfever/FU-Dyson-BMS/raw/main/hardware-info/images/V7%20SV11%20-%20PCB%20279857.jpg" width="400"/></a></p>
<ul dir="auto">
<li>Dyson V6 - Model SV04/SV09 - PCB 61462 - Compatible + Tested</li>
</ul>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/tinfever/FU-Dyson-BMS/blob/main/hardware-info/images/V6%20SV04,SV09%20-%20PCB%2061462.jpg"><img src="https://github.com/tinfever/FU-Dyson-BMS/raw/main/hardware-info/images/V6%20SV04,SV09%20-%20PCB%2061462.jpg" width="400"/></a></p>
<ul dir="auto">
<li>Dyson V6 - Model SV04 - PCB 188002 - Compatible + Tested</li>
</ul>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/tinfever/FU-Dyson-BMS/blob/main/hardware-info/images/V6%20SV04%20-%20PCB%20188002,%20Repaired.jpg"><img src="https://github.com/tinfever/FU-Dyson-BMS/raw/main/hardware-info/images/V6%20SV04%20-%20PCB%20188002,%20Repaired.jpg" width="400"/></a></p>
<p dir="auto">Note: the model numbers are kind of weird. There are three different ways to identify/categorize your vacuum:</p>
<ol dir="auto">
<li>The advertised version number (V6, V7, etc)</li>
<li>The actual model number printed on the battery (SV04, SV09, SV11)</li>
<li>The part number printed on the battery PCB (61462, 279857, 188002).</li>
</ol>
<p dir="auto">Some models like SV04 contain different versions of the battery PCB. Many of these PCB versions are extremely similar and I have no idea why Dyson seems to have made at least 5 different versions. I recommend you use the PCB part number for reference if possible, or the model number printed on the battery otherwise. I still use the V6, V7 names in some places since that is what most people are familiar with, and I keep changing my mind as to which identification method is better.</p>
<p dir="auto"><strong>Probably not compatible:</strong>
(Although it’d be interesting to see PCB photos of them to be sure)</p>
<ul dir="auto">
<li>V10 vacuums</li>
<li>V11 vacuums</li>
<li>Anything newer</li>
</ul>
<p dir="auto">If you aren’t sure if your battery is compatible, please submit a Github issue with the highest quality photos possible of the battery PCB and provide the advertised model number (V6, V7, etc) and printed model number (SV09, SV11, etc) and I’ll try to tell you if it will work.</p>
<h2 dir="auto"><a id="user-content-how-to-install-it" aria-hidden="true" href="#how-to-install-it"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How to install it:</h2>
<p dir="auto">Warning: The firmware flash process is irreversible. It is not possible to restore the factory firmware.</p>
<p dir="auto">Summary:</p>
<ol start="0" dir="auto">
<li>Be careful. Li-ion batteries are no joke and must be respected. You&#39;re working on a live battery pack that can output 100+ Amps if short-circuited.</li>
<li>Disassemble battery pack to access PCB</li>
<li>Make sure all cells are charged above 3V and that the pack LEDs do <em>something</em> when you press the button (with magnet on reed switch if using V7). This confirms the 3.3V rail is regulating and the PIC is awake/working.</li>
<li>Remove conformal coating over programming connection points (if applicable)</li>
<li>Connect PICkit to computer and, if you using a PICkit 3 or clone, install the <a href="https://ww1.microchip.com/downloads/en/DeviceDoc/PICkit3%20Programmer%20Application%20v3.10.zip" rel="nofollow">PICkit 3 Programmer App and Scripting Tool v3.10</a>. (<a href="https://www.microchip.com/en-us/tools-resources/archives/mplab-ecosystem" rel="nofollow">https://www.microchip.com/en-us/tools-resources/archives/mplab-ecosystem</a>)</li>
<li>Connect PICkit to BMS board as shown below:</li>
</ol>
<p><a target="_blank" rel="noopener noreferrer" href="https://github.com/tinfever/FU-Dyson-BMS/blob/main/hardware-info/images/PICkit%20Wiring%20Diagram_crop.jpg"><img src="https://github.com/tinfever/FU-Dyson-BMS/raw/main/hardware-info/images/PICkit%20Wiring%20Diagram_crop.jpg" width="720"/></a></p>
6.  Wake up battery pack by pressing button and placing magnet on reed switch (if using V7 vacuum)
7.  While maintaining tension on wires to BMS board, make sure PICkit can see the PIC16LF1847 microcontroller, then import and write the hex file from the latest GitHub release.  
</article>
          </div></div>
  </body>
</html>
