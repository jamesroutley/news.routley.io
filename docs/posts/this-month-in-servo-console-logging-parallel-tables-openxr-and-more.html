<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://servo.org/blog/2024/07/31/this-month-in-servo/">Original</a>
    <h1>This month in Servo: console logging, parallel tables, OpenXR, and more</h1>
    
    <div id="readability-page-1" class="page"><p><span>2024-07-31</span> Servo’s unique parallel layout engine just got even better.</p><div>
  <figure><a href="https://servo.org/img/blog/quest-3-passthrough.png"><img src="https://servo.org/img/blog/quest-3-passthrough.png" alt="Servo displaying WebXR content on a Quest 3 in Quest Link mode"/></a>
<figcaption>Figure 1: Servo can now render to XR headsets via OpenXR. Image: Daniel Adams (<a href="https://twitter.com/msub2official/status/1818533316477251669">Twitter</a>)</figcaption></figure>
<p><span></span>
Servo has had several new features land in our nightly builds over the last month:</p>
<ul>
<li>as of 2024-06-27, <strong>document.fonts.ready</strong> (<a href="https://github.com/mukilan">@mukilan</a>, <a href="https://github.com/mrobinson">@mrobinson</a>, <a href="https://github.com/servo/servo/pull/32576">#32576</a>)</li>
<li>as of 2024-07-03, the <strong>getCompilationInfo() method on GPUShaderModule</strong> (<a href="https://github.com/sagudev">@sagudev</a>, <a href="https://github.com/servo/servo/pull/32642">#32642</a>)</li>
<li>as of 2024-07-08, window.<strong>customElements.getName</strong> (<a href="https://github.com/keithamus">@keithamus</a>, <a href="https://github.com/servo/servo/pull/32715">#32715</a>)</li>
<li>as of 2024-07-09, <strong>&lt;caption&gt; in tables</strong> (<a href="https://github.com/mrobinson">@mrobinson</a>, <a href="https://github.com/Loirooriol">@Loirooriol</a>, <a href="https://github.com/mukilan">@mukilan</a>, <a href="https://github.com/servo/servo/pull/32657">#32657</a>, <a href="https://github.com/servo/servo/pull/32695">#32695</a>)</li>
<li>as of 2024-07-13, <strong>document.visibilityState</strong> and <strong>document.hidden</strong> (<a href="https://github.com/wusyong">@wusyong</a>, <a href="https://github.com/servo/servo/pull/32635">#32635</a>)</li>
<li>as of 2024-07-18, the <strong>measureText() method on CanvasRenderingContext2D</strong> (<a href="https://github.com/chocolate-pie">@chocolate-pie</a>, <a href="https://github.com/servo/servo/pull/32704">#32704</a>)</li>
<li>as of 2024-07-23, <strong>URL.parse()</strong> (<a href="https://github.com/shanehandley">@shanehandley</a>, <a href="https://github.com/servo/servo/pull/32819">#32819</a>)</li>
</ul>
<p>We’ve also landed an experimental <strong>OpenXR backend</strong> (<a href="https://github.com/msub2">@msub2</a>, <a href="https://github.com/servo/servo/pull/32817">#32817</a>), allowing Servo to display WebXR content on actual headsets like the <strong>Quest 3</strong> in Quest Link mode.
You can enable it with <code>--pref dom.webxr.openxr.enabled</code>, though the backend currently only works on Windows.</p>
<figure><a href="https://servo.org/img/blog/july-2024.png"><img src="https://servo.org/img/blog/july-2024.png" alt="Servo nightly showing a table with a caption, containing demos of several other new features"/></a>
<figcaption>Figure 2: a table with a caption, containing demos of several other new features.</figcaption></figure>
<h2 id="rendering-changes" tabindex="-1"><span></span>Rendering changes <a href="#rendering-changes">
        <span><i></i></span>
      </a></h2>
<p><strong>Parallel table layout</strong> is now enabled (<a href="https://github.com/mrobinson">@mrobinson</a>, <a href="https://github.com/servo/servo/pull/32477">#32477</a>), spreading the work for laying out rows and their columns over all available CPU cores.
This change is a great example of the strengths of <a href="https://crates.io/crates/rayon">Rayon</a> and the opportunistic parallelism in Servo’s layout engine.</p>
<p>We‘ve also made progress on our new <strong>flexbox layout engine</strong> (<code>--pref layout.flexbox.enabled</code>), landing support for <strong>‘min-height’</strong> and <strong>‘max-height’</strong> on row containers (<a href="https://github.com/delan">@delan</a>, <a href="https://github.com/mrobinson">@mrobinson</a>, <a href="https://github.com/mukilan">@mukilan</a>, <a href="https://github.com/servo/servo/pull/32785">#32785</a>), as well as <strong>baseline alignment of row containers</strong> with their siblings (<a href="https://github.com/mrobinson">@mrobinson</a>, <a href="https://github.com/mukilan">@mukilan</a>, <a href="https://github.com/delan">@delan</a>, <a href="https://github.com/servo/servo/pull/32841">#32841</a>, <a href="https://github.com/servo/servo/pull/32810">#32810</a>) and for their items by setting <strong>‘align-items’</strong> or <strong>‘align-self’</strong> to <strong>‘baseline’</strong>, <strong>‘first baseline’</strong>, or <strong>‘last baseline’</strong> (<a href="https://github.com/delan">@delan</a>, <a href="https://github.com/mrobinson">@mrobinson</a>, <a href="https://github.com/mukilan">@mukilan</a>, <a href="https://github.com/nicoburns">@nicoburns</a>, <a href="https://github.com/servo/servo/pull/32787">#32787</a>, <a href="https://github.com/servo/servo/pull/32790">#32790</a>).</p>

<p>We’ve landed support for <strong>generic font families</strong> like ‘sans-serif’ and ‘monospace’ (<a href="https://github.com/mrobinson">@mrobinson</a>, <a href="https://github.com/mukilan">@mukilan</a>, <a href="https://github.com/servo/servo/pull/32673">#32673</a>), as well as <strong>commas in &lt;font face&gt;</strong> (<a href="https://github.com/mrobinson">@mrobinson</a>, <a href="https://github.com/servo/servo/pull/32622">#32622</a>) and fixes for font matching on Android and OpenHarmony (<a href="https://github.com/jschwe">@jschwe</a>, <a href="https://github.com/servo/servo/pull/32725">#32725</a>, <a href="https://github.com/servo/servo/pull/32731">#32731</a>).</p>
<p>For <strong>replaced elements</strong> like &lt;img&gt; and &lt;canvas&gt;, the <strong>‘min-width’</strong>, <strong>‘max-width’</strong>, <strong>‘min-height’</strong>, and <strong>‘max-height’</strong> properties now <strong>respect the aspect ratio</strong> of the element (<a href="https://github.com/valadaptive">@valadaptive</a>, <a href="https://github.com/servo/servo/pull/32777">#32777</a>), and you can now change that aspect ratio with the <strong>‘aspect-ratio’ property</strong> (<a href="https://github.com/valadaptive">@valadaptive</a>, <a href="https://github.com/servo/servo/pull/32800">#32800</a>, <a href="https://github.com/servo/servo/pull/32803">#32803</a>).</p>
<figure><a href="https://servo.org/img/blog/devtools-july-2024.png"><img src="https://servo.org/img/blog/devtools-july-2024.png" alt="Firefox devtools connected to Servo, showing several console errors"/></a>
<figcaption>Figure 3: console logging is now supported when using the Firefox devtools.</figcaption></figure>

<p>When debugging in Servo <a href="https://book.servo.org/running-servoshell.html">with the <strong>Firefox devtools</strong></a>, you can now see <strong>console messages</strong> from the page (<a href="https://github.com/eerii">@eerii</a>, <a href="https://github.com/servo/servo/pull/32727">#32727</a>), as shown in <em>Figure 3</em>, and you can even debug the devtools connection itself with our new <strong>devtools protocol analyzer</strong> (<a href="https://github.com/eerii">@eerii</a>, <a href="https://github.com/servo/servo/pull/32684">#32684</a>).</p>
<p>servoshell now has experimental <strong>OpenHarmony support</strong> (<a href="https://github.com/jschwe">@jschwe</a>, <a href="https://github.com/servo/servo/pull/32594">#32594</a>), in addition to our experimental Android support and nightly releases for Windows, macOS, and Linux.
We’ve also landed <strong>directory listings</strong> for local files (<a href="https://github.com/Bobulous">@Bobulous</a>, <a href="https://github.com/mrobinson">@mrobinson</a>, <a href="https://github.com/servo/servo/pull/32580">#32580</a>), made the location bar behave more consistently on Android (<a href="https://github.com/jschwe">@jschwe</a>, <a href="https://github.com/servo/servo/pull/32586">#32586</a>), and servoshell no longer quits when you press Escape (<a href="https://github.com/mrego">@mrego</a>, <a href="https://github.com/servo/servo/pull/32603">#32603</a>).</p>
<figure><div>
<table>
<thead>
<tr>
<th>Version and build config</th>
<th><code>servo</code> binary size</th>
</tr>
</thead>
<tbody>
<tr>
<td>Before <a href="https://github.com/servo/servo/pull/32651">#32651</a></td>
<td>126364k</td>
</tr>
<tr>
<td>With <a href="https://github.com/servo/servo/pull/32651">#32651</a></td>
<td>110111k (−12.8%)</td>
</tr>
<tr>
<td>With <a href="https://github.com/servo/servo/pull/32651">#32651</a></td>
<td>102878k (−18.5%)</td>
</tr>
<tr>
<td>With <a href="https://github.com/servo/servo/pull/32759">#32759</a></td>
<td>107652k (−14.8%)</td>
</tr>
<tr>
<td>With <a href="https://github.com/servo/servo/pull/32759">#32759</a></td>
<td>100886k (−20.1%)</td>
</tr>
</tbody>
</table>
</div>
<figcaption>Figure 4: servoshell binary size improvements on Linux (amd64).</figcaption></figure>
<p><span></span>
To reduce servoshell’s binary size, we now build our nightly releases with <strong>ThinLTO</strong> (<a href="https://github.com/jschwe">@jschwe</a>, <a href="https://github.com/servo/servo/pull/32651">#32651</a>), and you can go even further by building Servo <strong>without debug symbols</strong> (<a href="https://github.com/jschwe">@jschwe</a>, <a href="https://github.com/servo/servo/pull/32651">#32651</a>) or <strong>without the legacy layout engine</strong> (<a href="https://github.com/jschwe">@jschwe</a>, <a href="https://github.com/servo/servo/pull/32759">#32759</a>).
Note that these builds use the <code>production</code> profile in Cargo, not the <code>release</code> profile.</p>
<h2 id="changes-for-servo-developers" tabindex="-1">Changes for Servo developers <a href="#changes-for-servo-developers">
        <span><i></i></span>
      </a></h2>
<p><a href="https://book.servo.org"><strong>The Servo book</strong></a> is now the place to go for Servo’s documentation (<a href="https://github.com/delan">@delan</a>, <a href="https://github.com/servo/servo/pull/32743">#32743</a>).
It includes our architecture and design docs, a link to our API docs, as well as docs on building, running, testing, debugging, and profiling Servo.</p>
<p>Servo now builds without the <code>crown</code> linter by default (<a href="https://github.com/jschwe">@jschwe</a>, <a href="https://github.com/servo/servo/pull/32494">#32494</a>), simplifying the build process in some cases.
If you’re working on DOM code, you can enable it again with <code>./mach build --use-crown</code>.</p>
<figure><a href="https://servo.org/img/blog/dco-check.png"><img src="https://servo.org/img/blog/dco-check.png" alt="GitHub checks popup showing the “DCO” check failing and a link to “Details”"/></a>
<figcaption>Figure 5: the DCO check will now fail unless you sign off your commits.</figcaption></figure>
<p><span></span>
When contributing to Servo, <strong>your commits must now be <a href="https://developercertificate.org">“signed off”</a></strong>, which is essentially a promise that you own (or are allowed to contribute) the code in your patch.
If the DCO check fails, click Details for help on signing off your commits (<em>Figure 5</em>).</p>

<h2 id="donations" tabindex="-1">Donations <a href="#donations">
        <span><i></i></span>
      </a></h2>
<p>Thanks again for your generous support!
We are now receiving <strong>2955 USD/month</strong> (+32.6% over June) in recurring donations.</p>
<p>Servo is now on <a href="https://thanks.dev">thanks.dev</a>, and already <strong>three GitHub orgs</strong> that depend on Servo are sponsoring us there.
If you use Servo libraries like <a href="https://crates.io/crates/url/reverse_dependencies">url</a>, <a href="https://crates.io/crates/html5ever/reverse_dependencies">html5ever</a>, <a href="https://crates.io/crates/selectors/reverse_dependencies">selectors</a>, or <a href="https://crates.io/crates/cssparser/reverse_dependencies">cssparser</a>, signing up for <a href="https://thanks.dev">thanks.dev</a> could be a good way for you (or your employer) to give back to the community.</p>
<p>We are still receiving donations from <strong>14 people</strong> on LFX, but we will stop accepting donations there soon — <strong>please move your recurring donations to <a href="https://github.com/sponsors/servo">GitHub</a> or <a href="https://opencollective.com/servo">Open Collective</a></strong>.
In the meantime, we’ve transferred <strong>2723 USD</strong> of donations from LFX to our Open Collective account.</p>
<figure><div>
    <div>
        <p><strong>2955</strong> USD/month</p>
        
        
        <p><strong>10000</strong></p>
    </div>
    </div></figure>
<p>As always, use of these funds will be decided transparently in the Technical Steering Committee.
Our updated proposal for a <a href="https://github.com/servo/project/issues/94#issuecomment-2252262955">dedicated server for CI runners</a> (<a href="https://github.com/delan">@delan</a>, <a href="https://github.com/sagudev">@sagudev</a>, <a href="https://github.com/nicoburns">@nicoburns</a>) was accepted, which should reduce build times significantly, and this is just the start!</p>
<p>For more details, head to our <a href="https://servo.org/sponsorship/">Sponsorship page</a>.</p>
<h2 id="conferences-and-blogs" tabindex="-1">Conferences and blogs <a href="#conferences-and-blogs">
        <span><i></i></span>
      </a></h2>
<ul>
<li><a href="https://www.youtube.com/watch?v=SamA5Oz-G5w"><strong>Servo: A web rendering engine for the future</strong></a> (<a href="https://servo.org/slides/2024-07-02-global-software-technology-summit/">slides</a>) — Manuel Rego spoke at the <a href="https://huawei-events.de/en/gsts24.htm">Global Software Technology Summit 2024</a> about the status and long-term vision of the Servo project</li>
<li><a href="https://wusyong.github.io/posts/verso-0-1/"><strong>Verso: A new browser based on Servo</strong></a> — Wu Yu Wei wrote about their plans to build a more polished Servo-based browser while improving Servo’s architecture</li>
<li><a href="https://wusyong.github.io/posts/verso-compositor-part1/"><strong>Verso: Writing its own compositor part 1</strong></a> — Wu Yu Wei uses Verso as a sandbox to explore how we might rework Servo’s compositor to support multiple windows</li>
<li><a href="https://conflor.es/blog/03_halfway_point"><strong>Halfway point</strong></a> — Eri wrote about repairing Servo’s devtools support, from planning to selecting tabs to finding resources and now the console, as part of their Outreachy internship</li>
</ul>
<h2 id="alan-jeffrey-(1967%E2%80%932024)" tabindex="-1">Alan Jeffrey (1967–2024) <a href="#alan-jeffrey-(1967%E2%80%932024)">
        <span><i></i></span>
      </a></h2>
<p><a href="https://web.archive.org/web/20240714161830/https://asaj.org/">Alan Jeffrey</a>, an early member of the Servo team and a key part of helping the Servo project find a new life outside of Mozilla, passed away on 4 July.</p>
<p>His research has furthered a wide range of fields, including concurrent and distributed systems, programming languages, formal verification, software semantics, typesetting, protocol security, and circuit design.</p>
<p>Alan’s family have also written about his kindness, curiosity, and persistence <a href="https://www.linkedin.com/feed/update/activity:7215033040614436865/">on his LinkedIn page</a>.</p>


</div></div>
  </body>
</html>
