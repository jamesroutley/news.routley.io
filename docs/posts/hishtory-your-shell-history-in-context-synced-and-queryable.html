<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/ddworken/hishtory">Original</a>
    <h1>Show HN: HiSHtory: Your shell history in context, synced, and queryable</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto"><code>hishtory</code> is a better shell history. It stores your shell history in context (what directory you ran the command in, whether it succeeded or failed, how long it took, etc). This is all stored locally and end-to-end encrypted for syncing to to all your other computers. All of this is easily queryable via the <code>hishtory</code> CLI. This means from your laptop, you can easily find that complex bash pipeline you wrote on your server, and see the context in which you ran it.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://raw.githubusercontent.com/ddworken/hishtory/master/backend/web/landing/www/img/demo.gif"><img src="https://raw.githubusercontent.com/ddworken/hishtory/master/backend/web/landing/www/img/demo.gif" alt="demo" data-animated-image=""/></a></p>
<h2 dir="auto"><a id="user-content-getting-started" aria-hidden="true" href="#getting-started"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Getting Started</h2>
<p dir="auto">To install <code>hishtory</code> on your first machine:</p>
<div dir="auto" data-snippet-clipboard-copy-content="curl https://hishtory.dev/install.py | python3 -"><pre>curl https://hishtory.dev/install.py <span>|</span> python3 -</pre></div>
<p dir="auto">At this point, <code>hishtory</code> is already managing your shell history (for bash, zsh, and fish!). Give it a try with <code>hishtory query</code> and see below for more details on the advanced query features.</p>
<p dir="auto">Then to install <code>hishtory</code> on your other computers, you need your secret key. Get this by running <code>hishtory status</code>. Once you have it, you follow similar steps to install hiSHtory on your other computers:</p>
<div dir="auto" data-snippet-clipboard-copy-content="curl https://hishtory.dev/install.py | python3 -
hishtory init $YOUR_HISHTORY_SECRET"><pre>curl https://hishtory.dev/install.py <span>|</span> python3 -
hishtory init <span>$YOUR_HISHTORY_SECRET</span></pre></div>
<p dir="auto">Now if you run <code>hishtory query</code> on first computer, you can automatically see the commands you&#39;ve run on all your other computers!</p>
<h2 dir="auto"><a id="user-content-features" aria-hidden="true" href="#features"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Features</h2>
<h3 dir="auto"><a id="user-content-querying" aria-hidden="true" href="#querying"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Querying</h3>
<p dir="auto">There are two ways to interact with hiSHtory.</p>
<ol dir="auto">
<li>Via pressing <code>Control+R</code> in your terminal. Search for a command, select it via <code>Enter</code>, and then have it ready to execute in your terminal&#39;s buffer.</li>
<li>Via <code>hishtory query</code> if you just want to explore your shell history.</li>
</ol>
<p dir="auto">Both support the same query format, see the below annotated queries:</p>
<table>
<thead>
<tr>
<th>Query</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>psql</code></td>
<td>Find all commands containing <code>psql</code></td>
</tr>
<tr>
<td><code>psql db.example.com</code></td>
<td>Find all commands containing <code>psql</code> and <code>db.example.com</code></td>
</tr>
<tr>
<td><code>docker hostname:my-server</code></td>
<td>Find all commands containing <code>docker</code> that were run on the computer with hostname <code>my-server</code></td>
</tr>
<tr>
<td><code>nano user:root</code></td>
<td>Find all commands containing <code>nano</code> that were run as <code>root</code></td>
</tr>
<tr>
<td><code>exit_code:127</code></td>
<td>Find all commands that exited with code <code>127</code></td>
</tr>
<tr>
<td><code>service before:2022-02-01</code></td>
<td>Find all commands containing <code>service</code> run before February 1st 2022</td>
</tr>
<tr>
<td><code>service after:2022-02-01</code></td>
<td>Find all commands containing <code>service</code> run after February 1st 2022</td>
</tr>
</tbody>
</table>
<p dir="auto">For true power users, you can even query in SQLite via <code>sqlite3 ~/.hishtory/.hishtory.db</code>.</p>
<h3 dir="auto"><a id="user-content-enabledisable" aria-hidden="true" href="#enabledisable"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Enable/Disable</h3>
<p dir="auto">If you want to temporarily turn on/off hiSHtory recording, you can do so via <code>hishtory disable</code> (to turn off recording) and <code>hishtory enable</code> (to turn on recording). You can check whether or not <code>hishtory</code> is enabled via <code>hishtory status</code>.</p>
<h3 dir="auto"><a id="user-content-deletion" aria-hidden="true" href="#deletion"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Deletion</h3>
<p dir="auto"><code>hishtory redact</code> can be used to delete history entries that you didn&#39;t intend to record. It accepts the same search format as <code>hishtory query</code>. For example, to delete all history entries containing <code>psql</code>, run <code>hishtory redact psql</code>.</p>
<h3 dir="auto"><a id="user-content-updating" aria-hidden="true" href="#updating"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Updating</h3>
<p dir="auto">To update <code>hishtory</code> to the latest version, just run <code>hishtory update</code> to securely download and apply the latest update.</p>
<h3 dir="auto"><a id="user-content-advanced-features" aria-hidden="true" href="#advanced-features"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Advanced Features</h3>
<details>
<summary>Changing the displayed columns</summary>
<p dir="auto">You can customize the columns that are displayed via <code>hishtory config-set displayed-columns</code>. For example, to display only the cwd and command:</p>
<div data-snippet-clipboard-copy-content="hishtory config-set displayed-columns CWD Command"><pre><code>hishtory config-set displayed-columns CWD Command
</code></pre></div>
</details>
<details>
<summary>Custom Columns</summary>
<p dir="auto">You can create custom column definitions that are populated from arbitrary commands. For example, if you want to create a new column named <code>git_remote</code> that contains the git remote if the cwd is in a git directory, you can run:</p>
<div data-snippet-clipboard-copy-content="hishtory config-add custom-column git_remote &#39;(git remote -v 2&gt;/dev/null | grep origin 1&gt;/dev/null ) &amp;&amp; git remote get-url origin || true&#39;
hishtory config-add displayed-columns git_remote"><pre><code>hishtory config-add custom-column git_remote &#39;(git remote -v 2&gt;/dev/null | grep origin 1&gt;/dev/null ) &amp;&amp; git remote get-url origin || true&#39;
hishtory config-add displayed-columns git_remote
</code></pre></div>
</details>
<details>
<summary>Disabling Control-R integration</summary>
If you&#39;d like to disable the control-R integration in your shell, you can do so by running `hishtory config-set enable-control-r false`. 
</details>
<h2 dir="auto"><a id="user-content-design" aria-hidden="true" href="#design"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Design</h2>
<p dir="auto">The <code>hishtory</code> CLI is written in Go. It hooks into the shell in order to track information about all commands that are run. It takes this data and saves it in a local SQLite DB managed via <a href="https://gorm.io/" rel="nofollow">GORM</a>. This data is then encrypted and sent to your other devices through a backend that essentially functions as a one-to-many queue. When you run <code>hishtory query</code>, a SQL query is run to find matching entries in the local SQLite DB.</p>
<h3 dir="auto"><a id="user-content-syncing-design" aria-hidden="true" href="#syncing-design"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Syncing Design</h3>
<p dir="auto">See <a href="https://blog.daviddworken.com/posts/hishtory-explained/" rel="nofollow">hiSHtory: Cross-device Encrypted Syncing Design</a> to learn how syncing works.</p>
<h2 dir="auto"><a id="user-content-security" aria-hidden="true" href="#security"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Security</h2>
<p dir="auto"><code>hishtory</code> is a CLI tool written in Go and uses AES-GCM for end-to-end encrypting your history entries while syncing them. The binary is reproducibly built and <a href="https://slsa.dev/" rel="nofollow">SLSA Level 3</a> to make it easy to verify you&#39;re getting the code contained in this repository.</p>
<p dir="auto">This all ensures that the minimalist backend cannot read your shell history, it only sees encrypted data.</p>
<p dir="auto">If you find any security issues in hiSHtory, please reach out to <code>david@daviddworken.com</code>.</p>
</article>
          </div></div>
  </body>
</html>
