<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://avdweb.nl/arduino/attiny3217/nano-dip">Original</a>
    <h1>Nano DIP: the smallest complete Arduino board 33 x 10mm</h1>
    
    <div id="readability-page-1" class="page"><div><p>The Arduino Nano DIP is the smallest complete Arduino board ever. It&#39;s compatible with the Arduino Uno, but surprisingly, it has the same size as the ATmega328P-PU chip itself: 33 x 10mm.</p>
 
<p><span role="figure"><a rel="lightbox" title="Nano-DIP-the-smallest-Arduino-33-x-10mm" href="https://cceckman.com/images/Arduino/Dily3217-images/Nano-DIP-the-smallest-Arduino-33-x-10mm.jpg"><img data-mediaboxck-haslink="1" src="https://cceckman.com/images/Arduino/Dily3217-images/Nano-DIP-the-smallest-Arduino-33-x-10mm.jpg" alt="Nano-DIP-the-smallest-Arduino-33-x-10mm" width="400" height="400" data-alt="Nano DIP the smallest Arduino 33 x 10mm"/></a><span>Nano DIP: the smallest Arduino Nano board 33 x 10mm</span></span></p>
<h3 id="sellingatelecrow">Selling at Elecrow</h3>
<p><a href="https://www.elecrow.com/nano-dip-the-smallest-complete-arduino-board-33-x-10mm.html">You can buy the Nano DIP at Elecrow.</a></p>
<p><span role="figure"><a rel="lightbox" href="https://cceckman.com/images/Arduino/Dily3217-images/ATtiny3217-Arduino-development-board.jpg"><img data-mediaboxck-haslink="1" src="https://cceckman.com/images/Arduino/Dily3217-images/ATtiny3217-Arduino-development-board.jpg" alt="" width="400" height="300" data-alt="ATtiny3217 Arduino development board"/></a><span>Smallest complete Arduino board: the Nano DIP 33x10mm</span></span></p>
<h3 id="advantagesofthearduinonanodip">Advantages of the Arduino Nano DIP</h3>
<ul>
<li>Unparalleled compactness, being the smallest Arduino board ever developed. Its DIP26 size of 33 x 10mm allows for easy integration into projects with limited space constraints.</li>
<li>It has more functionality than the Arduino Uno.</li>
<li>The DIP26 package leaves more pins free on a solderless breadboard.</li>
</ul>
<h3 id="arduinonanodipfeatures">Arduino Nano DIP features</h3>
<ul>
<li>DIP26 size, 33 x 10 mm</li>
<li>Arduino Uno compatible</li>
<li>ATtiny3217 instead of the ATmega328P</li>
<li>21 I/O pins</li>
<li>12 x 10 bit ADC channels</li>
<li>Supply voltage 1.8V - 5.5V</li>
<li>Supply voltage V+ max18V</li>
<li>Clock 16MHz (max 20Mhz)</li>
<li>Straightforward pinout</li>
</ul>
<h3 id="additionalfeaturescomparedtothearduinouno">Additional features compared to the Arduino Uno</h3>
<ul>
<li>1 x fast 350ksps 8-bit real DAC</li>
<li>The USB supply pin is protected by an ideal diode that doesn&#39;t have a 0.7V voltage drop</li>
<li>A 2-pole header, which is connected to D2, can be used as a jumper. Use pinMode(INPUT_PULLUP)</li>
<li>The LED at D0 can be disabled by a jumper</li>
</ul>
<h3 id="featuressameasthearduinouno">Features same as the Arduino Uno</h3>
<ul>
<li>USB connector for programming and debugging</li>
<li>Bootloader Optiboot preloaded</li>
<li>32kByte program memory</li>
<li>2048Byte SRAM</li>
<li>Reset button</li>
<li>3 LEDs for indication of power, TXD and RXD</li>
<li>5V regulator</li>
</ul>
<h3 id="missingfeaturescomparedtothearduinouno">Missing features compared to the Arduino Uno</h3>
<ul>
<li>The clock oscillator has no pins for an external crystal. The frequency accuracy is 2%</li>
<li>There is no 3.3V regulator on board</li>
</ul>
<p><span role="figure"><a rel="lightbox" href="https://cceckman.com/images/Arduino/Dily3217-images/Dily3217-size.jpg"><img data-mediaboxck-haslink="1" src="https://cceckman.com/images/Arduino/Dily3217-images/Dily3217-size.jpg" alt="" width="686" height="373" data-alt="Dily3217 size"/></a><span>The Arduino has shrunken down to 33x10mm</span></span></p>
<h3 id="nanodippinout">Nano DIP pinout</h3>
<p>Note that the megaTinyCore is used. All the information needed to program the Nano DIP can be found on <a href="https://github.com/SpenceKonde/megaTinyCore/blob/master/megaavr/extras/ATtiny_x17.md">SpenceKonde&#39;s GitHub</a>.</p>
<p><a rel="lightbox" href="https://cceckman.com/images/Arduino/Dily3217-images/Arduino-Nano-DIP-pinout.png"><img data-mediaboxck-haslink="1" src="https://cceckman.com/images/Arduino/Dily3217-images/Arduino-Nano-DIP-pinout.png" alt="" width="397" height="653" data-alt="Arduino Nano DIP pinout"/></a></p>
<h3 id="arduinonanodipcircuit">Arduino Nano DIP circuit</h3>
<p><span role="figure"><span><a rel="lightbox" href="https://cceckman.com/images/Arduino/Dily3217-images/Small-ATtiny3217-development-board.jpg"><img data-mediaboxck-haslink="1" src="https://cceckman.com/images/Arduino/Dily3217-images/Small-ATtiny3217-development-board.jpg" alt="" title="Small ATtiny3217 development board circuit" data-alt="Small ATtiny3217 development board"/></a><span><span>Small ATtiny3217 development board circuit</span></span></span><span>Arduino Nano DIP circuit</span></span><br/></p>
<h3 id="whydidyoubuildthenanodip">Why did you build the Nano DIP?</h3>
<p>It was just fun to build a complete Arduino on the size of the ATmega328P-PU chip itself. It was a challenge to get all parts on a PCB the size of DIP26 IC. It was a really entertaining puzzle. Moreover, I wanted a solid groundplane, thus as few tracks as possible at the bottom side.</p>
<p>I also have many applications where the Arduino ATmega328PB-AU microcontroller is simply too large in size.</p>
<h3 id="pcbdesign">PCB design</h3>
<p>Fitting all 23 components within the 33mm x 7.6mm PCB was a challenge. To make this job easy, I could have opted for small 0201 SMD parts and thin 2 mil traces. However, I chose not to do this. I wanted the PCB to be cheap to produce, which imposed restrictive conditions:</p>
<ul>
<li>PCB trace width / space 6/6 mil.</li>
<li>Via drill / outer diameter 12/24 mil.</li>
<li>All SMD parts 0402 or larger.</li>
</ul>
<p><span role="figure"><a rel="lightbox" href="https://cceckman.com/images/Arduino/Dily3217-images/ATtiny3217-development-board-DIL24-2.jpg"><img data-mediaboxck-haslink="1" src="https://cceckman.com/images/Arduino/Dily3217-images/ATtiny3217-development-board-DIL24-2.jpg" alt="" width="300" height="186" data-alt="ATtiny3217 development board"/></a><span>Smallest Arduino: Nano DIP 33x10mm</span></span><br/></p>
<p><span role="figure"><a rel="lightbox" href="https://cceckman.com/images/Arduino/Dily3217-images/Arduino-Nano-DIP-GND-plane.jpg"><img data-mediaboxck-haslink="1" src="https://cceckman.com/images/Arduino/Dily3217-images/Arduino-Nano-DIP-GND-plane.jpg" alt="" width="300" height="91" data-alt="Arduino-Nano-DIP-GND-plane.jpg"/></a><span>Arduino Nano DIP GND plane</span></span></p>
<p>Here is an video of the<strong> Nano DIP <span>old version</span></strong> without the USB connector.</p>
<p><iframe src="https://www.youtube.com/embed/50aqpFfa0ao" width="315" height="315" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen" frameborder="0"></iframe></p>
<h3 id="morememory32k2048">More memory (32k/2048)</h3>
<p>Until the year 2018, the small and cheap ATtiny microcontroller series, such as the ATtiny85, had less memory (8k/512). This was often a serious problem, sometimes you need a microcontroller with a larger memory but small in size. But in 2018, more powerful ATtiny chips were introduced, such as the ATtiny3217. It has 32kByte program memory and 2048Byte SRAM equal to the ATmega328P which is used on the Arduino Uno.</p>
<h3 id="qfn24packagetransformedintodip26package">QFN24 package transformed into DIP26 package</h3>
<p>For hobbyists, the drawback of the ATtiny3217 is that it is only available in a QFN24 package, with a pin spacing of 0.5 mm, which can only be soldered using a solder mask. Since there is no breadboard-friendly DIL package of the ATtiny3217, you always need a development board. That&#39;s why I made the small DIP board, just like I did with the <strong><a href="https://cceckman.com/arduino/samd21/sam-15x15">SAM15x15</a></strong>.</p>
<h3 id="compatibility">Compatibility</h3>
<p>The pin numbers are different than the Arduino Nano or UNO, you must change them in the sketch.</p>
<h3 id="5vregulator">5V regulator</h3>
<p>The maximum input voltage on the V+ pin is 18V.</p>
<h3 id="uploadsketcheswiththearduinoide">Upload sketches with the Arduino IDE</h3>
<h4 id="step1">Step 1</h4>
<ul>
<li>File &gt; Preferences &gt; Additional board manager URLs = <a href="http://drazzy.com/package_drazzy.com_index.json">http://drazzy.com/package_drazzy.com_index.json</a></li>
<li>Tools &gt; Boards -&gt; Boards Manager</li>
<li>Select &#34;megaTinyCore by Spence Konde&#34; and click &#34;Install&#34;</li>
</ul>
<h4 id="step2">Step 2</h4>
<ul>
<li>Tools &gt; Board = ATtiny3217 (Optiboot).</li>
<li>Board = First set Tools &gt; Clock Speed = 16MHz.</li>
<li>Upload the sketch</li>
</ul>
<p>Note that the bootloader is already burned by me.</p>
<h3 id="howtoburnabootloaderintotheattiny3217">How to burn a bootloader into the ATtiny3217</h3>
<p>Note that you don&#39;t need this step because the bootloader is already burned by me. Read here how you can burn a bootloader yourself: <a href="https://cceckman.com/arduino/attiny3217/bootloader-attiny3217">Burning a bootloader into the ATtiny3217</a>.</p>
<h3 id="attiny3227vsattiny3217">ATtiny3227 vs ATtiny3217</h3>
<p>My preference is the ATtiny3217 because it has an extra DAC. These are the main differences:</p>
<ul>
<li>ATtiny3217: 1-series, DAC</li>
<li>ATtiny3227: 2-series, no DAC,12 bit ADC, 3kbyte RAM, differential ADC, 2 UARTs</li>
</ul>
<p>See more:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/ATtiny_microcontroller_comparison_chart">ATtiny microcontroller comparison chart</a></li>
</ul>
<h3 id="calibrationoftheinternalrcoscillator">Calibration of the internal RC oscillator</h3>
<p>The accuracy of the internal RC oscillator is factory calibrated within ±4%. This only applies for 0-70ºC 16MHz or 20MHz and voltage between 1.8 and 3.6V. It is possible to perform a secondary calibration of the RC oscillator to obtain a frequency accuracy within ±1% <a href="http://ww1.microchip.com/downloads/en/appnotes/atmel-2555-internal-rc-oscillator-calibration-for-tinyavr-and-megaavr-devices_applicationnote_avr053.pdf">see here</a>. Note that the oscillator temperature coefficient is also corrected and calibrated. </p>
<h3 id="checkingtheclockspeed">Checking the clock speed</h3>
<p>If you forget to set the clock speed with tools&gt; Clock Speed, it can have serious consequences. For example, at the Yamaha battery dongle, to reduce power consumption, I use a clock frequency of 5MHz instead of 20MHz.  If the factory forgets to set the frequency, the dongle will still work. While the dongle still passes the test, the electronics will overheat. That is why it is important to add a test in the software. In this example, the program stops if the clock frequency is not 5Mhz.</p>
<pre>while(checkClockSpeed()) blinkError(5)</pre>
<pre>bool checkClockSpeed()
{ byte b = CLKCTRL.MCLKCTRLB; // 0=20MHz 1=10MHz 11=5MHz not allowed: 16, 8, 4, 1 MHz
  return b!= 3; 
}</pre>
<h3 id="myfavoritearduinochips">My favorite Arduino chips</h3>
<ul>
<li>ATmega328PB is the successor of the ATmega328P.</li>
<li>ATtiny3217 is is ideal for miniature PCBs.</li>
</ul></div></div>
  </body>
</html>
