<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://webkit.org/blog/12662/customizing-color-fonts-on-the-web/">Original</a>
    <h1>Customizing Color Fonts on the Web</h1>
    
    <div id="readability-page-1" class="page"><div>
                                
                <p><img src="https://webkit.org/wp-content/uploads/palettes.png"/></p>
<p>Color fonts provide a way to add richness to your designs without sacrificing any of the many benefits of using plain text. Regardless of how decorative a color font is, the underlying text is always searchable, copy/paste-able, scalable, translatable, and compatible with screen readers.</p>
<p>WebKit now supports CSS <a href="https://drafts.csswg.org/css-fonts-4/#font-palette-values"><code>@font-palette-values</code></a>. With this at-rule, you can access predefined color palettes provided by the font designer, and you can customize them in order to make the color font a perfect match for the colors in your designs.</p>
<figure>
<section id="one">
<p>ONCE upon a time in the middle of winter, when the flakes of snow were falling like feathers from the clouds, a Queen sat at her palace window, which had an ebony black frame, stitching her husband’s shirts. While she was thus engaged and looking out at the snow she pricked her finger, and three drops of blood fell upon the snow. Now the red looked so well upon the white that she thought to herself, “Oh, that I had a child as white as this snow, as red as this blood, and as black as the wood of this frame!” Soon afterwards a little daughter came to her, who was as white as snow, and with cheeks as red as blood, and with hair as black as ebony, and from this she was named “Snow-White.” And at the same time her mother died.</p>
</section>
<section id="two">
<p>THIS answer so angered the Queen that she became quite yellow with envy. From that hour, whenever she saw Snow-White, her heart was hardened against her, and she hated the little girl. Her envy and jealousy increased so that she had no rest day or night, and she said to a Huntsman, “Take the child away into the forest. I will never look upon her again. You must kill her, and bring me her heart and tongue for a token.” The Huntsman listened and took the maiden away, but when he drew out his knife to kill her, she began to cry, saying, “Ah, dear Huntsman, give me my life! I will run into the wild forest, and never come home again.”</p>
</section>
<p>You can try out @font-palette-values today in Safari 15.4 or later.</p>
</figure>
<p>Color palettes work great in WebKit with the <code>COLRv0</code> font file format, and we are investigating other formats like <a href="https://docs.microsoft.com/en-us/typography/opentype/spec/svg">SVG</a>.</p>
<h3>Background on the font above</h3>
<p>The font in this demo is a <a href="https://djr.com/notes/bradley-djr-font-of-the-month">revival of Bradley</a>, a “fairytale blackletter” originally released in 1895. The typeface came with a special set of <a href="https://archive.org/details/specimensofprint00amerrich/page/n325/mode/2up">ornate Initial caps</a> meant for drop caps (<a href="https://www.w3.org/TR/css-inline/#initial-letter-styling">see also <code>::initial-letter</code></a>) and other titling uses, which David <a href="https://djr.com/notes/bradley-initials-font-of-the-month">digitized this past December</a> for his <a href="https://fontofthemonth.club/">Font of the Month Club</a>, just in time for the holidays.</p>
<p>Each glyph is made up of a handful of distinct layers (letterform, backdrop, ornate linework, letter outline, and border). Making the layers different-yet-coordinated colors adds depth to the design, taking it beyond what a simple foreground/background can provide. It felt like the perfect use case for a color font with multiple color palettes, and a unique opportunity for a 127-year-old font to play a small part in an emerging font technology.</p>
<h3>Palettes in CSS</h3>
<p>Fonts can define one or more of their own color palettes inside the <a href="https://docs.microsoft.com/en-us/typography/opentype/spec/cpal">CPAL</a> table inside the font file. The palettes are ordered, and so they are identified by index. For example, a font might define color palette #3 that uses blues and greens, but another palette #5 might use reds and oranges. Colors within a palette inside the font are also identified by index – all palettes contain the same number of colors within themselves.</p>
<p>These color palettes can be tweaked or overridden in CSS using <code>font-palette-values</code>. An example looks like this:</p>
<pre><code>@font-palette-values --lilac-blossom {
    font-family: &#34;Bradley Initials DJR Web&#34;;
    base-palette: 7;
    override-colors: 0 #fff, 1 #F3B0EB;
}</code></pre>
<p>This example means “Make a color palette named Lilac Blossom, that, when applied to Bradley Initials DJR Web, is just like the 7th palette in the font, but overrides color #0 in that palette to be white, and color #1 in the palette to be <code>#F3B0EB</code>.” If you don’t want to override any colors, that’s no problem – just delete the entire override-colors descriptor.</p>
<p>You can then apply this color palette by simply supplying it to the font-palette property like this:</p>
<pre><code>font-palette: --lilac-blossom;</code></pre>
<section id="three">
<figure><span>T</span>he <span>R</span>ound <span>T</span>able</figure>
</section>

<h3>Progressive Enhancement</h3>
<p>If you’re using an older version of Safari, or a different browser which doesn’t understand the <code>font-palette</code> property, it will render the default (<code>0</code>th) color palette in the font. Here’s what the above example would look like in such a browser:</p>
<section id="threeprogressiveenhancement">
<figure><span>T</span>he <span>R</span>ound <span>T</span>able</figure>
</section>

<p>If the fallback behavior is undesirable for your particular font, you can detect browsers that understand CSS color palettes in your stylesheet by using the <code>@supports</code> media query, like so:</p>
<pre><code>@supports (font-palette: --lilac-blossom) {
    .lilacblossom {
        font-palette: --lilac-blossom;
    }
}

@font-palette-values --lilac-blossom {
    font-family: &#34;Bradley Initials DJR Web&#34;;
    base-palette: 7;
    override-colors: 0 #fff, 1 #F3B0EB;
}</code></pre>
<h3>Dark Mode</h3>
<p>Not all color palettes are clearly visible on all backgrounds. Without color fonts, the color used to render text was entirely determined by the CSS author, but now that fonts can have color palettes defined inside them, it’s up to CSS authors to pick or create a color palette that is legible on the background it’s being rendered on. This can be particularly tricky when font fallback occurs, or when the user has blocked some fonts from loading.</p>
<p>Fonts such as Bradley Initials DJR Web have an extra tool for helping with this, though. Fonts <a href="https://docs.microsoft.com/en-us/typography/opentype/spec/cpal#palette-type-array">can indicate</a> that certain palettes inside them are usable with light backgrounds or usable with dark backgrounds, and these palettes are hooked up to the <code>font-palette</code> property. You don’t even have to use <code>@font-palette-values</code>!</p>
<p>So, if you want to use a color palette on a dark background, you can simply say <code>font-palette: dark</code>, like this:</p>
<figure>
<section id="four">
<figure>ABCDEFG</figure>
</section>
</figure>
<p>And the same thing for a light background: <code>font-palette: light</code>:</p>
<figure>
<section id="five">
<figure>ABCDEFG</figure>
</section>
</figure>
<p>Because the <code>font-palette</code> property has no effect on non-color fonts, it’s safe to set it in conjunction with the <code>prefers-color-scheme</code> media query, like this:</p>
<pre><code>@media (prefers-color-scheme: dark) {
    :root {
        background: black;
        color: white;
        font-palette: dark;
    }
}</code></pre>
<h3>Fallback</h3>
<p>Because <code>@font-palette-values</code> blocks are scoped to a specific font, you can make multiple of them that share a name. This is really powerful – it means you can define a single color palette name, and have it applied differently to whatever font happens to be rendered with it. Here’s an example:</p>
<pre><code>@font-palette-values --lilac-blossom {
    font-family: &#34;Bradley Initials DJR Web&#34;;
    base-palette: 1;
}

@font-palette-values --lilac-blossom {
    font-family: &#34;Megabase&#34;;
    base-palette: 2;
}

&lt;div style=&#34;font-palette: --lilac-blossom;&#34;&gt;
    &lt;div style=&#34;font-family: &#39;Bradley Initials DJR Web&#39;;&#34;&gt;Pizza is amazing!&lt;/div&gt;
    &lt;div style=&#34;font-family: &#39;Megabase Web&#39;;&#34;&gt;Is there any food better than pizza?&lt;/div&gt;
&lt;/div&gt;</code></pre>
<p>This will have Bradley Initials DJR Web’s Lilac Blossom palette applied to Bradley Initials DJR Web, and Megabase’s Lilac Blossom palette applied to Megabase. And you only had to specify the font-palette property once!</p>
<h3>Contextual color</h3>
<p>In addition to pulling colors from palettes, some color fonts set aside special shapes that are connected to the foreground color of the current element. This makes them extra flexible, but it also means that these shapes operate independently from <code>font-palette</code>. In these cases, you can simply use the <code>color</code> property to change their color, like in this demo using <a href="https://djr.com/notes/megabase-font-of-the-month">Megabase</a>.</p>
<pre><code>&lt;div style=&#34;font-family: &#39;Megabase Web&#39;;&#34;&gt;
    &lt;div style=&#34;color: black;&#34;&gt;They were just pushed into space.&lt;/div&gt;
    &lt;div style=&#34;color: blue;&#34;&gt;As much as I care about you.&lt;/div&gt;
&lt;/div&gt;</code></pre>
<figure>
<section id="six">
<p>They were just pushed into space.</p>
<p>As much as I care about you.</p>
</section>
</figure>
<h3>Conclusion</h3>
<p>Of course, with power comes responsibility; just because you can change colors, doesn’t mean you always should. Often the colors in a palette are coordinated to harmonize aesthetically, so it’s good to have a sense of how they are meant to relate to one another. You can look at the font’s predefined color palettes to see how the font designer assigned the roles for each color in the palette, <a href="https://webaim.org/resources/contrastchecker/">and tweak accordingly</a>.</p>
<p>It is also important to choose colors that contrast strongly against the background in order to <a href="https://www.w3.org/WAI/WCAG21/Understanding/contrast-minimum.html">keep your text readable and your webpage accessible</a>. Colors in the palette that are used to form the base of the letters should typically “pop” against the background, while supporting layers like shadows, outlines, and decorative elements might contrast less in order to keep them from overpowering the letterforms.</p>
<p>Color fonts are a great improvement over graphic images, because they work by default with screen readers, copy/paste, and find-in-page. Also, they gracefully show fallback text if the font somehow fails to load, and they reflow if the browser window resizes. Not only that, color fonts are more flexible than graphic images, because they can incorporate the foreground color of the element using them into the design of the font.</p>
<p>Color fonts are not meant to take the place of single-color fonts. But used in moderation, at a big enough size in the right circumstance, they can be the perfect icing on the cake!</p>


                            </div></div>
  </body>
</html>
