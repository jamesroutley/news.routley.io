<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/mappu/miqt">Original</a>
    <h1>Miqt: MIT-licensed Qt bindings for Go</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/mappu/miqt/blob/master/doc/logo.svg"><img src="https://github.com/mappu/miqt/raw/master/doc/logo.svg" alt=""/></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/5582d4c23f650f1d41ff1fa4faf6202b30c754579efd1b11dc9511d2de817bd6/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d4d49542d677265656e"><img src="https://camo.githubusercontent.com/5582d4c23f650f1d41ff1fa4faf6202b30c754579efd1b11dc9511d2de817bd6/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d4d49542d677265656e" alt="" data-canonical-src="https://img.shields.io/badge/License-MIT-green"/></a>
<a href="https://pkg.go.dev/github.com/mappu/miqt/qt" rel="nofollow"><img src="https://camo.githubusercontent.com/87e0dcb8c6899d68afe31c60a1b9b37e98527dcd34579fe6f81ec1f2c9e2f33a/68747470733a2f2f706b672e676f2e6465762f62616467652f6769746875622e636f6d2f6d617070752f6d6971742f71742e737667" alt="Go Reference" data-canonical-src="https://pkg.go.dev/badge/github.com/mappu/miqt/qt.svg"/></a>
<a href="https://github.com/mappu/miqt/actions"><img src="https://github.com/mappu/miqt/actions/workflows/miqt.yml/badge.svg?branch=master" alt="GitHub Actions CI"/></a>
<a href="https://goreportcard.com/report/github.com/mappu/miqt" rel="nofollow"><img src="https://camo.githubusercontent.com/a7d81712952481518de5167ef8ab8d8a882b27a510aff08546ca02d7028d0e28/68747470733a2f2f676f7265706f7274636172642e636f6d2f62616467652f6769746875622e636f6d2f6d617070752f6d697174" alt="Go Report Card" data-canonical-src="https://goreportcard.com/badge/github.com/mappu/miqt"/></a>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/mappu/miqt/blob/master/doc/made_in_nz.svg"><img src="https://github.com/mappu/miqt/raw/master/doc/made_in_nz.svg" alt="" title="Made in New Zealand"/></a></p>

<p dir="auto">MIQT is MIT-licensed Qt bindings for Go.</p>
<p dir="auto">This is a straightforward binding of the Qt API using CGO. You must have a working Qt C++ development toolchain to use this Go binding.</p>
<p dir="auto">These bindings were newly started in August 2024. The bindings are functional for all of QtCore, QtGui, and QtWidgets, and there is a uic/rcc implementation. But, the bindings may be immature in some ways. Please try out the bindings and raise issues if you have trouble.</p>

<markdown-accessiblity-table><table>
<thead>
<tr>
<th>OS</th>
<th>Arch</th>
<th>Linkage</th>
<th>Status</th>
</tr>
</thead>
<tbody>
<tr>
<td>Linux</td>
<td>x86_64</td>
<td>Static or Dynamic (.so)</td>
<td>✅ Works</td>
</tr>
<tr>
<td>Windows</td>
<td>x86_64</td>
<td>Static or Dynamic (.dll)</td>
<td>✅ Works</td>
</tr>
<tr>
<td>Android</td>
<td>ARM64</td>
<td>Dynamic (bundled in .apk package)</td>
<td>✅ Works</td>
</tr>
<tr>
<td>macOS</td>
<td>x86_64</td>
<td>Static or Dynamic (.dylib)</td>
<td>Should work, <a href="https://github.com/mappu/miqt/issues/2" data-hovercard-type="issue" data-hovercard-url="/mappu/miqt/issues/2/hovercard">not tested</a></td>
</tr>
<tr>
<td>macOS</td>
<td>ARM64</td>
<td>Static or Dynamic (.dylib)</td>
<td><a href="https://github.com/mappu/miqt/issues/11" data-hovercard-type="issue" data-hovercard-url="/mappu/miqt/issues/11/hovercard">Blocked by #11</a></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>

<p dir="auto">The MIQT Go bindings are licensed under the MIT license.</p>
<p dir="auto">You must also meet your Qt license obligations.</p>

<ul dir="auto">
<li><a href="https://github.com/mappu/miqt/tree/master/examples/mdoutliner">mdoutliner</a>, Markdown Outliner sample application</li>
<li><a href="https://code.ivysaur.me/qbolt" rel="nofollow">qbolt</a>, a graphical database manager for BoltDB</li>
<li>Raise an issue or PR to have your app listed here!</li>
</ul>

<div dir="auto"><h3 tabindex="-1" dir="auto">Q1. Why are the binaries so big?</h3><a id="user-content-q1-why-are-the-binaries-so-big" aria-label="Permalink: Q1. Why are the binaries so big?" href="#q1-why-are-the-binaries-so-big"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Make sure to compile with <code>go build -ldflags &#34;-s -w&#34;</code>. This reduces the <code>helloworld</code> example from 43MB to 6MB.</p>
<p dir="auto">Then, it&#39;s possible to reduce the size further with <code>upx --best</code> to 2MB or <code>upx --lzma</code> to 1.4MB.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Q2. Can I release a proprietary, commercial app with this binding?</h3><a id="user-content-q2-can-i-release-a-proprietary-commercial-app-with-this-binding" aria-label="Permalink: Q2. Can I release a proprietary, commercial app with this binding?" href="#q2-can-i-release-a-proprietary-commercial-app-with-this-binding"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Yes. You must also meet your Qt license obligations: either use Qt dynamically-linked dll/so/dylib files under the LGPL, or, purchase a Qt commercial license for static linking.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Q3. Why does it take so long to compile?</h3><a id="user-content-q3-why-does-it-take-so-long-to-compile" aria-label="Permalink: Q3. Why does it take so long to compile?" href="#q3-why-does-it-take-so-long-to-compile"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The first time MIQT is used, your <code>go build</code> would take about 10 minutes. But after that, any <code>go build</code> is very fast.</p>
<p dir="auto">If you are compiling your app within a Dockerfile, you could cache the build step by running <code>go install github.com/mappu/miqt/qt</code>.</p>
<p dir="auto">If you are compiling your app with a one-shot <code>docker run</code> command, the compile speed can be improved if you also bind-mount the Docker container&#39;s <code>GOCACHE</code> directory: <code>-v $(pwd)/container-build-cache:/root/.cache/go-build</code></p>
<p dir="auto">See also <a href="https://github.com/mappu/miqt/issues/8" data-hovercard-type="issue" data-hovercard-url="/mappu/miqt/issues/8/hovercard">issue #8</a>.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Q4. How does this compare to other Qt bindings?</h3><a id="user-content-q4-how-does-this-compare-to-other-qt-bindings" aria-label="Permalink: Q4. How does this compare to other Qt bindings?" href="#q4-how-does-this-compare-to-other-qt-bindings"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">MIQT is a clean-room binding that does not use any code from other Qt bindings.</p>
<ul dir="auto">
<li><a href="https://github.com/therecipe/qt">therecipe/qt</a> is the most mature Qt binding for Go.
<ul dir="auto">
<li>It works by making IPC calls to a separate C++ binary downloaded at runtime from a site under the maintainer&#39;s control. This may be less performant than calling Qt directly.</li>
<li>Because of the LGPL license, it&#39;s <a href="https://github.com/therecipe/qt/wiki/FAQ#can-i-make-a-proprietary-app-with-this-binding-">extremely difficult to make a proprietary app</a>. See also their <a href="https://github.com/therecipe/qt/issues/259" data-hovercard-type="issue" data-hovercard-url="/therecipe/qt/issues/259/hovercard">issue 259</a>.</li>
</ul>
</li>
<li><a href="https://github.com/kitech/qt.go">kitech/qt.go</a> is another mature Qt binding for Go.
<ul dir="auto">
<li>Unfortunately, it&#39;s also using the LGPL license.</li>
</ul>
</li>
<li><a href="https://github.com/go-qamel/qamel">go-qamel/qamel</a> is an MIT-licensed Qt binding for Go.
<ul dir="auto">
<li>Unfortunately, it only supports QML, not Qt Widgets.</li>
</ul>
</li>
</ul>
<div dir="auto"><h3 tabindex="-1" dir="auto">Q5. How does the MIQT Go API differ from the official Qt C++ API?</h3><a id="user-content-q5-how-does-the-miqt-go-api-differ-from-the-official-qt-c-api" aria-label="Permalink: Q5. How does the MIQT Go API differ from the official Qt C++ API?" href="#q5-how-does-the-miqt-go-api-differ-from-the-official-qt-c-api"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Most functions are implemented 1:1. <a href="https://doc.qt.io/qt-5/classes.html" rel="nofollow">The Qt documentation</a> should be used.</p>
<p dir="auto">The <code>QString</code>, <code>QList&lt;T&gt;</code>, and <code>QVector&lt;T&gt;</code> types are projected as plain Go <code>string</code> and <code>[]T</code>. Therefore, you can&#39;t call any of QString/QList/QVector&#39;s helper methods, you must use some Go equivalent method instead.</p>
<ul dir="auto">
<li>Go strings are internally converted to QString using <code>QString::fromUtf8</code>. Therefore, the Go string must be UTF-8 to avoid <a href="https://en.wikipedia.org/wiki/Mojibake" rel="nofollow">mojibake</a>. If the Go string contains binary data, the conversion would corrupt such bytes into U+FFFD (�). On return to Go space, this becomes <code>\xEF\xBF\xBD</code>.</li>
</ul>
<p dir="auto">Where Qt returns a C++ object by value (e.g. <code>QSize</code>), the binding may have moved it to the heap, and in Go this may be represented as a pointer type. In such cases, a Go finalizer is added to automatically delete the heap object. This means code using MIQT can look basically similar to the Qt C++ equivalent code.</p>
<p dir="auto">The <code>connect(sourceObject, sourceSignal, targetObject, targetSlot)</code> is projected as <code>targetObject.onSourceSignal(func()...)</code>.</p>
<p dir="auto">Qt class inherited types are projected as a Go embedded struct. For example, to pass a <code>var myLabel *qt.QLabel</code> to a function taking only the <code>*qt.QWidget</code> base class, write <code>myLabel.QWidget</code>.</p>
<ul dir="auto">
<li>When a Qt subclass adds a method overload (e.g. <code>QMenu::addAction(QString)</code> vs <code>QWidget::addAction(QAction*)</code>), the base class version is shadowed and can only be called via <code>myQMenu.QWidget.AddAction(QAction*)</code>.</li>
</ul>
<p dir="auto">Some C++ idioms that were difficult to project were omitted from the binding. But, this can be improved in the future.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Q6. Can I use Qt Designer and the Qt Resource system?</h3><a id="user-content-q6-can-i-use-qt-designer-and-the-qt-resource-system" aria-label="Permalink: Q6. Can I use Qt Designer and the Qt Resource system?" href="#q6-can-i-use-qt-designer-and-the-qt-resource-system"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/mappu/miqt/blob/master/doc/architecture-uic.png"><img src="https://github.com/mappu/miqt/raw/master/doc/architecture-uic.png" alt=""/></a></p>
<p dir="auto">MIQT has a custom implementation of Qt <code>uic</code> and <code>rcc</code> tools, to allow using <a href="https://doc.qt.io/qt-5/qtdesigner-manual.html" rel="nofollow">Qt Designer</a> for form design and resource management. After running the <code>miqt-uic</code> and <code>miqt-rcc</code> tools once, you can rebuild any changes using the convenient <code>go generate</code> command.</p>


<p dir="auto"><em>Tested with Debian 12 / Qt 5.15 / GCC 12</em></p>
<div dir="auto" data-snippet-clipboard-copy-content="apt install qtbase5-dev build-essential
go build -ldflags &#39;-s -w&#39;"><pre>apt install qtbase5-dev build-essential
go build -ldflags <span><span>&#39;</span>-s -w<span>&#39;</span></span></pre></div>

<p dir="auto"><em>Tested with Fsu0413 Qt 5.15 / Clang 18.1 native compilation</em></p>
<ol dir="auto">
<li>Install Go from <a href="https://go.dev/dl/" rel="nofollow">the official website</a>.</li>
<li>Install some Qt toolchain and its matching GCC or Clang compiler (MSVC is not compatible with CGO).
<ul dir="auto">
<li>You can use <a href="https://www.qt.io/" rel="nofollow">official Qt binaries</a> or any LGPL rebuild.</li>
<li>Example: Download and extract the following into some shared <code>C:\dev\rootfs</code>:</li>
<li><a href="https://build-qt.fsu0413.me/5.15-series/5.15.11-for-windows/index.html#windows-mingw-llvm" rel="nofollow">Qt and matching GCC or Clang toolchain</a></li>
<li><a href="https://sourceforge.net/projects/pkgconfiglite/files/0.28-1/" rel="nofollow">pkg-config</a></li>
</ul>
</li>
<li>Configure environment variables to allow it to be used:</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="$env:CGO_ENABLED = 1
$env:CC = &#39;C:\dev\rootfs\bin\clang.exe&#39;
$env:CXX = &#39;C:\dev\rootfs\bin\clang++.exe&#39;
$env:PKG_CONFIG = &#39;C:\dev\rootfs\bin\pkg-config.exe&#39;
$env:CGO_CXXFLAGS = &#39;-Wno-ignored-attributes -D_Bool=bool&#39; # Clang 18 recommendation"><pre><span>$<span>env:</span>CGO_ENABLED</span> <span>=</span> <span>1</span>
<span>$<span>env:</span>CC</span> <span>=</span> <span><span>&#39;</span>C:\dev\rootfs\bin\clang.exe<span>&#39;</span></span>
<span>$<span>env:</span>CXX</span> <span>=</span> <span><span>&#39;</span>C:\dev\rootfs\bin\clang++.exe<span>&#39;</span></span>
<span>$<span>env:</span>PKG_CONFIG</span> <span>=</span> <span><span>&#39;</span>C:\dev\rootfs\bin\pkg-config.exe<span>&#39;</span></span>
<span>$<span>env:</span>CGO_CXXFLAGS</span> <span>=</span> <span><span>&#39;</span>-Wno-ignored-attributes -D_Bool=bool<span>&#39;</span></span> <span><span>#</span> Clang 18 recommendation</span></pre></div>
<ol start="4" dir="auto">
<li>Run <code>go build -ldflags &#34;-s -w -H windowsgui&#34;</code></li>
</ol>

<p dir="auto"><em>Tested with MSYS2 UCRT64</em></p>
<p dir="auto">For dynamic builds:</p>
<div dir="auto" data-snippet-clipboard-copy-content="pacman -S mingw-w64-ucrt-x86_64-{go,gcc,qt5-base,pkg-config}
GOROOT=/ucrt64/lib/go go build -ldflags &#34;-s -w -H windowsgui&#34;"><pre>pacman -S mingw-w64-ucrt-x86_64-{go,gcc,qt5-base,pkg-config}
GOROOT=/ucrt64/lib/go go build -ldflags <span><span>&#34;</span>-s -w -H windowsgui<span>&#34;</span></span></pre></div>
<p dir="auto">Static builds are also available by installing the <code>mingw-w64-ucrt-x86_64-qt5-static</code> package and building with <code>--tags=windowsqtstatic</code>.</p>
<p dir="auto">The MSYS2 Qt packages in MSYS2 link against <code>libicu</code>, whereas the Fsu0413 Qt packages do not. When using MSYS2, your distribution size including <code>.dll</code> files will be larger.</p>

<p dir="auto"><em>Tested with MXE Qt 5.15 / MXE GCC 5 under cross-compilation</em></p>
<p dir="auto">For static builds (open source application):</p>
<ol dir="auto">
<li>Build the necessary docker container for cross-compilation:
<ul dir="auto">
<li><code>docker build -t miqt/win64-cross:latest -f win64-cross-go1.23-qt5.15-static.Dockerfile .</code></li>
</ul>
</li>
<li>Build your application:
<ul dir="auto">
<li><code>docker run --rm -v $(pwd):/src -w /src miqt/win64-cross:latest go build -buildvcs=false --tags=windowsqtstatic -ldflags &#39;-s -w -H windowsgui&#39;</code></li>
</ul>
</li>
</ol>
<p dir="auto">For dynamically-linked builds (closed-source or open source application):</p>
<ol dir="auto">
<li>Build the necessary docker container for cross-compilation:
<ul dir="auto">
<li><code>docker build -t miqt/win64-dynamic:latest -f win64-cross-go1.23-qt5.15-dynamic.Dockerfile .</code></li>
</ul>
</li>
<li>Build your application:
<ul dir="auto">
<li><code>docker run --rm -v $(pwd):/src -w /src miqt/win64-dynamic:latest go build -buildvcs=false -ldflags &#39;-s -w -H windowsgui&#39;</code></li>
</ul>
</li>
<li>Copy necessary Qt LGPL libraries and plugin files.</li>
</ol>
<p dir="auto">See FAQ Q3 for advice about docker performance.</p>
<p dir="auto">To add an icon and other properties to the .exe, you can use <a href="https://github.com/tc-hib/go-winres">the go-winres tool</a>. See the <code>examples/windowsmanifest</code> for details.</p>

<p dir="auto"><em>Tested with Raymii Qt 5.15 / Android SDK 31 / Android NDK 22</em></p>
<p dir="auto">Miqt supports compiling for Android. Some extra steps are required to bridge the Java, C++, Go worlds.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/mappu/miqt/blob/master/doc/android-architecture.png"><img src="https://github.com/mappu/miqt/raw/master/doc/android-architecture.png" alt=""/></a></p>
<ol dir="auto">
<li>Modify your main function to <a href="https://pkg.go.dev/cmd/go#hdr-Build_modes" rel="nofollow">support <code>c-shared</code> build mode</a>.
<ul dir="auto">
<li>Package <code>main</code> must have an empty <code>main</code> function.</li>
<li>Rename your <code>main</code> function to <code>AndroidMain</code> and add a comment <code>//export AndroidMain</code>.</li>
<li>Ensure to <code>import &#34;C&#34;</code>.</li>
<li>Check <code>examples/android</code> to see how to support both Android and desktop platforms.</li>
</ul>
</li>
<li>Build the necessary docker container for cross-compilation:
<ul dir="auto">
<li><code>docker build -t miqt/android:latest -f android-armv8a-go1.23-qt5.15-dynamic.Dockerfile .</code></li>
</ul>
</li>
<li>Build your application as <code>.so</code> format:
<ul dir="auto">
<li><code>docker run --rm -v $(pwd):/src -w /src miqt/android:latest go build -buildmode c-shared -ldflags &#34;-s -w -extldflags -Wl,-soname,my_go_app.so&#34; -o android-build/libs/arm64-v8a/my_go_app.so</code></li>
</ul>
</li>
<li>Build the Qt linking stub:
<ul dir="auto">
<li><code>docker run --rm -v $(pwd):/src -w /src miqt/android:latest android-stub-gen.sh my_go_app.so AndroidMain android-build/libs/arm64-v8a/libRealAppName_arm64-v8a.so</code></li>
<li>The linking stub is needed because Qt for Android will itself only call a function named <code>main</code>, but <code>c-shared</code> can&#39;t create one.</li>
</ul>
</li>
<li>Build the <a href="https://doc.qt.io/qt-6/android-deploy-qt-tool.html" rel="nofollow">androiddeployqt</a> configuration file:
<ul dir="auto">
<li><code>docker run --rm -v $(pwd):/src -w /src miqt/android:latest android-mktemplate.sh RealAppName deployment-settings.json</code></li>
</ul>
</li>
<li>Build the android package:
<ul dir="auto">
<li><code>docker run --rm -v $(pwd):/src -w /src miqt/android:latest androiddeployqt --input ./deployment-settings.json --output ./android-build/</code></li>
<li>By default, the resulting <code>.apk</code> is generated at <code>android-build/build/outputs/apk/debug/android-build-debug.apk</code>.</li>
<li>You can build in release mode by adding <code>--release</code></li>
</ul>
</li>
</ol>
<p dir="auto">See FAQ Q3 for advice about docker performance.</p>
<p dir="auto">For repeated builds, only steps 3 and 6 are needed. If you customize the <code>AndroidManifest.xml</code> file or images, they will be used for the next <code>androiddeployqt</code> run.</p>
</article></div></div>
  </body>
</html>
