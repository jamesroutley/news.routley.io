<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://hologram.page/blog/hologram-v0-5-0-released">Original</a>
    <h1>Hologram v0.5.0</h1>
    
    <div id="readability-page-1" class="page"><div>
      <div>
        

<p>
  Hologram 0.5.0 represents a major evolution of the framework, delivering significant new features, performance improvements, and architectural changes that provide a more robust foundation for future development.
</p>

<p>
  This release brings substantial performance enhancements across the entire stack - execution times have improved from milliseconds to microseconds in many core client-side operations, making Hologram fast enough to handle real-time interactions like mouse move events for drawing applications. To showcase these capabilities, I&#39;ve prepared an <a href="https://hologram.page/demos/svg-drawing">SVG Drawing Demo</a> that demonstrates smooth, responsive drawing using pointer move events.
</p>

<p><img src="https://hologram.page/images/blog/svg-drawing-demo-21fde2c6ec6af82c21dba2fb7956413d.gif"/></p><p>
  Key highlights include the introduction of comprehensive session and cookie management, a new HTTP-based transport layer, live reload functionality for enhanced development experience, and incremental compilation for faster build times. The release also features a new high-performance bitstring implementation, extensive benchmarking infrastructure, and foundational CRDT support for future distributed features.
</p>

<p>
  With over 950 commits since version 0.4.0, this release includes important architectural changes that improve both developer experience and runtime performance, while laying the groundwork for advanced features in upcoming releases.
</p>

<h2>New Features</h2>

<h3>Session Management</h3>
<ul>
  <li><strong>Complete session handling system</strong> - Full server-side session support for storing and retrieving user data across requests</li>
  <li><strong>Session operations in pages and commands</strong> - Added <code data-component="code">put_session/3</code>, <code data-component="code">get_session/2</code>, <code data-component="code">get_session/3</code>, and <code data-component="code">delete_session/2</code> functions available in both page and component inits and page and component command handlers</li>
  <li><strong>Phoenix session integration</strong> - When used on top of Phoenix, Hologram is fully interoperable with Phoenix session (not applicable when used as a standalone framework)</li>
</ul>

<h3>Cookie Support</h3>
<ul>
  <li><strong>Full cookie management</strong> - Added <code data-component="code">put_cookie/3</code>, <code data-component="code">put_cookie/4</code>, <code data-component="code">get_cookie/2</code>, <code data-component="code">get_cookie/3</code> and <code data-component="code">delete_cookie/2</code> functions with support for all standard cookie options (http_only, secure, same_site, etc.)</li>
  <li><strong>Server-side cookie operations</strong> - Cookies can be read and manipulated during both server-side page/component rendering and command execution</li>
  <li><strong>Automatic cookie encoding/decoding</strong> - Elixir data types are automatically serialized/deserialized when stored in cookies</li>
</ul>

<h3>New Events</h3>
<ul>
  <li><strong>Pointer events support</strong> - Added support for <code data-component="code">pointer_move</code>, <code data-component="code">pointer_cancel</code>, <code data-component="code">pointer_down</code>, <code data-component="code">pointer_up</code> events with pointer-specific properties</li>
  <li><strong>Mouse move event</strong> - Added new <code data-component="code">mouse_move</code> event with support for client coordinates, movement deltas, offset positions, and screen positions</li>
  <li><strong>Select event</strong> - Implemented text <code data-component="code">select</code> event</li>
</ul>

<h3>Live Reload for Development</h3>
<ul>
  <li><strong>File watching and auto-reload</strong> - Automatic detection of file changes in <code data-component="code">.ex</code> and <code data-component="code">.holo</code> files with intelligent debouncing (1 second delay)</li>
  <li><strong>Compilation error overlay</strong> - Beautiful error overlay that displays compilation errors</li>
  <li><strong>Phoenix CodeReloader integration</strong> - Seamless integration with Phoenix&#39;s code reloading system</li>
</ul>

<h3>CRDT Implementation</h3>
<ul>
  <li><strong>Last Writer Wins (LWW) CRDT Map</strong> - Complete conflict-free replicated data type implementation for distributed state management (foundational work for future distributed features)</li>
  <li><strong>Delta operations</strong> - Support for computing and applying delta operations between CRDT states</li>
  <li><strong>Timestamp-based conflict resolution</strong> - Automatic conflict resolution using microsecond-precision timestamps</li>
</ul>

<h2>Enhancements</h2>

<h3>New Bitstring Implementation</h3>
<ul>
  <li><strong>Complete bitstring rewrite</strong> - New JavaScript bitstring class with significant performance improvements: ~ x50 rendering speed improvements (!)</li>
  <li><strong>Enhanced pattern matching</strong> - Better support for complex bitstring patterns and bitstring segment operations</li>
  <li><strong>Optimized text handling</strong> - Fast paths for text-based bitstrings and UTF-8 operations</li>
</ul>

<h3>Incremental Compilation</h3>
<ul>
  <li><strong>Module digest tracking</strong> - Implemented module digest PLTs (Persistent Lookup Tables) that track BEAM definition digests for all modules using fast phash2 hashing</li>
  <li><strong>Smart recompilation</strong> - Only recompiles modules that have actually changed by comparing old and new module digest PLTs</li>
  <li><strong>Call graph patching</strong> - Incrementally updates the call graph using <code data-component="code">CallGraph.patch/3</code> by removing vertices for deleted modules, rebuilding paths for edited modules, and adding new modules</li>
  <li><strong>Build performance optimization</strong> - Significantly faster incremental builds as unchanged modules are skipped entirely, with detailed benchmarking showing the performance improvements. The speedup is 2x-10x depending on project size.</li>
  <li><strong>Build artifact persistence</strong> - Automatic loading and dumping of module digest PLTs and call graph to disk for persistence across compilation cycles</li>
</ul>

<h3>Enhanced Event System</h3>
<ul>
  <li><strong>Enhanced mouse and pointer event properties</strong> - Added comprehensive coordinate and movement tracking with fields: <code data-component="code">client_x</code>, <code data-component="code">client_y</code>, <code data-component="code">movement_x</code>, <code data-component="code">movement_y</code>, <code data-component="code">offset_x</code>, <code data-component="code">offset_y</code>, <code data-component="code">page_x</code>, <code data-component="code">page_y</code>, <code data-component="code">screen_x</code>, <code data-component="code">screen_y</code></li>
  <li><strong>Event inheritance improvements</strong> - ClickEvent now inherits from PointerEvent for better event property consistency (Firefox and Safari fixed related bugs)</li>
</ul>

<h3>Performance Optimizations</h3>
<ul>
  <li><strong>Extensive function optimizations</strong> - Over 50 functions optimized including pattern matching, module reflection, and core operations</li>
  <li><strong>Custom graph implementation</strong> - Replaced libgraph with custom map-based digraph implementation for better performance (optimized for Hologram-specific scenarios)</li>
  <li><strong>ETS table optimizations</strong> - Enabled read/write concurrency options for better multi-process performance (Hologram compiles modules in parallel)</li>
  <li><strong>Client-side rendering optimizations</strong> - Significant improvements to DOM rendering and bitstring operations</li>
  <li><strong>Type representation changes</strong> - More performant internal representation for boxed types and complex data structures</li>
</ul>

<h3>Comprehensive Benchmarking Infrastructure</h3>
<ul>
  <li><strong>Elixir benchmarking suite</strong> - 30+ benchmark scripts covering compiler operations, reflection functions, and core utilities</li>
  <li><strong>JavaScript benchmarking system</strong> - New benchmarking infrastructure for client-side performance testing</li>
  <li><strong>Automated benchmark runner</strong> - Script to execute all benchmarks with detailed performance reports</li>
</ul>

<h3>Transport Layer Migration</h3>
<ul>
  <li><strong>HTTP-based communication</strong> - Migration from WebSocket to HTTP for page requests and command execution that need to access cookies/session.</li>
  <li><strong>HTTP ping system</strong> - Keep-alive mechanism using HTTP HEAD requests every 30 seconds (this gives practically the same latency as running commands through Websockets)</li>
  <li><strong>WebSocket connection management</strong> - New connection abstraction with automatic reconnection and timeout handling</li>
  <li><strong>Phoenix Channels dependency removed</strong> - No longer depends on Phoenix JS for WebSocket functionality (custom implementation)</li>
</ul>

<h3>Serialization Improvements</h3>
<ul>
  <li><strong>Serialization format v2</strong> - New, more efficient serialization protocol for client-server communication</li>
  <li><strong>Backward compatibility</strong> - Support for deserializing both v1 and v2 formats during transition period</li>
  <li><strong>Better type support</strong> - Enhanced serialization for Elixir types</li>
</ul>

<h3>Expanded Runtime Support</h3>
<ul>
  <li><strong>New Erlang function ports</strong> - Added JavaScript implementations of <code data-component="code">:erlang.iolist_to_binary/1</code>, <code data-component="code">:erlang.max/2</code>, <code data-component="code">:erlang.min/2</code>, <code data-component="code">:erlang.byte_size/1</code>, and partial <code data-component="code">:erlang.float_to_binary/2</code></li>
  <li><strong>String function ports</strong> - Manual JavaScript ports of <code data-component="code">String.contains?/2</code> and <code data-component="code">String.trim/1</code> with server consistency tests</li>
  <li><strong>16-bit floats</strong> - Added support for 16-bit floats (now all float types are supported)</li>
</ul>

<h2>Bug Fixes</h2>

<h3>Template and Parsing Fixes</h3>
<ul>
  <li><strong>SVG tag parsing</strong> - Fixed parsing of SVG tags and improved void element detection</li>
  <li><strong>Template text fragments</strong> - Fixed parsing of &#34;#&#34; characters and &#34;${&#34; symbols in text fragments</li>
  <li><strong>Expression parsing</strong> - Better handling of complex expressions in template contexts</li>
</ul>

<h3>Event and Navigation Fixes</h3>
<ul>
  <li><strong>Page reload detection</strong> - Improved detection and handling of page reloads vs navigation (page reloads don&#39;t need to load page snapshot from the client store)</li>
  <li><strong>Page snapshot restoration</strong> - Fixed restoration of page state when returning from external pages</li>
  <li><strong>Flaky test resolution</strong> - Resolved multiple flaky tests in both Elixir and JavaScript test suites</li>
</ul>

<h3>Runtime Fixes</h3>
<ul>
  <li><strong>Connection timeout handling</strong> - Better handling of connection timeouts and error states</li>
  <li><strong>Error reporting</strong> - Made error reporting for some ported functions to be consistent with Elixir behavior</li>
  <li><strong>Runtime env detection</strong> - Fixed the automatic detection of the runtime environment in <code data-component="code">Hologram.env/0</code></li>
</ul>

<h2>Backward Incompatible Changes</h2>

<h3>Event Naming Convention Changes</h3>
<ul>
  <li><strong>Updated event names</strong> - Events like pointerdown should now be written in templates as <code data-component="code">$pointer_down</code>, etc.</li>
</ul>

<h2>Acknowledgments &amp; Community</h2>

<h3>Special Thanks to My GitHub Sponsors</h3>
<p>
  I&#39;d like to thank my GitHub sponsors: <strong>D4no0 (Calancea Daniel)</strong>, <strong>Lucassifoni (Lucas Sifoni)</strong> and <strong>sodapopcan (Andrew Haust)</strong>. Your support is greatly appreciated and helps with Hologram&#39;s continued development.
</p>
<p>
  If you&#39;d like to support Hologram&#39;s development and help make releases like this possible, consider <a href="https://github.com/sponsors/bartblast" target="_blank">becoming a GitHub sponsor</a>. Your sponsorship directly contributes to the framework&#39;s growth, allows me to dedicate more time to new features, performance improvements, and community support. Every contribution, no matter the size, makes a meaningful difference in Hologram&#39;s journey.
</p>

<h3>Stay Connected</h3>
<p>
  Join the growing community following Hologram&#39;s journey by signing up for our monthly <a href="https://hologram.page/newsletter">Newsletter</a>.
</p>
<p>
  Every month, you&#39;ll get updates on development milestones, ecosystem news, and insights from the Hologram world. Think of it as your monthly check-in with everything Hologram-related. Whether it&#39;s new features being worked on, interesting discussions in the community, or updates on the framework&#39;s direction, you&#39;ll get a nice overview of what&#39;s been happening. No need to piece together information from different places - it&#39;s all compiled into one convenient monthly update.
</p>

<p>
  - Bart
</p>
        
      </div>
    </div></div>
  </body>
</html>
