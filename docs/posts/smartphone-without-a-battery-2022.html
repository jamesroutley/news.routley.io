<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://yaky.dev/2022-09-06-smartphone-without-battery/">Original</a>
    <h1>Smartphone without a battery (2022)</h1>
    
    <div id="readability-page-1" class="page"><div>
<div>

<p>How to wire and run an old smartphone without a battery.</p>

<h2 id="Intro">Intro</h2>
<p>I have an old Samsung Galaxy S5 that I wanted to use to run my 3D printer. There is a great project called octo4a that runs OctoPrint on Android devices.</p>
<p><a href="https://github.com/feelfreelinux/octo4a">octo4a</a></p>
<p>Using an old smartphone for OctoPrint is a perfect fit - it has USB OTG support to connect to the printer, WiFi to access the controls and upload models, and a camera to monitor the print progress. The only, yet critical, issue is that the kernel for Galaxy S5 does not support charging while it&#39;s connected to a USB device. The battery is old and worn, and cannot last through several hours of printing. </p>
<p>The approach I took was to build a &#34;fake battery&#34; circuit that emulates the battery, but is powered by 5V via USB. </p>

<h2 id="Process">Process</h2>
<p>First, I removed the battery. Luckily, this smartphone is old enough to have user-serviceable battery compartment.</p>
<p>Older batteries might have only two terminals, (+) and (-). Newer batteries might have three or four terminals. I measured voltage and resistance between all terminals to find out what they might be.</p>
<p><img src="https://yaky.dev/2022-09-06-smartphone-without-battery/battery-pins.jpg" alt="battery-pins.jpg"/></p>
<p>These are the results:</p>
<ul>
<li>Terminals (+) and (-) are obvious. Generally, Li-ion battery will produce 3.4V when almost-empty and 4.2V when full. The battery also says &#34;CHARGE VOLTAGE 4.4V&#34;, so that voltage level at the battery terminal would not cause any issues with the smartphone.</li>
<li>The second terminal is the thermistor (T), used to get the approximate temperature of the battery. The resistance between (T) and (-) is around 2350ohm at room temperature. Being a safety feature, my smartphone will not start at all if the thermistor terminal is not connected.</li>
<li>The fourth terminal is most likely used for NFC (which is a part of the battery). It&#39;s not going to be used.</li>
</ul>

<p>So what I need my &#34;fake battery&#34; circuit to do is:</p>
<ul>
<li>Provide 3.4-4.4V between (+) and (-) battery terminals on the smartphone</li>
<li>Create ~2350ohm resistance between (T) and (-)</li>
</ul>

<p>Since I am still powering the smartphone from a 5V USB power supply, I can add a single silicon diode between the power supply&#39;s +5V and (+) battery terminal to drop the incoming voltage by ~0.7V down to ~4.3V, which is within the range that the smartphone can expect. </p>
<p>IMPORTANT: Voltage drop across the silicone diode depends on the current, and multimeter measurements might not be accurate. See &#34;Diode voltage drop&#34; at the bottom of the page.</p>
<p>To get ~2350ohms, I connected a 2200ohm and a 150ohm in series. A variable resistor of appropriate range might work too.</p>

<p>This setup works, and the smartphone powers up. However, it can draw plenty of current and needs a fairly powerful power supply. Basic phone charger &lt;1A USB power supply was not enough to even finish booting, but a ~2A  was enough to boot and launch octo4a. Even after booting, if the smartphone is under higher load (initializing the USB connection, using the camera), it draws more current, and will abruptly power off if the current draw exceeds what power supply can provide.</p>

<p>To help address these issues:</p>
<ul>
<li>Add a 1000uF capacitor between (+5V) and (ground) on the circuit. See &#34;Capacitors&#34; at the bottom of the page for warnings and ideas.</li>
<li>Turn on the Battery Saver in Android and set it up to automatically turn on if estimated battery level is below 75% (just in case). This seems to lower the processing power enough to avoid shutdowns.</li>
<li>In OctoPrint settings, either disable the camera entirely, or use it at the lower-end FPS and resolution (320x240 @5FPS). Camera has occasionaly caused octo4a to crash, so I ended up disabling it anyway.</li>
</ul>

<h2 id="Schematic">Schematic</h2>
<p>In ASCII:</p>
<pre>(+5V)
  |
  |          silicon diode
  +---------------|&gt;|------(+)
  |
  |        +---[2350ohm]---(T)
  | 1000uF |
  +---||---+---------------(-)
           |
        (ground)
</pre>
<p>As an image:</p>
<p><img src="https://yaky.dev/2022-09-06-smartphone-without-battery/fake-battery-schematic.jpg" alt="fake-battery-schematic.jpg"/></p>

<h2 id="Result">Result</h2>
<p>I cut and sanded a piece of flooring to fit into the battery compartment. Then, built and soldered the circuit on a through-hole prototype board and mounted it on top of that with double-sided tape. The 4 pins on the top are bent inward, fit into small grooves in the base and make good contact with the springy terminals of the battery compartment. (I could have just soldered the wires directly to the terminals, but wanted to make this device removable just in case I would ever need the battery again). Power comes through the JST connector at the bottom. (I salvaged a long USB cable with a broken micro-USB plug, so I decided to use JST connectors instead of USB for power).</p>
<p><img src="https://yaky.dev/2022-09-06-smartphone-without-battery/wooden-battery.jpg" alt="wooden-battery.jpg"/></p>

<p>3D printer (old RepRapPro) in its enclosure (storage box) and its brain (Samsung Galaxy S5) in a 3D-printed holder. Super modern and high-tech, I know.</p>
<p><img src="https://yaky.dev/2022-09-06-smartphone-without-battery/3d-printer-setup.jpg" alt="3d-printer-setup.jpg"/></p>

<p>This setup has been working fairly well for me for a few weeks now.</p>

<h2 id="Additional_info">Additional info</h2>
<h3 id="Diode_voltage_drop">Diode voltage drop</h3>
<p>Voltage drop across the diode depends on the current. If you connect the diode, but do not connect the circuit to anything, and try to measure the &#34;final&#34; voltage (after the diode) with a multimeter, you will get somewhere around ~4.8V, because the current running through the multimeter is miniscule. You might think you need 4 diodes to bring the voltage down sufficiently, but you do not, one is enough.</p>
<p>Diagrams:</p>
<p>Circuit without load, measured with a multimeter:</p>
<pre>(+5V)
  |  diode
  +---|&gt;|---+ &lt;--+
                 |
          [multimeter: 4.8V]
                 |
  +---------+ &lt;--+
  |
(ground)
</pre>
<p>Circuit with load (connected to the smartphone):</p>
<pre>(+5V)
  |  diode
  +---|&gt;|---+ &lt;-------------+
            |               |
       [smartphone]  [multimeter: 4.2V]
            |               |
  +---------+ &lt;-------------+
  |
(ground)
</pre>
<h3 id="Capacitors">Capacitors</h3>
<p>It might be possible to use a lower-current power supply by replacing the 1000uF capacitor with several &#34;supercapacitors&#34; (5F and above). The only issue I see is that the initial power-up will stress the power supply since empty capacitors are essentially a short circuit.</p>

<h2 id="References">References</h2>
<p><a href="https://learn.adafruit.com/li-ion-and-lipoly-batteries/voltages">Adafruit - about Li-ion and LiPoly batteries</a></p>
<br/>
</div>
</div></div>
  </body>
</html>
