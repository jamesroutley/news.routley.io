<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://layer22.com/swift-and-cute-framework-setting-up-a-project-with-cmake">Original</a>
    <h1>Swift and Cute 2D Game Framework: Setting Up a Project with CMake</h1>
    
    <div id="readability-page-1" class="page"><article>
    <hgroup>
      
      
      <small>




<time datetime="2025-06-06T09:26:00+02:00" aria-label="posted on Friday,  6 of June, 2025">Jun 6</time>
<span aria-hidden="true"> · </span><span title="777 words" aria-label="5 minutes to read this post">5 min read</span>


<span aria-hidden="true">·</span>
<a href="https://layer22.com/tags/cute">cute</a>

<span aria-hidden="true">·</span>
<a href="https://layer22.com/tags/cute-framework">cute-framework</a>

<span aria-hidden="true">·</span>
<a href="https://layer22.com/tags/cmake">cmake</a>

<span aria-hidden="true">·</span>
<a href="https://layer22.com/tags/swift">swift</a>

<span aria-hidden="true">·</span>
<a href="https://layer22.com/tags/game-development">game-development</a>

</small>

    </hgroup>
    <p><a href="https://randygaul.github.io/cute_framework/">Cute Framework</a> is a simple, yet powerful C/C++ framework for building 2D games using the modern GPU pipeline. While C or C++ is fine, <a href="https://www.swift.org">Swift</a> is a modern language that many developers prefer for its safety and expressiveness. In this post, we will explore how to set up a project using Cute Framework with <a href="https://cmake.org">CMake</a>, enabling you to write your game logic in Swift while leveraging the performance of C/C++ for rendering and other performance-critical tasks.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>Before we begin, ensure you have the following installed:</p>

<ul>
  <li>
<a href="https://www.swift.org">Swift</a> (latest version, preferably Swift 6 or later)</li>
  <li>
<a href="https://cmake.org">CMake</a> (we are going to use the most recent version 4.0, but 3.20+ should work just fine)</li>
  <li>
<a href="https://ninja-build.org">Ninja</a> (required for building Swift with CMake)</li>
</ul>

<h2 id="setting-up-the-project-structure">Setting Up the Project Structure</h2>

<p>Create a new directory for your project and navigate into it:</p>

<div><div><pre><code><span>mkdir </span>MyCuteGame
<span>cd </span>MyCuteGame
</code></pre></div></div>

<p>Create the following directory structure:</p>

<div><div><pre><code><span>mkdir </span>src include
<span>touch </span>CMakeLists.txt <span># Our CMake configuration file</span>
<span>touch </span>src/main.swift <span># Our main Swift file</span>
<span>touch </span>include/shim.h <span># Our C header file for Swift interoperability</span>
<span>touch </span>include/module.modulemap <span># Our C module map for Swift interoperability</span>
</code></pre></div></div>

<p>The next step is to configure the <code>CMakeLists.txt</code> file. Open it in your favorite text editor and add the following content:</p>

<div><div><pre><code><span>cmake_minimum_required</span><span>(</span>VERSION 4.0<span>)</span>

<span># Set the project name and languages</span>
<span>project</span><span>(</span>
    MyCuteGame
    LANGUAGES C CXX Swift <span># Ensure we include C, C++, and Swift</span>
<span>)</span>

<span># Set our game sources</span>
<span>file</span><span>(</span>GLOB_RECURSE SOURCES CONFIGURE_DEPENDS src/*.swift<span>)</span>

<span># Set our executable target</span>
<span>add_executable</span><span>(</span>MyCuteGame <span>${</span><span>SOURCES</span><span>}</span><span>)</span>

<span># Include FetchContent to download Cute Framework</span>
<span>include</span><span>(</span>FetchContent<span>)</span>

<span># Define cute as our Cute Framework dependency</span>
<span>FetchContent_Declare</span><span>(</span>
    cute
    GIT_REPOSITORY https://github.com/RandyGaul/cute_framework
<span>)</span>
<span># Fetch the Cute Framework</span>
<span>FetchContent_MakeAvailable</span><span>(</span>cute<span>)</span>

<span># Add the Cute Framework as a dependency</span>
<span>target_include_directories</span><span>(</span>MyCuteGame PUBLIC $&lt;BUILD_INTERFACE:<span>${</span><span>CMAKE_CURRENT_SOURCE_DIR</span><span>}</span>/include&gt;<span>)</span>
<span>target_link_libraries</span><span>(</span>MyCuteGame cute<span>)</span>
</code></pre></div></div>

<p>The <code>CMakeLists.txt</code> file defines few key components:</p>

<ul>
  <li>It sets the project name and specifies that we will be using C, C++, and Swift. We use C and C++ as Cute Framework is written in C/C++.</li>
  <li>It collects all Swift source files in the <code>src</code> directory.</li>
  <li>It sets up the Cute Framework as a dependency using <code>FetchContent</code>, which allows us to download and include it directly in our project.</li>
  <li>It creates an executable target named <code>MyCuteGame</code> and links it with the Cute Framework.</li>
  <li>It includes the <code>include</code> directory for header files, which will be used for Swift interoperability.</li>
</ul>

<h2 id="setting-up-swift-interoperability">Setting Up Swift Interoperability</h2>

<p>To enable Swift to call C functions, we need to create a C header file and a module map. Open <code>include/shim.h</code> and add the following content:</p>

<div><div><pre><code><span>#pragma once
#include</span> <span>&lt;cute.h&gt;</span><span>
</span></code></pre></div></div>

<p>The <code>shim.h</code> file includes the Cute Framework header, allowing Swift to access its functions.</p>

<p>Next, create the module map in <code>include/module.modulemap</code>:</p>

<div><div><pre><code>module CCute [extern_c] {
    header &#34;shim.h&#34;
    export *
}
</code></pre></div></div>

<p>This module map tells Swift how to import the C header file. The <code>extern_c</code> attribute indicates that this module is a C module, which is necessary for Swift interoperability.</p>

<p>With all that in place, we can now write our Swift code in <code>src/main.swift</code>. Open this file and add the following content:</p>

<div><div><pre><code><span>import</span> <span>CCute</span>

<span>// Center the window on the screen</span>
<span>let</span> <span>options</span><span>:</span> <span>CF_AppOptionFlags</span> <span>=</span> <span>Int32</span><span>(</span><span>CF_APP_OPTIONS_WINDOW_POS_CENTERED_BIT</span><span>.</span><span>rawValue</span><span>)</span>
<span>let</span> <span>width</span><span>:</span> <span>Int32</span> <span>=</span> <span>800</span>
<span>let</span> <span>height</span><span>:</span> <span>Int32</span> <span>=</span> <span>600</span>

<span>// Create the Cute Framework app</span>
<span>let</span> <span>result</span> <span>=</span> <span>cf_make_app</span><span>(</span><span>&#34;MyCuteGame&#34;</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>,</span> <span>0</span><span>,</span> <span>width</span><span>,</span> <span>height</span><span>,</span> <span>options</span><span>,</span> <span>CommandLine</span><span>.</span><span>unsafeArgv</span><span>[</span><span>0</span><span>])</span>
<span>if</span> <span>cf_is_error</span><span>(</span><span>result</span><span>)</span> <span>{</span>
  <span>fatalError</span><span>(</span><span>&#34;Failed to create Cute Framework app&#34;</span><span>)</span>
<span>}</span>

<span>// Create a demo girl sprite</span>
<span>var</span> <span>sprite</span> <span>=</span> <span>cf_make_demo_sprite</span><span>()</span>
<span>// Play the &#34;spin&#34; animation</span>
<span>cf_sprite_play</span><span>(</span><span>&amp;</span><span>sprite</span><span>,</span> <span>&#34;spin&#34;</span><span>)</span>
<span>// Make the sprite 4x larger</span>
<span>sprite</span><span>.</span><span>scale</span> <span>=</span> <span>CF_V2</span><span>(</span><span>x</span><span>:</span> <span>4.0</span><span>,</span> <span>y</span><span>:</span> <span>4.0</span><span>)</span>

<span>while</span> <span>cf_app_is_running</span><span>()</span> <span>{</span>
  <span>// Update internal app state without a callback</span>
  <span>cf_app_update</span><span>(</span><span>nil</span><span>)</span>

  <span>// Update the sprite state</span>
  <span>cf_sprite_update</span><span>(</span><span>&amp;</span><span>sprite</span><span>)</span>

  <span>// Draw the sprite</span>
  <span>cf_sprite_draw</span><span>(</span><span>&amp;</span><span>sprite</span><span>)</span>

  <span>// Draw the app onto the screen with clearing enabled</span>
  <span>cf_app_draw_onto_screen</span><span>(</span><span>true</span><span>)</span>
<span>}</span>

<span>cf_destroy_app</span><span>()</span>
</code></pre></div></div>

<h2 id="configure-and-build-the-project">Configure and Build the Project</h2>

<p>Now that we have our project structure and code set up, we can configure and build the project using CMake. Open a terminal in the root directory of your project and run the following commands:</p>

<div><div><pre><code><span>mkdir </span>build       <span># Create a build directory</span>
<span>cd </span>build
cmake <span>-G</span> Ninja .. <span># Configure the project using CMake with Ninja as the generator</span>
cmake <span>--build</span> <span>.</span>   <span># Build the project</span>
</code></pre></div></div>

<p>All that’s left is to run the executable. You can do this by executing:</p>



<p>This should launch your Cute Framework application, displaying a window with a spinning girl sprite.</p>

<p><img src="https://layer22.com/images/posts/cute/girl.gif" alt="MyCuteGame" loading="lazy"/></p>

<p>Et voilà! You have successfully set up a Cute Framework project using CMake and Swift. You can now start building your game logic in Swift while leveraging the performance of C/C++ for rendering and other tasks.</p>

<p>I encourage you to explore the documentation, and especially the <a href="https://randygaul.github.io/cute_framework/#/getting_started">Getting Started</a> guide.</p>

<p>There is also a Discord server where you can ask questions and share your projects: <a href="https://discord.gg/ZvxfCyjZCj">Cute Framework Discord</a>.</p>


    <p><small>Last modified: 06-Jun-25</small></p>
</article></div>
  </body>
</html>
