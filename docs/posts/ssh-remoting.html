<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://zed.dev/blog/remote-development">Original</a>
    <h1>SSH Remoting</h1>
    
    <div id="readability-page-1" class="page"><div><section></section><section><article><p>For people with large codebases, programming on a laptop can be overwhelming. Your fans are constantly spinning, the language server is continually out of memory, and rebuilds take forever...</p>
<p>Now, in Zed, you can open a project on any machine you can SSH into. The UI runs fully locally to give you 120 frames per second of perfectly configured graphics, but with all the gubbins: language servers, tasks, and terminals run on the remote server where they can take advantage of cloud hardware.</p>
<p>It&#39;s simple to use for one-off projects:</p>
<div><pre><code>zed ssh://my-host/~/code/zed
</code></pre></div>
<p>And you can configure longer-lived connections as you need:</p>
<div><figure><img src="https://zed.dev/img/post/remote-dev/remote-dev.png" alt="The &#34;Remote Projects&#34; UI in Zed."/><figcaption>The &#34;Remote Projects&#34; UI in Zed.</figcaption></figure></div>
<p>For more information, <a href="https://zed.dev/docs/remote-development">see the documentation</a>.</p>
<h2 id="building-remote-development">Building Remote Development</h2>
<p>We&#39;ve been working on our remote development feature for a while. While Zed is built for <a href="https://zed.dev/docs/collaboration">remote code editing</a>, changing the infrastructure to support SSH required solving a whole bunch of sub-problems, from SSH connection maintenance, to how we build the remote server, to integrating the feature into everything else we have in Zed.</p>
<p>For the SSH connection, we use the <a href="https://linux.die.net/man/5/ssh_config">ControlMaster</a> setting to maintain a single connection to each host. This means that you can open new terminals and spawn tasks without having to retype your passphrase or re-authenticate. Once connected, we download the remote server for your operating system and architecture. Unlike our normal Linux builds, the remote server can be compiled with <code>musl</code>, which requires no dynamic linking. This lets it work on older distros (where before we ran into compatibility problems with <code>glibc</code>) and on modern share-nothing distros like Nix that don&#39;t have a global set of libraries to dynamically link. Once we&#39;ve established the connection and installed the remote server, we initialize it as a daemon, so that when connections do drop the remote server continues running and on reconnect your language servers are still fully initialized. We also back up any unsaved changes locally, so you never lose your work.</p>
<p>The final piece of the puzzle was making SSH projects work with collaboration. This has been a real stress test of our collaborative syncing protocol as there can now be at least four different nodes involved in a 2-person collaboration over SSH. We had to rewrite our <code>Project</code>, and split it into logical chunks that could be enabled in remote and local modes depending on whether your client is the collab host, the ssh host, or the collab guest. We also have some new, fun <a href="https://github.com/zed-industries/zed/blob/main/crates/collab/src/tests/remote_editing_collaboration_tests.rs#L28-L86">tests</a> that instantiate each of these roles, and our collaboration server, and ensures that the synchronization is done correctly. If you&#39;re working on a project with a friend or colleague, it should be completely transparent to them whether the project is on your laptop, or on a machine you can SSH into.</p>
<p>Please try it out today and, as always, leave us feedback in <a href="https://github.com/zed-industries/zed">GitHub Issues</a> or <a href="https://discord.gg/zed-community">Discord</a>.</p><hr/></article></section></div></div>
  </body>
</html>
