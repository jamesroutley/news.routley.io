<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/princeton-nlp/SWE-agent">Original</a>
    <h1>Princeton group open sources &#34;SWE-agent&#34;, with 12% fix rate for GitHub issues</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text"><p dir="auto">
  <a href="https://www.swe-agent.com/" rel="nofollow">
    <img src="https://jvns.ca/princeton-nlp/SWE-agent/raw/main/assets/swe-agent-banner.png" alt="swe-agent.com"/>
  </a>
</p>
<p dir="auto">
  <a href="https://swe-agent.com" rel="nofollow"><strong>Website &amp; Demo</strong></a>  |  
  <a href="https://discord.gg/AVEFbBn2rH" rel="nofollow"><strong>Discord</strong></a>  |  
  <strong>Paper [coming April 10th]</strong>
</p>

<p dir="auto">SWE-agent turns LMs (e.g. GPT-4) into software engineering agents that can fix bugs and issues in real GitHub repositories.</p>
<p dir="auto">On the full <a href="https://github.com/princeton-nlp/SWE-bench">SWE-bench</a> test set, SWE-agent resolves <strong>12.29%</strong> of issues, achieving the state-of-the-art performance on the full test set.</p>
<p dir="auto">
  <a target="_blank" rel="noopener noreferrer" href="https://jvns.ca/princeton-nlp/SWE-agent/blob/main/assets/results+preview.png"><img src="https://jvns.ca/princeton-nlp/SWE-agent/raw/main/assets/results+preview.png"/></a>
</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">✨ Agent-Computer Interface (ACI) <a name="user-content-aci"></a></h3><a id="user-content--agent-computer-interface-aci-" aria-label="Permalink: ✨ Agent-Computer Interface (ACI) " href="#-agent-computer-interface-aci-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">We accomplish these results by designing simple LM-centric commands and feedback formats to make it easier for the LM to browse the repository, view, edit and execute code files. We call this an <strong>Agent-Computer Interface</strong> (ACI) and build the SWE-agent repository to make it easy to iterate on ACI design for repository-level coding agents.</p>
<p dir="auto">Just like how typical language models requires good prompt engineering, good ACI design leads to much better results when using agents. As we show in our paper, a baseline agent without a well-tuned ACI does much worse than SWE-agent.</p>
<p dir="auto">SWE-agent contains features that we discovered to be immensly helpful during the agent-computer interface design process:</p>
<ol dir="auto">
<li>We add a linter that runs when an edit command is issued, and do not let the edit command go through if the code isn&#39;t syntactically correct.</li>
<li>We supply the agent with a special-built file viewer, instead of having it just <code>cat</code> files. We found that this file viewer works best when displaying just 100 lines in each turn. The file editor that we built has commands for scrolling up and down and for performing a search within the file.</li>
<li>We supply the agent with a special-built full-directory string searching command. We found that it was important for this tool to succintly list the matches- we simply list each file that had at least one match. Showing the model more context about each match proved to be too confusing for the model.</li>
<li>When commands have an empty output we return a message saying &#34;Your command ran successfully and did not produce any output.&#34;</li>
</ol>
<p dir="auto">Read our paper for more details.</p>
<div data-snippet-clipboard-copy-content="@misc{yang2024sweagent,
      title={SWE-agent: Agent Computer Interfaces Enable Software Engineering Language Models}, 
      author={John Yang and Carlos E. Jimenez and Alexander Wettig and Shunyu Yao and Karthik Narasimhan and Ofir Press},
      year={2024},
}"><pre><code>@misc{yang2024sweagent,
      title={SWE-agent: Agent Computer Interfaces Enable Software Engineering Language Models}, 
      author={John Yang and Carlos E. Jimenez and Alexander Wettig and Shunyu Yao and Karthik Narasimhan and Ofir Press},
      year={2024},
}
</code></pre></div>

<ol dir="auto">
<li><a href="https://docs.docker.com/engine/install/" rel="nofollow">Install Docker</a>, then start Docker locally.</li>
<li><a href="https://docs.anaconda.com/free/miniconda/miniconda-install/" rel="nofollow">Install Miniconda</a>, then create the <code>swe-agent</code> environment with <code>conda env create -f environment.yml</code></li>
<li>Activate using <code>conda activate swe-agent</code>.</li>
<li>Run <code>./setup.sh</code> to create the <code>swe-agent</code> docker image.</li>
<li>Create a <code>keys.cfg</code> file at the root of this repository and fill in the following:</li>
</ol>
<div data-snippet-clipboard-copy-content="OPENAI_API_KEY: &#39;OpenAI API Key Here if using OpenAI Model (optional)&#39;
ANTHROPIC_API_KEY: &#39;Anthropic API Key Here if using Anthropic Model (optional)&#39;
GITHUB_TOKEN: &#39;GitHub Token Here (required)&#39;"><pre><code>OPENAI_API_KEY: &#39;OpenAI API Key Here if using OpenAI Model (optional)&#39;
ANTHROPIC_API_KEY: &#39;Anthropic API Key Here if using Anthropic Model (optional)&#39;
GITHUB_TOKEN: &#39;GitHub Token Here (required)&#39;
</code></pre></div>
<p dir="auto">See the following links for tutorials on obtaining <a href="https://docs.anthropic.com/claude/reference/getting-started-with-the-api" rel="nofollow">Anthropic</a>, <a href="https://platform.openai.com/docs/quickstart/step-2-set-up-your-api-key" rel="nofollow">OpenAI</a>, and <a href="https://jvns.ca/princeton-nlp/SWE-agent/blob/main">Github</a> tokens.</p>

<p dir="auto">There are two steps to the SWE-agent pipeline. First SWE-agent takes an input GitHub issue and returns a pull request that attempts to fix it. We call that step <em>inference</em>. The second step (currently, only available for issues in the SWE-bench benchmark) is to <em>evaluate</em> the pull request to verify that it has indeed fixed the issue.</p>
<p dir="auto"><em>NOTE</em>: At this moment, there are known issues with a small number of repositories that don&#39;t install properly for <code>arm64</code> / <code>aarch64</code> architecture computers. We&#39;re working on a fix, but if you&#39;d like to run and evaluate on the entirety of SWE-bench, the easiest way is by using an <code>x86</code> machine.</p>

<p dir="auto"><strong>Inference on <em>any</em> GitHub Issue</strong>: Using this script, you can run SWE-agent on any GitHub issue!</p>
<div data-snippet-clipboard-copy-content="python run.py --model_name gpt4 \
  --data_path https://github.com/pvlib/pvlib-python/issues/1603 --config_file config/default_from_url.yaml"><pre><code>python run.py --model_name gpt4 \
  --data_path https://github.com/pvlib/pvlib-python/issues/1603 --config_file config/default_from_url.yaml
</code></pre></div>
<p dir="auto"><strong>Inference on SWE-bench</strong>: Run SWE-agent on <a href="https://www.swebench.com/lite.html" rel="nofollow">SWE-bench Lite</a> and generate patches.</p>
<div data-snippet-clipboard-copy-content="python run.py --model_name gpt4 \
  --per_instance_cost_limit 2.00 \
  --config_file ./config/default.yaml"><pre><code>python run.py --model_name gpt4 \
  --per_instance_cost_limit 2.00 \
  --config_file ./config/default.yaml
</code></pre></div>
<p dir="auto">If you&#39;d like to run on a <em>single</em> issue from SWE-bench, use the <code>--instance_filter</code> option as follows:</p>
<div data-snippet-clipboard-copy-content="python run.py --model_name gpt4 \
  --instance_filter marshmallow-code__marshmallow-1359"><pre><code>python run.py --model_name gpt4 \
  --instance_filter marshmallow-code__marshmallow-1359
</code></pre></div>
<ul dir="auto">
<li>See the <a href="https://jvns.ca/princeton-nlp/SWE-agent/blob/main/scripts"><code>scripts/</code></a> folder for other useful scripts and details.</li>
<li>See the <a href="https://jvns.ca/princeton-nlp/SWE-agent/blob/main/config"><code>config/</code></a> folder for details about how you can define your own configuration!</li>
<li>See the <a href="https://jvns.ca/princeton-nlp/SWE-agent/blob/main/agent"><code>swe-agent/agent/</code></a> folder for details about the logic behind configuration based workflows.</li>
<li>See the <a href="https://jvns.ca/princeton-nlp/SWE-agent/blob/main/swe-agent/environment"><code>swe-agent/environment/</code></a> folder for details about the <code>SWEEnv</code> environment (interface + implementation).</li>
<li>See the <a href="https://jvns.ca/princeton-nlp/SWE-agent/blob/main/trajectories"><code>trajectories/</code></a> folder for details about the output of <code>run.py</code>.</li>
</ul>

<p dir="auto">This step is only available for issues from the SWE-bench set. To evaluate generated pull requests:</p>
<div data-snippet-clipboard-copy-content="cd evaluation/
./run_eval.sh &lt;predictions_path&gt;"><pre><code>cd evaluation/
./run_eval.sh &lt;predictions_path&gt;
</code></pre></div>
<p dir="auto">Replace <code>&lt;predictions_path&gt;</code> with the path to the model&#39;s predictions, which should be generated from the <em>Inference</em> step. The <code>&lt;predictions_path&gt;</code> arguments should look like <code>../trajectories/&lt;username&gt;/&lt;model&gt;-&lt;dataset&gt;-&lt;hyperparams&gt;/all_preds.jsonl</code></p>
<ul dir="auto">
<li>See the <a href="https://jvns.ca/princeton-nlp/SWE-agent/blob/main/evaluation"><code>evaluation/</code></a> folder for details about how evaluation works.</li>
</ul>

<ul dir="auto">
<li>If you&#39;d like to ask questions, learn about upcoming features, and participate in future development, join our <a href="https://discord.gg/AVEFbBn2rH" rel="nofollow">Discord community</a>!</li>
<li>If you&#39;d like to contribute to the codebase, we welcome <a href="https://github.com/princeton-nlp/SWE-agent/issues">issues</a> and <a href="https://github.com/princeton-nlp/SWE-agent/pulls">pull requests</a>!</li>
<li>If you&#39;d like to see a post or tutorial about some topic, please let us know via an <a href="https://github.com/princeton-nlp/SWE-agent/issues">issue</a>.</li>
</ul>

<p dir="auto">MIT. Check <code>LICENSE</code>.</p>
</article></div></div>
  </body>
</html>
