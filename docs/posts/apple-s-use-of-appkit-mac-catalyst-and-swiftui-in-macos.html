<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.timac.org/2022/0818-state-of-appkit-catalyst-swiftui-mac/">Original</a>
    <h1>Apple’s Use of AppKit, Mac Catalyst and SwiftUI in macOS</h1>
    
    <div id="readability-page-1" class="page"><div>
    <p>The WWDC 2019 had a major impact on the UI toolkit landscape: while the venerable AppKit APIs remained available, Apple removed the old Carbon APIs and introduced 2 brand new frameworks: Mac Catalyst and SwiftUI.</p>
<p>Apple sporadically mentioned some apps built with these new UI toolkits. In this article, I try to bring a better overview of Apple’s use of AppKit, Mac Catalyst and SwiftUI in the different versions of macOS, from macOS Mojave to macOS Ventura.</p>

<p>Since macOS Catalina, developers can create native UI for their Mac apps using 3 different UI technologies: AppKit, Mac Catalyst and SwiftUI. If you are not familiar with these technologies, here is a brief summary.</p>
<h2 id="appkit">AppKit</h2>
<p>AppKit is the old Cocoa toolkit, available to Mac developers since Mac OS X 10.0. It is powerful and mature but not the future of Mac development as clearly explained during the WWDC 2022 State of the Union.</p>
<p>Why did I use AppKit to develop <a href="https://apps.apple.com/app/dependencies/id1538972026">Dependencies</a>, an app to analyze dSYM files and create an interactive graph? Dependencies relies on compiler technologies with a lot of C++ code. Using Objective-C and AppKit was the simplest solution.</p>
<p><img src="https://blog.timac.org/2022/0818-state-of-appkit-catalyst-swiftui-mac/Dependencies.png" alt=""/></p>
<h2 id="mac-catalyst">Mac Catalyst</h2>
<p>Native iOS apps are using UIKit, a framework derived from AppKit. <a href="https://developer.apple.com/mac-catalyst/">Mac Catalyst</a> is the technology to port iOS app using UIKit on the Mac.</p>
<p><a href="https://apps.apple.com/app/clatters/id1480930237?mt=8&amp;uo=4">Clatters</a>, my iOS app to monitor keywords on Twitter, Reddit and HackerNews, could be a great candidate for Mac Catalyst.</p>
<p><img src="https://blog.timac.org/2022/0818-state-of-appkit-catalyst-swiftui-mac/Clatters.png" alt=""/></p>
<h2 id="swiftui">SwiftUI</h2>
<p>At the WWDC 2019, Apple not only presented Mac Catalyst but they also announced SwiftUI, a brand new UI framework to create declarative UI. SwiftUI is still young but quickly evolving and the future of iOS and Mac development. SwiftUI is the technology that we use to create our brand new apps at <a href="https://www.geteimy.com">Eimy</a>.</p>
<p><img src="https://blog.timac.org/2022/0818-state-of-appkit-catalyst-swiftui-mac/eimy.png" alt=""/></p>

<p>The methodology and tools for this article are similar to the ones I created for iOS. If you are interested by an in-depth analysis of iOS, you should check out <a href="https://blog.timac.org/2021/1219-state-of-swift-and-swiftui-ios15/">Apple’s use of Swift and SwiftUI in iOS 15</a>.</p>
<p>For this article, I created a script that:</p>
<ul>
<li>detects a Mac Catalyst app by checking if the binary links to UIKit <code>/System/iOSSupport/System/Library/Frameworks/UIKit.framework/Versions/A/UIKit</code></li>
<li>detects if an app is using SwiftUI by checking if the binary links to <code>/System/Library/Frameworks/SwiftUI.framework/Versions/A/SwiftUI</code></li>
<li>detects if an app is using AppKit by checking if the binary links to <code>/System/Library/Frameworks/AppKit.framework/Versions/C/AppKit</code></li>
<li>detects if an app is an AppKit app or a SwiftUI app by checking the symbols <code>NSApplicationMain</code> and <code>s7SwiftUI3AppPAAE4mainyyFZ</code></li>
<li>I excluded all the binaries located inside <code>/System/iOSSupport</code>, as these binaries only support Mac Catalyst and iOS apps</li>
</ul>
<p>You can download the script <a href="https://blog.timac.org/2022/0818-state-of-appkit-catalyst-swiftui-mac/detectUIFramework.sh">detectUIFramework.sh</a> here.</p>
<p>Before jumping into the details, please note:</p>
<ul>
<li>
<p>This article only focuses on binaries using native UI frameworks and directly built into macOS.</p>
</li>
<li>
<p>On macOS Big Sur and later, I also counted the frameworks located inside the dyld shared cache.</p>
</li>
<li>
<p>Finally you should take this analysis with a grain of salt. While I believe the overall picture to be accurate, my approach has some limitations due to the simple fact that I don’t have access to the macOS source code and relied on imprecise compilation artifacts.</p>
</li>
</ul>

<p>A good overview of the distribution of AppKit, Mac Catalyst and SwiftUI is visible by grouping the apps in 3 categories:</p>
<ul>
<li>Mac Catalyst apps (they might also use SwiftUI and AppKit)</li>
<li>Apps using SwiftUI (they don’t use Mac Catalyst but might use AppKit)</li>
<li>Apps only using AppKit</li>
</ul>
<p>As you can see in the graph:</p>
<ul>
<li>AppKit apps account for a huge percentage of apps</li>
<li>After a slow start, the number of apps using SwiftUI is quickly growing</li>
<li>The number of Mac Catalyst apps reached a ceiling</li>
</ul>
<p><img src="https://blog.timac.org/2022/0818-state-of-appkit-catalyst-swiftui-mac/CatalystSwiftUIAppKit.png" alt=""/></p>

<h2 id="macos-mojave-marzipan-experiment">macOS Mojave: Marzipan experiment</h2>
<p>With macOS Mojave, Apple ported 4 apps from iOS to macOS using Marzipan, the internal name of the Mac Catalyst technology:</p>
<ul>
<li>Home</li>
<li>News</li>
<li>Stocks</li>
<li>Voice Memos</li>
</ul>
<p>Marzipan was restricted to Apple’s own use and not open to third party developers. Only 4 low-risks apps were developed with this brand new technology.</p>
<h2 id="macos-catalina-mac-catalyst-and-swiftui-introduced">macOS Catalina: Mac Catalyst and SwiftUI introduced</h2>
<p>With macOS Catalina, Apple opened Mac Catalyst to third party developers while dogfooding with 3 new apps:</p>
<ul>
<li>FindMy</li>
<li>PhotoPicker from the Photos app</li>
<li>Podcasts</li>
</ul>
<p>SwiftUI was also introduced but a single app used this technology in macOS Catalina: the Contacts app, a low-risk experiment.</p>
<h2 id="macos-big-sur-not-an-experiment-anymore">macOS Big Sur: Not an experiment anymore</h2>
<p>With macOS Big Sur, several important apps adopted Mac Catalyst:</p>
<ul>
<li>Maps</li>
<li>Messages</li>
<li>Screen Time</li>
<li>Weather Widget</li>
</ul>
<p>A couple of other apps started to use SwiftUI including:</p>
<ul>
<li>Control Center</li>
<li>Dock.prefpane</li>
<li>Keychain Access</li>
<li>Game Center</li>
<li>NotificationCenter</li>
<li>PhotosUIApps (private framework)</li>
</ul>
<p>It is also worth noting that macOS Big Sur introduced redesigned widgets for Notification Center. These widgets are built with WidgetKit, a SwiftUI only framework:</p>
<ul>
<li>Calendar</li>
<li>Clock</li>
<li>Notes</li>
<li>Photos</li>
<li>Reminder</li>
</ul>
<h2 id="macos-monterey-brand-new-swiftui-apps">macOS Monterey: Brand new SwiftUI apps</h2>
<p>In macOS Monterey, only a handful of new apps were built using Mac Catalyst:</p>
<ul>
<li>Books</li>
<li>Center Stage (CinematicFramingOnboardingUI)</li>
<li>Xcode Previews</li>
</ul>
<p>What is more interesting is the list of new apps using SwiftUI. Worth noting are:</p>
<ul>
<li>Diagnostics Reporter</li>
<li>Feedback Assistant</li>
<li>HelpViewer</li>
<li>Monterey Screensaver</li>
<li>Shortcuts</li>
<li>Translation</li>
</ul>
<p>2 new prefpanes also joined the Dock.prefpane:</p>
<ul>
<li>Displays.prefPane</li>
<li>Notifications.prefPane</li>
</ul>
<p>And a couple of private frameworks started to use SwiftUI:</p>
<ul>
<li>ChartSerializationUI</li>
<li>CoreChartSwift</li>
<li>Feedback</li>
<li>FocusSettingsUI</li>
<li>MusicKitInternal</li>
<li>NotesUI</li>
<li>PreviewsInjection</li>
<li>ScreenTimeUICore</li>
<li>SleepHealthUI</li>
<li>TipsUI</li>
<li>VideosUI</li>
</ul>
<h2 id="macos-ventura-swiftui-is-the-future">macOS Ventura: SwiftUI is the future</h2>
<p>With macOS Ventura, it seems that Apple ported the remaining iOS apps to the Mac. Only 3 new apps were added:</p>
<ul>
<li>Clock</li>
<li>Continuity Camera’s onboarding (ContinuityCaptureOnboardingUI)</li>
<li>Weather</li>
</ul>
<p>On the other hand, a couple of apps were rewritten in SwiftUI:</p>
<ul>
<li>Font Book</li>
<li>System Settings</li>
<li>Tips</li>
</ul>
<p>It is also worth noting that these private frameworks are now using SwiftUI:</p>
<ul>
<li>CloudSharingUI</li>
<li>PasswordManagerUI</li>
<li>PaymentUI (Apple Pay)</li>
<li>SharedWithYou</li>
<li>ShazamKitUI</li>
</ul>

<p>In the following graph, I split the apps in 6 categories:</p>
<ul>
<li>Catalyst apps using SwiftUI</li>
<li>Catalyst apps with no SwiftUI</li>
<li>SwiftUI apps using AppKit</li>
<li>SwiftUI apps without relying on AppKit</li>
<li>AppKit apps using SwiftUI</li>
<li>AppKit apps with no SwiftUI</li>
</ul>
<p><img src="https://blog.timac.org/2022/0818-state-of-appkit-catalyst-swiftui-mac/CatalystSwiftUIAppKitDetails.png" alt=""/></p>

<p>For a deeper analysis, you can download the raw data below.</p>
<table>
<thead>
<tr>
<th>Version</th>
<th>Raw Data</th>
</tr>
</thead>
<tbody>
<tr>
<td>macOS Mojave 10.14.6</td>
<td><a href="https://blog.timac.org/2022/0818-state-of-appkit-catalyst-swiftui-mac/10.14.6.txt">10.14.6.txt</a></td>
</tr>
<tr>
<td>macOS Catalina 10.15.7</td>
<td><a href="https://blog.timac.org/2022/0818-state-of-appkit-catalyst-swiftui-mac/10.15.7.txt">10.15.7.txt</a></td>
</tr>
<tr>
<td>macOS Big Sur 11.4</td>
<td><a href="https://blog.timac.org/2022/0818-state-of-appkit-catalyst-swiftui-mac/11.4.txt">11.4.txt</a></td>
</tr>
<tr>
<td>macOS Monterey 12.4</td>
<td><a href="https://blog.timac.org/2022/0818-state-of-appkit-catalyst-swiftui-mac/12.4.txt">12.4.txt</a></td>
</tr>
<tr>
<td>macOS Ventura 13.0b3</td>
<td><a href="https://blog.timac.org/2022/0818-state-of-appkit-catalyst-swiftui-mac/13.0b3.txt">13.0b3.txt</a></td>
</tr>
</tbody>
</table>

<p>Even though we don’t have access to the macOS source code, we can measure the usage of Mac Catalyst and SwiftUI in the built-in apps.</p>
<p>As we saw, the introduction of Mac Catalyst has been carefully planned over multiple years. Apple initially used this new technology for low-risk apps before adopting it for more critical apps like Maps and Messages. 4 years after its introduction, the number of apps using Mac Catalyst seems to stagnate. Most likely Apple already ported all the existing apps to the Mac and is now using SwiftUI for its brand new apps.</p>
<p>Apple took a similar approach for SwiftUI. The first years have been an experiment on a small number of low-risk apps. The use of SwiftUI started to quickly grow with macOS Monterey. In macOS Ventura 12% of the apps are now using SwiftUI.</p>
<p>As previously mentioned, this approach has some limits and while I believe the overall picture to be accurate, I can’t guarantee that the results are perfectly exact. If you think that I missed something, please <a href="https://twitter.com/timacfr">reach out to me on Twitter</a>.</p>
<p><strong>Update 19.08.2022:</strong></p>
<p><a href="https://twitter.com/stroughtonsmith">Steve Troughton-Smith</a> pointed out that <code>/System/iOSSupport</code> is a significant chunk of macOS and as such the binaries in this folder (and the related frameworks in the dyld shared cache) shouldn’t be ignored. In the original analysis, I excluded all the binaries located inside <code>/System/iOSSupport</code>, as they only support Mac Catalyst and iOS apps.</p>
<p>Below is the updated graph if you include <code>/System/iOSSupport</code> and group the apps in 3 categories:</p>
<ul>
<li>Mac Catalyst apps (they might also use SwiftUI and AppKit)</li>
<li>Apps using SwiftUI (they don’t use Mac Catalyst but might use AppKit)</li>
<li>Apps only using AppKit</li>
</ul>
<p><img src="https://blog.timac.org/2022/0818-state-of-appkit-catalyst-swiftui-mac/CatalystSwiftUIAppKit_iOSSupport.png" alt=""/></p>
<p>And here is the corresponding graph if you split the apps in 6 categories:</p>
<ul>
<li>Catalyst apps using SwiftUI</li>
<li>Catalyst apps with no SwiftUI</li>
<li>SwiftUI apps using AppKit</li>
<li>SwiftUI apps without relying on AppKit</li>
<li>AppKit apps using SwiftUI</li>
<li>AppKit apps with no SwiftUI</li>
</ul>
<p><img src="https://blog.timac.org/2022/0818-state-of-appkit-catalyst-swiftui-mac/CatalystSwiftUIAppKitDetails_iOSSupport.png" alt=""/></p>
</div></div>
  </body>
</html>
