<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://eatrightindia.gov.in/dart/">Original</a>
    <h1>Detect Food Adulteration with Easy Home Tests</h1>
    
    <div id="readability-page-1" class="page"><div><p>This tutorial will guide you through the process of installing GnuPG (GPG), generating a secure key, and using it to encrypt and decrypt a terraform state file. All this can be done on a macOS system.</p><h4 id="installing-gpg">Installing GPG</h4><p>Let’s start with installing GPG. You can use the homebrew package manager, which simplifies the process.</p><h4 id="generating-a-key">Generating a Key</h4><p>Once you’ve installed GPG, it’s time to generate a secure key.</p><div><pre tabindex="0"><code data-lang="bash"><span><span>gpg --expert --full-generate-key
</span></span></code></pre></div><p>You’ll see a prompt asking for the kind of key you want. Choose <code>ECC (sign and encrypt)</code>.</p><div><pre tabindex="0"><code data-lang="text"><span><span>Please select what kind of key you want:
</span></span><span><span>   (1) RSA and RSA
</span></span><span><span>   (2) DSA and Elgamal
</span></span><span><span>   (3) DSA (sign only)
</span></span><span><span>   (4) RSA (sign only)
</span></span><span><span>   (7) DSA (set your own capabilities)
</span></span><span><span>   (8) RSA (set your own capabilities)
</span></span><span><span>   (9) ECC (sign and encrypt) *default*
</span></span><span><span>  (10) ECC (sign only)
</span></span><span><span>  (11) ECC (set your own capabilities)
</span></span><span><span>  (13) Existing key
</span></span><span><span>  (14) Existing key from card
</span></span><span><span>Your selection? 9
</span></span></code></pre></div><p>When asked to choose the type of elliptic curve, go for (1) Curve 25519. This provides robust security.</p><div><pre tabindex="0"><code data-lang="text"><span><span>Please select which elliptic curve you want:
</span></span><span><span>   (1) Curve 25519 *default*
</span></span><span><span>   (2) Curve 448
</span></span><span><span>   (3) NIST P-256
</span></span><span><span>   (4) NIST P-384
</span></span><span><span>   (5) NIST P-521
</span></span><span><span>   (6) Brainpool P-256
</span></span><span><span>   (7) Brainpool P-384
</span></span><span><span>   (8) Brainpool P-512
</span></span><span><span>   (9) secp256k1
</span></span><span><span>Your selection? 1
</span></span></code></pre></div><p>As for the expiry of the key, it’s common to set this to 1y (1 year). Alternatively, you can set it to never for the key to never expire. Be aware that using a key for too long without changing it can pose a security risk. It’s best to set a reminder to change your key every year.</p><div><pre tabindex="0"><code data-lang="text"><span><span>Please specify how long the key should be valid.
</span></span><span><span>         0 = key does not expire
</span></span><span><span>      &lt;n&gt;  = key expires in n days
</span></span><span><span>      &lt;n&gt;w = key expires in n weeks
</span></span><span><span>      &lt;n&gt;m = key expires in n months
</span></span><span><span>      &lt;n&gt;y = key expires in n years
</span></span><span><span>Key is valid for? (0) 1y
</span></span></code></pre></div><p>Next, you’ll confirm your selections and provide a user ID for the key. This usually includes your name, email, and an optional comment.</p><div><pre tabindex="0"><code data-lang="text"><span><span>GnuPG needs to construct a user ID to identify your key.
</span></span><span><span>
</span></span><span><span>Real name: a-user
</span></span><span><span>Email address: a-user@a-domain.local
</span></span><span><span>Comment: 
</span></span><span><span>You selected this USER-ID:
</span></span><span><span>    &#34;a-user &lt;a-user@a-domain.local&gt;&#34;
</span></span><span><span>
</span></span><span><span>Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? 
</span></span></code></pre></div><p>Lastly, you’ll enter a passphrase. This is an added layer of security for your private key. Ensure to choose a strong passphrase that you can remember.</p><p>After following these steps, your key gets stored in your GPG keyring. You can view your keys using <code>gpg --list-secret-keys</code>. The generated key is both your private and public key pair. You can export your public key and share it with others who might want to verify your signatures or encrypt messages for you.</p><p>Please note that your private key must always remain secure and never be shared.</p><h5 id="encrypting-and-decrypting-your-state-file">Encrypting and Decrypting Your State File</h5><p>With the GPG set up complete, let’s move on to encrypting and decrypting your state file. This step is essential for adding the encrypted version of the file to GitHub, you should also ensure that your repo remains private and the un-encrypted state file is never committed. I have written a little script to help with this.</p><p>And then to use this:</p><div><pre tabindex="0"><code data-lang="bash"><span><span>./crypt_state.sh -encrypt a-user@a-domain.local
</span></span><span><span>./crypt_state.sh -decrypt a-user@a-domain.local 
</span></span></code></pre></div></div></div>
  </body>
</html>
