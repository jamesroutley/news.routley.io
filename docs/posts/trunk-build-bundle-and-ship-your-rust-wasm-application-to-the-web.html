<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://trunkrs.dev/">Original</a>
    <h1>Trunk: Build, bundle and ship your Rust WASM application to the web</h1>
    
    <div id="readability-page-1" class="page"><div>
            
            <p>Overview</p>
            <p>Trunk is a WASM web application bundler for Rust. Trunk uses a simple, optional-config pattern for building &amp; bundling WASM, JS snippets &amp; other assets (images, css, scss) via a source HTML file.</p>

<h2 id="install">Install</h2>
<p>First, install Trunk via one of the following options.</p>
<h3 id="plain-cargo">Plain cargo</h3>
<p>Download the sources and build them yourself:</p>
<pre data-lang="bash"><code data-lang="bash"><span>cargo install --locked trunk
</span></code></pre>
<p>You can also toggle some features using the <code>--features</code> flag:</p>
<dl>
<dt><code>rustls</code> (default)</dt><dd>Use rustls for client and server sockets</dd>
<dt><code>native-tls</code></dt><dd>Enable the use of the system native TLS stack for client sockets, and `openssl` for server sockets</dd>
<dt><code>update_check</code> (default)</dt><dd>Enable the update check on startup</dd>
</dl>
<p><strong>NOTE:</strong> If both <code>rustls</code> and <code>native-tls</code> are enabled, <code>rustls</code> will be used. You can disable the default <code>rustls</code> using
<code>--no-default-features</code>.</p>
<h3 id="cargo-binstall">Cargo binstall</h3>
<p>You can download a released binary from GitHub releases through <a href="https://github.com/cargo-bins/cargo-binstall"><code>binstall</code></a>.</p>
<pre data-lang="bash"><code data-lang="bash"><span>cargo binstall trunk
</span></code></pre>
<h3 id="github-release-download">GitHub release download</h3>
<p>Fetch and unpack a released binary from the <a href="https://github.com/trunk-rs/trunk/releases">release page</a>.</p>
<p>For example (be sure to check for the most recent version):</p>
<pre data-lang="bash"><code data-lang="bash"><span>wget -qO- https://github.com/trunk-rs/trunk/releases/download/0.17.10/trunk-x86_64-unknown-linux-gnu.tar.gz </span><span>| </span><span>tar -xzf-
</span></code></pre>
<h3 id="nixos">NixOS</h3>
<pre data-lang="bash"><code data-lang="bash"><span>nix-env -i trunk
</span></code></pre>
<h3 id="brew">Brew</h3>
<pre data-lang="bash"><code data-lang="bash"><span>brew install trunk
</span></code></pre>

<p>Any additional tools like <code>wasm-bindgen</code> and <code>wasm-opt</code> are automatically downloaded and managed by trunk. Therefore, no further steps required ðŸŽ‰.</p>
<p><strong>Note:</strong> Until <code>wasm-bindgen</code> has pre-built binaries for Apple M1, M1 users will need to install <code>wasm-bindgen</code> manually.</p>
<pre data-lang="bash"><code data-lang="bash"><span>cargo install --locked wasm-bindgen-cli
</span></code></pre>
<h2 id="app-setup">App Setup</h2>
<p>Any <code>wasm-bindgen</code>-based framework will work with Trunk. If you&#39;re new to <a href="https://github.com/flosse/rust-web-framework-comparison#frontend-frameworks-wasm">frontend development in Rust</a>, <a href="https://yew.rs/">Yew</a> and <a href="https://leptos.dev/">Leptos</a> are two popular options.</p>
<p>The easiest way to ensure that your application launches properly is to <a href="https://doc.rust-lang.org/cargo/guide/project-layout.html">setup your app as an executable</a> with a standard <code>main</code> function:</p>
<pre data-lang="rust"><code data-lang="rust"><span>fn </span><span>main</span><span>() {
</span><span>    </span><span>// ... your app setup code here ...
</span><span>}
</span></code></pre>
<p>Trunk uses a source HTML file to drive all asset building and bundling. Trunk also uses the official <a href="https://github.com/sass/dart-sass">dart-sass</a>, so let&#39;s get started with the following example. Copy this HTML to the root of your project&#39;s repo as <code>index.html</code>:</p>
<pre data-lang="html"><code data-lang="html"><span>&lt;</span><span>html</span><span>&gt;
</span><span>  &lt;</span><span>head</span><span>&gt;
</span><span>    &lt;</span><span>link </span><span>data-trunk rel</span><span>=</span><span>&#34;scss&#34; </span><span>href</span><span>=</span><span>&#34;path/to/index.scss&#34;</span><span>/&gt;
</span><span>  &lt;/</span><span>head</span><span>&gt;
</span><span>&lt;/</span><span>html</span><span>&gt;
</span></code></pre>
<p><code>trunk build</code> will produce the following HTML at <code>dist/index.html</code>, along with the compiled scss, WASM &amp; the JS loader for the WASM:</p>
<pre data-lang="html"><code data-lang="html"><span>&lt;</span><span>html</span><span>&gt;
</span><span>  &lt;</span><span>head</span><span>&gt;
</span><span>    &lt;</span><span>link </span><span>rel</span><span>=</span><span>&#34;stylesheet&#34; </span><span>href</span><span>=</span><span>&#34;/index-c920ca43256fdcb9.css&#34;</span><span>&gt;
</span><span>    &lt;</span><span>link </span><span>rel</span><span>=</span><span>&#34;preload&#34; </span><span>href</span><span>=</span><span>&#34;/index-7eeee8fa37b7636a_bg.wasm&#34; </span><span>as</span><span>=</span><span>&#34;fetch&#34; </span><span>type</span><span>=</span><span>&#34;application/wasm&#34; </span><span>crossorigin</span><span>=</span><span>&#34;&#34;</span><span>&gt;
</span><span>    &lt;</span><span>link </span><span>rel</span><span>=</span><span>&#34;modulepreload&#34; </span><span>href</span><span>=</span><span>&#34;/index-7eeee8fa37b7636a.js&#34;</span><span>&gt;
</span><span>  &lt;/</span><span>head</span><span>&gt;
</span><span>  &lt;</span><span>body</span><span>&gt;
</span><span>    &lt;</span><span>script </span><span>type</span><span>=</span><span>&#34;module&#34;</span><span>&gt;
</span><span>      </span><span>import </span><span>init, </span><span>* </span><span>as </span><span>bindings </span><span>from </span><span>&#39;/index-7eeee8fa37b7636a.js&#39;</span><span>;
</span><span>      </span><span>window</span><span>.wasmBindings </span><span>= </span><span>bindings;
</span><span>      init(</span><span>&#39;/index-7eeee8fa37b7636a_bg.wasm&#39;</span><span>);
</span><span>    &lt;/</span><span>script</span><span>&gt;
</span><span>  &lt;/</span><span>body</span><span>&gt;
</span><span>&lt;/</span><span>html</span><span>&gt;
</span></code></pre>
<p>The contents of your <code>dist</code> dir are now ready to be served on the web.</p>

<p>That&#39;s not all! Trunk has even more useful features. Head on over to the following sections to learn more about how to use Trunk effectively.</p>
<ul>
<li><a href="https://trunkrs.dev/assets/">Assets</a>: learn about all of Trunk&#39;s supported asset types.</li>
<li><a href="https://trunkrs.dev/configuration/">Configuration</a>: learn about Trunk&#39;s configuration system and how to use the Trunk proxy.</li>
<li><a href="https://trunkrs.dev/commands/">Commands</a>: learn about Trunk&#39;s CLI commands for use in your development workflows.</li>
<li><a href="https://trunkrs.dev/advanced/">Advanced topics</a>: learn about some more advanced topics.</li>
<li>Join us on Discord by following this link <a href="https://discord.gg/JEPdBujTDr"><img src="https://img.shields.io/discord/793890238267260958?logo=discord&amp;style=flat-square" alt="" title="Discord Chat"/></a></li>
</ul>

<p>Anyone and everyone is welcome to contribute! Please review the <a href="https://github.com/trunk-rs/trunk/blob/main/CONTRIBUTING.md">CONTRIBUTING.md</a> document for more details. The best way to get started is to find an open issue, and then start hacking on implementing it. Letting other folks know that you are working on it, and sharing progress is a great approach. Open pull requests early and often, and please use GitHub&#39;s draft pull request feature.</p>

<p><span><img src="https://img.shields.io/badge/license-MIT%2FApache--2.0-blue?style=flat-square" alt="license badge"/></span>
</p>

            
        </div></div>
  </body>
</html>
