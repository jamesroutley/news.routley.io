<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/seemoo-lab/opendrop">Original</a>
    <h1>OpenDrop: An open Apple AirDrop implementation written in Python</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
          <article itemprop="text">
<p dir="auto"><a href="https://pypi.org/project/opendrop/" rel="nofollow"><img src="https://camo.githubusercontent.com/7d7cdece4e0b6e0e9ec7c9841edb47042ea81ed00716b45e369a341fa07ce7d5/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f6f70656e64726f703f636f6c6f723d253233454336353030266c6162656c3d72656c65617365" alt="Release" data-canonical-src="https://img.shields.io/pypi/v/opendrop?color=%23EC6500&amp;label=release"/></a>
<a href="https://lgtm.com/projects/g/seemoo-lab/opendrop/context:python" rel="nofollow"><img src="https://camo.githubusercontent.com/9783c4c9230ec927ba21dcc5418db6ef8ce2e7f83ddd62fd3014a7be5b031e39/68747470733a2f2f696d672e736869656c64732e696f2f6c67746d2f67726164652f707974686f6e2f6769746875622f7365656d6f6f2d6c61622f6f70656e64726f703f6c6162656c3d636f64652532307175616c697479" alt="Language grade" data-canonical-src="https://img.shields.io/lgtm/grade/python/github/seemoo-lab/opendrop?label=code%20quality"/></a></p>
<p dir="auto"><em>OpenDrop</em> is a command-line tool that allows sharing files between devices directly over Wi-Fi. Its unique feature is that it is protocol-compatible with Apple AirDrop which allows to share files with Apple devices running iOS and macOS.
<del>Currently (and probably also for the foreseeable future), OpenDrop only supports sending to Apple devices that are discoverable by <em>everybody</em> as the default <em>contacts only</em> mode requires <a href="https://www.apple.com/certificateauthority/pdf/Apple_AAI_CPS_v6.1.pdf" rel="nofollow">Apple-signed certificates</a>.</del>
We support contacts-only devices by using extracted AirDrop credentials (keys and certificates) from macOS via our <a href="https://github.com/seemoo-lab/airdrop-keychain-extractor">keychain extractor</a>.</p>
<h2 dir="auto"><a id="user-content-disclaimer" aria-hidden="true" href="#disclaimer"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Disclaimer</h2>
<p dir="auto">OpenDrop is experimental software and is the result of reverse engineering efforts by the <a href="https://owlink.org" rel="nofollow">Open Wireless Link</a> project.
Therefore, it does not support all features of AirDrop or might be incompatible with future AirDrop versions.
OpenDrop is not affiliated with or endorsed by Apple Inc. Use this code at your own risk.</p>
<h2 dir="auto"><a id="user-content-requirements" aria-hidden="true" href="#requirements"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Requirements</h2>
<p dir="auto">To achieve compatibility with Apple AirDrop, OpenDrop requires the target platform to support a specific Wi-Fi link layer.
In addition, it requires Python &gt;=3.6 as well as several libraries.</p>
<p dir="auto"><strong>Apple Wireless Direct Link.</strong>
As AirDrop exclusively runs over Apple Wireless Direct Link (AWDL), OpenDrop is only supported on macOS or on Linux systems running an open re-implementation of AWDL such as <a href="https://github.com/seemoo-lab/owl">OWL</a>.</p>
<p dir="auto"><strong>Libraries.</strong>
OpenDrop relies on a current version of <a href="https://www.libarchive.org" rel="nofollow">libarchive</a>.
macOS ships with a rather old version, so you will need to install a newer version, for example, via <a href="https://brew.sh" rel="nofollow">Homebrew</a>:</p>

<p dir="auto">OpenDrop automatically sets <code>DYLD_LIBRARY_PATH</code> to look for the Homebrew version. You may need to update the variable yourself if you install the libraries differently.</p>
<p dir="auto">Linux distributions should ship with more up-to-date versions, so this won&#39;t be necessary.</p>
<h2 dir="auto"><a id="user-content-installation" aria-hidden="true" href="#installation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Installation</h2>
<p dir="auto">Installation of the Python package <a href="https://pypi.org/project/opendrop/" rel="nofollow">release</a> is straightforward using <code>pip3</code>:</p>

<p dir="auto">You can also install the current development version by first cloning this repository, and then installing it via <code>pip3</code>:</p>
<div data-snippet-clipboard-copy-content="git clone https://github.com/seemoo-lab/opendrop.git
pip3 install ./opendrop"><pre><code>git clone https://github.com/seemoo-lab/opendrop.git
pip3 install ./opendrop
</code></pre></div>
<h2 dir="auto"><a id="user-content-usage" aria-hidden="true" href="#usage"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Usage</h2>
<p dir="auto">We briefly explain how to send and receive files using <code>opendrop</code>.
To see all command line options, run <code>opendrop -h</code>.</p>
<h3 dir="auto"><a id="user-content-sending-a-file-or-a-link" aria-hidden="true" href="#sending-a-file-or-a-link"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Sending a File or a Link</h3>
<p dir="auto">Sending a file is typically a two-step procedure. You first discover devices in proximity using the <code>find</code> command.
Stop the process once you have found the receiver.</p>
<div data-snippet-clipboard-copy-content="$ opendrop find
Looking for receivers. Press Ctrl+C to stop ...
Found  index 0  ID eccb2f2dcfe7  name John’s iPhone
Found  index 1  ID e63138ac6ba8  name Jane’s MacBook Pro"><pre><code>$ opendrop find
Looking for receivers. Press Ctrl+C to stop ...
Found  index 0  ID eccb2f2dcfe7  name John’s iPhone
Found  index 1  ID e63138ac6ba8  name Jane’s MacBook Pro
</code></pre></div>
<p dir="auto">You can then <code>send</code> a file (or link, see below) using</p>
<div data-snippet-clipboard-copy-content="$ opendrop send -r 0 -f /path/to/some/file
Asking receiver to accept ...
Receiver accepted
Uploading file ...
Uploading has been successful"><pre><code>$ opendrop send -r 0 -f /path/to/some/file
Asking receiver to accept ...
Receiver accepted
Uploading file ...
Uploading has been successful
</code></pre></div>
<p dir="auto">Instead of the <code>index</code>, you can also use <code>ID</code> or <code>name</code>.
OpenDrop will try to interpret the input in the order (1) <code>index</code>, (2) <code>ID</code>, and (3) <code>name</code> and fail if no match was found.</p>
<p dir="auto"><strong>Sending a web link.</strong> Since v0.13, OpenDrop supports sending web links, i.e., URLs, so that receiving Apple devices will immediately open their browser upon accepting.
(Note that OpenDrop <em>receivers</em> still only support receiving regular files.)</p>
<div data-snippet-clipboard-copy-content="$ opendrop send -r 0 -f https://owlink.org --url"><pre><code>$ opendrop send -r 0 -f https://owlink.org --url
</code></pre></div>
<h3 dir="auto"><a id="user-content-receiving-files" aria-hidden="true" href="#receiving-files"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Receiving Files</h3>
<p dir="auto">Receiving is much easier. Simply use the <code>receive</code> command. OpenDrop will accept all incoming files automatically and put received files in the current directory.</p>

<h2 dir="auto"><a id="user-content-current-limitationstodos" aria-hidden="true" href="#current-limitationstodos"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Current Limitations/TODOs</h2>
<p dir="auto">OpenDrop is the result of a research project and, thus, has several limitations (non-exhaustive list below). I do not have the capacity to work on them myself but am happy to provide assistance if somebody else want to take them on.</p>
<ul dir="auto">
<li>
<p dir="auto"><em>Triggering macOS/iOS receivers via Bluetooth Low Energy.</em> Apple devices start their AWDL interface and AirDrop server only after receiving a custom advertisement via Bluetooth LE (see USENIX paper for details). This means, that Apple AirDrop receivers may not be discovered even if they are discoverable by <em>everyone</em>.</p>
</li>
<li>
<p dir="auto"><em>Sender/Receiver authentication and connection state.</em> Currently, there is no peer authentication as in Apple&#39;s AirDrop, in particular, (1) OpenDrop does not verify that the TLS certificate is signed by <a href="https://blog.jonnew.com/seemoo-lab/opendrop/blob/master/opendrop/certs/apple_root_ca.pem">Apple&#39;s root</a> and (2) that the Apple ID validation record is correct (see USENIX paper for details). In addition, OpenDrop automatically accepts any file that it receives due to a missing connection state.</p>
</li>
<li>
<p dir="auto"><em>Sending multiple files.</em> Apple AirDrop supports sending multiple files at once, OpenDrop does not (would require adding more files to the archive, modify HTTP /Ask request, etc.).</p>
</li>
</ul>
<h2 dir="auto"><a id="user-content-our-papers" aria-hidden="true" href="#our-papers"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Our Papers</h2>
<ul dir="auto">
<li>Alexander Heinrich, Matthias Hollick, Thomas Schneider, Milan Stute, and Christian Weinert. <strong>PrivateDrop: Practical Privacy-Preserving Authentication for Apple AirDrop.</strong> <em>30th USENIX Security Symposium (USENIX Security ’21)</em>, August 14–16, 2019, virtual Event. <a href="https://www.usenix.org/conference/usenixsecurity21/presentation/heinrich" rel="nofollow">Paper</a> <a href="https://privatedrop.github.io" rel="nofollow">Website</a> <a href="https://github.com/seemoo-lab/privatedrop">Code</a></li>
<li>Milan Stute, Sashank Narain, Alex Mariotto, Alexander Heinrich, David Kreitschmann, Guevara Noubir, and Matthias Hollick. <strong>A Billion Open Interfaces for Eve and Mallory: MitM, DoS, and Tracking Attacks on iOS and macOS Through Apple Wireless Direct Link.</strong> <em>28th USENIX Security Symposium (USENIX Security ’19)</em>, August 14–16, 2019, Santa Clara, CA, USA. <a href="https://www.usenix.org/conference/usenixsecurity19/presentation/stute" rel="nofollow">Paper</a></li>
</ul>
<h2 dir="auto"><a id="user-content-authors" aria-hidden="true" href="#authors"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Authors</h2>
<ul dir="auto">
<li><strong>Milan Stute</strong> (<a href="mailto:mstute@seemoo.tu-darmstadt.de">email</a>, <a href="https://seemoo.de/mstute" rel="nofollow">web</a>)</li>
<li><strong>Alexander Heinrich</strong></li>
</ul>
<h2 dir="auto"><a id="user-content-license" aria-hidden="true" href="#license"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h2>
<p dir="auto">OpenDrop is licensed under the <a href="https://blog.jonnew.com/seemoo-lab/opendrop/blob/master/LICENSE"><strong>GNU General Public License v3.0</strong></a>.</p>
</article>
        </div></div>
  </body>
</html>
