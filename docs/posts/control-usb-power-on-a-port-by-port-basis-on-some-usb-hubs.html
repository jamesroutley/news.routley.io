<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/codazoda/hub-ctrl.c">Original</a>
    <h1>Control USB power on a port by port basis on some USB hubs</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto">Control USB power on a port by port basis on some USB hubs.</p>
<p dir="auto">Originally created by NIIBE Yutaka and published to Github by Joel Dare on January
31st, 2013.</p>
<p dir="auto">This only works on USB hubs that have the hardware necessary to allow
software controlled power switching. Most hubs DO NOT include the hardware.</p>

<p dir="auto">Before compiling it, you&#39;ll need to install libusb-dev (under Ubuntu). I
installed that with the following command.</p>
<div data-snippet-clipboard-copy-content="sudo apt-get install libusb-dev"><pre><code>sudo apt-get install libusb-dev
</code></pre></div>
<p dir="auto">You&#39;ll also need the GCC tool chain.</p>

<p dir="auto">To compile the hub-ctrl.c program run the following compile command.</p>
<div data-snippet-clipboard-copy-content="gcc -o hub-ctrl hub-ctrl.c -lusb"><pre><code>gcc -o hub-ctrl hub-ctrl.c -lusb
</code></pre></div>
<p dir="auto">That results in an executable binary called hub-ctrl.</p>

<p dir="auto">You can control the power on a port using the following command.</p>
<div data-snippet-clipboard-copy-content="sudo ./hub-ctrl -h 3 -P 1 -p 0"><pre><code>sudo ./hub-ctrl -h 3 -P 1 -p 0
</code></pre></div>
<p dir="auto">That says to control hub 3 (-h 3) port 1 (-P 1) and to turn the power
off (-p 0). You can also use ”-p 1” to turn the power back on.</p>
<p dir="auto">You can also specify the USB device based on the BUS and DEV numbers. Use the
following command the list the currently connected devices. It&#39;s useful to run
this with the device disconnected and then again with the device connected so
that you can tell which device is the one you are trying to target (the Targus
in my case).</p>

<p dir="auto">Now that we know the BUS and DEV numbers, we can control the power using those
numbers as well. Here&#39;s the command for that.</p>
<div data-snippet-clipboard-copy-content="sudo ./hub-ctrl -b 001 -d 005 -P 1 -p 0"><pre><code>sudo ./hub-ctrl -b 001 -d 005 -P 1 -p 0
</code></pre></div>
<p dir="auto">This time we are controlling the device on BUS 001 (-b 001) device 005 (-d 005)
port 1 (-P 1) and turning the power off (-p 0).</p>

<p dir="auto">The following is a list of Hubs that are known to have the hardware necessary
to allow power switching.</p>
<ul dir="auto">
<li>D-Link-DUB-H7-High-Speed-7-Port (Tested with old Silver versions (A3, A4 &amp; A5). Also tested with newer Black version C1 although there is one issue reporting that the C1 didn&#39;t work).</li>
<li>Elecom: U2H-G4S</li>
<li>Sanwa Supply: USB-HUB14GPH</li>
<li>Targus, Inc.: PAUH212</li>
<li>Hawking Technology: UH214</li>
<li>B+B SmartWorx (B&amp;B Electronics): UHR204</li>
<li>B+B SmartWorx (B&amp;B Electronics): USH304</li>
<li>Belkin: F5U701</li>
<li>Linksys: USB2HUB4</li>
</ul>

<p dir="auto">Copyright (C) 2006 Free Software Initiative of Japan</p>
<p dir="auto">Author: NIIBE Yutaka  </p>
<p dir="auto">This file can be distributed under the terms and conditions of the GNU General
Public License version 2 (or later).</p>
</article>
          </div></div>
  </body>
</html>
