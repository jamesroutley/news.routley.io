<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.infoq.com/news/2023/10/uber-up-cloud-microservices/">Original</a>
    <h1>Uber migrates microservices to multi-cloud platform running Kubernetes and Mesos</h1>
    
    <div id="readability-page-1" class="page"><div>
								<p>Uber moved most of its containerized microservices from µDeploy <a href="https://www.uber.com/en-GB/blog/up-portable-microservices-ready-for-the-cloud/">to a new multi-cloud platform named Up</a> in preparation for migrating a considerable portion of its compute footprint to the cloud. The company spent two years working on making its many microservices portable so that they can be migrated between different compute infrastructure and container management platforms.</p>

<p>Uber started as a monolithic application in 2014 but, with growth, transitioned to a microservice architecture. The company created <a href="https://www.uber.com/en-DK/blog/micro-deploy-code/?uclick_id=108114e5-eff8-44df-a68f-1ead4dbb5dd1">µDeploy</a> to help standardize application service deployments at scale. The move abstracted away host management and placement aspects, but service management and placement remained highly manual, meaning that service engineers still had to decide in which zone (physical data center) in a specific region the service should run.</p>

<p><a href="https://www.linkedin.com/in/mathiasschwarz/">Mathias Schwarz</a>, a senior staff engineer, and <a href="https://www.linkedin.com/in/andrewneverov/">Andrew Neverov</a>, an engineering manager at Uber, explain the reasons for Uber’s decision to detach engineering teams from the infrastructure completely:</p>

<blockquote>
<p>Operating our on-prem data centers, we experienced long lead times due to chip shortages and supply chain issues. On February 13, 2023, <a href="https://www.forbes.com/sites/danielnewman/2023/02/21/uber-goes-big-on-cloud-with-google-and-oracle-as-cloud-architecture-debate-continues/">Uber partnered with Oracle and Google</a>, aiming to diversify and decrease the company’s exposure to supply chain issues. Executing on this strategy would be impossible without having a system in place to abstract away the underlying infrastructure from thousands of Uber engineers working on hundreds of various services powering the business.</p>
</blockquote>

<p>In 2018, Uber’s platform team started working on a new multi-cloud, multi-tenant federation control plane responsible for automating service placements and infrastructure-level migrations. The new platform, named Up, was meant to become the primary tool for service engineers to interact with the infrastructure systems. It would also manage and enforce best practices to drive towards safe code rollouts.</p>

<p><img alt="" data-src="news/2023/10/uber-up-cloud-microservices/en/resources/1uber-up-1697456816830.jpeg" src="https://imgopt.infoq.com/fit-in/1200x2400/filters:quality(80)/filters:no_upscale()/news/2023/10/uber-up-cloud-microservices/en/resources/1uber-up-1697456816830.jpeg" rel="share"/></p>

<p>Up: High-Level Architecture (Source: <a href="https://www.uber.com/en-GB/blog/up-portable-microservices-ready-for-the-cloud/">Uber Engineering Blog</a>)</p>

<p>Up platform has a layered architecture with the experience layer responsible for user interactions and system housekeeping, including workload management and scaling. The platform layer provides common abstractions and the conceptual model for the experience layer components to use, and it is used to express service placement constraints based on the capabilities of host machines and compute capacity. The federation layer implements integration with compute clusters and is responsible for exercising service placements based on available capacity and defined placement constraints. The change management component delivers gradual rollout capabilities supported by health monitoring. The bottom-most layer contains the actual cluster instances, using <a href="https://github.com/uber/peloton">Peleton</a> (<a href="https://www.uber.com/en-GB/blog/open-sourcing-peloton/">Uber’s own open-source container orchestration platform</a>, built on top of <a href="https://mesos.apache.org/">Apache Mesos</a>) and <a href="https://kubernetes.io/">Kubernetes</a>.</p>

<p>In preparation for the move to the cloud, the company spent two years working towards making all stateless microservices portable so that their placement in zones and regions can be managed centrally without any involvement from the service engineers. The team used existing tooling to move services between zones in order to ensure they were portable. Firstly, they allowed services to be moved back to the original zone to resolve any portability issues, but once resolved, services would be moved periodically to validate portability and prevent regressions.</p>

<p>Once portable, microservices have been gradually and mostly automatically migrated to Up, resulting in substantial monetary savings due to autoscaling and efficiency efforts and reducing the maintenance burden on the service teams considerably. With most of Uber’s microservices platform now managed by Up, the company is free to kick off its cloud migration effort without much impact on the service teams. They also want to focus on automated continuous delivery and deployment safety.</p>

								









  
    

							</div></div>
  </body>
</html>
