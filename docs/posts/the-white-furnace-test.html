<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://lousodrome.net/blog/light/2023/10/21/the-white-furnace-test/">Original</a>
    <h1>The White Furnace Test</h1>
    
    <div id="readability-page-1" class="page"><div>
		
<p>The white furnace test is one of my favourite rendering debug tools. But before it was so, it was rather mysterious and abstract to me. Why would a publication proudly show what seemed like empty renders? What does it mean, and why would they care?</p>



<figure><img decoding="async" src="http://lousodrome.net/blog/light/files/2023/09/Conty_2017-diffuse-term-white-furnace-test-500x281.jpg" alt="Slide from the presentation Revisiting Physically Based Shading at Imageworks, in which a white furnace test of the diffuse term is shown." width="500" height="281" srcset="https://lousodrome.net/blog/light/files/2023/09/Conty_2017-diffuse-term-white-furnace-test-500x281.jpg 500w, https://lousodrome.net/blog/light/files/2023/09/Conty_2017-diffuse-term-white-furnace-test-300x168.jpg 300w, https://lousodrome.net/blog/light/files/2023/09/Conty_2017-diffuse-term-white-furnace-test-768x431.jpg 768w, https://lousodrome.net/blog/light/files/2023/09/Conty_2017-diffuse-term-white-furnace-test.jpg 1514w" sizes="(max-width: 500px) 100vw, 500px"/><figcaption>What’s up with the empty grey rectangle? The fact that looks empty <em>is</em> the point.</figcaption></figure>



<p>The idea is the following: if you have a 100% reflective object that is lit by a uniform environment, it becomes indistinguishable from the environment. It doesn’t matter if the object is matte or mirror like, or anything in between: it just “disappears”.</p>



<p>Accepting this idea took me a while, but there is a real-life situation in which you can experience this effect. Fresh snow can have an albedo as high as 90% to 98%, i.e. nearly perfect white. Associated with overcast weather or fog, it can sometimes appear featureless and become completely indistinguishable from the sky, to the point you’re left with skiing by feel because you can’t even tell the slope two steps in front of you. Everything is just a uniform white in all directions: the <a href="https://en.wikipedia.org/wiki/Whiteout_(weather)">whiteout</a>.</p>



<figure><img decoding="async" loading="lazy" width="500" height="243" src="http://lousodrome.net/blog/light/files/2023/09/real-life-white-furnace-test-500x243.jpg" alt="Photo taken on a ski track. The ground appears almost uniformly white." srcset="https://lousodrome.net/blog/light/files/2023/09/real-life-white-furnace-test-500x243.jpg 500w, https://lousodrome.net/blog/light/files/2023/09/real-life-white-furnace-test-300x146.jpg 300w, https://lousodrome.net/blog/light/files/2023/09/real-life-white-furnace-test-768x373.jpg 768w, https://lousodrome.net/blog/light/files/2023/09/real-life-white-furnace-test.jpg 1440w" sizes="(max-width: 500px) 100vw, 500px"/><figcaption>Last time I visited a white furnace test. Note how the snow surface slope and details are almost invisible, and the sign in the background seems to be floating in the air.</figcaption></figure>



<p>With the knowledge that a 100% reflective object is supposed to look invisible when uniformly lit, verifying that it does is a good sanity test for a physically based renderer, and the reason why you sometimes see those curious illustrations in publications. It’s showing that the math checks out.</p>



<p>Those tests are usually intended to verify that a BRDF is energy preserving: making sure that it is not losing or adding energy. A typical topic for example is <a href="https://google.github.io/filament/Filament.md.html#materialsystem/improvingthebrdfs/energylossinspecularreflectance">making sure materials don’t look darker as roughness increases</a> and inter-reflections become too significant to be neglected. Missing energy is not the only concern though, and a grey environment (as opposed to a white one) is convenient as any excess of reflected energy will appear brighter than it.</p>


<figure>
<figcaption>Demonstration of the white furnace test on ShaderToy, or an expensive way to render an empty image. Press the play button to see the scene revealed.</figcaption></figure>


<p>But verifying the energy conservation of a BRDF is just one of the cases where the white furnace test is useful. Since a Lambertian BRDF with an albedo of 100% is perfectly energy preserving and completely trivial to implement, the white furnace test with such a white Lambert material can be used to reveal bugs in the renderer implementation itself.</p>



<p>There are so many aspects of the implementation that can go wrong: the sampling distribution, the proper weighting of the samples, a mistake in the PDF, a pi or a 2 factor forgotten somewhere… Those errors tend to be subtle and can result in a render that still looks reasonable. Nothing looks more like a correct shading than a slightly incorrect one.</p>



<p>Take away: the white furnace test is a very useful debugging tool to validate both the integration part and the BRDF part of your rendering.<br/></p>

			</div></div>
  </body>
</html>
