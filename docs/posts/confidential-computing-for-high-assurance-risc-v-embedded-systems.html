<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/IBM/ACE-RISCV">Original</a>
    <h1>Show HN: Confidential computing for high-assurance RISC-V embedded systems</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/IBM/ACE-RISCV/actions/workflows/build.yml/badge.svg?branch=main"><img src="https://github.com/IBM/ACE-RISCV/actions/workflows/build.yml/badge.svg?branch=main" alt="Build Status"/></a></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/IBM/ACE-RISCV/blob/main/.github/ace.png"><img src="https://github.com/IBM/ACE-RISCV/raw/main/.github/ace.png" width="100" height="100"/></a></p>
<p dir="auto">ACE-RISCV is an open-source project, whose goal is to deliver a confidential computing framework with a formally proven security monitor. It is based on the <a href="https://dl.acm.org/doi/pdf/10.1145/3623652.3623668" rel="nofollow">canonical architecture</a> and targets RISC-V with the goal of being portable to other architectures. The formal verification efforts focus on the <a href="https://github.com/IBM/ACE-RISCV/blob/main/security-monitor">security monitor implementation</a>. We invite collaborators to work with us to push the boundaries of provable confidential computing technology.</p>
<p dir="auto"><strong>Formal verification:</strong>
This project implements the RISC-V CoVE spec&#39;s deployment model 3 referenced in <a href="https://github.com/riscv-non-isa/riscv-ap-tee/blob/main/">Appendix D</a>. The formal specification is embedded in the security monitor&#39;s source code and the proofs are in the <a href="https://github.com/IBM/ACE-RISCV/blob/main/verification">verification/</a> folder. Please read our <a href="https://arxiv.org/pdf/2505.12995" rel="nofollow">paper1</a> and <a href="https://dl.acm.org/doi/pdf/10.1145/3623652.3623668" rel="nofollow">paper2</a> to learn about the approach and goals.</p>
<p dir="auto"><strong>Post-Quantum Cryptography (PQC) and Attestation</strong>: ACE supports local attestation, a mechanism to authenticate confidential VMs intended for embedded systems with limited or no network connectivity. We already support PQC, specifically we use ML-KEM, SHA-384, and AES-GCM-256 cryptography.</p>

<p dir="auto">We are currently building on RISC-V 64-bit with integer (I), atomic (A) and hypervisor extentions (H), physical memory protection (PMP), memory management unit (MMU), IOPMP, core-local interrupt controller (CLINT), and supervisor timecmp extension (Sstc).</p>
<p dir="auto"><strong>RISC-V hardware to run ACE:</strong></p>
<ul dir="auto">
<li>SiFive P550 evaluation board, <a href="https://github.com/IBM/ACE-RISCV/blob/main/security-monitor/platform/p550">see instructions</a>.</li>
</ul>

<p dir="auto">Follow instructions to run one of the sample <a href="https://github.com/IBM/ACE-RISCV/blob/main/confidential-vms">confidential workloads</a> under an <a href="https://github.com/IBM/ACE-RISCV/blob/main/hypervisor">untrusted Linux KVM hypervisor</a> in an emulated RISC-V environment.</p>

<p dir="auto">Full compilation of the framework takes a long time because many tools are built from sources. Our toolchain currently includes: hypervisor kernel (<code>Linux kernel</code>), confidential guest kernel (<code>Linux kernel</code>) and firmware (<code>security monitor</code> with <code>OpenSBI firmware</code>). Make sure to build this project on a machine with at least 4 cores, 4GB RAM, and 50GB disk space for reasonable (~30min) build time.</p>

<p dir="auto">You must install build dependencies specific to the operating system you use AND install the Rust toolchain. You can also look at the <a href="https://github.com/IBM/ACE-RISCV/blob/main/.github/workflows/build.yml">reproducible build configuration</a> of the continous integration (CI) system.</p>
<p dir="auto">Dependencies for Ubuntu 22.04</p>
<div data-snippet-clipboard-copy-content="sudo apt update

# riscv-gnu-toolchain dependencies:
sudo apt -qq -y install autoconf automake autotools-dev curl python3 libmpc-dev libmpfr-dev libgmp-dev gawk build-essential bison flex texinfo gperf libtool patchutils bc zlib1g-dev libexpat-dev xz-utils

# OpenSBI
sudo apt -qq -y install clang

# Qemu 8.2
sudo apt -qq -y install git libglib2.0-dev libfdt-dev libpixman-1-dev zlib1g-dev ninja-build python3-venv libslirp-dev

# Buildroot
sudo apt -qq -y install unzip sed binutils diffutils build-essential bash patch gzip bzip2 perl tar cpio unzip rsync file bc findutils

# utilities
sudo apt install -y sshpass"><pre><code>sudo apt update

# riscv-gnu-toolchain dependencies:
sudo apt -qq -y install autoconf automake autotools-dev curl python3 libmpc-dev libmpfr-dev libgmp-dev gawk build-essential bison flex texinfo gperf libtool patchutils bc zlib1g-dev libexpat-dev xz-utils

# OpenSBI
sudo apt -qq -y install clang

# Qemu 8.2
sudo apt -qq -y install git libglib2.0-dev libfdt-dev libpixman-1-dev zlib1g-dev ninja-build python3-venv libslirp-dev

# Buildroot
sudo apt -qq -y install unzip sed binutils diffutils build-essential bash patch gzip bzip2 perl tar cpio unzip rsync file bc findutils

# utilities
sudo apt install -y sshpass
</code></pre></div>
<p dir="auto">Install the latest Rust:</p>
<div data-snippet-clipboard-copy-content="curl --proto &#39;=https&#39; --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y
source &#34;$HOME/.cargo/env&#34;
rustup default nightly
rustup target add riscv64gc-unknown-none-elf
rustup component add rustfmt
cargo install cargo-binutils

# check that the below lines are in the ~/.bashrc
. &#34;$HOME/.cargo/env&#34;"><pre><code>curl --proto &#39;=https&#39; --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y
source &#34;$HOME/.cargo/env&#34;
rustup default nightly
rustup target add riscv64gc-unknown-none-elf
rustup component add rustfmt
cargo install cargo-binutils

# check that the below lines are in the ~/.bashrc
. &#34;$HOME/.cargo/env&#34;
</code></pre></div>

<p dir="auto">Checkout this repository with submodules:</p>
<div data-snippet-clipboard-copy-content="git clone --recurse-submodules git@github.com:IBM/ACE-RISCV.git"><pre><code>git clone --recurse-submodules git@github.com:IBM/ACE-RISCV.git
</code></pre></div>


<p dir="auto">Run the following commands from the directory containing this README file.</p>
<p dir="auto">Make sure once again that all submodules are fetched:</p>
<div data-snippet-clipboard-copy-content="git submodule update --init --recursive"><pre><code>git submodule update --init --recursive
</code></pre></div>
<p dir="auto">Set up the ACE_DIR variable to point to the location where the project will build. Default is the <code>build/</code> subdirectory of the location where you will execute the <code>make</code> command.</p>
<div data-snippet-clipboard-copy-content="export ACE_DIR=/your/path/to/build/ace"><pre><code>export ACE_DIR=/your/path/to/build/ace
</code></pre></div>

<p dir="auto">The following command will build the entire framework. Set <code>-j</code> flag to the number of processor cores you have in the system. Below command assumes that you have 4 cores.</p>
<div data-snippet-clipboard-copy-content="MAKEFLAGS=&#34;--silent -j4&#34; make"><pre><code>MAKEFLAGS=&#34;--silent -j4&#34; make
</code></pre></div>
<div dir="auto"><h4 tabindex="-1" dir="auto">Build individual components</h4><a id="user-content-build-individual-components" aria-label="Permalink: Build individual components" href="#build-individual-components"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Alternativly, you can build individual components to avoid long builds that can lead to &#39;ssh disconnections&#39;, &#39;hangups&#39;, and similar issues.</p>
<p dir="auto">Install all develoment tools required to compile code for the RISC-V architecture:</p>

<p dir="auto">Build the host OS -- <a href="https://github.com/IBM/ACE-RISCV/blob/main/hypervisor">a Linux KVM hypervisor</a>:</p>

<p dir="auto">Build <a href="https://github.com/IBM/ACE-RISCV/blob/main/security-monitor/opensbi">the low level firmware</a> responsible for the boot process. This command will also build the <a href="https://github.com/IBM/ACE-RISCV/blob/main/security-monitor">security monitor (SM)</a>:</p>

<p dir="auto">Build sample <a href="https://github.com/IBM/ACE-RISCV/blob/main/confidential-vms">confidential workloads</a>:</p>

<p dir="auto">Build the RISC-V emulator and utility tools that simplify running the test environment:</p>


<p dir="auto">Make sure you have the <code>ACE_DIR</code> environmental variable set and it points to the location of your build. Check the &#39;Compilation&#39; section in case this variable is not set.</p>

<p dir="auto">To run the test environment on a RISC-V emulator run:</p>

<p dir="auto">You should see the output from the boot process and a promt to login to the hypervisor:</p>
<div data-snippet-clipboard-copy-content="# login: root, password: passwd"><pre><code># login: root, password: passwd
</code></pre></div>
<p dir="auto">To run the sample Linux OS as a confidential VM (login: root, password: passwd) execute:</p>

<p dir="auto">You should see the output indicating that local attestation suceeded:</p>
<div data-snippet-clipboard-copy-content="#ACE: Reference PCR4=Sha512=0x86774eec200ca6552cbc50211e4b32e7a4ba815c190d56b11ffabc8df1ebb6d9c41d04a64099d860b90c65729a28ded8
#ACE: Attestation succeeded, read 1 secret"><pre><code>#ACE: Reference PCR4=Sha512=0x86774eec200ca6552cbc50211e4b32e7a4ba815c190d56b11ffabc8df1ebb6d9c41d04a64099d860b90c65729a28ded8
#ACE: Attestation succeeded, read 1 secret
</code></pre></div>
<p dir="auto">You can login now to the confidential VM:</p>
<div data-snippet-clipboard-copy-content="# login: root, password: passwd"><pre><code># login: root, password: passwd
</code></pre></div>
<p dir="auto">You can read the secret from the inside of the confidential VM:</p>
<div data-snippet-clipboard-copy-content="# if the root file system has not been mounted, then execute below:
mount /dev/vda /root
cd /root/root/ace_module
insmod ace.ko"><pre><code># if the root file system has not been mounted, then execute below:
mount /dev/vda /root
cd /root/root/ace_module
insmod ace.ko
</code></pre></div>
<p dir="auto">You should see the secret:</p>
<div data-snippet-clipboard-copy-content="[  203.051959] Requesting secret from the security monitor
[  203.107150] Secret=0xc0ffee"><pre><code>[  203.051959] Requesting secret from the security monitor
[  203.107150] Secret=0xc0ffee
</code></pre></div>
<p dir="auto">Integrating local attestation with dm-crypt/LUKS is work in progress. When finished, you will be able to encrypt your rootfs and pass the decryption key via TAP.
A script in initrd will then retrieve the decryption key from TAP and decrypt the rootfs.</p>

<p dir="auto">This repository is distributed under the terms of the Apache 2.0 License, see <a href="https://github.com/IBM/ACE-RISCV/blob/main/LICENSE">LICENSE</a>.</p>
<p dir="auto"><strong>This is an active research project, without warranties of any kind.</strong></p>

<p dir="auto"><strong>Our newest full paper on ACE:</strong></p>
<div data-snippet-clipboard-copy-content="@misc{ozga2025ace,
    author = {Ozga, Wojciech and Hunt, Guerney D. H. and Le, Michael V. and Gaeher Lennard and Shinnar, Avraham and Palmer, Elaine R. and Jamjoom, Hani and Dragone, Silvio},
    title = {ACE: Confidential Computing for Embedded RISC-V Systems},
    year = 2025,
    howpublished = {\url{https://arxiv.org/pdf/2505.12995}}
}"><pre><code>@misc{ozga2025ace,
    author = {Ozga, Wojciech and Hunt, Guerney D. H. and Le, Michael V. and Gaeher Lennard and Shinnar, Avraham and Palmer, Elaine R. and Jamjoom, Hani and Dragone, Silvio},
    title = {ACE: Confidential Computing for Embedded RISC-V Systems},
    year = 2025,
    howpublished = {\url{https://arxiv.org/pdf/2505.12995}}
}
</code></pre></div>
<p dir="auto"><strong>Our workshop paper on ACE:</strong></p>
<div data-snippet-clipboard-copy-content="@inproceedings{ozga2023riscvtee,
    title={Towards a Formally Verified Security Monitor for VM-based Confidential Computing},
    author={Ozga, Wojciech and Hunt, Guerney D. H. and Le, Michael V. and Palmer, Elaine R. and Shinnar, Avraham},
    booktitle = {Proceedings of the 12th International Workshop on Hardware and Architectural Support for Security and Privacy},
    series = {HASP2023},
    year={2023}
}"><pre><code>@inproceedings{ozga2023riscvtee,
    title={Towards a Formally Verified Security Monitor for VM-based Confidential Computing},
    author={Ozga, Wojciech and Hunt, Guerney D. H. and Le, Michael V. and Palmer, Elaine R. and Shinnar, Avraham},
    booktitle = {Proceedings of the 12th International Workshop on Hardware and Architectural Support for Security and Privacy},
    series = {HASP2023},
    year={2023}
}
</code></pre></div>
<p dir="auto"><strong>Our paper on context switch validation:</strong></p>
<div data-snippet-clipboard-copy-content="@misc{kalani2025sailor,
    author = {Kalani, Neelu and Bourgeat, Thomas and Hunt, Guerney D.H. and Ozga, Wojciech},
    title = {Save what must be saved: Secure context switching with Sailor},
    year = 2025,
    howpublished = {\url{https://arxiv.org/pdf/2502.06609}}
}"><pre><code>@misc{kalani2025sailor,
    author = {Kalani, Neelu and Bourgeat, Thomas and Hunt, Guerney D.H. and Ozga, Wojciech},
    title = {Save what must be saved: Secure context switching with Sailor},
    year = 2025,
    howpublished = {\url{https://arxiv.org/pdf/2502.06609}}
}
</code></pre></div>
</article></div></div>
  </body>
</html>
