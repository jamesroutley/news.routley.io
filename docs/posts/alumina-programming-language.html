<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/tibordp/alumina">Original</a>
    <h1>Show HN: Alumina Programming Language</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto">Alumina is an imperative, general-purpose, statically typed, compiled system programming language.</p>
<p dir="auto">Non-exhaustive list of distinguishing features:</p>
<ul dir="auto">
<li>Module system and 2-pass compilation (no header files and forward declarations needed)</li>
<li>Generics, protocols and mixins (duck-typed, similar to C++ templates but without overloading/SFINAE)
<ul dir="auto">
<li>Specialization is possible with <a href="https://github.com/tibordp/alumina/blob/master/examples/when_expression.alu"><code>when</code> expressions</a></li>
<li>Opt-in dynamic polymorphism with dynamic dispatch (<a href="https://github.com/tibordp/alumina/blob/master/examples/dyn.alu"><code>dyn</code> pointers</a>)</li>
</ul>
</li>
<li><a href="https://en.wikipedia.org/wiki/Uniform_Function_Call_Syntax" rel="nofollow">Unified call syntax</a> for functions in scope</li>
<li>Limited operator overloading (via <code>Equatable</code> and <code>Comparable</code> protocols)</li>
<li>Block expressions</li>
<li>Anonymous functions (including closures)</li>
<li>Richer type system:
<ul dir="auto">
<li>strong enums,</li>
<li>array slices,</li>
<li>tuples,</li>
<li>first-class 0-sized types (unit/void, function types, 0-sized arrays, structs with no fields, ...),</li>
<li>never type</li>
</ul>
</li>
<li>Hygenic expression macros</li>
<li>Go-style <a href="https://github.com/tibordp/alumina/blob/master/examples/defer_and_move.alu">defer expressions</a></li>
</ul>
<p dir="auto">Alumina is heavily inspired by Rust, especially in terms of syntax and standard library API. Unlike Rust, however, Alumina is not memory-safe and it requires manual memory management.</p>

<ul dir="auto">
<li><a href="https://github.com/tibordp/alumina/blob/master/docs/lang_guide.md">Language guide</a></li>
<li><a href="https://docs.alumina-lang.net" rel="nofollow">Library documentation</a></li>
<li><a href="https://play.alumina-lang.net" rel="nofollow">Online compiler playground</a></li>
</ul>


<div dir="auto" data-snippet-clipboard-copy-content="struct Stack&lt;T&gt; {
   data: &amp;mut [T],
   len: usize,
}

impl Stack&lt;T&gt; {
   use std::mem::slice;

   fn new() -&gt; Stack&lt;T&gt; {
      with_capacity(0)
   }

   fn with_capacity(capacity: usize) -&gt; Stack&lt;T&gt; {
      Stack {
         data: slice::alloc(capacity),
         len: 0,
      }
   }

   fn reserve(self: &amp;mut Stack&lt;T&gt;, additional: usize) {
      use std::cmp::max;

      if self.len + additional &gt; self.data.len() {
         self.data = self.data.realloc(max(
            self.data.len() * 2,
            self.len + additional
         ));
      }
   }

   fn push(self: &amp;mut Stack&lt;T&gt;, value: T) {
      self.reserve(1);
      self.data[self.len] = value;
      self.len += 1;
   }

   fn pop(self: &amp;mut Stack&lt;T&gt;) -&gt; T {
      self.len -= 1;
      self.data[self.len]
   }

   fn is_empty(self: &amp;Stack&lt;T&gt;) -&gt; bool {
      self.len == 0
   }

   fn free(self: &amp;mut Stack&lt;T&gt;) {
      self.data.free();
   }
}

fn main() {
   let v: Stack&lt;&amp;[u8]&gt; = Stack::new();
   defer v.free();

   v.push(&#34;Stack.\n&#34;);
   v.push(&#34;a &#34;);
   v.push(&#34;am &#34;);
   v.push(&#34;I &#34;);

   while !v.is_empty() {
       print!(&#34;{}&#34;, v.pop());
   }
}"><pre><span>struct</span> <span>Stack</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
   <span>data</span><span>:</span> <span>&amp;</span><span>mut</span> <span>[</span><span>T</span><span>]</span><span>,</span>
   <span>len</span><span>:</span> <span>usize</span><span>,</span>
<span>}</span>

<span>impl</span> <span>Stack</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
   <span>use</span> std<span>::</span>mem<span>::</span>slice<span>;</span>

   <span>fn</span> <span>new</span><span>(</span><span>)</span> -&gt; <span>Stack</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
      <span>with_capacity</span><span>(</span><span>0</span><span>)</span>
   <span>}</span>

   <span>fn</span> <span>with_capacity</span><span>(</span><span>capacity</span><span>:</span> <span>usize</span><span>)</span> -&gt; <span>Stack</span><span>&lt;</span><span>T</span><span>&gt;</span> <span>{</span>
      <span>Stack</span> <span>{</span>
         <span>data</span><span>:</span> slice<span>::</span><span>alloc</span><span>(</span>capacity<span>)</span><span>,</span>
         <span>len</span><span>:</span> <span>0</span><span>,</span>
      <span>}</span>
   <span>}</span>

   <span>fn</span> <span>reserve</span><span>(</span><span>self</span><span>:</span> <span>&amp;</span><span>mut</span> <span>Stack</span><span>&lt;</span><span>T</span><span>&gt;</span><span>,</span> <span>additional</span><span>:</span> <span>usize</span><span>)</span> <span>{</span>
      <span>use</span> std<span>::</span>cmp<span>::</span>max<span>;</span>

      <span>if</span> <span>self</span><span>.</span><span>len</span> + additional &gt; <span>self</span><span>.</span><span>data</span><span>.</span><span>len</span><span>(</span><span>)</span> <span>{</span>
         <span>self</span><span>.</span><span>data</span> = <span>self</span><span>.</span><span>data</span><span>.</span><span>realloc</span><span>(</span><span>max</span><span>(</span>
            <span>self</span><span>.</span><span>data</span><span>.</span><span>len</span><span>(</span><span>)</span> <span>*</span> <span>2</span><span>,</span>
            <span>self</span><span>.</span><span>len</span> + additional
         <span>)</span><span>)</span><span>;</span>
      <span>}</span>
   <span>}</span>

   <span>fn</span> <span>push</span><span>(</span><span>self</span><span>:</span> <span>&amp;</span><span>mut</span> <span>Stack</span><span>&lt;</span><span>T</span><span>&gt;</span><span>,</span> <span>value</span><span>:</span> <span>T</span><span>)</span> <span>{</span>
      <span>self</span><span>.</span><span>reserve</span><span>(</span><span>1</span><span>)</span><span>;</span>
      <span>self</span><span>.</span><span>data</span><span>[</span><span>self</span><span>.</span><span>len</span><span>]</span> = value<span>;</span>
      <span>self</span><span>.</span><span>len</span> += <span>1</span><span>;</span>
   <span>}</span>

   <span>fn</span> <span>pop</span><span>(</span><span>self</span><span>:</span> <span>&amp;</span><span>mut</span> <span>Stack</span><span>&lt;</span><span>T</span><span>&gt;</span><span>)</span> -&gt; <span>T</span> <span>{</span>
      <span>self</span><span>.</span><span>len</span> -= <span>1</span><span>;</span>
      <span>self</span><span>.</span><span>data</span><span>[</span><span>self</span><span>.</span><span>len</span><span>]</span>
   <span>}</span>

   <span>fn</span> <span>is_empty</span><span>(</span><span>self</span><span>:</span> <span>&amp;</span><span>Stack</span><span>&lt;</span><span>T</span><span>&gt;</span><span>)</span> -&gt; <span>bool</span> <span>{</span>
      <span>self</span><span>.</span><span>len</span> == <span>0</span>
   <span>}</span>

   <span>fn</span> <span>free</span><span>(</span><span>self</span><span>:</span> <span>&amp;</span><span>mut</span> <span>Stack</span><span>&lt;</span><span>T</span><span>&gt;</span><span>)</span> <span>{</span>
      <span>self</span><span>.</span><span>data</span><span>.</span><span>free</span><span>(</span><span>)</span><span>;</span>
   <span>}</span>
<span>}</span>

<span>fn</span> <span>main</span><span>(</span><span>)</span> <span>{</span>
   <span>let</span> v<span>:</span> <span>Stack</span><span>&lt;</span><span>&amp;</span><span>[</span><span>u8</span><span>]</span><span>&gt;</span> = <span>Stack</span><span>::</span><span>new</span><span>(</span><span>)</span><span>;</span>
   defer v<span>.</span><span>free</span><span>(</span><span>)</span><span>;</span>

   v<span>.</span><span>push</span><span>(</span><span>&#34;Stack.<span>\n</span>&#34;</span><span>)</span><span>;</span>
   v<span>.</span><span>push</span><span>(</span><span>&#34;a &#34;</span><span>)</span><span>;</span>
   v<span>.</span><span>push</span><span>(</span><span>&#34;am &#34;</span><span>)</span><span>;</span>
   v<span>.</span><span>push</span><span>(</span><span>&#34;I &#34;</span><span>)</span><span>;</span>

   <span>while</span> !v<span>.</span><span>is_empty</span><span>(</span><span>)</span> <span>{</span>
       <span>print</span><span>!</span><span>(</span><span>&#34;{}&#34;</span>, v.pop<span>(</span><span>)</span><span>)</span><span>;</span>
   <span>}</span>
<span>}</span></pre></div>

<p dir="auto">Bootstrap Alumina compiler (<a href="https://github.com/tibordp/alumina/blob/master/src/alumina-boot"><code>alumina-boot</code></a>) is written in Rust and is actively developed. It compiles to ugly C11 code with GCC extensions (works on Clang too).</p>
<p dir="auto">Finished:</p>
<ul dir="auto">
<li>Lexical analysis and parser (using Tree-Sitter)</li>
<li>Scope/name resolution</li>
<li>Type support</li>
<li>Lowering parse tree into AST (desugaring, macro expansion, ...)</li>
<li>Lowering AST into IR (with monomorphization, type checking and semantic analysis)</li>
<li>Basic optimizations (ZST elision, dead code elimination)</li>
<li>Codegen to C11</li>
<li>A full-featured <a href="https://docs.alumina-lang.net/std" rel="nofollow">standard library</a>
<ul dir="auto">
<li><a href="https://docs.alumina-lang.net/std/collections" rel="nofollow">heap-allocating collections</a> (vector, hashmap, hashset, deque)</li>
<li><a href="https://docs.alumina-lang.net/std/iter" rel="nofollow">iterator combinators</a></li>
<li><a href="https://docs.alumina-lang.net/std/string" rel="nofollow">string functions and formatting</a></li>
<li><a href="https://docs.alumina-lang.net/std/process" rel="nofollow">spawning processes</a></li>
<li><a href="https://docs.alumina-lang.net/std/io" rel="nofollow">standard, file and pipe I/O</a></li>
<li><a href="https://docs.alumina-lang.net/std/thread" rel="nofollow">multithreading</a></li>
<li><a href="https://docs.alumina-lang.net/std/sync" rel="nofollow">synchronization primitives and atomics</a></li>
<li><a href="https://docs.alumina-lang.net/std/fs" rel="nofollow">basic filesystem operations</a></li>
<li><a href="https://docs.alumina-lang.net/std/net" rel="nofollow">TCP/IP sockets</a></li>
<li><a href="https://docs.alumina-lang.net/std/random" rel="nofollow">random number generation</a></li>
<li><a href="https://docs.alumina-lang.net/test" rel="nofollow">unit testing framework</a></li>
</ul>
</li>
</ul>
<p dir="auto">To be done:</p>
<ul dir="auto">
<li>Standard library is only usable on Unixes (tested on Linux, macOS and Android)</li>
<li>Compiler driver (something like Rust&#39;s <code>cargo</code>)</li>
<li>A good story for third-party libraries (something like <code>crates.io</code> maybe?)</li>
<li>Various rough edges and missing features</li>
</ul>
<p dir="auto">A self-hosted compiler (<a href="https://github.com/tibordp/alumina/blob/master/src/aluminac"><code>aluminac</code></a>) is also being written. It is in very early stages (is only able to parse source at the moment). It will eventually have a LLVM backend.</p>
<p dir="auto">Full list of missing features, open questions, bugs and ideas for the future is in <a href="https://github.com/tibordp/alumina/blob/master/MISSING.md">MISSING.md</a></p>

<p dir="auto">Don&#39;t want to install anything? Try <a href="https://play.alumina-lang.net" rel="nofollow">https://play.alumina-lang.net</a>, an online compiler playground.</p>
<p dir="auto">You can do it with Podman/Docker:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# With Podman
alias alumina-boot=&#39;podman run -v $(pwd):/workspace ghcr.io/tibordp/alumina-boot:latest&#39;
# With Docker
alias alumina-boot=&#39;docker run -u $(id -u ${USER}):$(id -g ${USER}) -v $(pwd):/workspace ghcr.io/tibordp/alumina-boot:latest&#39;

alumina-boot hello_world=./examples/hello_world.alu -o hello.c
cc hello.c -o hello
./hello"><pre><span><span>#</span> With Podman</span>
<span>alias</span> alumina-boot=<span><span>&#39;</span>podman run -v $(pwd):/workspace ghcr.io/tibordp/alumina-boot:latest<span>&#39;</span></span>
<span><span>#</span> With Docker</span>
<span>alias</span> alumina-boot=<span><span>&#39;</span>docker run -u $(id -u ${USER}):$(id -g ${USER}) -v $(pwd):/workspace ghcr.io/tibordp/alumina-boot:latest<span>&#39;</span></span>

alumina-boot hello_world=./examples/hello_world.alu -o hello.c
cc hello.c -o hello
./hello</pre></div>
<p dir="auto">Otherwise, follow the instructions to build it from source.</p>
<h2 dir="auto"><a id="user-content-prerequisites" aria-hidden="true" href="#prerequisites"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Prerequisites</h2>
<p dir="auto">To compile <code>alumina-boot</code> compiler from source, these prerequisites are needed:</p>
<ul dir="auto">
<li>A C compiler (GCC or Clang) and Make</li>
<li>A Rust toolchain (<code>rustup install stable</code>)</li>
<li>Node.js and Tree-sitter CLI (<code>npm install -g tree-sitter-cli</code> or <code>cargo install tree-sitter-cli</code>)</li>
</ul>
<p dir="auto">Additionally, to compile <code>aluminac</code>, these prerequisites are needed:</p>
<ul dir="auto">
<li>LLVM 13 shared libraries and headers (<code>llvm-13-dev</code>)</li>
<li>Tree-sitter runtime library (<code>libtree-sitter.a</code>/<code>libtree-sitter.so</code>):</li>
</ul>
<div dir="auto" data-snippet-clipboard-copy-content="git clone https://github.com/tree-sitter/tree-sitter
cd tree-sitter
make
sudo make install
# sudo ldconfig"><pre>git clone https://github.com/tree-sitter/tree-sitter
<span>cd</span> tree-sitter
make
sudo make install
<span><span>#</span> sudo ldconfig</span></pre></div>
<h2 dir="auto"><a id="user-content-building" aria-hidden="true" href="#building"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Building</h2>
<p dir="auto">To compile <code>alumina-boot</code> compiler from source, run:</p>

<p dir="auto">Now you are able to compile Alumina code, e.g.</p>
<div data-snippet-clipboard-copy-content="./alumina-boot --sysroot ./sysroot hello_world=./examples/hello_world.alu -o hello_world.c
cc hello_world.c -o hello_world
./hello_world"><pre><code>./alumina-boot --sysroot ./sysroot hello_world=./examples/hello_world.alu -o hello_world.c
cc hello_world.c -o hello_world
./hello_world
</code></pre></div>
<p dir="auto">If you wish to run the tests, simply add <code>--cfg test</code>. In this case the <code>main()</code> function will be replaced by the test runner.</p>
<div data-snippet-clipboard-copy-content="./alumina-boot --sysroot ./sysroot hello_world=./examples/hello_world.alu -o hello_world_test.c
cc hello_world_test.c -o hello_world_test
./hello_world_test"><pre><code>./alumina-boot --sysroot ./sysroot hello_world=./examples/hello_world.alu -o hello_world_test.c
cc hello_world_test.c -o hello_world_test
./hello_world_test
</code></pre></div>
<p dir="auto">If you wish to compile with multithreading enabled, add <code>--cfg threading</code> and link with <code>libpthread</code>.</p>
<div data-snippet-clipboard-copy-content="./alumina-boot --cfg threading --sysroot ./sysroot hello_world=./examples/threading.alu -o threading.c
cc threading.c -o threading -lpthread
./threading"><pre><code>./alumina-boot --cfg threading --sysroot ./sysroot hello_world=./examples/threading.alu -o threading.c
cc threading.c -o threading -lpthread
./threading
</code></pre></div>
<p dir="auto">To compile the self-hosted compiler, run:</p>

<p dir="auto">See the <a href="https://github.com/tibordp/alumina/blob/master/docs/lang_guide.md">language guide</a>, assorted <a href="https://github.com/tibordp/alumina/blob/master/examples">examples</a>, <a href="https://github.com/tibordp/alumina/blob/master/sysroot">standard library</a> and the <a href="https://github.com/tibordp/alumina/blob/master/src/aluminac">self-hosted compiler</a> for a tour of the language.</p>

<p dir="auto">Issues, pull requests, and feature requests are most welcome. Standard library is covered with tests, and there are also documentation tests (all examples from the standard library are compiled and executed as test cases).</p>
<p dir="auto">To run the standard library tests</p>

<p dir="auto">To run the documentation tests</p>

<p dir="auto">Standard library contributions are especially welcome! Ideas for contribution:</p>
<ul dir="auto">
<li>Native floating point parsing and formatting (e.g. port Grisu3 to Alumina)</li>
<li>Better / more performant algorithms and collections (sorting, HashMap, ...)</li>
<li>Port the standard library to other platforms (e.g. Windows) or libc implementations (on Linux only glibc is supported, musl would be very nice to have)</li>
<li>Unix domain socket support</li>
<li>More test cases and documentation / example code for existing functionality</li>
</ul>
<h2 dir="auto"><a id="user-content-projects-using-alumina" aria-hidden="true" href="#projects-using-alumina"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Projects using Alumina</h2>
<p dir="auto">Needless to say, a great way to contribute to the project is to just use Alumina for your own programs and libraries. Submit a PR and add your project to the list:</p>
<ul dir="auto">
<li><a href="http://github.com/tibordp/timestamped">timestamped</a> - A utility to record and replay the ouptut of a program with timestamps.</li>
</ul>
</article>
          </div></div>
  </body>
</html>
