<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/neiltron/apple-health-mcp">Original</a>
    <h1>Show HN: Apple Health MCP Server</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a href="https://badge.fury.io/js/@neiltron%2Fapple-health-mcp" rel="nofollow"><img src="https://camo.githubusercontent.com/7174ab740f4c5649e96e7882f0c038cad1741fd765dcc678cd373a33331c07d3/68747470733a2f2f62616467652e667572792e696f2f6a732f406e65696c74726f6e2532466170706c652d6865616c74682d6d63702e737667" alt="npm version" data-canonical-src="https://badge.fury.io/js/@neiltron%2Fapple-health-mcp.svg"/></a>
<a href="https://opensource.org/licenses/MIT" rel="nofollow"><img src="https://camo.githubusercontent.com/6cd0120cc4c5ac11d28b2c60f76033b52db98dac641de3b2644bb054b449d60c/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d4d49542d79656c6c6f772e737667" alt="License: MIT" data-canonical-src="https://img.shields.io/badge/License-MIT-yellow.svg"/></a></p>
<p dir="auto">An MCP (Model Context Protocol) server for querying Apple Health data using SQL. Built with DuckDB for fast, efficient health data analysis.</p>
<div dir="auto"><p dir="auto"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p dir="auto">This project currently relies on the <a href="https://apps.apple.com/us/app/simple-health-export-csv/id1535380115?itsct=apps_box_badge&amp;itscg=30200" rel="nofollow">Simple Health Export CSV</a> app by <a href="https://www.ericwolter.com" rel="nofollow">Eric Wolter</a>. See <a href="#exporting-data">Exporting Data</a> below for more info on how best to use the app.</p>
<p dir="auto">This is currently the easiest way I could find to quickly and reliably get Apple Health data exported in CSV format. If you have ideas of better ways to import data, please submit an issue.</p>
</div>

<ul dir="auto">
<li><strong>Natural language querying</strong>: Your MCP client translates your questions to database queries</li>
<li><strong>SQL Query Execution</strong>: Direct SQL queries against your Apple Health data</li>
<li><strong>Automated Reports</strong>: Generate weekly/monthly health summaries</li>
<li><strong>Efficient Data Loading</strong>: Lazy loading with configurable time windows</li>
<li><strong>Smart Caching</strong>: Query result caching with TTL</li>
</ul>

<p dir="auto">No installation required! Use directly with npx via Claude Desktop or other MCP clients.</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Usage with Claude Desktop</h2><a id="user-content-usage-with-claude-desktop" aria-label="Permalink: Usage with Claude Desktop" href="#usage-with-claude-desktop"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Add to your Claude Desktop configuration (<code>~/Library/Application Support/Claude/claude_desktop_config.json</code>):</p>
<div dir="auto" data-snippet-clipboard-copy-content="{
  &#34;mcpServers&#34;: {
    &#34;apple-health&#34;: {
      &#34;command&#34;: &#34;npx&#34;,
      &#34;args&#34;: [&#34;@neiltron/apple-health-mcp&#34;],
      &#34;env&#34;: {
        &#34;HEALTH_DATA_DIR&#34;: &#34;/path/to/your/health/export&#34;
      }
    }
  }
}"><pre>{
  <span>&#34;mcpServers&#34;</span>: {
    <span>&#34;apple-health&#34;</span>: {
      <span>&#34;command&#34;</span>: <span><span>&#34;</span>npx<span>&#34;</span></span>,
      <span>&#34;args&#34;</span>: [<span><span>&#34;</span>@neiltron/apple-health-mcp<span>&#34;</span></span>],
      <span>&#34;env&#34;</span>: {
        <span>&#34;HEALTH_DATA_DIR&#34;</span>: <span><span>&#34;</span>/path/to/your/health/export<span>&#34;</span></span>
      }
    }
  }
}</pre></div>

<ul dir="auto">
<li><code>HEALTH_DATA_DIR</code> (required): Path to your Apple Health CSV export directory</li>
<li><code>MAX_MEMORY_MB</code> (optional): Maximum memory usage in MB (default: 1024)</li>
<li><code>CACHE_SIZE</code> (optional): Number of cached query results (default: 100)</li>
</ul>

<div dir="auto" data-snippet-clipboard-copy-content="{
  &#34;mcpServers&#34;: {
    &#34;apple-health&#34;: {
      &#34;command&#34;: &#34;npx&#34;,
      &#34;args&#34;: [&#34;@neiltron/apple-health-mcp&#34;],
      &#34;env&#34;: {
        &#34;HEALTH_DATA_DIR&#34;: &#34;/Users/yourname/Downloads/HealthAll_2025-07-202_01-04-39_SimpleHealthExportCSV&#34;,
        &#34;MAX_MEMORY_MB&#34;: &#34;2048&#34;
      }
    }
  }
}"><pre>{
  <span>&#34;mcpServers&#34;</span>: {
    <span>&#34;apple-health&#34;</span>: {
      <span>&#34;command&#34;</span>: <span><span>&#34;</span>npx<span>&#34;</span></span>,
      <span>&#34;args&#34;</span>: [<span><span>&#34;</span>@neiltron/apple-health-mcp<span>&#34;</span></span>],
      <span>&#34;env&#34;</span>: {
        <span>&#34;HEALTH_DATA_DIR&#34;</span>: <span><span>&#34;</span>/Users/yourname/Downloads/HealthAll_2025-07-202_01-04-39_SimpleHealthExportCSV<span>&#34;</span></span>,
        <span>&#34;MAX_MEMORY_MB&#34;</span>: <span><span>&#34;</span>2048<span>&#34;</span></span>
      }
    }
  }
}</pre></div>

<p dir="auto">To use get your data:</p>
<ul dir="auto">
<li>Download the <a href="https://apps.apple.com/us/app/simple-health-export-csv/id1535380115?itsct=apps_box_badge&amp;itscg=30200" rel="nofollow">Simple Health Export CSV</a> app for iOS.</li>
<li>Tap the <code>All</code> button in the app to download all data for your desired time range (default 1 month).</li>
<li>When prompted, Airdrop it to your computer or transfer it some other way.</li>
<li>Unzip the file to your desired location</li>
<li>Set the <code>HEALTH_DATA_DIR</code> value in your MCP config. See <a href="#example-configuration">Example Configuration</a> above.</li>
</ul>

<ol dir="auto">
<li><code>health_schema</code>: Get information about available tables and their structure</li>
<li><code>health_query</code>: Execute SQL queries directly on your health data</li>
<li><code>health_report</code>: Generate comprehensive health reports</li>
</ol>

<p dir="auto">The server expects Apple Health data exported as CSV files with the following naming pattern:</p>
<ul dir="auto">
<li><code>HKQuantityTypeIdentifier*.csv</code> - Quantitative health metrics</li>
<li><code>HKCategoryTypeIdentifier*.csv</code> - Categorical health data</li>
<li><code>HKWorkoutActivityType*.csv</code> - Workout and activity data</li>
</ul>
<p dir="auto">Each CSV file should have these columns:</p>
<ul dir="auto">
<li><code>type</code>: The specific health metric type</li>
<li><code>sourceName</code>: Source device/app</li>
<li><code>startDate</code>: Start timestamp (UTC)</li>
<li><code>endDate</code>: End timestamp (UTC)</li>
<li><code>value</code>: The measurement value</li>
<li><code>unit</code>: Unit of measurement</li>
</ul>

<p dir="auto">For local development:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Clone and install dependencies
git clone https://github.com/neiltron/apple-health-mcp.git
cd apple-health-mcp
npm install

# Build the project
npm run build

# Type checking
npm run typecheck"><pre><span><span>#</span> Clone and install dependencies</span>
git clone https://github.com/neiltron/apple-health-mcp.git
<span>cd</span> apple-health-mcp
npm install

<span><span>#</span> Build the project</span>
npm run build

<span><span>#</span> Type checking</span>
npm run typecheck</pre></div>


<ol dir="auto">
<li><strong>&#34;No data found&#34;</strong>: Check that your CSV files are in the correct directory</li>
<li><strong>Memory errors</strong>: Reduce <code>MAX_MEMORY_MB</code> or use shorter time windows</li>
<li><strong>Slow queries</strong>: Ensure you&#39;re filtering by date ranges</li>
<li><strong>Missing tables</strong>: Table names are lowercase (e.g., <code>hkquantitytypeidentifierheartrate</code>)</li>
</ol>

<p dir="auto">Contributions are welcome! Please ensure:</p>
<ul dir="auto">
<li>Code follows existing patterns</li>
<li>TypeScript types are properly defined</li>
<li>Error handling is comprehensive</li>
<li>Performance impact is considered</li>
</ul>

<p dir="auto">MIT</p>
</article></div></div>
  </body>
</html>
