<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://simonwillison.net/2024/Oct/17/video-scraping/">Original</a>
    <h1>Video scraping: extracting JSON from a 35s screen capture for 1/10th of a cent</h1>
    
    <div id="readability-page-1" class="page"><div>


<div data-permalink-context="/2024/Oct/17/video-scraping/">

<p>17th October 2024</p>



<p>The other day I found myself needing to add up some numeric values that were scattered across twelve different emails.</p>
<p>I didn’t particularly feel like copying and pasting all of the numbers out one at a time, so I decided to try something different: could I record a screen capture while browsing around my Gmail account and then extract the numbers from that video using Google Gemini?</p>
<p>This turned out to work <em>incredibly</em> well.</p>
<h4 id="ai-studio-and-quicktime">AI Studio and QuickTime</h4>
<p>I recorded the video using QuickTime Player on my Mac: <code>File -&gt; New Screen Recording</code>. I dragged a box around a portion of my screen containing my Gmail account, then clicked on each of the emails in turn, pausing for a couple of seconds on each one.</p>
<p>I uploaded the resulting file directly into Google’s <a href="https://aistudio.google.com/">AI Studio</a> tool and prompted the following:</p>
<blockquote>
<p><code>Turn this into a JSON array where each item has a yyyy-mm-dd date and a floating point dollar amount for that date</code></p>
</blockquote>
<p>... and it worked. It spat out a JSON array like this:</p>
<div><pre>[
  {
    <span>&#34;date&#34;</span>: <span><span>&#34;</span>2023-01-01<span>&#34;</span></span>,
    <span>&#34;amount&#34;</span>: <span>2...</span>
  },
  <span>...</span>
]</pre></div>
<p><img src="https://static.simonwillison.net/static/2024/video-scraping.jpg" alt="Screenshot of the Google AI Studio interface - I used Gemini 1.5 Flash 0002, a 35 second screen recording video (which was 10,326 tokens) and the token count says 11,018/1,000,000 - the screenshot redacts some details but you can see the start of the JSON output with date and amount keys in a list"/></p>
<p>I wanted to paste that into Numbers, so I followed up with:</p>
<blockquote>
<p><code>turn that into copy-pastable csv</code></p>
</blockquote>
<p>Which gave me back the same data formatted as CSV.</p>
<p>You should never trust these things not to make mistakes, so I re-watched the 35 second video and manually checked the numbers. It got everything right.</p>
<p>I had intended to use Gemini 1.5 Pro, aka Google’s best model... but it turns out I forgot to select the model and I’d actually run the entire process using the much less expensive Gemini 1.5 Flash 002.</p>
<h4 id="how-much-did-it-cost">How much did it cost?</h4>

<p>According to AI Studio I used 11,018 tokens, of which 10,326 were for the video.</p>
<p>Gemini 1.5 Flash <a href="https://ai.google.dev/pricing#1_5flash">charges</a> $0.075/1 million tokens (the price <a href="https://developers.googleblog.com/en/gemini-15-flash-updates-google-ai-studio-gemini-api/">dropped in August</a>).</p>
<pre><code>11018/1000000 = 0.011018
0.011018 * $0.075 = $0.00082635
</code></pre>
<p>So this entire exercise should have cost me just under 1/10th of a cent!</p>
<p><em>And in fact, it was <strong>free</strong>. Google AI Studio <a href="https://ai.google.dev/gemini-api/docs/billing#is-AI-Studio-free">currently</a> “remains free of charge regardless of if you set up billing across all supported regions”. I believe that means they <a href="https://simonwillison.net/2024/Oct/17/gemini-terms-of-service/">can train on your data</a> though, which is not the case for their paid APIs.</em></p>
<h4 id="the-alternatives-aren-t-actually-that-great">The alternatives aren’t actually that great</h4>
<p>Let’s consider the alternatives here.</p>
<ul>
<li>I could have clicked through the emails and copied out the data manually one at a time. This is error prone and kind of boring. For twelve emails it would have been OK, but for a hundred it would have been a real pain.</li>
<li>Accessing my Gmail data programatically. This seems to get harder every year—it’s still possible to access it via IMAP right now if you set up a dedicated <a href="https://support.google.com/mail/answer/185833">app password</a> but that’s a whole lot of work for a one-off scraping task. The <a href="https://developers.google.com/gmail/api/guides">official API</a> is no fun at all.</li>
<li>Some kind of browser automation (Playwright or similar) that can click through my Gmail account for me. Even with an LLM to help write the code this is still a lot more work, and it doesn’t help deal with formatting differences in emails either—I’d have to solve the email parsing step separately.</li>
<li>Using some kind of much more sophisticated pre-existing AI tool that has access to my email. A separate Google product also called Gemini can do this if you grant it access, but my results with that so far haven’t been particularly great. AI tools are inherently unpredictable. I’m also nervous about giving any tool full access to my email account due to the risk from things like <a href="https://simonwillison.net/tags/prompt-injection/">prompt injection</a>.</li>
</ul>
<h4 id="video-scraping-is-really-powerful">Video scraping is really powerful</h4>
<p>The great thing about this <strong>video scraping</strong> technique is that it works with <em>anything</em> that you can see on your screen... and it puts you in total control of what you end up exposing to the AI model.</p>
<p>There’s no level of website authentication or anti-scraping technology that can stop me from recording a video of my screen while I manually click around inside a web application.</p>
<p>The results I get depend entirely on how thoughtful I was about how I positioned my screen capture area and how I clicked around.</p>
<p>There is <em>no setup cost</em> for this at all—sign into a site, hit record, browse around a bit and then dump the video into Gemini.</p>
<p>And the cost is so low that I had to re-run my calculations three times to make sure I hadn’t made a mistake.</p>
<p>I expect I’ll be using this technique a whole lot more in the future. It also has applications in the data journalism world, which frequently involves the need to scrape data from sources that really don’t want to be scraped.</p>

<h4 id="bonus-calculator">Bonus: An LLM pricing calculator</h4>

<p>In writing up this experiment I got fed up of having to manually calculate token prices. I actually usually outsource that to ChatGPT Code Interpreter, but I’ve caught it <a href="https://gist.github.com/simonw/3a4406eeed70f7f2de604892eb3548c4?permalink_comment_id=5239420#gistcomment-5239420">messing up the conversion</a> from dollars to cents once or twice so I always have to double-check its work.</p>

<p>So I got Claude 3.5 Sonnet with Claude Artifacts to build me <a href="https://tools.simonwillison.net/llm-prices">this pricing calculator tool</a> (<a href="https://github.com/simonw/tools/blob/main/llm-prices.html">source code here</a>):</p>

<p><img src="https://static.simonwillison.net/static/2024/llm-pricing-calculator.jpg" alt="Screenshot of LLM Pricing Calculator interface. Left panel: input fields for tokens and costs. Input Tokens: 11018, Output Tokens: empty, Cost per Million Input Tokens: $0.075, Cost per Million Output Tokens: $0.3. Total Cost calculated: $0.000826 or 0.0826 cents. Right panel: Presets for various models including Gemini, Claude, and GPT versions with their respective input/output costs per 1M tokens. Footer: Prices were correct as of 16th October 2024, they may have changed."/></p>

<p>You can set the input/output token prices by hand, or click one of the preset buttons to pre-fill it with the prices for different existing models (as-of 16th October 2024—I won’t promise that I’ll promptly update them in the future!)</p>

<p>The entire thing was written by Claude. Here’s <a href="https://gist.github.com/simonw/6b684b5f7d75fb82034fc963cc487530">the full conversation transcript</a>—we spent 19 minutes iterating on it through 10 different versions.</p>

<p>Rather than hunt down all of those prices myself, I took screenshots of the pricing pages for each of the model providers and dumped those directly into the Claude conversation:</p>

<p><img src="https://static.simonwillison.net/static/2024/claude-screenshots.jpg" alt="Claude: Is there anything else you&#39;d like me to adjust or explain about this updated calculator? Me: Add a onkeyup event too, I want that calculator to update as I type. Also add a section underneath the calculator called Presets which lets the user click a model to populate the cost per million fields with that model&#39;s prices - which should be shown on the page too. I&#39;ve dumped in some screenshots of pricing pages you can use - ignore prompt caching prices. There are five attached screenshots of pricing pages for different models."/></p>


</div>


</div></div>
  </body>
</html>
