<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/line/ts-remove-unused">Original</a>
    <h1>Show HN: ts-remove-unused ‚Äì Remove unused code from your TypeScript project</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<div dir="auto">
  <p><a target="_blank" rel="noopener noreferrer" href="https://github.com/line/ts-remove-unused/blob/main/media/screenshot.png"><img width="480" src="https://github.com/line/ts-remove-unused/raw/main/media/screenshot.png"/></a></p><p dir="auto">Remove unused code from your TypeScript Project</p>
</div>
<p dir="auto"><a href="https://badge.fury.io/js/@line%2Fts-remove-unused" rel="nofollow"><img src="https://camo.githubusercontent.com/25aa839184004100f772d3a0921050b61fe12ef0072b84f086c683cf13269df3/68747470733a2f2f62616467652e667572792e696f2f6a732f406c696e6525324674732d72656d6f76652d756e757365642e737667" alt="npm version" data-canonical-src="https://badge.fury.io/js/@line%2Fts-remove-unused.svg"/></a>
<a href="https://github.com/line/ts-remove-unused/actions/workflows/ci.yml"><img src="https://github.com/line/ts-remove-unused/actions/workflows/ci.yml/badge.svg?branch=main" alt="CI"/></a></p>

<ul dir="auto">
<li>üõ†Ô∏è Auto-fix unused exports ‚Äî removes the <code>export</code> keyword from the declaration or the whole declaration based on its usage</li>
<li>üßπ Deletes TypeScript modules that have no referenced exports</li>
<li>üïµÔ∏è <code>--check</code> mode ‚Äî reports unused exports and deletable files without writing changes</li>
</ul>

<p dir="auto">When TypeScript&#39;s <code>compilerOptions.noUnusedLocals</code> is enabled, it&#39;s possible to detect declarations that are not referenced in your file.</p>
<div dir="auto" data-snippet-clipboard-copy-content="// TypeScript will throw error: &#39;a&#39; is declared but its value is never read.
const a = &#39;a&#39;;"><pre><span>// TypeScript will throw error: &#39;a&#39; is declared but its value is never read.</span>
<span>const</span> <span>a</span> <span>=</span> <span>&#39;a&#39;</span><span>;</span></pre></div>
<p dir="auto">However when this declaration is exported and is not referenced by any file in the project, it&#39;s difficult to recognize this.</p>
<div dir="auto" data-snippet-clipboard-copy-content="// no errors will be reported even if the declaration is not used across the entire project.
export const a = &#39;a&#39;;"><pre><span>// no errors will be reported even if the declaration is not used across the entire project.</span>
<span>export</span> <span>const</span> <span>a</span> <span>=</span> <span>&#39;a&#39;</span><span>;</span></pre></div>
<p dir="auto">This is when ts-remove-unused comes in handy. ts-remove-unused is a CLI tool made on top of TypeScript that reports/fixes unused exports.</p>
<p dir="auto">Let&#39;s say you have the following file:</p>
<div dir="auto" data-snippet-clipboard-copy-content="export const a = &#39;a&#39;;

export const b = &#39;b&#39;;

export const c = &#39;c&#39;;

console.log(b);"><pre><span>export</span> <span>const</span> <span>a</span> <span>=</span> <span>&#39;a&#39;</span><span>;</span>

<span>export</span> <span>const</span> <span>b</span> <span>=</span> <span>&#39;b&#39;</span><span>;</span>

<span>export</span> <span>const</span> <span>c</span> <span>=</span> <span>&#39;c&#39;</span><span>;</span>

<span>console</span><span>.</span><span>log</span><span>(</span><span>b</span><span>)</span><span>;</span></pre></div>
<p dir="auto">When <code>a</code> and <code>b</code> are not used in all other files across the project, ts-remove-unused will modify the file to be:</p>
<div dir="auto" data-snippet-clipboard-copy-content="const b = &#39;b&#39;;

export const c = &#39;c&#39;;

console.log(b);"><pre><span>const</span> <span>b</span> <span>=</span> <span>&#39;b&#39;</span><span>;</span>

<span>export</span> <span>const</span> <span>c</span> <span>=</span> <span>&#39;c&#39;</span><span>;</span>

<span>console</span><span>.</span><span>log</span><span>(</span><span>b</span><span>)</span><span>;</span></pre></div>
<p dir="auto">Let&#39;s say you have another file in your project:</p>
<div dir="auto" data-snippet-clipboard-copy-content="export const d = &#39;d&#39;;

export const e = &#39;e&#39;;"><pre><span>export</span> <span>const</span> <span>d</span> <span>=</span> <span>&#39;d&#39;</span><span>;</span>

<span>export</span> <span>const</span> <span>e</span> <span>=</span> <span>&#39;e&#39;</span><span>;</span></pre></div>
<p dir="auto">When <code>d</code> and <code>e</code> are not used in all other files across the project, ts-remove-unused will delete the file for you.</p>
<p dir="auto">ts-remove-unused supports various types of exports including variable declarations (<code>export const</code>, <code>export let</code>), function declarations, class declarations, interface declarations, type alias declarations, default exports and more...</p>
<p dir="auto">Now you don&#39;t have to worry about removing unused code by yourself!</p>

<div dir="auto" data-snippet-clipboard-copy-content="npm install @line/ts-remove-unused"><pre>npm install @line/ts-remove-unused</pre></div>
<p dir="auto">TypeScript is a peer dependency so make sure that it&#39;s also installed.</p>

<div data-snippet-clipboard-copy-content="Usage:
  $ ts-remove-unused

Commands:
    There are no subcommands. Simply execute ts-remove-unused

For more info, run any command with the `--help` flag:
  $ ts-remove-unused --help

Options:
  --project &lt;file&gt;         Path to your tsconfig.json
  --skip &lt;regexp_pattern&gt;  Specify the regexp pattern to match files that should be skipped from transforming
  --include-d-ts           Include .d.ts files in target for transformation
  --check                  Check if there are any unused exports without removing them
  -h, --help               Display this message
  -v, --version            Display version number"><pre><code>Usage:
  $ ts-remove-unused

Commands:
    There are no subcommands. Simply execute ts-remove-unused

For more info, run any command with the `--help` flag:
  $ ts-remove-unused --help

Options:
  --project &lt;file&gt;         Path to your tsconfig.json
  --skip &lt;regexp_pattern&gt;  Specify the regexp pattern to match files that should be skipped from transforming
  --include-d-ts           Include .d.ts files in target for transformation
  --check                  Check if there are any unused exports without removing them
  -h, --help               Display this message
  -v, --version            Display version number
</code></pre></div>
<p dir="auto">The CLI will respect the <code>tsconfig.json</code> for loading source files.</p>
<p dir="auto">Here&#39;s an example of using the cli. Make sure to skip your entrypoint file.</p>
<div dir="auto" data-snippet-clipboard-copy-content="npx @line/ts-remove-unused --skip &#39;src\/main\.ts&#39;"><pre>npx @line/ts-remove-unused --skip <span><span>&#39;</span>src\/main\.ts<span>&#39;</span></span></pre></div>

<p dir="auto">Use <code>--check</code> to check for unused files and exports without making changes to project files. The command will exit with exit code 1 if there are any unused files or exports discovered.</p>
<div dir="auto" data-snippet-clipboard-copy-content="npx @line/ts-remove-unused --check"><pre>npx @line/ts-remove-unused --check</pre></div>

<p dir="auto">Alternatively, you can use the JavaScript API to execute ts-remove-unused.</p>
<div dir="auto" data-snippet-clipboard-copy-content="import { remove } from &#39;@line/ts-remove-unused&#39;;

remove({
  configPath: &#39;/path/to/project/tsconfig.json&#39;,
  projectRoot: &#39;/path/to/project&#39;,
  skip: [/main\.ts/],
  mode: &#39;write&#39;,
});"><pre><span>import</span> <span>{</span> <span>remove</span> <span>}</span> <span>from</span> <span>&#39;@line/ts-remove-unused&#39;</span><span>;</span>

<span>remove</span><span>(</span><span>{</span>
  <span>configPath</span>: <span>&#39;/path/to/project/tsconfig.json&#39;</span><span>,</span>
  <span>projectRoot</span>: <span>&#39;/path/to/project&#39;</span><span>,</span>
  <span>skip</span>: <span>[</span><span><span>/</span>main\.ts<span>/</span></span><span>]</span><span>,</span>
  <span>mode</span>: <span>&#39;write&#39;</span><span>,</span>
<span>}</span><span>)</span><span>;</span></pre></div>

<p dir="auto">When you add a comment <code>// ts-remove-unused-skip</code> to your export declaration, it will be skipped from being removed</p>
<div dir="auto" data-snippet-clipboard-copy-content="// ts-remove-unused-skip
export const hello = &#39;world&#39;;"><pre><span>// ts-remove-unused-skip</span>
<span>export</span> <span>const</span> <span>hello</span> <span>=</span> <span>&#39;world&#39;</span><span>;</span></pre></div>
<p dir="auto">The <code>--skip</code> option is also available to skip files that match a given regex pattern. Note that you can pass multiple patterns.</p>
<div dir="auto" data-snippet-clipboard-copy-content="npx @line/ts-remove-unused --skip &#39;src/main\.ts&#39; --skip &#39;/pages/&#39;"><pre>npx @line/ts-remove-unused --skip <span><span>&#39;</span>src/main\.ts<span>&#39;</span></span> --skip <span><span>&#39;</span>/pages/<span>&#39;</span></span></pre></div>
<p dir="auto">By default, <code>.d.ts</code> files are skipped. If you want to include <code>.d.ts</code> files, use the <code>--include-d-ts</code> option.</p>

<p dir="auto">Kazushi Konosu (<a href="https://github.com/kazushisan">https://github.com/kazushisan</a>)</p>

<div data-snippet-clipboard-copy-content="Copyright (C) 2023 LINE Corp.

Licensed under the Apache License, Version 2.0 (the &#34;License&#34;);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an &#34;AS IS&#34; BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License."><pre><code>Copyright (C) 2023 LINE Corp.

Licensed under the Apache License, Version 2.0 (the &#34;License&#34;);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an &#34;AS IS&#34; BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
</code></pre></div>
</article></div></div>
  </body>
</html>
