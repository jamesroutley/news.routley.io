<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://cceckman.com/writing/dark-mode/">Original</a>
    <h1>Dark mode basics</h1>
    
    <div id="readability-page-1" class="page"><div>
<p>If you use your computer / phone / browsing device in “dark mode”,
you may notice this site doesn’t burn your eyes out any more.
Here’s a few notes on how I implemented it.</p>
<figure><img src="https://cceckman.com/writing/dark-mode/joined.png" alt="The dark and light backgrounds for this site, cut along the diagonal."/>
</figure>
<h2 id="variable-colors">Variable colors</h2>
<p>The first thing I changed was to shift all the color-related properties
into CSS <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties" target="_blank">variables</a>.</p>
<div>
<figure>
<div><pre tabindex="0"><code data-lang="css"><span><span><span>body</span> <span>{</span>
</span></span><span><span>  <span>color</span><span>:</span> <span>#000</span><span>;</span>
</span></span><span><span>  <span>background-image</span><span>:</span> <span>url</span><span>(</span><span>&#34;/background.png&#34;</span><span>);</span>
</span></span><span><span><span>}</span>
</span></span></code></pre></div><figcaption>Before</figcaption>
</figure>
<figure>
<div><pre tabindex="0"><code data-lang="css"><span><span><span>body</span> <span>{</span>
</span></span><span><span>  <span>color</span><span>:</span> <span>var</span><span>(</span><span>--</span><span>text</span><span>-</span><span>color</span><span>);</span>
</span></span><span><span>  <span>background-image</span><span>:</span> <span>var</span><span>(</span><span>--</span><span>bg</span><span>-</span><span>image</span><span>);</span>
</span></span><span><span><span>}</span>
</span></span><span><span>
</span></span><span><span><span>:</span><span>root</span> <span>{</span>
</span></span><span><span>  <span>--text-color</span><span>:</span> <span>#000</span><span>;</span>
</span></span><span><span>  <span>--bg-image</span><span>:</span> <span>url</span><span>(</span><span>&#34;/background.png&#34;</span><span>);</span>
</span></span><span><span><span>}</span>
</span></span></code></pre></div><figcaption>After</figcaption>
</figure>
</div>
<p>I’m not experienced with professional-grade CSS;
if there’s a more idiomatic way to organize this, <a href="#action">let me know</a>!</p>

<p>My stylesheet replaces those color variables
by a CSS <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_media_queries/Using_media_queries" target="_blank">media query</a>. Specifically,
my site checks if the user <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme" target="_blank">prefers a dark color scheme</a>.</p>
<div><pre tabindex="0"><code data-lang="css"><span><span><span>body</span> <span>{</span>
</span></span><span><span>  <span>color</span><span>:</span> <span>var</span><span>(</span><span>--</span><span>text</span><span>-</span><span>color</span><span>);</span>
</span></span><span><span>  <span>background-image</span><span>:</span> <span>var</span><span>(</span><span>--</span><span>bg</span><span>-</span><span>image</span><span>);</span>
</span></span><span><span><span>}</span>
</span></span><span><span>
</span></span><span><span><span>:</span><span>root</span> <span>{</span>
</span></span><span><span>  <span>--text-color</span><span>:</span> <span>#000</span><span>;</span>
</span></span><span><span>  <span>--bg-image</span><span>:</span> <span>url</span><span>(</span><span>&#34;/bg-light.png&#34;</span><span>);</span>
</span></span><span><span><span>}</span>
</span></span><span><span>
</span></span><span><span><span>@</span><span>media</span> <span>(</span><span>prefers-color-scheme</span><span>:</span> <span>dark</span><span>)</span> <span>{</span>
</span></span><span><span>  <span>:</span><span>root</span> <span>{</span>
</span></span><span><span>    <span>--text-color</span><span>:</span> <span>#fff</span><span>;</span>
</span></span><span><span>    <span>--bg-image</span><span>:</span> <span>url</span><span>(</span><span>&#34;/bg-dark.png&#34;</span><span>);</span>
</span></span><span><span>  <span>}</span>
</span></span><span><span><span>}</span>
</span></span></code></pre></div><p>I also updated my <a href="https://cceckman.com/writing/wallpaper/">wallpaper generator</a>
to generate produce “light” and “dark” images,
and replace the image accordingly.</p>
<h2 id="line-drawings">Line drawings</h2>
<p>That takes care of most of the site, but there’s one exception:
line drawings.</p>
<p>My <a href="https://cceckman.com/writing/mechanical-keyboard-primer/">mechanical keyboards post</a> has a lot of images.
Most are photos, which don’t change for dark mode;
but I’d like the line drawings to match the site’s
foreground/background colors.<sup id="fnref:1"><a href="#fn:1" role="doc-noteref">1</a></sup></p>
<p>The CSS <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/filter" target="_blank"><code>filter</code></a> property applies various transformations
to HTML elements, including images.
For the line drawings, I use the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/filter-function/invert" target="_blank"><code>invert</code></a> filter.<sup id="fnref:2"><a href="#fn:2" role="doc-noteref">2</a></sup></p>
<div><pre tabindex="0"><code data-lang="css"><span><span><span>@</span><span>media</span> <span>(</span><span>prefers-color-scheme</span><span>:</span> <span>dark</span><span>)</span> <span>{</span>
</span></span><span><span>  <span>.</span><span>line-drawing</span> <span>img</span> <span>{</span>
</span></span><span><span>    <span>-webkit-</span><span>filter</span><span>:</span> <span>invert</span><span>(</span><span>100</span><span>%</span><span>);</span>
</span></span><span><span>    <span>filter</span><span>:</span> <span>invert</span><span>(</span><span>100</span><span>%</span><span>);</span>
</span></span><span><span>  <span>}</span>
</span></span><span><span><span>}</span>
</span></span></code></pre></div><h2 id="action">Hope this helps!</h2>
<p>I often <a href="https://github.com/cceckman/Tilde/blob/9fe25fe7ecd19f636a34ba614c2d6d1ac86256a6/themes/retheme#L45" target="_blank">switch between light and dark mode</a>,
and I appreciate it when sites respect that.
Hopefully this article helps you make the web a little easier on the eyes too!</p>




</div></div>
  </body>
</html>
