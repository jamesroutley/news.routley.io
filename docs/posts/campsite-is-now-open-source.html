<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/campsite/campsite">Original</a>
    <h1>Campsite is now open source</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">This is an open source version of the <a href="https://www.campsite.com/" rel="nofollow">Campsite</a> app. This codebase is available <strong>as-is</strong> and is not actively maintained by the Campsite team. We will only consider pull requests and issues regarding self-hosting or critical fixes. The codebase is provided as a reference for those interested in learning how Campsite works. We welcome forks of this repository for use in non-commercial projects.</p>

<p dir="auto">To get started, run this command from the workspace root:</p>

<p dir="auto">Campsite requires setting up several services before you can run the basic version locally.</p>

<p dir="auto">S3 is needed to upload avatars and attachments. We recommend separate buckets for dev and production. For example, we use <code>campsite-media</code> and <code>campsite-media-dev</code> buckets.</p>
<p dir="auto">You should setup a IAM user with <a href="https://github.com/campsite/campsite/blob/main/aws-policies.md">these suggested policies</a> (make sure to use your buckets in the policy).</p>
<p dir="auto">Set your credentials for the API:</p>
<div dir="auto" data-snippet-clipboard-copy-content="cd api
script/credentials development"><pre><span>cd</span> api
script/credentials development</pre></div>
<p dir="auto">Configure these under the <code>aws</code> key.</p>
<p dir="auto">We also recommend uploading the contents of the <code>default_avatars</code> directory under <code>static/avatars</code> in each S3 bucket. <a href="https://github.com/campsite/campsite/blob/main/default_avatars/readme.md">Read more here</a>.</p>

<p dir="auto"><a href="https://pusher.com/" rel="nofollow">Pusher</a> is used to send realtime updates and events. After creating your account, configure this under the <code>pusher</code> key in your credentials.</p>

<p dir="auto"><a href="https://www.imgix.com/" rel="nofollow">Imgix</a> is the CDN powering Campsite. On AWS IAM, you will need to create an imgix user + policy (<a href="https://github.com/campsite/campsite/blob/main/aws-policies.md">see recommended policy</a>).</p>
<p dir="auto">Then, add S3 as an <a href="https://docs.imgix.com/en-US/getting-started/setup/creating-sources/amazon-s3" rel="nofollow">Imgix source</a>. If you setup dev and prod S3 buckets, you will need a separate Imgix source for each.</p>
<p dir="auto">Lastly, create an API Key for Imgix in your account dropdown.</p>
<p dir="auto">Fill in all of these values in the credentials files:</p>
<ul dir="auto">
<li><code>imgix.url</code> - The S3 sourced image domain. Should look like <a href="https://campsite-dev.imgix.net" rel="nofollow">https://campsite-dev.imgix.net</a></li>
<li><code>imgix.source_id</code> - The Imgix source ID (top of the source page or in the URL)</li>
<li><code>imgix.api_key</code> - The API key you created</li>
<li><code>imgix_video.url</code> - Same URL as <code>imgix.url</code> but with <code>.video</code> as the TLD (e.g. <a href="https://campsite-dev.imgix.video" rel="nofollow">https://campsite-dev.imgix.video</a>)</li>
</ul>
<div dir="auto"><p dir="auto"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p dir="auto">While here you can also setup <a href="https://docs.imgix.com/en-US/getting-started/setup/creating-sources/web-folder" rel="nofollow">Imgix Web Folders</a> and put the URL in <code>imgix_folder.url</code>. This is used to cache doc thumbnails, but isn&#39;t necessary on local dev. The web folder is needed to host doc thumbnails in prod.</p>
</div>

<p dir="auto"><a href="https://www.100ms.live/" rel="nofollow">100ms</a> powers Campsite&#39;s video conferencing features. After creating an account, set these values under the <code>hms</code> credentials key.</p>
<div dir="auto"><p dir="auto"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p dir="auto">Video calls with webhooks will only work when using a secure tunnel such as ngrok.</p>
</div>

<p dir="auto">We use the OpenAI API to generate summaries for calls and posts. You need both an API key and your organization ID (not the name, found in OpenAI platform settings). Add these under the <code>openai</code> credentials key.</p>

<p dir="auto">There are many other services we use to power Campsite features. Create accounts and set up credentials as needed:</p>
<ul dir="auto">
<li><code>aws_ecs</code> - run data exports on AWS Elastic Container Service</li>
<li><code>cal_dot_com</code> - the Campsite <a href="https://cal.com/" rel="nofollow">Cal.com</a> app</li>
<li><code>figma</code> - render frames via the <a href="https://www.figma.com/developers/api" rel="nofollow">Figma REST API</a></li>
<li><code>linear</code> - the Campsite Linear app (see <a href="https://developers.linear.app/docs" rel="nofollow">API docs</a>)</li>
<li><code>omniauth_google</code> - Google OAuth</li>
<li><code>plain</code> - customer feedback (likely not needed)</li>
<li><code>postmark</code> - sending emails via the <a href="https://postmarkapp.com/developer" rel="nofollow">Postmark API</a></li>
<li><code>sentry</code> - bug reports, just need the DSN</li>
<li><code>slack</code> - Campsite Slack app</li>
<li><code>vercel.revalidate_static_cache</code> - generate your own key to safely revalidate cached docs (ISR)</li>
<li><code>webpush_vapid</code> - VAPID keys necessary to send web push notifications (<a href="https://github.com/pushpad/web-push#generating-vapid-keys">docs</a>)</li>
<li><code>zapier</code> - The Campsite Zapier app</li>
<li><code>tenor</code> - GIF search (<a href="https://tenor.com/gifapi" rel="nofollow">docs</a>)</li>
</ul>
<div dir="auto"><h2 tabindex="-1" dir="auto">Running Campsite in development</h2><a id="user-content-running-campsite-in-development" aria-label="Permalink: Running Campsite in development" href="#running-campsite-in-development"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">We use <a href="https://github.com/DarthSim/overmind">Overmind</a> to run all of the services needed to develop Campsite locally. To get started, run <code>script/setup</code> to install tmux and Overmind. Then run:</p>

<p dir="auto">Our <a href="https://github.com/campsite/campsite/blob/main/Procfile">Procfile</a> defines the services Overmind runs. Use <code>overmind connect</code> to view the logs of a specific service (e.g. <code>overmind connect sync-server</code>).</p>

<ol dir="auto">
<li>Install npm packages</li>
</ol>

<ol start="2" dir="auto">
<li>Connect Vercel</li>
</ol>

<ol start="3" dir="auto">
<li>Sign in to your Vercel account</li>
</ol>

<ol start="4" dir="auto">
<li>Link the apps to Vercel</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="npx vercel link --repo
? Set up and develop ‚Äú~/&lt;your_path_to_campsite&gt;‚Äù? [Y/n] y
? Which scope should contain your project? Campsite
? Found project ‚Äúcampsite/campsite‚Äù. Link to it? [Y/n] y
üîó  Linked to campsite/campsite (created .vercel)"><pre>npx vercel link --repo
<span>?</span> Set up and develop ‚Äú~/<span>&lt;</span>your_path_to_campsite<span>&gt;</span>‚Äù<span>?</span> [Y/n] y
<span>?</span> Which scope should contain your project<span>?</span> Campsite
<span>?</span> Found project ‚Äúcampsite/campsite‚Äù. Link to it<span>?</span> [Y/n] y
üîó  Linked to campsite/campsite (created .vercel)</pre></div>
<ol start="5" dir="auto">
<li>Pull environment variables from Vercel</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="cd apps/web &amp;&amp; npx vercel env pull"><pre><span>cd</span> apps/web <span>&amp;&amp;</span> npx vercel env pull</pre></div>
<ol start="6" dir="auto">
<li>Run the app</li>
</ol>

<ol start="5" dir="auto">
<li>Open the app at <code>http://app.campsite.test:3000</code> ‚Äî you will be redirected to the auth page with user credentials pre-filled.</li>
</ol>
<div dir="auto"><h2 tabindex="-1" dir="auto">Running the marketing site</h2><a id="user-content-running-the-marketing-site" aria-label="Permalink: Running the marketing site" href="#running-the-marketing-site"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ol dir="auto">
<li>
<p dir="auto">Follow the steps above to connect the <code>apps/site</code> repo to the <code>campsite-site</code> project on Vercel.</p>
</li>
<li>
<p dir="auto">Pull environment variables from Vercel</p>
</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="cd apps/site &amp;&amp; npx vercel env pull"><pre><span>cd</span> apps/site <span>&amp;&amp;</span> npx vercel env pull</pre></div>
<ol start="3" dir="auto">
<li>Run the site</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="pnpm -F @campsite/site dev"><pre>pnpm -F @campsite/site dev</pre></div>
<ol start="4" dir="auto">
<li>Open the app at <code>http://localhost:3003</code></li>
</ol>

<div dir="auto" data-snippet-clipboard-copy-content="pnpm -F @campsite/web storybook"><pre>pnpm -F @campsite/web storybook</pre></div>

<p dir="auto">To add new packages, you always install at the root of the repository and pass a filter flag to pnpm. For example, to install Tailwind to the marketing site, you would run:</p>
<div dir="auto" data-snippet-clipboard-copy-content="pnpm -F @campsite/site i tailwindcss"><pre>pnpm -F @campsite/site i tailwindcss</pre></div>
<p dir="auto">Or to install lodash to the web app, you would run:</p>
<div dir="auto" data-snippet-clipboard-copy-content="pnpm -F @campsite/web i lodash"><pre>pnpm -F @campsite/web i lodash</pre></div>
<p dir="auto">To find an app or package name, navigate to the <code>package.json</code> for each <code>app/</code> or <code>package/</code> directory.</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Running the Desktop App locally</h2><a id="user-content-running-the-desktop-app-locally" aria-label="Permalink: Running the Desktop App locally" href="#running-the-desktop-app-locally"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ol dir="auto">
<li><a href="https://dl.todesktop.com/2108257l5oobyoe" rel="nofollow">Download the ToDesktop build macOS App</a>.</li>
<li>Look for the app switcher in the ToDesktop title bar. If you do not see our org apps here, you may need to create a dummy application.</li>
<li>Switch to &#34;Campsite Dev&#34; and click &#34;Run&#34; in the bottom left corner of the app.</li>
</ol>
<details>
  <summary>View screenshot</summary>
  <a target="_blank" rel="noopener noreferrer nofollow" href="https://user-images.githubusercontent.com/1923260/211939117-f9a2a6cf-99c2-4220-b732-b109c5c859e9.png"><img width="927" alt="Screen Shot 2023-01-11 at 15 20 46@2x" src="https://user-images.githubusercontent.com/1923260/211939117-f9a2a6cf-99c2-4220-b732-b109c5c859e9.png"/></a>
</details>

<p dir="auto">Are you looking to setup and run the API locally? Checkout the <a href="https://github.com/campsite/campsite/blob/main/api/README.md">API README</a></p>
<p dir="auto">‚ú®</p>

<p dir="auto">Running <code>script/setup</code> will generate <a href="https://edgeguides.rubyonrails.org/security.html#custom-credentials" rel="nofollow">Rails custom credential files</a> for development and production environments. From the API directory, run <code>VISUAL=&#34;code --wait&#34; bin/rails credentials:edit --environment development</code> to edit development credentials, or run <code>VISUAL=&#34;code --wait&#34; bin/rails credentials:edit --environment development</code> to edit production credentials.</p>
<p dir="auto">When you deploy Campsite, <code>config/credentials/production.yml.enc</code> must be present on your production server, and you must set the <code>RAILS_MASTER_KEY</code> environment variable equal to the contents of <code>config/credentials/production.key</code>. If you deploy from a git repository, you can remove <code>config/credentials/production.yml.enc</code> from <code>.gitignore</code> and commit the file. Do not remove <code>config/credentials/production.key</code> from <code>.gitignore</code>, instead share this with your team in a safe place outside of the repository, such as in a password vault.</p>

<p dir="auto">To use calls in development, you&#39;ll need to treat the <code>http://app.campsite.test:3000</code> origin as secure. In a Chromium-based browser, you can do that at chrome://flags/#unsafely-treat-insecure-origin-as-secure.</p>
<p dir="auto">For any call features that require webhooks (like getting chat bubbles in message threads when calls start), you should <a href="https://github.com/campsite/campsite/tree/main/api#using-ngrok-for-publicly-accessible-https-development-urls">use ngrok</a>. You can enable webhooks in the <a href="https://dashboard.100ms.live/developer" rel="nofollow">developer tab of the 100ms dashboard</a>. The webhook URL should be set to <code>https://api-dev.campsite.com/v1/integrations/hms/events</code>, and there should be a webhook header with the name <code>X-Passcode</code> and a value that comes from running <code>Rails.application.credentials.hms.webhook_passcode</code> in a development Rails console. Be sure that you configure webhooks in the &#34;Development&#34; workspace and disable them when you&#39;re done working in ngrok (webhooks in the &#34;Production&#34; workspace should always be enabled and the configuration shouldn&#39;t change).</p>
</article></div></div>
  </body>
</html>
