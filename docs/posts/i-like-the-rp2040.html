<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://dgroshev.com/blog/rp2040/">Original</a>
    <h1>I like the RP2040</h1>
    
    <div id="readability-page-1" class="page"><div>
        
  <div>
    
    

    <div>
      



  
  

  
    
  


<p><a href="https://dgroshev.com/blog/rp2040/img/rp2040.jpg?hash=aa3e21f5" target="_blank">
  <img src="https://dgroshev.com/processed_images/rp2040.0c483830155c3532.jpg?hash=aa3e21f5" srcset="https://dgroshev.com/processed_images/rp2040.0c483830155c3532.jpg?hash=aa3e21f5, img/rp2040.jpg?hash=aa3e21f5 2x" alt="RaspberryPi&#39;s picture of a RP2040"/>
</a></p><p>The RP2040 is a microcontroller made by Raspberry Pi. Unlike their more widely known products, the
RP2040 is meant to be embedded in consumer electronics. It&#39;s cheap and available in tens of thousands
for immediate dispatch from your local Mouser.</p>
<p>I really like the RP2040 and I want you to know why.</p>
<h2 id="just-the-right-size">Just the right size</h2>
<p>Here is the Mouser stock for a microcontroller manufacturer Espressif:</p>




  
  

  
    
  


<p><a href="https://dgroshev.com/blog/rp2040/img/espressif_stock.png?hash=7c8c85d9" target="_blank">
  <img src="https://dgroshev.com/processed_images/espressif_stock.72e7319c5dab554d.png?hash=7c8c85d9" srcset="https://dgroshev.com/processed_images/espressif_stock.72e7319c5dab554d.png?hash=7c8c85d9, img/espressif_stock.png?hash=7c8c85d9 2x" alt="A screenshot of the Mouser stock for Espressif microcontrollers"/>
</a></p><p>Dozens of slightly different controllers. Why?</p>
<p>Unlike software, physical products cost money to manufacture. Every cent saved on a gizmo&#39;s components
is a cent in earnings, which adds up when the gizmos are manufactured by the million. This creates an incentive 
to pick a microcontroller that is only just powerful enough (to &#34;right size&#34; it), and usually microcontroller 
manufacturers are happy to help, offering dozens of variations of the same microcontroller.</p>
<p>Here is the Mouser stock for Raspberry Pi:</p>




  
  

  
    
  


<p><a href="https://dgroshev.com/blog/rp2040/img/raspberry_stock.png?hash=4680aaa1" target="_blank">
  <img src="https://dgroshev.com/processed_images/raspberry_stock.6cd109cef39fc572.png?hash=4680aaa1" srcset="https://dgroshev.com/processed_images/raspberry_stock.6cd109cef39fc572.png?hash=4680aaa1, img/raspberry_stock.png?hash=4680aaa1 2x" alt="A screenshot of Mouser stock for Raspberry microcontrollers"/>
</a></p><p>(This is the same microcontroller, just two different packaging options.)</p>
<p>What?</p>
<h2 id="as-long-as-it-s-black">â€¦as long as it&#39;s black</h2>
<p>Raspberry Pi pulled a Henry Ford and boldly went with just one microcontroller.</p>
<p>There is no choice, no right sizing, but that might be OK! An RP2040 costs ~70 cents, and not all gizmos are produced
by the million.</p>
<p>In return, Raspberry Pi ensured that everyone on the planet works with the same part. Compared to more traditional
wide lineups, there is a disproportionate number of StackExchange questions, blog posts (including this one), 
experience, Github issues, libraries, and tools for the RP2040.</p>
<p>This is a good tradeoff for projects like <a href="https://late-mate.com">Late Mate</a>, which are likely to save more on 
development costs than on parts. </p>
<h2 id="down-the-stack">Down the stack</h2>
<p>This single model pragmatism is evident in the choices Raspberry Pi made for the microcontroller itself.
It is designed to be a jack-of-all-trades, trading &#34;excellent&#34; for &#34;sufficient and flexible&#34;:</p>
<ul>
<li>Two decent cores. The second core is there if you need it.</li>
<li>30 GPIO pins, a very average number. </li>
<li>No on-board flash, spending the budget on more internal RAM that is much harder to wire externally.</li>
<li>An OK ADC, good USB support, and the usual peripherals (UART/SPI/I2C/PWM).</li>
</ul>
<p>Less conventionally, the RP2040 comes with a peripheral called &#34;PIO&#34; for Programmable Input/Output.
It&#39;s like two tiny coprocessors that can execute your IO fast, with precise timing, and without spending CPU time.
Some cool things people do with PIO:</p>
<ul>
<li>communication protocols like <a href="https://github.com/peterkrull/dshot-pio">DShot ESC</a></li>
<li><a href="https://github.com/sekigon-gonnoc/Pico-PIO-USB">a fully featured USB stack on PIO</a>, giving RP2040 
a second USB controller</li>
<li>coupled with DMA, <a href="https://dmitry.gr/?r=06.%20Thoughts&amp;proj=09.ComplexPioMachines">display drivers</a> that
completely offload display+touch communication from the CPU</li>
</ul>
<p>The RP2040 is impossible to brick. It comes with a read-only bootloader that can either mount as a USB mass storage device
(firmware updates can just be copypasted to the &#34;storage device&#34;), or use 
<a href="https://github.com/raspberrypi/picotool">its own simple USB protocol</a>.</p>
<p>In the same pragmatic vein, the RP2040 doesn&#39;t engage in security theatre. Protecting the firmware from a dedicated
attacker is nearly impossible, but there are complexity and DX costs to trying, so I&#39;m glad Raspberry Pi 
made the call.</p>
<p>I just love the deliberate design of this little square of silicon. When I work with it, I can see how 
smart people thought hard about the niche the RP2040 is in and drove the tradeoffs accordingly. As an engineer 
<sup>aspiring to be good someday</sup>, I appreciate it.</p>
<p><a href="https://news.ycombinator.com/item?id=40646061">Discuss on Hackernews</a></p>
<p>
  More of ^this^ on <a href="https://mastodon.social/@dangroshev" target="_blank">Mastodon</a>,
  <a href="https://dgroshev.com/atom.xml">RSS</a>, or a
  <a href="https://buttondown.email/dgroshev" target="_blank">very occasional newsletter</a>.
</p>
<p>
  Or just let me know what you think at
  <a href="mailto:dan@dgroshev.com">dan@dgroshev.com</a>!
</p>
<hr/>




    </div>
  </div>

      </div></div>
  </body>
</html>
