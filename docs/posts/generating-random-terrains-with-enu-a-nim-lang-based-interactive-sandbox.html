<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://moigagoo.svbtle.com/generating-random-terrains-in-enu-0-2">Original</a>
    <h1>Generating random terrains with Enu – a Nim lang based interactive sandbox</h1>
    
    <div id="readability-page-1" class="page"><article id="aueVEfL5ya11vCF9QE1VbK">
	<time datetime="2023-12-04">December  4, 2023</time>
  
	<p><a href="https://xn--hea.nu/" rel="nofollow">Enu</a> is an interactive programming sandbox that helps learn programming through game creation. The author made it with children convenience in mind so it’s great for teaching kids programming.</p>

<p>Just days ago, a long-awaited <a href="https://forum.nim-lang.org/t/10700" rel="nofollow">Enu 0.2 was released</a>. It boasts multiple improvements compared to the previous version but the biggest for me is the <a href="https://xn--hea.nu/docs/intro.html" rel="nofollow">documentation</a>. Finally, the great tool Enu is has the docs it deserves, beautiful and comprehensive.</p>

<p>To celebrate the new release, I decided to try and build a game with Enu and publish a tutorial on the process.</p>

<p>The game I’m having in mind is a capture the flag kinda game. I’m seeing a bumpy terrain covered with trees, with monsters walking around, and a randomly placed flag. The player needs to capture the flag and not get caught my the monsters. I’d like to implement the game mechanics where the monster can see or otherwise sense the player and when it does, it rushes to the player. The player has to sneak around to remain unnoticed.</p>

<p>We’ll start with generating our terrain. This is the topic of this tutorial.</p>

<p>Let’s first list some basic ideas:</p>

<ol>
<li>the terrain consists of randomly placed <u>hills</u>
</li>
<li>a hill consists of <u>layers</u> placed one upon another</li>
<li>a hill’s height is linearly proportionate to its diameter, which is random</li>
<li>a layer is a solid circle</li>
</ol>

<p>The plan is to implement layer first, than hill, and finally terrain with many random hills.</p>

<p>In Enu, there are two ways to implement something reusable: prototype and command. I’ve tried using prototypes first but it turns out they’re hard to keep track of, so we’ll use commands, which are basically just functions.</p>

<p>Place a regular block, select the Code tool, and click on the block. No we’re ready to start coding.</p>
<h2 id="layer_2">Layer <a href="#layer_2" rel="nofollow">#</a>
</h2>
<p>The code for layer looks like this:</p>

<pre><code># command definition
- layer(diameter = 10):
  for circleDiameter in 1..diameter:

# convert diameter to circle length we don&#39;t care about accuracy,
# so assume the length roughly equals 3 times the diameter
    let stepCount = circleDiameter * 3

# to position the circle center at the starting point,
# move one radius to the left first
    left circleDiameter / 2

    stepCount.times:

# draw the actual circle bit and turn slightly
      forward 1
      turn 360 / stepCount

# return to the starting point
    right circleDiameter / 2
</code></pre>
<h2 id="hill_2">Hill <a href="#hill_2" rel="nofollow">#</a>
</h2>
<p>To draw a hill, we’ll draw a number of layer one upon another:</p>

<pre><code>- hill(diameter = 10):
  var
    layerDiameter = diameter
    layerNum = 1

# start underground
  down 1

  while layerDiameter &gt; 0:
# move to the desired height
    up 1

# draw a layer there
    layer(layerDiameter)

# decrease the diameter with every layer
    layerDiameter -= layerNum

# go to the next layer
    inc layerNum

# return to the starting point
  down(layerNum-2)
</code></pre>
<h2 id="terrain_2">Terrain <a href="#terrain_2" rel="nofollow">#</a>
</h2>
<p>A terrain is a random arrangement of random hills:</p>

<pre><code>- randomTerrain(hillCount = 10, minHillDiameter = 5, maxHillDiameter = 60, minDistance = 30, maxDistance = 60):

  hillCount.times(hillNum):

# draw a hill
    hill(minHillDiameter..maxHillDiameter)

# turn anywhere
    turn(-180..180)

# get underground
    down 1

# move the new position
    forward(minDistance..maxDistance)       

# get back to the ground
    up 1
</code></pre>

<p>Finally, we call the <code>randomTerrain</code> command and get a random terrain:</p>

<pre><code># speed things up
speed = 100

# draw
randomTerrain(hillCount = 30)
</code></pre>

<iframe width="560" height="315" src="https://www.youtube.com/embed/TRPAOqdmsWg?si=JZR8JpTlcxdpVzvl" title="YouTube video player"></iframe>

  <figure id="kudo_aueVEfL5ya11vCF9QE1VbK">
    <a href="#kudo">
      
    </a>
    <p>32</p>
    <p>Kudos</p>
  </figure>
  <figure id="kudo_side_aueVEfL5ya11vCF9QE1VbK">
    <a href="#kudo">
      
    </a>
    <p>32</p>
    <p>Kudos</p>
  </figure>
</article></div>
  </body>
</html>
