<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.getlago.com/blog/is-stripe-using-stripe">Original</a>
    <h1>Why doesn&#39;t Stripe use Stripe Billing?</h1>
    
    <div id="readability-page-1" class="page"><div id="w-node-a2511b8d-977b-8d65-1ffe-a912f63f53b6-d5da358a"><div><p>Stripe is unarguably one of the most successful fintechs on the planet:</p><blockquote><em>“Millions of companies of all sizes – from startups to Fortune 500s – use Stripe’s software and APIs to accept payments, send payouts, and manage their businesses online.”</em></blockquote><p>However, we were wondering: if we wanted to reproduce Stripe’s pricing using Stripe Billing, how would it work?</p><h3>Context and disclaimer (skip if you’re familiar with Lago and Stripe)</h3><p>For context, Stripe has <a href="https://www.getlago.com/blog/we-crunched-the-fees-of-stripes-21-products">21 products</a>. The best known is <strong>Stripe Payments</strong> (for payment processing). One of their products is <strong>Stripe Billing</strong>, which helps calculate how much money each user owes and manage subscriptions. In other words, it’s the product used to implement pricing. Once Stripe Billing has calculated how much each customer owes the merchant, it triggers a payment, which is processed by Stripe Payments.</p><p>Also, as a disclaimer, we’re building Lago: an <strong>open-source billing API for product-led SaaS</strong>. We were told recently: “We love your ‘Stripe hate’ content”. While it was intended as a compliment, ‘Stripe hate’ has never been our intention. We partner with Stripe Payments and love their products. Our own product is an alternative to Stripe Billing (and Chargebee, Recurly, etc.) but with a deep focus on B2B and product-led companies. We actually have common investors on our cap table (e.g. Y Combinator and others).</p><p>B2B payments and billing are very specific, and this market is big, therefore there will be ‘verticalized’ players. For example, Stripe invested in another YC fintech that processes payments for B2B SaaS, called <a href="https://www.getbalance.com/" target="_blank">Balance</a> (they use Stripe Payments behind the scenes). </p><p>We want to explain why B2B billing, especially for <strong>fintechs and usage-based pricing</strong>, can be cumbersome with generalist players like Stripe Billing, which was primarily built for B2C and e-commerce. We also do our best to provide concrete examples/facts and not opinions.</p><p>Finally, we actually made these experiments before co-founding Lago. We were the founding team of <a href="https://qonto.com/en" target="_blank">Qonto</a> (Brex for Europe), where we built and maintained a home-grown billing system. A team of twelve is maintaining the billing system there today and we wish we could have staffed these talented senior engineers on our ‘core product’ instead of our internal billing tool. We have evaluated various commercial billing software, including Stripe Billing, many times but none of them has ever met our expectations.</p><h3>The experiment: Replicate Stripe’s pricing using Stripe Billing</h3><figure class="w-richtext-align-fullwidth w-richtext-figure-type-image"><p><img src="https://uploads-ssl.webflow.com/6244531a40ad7ef5475ad9b3/6308926157d0c3948b353fd7_stripe-pricing.png" loading="lazy" alt="Screenshot of Stripe&#39;s pricing"/></p></figure><p>‍</p><p>Their public pricing, named ‘Integrated’ (see above), is pretty straightforward. It’s a pricing that even very early stage startups could offer.</p><p>Stripe Billing has some powerful <a href="https://stripe.com/docs/products-prices/pricing-models#usage-based-pricing" target="_blank">usage-based pricing features</a>. In a nutshell, we were able to replicate Stripe’s pricing but encountered several limitations.</p><h3>Limitation 1:  You can’t easily charge a percentage fee</h3><p>According to Stripe’s public pricing, when a transaction of $100 is processed through Stripe Payments, we need to charge a fixed fee ($0.30) and a percentage fee (2.9% x $100 = $2.90). However, we couldn’t find how to apply a percentage fee, so we had to find a workaround.</p><p>We created a first product called ‘Card charge’:</p><ol start="" role="list"><li>We selected the standard pricing (i.e. fixed unit price);</li><li>We set a price of $0.029 per unit;</li><li>We defined it as a monthly recurring charge; and</li><li>We ticked the ‘usage is metered’ box in order to be able to calculate the sum of all usage values.</li></ol><p>This product allows us to calculate the total amount of transactions and then apply a charge of $0.029 for each dollar processed through the platform ($0.029 per dollar = 2.9%).</p><figure class="w-richtext-align-fullwidth w-richtext-figure-type-image"><p><img src="https://uploads-ssl.webflow.com/6244531a40ad7ef5475ad9b3/630893eae33a10d59a5da1ed_Screenshot%202022-08-26%20at%2010.39.32.png" loading="lazy" alt="Screenshot of the configuration for the first product"/></p></figure><p>‍</p><h3>Limitation 2: The architecture isn’t event-based</h3><p>Stripe’s pricing includes two dimensions: a charge based on the <strong>number of transactions</strong> ($0.30) and a charge based on the <strong>total amount of transactions</strong> (2.9%).</p><p>If Stripe Billing’s architecture was event-based, each transaction would be an event and the transaction amount would be a property of the event. However, with Stripe Billing, each price needs to be linked to a product, so we had to create a second product to implement the charge based on the number of transactions.</p><figure class="w-richtext-align-fullwidth w-richtext-figure-type-image"><p><img src="https://uploads-ssl.webflow.com/6244531a40ad7ef5475ad9b3/63089424bb0170c32b109cd8_Screenshot%202022-08-26%20at%2010.38.36.png" loading="lazy" alt="Screenshot of the configuration for the second product"/></p></figure><p>‍</p><p>Therefore, instead of sending a single event every time there’s a transaction, we will need to send two usage values:</p><p>• One to record the transaction and be able to calculate the total number of transactions at the end of the billing period; and</p><p>This setup can be very limiting for companies that process large volumes of transactions as they will have to create <strong>twice as many usage records</strong>.</p><h3>Limitation 3: Even the simplest pricing requires to store 5+ IDs</h3><p>This is where we see that Stripe’s architecture was built with e-commerce in mind and not B2B SaaS.</p><p>To create a subscription, you need to:</p><ol start="" role="list"><li>Create products – here we have two products, so two IDs;</li><li>Create a price for each product – so two more IDs;</li><li>Create a customer – one ID per customer; and</li><li>Create a subscription, which can include several products and therefore several prices – Stripe generates one ID for the subscription and one ID per subscription item, so we retrieved three more IDs.</li></ol><p>We have to store all these different IDs in order to operate via the API. It’s doable but we can all agree that it can be confusing and generates extra work.</p><h3>Limitation 4: Rate limits are… limiting</h3><blockquote><em>“For most APIs, Stripe allows up to 100 read operations per second and 100 write operations per second in live mode”</em></blockquote><p>We’re not the only ones who have spotted it – see this Reddit comment:</p><figure class="w-richtext-align-fullwidth w-richtext-figure-type-image"><p><img src="https://uploads-ssl.webflow.com/6244531a40ad7ef5475ad9b3/630893c2102c0d32a922bd1f_reddit-comment.png" loading="lazy" alt="Comment about Stripe&#39;s API on Reddit"/></p></figure><p>‍</p><p>For fintechs and cloud infrastructure companies, these rate limits can be reached quickly. If you’re a B2B neobank and monitor each transaction, this is a huge limitation for scaling the billing system, as each customer is a company with potentially dozens of employees, all of whom have a payment card.</p><p>If Stripe was really dogfooding its own product (Stripe Billing), it would have heavily modified it a long time ago to make it sustainable.</p><h3>Limitation 5: All products must have the same billing period</h3><p>The Grail for ‘pay-as-you-go’ or ‘usage-based’ companies is to get their customer to sign an <strong>annual contract</strong> (it gives them peace of mind about recurring revenue) with a <strong>‘consumption overage’ component</strong> (to capture expansion revenue).</p><p>These companies usually offer ‘Enterprise’ plans to their biggest customers. This is what Stripe calls the ‘Customized’ offer.</p><figure class="w-richtext-align-fullwidth w-richtext-figure-type-image"><p><img src="https://uploads-ssl.webflow.com/6244531a40ad7ef5475ad9b3/6308957ea963c8636fc8e0e6_Screenshot%202022-08-26%20at%2011.42.11.png" loading="lazy" alt="Stripe&#39;s custom pricing"/></p></figure><p>‍</p><p>In this case, the usual practice is to offer:</p><p>• <strong>An annual or multi-annual contract</strong>, including negotiated consumption (e.g. 24 months contract with $10M processed each month, priced at 2% instead of 2.9% + $0.30); and</p><p>In this case, the negotiated consumption would be paid in advance each year and we would then charge for any overage on a monthly basis. With Stripe Billing, this could be implemented by creating a subscription, including:</p><p>• One product for the annual fee;</p><p>However…</p><blockquote><em>“Since using multiple products with a subscription results in a single invoice and payment, all of the prices for those products must use the same currency and have the same billing interval. You are also limited to 20 products in a single subscription.”</em></blockquote><p>Therefore, to implement the required logic, we would need to create <strong>two separate subscriptions</strong>: one for the annual fee and another for the monthly charges, which would add complexity (and create even more IDs – see limitation 3).</p><h3>Conclusion</h3><p>You <strong>can</strong> replicate Stripe’s pricing using Stripe Billing, but it implies <strong>many workarounds</strong> and results in a billing system that isn’t really scalable.</p><p>We hope you found this experiment useful and that it answers the question “Does Stripe Billing handle metering and usage-based pricing?”.</p><p>We also had a lot of fun creating a ‘billing template’ that replicates Stripe’s pricing using Lago. <a href="http://www.getlago.com/resources/templates/stripe">Check it out here!</a></p></div></div></div>
  </body>
</html>
