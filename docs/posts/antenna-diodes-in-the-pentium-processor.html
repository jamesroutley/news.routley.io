<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="http://www.righto.com/2024/11/antenna-diodes-in-pentium-processor.html">Original</a>
    <h1>Antenna Diodes in the Pentium Processor</h1>
    
    <div id="readability-page-1" class="page"><div id="post-body-347521141499861916" itemprop="description articleBody">
<p>I was studying the silicon die of the Pentium processor and noticed some puzzling structures where
signal lines were connected to the silicon substrate for no apparent reason.
Two examples are in the photo below, where the metal wiring (orange) connects to small square regions of doped silicon (gray), isolated from the rest of the circuitry.
I did some investigation and learned that these structures are
&#34;antenna diodes,&#34; special diodes that protect the circuitry from damage during manufacturing.
In this blog post, I discuss the construction of the Pentium and explain how these antenna diodes work.</p>
<p><a href="https://static.righto.com/images/pentium-antenna/diodes.jpg"><img alt="Closeup of the Pentium die showing the silicon and bottom metal layer. The arrows indicate connections to two antenna diodes. I removed the top two layers of metal for this photo." height="265" src="https://static.righto.com/images/pentium-antenna/diodes-w450.jpg" title="Closeup of the Pentium die showing the silicon and bottom metal layer. The arrows indicate connections to two antenna diodes. I removed the top two layers of metal for this photo." width="450"/></a></p><p>Closeup of the Pentium die showing the silicon and bottom metal layer. The arrows indicate connections to two antenna diodes. I removed the top two layers of metal for this photo.</p>
<p>Intel released the Pentium processor in 1993,
starting a long-running brand of high-performance processors: the Pentium Pro, Pentium II, and so on.
In this post, I&#39;m studying the original Pentium, which has 3.1 million transistors.<span id="fnref:versions"><a href="#fn:versions">1</a></span>
The die photo below shows the Pentium&#39;s fingernail-sized silicon die under a microscope. 
The chip has three layers of metal wiring on top of the silicon so the underlying silicon is almost entirely obscured.</p>
<!--
The tiny white squares around the edges of the chip are bond pads. Bond wires attached to these pads provide the
connections between the chip and its grid of 273 external pins.
-->

<p><a href="https://static.righto.com/images/pentium-antenna/pentium-labeled.jpg"><img alt="The Pentium die with the main functional blocks labeled. Click this photo (or any other) for a larger version." height="525" src="https://static.righto.com/images/pentium-antenna/pentium-labeled-w500.jpg" title="The Pentium die with the main functional blocks labeled. Click this photo (or any other) for a larger version." width="500"/></a></p><p>The Pentium die with the main functional blocks labeled. Click this photo (or any other) for a larger version.</p>
<p>Modern processors are built from CMOS circuitry, which uses two types of transistors: NMOS and PMOS.
The diagram below shows how an NMOS transistor is constructed.
A transistor can be considered a switch between the source and drain, controlled by the gate.
The source and drain regions (green) consist of silicon doped with impurities to change its semiconductor properties, forming N+ silicon.
The gate consists of a layer of polysilicon (red), separated from the silicon by an absurdly thin insulating oxide layer.
Since the oxide layer is just a few hundred atoms thick,<span id="fnref:gate"><a href="#fn:gate">2</a></span> it is very fragile and easily damaged by excess voltage.
(This is why CMOS chips are sensitive to static electricity.) 
As we will see, the oxide layer can also be damaged by voltage during manufacturing.</p>
<p><a href="https://static.righto.com/images/pentium-antenna/mosfet-n.jpg"><img alt="Diagram showing the structure of an NMOS transistor." height="231" src="https://static.righto.com/images/pentium-antenna/mosfet-n-w400.jpg" title="Diagram showing the structure of an NMOS transistor." width="400"/></a></p><p>Diagram showing the structure of an NMOS transistor.</p>
<p>The Pentium processor is constructed from multiple layers.
Starting at the bottom, the Pentium has millions of transistors similar to the diagram above.
Polysilicon wiring on top of the silicon not only forms the transistor gates but also provides short-range wiring.
Above that, three layers of metal wiring connect the parts of the chip.
Roughly speaking, the bottom layer of metal connects to the silicon and polysilicon to construct logic gates from the transistors, while the upper layers of wiring
travel longer distances, with one layer for signals traveling horizontally and the other layer for signals traveling vertically.
Tiny tungsten plugs called vias provide connections between the different layers of wiring.
A key challenge of chip design is routing, directing signals through the multiple layers of wiring while packing the circuitry as densely as possible.</p>
<p>The photo below shows a small region of the Pentium die with the three metal layers visible.
The golden vertical lines are the top metal layer, formed from aluminum and copper.
Underneath, you can see the horizontal wiring of the middle metal layer.
The more complex wiring of the bottom metal layer can be seen, along with the silicon and polysilicon that form transistors.
The small black dots are the tungsten vias that connect metal layers, while the larger dark circles are contacts with the
underlying silicon or polysilicon.
Near the bottom of the photo, the vertical gray bands are polysilicon lines, forming transistor gates.
Although the chip appears flat, it has a three-dimensional structure with multiple layers of metal
separated by insulating layers of silicon dioxide. This three-dimensional structure will be important in the discussion below.
(The metal wiring is much denser over most of the chip; this region is one of the rare spots where all the layers are visible.)</p>
<p><a href="https://static.righto.com/images/pentium-antenna/metal-layers.jpg"><img alt="Closeup of the Pentium die showing the metal layers.
The L-shaped hook towards the lower left is a connection to an antenna diode.
This photo shows a tiny part of the floating point unit. To show all the layers in focus, I combined multiple images with focus stacking." height="430" src="https://static.righto.com/images/pentium-antenna/metal-layers-w400.jpg" title="Closeup of the Pentium die showing the metal layers.
The L-shaped hook towards the lower left is a connection to an antenna diode.
This photo shows a tiny part of the floating point unit. To show all the layers in focus, I combined multiple images with focus stacking." width="400"/></a></p><p>Closeup of the Pentium die showing the metal layers.
The L-shaped hook towards the lower left is a connection to an antenna diode.
This photo shows a tiny part of the floating point unit. To show all the layers in focus, I combined multiple images with focus stacking.</p>
<p>The manufacturing process for an integrated circuit is extraordinarily complicated but
I&#39;ll skip over most of the details and focus on how each metal layer is constructed, layer by layer.
First, a uniform metal layer is constructed over the silicon wafer.
Next, the desired pattern is produced on the surface using a process called photolithography:
a light-sensitive chemical called &#34;resist&#34;
is applied to the wafer and exposed to light through a patterned mask. 
The light hardens the resist, creating a protective coating with the pattern of the desired wiring.
Finally, the unprotected metal is etched away, leaving the wiring.</p>
<p>In the early days of integrated circuits, the metal was removed with liquid acids, a process called wet etching.
Inconveniently, wet etching tended to eat away metal underneath the edges of the mask, which became a problem as integrated circuits
became denser and the wires needed to be thinner.
The solution was dry etch, using a plasma to remove the metal.
By applying a large voltage to plates above and below the chip, a gas such as HCl is ionized into a highly reactive plasma.
This plasma attacks the surface (unless it is protected by the resist), removing the unwanted metal.
The advantage of dry etching is that it can act vertically (anisotropically), providing more control over the line width.</p>
<p>Although plasma etching improved the etching process, it caused another problem: plasma-induced oxide damage, also
called the &#34;antenna effect.&#34;<span id="fnref:antenna"><a href="#fn:antenna">3</a></span>
The problem is that long metal wires on the chip could pick up an electrical charge from the plasma, producing a large voltage.
As described earlier, the thin oxide layer under a transistor&#39;s gate is sensitive to voltage damage.
The voltage induced by the plasma can destroy the transistor by blowing a hole through the gate oxide or
it can degrade the transistor&#39;s performance by embedding charges inside the oxide layer.<span id="fnref:damage"><a href="#fn:damage">4</a></span></p>
<p>Several factors affect the risk of damage from the antenna effect.
First, only the transistor&#39;s gate is sensitive to the induced voltage, due to the oxide layer.
If the wire is also connected to a transistor&#39;s source or drain, the wire is &#34;safe&#34; since the source and drain provide
connections to the chip&#39;s substrate, allowing the charge to dissipate harmlessly.
Note that when the chip is completed, every transistor gate is connected to another transistor&#39;s source or drain (which provides
the signal to the gate), so there is no risk of damage. 
Thus, the problem can only occur during manufacturing, with a metal line that is connected to a gate on one end but isn&#39;t
connected on the other end.
Moreover, the highest layer of metal is &#34;safe&#34; since everything is connected at that point.
Another factor is that the induced voltage is proportional to the length of the metal wire, so short wires don&#39;t pose a risk.
Finally, only the metal layer currently being etched poses a risk; since the lower layers are
insulated by the thick oxide between layers, they won&#39;t pick up charge.</p>
<p>These factors motivate several ways to prevent antenna problems.<span id="fnref:papers"><a href="#fn:papers">5</a></span>
First, a long wire can be broken into shorter segments, connected by jumpers on a higher layer.
Second, moving long wires to the top metal layer eliminates problems.<span id="fnref:top-metal"><a href="#fn:top-metal">6</a></span>
Third, diodes can be added to drain the charge from the wire; these are called &#34;antenna diodes&#34;.
When the chip is in use, the antenna diodes are reverse-biased so they have no electrical effect.
But during manufacturing, the antenna diodes let charge flow to the substrate before it
causes problems.</p>
<p>The third solution, the antenna diodes, explains the mysterious connections that I saw in the Pentium.
In the diagram below, these diodes are visible on the die as square regions of doped silicon.
The larger regions of doped silicon form PMOS transistors (upper) and NMOS transistors (lower). 
The polysilicon lines are faintly visible; they form transistor gates where they cross the doped silicon.
(For this photo, I removed all the metal wiring.)</p>
<p><a href="https://static.righto.com/images/pentium-antenna/silicon-diagram.jpg"><img alt="Closeup of the Pentium die showing transistors. The metal and polysilicon layers have been removed to show the silicon." height="574" src="https://static.righto.com/images/pentium-antenna/silicon-diagram-w450.jpg" title="Closeup of the Pentium die showing transistors. The metal and polysilicon layers have been removed to show the silicon." width="450"/></a></p><p>Closeup of the Pentium die showing transistors. The metal and polysilicon layers have been removed to show the silicon.</p>
<p>Confusingly, the antenna diodes look almost identical to &#34;well taps&#34;, connections from the substrate to the chip&#39;s positive voltage supply,
but have a completely different purpose.
In the Pentium, the PMOS transistors are 
constructed in &#34;wells&#34; of N-type silicon.
These wells must be raised to the chip&#39;s positive voltage, so there are numerous well tap connections
from the positive supply to
the wells.
The well taps consist of squares of N+ doped silicon in the the N-type silicon well, providing an electrical connection.
On the other hand, the antenna diodes also consist of N+ doped silicon, but embedded in P-type silicon.
This forms a P-N junction that creates the diode.</p>
<p>In the Pentium, antenna diodes are used for only a small fraction of the wiring. The diodes require extra area on the
die, so they are used only when necessary. Most of the antenna problems on the Pentium were apparently resolved through
routing.
Although the antenna diodes are relatively rare, they are still frequent enough that they caught my attention.</p>
<p>Antenna effects are still an issue in modern integrated circuits.
Integrated circuit fabricators provide rules on the maximum allowable size of antenna wires for a particular manufacturing process.<span id="fnref:rules"><a href="#fn:rules">7</a></span>
Software checks the design to ensure that the antenna rules are not violated, modifying the routing and inserting diodes as
necessary.
Violating the antenna rules can result in damaged chips and a very low yield, so it&#39;s more than just a theoretical issue.</p>
<p>Thanks to <a href="https://www.reddit.com/r/chipdesign/comments/1gwkm65/pentium_why_are_signal_lines_connected_to_the/">/r/chipdesign</a> 
and Discord for discussion.
If you&#39;re interested in the Pentium, I&#39;ve written about <a href="https://www.righto.com/2024/07/pentium-standard-cells.html">standard cells</a> in the Pentium, and the Pentium as a <a href="https://www.righto.com/2024/08/pentium-navajo-fairchild-shiprock.html">Navajo rug</a>.
Follow me on Mastodon (<a href="https://oldbytes.space/@kenshirriff">@<span data-cfemail="b9d2dcd7cad1d0cbcbd0dfdff9d6d5dddbc0cddcca97cac9d8dadc">[emailÂ protected]</span></a>) or Bluesky (<a href="https://bsky.app/profile/righto.com">@righto.com</a>)
or <a href="http://www.righto.com/feeds/posts/default">RSS</a> for updates.</p>
<h2>Notes and references</h2>


</div></div>
  </body>
</html>
