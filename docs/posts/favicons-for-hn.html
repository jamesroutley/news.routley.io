<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://gist.github.com/frabert/48b12088441f6195ea9292c2a5a77e3a">Original</a>
    <h1>Show HN: Favicons for HN</h1>
    
    <div id="readability-page-1" class="page"><div>
            

  <div>
    <p><a data-hovercard-type="user" data-hovercard-url="/users/frabert/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/frabert"><img src="https://avatars.githubusercontent.com/u/1268384?s=80&amp;v=4" width="40" height="40" alt="@frabert"/></a>
    </p>
    <div id="gistcomment-4138989">
        


        <div>
  <task-lists disabled="" sortable="">
    <div>
      <p dir="auto">Add this script to GreaseMonkey or any other way to automatically execute it on page load, and enjoy having favicons of the link&#39;s url on the side of the submission title</p>
<p dir="auto">EDIT: Some people have noted that this does not work on Chrome. Per <a href="https://news.ycombinator.com/item?id=31096424" rel="nofollow">this</a> comment, try adding a <code>// @inject-into content</code> header and use ViolentMonkey instead.</p>
    </div>
  </task-lists>
  
</div>


        
    
</div>

  </div>
  <div>
    <p><a data-hovercard-type="user" data-hovercard-url="/users/frabert/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/frabert"><img src="https://avatars.githubusercontent.com/u/1268384?s=80&amp;v=4" width="40" height="40" alt="@frabert"/></a>
    </p>
    <div id="gistcomment-4139009">
        


        <div>
  <task-lists disabled="" sortable="">
    <p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/1268384/164227838-d4c4387c-05bb-4713-ba40-6c1daf24a6dd.png"><img src="https://user-images.githubusercontent.com/1268384/164227838-d4c4387c-05bb-4713-ba40-6c1daf24a6dd.png" alt="image"/></a></p>
  </task-lists>
  
</div>


        
    
</div>

  </div>
  <div>
    <p><a data-hovercard-type="user" data-hovercard-url="/users/corentinbettiol/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/corentinbettiol"><img src="https://avatars.githubusercontent.com/u/45763865?s=80&amp;v=4" width="40" height="40" alt="@corentinbettiol"/></a>
    </p>
    <div id="gistcomment-4139060">
        


        <div>
  <task-lists disabled="" sortable="">
    <div>
      <div><pre><span>// ==UserScript==</span>
<span>// <span>@name</span>         Favicons for HN</span>
<span>// <span>@version</span>      1.1</span>
<span>// <span>@grant</span>        none</span>
<span>// <span>@homepageURL</span>  https://gist.github.com/frabert/48b12088441f6195ea9292c2a5a77e3a#file-favicons-js</span>
<span>// <span>@match</span>        https://*.ycombinator.com/*</span>
<span>// ==/UserScript==</span>

<span>for</span><span>(</span><span>let</span> <span>link</span> <span>of</span> <span>document</span><span>.</span><span>links</span><span>)</span> <span>{</span>
  <span>if</span><span>(</span><span>!</span><span>link</span><span>.</span><span>href</span><span>.</span><span>match</span><span>(</span><span>&#34;ycombinator.com&#34;</span><span>)</span> <span>&amp;&amp;</span> <span>!</span><span>link</span><span>.</span><span>href</span><span>.</span><span>match</span><span>(</span><span>&#34;javascript:void&#34;</span><span>)</span> <span>&amp;&amp;</span> <span>link</span><span>.</span><span>firstChild</span><span>.</span><span>nodeName</span> <span>!==</span> <span>&#34;IMG&#34;</span><span>)</span><span>{</span>
    <span>const</span> <span>domain</span> <span>=</span> <span>new</span> <span>URL</span><span>(</span><span>link</span><span>.</span><span>href</span><span>)</span><span>.</span><span>hostname</span>
    <span>const</span> <span>imageUrl</span> <span>=</span> <span>`https://icons.duckduckgo.com/ip3/<span><span>${</span><span>domain</span><span>}</span></span>.ico`</span>
    <span>const</span> <span>image</span> <span>=</span> <span>document</span><span>.</span><span>createElement</span><span>(</span><span>&#39;img&#39;</span><span>)</span>
    <span>image</span><span>.</span><span>src</span> <span>=</span> <span>imageUrl</span>
    <span>image</span><span>.</span><span>width</span> <span>=</span> <span>12</span>
    <span>image</span><span>.</span><span>height</span> <span>=</span> <span>12</span>
    <span>image</span><span>.</span><span>style</span><span>.</span><span>paddingRight</span> <span>=</span> <span>&#39;0.25em&#39;</span>
    <span>image</span><span>.</span><span>style</span><span>.</span><span>paddingLeft</span> <span>=</span> <span>&#39;0.25em&#39;</span>
    <span>link</span><span>.</span><span>prepend</span><span>(</span><span>image</span><span>)</span>
  <span>}</span>
<span>}</span></pre></div>
<p dir="auto">This update show smaller favicons, and show them for links in comments too. It prevents adding new images when going back in history too :)</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://user-images.githubusercontent.com/45763865/164227329-516709b0-0154-4591-b839-980c02358576.png"><img src="https://user-images.githubusercontent.com/45763865/164227329-516709b0-0154-4591-b839-980c02358576.png" alt="image"/></a></p>
    </div>
  </task-lists>
  
</div>


        
    
</div>

  </div>
  <div>
    <p><a data-hovercard-type="user" data-hovercard-url="/users/samber/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/samber"><img src="https://avatars.githubusercontent.com/u/2951285?s=80&amp;v=4" width="40" height="40" alt="@samber"/></a>
    </p>
    

  </div>
  <div>
    <p><a data-hovercard-type="user" data-hovercard-url="/users/AntouanK/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/AntouanK"><img src="https://avatars.githubusercontent.com/u/4569111?s=80&amp;v=4" width="40" height="40" alt="@AntouanK"/></a>
    </p>
    <div id="gistcomment-4139066">
        


        <div>
  <task-lists disabled="" sortable="">
    <div>
      <p dir="auto">great idea!</p>
<p dir="auto"><a data-hovercard-type="user" data-hovercard-url="/users/frabert/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/frabert">@frabert</a> would be ok to steal it for my HN reader?</p>
    </div>
  </task-lists>
  
</div>


        
    
</div>

  </div>
  <div>
    <p><a data-hovercard-type="user" data-hovercard-url="/users/frabert/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/frabert"><img src="https://avatars.githubusercontent.com/u/1268384?s=80&amp;v=4" width="40" height="40" alt="@frabert"/></a>
    </p>
    

  </div>
  <div>
    <p><a data-hovercard-type="user" data-hovercard-url="/users/maxtheaxe/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/maxtheaxe"><img src="https://avatars.githubusercontent.com/u/20795292?s=80&amp;v=4" width="40" height="40" alt="@maxtheaxe"/></a>
    </p>
    <div id="gistcomment-4139079">
        


        <div>
  <task-lists disabled="" sortable="">
    <div>
      <p dir="auto">added a quick check for existing favicons on the page (e.g. if you hit the back button)</p>
<pre><code>// ==UserScript==
// @name     Favicons for HN
// @version  1.1
// @grant    none
// @match https://*.ycombinator.com/*
// ==/UserScript==

// check for existing favicons (in case of back button)
var favicons = document.getElementsByClassName(&#39;favicon-script&#39;);
if (!(favicons.length &gt; 0)) {
  // add favicons alongside each post title
  for(let link of document.querySelectorAll(&#39;.titlelink&#39;)) {
    const domain = new URL(link.href).hostname
    const imageUrl = `https://icons.duckduckgo.com/ip3/${domain}.ico`
    const image = document.createElement(&#39;img&#39;)
    image.src = imageUrl
    image.className = &#39;favicon-script&#39;
    image.width = 16
    image.height = 16
    image.style.paddingRight = &#39;0.25em&#39;
    image.style.paddingLeft = &#39;0.25em&#39;
    link.prepend(image)
  }
}
</code></pre>
    </div>
  </task-lists>
  
</div>


        
    
</div>

  </div>
  <div>
    <p><a data-hovercard-type="user" data-hovercard-url="/users/seguri/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/seguri"><img src="https://avatars.githubusercontent.com/u/2405157?s=80&amp;v=4" width="40" height="40" alt="@seguri"/></a>
    </p>
    <div id="gistcomment-4139080">
        


        <div>
  <task-lists disabled="" sortable="">
    <div>
      <p dir="auto">This can&#39;t work just as a bookmarklet, right?</p>
<pre><code>Refused to load the image &#39;https://icons.duckduckgo.com/ip3/gist.github.com.ico&#39; because it violates the following Content Security Policy directive: &#34;img-src &#39;self&#39; https://account.ycombinator.com&#34;.
</code></pre>
    </div>
  </task-lists>
  
</div>


        
    
</div>

  </div>
  <div>
    <p><a data-hovercard-type="user" data-hovercard-url="/users/frabert/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/frabert"><img src="https://avatars.githubusercontent.com/u/1268384?s=80&amp;v=4" width="40" height="40" alt="@frabert"/></a>
    </p>
    <div id="gistcomment-4139083">
        


        <div>
  <task-lists disabled="" sortable="">
    <p dir="auto"><a data-hovercard-type="user" data-hovercard-url="/users/seguri/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/seguri">@seguri</a> Indeed, this doesn&#39;t seem to work for Chrome</p>
  </task-lists>
  
</div>


        
    
</div>

  </div>
  <div>
    <p><a data-hovercard-type="user" data-hovercard-url="/users/corentinbettiol/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/corentinbettiol"><img src="https://avatars.githubusercontent.com/u/45763865?s=80&amp;v=4" width="40" height="40" alt="@corentinbettiol"/></a>
    </p>
    <div id="gistcomment-4139095">
        


        <div>
  <task-lists disabled="" sortable="">
    <div>
      <blockquote>
<p dir="auto">added a quick check for existing favicons on the page (e.g. if you hit the back button)</p>
</blockquote>
<p dir="auto">Why add a new class when you can check that the first child of the link is not an img?</p>
<div><pre><span>link</span><span>.</span><span>firstChild</span><span>.</span><span>nodeName</span> <span>!==</span> <span>&#34;IMG&#34;</span></pre></div>
    </div>
  </task-lists>
  
</div>


        
    
</div>

  </div>
  <div>
    <p><a data-hovercard-type="user" data-hovercard-url="/users/GTP95/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/GTP95"><img src="https://avatars.githubusercontent.com/u/9197945?s=80&amp;v=4" width="40" height="40" alt="@GTP95"/></a>
    </p>
    <div id="gistcomment-4139127">
        


        <div>
  <task-lists disabled="" sortable="">
    <p dir="auto">This code would be useful to make browser extensions and similar, could you please specify under which license it is shared so everyone knows whether he/she can use it or not?</p>
  </task-lists>
  
</div>


        
    
</div>

  </div>
  <div>
    <p><a data-hovercard-type="user" data-hovercard-url="/users/frabert/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/frabert"><img src="https://avatars.githubusercontent.com/u/1268384?s=80&amp;v=4" width="40" height="40" alt="@frabert"/></a>
    </p>
    <div id="gistcomment-4139150">
        


        <div>
  <task-lists disabled="" sortable="">
    <p dir="auto"><a data-hovercard-type="user" data-hovercard-url="/users/GTP95/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/GTP95">@GTP95</a> This script is so simple I don&#39;t think it would necessitate any kind of approval, but consider it public domain. If public domain is not a thing in your country, consider it under the zlib license.</p>
  </task-lists>
  
</div>


        
    
</div>

  </div>
  <div>
    <p><a data-hovercard-type="user" data-hovercard-url="/users/BILY5354/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/BILY5354"><img src="https://avatars.githubusercontent.com/u/46767838?s=80&amp;v=4" width="40" height="40" alt="@BILY5354"/></a>
    </p>
    <div id="gistcomment-4139171">
        


        <div>
  <task-lists disabled="" sortable="">
    <p dir="auto">I added the script and the result is as follows. Why it doesn&#39;t work?</p>
  </task-lists>
  
</div>


        
    
</div>

  </div>
  <div>
    <p><a data-hovercard-type="user" data-hovercard-url="/users/frabert/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/frabert"><img src="https://avatars.githubusercontent.com/u/1268384?s=80&amp;v=4" width="40" height="40" alt="@frabert"/></a>
    </p>
    

  </div>
  <div>
    <p><a data-hovercard-type="user" data-hovercard-url="/users/agamm/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/agamm"><img src="https://avatars.githubusercontent.com/u/1269911?s=80&amp;v=4" width="40" height="40" alt="@agamm"/></a>
    </p>
    <div id="gistcomment-4139193">
        


        <div>
  <task-lists disabled="" sortable="">
    <p dir="auto">Waiting for a Firefox extension :)</p>
  </task-lists>
  
</div>


        
    
</div>

  </div>
  <div>
    <p><a data-hovercard-type="user" data-hovercard-url="/users/BILY5354/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://gist.github.com/BILY5354"><img src="https://avatars.githubusercontent.com/u/46767838?s=80&amp;v=4" width="40" height="40" alt="@BILY5354"/></a>
    </p>
    

  </div>


<!-- Rendered timeline since 2022-04-20 07:16:04 -->


          </div></div>
  </body>
</html>
