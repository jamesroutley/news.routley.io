<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/tomhrr/cosh">Original</a>
    <h1>Show HN: Cosh – concatenative command-line shell</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><h2 dir="auto"><a id="user-content-cosh" aria-hidden="true" href="#cosh"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>cosh</h2>
<p dir="auto"><a href="https://github.com/tomhrr/cosh/actions"><img src="https://github.com/tomhrr/cosh/workflows/build/badge.svg?branch=main" alt="Build Status"/></a>
<a href="https://github.com/mkenney/software-guides/blob/master/STABILITY-BADGES.md#beta"><img src="https://camo.githubusercontent.com/a2cdc75228ef25329ce8b24d1cc93d37f43f41e163493506bb887613515194b4/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f73746162696c6974792d626574612d3333626266662e737667" alt="stability-beta" data-canonical-src="https://img.shields.io/badge/stability-beta-33bbff.svg"/></a></p>
<p dir="auto">cosh is a concatenative command-line shell.</p>
<h3 dir="auto"><a id="user-content-why" aria-hidden="true" href="#why"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Why?</h3>
<p dir="auto">Basic shell operations like <code>ls</code>, <code>ps</code>, <code>stat</code>, and so on are
implemented as functions that return first-class values, as opposed to
relying on executables that return text streams.  This makes working
with the results simpler:</p>
<ul dir="auto">
<li>
<p dir="auto">Find files matching a path, and search them for data:</p>
<ul dir="auto">
<li><strong>sh</strong>:     <code>find . -iname &#39;*test*&#39; -print0 | xargs -0 grep data</code></li>
<li><strong>cosh</strong>: <code>lsr; [test m] grep; [f&lt;; [data m] grep] map</code></li>
</ul>
</li>
<li>
<p dir="auto">Find the total size of all files in the current directory:</p>
<ul dir="auto">
<li><strong>sh</strong>:     <code>ls | xargs stat -c %s | awk &#39;{s+=$1} END {print s}&#39; -</code></li>
<li><strong>cosh</strong>: <code>ls; [is-dir; not] grep; [stat; size get] map; sum</code></li>
</ul>
</li>
</ul>
<p dir="auto">A small set of versatile primitives means that less needs to be
remembered when compared with typical shells (see e.g. the various
flags for <code>cut(1)</code>), though some commands may be longer as a result:</p>
<ul dir="auto">
<li>
<p dir="auto">Get the second and third columns from each row of a CSV file:</p>
<ul dir="auto">
<li><strong>sh</strong>:     <code>cut -d, -f2,3 test-data/csv</code></li>
<li><strong>cosh</strong>: <code>test-data/csv f&lt;; [chomp; , split; (1 2) get] map</code></li>
</ul>
</li>
<li>
<p dir="auto">Sort files by modification time:</p>
<ul dir="auto">
<li><strong>sh</strong>:     <code>ls -tr</code></li>
<li><strong>cosh</strong>: <code>ls; [[stat; mtime get] 2 apply; &lt;=&gt;] sortp</code></li>
</ul>
</li>
</ul>
<p dir="auto">Arithmetical operators and XML/JSON/CSV encoding/decoding functions
reduce the number of times that it becomes necessary to use a more
full-featured programming language or a third-party executable:</p>
<ul dir="auto">
<li>
<p dir="auto">Increment floating-point numbers in file:</p>
<ul dir="auto">
<li><strong>sh</strong>:     <code>sed &#39;s/$/+10/&#39; nums | bc</code></li>
<li><strong>cosh</strong>: <code>nums f&lt;; [chomp; 10 +] map;</code></li>
</ul>
</li>
<li>
<p dir="auto">Get the first value from the &#34;zxcv&#34; array member of a JSON file:</p>
<ul dir="auto">
<li><strong>sh</strong>:     <code>jq .zxcv[0] test-data/json2</code></li>
<li><strong>cosh</strong>: <code>test-data/json2 f&lt;; from-json; zxcv get; 0 get</code></li>
</ul>
</li>
</ul>
<p dir="auto">It also integrates with external executable calls, where that is
necessary:</p>
<ul dir="auto">
<li>Print certificate data:
<ul dir="auto">
<li><strong>bash</strong>: <code>for i in `find . -iname &#39;*.pem&#39;`; do openssl x509 -in $i -text -noout; done</code></li>
<li><strong>cosh</strong>: <code>lsr; [pem$ m] grep; [{openssl x509 -in {} -text -noout}] map;</code></li>
</ul>
</li>
</ul>
<h3 dir="auto"><a id="user-content-install" aria-hidden="true" href="#install"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Install</h3>
<h4 dir="auto"><a id="user-content-dependencies" aria-hidden="true" href="#dependencies"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Dependencies</h4>
<ul dir="auto">
<li><a href="https://github.com/rust-lang/rust">Rust</a></li>
</ul>
<h3 dir="auto"><a id="user-content-supported-systems" aria-hidden="true" href="#supported-systems"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Supported systems</h3>
<p dir="auto">This has been tested on Linux (Debian 12), but should work on any
Linux/macOS/BSD system where Rust can be built.</p>
<h4 dir="auto"><a id="user-content-building" aria-hidden="true" href="#building"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Building</h4>
<div data-snippet-clipboard-copy-content="make
make test
sudo make install"><pre><code>make
make test
sudo make install
</code></pre></div>
<p dir="auto">Apart from the core <code>cosh</code> executable, this will also install a
compiled library of core functions (<code>rt.chc</code>).</p>
<h4 dir="auto"><a id="user-content-running" aria-hidden="true" href="#running"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Running</h4>
<div data-snippet-clipboard-copy-content="user@host:/$ cosh
/$ hello println;
hello"><pre><code>user@host:/$ cosh
/$ hello println;
hello
</code></pre></div>
<h3 dir="auto"><a id="user-content-documentation" aria-hidden="true" href="#documentation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Documentation</h3>
<p dir="auto"><a href="https://github.com/tomhrr/cosh/blob/main/doc/all.md">Documentation</a></p>
<h3 dir="auto"><a id="user-content-licence" aria-hidden="true" href="#licence"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Licence</h3>
<p dir="auto">See <a href="https://github.com/tomhrr/cosh/blob/main/LICENCE">LICENCE</a>.</p>
</article>
          </div></div>
  </body>
</html>
