<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/haimgel/display-switch">Original</a>
    <h1>Display-switch: Turn a $30 USB switch into a full-featured multi-monitor KVM</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
          <article itemprop="text"><p dir="auto"><a href="https://github.com/haimgel/display-switch/actions"><img src="https://github.com/haimgel/display-switch/workflows/build/badge.svg?branch=master" alt="build"/></a>
<a href="https://github.com/haimgel/display-switch/blob/master/LICENSE"><img src="https://camo.githubusercontent.com/172d2bdb6f962085f4cf0d8fbadb13054b7941ca6270519456840bc8a4fe72d0/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f6861696d67656c2f646973706c61792d737769746368" alt="GitHub license" data-canonical-src="https://img.shields.io/github/license/haimgel/display-switch"/></a></p>

<p dir="auto">This utility watches for USB device connect/disconnect events and switches monitor inputs via DDC/CI. This turns
a simple USB switch into a full-fledged KVM solution: press one button on your USB switch and all your monitors
connect to a different input.</p>
<p dir="auto">It is supposed to be installed on all computers that could be connected to these monitors, since the app only switches
monitors &#34;one way&#34; and relies on itself running on the other computers to switch it &#34;the other way&#34; as needed.</p>
<h2 dir="auto"><a id="user-content-platforms-supported" aria-hidden="true" href="#platforms-supported"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Platforms supported</h2>
<p dir="auto">The app should function on MacOS, Windows, and Linux. Most of the code is in Rust, with the exception of DDC support
on MacOS, which is done via statically-linked Swift library.</p>
<h2 dir="auto"><a id="user-content-configuration" aria-hidden="true" href="#configuration"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Configuration</h2>
<p dir="auto">The configuration is pretty similar on all platforms:</p>
<p dir="auto">On MacOS: the configuration file is expected in <code>~/Library/Preferences/display-switch.ini</code>
On Windows: the configuration file is expected in <code>%APPDATA%\display-switch\display-switch.ini</code>
On Linux: the configuration file is expected in <code>$XDG_CONFIG_HOME/display-switch/display-switch.ini</code> or <code>~/.config/display-switch/display-switch.ini</code></p>
<p dir="auto">Configuration file settings:</p>
<div data-snippet-clipboard-copy-content="  usb_device = &#34;1050:0407&#34;
  on_usb_connect = &#34;Hdmi1&#34;
  on_usb_disconnect = &#34;Hdmi2&#34;"><pre>  <span>usb_device</span> = <span><span>&#34;</span>1050:0407<span>&#34;</span></span>
  <span>on_usb_connect</span> = <span><span>&#34;</span>Hdmi1<span>&#34;</span></span>
  <span>on_usb_disconnect</span> = <span><span>&#34;</span>Hdmi2<span>&#34;</span></span></pre></div>
<p dir="auto"><code>usb_device</code> is which USB device to watch (vendor id / device id in hex), and <code>on_usb_connect</code> is which monitor input
to switch to, when this device is connected. Supported values are <code>Hdmi1</code>, <code>Hdmi2</code>, <code>DisplayPort1</code>, <code>DisplayPort2</code>, <code>Dvi1</code>.
If your monitor has an USB-C port, it&#39;s usually reported as <code>DisplayPort2</code>. Input can also be specified as a &#34;raw&#34;
decimal or hexadecimal value: <code>on_usb_connect = 0x10</code></p>
<p dir="auto">The optional <code>on_usb_disconnect</code> settings allows to switch in the other direction when the USB device is disconnected.
Note that the preferred way is to have this app installed on both computers. Switching &#34;away&#34; is problematic: if the
other computer has put the monitors to sleep, they will switch immediately back to the original input.</p>
<h3 dir="auto"><a id="user-content-different-inputs-on-different-monitors" aria-hidden="true" href="#different-inputs-on-different-monitors"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Different inputs on different monitors</h3>
<p dir="auto"><code>display-switch</code> supports per-monitor configuration: add one or more monitor-specific configuration sections to set
monitor-specific inputs. For example:</p>
<div data-snippet-clipboard-copy-content="on_usb_connect = &#34;DisplayPort2&#34;
on_usb_disconnect = &#34;Hdmi1&#34;

[monitor1]
monitor_id = &#34;len&#34;
on_usb_connect = &#34;DisplayPort1&#34;

[monitor2]
monitor_id = &#34;dell&#34;
on_usb_connect = &#34;hdmi2&#34;"><pre><span>on_usb_connect</span> = <span><span>&#34;</span>DisplayPort2<span>&#34;</span></span>
<span>on_usb_disconnect</span> = <span><span>&#34;</span>Hdmi1<span>&#34;</span></span>

<span>[monitor1]</span>
<span>monitor_id</span> = <span><span>&#34;</span>len<span>&#34;</span></span>
<span>on_usb_connect</span> = <span><span>&#34;</span>DisplayPort1<span>&#34;</span></span>

<span>[monitor2]</span>
<span>monitor_id</span> = <span><span>&#34;</span>dell<span>&#34;</span></span>
<span>on_usb_connect</span> = <span><span>&#34;</span>hdmi2<span>&#34;</span></span></pre></div>
<p dir="auto"><code>monitor_id</code> specifies a case-insensitive substring to match against the monitor ID. For example, &#39;len&#39; would match
<code>LEN P27u-10 S/N 1144206897</code> monitor ID. If more than one section has a match, a first one will be used.
<code>on_usb_connect</code> and <code>on_usb_disconnect</code>, if defined, take precedence over global defaults.</p>
<h3 dir="auto"><a id="user-content-running-external-commands" aria-hidden="true" href="#running-external-commands"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Running external commands</h3>
<p dir="auto"><code>display-switch</code> supports running external commands upon connection or disconnection of USB devices. This configuration
can be global (runs every time a configured USB device is connected or disconnected) or per-monitor (runs only when
a given monitor is being switched):</p>
<div data-snippet-clipboard-copy-content="usb_device = &#34;1050:0407&#34;
on_usb_connect = &#34;Hdmi1&#34;
on_usb_disconnect = &#34;DisplayPort2&#34;
on_usb_connect_execute = &#34;echo connected&#34;
on_usb_disconnect_execute = &#34;echo disconnected&#34;

[monitor1]
monitor_id=&#34;foobar&#34;
on_usb_connect_execute = &#34;echo usb connected, monitor &#39;foobar&#39; being switched&#34;
on_usb_disconnect_execute = &#34;&#39;c:\\program files\\my app.exe&#39; --parameter&#34;"><pre><span>usb_device</span> = <span><span>&#34;</span>1050:0407<span>&#34;</span></span>
<span>on_usb_connect</span> = <span><span>&#34;</span>Hdmi1<span>&#34;</span></span>
<span>on_usb_disconnect</span> = <span><span>&#34;</span>DisplayPort2<span>&#34;</span></span>
<span>on_usb_connect_execute</span> = <span><span>&#34;</span>echo connected<span>&#34;</span></span>
<span>on_usb_disconnect_execute</span> = <span><span>&#34;</span>echo disconnected<span>&#34;</span></span>

<span>[monitor1]</span>
<span>monitor_id</span>=<span><span>&#34;</span>foobar<span>&#34;</span></span>
<span>on_usb_connect_execute</span> = <span><span>&#34;</span>echo usb connected, monitor &#39;foobar&#39; being switched<span>&#34;</span></span>
<span>on_usb_disconnect_execute</span> = <span><span>&#34;</span>&#39;c:\\program files\\my app.exe&#39; --parameter<span>&#34;</span></span></pre></div>
<p dir="auto">Notes:</p>
<ol dir="auto">
<li>External applications are executed as the same user that started <code>display-switch</code>.</li>
<li>This program supports splitting supplied configuration into application name and parameters, but no other shell features are supported.</li>
<li>If the application path contains spaces, surround the full file path with single quotes.</li>
<li>On Windows, escape the backslashes (replace \ with \, see the example above).</li>
</ol>
<h3 dir="auto"><a id="user-content-usb-device-ids" aria-hidden="true" href="#usb-device-ids"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>USB Device IDs</h3>
<h4 dir="auto"><a id="user-content-windows" aria-hidden="true" href="#windows"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Windows</h4>
<p dir="auto">To locate the ID of your USB device ID on Windows:</p>
<ol dir="auto">
<li>Open Device Manager</li>
<li>Locate the USB device, view the properties</li>
<li>Switch to the <em>Details</em> tab and select <em>Hardware IDs</em> in the Property dropdown</li>
<li>You should see a value similar to <code>HID\VID_046D&amp;PID_C52B&amp;MI_00</code> (the exact values will differ) - the USB device ID is a combination of the <em>Vendor ID</em> and the <em>Product ID</em> - for example, in this case it would be <code>046D:C52B</code></li>
</ol>
<h4 dir="auto"><a id="user-content-macos" aria-hidden="true" href="#macos"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MacOS</h4>
<p dir="auto">To locate the ID of your USB device ID on MacOS, open a terminal and run the following:</p>
<div data-snippet-clipboard-copy-content="brew install lsusb

$ lsusb &gt; a
&lt;switch the usb dock here&gt;
$ lsusb &gt; b
$ opendiff a b"><pre>brew install lsusb

$ lsusb <span>&gt;</span> a
<span>&lt;</span>switch the usb dock here<span>&gt;</span>
$ lsusb <span>&gt;</span> b
$ opendiff a b</pre></div>
<p dir="auto">In the command output, the highlighted lines show you which USB IDs are most relevant.</p>
<h4 dir="auto"><a id="user-content-linux" aria-hidden="true" href="#linux"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Linux</h4>
<p dir="auto">To locate the ID of your USB device on Linux, first install <code>lsusb</code>, which your Linux
distro should have a package for. (On Debian, Ubuntu and RedHat, the package name is <code>usbutils</code>.)
Then, in a terminal, run the following:</p>
<div data-snippet-clipboard-copy-content="$ lsusb &gt; a
&lt;switch the usb dock here&gt;
$ lsusb &gt; b
$ diff -u a b"><pre><code>$ lsusb &gt; a
&lt;switch the usb dock here&gt;
$ lsusb &gt; b
$ diff -u a b
</code></pre></div>
<p dir="auto">The diff output will show which USB IDs are most relevant.</p>
<h2 dir="auto"><a id="user-content-logging" aria-hidden="true" href="#logging"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Logging</h2>
<ul dir="auto">
<li>On MacOS: the log file is written to <code>/Users/USERNAME/Library/Logs/display-switch/display-switch.log</code></li>
<li>On Windows: the log file is written to <code>%LOCALAPPDATA%\display-switch\display-switch.log</code></li>
<li>On Linux: The log file is written to <code>$XDG_DATA_HOME/display-switch/display-switch.log</code>
or <code>~/.local/share/display-switch/display-switch.log</code></li>
</ul>
<h2 dir="auto"><a id="user-content-building-from-source" aria-hidden="true" href="#building-from-source"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Building from source</h2>
<h3 dir="auto"><a id="user-content-windows-1" aria-hidden="true" href="#windows-1"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Windows</h3>
<p dir="auto"><a href="https://www.rust-lang.org/tools/install" rel="nofollow">Install Rust</a>, then do <code>cargo build --release</code></p>
<h3 dir="auto"><a id="user-content-macos-1" aria-hidden="true" href="#macos-1"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MacOS</h3>
<p dir="auto"><a href="https://developer.apple.com/xcode/" rel="nofollow">Install Xcode</a>, <a href="https://www.rust-lang.org/tools/install" rel="nofollow">install Rust</a>, then do
<code>cargo build --release</code></p>
<h3 dir="auto"><a id="user-content-linux-1" aria-hidden="true" href="#linux-1"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Linux</h3>
<p dir="auto"><a href="https://www.rust-lang.org/tools/install" rel="nofollow">Install Rust</a>, then do <code>cargo build --release</code></p>
<h2 dir="auto"><a id="user-content-running-on-startup" aria-hidden="true" href="#running-on-startup"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Running on startup</h2>
<h3 dir="auto"><a id="user-content-windows-2" aria-hidden="true" href="#windows-2"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Windows</h3>
<p dir="auto">Copy <code>display_switch.exe</code> from <code>target\release</code> (where it was built in the previous step) to
<code>%APPDATA%\Microsoft\Windows\Start Menu\Programs\Startup</code> (replace Username with your
Windows user name).</p>
<h3 dir="auto"><a id="user-content-macos-2" aria-hidden="true" href="#macos-2"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>MacOS</h3>
<div data-snippet-clipboard-copy-content="  # Get your INI file in order! (see above)
  cp target/release/display_switch /usr/local/bin
  cp dev.haim.display-switch.daemon.plist ~/Library/LaunchAgents/
  launchctl load ~/Library/LaunchAgents/dev.haim.display-switch.daemon.plist"><pre>  <span><span>#</span> Get your INI file in order! (see above)</span>
  cp target/release/display_switch /usr/local/bin
  cp dev.haim.display-switch.daemon.plist <span>~</span>/Library/LaunchAgents/
  launchctl load <span>~</span>/Library/LaunchAgents/dev.haim.display-switch.daemon.plist</pre></div>
<h3 dir="auto"><a id="user-content-linux-2" aria-hidden="true" href="#linux-2"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Linux</h3>
<p dir="auto">Copy built executable:</p>
<div data-snippet-clipboard-copy-content="  cp target/release/display_switch /usr/local/bin"><pre>  cp target/release/display_switch /usr/local/bin</pre></div>
<p dir="auto">Enable read/write access to i2c devices for users in <code>i2c</code> group. Run as root :</p>
<div data-snippet-clipboard-copy-content="groupadd i2c
echo &#39;KERNEL==&#34;i2c-[0-9]*&#34;, GROUP=&#34;i2c&#34;&#39; &gt;&gt; /etc/udev/rules.d/10-local_i2c_group.rules
udevadm control --reload-rules &amp;&amp; udevadm trigger"><pre>groupadd i2c
<span>echo</span> <span><span>&#39;</span>KERNEL==&#34;i2c-[0-9]*&#34;, GROUP=&#34;i2c&#34;<span>&#39;</span></span> <span>&gt;&gt;</span> /etc/udev/rules.d/10-local_i2c_group.rules
udevadm control --reload-rules <span>&amp;&amp;</span> udevadm trigger</pre></div>
<p dir="auto">Then add your user to the i2c group :</p>
<div data-snippet-clipboard-copy-content="sudo usermod -aG i2c $(whoami)"><pre><code>sudo usermod -aG i2c $(whoami)
</code></pre></div>
<p dir="auto">Create a systemd unit file in your user directory (<code>/home/$USER/.config/systemd/user/display-switch.service</code>) with contents</p>
<div data-snippet-clipboard-copy-content="[Unit]
Description=Display switch via USB switch

[Service]
ExecStart=/usr/local/bin/display_switch
Type=simple
StandardOutput=journal
Restart=always

[Install]
WantedBy=default.target"><pre><code>[Unit]
Description=Display switch via USB switch

[Service]
ExecStart=/usr/local/bin/display_switch
Type=simple
StandardOutput=journal
Restart=always

[Install]
WantedBy=default.target
</code></pre></div>
<p dir="auto">Create the config file at <code>/home/$USER/.config/display-switch/display-switch.ini</code>.
Then enable the service with</p>
<div data-snippet-clipboard-copy-content="systemctl --user daemon-reload
systemctl --user enable display-switch.service
systemctl --user start display-switch.service"><pre>systemctl --user daemon-reload
systemctl --user <span>enable</span> display-switch.service
systemctl --user start display-switch.service</pre></div>
</article>
        </div></div>
  </body>
</html>
