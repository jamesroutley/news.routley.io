<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://buttondown.com/hillelwayne/archive/why-not-comments/">Original</a>
    <h1>Why Not Comments</h1>
    
    <div id="readability-page-1" class="page"><div>
                
                    <date>
                        
                            September 10, 2024
                        </date>
                
                
                
                    <h2>
                        Why not &#34;why not&#34; comments? Not why &#34;not comments&#34;
                    </h2>
                

                

                
                    
                        <h2>Logic For Programmers v0.3</h2>
<p><a href="https://leanpub.com/logic/" target="_blank">Now available</a>! It&#39;s a light release as I learn more about formatting a nice-looking book. You can see some of the differences between v2 and v3 <a href="https://bsky.app/profile/hillelwayne.com/post/3l3egdqnqj62o" target="_blank">here</a>.</p>
<h2>Why Not Comments</h2>
<p>Code is written in a structured machine language, comments are written in an expressive human language. The &#34;human language&#34; bit makes comments more expressive and communicative than code. Code has a limited amount of something <em>like</em> human language contained in identifiers. &#34;Comment the why, not the what&#34; means to push as much information as possible into identifiers. <a href="https://buttondown.com/hillelwayne/archive/3866bd6e-22c3-4098-92ef-4d47ef287ed8" target="_blank">Not all &#34;what&#34; can be embedded like this</a>, but a lot can.</p>
<p>In recent years I see more people arguing that <em>whys</em> do not belong in comments either, that they can be embedded into <code>LongFunctionNames</code> or the names of test cases. Virtually all &#34;self-documenting&#34; codebases add documentation through the addition of identifiers.<sup id="fnref:exception"><a href="#fn:exception">1</a></sup></p>
<p>So what&#39;s something in the range of human expression that <em>cannot</em> be represented with more code?</p>
<p>Negative information, drawing attention to what&#39;s <em>not</em> there. The &#34;why nots&#34; of the system.</p>
<h3>A Recent Example</h3>
<p>This one comes from <em>Logic for Programmers</em>. For convoluted technical reasons the epub build wasn&#39;t translating math notation (<code>\forall</code>) into symbols (<code>âˆ€</code>). I wrote a script to manually go through and replace tokens in math strings with unicode equivalents. The easiest way to do this is to call <code>string = string.replace(old, new)</code> for each one of the 16 math symbols I need to replace (some math strings have multiple symbols).</p>
<p>This is incredibly inefficient and I could instead do all 16 replacements in a single pass. But that would be a more complicated solution. So I did the simple way with a comment:</p>
<div><pre><span></span><code>Does 16 passes over each string
BUT there are only 25 math strings in the book so far and most are &lt;5 characters.
So it&#39;s still fast enough.
</code></pre></div>
<p>You can think of this as a &#34;why I&#39;m using slow code&#34;, but you can also think of it as &#34;why not fast code&#34;. It&#39;s calling attention to something that&#39;s <em>not there</em>.</p>
<h3>Why the comment</h3>
<p>If the slow code isn&#39;t causing any problems, why have a comment at all?</p>

<p>Well first of all the code might be a problem later. If a future version of <em>LfP</em> has hundreds of math strings instead of a couple dozen then this build step will bottleneck the whole build. Good to lay a signpost now so I know exactly what to fix later.</p>
<p>But even if the code is fine forever, the comment still does something important: it shows <em>I&#39;m aware of the tradeoff</em>. Say I come back to my project two years from now, open <code>epub_math_fixer.py</code> and see my terrible slow code. I ask &#34;why did I write something so terrible?&#34; Was it inexperience, time crunch, or just a random mistake?</p>
<p>The negative comment tells me that I <em>knew</em> this was slow code, looked into the alternatives, and decided against optimizing. I don&#39;t have to spend a bunch of time reinvestigating only to come to the same conclusion. </p>
<h2>Why this can&#39;t be self-documented</h2>
<p>When I was first playing with this idea, someone told me that my negative comment isn&#39;t necessary, just name the function <code>RunFewerTimesSlowerAndSimplerAlgorithmAfterConsideringTradeOffs</code>. Aside from the issues of being long, not explaining the tradeoffs, and that I&#39;d have to change it everywhere if I ever optimize the code... This would make the code <em>less</em> self-documenting. It doesn&#39;t tell you what the function actually <em>does</em>.</p>
<p>The core problem is that function and variable identifiers can only contain one clause of information. I can&#39;t store &#34;what the function does&#34; and &#34;what tradeoffs it makes&#34; in the same identifier. </p>
<p>What about replacing the comment with a test. I guess you could make a test that greps for math blocks in the book and fails if there&#39;s more than 80? But that&#39;s not testing <code>EpubMathFixer</code> directly. There&#39;s nothing in the function itself you can hook into. </p>
<p>That&#39;s the fundamental problem with self-documenting negative information. &#34;Self-documentation&#34; rides along with written code, and so describes what the code is doing. Negative information is about what the code is <em>not</em> doing. </p>
<h3>End of newsletter speculation</h3>
<p>I wonder if you can think of &#34;why not&#34; comments as a case of counterfactuals. If so, are &#34;abstractions of human communication&#34; impossible to self-document in general? Can you self-document an analogy? Uncertainty? An ethical claim?</p>

                    
                

                
                    <p><em>If you&#39;re reading this on the web, you can subscribe <a href="https://buttondown.com/hillelwayne" target="_blank">here</a>. Updates are once a week. My main website is <a href="https://www.hillelwayne.com" target="_blank">here</a>.</em></p>
                

            </div></div>
  </body>
</html>
