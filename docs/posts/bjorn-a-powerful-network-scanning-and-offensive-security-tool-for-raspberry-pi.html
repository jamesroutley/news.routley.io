<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/infinition/Bjorn">Original</a>
    <h1>Bjorn: A powerful network scanning and offensive security tool for Raspberry Pi</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">
  <a target="_blank" rel="noopener noreferrer" href="https://private-user-images.githubusercontent.com/37984399/383236436-c5eb4cc1-0c3d-497d-9422-1614651a84ab.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzEzMTM2MTIsIm5iZiI6MTczMTMxMzMxMiwicGF0aCI6Ii8zNzk4NDM5OS8zODMyMzY0MzYtYzVlYjRjYzEtMGMzZC00OTdkLTk0MjItMTYxNDY1MWE4NGFiLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDExMTElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQxMTExVDA4MjE1MlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTI2NDhkYWZkZTQ4MmJmOWFiMDQyMDY1NGRhMWU0OThjYzhiZmI0OTdlZDkzODQxMGI1YmI4MmJiM2IzMjk5YjYmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.zXVfncL2TiU5FqMBr2_y3NL3761P8kV2oBlURUTuLX4"><img src="https://private-user-images.githubusercontent.com/37984399/383236436-c5eb4cc1-0c3d-497d-9422-1614651a84ab.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzEzMTM2MTIsIm5iZiI6MTczMTMxMzMxMiwicGF0aCI6Ii8zNzk4NDM5OS8zODMyMzY0MzYtYzVlYjRjYzEtMGMzZC00OTdkLTk0MjItMTYxNDY1MWE4NGFiLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDExMTElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQxMTExVDA4MjE1MlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTI2NDhkYWZkZTQ4MmJmOWFiMDQyMDY1NGRhMWU0OThjYzhiZmI0OTdlZDkzODQxMGI1YmI4MmJiM2IzMjk5YjYmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.zXVfncL2TiU5FqMBr2_y3NL3761P8kV2oBlURUTuLX4" alt="thumbnail_IMG_0546"/></a>
</p>

<ul dir="auto">
<li><a href="#introduction">Introduction</a></li>
<li><a href="#features">Features</a></li>
<li><a href="#design">Design</a></li>
<li><a href="#educational-aspects">Educational Aspects</a></li>
<li><a href="#disclaimer">Disclaimer</a></li>
<li><a href="#extensibility">Extensibility</a></li>
<li><a href="#development-status">Development Status</a></li>
<li><a href="#detailed-project-description">Detailed Project Description</a>
<ul dir="auto">
<li><a href="#project-structure">Project Structure</a></li>
<li><a href="#core-files">Core Files</a></li>
<li><a href="#actions">Actions</a></li>
<li><a href="#data-structure">Data Structure</a></li>
<li><a href="#behavior-of-bjorn">Behavior of Bjorn</a></li>
</ul>
</li>
<li><a href="#installation-and-configuration">Installation and Configuration</a>
<ul dir="auto">
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#quick-installation">Quick Installation</a></li>
<li><a href="#manual-installation">Manual Installation</a>
<ul dir="auto">
<li><a href="#step-1-activate-spi--i2c">Step 1: Activate SPI &amp; I2C</a></li>
<li><a href="#step-2-system-dependencies">Step 2: System Dependencies</a></li>
<li><a href="#step-3-bjorn-installation">Step 3: Bjorn Installation</a></li>
<li><a href="#step-4-configure-file-descriptor-limits">Step 4: Configure File Descriptor Limits</a></li>
<li><a href="#step-5-reload-systemd-and-apply-changes">Step 5: Reload Systemd and Apply Changes</a></li>
<li><a href="#step-6-modify-pam-configuration-files">Step 6: Modify PAM Configuration Files</a></li>
<li><a href="#step-7-configure-services">Step 7: Configure Services</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#running-bjorn">Running Bjorn</a>
<ul dir="auto">
<li><a href="#manual-start">Manual Start</a></li>
<li><a href="#service-control">Service Control</a></li>
<li><a href="#fresh-start">Fresh Start</a></li>
</ul>
</li>
<li><a href="#important-configuration-files">Important Configuration Files</a>
<ul dir="auto">
<li><a href="#shared-configuration-shared_configjson">Shared Configuration (<code>shared_config.json</code>)</a></li>
<li><a href="#actions-configuration-actionsjson">Actions Configuration (<code>actions.json</code>)</a></li>
</ul>
</li>
<li><a href="#known-issues-and-troubleshooting">Known Issues and Troubleshooting</a>
<ul dir="auto">
<li><a href="#current-development-issues">Current Development Issues</a></li>
<li><a href="#troubleshooting-steps">Troubleshooting Steps</a></li>
</ul>
</li>
<li><a href="#e-paper-display-support">E-Paper Display Support</a></li>
<li><a href="#development-guidelines">Development Guidelines</a>
<ul dir="auto">
<li><a href="#adding-new-actions">Adding New Actions</a></li>
<li><a href="#testing">Testing</a></li>
</ul>
</li>
<li><a href="#web-interface">Web Interface</a></li>
<li><a href="#project-roadmap">Project Roadmap</a>
<ul dir="auto">
<li><a href="#current-focus">Current Focus</a></li>
<li><a href="#future-plans">Future Plans</a></li>
</ul>
</li>
<li><a href="#contributing">Contributing</a></li>
<li><a href="#support-and-contact">Support and Contact</a></li>
<li><a href="#conclusion">Conclusion</a></li>
<li><a href="#license">License</a></li>
<li><a href="#contact">Contact</a></li>
</ul>
<hr/>
<p dir="auto"><a href="#table-of-contents"><g-emoji alias="arrow_upper_left">↖️</g-emoji></a></p>

<p dir="auto">Bjorn is a « Tamagotchi like » sophisticated, autonomous network scanning, vulnerability assessment, and offensive security tool designed to run on a Raspberry Pi equipped with a 2.13-inch e-Paper HAT. This document provides a detailed explanation of the project.</p>
<p dir="auto"><a href="#table-of-contents"><g-emoji alias="arrow_upper_left">↖️</g-emoji></a></p>

<ul dir="auto">
<li><strong>Network Scanning</strong>: Identifies live hosts and open ports on the network.</li>
<li><strong>Vulnerability Assessment</strong>: Performs vulnerability scans using Nmap and other tools.</li>
<li><strong>System Attacks</strong>: Conducts brute-force attacks on various services (FTP, SSH, SMB, RDP, Telnet, SQL).</li>
<li><strong>File Stealing</strong>: Extracts data from vulnerable services.</li>
<li><strong>User Interface</strong>: Real-time display on the e-Paper HAT and web interface for monitoring and interaction.</li>
</ul>
<p dir="auto"><a href="#table-of-contents"><g-emoji alias="arrow_upper_left">↖️</g-emoji></a></p>

<ul dir="auto">
<li><strong>Portability</strong>: Self-contained and portable device, ideal for penetration testing.</li>
<li><strong>Modularity</strong>: Extensible architecture allowing  addition of new actions.</li>
<li><strong>Visual Interface</strong>: The e-Paper HAT provides a visual interface for monitoring the ongoing actions, displaying results or stats, and interacting with Bjorn .</li>
</ul>
<p dir="auto"><a href="#table-of-contents"><g-emoji alias="arrow_upper_left">↖️</g-emoji></a></p>

<ul dir="auto">
<li><strong>Learning Tool</strong>: Designed as an educational tool to understand cybersecurity concepts and penetration testing techniques.</li>
<li><strong>Practical Experience</strong>: Provides a practical means for students and professionals to familiarize themselves with network security practices and vulnerability assessment tools.</li>
</ul>
<p dir="auto"><a href="#table-of-contents"><g-emoji alias="arrow_upper_left">↖️</g-emoji></a></p>

<ul dir="auto">
<li><strong>Ethical Use</strong>: This project is strictly for educational purposes.</li>
<li><strong>Responsibility</strong>: The author and contributors disclaim any responsibility for misuse of Bjorn.</li>
<li><strong>Legal Compliance</strong>: Unauthorized use of this tool for malicious activities is prohibited and may be prosecuted by law.</li>
</ul>
<p dir="auto"><a href="#table-of-contents"><g-emoji alias="arrow_upper_left">↖️</g-emoji></a></p>

<ul dir="auto">
<li><strong>Evolution</strong>: The main purpose of Bjorn is to gain new actions and extend his arsenal over time.</li>
<li><strong>Modularity</strong>: Actions are designed to be modular and can be easily extended or modified to add new functionality.</li>
<li><strong>Possibilities</strong>: From capturing pcap files to cracking hashes, man-in-the-middle attacks, and more—the possibilities are endless.</li>
<li><strong>Contribution</strong>: It&#39;s up to the user to develop new actions and add them to the project.</li>
</ul>
<p dir="auto"><a href="#table-of-contents"><g-emoji alias="arrow_upper_left">↖️</g-emoji></a></p>

<ul dir="auto">
<li><strong>Project Status</strong>: Ongoing development.</li>
<li><strong>Current Version</strong>: Scripted  auto-installer, or manual installation. Not yet packaged with Raspberry Pi OS.</li>
<li><strong>Reason</strong>: The project is still in an early stage, requiring further development and debugging.</li>
</ul>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://private-user-images.githubusercontent.com/37984399/345066674-bcad830d-77d6-4f3e-833d-473eadd33921.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzEzMTM2MTIsIm5iZiI6MTczMTMxMzMxMiwicGF0aCI6Ii8zNzk4NDM5OS8zNDUwNjY2NzQtYmNhZDgzMGQtNzdkNi00ZjNlLTgzM2QtNDczZWFkZDMzOTIxLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDExMTElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQxMTExVDA4MjE1MlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTExYTZiYmQxMjgxMGRmMGQ4MGVhNmI3MmI2Y2I1MmIyODZkY2YyNjRlMWEyMDUzMTljMGFmZTUxNWVlY2M2MmEmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.W4tYlo3dRmqb4pR-bGMZ1wL38eHOtmlvw8qoh50JZjg"><img src="https://private-user-images.githubusercontent.com/37984399/345066674-bcad830d-77d6-4f3e-833d-473eadd33921.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzEzMTM2MTIsIm5iZiI6MTczMTMxMzMxMiwicGF0aCI6Ii8zNzk4NDM5OS8zNDUwNjY2NzQtYmNhZDgzMGQtNzdkNi00ZjNlLTgzM2QtNDczZWFkZDMzOTIxLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDExMTElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQxMTExVDA4MjE1MlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTExYTZiYmQxMjgxMGRmMGQ4MGVhNmI3MmI2Y2I1MmIyODZkY2YyNjRlMWEyMDUzMTljMGFmZTUxNWVlY2M2MmEmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.W4tYlo3dRmqb4pR-bGMZ1wL38eHOtmlvw8qoh50JZjg" alt="Bjorn Display"/></a></p>
<hr/>
<p dir="auto"><a href="#table-of-contents"><g-emoji alias="arrow_upper_left">↖️</g-emoji></a></p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Detailed Project Description</h2><a id="user-content-detailed-project-description" aria-label="Permalink: Detailed Project Description" href="#detailed-project-description"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="#table-of-contents"><g-emoji alias="arrow_upper_left">↖️</g-emoji></a></p>

<div data-snippet-clipboard-copy-content="Bjorn/
├── Bjorn.py
├── comment.py
├── display.py
├── epd_helper.py
├── init_shared.py
├── kill_port_8000.sh
├── logger.py
├── orchestrator.py
├── requirements.txt
├── shared.py
├── utils.py
├── webapp.py
├── __init__.py
├── actions/
│   ├── ftp_connector.py
│   ├── ssh_connector.py
│   ├── smb_connector.py
│   ├── rdp_connector.py
│   ├── telnet_connector.py
│   ├── sql_connector.py
│   ├── steal_files_ftp.py
│   ├── steal_files_ssh.py
│   ├── steal_files_smb.py
│   ├── steal_files_rdp.py
│   ├── steal_files_telnet.py
│   ├── steal_data_sql.py
│   ├── nmap_vuln_scanner.py
│   ├── scanning.py
│   └── __init__.py
├── backup/
│   ├── backups/
│   └── uploads/
├── config/
├── data/
│   ├── input/
│   │   └── dictionary/
│   ├── logs/
│   └── output/
│       ├── crackedpwd/
│       ├── data_stolen/
│       ├── scan_results/
│       ├── vulnerabilities/
│       └── zombies/
└── resources/
    └── waveshare_epd/"><pre><code>Bjorn/
├── Bjorn.py
├── comment.py
├── display.py
├── epd_helper.py
├── init_shared.py
├── kill_port_8000.sh
├── logger.py
├── orchestrator.py
├── requirements.txt
├── shared.py
├── utils.py
├── webapp.py
├── __init__.py
├── actions/
│   ├── ftp_connector.py
│   ├── ssh_connector.py
│   ├── smb_connector.py
│   ├── rdp_connector.py
│   ├── telnet_connector.py
│   ├── sql_connector.py
│   ├── steal_files_ftp.py
│   ├── steal_files_ssh.py
│   ├── steal_files_smb.py
│   ├── steal_files_rdp.py
│   ├── steal_files_telnet.py
│   ├── steal_data_sql.py
│   ├── nmap_vuln_scanner.py
│   ├── scanning.py
│   └── __init__.py
├── backup/
│   ├── backups/
│   └── uploads/
├── config/
├── data/
│   ├── input/
│   │   └── dictionary/
│   ├── logs/
│   └── output/
│       ├── crackedpwd/
│       ├── data_stolen/
│       ├── scan_results/
│       ├── vulnerabilities/
│       └── zombies/
└── resources/
    └── waveshare_epd/
</code></pre></div>
<p dir="auto"><a href="#table-of-contents"><g-emoji alias="arrow_upper_left">↖️</g-emoji></a></p>


<p dir="auto">The main entry point for the application. It initializes and runs the main components, including the network scanner, orchestrator, display, and web server.</p>

<p dir="auto">Handles generating all the Bjorn comments displayed on the e-Paper HAT based on different themes/actions and statuses.</p>

<p dir="auto">Manages the e-Paper HAT display, updating the screen with Bjorn character, the dialog/comments, and the current information such as network status, vulnerabilities, and various statistics.</p>

<p dir="auto">Handles the low-level interactions with the e-Paper display hardware.</p>

<p dir="auto">Defines a custom logger with specific formatting and handlers for console and file logging. It also includes a custom log level for success messages.</p>

<p dir="auto">Bjorn’s AI, an heuristic engine that orchestrates the different actions such as network scanning, vulnerability scanning, attacks, and file stealing. It loads and executes actions based on the configuration and sets the status of the actions and Bjorn.</p>

<p dir="auto">Defines the <code>SharedData</code> class that holds configuration settings, paths, and methods for updating and managing shared data across different modules.</p>

<p dir="auto">Initializes shared data that is used across different modules. It loads the configuration and sets up necessary paths and variables.</p>

<p dir="auto">Contains utility functions used throughout the project.</p>

<p dir="auto">Sets up and runs a web server to provide a web interface for changing settings, monitoring and interacting with Bjorn.</p>
<p dir="auto"><a href="#table-of-contents"><g-emoji alias="arrow_upper_left">↖️</g-emoji></a></p>


<p dir="auto">Conducts network scanning to identify live hosts and open ports. It updates the network knowledge base (<code>netkb</code>) and generates scan results.</p>
<div dir="auto"><h4 tabindex="-1" dir="auto">actions/nmap_vuln_scanner.py</h4><a id="user-content-actionsnmap_vuln_scannerpy" aria-label="Permalink: actions/nmap_vuln_scanner.py" href="#actionsnmap_vuln_scannerpy"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Performs vulnerability scanning using Nmap. It parses the results and updates the vulnerability summary for each host.</p>

<ul dir="auto">
<li><strong>ftp_connector.py</strong>: Brute-force attacks on FTP services.</li>
<li><strong>ssh_connector.py</strong>: Brute-force attacks on SSH services.</li>
<li><strong>smb_connector.py</strong>: Brute-force attacks on SMB services.</li>
<li><strong>rdp_connector.py</strong>: Brute-force attacks on RDP services.</li>
<li><strong>telnet_connector.py</strong>: Brute-force attacks on Telnet services.</li>
<li><strong>sql_connector.py</strong>: Brute-force attacks on SQL services.</li>
</ul>

<ul dir="auto">
<li><strong>steal_files_ftp.py</strong>: Steals files from FTP servers.</li>
<li><strong>steal_files_smb.py</strong>: Steals files from SMB shares.</li>
<li><strong>steal_files_ssh.py</strong>: Steals files from SSH servers.</li>
<li><strong>steal_files_telnet.py</strong>: Steals files from Telnet servers.</li>
<li><strong>steal_data_sql.py</strong>: Extracts data from SQL databases.</li>
</ul>
<p dir="auto"><a href="#table-of-contents"><g-emoji alias="arrow_upper_left">↖️</g-emoji></a></p>

<div dir="auto"><h4 tabindex="-1" dir="auto">Network Knowledge Base (netkb.csv)</h4><a id="user-content-network-knowledge-base-netkbcsv" aria-label="Permalink: Network Knowledge Base (netkb.csv)" href="#network-knowledge-base-netkbcsv"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Located at <code>data/netkb.csv</code>. Stores information about:</p>
<ul dir="auto">
<li>Known hosts and their status. (Alive or offline)</li>
<li>Open ports and vulnerabilities.</li>
<li>Action execution history. (Success or failed)</li>
</ul>
<p dir="auto"><strong>Preview Example:</strong></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://private-user-images.githubusercontent.com/37984399/345159360-f641a565-2765-4280-a7d7-5b25c30dcea5.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzEzMTM2MTIsIm5iZiI6MTczMTMxMzMxMiwicGF0aCI6Ii8zNzk4NDM5OS8zNDUxNTkzNjAtZjY0MWE1NjUtMjc2NS00MjgwLWE3ZDctNWIyNWMzMGRjZWE1LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDExMTElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQxMTExVDA4MjE1MlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTc3NDI2ODU1OTE4NmQzYmYzYWY0ZTdlMDg1NzM1M2I0YzI2YjFiNDUyMWFhNzhiMDZmMmU3MWQwZTdhOTJkZDMmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.L94GIrbxdod3yJK6laX4fCL56F5rrpPTM6OC7YzVv7s"><img src="https://private-user-images.githubusercontent.com/37984399/345159360-f641a565-2765-4280-a7d7-5b25c30dcea5.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzEzMTM2MTIsIm5iZiI6MTczMTMxMzMxMiwicGF0aCI6Ii8zNzk4NDM5OS8zNDUxNTkzNjAtZjY0MWE1NjUtMjc2NS00MjgwLWE3ZDctNWIyNWMzMGRjZWE1LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDExMTElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQxMTExVDA4MjE1MlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTc3NDI2ODU1OTE4NmQzYmYzYWY0ZTdlMDg1NzM1M2I0YzI2YjFiNDUyMWFhNzhiMDZmMmU3MWQwZTdhOTJkZDMmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.L94GIrbxdod3yJK6laX4fCL56F5rrpPTM6OC7YzVv7s" alt="netkb1"/></a>
<a target="_blank" rel="noopener noreferrer" href="https://private-user-images.githubusercontent.com/37984399/345159442-f08114a2-d7d1-4f50-b1c4-a9939ba66056.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzEzMTM2MTIsIm5iZiI6MTczMTMxMzMxMiwicGF0aCI6Ii8zNzk4NDM5OS8zNDUxNTk0NDItZjA4MTE0YTItZDdkMS00ZjUwLWIxYzQtYTk5MzliYTY2MDU2LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDExMTElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQxMTExVDA4MjE1MlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTcyZmJhMGZjYWQzMTczNzM0ODYxNzU1ZmM0YmRmZjhlMGI2ZDgwYjAzNjI0YTc4ZTRiNmNmNGQ2N2EzOWUwMGQmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.j_mN0MoiqmUAodQGnFV7xlRVQcZQMP3NkcKq8pd34gY"><img src="https://private-user-images.githubusercontent.com/37984399/345159442-f08114a2-d7d1-4f50-b1c4-a9939ba66056.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzEzMTM2MTIsIm5iZiI6MTczMTMxMzMxMiwicGF0aCI6Ii8zNzk4NDM5OS8zNDUxNTk0NDItZjA4MTE0YTItZDdkMS00ZjUwLWIxYzQtYTk5MzliYTY2MDU2LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDExMTElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQxMTExVDA4MjE1MlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTcyZmJhMGZjYWQzMTczNzM0ODYxNzU1ZmM0YmRmZjhlMGI2ZDgwYjAzNjI0YTc4ZTRiNmNmNGQ2N2EzOWUwMGQmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.j_mN0MoiqmUAodQGnFV7xlRVQcZQMP3NkcKq8pd34gY" alt="netkb2"/></a></p>

<p dir="auto">Located in <code>data/output/scan_results/</code>.
This file is generated everytime the network is scanned. It is used to consolidate the data and update netkb.</p>
<p dir="auto"><strong>Example:</strong></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://private-user-images.githubusercontent.com/37984399/345159637-eb4a313a-f90c-4c43-b699-3678271886dc.jpg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzEzMTM2MTIsIm5iZiI6MTczMTMxMzMxMiwicGF0aCI6Ii8zNzk4NDM5OS8zNDUxNTk2MzctZWI0YTMxM2EtZjkwYy00YzQzLWI2OTktMzY3ODI3MTg4NmRjLmpwZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDExMTElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQxMTExVDA4MjE1MlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWZkNmU2ZWRkMTQwZDQxYWY4MzM3ZTU0Nzk2MmRlNTFjNWM4NGUzMzJmZDAzYmNiNTZjMzU1OGMwNDgxYjM0ZDAmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.cMjzkDSxSsAdi7p_U3YXhODYcT6gcjG74bkq5su-b7g"><img src="https://private-user-images.githubusercontent.com/37984399/345159637-eb4a313a-f90c-4c43-b699-3678271886dc.jpg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzEzMTM2MTIsIm5iZiI6MTczMTMxMzMxMiwicGF0aCI6Ii8zNzk4NDM5OS8zNDUxNTk2MzctZWI0YTMxM2EtZjkwYy00YzQzLWI2OTktMzY3ODI3MTg4NmRjLmpwZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDExMTElMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQxMTExVDA4MjE1MlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWZkNmU2ZWRkMTQwZDQxYWY4MzM3ZTU0Nzk2MmRlNTFjNWM4NGUzMzJmZDAzYmNiNTZjMzU1OGMwNDgxYjM0ZDAmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.cMjzkDSxSsAdi7p_U3YXhODYcT6gcjG74bkq5su-b7g" alt="Scan result"/></a></p>
<div dir="auto"><h4 tabindex="-1" dir="auto">Live Status (livestatus.csv)</h4><a id="user-content-live-status-livestatuscsv" aria-label="Permalink: Live Status (livestatus.csv)" href="#live-status-livestatuscsv"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Contains real-time information displayed on the e-Paper HAT:</p>
<ul dir="auto">
<li>Total number of known hosts.</li>
<li>Currently alive hosts.</li>
<li>Open ports count.</li>
<li>Other runtime statistics.</li>
</ul>
<p dir="auto"><a href="#table-of-contents"><g-emoji alias="arrow_upper_left">↖️</g-emoji></a></p>

<p dir="auto">Once launched, Bjorn performs the following steps:</p>
<ol dir="auto">
<li><strong>Initialization</strong>: Loads configuration, initializes shared data, and sets up necessary components such as the e-Paper HAT display.</li>
<li><strong>Network Scanning</strong>: Scans the network to identify live hosts and open ports. Updates the network knowledge base (<code>netkb</code>) with the results.</li>
<li><strong>Orchestration</strong>: Orchestrates different actions based on the configuration and network knowledge base. This includes performing vulnerability scanning, attacks, and file stealing.</li>
<li><strong>Vulnerability Scanning</strong>: Performs vulnerability scans on identified hosts and updates the vulnerability summary.</li>
<li><strong>Brute-Force Attacks and File Stealing</strong>: Starts brute-force attacks and steals files based on the configuration criteria.</li>
<li><strong>Display Updates</strong>: Continuously updates the e-Paper HAT display with current information such as network status, vulnerabilities, and various statistics. Bjorn also displays random comments based on different themes and statuses.</li>
<li><strong>Web Server</strong>: Provides a web interface for monitoring and interacting with Bjorn.</li>
</ol>
<hr/>
<p dir="auto"><a href="#table-of-contents"><g-emoji alias="arrow_upper_left">↖️</g-emoji></a></p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Installation and Configuration</h2><a id="user-content-installation-and-configuration" aria-label="Permalink: Installation and Configuration" href="#installation-and-configuration"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>

<ul dir="auto">
<li>Raspberry Pi OS installed.
<ul dir="auto">
<li>Stable:
<ul dir="auto">
<li>System: 32-bit</li>
<li>Kernel version: 6.6</li>
<li>Debian version: 12 (bookworm) &#39;2024-10-22-raspios-bookworm-armhf-lite&#39;</li>
</ul>
</li>
</ul>
</li>
<li>Username and hostname set to <code>bjorn</code>.</li>
<li>2.13-inch e-Paper HAT connected to GPIO pins.</li>
</ul>
<p dir="auto">At the moment the paper screen v2 &amp; v4 have been tested and implemented.
I juste hope the V1 &amp; V3 will work the same.</p>
<p dir="auto"><a href="#table-of-contents"><g-emoji alias="arrow_upper_left">↖️</g-emoji></a></p>

<p dir="auto">The fastest way to install Bjorn is using the automatic installation script :</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Download and run the installer
wget https://raw.githubusercontent.com/infinition/Bjorn/refs/heads/main/install_bjorn.sh
sudo chmod +x install_bjorn.sh
sudo ./install_bjorn.sh
# Choose the choice 1 for automatic installation. It may take a while as a lot of packages and modules will be installed. You must reboot at the end."><pre><span><span>#</span> Download and run the installer</span>
wget https://raw.githubusercontent.com/infinition/Bjorn/refs/heads/main/install_bjorn.sh
sudo chmod +x install_bjorn.sh
sudo ./install_bjorn.sh
<span><span>#</span> Choose the choice 1 for automatic installation. It may take a while as a lot of packages and modules will be installed. You must reboot at the end.</span></pre></div>
<p dir="auto"><a href="#table-of-contents"><g-emoji alias="arrow_upper_left">↖️</g-emoji></a></p>

<div dir="auto"><h4 tabindex="-1" dir="auto">Step 1: Activate SPI &amp; I2C</h4><a id="user-content-step-1-activate-spi--i2c" aria-label="Permalink: Step 1: Activate SPI &amp; I2C" href="#step-1-activate-spi--i2c"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>

<ul dir="auto">
<li>Navigate to <strong>&#34;Interface Options&#34;</strong>.</li>
<li>Enable <strong>SPI</strong>.</li>
<li>Enable <strong>I2C</strong>.</li>
</ul>
<div dir="auto"><h4 tabindex="-1" dir="auto">Step 2: System Dependencies</h4><a id="user-content-step-2-system-dependencies" aria-label="Permalink: Step 2: System Dependencies" href="#step-2-system-dependencies"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto" data-snippet-clipboard-copy-content="# Update system
sudo apt-get update &amp;&amp; sudo apt-get upgrade -y

# Install required packages

 sudo apt install -y \
  libjpeg-dev \
  zlib1g-dev \
  libpng-dev \
  python3-dev \
  libffi-dev \
  libssl-dev \
  libgpiod-dev \
  libi2c-dev \
  libatlas-base-dev \
  build-essential \
  python3-pip \
  wget \
  lsof \
  git \
  libopenjp2-7 \
  nmap \
  libopenblas-dev \
  bluez-tools \
  bluez \
  dhcpcd5 \
  bridge-utils \
  python3-pil


# Update Nmap scripts database

sudo nmap --script-updatedb
"><pre><span><span>#</span> Update system</span>
sudo apt-get update <span>&amp;&amp;</span> sudo apt-get upgrade -y

<span><span>#</span> Install required packages</span>

 sudo apt install -y \
  libjpeg-dev \
  zlib1g-dev \
  libpng-dev \
  python3-dev \
  libffi-dev \
  libssl-dev \
  libgpiod-dev \
  libi2c-dev \
  libatlas-base-dev \
  build-essential \
  python3-pip \
  wget \
  lsof \
  git \
  libopenjp2-7 \
  nmap \
  libopenblas-dev \
  bluez-tools \
  bluez \
  dhcpcd5 \
  bridge-utils \
  python3-pil


<span><span>#</span> Update Nmap scripts database</span>

sudo nmap --script-updatedb
</pre></div>
<div dir="auto"><h4 tabindex="-1" dir="auto">Step 3: Bjorn Installation</h4><a id="user-content-step-3-bjorn-installation" aria-label="Permalink: Step 3: Bjorn Installation" href="#step-3-bjorn-installation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto" data-snippet-clipboard-copy-content="# Clone the Bjorn repository
cd /home/bjorn
git clone https://github.com/infinition/Bjorn.git
cd Bjorn

# Install Python dependencies within the virtual environment
sudo pip install -r requirements.txt --break-system-packages
# As i did not succeed &#34;for now&#34; to get a stable installation with a virtual environment, i installed the dependencies system wide (with --break-system-packages), it did not cause any issue so far. You can try to install them in a virtual environment if you want."><pre><span><span>#</span> Clone the Bjorn repository</span>
<span>cd</span> /home/bjorn
git clone https://github.com/infinition/Bjorn.git
<span>cd</span> Bjorn

<span><span>#</span> Install Python dependencies within the virtual environment</span>
sudo pip install -r requirements.txt --break-system-packages
<span><span>#</span> As i did not succeed &#34;for now&#34; to get a stable installation with a virtual environment, i installed the dependencies system wide (with --break-system-packages), it did not cause any issue so far. You can try to install them in a virtual environment if you want.</span></pre></div>
<div dir="auto"><h5 tabindex="-1" dir="auto">3.1: Configure E-Paper Display Type</h5><a id="user-content-31-configure-e-paper-display-type" aria-label="Permalink: 3.1: Configure E-Paper Display Type" href="#31-configure-e-paper-display-type"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Choose your e-Paper HAT version by modifying the configuration file:</p>
<ol dir="auto">
<li>Open the configuration file:</li>
</ol>
<div dir="auto" data-snippet-clipboard-copy-content="sudo vi /home/bjorn/Bjorn/config/shared_config.json"><pre>sudo vi /home/bjorn/Bjorn/config/shared_config.json</pre></div>
<p dir="auto">Press i to enter insert mode
Locate the line containing &#34;epd_type&#34;:
Change the value according to your screen model:</p>
<ul dir="auto">
<li>For 2.13 V1: &#34;epd_type&#34;: &#34;epd2in13&#34;,</li>
<li>For 2.13 V2: &#34;epd_type&#34;: &#34;epd2in13_V2&#34;,</li>
<li>For 2.13 V3: &#34;epd_type&#34;: &#34;epd2in13_V3&#34;,</li>
<li>For 2.13 V4: &#34;epd_type&#34;: &#34;epd2in13_V4&#34;,</li>
</ul>
<p dir="auto">Press Esc to exit insert mode
Type :wq and press Enter to save and quit</p>
<div dir="auto"><h4 tabindex="-1" dir="auto">Step 4: Configure File Descriptor Limits</h4><a id="user-content-step-4-configure-file-descriptor-limits" aria-label="Permalink: Step 4: Configure File Descriptor Limits" href="#step-4-configure-file-descriptor-limits"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">To prevent <code>OSError: [Errno 24] Too many open files</code>, it&#39;s essential to increase the file descriptor limits.</p>
<div dir="auto"><h5 tabindex="-1" dir="auto">4.1: Modify File Descriptor Limits for All Users</h5><a id="user-content-41-modify-file-descriptor-limits-for-all-users" aria-label="Permalink: 4.1: Modify File Descriptor Limits for All Users" href="#41-modify-file-descriptor-limits-for-all-users"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Edit <code>/etc/security/limits.conf</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo vi /etc/security/limits.conf"><pre>sudo vi /etc/security/limits.conf</pre></div>
<p dir="auto">Add the following lines:</p>
<div data-snippet-clipboard-copy-content="* soft nofile 65535
* hard nofile 65535
root soft nofile 65535
root hard nofile 65535"><pre><code>* soft nofile 65535
* hard nofile 65535
root soft nofile 65535
root hard nofile 65535
</code></pre></div>
<div dir="auto"><h5 tabindex="-1" dir="auto">4.2: Configure Systemd Limits</h5><a id="user-content-42-configure-systemd-limits" aria-label="Permalink: 4.2: Configure Systemd Limits" href="#42-configure-systemd-limits"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Edit <code>/etc/systemd/system.conf</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo vi /etc/systemd/system.conf"><pre>sudo vi /etc/systemd/system.conf</pre></div>
<p dir="auto">Uncomment and modify:</p>

<p dir="auto">Edit <code>/etc/systemd/user.conf</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo vi /etc/systemd/user.conf"><pre>sudo vi /etc/systemd/user.conf</pre></div>
<p dir="auto">Uncomment and modify:</p>

<div dir="auto"><h5 tabindex="-1" dir="auto">4.3: Create or Modify <code>/etc/security/limits.d/90-nofile.conf</code></h5><a id="user-content-43-create-or-modify-etcsecuritylimitsd90-nofileconf" aria-label="Permalink: 4.3: Create or Modify /etc/security/limits.d/90-nofile.conf" href="#43-create-or-modify-etcsecuritylimitsd90-nofileconf"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto" data-snippet-clipboard-copy-content="sudo vi /etc/security/limits.d/90-nofile.conf"><pre>sudo vi /etc/security/limits.d/90-nofile.conf</pre></div>
<p dir="auto">Add:</p>
<div data-snippet-clipboard-copy-content="root soft nofile 65535
root hard nofile 65535"><pre><code>root soft nofile 65535
root hard nofile 65535
</code></pre></div>
<div dir="auto"><h5 tabindex="-1" dir="auto">4.4: Adjust the System-wide File Descriptor Limit</h5><a id="user-content-44-adjust-the-system-wide-file-descriptor-limit" aria-label="Permalink: 4.4: Adjust the System-wide File Descriptor Limit" href="#44-adjust-the-system-wide-file-descriptor-limit"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Edit <code>/etc/sysctl.conf</code>:</p>

<p dir="auto">Add:</p>

<p dir="auto">Apply the changes:</p>

<div dir="auto"><h4 tabindex="-1" dir="auto">Step 5: Reload Systemd and Apply Changes</h4><a id="user-content-step-5-reload-systemd-and-apply-changes" aria-label="Permalink: Step 5: Reload Systemd and Apply Changes" href="#step-5-reload-systemd-and-apply-changes"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Reload systemd to apply the new file descriptor limits:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo systemctl daemon-reload"><pre>sudo systemctl daemon-reload</pre></div>
<div dir="auto"><h4 tabindex="-1" dir="auto">Step 6: Modify PAM Configuration Files</h4><a id="user-content-step-6-modify-pam-configuration-files" aria-label="Permalink: Step 6: Modify PAM Configuration Files" href="#step-6-modify-pam-configuration-files"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">PAM (Pluggable Authentication Modules) manages how limits are enforced for user sessions. To ensure that the new file descriptor limits are respected, update the following configuration files.</p>
<div dir="auto"><h5 tabindex="-1" dir="auto">Step 6.1: Edit <code>/etc/pam.d/common-session</code> and <code>/etc/pam.d/common-session-noninteractive</code></h5><a id="user-content-step-61-edit-etcpamdcommon-session-and-etcpamdcommon-session-noninteractive" aria-label="Permalink: Step 6.1: Edit /etc/pam.d/common-session and /etc/pam.d/common-session-noninteractive" href="#step-61-edit-etcpamdcommon-session-and-etcpamdcommon-session-noninteractive"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto" data-snippet-clipboard-copy-content="sudo vi /etc/pam.d/common-session
sudo vi /etc/pam.d/common-session-noninteractive"><pre>sudo vi /etc/pam.d/common-session
sudo vi /etc/pam.d/common-session-noninteractive</pre></div>
<p dir="auto">Add this line at the end of both files:</p>
<div data-snippet-clipboard-copy-content="session required pam_limits.so"><pre><code>session required pam_limits.so
</code></pre></div>
<p dir="auto">This ensures that the limits set in <code>/etc/security/limits.conf</code> are enforced for all user sessions.</p>
<div dir="auto"><h4 tabindex="-1" dir="auto">Step 7: Configure Services</h4><a id="user-content-step-7-configure-services" aria-label="Permalink: Step 7: Configure Services" href="#step-7-configure-services"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>

<p dir="auto">Create the service file:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo vi /etc/systemd/system/bjorn.service"><pre>sudo vi /etc/systemd/system/bjorn.service</pre></div>
<p dir="auto">Add the following content:</p>
<div dir="auto" data-snippet-clipboard-copy-content="[Unit]
Description=Bjorn Service
DefaultDependencies=no
Before=basic.target
After=local-fs.target

[Service]
ExecStartPre=/home/bjorn/Bjorn/kill_port_8000.sh
ExecStart=/usr/bin/python3 /home/bjorn/Bjorn/Bjorn.py
WorkingDirectory=/home/bjorn/Bjorn
StandardOutput=inherit
StandardError=inherit
Restart=always
User=root

[Install]
WantedBy=multi-user.target"><pre><span>[Unit]</span>
<span>Description</span>=Bjorn Service
<span>DefaultDependencies</span>=no
<span>Before</span>=basic.target
<span>After</span>=local-fs.target

<span>[Service]</span>
<span>ExecStartPre</span>=/home/bjorn/Bjorn/kill_port_8000.sh
<span>ExecStart</span>=/usr/bin/python3 /home/bjorn/Bjorn/Bjorn.py
<span>WorkingDirectory</span>=/home/bjorn/Bjorn
<span>StandardOutput</span>=inherit
<span>StandardError</span>=inherit
<span>Restart</span>=always
<span>User</span>=root

<span>[Install]</span>
<span>WantedBy</span>=multi-user.target</pre></div>
<div dir="auto"><h5 tabindex="-1" dir="auto">7.2: Port 8000 Killer Script</h5><a id="user-content-72-port-8000-killer-script" aria-label="Permalink: 7.2: Port 8000 Killer Script" href="#72-port-8000-killer-script"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Create the script to free up port 8000:</p>
<div dir="auto" data-snippet-clipboard-copy-content="vi /home/bjorn/Bjorn/kill_port_8000.sh"><pre>vi /home/bjorn/Bjorn/kill_port_8000.sh</pre></div>
<p dir="auto">Add:</p>
<div dir="auto" data-snippet-clipboard-copy-content="#!/bin/bash
PORT=8000
PIDS=$(lsof -t -i:$PORT)

if [ -n &#34;$PIDS&#34; ]; then
    echo &#34;Killing PIDs using port $PORT: $PIDS&#34;
    kill -9 $PIDS
fi"><pre><span><span>#!</span>/bin/bash</span>
PORT=8000
PIDS=<span><span>$(</span>lsof -t -i:<span>$PORT</span><span>)</span></span>

<span>if</span> [ <span>-n</span> <span><span>&#34;</span><span>$PIDS</span><span>&#34;</span></span> ]<span>;</span> <span>then</span>
    <span>echo</span> <span><span>&#34;</span>Killing PIDs using port <span>$PORT</span>: <span>$PIDS</span><span>&#34;</span></span>
    <span>kill</span> -9 <span>$PIDS</span>
<span>fi</span></pre></div>
<p dir="auto">Make the script executable:</p>
<div dir="auto" data-snippet-clipboard-copy-content="chmod +x /home/bjorn/Bjorn/kill_port_8000.sh"><pre>chmod +x /home/bjorn/Bjorn/kill_port_8000.sh</pre></div>
<div dir="auto"><h5 tabindex="-1" dir="auto">7.3: USB Gadget Configuration</h5><a id="user-content-73-usb-gadget-configuration" aria-label="Permalink: 7.3: USB Gadget Configuration" href="#73-usb-gadget-configuration"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Modify <code>/boot/firmware/cmdline.txt</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo vi /boot/firmware/cmdline.txt"><pre>sudo vi /boot/firmware/cmdline.txt</pre></div>
<p dir="auto">Add the following right after <code>rootwait</code>:</p>
<div data-snippet-clipboard-copy-content="modules-load=dwc2,g_ether"><pre><code>modules-load=dwc2,g_ether
</code></pre></div>
<p dir="auto">Modify <code>/boot/firmware/config.txt</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo vi /boot/firmware/config.txt"><pre>sudo vi /boot/firmware/config.txt</pre></div>
<p dir="auto">Add at the end of the file:</p>

<p dir="auto">Create the USB gadget script:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo vi /usr/local/bin/usb-gadget.sh"><pre>sudo vi /usr/local/bin/usb-gadget.sh</pre></div>
<p dir="auto">Add the following content:</p>
<div dir="auto" data-snippet-clipboard-copy-content="#!/bin/bash
set -e

modprobe libcomposite
cd /sys/kernel/config/usb_gadget/
mkdir -p g1
cd g1

echo 0x1d6b &gt; idVendor
echo 0x0104 &gt; idProduct
echo 0x0100 &gt; bcdDevice
echo 0x0200 &gt; bcdUSB

mkdir -p strings/0x409
echo &#34;fedcba9876543210&#34; &gt; strings/0x409/serialnumber
echo &#34;Raspberry Pi&#34; &gt; strings/0x409/manufacturer
echo &#34;Pi Zero USB&#34; &gt; strings/0x409/product

mkdir -p configs/c.1/strings/0x409
echo &#34;Config 1: ECM network&#34; &gt; configs/c.1/strings/0x409/configuration
echo 250 &gt; configs/c.1/MaxPower

mkdir -p functions/ecm.usb0

# Check for existing symlink and remove if necessary
if [ -L configs/c.1/ecm.usb0 ]; then
    rm configs/c.1/ecm.usb0
fi
ln -s functions/ecm.usb0 configs/c.1/

# Ensure the device is not busy before listing available USB device controllers
max_retries=10
retry_count=0

while ! ls /sys/class/udc &gt; UDC 2&gt;/dev/null; do
    if [ $retry_count -ge $max_retries ]; then
        echo &#34;Error: Device or resource busy after $max_retries attempts.&#34;
        exit 1
    fi
    retry_count=$((retry_count + 1))
    sleep 1
done

# Check if the usb0 interface is already configured
if ! ip addr show usb0 | grep -q &#34;172.20.2.1&#34;; then
    ifconfig usb0 172.20.2.1 netmask 255.255.255.0
else
    echo &#34;Interface usb0 already configured.&#34;
fi"><pre><span><span>#!</span>/bin/bash</span>
<span>set</span> -e

modprobe libcomposite
<span>cd</span> /sys/kernel/config/usb_gadget/
mkdir -p g1
<span>cd</span> g1

<span>echo</span> 0x1d6b <span>&gt;</span> idVendor
<span>echo</span> 0x0104 <span>&gt;</span> idProduct
<span>echo</span> 0x0100 <span>&gt;</span> bcdDevice
<span>echo</span> 0x0200 <span>&gt;</span> bcdUSB

mkdir -p strings/0x409
<span>echo</span> <span><span>&#34;</span>fedcba9876543210<span>&#34;</span></span> <span>&gt;</span> strings/0x409/serialnumber
<span>echo</span> <span><span>&#34;</span>Raspberry Pi<span>&#34;</span></span> <span>&gt;</span> strings/0x409/manufacturer
<span>echo</span> <span><span>&#34;</span>Pi Zero USB<span>&#34;</span></span> <span>&gt;</span> strings/0x409/product

mkdir -p configs/c.1/strings/0x409
<span>echo</span> <span><span>&#34;</span>Config 1: ECM network<span>&#34;</span></span> <span>&gt;</span> configs/c.1/strings/0x409/configuration
<span>echo</span> 250 <span>&gt;</span> configs/c.1/MaxPower

mkdir -p functions/ecm.usb0

<span><span>#</span> Check for existing symlink and remove if necessary</span>
<span>if</span> [ <span>-L</span> configs/c.1/ecm.usb0 ]<span>;</span> <span>then</span>
    rm configs/c.1/ecm.usb0
<span>fi</span>
ln -s functions/ecm.usb0 configs/c.1/

<span><span>#</span> Ensure the device is not busy before listing available USB device controllers</span>
max_retries=10
retry_count=0

<span>while</span> <span>!</span> ls /sys/class/udc <span>&gt;</span> UDC <span>2&gt;</span>/dev/null<span>;</span> <span>do</span>
    <span>if</span> [ <span>$retry_count</span> <span>-ge</span> <span>$max_retries</span> ]<span>;</span> <span>then</span>
        <span>echo</span> <span><span>&#34;</span>Error: Device or resource busy after <span>$max_retries</span> attempts.<span>&#34;</span></span>
        <span>exit</span> 1
    <span>fi</span>
    retry_count=<span><span>$((</span>retry_count <span>+</span> <span>1</span><span>))</span></span>
    sleep 1
<span>done</span>

<span><span>#</span> Check if the usb0 interface is already configured</span>
<span>if</span> <span>!</span> ip addr show usb0 <span>|</span> grep -q <span><span>&#34;</span>172.20.2.1<span>&#34;</span></span><span>;</span> <span>then</span>
    ifconfig usb0 172.20.2.1 netmask 255.255.255.0
<span>else</span>
    <span>echo</span> <span><span>&#34;</span>Interface usb0 already configured.<span>&#34;</span></span>
<span>fi</span></pre></div>
<p dir="auto">Make the script executable:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo chmod +x /usr/local/bin/usb-gadget.sh"><pre>sudo chmod +x /usr/local/bin/usb-gadget.sh</pre></div>
<p dir="auto">Create the systemd service:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo vi /etc/systemd/system/usb-gadget.service"><pre>sudo vi /etc/systemd/system/usb-gadget.service</pre></div>
<p dir="auto">Add:</p>
<div dir="auto" data-snippet-clipboard-copy-content="[Unit]
Description=USB Gadget Service
After=network.target

[Service]
ExecStartPre=/sbin/modprobe libcomposite
ExecStart=/usr/local/bin/usb-gadget.sh
Type=simple
RemainAfterExit=yes

[Install]
WantedBy=multi-user.target"><pre><span>[Unit]</span>
<span>Description</span>=USB Gadget Service
<span>After</span>=network.target

<span>[Service]</span>
<span>ExecStartPre</span>=/sbin/modprobe libcomposite
<span>ExecStart</span>=/usr/local/bin/usb-gadget.sh
<span>Type</span>=simple
<span>RemainAfterExit</span>=yes

<span>[Install]</span>
<span>WantedBy</span>=multi-user.target</pre></div>
<p dir="auto">Configure <code>usb0</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo vi /etc/network/interfaces"><pre>sudo vi /etc/network/interfaces</pre></div>
<p dir="auto">Add:</p>
<div dir="auto" data-snippet-clipboard-copy-content="allow-hotplug usb0
iface usb0 inet static
    address 172.20.2.1
    netmask 255.255.255.0"><pre>allow-hotplug usb0
iface usb0 inet static
    address 172.20.2.1
    netmask 255.255.255.0</pre></div>
<p dir="auto">Reload the services:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo systemctl daemon-reload
sudo systemctl enable systemd-networkd
sudo systemctl enable usb-gadget
sudo systemctl start systemd-networkd
sudo systemctl start usb-gadget"><pre>sudo systemctl daemon-reload
sudo systemctl <span>enable</span> systemd-networkd
sudo systemctl <span>enable</span> usb-gadget
sudo systemctl start systemd-networkd
sudo systemctl start usb-gadget</pre></div>
<p dir="auto">You must reboot to be able to use it as a USB gadget (with ip)</p>

<p dir="auto">Set the static IP address on your Windows PC:</p>
<ul dir="auto">
<li><strong>IP Address</strong>: <code>172.20.2.2</code></li>
<li><strong>Subnet Mask</strong>: <code>255.255.255.0</code></li>
<li><strong>Default Gateway</strong>: <code>172.20.2.1</code></li>
<li><strong>DNS Servers</strong>: <code>8.8.8.8</code>, <code>8.8.4.4</code></li>
</ul>
<hr/>
<p dir="auto"><a href="#table-of-contents"><g-emoji alias="arrow_upper_left">↖️</g-emoji></a></p>


<p dir="auto">To manually start Bjorn (without the service, ensure the service is  stopped « sudo systemctl stop bjorn.service »):</p>
<div dir="auto" data-snippet-clipboard-copy-content="cd /home/bjorn/Bjorn

# Run Bjorn
sudo python Bjorn.py"><pre><span>cd</span> /home/bjorn/Bjorn

<span><span>#</span> Run Bjorn</span>
sudo python Bjorn.py</pre></div>

<p dir="auto">Control the Bjorn service:</p>
<div dir="auto" data-snippet-clipboard-copy-content="# Start Bjorn
sudo systemctl start bjorn.service

# Stop Bjorn
sudo systemctl stop bjorn.service

# Check status
sudo systemctl status bjorn.service

# View logs
sudo journalctl -u bjorn.service"><pre><span><span>#</span> Start Bjorn</span>
sudo systemctl start bjorn.service

<span><span>#</span> Stop Bjorn</span>
sudo systemctl stop bjorn.service

<span><span>#</span> Check status</span>
sudo systemctl status bjorn.service

<span><span>#</span> View logs</span>
sudo journalctl -u bjorn.service</pre></div>

<p dir="auto">To reset Bjorn to a clean state:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo rm -rf /home/bjorn/Bjorn/config/*.json \
    /home/bjorn/Bjorn/data/*.csv \
    /home/bjorn/Bjorn/data/*.log \
    /home/bjorn/Bjorn/data/output/data_stolen/* \
    /home/bjorn/Bjorn/data/output/crackedpwd/* \
    /home/bjorn/Bjorn/config/* \
    /home/bjorn/Bjorn/data/output/scan_results/* \
    /home/bjorn/Bjorn/__pycache__ \
    /home/bjorn/Bjorn/config/__pycache__ \
    /home/bjorn/Bjorn/data/__pycache__ \
    /home/bjorn/Bjorn/actions/__pycache__ \
    /home/bjorn/Bjorn/resources/__pycache__ \
    /home/bjorn/Bjorn/web/__pycache__ \
    /home/bjorn/Bjorn/*.log \
    /home/bjorn/Bjorn/resources/waveshare_epd/__pycache__ \
    /home/bjorn/Bjorn/data/logs/* \
    /home/bjorn/Bjorn/data/output/vulnerabilities/* \
    /home/bjorn/Bjorn/data/logs/*
"><pre>sudo rm -rf /home/bjorn/Bjorn/config/<span>*</span>.json \
    /home/bjorn/Bjorn/data/<span>*</span>.csv \
    /home/bjorn/Bjorn/data/<span>*</span>.log \
    /home/bjorn/Bjorn/data/output/data_stolen/<span>*</span> \
    /home/bjorn/Bjorn/data/output/crackedpwd/<span>*</span> \
    /home/bjorn/Bjorn/config/<span>*</span> \
    /home/bjorn/Bjorn/data/output/scan_results/<span>*</span> \
    /home/bjorn/Bjorn/__pycache__ \
    /home/bjorn/Bjorn/config/__pycache__ \
    /home/bjorn/Bjorn/data/__pycache__ \
    /home/bjorn/Bjorn/actions/__pycache__ \
    /home/bjorn/Bjorn/resources/__pycache__ \
    /home/bjorn/Bjorn/web/__pycache__ \
    /home/bjorn/Bjorn/<span>*</span>.log \
    /home/bjorn/Bjorn/resources/waveshare_epd/__pycache__ \
    /home/bjorn/Bjorn/data/logs/<span>*</span> \
    /home/bjorn/Bjorn/data/output/vulnerabilities/<span>*</span> \
    /home/bjorn/Bjorn/data/logs/<span>*</span>
</pre></div>
<p dir="auto">Everything will be recreated automatically at the next launch of Bjorn.</p>
<hr/>
<p dir="auto"><a href="#table-of-contents"><g-emoji alias="arrow_upper_left">↖️</g-emoji></a></p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Important Configuration Files</h2><a id="user-content-important-configuration-files" aria-label="Permalink: Important Configuration Files" href="#important-configuration-files"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">Shared Configuration (<code>shared_config.json</code>)</h3></div>
<p dir="auto">Defines various settings for Bjorn, including:</p>
<ul dir="auto">
<li>Boolean settings (<code>manual_mode</code>, <code>websrv</code>, <code>debug_mode</code>, etc.).</li>
<li>Time intervals and delays.</li>
<li>Network settings.</li>
<li>Port lists and blacklists.
These settings are accessible on the webpage.</li>
</ul>
<div dir="auto"><h3 tabindex="-1" dir="auto">Actions Configuration (<code>actions.json</code>)</h3><a id="user-content-actions-configuration-actionsjson" aria-label="Permalink: Actions Configuration (actions.json)" href="#actions-configuration-actionsjson"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Lists the actions to be performed by Bjorn, including (dynamically generated with the content of the folder):</p>
<ul dir="auto">
<li>Module and class definitions.</li>
<li>Port assignments.</li>
<li>Parent-child relationships.</li>
<li>Action status definitions.</li>
</ul>
<hr/>
<p dir="auto"><a href="#table-of-contents"><g-emoji alias="arrow_upper_left">↖️</g-emoji></a></p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Known Issues and Troubleshooting</h2><a id="user-content-known-issues-and-troubleshooting" aria-label="Permalink: Known Issues and Troubleshooting" href="#known-issues-and-troubleshooting"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">Current Development Issues</h3><a id="user-content-current-development-issues" aria-label="Permalink: Current Development Issues" href="#current-development-issues"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>

<ul dir="auto">
<li><strong>Problem</strong>: <code>OSError: [Errno 24] Too many open files</code></li>
<li><strong>Status</strong>: Partially resolved with system limits configuration.</li>
<li><strong>Workaround</strong>: Implemented file descriptor limits increase.</li>
<li><strong>Monitoring</strong>: Check open files with <code>lsof -p $(pgrep -f Bjorn.py) | wc -l</code></li>
<li>At the moment the logs show periodically this information as (FD : XXX)</li>
</ul>


<div dir="auto" data-snippet-clipboard-copy-content="# Check service status
sudo systemctl status bjorn.service

# View detailed logs
sudo journalctl -u bjorn.service -f

# Check port 8000 usage
sudo lsof -i :8000"><pre><span><span>#</span> Check service status</span>
sudo systemctl status bjorn.service

<span><span>#</span> View detailed logs</span>
sudo journalctl -u bjorn.service -f

<span><span>#</span> Check port 8000 usage</span>
sudo lsof -i :8000</pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="# Verify SPI devices
ls /dev/spi*

# Check user permissions
sudo usermod -a -G spi,gpio bjorn"><pre><span><span>#</span> Verify SPI devices</span>
ls /dev/spi<span>*</span>

<span><span>#</span> Check user permissions</span>
sudo usermod -a -G spi,gpio bjorn</pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="# Check network interfaces
ip addr show

# Test USB gadget interface
ip link show usb0"><pre><span><span>#</span> Check network interfaces</span>
ip addr show

<span><span>#</span> Test USB gadget interface</span>
ip link show usb0</pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="# Fix ownership
sudo chown -R bjorn:bjorn /home/bjorn/Bjorn

# Fix permissions
sudo chmod -R 755 /home/bjorn/Bjorn"><pre><span><span>#</span> Fix ownership</span>
sudo chown -R bjorn:bjorn /home/bjorn/Bjorn

<span><span>#</span> Fix permissions</span>
sudo chmod -R 755 /home/bjorn/Bjorn</pre></div>
<hr/>
<p dir="auto"><a href="#table-of-contents"><g-emoji alias="arrow_upper_left">↖️</g-emoji></a></p>

<p dir="auto">Currently hardcoded for the 2.13-inch V2 &amp; V4 e-Paper HAT.
My program automatically detect the screen model and adapt the python expressions into my code.</p>
<p dir="auto">For other versions:</p>
<ul dir="auto">
<li>As i dont have the v1 and v3 to validate my algorithm, i just hope it will work properly.</li>
</ul>

<p dir="auto">In my journey to make Bjorn work with the different screen versions, I struggled, hacking several parameters and found out that it was possible to remove the ghosting of screens! I let you see this, I think this method will be very useful for all other projects with the e-paper screen!</p>
<hr/>
<p dir="auto"><a href="#table-of-contents"><g-emoji alias="arrow_upper_left">↖️</g-emoji></a></p>


<ol dir="auto">
<li>Create a new action file in <code>actions/</code>.</li>
<li>Implement required methods:
<ul dir="auto">
<li><code>__init__(self, shared_data)</code></li>
<li><code>execute(self, ip, port, row, status_key)</code></li>
</ul>
</li>
<li>Add the action to <code>actions.json</code>.</li>
<li>Follow existing action patterns.</li>
</ol>

<ol dir="auto">
<li>Create a test environment.</li>
<li>Use an isolated network.</li>
<li>Follow ethical guidelines.</li>
<li>Document test cases.</li>
</ol>
<hr/>
<p dir="auto"><a href="#table-of-contents"><g-emoji alias="arrow_upper_left">↖️</g-emoji></a></p>

<ul dir="auto">
<li><strong>Access</strong>: <code>http://[device-ip]:8000</code></li>
<li><strong>Features</strong>:
<ul dir="auto">
<li>Real-time monitoring with a console.</li>
<li>Configuration management.</li>
<li>Viewing results. (Credentials and files)</li>
<li>System control.</li>
</ul>
</li>
</ul>
<hr/>
<p dir="auto"><a href="#table-of-contents"><g-emoji alias="arrow_upper_left">↖️</g-emoji></a></p>


<ul dir="auto">
<li>Stability improvements.</li>
<li>Bug fixes.</li>
<li>Service reliability.</li>
<li>Documentation updates.</li>
</ul>

<ul dir="auto">
<li>Additional attack modules.</li>
<li>Enhanced reporting.</li>
<li>Improved user interface.</li>
<li>Extended protocol support.</li>
</ul>
<hr/>
<p dir="auto"><a href="#table-of-contents"><g-emoji alias="arrow_upper_left">↖️</g-emoji></a></p>

<p dir="auto">The project welcomes contributions in:</p>
<ul dir="auto">
<li>New attack modules.</li>
<li>Bug fixes.</li>
<li>Documentation.</li>
<li>Feature improvements.</li>
</ul>
<hr/>
<p dir="auto"><a href="#table-of-contents"><g-emoji alias="arrow_upper_left">↖️</g-emoji></a></p>

<ul dir="auto">
<li><strong>Report Issues</strong>: Via GitHub.</li>
<li><strong>Guidelines</strong>:
<ul dir="auto">
<li>Follow ethical guidelines.</li>
<li>Document reproduction steps.</li>
<li>Provide logs and context.</li>
</ul>
</li>
</ul>
<hr/>
<p dir="auto"><a href="#table-of-contents"><g-emoji alias="arrow_upper_left">↖️</g-emoji></a></p>

<p dir="auto">Bjorn is a powerful tool designed to perform comprehensive network scanning, vulnerability assessment, and data exfiltration. Its modular design and extensive configuration options allow for flexible and targeted operations. By combining different actions and orchestrating them intelligently, Bjorn can provide valuable insights into network security and help identify and mitigate potential risks.</p>
<p dir="auto">The e-Paper HAT display and web interface make it easy to monitor and interact with Bjorn, providing real-time updates and status information. With its extensible architecture and customizable actions, Bjorn can be adapted to suit a wide range of security testing and monitoring needs.</p>
<p dir="auto"><a href="#table-of-contents"><g-emoji alias="arrow_upper_left">↖️</g-emoji></a></p>

<p dir="auto">Bjorn is distributed under the MIT License. See the <code>LICENSE</code> file for more information.</p>
<hr/>
<p dir="auto"><a href="#table-of-contents"><g-emoji alias="arrow_upper_left">↖️</g-emoji></a></p>

<ul dir="auto">
<li><strong>Author</strong>: infinition</li>
<li><strong>GitHub</strong>: <a href="https://github.com/infinition/Bjorn">infinition/Bjorn</a></li>
</ul>
<hr/>
<p dir="auto"><strong>Note</strong>: This document is subject to change as the project evolves. Please refer to the GitHub repository for the most recent updates.</p>
<hr/>
</article></div></div>
  </body>
</html>
