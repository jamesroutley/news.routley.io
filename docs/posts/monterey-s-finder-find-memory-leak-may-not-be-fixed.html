<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://eclecticlight.co/2022/05/30/why-montereys-finder-find-memory-leak-may-not-be-fixed/">Original</a>
    <h1>Monterey’s Finder Find memory leak may not be fixed</h1>
    
    <div id="readability-page-1" class="page"><article id="post-65726">
	
	<!-- .entry-header -->

	
		<div data-first_letter="O">
		<p>One popular plan to avoid bugs introduced in a new major version of macOS is to use the final release of the last one. If you’re thinking of upgrading from Big Sur to Monterey when Apple releases macOS 13 this autumn/fall, you might like to think twice, as there’s a major memory leak which may well remain in Monterey for ever.</p>
<p><strong>The bug</strong></p>
<p>This memory leak affects all models of Mac, both Intel and M1, running any version of Monterey from its initial public release 12.0.1 to the latest update 12.4. As it affects one of the key features of the Finder, if you use the macOS GUI sooner or later you’re likely to come across it, and for some users it’s severe.</p>
<p>It only affects the Finder’s <strong>Find</strong> command (in the File menu), and doesn’t affect Spotlight itself, or third-party products which use Spotlight search, such as Find Any File or HoudahSpot. If you never ever use the Finder’s Find feature, then you can stop reading here, as you won’t encounter this bug.</p>
<p>When you set a Finder window into Find mode and start typing characters into its search box, the Finder launches an interactive search which homes in more narrowly as you type additional characters. What happens is that each of those searches is retained in memory, rather than being purged when a new search is started. The amount of memory used each time is determined by the number of ‘hits’ obtained at that moment. The more files that Mac has in its Spotlight database, the more hits are likely, and in some cases their number can be vast.</p>
<p>For example, let’s say you start typing the word <em>syzygy,</em> which should have very few hits. When you’ve just typed the first character <em>s</em> there are likely to be hundreds of thousands of hits. As those are being delivered to the Finder, its memory use grows rapidly. Add the second character <em>y</em> and the rate of memory use slows sharply, as there are far fewer hits, and after the third character <em>z</em> there should be even fewer.</p>
<p>What should happen is that, as the search is refined, the previous search is terminated and its partial search results are cleared from memory, which reduces the amount of memory used by the Finder. That doesn’t happen, though, and memory use continues to rise, never to be freed, even when you close that window to finish using Find.</p>
<p><strong>Workarounds</strong></p>
<p>If you’re only an <strong>occasional light user</strong> of the Find feature, you can use it without the Finder outgrowing your Mac’s memory, provided that your Mac generally has plenty of free memory. Instead of typing search terms one character at a time, you can paste in more specific text which is only likely to return less than a thousand hits, which should only consume around 5 MB each time. Any growth in the Finder’s memory use will then be small, and essentially unnoticeable.</p>
<p>The (literally) big danger is typing one character in and leaving the search to run: do that once, and the Finder’s memory use could readily rise into several GB. When the Finder’s use of memory grows too high for your Mac, before it starts hitting performance, open the <strong>Force Quit</strong> dialog by pressing Command-Option-Escape, select the <strong>Finder</strong> there, and click the button to <strong>Relaunch</strong> it.</p>
<p><span><img data-attachment-id="63318" data-permalink="https://eclecticlight.co/memory06/" data-orig-file="https://eclecticlightdotcom.files.wordpress.com/2022/01/memory06.jpg" data-orig-size="916,1052" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="memory06" data-image-description="" data-image-caption="" data-medium-file="https://eclecticlightdotcom.files.wordpress.com/2022/01/memory06.jpg?w=261" data-large-file="https://eclecticlightdotcom.files.wordpress.com/2022/01/memory06.jpg?w=892" src="https://eclecticlightdotcom.files.wordpress.com/2022/01/memory06.jpg?w=940" alt="memory06" srcset="https://eclecticlightdotcom.files.wordpress.com/2022/01/memory06.jpg 916w, https://eclecticlightdotcom.files.wordpress.com/2022/01/memory06.jpg?w=131 131w, https://eclecticlightdotcom.files.wordpress.com/2022/01/memory06.jpg?w=261 261w, https://eclecticlightdotcom.files.wordpress.com/2022/01/memory06.jpg?w=768 768w" sizes="(max-width: 916px) 100vw, 916px"/></span></p>
<p>If you can’t be so disciplined, or rely on Find frequently, or if your Mac has more limited physical memory, then there are three main options.</p>
<p>For <strong>straightforward searches</strong>, use Spotlight from the menu bar, which doesn’t appear to have any such problem.</p>
<p>For more intensive <strong>file searches</strong>, look at Thomas Tempelmann’s <a href="https://apps.tempel.org/FindAnyFile/" target="_blank" rel="noopener">Find Any File</a> (FAF), which costs around $/€/£ 6 direct or in the App Store. This is an excellent utility which does a great deal more than Finder’s Find ever will.</p>
<p><span><img data-attachment-id="56839" data-permalink="https://eclecticlight.co/spotplus03/" data-orig-file="https://eclecticlightdotcom.files.wordpress.com/2021/02/spotplus03.jpg" data-orig-size="1838,1098" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="spotplus03" data-image-description="" data-image-caption="" data-medium-file="https://eclecticlightdotcom.files.wordpress.com/2021/02/spotplus03.jpg?w=300" data-large-file="https://eclecticlightdotcom.files.wordpress.com/2021/02/spotplus03.jpg?w=940" src="https://eclecticlightdotcom.files.wordpress.com/2021/02/spotplus03.jpg?w=940" alt="spotplus03" srcset="https://eclecticlightdotcom.files.wordpress.com/2021/02/spotplus03.jpg?w=940 940w, https://eclecticlightdotcom.files.wordpress.com/2021/02/spotplus03.jpg?w=150 150w, https://eclecticlightdotcom.files.wordpress.com/2021/02/spotplus03.jpg?w=300 300w, https://eclecticlightdotcom.files.wordpress.com/2021/02/spotplus03.jpg?w=768 768w, https://eclecticlightdotcom.files.wordpress.com/2021/02/spotplus03.jpg?w=1024 1024w, https://eclecticlightdotcom.files.wordpress.com/2021/02/spotplus03.jpg 1838w" sizes="(max-width: 940px) 100vw, 940px"/></span></p>
<p>For more sophisticated <strong>Spotlight search</strong>, including file metadata and contents, <a href="https://www.houdah.com/houdahSpot/?lang=en" target="_blank" rel="noopener">HoudahSpot</a> is more expensive, at around $/€/£ 32, is by far the most powerful Spotlight-based search utility, and worth every penny.</p>
<p><span><img data-attachment-id="56840" data-permalink="https://eclecticlight.co/spotplus04/" data-orig-file="https://eclecticlightdotcom.files.wordpress.com/2021/02/spotplus04.jpg" data-orig-size="3198,1556" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="spotplus04" data-image-description="" data-image-caption="" data-medium-file="https://eclecticlightdotcom.files.wordpress.com/2021/02/spotplus04.jpg?w=300" data-large-file="https://eclecticlightdotcom.files.wordpress.com/2021/02/spotplus04.jpg?w=940" src="https://eclecticlightdotcom.files.wordpress.com/2021/02/spotplus04.jpg?w=940" alt="spotplus04" srcset="https://eclecticlightdotcom.files.wordpress.com/2021/02/spotplus04.jpg?w=940 940w, https://eclecticlightdotcom.files.wordpress.com/2021/02/spotplus04.jpg?w=1880 1880w, https://eclecticlightdotcom.files.wordpress.com/2021/02/spotplus04.jpg?w=150 150w, https://eclecticlightdotcom.files.wordpress.com/2021/02/spotplus04.jpg?w=300 300w, https://eclecticlightdotcom.files.wordpress.com/2021/02/spotplus04.jpg?w=768 768w, https://eclecticlightdotcom.files.wordpress.com/2021/02/spotplus04.jpg?w=1024 1024w" sizes="(max-width: 940px) 100vw, 940px"/></span></p>
<p>Neither FAF nor HoudahSpot has any memory leak, and both work excellently in Monterey.</p>
<p><strong>Why this may not be fixed</strong></p>
<p>This memory leak has been reported to Apple, and is the only significant reproducible memory leak known to remain in Monterey. However, it looks as if fixing it requires more extensive surgery. This is because it involves both Spotlight, whose searches appear to continue consuming CPU and memory after they should have been cancelled, and the Finder, which appears unable to free the memory from cancelled searches.</p>
<p>macOS has a track record of leaving well-known bugs in final major releases when more extensive work is required to fix them. Among those was <a href="https://eclecticlight.co/2017/11/04/this-is-what-happens-when-sierras-backups-become-irregular/">failure in the DAS/CTS dispatching system</a> which caused automatic Time Machine backups to fail in Sierra, <a href="https://eclecticlight.co/2018/06/05/apfs-comes-to-fusion-drives-but-theres-no-sign-of-time-machine-2/">APFS support for Fusion Drives</a> in High Sierra, and <a href="https://eclecticlight.co/2020/02/17/time-machine-14-diagnosing-and-working-around-slow-backups/">painfully slow Time Machine backups</a> in Catalina. Each of those was only fixed in the next major release of macOS. Of course I hope I’m wrong, and this memory leak gets fixed in 12.5, but the chances are falling.</p>
<p>One of the penalties with using the last release of the previous major version of macOS is that, while it will still get two years of security updates, it won’t get any other bugs fixed. If you couldn’t live with this or any other bug left in the final version of Monterey before the release of macOS 13, then it isn’t going to prove a good choice.</p>
	</div><!-- .entry-content -->

	
	<!-- .entry-footer -->

</article></div>
  </body>
</html>
