<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://mattgreer.dev/blog/balatro-for-the-nintendo-ereader/">Original</a>
    <h1>Balatro for the Nintendo E-Reader</h1>
    
    <div id="readability-page-1" class="page"><div><p>I friggin&#39; <em>love</em> Balatro. I&#39;ve put an embarrassing number of hours into it. I also like to make games for the Nintendo E-Reader. The E-Reader was a peripheral for the Game Boy Advance that let you load mini games and &#34;DLC&#34; by scanning cards into it.</p><figure><img src="https://mattgreer.dev/_next/static/media/Ereader.74808f7f.png"/><figcaption>The E-Reader attached to a Game Boy Advance (image by Nintendo)</figcaption></figure><p>Oh and Balatro is a single player solitaire/poker hybrid game that is super fun. If you enjoy poker, solitaire, or especially trading card games like Magic the Gathering or Pokemon, you should definitely check it out if you haven&#39;t already.</p><p>A while back, I made this mock up screenshot of what Balatro might look like on the
E-Reader.</p><figure><img src="https://mattgreer.dev/_next/static/media/balatroMockup.cc0cdefa.png"/><figcaption>A mock up of Balatro on the E-Reader</figcaption></figure><p>This mock up was really fun to make. So I decided to take it one step further and make a working prototype of the game. This was also a blast to make!</p><iframe height="315" src="https://www.youtube.com/embed/mhmxfF1fxpQ" frameborder="0" allowfullscreen=""></iframe><p>This prototype is <em>almost</em> entirely real. It&#39;s a real E-Reader game, and it really plays Balatro. I only implemented just what you see in the video, so it&#39;s a very long way away from being a full port of the game.</p><p>I said it&#39;s almost entirely real because it does fake a few things. The blind selection screen is entirely a mock. You just press A and go into the round.</p><figure><img src="https://mattgreer.dev/_next/static/media/prototypeBlindsScreen.863a3ea0.png"/><figcaption>The blind selection screen is completely mocked</figcaption></figure><p>And when you win the round, the win screen is mocked too. You have to win with two remaining hands for it to be believable :)</p><figure><img src="https://mattgreer.dev/_next/static/media/prototypeWinScreen.d6003ca8.png"/><figcaption>The blind selection screen is completely mocked</figcaption></figure><p>But playing the game within the round is 99% real. I hard coded Fibonacci and Splash jokers, and when it calculates what type of hand was played, it only knows about &#34;duplicative&#34; style hands (ie two pair, full house, three of a kind, etc). My wife was sad to find her straight only got scored as a high card. Doh. Many other things are missing too, but this was mostly due to not wanting to spend too much time on this project more than anything.</p><h2 id="could-it-be-done">Could it be done?<a aria-hidden="true" href="#could-it-be-done"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2><p>Would it be possible to make Balatro for the E-Reader? I think so.</p><p>It would be a challenging project and a good number of concessions would need to be made. But I do think a demaked version that still captures the essence and fun of the game is doable.</p><h3 id="dealing-with-high-scores">Dealing with high scores<a aria-hidden="true" href="#dealing-with-high-scores"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3><p>An immediate challenge would be the massive scores you can get in Balatro. E-Reader games can comfortably work with 32 bit numbers. So the highest possible score would be 4,294,967,295. Real Balatro uses 64 bit numbers so scores can absolutely go into the stratosphere there. But I think 4 billion is still plenty to have fun and get that Balatro experience.</p><p>There&#39;s more bad news here. We&#39;ll talk about it below in the small numbers section.</p><p>But ... the Game Boy Advance&#39;s screen is only 240x160 pixels, so fitting such large numbers onto the screen would be a challenge. This is an area the demake would have to be different from the real thing. Something like this would be needed (just a quick mock up).</p><figure><img src="https://mattgreer.dev/_next/static/media/newUiForLargerScores.b3b4749d.png"/><figcaption>A UI change to accomodate larger scores</figcaption></figure><h3 id="so-many-numbers">So many numbers<a aria-hidden="true" href="#so-many-numbers"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3><p>Balatro puts a lot of numbers on the screen.</p><ul><li>Number of remaining hands</li><li>Number of remaining discards</li><li>Current ante</li><li>Current round</li><li>How many cards remain in the deck</li><li>How large the deck is</li><li>The level of the hand that is being played</li><li>The current chip total</li><li>The current mult total</li><li>Your money</li><li>Your score so far in the round</li><li>Your score for the current hand</li><li>The goal score to beat the round</li></ul><p>Did I miss any? The E-Reader has a collection of <a tabindex="0" href="https://ereader.miraheze.org/wiki/ERAPI-Z80#0x6b:_DrawNumber"><code>DrawNumber</code></a> functions, but the problem is it is limited to four unique numbers. If you try to draw a fifth number with <code>DrawNumber</code>, nothing happens.</p><p>Even worse, each number can have a max of 5 digits. So just to keep track of your score, would take up 2 of those number slots.</p><p>A lot of this can be worked around with sprites and some clever redesigning and careful pruning back of features (this would be a demake after all). I do think this challenge could be overcome, but it would probably be the hardest part of this project.</p><h3 id="150-jokers">150 jokers?<a aria-hidden="true" href="#150-jokers"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3><p>Balatro has 150 jokers, and they all do very different things. I think making a full fledged &#34;joker engine&#34; that can handle this is doable. The E-Reader/GBA has plenty of memory for this, and it&#39;s easy to dynamically call functions. So logic-wise, I don&#39;t think this would be a problem. But each joker needs a card graphic.</p><figure><img src="https://mattgreer.dev/_next/static/media/jokers.e69394c8.png"/><figcaption>Five Joker cards in the demaked style</figcaption></figure><p>That would really add up and take up a ton of space. Space is always a concern with E-Reader games. Make no doubt, Balatro on the E-Reader would be a very large game by E-Reader standards. But I&#39;m certain fitting all 150 jokers would not be possible. A careful sub-selection of jokers would need to be picked.</p><h3 id="text">Text<a aria-hidden="true" href="#text"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3><p>Balatro has a ton of text in it. Similar to games like Magic the Gathering, the rules of the game are literally written out on the cards. Balatro uses little text pop outs for this, but it&#39;s still the same idea.</p><figure><img src="https://mattgreer.dev/_next/static/media/wee.2b09105a.png"/><figcaption>The Wee Joker showing its rules pop up</figcaption></figure><p>There would be no way to include all this text into an E-Reader demake. So unfortunately the demake would only be playable by people who are familiar with the main game. I dunno, that doesn&#39;t really bother me. This is the type of project that&#39;s just done for the sake of it.</p><h3 id="running-out-of-sprites">Running out of sprites<a aria-hidden="true" href="#running-out-of-sprites"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3><p>In Balatro it&#39;s possible to have many jokers, and a large hand. Here is a very extreme example, but it gets the idea across.</p><figure><img src="https://mattgreer.dev/_next/static/media/manyCards.ce68c0b2.png"/><figcaption>A game of Balatro with many jokers and a very large hand</figcaption></figure><p>The E-Reader only supports 56 sprites. I think for space saving, a card would have to be made out of two (and sometimes three) sprites each.</p><figure><img src="https://mattgreer.dev/_next/static/media/threeSpritesOneCard.5303a6af.svg"/><figcaption>A single card made out of three sprites</figcaption></figure><p>Working within this limitation would be very challenging. Fortunately it is possible to use backgrounds here instead of sprites. In my prototype, your hand at the bottom of the screen is a background (similarly, in my <a tabindex="0" href="https://mattgreer.dev/blog/cramming-solitaire-onto-a-nintendo-ereader-card/">E-Reader solitaire game</a>, all of the cards are drawn into a background instead of using sprites). That can help a lot. But even with backgrounds, this would be challenging. The demake might have to impose a limit on how big your hand can be and/or how many jokers you can have.</p><h3 id="space-considerations">Space considerations<a aria-hidden="true" href="#space-considerations"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3><p>Space is always a challenge with this device. The prototype ended up being four data strips, in other words two cards.</p><figure><img src="https://mattgreer.dev/_next/static/media/exoCards.89feb592.jpg"/><figcaption>An example E-Reader game that is spread across two cards</figcaption></figure><p>But I also wasn&#39;t worried about space here, I just built the prototype without worrying how large it ended up being. If you work at it, you can get your E-Reader games a lot smaller with clever coding techniques. So although I&#39;m pretty sure Balatro would be a large game (maybe 8 cards? 10? The max of 12?), running out of space such that this idea ends up not possible doesn&#39;t worry me.</p><h3 id="small-numbers">Small numbers<a aria-hidden="true" href="#small-numbers"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3><p>Uh oh, this is a bad one. The GBA can not natively handle decimal numbers, like <code>.25</code> or <code>1.1</code>. There are a few ways to work around this, but none of them are great.</p><h4 id="work-around-idea-1-use-fixed-point-numbers">Work around idea 1: Use fixed point numbers<a aria-hidden="true" href="#work-around-idea-1-use-fixed-point-numbers"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4><p>A work around for this problem has been used on old computers since forever. It&#39;s called fixed point, and it&#39;s a way to do decimal numbers like <code>1.5</code> on systems that don&#39;t support them natively. I won&#39;t get into the details here as it&#39;s fairly technical (I wrote two blog posts on it <a tabindex="0" href="https://mattgreer.dev/blog/neo-geo-dev-fixed-point/">here</a> and <a tabindex="0" href="https://mattgreer.dev/blog/ereader-simple-fixed-point/">here</a> if you are curious). This approach has the advantage of being simple, but has the major disadvantage of reducing the largest number we can work with. That 4 billion above would likely be reduced to 1 billion or even half a billion. Ugh. And on the flip side, this approach has accuracy problems, it could do say <code>1.5</code> pretty easily, but <code>1.1</code> would probably have to be rounded to <code>1.25</code> or <code>1</code>.</p><h4 id="work-around-idea-2-software-floating-point">Work around idea 2: software floating point<a aria-hidden="true" href="#work-around-idea-2-software-floating-point"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4><p>Floating point is the name of the number system that modern systems (and Balatro) use to do decimal numbers. It&#39;s much better than fixed point. On modern computers, it is always implemented in hardware, because it&#39;s very complicated. Technically it would probably be possible to implement a software version of floating point in the E-Reader, but my word it&#39;d be one hell of a project and slow as molasses. This one just doesn&#39;t seem realistic to me.</p><h4 id="work-around-3-just-use-integers">Work around 3: just use integers<a aria-hidden="true" href="#work-around-3-just-use-integers"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4><p>Integers are whole numbers, like <code>1</code>, <code>40</code> and so on. All computers support this type of number. This is by far the easiest and fastest approach. But it would likely mean ditching jokers like Hologram, Vampire and Lucky Cat. Some of the coolest jokers in the game :(</p><figure><img src="https://mattgreer.dev/_next/static/media/hologram.73aed2cd.png"/><figcaption>Hologram we&#39;d miss you!</figcaption></figure><p>Oh, and then there is the problem of drawing decimal numbers to the screen. The E-Reader&#39;s <code>DrawNumber</code> functions work with whole numbers only ...</p><p>Make no doubt about it, decimal numbers are a big hurdle in making a Balatro demake. If I were to actually make this game, I&#39;d probably choose the fixed point approach for this problem.</p><h2 id="just-make-a-real-gba-game">Just make a real GBA game?<a aria-hidden="true" href="#just-make-a-real-gba-game"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2><p>Why do this on the E-Reader if it is so limited? No other reason than I really like the device and have a soft spot for it. If the demake was instead made as a full fledged GBA game on a cartridge, it&#39;d have a bit more breathing room to work through these issues. Many limitations would remain though, like the 240x160 screen and decimal numbers. The GBA can work with 128 sprites, which is better than the 56 of the E-Reader, but still pretty limiting. My hunch is doing this as a proper GBA game would only make it a little bit easier.</p><h2 id="anyway--will-i-release-the-prototype">Anyway ... will I release the prototype?<a aria-hidden="true" href="#anyway--will-i-release-the-prototype"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2><p>No, I won&#39;t. At least, not without LocalThunk&#39;s approval. This was just for fun, and I made it entirely on my own. Balatro is an excellent game, so I don&#39;t want to cause it any harm (or at least surprise) by releasing a demake of it, even if it&#39;s just a tiny little prototype. You really aren&#39;t missing anything, everything that is possible in the prototype is shown in the video. Oh, the prototype can also sort the cards by rank or suit. Yup, that&#39;s the entirety of it.</p><h2 id="conclusion">Conclusion<a aria-hidden="true" href="#conclusion"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2><p>Thanks for reading! I have more posts about the <a tabindex="0" href="https://mattgreer.dev/blog/E-Reader/">E-Reader</a> and <a tabindex="0" href="https://mattgreer.dev/blog/Balatro/">Balatro</a> if you want more.</p><p>And if you read this far, checkout <a tabindex="0" href="https://retrodotcards.com">https://retrodotcards.com</a>, my E-Reader site. I will be selling a pack of new games starting July 27th!</p></div></div>
  </body>
</html>
