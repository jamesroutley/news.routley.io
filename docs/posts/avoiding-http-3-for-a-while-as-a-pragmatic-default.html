<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://utcc.utoronto.ca/~cks/space/blog/web/AvoidingHTTP3ForNow">Original</a>
    <h1>Avoiding HTTP/3 (for a while) as a pragmatic default</h1>
    
    <div id="readability-page-1" class="page"><div><h2>Avoiding HTTP/3 (for a while) as a pragmatic default</h2>

	<p><small>April  1, 2023</small></p>
</div><div><p>I imagine that you&#39;ve heard of <a href="https://en.wikipedia.org/wiki/HTTP/3">HTTP/3</a> by now; as Wikipedia describes
it, it&#39;s &#34;the third major version of the Hypertext Transfer Protocol
used to exchange information on the World Wide Web&#34;. I&#39;m generally
a quiet enthusiast of adopting new HTTP things when we can (we&#39;ve
been reasonably prompt to add <a href="https://en.wikipedia.org/wiki/HTTP/2">HTTP/2</a> to our Apache web servers
when it was possible), but with HTTP/3 I think we&#39;re likely to take
a much more cautious and slow approach even once HTTP/3 support is
available for Apache. This is because HTTP/3 is unlike previous
versions in one important way.</p>

<p>One of the unusual things about HTTP/3 is that it doesn&#39;t use <a href="https://en.wikipedia.org/wiki/Transmission_Control_Protocol">TCP</a> but
instead a new network transport protocol, <a href="https://en.wikipedia.org/wiki/QUIC">QUIC</a>, and QUIC operates over UDP.
Operating over UDP instead of TCP has a number of consequences; for
example, <a href="https://utcc.utoronto.ca/~cks/space/blog/sysadmin/HTTP3AndOurFirewalls">firewalls need adjustments to let &#39;QUIC&#39; traffic through</a> and <a href="https://utcc.utoronto.ca/~cks/space/blog/tech/InternetPathsMayVaryByPort">the path your QUIC traffic
takes may be different than your TCP HTTP traffic</a>. All of this creates many
opportunities for different things to happen with HTTP/3 requests
than with your TCP HTTP requests. Some of these different things
will be one version working and the other not, and since HTTP/3 is
the newer and less common version, it&#39;s the version most likely to
not work.</p>

<p><a href="https://support.cs.toronto.edu/">We</a>&#39;re not a large group of people,
and we don&#39;t have a big environment where we have a lot of visibility
into how traffic moves through the broad Internet. If there is a HTTP/3
specific networking issue between our web servers and people making
requests to them, it&#39;s going to be basically opaque to us, especially
if people reporting problems can&#39;t even see whether or not they&#39;re
using HTTP/3 (which they probably can&#39;t; <a href="https://utcc.utoronto.ca/~cks/space/blog/web/BrowserNetworkDebuggingTweak">you have to go well out of
your way to see this in Firefox</a>, for
example). With limited people and limited resources to debug problems,
the conservative approach is to avoid having them entirely by not
offering HTTP/3 in its relatively early days.</p>

<p>How long will it take for HTTP/3 to be reliable for random people in
random network environments (including reliably and detectably not
working)? I don&#39;t know, but I certainly don&#39;t expect it to happen right
away once HTTP/3 becomes available for Apache and other common web
servers.</p>

<p>(I&#39;m also uncertain about how much HTTP/3 usage there is among the
big players like Google, Cloudflare, and so on. They matter because
they have the resources to spot and track problems specific to
HTTP/3, and to get network path problems resolved. If you can&#39;t
reach <a href="https://support.cs.toronto.edu/">us</a> because of something
in your ISP, we have a problem; if you can&#39;t reach GMail for the
same reason, your ISP has a problem.)</p>

<p>PS: All of this is of course academic until Ubuntu&#39;s version of Apache
supports HTTP/3. We&#39;re quite unlikely to switch web servers to get
HTTP/3, even if Apache takes much longer than other web servers to add
support.</p>
</div></div>
  </body>
</html>
