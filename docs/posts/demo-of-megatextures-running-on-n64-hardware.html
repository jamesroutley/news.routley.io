<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/lambertjamesd/n64brew2023">Original</a>
    <h1>Demo of megatextures running on n64 hardware</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://blog.veitheller.de/lambertjamesd/n64brew2023/blob/master/images/screenshot.png"><img src="https://blog.veitheller.de/lambertjamesd/n64brew2023/raw/master/images/screenshot.png" alt="Screenshot"/></a></p>
<p dir="auto">This showcases a demo of megatextures running on n64 hardware. A &#34;megatexture&#34; for the n64 is really just a normal sized textured by modern standards but with that you can do some prebaked scenes that look like they don&#39;t belong on the n64.</p>
<h2 tabindex="-1" dir="auto"><a id="user-content-building-the-rom" aria-hidden="true" tabindex="-1" href="#building-the-rom"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>building the rom</h2>
<p dir="auto">to build the rom, you need to install a few dependendencies.</p>
<p dir="auto">First, you will need to setup <a href="https://crashoveride95.github.io/n64hbrew/modernsdk/startoff.html" rel="nofollow">Modern SDK</a>.</p>
<p dir="auto">After installing modern sdk you will want to also install</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo apt install libnustd"><pre>sudo apt install libnustd</pre></div>
<p dir="auto">Next, you will need to download Blender 3.0 or higher. Then set the environment variable <code>BLENDER_3_0</code> to be the absolute path where the Blender executable is located on your system.</p>

<p dir="auto">e.g. add this to your ~/.bashrc</p>
<div dir="auto" data-snippet-clipboard-copy-content="export BLENDER_3_0=&#34;/usr/bin/blender&#34;"><pre><span>export</span> BLENDER_3_0=<span><span>&#34;</span>/usr/bin/blender<span>&#34;</span></span></pre></div>
<p dir="auto">Install sfz2n64, mpg123, and sox</p>
<div dir="auto" data-snippet-clipboard-copy-content="echo &#34;deb [trusted=yes] https://lambertjamesd.github.io/apt/ ./&#34; \
    | sudo tee /etc/apt/sources.list.d/lambertjamesd.list
sudo apt update
sudo apt install sfz2n64 mpg123 sox"><pre><span>echo</span> <span><span>&#34;</span>deb [trusted=yes] https://lambertjamesd.github.io/apt/ ./<span>&#34;</span></span> \
    <span>|</span> sudo tee /etc/apt/sources.list.d/lambertjamesd.list
sudo apt update
sudo apt install sfz2n64 mpg123 sox</pre></div>
<p dir="auto">You will need to install nodejs. You can use apt for this</p>

<p dir="auto">Once you have these dependences, you should be able to run <code>make</code> to build the rom. The result will be saved to <code>build/megatextures.z64</code></p>
<h2 tabindex="-1" dir="auto"><a id="user-content-editing-assetsworldtestblend" aria-hidden="true" tabindex="-1" href="#editing-assetsworldtestblend"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a>editing assets/world/test.blend</h2>
<p dir="auto">If you want to build out a scene that uses megatextures, edit <code>assets/world/test.blend</code>.</p>
<p dir="auto">Any object starting with the name <code>@megatexture</code> will be processed as a megatexture. It must have a material with a name that shows up in the file <code>assets/materials/megatextures.skm.yaml</code> of the same name. The material in <code>assets/materials/megatextures.skm.yaml</code> must point to the location of the texture with the fmt set to <code>G_IM_FMT_RGBA</code> and the siz set to <code>G_IM_SIZ_16b</code>.</p>
<p dir="auto">Texture sizes must be a power of two and at most 1024x1024 in size. Texture coordinates must also be set so the pixels are rectangles. The geometry for a single mega texture must also be flat.</p>
<p dir="auto">Becuase no z buffer is used, you should specify a sort_group for a megatexture model. This is done but including the string <code>sort_group</code> in the name followed by a number. Negative numbers are pre sorted positive numbers are sorted at runtime with smaller sort groups being drawn before larger sort groups. If the sort group is the same then the distance of the object from the camera in the z direction is used to sort from back to front.</p>
</article>
          </div></div>
  </body>
</html>
