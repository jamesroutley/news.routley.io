<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://opensource.googleblog.com/2024/02/magika-ai-powered-fast-and-efficient-file-type-identification.html">Original</a>
    <h1>Magika: AI powered fast and efficient file type identification</h1>
    
    <div id="readability-page-1" class="page"><p>
<h4><span>Thursday, February 15, 2024</span></h4>
</p><div id="post-body-824803887080674909" itemprop="articleBody">
<meta content="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgbkRgYqDxKQrhyphenhyphenl-sNYpZJ08Oo5TqD08Yk5tcbCYzFatO-cDjDRlDH96vDiO0ylvYN-TZoKSfR4LBln1wSFJLixBRiuVeuzaF0UQ3wGUMt14VKugPHuk7q0CwSgeg0V7OVS_yxaUXbFus2yVXrLmRdB88QQyXagMFE6Axs91iDgdq1hUkS4hsS4ECMuf4/s1600/OSS-Majika-Social-V5.png" name="twitter:image"/>
<p>

<a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhxNXxbDvO9U0sI1_Vh0b_iePDZZDhr-XzvjOQTrAFBHEnaFSoohzbNR36Op83b8Hj7L1JOiex5JWEyQFVzC5jWBtLRULhMDmbu_Z4Cs3094FwQVmI8H2uOYKIu_ozG4luPhxeJIQiH_GjV7zAP4K-o-B6RnTZptdhH3nhUfatSurWEmn2x9vdp0vitAk4/s1600/OSS-Magika-Banner-V5%20%281%29.png"><img data-original-height="800" data-original-width="1058" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhxNXxbDvO9U0sI1_Vh0b_iePDZZDhr-XzvjOQTrAFBHEnaFSoohzbNR36Op83b8Hj7L1JOiex5JWEyQFVzC5jWBtLRULhMDmbu_Z4Cs3094FwQVmI8H2uOYKIu_ozG4luPhxeJIQiH_GjV7zAP4K-o-B6RnTZptdhH3nhUfatSurWEmn2x9vdp0vitAk4/s1600/OSS-Magika-Banner-V5%20%281%29.png"/></a></p><p>Today we are <a href="https://google.github.io/magika/" target="_blank">open-sourcing Magika</a>, Googleâ€™s AI-powered file-type identification system, to help others accurately detect binary and textual file types. Under the hood, Magika employs a custom, highly optimized deep-learning model, enabling precise file identification within milliseconds, even when running on a CPU. </p>

<div><table><tbody><tr><td><center><img alt="Magika command line tool used to recognize a identify the type of a diverse set of files" data-original-height="1504" data-original-width="720" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiPjf8Rag2sUXJw_aUJcqEBo_RPNRG0PyFSJI8FXuyeaCYT195znXw4DW235ZHVihlUfZ744MFeZBlfhG_xdq8jjnQN5ICFjMO-rphRjt9BfO1gfyupghgAPWxNsivP9l362AcNXWnFSj_CzaJ1Con6ZMfJ1RcFExjhCDRMUs59qcQAxulIlkhBn-uhNDU/s1600/image1.png" td=""/></center></td></tr><tr><td><i>Magika command line tool used to recognize a identify the type of a diverse set of files</i></td></tr></tbody></table></div>

<p>You can <a href="https://google.github.io/magika/" target="_blank">try the Magika web demo today</a>, or install it as a Python library and standalone command line tool (output is showcased above) by  using the standard command line  <span>pip install magika</span>.</p>

<h2>Why identifying file type is difficult</h2>

<p>Since the early days of computing, accurately detecting file types has been crucial in determining how to process files. Linux comes equipped with <a href="https://github.com/file/file" target="_blank"><span>libmagic</span> and the <span>file utility</span></a>, which have served as the de facto standard for file type identification for over 50 years. Today web browsers, code editors, and countless other software rely on file-type detection to decide how to properly render a file. For example, modern code editors use file-type detection to choose which syntax coloring scheme to use as the developer starts typing in a new file. </p>

<p>Accurate file-type detection is a notoriously difficult problem because each file format has a different structure, or no structure at all. This is particularly challenging for textual formats and programming languages as they have very similar constructs. So far, <span>libmagic</span> and most other file-type-identification software have been relying on a handcrafted collection of heuristics and custom rules to detect each file format.</p> 

<p>This manual approach is both time consuming and error prone as it is hard for humans to create generalized rules by hand. In particular for security applications, creating dependable detection is especially challenging as attackers are constantly attempting to confuse detection with adversarially-crafted payloads.</p>

<p>To address this issue and provide fast and accurate file-type detection we researched and developed Magika, a new AI powered file type detector. Under the hood, Magika uses a custom, highly optimized deep-learning model designed and trained using <a href="https://keras.io/" target="_blank">Keras</a> that only weighs about 1MB.  At inference time Magika uses  <a href="https://onnx.ai/" target="_blank">Onnx</a> as an inference engine to ensure files are identified in a matter of milliseconds, almost as fast as a non-AI tool even on CPU.</p>

<h2>Magika Performance</h2>

<div><table><tbody><tr><td><center><img alt="Magika detection quality compared to other tools on our 1M files benchmark" data-original-height="1504" data-original-width="720" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiuz_BUIEGw6FQfhzA1lr4EQ1SLO_O0S8TIlGrnYY5Kh0BRngFTboPD4_DTCYsbKkO9c51xUKaulCu8ivEdyQlGIhEfvRzleArV9XpatHdvgSf62F1kt3DMwSOwOOan6gL2kaaangCIzQBv1ZVGIXInx-9jpO9N_OkYR8LeJvl6A-Ba3Qdfq441i9QBxvY/s1600/image2.png" td=""/></center></td></tr><tr><td><i>Magika detection quality compared to other tools on our 1M files benchmark</i></td></tr></tbody></table></div></div></div>
  </body>
</html>
