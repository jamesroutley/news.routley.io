<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.jacobvosmaer.nl/0015-crowbx-envelope-generators/">Original</a>
    <h1>Hacking the CrowBX envelope generators</h1>
    
    <div id="readability-page-1" class="page"><div><p><i><a href="https://blog.jacobvosmaer.nl/">Jacob Vosmaer&#39;s blog</a></i></p>

<p>2023-11-20</p>

<p>In this post I will talk about some &#34;PCB hacking&#34; I did in February 2020 to upgrade some of my <a href="https://blog.jacobvosmaer.nl/crowbx.html">CrowBX</a> envelope generators.</p>

<h2>What are envelope generators?</h2>

<p>As I mentioned <a href="https://blog.jacobvosmaer.nl/0011-crowbx/">previously</a>, the CrowBX is a DIY recreation of the Oberheim OB-X that I built for myself from a kit. The OB-X is a keyboard synthesizer from 1979. Envelope generators are used to create &#34;articulation&#34; effects when you press a key on the keyboard.</p>

<p>Here is a short example of a synthesized sound, first with crude on/off dynamics, and then with articulation provided by an envelope generator. Note how the second time, the volume changes over time.</p>



<p>Imagine a waveform changing in amplitude over time, and draw its &#34;outline&#34; or &#34;contour&#34;. This shape is called the envelope. I like to think that is because it &#34;envelopes the waveform&#34; but I don&#39;t know if that is actually why it&#39;s called that way.</p>

<p><img src="https://blog.jacobvosmaer.nl/assets/img/0015/envelope.jpeg"/></p>

<h2>OB-X voices must sound the same</h2>

<p><a href="https://blog.jacobvosmaer.nl/0011-crowbx/#ob-x">Recall</a> that the OB-X was a keyboard instrument with a keybed with 61 black and white keys but only up to 8 individual sound generators (&#34;voices&#34;). It would have been simpler if the instrument had 61 voices but that would have been prohibitively bulky, unreliable (due to heat) and costly. What the OB-X does instead is to dynamically assign voices to keypresses from the user.</p>

<p>For something like this to work, you want the voices to sound the same. The user has little or no control over how voices get assigned to keys and random changes in timbre and articulation would make the instrument harder to play. I must add that in reality the voices <em>don&#39;t</em> sound exactly the same, and this variability adds to the character and appeal of synthesizers of this era. Still, from an engineering viewpoint, the goal is to have them be interchangeable.</p>

<p>In order to achieve a good level of inter-voice uniformity without needing excessive amounts of calibration labor, Oberheim used the Curtis Electro-Music <a href="https://www.muzines.co.uk/articles/electro-music-engineer-cem-3310/3647">CEM3310</a> envelope generator IC&#39;s in the OB-X. Each voice used 2 CEM3310&#39;s: one for the voltage controlled low-pass filter (VCF) and one for the voltage controlled amplifier (VCA).</p>

<h2>The digital Dark Age</h2>

<p>Some time in the late 80s, Curtis Electromusic stopped making synthesizer IC&#39;s. From that point on the CEM3310 envelope generators were no longer easily available. The lack of these envelope generators was an important obstacle for DIY enthusiasts wanting to recreate the OB-X.</p>

<p><a href="https://www.cs80.com">Scott Rider</a>, the creator of the CrowBX, worked around this problem in 2013 by creating equivalent circuits that behaved like the CEM3310 IC&#39;s.
When I started to build my own 4-voice CrowBX in 2017, the printed circuit boards (PCB&#39;s) I bought had that &#34;CEM3310 equivalent circuit&#34; on them.</p>

<p>The likely reason that Curtis Electromusic stopped making analog music IC&#39;s is that the synthesizer industry shifted to digital technology in the mid 80s. This created a kind of  Dark Age where it was hard for enthusiasts to get hold of analog synthesizers. This digital dark age ended about 30 years later when more and more manufacturers started selling analog synthesizers again.</p>

<p>Scott Rider&#39;s CrowBX project straddles the end of this dark age. At the start of it, Curtis IC&#39;s could only be found by salvaging them from old instruments. By the end, Curtis Electromusic was producing music IC&#39;s again, and there are now also clones available from <a href="https://alfarzpp.lv/eng/sc/application.php">Alfa RPAR</a>. Scott Rider took advantage of this by simplifying the CrowBX circuit boards to use the <a href="https://alfarzpp.lv/eng/sc/AS3310.php">AS3310</a> in later runs.</p>

<h2>The challenge</h2>

<p>This brings me to the challenge I wanted to write about. When I bought a second set of CrowBX PCB&#39;s, they were a later revision that used the AS3310. For my 8-voice CrowBX I would end up with 4 old voice cards, with &#34;CEM3310 equivalent circuits&#34;, and 4 new ones with AS3310&#39;s. And soon after I built my first new voice card I realized that the &#34;CEM3310 equivalent circuit&#34; really is not an equivalent. The maximum decay and release times of the AS3310 were much longer than those of the &#34;equivalent circuit&#34;. </p>

<p>This then led to my hacking challenge: could I somehow get the old voice cards to use the original envelope generator IC&#39;s?</p>

<p>The answer is &#34;yes&#34; and it was a fun puzzle to solve. I removed all the parts of the &#34;equivalent circuit&#34; that were not also in the original circuit. I then looked at all the electrical connections going into and out of the 3310 envelope generator (EG) in the original circuit, and I looked up the corresponding points on the CrowBX circuit. In some cases I was able to reuse existing traces on the circuit board. In other cases I had to add extra wires to make the connections happen.</p>

<p>The end result looked like this for the VCA EG:</p>

<p><img src="https://blog.jacobvosmaer.nl/assets/img/0015/vca-eg-3310.jpg"/></p>

<p>And like this for the VCF EG:</p>

<p><img src="https://blog.jacobvosmaer.nl/assets/img/0015/vcf-eg-3310.jpg"/></p>

<p>On the off chance that you want to do this mod yourself, here is a set of <a href="https://blog.jacobvosmaer.nl/0015-crowbx-envelope-generators/env-mod.html">instructions</a>.</p>

<h2>Conclusion</h2>

<p>This was another great learning experience to me, which felt like hacking in a new context. What makes it hacking in my eyes is that I had to find a way to use the old PCB&#39;s in a way they were not intended for. To use an object to your advantage in a way it was not intended to be used could be a definition of &#34;hack&#34;, couldn&#39;t it?</p>

<p>It was also very rewarding to get the original envelope generators working because they made the instrument better. They allowed for much longer decay and release times, which added new expressive possibilities.</p>
<p>Tags:
<a href="https://blog.jacobvosmaer.nl/crowbx.html">crowbx</a>
<a href="https://blog.jacobvosmaer.nl/music.html">music</a>
</p><details><summary>Edit history</summary><table>
<tbody><tr><td>2023-12-20</td><td></td><td>0015 small fixes</td></tr>
<tr><td>2023-12-20</td><td></td><td>0015: add music tag</td></tr>
<tr><td>2023-12-20</td><td></td><td>Add 0015 crowbx envelope generators</td></tr>
</tbody></table></details><p><a href="https://blog.jacobvosmaer.nl/">Back</a></p>
</div></div>
  </body>
</html>
