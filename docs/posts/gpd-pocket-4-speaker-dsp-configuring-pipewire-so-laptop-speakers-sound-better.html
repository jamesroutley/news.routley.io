<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://kittenlabs.de/blog/2025/04/06/gpd-pocket-4-speaker-dsp/">Original</a>
    <h1>GPD Pocket 4 Speaker DSP: Configuring PipeWire so laptop speakers sound better</h1>
    
    <div id="readability-page-1" class="page"><div><p>Configuring PipeWire to make laptop speakers sound better (Bankstown, Convolution/FIR, etc.)</p><h3 id="result">Result<a href="#result" aria-label="Heading self-link"></a></h3><iframe width="90%" src="https://www.youtube-nocookie.com/embed/wNm5xq_xw3s" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe><h3 id="motivation">Motivation<a href="#motivation" aria-label="Heading self-link"></a></h3><p>Modern speakers require a lot of DSP magic to sound as good as they do.</p><p>These days, many mobile devices like phones, laptops, etc. do a lot of digital signal processing in software in order to make tiny speakers output a lot of sound.</p><p>The Asahi Linux project (Linux on Apple Silicon MacBooks) has done a lot of work to make MacBooks sound as good as possible on Linux:</p><h3 id="how">How?<a href="#how" aria-label="Heading self-link"></a></h3><p>Using <a href="https://www.roomeqwizard.com/" target="_blank">Room EQ Wizard</a> the frequency/impulse response of the built-in speakers was measured.</p><p><img src="https://kittenlabs.de/blog/2025/04/06/gpd-pocket-4-speaker-dsp/featured-before.png" alt="Frequency response curve, showing a very low bass response and a resonance at ~4kHz"/></p><p>REW can do arithmetic operations on the curves, so after generating a filter curve for a 300Hz slope, both channels were divided (A/B) against that curve and then inverted (1/A) and exported as a .wav impulse response.</p><p>The DSP configuration/pipeline of a 14&#34; MacBook Pro was then used as a template, the multi-speaker setup (modern MacBooks have 6 speakers!) was stripped-down to just a single stereo pair and the parameters were changed a bit.</p><h3 id="links">Links<a href="#links" aria-label="Heading self-link"></a></h3><ul><li><a href="https://github.com/Manawyrm/gpd-pocket-4-pipewire" target="_blank">gpd-pocket-4-pipewire</a>: GitHub Repository</li><li><a href="https://aur.archlinux.org/packages/gpd-pocket-4-pipewire" target="_blank">gpd-pocket-4-pipewire</a>: AUR package</li><li><a href="https://www.roomeqwizard.com/" target="_blank">Room EQ Wizard</a>: Software used to measure speaker parameters</li></ul></div></div>
  </body>
</html>
