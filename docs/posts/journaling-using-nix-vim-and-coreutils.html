<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://tangled.sh/@oppi.li/journal">Original</a>
    <h1>Journaling using Nix, Vim and coreutils</h1>
    
    <div id="readability-page-1" class="page"><section>
            <article><p>I cobbled together a journaling system with {neo,}vim,
coreutils and <a href="http://www.fresse.org/dateutils">dateutils</a>.
This system is loosely based on <a href="https://www.rydercarroll.com/">Ryder
Caroll&#39;s</a> Bullet Journal
method.</p>
<p><a href="https://u.peppe.rs/SpF.png"><img src="https://camo.tangled.sh/60766f1144b836ae8a2cd11efbcedf1f57ab96af784ab1073f50f8b1ca3f76b5/68747470733a2f2f752e70657070652e72732f5370462e706e67" alt=""/></a></p>
<h3 id="the-format">The format</h3>
<p>The journal for a given year is a directory:</p>
<pre><code>λ ls journal/
2022/   2023/
</code></pre>
<p>In each directory are 12 files, one for each month of the
year, numbered like so:</p>
<pre><code>λ ls journal/2023/
01  02  03  04  05  06  07  08  09  10  11  12
</code></pre>
<p>We can now begin writing stuff down:</p>
<pre><code>λ vim journal/2023/1
</code></pre>
<p>Every month must start with a calendar of course, fill that
in with:</p>
<pre><code>:read !cal -m
</code></pre>
<p>Your entry for January might look like this:</p>
<pre><code>λ cat journal/2023/01
    January 2023
Mo Tu We Th Fr Sa Su
                   1
 2  3  4  5  6  7  8
 9 10 11 12 13 14 15
16 17 18 19 20 21 22
23 24 25 26 27 28 29
30 31
</code></pre>
<p>I prefer planning week by week, as opposed to creating a
task-list every day, here&#39;s what I have for the first couple
of weeks:</p>
<pre><code>    January 2023
Mo Tu We Th Fr Sa Su
                   1
 2  3  4  5  6  7  8
 9 10 11 12 13 14 15
16 17 18 19 20 21 22
23 24 25 26 27 28 29
30 31


week 1

done apply leaves
done dload boarding pass
moved reply to dan


week 2

todo reply to dan
todo pack bags
done travel insurance
todo weigh luggage
</code></pre>
<p>I start the week by writing a header and each item that week
is placed on its own line. The items are prefixed with a
<code>todo</code> or a <code>done</code> signifier.</p>
<h3 id="form-over-function">Form over function</h3>
<p>Right off the bat, the signifiers look very noisy, Even more
so once we start introducing variety (I use &#34;event&#34;, &#34;note&#34;
and &#34;moved&#34;):</p>
<pre><code>week 1

todo apply leaves
done dload boarding pass
todo reply to dan
event fr trip
note weight 68.6
</code></pre>
<p>We can clean this up with &#34;abbreviations&#34; (<code>:h abbreviations</code>):</p>
<pre><code>:iabbrev todo ·
:iabbrev done ×
</code></pre>
<p>Now, typing this:</p>
<pre><code>todo apply leaves
</code></pre>
<p>Automatically inserts:</p>
<pre><code>· apply leaves
</code></pre>
<p>You can use <code>x</code> and <code>o</code> as well, but <code>×</code> (U+00D7,
MULTIPLICATION SIGN) and <code>·</code> (U+00B7, MIDDLE DOT) are more
... <em>gourmet</em>.</p>
<p>The other signifiers I use are:</p>
<ul>
<li><code>-</code> for note</li>
<li><code>o</code> for event</li>
<li><code>&gt;</code> for moved.</li>
</ul>
<p>Nit #2 is the lack of order. We can employ vim to introduce
grouping and sorting. Select the list of entries for this
week:</p>
<pre><code>vip         &#34; line-wise select inner paragraph
:&#39;&lt;,&#39;&gt;sort  &#34; the markers &#39;&lt; and &#39;&gt; are automatically inserted,
            &#34; they mark the start and end of the selection
</code></pre>
<p>We end up with:</p>
<pre><code>week 1

· apply leaves
· reply to dan
× dload boarding pass
</code></pre>
<p>The lines are grouped by their signifiers, segregating todo
items from completed items. Luckily, MIDDLE DOT is lesser
than MULTIPLICATION SIGN, so todo items are placed at the
top. The same goes for <code>o</code> and <code>x</code> symbols, either set of
signifiers will result in the same sorting order.</p>
<p>We can shorten this select-paragraph-invoke-sort dance by
setting the <code>formatprg</code> variable:</p>
<pre><code>:set formatprg=sort\ -V
</code></pre>
<p>Now, hitting <code>gqip</code> should automatically group and sort the
items for the week under the cursor, moving todo items to
the top. Finding signifier glyphs that suit your sorting
preference is a fun exercise.</p>
<h3 id="syntax-highlighting">Syntax highlighting</h3>
<p>Adding color to items introduces another layer of visual
distinction. In truth, I like to deck it out just because.</p>
<p>First, create a few syntax groups:</p>
<pre><code>:syntax match JournalAll /.*/        &#34; captures the entire buffer
:syntax match JournalDone /^×.*/     &#34; lines containing &#39;done&#39;  items: ×
:syntax match JournalTodo /^·.*/     &#34; lines containing &#39;todo&#39;  items: ·
:syntax match JournalEvent /^o.*/    &#34; lines containing &#39;event&#39; items: o
:syntax match JournalNote /^- .*/    &#34; lines containing &#39;note&#39;  items: -
:syntax match JournalMoved /^&gt;.*/    &#34; lines containing &#39;moved&#39; items: &gt;
</code></pre>
<p>Add highlights to each group:</p>
<pre><code>:highlight JournalAll    ctermfg=12   &#34; bright black
:highlight JournalDone   ctermfg=12   &#34; bright black
:highlight JournalEvent  ctermfg=6    &#34; cyan
:highlight JournalMoved  ctermfg=5    &#34; magenta
:highlight JournalNote   ctermfg=3    &#34; yellow
</code></pre>
<p>In my terminal, this is rendered like so:</p>
<p><a href="https://u.peppe.rs/Du6.png"><img src="https://camo.tangled.sh/154fd2fa914950789f163eb94c2bd1f17b09db2e1fcd304a1e5a27378836f7d7/68747470733a2f2f752e70657070652e72732f4475362e706e67" alt=""/></a></p>
<h3 id="habit-tracking">Habit tracking</h3>
<p>While this is not a part of my journaling system anymore, a
few headers and an awk script is all it takes to track
habits. My weekly entries would include a couple of habit
headers like so:</p>
<pre><code>week 1 --------------

× wake up on time
× water the plants

spend 7.5 7 10
---------------------


week 2 --------------

· make the bed
· go to bed

spend 30 2.75 6
---------------------
</code></pre>
<p>Here, under the <code>spend</code> header in week 1, are a list of
expenditures accumulated over the week. The monthly spend is
calculated with this awk script:</p>
<pre><code>BEGIN {spend=0;}
/spend/ {for(i=1;i&lt;=$NF;i++) spend+=$i;}
END { printf spend &#34;eur&#34;}
</code></pre>
<p>And invoked like so:</p>
<pre><code>λ awk -f spend.awk journal/2023/01
63.25eur
</code></pre>
<h3 id="reflection">Reflection</h3>
<p>Journaling is not just about planning what is to come, but
also reflecting on what has passed. It would make sense to
simultaneously look at the past few weeks&#39; entries while
making your current one. To open multiple months of entries
at the same time:</p>
<pre><code>λ vim -O journal/2023/0{1,2,3}
</code></pre>
<p>Opens 3 months, side-by-side, in vertical splits:</p>
<pre><code>JANUARY ------------  │  FEBRUARY -----------  │  MARCH --------------
                      │                        │
Mo Tu We Th Fr Sa Su  │  Mo Tu We Th Fr Sa Su  │  Mo Tu We Th Fr Sa Su
                   1  │         1  2  3  4  5  │         1  2  3  4  5
 2  3  4  5  6  7  8  │   6  7  8  9 10 11 12  │   6  7  8  9 10 11 12
 9 10 11 12 13 14 15  │  13 14 15 16 17 18 19  │  13 14 15 16 17 18 19
16 17 18 19 20 21 22  │  20 21 22 23 24 25 26  │  20 21 22 23 24 25 26
23 24 25 26 27 28 29  │  27 28                 │  27 28 29 30 31
30 31                 │                        │
                      │                        │
                      │                        │
WEEK 1 -------------  │  WEEK 1 -------------  │  WEEK 1 -------------
                      │                        │
&gt; latex setup         │  &gt; forex               │  - weight: 64
× make the bed        │  × clean shoes         │  &gt; close sg-pr
× 03: dentist         │  × buy clothes         │  × facewash
× integrate tsg       │  × draw                │  × groceries
                      │                        │
                      │                        │
WEEK 2 -------------  │  WEEK 2 -------------  │  WEEK 2 -------------
                      │                        │
× latex setup         │  - viral fever         │  &gt; close sg-pr
× send invoice        │  × forex               │  × plan meet
× stack-graph pr      │  × activate sim        │  × sg storage
                      │  × bitlbee             │
</code></pre>
<h3 id="reducing-friction">Reducing friction</h3>
<p>Journaling already requires a solid amount of discipline and
consistency. The added friction of typing <code>vim journal/$CURRENT_YEAR/$CURRENT_MONTH</code> each time is doing no
favors.</p>
<p>To open the current month based on system time:</p>
<pre><code>λ vim $(date +&#34;%Y/%m&#34;)
</code></pre>
<p>To open all the months within a 2 month window of today, is
a little trickier. The command we wish to generate is (if
today is 2023/12):</p>
<pre><code>λ vim -O 2023/10 2023/11 2023/12 2024/01 2024/02
</code></pre>
<p>And that is where <code>dateseq</code> from
<a href="http://www.fresse.org/dateutils">dateutils</a> comes in handy,
for example:</p>
<pre><code>λ dateseq 2012-02-01 2012-03-01
2012-02-01
2012-02-02
2012-02-03
...
2012-02-28
2012-02-29
2012-03-01
</code></pre>
<p>This script opens all months within a 2 month window of
today:</p>
<pre><code>λ vim -O $(
  dateseq \
      &#34;$(date --date &#34;2 months ago&#34; +%Y/%m)&#34; \
      &#34;$(date --date &#34;2 months&#34; +%Y/%m)&#34; \
      -i %Y/%m \
      -f %Y/%m
)
</code></pre>
<h3 id="fin">Fin</h3>
<p>You can find a sample vimrc in this repository,
along with a nix flake file to kick things off:</p>
<pre><code>λ nix develop
λ cd examples
λ journal
</code></pre>
<p>Plain text journaling can be just as much fun as a pen and
paper. Throw in some ASCII art for each month, use swankier
signifiers, or louder syntax highlighting. Don&#39;t expect
forgiveness from org-mode users though.</p>
<p><a href="https://u.peppe.rs/ZCK.png"><img src="https://camo.tangled.sh/6d169237740fefcd7587aa725d1a29e418f837a4d3bdb9c2d3c90841e8f76d7e/68747470733a2f2f752e70657070652e72732f5a434b2e706e67" alt=""/></a></p>
</article>
        </section><section>
        <div>
            <p><strong>push</strong></p><p><code>git remote add origin
                    git@tangled.sh:oppi.li/journal</code>
            </p>
        </div>

        <div>
            <p><strong>clone</strong></p><div>
                <div>
                    <p><span>HTTP</span></p><p><code>git clone
                            https://tangled.sh/@oppi.li/journal</code>
                    </p>
                </div>

                <div>
                    <p><span>SSH</span></p><p><code>git clone
                            git@tangled.sh:oppi.li/journal</code>
                    </p>
                </div>
            </div>
        </div>

        <p>
            Note that for self-hosted knots, clone URLs may be different based
            on your setup.
        </p>
    </section></div>
  </body>
</html>
