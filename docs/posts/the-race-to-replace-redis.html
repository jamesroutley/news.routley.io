<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://lwn.net/SubscriberLink/966631/6bf2063136effa1e/">Original</a>
    <h1>The race to replace Redis</h1>
    
    <div id="readability-page-1" class="page"><div>
<!-- $Id: slink-trial,v 1.1 2005-11-04 21:27:01 corbet Exp $ -->
<center>
<table>
<tbody><tr><td>
<h3>Welcome to LWN.net</h3>
<p>
The following subscription-only content has been made available to you 
by an LWN subscriber.  Thousands of subscribers depend on LWN for the 
best news from the Linux and free software communities.  If you enjoy this 
article, please consider accepting the trial offer on the right.  Thank you
for visiting LWN.net!
</p></td><td>
<div>
<h3>Free trial subscription</h3>
           <p>
           Try LWN for free for 1 month: no payment
           or credit card required.  <a href="https://lwn.net/Promo/slink-trial2-3/claim">Activate
           your trial subscription now</a> and see why thousands of
           readers subscribe to LWN.net.
           
</p></div>
</td>
</tr>

</tbody></table>
</center>

<p>On March 21, <a href="https://redis.com/company/">Redis Ltd.</a> announced that the <a href="https://redis.io/">Redis</a> &#34;<q>in-memory data store</q>&#34; project would now be
released under non-free, source-available licenses, starting with Redis 7.4. The
news is unwelcome, but not entirely unexpected. What is unusual with this situation is
the number of Redis alternatives to choose from; there are at least
four options to choose as a replacement for those who wish to stay
with free software, including a pre-existing fork called <a href="https://docs.keydb.dev/">KeyDB</a> and the Linux Foundation&#39;s newly-announced <a href="https://www.linuxfoundation.org/press/linux-foundation-launches-open-source-valkey-community">Valkey</a> project. The question now is which one(s)
Linux distributions, users, and providers will choose to take its place.</p>

<h4>A short history of Redis</h4>

<p>Redis has a <a href="https://www.gomomento.com/blog/rip-redis-how-garantia-data-pulled-off-the-biggest-heist-in-open-source-history">complicated
backstory</a>. Salvatore Sanfilippo (also known as &#34;antirez&#34;) started
the project to use as &#34;<q>a different kind of database</q>&#34; with a
realtime log-analyzer application called <a href="https://github.com/antirez/lloogg">LLOOGG</a>, because MySQL was
not meeting his needs. Instead of creating a relational database, he
designed the project as a simple dictionary database that stored a
key-value pair in memory—its name is a contraction of &#34;remote
dictionary server&#34;. It has, of course, matured and accrued <a href="https://redis.io/docs/about/">many more
features</a> over the years. Redis quickly became popular as part of
the <a href="http://radar.oreilly.com/2012/02/nosql-non-relational-database.html">NoSQL movement</a>, and he was hired by
VMware to work on Redis development in 2010. He moved to VMware&#39;s
spin-off, Pivotal, in 2013 and continued to work on the project.</p>

<p>Around that time, Redis was growing in popularity, with high-profile use by <a href="https://highscalability.com/how-twitter-uses-redis-to-scale-105tb-ram-39mm-qps-10000-ins/">Twitter</a>
and <a href="https://tanzu.vmware.com/content/blog/using-redis-at-pinterest-for-billions-of-relationships">Pinterest</a>, 
among others, and started to appear in Linux distributions. It was
packaged for Ubuntu in the 12.04 (April 2012) release, Fedora 18 (January 2013), and others. 
Support for Redis was <a href="https://aws.amazon.com/blogs/aws/amazon-elasticache-now-with-a-dash-of-redis/">added</a> to Amazon Web Service&#39;s (AWS) ElastiCache service in
September 2013, which took advantage of, and helped bolster, Redis&#39;s popularity.</p>

<p>In early 2013, a startup called Garantia Data started offering Redis
services and <a href="https://web.archive.org/web/20130529183307/http://garantiadata.com/blog/taking-in-memory-nosql-to-the-next-level">positioning 
itself</a> as a better alternative to &#34;<q>open source
Redis</q>&#34;. Garantia took a first round of funding in November 2013 and floated <a href="https://www.forbes.com/sites/benkepes/2013/11/04/was-garantia-is-now-redisdb-either-way-nosql-is-hot/?sh=50c9c4d2e9e1">changing
its corporate name</a> to RedisDB. After some pushback from Sanfilippo, the company <a href="https://techcrunch.com/2014/01/29/database-provider-garantia-data-makes-another-name-change-this-time-to-redis-labs/">renamed
itself</a> Redis Labs, instead, in early 2014. Sanfilippo <a href="https://redis.com/press/redis-creator-salvatore-sanfilippo-antirez-joins-redis-labs/">joined
Redis Labs</a> as the lead for open-source development in 2015. He remained
with Redis Labs until <a href="http://antirez.com/news/133">stepping
down</a> in 2020.</p>

<p>In 2018, Redis Labs <a href="https://redis.com/blog/redis-license-bsd-will-remain-bsd/">adopted</a>
a new license for its add-on modules that provide features on top of
the core database. The company chose to use a modified version of the
<a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>, with an addition called the <a href="http://commonsclause.com/">Commons Clause</a>. This clause
<a href="https://lwn.net/Articles/763179/">restricted</a> selling the software or charging for services.
The rationale given for the switch was that cloud providers were
&#34;<q>taking advantage of the open source community</q>&#34; by selling
services based on open-source code they didn&#39;t develop. At the time,
the company pledged that Redis &#34;<q>is BSD and will always remain
BSD</q>&#34;.</p>

<p>It was not the only company to start experimenting with
use-restrictive licenses. Venture-backed database companies, in
particular, were starting to run toward new licenses to try to ensure
they could exclusively sell services using the software. MariaDB had
created the <a href="https://mariadb.com/bsl-faq-adopting/#whatis">Business Source License</a> (BSL) for a product called
MaxScale in 2016, and MongoDB <a href="https://www.mongodb.com/company/newsroom/press-releases/mongodb-issues-new-server-side-public-license-for-mongodb-community-server">launched</a>
the <a href="https://www.mongodb.com/licensing/server-side-public-license">Server
Side Public License</a> (SSPL) in late 2018. Eventually, Redis Labs
settled on a <a href="https://redis.com/legal/licenses/">dual-license
scheme</a> of SSPL and its own <a href="https://redis.com/legal/rsalv2-agreement/">Redis Source
Available License</a> (RSAL) for its modules.</p>

<p>The company <a href="https://redis.com/press/redis-labs-becomes-simply-redis/">dropped</a>
&#34;Labs&#34; from its name in mid-2021. In announcing the name change,
Redis again committed to open source, and said
that the company renaming &#34;<q>will not affect the
licensing of open source Redis, which has always been and will
continue to be BSD licensed</q>&#34;. The company also put in place a governance
model that would place major decisions about Redis&#39;s
&#34;<q>architecture, design, or philosophy</q>&#34; with a community &#34;core team&#34;.
One would expect that team&#39;s mandate to include the license for Redis itself.
The governance page is no longer on Redis&#39;s web site, but is
<a href="https://web.archive.org/web/20220326025023/https://redis.io/docs/about/governance/">available</a> on the Internet Archive&#39;s Wayback
Machine. It listed a core team of five members,
three from Redis (Yossi Gotlieb, Oran Agra, and Itamar Haber) as well as
Zhao Zhao from Alibaba and Madelyn Olson from AWS.</p>

<p>On March 20, Redis <a href="https://redis.com/blog/redis-adopts-dual-source-available-licensing/">announced</a>
that &#34;<q>all future versions of Redis will be released with source-available
licenses</q>&#34;, specifically the SSPL and RSAL. Rowan Trollope, Redis CEO,
wrote that maintaining the BSD license was now &#34;<q>at odds with our ability
to drive Redis successfully into the future</q>&#34;. Future versions, in
this case, means Redis 7.4 and later. The announcement&#39;s FAQ says
that, following the company&#39;s <a href="https://github.com/redis/redis/security/policy">security
policy</a>, security patches will be backported to previous versions 
under the original three-clause BSD license.</p>

<h4>Cloud versus open source</h4>

<p>Proponents of use-restrictive licenses like the SSPL and Redis&#39;s RSAL <a href="https://www.zdnet.com/article/the-battle-between-real-open-source-vs-faux-open-source-heats-up/">have
tried</a> to position this solely as a battle between giant cloud
providers like AWS and open source, where use restrictions are the only
logical alternative and cloud providers are the only losers. In 2019, Redis Labs then-CEO Ofer Bengal was <a href="https://techcrunch.com/2019/02/19/redis-labs-raises-a-60m-series-e-round/">quoted</a>
as saying that there were &#34;<q>many different views</q>&#34; after Redis adopted
its source-available licenses for Redis modules, but that it was necessary
to compete with cloud providers:</p>

<blockquote> Some people condemned that [license change]. But after
the initial noise calmed down — and especially after some other companies
came out with a similar concept — the community now understands that the
original concept of open source has to be fixed because it isn&#39;t suitable
anymore to the modern era where cloud companies use their monopoly power to
adopt any successful open source project without contributing anything to it.
</blockquote>

<p>In the March 20 announcement, Trollope wrote that &#34;<q>cloud service
providers will be able to deliver Redis 7.4 only after agreeing to licensing
terms with Redis, the maintainers of the Redis code</q>&#34; but, that &#34;<q>nothing
changes for the Redis developer community who will continue to enjoy
permissive licensing under the dual license</q>&#34;.</p>

<p>The choice of the phrase &#34;<q>permissive licensing</q>&#34; is
misleading. Redis is able to adopt a non-free license scheme for 7.4
and later versions because external developers had granted their contributions under
the permissive BSD license. The terms of the SSPL and RSAL are
incompatible with common usage of the term &#34;permissive&#34; in the open
source community.</p>

<p>It is also hard to reconcile the claims that cloud providers do
not contribute with the actual commits to the Redis <a href="https://github.com/redis/redis">repository</a>. A quick examination of the commits
since the <a href="https://redis.com/blog/redis-7-generally-available/">7.0.0 release</a> using <a href="https://lwn.net/Articles/290957/">gitdm</a> shows 967 commits
over that time period:</p>

<blockquote>
<table>
<tbody><tr><th colspan="3">Top changeset contributions by employer</th></tr>
<tr><td>(Unknown)</td><td>331</td><td>34.2%</td></tr>
<tr><td>Tencent</td><td>240</td><td>24.8%</td></tr>
<tr><td>Redis</td><td>189</td><td>19.5%</td></tr>
<tr><td>Alibaba</td><td>65</td><td>6.7%</td></tr>
<tr><td>Huawei</td><td>50</td><td>5.2%</td></tr>
<tr><td>Amazon.com</td><td>50</td><td>5.2%</td></tr>
<tr><td>Bytedance</td><td>19</td><td>2.0%</td></tr>
<tr><td>NetEase</td><td>13</td><td>1.3%</td></tr>
</tbody>
</table>
</blockquote>

<p>BinBin Wang, of Tencent, is responsible for nearly 25% of the
commits to the project. Some of the contributors without a readily
identifiable employer surely are Redis employees, but it&#39;s clear that the
company has not been working alone. (Note that some single-digit
contributors were omitted.)</p>

<h4>Changing distribution model</h4>

<p>So it should be apparent that code contribution is beside the
point. Redis is a venture-backed company that has taken more
than $350 million in funding over many rounds since 2011. The company,
and its investors, seem to have calculated that they can safely move
away from open source to try to capture more revenue.</p>

<p>They have some reason to believe this is the case, if MongoDB&#39;s
results are any guide. The company went public in 2017 and moved to
the SSPL a little more than a year later. Shortly afterward, major Linux
distributions stopped packaging the database because it no longer met
their licensing standards. But, by that time, the company had set its sights
on <a href="https://redmonk.com/sogrady/2017/07/14/mongodb-platform-company/">a
platform model</a> that would encourage developers (and their
employers) to use and pay for MongoDB and ancillary offerings with the
as-a-service model. Distributing a source-available version of
MongoDB could be seen as a <a href="https://en.wikipedia.org/wiki/Loss_leader">loss-leader</a>
strategy to reach developers that the company wagered <a href="https://www.infoworld.com/article/3572324/do-developers-really-care-about-open-source.html">did
not care</a> about open-source.</p>

<p>As Redmonk founder Stephen O&#39;Grady <a href="https://redmonk.com/sogrady/2015/03/17/open-source-and-aas/">wrote</a>
in 2017:</p>

<blockquote>
As developers began to assert control over technical selection and
direction in increasing numbers, even in situations where a
proprietary alternative is technically superior, the sheer
accessibility of open source software gave it an enormous market
advantage. Choosing between adequate option A that could be downloaded
instantly and theoretically superior option B gated by a salesperson
was not in fact a choice.
</blockquote>

<p>But open source, noted Grady, &#34;<q>is typically less convenient than
service-based alternatives</q>&#34; and if convenience is the most
important factor then open source has a problem. Especially when
vendors like MongoDB have learned from proprietary vendors that &#34;<q>locking in
customers is good for business</q>&#34;.</p>

<p>Is it good for business? MongoDB has kept growing, adding
customers, and brought in $1.68 billion its last <a href="https://investors.mongodb.com/news-releases/news-release-details/mongodb-inc-announces-fourth-quarter-and-full-year-fiscal-2024">fiscal
year.</a> That&#39;s more than a 30% increase, and its Atlas database service
revenue also increased more than 30%, demonstrating that a lot
of companies would rather pay to use the service than try to
host it themselves. Despite all that, the company is still
losing money—more than $345 million in the same time period.</p>

<p>But, investors may be more interested in stock price than actual
profit. The company&#39;s stock started around $33 a share when it
went public, but is now more than $350 a share. Redis&#39;s investors 
would likely be happy if it can produce similar results.</p>

<h4>Forks and alternatives</h4>

<p>Venture-backed vendors seem to have, as O&#39;Grady <a href="https://redmonk.com/sogrady/2023/08/03/why-opensource-matters/">wrote</a>
last year, reached a consensus that they can move away from
open source. Especially if they are not &#34;<q>actively opposed by other
commercial interests, foundations and other interested industry
participants</q>&#34;. Here, Redis may have miscalculated the industry
mood.</p>

<p>When Hashicorp adopted BSL for its projects last year, a fork of
its Terraform project appeared within days and was embraced by the Linux
Foundation under the name <a href="https://opentofu.org/">OpenTofu</a>. On March 28, the foundation
announced that it was supporting Valkey, a direct fork of Redis 7.2.4, with Amazon Web Services
(AWS), Google Cloud, Oracle, Ericsson, and Snap named as backers of the
effort.</p>

<p>The Valkey fork got its life just a few days after the Redis
license change. Olson <a href="https://twitter.com/reconditerose/status/1771237000592642274">wrote</a>
that she and &#34;<q>various former Redis contributors</q>&#34; had started working on
a <a href="https://github.com/placeholderkv/placeholderkv">fork</a>, using the
original three-clause BSD license, with &#34;placeholderkv&#34; as a temporary
name. Olson, Zhao, Viktor Söderqvist, and Ping
Xie were listed as maintainers. According to Olson this was not an AWS fork of Redis, but &#34;<q>just me
trying to keep the continuity with the community</q>&#34;. KeyDB was considered,
but it has diverged to the point that it &#34;<q>is missing a lot of stuff the
community is used to</q>&#34;.</p>

<p>The KeyDB fork was created in 2019 for technical, rather than licensing,
reasons. The project, which billed itself as &#34;<q>a faster drop in 
alternative to Redis</q>&#34; was created by John Sully and Ben Schermel,
who wanted <a href="https://docs.keydb.dev/blog/2019/10/07/blog-post/">a
multithreaded version</a> and were not able to persuade Redis maintainers
to go in that direction. Sully and Schermel started a company, also
called KeyDB, that offered a proprietary enterprise version. The
entire codebase became fully open source under the three-clause BSD license <a href="https://docs.keydb.dev/news/2022/05/12/keydb-joins-snap/">when KeyDB
was acquired</a> by Snap in 2022.</p>

<p>The problem with KeyDB as a direct alternative is that it hasn&#39;t kept up with Redis since
it forked. It still <a href="https://github.com/Snapchat/KeyDB/issues/420">lacks</a> many
features found in Redis 7, and Sully <a href="https://github.com/Snapchat/KeyDB/issues/420#issuecomment-2013259566">indicated</a>
that there&#39;s little time for him to work on issues &#34;<q>not directly
affecting Snap</q>&#34;, though the project &#34;<q>would of course welcome
outside help and we can certainly name additional maintainers if there
is community interest in helping</q>&#34;. On March 22, Sully updated
another issue and <a href="https://github.com/Snapchat/KeyDB/issues/798#issuecomment-2016041104">said</a>
he was in discussions to &#34;<q>potentially</q>&#34; add maintainers to bring
KeyDB closer to Redis 7. It&#39;s not clear yet whether Valkey will
supplant KeyDB, but Snap&#39;s involvement makes that seem likely over the
long term.</p>

<p>Drew DeVault, founder and CEO of <a href="https://sourcehut.org/">SourceHut</a>, has also created
a fork named Redict based on Redis 7.2.4, but chose to use the LGPLv3. In his <a href="https://redict.io/posts/2024-03-22-redict-is-an-independent-fork/">announcement
post</a>, he said that the choice of license was &#34;<q>a deliberate one which balances
a number of concerns</q>&#34;. DeVault wanted a license that was copyleft but
&#34;<q>as easy as possible for users to comply</q>&#34; with the license and
to ease integrations with Redis-compatible modules or <a href="https://redis.io/docs/interact/programmability/eval-intro/">Lua
plugins</a> that can be used to perform operations within Redis.
He also noted that Redict will have no contributor license agreement
(CLA), but contributors would be asked to verify contributions with a
<a href="https://developercertificate.org/">developer certificate of
origin</a>. Despite his connection to SourceHut, DeVault chose to <a href="https://codeberg.org/redict/redict">host Redict on Codeberg</a> to
&#34;<q>provide a comfortable and familiar user experience for anyone comfortable
with the GitHub-based community</q>&#34; of Redis.</p>

<p>Another kind-of contender is Microsoft&#39;s <a href="https://github.com/microsoft/garnet">Garnet</a>, <a href="https://www.microsoft.com/en-us/research/blog/introducing-garnet-an-open-source-next-generation-faster-cache-store-for-accelerating-applications-and-services/">announced</a>
on March 18. According to the announcement, it has been in
development by Microsoft Research since 2021. It is a remote
cache-store that can cache and manage the same types of data as 
Redis and is designed to be compatible with the <a href="https://redis.io/docs/reference/protocol-spec/">Redis serialization protocol</a>. Garnet is MIT-licensed, written in .NET C#, and is not
meant to be a direct drop-in replacement. However, its <a href="https://microsoft.github.io/garnet/docs/welcome/compatibility">API
compatibility</a> page claims that it can be &#34;<q>regarded as a
close-enough starting point</q>&#34; that works &#34;<q>unmodified with many
Redis clients</q>&#34;. Many, but not all. For example, one user attempted
to switch a NodeJS application to Garnet, but <a href="https://github.com/microsoft/garnet/issues/112">found</a> that
Redis&#39;s <tt><a href="https://redis.io/commands/flushall/">FLUSHALL</a></tt> command is not
currently supported. Adding support for missing
APIs on is on the project&#39;s <a href="https://microsoft.github.io/garnet/docs/welcome/roadmap">roadmap</a>.</p>

<h4>Scramble for alternatives</h4>

<p>Once again, Linux distributions are left with a mess to clean up. Neal Gompa <a href="https://lwn.net/ml/fedora-devel/CAEg-Je_GoiJN6kOj1_K5WqTvA6n0j8r4fi9=C7-WbXLHovM3ow@mail.gmail.com/">opened
a discussion</a> on the Fedora development list, noting the license
change and the need to remove Redis from Fedora. Jonathan Wright
<a href="https://lwn.net/ml/fedora-devel/CAKe4=-JijFraJbn3yXi-ieWA5mXdGzDrZrEVLpnDUY0EGpdr5g@mail.gmail.com/">replied</a> that KeyDB might be a replacement; he had been &#34;<q>loosely working
on packaging</q>&#34; before the license change. He later <a href="https://lwn.net/ml/fedora-devel/CAKe4=-J4ed9dRfFr37jb6Mhq1yM0=0RrZb3N8ftxpJag4xF8HQ@mail.gmail.com/">said</a>
that KeyDB would be &#34;<q>a step backwards and cause headaches</q>&#34; for
those looking to replace later versions of Redis. Nevertheless, he 
<a href="https://lwn.net/ml/fedora-devel/CAKe4=-+PxSZLPVT78-CCYrGdvssTOEmJ9v4xoSo0inUfv1cV_Q@mail.gmail.com/">wrote</a>
on March 23 that he had pushed builds that were ready for testing for
Fedora and EPEL 8 and 9.</p>

<p>Shortly after the Valkey announcement, Wright
<a href="https://lwn.net/ml/fedora-devel/CAKe4%3D-Lzd1mNOhAsja%2BVRXz%3D78Y8ESUb370q90Fm8i5npWGaaw%40mail.gmail.com/">wrote</a>
that he would be packaging it as soon as there is a tagged
release. Wright also said that he is &#34;<q>anticipating valkey becoming the [de facto] replacement for redis in most places.</q>&#34;</p>

<p>Gompa also <a href="https://lwn.net/ml/opensuse-factory/CAEg-Je9o5os4ZoBujO_6K=Kv45qebOP5M+BKOfFSd_aw3_vCxw@mail.gmail.com/">raised</a>
the issue on openSUSE&#39;s Factory discussion list. Dominique Leuenberger
<a href="https://lwn.net/ml/opensuse-factory/3873a1ecbc97440ff0db7fb28b0c6f079b7a6649.camel@opensuse.org/">replied</a>
with a list of 18 packages with dependencies on the <tt>redis</tt>
package in Tumbleweed. The initial discussion mentioned Redict and
KeyDB as possible replacements, but Valkey had not been announced yet.</p>

<p>Having to find a replacement to ship in place of Redis is not the
only problem for community distributions. Jacob Michalskie <a href="https://lwn.net/ml/opensuse-factory/AB7886BD-E33E-4ACA-8F94-AA4A1B1FECDB@opensuse.org/">called
out</a> several services in use by the openSUSE project that will need
a Redis replacement, including the <a href="https://pagure.io/pagure">Pagure</a>
code-hosting software (created and used by Fedora as well) used for <a href="https://code.opensuse.org/">code.opensuse.org</a>, and the <a href="https://www.discourse.org/">Discourse</a> forum software.</p>

<p>Debian contributor Guillem Jover <a href="https://lwn.net/ml/debian-devel/ZfwDpCHE7Zq2vKN-%40thunder.hadrons.org/">filed</a>
a <a href="https://wiki.debian.org/RFP">Request for Package</a> (RFP)
for KeyDB as a potential replacement for Redis. Jover said he was not sure if he
was up for sole maintainership, but was happy to give a hand. In an
email exchange with Jover, he told me that his company had migrated
from Redis 6 to KeyDB and it was a &#34;smooth transition&#34;. According to
Jover, &#34;KeyDB might be lacking some features compared to Redis 7, but we have
neither noticed we miss any or felt we were missing out on
anything.&#34;</p>

<p>Jover said that it was too early to tell whether the newer forks
would continue to be maintained, and that Redict&#39;s LGPLv3 licensing
&#34;might also be problematic for the ecosystem&#34;. In a follow-up email
after the Valkey announcement, he said &#34;I think we&#39;ll probably go further with packaging KeyDB for
Debian at least, if it dies out it can always be removed or
transitioned out from there.&#34;</p>

<h4>Path forward</h4>

<p>It is, of course, too soon to predict whether one or more of the
forks will gain significant traction—but it seems likely that
Valkey will be a credible alternative. The possibility of a swift fork
with widespread community and industry backing should give pause to
vendors who expect a smooth path after abandoning open source.</p>

</div></div>
  </body>
</html>
