<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="http://www.os2museum.com/wp/86-dos-revisited/">Original</a>
    <h1>86-DOS Revisited</h1>
    
    <div id="readability-page-1" class="page"><div>
						
<p>At the end of December 2023, several disk images of very old versions of Seattle Computer Products 86-DOS unexpectedly <a href="http://www.bitsavers.org/bits/SeattleComputerProducts/86-DOS/">turned up</a>. This includes previously unseen releases of 86-DOS version 0.11 and 0.34 (going by the version number in the 86-DOS kernel).</p>



<p>Just how old these releases are is somewhat difficult to establish. Unlike 86-DOS 1.0 from April 1984, the older versions used a different format of FAT directory entries. The old format only used 16 bytes per entry (rather than 32) and had no room to store any timestamps, much like CP/M formats of the era.</p>



<p>The 0.34 disk (8″ of course) has a handwritten label which includes a date, 81/02/20. If the disk was written and the label was made on February 20, 1981, the 86-DOS files on the disk are presumably not newer than late February 1981.</p>


<div>
<figure><img decoding="async" width="640" height="640" src="http://www.os2museum.com/wp/wp-content/uploads/2024/01/86-DOS_v0.34_221_-_81-02-20-640x640.jpg" alt="" srcset="http://www.os2museum.com/wp/wp-content/uploads/2024/01/86-DOS_v0.34_221_-_81-02-20-640x640.jpg 640w, http://www.os2museum.com/wp/wp-content/uploads/2024/01/86-DOS_v0.34_221_-_81-02-20-300x300.jpg 300w, http://www.os2museum.com/wp/wp-content/uploads/2024/01/86-DOS_v0.34_221_-_81-02-20-150x150.jpg 150w, http://www.os2museum.com/wp/wp-content/uploads/2024/01/86-DOS_v0.34_221_-_81-02-20-768x768.jpg 768w, http://www.os2museum.com/wp/wp-content/uploads/2024/01/86-DOS_v0.34_221_-_81-02-20.jpg 1024w" sizes="(max-width: 640px) 100vw, 640px"/><figcaption>86-DOS version 0.34 disk</figcaption></figure></div>


<p>The file INIT.ASM on the 86-DOS 0.34 disk contains the following comment:</p>



<pre>; Translated from the Z80 on 12-19-80 and subsequently upgraded to handle
; all of the following controllers. Set switch to one to select.</pre>



<p>Assuming the comment is correct, 86-DOS 0.34 must have been released sometime after December 19, 1980 but before late February 1981. </p>



<p>The file <a href="https://github.com/microsoft/MS-DOS/blob/master/v1.25/source/MSDOS.ASM">MSDOS.ASM</a> released by the Computer History Museum includes revision history that starts with version 0.34, which is dated as December 29, 1980. It is likely that the date refers to the DOS kernel itself and not necessarily when 86-DOS 0.34 was shipped to customers.</p>



<p>The 86-DOS 0.11 disk contains no real clues about its age. The sign-on message says “Copyright 1980 Seattle Computer Products, Inc.” which is not too helpful. An <a href="https://web.archive.org/web/20190906120449/http://www.patersontech.com/dos/softalk.aspx">interview with Tim Paterson from 1983</a> suggests that “QDOS 0.11” was finalized in August 1980. While this is possible, the interview is somewhat questionable because there is no sign of “QDOS” in 86-DOS 0.11; the system clearly identifies itself as “86-DOS version 0.11”.</p>



<p>In any case, August 1980 is at least plausible as a release date of 86-DOS 0.11. If so, it would pre-date the release of the IBM PC (and PC DOS) by a whole year.</p>



<h3>Old Directory Format</h3>



<p>Cracking the ancient 16-byte FAT directory entry format took a little bit of effort, but in the end the format turned out to be very straightforward. There does not (yet) appear to be any public documentation of what the directory entries used to look like.</p>



<p>From looking at the disk images it’s obvious that the first 11 bytes are the file name and extension, just like in the newer 32-bit directory entry format. But the remaining five bytes were somewhat mysterious.</p>



<p>Logically, 86-DOS must have stored information about the starting cluster of a file, as well as the file size. But was there anything else?</p>



<p>The release notes for 86-DOS 1.0 mention that with the new 32-byte directory entry format, file sizes are no longer limited to 16 megabytes. At the same time, prior to 86-DOS 1.0, file size was only recorded with the granularity of 128-byte records (ever wondered why text files used to end with ASCII SUB aka Ctrl-Z?). Perhaps file sizes were stored in units of 128-byte records?</p>



<p>Upon closer examination, it turned out that the last three bytes of a 16-byte directory entry are simply the file size in bytes, stored in LSB order. Due to the 128-byte granularity, the low byte of the file size only ever contains the value 00h or 80h.</p>



<p>The remaining two bytes (at offset 11 and 12 in the directory entry) are the file’s starting cluster, again stored in LSB order.</p>



<p>The 16-byte directory entry is then formatted as follows:</p>



<ul>
<li>8 bytes of file name, padded with spaces</li>



<li>3 bytes of file extension</li>



<li>2 bytes of starting cluster (LSB order)</li>



<li>3 bytes of file size in bytes (LSB order)</li>
</ul>



<p>This information takes up 16 bytes and there is no room for timestamps, attributes, or anything else.</p>



<p>The 16-bit directory entry is a proper subset of the 32-bit directory entry, and is therefore easy to convert to a 32-bit entry with no date or time stamps and no attributes set.</p>



<h3>What’s Included?</h3>



<p>The 86-DOS 0.11 disk has very little on it. There is COMMAND.COM, SYS, the RDCPM utility, plus the SCP development tools: EDLIN, ASM, TRANS, and HEX2BIN. There is no DEBUG yet, but there is a chess program of unknown provenance.</p>



<p>The 86-DOS 0.34 disk is rather more interesting. It newly includes CHKDSK, as well as DEBUG. There is also SCP source code for a firmware monitor, boot loader, and the 86-DOS I/O subsystem: MON.ASM, BOOT.ASM, and DOSIO.ASM. There’s also INIT.ASM, a low level floppy disk format utility.</p>



<p>There’s considerably more than that on the disk… but it’s not very useful. Consider the following (transcript from a SIMH simulator session):</p>



<pre>SCP 8086 Monitor 1.5
&gt;B
☺
86-DOS version 0.34
Copyright 1980 Seattle Computer Products, Inc.

COMMAND v. 0.2

A:aargh
GEE... I DIDN&#39;T KNOW YOU SPOKE CHINESE!
A:damn!
THERE&#39;S NO NEED TO SWEAR!
A:shit
NOT HERE, PLEASE. IT STAINS THE CARPET.
A:dir *.asm
BOOT      ASM        2688
CPMTAB    ASM        1152
MON       ASM       35584
INIT      ASM        4992
DOSIO     ASM       11008
MOVE      ASM         512
DAMN      ASM         384
SHIT!     ASM         384
AARGH     ASM         384
SPEEDCHK  ASM         128
SHIT      ASM         384
AARGH!    ASM         384

A:</pre>



<p>It is worth noticing that 86-DOS 0.34 displayed file sizes (in bytes), though of course no timestamps were shown. Version 0.11 only showed file names without any further information.</p>



<p>Here’s what AARGH.ASM contains (note the somewhat unfamiliar SCP assembler syntax):</p>



<pre>;       A PROGRAM TO EXPRESS HOW I FEEL.
        PUT     0100H
        ORG     0100H
        MOV     CX,CHARCOUNT
        MOV     SI,OUTBUFF
        UP
LOOP:   LODB
        MOV     DL,AL
        MOV     AH,2
        INT     21H
        LOOP    LOOP
        INT     20H
;               BUFFERS AND CONSTANTS
OUTBUFF:        DM      &#34;GEE... I DIDN&#39;T KNOW YOU SPOKE CHINESE!&#34;
CHARCOUNT:      EQU     39
;               END OF *AARGH*</pre>



<p>The contents of AARGH!.ASM, DAMN.ASM, etc. are quite similar. While the programs are all amusing, it would be an exaggeration to say that they are of historical significance.</p>



<p>However, the 86-DOS 0.34 disk as such is certainly historically significant, and shows just how far the development of 86-DOS was (or wasn’t) at the beginning of 1981.</p>



<p>For example, the DEBUG utility was able to single step programs and show register state or dump memory… but it was not yet able to disassemble instructions. It was clearly meant to be used with a printed program listing in hand, which is not something that’s always available.</p>



<h3>Conclusion</h3>



<p>Even after more than 40 years(!), old software releases and pre-releases can still surface. In the case of 86-DOS 0.11 and 0.34 it’s practically a miracle, since there were probably never very many copies in existence.</p>



<p>For the first time since the early 1980s, FAT formatted floppies with the primordial 16-byte directory entry format have come to light. The old 16-byte directory entries were gone by 86-DOS 1.0 in April 1981 and of course never appeared in any public PC DOS release.</p>



<p>These prehistoric versions of 86-DOS allow us to fill in further missing pieces in the puzzle of DOS origins. It is fascinating to follow how DOS developed from almost nothing to a multi-million dollar business in the course of just a few years.</p>
											</div></div>
  </body>
</html>
