<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.beyondlogic.org/usbnutshell/usb1.shtml">Original</a>
    <h1>USB in a Nutshell (2010)</h1>
    
    <div id="readability-page-1" class="page"><div id="content">


<h2>Making sense of the USB standard</h2>

<p>
Starting out new with USB can be quite daunting. With the <a href="http://www.usb.org/developers/docs/usb_20.zip">USB 
2.0 specification</a> at 650 pages one could easily be put off just by the sheer size of the standard. This is only the 
beginning of a long list of associated standards for USB. There are <a href="http://www.usb.org/developers/devclass/">USB Class 
Standards</a> such as the HID Class Specification which details the common operation of devices (keyboards, mice etc) 
falling under the HID (Human Interface Devices) Class - only another 97 pages. If you are designing a USB Host, then you 
have three Host Controller Interface Standards to choose from. None of these are detailed in the USB 2.0 Spec.  
</p>
<p>
The good news is you don’t even need to bother
reading the entire USB standard. Some chapters were churned out by marketing, others aimed at the lower link layer 
normally taken care off by your USB controller IC and a couple aimed at host and hub developers. Lets take a little 
journey through the various chapters of the USB 2.0 specification and briefly introduce the key points.
</p>
<center>
<a name="USB2Spec"></a>

<table>
<tbody><tr id="head"><td>Chapter</td><td>Name</td><td>Description</td><td>Pages</td></tr>
<tr id="row"><td>1</td><td>Introduction</td><td>Includes the motivation and scope for USB. The most important piece of information in this chapter is to make reference to the Universal Serial Bus Device Class Specifications. No need reading this chapter.</td><td>2</td></tr>
<tr id="row"><td>2</td><td>Terms and Abbreviations</td><td>This chapter is self-explanatory and a necessary evil to any standard.</td><td>8</td></tr>
<tr id="row"><td>3</td><td>Background</td><td>Specifies the goals of USB which are Plug’n’Play and simplicity to the end user (<i>not developer</i>). Introduces Low, Full and High Speed ranges with a feature list straight from marketing. No need reading this chapter either.</td><td>4</td></tr>
<tr id="row"><td>4</td><td>Architectural Overview</td><td>This is where you can start reading. This chapter provides a basic overview of a USB system including topology, data rates, data flow types, basic electrical specs etc.</td><td>10</td></tr>
<tr id="row"><td>5</td><td>USB Data Flow Model</td><td>This chapter starts to talk about how data flows on a Universal Serial Bus. It introduces terms such as endpoints and pipes then spends most of the chapter on each of the data flow types (Control, Interrupt, Isochronous and Bulk). While it’s important to know each transfer type and its properties it is a little heavy on for a first reader.</td><td>60</td></tr>
<tr id="row"><td>6</td><td>Mechanical</td><td>This chapter details the USB’s two standard connectors. The important information here is that a type A connector is oriented facing downstream and a type B connector upstream. Therefore it should be impossible to plug a cable into two upstream ports. All detachable cables must be full/high speed, while any low speed cable must be hardwired to the appliance. Other than a quick look at the connectors, you can skip this chapter unless you intend to manufacture USB connectors and/or cables. PCB designers can find standard footprints in this chapter.</td><td>33</td></tr>
<tr id="row"><td>7</td><td>Electrical</td><td>This chapter looks at low level electrical signalling including line impedance, rise/fall times, driver/receiver specifications and bit level encoding, bit stuffing etc. The more important parts of this chapter are the device speed identification by using a resistor to bias either data line and bus powered devices vs self powered devices. Unless you are designing USB transceivers at a silicon level you can flip through this chapter. Good USB device datasheets will detail what value bus termination resistors you will need for bus impedance matching.</td><td>75</td></tr>
<tr id="row"><td>8</td><td>Protocol Layer</td><td>Now we start to get into the protocol layers. This chapter describes the USB packets at a byte level including the sync, pid, address, endpoint, CRC fields. Once this has been grasped it moves on to the next protocol layer, USB packets. Most developers still don’t see these lower protocol layers as their USB device IC’s take care of this. However a understanding of the status reporting and handshaking is worthwhile.</td><td>45</td></tr>
<tr id="row"><td>9</td><td>USB Device Frame Work</td><td>This is the most frequently used chapter in the entire specification and the only one I ever bothered printing and binding. This details the bus enumeration and request codes (set address, get descriptor etc) which make up the most common protocol layer USB programmers and designers will ever see. This chapter is a must read in detail.</td><td>36</td></tr>
<tr id="row"><td>10</td><td>USB Host Hardware and Software</td><td>This chapter covers issues relating to the host. This includes frame and microframe generation, host controller requirements, software mechanisms and the universal serial bus driver model. Unless you are designing Hosts, you can skip this chapter.</td><td>23</td></tr>
<tr id="row"><td>11</td><td>Hub Specification</td><td>Details the workings of USB hubs including hub configuration, split transactions, standard descriptors for hub class etc. Unless you are designing Hubs, you can skip this chapter.</td><td>143</td></tr>
</tbody></table>
</center>
<p>
So now we can begin to read the parts of the standard relevant to our needs. If you develop drivers (Software) for 
USB peripherals then you may only need to read chapters, 
</p>
<ul><ul>
 <li>4 - Architectural Overview</li>
 <li>5 - USB Data Flow Model</li>
 <li>9 - USB Device Frame Work, and</li>
 <li>10 - USB Host Hardware and Software.</li>
</ul></ul>
<p>
Peripheral hardware (Electronics) designers on the other hand may only need to read chapters,
</p>
<ul><ul>
 <li>4 - Architectural Overview</li>
 <li>5 - USB Data Flow Model</li>
 <li>6 - Mechanical, and</li>
 <li>7 - Electrical.</li>
</ul></ul>
</div></div>
  </body>
</html>
