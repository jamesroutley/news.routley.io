<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/libarchive/libarchive/pull/1609">Original</a>
    <h1>Jia Tan &#34;JiaT75&#34;: Added error text to warning when untaring with bsdtar</h1>
    
    <div id="readability-page-1" class="page"><div>

      <div data-gid="PR_kwDOADEhXM4t_NwB" data-url="/libarchive/libarchive/pull/1609/partials/body" data-channel="eyJjIjoicHVsbF9yZXF1ZXN0Ojc3MTU0NjExMyIsInQiOjE3MjEyMTkzNDd9--01b3005e7b4d6e3453161e0767f50b55dc41d87105cae14754a58f5d15d2d48d">

<p><a href="https://github.com/JiaT75" data-view-component="true"><img data-hovercard-type="user" data-hovercard-url="/users/JiaT75/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" src="https://avatars.githubusercontent.com/u/78042786?s=60&amp;v=4" alt="JiaT75" size="40" height="40" width="40" data-view-component="true"/></a>
  
  
</p><div id="issue-1042469982">
  <div id="pullrequest-771546113">
          

          <div>
        <div>
  
  <task-lists disabled="" sortable="">
    <div>
      <p dir="auto">Added the error text when printing out warning and errors in bsdtar when untaring. Previously, there were cryptic error messages when, for example in issue <a data-error-text="Failed to load title" data-id="968896742" data-permission-text="Title is private" data-url="https://github.com/libarchive/libarchive/issues/1561" data-hovercard-type="issue" data-hovercard-url="/libarchive/libarchive/issues/1561/hovercard" href="https://github.com/libarchive/libarchive/issues/1561">#1561</a>, the user tries to untar an archive in a location they do not have write access to.</p>
<p dir="auto"><span aria-label="This pull request closes issue #1561.">closes</span> <a data-error-text="Failed to load title" data-id="968896742" data-permission-text="Title is private" data-url="https://github.com/libarchive/libarchive/issues/1561" data-hovercard-type="issue" data-hovercard-url="/libarchive/libarchive/issues/1561/hovercard" href="https://github.com/libarchive/libarchive/issues/1561">#1561</a></p>
    </div>
  </task-lists>
  
</div>

      </div>

          <!-- '"` --><!-- </textarea></xmp> -->
          <div>
        <div data-view-component="true">
  <!-- '"` --><!-- </textarea></xmp> --><form data-turbo="false" action="/libarchive/libarchive/reactions" accept-charset="UTF-8" method="post">
    
    <div>
          <tool-tip id="tooltip-d6d78f69-06fb-4f87-a6a7-24b763f75755" for="reactions--reaction_button_component-3d67cb" popover="manual" data-direction="n" data-type="description" data-view-component="true">simon511000 reacted with thumbs up emoji</tool-tip>
          <tool-tip id="tooltip-0b06dea0-8abd-49c6-87be-f485b030f8f2" for="reactions--reaction_button_component-b37733" popover="manual" data-direction="n" data-type="description" data-view-component="true">rach1tarora, tjkirch, jtbx, fansaien, kingcanfish, EXVUL-Sec, huebs, jieran233, jan-bar, matteing, and 142 more reacted with thumbs down emoji</tool-tip>
          <tool-tip id="tooltip-db856847-fd11-4322-9387-a585d76a8125" for="reactions--reaction_button_component-d562bb" popover="manual" data-direction="n" data-type="description" data-view-component="true">bclswl0827, codenoid, bczhc, karimalihussein, and Gordon01 reacted with laugh emoji</tool-tip>
          <tool-tip id="tooltip-95c306c5-1ed8-4aaf-836e-ed81d5293761" for="reactions--reaction_button_component-11a76c" popover="manual" data-direction="n" data-type="description" data-view-component="true">xfarrow, MarshalX, n1ngu, bczhc, and metasansana reacted with confused emoji</tool-tip>
          <tool-tip id="tooltip-c23e2ad8-96ee-4f4a-9bed-a96946ecb909" for="reactions--reaction_button_component-fa72f7" popover="manual" data-direction="n" data-type="description" data-view-component="true">martin8877 reacted with heart emoji</tool-tip>
          <tool-tip id="tooltip-b8721fe1-a4f1-44aa-9111-9928f6578b7e" for="reactions--reaction_button_component-210522" popover="manual" data-direction="n" data-type="description" data-view-component="true">martin8877, akoskovacs, and bladyjoker reacted with rocket emoji</tool-tip>
          <tool-tip id="tooltip-7eb2a012-3add-43cb-96c7-5b6c50eda86a" for="reactions--reaction_button_component-bf683e" popover="manual" data-direction="n" data-type="description" data-view-component="true">chucklesb, ALiwoto, lockness-Ko, salif, HurricanePootis, vsczpv, SeungheonOh, aus, Pherrara, bartekpacia, and 84 more reacted with eyes emoji</tool-tip>
      
    </div>
</form></div>
      </div>

</div>
  </div>
</div>


      

       
            


      <div data-gid="C_kwDOGH9lQtoAKGYyN2MxNzNkMTdkYzgwNzczM2IzYTRmOGMxMTIwN2MzZjA0ZmYzNGY">
  
        <div>
  <div>
      <div data-view-component="true">
  
  
  <div data-view-component="true">          <div>
  <div>
    <div>
      
<div>
  <p><a data-test-selector="commits-avatar-stack-avatar-link" data-hovercard-type="user" data-hovercard-url="/users/JiaT75/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/JiaT75">
        <img data-test-selector="commits-avatar-stack-avatar-image" src="https://avatars.githubusercontent.com/u/78042786?s=40&amp;v=4" width="20" height="20" alt="@JiaT75"/>
</a>  </p>
</div>

      

      

      

      
    </div>
  </div>
</div>

</div>
</div>  </div>
</div>


</div>

      <div data-gid="PRR_kwDOADEhXM4wFIzr">
  
        <div>
  <div id="pullrequestreview-806653163" data-gid="PRR_kwDOADEhXM4wFIzr" data-channel="eyJjIjoicHVsbF9yZXF1ZXN0X3Jldmlldzo4MDY2NTMxNjMiLCJ0IjoxNzIxMjE5MzQ4fQ==--f0f53c8b386d12dc683c85cbeca7fb263f4b981d308f8dfbd8bed92c30448c83" data-url="/libarchive/libarchive/pull/1609/partials/reviews/806653163">
      <div data-view-component="true">
  <p><a href="https://github.com/mmatuska" data-view-component="true"><img data-hovercard-type="user" data-hovercard-url="/users/mmatuska/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" src="https://avatars.githubusercontent.com/u/924604?s=60&amp;v=4" alt="mmatuska" size="40" height="40" width="40" data-view-component="true"/></a></p>
  
</div>

        </div>
</div>


</div>

      

      <div data-gid="IC_kwDOADEhXM542eG2">
  
      
<div data-gid="IC_kwDOADEhXM542eG2" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM542eG2/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/mortie/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/mortie"><img src="https://avatars.githubusercontent.com/u/3728194?s=80&amp;u=ed59488e2fd44a21cdb4dbd32fbf4732096a9a8b&amp;v=4" width="40" height="40" alt="@mortie"/></a>

</p>


  <div id="issuecomment-2027545014">

    <div data-body-version="71a8e90718ebe40822784e2b4698513815c9e7e0e48614e449fdc8c0fdcd8c10">
      


      <div>

        <task-lists disabled="" sortable="">
<div>
          <p dir="auto"><a data-hovercard-type="user" data-hovercard-url="/users/mmatuska/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/mmatuska">@mmatuska</a> This MR seems suspicious, the error message that&#39;s printed is almost identical before and after, but calls to safe_fprintf were replaced with calls to the unsafe fprintf. The diff doesn&#39;t make this obvious due to the removal of a newline in a parameter list.</p>
<p dir="auto">Given the recent uncovering of <a data-hovercard-type="user" data-hovercard-url="/users/JiaT75/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/JiaT75">@JiaT75</a>&#39;s backdoor inserted into XZ, can you double check that switching out safe fprintf with unsafe fprintf isn&#39;t introducing a vulnerability here? It appears that the unsafe fprintf calls introduced by this MR are still in the source code, unchanged: <a href="https://github.com/libarchive/libarchive/blob/master/tar/read.c#L374-L375">https://github.com/libarchive/libarchive/blob/master/tar/read.c#L374-L375</a></p>
      </div>
</task-lists>


        <div>

            <div>
              <div data-view-component="true">
  <!-- '"` --><!-- </textarea></xmp> --><form data-turbo="false" action="/libarchive/libarchive/reactions" accept-charset="UTF-8" method="post">
    
      
    <div>
          <tool-tip id="tooltip-68ea1080-8617-493a-ad31-4c83951d20bd" for="reactions--reaction_button_component-6e5b68" popover="manual" data-direction="n" data-type="description" data-view-component="true">cpburnz, PhilArmstrong, seth-ngc, orzogc, mattwhite, mikesiegel, jens1o, fuomag9, mplewis, abysssdweller, and 186 more reacted with thumbs up emoji</tool-tip>
          <tool-tip id="tooltip-a69b1231-07d3-48ed-b5e7-d71e1e6c3086" for="reactions--reaction_button_component-8694d1" popover="manual" data-direction="n" data-type="description" data-view-component="true">bczhc reacted with laugh emoji</tool-tip>
          <tool-tip id="tooltip-38a981d6-0dae-4d80-95ca-61823ede0a88" for="reactions--reaction_button_component-c7a62a" popover="manual" data-direction="n" data-type="description" data-view-component="true">Kostiskat, fede-qubika, and IamPhytan reacted with hooray emoji</tool-tip>
          <tool-tip id="tooltip-71790779-30d8-4346-84da-69ab903cd28b" for="reactions--reaction_button_component-ba4b9e" popover="manual" data-direction="n" data-type="description" data-view-component="true">JJ and aihkas reacted with heart emoji</tool-tip>
          <tool-tip id="tooltip-9e1aeba5-f44d-422c-aeca-7949d4ff704a" for="reactions--reaction_button_component-87e6e9" popover="manual" data-direction="n" data-type="description" data-view-component="true">Augustin-FL, clayne, no-usernames-left, ScottFreeCode, CvX, tempname0606, ALiwoto, Sjneugent, SeungheonOh, redthing1, and 18 more reacted with eyes emoji</tool-tip>
      
    </div>
</form></div>
            </div>
        </div>
      </div>

      <!-- '"` --><!-- </textarea></xmp> -->    </div>
</div>

</div>


</div>


      <div data-gid="IC_kwDOADEhXM542fLU">
  
      
<div data-gid="IC_kwDOADEhXM542fLU" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM542fLU/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/cperciva/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/cperciva"><img src="https://avatars.githubusercontent.com/u/5085436?s=80&amp;u=f98a5bbe69e80767231644fe39e64ffe8c13c508&amp;v=4" width="40" height="40" alt="@cperciva"/></a>

</p>


  <div id="issuecomment-2027549396">

    <div data-body-version="49898ed0c08db5b3cf65ee085cd97452e9e919a1a7f0460637736ac2dc8e9352">
      


      <div>

        <task-lists disabled="" sortable="">
<div>
          <p dir="auto"><a data-hovercard-type="user" data-hovercard-url="/users/mortie/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/mortie">@mortie</a> Looks to me like <code>fprintf(stderr, &#34;%s&#34;, strerror(errno));</code> is new?  I&#39;m not sure if the safe_fprintf matters since the strings here (error strings from libarchive and libc) should be 7-bit-safe, but I wouldn&#39;t mind switching that back.</p>
      </div>
</task-lists>


        
      </div>

      <!-- '"` --><!-- </textarea></xmp> -->    </div>
</div>

</div>


</div>


      <div data-gid="IC_kwDOADEhXM542fhi">
  
      
<div data-gid="IC_kwDOADEhXM542fhi" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM542fhi/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/wgaylord/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/wgaylord"><img src="https://avatars.githubusercontent.com/u/2133449?s=80&amp;u=f73aa6432481804a831164ac598c996dd20ef8b3&amp;v=4" width="40" height="40" alt="@wgaylord"/></a>

</p>


  <div id="issuecomment-2027550818">

    <div data-body-version="bb31a22f259984ff38567f1e5da9110679049324c5db3f633182f909cf2ea264">
      


      <div>

        <task-lists disabled="" sortable="">
<div>
          <blockquote>
<p dir="auto"><a data-hovercard-type="user" data-hovercard-url="/users/mmatuska/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/mmatuska">@mmatuska</a> This MR seems suspicious, the error message that&#39;s printed is almost identical before and after, but calls to safe_fprintf were replaced with calls to the unsafe fprintf. The diff doesn&#39;t make this obvious due to the removal of a newline in a parameter list.</p>
<p dir="auto">Given the recent uncovering of <a data-hovercard-type="user" data-hovercard-url="/users/JiaT75/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/JiaT75">@JiaT75</a>&#39;s backdoor inserted into XZ, can you double check that switching out safe fprintf with unsafe fprintf isn&#39;t introducing a vulnerability here? It appears that the unsafe fprintf calls introduced by this MR are still in the source code, unchanged: <a href="https://github.com/libarchive/libarchive/blob/master/tar/read.c#L374-L375">https://github.com/libarchive/libarchive/blob/master/tar/read.c#L374-L375</a></p>
</blockquote>
<p dir="auto">They did also add more error printing using<code> fprintf(stderr, &#34;%s&#34;, strerror(errno));</code> Which was not in the original. I do agree, strange to change from safe fprint to normal fprint tho.</p>
      </div>
</task-lists>


        <div>

            <div>
              <div data-view-component="true">
  <!-- '"` --><!-- </textarea></xmp> --><form data-turbo="false" action="/libarchive/libarchive/reactions" accept-charset="UTF-8" method="post">
    
      
    <div>
          <tool-tip id="tooltip-bc063dfd-2d03-4beb-9026-f18c114c7f82" for="reactions--reaction_button_component-c8fafb" popover="manual" data-direction="n" data-type="description" data-view-component="true">HugKitten, mkilijanek, Banyc, nstepanets, twoexem, costvin15, optionsx, nerblock, J-Brk, ankit-pn, and 4 more reacted with thumbs up emoji</tool-tip>
      
    </div>
</form></div>
            </div>
        </div>
      </div>

      <!-- '"` --><!-- </textarea></xmp> -->    </div>
</div>

</div>


</div>


      <div data-gid="IC_kwDOADEhXM542gLD">
  
      
<div data-gid="IC_kwDOADEhXM542gLD" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM542gLD/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/mortie/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/mortie"><img src="https://avatars.githubusercontent.com/u/3728194?s=80&amp;u=ed59488e2fd44a21cdb4dbd32fbf4732096a9a8b&amp;v=4" width="40" height="40" alt="@mortie"/></a>

</p>


  <div id="issuecomment-2027553475">

    <div data-body-version="eb47072f5a688b9e8e2c58b7d758096f237ab7dbcb6808522e5382fd195bd9bd">
      


      <div>

        <task-lists disabled="" sortable="">
<div>
          <p dir="auto">You&#39;re right, I noticed that too upon closer inspection of the diff. And yeah, after reading up on both what <code>archive_error_string</code> returns and what&#39;s &#34;safe&#34; about <code>safe_fprintf</code>, replacing safe_fprintf with fprintf in this circumstance shouldn&#39;t change anything... it&#39;s just weird.</p>
<p dir="auto">Sorry for the ping.</p>
      </div>
</task-lists>


        
      </div>

      <!-- '"` --><!-- </textarea></xmp> -->    </div>
</div>

</div>


</div>


      <div data-gid="IC_kwDOADEhXM542niU">
  
      
<div data-gid="IC_kwDOADEhXM542niU" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM542niU/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/taviso/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/taviso"><img src="https://avatars.githubusercontent.com/u/123814?s=80&amp;u=b62bec1a41456a2f68b4f22641f9bf816d4bbddf&amp;v=4" width="40" height="40" alt="@taviso"/></a>

</p>


  <div id="issuecomment-2027583636">

    <div data-body-version="933e1ca2f6f1267a66ae90718e36febefc0bc621125f799939803096e7b92ea3">
      


      <div>

        <task-lists disabled="" sortable="">

</task-lists>


        <div>

            <div>
              <div data-view-component="true">
  <!-- '"` --><!-- </textarea></xmp> --><form data-turbo="false" action="/libarchive/libarchive/reactions" accept-charset="UTF-8" method="post">
    
      
    <div>
          <tool-tip id="tooltip-7dfa125c-e835-447f-ba18-840b91d12bfb" for="reactions--reaction_button_component-a54064" popover="manual" data-direction="n" data-type="description" data-view-component="true">obfusk, clayne, pjjw, nstepanets, DanielRuf, omair2084, haxrob, rht-lhajn, infernalheaven, Stankye, and 35 more reacted with thumbs up emoji</tool-tip>
      
    </div>
</form></div>
            </div>
        </div>
      </div>

      <!-- '"` --><!-- </textarea></xmp> -->    </div>
</div>

</div>


</div>


      <div data-gid="IC_kwDOADEhXM5421nF">
  
      
<div data-gid="IC_kwDOADEhXM5421nF" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM5421nF/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/obfusk/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/obfusk"><img src="https://avatars.githubusercontent.com/u/1260687?s=80&amp;v=4" width="40" height="40" alt="@obfusk"/></a>

</p>


  <div id="issuecomment-2027641285">

    <div data-body-version="082c298d64add4b1950c19716f42d7eaf93a6f438415152e725c8d5ec62fd663">
      


      <div>

        <task-lists disabled="" sortable="">
<div>
          <p dir="auto">FWIW, I noticed it&#39;s using <code>errno</code> directly instead of <code>archive_errno(a)</code>, which might give the wrong error.</p>
      </div>
</task-lists>


        
      </div>

      <!-- '"` --><!-- </textarea></xmp> -->    </div>
</div>

</div>


</div>


      <div data-gid="IC_kwDOADEhXM5422UJ">
  
      
<div data-gid="IC_kwDOADEhXM5422UJ" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM5422UJ/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/cperciva/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/cperciva"><img src="https://avatars.githubusercontent.com/u/5085436?s=80&amp;u=f98a5bbe69e80767231644fe39e64ffe8c13c508&amp;v=4" width="40" height="40" alt="@cperciva"/></a>

</p>


  <div id="issuecomment-2027644169">

    <div data-body-version="e6b1bd58d6b44de780f3f966deec392630879f46329452583c9c75dbd99eb0da">
      


      <div>

        <task-lists disabled="" sortable="">
<div>
          <p dir="auto"><a data-hovercard-type="user" data-hovercard-url="/users/taviso/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/taviso">@taviso</a> Yeah, you&#39;re right.  I forgot that libarchive put path names into there.  Terminal escape sequences in pathnames could do all sorts of nasty things, including exploiting bugs in terminal emulators (I know there have been a few over the years).</p>
<p dir="auto">This should probably be switched back to safe_fprintf.  And also use archive_errno as <a data-hovercard-type="user" data-hovercard-url="/users/obfusk/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/obfusk">@obfusk</a> notes.</p>
      </div>
</task-lists>


        <div>

            <div>
              <div data-view-component="true">
  <!-- '"` --><!-- </textarea></xmp> --><form data-turbo="false" action="/libarchive/libarchive/reactions" accept-charset="UTF-8" method="post">
    
      
    <div>
          <tool-tip id="tooltip-61df39f4-e2c6-4514-98d1-7083345996c3" for="reactions--reaction_button_component-6e6e01" popover="manual" data-direction="n" data-type="description" data-view-component="true">obfusk, taviso, PluMGMK, rsaccani, sgammon, ScottFreeCode, grahamperrin, Stankye, mscieszka, dawin64, and 20 more reacted with thumbs up emoji</tool-tip>
          <tool-tip id="tooltip-a5a61250-ca76-4d84-9808-fe13f8493e96" for="reactions--reaction_button_component-f85caf" popover="manual" data-direction="n" data-type="description" data-view-component="true">swelljoe, fuomag9, abysssdweller, sevdog, grahamperrin, infernalheaven, srs81, HugKitten, goncalor, Liz-chan, and 2 more reacted with eyes emoji</tool-tip>
      
    </div>
</form></div>
            </div>
        </div>
      </div>

      <!-- '"` --><!-- </textarea></xmp> -->    </div>
</div>

</div>


</div>


      

      <div data-gid="IC_kwDOADEhXM543GFm">
  
      
<div data-gid="IC_kwDOADEhXM543GFm" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM543GFm/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/sgammon/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/sgammon"><img src="https://avatars.githubusercontent.com/u/171897?s=80&amp;u=2b2c64ef88606712a55e5f1bf1de6d9184601c59&amp;v=4" width="40" height="40" alt="@sgammon"/></a>

</p>


  <div id="issuecomment-2027708774">

    <div data-body-version="6ab933aec2b7b4d46780fc6a4be50fdd791f2596f2c8a25cee170f408d5f7a96">
      


      <div>

        <task-lists disabled="" sortable="">
<div>
          <p dir="auto"><a data-hovercard-type="user" data-hovercard-url="/users/cperciva/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/cperciva">@cperciva</a> would it be helpful to offer a PR? Or is one already in the works</p>
      </div>
</task-lists>


        
      </div>

      <!-- '"` --><!-- </textarea></xmp> -->    </div>
</div>

</div>


</div>


      

      <div data-gid="IC_kwDOADEhXM543I7P">
  
      
<div data-gid="IC_kwDOADEhXM543I7P" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM543I7P/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/kientzle/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/kientzle"><img src="https://avatars.githubusercontent.com/u/1398793?s=80&amp;v=4" width="40" height="40" alt="@kientzle"/></a>

</p>


  <div id="issuecomment-2027720399">

    <div data-body-version="0b75e8e1a591cbd88e9c6e8d2693ec86be1f5b251d62c959c1583bbb5c685a21">
      


      <div>

        <task-lists disabled="" sortable="">
<div>
          <p dir="auto">A PR would be appreciated.</p>
      </div>
</task-lists>


        
      </div>

      <!-- '"` --><!-- </textarea></xmp> -->    </div>
</div>

</div>


</div>


      

      <div data-gid="IC_kwDOADEhXM543JUl">
  
      
<div data-gid="IC_kwDOADEhXM543JUl" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM543JUl/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/emaste/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/emaste"><img src="https://avatars.githubusercontent.com/u/1034582?s=80&amp;u=5a5d77f59fd9040dc359cb2bbf0e54c095737e11&amp;v=4" width="40" height="40" alt="@emaste"/></a>

</p>


  <div id="issuecomment-2027722021">

    <div data-body-version="f3e45397d17c549c076411790e9695fdeee49726e5932d074bee59f792162fe0">
      


      <div>

        <task-lists disabled="" sortable="">
<div>
          <blockquote>
<p dir="auto">What about calls like this:</p>
<div>
  
  <div itemprop="text">
    <table data-tab-size="8" data-paste-markdown-skip="">

        <tbody><tr>
          <td id="L2256" data-line-number="2256"></td>
          <td id="LC2256"> <span>archive_set_error</span>(<span>&amp;</span><span>a</span><span>-&gt;</span><span>archive</span>, <span>en</span>, <span>&#34;Can&#39;t create &#39;%s&#39;&#34;</span>, </td>
        </tr>
    </tbody></table>
  </div>
</div>

</blockquote>
<p dir="auto">I&#39;m not sure if there are potentially problematic <code>archive_set_error</code> calls in the read path, but no matter - there&#39;s no reason to avoid using safe_fprintf. I have a change in my local tree that I&#39;ll push to a PR.</p>
      </div>
</task-lists>


        
      </div>

      <!-- '"` --><!-- </textarea></xmp> -->    </div>
</div>

</div>


</div>


      

      <div data-gid="IC_kwDOADEhXM543P_0">
  
      
<div data-gid="IC_kwDOADEhXM543P_0" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM543P_0/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/obfusk/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/obfusk"><img src="https://avatars.githubusercontent.com/u/1260687?s=80&amp;v=4" width="40" height="40" alt="@obfusk"/></a>

</p>


  <div id="issuecomment-2027749364">

    <div data-body-version="a821720e0d952faf8c13260964b6d31111abed5698885e135bf2ee72d739b4d0">
      


      <div>

        <task-lists disabled="" sortable="">
<div>
          <blockquote>
<p dir="auto">I&#39;m not sure if there are potentially problematic <code>archive_set_error</code> calls in the read path</p>
</blockquote>
<p dir="auto">Not sure how easy that would be to exploit, but I think this call could be a source of the error being printed:</p>
<div>
  
  <div itemprop="text">
    <table data-tab-size="8" data-paste-markdown-skip="">

        <tbody><tr>
          <td id="L747" data-line-number="747"></td>
          <td id="LC747"> <span>&#34;Couldn&#39;t open %s&#34;</span>, <span>tree_current_path</span>(<span>t</span>)); </td>
        </tr>
    </tbody></table>
  </div>
</div>

      </div>
</task-lists>


        
      </div>

      <!-- '"` --><!-- </textarea></xmp> -->    </div>
</div>

</div>


</div>


      <div data-gid="IC_kwDOADEhXM543U-G">
  
      
<div data-gid="IC_kwDOADEhXM543U-G" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM543U-G/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/DanielRuf/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/DanielRuf"><img src="https://avatars.githubusercontent.com/u/827205?s=80&amp;u=fa946f3ab4b4bdd2c7274a99715064519ed2c57c&amp;v=4" width="40" height="40" alt="@DanielRuf"/></a>

</p>


  <div id="issuecomment-2027769734">

    <div data-body-version="db44c066877d60c89702179b618dcb8b5955445663c5e8b349f7cc2420af2753">
      


      <div>

        <task-lists disabled="" sortable="">
<div>
          <p dir="auto">That commit definitely looks fishy.</p>
      </div>
</task-lists>


        
      </div>

      <!-- '"` --><!-- </textarea></xmp> -->    </div>
</div>

</div>


</div>


      

      <div data-gid="IC_kwDOADEhXM543Wwa">
  
      
<div data-gid="IC_kwDOADEhXM543Wwa" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM543Wwa/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/kientzle/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/kientzle"><img src="https://avatars.githubusercontent.com/u/1398793?s=80&amp;v=4" width="40" height="40" alt="@kientzle"/></a>

</p>


  <div id="issuecomment-2027777050">

    <div data-body-version="711c2aab58fb386e4d1463e2a38dd904345f00866352ed38a8d88ac310ebc099">
      


      <div>

        <task-lists disabled="" sortable="">
<div>
          <p dir="auto">Thanks to <a data-hovercard-type="user" data-hovercard-url="/users/emaste/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/emaste">@emaste</a> we have merged a fix to the issues observed above.</p>
      </div>
</task-lists>


        <div>

            <div>
              <div data-view-component="true">
  <!-- '"` --><!-- </textarea></xmp> --><form data-turbo="false" action="/libarchive/libarchive/reactions" accept-charset="UTF-8" method="post">
    
      
    <div>
          <tool-tip id="tooltip-29b33581-6d94-4b2c-b6fb-aa161537517d" for="reactions--reaction_button_component-969f09" popover="manual" data-direction="n" data-type="description" data-view-component="true">taviso, obfusk, chenxiaolong, tempname0606, fuomag9, mscieszka, duracell, Jappie3, Hexhu, papachan, and 16 more reacted with hooray emoji</tool-tip>
          <tool-tip id="tooltip-a59c2a7f-9154-455c-8758-078c16637bae" for="reactions--reaction_button_component-1b2428" popover="manual" data-direction="n" data-type="description" data-view-component="true">gerrywastaken reacted with confused emoji</tool-tip>
          <tool-tip id="tooltip-16c2562f-7004-45e1-b0bb-77696eb7b374" for="reactions--reaction_button_component-ccfc18" popover="manual" data-direction="n" data-type="description" data-view-component="true">gerrywastaken reacted with eyes emoji</tool-tip>
      
    </div>
</form></div>
            </div>
        </div>
      </div>

      <!-- '"` --><!-- </textarea></xmp> -->    </div>
</div>

</div>


</div>


      <div data-gid="IC_kwDOADEhXM543gQ6">
  
      
<div data-gid="IC_kwDOADEhXM543gQ6" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM543gQ6/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/darksylinc/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/darksylinc"><img src="https://avatars.githubusercontent.com/u/3395130?s=80&amp;v=4" width="40" height="40" alt="@darksylinc"/></a>

</p>


  <div id="issuecomment-2027815994">

    <div data-body-version="99ca6c34ea6ceb508017961a270df08e1157f7b96cc3fb8f293917156bd6cce8">
      


      <div>

        <task-lists disabled="" sortable="">
<div>
          <p dir="auto">I come here after knowing about this.</p>
<p dir="auto">I fear the fixes may not be enough.</p>
<p dir="auto">There are two issues with the current code:</p>
<ol dir="auto">
<li><code>strerror</code> <a href="https://man7.org/linux/man-pages/man3/strerror.3.html" rel="nofollow">is not thread safe</a> which means it can be potentially exploited <a href="https://stackoverflow.com/a/900363/3311855" rel="nofollow">by having another thread manipulate</a> <code>strerror</code>&#39;s internal buffer so that the null terminator is ignored when it&#39;s evaluated by <code>printf/safe_printf</code> (due to race conditions).
<ul dir="auto">
<li>I speculate this could be used to leak secrets. Since printf would continue printing beyond the original null terminator, until it encounters a 0x00 in the stream.</li>
</ul>
</li>
<li>On certain systems it is known for <a href="https://man7.org/linux/man-pages/man3/strerror.3.html" rel="nofollow">strerror</a> to return nullptr on certain conditions; which may cause a crash.</li>
</ol>
<p dir="auto">Normally I wouldn&#39;t pay this much attention but given that this code was deliberately put by a hostile actor; I suggest the strerror be removed, or replaced by a thread-safe variant and check for nullptrs.</p>
      </div>
</task-lists>


        <div>

            <div>
              <div data-view-component="true">
  <!-- '"` --><!-- </textarea></xmp> --><form data-turbo="false" action="/libarchive/libarchive/reactions" accept-charset="UTF-8" method="post">
    
      
    <div>
          <tool-tip id="tooltip-307e12cf-97b6-400c-9d8e-1f1a2599f956" for="reactions--reaction_button_component-ebfe3c" popover="manual" data-direction="n" data-type="description" data-view-component="true">Forza-tng, MrDoe, Stratos-Crimson, Young-Lord, lilianmoraru, yusufX019, Speculate7348, and linas reacted with thumbs up emoji</tool-tip>
          <tool-tip id="tooltip-02dd1601-e879-4945-bf45-f118f658c172" for="reactions--reaction_button_component-24b61a" popover="manual" data-direction="n" data-type="description" data-view-component="true">somehibs reacted with confused emoji</tool-tip>
          <tool-tip id="tooltip-a0db7ab8-10b5-46c1-95b4-4b180abae3ab" for="reactions--reaction_button_component-b4c470" popover="manual" data-direction="n" data-type="description" data-view-component="true">p--b, HugKitten, kuiperanon, xuhdev, uncomfyhalomacro, ruppde, ka2n, LeoniePhiline, jens1o, gurgunday, and 9 more reacted with eyes emoji</tool-tip>
      
    </div>
</form></div>
            </div>
        </div>
      </div>

      <!-- '"` --><!-- </textarea></xmp> -->    </div>
</div>

</div>


</div>


      

      <div data-gid="IC_kwDOADEhXM543k8w">
  
      
<div data-gid="IC_kwDOADEhXM543k8w" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM543k8w/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/davispw/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/davispw"><img src="https://avatars.githubusercontent.com/u/844549?s=80&amp;v=4" width="40" height="40" alt="@davispw"/></a>

</p>


  <div id="issuecomment-2027835184">

    <div data-body-version="dc3e5a93247e826544aa7090f55b39d83d0333de9a2605f03cb185d77c4e4e3b">
      


      <div>

        <task-lists disabled="" sortable="">
<div>
          <p dir="auto">I think this needs its own CVE.</p>
      </div>
</task-lists>


        <div>

            <div>
              <div data-view-component="true">
  <!-- '"` --><!-- </textarea></xmp> --><form data-turbo="false" action="/libarchive/libarchive/reactions" accept-charset="UTF-8" method="post">
    
      
    <div>
          <tool-tip id="tooltip-6bb3efdc-fbaa-4665-b99d-799ffa3d0718" for="reactions--reaction_button_component-57ccd4" popover="manual" data-direction="n" data-type="description" data-view-component="true">jieran233, YunofHD, uncomfyhalomacro, StayPirate, sumerki2020, fusion44, JaneJeon, HLFH, syakesaba, Banyc, and 16 more reacted with thumbs up emoji</tool-tip>
          <tool-tip id="tooltip-a11d0038-4542-42a7-bd9c-735880958fd9" for="reactions--reaction_button_component-37e19a" popover="manual" data-direction="n" data-type="description" data-view-component="true">Augustin-FL, kya8, MiroFurtado, dolfies, SwooshyCueb, buengese, and jtbx reacted with thumbs down emoji</tool-tip>
          <tool-tip id="tooltip-25c01879-d78d-4a25-951b-aef82816ba85" for="reactions--reaction_button_component-665496" popover="manual" data-direction="n" data-type="description" data-view-component="true">ebenali, k0ste, nexryai, ThomasKraaibeek, whiztech, bayramkzk, HLFH, tdsbs, alexmercerind, Zerogoki00, and 6 more reacted with laugh emoji</tool-tip>
          <tool-tip id="tooltip-139250aa-c1f8-4d04-aa0d-08762ee0da22" for="reactions--reaction_button_component-bc02e4" popover="manual" data-direction="n" data-type="description" data-view-component="true">rrbutani, kivikakk, and Young-Lord reacted with confused emoji</tool-tip>
          <tool-tip id="tooltip-e0efff29-1e47-4e58-9846-140a515bf1e3" for="reactions--reaction_button_component-05d553" popover="manual" data-direction="n" data-type="description" data-view-component="true">gerrywastaken reacted with heart emoji</tool-tip>
      
    </div>
</form></div>
            </div>
        </div>
      </div>

      <!-- '"` --><!-- </textarea></xmp> -->    </div>
</div>

</div>


</div>


      <div data-gid="IC_kwDOADEhXM543mW_">
  
      
<div data-gid="IC_kwDOADEhXM543mW_" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM543mW_/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/jsonn/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jsonn"><img src="https://avatars.githubusercontent.com/u/296817?s=80&amp;v=4" width="40" height="40" alt="@jsonn"/></a>

</p>


  <div id="issuecomment-2027840959">

    <div data-body-version="702f8ab07af2817d577025d58fc4fe3b470c8eef0e7e970d6fa01e564541f1b5">
      


      <div>

        <task-lists disabled="" sortable="">
<div>
          <p dir="auto">I don&#39;t see any evidence that either problem is relevant. bsdtar is not multithreaded. The errno values are from system calls, so if your libc doesn&#39;t do something sane in that case, it is already broken.</p>
      </div>
</task-lists>


        <div>

            <div>
              <div data-view-component="true">
  <!-- '"` --><!-- </textarea></xmp> --><form data-turbo="false" action="/libarchive/libarchive/reactions" accept-charset="UTF-8" method="post">
    
      
    <div>
          <tool-tip id="tooltip-4e4365d9-b9c1-4165-b258-aa5ea9949023" for="reactions--reaction_button_component-963dfe" popover="manual" data-direction="n" data-type="description" data-view-component="true">ListsOfArrays, minofmax, neovimnovum, idanoo, algorythmic, EliEron, totemo, Rongronggg9, nexryai, uncomfyhalomacro, and 24 more reacted with thumbs up emoji</tool-tip>
      
    </div>
</form></div>
            </div>
        </div>
      </div>

      <!-- '"` --><!-- </textarea></xmp> -->    </div>
</div>

</div>


</div>


      


  

        <div data-gid="IC_kwDOADEhXM546Csq">
  
      
<div data-gid="IC_kwDOADEhXM546Csq" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM546Csq/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/kientzle/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/kientzle"><img src="https://avatars.githubusercontent.com/u/1398793?s=80&amp;v=4" width="40" height="40" alt="@kientzle"/></a>

</p>


  <div id="issuecomment-2028481322">

    <div data-body-version="db8ca70f99526ef98fcf635ee8543ebd056809dbdb2ba17332ee582d735e9e2b">
      


      <div>

        <task-lists disabled="" sortable="">
<div>
          <blockquote>
<p dir="auto">I think this needs its own CVE.</p>
</blockquote>
<p dir="auto">If someone who has experience with CVE processes wants to drive this, please contact <a href="mailto:security@libarchive.de">security@libarchive.de</a> first so we can ensure that we don&#39;t get a bunch of duplicate filings.</p>
      </div>
</task-lists>


        
      </div>

      <!-- '"` --><!-- </textarea></xmp> -->    </div>
</div>

</div>


</div>


        <div data-gid="IC_kwDOADEhXM546GJl">
  
      
<div data-gid="IC_kwDOADEhXM546GJl" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM546GJl/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/spixi/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/spixi"><img src="https://avatars.githubusercontent.com/u/3192596?s=80&amp;v=4" width="40" height="40" alt="@spixi"/></a>

</p>


  <div id="issuecomment-2028495461">

    <div data-body-version="5af59282ac1ddc85da485c839e1ba7b6efbcbfbe7aeca42c13a42e8adfd111d2">
      


      <div>

        <task-lists disabled="" sortable="">
<div>
          <p dir="auto"><a data-hovercard-type="user" data-hovercard-url="/users/anarazel/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/anarazel">@anarazel</a> Sorry, that I am mentioning this here, but the clone of the compromised repository is set read-only. I wonder, if <a data-hovercard-type="commit" data-hovercard-url="https://github.com/fionn/xz-backdoored/commit/4430e075f7ccfc47972d6ca0aa1c3779fc265e10/hovercard" href="https://github.com/fionn/xz-backdoored/commit/4430e075f7ccfc47972d6ca0aa1c3779fc265e10">fionn/xz-backdoored@<tt>4430e07</tt></a> also belongs to the exploit, because -O2 makes it much easier to inject code than -O3</p>
      </div>
</task-lists>


        
      </div>

      <!-- '"` --><!-- </textarea></xmp> -->    </div>
</div>

</div>


</div>


        <div data-gid="IC_kwDOADEhXM546Hko">
  
      
<div data-gid="IC_kwDOADEhXM546Hko" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM546Hko/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/rpigott/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/rpigott"><img src="https://avatars.githubusercontent.com/u/12577529?s=80&amp;u=085eb77d30788b44d5779cbcfba9a31e092e45af&amp;v=4" width="40" height="40" alt="@rpigott"/></a>

</p>


  

</div>


</div>


        <div data-gid="REFE_lADOADEhXM4-ItRezwAAAALdTAXC">
  
          


  


  


  


  

  
<div>
  <div id="ref-commit-dff9056">
    
  <p><a data-hovercard-type="user" data-hovercard-url="/users/bell-sw/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/bell-sw">bell-sw</a> 

      pushed a commit
        to bell-sw/alpaquita-aports
      that referenced
      this pull request

    </p><a href="#ref-commit-dff9056">
      <relative-time datetime="2024-03-31T11:55:17Z">Mar 31, 2024</relative-time>
    </a>
    <div>
      
<div data-channel="eyJjIjoicmVwbzo1NDkwNTc4Nzc6Y29tbWl0OmRmZjkwNTY5NGJjOGQyOTlmNGI0ZjYzYzg4YjBmOGFjNTRmMmFjMzciLCJ0IjoxNzIxMjE5MzQ4fQ==--48d4fb2d2516af8257be40d479658a2fb94a230cb26ea7dcee125902205062e8" data-url="/bell-sw/alpaquita-aports/commit/dff905694bc8d299f4b4f63c88b0f8ac54f2ac37/show_partial?partial=commit%2Fcondensed_details">
  <div>
    <div>
      
<div>
  <p><a data-test-selector="commits-avatar-stack-avatar-link" data-hovercard-type="user" data-hovercard-url="/users/ncopa/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/ncopa">
        <img data-test-selector="commits-avatar-stack-avatar-image" src="https://avatars.githubusercontent.com/u/66357?s=40&amp;v=4" width="20" height="20" alt="@ncopa"/>
</a>      <a data-test-selector="commits-avatar-stack-avatar-link" data-hovercard-type="user" data-hovercard-url="/users/nbuwe/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/nbuwe">
        <img data-test-selector="commits-avatar-stack-avatar-image" src="https://avatars.githubusercontent.com/u/17624538?s=40&amp;v=4" width="20" height="20" alt="@nbuwe"/>
</a>  </p>
</div>


      

      

      

      <!-- ml-1 is added to accommodate "clock" icon -->
      
    </div>
  </div>
    
</div>

    </div>
  </div>
</div>

  


  



</div>

        <div data-gid="IC_kwDOADEhXM547KZw">
  
      
<div data-gid="IC_kwDOADEhXM547KZw" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM547KZw/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/emaste/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/emaste"><img src="https://avatars.githubusercontent.com/u/1034582?s=80&amp;u=5a5d77f59fd9040dc359cb2bbf0e54c095737e11&amp;v=4" width="40" height="40" alt="@emaste"/></a>

</p>


  <div id="issuecomment-2028775024">

    <div data-body-version="f3a1d42a7d61292408cbaee628fd6d751e34ace623bc6d17859531f2087a65a0">
      


      <div>

        <task-lists disabled="" sortable="">
<div>
          <blockquote>
<p dir="auto">The commit still uses <code>safe_printf</code> for the pathnames, though. I don&#39;t think those are applicable here at all.</p>
</blockquote>
<p dir="auto">The issue is that the pathname can also end up in the error string.</p>
<div data-snippet-clipboard-copy-content="$ touch $(printf &#39;\033[31mred\033[0m&#39;)
$ tar -c -f escape.tar *red*
$ (cd /var/empty &amp;&amp; tar -xf ~/escape.tar)
\033[31mred\033[0m: Can&#39;t create &#39;red&#39;: Operation not permitted
tar: Error exit delayed from previous errors."><pre><code>$ touch $(printf &#39;\033[31mred\033[0m&#39;)
$ tar -c -f escape.tar *red*
$ (cd /var/empty &amp;&amp; tar -xf ~/escape.tar)
\033[31mred\033[0m: Can&#39;t create &#39;red&#39;: Operation not permitted
tar: Error exit delayed from previous errors.
</code></pre></div>
<p dir="auto">Note though that there are other cases where <code>archive_error_string()</code> might be printed unescaped (e.g., when passed to <code>lafe_warnc()</code> or <code>lafe_errc()</code>), so this should be addressed in a more comprehensive manner.</p>
      </div>
</task-lists>


        
      </div>

      <!-- '"` --><!-- </textarea></xmp> -->    </div>
</div>

</div>


</div>


        <div data-gid="IC_kwDOADEhXM547jgx">
  
      
<div data-gid="IC_kwDOADEhXM547jgx" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM547jgx/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/GossiTheDog/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/GossiTheDog"><img src="https://avatars.githubusercontent.com/u/34346399?s=80&amp;u=54787d508ee9a94c80cee020d66a2d607222357e&amp;v=4" width="40" height="40" alt="@GossiTheDog"/></a>

</p>


  <div id="issuecomment-2028877873">

    <div data-body-version="229fee93e4abfea49d46be159811628db779859363d1dceeb0e1e763357dccfe">
      


      <div>

        <task-lists disabled="" sortable="">
<div>
          <p dir="auto">Windows 11 bundles libarchive, but I don’t know if they ever call this part.</p>
      </div>
</task-lists>


        
      </div>

      <!-- '"` --><!-- </textarea></xmp> -->    </div>
</div>

</div>


</div>


        <div data-gid="IC_kwDOADEhXM547jn-">
  
      
<div data-gid="IC_kwDOADEhXM547jn-" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM547jn-/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/DHowett/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/DHowett"><img src="https://avatars.githubusercontent.com/u/189190?s=80&amp;v=4" width="40" height="40" alt="@DHowett"/></a>

</p>


  <div id="issuecomment-2028878334">

    <div data-body-version="11e0531c78306ccd1f21e6f918e9dbd9c22236c8895e22910550337cb93593bc">
      


      <div>

        <task-lists disabled="" sortable="">
<div>
          <blockquote>
<p dir="auto">Windows 11 bundles libarchive, but I don’t know if they ever call this part.</p>
</blockquote>
<p dir="auto">This is part of tar&#39;s archive reader; it is likely that it is used in Windows&#39; tar.exe. 🙂</p>
<p dir="auto">EDIT: I misread which part of the code this was; corrected above.</p>
      </div>
</task-lists>


        
      </div>

      <!-- '"` --><!-- </textarea></xmp> -->    </div>
</div>

</div>


</div>


        <div data-gid="IC_kwDOADEhXM547rfZ">
  
      
<div data-gid="IC_kwDOADEhXM547rfZ" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM547rfZ/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/juraisa/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/juraisa"><img src="https://avatars.githubusercontent.com/u/18617029?s=80&amp;v=4" width="40" height="40" alt="@juraisa"/></a>

</p>


  <div id="issuecomment-2028910553">

    <div data-body-version="c97460008e44cb1430faaab76df0c0f61960271b7e7d67a6a4d9b562e06f1ffe">
      


      <div>

        <task-lists disabled="" sortable="">
<div>
          <p dir="auto">way too many arm chair &#34;researchers&#34; in this thread</p>
<p dir="auto">I have a bigger question, if the switch from safe fprintf is actually a concern, why did maintainers of this project approve the merge. Are commits actually being reviewed or just blindly approved cuz you recognize the PRs name attached to it?</p>
      </div>
</task-lists>


        <div>

            <div>
              <div data-view-component="true">
  <!-- '"` --><!-- </textarea></xmp> --><form data-turbo="false" action="/libarchive/libarchive/reactions" accept-charset="UTF-8" method="post">
    
      
    <div>
          <tool-tip id="tooltip-b149e709-cee0-4f23-bb6c-9f95171c86a8" for="reactions--reaction_button_component-269571" popover="manual" data-direction="n" data-type="description" data-view-component="true">bbayles and mzhboy reacted with thumbs up emoji</tool-tip>
          <tool-tip id="tooltip-aeaa8409-aef0-4652-b9a8-6f89345a2134" for="reactions--reaction_button_component-aeba6a" popover="manual" data-direction="n" data-type="description" data-view-component="true">lilianmoraru, kaprests, DHowett, KhalilMohammad, JeffreyMercado, m-abboud, kalihman, GossiTheDog, anic17, Ayrtat, and 6 more reacted with thumbs down emoji</tool-tip>
          <tool-tip id="tooltip-8ba490d1-1224-4066-83d1-7c2a3822aac7" for="reactions--reaction_button_component-19fa21" popover="manual" data-direction="n" data-type="description" data-view-component="true">yogo1212, solatis, and vstyler96 reacted with confused emoji</tool-tip>
          <tool-tip id="tooltip-f8916809-6ec5-466a-ba26-a91c76ac1e3b" for="reactions--reaction_button_component-6081a8" popover="manual" data-direction="n" data-type="description" data-view-component="true">gerrywastaken reacted with heart emoji</tool-tip>
      
    </div>
</form></div>
            </div>
        </div>
      </div>

      <!-- '"` --><!-- </textarea></xmp> -->    </div>
</div>

</div>


</div>


        <div data-gid="CRE_kwDOAEVQ_M5Rzv0H">
  
          

  
<div>
  <div id="ref-commit-e335fed">
    
  <p><a data-hovercard-type="user" data-hovercard-url="/users/faisal/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/faisal">faisal</a> 

      added a commit
        to faisal/homebrew-core
      that referenced
      this pull request

    </p><a href="#ref-commit-e335fed">
      <relative-time datetime="2024-04-01T03:39:02Z">Apr 1, 2024</relative-time>
    </a>
    <div>
      
<div data-channel="eyJjIjoicmVwbzo1ODA2NDA1ODc6Y29tbWl0OmUzMzVmZWRhYTEyYzBkNDI0ZDZkN2UxZmQyZmRmNzRjZGFhMWU1YmQiLCJ0IjoxNzIxMjE5MzQ4fQ==--79043bdb6234aa349123c0e119484f9f0b32f5f58e41558efc6b6b80a2c3a575" data-url="/faisal/homebrew-core/commit/e335fedaa12c0d424d6d7e1fd2fdf74cdaa1e5bd/show_partial?partial=commit%2Fcondensed_details">
  <div>
    <div>
      
<div>
  <p><a data-test-selector="commits-avatar-stack-avatar-link" data-hovercard-type="user" data-hovercard-url="/users/faisal/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/faisal">
        <img data-test-selector="commits-avatar-stack-avatar-image" src="https://avatars.githubusercontent.com/u/2758?s=40&amp;v=4" width="20" height="20" alt="@faisal"/>
</a>  </p>
</div>


      

      

      

      <!-- ml-1 is added to accommodate "clock" icon -->
      
    </div>
  </div>
    
</div>

    </div>
  </div>
</div>

  
<div>
  <div id="ref-commit-2be329c">
    
  <p><a data-hovercard-type="user" data-hovercard-url="/users/faisal/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/faisal">faisal</a> 

      added a commit
        to faisal/homebrew-core
      that referenced
      this pull request

    </p><a href="#ref-commit-2be329c">
      <relative-time datetime="2024-04-01T03:46:20Z">Apr 1, 2024</relative-time>
    </a>
    <div>
      
<div data-channel="eyJjIjoicmVwbzo1ODA2NDA1ODc6Y29tbWl0OjJiZTMyOWM1NTVkNGU4YjU1MDgxOTg4ZmY5ZGRjMDEwOTQyNDk3NmMiLCJ0IjoxNzIxMjE5MzQ4fQ==--0dd5035ce2c76583179ec2968ed069ea23fa66f44ac982609dcc03ec01841712" data-url="/faisal/homebrew-core/commit/2be329c555d4e8b55081988ff9ddc0109424976c/show_partial?partial=commit%2Fcondensed_details">
  <div>
    <div>
      
<div>
  <p><a data-test-selector="commits-avatar-stack-avatar-link" data-hovercard-type="user" data-hovercard-url="/users/faisal/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/faisal">
        <img data-test-selector="commits-avatar-stack-avatar-image" src="https://avatars.githubusercontent.com/u/2758?s=40&amp;v=4" width="20" height="20" alt="@faisal"/>
</a>  </p>
</div>


      

      

      

      <!-- ml-1 is added to accommodate "clock" icon -->
      
    </div>
  </div>
    
</div>

    </div>
  </div>
</div>

  



</div>

        <div data-gid="IC_kwDOADEhXM548jPA">
  
      
<div data-gid="IC_kwDOADEhXM548jPA" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM548jPA/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/vonHabsi/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/vonHabsi"><img src="https://avatars.githubusercontent.com/u/200945?s=80&amp;v=4" width="40" height="40" alt="@vonHabsi"/></a>

</p>


  <div id="issuecomment-2029138880">

    <div data-body-version="9595f6750a598e33241f8c8360cd42ebb40f6036349417a65add50d4144debd0">
      


      <div>

        <task-lists disabled="" sortable="">
<div>
          <p dir="auto">I don&#39;t know much about C++ programming syntax, but shouldn&#39;t there be stronger code-formatting rules that pull requests must meet before they are reviewed let alone accepted?</p>
<p dir="auto">The intent of the changes may be obvious to those with C++ experience but looking at the diff it looks to me like there was something off about it.</p>
<p dir="auto">I think software should be designed and implemented in such a way that those with limited domain expertise but good programming experience can spot irregularities or stuff which looks &#34;off&#34;.</p>
<p dir="auto">Hopefully this won&#39;t cause much of a digression from the main topic.</p>
      </div>
</task-lists>


        
      </div>

      <!-- '"` --><!-- </textarea></xmp> -->    </div>
</div>

</div>


</div>


        <div data-gid="IC_kwDOADEhXM54--lo">
  
      
<div data-gid="IC_kwDOADEhXM54--lo" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM54--lo/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/Speculate7348/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Speculate7348"><img src="https://avatars.githubusercontent.com/u/111165684?s=80&amp;v=4" width="40" height="40" alt="@Speculate7348"/></a>

</p>


  

</div>


</div>


        <div data-gid="REFE_lADOADEhXM4-ItRezwAAAALdza8M">
  
          
<div>
  <div id="ref-commit-ef2fe6a">
    
  <p><a data-hovercard-type="user" data-hovercard-url="/users/Bo98/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Bo98">Bo98</a> 

      pushed a commit
        to faisal/homebrew-core
      that referenced
      this pull request

    </p><a href="#ref-commit-ef2fe6a">
      <relative-time datetime="2024-04-01T14:09:01Z">Apr 1, 2024</relative-time>
    </a>
    <div>
      
<div data-channel="eyJjIjoicmVwbzo1ODA2NDA1ODc6Y29tbWl0OmVmMmZlNmE0YTZkZDA5N2MwOGQ3MWRmZTVkMDMxMjAyMzdhYjU0OWIiLCJ0IjoxNzIxMjE5MzQ4fQ==--71197b81668fcc88fb91cce9a587fe13c326b16c1d1a56bd1189556d14f11760" data-url="/faisal/homebrew-core/commit/ef2fe6a4a6dd097c08d71dfe5d03120237ab549b/show_partial?partial=commit%2Fcondensed_details">
  <div>
    <div>
      
<div>
  <p><a data-test-selector="commits-avatar-stack-avatar-link" data-hovercard-type="user" data-hovercard-url="/users/faisal/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/faisal">
        <img data-test-selector="commits-avatar-stack-avatar-image" src="https://avatars.githubusercontent.com/u/2758?s=40&amp;v=4" width="20" height="20" alt="@faisal"/>
</a>      <a data-test-selector="commits-avatar-stack-avatar-link" data-hovercard-type="user" data-hovercard-url="/users/Bo98/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Bo98">
        <img data-test-selector="commits-avatar-stack-avatar-image" src="https://avatars.githubusercontent.com/u/1190754?s=40&amp;v=4" width="20" height="20" alt="@Bo98"/>
</a>  </p>
</div>


      

      

      

      <!-- ml-1 is added to accommodate "clock" icon -->
      
    </div>
  </div>
    
</div>

    </div>
  </div>
</div>



</div>

        <div data-gid="IC_kwDOADEhXM54_T10">
  
      
<div data-gid="IC_kwDOADEhXM54_T10" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM54_T10/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/TheDirigible/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/TheDirigible"><img src="https://avatars.githubusercontent.com/u/63369349?s=80&amp;v=4" width="40" height="40" alt="@TheDirigible"/></a>

</p>


  <div id="issuecomment-2029862260">

    <div data-body-version="327b99c59c89e4142045c0e43b99cf52e78b8459041bac260afde67cff08a512">
      


      <div>

        <task-lists disabled="" sortable="">
<div>
          <p dir="auto">We should prefer the naming convention printf() and unsafe_printf(), no?</p>
      </div>
</task-lists>


        
      </div>

      <!-- '"` --><!-- </textarea></xmp> -->    </div>
</div>

</div>


</div>


        <div data-gid="IC_kwDOADEhXM54_v4M">
  
      
<div data-gid="IC_kwDOADEhXM54_v4M" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM54_v4M/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/mortie/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/mortie"><img src="https://avatars.githubusercontent.com/u/3728194?s=80&amp;u=ed59488e2fd44a21cdb4dbd32fbf4732096a9a8b&amp;v=4" width="40" height="40" alt="@mortie"/></a>

</p>


  <div id="issuecomment-2029977100">

    <div data-body-version="754a4cb7d3a6761c2318198b674665516b30eabc9e1b5afb9de9d50e82ae3f71">
      


      <div>

        <task-lists disabled="" sortable="">
<div>
          <p dir="auto"><a data-hovercard-type="user" data-hovercard-url="/users/TheDirigible/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/TheDirigible">@TheDirigible</a> fprintf is from the C standard library, safe_fprintf is a function internal to libarchive which does extra filtering. There&#39;s nothing libarchive can reasonably do about fprintf.</p>
      </div>
</task-lists>


        
      </div>

      <!-- '"` --><!-- </textarea></xmp> -->    </div>
</div>

</div>


</div>


        <div data-gid="IC_kwDOADEhXM54_08A">
  
      
<div data-gid="IC_kwDOADEhXM54_08A" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM54_08A/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/gerrywastaken/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/gerrywastaken"><img src="https://avatars.githubusercontent.com/u/71481?s=80&amp;u=718061b4ddb7380518998e5c6cff3dcecfa99edd&amp;v=4" width="40" height="40" alt="@gerrywastaken"/></a>

</p>


  <div id="issuecomment-2029997824">

    <div data-body-version="42d55009be4bf55ffff801a4558e2e075648b24506820fd049ba4be9a4b45965">
      


      <div>

        <task-lists disabled="" sortable="">
<div>
          <p dir="auto">I suggest looking closely at those who approved said PRs, and other PRs they approved.</p>
      </div>
</task-lists>


        
      </div>

      <!-- '"` --><!-- </textarea></xmp> -->    </div>
</div>

</div>


</div>


        <div data-gid="IC_kwDOADEhXM55AAvb">
  
      
<div data-gid="IC_kwDOADEhXM55AAvb" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM55AAvb/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/kientzle/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/kientzle"><img src="https://avatars.githubusercontent.com/u/1398793?s=80&amp;v=4" width="40" height="40" alt="@kientzle"/></a>

</p>


  <div id="issuecomment-2030046171">

    <div data-body-version="e782a1378904c227faaa84eecd707e9ca2f14e0f6f958921fd86f0820e6fa0d6">
      


      <div>

        <task-lists disabled="" sortable="">
<div>
          <p dir="auto">A group of very experienced engineers has been working for a couple of days on this issue.  We&#39;ve audited all changes made by the one account that is known to have made malicious changes to <code>xz</code>.  This change to error printing is the only one that has any concerns.  It has been fixed and we&#39;ll be coordinating announcement and updates to libarchive through the appropriate channels.</p>
<p dir="auto">We will continue to examine libarchive for any evidence of similar problems and will address any that we find.  Thanks for your patience and assistance.</p>
<p dir="auto">If you know of any other problems with libarchive, please:</p>
<ul dir="auto">
<li>If it&#39;s a security-critical issue, please email <code>security@libarchive.de</code></li>
<li>If it&#39;s a non-security-critical bug, please file an Issue in this github repository.</li>
</ul>
<p dir="auto">Most importantly, please keep this in mind:  We&#39;re all victims here.</p>
      </div>
</task-lists>


        
      </div>

      <!-- '"` --><!-- </textarea></xmp> -->    </div>
</div>

</div>


</div>


        <div data-gid="IC_kwDOADEhXM55ANQt">
  
      
<div data-gid="IC_kwDOADEhXM55ANQt" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM55ANQt/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/emaste/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/emaste"><img src="https://avatars.githubusercontent.com/u/1034582?s=80&amp;u=5a5d77f59fd9040dc359cb2bbf0e54c095737e11&amp;v=4" width="40" height="40" alt="@emaste"/></a>

</p>


  <div id="issuecomment-2030097453">

    <div data-body-version="2bd5b0c42034ef6f1f643520af5cac241cd2dd3ed4074a413beef690db93ce9d">
      


      <div>

        <task-lists disabled="" sortable="">
<div>
          <p dir="auto"><a data-hovercard-type="user" data-hovercard-url="/users/kientzle/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/kientzle">@kientzle</a> perhaps we should close this to new comments? The specific case here has been addressed via <a data-error-text="Failed to load title" data-id="2215984583" data-permission-text="Title is private" data-url="https://github.com/libarchive/libarchive/issues/2101" data-hovercard-type="pull_request" data-hovercard-url="/libarchive/libarchive/pull/2101/hovercard" href="https://github.com/libarchive/libarchive/pull/2101">#2101</a>, I&#39;m opening an issue for <a data-hovercard-type="user" data-hovercard-url="/users/jsonn/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/jsonn">@jsonn</a>&#39;s suggestion above of escaping pathnames in error strings, and anything else should be addressed via one of the two paths in your preceding comment.</p>
      </div>
</task-lists>


        
      </div>

      <!-- '"` --><!-- </textarea></xmp> -->    </div>
</div>

</div>


</div>


        

        <div data-gid="IC_kwDOADEhXM55Aa1Z">
  
      
<div data-gid="IC_kwDOADEhXM55Aa1Z" data-url="/libarchive/libarchive/comments/IC_kwDOADEhXM55Aa1Z/partials/timeline_issue_comment">

  <p><a data-hovercard-type="user" data-hovercard-url="/users/kientzle/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/kientzle"><img src="https://avatars.githubusercontent.com/u/1398793?s=80&amp;v=4" width="40" height="40" alt="@kientzle"/></a>

</p>


  

</div>


</div>


        



  <!-- Rendered timeline since 2024-04-01 09:55:55 -->
  



    </div></div>
  </body>
</html>
