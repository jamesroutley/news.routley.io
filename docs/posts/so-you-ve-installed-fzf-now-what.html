<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://andrew-quinn.me/fzf/">Original</a>
    <h1>So you&#39;ve installed `fzf` – now what?</h1>
    
    <div id="readability-page-1" class="page"><div id="content">
        <p>Software engineers are, if not unique, then darn <em>near</em>
unique in the ease with which we can create tools to improve
our own professional lives; this however can come at a steep
cost over time for people who constantly flit back and
forth between different tools without investing the time to
learn their own kit in depth. As someone with a healthy
respect for <a href="https://commoncog.com/how-to-learn-tacit-knowledge/">the tacit knowledge of people better than
me</a>, I
think a great 80/20 heuristic is “Learn the oldies
first”: venerable Unix tools like <code>cat</code>, <code>ls</code>, <code>cd</code>, <code>grep</code>,
and <code>cut</code>. (<code>sed</code> and <code>awk</code>, too, if you have the good
fortune of landing yourself in an actual modern sysadmin
role.)</p>
<p>But there are tools whose return on investment is so
immediate, and whose value prop is so unique, that the 80/20
heuristic breaks down entirely for them. <code>fzf</code> is one of
them. And it makes me sad to see so many people download it,
run it as-is at the command line, and then just shake their
heads and walk away, saying “I don’t get it”.</p>
<p>Here I want to change that. Pretend you live on a
more-or-less standard *nix box. You’ve just installed
<code>fzf</code> <a href="https://github.com/junegunn/fzf#using-git">(EDIT: <em>using the install script</em>)</a> – now what?</p>
<h3 id="first-try-ctrlr">First try <code>Ctrl+R</code>…</h3>
<p>In most terminals, Linux and Windows alike, <code>Ctrl+R</code> gives
you <em>backwards search</em> for your commands. The reason you,
like me, may not have heard about this until you had already
been hacking away for <em>ten flippin&#39; years</em> at the shell is
because the base version kind of sucks for 2 reasons:</p>
<ul>
<li>You need to give <strong>an exact match</strong> to get what you’re
trying to remember.</li>
<li>You get <strong>only one preview</strong>, so if you miss that exact
match by even one character, you’re on a wild goose chase.</li>
</ul>
<p><code>fzf</code> is a bit of a weird program because installing it
actually overwrites a whole bunch of keyboard shortcuts, in
the interest of making them better. Normally I would hate
this. But…</p>
<p><img src="https://andrew-quinn.me/img/fzf-ctrl-r.gif" alt=""/></p>
<p>… This is a <em>considerable</em> improvement on the baseline.</p>
<h3 id="-now-try-altc">… now try <code>Alt+C</code></h3>
<p>Let’s say you boot into an empty terminal. You’re trying to
quickly find your nascent SaaS side hustle repos and <code>cd</code> to
it - but it’s been weeks since you’ve been there, your
actual full time job has been unusually fun and engaging…
How do you find it?</p>
<p>Answer: With <code>fzf</code>. <code>fzf</code> rewrites <code>Alt+C</code> into a souped-up
fuzzy-<code>cd</code> shortcut that lets you hop around <em>very</em> quickly
when all you remember is the vague name of the directory in
question.</p>
<p><img src="https://andrew-quinn.me/img/fzf-alt-c.gif" alt=""/></p>
<h3 id="the-base-fzf-command">The base <code>fzf</code> command</h3>
<p>Okay, we’ve got the shortcuts out of the way. Honestly these
two guys alone provide the majority of the value I get out
of <code>fzf</code> - but let’s look at what the command, by itself,
does.</p>
<p><img src="https://andrew-quinn.me/img/fzf-bare-invocation.gif" alt=""/></p>
<p>It fuzzy-finds file locations! Relative ones, at least, to
your own directory. This… isn’t that useful, by itself.</p>
<h4 id="but-try-vi-fzf-and">But try <code>vi $(fzf)</code>, and…!!!</h4>
<p><img src="https://andrew-quinn.me/img/fzf-vi-fzf.gif" alt=""/></p>
<p>And you get a fuzzy-open-in-editor experience!</p>
<p>(There’s nothing special about <code>vi</code> in this regard, btw. You
can call it with <code>emacs</code>,
<a href="https://ariadne.space/2021/08/13/gnu-nano-is-my-editor-of-choice/"><code>nano</code></a>,
<code>code</code>, whatever floats your boat!)</p>
<h3 id="vi-find----fzf-for-finding-random-config-files"><code>vi $(find . &#39;/&#39; | fzf)</code>: For finding random config files</h3>
<p>The other day I was trying to hack together baby’s first
live-reload with a Firefox extension, <code>entr</code>, and <code>nginx</code>.
And I found myself asking: Where the heck is <code>nginx.conf</code>?</p>
<p>I reviewed my options. I could</p>
<ol>
<li>Use my half-remembered knowledge of the FHS to guess around, with <code>trees</code> and <code>grep</code>s, or</li>
<li>Just know and commit it to memory and feel superior to everyone else, or</li>
<li>Just pipe <code>find</code> . ‘/’ to <code>fzf</code> and start searching.</li>
</ol>
<p><img src="https://andrew-quinn.me/img/fzf-finding-nginx-conf.gif" alt=""/></p>
<p>I like this clip a lot because it shows some of the subtle
tradeoffs of using <code>fzf</code>, as well as one of the more
advanced searching features - searching for <code>conf$</code> will
filter out any line that doesn’t end in <code>conf</code>. Notice
that <code>fzf</code> temporarily wigs out when <code>find</code> hits a whole lot
of “Permission denied” errors - but then recovers itself a
few seconds later.</p>
<p>Are those extra few seconds worth the tradeoff for being
able to find config files in such a braindead manner? It is
for me.</p>
<h3 id="even-less-friction-vi-tab">Even less friction: <code>vi **&lt;TAB&gt;</code></h3>
<p><em>Thanks to <a href="https://news.ycombinator.com/item?id=35249935">sigmonsays, Hacker News</a>, for reminding me of this feature!</em></p>
<p>About halfway between “overwrite a keyboard shortcut” and “use fzf as-is” is
<strong>using two stars for fuzzy tab completion</strong>. Here’s using it to do something
quite similar to <code>vi $(fzf)</code>, as above:</p>
<p><img src="https://andrew-quinn.me/img/fzf-star-star.gif" alt=""/></p>
<p>You <em>do</em> have to hit <code>Enter</code> one more time after you actually get the command,
fair warning.</p>
<p>I’m not yet in the habit of using this all that often, since my only real use
case at home is as a replacement for <code>$(fzf)</code>, and I just find explicitly
calling the boy easier to remember. I imagine it’s a similar experience for
tab-tab-star-heads as <a href="https://knowyourmeme.com/photos/1196921-damn-bitch-you-live-like-this">watching my coworker copy-and-paste manually from the
terminal instead of using <code>:read ! echo &#34;Hello world!&#34;</code> is for me
</a>.</p>
<h3 id="mv-fzf-fzf---real-amnesiac-hours"><code>mv $(fzf) $(fzf)</code> - real amnesiac hours</h3>
<p>For when you neither rememeber exactly what you’re moving, nor
where you’re moving it to, but you remember the abstract concept of
distance over time well enough to know it simply must be done, and
something <em>extremely specific</em> about the nature of each item to be
shunted.</p>
<p><img src="https://andrew-quinn.me/img/fzf-mv.gif" alt=""/></p>
<p><img src="https://andrew-quinn.me/img/2023-03-22_H-55-29_4512.png" alt=""/></p>
<h3 id="introducing-rg-fast-recursive-by-default-grep">Introducing <code>rg</code>: Fast, recursive-by-default <code>grep</code></h3>
<p>Everything I say below <em>can</em> be done with <code>grep</code> as well,
but the recursive-by-default nature of <code>rg</code> (also known as
<code>ripgrep</code>) is where the tool really comes into its own. I
highly recommend you download it and use it for the
following examples as well. But if you’re toolshy, don’t
worry!</p>
<h3 id="rg---fzf-fuzzy-search-every-line-in-every-file"><code>rg . | fzf</code>: Fuzzy search every line in every file</h3>
<p>Now we’re getting into some <em>real</em> amnesiac territory &gt;:3c.</p>
<h3 id="rg---fzf--cut--d---f-1-fuzzy-search-every-line-in-every-file-and-return-the-file-location"><code>rg . | fzf | cut -d &#34;:&#34; -f 1</code>: Fuzzy search every line, in every file, and return the file location</h3>
<h3 id="vim-rg---fzf--cut--d---f-1-fuzzy-search-every-line-in-every-file-and-open-that-file"><code>vim $(rg . | fzf | cut -d &#34;:&#34; -f 1)</code>: Fuzzy search every line, in every file, and open that file</h3>

        </div></div>
  </body>
</html>
