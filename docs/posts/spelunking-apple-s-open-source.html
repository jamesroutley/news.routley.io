<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://bitsplitting.org/2023/03/17/spelunking-apples-open-source/">Original</a>
    <h1>Spelunking Apple’s Open Source</h1>
    
    <div id="readability-page-1" class="page"><article id="post-1403"><div><p>Since the earliest days of Mac OS X, Apple has complied with the licenses for the dozens of open source components it includes in the OS by posting (sometimes a little belatedly) updated versions of the source code to its <a href="https://opensource.apple.com">Open Source at Apple</a> web page.</p><p>This resource is useful primarily to developers, but may also interest curious technophiles who want to take a peek “behind the curtain” to see how much of the magic just beneath our fingertips is made.</p><p>If you visit the page today, you’ll see a new emphasis on Apple’s high-level projects, such as <a href="https://www.swift.org">Swift</a> and <a href="https://webkit.org">WebKit</a>. At first glance you might wonder if the extensive list of all the open source projects has been removed from the site.</p><p>There’s no need to worry: the whole list, indexed by the pertinent platform and OS release to which they belong, is still available on a separate <a href="https://opensource.apple.com/releases/">Releases</a> page. Even better, each of these releases now has a corresponding GitHub repository, hosted in a <a href="https://github.com/apple-oss-distributions">dedicated organization</a> reserved exclusively for open source distributions.</p><p>As great as the old list of distributions by release is, it can be tedious to pinpoint exactly where a particular component’s source code might live. Sometimes it’s easy: for example, the source code for the version of the <a href="https://www.vim.org">Vim</a> editor that shipped with macOS 13 is conveniently located in a distribution called <em>vim-136</em>. But other tools can be harder to find. If you were curious about the “banner” command, which was historically used to generate ASCII text suitable for printing huge messages at dot matrix printers (!), and which is remarkably still available as a built-in command on every Mac, you’d have to know to go looking for it in the <em>text_cmds-138</em> release.</p><p>Apple’s decision to host these releases on GitHub, under a distinct organization, solves the problem. If you want to find the source code to an arcane tool like “banner”, just type it into a GitHub search of the organization. If there are too many false hits, as is the case for a common word like banner, try searching on something unique like a term from the command’s <a href="https://en.wikipedia.org/wiki/Man_page">man page</a>. The banner tool is credited as being authored by Mark Horton, and a search for “org:apple-oss-distributions Mark Horton” brings up more hits than I would have guessed (he also contributed to vim and vi, coincidentally), but a reference to the banner man page is the second search result.</p><p>I was inspired to write this blog post by a situation that came up in a programming Slack, where one person asked for “an API that could list the open ports and their owning processes.” Another replied that the command-line tool “lsof” is up to the task, only the person wasn’t looking for a command-line tool. Using the knowledge of Apple’s open source distributions, you could go look for, and find, the <a href="https://github.com/apple-oss-distributions/lsof/blob/a26b67d2f0c6600d269f0b33233a2cb4b877b279/lsof/dialects/darwin/libproc/dproc.c#L720">pertinent source code</a>, and determine <em>which API</em> it was using.</p><p>When questions like these come up, many times the answer comes from a wise old sage who happens to know exactly what you’re looking for. Other times, Apple’s increasingly well-indexed open source distributions might be just the ticket.</p></div></article></div>
  </body>
</html>
