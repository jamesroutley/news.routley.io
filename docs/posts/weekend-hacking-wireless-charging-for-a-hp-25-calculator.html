<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://partsbox.com/blog/wireless-charging-for-a-hp-25-calculator-05-2021.html">Original</a>
    <h1>Weekend hacking: wireless charging for a HP-25 calculator</h1>
    
    <div id="readability-page-1" class="page"><div><p>Or, bringing a 45-year old calculator into the 21st century.</p><p>The <a href="https://www.hpmuseum.org/hp25.htm">HP-25</a> was a revolutionary calculator for its time. Introduced in 1975, it was the first affordable programmable engineering calculator. As years passed, more advanced models were developed with more functionality. But the 25 struck a particularly good balance between features, size, and ease of use.</p><p>Today we live in a very different world: we all have multiple powerful computing devices. No engineer would even consider doing graphing on a calculator today: we have computers that can do this faster and better. Similarly for algebraic manipulations or symbolic computing. What we still need, however, is a good engineering calculator — an easily accessible device that can perform simple calculations quickly and that has just the right number of functions.</p><p>This is why the HP-25 is becoming attractive again. If you work with electronics or mechanical design, you often need to work with scientific or engineering notation and perform calculations for which the simple calculator apps on your phone are too limited. The simple keystroke-based programmability means that you can quickly automate tasks: for example, I often have the parallel resistance formula entered as a program, accessible using a single keystroke. Enter two resistances, press R/S and get the result. The HP-25 was designed by engineers, for engineers, and you feel it when you use it. Importantly, it fits well into your palm and can be used with a single hand, which isn&#39;t true for many otherwise excellent later HP calculators (like the Voyager series: HP-11C and HP-15C).</p><p>The HP-25 I have was bought by my Dad, around the time I was born. I always enjoyed using it, but this whole series of calculators (dubbed &#34;Woodstock&#34;) was limited by battery pack design. The original battery pack contained two sealed NiCd cells, which obviously failed many years ago. Most people replaced their NiCd cells with new ones, then with NiMh cells, or even alkaline AA batteries. This was always problematic: newer batteries were slightly larger and never fit well. Also, the power consumption of a calculator with an LED display was significant, so frequent battery replacements were needed.</p><p>The HP-25 was shipped with a &#34;charger&#34; (really just a transformer), but the charging circuit was terrible: the charger without load supplied 10V AC: a higher voltage than the calculator could handle, with the assumption that connected NiCd battery cells would clamp the voltage. The entire charging circuit consisted of a diode and a resistor! If your cells were not making proper contact, or if you connected a charger without the battery pack inserted, your calculator would be toast.</p><p>I decided I should do something to make my HP-25 usable every day. So, I set out to design a rechargeable battery pack, which replaces the original one, but uses a modern Li-Po battery, and has Qi/WPC wireless charging with a USB fallback.</p><p><img src="https://partsbox.com/images/blog/hp-25-battery-pack-2.jpg" alt=""/> <img src="https://partsbox.com/images/blog/hp-25-battery-pack-8.png" alt=""/></p><p>I now have the perfect engineering calculator, that is 45 years old and yet sits happily on a Qi power pad and recharges. If I don&#39;t have a pad available, I can remove the battery pack and use the micro-USB connector in the side to charge it. But as it turned out, charging isn&#39;t actually needed that often — a 900mAh LiPo provides enough energy for many weeks with my usage.</p><p><img src="https://partsbox.com/images/blog/hp-25-battery-pack-1.jpg" alt=""/></p><p>The design assumptions were:</p><ul><li>Should replace the original battery pack</li><li>No modifications to the calculator itself</li><li>WPC/Qi wireless charging</li><li>Micro-USB connector for wired charging</li><li>Li-Po battery lasting for at least multiple days of normal use</li><li>Low-battery indicator</li></ul><p>I designed the battery pack enclosure in Fusion 360, taking measurements of the original battery pack. That turned out not to be simple: the original pack was designed for injection molding, and draft angles complicated the geometry. Since I don&#39;t plan to mass-produce those, I didn&#39;t bother with designing for injection molding and assumed 3D printing using SLS (Selective Laser Sintering). This is why my battery pack opens differently from the original one, providing better access to electronics and battery, but sacrificing the ability to be injection-molded.</p><p>No fasteners were used: a simple spring clip is enough to hold the cover in place, and the pack is used in the calculator most of the time anyway, so there is no risk of the cover opening.</p><p><img src="https://partsbox.com/images/blog/hp-25-battery-pack-3.jpg" alt=""/></p><p>The calculator was normally powered by two NiCd cells, which have a voltage of 1.2V each. I decided to produce 2.5V instead of 2.4V, assuming that the additional 0.1V wouldn&#39;t hurt anything (after all, many people have been using their calculators with alkaline cells, which have a voltage of 1.25V), and the increased voltage would make the boost converter in the calculator slightly more efficient.</p><p>I decided to use one of the modern low-power buck controllers from Texas Instruments (TPS62740). Its low 360nA operating quiescent current meant that I wouldn&#39;t have to worry about having an on/off switch. There are controllers with lower quiescent current (even down to 60nA!), but I wanted to have programmable voltage output — read on to learn why.</p><p>For WPC/Qi, I went with bq51050B (Texas Instruments) and a coil from Wuerth Elektronik. This proved to be much more challenging than I thought: designing devices with wireless charging is difficult, requires multiple prototypes and measuring equipment that I do not have. In the end, I went with design decisions which might not be optimal, but in this case (with low power requirements) provide acceptable performance. In other words, I winged it. This was made somewhat more difficult by the fact that the bq51050B documentation is disappointing and not really up to TI&#39;s standards.</p><p><img src="https://partsbox.com/images/blog/hp-25-battery-pack-4.jpg" alt=""/></p><p>The board also has a Micro-USB port for wired charging, a charging controller IC (the popular MCP73832), a MOSFET pair acting as a switch for USB power, a bunch of ESD protection for exposed terminals, and a discrete thermistor to monitor battery temperature, since many cheap LiPos come without a thermistor or with one that doesn&#39;t match what the charging IC expects.</p><p>Designing a low-battery indicator was an interesting challenge. Assuming that voltage is a proxy for battery charge (which isn&#39;t entirely true for LiPo cells), how do you measure the voltage without drawing power constantly and discharging the battery in the process? Bear in mind that our power budget for this is in nano-amps: the quiescent power draw of the entire device should be below 1μA.</p><p>Since the coulomb-counting IC devices are way too expensive and usually come in unfriendly BGA packages, and also because I didn&#39;t want to over-complicate the design, I had to find something simpler.</p><p>A microcontroller-based solution could be designed, but for the first time in many years I wanted to design a device <em>without</em> a microcontroller and software.</p><p>Also, how do you display the result? You can&#39;t light up an LED, as that would quickly eat the remaining energy, possibly with no one even looking at the indicator. A &#34;battery check&#34; button? Possibly, but these complicate mechanical design significantly.</p><p>It took a while, but I did come up with a solution.</p><p>I realized that the calculator actually <em>does</em> have a built-in low-battery indicator. When battery voltage falls below a threshold (which I measured to be 2.1V), the LED screen lights up all the decimal dots, except the one that should normally be active. With decimal dots &#34;inverted&#34; this way, you can still use the calculator, but you clearly see that batteries need replacing.</p><p>So, I used a voltage (reset) supervisor with a 250nA supply current to monitor the battery voltage. If it falls below 3V, the output goes low. That output is connected to one of the voltage selector pins on the TPS62740 buck regulator (this is why I needed a programmable voltage output part) and causes it to start producing 2.1V instead of 2.5V. In other words, battery low, decimal dot LEDs light up, mission accomplished!</p><p><img src="https://partsbox.com/images/blog/supervisor-to-vsel.png" alt=""/></p><p>This turned out to work quite well in practice, and the 2.1V threshold worked for all the HP-25 units that I had. The only limitation is that with most LiPo batteries, their protection circuitry will cut the output off just below 3V, so you don&#39;t have much time after your dots light up.</p><p>My tests showed that the 900mAh LiPo is enough for about 10 hours of continuous use, before the low-battery indicator dots light up, and for 10-20 minutes afterwards. Good enough for me!</p><p>All in all, I&#39;m very happy with the result of this weekend hacking project: my HP-25 calculators (yes, I have more than one) are useful again and I can use them every day without worrying about batteries. I just place them on charging pads from time to time. The battery life is so good, that doing this once a month or so is enough.</p><p><img src="https://partsbox.com/images/blog/hp-25-battery-pack-5.jpg" alt=""/></p><p>If you think about it, it&#39;s quite amazing that a 45-year old calculator got a new life thanks to 21st century technology!</p><p><img src="https://partsbox.com/images/blog/hp-25-battery-pack-7.jpg" alt=""/></p><p>Jan Rychter (PartsBox founder)</p><p>(If you enjoyed reading this and you work with electronics, please check out PartsBox — it&#39;s an indispensable tool for companies, and it&#39;s free for Hobbyists/Makers)</p></div></div>
  </body>
</html>
