<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://dropofahat.zone/">Original</a>
    <h1>Show HN: I am using AI to drop hats outside my window onto New Yorkers</h1>
    
    <div id="readability-page-1" class="page"><div>
        <div>
            <div>
                
                <p><i>Book the midtown DropofaHat Zone now!</i></p>
                <p><img src="https://dropofahat.zone/static/dropofahat/hat/ai3.2089d32ec65c.JPG" alt=""/>
                </p>
                <p>
                    I am a simple midwesterner living in the middle of New York City. I put my shoes on one at a time, I apologize when I bump into people on the street, and I use <a href="https://universe.roboflow.com/test-y7opj/drop-of-a-a-hat">AI inference (https://universe.roboflow.com/test-y7opj/drop-of-a-a-ha)</a> to drop hats on heads when they stand outside my apartment. Like anybody else.
                </p>
                <p><img src="https://dropofahat.zone/static/dropofahat/hat/final.023e60a8d15c.JPG" alt=""/>
                </p>
                <p>I use it myself.</p>
                <p>
                    I have extremely high foot traffic outside my window. I see a sea of uncovered heads in the sun. I believe <a href="https://dropofahat.zone">DropofaHat.zone</a> will become the first of many window based stores. Here a busy New Yorker can book a 5 minute time slot, pay for a hat, stand in a spot under my window for 3 seconds, have a hat put on their head, and get on with their extremely important, extemely busy day all within a single <a href="https://en.wikipedia.org/wiki/New_York_Minute">New York minute</a>.
                </p>
                <h3>How to use AI to do Dropshipping:</h3>
                <p><i>My dream is for all the city windows to be constantly dropping things on us all the time. You will need a Raspberry Pi, an Adafruit stepper for the mechanism, some yarn, Roboflow for the AI, and a very low weight but very cool product (like Propeller Hats)</i></p>
                <h3 id="window">Just Opening the Window</h3>
                <p>
                    This was a challenge. My window only opens about 4 inches. If I couldn&#39;t figure this out, my entire business had no chance. There must have been some kind of key or screw I had to take off to let it open, but I saw no sign of anything other than some very tiny slots on the bottom.
                </p>
                <p><img src="https://dropofahat.zone/static/dropofahat/hat/window.d1a328d997c6.JPG" alt=""/>
                </p>
                <p>
                    If I could just look up what kind of window I had, I figured I could find out what kind of lock goes with it. This turned out to be pretty confusing. I think I have a double pane awning? Maybe? Every type of window can look like many other types.
                </p>
                <p><img src="https://dropofahat.zone/static/dropofahat/hat/window2.8a0dcfd284cf.png" alt=""/>
                </p>
                <p>
                    I finally resorted to just googling &#34;window keys&#34; and going through all the images of ones that looked like they could somehow fit my window. Most looked like they needed a lock until I came across this weird shape.
                </p>
                <p><img src="https://dropofahat.zone/static/dropofahat/hat/window3.f3bb609205d0.png" alt=""/>
                </p>
                <p>I was fully expecting to buy a dozen other keys but this one actually worked!</p>
                <h3 id="hat">The Hat</h3>
                <p>
                    Next was deciding what hats I am going to drop and sell. My window is pretty high. It needed to be a hat that wouldn&#39;t hurt someone or fly into traffic.
                </p>
                <p><img src="https://dropofahat.zone/static/dropofahat/hat/hat2.4fc278102b4c.JPG" alt=""/>
                </p>
                <p><img src="https://dropofahat.zone/static/dropofahat/hat/hat3.11eebc908f82.JPG" alt=""/>
                </p>
                <p>
                    I decided I needed something to signify the future. Something that would look beautiful as it gracefully fell out of a window onto your head.
                </p>
                <p><img src="https://dropofahat.zone/static/dropofahat/hat/hat.63e025d9a9b1.JPG" alt=""/>
                </p>
                <p>
                    Propeller Hats! And this one has a stylish Eagle to represent the flying it is about to do.
                </p>
                <h3 id="mechanism">The Dropping Mechanism</h3>
                <p>
                    This was the simplest thing to get working. I had a Raspberry Pi and an  stepper motor lying around so I decided to put them to work.
                </p>
                <p><img src="https://dropofahat.zone/static/dropofahat/hat/drop.d24c2e99f284.JPG" alt=""/>
                </p>
                <p><img src="https://dropofahat.zone/static/dropofahat/hat/drop2.a9598cc0e964.gif" alt=""/>
                </p>
                <p>
                    After imagining some extra sharp blades on tiny motor somehow cutting yarn, I realized I could just wrap the yarn around the stepper motor and have it move slightly. I had a giant camera gimbal to test on and was fully prepared to stick it out the window when I realized the string could just hang over the window with this method.
                </p>
                <p><img src="https://dropofahat.zone/static/dropofahat/hat/drop3.55217f88855c.jpeg" alt=""/>
                </p>
                <p>
                    I literally copied this out of the Adafruit tutorial for the stepper motor. This is a single python file on the Raspberry Pi that the computer will run when the AI determines someone is standing in the right spot and ready to receive their hat.
                </p>
                <div>
                    <p>On the Raspberry Pi as &#34;dropHat.py&#34;</p>
                    </div>
                <h3 id="ai">The AI</h3>
                <p>
                    I figured the AI would be the hardest part but it was surprisingly quick. I put a webcam out over the window and wanted to have inference run live on the video. I wanted the AI to literally show me what it was seeing. This would allow me to potentially live stream the feed later. And also it just seemed really cool to watch. This is what the full webcam stream looks like.
                </p>
                <p><img src="https://dropofahat.zone/static/dropofahat/hat/ai4.ec5c1fd32041.JPG" alt=""/>
                </p>
                <p><img src="https://dropofahat.zone/static/dropofahat/hat/AI2.543a0d3e2667.JPG" alt=""/>
                </p>
                <p>
                    I selected object detection for the initial model and then recorded a couple minutes of pedestrians walking under my window with their hatless heads. Then it was time to annotate images. I only wanted the model to tell me when someone was on the exact sidewalk square directly under my window. I put the class and prompt &#34;person&#34; and a lot of annotating was done for me automatically. The rest I dragged a box around the person if they were on the right part of the sidewalk or marked as null if not.
                </p>
                
                <p>
                    Obviously, your window view will look different from mine so you will have to record a few minutes and upload your own.
                </p>
                <p><img src="https://dropofahat.zone/static/dropofahat/hat/ai5.b79e2a160088.png" alt=""/>
                </p>
                <p>
                    The model seemed to work well with only 133 images annotated. I made sure there was a mix of positive and null ones. Since I only cared about a really small section the sidewalk, I added a pre-processor step of cropping the image.
                </p>
                <p><img src="https://dropofahat.zone/static/dropofahat/hat/ai6.fc23c8944162.png" alt=""/>
                </p>
                <p>
                    While this worked, I realized I would bump the webcam every now and then so I wanted a more generalized model. I removed the cropping and it worked oddly well. It only &#34;detected&#34; the image when it was in the spot I wanted. Even though I only tried it with one person in the annotating, it already worked on whoever walked by.
                </p>
                
                
                <div><p>
                    Now we have to run a python program on the computer running your webcam. I want this code to do 2 things:
                    </p><ol>
                        <li>Confirm someone is standing in the correct spot for 3 seconds straight</li>
                        <li>Call the Raspberry Pi after the 3 seconds have passed.</li>
                    </ol>
                </div>
                <p>
                    On your computer with the webcam, pip install the inference library and the SSH libraries I used
                </p>
                
                <p>
                    This is the entire python file. You will have to put in your own API key. I want mine to stay in the free tier.
                </p>
                <p>
                    It works by calling the model every second and if it confirms someone is in that spot 3 seconds in a row, it will SSH into my Raspberry Pi and run the function dropHat.py.
                </p>
                
                <h3 id="grand">The Grand Vision</h3>
                <p>
                    There is a <b>bigger dream</b> here. Picture a world where you can walk around New York City and everything you need is falling out of windows onto you. At a moments notice, at the drop of a hat. That&#39;s a world I want to live in. That&#39;s why I&#39;m teaching you how to do yourself. Remember this as the first place you heard of &#34;Window Shopping.&#34;
                </p>
                <p><img src="https://dropofahat.zone/static/dropofahat/hat/final.af9a737c53c5.gif" alt=""/>
                </p>
            </div>
        </div>
    </div></div>
  </body>
</html>
