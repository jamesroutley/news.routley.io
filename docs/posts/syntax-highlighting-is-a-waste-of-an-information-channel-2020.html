<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://buttondown.com/hillelwayne/archive/syntax-highlighting-is-a-waste-of-an-information/">Original</a>
    <h1>Syntax highlighting is a waste of an information channel (2020)</h1>
    
    <div id="readability-page-1" class="page"><div>
            
            <date>
                
                
                July 20, 2020
                
                
            </date>
            

            

            

            

            
            
            <h2>No newsletter next week</h2>
<p>Running the TLA+ workshop. No way I&#39;m gonna have any brainpower after that.</p>
<h2>Syntax highlighting is a waste of an information channel</h2>
<p>No, not a waste <em>in general</em>. Syntax highlighting is quite useful. I&#39;m saying it&#39;s a waste <em>of an information channel</em>. Here&#39;s a quick demonstration of what I mean. Here&#39;s 399 squares and one circle. Where&#39;s the circle?</p>
<p><img alt="" src="https://buttondown-attachments.s3.us-west-2.amazonaws.com/images/7757f208-c0e1-491e-98b5-38a45622b114.png"/></p>
<p>Round two. Where&#39;s the circle?</p>
<p><img alt="" src="https://buttondown-attachments.s3.us-west-2.amazonaws.com/images/c8939cab-166a-45db-90e8-19f32ae0f917.png"/> </p>
<p>Color carries a <em>huge</em> amount of information. Color draws our attention. Color distinguishes things. And we just use it to distinguish syntax.</p>
<p>Nothing wrong with distinguishing syntax. It&#39;s the &#34;just&#34; that bothers me. Highlighting syntax is not always the most important thing to us. The information we want from code depends on what we&#39;re trying to do. I&#39;m interesting in different things if I&#39;m writing greenfield code vs optimizing code vs debugging code vs doing a code review. I should be able to swap different highlighting rules in and out depending on what I need. I should be able to combine different rules into task-level overlays that I can toggle on and off.</p>
<p>I&#39;ve listed some examples of what we could do with this. If this is something that already exists I included a link. Otherwise I included a mockup. Some of the examples have implementation issues beyond what I discussed; they&#39;re just demonstrations of what highlighting <em>could</em> be. All examples are Pythonish unless otherwise noted.</p>

<h3>Some Use Cases</h3>
<h4>Rainbow parenthesis</h4>
<p>This is a pretty common one. We can use different colors to mark how nested a set of parenthesis are. From <a href="https://github.com/luochen1990/rainbow" target="_blank">here</a>.</p>
<p><img alt="" src="https://buttondown-attachments.s3.us-west-2.amazonaws.com/images/67904707-1815-468b-9814-ffaf2ae87b16.png"/> </p>
<h4>Context Highlighting</h4>
<p>Highlight different levels of nesting. From <a href="https://www.crockford.com/contextcoloring.html" target="_blank">here</a>.</p>
<p><img alt="" src="https://buttondown-attachments.s3.us-west-2.amazonaws.com/images/0a9964b7-caba-4e0d-a91c-ef0859d93081.png"/> </p>
<h4>Import highlighting</h4>
<p>Highlight identifiers imported from a different file.</p>
<p><img alt="" src="https://buttondown-attachments.s3.us-west-2.amazonaws.com/images/33640b17-f69d-4b29-8682-e52ca4a8e673.png"/> 
Variations:</p>
<ul>
<li>Highlight imported functions and classes differently</li>
<li>Highlight qualified imports</li>
<li>Highlight imports from particular trees</li>
</ul>
<h4>Argument Highlighting</h4>
<p>Arguments passed into the function are highlighted differently from local variables or global identifiers.</p>
<p><img alt="" src="https://buttondown-attachments.s3.us-west-2.amazonaws.com/images/beaac37c-6898-455e-a38d-bcb9cfc57703.png"/></p>
<ul>
<li>Carry it through to aliases (if we assign the argument to another value, highlight that too)</li>
<li>Highlight local variables only</li>
<li>Highlight values that <em>will</em> be assigned to something</li>
<li>Highlight variables used in loops</li>
</ul>
<h4>Type Highlighting</h4>
<p>Highlight all list variables and integer variables with different colors.</p>
<p><img alt="" src="https://buttondown-attachments.s3.us-west-2.amazonaws.com/images/b32bc94c-f95b-4daa-8d93-e662ecb10564.png"/> </p>
<p>Variations:</p>
<ul>
<li>Highlight all iterables</li>
<li>Highlight all functions returning option types</li>
<li>Highlight all variables that could be one of two types</li>
<li>Highlight all polymorphic types parameterized to integers</li>
</ul>
<h4>Exception Highlighting</h4>
<p>Highlight functions that raise errors not caught in their body. </p>
<p><img alt="" src="https://buttondown-attachments.s3.us-west-2.amazonaws.com/images/fc07fd5e-48d3-4fbe-8d3a-9e0b20fb8f3d.png"/> </p>
<p>Variations:</p>
<ul>
<li>Highlight all functions with try blocks</li>
<li>Highlight functions that raise user-defined exceptions</li>
<li>Highlight functions that raise a specific exception</li>
<li>Highlight functions that <em>catch</em> a specific exception</li>
</ul>
<h4>Metadata Highlighting</h4>
<p>Highlight functions that were directly called in the bodies of tests that failed in the last test run.</p>
<p><img alt="" src="https://buttondown-attachments.s3.us-west-2.amazonaws.com/images/f428e128-7cb2-44d0-8dc0-90f2bb33eee9.png"/> </p>
<ul>
<li>Highlight functions without precondition decorators</li>
<li>Highlight functions that are part of a certain stacktrace</li>
<li>Highlight functions which are defined in our branch but not the master branch</li>
</ul>
<h4>Random other ideas I didn&#39;t mock up</h4>
<ul>
<li>All functions that transitively call functions that make an http call</li>
<li>All variable identifiers we assign to twice</li>
<li>All classes with more than 10 user-defined methods</li>
<li>All functions more than 100 lines long</li>
<li>All functions without docstrings</li>
<li>All lines last edited by a particular member of the team</li>
<li>All identifiers marked &#34;deprecated&#34; in a certain design document</li>
<li>All functions with a <code># TODO</code> comment inside them</li>
</ul>
<h3>Issues</h3>
<p>Why aren&#39;t things this way? There&#39;s both essential and coincidental challenges that make fully leveraging color a lot harder than just having syntax highlighting.</p>
<p>First is actually implementing rules. Some of these require access to the code&#39;s AST, some require broader knowledge of the project, some require runtime information. Some of the ideas are even infeasible; accurately tracking aliasing is an open problem for most languages. Syntax highlighting, by contrast, is usually a matter of regexes and hierarchical state machines. That&#39;s how <a href="https://pygments.org/" target="_blank">pygments</a> does it. Semantic highlighting would have to be made from scratch for each language.</p>
<p>Second is highlighting conflicts. What if something needs to be colored two things for two different reasons? In syntax highlighting this is less of a problem because you have an ordered list of matchers. But with semantic highlighting we might have dynamic priorities, where rule A is more important to us now while rule B is more important to us later. Things get even more complicated if we have multiple distinct overlays, which themselves can have priority conflicts. Semantic highlighting would need a much more complex design and implementation than simple syntax highlighting does, and adding overlays makes it even more complicated.</p>
<p>Finally, existing editors just aren&#39;t well set up to handle this. Vim&#39;s syntax highlighting is a mess of regular expressions and special cases. VSCode and (I believe) Atom use <a href="https://macromates.com/manual/en/language_grammars" target="_blank">TextMate grammars</a>, which assume a single canonical tokenization per file. VSCode recently added <a href="https://code.visualstudio.com/api/language-extensions/semantic-highlight-guide" target="_blank">semantic highlighting</a> but it seems more oriented to augment the existing syntax highlighting, not radically rethink it. I have no idea what Emacs does.</p>
<p>So I think this is something we&#39;ll <em>eventually</em> have, because the potential advantages are too great to ignore forever. But it will take us a long time to get there. Maybe we&#39;ll see it first with toy languages where the AST is simple enough and the expressiveness is low enough to make semantic highlighting easy.</p>
<h3>Update for the influx of new readers</h3>
<p>This was a newsletter post, you can subscribe <a href="https://buttondown.email/hillelwayne/" target="_blank">here</a></p>
            
            

            
            
            <p><em>If you&#39;re reading this on the web, you can subscribe <a href="https://buttondown.com/hillelwayne" target="_blank">here</a>. Updates are once a week. My main website is <a href="https://www.hillelwayne.com" target="_blank">here</a>.</em></p>
<p><em>My new book, </em>Logic for Programmers<em>, is now in early access! Get it <a href="https://leanpub.com/logic/" target="_blank">here</a>.</em></p>
            
            

            



        </div></div>
  </body>
</html>
