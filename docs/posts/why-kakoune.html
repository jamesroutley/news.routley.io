<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://andreyor.st/posts/2023-09-20-why-kakoune/">Original</a>
    <h1>Why Kakoune</h1>
    
    <div id="readability-page-1" class="page"><article>
    <p>Recently I’ve stumbled upon a video about Kakoune, a code editor: <a href="https://www.youtube.com/watch?v=5WLlLxU2EZE" target="_blank">Idiot user tries to use Kakoune (for notes? Also Helix?)</a>.
Funnily enough, I was <a href="https://www.youtube.com/watch?v=5WLlLxU2EZE&amp;t=1004s" target="_blank">mentioned</a> in this video, which was a surprise, and made me laugh for quite a while:</p>
<blockquote>
<p>Let’s go back to the official plugins page.
This guy has made a bunch of plugins.
<strong>Who is he?</strong>
<em>How is he able to make such good use of Kakoune?</em>
<strong>Oh, he’s an Emacs user!</strong>
<strong>Of course!</strong></p>
</blockquote>
<p>Yeah, I am.</p>
<p>Even though the video <strong>is</strong> about Kakoune, the author’s main focus is note-taking and the oddities that come with this process when using a <em>code editor</em> to edit <em>text</em>.
Kakoune advertises itself as a code editor for the most part, and I have to agree.
As far as I know, Maxime Coste (<a href="https://github.com/mawww" target="_blank">@mawww</a>), the creator of Kakoune, made it because of the desire for a better programming experience.
As a result, a small and contained code editor was made.
And I can appreciate a desire of the system one can fully grasp and understand.</p>
<p>Kakoune is relatively small, compared to Emacs and Vim that is.
It doesn’t feature a scripting language, instead relying on shelling out if you need any programmable features.
It’s a clever trick, and the editor exposes its internal state as a set of shell variables, so you still can do interactive things based on your workflow.
And I did a lot of this back in the day when I used Kakoune.</p>
<p>I have mentioned Kakoune in this blog previously, but it was rather sparse.
The reason for that is stated in the video pretty accurately - I use Emacs and not Kakoune, so there’s little to no reason for me to write about it besides occasional praise or comparisons.
I mention it on my about page, and in various text-editor-related posts, but that’s it.
I don’t participate in the Kakoune community anymore, and no longer actively maintain my packages, as I no longer use Kakoune.</p>
<p>But I still need to address <a href="https://youtu.be/5WLlLxU2EZE?t=1017" target="_blank">this</a> point of the video - I wasn’t an Emacs user when I started with Kakoune.
Before Kakoune I was a Vim user!
And transition from Vim to Kakoune was caused by several factors, one of which is again stated in the video:</p>
<blockquote>
<p>…and people have written so many damn Vim plugins over the years that if you have a need it’s already been addressed like three or four different ways.
So with Vim you could just piece together your ideal text editor like LEGO bricks…</p>
</blockquote>
<p>And that’s exactly my problem with Vim - too many ways to do the same thing.
At the time, I was working with SoC in C and started using the <a href="https://github.com/dense-analysis/ale" target="_blank">Ale</a> plugin for asynchronous linting of the project, as the synchronous linting was quite slow.
This was before LSP inception - just look at <a href="https://github.com/dense-analysis/ale/blob/master/supported-tools.md" target="_blank">how many tools Ale supports</a>.
As far as I remember LSP was added to Ale much later, when competing plugins showed up.</p>
<p>Competing plugins.</p>
<p>There’s nothing bad with competition on its own, and in Emacs, this is also present, with many plugins, but in Vim’s case, I feel that people created most of the plugins purely because of the NIH<sup id="fnref:1"><a href="#fn:1" role="doc-noteref">1</a></sup> syndrome.
I lost count of how many plugins provided autocomplete interfaces, there were tons of list-narrowing frameworks, plugin managers, and snippet managers, and everything was poorly integrated with each other.
I remember that some autocomplete plugins did not integrate well or at all with snippets, some synchronous completion providers were not supported by asynchronous completion frameworks, and so on.
Again, this was before LSP came to the scene and basically became a standard for these features.
So perhaps the situation is a bit better today, but I still have doubts.
NeoVim people are going crazy over Lua API, writing their configs in Fennel, and making new Lua-based plugins that may or may not be compatible with the rest of the ecosystem.</p>
<p>Fact is, you <em>can</em> piece your dream text editor like <em>LEGO</em> bricks, just beware that some of these bricks are actually <a href="https://en.wikipedia.org/wiki/Lego_Duplo" target="_blank">Duplo</a> blocks, some are <a href="https://en.wikipedia.org/wiki/Cobi_%28building_blocks%29" target="_blank">COBI</a> bricks, lots and lots are probably <a href="https://brickscompare.com/brands/8-lele" target="_blank">LELE</a>, and some are even freakin’ <em><a href="https://andreyor.st/2023-09-20-why-kakoune/oleg.jpg">OLEG</a></em>.
Well, at least that was the situation when I used Vim, I gave up on updating my config around 2018 and made the switch to Kakoune.
By that time I already made three plugins for Vim because I was unsatisfied with existing ones, but they were crappy too.
Integrating these plugins into different other plugins was a huge pain.
So I <a href="https://github.com/andreyorst/dotfiles/commit/d91e8ca4ccb59c89c2043d5d2c4eb8af3fbe498d" target="_blank">made the switch</a>.
You can trace the history from that point if you’re interested in my Kakoune journey (why would you be though).</p>
<p>Obviously, I missed a lot of features from Vim, and Kakoune actually has an entry on their wiki on how to migrate from Vim.
Unfortunately, though, the suggestions were either too hardcore-minimalist or uncooperative.
For example, Vim’s <code>smarttab</code> feature didn’t exist, and <code>expandtab</code> was <a href="https://github.com/mawww/kakoune/wiki/Indentation-and-Tabulation/e6756dc1a8af07add53145a9251eeb2ba0e0c5a5" target="_blank">suggested</a> to be done via hooks.
Not that it was wrong, but it was suggested when people asked about a very specific feature of Vim, and these did not provide the same feature as in Vim.
So I started writing plugins.</p>
<p>However, Kakoune didn’t have conventional plugins at all at that time.
Well, there was a section with plugins on the official page, but there was no real ecosystem.
There was nothing such as Vimplug if you will.</p>
<p>Installing plugins meant you had to manually copy files around, or load them pathogen-style, but the process wasn’t convenient or easy to automate in my opinion.
Updating plugins installed in this way was problematic too.
This motivated me to make <a href="https://github.com/andreyorst/plug.kak" target="_blank">plug.kak</a>.
And then I started experimenting more and more with other interesting plugins.</p>
<p>But, around the same time I switched to Kakoune, I briefly tried Emacs.
In reality, I tried Emacs like 4 times at that point, the earliest one dates back to around 2010.
All four times I did not succeed, but something gravitated me to it for some reason.
This last one actually was a reason why I made some plugins like <a href="https://github.com/andreyorst/langmap.kak" target="_blank">langmap.kak</a> or <a href="https://github.com/andreyorst/kaktree" target="_blank">kaktree</a>, which resemble what I saw in Emacs at that point.
Many plugins were inspired by Vim, like <a href="https://github.com/andreyorst/smarttab.kak" target="_blank">smarttab.kak</a>, <a href="https://github.com/andreyorst/powerline.kak" target="_blank">powerline.kak</a>, <a href="https://github.com/andreyorst/fzf.kak" target="_blank">fzf.kak</a>, <a href="https://github.com/andreyorst/tagbar.kak" target="_blank">tagbar.kak</a>, equivalents to which I daily used in Vim before.
And at that time, Kakoune really did everything I needed and was a very capable code editor.</p>
<p>But I still wanted something more.
So why I made the switch to Emacs - but for a bit different reasons.</p>
<p>First of all, I started enjoying writing more prose instead of just writing code.
And if you’ve watched the video I linked above, the author similarly wants a text editor, not a code editor.
There’s <a href="https://www.youtube.com/watch?v=XRpHIa-2XCE" target="_blank">another video</a> on their channel about note-taking, featuring a lot of programs made specifically for this task, and it features a text editor section at the end in which the author talks about Emacs and Vim, briefly touching Kakoune and Helix.
What they’re saying about Emacs is also very similar to what I’ve experienced, although I didn’t use an Emacs distribution, I started with vanilla<sup id="fnref:2"><a href="#fn:2" role="doc-noteref">2</a></sup>.</p>
<p><strong>Org Mode.</strong></p>
<p>I don’t know how to explain this to a non-Emacs, non-Org person, but every time someone asks the “Why Emacs?” question, Org Mode is somewhere at the top of the answers.
And I never understood that, until I tried for myself.
And boy are they right.
But before I understood that, there was a <a href="https://github.com/andreyorst/dotfiles/commit/442941e8a230ccbb075a7bdfcf6075367c46cd73" target="_blank">long</a> period of <a href="https://github.com/andreyorst/dotfiles/commit/9088b4fd041005c6143de8de012541f0bc6f913f" target="_blank">adoption</a>.
I still used Kakoune, but more and more I was shifted towards Emacs - it slowly consumed me.</p>
<p>A big part of that was that I started writing in Lisps.
Emacs is <strong>the king</strong> when it comes to Lisp editing.
Plugins for various Schemes, that I used to do tasks from the SICP book were amazing, and Kakoune <code>:repl</code> command paled in comparison.
Though I can’t blame anyone here - Emacs is a lisp machine on its own, it’s bound to have great lisp editing experience.</p>
<p>Though lisp wasn’t my primary language back then, more like a novelty.
I used Rust and considered switching jobs from a C engineer to a Rust back-end developer.
Rust seemed both a perspective and a <em>safe</em> enough bet for the foreseeable future.
Who knew how the tables would turn?!</p>
<p>Kakoune actually was great as a Rust IDE of sorts.
The <a href="https://github.com/kak-lsp/kak-lsp" target="_blank">kak-lsp</a> plugin was on it, written in Rust it supported Rust well.
And it helped me at work with C too.
That was 2019, the year I started using Emacs for real.</p>
<p>That year, I made my first, kinda big post, in which I realized that I wanted to write more.
Ironically, it was a <a href="https://discuss.kakoune.com/t/i-have-been-using-emacs-at-work-for-whole-week/" target="_blank">post about Emacs on the Kakoune forum</a>.
It was even written partly in Emacs and partly in Kakoune - I was comparing editors at that time, much like the author of already mentioned videos.
But this day signified that I was ready to fully migrate to Emacs - my config was more or less ready for work at that point.
Emacs seemed better at writing, although I was missing cool Kakoune features, such as multiple selections, a lot.
I started writing this blog in 2020, and it was done in Emacs from the get-go.
Not so long after that, I moved to Emacs <a href="https://github.com/andreyorst/dotfiles/commit/0e31f525b069f097a99cd1876a009f03cd26299c" target="_blank">completely</a>.</p>
<p>I used Kakoune for 1.9835616438356165 years (first commit on Jul 24 2018, last commit on Jul 17 2020).</p>
<p>But this post actually is called “Why Kakoune” and not “Why I switched to Emacs”, so let’s address that!</p>

<p>What an awfully long preamble.
If you read that, you have my thanks.
If not - fair enough.</p>
<p>I think it’s kinda weird to read reasoning on why someone should use Kakoune from someone who’s not using Kakoune right now and hasn’t for another three years already.
But, as far as I can see, not much has changed in Kakoune since!
Which, actually, is great - I can actually just check out to a commit previous to the one I deleted my Kakoune config in the <code>dotfiles</code> repository, and run it.
A fresh clone of Kakoune’s latest stable release builds in just two minutes on my machine, and loads my old configuration without too many errors:</p>
<figure><img src="https://andreyor.st/2023-09-20-why-kakoune/kakoune.png"/>
</figure>

<p>At this point of the post I wanted to write about stability, but as it seems, the situation isn’t that great.</p>
<ul>
<li>Some plugins simply no longer exist.</li>
<li>Some defaults were changed in 2022, making keys behave differently (can be turned back via a remap)</li>
<li>Some changes were made to how Kakscript is interpreted.</li>
<li>Most of my plugins broke (but that’s on me).</li>
<li>There’s possibly more, but I’m out of the loop.</li>
</ul>
<p>What’s hasn’t changed is that <a href="https://discuss.kakoune.com/t/ive-lost-my-syntax-highlighting/" target="_blank">people</a> <a href="https://discuss.kakoune.com/t/autoload-directory-disables-doc-command/1656" target="_blank">still</a> <a href="https://github.com/mawww/kakoune/issues/4301" target="_blank">stumble</a> on the <code>autoload</code> directory after all these <a href="https://github.com/mawww/kakoune/issues/1" target="_blank">years</a>.
Because there’s no plugin manager in Kakoune, it relies on storing scripts you want to load automatically during startup in the <code>~/.config/kak/autoload</code> directory.
This, however, for some weird reason, disables loading a system-wide Kakoune <code>autoload</code> directory, and Kakoune simply stops loading all of its inbuilt features that are shipped as <code>.kak</code> files.
I also experienced this problem, and it was one of the main reasons for making <code>plug.kak</code>.
So, if anything above seems too weird, perhaps Kakoune is not for you.</p>
<p>But, given all that, Kakoune hasn’t changed that drastically over the three years I haven’t used it, and that’s a good thing.
Even now, I can still edit files in it pretty comfortably after my brain does the switch from Emacs keybindings to a modal model.
For the most part, that is, some habits are hard.</p>
<p>But one thing, that I think can be a main reason why people should try Kakoune, in my opinion, is its POSIX integration.
Back in the day, I really liked this idea, can’t say so today<sup id="fnref:3"><a href="#fn:3" role="doc-noteref">3</a></sup>, <strong>but</strong>, it’s still a good reason why Kakoune is interesting.</p>
<p>I mentioned that I made plugins for Kakoune, and because of that I now know POSIX sh pretty well.
Not that I need this knowledge that often, but when I do, I’m glad Kakoune taught me well.
The same goes for other POSIX tools - Kakoune basically forces you to learn your shell stuff, because there’s no other way to be productive in Kakoune.
Everything is done via shelling out to use some tool like <code>fmt</code>, <code>grep</code>, <code>find</code>, etc.</p>
<p>And when shell tools are not enough you can always call different programming languages from the shell.
For example, some of my plugins are written in Perl of all languages.
And while I can’t say that I’m proud of that, or that I know Perl that well, I can still say that Kakoune <a href="https://github.com/andreyorst/langmap.kak/blob/fe72a9980988c97ec901df1c36129b6959468b08/perl/langmap.pl" target="_blank">made</a> me <a href="https://github.com/andreyorst/langmap.kak/blob/fe72a9980988c97ec901df1c36129b6959468b08/perl/display_layout.pl" target="_blank">learn</a> <a href="https://github.com/andreyorst/kaktree/blob/acd47e0c8549afe1634a79a5bbd6d883daa8ba0a/perl/kaktree.pl" target="_blank">Perl</a>, well, to some degree.
Also, <a href="https://github.com/andreyorst/dotfiles/blob/187ebb84f9542b76a4f3c3e08f9533cd8187faa1/.config/kak/commands.kak#L151-L192" target="_blank">Awk</a>.
And I still occasionally use both when I need to send a code snippet to my colleague so that they can send me some filtered logs instead of full logs.
Because that’s what these tools excel at, and learning how to use them from within an editor really makes it apparent how they can be useful.
So Kakoune really helps you learn your standard tools, and some extra things too.</p>
<p>Another thing I think can be said is that Kakoune really makes you learn and understand regular expressions.
When I started using Kakoune, I once told my friend that I started using an editor that is built around using regular expressions for text manipulation.
They were quite skeptical, because I didn’t know regular expressions back then, and they had some experience and said that it’s a terrible idea to use them at all.
But turns out, that regular expressions are actually easy to learn, and Kakoune really helps with that, because you’re constantly creating multiple selections, selections in selections, and filtering selections - all done with regexes.
So, if you think that regexes are hard and you’ll never learn them (and you’re a Vim user by chance), give Kakoune a try.</p>
<p>And finally, Kakoune is just fun!
Especially if you’re a seasoned Vim user, the inverted paradigm of object-verb really messes with your brain.
I think Kakoune features a really unique editing model, where it doesn’t need any separate mode for selecting text - all motions do it automatically.
When I started, I adjusted to the object verb paradigm pretty quickly, it’s very natural to how things are done - in real life, we usually don’t think upfront what we want to clean and then how many of <em>what was that</em>, ah yeah the shelves.
We think that these shelves are dusty and we need to clean them.
I should probably do it right now.</p>
<p>Anyway, a TL;DR for this could as well have been:</p>
<blockquote>
<p>Kakoune gives you:</p>
<ul>
<li>Small and understandable core.</li>
<li>Proficiency with POSIX tools,
<ul>
<li>and maybe even some programming languages other than <code>sh</code>.</li>
</ul>
</li>
<li>Structural regular expressions as a central way of text manipulation.
<ul>
<li>With multiple selections created via regular expressions, acting upon regular expressions.</li>
</ul>
</li>
<li>Fresh take on the modal editing paradigm.</li>
</ul>
</blockquote>
<p>So, yeah, Kakoune definitively deserves your attention, if you’re into experiments with your workflow.
I, certainly, am.
At least, I was, now I do everything from Emacs.</p>


  </article></div>
  </body>
</html>
