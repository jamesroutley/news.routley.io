<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://eclecticlight.co/2022/04/18/m1-thunderbolt-ports-dont-fully-support-usb-3-1-gen-2/">Original</a>
    <h1>M1 Thunderbolt ports don’t fully support USB 3.1 Gen 2</h1>
    
    <div id="readability-page-1" class="page"><article id="post-64936">
	
	<!-- .entry-header -->

	
		<div data-first_letter="A">
		<p>Apple claims that all its new models using M1 series chips come with Thunderbolt ports which support “USB 3.1 Gen 2 (up to 10Gb/s)”. However, many users have reported performance which doesn’t reach 10 Gb/s for directly connected external disks. This article examines why performance experienced by users falls short of Apple’s claim.</p>
<p><strong>USB 3.x standards</strong></p>
<p>Unfortunately, standards and terminology for USB 3.x are confusing. For the purposes of this article, I’ll gloss over a lot of detail and summarise the relevant features as:</p>
<ul>
<li>USB 3.0 onwards supports SuperSpeed USB at 5 Gb/s.</li>
<li>USB 3.1 Gen 2 adds SuperSpeed+ at 10 Gb/s.</li>
<li>USB 3.2 adds two-lane SuperSpeed+ at 10 and 20 Gb/s.</li>
</ul>
<p>Currently, Apple makes no claims that any ports on its M1 models support USB 3.2, only the more widespread USB 3.1 Gen 2 standard.</p>
<p>The raw transfer speeds given aren’t achieved in practice, because of encoding and other overheads. In normal testing, 5 Gb/s should yield around 500 MB/s, 10 Gb/s gives around 1200 MB/s, and 20 Gb/s about 2400 MB/s.</p>
<p>It’s common wisdom that external USB-C devices can normally be connected to USB-C format ports, including those capable of Thunderbolt 3 or 4, using either a USB-C (data) cable, or a Thunderbolt 3 or 4 cable.</p>
<p><strong>Test methods</strong></p>
<p>Personal testing was performed using two M1 models</p>
<ul>
<li>Apple Mac Studio with M1 Max, 32 GB memory, 2 TB internal SSD, connected to an Apple Studio Display;</li>
<li>Apple MacBook Pro 16-inch, 2021 with M1 Pro, 32 GB memory, 2 TB internal SSD, using its internal display.</li>
</ul>
<p>Both were running macOS 12.3.1 in Full Security mode, with no extensions which might affect USB or Thunderbolt transfer speeds. APFS was used throughout. Additional results used were obtained on other M1 models.</p>
<p>A range of different external SSDs was used, using Crucial and Samsung SATA SSDs. In personal testing, these were mounted in basic UGREEN and similar cases claimed to be compatible with USB 3.1 Gen 2. Each was connected to an Intel Mac (including an iMac Pro) and it was verified that they established connection at SuperSpeed+ 10 Gb/s with those Macs.</p>
<p>Cables used included a certified Thunderbolt 4 model, and the USB-C (data) cables provided with the cases. Again, each was verified by establishing SuperSpeed+ 10 Gb/s connections to an Intel Mac.</p>
<p>Connection speeds were read from the SSD’s entry in the USB data given in System Information.</p>
<p>Transfer rates were measured using my free app <a href="https://eclecticlight.co/dintch/">Stibium</a>, version 1.0 (55), which wrote a total of 160 files of sizes from 2 MB to 2 GB in size to a folder on the SSD being tested, and read those same files back (Series Write and Series Read Tests as detailed in Stibium’s Help reference). The procedure detailed as the ‘Gold Standard’ test was followed, without restarting the Mac between the write and read tests. If anything, that could result in overestimation of the read rate. Results given are those for Theil-Sen regressions. On relatively slow SSDs, dispersion is narrow and reproducibility excellent. markelp and other users have reported similar results using other widely available benchmarking apps.</p>
<p><strong>Results</strong></p>
<p>When connected to an Intel Mac using a USB-C cable, connection speed was given as 10 Gb/s, with typical read rates of 470 MB/s, and write rates of 480 MB/s.</p>
<p>In all five connections made directly to a Thunderbolt port on an M1 Mac, using either a USB-C or Thunderbolt 4 cable, connection speed was 5 Gb/s. Read rates ranged between 386-406 MB/s, and write rates between 430-435 MB/s.</p>
<p>Three connections were made to USB-C ports, two to the ports on the front of a Mac Studio Max, which Apple merely describes as “USB-C ports” without further details of the standard they comply with. The third was to one of the ports on the back of an Apple Studio Display, which Apple describes as “downstream USB‑C ports (up to 10Gb/s)”, again without giving any details of the standard they comply with. In all three cases, connection speed was given as 10 Gb/s, with two giving read rates of 508 and 509 MB/s, and write rates of 492 and 487 MB/s.</p>
<p>The third connection, to one of the two ports on the front of a Mac Studio Max but using a Thunderbolt 4 cable, gave a read rate of 20 MB/s, and write rate of 37 MB/s.</p>
<p>Comparable results from tests kindly performed by markelp showed that an Inateck SATA RAID SSD and SanDisk Extreme Portable also connected at 5 Gb/s and returned comparable read and write rates of less than 390 MB/s and write of less than 418 MB/s. However, a Sabrent+Samsung NVMe conforming to USB 3.2 was found to connect at 10 Gb/s, and returned a read rate of 911 MB/s and write of 973 MB/s.</p>
<p>In summary:</p>
<ul>
<li>USB 3.1 Gen 2 storage connected direct to a Thunderbolt port on an M1 Mac was limited to 5 Gb/s, giving read rates of about 400 MB/s and write rates of about 430 MB/s.</li>
<li>USB 3.1 Gen 2 storage connected to a USB-C port on the front of a Mac Studio Max using a USB-C cable, or via a USB-C port on a Studio Display, operated at 10 Gb/s, with read and write rates of about 500 and 490 MB/s.</li>
<li>USB 3.2 storage connected direct to a Thunderbolt port on an M1 Mac operated at 10 Gb/s, with read and write rates of about 910 and 970 MB/s.</li>
<li>USB 3.1 Gen 2 storage connected to a USB-C port on the front of a Mac Studio Max using a Thunderbolt 4 cable operated at 10 Gb/s, but read and write speeds were lowest of all, at about 20 and 40 MB/s.</li>
</ul>
<p><strong>Conclusions</strong></p>
<ul>
<li>Currently, and as far as I’m aware since their release in November 2020, no Thunderbolt port in any M1 model appears to fully support 10 Gb/s SuperSpeed+ in USB 3.1 Gen 2, at least for SSDs.</li>
<li>The only ports in M1 Macs which currently appear to support USB 3.1 Gen 2 fully are those on the front of the Mac Studio Max.</li>
<li>10 Gb/s SuperSpeed+ in USB 3.2 devices does appear to be supported by the Thunderbolt ports of M1 Macs.</li>
<li>For SATA/USB-C storage the impact on performance is limited, reducing transfer speeds from an expected 500 MB/s to 400 MB/s. For external storage used to store Time Machine backups, this isn’t likely to have any significant effect, as backup I/O is throttled anyway.</li>
<li>Greatest impact is likely with external storage capable of transfer speeds approaching 10 Gb/s, such as RAID arrays and NVMe SSDs with USB 3.1 Gen 2 rather than Thunderbolt 3. In those, expected transfer rates of 900 MB/s are likely to be reduced to less that 500 MB/s, doubling the time required to read or write files.</li>
<li>Users with USB 3.1 Gen 2 devices should connect them to a Thunderbolt 3 Dock, or the USB ports on a Studio Display, where they should perform better.</li>
<li>This shortcoming appears to have been present in all M1 Macs for nearly 18 months. If it’s a bug in the firmware of the Fabric core(s) responsible, it should have been fixed over a year ago. If it’s a fault in M1 series chips, then Apple should have informed users and qualified its claim for the compatibility of these ports.</li>
<li>Apple needs to investigate why using a Thunderbolt 4 cable to connect a USB-C device to the front USB-C ports on a Mac Studio Max results in unusably poor performance, below 10% of the transfer rates expected.</li>
<li>Lack of support for 10 Gb/s SuperSpeed+ in USB 3.1 Gen 2 is arguably the most serious failing in what has otherwise been a very successful transition.</li>
</ul>
<p><em>I’d like to thank markelp and Ethan for kindly providing results from their own tests.</em></p>
	</div><!-- .entry-content -->

	
	<!-- .entry-footer -->

</article></div>
  </body>
</html>
