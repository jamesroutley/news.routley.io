<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://ishadeed.com/article/conditional-css-has-nth-last-child/">Original</a>
    <h1>Conditional CSS with:has and:nth-last-child</h1>
    
    <div id="readability-page-1" class="page"><div>
		
		<p>We can check with CSS to know if the number of a group element is less than or equal to a number. For example, having a grid with three or more items. You might be wondering, why is that even needed. In some cases, a component or a layout might change based on the number of child elements.</p>

<p>This has been in CSS for years, but it becoming more powerful now with CSS <code>:has</code>. We can combine both the <code>nth-last-child</code> selector along with <code>:has</code> to do magic, yes! You heard that right.</p>

<p>Earlier this year, I published a post titled <a href="https://ishadeed.com/article/conditional-css/">Conditional CSS</a> where I showed how some CSS features help us to create conditional UIs. In this article, I will highlight a few examples of where we can combine a CSS selector with <code>:has</code> to have a conditional component/layout states.</p>

<ul>
  <li><a href="#introduction-to-nth-last-child">Introduction to <code>:nth-last-child</code></a></li>
  <li><a href="#quantity-queries-limitations-in-css">Quantity queries limitations in CSS</a>

    <ul>
      <li><a href="#its-not-possible-to-style-the-parent-based-on-the-number-of-elements">It&#39;s not possible to style the parent based on the number of elements.</a></li>
      <li><a href="#making-them-work-on-different-viewport-sizes">Making them work on different viewport sizes</a></li>
      <li><a href="#more-work-to-manage-the-spacing">More work to manage the spacing</a></li>
    </ul>
  </li>
  <li><a href="#use-cases-and-examples">Use cases and examples</a>

    <ul>
      <li><a href="#grid-that-changes-based-on-the-number-of-child-items">Grid that changes based on the number of child items</a></li>
      <li><a href="#dynamic-header-layout">Dynamic header layout</a></li>
      <li><a href="#dynamic-news-section">Dynamic news section</a></li>
      <li><a href="#modal-actions">Modal actions</a></li>
      <li><a href="#user-avatars">User avatars</a></li>
      <li><a href="#timeline">Timeline</a></li>
      <li><a href="#grid-of-logos">Grid of logos</a></li>
    </ul>
  </li>
  <li><a href="#further-resources">Further resources</a></li>
  <li><a href="#outro">Outro</a></li>
</ul>

<h2 id="introduction-to-nth-last-child">Introduction to <code>:nth-last-child</code></h2>
<p>One of the main factors in this article is the <code>:nth-last-child</code> pseudo-class. We can use that selector to mock <strong>counting</strong> child elements.</p>

<p>Let’s explore how it works. I will try my best to explain how it works with plain words.</p>

<p>Consider the following figure:</p>

<figure>
    
        <img src="https://www.datadoodad.com/assets/css-has-nth-last-child/nth-last-child-1.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>We have a list of 5 cards. I will use that as an example to demonstrate what we can do with <code>:nth-last-child</code>.</p>

<p>In the following CSS, we have <code>n + 3</code> which means:</p>

<div><div><pre><code><span>li</span><span>:nth-last-child</span><span>(</span><span>n</span> <span>+</span> <span>3</span><span>)</span> <span>{</span>
    <span>/* styles */</span>
<span>}</span>
</code></pre></div></div>

<blockquote>
  <p>Select the first three items from the end, counting from the third item.</p>
</blockquote>

<p>Let’s take a closer look. First, we need to count 3 items from the end. With that, the 3rd item is actually the first item that we will count till the end of the list.</p>

<figure>
    
        <img src="https://www.datadoodad.com/assets/css-has-nth-last-child/nth-last-child-2.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>When we count from the 3rd item till the end, here are the selected items:</p>

<figure>
    
        <img src="https://www.datadoodad.com/assets/css-has-nth-last-child/nth-last-child-3.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<h2 id="quantity-queries-limitations-in-css">Quantity queries limitations in CSS</h2>
<p>As explained in <a href="https://alistapart.com/article/quantity-queries-for-css/">this great article</a> by Heydon Pickering, we can use the <code>:nth-last-child</code> as a quantity query.</p>

<p>Consider the following figure:</p>

<figure>
    
        <img src="https://www.datadoodad.com/assets/css-has-nth-last-child/quantity-queries-1.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>We have a list of information that is displayed differently when we have 5 or more items.</p>

<div><div><pre><code><span>&lt;ul&gt;</span>
   <span>&lt;li&gt;&lt;/li&gt;</span>
   <span>&lt;li&gt;&lt;/li&gt;</span>
   <span>&lt;li&gt;&lt;/li&gt;</span>
   <span>&lt;!-- more items --&gt;</span>
<span>&lt;/ul&gt;</span>
</code></pre></div></div>

<div><div><pre><code><span>li</span> <span>{</span>
    <span>/* default styles */</span>
<span>}</span>

<span>/* If the list has 5 or more items */</span>
<span>li</span><span>:nth-last-child</span><span>(</span><span>n</span> <span>+</span> <span>5</span><span>),</span>
<span>li</span><span>:nth-last-child</span><span>(</span><span>n</span> <span>+</span> <span>5</span><span>)</span> <span>~</span> <span>li</span> <span>{</span>
  <span>width</span><span>:</span> <span>50%</span><span>;</span>
  <span>display</span><span>:</span> <span>inline-block</span><span>;</span>
  <span>border-bottom</span><span>:</span> <span>0</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>While that works, it is still a bit limiting in some ways.</p>

<h3 id="its-not-possible-to-style-the-parent-based-on-the-number-of-elements">It’s not possible to style the parent based on the number of elements.</h3>
<p>Imagine that we need to add <code>display: flex</code> to each <code>&lt;li&gt;</code> when there are 5 or more items. We can’t do that with the <code>:nth-last-child</code> pseudo-class selector.</p>

<p>The reason is that adding <code>display: flex</code> will force each item to stay in its own row, which doesn’t align with the design to achieve.</p>

<div><div><pre><code><span>li</span><span>:nth-last-child</span><span>(</span><span>n</span> <span>+</span> <span>5</span><span>),</span>
<span>li</span><span>:nth-last-child</span><span>(</span><span>n</span> <span>+</span> <span>5</span><span>)</span> <span>~</span> <span>li</span> <span>{</span>
  <span>width</span><span>:</span> <span>50%</span><span>;</span>
  <span>display</span><span>:</span> <span>flex</span><span>;</span>
  <span>flex-direciton</span><span>:</span> <span>column</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<figure>
    
        <img src="https://www.datadoodad.com/assets/css-has-nth-last-child/quantity-queries-issue-1.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>We can fix that with <code>display: inline-flex</code> instead, but it’s still not the optimal solution for me. The reason is that the browser will account for the spacing between the HTML elements, they should be like that:</p>

<div><div><pre><code><span>&lt;ul&gt;</span>
   <span>&lt;li&gt;&lt;/li&gt;&lt;li&gt;&lt;/li&gt;&lt;li&gt;&lt;/li&gt;</span>
   <span>&lt;!-- more items --&gt;</span>
<span>&lt;/ul&gt;</span>
</code></pre></div></div>

<p>If we don’t do that, <code>display: inline-flex</code> will have the same effect as <code>display: flex</code>. One hack to fix that is to reduce the width by 1%.</p>

<div><div><pre><code><span>li</span><span>:nth-last-child</span><span>(</span><span>n</span> <span>+</span> <span>5</span><span>),</span>
<span>li</span><span>:nth-last-child</span><span>(</span><span>n</span> <span>+</span> <span>5</span><span>)</span> <span>~</span> <span>li</span> <span>{</span>
  <span>width</span><span>:</span> <span>49%</span><span>;</span>
  <span>display</span><span>:</span> <span>flex</span><span>;</span>
  <span>flex-direciton</span><span>:</span> <span>column</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<h3 id="making-them-work-on-different-viewport-sizes">Making them work on different viewport sizes</h3>
<p>Without the ability to have control over the parent, it’s not that straightforward to style the layout of the listing. For example, when the container or viewport width is smaller, we need to show 1 item per row.</p>

<h3 id="more-work-to-manage-the-spacing">More work to manage the spacing</h3>
<p>When there are 3 items or fewer, the spacing is horizontal, and when it’s 5 or more, the spacing is vertical. We can manage that manually by flipping the margin from horizontal to vertical, or by using CSS <code>gap</code> with Flexbox. But again, we are forced to use  <code>inline-flex</code> for that case.</p>

<p>The CSS <code>:nth-last-child</code> pseudo-class is the key to building conditional layouts. By combining it with the CSS <code>:has</code> selector, we can check if a parent element has at least a specific number of items and style it accordingly. The possibilities are endless!</p>

<h2 id="use-cases-and-examples">Use cases and examples</h2>

<h3 id="grid-that-changes-based-on-the-number-of-child-items">Grid that changes based on the number of child items</h3>

<figure>
    
        <img src="https://www.datadoodad.com/assets/css-has-nth-last-child/conditional-css-grid-cols-1.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>When we need to change a grid based on the number of items, this isn’t possible with the current CSS. In CSS grid, we can use the  <code>minmax()</code> function to have a dynamic grid that changes based on the available space.</p>

<p>Here is my take on CSS grid <code>minmax()</code>:</p>

<div><div><pre><code><span>.list</span> <span>{</span>
    <span>display</span><span>:</span> <span>grid</span><span>;</span>
    <span>grid-template-columns</span><span>:</span> <span>repeat</span><span>(</span><span>auto-fit</span><span>,</span> <span>minmax</span><span>(</span><span>150px</span><span>,</span> <span>1</span><span>fr</span><span>));</span>
    <span>gap</span><span>:</span> <span>1rem</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>The result might look like this:</p>

<figure>
    
        <img src="https://www.datadoodad.com/assets/css-has-nth-last-child/conditional-css-grid-cols-minmax.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>This isn’t perfect. We don’t have much control, as we need to tweak the value of <code>150px</code> in the <code>minmax()</code>. It can work great when having 4 items or less, and break for 5 items or more.</p>

<p>The solution? We can check with CSS <code>:has</code> if there are more than 5 items or more, and change the <code>minmax()</code> value based on that.</p>

<div><div><pre><code><span>/* default grid */</span>
<span>.list</span> <span>{</span>
    <span>--item-size</span><span>:</span> <span>200px</span><span>;</span>
    <span>display</span><span>:</span> <span>grid</span><span>;</span>
    <span>grid-template-columns</span><span>:</span> <span>repeat</span><span>(</span><span>auto-fit</span><span>,</span> <span>minmax</span><span>(</span><span>var</span><span>(</span><span>--item-size</span><span>),</span> <span>1</span><span>fr</span><span>));</span>
    <span>gap</span><span>:</span> <span>1rem</span><span>;</span>
<span>}</span>

<span>/* If the grid has 5+ items, change the --item-size width to 150px */</span>
<span>.list</span><span>:has</span><span>(</span><span>li</span><span>:nth-last-child</span><span>(</span><span>n</span> <span>+</span> <span>5</span><span>))</span> <span>{</span>
    <span>--item-size</span><span>:</span> <span>150px</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>I only changed the <code>--item-size</code> variable to make the code easier to read and to avoid duplication.</p>

<p>See the following video and notice how the grid columns change as I add or remove items.</p>

<video controls="">
    <source src="../../assets/css-has-nth-last-child/conditional-css-grid-cols-minmax.mp4" type="video/mp4"/>
</video>

<p>Isn’t that powerful?</p>


<p>In the following figure, we have a header that should change its layout when the navigation items are 4 or more. With CSS <code>:has</code> and <code>:nth-last-child</code>, we can detect that and change the layout.</p>

<figure>
    
        <img src="https://www.datadoodad.com/assets/css-has-nth-last-child/conditional-css-header-layout.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<div><div><pre><code><span>.site-header</span><span>:has</span><span>(</span><span>li</span><span>:nth-last-child</span><span>(</span><span>n</span> <span>+</span> <span>4</span><span>))</span> <span>{</span>
    <span>.site-header__wrapper</span> <span>&gt;</span> <span>*</span> <span>{</span>
        <span>flex</span><span>:</span> <span>initial</span><span>;</span>
    <span>}</span>

    <span>.site-header__start</span> <span>{</span>
        <span>order</span><span>:</span> <span>2</span><span>;</span>
    <span>}</span>

    <span>.site-header__middle</span> <span>{</span>
        <span>order</span><span>:</span> <span>-1</span><span>;</span>
        <span>text-align</span><span>:</span> <span>start</span><span>;</span>
    <span>}</span>

    <span>.site-header__end</span> <span>{</span>
        <span>margin-left</span><span>:</span> <span>auto</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div></div>

<p>The above is the <code>Sass</code> code. It might look a bit too much when written in vanilla CSS.</p>

<div><div><pre><code><span>.site-header</span><span>:has</span><span>(</span><span>li</span><span>:nth-last-child</span><span>(</span><span>n</span> <span>+</span> <span>4</span><span>))</span> <span>.site-header__wrapper</span> <span>&gt;</span> <span>*</span> <span>{</span>
    <span>flex</span><span>:</span> <span>initial</span><span>;</span>
<span>}</span>

<span>.site-header</span><span>:has</span><span>(</span><span>li</span><span>:nth-last-child</span><span>(</span><span>n</span> <span>+</span> <span>4</span><span>))</span> <span>.site-header__start</span> <span>{</span>
    <span>order</span><span>:</span> <span>2</span><span>;</span>
<span>}</span>

<span>.site-header</span><span>:has</span><span>(</span><span>li</span><span>:nth-last-child</span><span>(</span><span>n</span> <span>+</span> <span>4</span><span>))</span> <span>.site-header__middle</span> <span>{</span>
    <span>order</span><span>:</span> <span>-1</span><span>;</span>
    <span>text-align</span><span>:</span> <span>start</span><span>;</span>
<span>}</span>

<span>.site-header</span><span>:has</span><span>(</span><span>li</span><span>:nth-last-child</span><span>(</span><span>n</span> <span>+</span> <span>4</span><span>))</span> <span>.site-header__end</span> <span>{</span>
    <span>margin-left</span><span>:</span> <span>auto</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>Can we do better? Yes! But this isn’t supported well (yet!). We can add a boolean CSS variable that will be toggled when the header has 4 items or more, and then use a <a href="https://ishadeed.com/article/css-container-style-queries/">style query</a> to change the header.</p>

<div><div><pre><code><span>.site-header</span><span>:has</span><span>(</span><span>li</span><span>:nth-last-child</span><span>(</span><span>n</span> <span>+</span> <span>4</span><span>))</span> <span>{</span>
    <span>--layout-2</span><span>:</span> <span>true</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>With that, we set the variable <code>--layout-2</code> when the navigation items are 4 or more.</p>

<div><div><pre><code><span>/* This will only works if the --layout-2 CSS variable is set */</span>
<span>@container</span> <span>style</span><span>(</span><span>--layout-2</span><span>:</span> <span>true</span><span>)</span> <span>{</span>
  <span>.site-header__wrapper</span> <span>{</span>
    <span>&gt;</span> <span>*</span> <span>{</span>
      <span>flex</span><span>:</span> <span>initial</span><span>;</span>
    <span>}</span>
  <span>}</span>

  <span>.site-header__start</span> <span>{</span>
    <span>order</span><span>:</span> <span>2</span><span>;</span>
  <span>}</span>

  <span>.site-header__middle</span> <span>{</span>
    <span>order</span><span>:</span> <span>-1</span><span>;</span>
    <span>text-align</span><span>:</span> <span>start</span><span>;</span>
  <span>}</span>

  <span>.site-header__end</span> <span>{</span>
    <span>margin-left</span><span>:</span> <span>auto</span><span>;</span>
  <span>}</span>
<span>}</span>
</code></pre></div></div>

<p>For me, this looks clean and much better than nesting all CSS styles within the <code>:has</code> selector.</p>

<video controls="">
    <source src="../../assets/css-has-nth-last-child/conditional-css-header-layout.mp4" type="video/mp4"/>
</video>

<p><a href="https://codepen.io/shadeed/pen/GRYxqdg/45bc59e17a9865b9919ea1ad7460cbe6?editors=1100">Demo</a></p>

<h3 id="dynamic-news-section">Dynamic news section</h3>
<p>The following is a news section design that should change its layout when the number of items is 3 or more.</p>

<figure>
    
        <img src="https://www.datadoodad.com/assets/css-has-nth-last-child/conditional-css-news-section.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>By combining CSS <code>:has</code> and <code>:nth-last-child</code>, we can create a toggle CSS variable that will be checked by a style query.</p>

<p>First, I will assume that the default card style is the horizontal one.</p>

<div><div><pre><code><span>&lt;div</span> <span>class=</span><span>&#34;layout&#34;</span><span>&gt;</span>
    <span>&lt;article</span> <span>class=</span><span>&#34;card&#34;</span><span>&gt;&lt;/article&gt;</span>
    <span>&lt;article</span> <span>class=</span><span>&#34;card&#34;</span><span>&gt;&lt;/article&gt;</span>
    <span>&lt;article</span> <span>class=</span><span>&#34;card&#34;</span><span>&gt;&lt;/article&gt;</span>
<span>&lt;/div&gt;</span>
</code></pre></div></div>

<div><div><pre><code><span>.layout</span> <span>{</span>
  <span>display</span><span>:</span> <span>grid</span><span>;</span>
  <span>grid-gap</span><span>:</span> <span>1rem</span><span>;</span>
<span>}</span>

<span>.card</span> <span>{</span>
    <span>display</span><span>:</span> <span>flex</span><span>;</span>
    <span>gap</span><span>:</span> <span>1rem</span><span>;</span>
    <span>align-items</span><span>:</span> <span>center</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>After that, I need to check the number of <code>.card</code> elements.</p>

<div><div><pre><code><span>.layout</span><span>:has</span><span>(</span><span>.card</span><span>:nth-last-child</span><span>(</span><span>n</span> <span>+</span> <span>4</span><span>))</span> <span>{</span>
  <span>--layout-4</span><span>:</span> <span>true</span><span>;</span>
  <span>grid-template-columns</span><span>:</span> <span>repeat</span><span>(</span><span>auto-fit</span><span>,</span> <span>minmax</span><span>(</span><span>180px</span><span>,</span> <span>1</span><span>fr</span><span>));</span>
<span>}</span>
</code></pre></div></div>

<p>Now, we have the CSS variable <code>--layout-4</code> that will be toggled only when we have 4 items or more. We can check that with a style query and update the <code>.card</code> style accordingly.</p>

<div><div><pre><code><span>@container</span> <span>style</span><span>(</span><span>--layout-4</span><span>:</span> <span>true</span><span>)</span> <span>{</span>
    <span>.card</span> <span>{</span>
        <span>flex-direction</span><span>:</span> <span>column</span><span>;</span>
    <span>}</span>

    <span>.card__thumb</span> <span>{</span>
        <span>flex</span><span>:</span> <span>1</span><span>;</span>
        <span>width</span><span>:</span> <span>100%</span><span>;</span>
        <span>aspect-ratio</span><span>:</span> <span>4</span> <span>/</span> <span>3</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div></div>

<video controls="">
    <source src="../../assets/css-has-nth-last-child/conditional-css-news-section.mp4" type="video/mp4"/>
</video>

<p><a href="https://codepen.io/shadeed/pen/abRKdYX/1744b5d038803aeaca2ff96fad140412?editors=1100">Demo</a></p>

<h3 id="modal-actions">Modal actions</h3>
<p>In a design system, we might need to dynamically control the alignment of the modal actions based on how many actions we have.</p>

<p>Consider the following figure:</p>

<figure>
    
        <img src="https://www.datadoodad.com/assets/css-has-nth-last-child/conditional-css-modal-actions.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>For example, if we have one action, it should be centered. Otherwise, right-align them.</p>

<p>Here is the CSS:</p>

<div><div><pre><code><span>.modal__footer</span> <span>{</span>
    <span>display</span><span>:</span> <span>flex</span><span>;</span>
    <span>justify-content</span><span>:</span> <span>center</span><span>;</span>
    <span>gap</span><span>:</span> <span>0.5rem</span><span>;</span>
<span>}</span>

<span>/* If there are 2 buttons or more */</span>
<span>.modal__footer</span><span>:has</span><span>(</span><span>a</span><span>:nth-last-child</span><span>(</span><span>n</span> <span>+</span> <span>2</span><span>))</span> <span>{</span>
    <span>justify-content</span><span>:</span> <span>flex-end</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>Simple, isn’t it? Here is a demo in action.</p>

<video controls="">
    <source src="../../assets/css-has-nth-last-child/conditional-css-modal-actions.mp4" type="video/mp4"/>
</video>

<p><a href="https://codepen.io/shadeed/pen/poxKNZm/03086ac5988719830a5cf137bd6503ed">Demo</a></p>

<h3 id="user-avatars">User avatars</h3>
<p>On editorial websites, an article might be written by multiple authors. A common pattern is to stack the author images with negative spacing when we have multiple authors.</p>

<figure>
    
        <img src="https://www.datadoodad.com/assets/css-has-nth-last-child/conditional-css-author-avatar.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>By using quantity queries alone, we can achieve the minimum, which is to:</p>
<ul>
  <li>Add negative spacing (stack the avatars on top of each other).</li>
  <li>Shrink the avatar size when there are multiple ones.</li>
</ul>

<div><div><pre><code><span>img</span><span>:nth-last-child</span><span>(</span><span>n</span><span>+</span><span>2</span><span>)</span> <span>~</span> <span>img</span> <span>{</span>
    <span>border</span><span>:</span> <span>2px</span> <span>solid</span> <span>#fff</span><span>;</span>
    <span>margin-left</span><span>:</span> <span>-0.25rem</span><span>;</span>
    <span>width</span><span>:</span> <span>30px</span><span>;</span>
    <span>height</span><span>:</span> <span>30px</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>The above works, but it’s limiting. What if we want to style the container itself? Well, that’s where CSS <code>:has</code> becomes powerful.</p>

<p>First, we need to check and toggle a CSS variable:</p>

<div><div><pre><code><span>.post-author</span><span>:has</span><span>(</span><span>img</span><span>:nth-last-child</span><span>(</span><span>n</span> <span>+</span> <span>2</span><span>))</span> <span>{</span>
    <span>--multiple-avatars</span><span>:</span> <span>true</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>If that CSS variable is true, we then apply the styles for multiple avatars:</p>

<div><div><pre><code><span>@container</span> <span>style</span><span>(</span><span>--multiple-avatars</span><span>:</span> <span>true</span><span>)</span> <span>{</span>
    <span>.avatars-list</span> <span>{</span>
        <span>display</span><span>:</span> <span>flex</span><span>;</span>
        <span>background-color</span><span>:</span> <span>#efefef</span><span>;</span>
        <span>padding</span><span>:</span> <span>8px</span> <span>12px</span><span>;</span>
        <span>border-radius</span><span>:</span> <span>50px</span><span>;</span>
    <span>}</span>

    <span>img</span><span>:not</span><span>(</span><span>:first-child</span><span>)</span> <span>{</span>
        <span>border</span><span>:</span> <span>solid</span> <span>2px</span> <span>#fff</span><span>;</span>
        <span>margin-left</span><span>:</span> <span>-0.25rem</span><span>;</span>
    <span>}</span>
<span>}</span>
</code></pre></div></div>

<p>Check out the following video:</p>

<video controls="">
    <source src="../../assets/css-has-nth-last-child/conditional-css-author-avatar.mp4" type="video/mp4"/>
</video>

<p><a href="https://codepen.io/shadeed/pen/LYgBWzM/379dadfb26d3b43f6a5f4aa2c2a0645f?editors=1100">Demo</a></p>

<h3 id="timeline">Timeline</h3>
<p>Another interesting example where conditional CSS works well is a timeline component.</p>

<figure>
    
        <img src="https://www.datadoodad.com/assets/css-has-nth-last-child/conditional-css-timeline.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<p>In this example, I want the timeline to switch from a vertical listing to an alternating style when it has 4 or more items.</p>

<p>First, I used the <code>:nth-last-child</code> with CSS <code>:has</code>:</p>

<div><div><pre><code><span>.timeline-wrapper</span><span>:has</span><span>(</span><span>.timeline__item</span><span>:nth-last-child</span><span>(</span><span>n</span> <span>+</span> <span>4</span><span>))</span> <span>{</span>
    <span>--alternating</span><span>:</span> <span>true</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>If the above is met, the following CSS will be applied:</p>

<div><div><pre><code><span>@container</span> <span>style</span><span>(</span><span>--alternating</span><span>:</span> <span>true</span><span>)</span> <span>{</span>
    <span>/* Alternating timeline styles. */</span>
<span>}</span>
</code></pre></div></div>

<p>What’s useful about using style queries here is that we can reuse that styling on another page. It doesn’t have to be a conditional CSS.</p>

<p>I might do something like this:</p>

<div><div><pre><code><span>.timeline-wrapper--page-10</span> <span>{</span>
    <span>--alternating</span><span>:</span> <span>true</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>Please don’t mind <code>.timeline-wrapper--page-10</code>, this is an intentional random class name. The CSS variable can be assigned anywhere we want, and the CSS will work out of the box.</p>

<p>Write it once, and it works for many cases.</p>

<blockquote>
  <p>Note: this demo breaks in Chrome Canary and I guess the reason is that I’m using pseudo-elements within style queries. I’m <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=1445876">investigating that</a> in more detail and will update the article as I got more information.</p>
</blockquote>

<video controls="">
    <source src="../../assets/css-has-nth-last-child/conditional-css-timeline.mp4" type="video/mp4"/>
</video>

<p><a href="https://codepen.io/shadeed/pen/QWZBpZv/9d3c5a57ada835f37020f913f20dca91?editors=1100">Demo</a></p>

<h3 id="grid-of-logos">Grid of logos</h3>
<p>One of the tricky things to deal with in CSS is aligning multiple logos and making sure they all look good. With conditional CSS, we can detect the number of logos and shrink their size a bit.</p>

<figure>
    
        <img src="https://www.datadoodad.com/assets/css-has-nth-last-child/conditional-css-logos.png" alt=""/>
    
    
        <figcaption></figcaption>
    
</figure>

<div><div><pre><code><span>ul</span><span>:has</span><span>(</span><span>li</span><span>:nth-last-child</span><span>(</span><span>n</span> <span>+</span> <span>8</span><span>))</span> <span>img</span> <span>{</span>
    <span>max-width</span><span>:</span> <span>160px</span><span>;</span>
    <span>height</span><span>:</span> <span>35px</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<video controls="">
    <source src="../../assets/css-has-nth-last-child/conditional-css-logos.mp4" type="video/mp4"/>
</video>

<p><a href="https://codepen.io/shadeed/pen/jOeppeO/546cb03e8e62706d1975d01239468245?editors=0100">Demo</a></p>

<h2 id="outro">Outro</h2>
<p>This was one of the interesting articles that I worked on. Combining modern CSS features can let to exciting new ways to build layouts, and this article’s examples were no exception.</p>

<p>Changing a style based on the number of items might not be a one-off usage; it can be extracted to different use cases. By using style queries, we can write once and reuse them everywhere.</p>

<h2 id="further-resources">Further resources</h2>
<ul>
  <li><a href="https://css-tricks.com/solved-with-css-logical-styling-based-on-the-number-of-given-elements/">Solved with CSS! Logical Styling Based on the Number of Given Elements</a> by Una Kravets</li>
  <li><a href="https://www.trysmudford.com/blog/avatar-stacking-with-quantity-queries/">Avatar stacking with Quantity Queries</a> by Trys Mudford</li>
  <li><a href="https://quantityqueries.com/">Quantity queries builder</a> by Drew Minns</li>
</ul>

	</div></div>
  </body>
</html>
