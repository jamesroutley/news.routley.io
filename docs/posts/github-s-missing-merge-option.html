<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://tylercipriani.com/blog/2022/09/30/githubs-missing-merge-option/">Original</a>
    <h1>GitHub&#39;s Missing Merge Option</h1>
    
    <div id="readability-page-1" class="page"><article class="page">







<div id="pagebody">

<section id="content" role="main">
<blockquote>
<p>github is a perfectly fine hosting site, and it does a number of other things well too, but merges is not one of those things.</p>
<p>– <a href="https://lore.kernel.org/lkml/CAHk-=wjbtip559HcMG9VQLGPmkurh5Kc50y5BceL8Q8=aL0H3Q@mail.gmail.com/">Linus Torvalds</a></p>
</blockquote>
<p>Git possesses parts of a decent <a href="https://en.wikipedia.org/wiki/Forge_(software)">software forge</a>.</p>
<p>When git was developed by the Linux kernel community, they already had bug tracking, documentation, and a mailing list, so (unlike <a href="https://fossil-scm.org/home/doc/trunk/www/fossil-v-git.wiki">fossil</a>) git has none of those things.</p>
<p>Enter GitHub. It uses “issues” for bug tracking and discussion, and its code browser is unrivaled.</p>
<p>But for all of its features, GitHub implements only a subset of git. For instance, GitHub lacks the default merge strategy of git—the fast-forward merge.</p>
<p>And after some pondering I realized there’s a good reason for that: it’s a cop-out.</p>
<section id="git-log-can-be-clean-or-accurate-not-both">
<h2><code>git log</code> can be clean or accurate, not both <a href="#git-log-can-be-clean-or-accurate-not-both">¶</a></h2>
<blockquote>
<p>I want clean history, but that really means (a) clean and (b) history.</p>
<p>– <a href="https://www.mail-archive.com/dri-devel@lists.sourceforge.net/msg39091.html">Linus Torvalds</a></p>
</blockquote>
<p>Git log will always suck for someone.</p>
<p>An eternal war rages between team “git log should be clean” vs. team “git log should have an accurate history.”</p>
<ul>
<li>📚 <strong>Team History</strong>
<ul>
<li>Method: <code>git merge --no-ff</code></li>
<li>🟢 Pros: A complete history of how everything was developed</li>
<li>🔴 Cons: You’ve opened a pandoras box of strange git situations. And your git log looks like this now<a href="#fn1" id="fnref1" role="doc-noteref"><sup>1</sup></a>:</li>
</ul>
<pre><code>* (refs/heads/B)
* * Merge &#39;C&#39; into &#39;B&#39;
* |\
* | | * (refs/heads/C -- git revert B8)
* | | * Merge &#39;B&#39; into &#39;C&#39;
* | |/|
* | |/
* |/|
* * | B8
* | * C3
* |/
* * A (refs/heads/A)</code></pre></li>
</ul>
<figure>
<img src="https://photos.tylercipriani.com/2022-09-30_git-merge.png" alt=""/><figcaption>Team history uses <code>git merge --no-ff</code> to ensure a merge commit is always created</figcaption>
</figure>
<ul>
<li>✨ <strong>Team Clean</strong>
<ul>
<li>Methods: <code>git merge --ff-only</code> or <code>git rebase &amp;&amp; git merge</code> (extreme clean freaks add the <code>--squash</code> option)</li>
<li>🟢 Pros: Linear history, <code>git log</code> is easy to read, <code>git revert</code> requires no thought.</li>
<li>🔴 Cons: You’re erasing history—you can no longer tell if two commits were written together on a single feature branch.</li>
</ul></li>
</ul>
<figure>
<img src="https://photos.tylercipriani.com/2022-09-30_git-rebase.png" alt=""/><figcaption>Team clean uses <code>git rebase</code> &amp;&amp; <code>git merge --ff-only</code> to make it appear there was never a feature branch at all</figcaption>
</figure>
</section>
<section id="why-is-git-merge-bad">
<h2>Why is <code>git merge</code> bad? <a href="#why-is-git-merge-bad">¶</a></h2>
<p><code>git merge</code> opted out.</p>
<p>If a branch can be fast-forwarded, <code>git merge</code> sticks the commits on the end of the branch and never tells you there was a merge—team clean.</p>
<p>But if a branch has conflicts, you’ll need to fix them and create a merge commit to say what you did—team history.</p>
<p>Sometimes there’s a merge commit; sometimes not: Madness.</p>
</section>
<section id="what-does-github-do">
<h2>What does GitHub do? <a href="#what-does-github-do">¶</a></h2>
<p>When you mash “merge” in GitHub it never executes plain <code>git merge</code>.</p>
<figure>
<img src="https://photos.tylercipriani.com/2022-09-30_git-merge-button.png" alt=""/><figcaption>The GitHub merge options (the command line instructions are a lie)</figcaption>
</figure>
<p>And sussing out what git command it will run is kafkaesque. I spent some time mapping all the checkboxes and merge strategies into something you could type into bash.</p>
<table>
<thead>
<tr>
<th>command</th>
<th>GitHub</th>
<th>Alignment</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>git merge</code></td>
<td><strong>not implemented</strong></td>
<td><code>¯\_(ツ)_/¯</code></td>
</tr>
<tr>
<td><code>git merge --ff-only</code></td>
<td><strong>not implemented</strong></td>
<td>✨ Team Clean</td>
</tr>
<tr>
<td><code>git rebase &amp;&amp; git merge --ff-only</code></td>
<td>Rebase and Merge</td>
<td>✨ Team Clean</td>
</tr>
<tr>
<td><code>git merge --no-ff</code></td>
<td>Create a merge commit</td>
<td>📚 Team History</td>
</tr>
<tr>
<td><code>git merge --squash --ff-only BRANCH</code></td>
<td>Squash and merge</td>
<td>✨ Team Clean</td>
</tr>
<tr>
<td><code>git merge --is-ancestor &amp;&amp; git merge --no-ff</code></td>
<td>Create a merge commit + <a href="https://docs.github.com/en/repositories/configuring-branches-and-merges-in-your-repository/defining-the-mergeability-of-pull-requests/about-protected-branches#require-linear-history">Require linear history</a></td>
<td>✨ Team Clean<a href="#fn2" id="fnref2" role="doc-noteref"><sup>2</sup></a></td>
</tr>
</tbody>
</table>
<p>There is a distinction between <code>git rebase &amp;&amp; git merge --ff-only</code> and <code>git merge --ff-only</code>. Rebasing modifies the commit—you end up with a different SHA1.</p>
<p>By not using the “merge if necessary” strategy of <code>git merge</code>, GitHub forces you to choose a side in the eternal war. And that’s a good thing.</p>
</section>


</section>









</div>



</article></div>
  </body>
</html>
