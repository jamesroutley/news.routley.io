<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/OpenMixerProject/StageConnect">Original</a>
    <h1>StageConnect: Behringer protocol is open source</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">This repository contains an Arduino-Library to create a StageConnect device (subordinated node-device as well as controlling main-device) using AnalogDevices AD242x-ICs like the AD2428.</p>
<p dir="auto">StageConnect is based on the automotive A²B and is used to connect the Behringer WING to the Midas DP48, for instance. Analog Devices <a href="https://www.analog.com/en/solutions/a2b-audio-bus.html" rel="nofollow">A²B audio</a> bus is used as the technology basis and uses simple XLR connectors between two devices to transmit 32 channels of uncompressed 48kHz 32bit audio.</p>
<p dir="auto">A StageConnect/A2B main-device uses a virtual I2C-connection through the A2B-link that is routed via the AD242x-IC to the Arduino microcontroller.</p>

<p dir="auto">Include the main-library as well as the I2C-Wrapper-Class, instantiate both classes and setup the Wire-library:</p>
<div data-snippet-clipboard-copy-content="#include &lt;StageConnect.h&gt;
#include &lt;ci2c_com.h&gt;

Ci2c_com i2c_com;
StageConnect stageConnect(false, 1, 0xD0, &amp;i2c_com);

void I2C_RxHandler(int numBytes) {...}
void I2C_TxHandler(void) {...}

void setup() {
    Wire.begin(0x3D);
	Wire.onReceive(I2C_RxHandler);
	Wire.onRequest(I2C_TxHandler);
}"><pre><code>#include &lt;StageConnect.h&gt;
#include &lt;ci2c_com.h&gt;

Ci2c_com i2c_com;
StageConnect stageConnect(false, 1, 0xD0, &amp;i2c_com);

void I2C_RxHandler(int numBytes) {...}
void I2C_TxHandler(void) {...}

void setup() {
    Wire.begin(0x3D);
	Wire.onReceive(I2C_RxHandler);
	Wire.onRequest(I2C_TxHandler);
}
</code></pre></div>
<p dir="auto">stageConnect.update() should be then called every 100ms.</p>
<p dir="auto">Have a look into the example-sketch to learn how to use the callbacks and the mailbox-system to receive channel-names from the host-device.</p>
<p dir="auto">For electrical connection have a look at the following picture showing the connection with the AD2428MINI evaluation board:
<a target="_blank" rel="noopener noreferrer" href="https://solar.lowtechmagazine.com/OpenMixerProject/StageConnect/blob/main/Documentation/connection.jpg"><img src="https://solar.lowtechmagazine.com/OpenMixerProject/StageConnect/raw/main/Documentation/connection.jpg" alt="alt text"/></a></p>

<p dir="auto">Analog Devices suggests cable-length of up to 15 meters, while Behringer allows longer cables. The filter-network of the AD242x-chips is quite tricky and needs caution on adjusting the hardware-parameters. Use the schematics of the AD2428MINI as a reference.</p>
<p dir="auto">Read the files in the folder &#34;Documentation&#34; for more information about the configuration-options and technical details regarding the brand- and product-ID as well as the specific commands for the mailbox-system.</p>
<p dir="auto">Please use brand-IDs above 0x80 to prevent interference with other products.</p>

<p dir="auto">Many thanks to MusicTribe/Behringer for sharing detailed information about the used protocol and for the permission to share the code publicly.</p>
</article></div></div>
  </body>
</html>
