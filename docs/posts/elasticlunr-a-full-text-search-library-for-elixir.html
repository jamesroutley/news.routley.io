<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://atandarash.me/blog/introduction-to-elasticlunr">Original</a>
    <h1>Elasticlunr, a full-text search library for Elixir</h1>
    
    <div id="readability-page-1" class="page"><section class="page">
    <main>
      <div>
        <article>
  
<h6>January 3rd, 2022</h6>

<p><span>#Backend</span>
      <span>#Elixir</span>
      <span>#Quickstart</span>
      <span>#Series</span>
  
</p>



  <p><img src="https://www.sourencho.com/assets/blog/books.jpg" alt="elixir language image"/></p>
<p>Elasticlunr is a small, full-text search library for use in the Elixir environment. It indexes JSON documents and provides a friendly search interface to retrieve documents.</p>
<p>The library is built for web applications that do not require the deployment complexities of popular search engines while taking advantage of the Beam capabilities.</p>
<p>Imagine how much is gained when the search functionality of your application resides in the same environment (Beam VM) as your business logic; search resolves faster, the number of services (Elasticsearch, Solr, and so on) to monitor reduces.</p>
<h2>Getting Started</h2>
<p>First of all, the library has to be installed in a project of choice â€“ see snippet below â€“ before we proceed to the fundamental parts of the library.</p>
<pre><code><span><span>def</span><span> </span><span>deps</span><span> </span><span>do</span></span>
<span><span>  [</span></span>
<span><span>    {</span><span>:</span><span>elasticlunr</span><span>, </span><span>&#34;~&gt; 0.5&#34;</span><span>}</span></span>
<span><span>  ]</span></span>
<span><span>end</span></span>
<span></span></code></pre>
<h2>What&#39;s an Index?</h2>
<p>An index is a collection of structured data that is referred to when looking for results that are relevant to a specific query.</p>
<p>In RDBMS, a table can be likened to an index, meaning that you can store, update, delete and search documents in an index. But the difference here is that an index has a pipeline that every JSON document passes through before it becomes searchable.</p>
<pre><code><span><span>alias</span><span> </span><span>Elasticlunr</span><span>.{</span><span>Index</span><span>, </span><span>Pipeline</span><span>}</span></span>
<span></span>
<span><span>pipeline </span><span>=</span><span> </span><span>Pipeline</span><span>.</span><span>new</span><span>(</span><span>Pipeline</span><span>.</span><span>default_runners</span><span>())</span></span>
<span></span>
<span><span>index </span><span>=</span><span> </span><span>Index</span><span>.</span><span>new</span><span>(</span><span>pipeline:</span><span> pipeline)</span></span>
<span></span></code></pre>
<p>The above code block creates a new index with a pipeline of default functions that work with the English language.</p>
<p>The new index does not define the expected structure of the JSON documents to be indexed. To fix this, let&#39;s assume we are building an index of blog posts, and each post consists of the <code>author</code>, <code>content</code>, <code>category</code>, and <code>title</code> attributes.</p>
<pre><code><span><span>index </span><span>=</span></span>
<span><span>  index</span></span>
<span><span>  |&gt; </span><span>Index</span><span>.</span><span>add_field</span><span>(</span><span>&#34;title&#34;</span><span>)</span></span>
<span><span>  |&gt; </span><span>Index</span><span>.</span><span>add_field</span><span>(</span><span>&#34;author&#34;</span><span>)</span></span>
<span><span>  |&gt; </span><span>Index</span><span>.</span><span>add_field</span><span>(</span><span>&#34;content&#34;</span><span>)</span></span>
<span><span>  |&gt; </span><span>Index</span><span>.</span><span>add_field</span><span>(</span><span>&#34;category&#34;</span><span>)</span></span>
<span></span></code></pre>
<p>Based on the changes made to the index, it expects a JSON document of the below structure:</p>
<pre><code><span><span>%{</span></span>
<span><span>  </span><span>&#34;id&#34;</span><span> =&gt; </span><span>&#34;...&#34;</span><span>,</span></span>
<span><span>  </span><span>&#34;title&#34;</span><span> =&gt; </span><span>&#34;...&#34;</span><span>,</span></span>
<span><span>  </span><span>&#34;author&#34;</span><span> =&gt; </span><span>&#34;...&#34;</span><span>,</span></span>
<span><span>  </span><span>&#34;category&#34;</span><span> =&gt; </span><span>&#34;...&#34;</span><span>,</span></span>
<span><span>  </span><span>&#34;content&#34;</span><span> =&gt; </span><span>&#34;...&#34;</span></span>
<span><span>}</span></span>
<span></span></code></pre>
<p>Note that only the fields specified on the index will be indexed, i.e. fields on a document not recognized by the index will be ignored. And every index by default assumes that the unique identifier on documents to be indexed is <code>id</code>, and this behavior is configurable.</p>
<h2>Indexing Documents</h2>
<p>Following our example or use-case above, to make the blog posts searchable we need to add them to the index so that they can be analyzed and transformed appropriately.</p>
<pre><code><span><span>documents </span><span>=</span><span> [</span></span>
<span><span>  %{</span></span>
<span><span>    </span><span>&#34;id&#34;</span><span> =&gt; </span><span>1</span><span>,</span></span>
<span><span>    </span><span>&#34;author&#34;</span><span> =&gt; </span><span>&#34;Mark Ericksen&#34;</span><span>,</span></span>
<span><span>    </span><span>&#34;title&#34;</span><span> =&gt; </span><span>&#34;Saving and Restoring LiveView State using the Browser&#34;</span><span>,</span></span>
<span><span>    </span><span>&#34;category&#34;</span><span> =&gt; </span><span>&#34;elixir liveview browser&#34;</span><span>,</span></span>
<span><span>    </span><span>&#34;content&#34;</span><span> =&gt; </span><span>&#34;There are multiple ways to save and restore state for your LiveView processes. You can use an external cache like Redis, your database, or even the browser itself. Sometimes there are situations where you either canâ€™t or donâ€™t want to store the state on the server. In situations like that, you do have the option of storing the state in the userâ€™s browser. This post explains how you use the browser to store state and how your LiveView process can get it back later. Weâ€™ll go through the code so you can add something similar to your own project. We cover what data to store, how to do it securely, and restoring the state on demand.&#34;</span></span>
<span><span>  },</span></span>
<span><span>  %{</span></span>
<span><span>    </span><span>&#34;id&#34;</span><span> =&gt; </span><span>2</span><span>,</span></span>
<span><span>    </span><span>&#34;author&#34;</span><span> =&gt; </span><span>&#34;Mika Kalathil&#34;</span><span>,</span></span>
<span><span>    </span><span>&#34;title&#34;</span><span> =&gt; </span><span>&#34;Creating Reusable Ecto Code&#34;</span><span>,</span></span>
<span><span>    </span><span>&#34;category&#34;</span><span> =&gt; </span><span>&#34;elixir ecto sql&#34;</span><span>,</span></span>
<span><span>    </span><span>&#34;content&#34;</span><span> =&gt; </span><span>&#34;Creating a highly reusable Ecto API is one of the ways we can create long-term sustainable code for ourselves, while growing it with our application to allow for infinite combination possibilites and high code reusability. If we write our Ecto code correctly, we can not only have a very well defined split between query definition and combination/execution using our context but also have the ability to re-use the queries we design individually, together with others to create larger complex queries.&#34;</span></span>
<span><span>  },</span></span>
<span><span>  %{</span></span>
<span><span>    </span><span>&#34;id&#34;</span><span> =&gt; </span><span>3</span><span>,</span></span>
<span><span>    </span><span>&#34;author&#34;</span><span> =&gt; </span><span>&#34;Mark Ericksen&#34;</span><span>,</span></span>
<span><span>    </span><span>&#34;title&#34;</span><span> =&gt; </span><span>&#34;ThinkingElixir 079: Collaborative Music in LiveView with Nathan Willson&#34;</span><span>,</span></span>
<span><span>    </span><span>&#34;category&#34;</span><span> =&gt; </span><span>&#34;elixir podcast liveview&#34;</span><span>,</span></span>
<span><span>    </span><span>&#34;content&#34;</span><span> =&gt; </span><span>&#34;In episode 79 of Thinking Elixir, we talk with Nathan Willson about GEMS, his collaborative music generator written in LiveView. He explains how itâ€™s built, the JS sound library integrations, what could be done by Phoenix and what is done in the browser. Nathan shares how he deployed it globally to 10 regions using Fly.io. We go over some of the challenges he overcame creating an audio focused web application. Itâ€™s a fun open-source project that pushes the boundaries of what we think LiveView apps can do!&#34;</span></span>
<span><span>  },</span></span>
<span><span>  %{</span></span>
<span><span>    </span><span>&#34;id&#34;</span><span> =&gt; </span><span>4</span><span>,</span></span>
<span><span>  	</span><span>&#34;title&#34;</span><span> =&gt; </span><span>&#34;ThinkingElixir 078: Logflare with Chase Granberry&#34;</span><span>,</span></span>
<span><span>    </span><span>&#34;author&#34;</span><span> =&gt; </span><span>&#34;Mark Ericksen&#34;</span><span>,</span></span>
<span><span>    </span><span>&#34;category&#34;</span><span> =&gt; </span><span>&#34;elixir podcast logging logflare&#34;</span><span>,</span></span>
<span><span>    </span><span>&#34;content&#34;</span><span> =&gt; </span><span>&#34;In episode 78 of Thinking Elixir, we talk with Chase Granberry about Logflare. We learn why Chase started the company, what Logflare does, how itâ€™s built on Elixir, about their custom Elixir logger, where the data is stored, how itâ€™s queried, and more! We talk about dealing with the constant stream of log data, how Logflare is collecting and displaying metrics, and talk more about Supabase acquiring the company!&#34;</span><span>,</span></span>
<span><span>  }</span></span>
<span><span>]</span></span>
<span></span>
<span><span>index </span><span>=</span><span> </span><span>Index</span><span>.</span><span>add_documents</span><span>(index, documents)</span></span>
<span></span></code></pre>
<h2>Search Index</h2>
<p>After building our index, we need to query it for relevant posts based on our criteria. But before we do that, let me explain what the search results look like:</p>
<pre><code><span><span>[</span></span>
<span><span>  %{</span></span>
<span><span>    </span><span>matched:</span><span> </span><span>3</span><span>,</span></span>
<span><span>    </span><span>positions:</span><span> %{</span></span>
<span><span>      </span><span>&#34;category&#34;</span><span> =&gt; [{</span><span>7</span><span>, </span><span>4</span><span>}],</span></span>
<span><span>      </span><span>&#34;content&#34;</span><span> =&gt; [{</span><span>27</span><span>, </span><span>4</span><span>}, {</span><span>239</span><span>, </span><span>4</span><span>}],</span></span>
<span><span>      </span><span>&#34;title&#34;</span><span> =&gt; [{</span><span>18</span><span>, </span><span>4</span><span>}]</span></span>
<span><span>    },</span></span>
<span><span>    </span><span>ref:</span><span> </span><span>2</span><span>,</span></span>
<span><span>    </span><span>score:</span><span> </span><span>1.1853013470487557</span></span>
<span><span>  }</span></span>
<span><span>]</span></span>
<span></span></code></pre>
<p>As seen above, a list of maps is returned and each map contains specific keys, <code>matched</code>, <code>positions</code>, <code>ref</code>, and <code>score</code>. See the definitions below:</p>
<ul>
<li>
<strong>matched:</strong> this field tells the number of attributes where the given query matches</li>
<li>
<strong>score:</strong> the value shows how well the document ranks compared to other documents</li>
<li>
<strong>ref:</strong> this is the document id</li>
<li>
<strong>positions:</strong> this is a map that shows the positions of the matching words in the document</li>
</ul>
<p>Now that we understand what each field stands for, let&#39;s search for the word &#34;elixir&#34; in the index. We get the below results:</p>
<pre><code><span><span>results </span><span>=</span><span> </span><span>Index</span><span>.</span><span>search</span><span>(index, </span><span>&#34;elixir&#34;</span><span>)</span></span>
<span></span>
<span><span># value of results variable</span></span>
<span><span>[</span></span>
<span><span>  %{</span></span>
<span><span>    </span><span>matched:</span><span> </span><span>2</span><span>,</span></span>
<span><span>    </span><span>positions:</span><span> %{</span></span>
<span><span>      </span><span>&#34;category&#34;</span><span> =&gt; [{</span><span>0</span><span>, </span><span>6</span><span>}],</span></span>
<span><span>      </span><span>&#34;content&#34;</span><span> =&gt; [{</span><span>26</span><span>, </span><span>7</span><span>}, {</span><span>157</span><span>, </span><span>7</span><span>}, {</span><span>184</span><span>, </span><span>6</span><span>}]</span></span>
<span><span>    },</span></span>
<span><span>    </span><span>ref:</span><span> </span><span>4</span><span>,</span></span>
<span><span>    </span><span>score:</span><span> </span><span>0.4791274455433391</span></span>
<span><span>  },</span></span>
<span><span>  %{</span></span>
<span><span>    </span><span>matched:</span><span> </span><span>2</span><span>,</span></span>
<span><span>    </span><span>positions:</span><span> %{</span></span>
<span><span>      </span><span>&#34;category&#34;</span><span> =&gt; [{</span><span>0</span><span>, </span><span>6</span><span>}],</span></span>
<span><span>      </span><span>&#34;content&#34;</span><span> =&gt; [{</span><span>26</span><span>, </span><span>7</span><span>}]</span></span>
<span><span>    },</span></span>
<span><span>    </span><span>ref:</span><span> </span><span>3</span><span>,</span></span>
<span><span>    </span><span>score:</span><span> </span><span>0.3984945971205254</span></span>
<span><span>  },</span></span>
<span><span>  %{</span></span>
<span><span>    </span><span>matched:</span><span> </span><span>1</span><span>,</span></span>
<span><span>    </span><span>positions:</span><span> %{</span><span>&#34;category&#34;</span><span> =&gt; [{</span><span>0</span><span>, </span><span>6</span><span>}]},</span></span>
<span><span>    </span><span>ref:</span><span> </span><span>2</span><span>,</span></span>
<span><span>    </span><span>score:</span><span> </span><span>0.28834807779546184</span></span>
<span><span>  },</span></span>
<span><span>  %{</span></span>
<span><span>    </span><span>matched:</span><span> </span><span>1</span><span>,</span></span>
<span><span>    </span><span>positions:</span><span> %{</span><span>&#34;category&#34;</span><span> =&gt; [{</span><span>0</span><span>, </span><span>6</span><span>}]},</span></span>
<span><span>    </span><span>ref:</span><span> </span><span>1</span><span>,</span></span>
<span><span>    </span><span>score:</span><span> </span><span>0.28834807779546184</span></span>
<span><span>  }</span></span>
<span><span>]</span></span>
<span></span></code></pre>
<p>Looking at the results we can identify what documents match the search criteria. The code snippets show the fundamental way to use Elasticlunr in your application.</p>
<h2>Nested Document Attributes</h2>
<p>As seen in the previous examples, all documents indexed were without nested attributes. But Imagine a situation where your data source returns records with nested attributes, and you want to search by these attributes - it&#39;s possible with Elasticlunr.</p>
<p>For this use case, let&#39;s assume our data source returns a list of users with their addresses, and you want to index this information. To get this to work when defining your index structure, you will need to include the top-level attribute (<code>address</code>):</p>
<pre><code><span><span>alias</span><span> </span><span>Elasticlunr</span><span>.{</span><span>Index</span><span>, </span><span>Pipeline</span><span>}</span></span>
<span></span>
<span><span>pipeline </span><span>=</span><span> </span><span>Pipeline</span><span>.</span><span>new</span><span>(</span><span>Pipeline</span><span>.</span><span>default_runners</span><span>())</span></span>
<span></span>
<span><span>users_index </span><span>=</span></span>
<span><span>  </span><span>Index</span><span>.</span><span>new</span><span>(</span><span>pipeline:</span><span> pipeline)</span></span>
<span><span>  |&gt; </span><span>Index</span><span>.</span><span>add_field</span><span>(</span><span>&#34;name&#34;</span><span>)</span></span>
<span><span>  |&gt; </span><span>Index</span><span>.</span><span>add_field</span><span>(</span><span>&#34;address&#34;</span><span>)</span></span>
<span><span>  |&gt; </span><span>Index</span><span>.</span><span>add_field</span><span>(</span><span>&#34;education&#34;</span><span>)</span></span>
<span></span></code></pre>
<p>Automatically, Elasticlunr will flatten the nested attributes to the level that when using the advanced query DSL you can use dot notation to filter the search results. Now, let&#39;s add a few user objects to the index:</p>
<pre><code><span><span>documents </span><span>=</span><span> [</span></span>
<span><span>  %{</span></span>
<span><span>    </span><span>&#34;id&#34;</span><span> =&gt; </span><span>1</span><span>,</span></span>
<span><span>    </span><span>&#34;name&#34;</span><span> =&gt; </span><span>&#34;rose mary&#34;</span><span>,</span></span>
<span><span>    </span><span>&#34;education&#34;</span><span> =&gt; </span><span>&#34;BSc.&#34;</span><span>,</span></span>
<span><span>    </span><span>&#34;address&#34;</span><span> =&gt; %{</span></span>
<span><span>      </span><span>&#34;line1&#34;</span><span> =&gt; </span><span>&#34;Brooklyn Street&#34;</span><span>,</span></span>
<span><span>      </span><span>&#34;line2&#34;</span><span> =&gt; </span><span>&#34;4181&#34;</span><span>,</span></span>
<span><span>      </span><span>&#34;city&#34;</span><span> =&gt; </span><span>&#34;Portland&#34;</span><span>,</span></span>
<span><span>      </span><span>&#34;state&#34;</span><span> =&gt; </span><span>&#34;Oregon&#34;</span><span>,</span></span>
<span><span>      </span><span>&#34;country&#34;</span><span> =&gt; </span><span>&#34;USA&#34;</span></span>
<span><span>    }</span></span>
<span><span>  },</span></span>
<span><span>  %{</span></span>
<span><span>    </span><span>&#34;id&#34;</span><span> =&gt; </span><span>2</span><span>,</span></span>
<span><span>    </span><span>&#34;name&#34;</span><span> =&gt; </span><span>&#34;jason richard&#34;</span><span>,</span></span>
<span><span>    </span><span>&#34;education&#34;</span><span> =&gt; </span><span>&#34;Msc.&#34;</span><span>,</span></span>
<span><span>    </span><span>&#34;address&#34;</span><span> =&gt; %{</span></span>
<span><span>      </span><span>&#34;line1&#34;</span><span> =&gt; </span><span>&#34;Crown Street&#34;</span><span>,</span></span>
<span><span>      </span><span>&#34;line2&#34;</span><span> =&gt; </span><span>&#34;2057&#34;</span><span>,</span></span>
<span><span>      </span><span>&#34;city&#34;</span><span> =&gt; </span><span>&#34;St Malo&#34;</span><span>,</span></span>
<span><span>      </span><span>&#34;state&#34;</span><span> =&gt; </span><span>&#34;Quebec&#34;</span><span>,</span></span>
<span><span>      </span><span>&#34;country&#34;</span><span> =&gt; </span><span>&#34;CA&#34;</span></span>
<span><span>    }</span></span>
<span><span>  },</span></span>
<span><span>  %{</span></span>
<span><span>    </span><span>&#34;id&#34;</span><span> =&gt; </span><span>3</span><span>,</span></span>
<span><span>    </span><span>&#34;name&#34;</span><span> =&gt; </span><span>&#34;peters book&#34;</span><span>,</span></span>
<span><span>    </span><span>&#34;education&#34;</span><span> =&gt; </span><span>&#34;BSc.&#34;</span><span>,</span></span>
<span><span>    </span><span>&#34;address&#34;</span><span> =&gt; %{</span></span>
<span><span>      </span><span>&#34;line1&#34;</span><span> =&gt; </span><span>&#34;Murry Street&#34;</span><span>,</span></span>
<span><span>      </span><span>&#34;line2&#34;</span><span> =&gt; </span><span>&#34;2285&#34;</span><span>,</span></span>
<span><span>      </span><span>&#34;city&#34;</span><span> =&gt; </span><span>&#34;Norfolk&#34;</span><span>,</span></span>
<span><span>      </span><span>&#34;state&#34;</span><span> =&gt; </span><span>&#34;Virginia&#34;</span><span>,</span></span>
<span><span>      </span><span>&#34;country&#34;</span><span> =&gt; </span><span>&#34;USA&#34;</span></span>
<span><span>    }</span></span>
<span><span>  },</span></span>
<span><span>  %{</span></span>
<span><span>    </span><span>&#34;id&#34;</span><span> =&gt; </span><span>4</span><span>,</span></span>
<span><span>    </span><span>&#34;name&#34;</span><span> =&gt; </span><span>&#34;jason mount&#34;</span><span>,</span></span>
<span><span>    </span><span>&#34;education&#34;</span><span> =&gt; </span><span>&#34;Highschool&#34;</span><span>,</span></span>
<span><span>    </span><span>&#34;address&#34;</span><span> =&gt; %{</span></span>
<span><span>      </span><span>&#34;line1&#34;</span><span> =&gt; </span><span>&#34;Aspen Court&#34;</span><span>,</span></span>
<span><span>      </span><span>&#34;line2&#34;</span><span> =&gt; </span><span>&#34;2057&#34;</span><span>,</span></span>
<span><span>      </span><span>&#34;city&#34;</span><span> =&gt; </span><span>&#34;Boston&#34;</span><span>,</span></span>
<span><span>      </span><span>&#34;state&#34;</span><span> =&gt; </span><span>&#34;Massachusetts&#34;</span><span>,</span></span>
<span><span>      </span><span>&#34;country&#34;</span><span> =&gt; </span><span>&#34;USA&#34;</span></span>
<span><span>    }</span></span>
<span><span>  }</span></span>
<span><span>]</span></span>
<span></span>
<span><span>users_index </span><span>=</span><span> </span><span>Index</span><span>.</span><span>add_documents</span><span>(users_index, documents)</span></span>
<span></span></code></pre>
<p>After indexing the users&#39; records, searching for &#34;jason murry&#34; in the index we get the below results:</p>
<pre><code><span><span>results </span><span>=</span><span> </span><span>Index</span><span>.</span><span>search</span><span>(users_index, </span><span>&#34;jason murry&#34;</span><span>)</span></span>
<span></span>
<span><span># value of results variable</span></span>
<span><span>[</span></span>
<span><span>  %{</span></span>
<span><span>    </span><span>matched:</span><span> </span><span>1</span><span>,</span></span>
<span><span>    </span><span>positions:</span><span> %{</span><span>&#34;address.line1&#34;</span><span> =&gt; [{</span><span>0</span><span>, </span><span>5</span><span>}]},</span></span>
<span><span>    </span><span>ref:</span><span> </span><span>3</span><span>,</span></span>
<span><span>    </span><span>score:</span><span> </span><span>0.6910333283103078</span></span>
<span><span>  },</span></span>
<span><span>  %{</span></span>
<span><span>    </span><span>matched:</span><span> </span><span>1</span><span>,</span></span>
<span><span>    </span><span>positions:</span><span> %{</span><span>&#34;name&#34;</span><span> =&gt; [{</span><span>0</span><span>, </span><span>5</span><span>}]},</span></span>
<span><span>    </span><span>ref:</span><span> </span><span>4</span><span>,</span></span>
<span><span>    </span><span>score:</span><span> </span><span>0.47830918795337357</span></span>
<span><span>  },</span></span>
<span><span>  %{</span></span>
<span><span>    </span><span>matched:</span><span> </span><span>1</span><span>,</span></span>
<span><span>    </span><span>positions:</span><span> %{</span><span>&#34;name&#34;</span><span> =&gt; [{</span><span>0</span><span>, </span><span>5</span><span>}]},</span></span>
<span><span>    </span><span>ref:</span><span> </span><span>2</span><span>,</span></span>
<span><span>    </span><span>score:</span><span> </span><span>0.47830918795337357</span></span>
<span><span>  }</span></span>
<span><span>]</span></span>
<span></span></code></pre>
<h2>Index Manager</h2>
<p>One situation you will find yourself in when using this library is where to persist your indexes but look no further than the manager provided by the library. The manager includes different CRUD functions to help you manage your index after mutating the state.</p>
<pre><code><span><span>alias</span><span> </span><span>Elasticlunr</span><span>.{</span><span>Index</span><span>, </span><span>IndexManager</span><span>}</span></span>
<span></span>
<span><span>index </span><span>=</span><span> </span><span>Index</span><span>.</span><span>new</span><span>(</span><span>name:</span><span> </span><span>&#34;test_index&#34;</span><span>)</span></span>
<span></span>
<span><span>{</span><span>:</span><span>ok</span><span>, </span><span>_</span><span>} </span><span>=</span><span> </span><span>IndexManager</span><span>.</span><span>save</span><span>(index)</span></span>
<span></span>
<span><span>index </span><span>=</span><span> </span><span>Index</span><span>.</span><span>add_field</span><span>(index, </span><span>&#34;title&#34;</span><span>)</span></span>
<span></span>
<span><span>...</span></span>
<span></span>
<span><span># after making changes to the index like adding documents or new fields</span></span>
<span><span># you should call the IndexManager.update/1 to keep the updated index in the manager</span></span>
<span><span>index </span><span>=</span><span> </span><span>IndexManager</span><span>.</span><span>update</span><span>(index)</span></span>
<span></span>
<span><span>...</span></span>
<span></span>
<span><span># use the IndexManager.get/1 to the index from the manager</span></span>
<span></span>
<span><span>index </span><span>=</span><span> </span><span>IndexManager</span><span>.</span><span>get</span><span>(</span><span>&#34;test_index&#34;</span><span>)</span></span>
<span></span>
<span><span>:</span><span>not_running</span><span> </span><span>=</span><span> </span><span>IndexManager</span><span>.</span><span>get</span><span>(</span><span>&#34;non_existent_index&#34;</span><span>)</span></span>
<span></span></code></pre>
<p>See the <a href="https://hexdocs.pm/elasticlunr/Elasticlunr.IndexManager.html#content">documentation</a> to find other available functions on the manager.</p>
<h2>Conclusion</h2>
<p>I&#39;m glad to see you get to the end of this blog post whose aim is to introduce you to the basics of the not-so-bright full-text search library â€“ it&#39;s a capable library ðŸ˜„. In the following part of this series, I will be writing about the advanced Query DSL, Index Serialization for storage.</p>
<p>In short, I can&#39;t wait to see how you use it in your applications and the problems it solves ðŸ¤—.</p>


  <section>
    
          <a href="https://atandarash.me/blog/elasticlunr-query-dsl">
        <h5>Elasticlunr Query DSL</h5>
        <h6>next</h6>
      </a>
    
    
  </section>
</article>


      </div>
    </main>
  </section></div>
  </body>
</html>
