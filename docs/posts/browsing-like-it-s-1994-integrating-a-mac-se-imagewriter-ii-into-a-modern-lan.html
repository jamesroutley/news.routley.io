<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://connor.zip/posts/2023-08-04-localtalk-ethernet">Original</a>
    <h1>Browsing like it&#39;s 1994: Integrating a Mac SE, ImageWriter II into a modern LAN</h1>
    
    <div id="readability-page-1" class="page"><div>
            <article>
                
                <figure>
                    <img src="https://connor.zip/resources/images/2023-08-04-localtalk-ethernet/macintosh-online.jpg" alt="MacWeb 0.98" width="200" height="133"/>
                    <figcaption>MacWeb 0.98</figcaption>
                </figure>
                

                <p>Before the ubiquity of the Internet, before WiFi, even before Ethernet was affordable, there was the LocalTalk physical layer and cabling system and its companion suite of protocols called AppleTalk<sup id="fnref:1"><a href="#fn:1" role="doc-noteref">1</a></sup>. A network ahead of its time in terms of plug-and-play<sup id="fnref:2"><a href="#fn:2" role="doc-noteref">2</a></sup>, but not quite as fast as 10mbit/s Ethernet at 230.4 kbit/s.</p>
<p>A few weeks ago, I found a Macintosh SE on Facebook Marketplace. It turned out to be running System 7.1, and had Microsoft Word 5 installed. Years prior, I had recapped an Apple IIGS and brought it back to life, and attempted to network it using LocalTalk and an ImageWriter II with a LocalTalk Option card, but was unsuccessful. With the Macintosh, I was finally able to use my ImageWriter II over AppleTalk!</p>
<p>Off to a good start, I wanted to expand my LocalTalk network. I swapped the ImageWriter II for an AsanteTalk and discovered that my HP LaserJet 4100N from 2004 with a 635n EIO networking card spoke EtherTalk and advertised itself as a LaserWriter. I was able to print the same document on the LaserJet, using the built-in PostScript driver for the LaserWriter -- the result was beautiful crisp text. In fact, there&#39;s another EIO card in the LaserJet; it provides USB connectivity alongside a LocalTalk port, so it could become part of my LocalTalk network as well.</p>
<figure>
<img src="https://connor.zip/resources/images/2023-08-04-localtalk-ethernet/hp-jetdirects.jpg" alt="HP JetDirect Cards"/>
<figcaption>HP JetDirect Cards</figcaption>
</figure>
<p>Next, I ordered some LocalTalk adapters from eBay to convert my 8 pin DIN to 3 pin locking LocalTalk ports which work with LocalTalk cabling. Each adapter has two ports, which supports chaining devices together. Unfortunately, LocalTalk cabling is expensive (and PhoneNet was used more often at the time), so my LocalTalk network is limited to the Macintosh and AsanteTalk for the moment. With the AsanteTalk<sup id="fnref:3"><a href="#fn:3" role="doc-noteref">3</a></sup>, we open up the possibility of interfacing with a wider Ethernet and IP network.</p>
<p>As we enter the early 90s and the Internet becomes more widely available, these older Macintosh computers were used to access it. MacTCP and the AsanteTalk helped to enable this, and that&#39;s what this post is about.</p>
<figure>
<img src="https://connor.zip/resources/images/2023-08-04-localtalk-ethernet/asantetalk.jpg" alt="AsanteTalk"/>
<figcaption>AsanteTalk</figcaption>
</figure>
<p>This post is broken down into several sections:</p>
<ul>
<li>The next section, <a href="#printing-over-localtalk">Printing over LocalTalk</a> covers the steps I used to configure my ImageWriter II and Macintosh SE to allow printing over LocalTalk.</li>
<li><a href="#netatalk-2x">Netatalk 2.x</a> covers integrating a Linux server with an Ethernet connection into an AppleTalk network.</li>
<li><a href="#printing">Printing</a> covers how to print to the ImageWriter II from a modern network, even from an iPhone via AirPrint.</li>
<li><a href="#adding-files">Adding Files</a> covers how to get files from the internet onto your Macintosh SE via AppleShare.</li>
<li><a href="#getting-online">Getting Online</a> covers using a period-correct browser, MacWeb 0.98, to browse the web.</li>
<li><a href="#system-6">System 6</a> is an adendum on work in-progress to connect a Macintosh SE running System 6 to the network.</li>
</ul>
<h2 id="printing-over-localtalk">Printing over LocalTalk</h2>
<p>Printing from a Macintosh SE to an ImageWriter is easy with the LocalTalk option card.</p>
<ul>
<li>
<p>Install the LocalTalk option card in the ImageWriter II:</p>
<ul>
<li>
<p>Lift off the lid, both clear plastic and tan pieces</p>
</li>
<li>
<p>Gently move the carriage to the extreme left</p>
</li>
<li>
<p>Remove the ribbon cartridge by lightly bending the two black tabs on either side and lifting, ensure the ribbon isn&#39;t stuck in the print head.</p>
<figure>
<img src="https://connor.zip/resources/images/2023-08-04-localtalk-ethernet/imagewriter-ii-lid-off.jpg" alt="ImageWriter II with lid and cartridge removed"/>
<figcaption>ImageWriter II with lid and cartridge removed</figcaption>
</figure>
</li>
<li>
<p>Unscrew the two golden screws on round plastic wells on either side of the printer</p>
</li>
<li>
<p>Lift up and back at the top of the printer, being careful not to pull the cable that connects the top buttons</p>
<figure>
<img src="https://connor.zip/resources/images/2023-08-04-localtalk-ethernet/imagewriter-ii-top-off.jpg" alt="ImageWriter II with top removed"/>
<figcaption>ImageWriter II with top removed</figcaption>
</figure>
</li>
<li>
<p>Place the option card atop the logic board.</p>
<figure>
<img src="https://connor.zip/resources/images/2023-08-04-localtalk-ethernet/imagewriter-ii-logic-board.jpg" alt="ImageWriter II Logic Board"/>
<figcaption>ImageWriter II Logic Board</figcaption>
</figure>
</li>
<li>
<p>Press the plastic spacers into the holes in the logic board. Slide the ground cable onto the unused stub.</p>
<figure>
<img src="https://connor.zip/resources/images/2023-08-04-localtalk-ethernet/localtalk-option-card.jpg" alt="LocalTalk Option Card"/>
<figcaption>LocalTalk Option Card</figcaption>
</figure>
</li>
<li>
<p>Ensure that <a href="https://www.nefec.org/upm/printers/mapiw2.htm">DIP switch</a> 4 on the second switch block is in the down position to enable the card</p>
<figure>
<img src="https://connor.zip/resources/images/2023-08-04-localtalk-ethernet/imagewriter-ii-switches.jpg" alt="ImageWriter II DIP Switches"/>
<figcaption>ImageWriter II DIP Switches</figcaption>
</figure>
</li>
</ul>
</li>
<li>
<p>Connect the Macintosh SE&#39;s printer port to the ImageWriter II using either a 8-pin DIN printer cable, or by using LocalTalk adapters on each side and a 3-pin DIN LocalTalk cable, or by using a Farallon PhoneNet adapter and a phone line.</p>
<figure>
<img src="https://connor.zip/resources/images/2023-08-04-localtalk-ethernet/macintosh-printer-port.jpg" alt="Macintosh SE Printer Port"/>
<figcaption>Macintosh SE Printer Port</figcaption>
</figure>
</li>
<li>
<p>In Chooser, select &#34;AppleTalk ImageWriter&#34; to set it as the default printer</p>
<figure>
<img src="https://connor.zip/resources/images/2023-08-04-localtalk-ethernet/macintosh-chooser.jpg" alt="Macintosh Chooser"/>
<figcaption>Macintosh Chooser</figcaption>
</figure>
</li>
<li>
<p>Open a document in a word processing app like Word 5.1, and print a document.</p>
<figure>
<img src="https://connor.zip/resources/images/2023-08-04-localtalk-ethernet/macintosh-word.jpg" alt="Word 5.1"/>
<figcaption>Word 5.1</figcaption>
</figure>
</li>
</ul>
<h2 id="netatalk-2x">Netatalk 2.x</h2>
<p><a href="https://github.com/Netatalk/netatalk">Netatalk</a> is the Linux implementation of several Apple protocols including AppleShare. Before 3.x, it supported AppleTalk, the protocol that Apple used before the switch to IP, importantly for us this is the protocol used over the LocalTalk and EtherTalk physical layers. There are several forks of Netatalk 2.x maintained by the retrocomputing community:</p>
<blockquote>
<p>In the 5 years since the release of Netatalk 2.2.6, an impressive number of forks and projects with their own downstream patchset to keep Netatalk running have emerged. Here are a few of the major ones that I encountered:</p>
<ul>
<li><a href="https://github.com/RasppleII/a2server">A2SERVER</a></li>
<li><a href="https://www.macip.net/">MacIP</a></li>
<li><a href="https://sheumann.github.io/AFPBridge/">AFPBridge</a></li>
<li><a href="http://cvsweb.netbsd.org/bsdweb.cgi/pkgsrc/net/netatalk22/patches/?sortby=date#dirlist">NetBSD <code>netatalk22</code> package</a></li>
<li><a href="https://github.com/christopherkobayashi/netatalk-classic"><code>netatalk-classic</code></a> fork</li>
</ul>
</blockquote>
<p>Last year, Daniel Markstedt (handles <code>rdmark</code> or <code>slipperygrey</code>) released a new <a href="https://68kmla.org/bb/index.php?threads/yet-another-netatalk-2-2-fork.39889/">Netatalk 2.x fork</a> which can be compiled on modern Linux and includes systemd services. I&#39;ll be installing it on a Fedora Server VM running on ESXi.</p>
<h3 id="compile">Compile</h3>
<p>To get <a href="https://github.com/rdmark/netatalk-2.x"><code>netatalk-2.x</code></a> installed and serving AFP and AppleTalk, we need to compile it. First, we&#39;ll install some dependencies:</p>
<pre><code>; sudo dnf install openssl-devel libgcrypt-devel libdb-devel automake libtool avahi-devel cups-devel
</code></pre>
<table>
<thead>
<tr>
<th>Dependency</th>
<th>Feature</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>avahi-devel</code></td>
<td>Zeroconf (Bonjour) service discovery in Mac OS X 10.2 or later</td>
</tr>
<tr>
<td><code>cups-devel</code></td>
<td><code>papd</code> printer server support</td>
</tr>
<tr>
<td><code>libgcrypt-devel</code></td>
<td>DHX2 authentication support, required for Mac OS X 10.2 or later</td>
</tr>
</tbody>
</table>
<p>Then we&#39;ll need the <code>appletalk</code> kernel module for AppleTalk network support. On Fedora this is provided by <code>kernel-modules-extra</code>, but not on Fedora 35:</p>
<pre><code>; sudo dnf install kernel-modules-extra
</code></pre>
<p>On Fedora, the <code>appletalk</code> module is blacklisted. To allow it, edit the file <code>/etc/modprobe.d/appletalk-blacklist.conf</code> and comment out the last line:</p>
<pre><code># This kernel module can be automatically loaded by non-root users. To
# enhance system security, the module is blacklisted by default to ensure
# system administrators make the module available for use as needed.
# See https://access.redhat.com/articles/3760101 for more details.
#
# Remove the blacklist by adding a comment # at the start of the line.
#blacklist appletalk
</code></pre>
<p>Then have the module load automatically<sup id="fnref:4"><a href="#fn:4" role="doc-noteref">4</a></sup>, we need to add the file <code>/etc/modules-load.d/appletalk.conf</code>:</p>
<pre><code># Load appletalk.ko at boot
appletalk
</code></pre>
<p>which configures the <code>systemd-modules-load.service</code> service. You can test it with:</p>
<pre><code>; sudo systemctl start systemd-modules-load.service
; journalctl -n 10 -u systemd-modules-load.service
Aug 05 01:25:44 misc.home.arpa systemd[1]: Starting systemd-modules-load.service - Load Kernel Modules...
Aug 05 01:25:44 misc.home.arpa systemd-modules-load[1433]: Inserted module &#39;appletalk&#39;
...
</code></pre>
<p>Upon reboot, the module should be automatically loaded. To test the module is loaded:</p>
<pre><code>; lsmod | grep &#39;^appletalk&#39;
</code></pre>
<p>and to manually load the module:</p>
<pre><code>; sudo modprobe appletalk
</code></pre>
<p>To compile <code>netatalk-2.x</code>, first clone the repo:</p>
<pre><code>; git clone https://github.com/rdmark/netatalk-2.x.git
</code></pre>
<p>Then run the boostrap script<sup id="fnref:5"><a href="#fn:5" role="doc-noteref">5</a></sup>.</p>
<pre><code>; ./bootstrap
</code></pre>
<p>Now run the configure script, options are described in <a href="https://68kmla.org/bb/index.php?threads/yet-another-netatalk-2-2-fork.39889/">this post</a>.</p>
<pre><code>; ./configure --enable-systemd --enable-ddp --enable-a2boot --enable-cups --enable-timelord --enable-zeroconf --disable-quota --sysconfdir=/etc --with-uams-path=/usr/lib/netatalk
</code></pre>
<p>Finally, run <code>make</code> then <code>make install</code> as root.</p>
<pre><code>; make
; sudo make install
</code></pre>
<h3 id="configure">Configure</h3>
<p>Now you should have the systemd services in place for <code>atalkd.service</code> and <code>afpd.service</code> among others. First let&#39;s set up some minimal config files under <code>/etc/netatalk/</code>:</p>
<p>To configure <code>atalkd.conf</code>, you&#39;ll need the name of the interface that an AppleTalk network will be present on (a LAN):</p>
<pre><code>; ip addr
1: lo: ...
    ....
2: ens160: ...
    ....
...
</code></pre>
<p>In my case my VM&#39;s interface is named <code>ens160</code>, so my <code>/etc/netatalk/atalkd.conf</code> file ends with the line:</p>
<pre><code>ens160 -router -phase 2 -net 1 -addr 1.41 -zone &#34;office&#34;
</code></pre>
<p>Next is Apple Filing Protocol, which is configured in <code>/etc/netatalk/afpd.conf</code>:</p>
<pre><code>&#34;Office&#34; -transall -uamlist uams_guest.so,uams_clrtxt.so,uams_dhx2.so
</code></pre>
<p>I use <code>&#34;Office&#34;</code> instead of <code>-</code> because I want a friendly name instead of the VM hostname. <code>transall</code> enables both DSI (Data Stream Interface<sup id="fnref:6"><a href="#fn:6" role="doc-noteref">6</a></sup>) over TCP and DDP (Datagram Delivery Protocol<sup id="fnref:7"><a href="#fn:7" role="doc-noteref">7</a></sup>) aka EtherTalk, the AppleTalk data link layer on the Ethernet physical layer. The modules listed enable both DDP and DSI, the guest UAM for anonymous read-only access, the clrtxt UAM for Classic Mac OS authentication, and DHX2 UAM for Mac OS X / macOS authentication. The guest login only allows read-only access to shares, and System 7&#39;s AppleTalk interface in Chooser limits passwords to 8 characters. Netatalk authenticates against system users, so I created a new <code>macintosh</code> user with an 8-character password to allow logins.</p>
<pre><code>; sudo useradd macintosh
; sudo passwd macintosh
</code></pre>
<p>Next is the <code>AppleVolumes.default</code> file, which defines the volumes available to connecting systems. By default a user&#39;s home directory is exposed as a share with this line</p>
<pre><code>~
</code></pre>
<p>but we can also add other shares:</p>
<pre><code>/srv/appletalk &#34;Share&#34; options:prodos
</code></pre>
<p>This creates a share at <code>/srv/appletalk</code>, named <em>Share</em>, with the prodos option which allows the Apple IIGS to use the share or boot from it.</p>
<p>You can now enable the services:</p>
<pre><code>; sudo systemctl enable --now atalkd.service
; sudo systemctl enable --now afpd.service
</code></pre>
<h3 id="firewall">Firewall</h3>
<p>To ensure we can access these shares over TCP using <code>afpovertcp</code> from a modern mac, we need to open the firewall. I created a new service for the port and enabled it:</p>
<pre><code>; sudo firewall-cmd --permanent --new-service=afpovertcp
; sudo firewall-cmd --permanent --service=afpovertcp --add-port=548/tcp
; sudo firewall-cmd --permanent --add-service=afpovertcp
; sudo firewall-cmd --reload
</code></pre>
<h2 id="printing">Printing</h2>
<p>Netatalk also includes a Printer Access Protocol daemon called <code>papd</code> which integrates with CUPS and provides bidirectional printing support.</p>
<figure>
<img src="https://connor.zip/resources/images/2023-08-04-localtalk-ethernet/imagewriter-ii.jpg" alt="Apple ImageWriter II"/>
<figcaption>Apple ImageWriter II</figcaption>
</figure>
<h3 id="macintosh-to-cups">Macintosh to CUPS</h3>
<p>Next we&#39;ll edit <code>/etc/netatalk/papd.conf</code> to expose our CUPS printers to the AppleTalk network, see these <a href="https://github.com/PiSCSI/piscsi/wiki/AFP-File-Sharing#sharing-a-modern-printer-over-appletalk">directions</a>:</p>
<pre><code>cupsautoadd:op=root:
</code></pre>
<p>The <a href="https://netatalk.sourceforge.io/2.0/htmldocs/papd.conf.5.html">documentation</a> tells us:</p>
<blockquote>
<p>If used as the first entry in papd.conf this will share all CUPS printers via papd. type/zone settings as well as other parameters assigned to this special printer share will apply to all CUPS printers. Unless the pd option is set, the CUPS PPDs will be used. To overwrite these global settings for individual printers simply add them subsequently to papd.conf and assign different settings.</p>
</blockquote>
<p>We should now enable the service</p>
<pre><code>; sudo systemctl enable --now papd.service
</code></pre>
<h3 id="cups-to-imagewriter-ii">CUPS to ImageWriter II</h3>
<p>To have CUPS print to an AppleTalk printer, we need a <code>pap</code> backend, there are good directions <a href="https://www.emaculation.com/doku.php/appletalk_printserver_macos_and_osx#sectionedit19">here</a><sup id="fnref:8"><a href="#fn:8" role="doc-noteref">8</a></sup>. By default, the backend only looks for <code>LaserWriter</code> devices, edit <code>/usr/lib/cups/backend/pap</code> so that <code>devicetypes</code> reflects this or set it to <code>devicetypes=&#34;=&#34;</code> to find all devices.</p>
<pre><code>devicetypes=&#34;LaserWriter:ImageWriter&#34;
</code></pre>
<p>With the <code>pap</code> backend in place, we should see our printer here:</p>
<pre><code>lpinfo -v
...
network pap://office/HP%20LaserJet%204100%20Series/LaserWriter
network pap://office/ImageWriter/ImageWriter
</code></pre>
<p>If it doesn&#39;t show up, ensure your printer is shared over AppleTalk:</p>
<pre><code>; nbplkup
...
    AsantéTalk 94B02967:Asant�Talk                         1.111:252
            ImageWriter:ImageWriter                        1.113:138
</code></pre>
<p>We also need to update our <code>/etc/cups/cupsd.conf</code> file with:</p>
<pre><code>BrowseOrder allow,deny
BrowseAllow all
BrowseRemoteProtocols CUPS dnssd pap
BrowseAddress @LOCAL
BrowseLocalProtocols CUPS dnssd pap
</code></pre>
<p>and restart the services:</p>
<pre><code>; sudo systemctl restart cups.service
</code></pre>
<p>Now in the CUPS UI, under Administration &gt; Add a Printer, you should see the AppleTalk Devices via pap option. Select it and continue, then copy the URL from <code>lpinfo -v</code> or constructed from <code>nbplkup</code> info into the form, name the printer, and upload the <a href="https://www.openprinting.org/printer/Apple/Apple-ImageWriter_II">ImageWriter II PPD file</a>.</p>
<p>We need to patch<sup id="fnref:9"><a href="#fn:9" role="doc-noteref">9</a></sup> our Netatalk 2.x distribution so that the status check doesn&#39;t error on ImageWriter IIs. Apply this <a href="https://connor.zip/resources/patches/netatalk-2.x/0001-Fix-PAP-status-for-ImageWriter-II.patch">patch</a> to your <code>netatalk-2.x</code> directory:</p>
<pre><code>; curl -s https://connor.zip/resources/patches/netatalk-2.x/0001-Fix-PAP-status-for-ImageWriter-II.patch | git apply -
; make
; sudo make install
; sudo sytemctl restart papd.service
</code></pre>
<p>Now from the CUPS UI, you can print a test page and it should print from the ImageWriter II:</p>
<figure>
<img src="https://connor.zip/resources/images/2023-08-04-localtalk-ethernet/imagewriter-ii-cups-test-page.jpg" alt="ImageWriter II printing the CUPS test page"/>
<figcaption>ImageWriter II printing the CUPS test page</figcaption>
</figure>
<p>By adding a Avahi service file, we can even print via AirPrint:</p>
<pre><code>&lt;?xml version=&#34;1.0&#34; ?&gt;
&lt;!DOCTYPE service-group  SYSTEM &#39;avahi-service.dtd&#39;&gt;
&lt;service-group&gt;
	&lt;name&gt;ImageWriter II&lt;/name&gt;
	&lt;service&gt;
		&lt;type&gt;_ipp._tcp&lt;/type&gt;
		&lt;subtype&gt;_universal._sub._ipp._tcp&lt;/subtype&gt;
		&lt;port&gt;631&lt;/port&gt;
		&lt;txt-record&gt;txtvers=1&lt;/txt-record&gt;
		&lt;txt-record&gt;qtotal=1&lt;/txt-record&gt;
		&lt;txt-record&gt;UUID=EF910D03-69A2-44BC-B793-2966D282B0A4&lt;/txt-record&gt;
		&lt;txt-record&gt;Binary=T&lt;/txt-record&gt;
		&lt;txt-record&gt;TBCP=T&lt;/txt-record&gt;
		&lt;txt-record&gt;kind=document&lt;/txt-record&gt;
		&lt;txt-record&gt;URF=none&lt;/txt-record&gt;
		&lt;txt-record&gt;rp=printers/imagewriter&lt;/txt-record&gt;
		&lt;txt-record&gt;note=Office&lt;/txt-record&gt;
		&lt;txt-record&gt;product=(ImageWriter II)&lt;/txt-record&gt;
		&lt;txt-record&gt;pdl=application/octet-stream,application/pdf,application/postscript,application/vnd.cups-raster,image/gif,image/jpeg,image/png,image/tiff,image/urf,text/html,text/plain,application/vnd.adobe-reader-postscript,application/vnd.cups-pdf&lt;/txt-record&gt;
	&lt;/service&gt;
&lt;/service-group&gt;
</code></pre>
<p>The final flow is:</p>
<figure>
<svg width="1504pt" height="115pt" viewBox="0.00 0.00 1504.00 115.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="graph0" transform="scale(1 1) rotate(0) translate(4 111)"><title>%3</title><polygon fill="white" stroke="transparent" points="-4,4 -4,-111 1500,-111 1500,4 -4,4"></polygon><g id="clust1"><title>cluster_vm</title><polygon fill="none" stroke="black" points="210,-8 210,-99 844,-99 844,-8 210,-8"></polygon><text text-anchor="middle" x="527" y="-83.8" font-family="Times,serif" font-size="14.00">VM</text></g><g id="clust2"><title>cluster_iw</title><polygon fill="none" stroke="black" points="1152,-8 1152,-99 1488,-99 1488,-8 1152,-8"></polygon><text text-anchor="middle" x="1320" y="-83.8" font-family="Times,serif" font-size="14.00">ImageWriter II</text></g><!-- iphone --><g id="node1"><title>iphone</title><polygon fill="none" stroke="black" points="85,-67.5 0,-67.5 0,-16.5 85,-16.5 85,-67.5"></polygon><text text-anchor="middle" x="42.5" y="-38.3" font-family="Times,serif" font-size="14.00">iPhone</text></g><!-- cups --><g id="node2"><title>cups</title><polygon fill="none" stroke="black" points="297,-67.5 218,-67.5 218,-16.5 297,-16.5 297,-67.5"></polygon><text text-anchor="middle" x="257.5" y="-38.3" font-family="Times,serif" font-size="14.00">CUPS</text></g><!-- iphone->cups --><g id="edge3"><title>iphone-&gt;cups</title><path fill="none" stroke="black" d="M85.07,-42C120.27,-42 170.75,-42 207.82,-42"></path><polygon fill="black" stroke="black" points="207.9,-45.5 217.9,-42 207.9,-38.5 207.9,-45.5"></polygon><text text-anchor="middle" x="151.5" y="-45.8" font-family="Times,serif" font-size="14.00">PDF over IPP</text></g><!-- driver --><g id="node3"><title>driver</title><polygon fill="none" stroke="black" points="586,-67.5 381,-67.5 381,-16.5 586,-16.5 586,-67.5"></polygon><text text-anchor="middle" x="483.5" y="-38.3" font-family="Times,serif" font-size="14.00">GhostScript iwhi driver</text></g><!-- cups->driver --><g id="edge1"><title>cups-&gt;driver</title><path fill="none" stroke="black" d="M297.01,-42C317.64,-42 344.22,-42 370.79,-42"></path><polygon fill="black" stroke="black" points="370.96,-45.5 380.96,-42 370.96,-38.5 370.96,-45.5"></polygon><text text-anchor="middle" x="339" y="-45.8" font-family="Times,serif" font-size="14.00">Filters</text></g><!-- pap --><g id="node4"><title>pap</title><polygon fill="none" stroke="black" points="836,-67.5 706,-67.5 706,-16.5 836,-16.5 836,-67.5"></polygon><text text-anchor="middle" x="771" y="-38.3" font-family="Times,serif" font-size="14.00">PAP Backend</text></g><!-- driver->pap --><g id="edge2"><title>driver-&gt;pap</title><path fill="none" stroke="black" d="M586.36,-42C622.5,-42 662.45,-42 695.84,-42"></path><polygon fill="black" stroke="black" points="695.98,-45.5 705.98,-42 695.98,-38.5 695.98,-45.5"></polygon><text text-anchor="middle" x="646" y="-45.8" font-family="Times,serif" font-size="14.00">Raster data</text></g><!-- asante --><g id="node5"><title>asante</title><polygon fill="none" stroke="black" points="1057,-67.5 942,-67.5 942,-16.5 1057,-16.5 1057,-67.5"></polygon><text text-anchor="middle" x="999.5" y="-38.3" font-family="Times,serif" font-size="14.00">AsanteTalk</text></g><!-- pap->asante --><g id="edge4"><title>pap-&gt;asante</title><path fill="none" stroke="black" d="M846.62,-42C874.09,-42 905,-42 931.73,-42"></path><polygon fill="black" stroke="black" points="846.3,-38.5 836.3,-42 846.3,-45.5 846.3,-38.5"></polygon><polygon fill="black" stroke="black" points="931.76,-45.5 941.76,-42 931.76,-38.5 931.76,-45.5"></polygon><text text-anchor="middle" x="889" y="-45.8" font-family="Times,serif" font-size="14.00">EtherTalk</text></g><!-- card --><g id="node6"><title>card</title><polygon fill="none" stroke="black" points="1355,-67.5 1160,-67.5 1160,-16.5 1355,-16.5 1355,-67.5"></polygon><text text-anchor="middle" x="1257.5" y="-38.3" font-family="Times,serif" font-size="14.00">LocalTalk Option Card</text></g><!-- asante->card --><g id="edge6"><title>asante-&gt;card</title><path fill="none" stroke="black" d="M1067.46,-42C1092.59,-42 1121.82,-42 1149.67,-42"></path><polygon fill="black" stroke="black" points="1067.31,-38.5 1057.31,-42 1067.31,-45.5 1067.31,-38.5"></polygon><polygon fill="black" stroke="black" points="1149.86,-45.5 1159.86,-42 1149.86,-38.5 1149.86,-45.5"></polygon><text text-anchor="middle" x="1108.5" y="-45.8" font-family="Times,serif" font-size="14.00">LocalTalk</text></g><!-- printer --><g id="node7"><title>printer</title><polygon fill="none" stroke="black" points="1480,-67.5 1392,-67.5 1392,-16.5 1480,-16.5 1480,-67.5"></polygon><text text-anchor="middle" x="1436" y="-38.3" font-family="Times,serif" font-size="14.00">Printer</text></g><!-- card->printer --><g id="edge5"><title>card-&gt;printer</title><path fill="none" stroke="black" d="M1355.01,-42C1364.17,-42 1373.2,-42 1381.72,-42"></path><polygon fill="black" stroke="black" points="1381.82,-45.5 1391.82,-42 1381.82,-38.5 1381.82,-45.5"></polygon></g></g></svg></figure>
<h2 id="adding-files">Adding files</h2>
<p>In each share, Netatalk creats metadata stores. Files in the share only represent only <em>part</em> of a file, the metadata is maintained in these databaes. If you add a Macintosh file in Linux, or even if you copy an existing file to a new name, it&#39;ll show up to the Macintosh as an unknown file -- the metadata about how to open it has been lost. This presents quite a problem: without a Macintosh with the file, how can I add files to my share? I&#39;ve come up with a couple of options:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/StuffIt">StuffIt</a> is a program for creating archive files. These file contain this special metadata and it&#39;s recreated when StuffIt Expander is run on a Macintosh on one of these files, so the files can be handled by other operating systems and file systems without losing it. It was a common way to provide Macintosh files over the internet at the time. If your Mac doesn&#39;t already have StuffIt installed, but has a working floppy disk drive, you may be able to <code>dd</code> an <code>.img</code> image file onto a floppy using a USB floppy drive. Macs use variable speed writes and so PCs can&#39;t read their floppys, but I believe the reverse is possible.</li>
<li><a href="https://basilisk.cebix.net/">Basilisk II</a> a Macintosh emulator which could emulate a client Mac and allow you to add files to the share. The latest version as of writing with support for ARM-based Macs is <a href="https://www.emaculation.com/forum/viewtopic.php?f=6&amp;t=7361">here</a>, and the GUI is <a href="https://www.emaculation.com/forum/viewtopic.php?f=6&amp;t=10454">here</a>, follow this <a href="https://www.emaculation.com/doku.php/basiliskii_osx_setup">guide</a> and then <a href="https://www.emaculation.com/doku.php/appletalk_for_sheepshaver">this one</a> for AppleTalk. We can add an image file of a floppy containing StuffIt to install it, then we can copy that program onto the share.</li>
</ul>
<p>When using <code>slirp</code> with Basilisk II, the IP configuration (using OpenTransport) are <em>not</em> the settings from your network, but the network within Basilisk II:</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>IP Address</td>
<td>10.0.2.15</td>
</tr>
<tr>
<td>Subnet mask</td>
<td>255.255.255.0</td>
</tr>
<tr>
<td>Router address</td>
<td>10.0.2.2</td>
</tr>
<tr>
<td>Name server address</td>
<td>10.0.2.3</td>
</tr>
</tbody>
</table>
<p>I couldn&#39;t get <code>slirp</code> to work, but I discovered that the shared directory between macOS and System 7 on Basilisk II can hold the StuffIt files going into Basilisk II <em>and</em> the resulting decompressed files. And macOS can handle Macintosh files without disrupting the metadata. We can mount the Netatalk AFP server to our modern Mac via <code>afpovertcp</code>, then copy the un-stuffed program files from Basilisk II from the share folder to our AFP folder. Or, we can make the AFP share folder our Basilisk II share folder and skip the extra copy. I was able to copy the StuffIt program file this way from Basilisk II to my Macintosh SE.</p>
<figure>
<svg width="600pt" height="214pt" viewBox="0.00 0.00 600.00 214.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="graph0" transform="scale(1 1) rotate(0) translate(4 210)"><title>%3</title><polygon fill="white" stroke="transparent" points="-4,4 -4,-210 596,-210 596,4 -4,4"></polygon><g id="clust1"><title>cluster_laptop</title><polygon fill="none" stroke="black" points="8,-107 8,-198 370,-198 370,-107 8,-107"></polygon><text text-anchor="middle" x="189" y="-182.8" font-family="Times,serif" font-size="14.00">Laptop</text></g><g id="clust2"><title>cluster_mac</title><polygon fill="none" stroke="black" points="238,-8 238,-99 370,-99 370,-8 238,-8"></polygon><text text-anchor="middle" x="304" y="-83.8" font-family="Times,serif" font-size="14.00">Macintosh SE</text></g><!-- basilisk --><g id="node1"><title>basilisk</title><polygon fill="none" stroke="black" points="123,-166.5 16,-166.5 16,-115.5 123,-115.5 123,-166.5"></polygon><text text-anchor="middle" x="69.5" y="-137.3" font-family="Times,serif" font-size="14.00">Basilisk II</text></g><!-- tcpshare --><g id="node2"><title>tcpshare</title><polygon fill="none" stroke="black" points="362,-166.5 246,-166.5 246,-115.5 362,-115.5 362,-166.5"></polygon><text text-anchor="middle" x="304" y="-137.3" font-family="Times,serif" font-size="14.00">AFP mount</text></g><!-- basilisk->tcpshare --><g id="edge1"><title>basilisk-&gt;tcpshare</title><path fill="none" stroke="black" d="M123.26,-141C156.55,-141 199.86,-141 235.62,-141"></path><polygon fill="black" stroke="black" points="235.98,-144.5 245.98,-141 235.98,-137.5 235.98,-144.5"></polygon><text text-anchor="middle" x="184.5" y="-144.8" font-family="Times,serif" font-size="14.00">share folder</text></g><!-- netatalk --><g id="node4"><title>netatalk</title><polygon fill="none" stroke="black" points="592,-123.5 468,-123.5 468,-72.5 592,-72.5 592,-123.5"></polygon><text text-anchor="middle" x="530" y="-94.3" font-family="Times,serif" font-size="14.00">Netatalk 2.x</text></g><!-- tcpshare->netatalk --><g id="edge2"><title>tcpshare-&gt;netatalk</title><path fill="none" stroke="black" d="M362.1,-130.04C391.23,-124.45 426.93,-117.59 457.83,-111.66"></path><polygon fill="black" stroke="black" points="458.52,-115.09 467.68,-109.77 457.2,-108.22 458.52,-115.09"></polygon><text text-anchor="middle" x="415" y="-128.8" font-family="Times,serif" font-size="14.00">TCP</text></g><!-- share --><g id="node3"><title>share</title><polygon fill="none" stroke="black" points="362,-67.5 246,-67.5 246,-16.5 362,-16.5 362,-67.5"></polygon><text text-anchor="middle" x="304" y="-38.3" font-family="Times,serif" font-size="14.00">AFP mount</text></g><!-- share->netatalk --><g id="edge3"><title>share-&gt;netatalk</title><path fill="none" stroke="black" d="M362.1,-56.28C391.23,-63.56 426.93,-72.48 457.83,-80.21"></path><polygon fill="black" stroke="black" points="457.13,-83.64 467.68,-82.67 458.83,-76.85 457.13,-83.64"></polygon><text text-anchor="middle" x="415" y="-79.8" font-family="Times,serif" font-size="14.00">AppleTalk</text></g></g></svg></figure>
<p>There are several file formats used for old files:</p>
<ul>
<li><code>.sit</code> or <code>.sea</code> are archives created by StuffIt, StuffIt 4.x runs on a Macintosh but can&#39;t open archives from newer versions.</li>
<li><code>.bin</code> and <code>.hqx</code> which are extractable with Archive Utility on a modern macOS.</li>
</ul>
<p>Sometimes an <code>.img</code> file may be StuffIt compressed, to deal with that:</p>
<ul>
<li>Copy the file into the share folder for the emulator</li>
<li>On the emulator, StuffIt expand the file by dragging it onto the StuffIt Expander app</li>
<li>Shut down the emulator</li>
<li>In the Basilisk II GUI, add as a disk the expanded <code>.img</code> file in the share folder</li>
<li>Start the emulator, the files are available on the mounted disk iamge</li>
</ul>
<p>Here is an <a href="https://system7today.com/sys71-on-68k/">update list</a>, and here&#39;s <a href="https://erichelgeson.github.io/blog/2021/03/23/ultimate-system-7.1/">another</a> for System 7.1.</p>
<h2 id="getting-online">Getting Online</h2>
<h3 id="mac-ip-gateway">Mac IP Gateway</h3>
<p>To get our Macintosh online, we need either OpenTransport<sup id="fnref:10"><a href="#fn:10" role="doc-noteref">10</a></sup> (for newer versions of System 7) or MacTCP. They both work by proxying IP packets over AppleTalk where a gateway, (originally a newer Mac running Apple IP Gateway<sup id="fnref:11"><a href="#fn:11" role="doc-noteref">11</a></sup>) translates them to IP on Ethernet.</p>
<p>Using <a href="https://github.com/jasonking3/macipgw"><code>macipgw</code></a>, which was originally written for <a href="https://macipgw.sourceforge.io/">FreeBSD</a> but has now been ported to Linux, we can provide this gateway. The AppleTalk packets themselves are copied from LocalTalk to Ethernet by an AsanteTalk, and since EtherTalk is routed over Ethernet and not IP, any system or VM running this software or Netatalk 2.x must have a physical Ethernet connection. Unfortunately, <code>macipgw</code> requires a kernel with <code>CONFIG_IPDDP</code> disabled:</p>
<blockquote>
<p>Your kernel must be configured with the CONFIG_IPDDP option disabled completely. It is not sufficient to compile it as a module -- in order to support the module, the kernel is modified to intercept all MacIP traffic, so userspace applications such as macipgw cannot handle it.</p>
</blockquote>
<p>And my Federa 37 kernel on the VM where I run Netatalk has it configured as a module:</p>
<pre><code>; cat /boot/config-$(uname -r) | grep CONFIG_IPDDP
CONFIG_IPDDP=m
CONFIG_IPDDP_ENCAP=y
</code></pre>
<p>There is a ready made ISO image from <a href="https://www.macip.net/tinymacipgw-iso/">macip.net</a> based on Tiny Core Linux, which I can run on ESXi with 512MB of memory and no hard disk (it&#39;s a live CD).</p>
<h3 id="macweb">MacWeb</h3>
<p>Using MacWeb 0.98 and MacTCP configured with the IPs provided by <code>tinymacipgw</code>, I was able to access the local network and load this blog&#39;s index page from the Kubernetes cluster in my office closet. I attempted to use Netscape Navigator and iCab based on the list from <a href="https://system7today.com/otherbrowsers">here</a> to no avail, Netscape Navigator crashed and iCab reported that it didn&#39;t have enough memory (the Macintosh has 4MB of RAM which is the maximum configurable).</p>
<figure>
<img src="https://connor.zip/resources/images/2023-08-04-localtalk-ethernet/macintosh-online-wide.jpg" alt="MacWeb 0.98 on a Macintosh SE running System 7.1"/>
<figcaption>MacWeb 0.98 on a Macintosh SE running System 7.1</figcaption>
</figure>
<p>Below is a diagram of the path from the Mac to the internet:</p>
<figure>
<svg width="1079pt" height="115pt" viewBox="0.00 0.00 1079.35 115.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="graph0" transform="scale(1 1) rotate(0) translate(4 111)"><title>%3</title><polygon fill="white" stroke="transparent" points="-4,4 -4,-111 1075.35,-111 1075.35,4 -4,4"></polygon><g id="clust1"><title>cluster_mac</title><polygon fill="none" stroke="black" points="8,-8 8,-99 290,-99 290,-8 8,-8"></polygon><text text-anchor="middle" x="149" y="-83.8" font-family="Times,serif" font-size="14.00">Macintosh SE</text></g><g id="clust2"><title>cluster_vms</title><polygon fill="none" stroke="black" points="598,-8 598,-99 908,-99 908,-8 598,-8"></polygon><text text-anchor="middle" x="753" y="-83.8" font-family="Times,serif" font-size="14.00">ESXi</text></g><!-- macweb --><g id="node1"><title>macweb</title><polygon fill="none" stroke="black" points="149,-67.5 16,-67.5 16,-16.5 149,-16.5 149,-67.5"></polygon><text text-anchor="middle" x="82.5" y="-38.3" font-family="Times,serif" font-size="14.00">MacWeb 0.98</text></g><!-- mactcp --><g id="node2"><title>mactcp</title><polygon fill="none" stroke="black" points="282,-67.5 186,-67.5 186,-16.5 282,-16.5 282,-67.5"></polygon><text text-anchor="middle" x="234" y="-38.3" font-family="Times,serif" font-size="14.00">MacTCP</text></g><!-- macweb->mactcp --><g id="edge1"><title>macweb-&gt;mactcp</title><path fill="none" stroke="black" d="M149.07,-42C157.98,-42 167.07,-42 175.81,-42"></path><polygon fill="black" stroke="black" points="175.89,-45.5 185.89,-42 175.89,-38.5 175.89,-45.5"></polygon></g><!-- asante --><g id="node3"><title>asante</title><polygon fill="none" stroke="black" points="500,-67.5 385,-67.5 385,-16.5 500,-16.5 500,-67.5"></polygon><text text-anchor="middle" x="442.5" y="-38.3" font-family="Times,serif" font-size="14.00">AsanteTalk</text></g><!-- mactcp->asante --><g id="edge2"><title>mactcp-&gt;asante</title><path fill="none" stroke="black" d="M282.12,-42C309.49,-42 344.44,-42 374.63,-42"></path><polygon fill="black" stroke="black" points="374.66,-45.5 384.66,-42 374.66,-38.5 374.66,-45.5"></polygon><text text-anchor="middle" x="333.5" y="-45.8" font-family="Times,serif" font-size="14.00">LocalTalk</text></g><!-- macip --><g id="node4"><title>macip</title><polygon fill="none" stroke="black" points="754,-67.5 606,-67.5 606,-16.5 754,-16.5 754,-67.5"></polygon><text text-anchor="middle" x="680" y="-38.3" font-family="Times,serif" font-size="14.00">MacIP Gateway</text></g><!-- asante->macip --><g id="edge4"><title>asante-&gt;macip</title><path fill="none" stroke="black" d="M500.21,-42C528.82,-42 564.09,-42 595.71,-42"></path><polygon fill="black" stroke="black" points="595.84,-45.5 605.84,-42 595.84,-38.5 595.84,-45.5"></polygon><text text-anchor="middle" x="553" y="-45.8" font-family="Times,serif" font-size="14.00">EtherTalk</text></g><!-- router --><g id="node5"><title>router</title><polygon fill="none" stroke="black" points="900,-67.5 806,-67.5 806,-16.5 900,-16.5 900,-67.5"></polygon><text text-anchor="middle" x="853" y="-38.3" font-family="Times,serif" font-size="14.00">pfSense</text></g><!-- macip->router --><g id="edge3"><title>macip-&gt;router</title><path fill="none" stroke="black" d="M754.02,-42C768.05,-42 782.54,-42 795.93,-42"></path><polygon fill="black" stroke="black" points="795.94,-45.5 805.94,-42 795.94,-38.5 795.94,-45.5"></polygon><text text-anchor="middle" x="780" y="-45.8" font-family="Times,serif" font-size="14.00">IP</text></g><!-- internet --><g id="node6"><title>internet</title><ellipse fill="none" stroke="black" cx="1004.18" cy="-42" rx="67.35" ry="36.12"></ellipse><text text-anchor="middle" x="1004.18" y="-38.3" font-family="Times,serif" font-size="14.00">Internet</text>
</g>
<!-- router->internet -->
<g id="edge5">
<title>router-&gt;internet</title>
<path fill="none" stroke="black" d="M900.38,-42C908.77,-42 917.72,-42 926.7,-42"></path>
<polygon fill="black" stroke="black" points="926.83,-45.5 936.83,-42 926.83,-38.5 926.83,-45.5"></polygon>
</g>
</g>
</svg>
</figure>
<p>Here&#39;s what an HTTP request from MacWeb looks like:</p>
<pre><code>; nc -vv -l 0.0.0.0 -p 8000
Connection from 10.0.2.250:1698
GET / HTTP/1.0
Accept: application/mac-binhex40 q=0.500
Accept: audio/basic q=0.500
Accept: image/gif q=0.500
Accept: image/jpeg q=0.500
Accept: image/pict q=0.500
Accept: image/x-xbitmap q=0.500
Accept: video/mpeg q=0.500
Accept: video/quicktime q=0.500
Accept: www/source q=0.300
Accept: www/unknown q=0.300
Accept: application/octet-stream q=0.100
Accept: text/plain
Accept: text/html
User-Agent:  MacWeb/libwww/2.13  libwww/unknown
</code></pre>
<p>The <code>Accept</code> header syntax has some quirks when compared to the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept">standard</a>. Instead of separating the options with <code>,</code> on a single line, each option gets its own line; and instead of separating each option and its <code>q=</code> with a <code>;</code>, there is a space. The browser also places the <em>most</em> preferred format at the end, instead of at the beginning as would be expected within a single line to distinguish between multiple values with no <code>q</code>. And, it has no support for <code>application/xhtml+xml</code>, a <a href="https://www.iana.org/assignments/media-types/application/xhtml+xml">MIME type</a> registered in 2002 well after its release. After some adjustments, this website is now viewable on MacWeb 0.98, although all pages except the index seem to hang (I assume because they&#39;re too large).</p>
<p>There are also some interesting MIME types in the request, like <a href="https://datatracker.ietf.org/doc/html/rfc1741">BinHex</a> for applications or <a href="https://www.iana.org/assignments/media-types/audio/basic"><code>audio/basic</code></a> for audio (the digital audio encoding introduced by the telephone system)</p>
<blockquote>
<p>The content of the &#34;audio/basic&#34; subtype is single channel audio encoded using 8bit ISDN mu-law [PCM] at a sample rate of 8000 Hz.</p>
</blockquote>
<p>It also advertises <code>image/pict</code> for the <a href="https://www.prepressure.com/library/file-formats/pict">PICT</a> graphics format:</p>
<blockquote>
<p>PICT is a file format that was developed by Apple Computer in 1984 as the native format for Macintosh graphics. PICT files are encoded in QuickDraw commands. The PICT file format is a meta-format that can be used for both bitmap images and vector images.</p>
</blockquote>
<p>There&#39;s also <code>www/source</code> and <code>www/unknown</code>, an artifact of its use of <a href="https://www.w3.org/Library/"><code>libwww</code></a>, now available on <a href="https://github.com/w3c/libwww">GitHub</a>. I found some information in the MIT WWW Library <a href="http://web.mit.edu/wwwdev/src/WWW/Library/Implementation/HTFormat.html"><code>HTFormat</code> docs</a>. It seems to predate MIME:</p>
<blockquote>
<p>The <code>www/xxx</code> ones are of course not MIME standard.</p>
<p>star/star is an output format which leaves the input untouched. It is useful for diagnostics, and for users who want to see the original, whatever it is.</p>
<pre><code>#define WWW_SOURCE	HTAtom_for(&#34;*/*&#34;)      /* Whatever it was originally */
</code></pre>
<p><code>www/present</code> represents the user&#39;s perception of the document. If you convert to www/present, you present the material to the user.</p>
<pre><code>#define WWW_PRESENT	HTAtom_for(&#34;www/present&#34;)   /* The user&#39;s perception */
</code></pre>
<p>The <code>message/rfc822</code> format means a MIME message or a plain text message with no MIME header. This is what is returned by an HTTP server.</p>
<pre><code>#define WWW_MIME	HTAtom_for(&#34;www/mime&#34;)		   /* A MIME message */
</code></pre>
<p><code>www/print</code> is like <code>www/present</code> except it represents a printed copy.</p>
<pre><code>#define WWW_PRINT	HTAtom_for(&#34;www/print&#34;)		   /* A printed copy */
</code></pre>
<p><code>www/unknown</code> is a really unknown type. Some default action is appropriate.</p>
<pre><code>#define WWW_UNKNOWN     HTAtom_for(&#34;www/unknown&#34;)
</code></pre>
</blockquote>
<h2 id="ncsa-mosaic">NCSA Mosaic</h2>
<p>Based on a <a href="https://news.ycombinator.com/item?id=37547186">comment</a> on Hacker News, I also gave NCSA Mosaic 1.0.3 a try using this <a href="https://www.macintoshrepository.org/560-ncsa-mosaic-browser-">copy</a>. It works! Mosiac 1.x is the last to work on the Macintosh SE, since Mosaic 2.0.1 asks for 5MB of memory.</p>
<figure>
<img src="https://connor.zip/resources/images/2023-08-04-localtalk-ethernet/macintosh-mosaic.jpg" alt="NCSA Mosiac 1.0.3 on a Macintosh SE running System 7.1"/>
<figcaption>NCSA Mosiac 1.0.3 on a Macintosh SE running System 7.1</figcaption>
</figure>
<p>The historical relevance of Mosaic can&#39;t be understated. Marc Andreessen led the NCSA Mosaic project, and went on the found Netscape, eventually co-founding the VC firm Andreessen Horowitz. Netscape went on to become Mozilla Firefox, one of today&#39;s major browsers. In 1995, Internet Explorer had its start when Microsoft licensed Spyglass Mosaic (which shared no code with NCSA Mosaic but licensed the name).</p>
<figure>
<svg width="558pt" height="197pt" viewBox="0.00 0.00 558.00 197.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="graph0" transform="scale(1 1) rotate(0) translate(4 193)"><title>%3</title><polygon fill="white" stroke="transparent" points="-4,4 -4,-193 554,-193 554,4 -4,4"></polygon><!-- ncsa --><g id="node1"><title>ncsa</title><polygon fill="none" stroke="black" points="133,-85 0,-85 0,-34 133,-34 133,-85"></polygon><text text-anchor="middle" x="66.5" y="-55.8" font-family="Times,serif" font-size="14.00">NCSA Mosaic</text></g><!-- netscape --><g id="node2"><title>netscape</title><polygon fill="none" stroke="black" points="298,-120 195,-120 195,-69 298,-69 298,-120"></polygon><text text-anchor="middle" x="246.5" y="-90.8" font-family="Times,serif" font-size="14.00">Netscape</text></g><!-- ncsa->netscape --><g id="edge3"><title>ncsa-&gt;netscape</title><path fill="none" stroke="black" d="M133.02,-72.38C149.93,-75.71 168.06,-79.27 184.72,-82.55"></path><polygon fill="black" stroke="black" points="184.39,-86.05 194.88,-84.55 185.74,-79.18 184.39,-86.05"></polygon></g><!-- spyglass --><g id="node5"><title>spyglass</title><polygon fill="none" stroke="black" points="324,-51 169,-51 169,0 324,0 324,-51"></polygon><text text-anchor="middle" x="246.5" y="-21.8" font-family="Times,serif" font-size="14.00">Spyglass Mosaic</text></g><!-- ncsa->spyglass --><g id="edge4"><title>ncsa-&gt;spyglass</title><path fill="none" stroke="black" d="M133.02,-46.98C141.52,-45.36 150.33,-43.68 159.1,-42"></path><polygon fill="black" stroke="black" points="159.81,-45.43 168.97,-40.12 158.49,-38.56 159.81,-45.43"></polygon></g><!-- firefox --><g id="node3"><title>firefox</title><polygon fill="none" stroke="black" points="527,-189 383,-189 383,-138 527,-138 527,-189"></polygon><text text-anchor="middle" x="455" y="-159.8" font-family="Times,serif" font-size="14.00">Mozilla Firefox</text></g><!-- netscape->firefox --><g id="edge1"><title>netscape-&gt;firefox</title><path fill="none" stroke="black" d="M298.02,-111.38C320.67,-118.95 347.96,-128.07 373.34,-136.55"></path><polygon fill="black" stroke="black" points="372.36,-139.91 382.95,-139.76 374.58,-133.27 372.36,-139.91"></polygon></g><!-- ah --><g id="node4"><title>ah</title><polygon fill="none" stroke="black" points="550,-120 360,-120 360,-69 550,-69 550,-120"></polygon><text text-anchor="middle" x="455" y="-90.8" font-family="Times,serif" font-size="14.00">Andreessen Horowitz</text></g><!-- netscape->ah --><g id="edge2"><title>netscape-&gt;ah</title><path fill="none" stroke="black" d="M298.02,-94.5C313.59,-94.5 331.34,-94.5 349.17,-94.5"></path><polygon fill="black" stroke="black" points="349.65,-98 359.65,-94.5 349.65,-91 349.65,-98"></polygon></g><!-- ie --><g id="node6"><title>ie</title><polygon fill="none" stroke="black" points="536,-51 374,-51 374,0 536,0 536,-51"></polygon><text text-anchor="middle" x="455" y="-21.8" font-family="Times,serif" font-size="14.00">Internet Explorer</text></g><!-- spyglass->ie --><g id="edge5"><title>spyglass-&gt;ie</title><path fill="none" stroke="black" d="M324.1,-25.5C337,-25.5 350.49,-25.5 363.69,-25.5"></path><polygon fill="black" stroke="black" points="363.72,-29 373.72,-25.5 363.72,-22 363.72,-29"></polygon></g></g></svg></figure>
<p>Mosaic&#39;s creation was enabled by Al Gore&#39;s bill <em>High Performance Computing and Communication Act of 1991</em>, Andreessen had this to say:</p>
<blockquote>
<p>If it had been left to private industry, it wouldn&#39;t have happened. At least, not until years later.</p>
</blockquote>
<p>It accounts for the origins (at least in name) of two major browsers, of which only Firefox is still relevant today since the switch from IE to Edge. As for the other two major browsers: Chrome was built from scratch by Google, while Safari was originally derived from the KDE project&#39;s Konqueror browser engine, KHTML.</p>
<p>And here&#39;s what a request looks like from NCSA Mosaic:</p>
<pre><code>; nc -vv -l 0.0.0.0 -p 8000
Connection from 10.0.2.250:1202
GET / HTTP/1.0
Accept: text/plain
Accept: application/x-html
Accept: application/html
Accept: text/x-html
Accept: text/html
Accept: text/richtext
Accept: application/octet-stream
Accept: application/postscript
Accept: application/mac-binhex40
Accept: application/zip
Accept: application/macwriteii
Accept: application/msword
Accept: image/gif
Accept: image/jpeg
Accept: image/x-pict
Accept: image/tiff
Accept: image/x-xbm
Accept: audio/x-aiff
Accept: audio/basic
Accept: video/mpeg
Accept: video/quicktime
Accept: application/macbinary
Accept: */*
User-Agent:  MacMosaicB6  libwww2.09
</code></pre>
<p>There is an option to use HTTP 0.9, which simply sends:</p>
<pre><code>; nc -vv -l 0.0.0.0 -p 8000
Connection from 10.0.2.250:1153
GET /
</code></pre>
<p>There are some interesting non-standard MIME types here as well, such as <code>application/x-html</code> and <code>text/x-html</code>. There&#39;s also <code>application/macbinary</code> for the MacBinary (<code>.bin</code>) format (similar to BinHex referenced above with <code>application/mac-binhex40</code>) used to transfer both data and resource forks of Macintosh application file across the network. We also see formats specific to Microsoft Word and MacWrite II.</p>


            </article>

            
        </div></div>
  </body>
</html>
