<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://oxism.com/trystero/">Original</a>
    <h1>Make any site multiplayer in a few lines. Serverless WebRTC matchmaking</h1>
    
    <div id="readability-page-1" class="page"><div>
      <p>
        Below is some code describing what始s happening on this site right now.
      </p>

      <p>
        Anyone on this page will connect directly to others in real-time,
        syncing mouse movement and clicks. (Try it, I dare you).
      </p>

      <p>
        Trystero can connect peers via
        <span>
          <a href="https://en.wikipedia.org/wiki/BitTorrent">BitTorrent</a>,</span>
        <span> <a href="https://en.wikipedia.org/wiki/Nostr">Nostr</a>,</span>
        <span> <a href="https://en.wikipedia.org/wiki/MQTT">MQTT</a>,</span>
        <span>
          <a href="https://en.wikipedia.org/wiki/InterPlanetary_File_System">IPFS</a>,</span>
        <span><span>★</span>
          <a href="https://supabase.com">Supabase</a>,</span>
        and <span> <a href="https://firebase.google.com">Firebase</a></span>.
      </p>

      <p id="peer-info">
        Right now you始re the only person with the page open, but you can cheat
        and just open this URL in another tab to see what it始s like with others.
      </p>

      <hr/>

      <p>Here始s how you use it.</p>

      <p>Join a room with an app ID and a room ID:</p>

      <pre><code>import {joinRoom} from &#39;trystero&#39;
const room = joinRoom({appId: &#39;trystero-lounge&#39;}, &#39;101&#39;)
</code></pre>

      <p>
        Listen for peers joining and leaving (leaving out some boring UI code):
      </p>

      <pre><code>room.onPeerJoin(addCursor)
room.onPeerLeave(removeCursor)
</code></pre>

      <p>Make some actions to send and respond to:</p>

      <pre><code>const [sendMove, getMove] = room.makeAction(&#39;mouseMove&#39;)
const [sendClick, getClick] = room.makeAction(&#39;click&#39;)
</code></pre>

      <p>Broadcast your actions to other peers:</p>

      <pre><code>window.addEventListener(&#39;mousemove&#39;, e =&gt; sendMove([e.clientX, e.clientY]))
window.addEventListener(&#39;click&#39;, () =&gt; sendClick(randomFruit())
</code></pre>

      <p>And listen for when peers send theirs:</p>

      <pre><code>getMove(([x, y], peerId) =&gt; setCursorPosition(peerId, x, y))
getClick((fruit, peerId) =&gt; dropFruitFrom(peerId, fruit))
</code></pre>

      <p>
        That始s all this page is doing, but you can do much more like audio/video
        streams and binary data (like files).
        <a href="https://github.com/dmotz/trystero#readme">Peruse the readme to see how.</a>
      </p>

      <hr/>

      <p>
        -o-&lt;&lt;| <a href="https://oxism.com">Dan Motzenbecker</a> |
        <a href="https://github.com/dmotz">github/dmotz</a>
      </p>
    </div></div>
  </body>
</html>
