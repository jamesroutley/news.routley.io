<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/buyukakyuz/rustmm">Original</a>
    <h1>Rust--: Rust without the borrow checker</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">A modified Rust compiler with the borrow checker disabled. This allows code that would normally violate Rust&#39;s borrowing rules to compile and run successfully.</p>

<p dir="auto">Pre-built binaries for macOS (Apple Silicon) and Linux (x86_64):</p>
<div dir="auto" data-snippet-clipboard-copy-content="curl -sSL https://raw.githubusercontent.com/buyukakyuz/rustmm/main/install.sh | bash"><pre>curl -sSL https://raw.githubusercontent.com/buyukakyuz/rustmm/main/install.sh <span>|</span> bash</pre></div>
<p dir="auto">Use:</p>
<div dir="auto" data-snippet-clipboard-copy-content="~/.rustmm/bin/rustc your_code.rs"><pre><span>~</span>/.rustmm/bin/rustc your_code.rs</pre></div>
<p dir="auto">To build from source, see <a href="https://interjectedfuture.com/buyukakyuz/rustmm/blob/main/BUILDING.md">BUILDING.md</a>.</p>
<div dir="auto"><h2 tabindex="-1" dir="auto">Examples: Before vs After</h2><a id="user-content-examples-before-vs-after" aria-label="Permalink: Examples: Before vs After" href="#examples-before-vs-after"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>

<p dir="auto">Normal Rust:</p>
<div dir="auto" data-snippet-clipboard-copy-content="fn main() {
    let a = String::from(&#34;hello&#34;);
    let b = a;
    println!(&#34;{a}&#34;);
}"><pre><span>fn</span> <span>main</span><span>(</span><span>)</span> <span>{</span>
    <span>let</span> a = <span>String</span><span>::</span><span>from</span><span>(</span><span>&#34;hello&#34;</span><span>)</span><span>;</span>
    <span>let</span> b = a<span>;</span>
    <span>println</span><span>!</span><span>(</span><span>&#34;{a}&#34;</span><span>)</span><span>;</span>
<span>}</span></pre></div>
<p dir="auto">Error in normal Rust:</p>
<div data-snippet-clipboard-copy-content="error[E0382]: borrow of moved value: `a`
 --&gt; test.rs:4:16
  |
2 |     let a = String::from(&#34;hello&#34;);
  |         - move occurs because `a` has type `String`, which does not implement the `Copy` trait
3 |     let b = a;
  |             - value moved here
4 |     println!(&#34;{a}&#34;);
  |                ^ value borrowed here after move"><pre><code>error[E0382]: borrow of moved value: `a`
 --&gt; test.rs:4:16
  |
2 |     let a = String::from(&#34;hello&#34;);
  |         - move occurs because `a` has type `String`, which does not implement the `Copy` trait
3 |     let b = a;
  |             - value moved here
4 |     println!(&#34;{a}&#34;);
  |                ^ value borrowed here after move
</code></pre></div>
<p dir="auto">Rust--:</p>
<div dir="auto" data-snippet-clipboard-copy-content="fn main() {
    let a = String::from(&#34;hello&#34;);
    let b = a;
    println!(&#34;{a}&#34;);  // Works! Prints: hello
}"><pre><span>fn</span> <span>main</span><span>(</span><span>)</span> <span>{</span>
    <span>let</span> a = <span>String</span><span>::</span><span>from</span><span>(</span><span>&#34;hello&#34;</span><span>)</span><span>;</span>
    <span>let</span> b = a<span>;</span>
    <span>println</span><span>!</span><span>(</span><span>&#34;{a}&#34;</span><span>)</span><span>;</span>  <span>// Works! Prints: hello</span>
<span>}</span></pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">Example 2: Multiple Mutable References</h3><a id="user-content-example-2-multiple-mutable-references" aria-label="Permalink: Example 2: Multiple Mutable References" href="#example-2-multiple-mutable-references"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Normal Rust:</p>
<div dir="auto" data-snippet-clipboard-copy-content="fn main() {
    let mut y = 5;
    let ref1 = &amp;mut y;
    let ref2 = &amp;mut y;
    *ref1 = 10;
    *ref2 = 20;
}"><pre><span>fn</span> <span>main</span><span>(</span><span>)</span> <span>{</span>
    <span>let</span> <span>mut</span> y = <span>5</span><span>;</span>
    <span>let</span> ref1 = <span>&amp;</span><span>mut</span> y<span>;</span>
    <span>let</span> ref2 = <span>&amp;</span><span>mut</span> y<span>;</span>
    <span>*</span>ref1 = <span>10</span><span>;</span>
    <span>*</span>ref2 = <span>20</span><span>;</span>
<span>}</span></pre></div>
<p dir="auto">Error in normal Rust:</p>
<div data-snippet-clipboard-copy-content="error[E0499]: cannot borrow `y` as mutable more than once at a time
 --&gt; test.rs:4:16
  |
3 |     let ref1 = &amp;mut y;
  |                ------ first mutable borrow occurs here
4 |     let ref2 = &amp;mut y;
  |                ^^^^^^ second mutable borrow occurs here
5 |     *ref1 = 10;
  |     ---------- first borrow later used here"><pre><code>error[E0499]: cannot borrow `y` as mutable more than once at a time
 --&gt; test.rs:4:16
  |
3 |     let ref1 = &amp;mut y;
  |                ------ first mutable borrow occurs here
4 |     let ref2 = &amp;mut y;
  |                ^^^^^^ second mutable borrow occurs here
5 |     *ref1 = 10;
  |     ---------- first borrow later used here
</code></pre></div>
<p dir="auto">Rust--:</p>
<div dir="auto" data-snippet-clipboard-copy-content="fn main() {
    let mut y = 5;
    let ref1 = &amp;mut y;
    let ref2 = &amp;mut y;  // Works!
    *ref1 = 10;
    *ref2 = 20;
    println!(&#34;{}&#34;, y);  // Prints: 20
}"><pre><span>fn</span> <span>main</span><span>(</span><span>)</span> <span>{</span>
    <span>let</span> <span>mut</span> y = <span>5</span><span>;</span>
    <span>let</span> ref1 = <span>&amp;</span><span>mut</span> y<span>;</span>
    <span>let</span> ref2 = <span>&amp;</span><span>mut</span> y<span>;</span>  <span>// Works!</span>
    <span>*</span>ref1 = <span>10</span><span>;</span>
    <span>*</span>ref2 = <span>20</span><span>;</span>
    <span>println</span><span>!</span><span>(</span><span>&#34;{}&#34;</span><span>,</span> y<span>)</span><span>;</span>  <span>// Prints: 20</span>
<span>}</span></pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">Example 3: Mutable Borrow Then Move</h3><a id="user-content-example-3-mutable-borrow-then-move" aria-label="Permalink: Example 3: Mutable Borrow Then Move" href="#example-3-mutable-borrow-then-move"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Normal Rust:</p>
<div dir="auto" data-snippet-clipboard-copy-content="fn main() {
    let mut x = vec![1, 2, 3];
    let borrowed = &amp;mut x;
    println!(&#34;{:?}&#34;, x);  // ERROR: cannot use `x` while mutable borrow exists
}"><pre><span>fn</span> <span>main</span><span>(</span><span>)</span> <span>{</span>
    <span>let</span> <span>mut</span> x = <span>vec</span><span>!</span><span>[</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>]</span><span>;</span>
    <span>let</span> borrowed = <span>&amp;</span><span>mut</span> x<span>;</span>
    <span>println</span><span>!</span><span>(</span><span>&#34;{:?}&#34;</span><span>,</span> x<span>)</span><span>;</span>  <span>// ERROR: cannot use `x` while mutable borrow exists</span>
<span>}</span></pre></div>
<p dir="auto">Rust--:</p>
<div dir="auto" data-snippet-clipboard-copy-content="fn main() {
    let mut x = vec![1, 2, 3];
    let borrowed = &amp;mut x;
    println!(&#34;{:?}&#34;, x);  // Works! Prints: [1, 2, 3]
}"><pre><span>fn</span> <span>main</span><span>(</span><span>)</span> <span>{</span>
    <span>let</span> <span>mut</span> x = <span>vec</span><span>!</span><span>[</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>]</span><span>;</span>
    <span>let</span> borrowed = <span>&amp;</span><span>mut</span> x<span>;</span>
    <span>println</span><span>!</span><span>(</span><span>&#34;{:?}&#34;</span><span>,</span> x<span>)</span><span>;</span>  <span>// Works! Prints: [1, 2, 3]</span>
<span>}</span></pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">Example 4: Use After Move in Loop</h3><a id="user-content-example-4-use-after-move-in-loop" aria-label="Permalink: Example 4: Use After Move in Loop" href="#example-4-use-after-move-in-loop"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Normal Rust:</p>
<div dir="auto" data-snippet-clipboard-copy-content="fn main() {
    let s = String::from(&#34;test&#34;);
    for _ in 0..2 {
        println!(&#34;{}&#34;, s);  // ERROR: cannot move out of loop
    }
}"><pre><span>fn</span> <span>main</span><span>(</span><span>)</span> <span>{</span>
    <span>let</span> s = <span>String</span><span>::</span><span>from</span><span>(</span><span>&#34;test&#34;</span><span>)</span><span>;</span>
    <span>for</span> _ <span>in</span> <span>0</span>..<span>2</span> <span>{</span>
        <span>println</span><span>!</span><span>(</span><span>&#34;{}&#34;</span><span>,</span> s<span>)</span><span>;</span>  <span>// ERROR: cannot move out of loop</span>
    <span>}</span>
<span>}</span></pre></div>
<p dir="auto">Rust--:</p>
<div dir="auto" data-snippet-clipboard-copy-content="fn main() {
    let s = String::from(&#34;test&#34;);
    for _ in 0..2 {
        println!(&#34;{}&#34;, s);  // Works! Prints twice
    }
}"><pre><span>fn</span> <span>main</span><span>(</span><span>)</span> <span>{</span>
    <span>let</span> s = <span>String</span><span>::</span><span>from</span><span>(</span><span>&#34;test&#34;</span><span>)</span><span>;</span>
    <span>for</span> _ <span>in</span> <span>0</span>..<span>2</span> <span>{</span>
        <span>println</span><span>!</span><span>(</span><span>&#34;{}&#34;</span><span>,</span> s<span>)</span><span>;</span>  <span>// Works! Prints twice</span>
    <span>}</span>
<span>}</span></pre></div>
<div dir="auto"><h3 tabindex="-1" dir="auto">Example 5: Conflicting Borrows</h3><a id="user-content-example-5-conflicting-borrows" aria-label="Permalink: Example 5: Conflicting Borrows" href="#example-5-conflicting-borrows"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Normal Rust:</p>
<div dir="auto" data-snippet-clipboard-copy-content="fn main() {
    let mut num = 42;
    let mut_ref = &amp;mut num;
    let immut_ref = &amp;num;
    println!(&#34;{}&#34;, immut_ref);
    println!(&#34;{}&#34;, mut_ref);
}"><pre><span>fn</span> <span>main</span><span>(</span><span>)</span> <span>{</span>
    <span>let</span> <span>mut</span> num = <span>42</span><span>;</span>
    <span>let</span> mut_ref = <span>&amp;</span><span>mut</span> num<span>;</span>
    <span>let</span> immut_ref = <span>&amp;</span>num<span>;</span>
    <span>println</span><span>!</span><span>(</span><span>&#34;{}&#34;</span><span>,</span> immut_ref<span>)</span><span>;</span>
    <span>println</span><span>!</span><span>(</span><span>&#34;{}&#34;</span><span>,</span> mut_ref<span>)</span><span>;</span>
<span>}</span></pre></div>
<p dir="auto">Error in normal Rust:</p>
<div data-snippet-clipboard-copy-content="error[E0502]: cannot borrow `num` as immutable because it is also borrowed as mutable
 --&gt; test.rs:4:21
  |
3 |     let mut_ref = &amp;mut num;
  |                   -------- mutable borrow occurs here
4 |     let immut_ref = &amp;num;
  |                     ^^^^ immutable borrow occurs here
5 |     println!(&#34;{}&#34;, immut_ref);
6 |     println!(&#34;{}&#34;, mut_ref);
  |                    ------- mutable borrow later used here"><pre><code>error[E0502]: cannot borrow `num` as immutable because it is also borrowed as mutable
 --&gt; test.rs:4:21
  |
3 |     let mut_ref = &amp;mut num;
  |                   -------- mutable borrow occurs here
4 |     let immut_ref = &amp;num;
  |                     ^^^^ immutable borrow occurs here
5 |     println!(&#34;{}&#34;, immut_ref);
6 |     println!(&#34;{}&#34;, mut_ref);
  |                    ------- mutable borrow later used here
</code></pre></div>
<p dir="auto">Rust--:</p>
<div dir="auto" data-snippet-clipboard-copy-content="fn main() {
    let mut num = 42;
    let mut_ref = &amp;mut num;
    let immut_ref = &amp;num;  // Works! No error
    println!(&#34;{}&#34;, immut_ref);  // Prints: 42
    println!(&#34;{}&#34;, mut_ref);    // Prints: 0x...
}"><pre><span>fn</span> <span>main</span><span>(</span><span>)</span> <span>{</span>
    <span>let</span> <span>mut</span> num = <span>42</span><span>;</span>
    <span>let</span> mut_ref = <span>&amp;</span><span>mut</span> num<span>;</span>
    <span>let</span> immut_ref = <span>&amp;</span>num<span>;</span>  <span>// Works! No error</span>
    <span>println</span><span>!</span><span>(</span><span>&#34;{}&#34;</span><span>,</span> immut_ref<span>)</span><span>;</span>  <span>// Prints: 42</span>
    <span>println</span><span>!</span><span>(</span><span>&#34;{}&#34;</span><span>,</span> mut_ref<span>)</span><span>;</span>    <span>// Prints: 0x...</span>
<span>}</span></pre></div>

<p dir="auto">The <code>examples/</code> directory contains code that would fail in standard Rust:</p>
<ul dir="auto">
<li><code>01_move_then_use.rs</code> - E0382: Borrow of moved value</li>
<li><code>02_multiple_mutable_borrows.rs</code> - E0499: Multiple mutable borrows</li>
<li><code>03_mutable_borrow_then_move.rs</code> - E0502: Use while mutably borrowed</li>
<li><code>04_use_after_move_loop.rs</code> - Use after move in loop</li>
<li><code>05_self_referential.rs</code> - E0597: Self-referential struct</li>
<li><code>06_conflicting_borrows.rs</code> - E0502: Conflicting borrows</li>
<li><code>07_doubly_linked.rs</code> - E0506: Doubly linked list</li>
</ul>
<div dir="auto" data-snippet-clipboard-copy-content="~/.rustmm/bin/rustc examples/01_move_then_use.rs &amp;&amp; ./01_move_then_use"><pre><span>~</span>/.rustmm/bin/rustc examples/01_move_then_use.rs <span>&amp;&amp;</span> ./01_move_then_use</pre></div>

<p dir="auto">Same as Rust - dual licensed under Apache 2.0 and MIT</p>
<p dir="auto">See LICENSE-APACHE, LICENSE-MIT, and COPYRIGHT for details.</p>
</article></div></div>
  </body>
</html>
