<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/seddonm1/sqlite-bench">Original</a>
    <h1>Show HN: SQLite Transaction Benchmarking Tool</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto">A project to test SQLite Transaction behavior.</p>
<p dir="auto">Code to accompany blog post: <a href="https://reorchestrate.com/posts/sqlite-transactions" rel="nofollow">https://reorchestrate.com/posts/sqlite-transactions</a></p>

<p dir="auto">Compile by running <code>cargo build --release</code>.</p>
<p dir="auto">Run like: <code>cargo run --release -- --help</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="Benchmarking SQLite

Usage: sqlite-bench [OPTIONS] --path &lt;PATH&gt; --output &lt;OUTPUT&gt;

Options:
  -p, --path &lt;PATH&gt;           Path to the SQLite file
  -o, --output &lt;OUTPUT&gt;       Path to the output result file
  -s, --seed &lt;SEED&gt;           Number of records to seed the into the table [default: 1000000]
  -t, --threads &lt;THREADS&gt;...  Number of concurrent threads to spawn [default: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16]
  -s, --scans &lt;SCANS&gt;...      Scan operations to perform per transaction [default: 0 10]
  -u, --updates &lt;UPDATES&gt;...  Update operations to perform per transaction [default: 0 1 10]
  -h, --help                  Print help
  -V, --version               Print version"><pre>Benchmarking SQLite

Usage: sqlite-bench [OPTIONS] --path <span>&lt;</span>PATH<span>&gt;</span> --output <span>&lt;</span>OUTPUT<span>&gt;</span>

Options:
  -p, --path <span>&lt;</span>PATH<span>&gt;</span>           Path to the SQLite file
  -o, --output <span>&lt;</span>OUTPUT<span>&gt;</span>       Path to the output result file
  -s, --seed <span>&lt;</span>SEED<span>&gt;</span>           Number of records to seed the into the table [default: 1000000]
  -t, --threads <span>&lt;</span>THREADS<span>&gt;</span>...  Number of concurrent threads to spawn [default: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16]
  -s, --scans <span>&lt;</span>SCANS<span>&gt;</span>...      Scan operations to perform per transaction [default: 0 10]
  -u, --updates <span>&lt;</span>UPDATES<span>&gt;</span>...  Update operations to perform per transaction [default: 0 1 10]
  -h, --help                  Print <span>help</span>
  -V, --version               Print version</pre></div>
<p dir="auto">It is a good idea to run this against an in-memory filesystem first to protect your solid-state-drive.</p>
<p dir="auto">MacOS:</p>
<div dir="auto" data-snippet-clipboard-copy-content="diskutil erasevolume apfs &#39;ramdisk&#39; `hdiutil attach -nobrowse -nomount ram://33554432`"><pre>diskutil erasevolume apfs <span><span>&#39;</span>ramdisk<span>&#39;</span></span> <span><span>`</span>hdiutil attach -nobrowse -nomount ram://33554432<span>`</span></span></pre></div>
<p dir="auto">Linux:</p>
<div dir="auto" data-snippet-clipboard-copy-content="sudo mkdir -p /mnt/ramdisk
sudo mount -t tmpfs -o size=16g tmpfs /mnt/ramdisk"><pre>sudo mkdir -p /mnt/ramdisk
sudo mount -t tmpfs -o size=16g tmpfs /mnt/ramdisk</pre></div>
<p dir="auto">A multiplatform Docker image is available at: <a href="https://github.com/users/seddonm1/packages/container/package/sqlite-bench">https://github.com/users/seddonm1/packages/container/package/sqlite-bench</a></p>
</article></div></div>
  </body>
</html>
