<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/timescale/pgvectorscale">Original</a>
    <h1>Postgres extension complements pgvector for performance and scale</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<div dir="auto">

<div dir="auto"><h3 tabindex="-1" dir="auto">pgvectorscale builds on pgvector with higher performance embedding search and cost-efficient storage for AI applications. </h3><a id="user-content-pgvectorscale-builds-on-pgvector-with-higher-performance-embedding-search-and-cost-efficient-storage-for-ai-applications-" aria-label="Permalink: pgvectorscale builds on pgvector with higher performance embedding search and cost-efficient storage for AI applications. " href="#pgvectorscale-builds-on-pgvector-with-higher-performance-embedding-search-and-cost-efficient-storage-for-ai-applications-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="https://discord.gg/KRdHVXAmkp" rel="nofollow"><img src="https://camo.githubusercontent.com/2ed327a478a1d67729886edd7034b08a8706d4a6ee234c2022bc22276f5fc747/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4a6f696e5f75735f6f6e5f446973636f72642d626c61636b3f7374796c653d666f722d7468652d6261646765266c6f676f3d646973636f7264266c6f676f436f6c6f723d7768697465" alt="Discord" data-canonical-src="https://img.shields.io/badge/Join_us_on_Discord-black?style=for-the-badge&amp;logo=discord&amp;logoColor=white"/></a>
<a href="https://tsdb.co/gh-pgvector-signup" rel="nofollow"><img src="https://camo.githubusercontent.com/cbf628ef2abee3f758dbc9fd18794f7e7c8795e5149ba305950b43b17b90f8c8/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f5472795f54696d657363616c655f666f725f667265652d626c61636b3f7374796c653d666f722d7468652d6261646765266c6f676f3d74696d657363616c65266c6f676f436f6c6f723d7768697465" alt="Try Timescale for free" data-canonical-src="https://img.shields.io/badge/Try_Timescale_for_free-black?style=for-the-badge&amp;logo=timescale&amp;logoColor=white"/></a></p>
</div>
<p dir="auto">pgvectorscale complements <a href="https://github.com/pgvector/pgvector/blob/master/README.md">pgvector</a>, the open-source vector data extension for PostgreSQL, and introduces the following key innovations for pgvector data:</p>
<ul dir="auto">
<li>A new index type called StreamingDiskANN, inspired by the <a href="https://github.com/microsoft/DiskANN">DiskANN</a> algorithm, based on research from Microsoft.</li>
<li>Statistical Binary Quantization: developed by Timescale researchers, This compression method improves on standard Binary Quantization.</li>
<li>Label-based filtered vector search: based on Microsoft&#39;s Filtered DiskANN research, this allows you to combine vector similarity search with label filtering for more precise and efficient results.</li>
</ul>
<p dir="auto">On a benchmark dataset of 50 million Cohere embeddings with 768 dimensions
each, PostgreSQL with <code>pgvector</code> and <code>pgvectorscale</code> achieves <strong>28x lower p95
latency</strong> and <strong>16x higher query throughput</strong> compared to Pinecone&#39;s storage
optimized (s1) index for approximate nearest neighbor queries at 99% recall,
all at 75% less cost when self-hosted on AWS EC2.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/f50a26279d580851560966c22030b8b94565aa812a3195c23f65312991ea6a82/68747470733a2f2f6173736574732e74696d657363616c652e636f6d2f646f63732f696d616765732f62656e63686d61726b2d636f6d70617269736f6e2d7067766563746f727363616c652d70696e65636f6e652e706e67"><img src="https://camo.githubusercontent.com/f50a26279d580851560966c22030b8b94565aa812a3195c23f65312991ea6a82/68747470733a2f2f6173736574732e74696d657363616c652e636f6d2f646f63732f696d616765732f62656e63686d61726b2d636f6d70617269736f6e2d7067766563746f727363616c652d70696e65636f6e652e706e67" alt="Benchmarks" data-canonical-src="https://assets.timescale.com/docs/images/benchmark-comparison-pgvectorscale-pinecone.png"/></a></p>
<p dir="auto">To learn more about the performance impact of pgvectorscale, and details about benchmark methodology and results, see the <a href="http://www.timescale.com/blog/pgvector-vs-pinecone" rel="nofollow">pgvector vs Pinecone comparison blog post</a>.</p>
<p dir="auto">In contrast to pgvector, which is written in C, pgvectorscale is developed in <a href="https://www.rust-lang.org/" rel="nofollow">Rust</a> using the <a href="https://github.com/pgcentralfoundation/pgrx">PGRX framework</a>,
offering the PostgreSQL community a new avenue for contributing to vector support.</p>
<p dir="auto"><strong>Application developers or DBAs</strong> can use pgvectorscale with their PostgreSQL databases.</p>
<ul dir="auto">
<li><a href="#installation">Install pgvectorscale</a></li>
<li><a href="#get-started-with-pgvectorscale">Get started using pgvectorscale</a></li>
</ul>
<p dir="auto">If you <strong>want to contribute</strong> to this extension, see how to <a href="https://github.com/timescale/pgvectorscale/blob/main/DEVELOPMENT.md">build pgvectorscale from source in a developer environment</a> and our <a href="https://github.com/timescale/pgvectorscale/blob/main/TESTING.md">testing guide</a>.</p>
<p dir="auto">For production vector workloads, get <strong>private beta access to vector-optimized databases</strong> with pgvector and pgvectorscale on Timescale. <a href="https://timescale.typeform.com/to/H7lQ10eQ" rel="nofollow">Sign up here for priority access</a>.</p>

<p dir="auto">The fastest ways to run PostgreSQL with pgvectorscale are:</p>
<ul dir="auto">
<li><a href="#using-a-pre-built-docker-container">Using a pre-built Docker container</a></li>
<li><a href="#installing-from-source">Installing from source</a></li>
<li><a href="#enable-pgai-in-a-timescale-cloud-service">Enable pgvectorscale in a Timescale Cloud service</a></li>
</ul>
<div dir="auto"><h3 tabindex="-1" dir="auto">Using a pre-built Docker container</h3><a id="user-content-using-a-pre-built-docker-container" aria-label="Permalink: Using a pre-built Docker container" href="#using-a-pre-built-docker-container"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ol dir="auto">
<li>
<p dir="auto"><a href="https://docs.timescale.com/self-hosted/latest/install/installation-docker/" rel="nofollow">Run the TimescaleDB Docker image</a>.</p>
</li>
<li>
<p dir="auto">Connect to your database:</p>
<div dir="auto" data-snippet-clipboard-copy-content="psql -d &#34;postgres://&lt;username&gt;:&lt;password&gt;@&lt;host&gt;:&lt;port&gt;/&lt;database-name&gt;&#34;"><pre>psql -d <span><span>&#34;</span>postgres://&lt;username&gt;:&lt;password&gt;@&lt;host&gt;:&lt;port&gt;/&lt;database-name&gt;<span>&#34;</span></span></pre></div>
</li>
<li>
<p dir="auto">Create the pgvectorscale extension:</p>
<div dir="auto" data-snippet-clipboard-copy-content="CREATE EXTENSION IF NOT EXISTS vectorscale CASCADE;"><pre>CREATE EXTENSION IF NOT EXISTS vectorscale CASCADE;</pre></div>
<p dir="auto">The <code>CASCADE</code> automatically installs <code>pgvector</code>.</p>
</li>
</ol>

<p dir="auto">You can install pgvectorscale from source and install it in an existing PostgreSQL server</p>
<div dir="auto"><p dir="auto"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg>Warning</p><p dir="auto">Building pgvectorscale on macOS X86 (Intel) machines is currently not
supported due to an <a href="https://github.com/timescale/pgvectorscale/issues/155" data-hovercard-type="issue" data-hovercard-url="/timescale/pgvectorscale/issues/155/hovercard">open issue</a>. As alternatives, you can:</p>
<ul dir="auto">
<li>Use an ARM-based Mac.</li>
<li>Build using Linux.</li>
<li>Use our pre-built Docker containers.</li>
</ul>
<p dir="auto">We welcome community contributions to resolve this limitation. If you&#39;re
interested in helping, please check the issue for details.</p>
</div>
<ol dir="auto">
<li>
<p dir="auto">Compile and install the extension</p>
<div dir="auto" data-snippet-clipboard-copy-content="# install rust
curl --proto &#39;=https&#39; --tlsv1.2 -sSf https://sh.rustup.rs | sh

# download pgvectorscale
cd /tmp
git clone --branch &lt;version&gt; https://github.com/timescale/pgvectorscale
cd pgvectorscale/pgvectorscale
# install cargo-pgrx with the same version as pgrx
cargo install --locked cargo-pgrx --version $(cargo metadata --format-version 1 | jq -r &#39;.packages[] | select(.name == &#34;pgrx&#34;) | .version&#39;)
cargo pgrx init --pg18 pg_config
# build and install pgvectorscale
cargo pgrx install --release"><pre><span><span>#</span> install rust</span>
curl --proto <span><span>&#39;</span>=https<span>&#39;</span></span> --tlsv1.2 -sSf https://sh.rustup.rs <span>|</span> sh

<span><span>#</span> download pgvectorscale</span>
<span>cd</span> /tmp
git clone --branch <span>&lt;</span>version<span>&gt;</span> https://github.com/timescale/pgvectorscale
<span>cd</span> pgvectorscale/pgvectorscale
<span><span>#</span> install cargo-pgrx with the same version as pgrx</span>
cargo install --locked cargo-pgrx --version <span><span>$(</span>cargo metadata --format-version 1 <span>|</span> jq -r <span><span>&#39;</span>.packages[] | select(.name == &#34;pgrx&#34;) | .version<span>&#39;</span></span><span>)</span></span>
cargo pgrx init --pg18 pg_config
<span><span>#</span> build and install pgvectorscale</span>
cargo pgrx install --release</pre></div>
<p dir="auto">You can also take a look at our <a href="https://github.com/timescale/pgvectorscale/blob/main/DEVELOPMENT.md">documentation for extension developers</a> for more complete instructions.</p>
</li>
<li>
<p dir="auto">Connect to your database:</p>
<div dir="auto" data-snippet-clipboard-copy-content="psql -d &#34;postgres://&lt;username&gt;:&lt;password&gt;@&lt;host&gt;:&lt;port&gt;/&lt;database-name&gt;&#34;"><pre>psql -d <span><span>&#34;</span>postgres://&lt;username&gt;:&lt;password&gt;@&lt;host&gt;:&lt;port&gt;/&lt;database-name&gt;<span>&#34;</span></span></pre></div>
</li>
<li>
<p dir="auto">Ensure the pgvector extension is available:</p>
<div dir="auto" data-snippet-clipboard-copy-content="SELECT * FROM pg_available_extensions WHERE name = &#39;vector&#39;;"><pre><span>SELECT</span> <span>*</span> <span>FROM</span> pg_available_extensions <span>WHERE</span> name <span>=</span> <span><span>&#39;</span>vector<span>&#39;</span></span>;</pre></div>
<p dir="auto">If pgvector is not available, install it using the <a href="https://github.com/pgvector/pgvector?tab=readme-ov-file#installation">pgvector installation
instructions</a>.</p>
</li>
<li>
<p dir="auto">Create the pgvectorscale extension:</p>
<div dir="auto" data-snippet-clipboard-copy-content="CREATE EXTENSION IF NOT EXISTS vectorscale CASCADE;"><pre>CREATE EXTENSION IF NOT EXISTS vectorscale CASCADE;</pre></div>
<p dir="auto">The <code>CASCADE</code> automatically installs <code>pgvector</code>.</p>
</li>
</ol>
<div dir="auto"><h3 tabindex="-1" dir="auto">Enable pgvectorscale in a Timescale Cloud service</h3><a id="user-content-enable-pgvectorscale-in-a-timescale-cloud-service" aria-label="Permalink: Enable pgvectorscale in a Timescale Cloud service" href="#enable-pgvectorscale-in-a-timescale-cloud-service"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Note: the instructions below are for Timescale&#39;s standard compute instance. For production vector workloads, we&#39;re offering <strong>private beta access to vector-optimized databases</strong> with pgvector and pgvectorscale on Timescale. <a href="https://timescale.typeform.com/to/H7lQ10eQ" rel="nofollow">Sign up here for priority access</a>.</p>
<p dir="auto">To enable pgvectorscale:</p>
<ol dir="auto">
<li>
<p dir="auto">Create a new <a href="https://console.cloud.timescale.com/signup?utm_campaign=vectorlaunch" rel="nofollow">Timescale Service</a>.</p>
<p dir="auto">If you want to use an existing service, pgvectorscale is added as an available extension on the first maintenance window
after the pgvectorscale release date.</p>
</li>
<li>
<p dir="auto">Connect to your Timescale service:</p>
<div dir="auto" data-snippet-clipboard-copy-content="psql -d &#34;postgres://&lt;username&gt;:&lt;password&gt;@&lt;host&gt;:&lt;port&gt;/&lt;database-name&gt;&#34;"><pre>psql -d <span><span>&#34;</span>postgres://&lt;username&gt;:&lt;password&gt;@&lt;host&gt;:&lt;port&gt;/&lt;database-name&gt;<span>&#34;</span></span></pre></div>
</li>
<li>
<p dir="auto">Create the pgvectorscale extension:</p>
<div data-snippet-clipboard-copy-content="CREATE EXTENSION IF NOT EXISTS vectorscale CASCADE;"><pre lang="postgresql"><code>CREATE EXTENSION IF NOT EXISTS vectorscale CASCADE;
</code></pre></div>
<p dir="auto">The <code>CASCADE</code> automatically installs <code>pgvector</code>.</p>
</li>
</ol>
<div dir="auto"><h2 tabindex="-1" dir="auto">Get started with pgvectorscale</h2><a id="user-content-get-started-with-pgvectorscale" aria-label="Permalink: Get started with pgvectorscale" href="#get-started-with-pgvectorscale"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ol dir="auto">
<li>
<p dir="auto">Create a table with an embedding column. For example:</p>
<div data-snippet-clipboard-copy-content="CREATE TABLE IF NOT EXISTS document_embedding  (
    id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    metadata JSONB,
    contents TEXT,
    embedding VECTOR(1536)
)"><pre lang="postgresql"><code>CREATE TABLE IF NOT EXISTS document_embedding  (
    id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    metadata JSONB,
    contents TEXT,
    embedding VECTOR(1536)
)
</code></pre></div>
</li>
<li>
<p dir="auto">Populate the table.</p>
<p dir="auto">For more information, see the <a href="https://github.com/pgvector/pgvector/blob/master/README.md#storing">pgvector instructions</a> and <a href="https://github.com/pgvector/pgvector/blob/master/README.md#languages">list of clients</a>.</p>
</li>
<li>
<p dir="auto">Create a StreamingDiskANN index on the embedding column:</p>
<div data-snippet-clipboard-copy-content="CREATE INDEX document_embedding_idx ON document_embedding
USING diskann (embedding vector_cosine_ops);"><pre lang="postgresql"><code>CREATE INDEX document_embedding_idx ON document_embedding
USING diskann (embedding vector_cosine_ops);
</code></pre></div>
</li>
<li>
<p dir="auto">Find the 10 closest embeddings using the index.</p>
<div data-snippet-clipboard-copy-content="SELECT *
FROM document_embedding
ORDER BY embedding &lt;=&gt; $1
LIMIT 10;"><pre lang="postgresql"><code>SELECT *
FROM document_embedding
ORDER BY embedding &lt;=&gt; $1
LIMIT 10;
</code></pre></div>
<p dir="auto">Note: pgvectorscale currently supports: cosine distance (<code>&lt;=&gt;</code>) queries, for indices created with <code>vector_cosine_ops</code>; L2 distance (<code>&lt;-&gt;</code>) queries, for indices created with <code>vector_l2_ops</code>; and inner product (<code>&lt;#&gt;</code>) queries, for indices created with <code>vector_ip_ops</code>.  This is the same syntax used by <code>pgvector</code>.  If you would like additional distance types,
<a href="https://github.com/timescale/pgvectorscale/issues">create an issue</a>.  (Note: inner product indices are not compatible with plain storage.)</p>
</li>
</ol>

<p dir="auto">pgvectorscale supports combining vector similarity search with metadata filtering. There are two basic kinds of filtering, which can be combined in a single query:</p>
<ol dir="auto">
<li><strong>Label-based filtering with the diskann index</strong>: This provides optimized performance for filtering by labels.</li>
<li><strong>Arbitrary WHERE clause filtering</strong>: This uses post-filtering after the vector search.</li>
</ol>
<p dir="auto">The label-based filtering implementation is based on the <a href="https://dl.acm.org/doi/10.1145/3543507.3583552" rel="nofollow">Filtered DiskANN</a> approach developed by Microsoft researchers, which enables efficient filtered vector search while maintaining high recall.</p>
<p dir="auto">The post-filtering implementation, while slower, is streaming and correct, ensuring accurate results without requiring the entire result set to be loaded into memory.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Label-based Filtering with diskann</h3><a id="user-content-label-based-filtering-with-diskann" aria-label="Permalink: Label-based Filtering with diskann" href="#label-based-filtering-with-diskann"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">For optimal performance with label filtering, you must specify the label column directly in the index creation:</p>
<ol dir="auto">
<li>
<p dir="auto">Create a table with an embedding column and a labels array:</p>
<div data-snippet-clipboard-copy-content="CREATE TABLE documents (
    id SERIAL PRIMARY KEY,
    embedding VECTOR(1536),
    labels SMALLINT[],  -- Array of category labels
    status TEXT,
    created_at TIMESTAMPTZ
);"><pre lang="postgresql"><code>CREATE TABLE documents (
    id SERIAL PRIMARY KEY,
    embedding VECTOR(1536),
    labels SMALLINT[],  -- Array of category labels
    status TEXT,
    created_at TIMESTAMPTZ
);
</code></pre></div>
</li>
<li>
<p dir="auto">Create a StreamingDiskANN index on the embedding column, including the labels column:</p>
<div data-snippet-clipboard-copy-content="CREATE INDEX ON documents USING diskann (embedding vector_cosine_ops, labels);"><pre lang="postgresql"><code>CREATE INDEX ON documents USING diskann (embedding vector_cosine_ops, labels);
</code></pre></div>
</li>
</ol>
<blockquote>
<p dir="auto"><strong>Note</strong>: Label values must be within the PostgreSQL <code>smallint</code> range (-32768 to 32767). Using <code>smallint[]</code> for labels ensures that PostgreSQL&#39;s type system will automatically enforce these bounds.</p>
<p dir="auto">pgvectorscale includes an implementation of the <code>&amp;&amp;</code> overlap operator for <code>smallint[]</code> arrays, which is used for efficient label-based filtering.</p>
</blockquote>
<ol start="3" dir="auto">
<li>
<p dir="auto">Perform label-filtered vector searches using the <code>&amp;&amp;</code> operator (array overlap):</p>
<div data-snippet-clipboard-copy-content="-- Find similar documents with specific labels
SELECT * FROM documents
WHERE labels &amp;&amp; ARRAY[1, 3]  -- Documents with label 1 OR 3
ORDER BY embedding &lt;=&gt; &#39;[...]&#39;
LIMIT 10;"><pre lang="postgresql"><code>-- Find similar documents with specific labels
SELECT * FROM documents
WHERE labels &amp;&amp; ARRAY[1, 3]  -- Documents with label 1 OR 3
ORDER BY embedding &lt;=&gt; &#39;[...]&#39;
LIMIT 10;
</code></pre></div>
<p dir="auto">The index directly supports this type of filtering, providing significantly lower latency results compared to post-filtering.</p>
</li>
</ol>
<div dir="auto"><h4 tabindex="-1" dir="auto">Giving Semantic Meaning to Labels</h4><a id="user-content-giving-semantic-meaning-to-labels" aria-label="Permalink: Giving Semantic Meaning to Labels" href="#giving-semantic-meaning-to-labels"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">While the labels must be stored as integers in the array for the index to work efficiently, you can give them semantic meaning by relating them to a separate labels table:</p>
<ol dir="auto">
<li>
<p dir="auto">Create a labels table with meaningful descriptions:</p>
<div data-snippet-clipboard-copy-content="CREATE TABLE label_definitions (
    id INTEGER PRIMARY KEY,
    name TEXT,
    description TEXT,
    attributes JSONB  -- Can store additional metadata about the label
);

-- Insert some label definitions
INSERT INTO label_definitions (id, name, description, attributes) VALUES
(1, &#39;science&#39;, &#39;Scientific content&#39;, &#39;{&#34;domain&#34;: &#34;academic&#34;, &#34;confidence&#34;: 0.95}&#39;),
(2, &#39;technology&#39;, &#39;Technology-related content&#39;, &#39;{&#34;domain&#34;: &#34;technical&#34;, &#34;confidence&#34;: 0.92}&#39;),
(3, &#39;business&#39;, &#39;Business and finance content&#39;, &#39;{&#34;domain&#34;: &#34;commercial&#34;, &#34;confidence&#34;: 0.88}&#39;);"><pre lang="postgresql"><code>CREATE TABLE label_definitions (
    id INTEGER PRIMARY KEY,
    name TEXT,
    description TEXT,
    attributes JSONB  -- Can store additional metadata about the label
);

-- Insert some label definitions
INSERT INTO label_definitions (id, name, description, attributes) VALUES
(1, &#39;science&#39;, &#39;Scientific content&#39;, &#39;{&#34;domain&#34;: &#34;academic&#34;, &#34;confidence&#34;: 0.95}&#39;),
(2, &#39;technology&#39;, &#39;Technology-related content&#39;, &#39;{&#34;domain&#34;: &#34;technical&#34;, &#34;confidence&#34;: 0.92}&#39;),
(3, &#39;business&#39;, &#39;Business and finance content&#39;, &#39;{&#34;domain&#34;: &#34;commercial&#34;, &#34;confidence&#34;: 0.88}&#39;);
</code></pre></div>
</li>
<li>
<p dir="auto">When inserting documents, use the appropriate label IDs:</p>
<div data-snippet-clipboard-copy-content="-- Insert a document with science and technology labels
INSERT INTO documents (embedding, labels)
VALUES (&#39;[...]&#39;, ARRAY[1, 2]);"><pre lang="postgresql"><code>-- Insert a document with science and technology labels
INSERT INTO documents (embedding, labels)
VALUES (&#39;[...]&#39;, ARRAY[1, 2]);
</code></pre></div>
</li>
<li>
<p dir="auto">When querying, you can join with the labels table to work with meaningful names:</p>
<div data-snippet-clipboard-copy-content="-- Find similar science documents and include label information
SELECT d.*, array_agg(l.name) as label_names
FROM documents d
JOIN label_definitions l ON l.id = ANY(d.labels)
WHERE d.labels &amp;&amp; ARRAY[1]  -- Science label
GROUP BY d.id, d.embedding, d.labels, d.status, d.created_at
ORDER BY d.embedding &lt;=&gt; &#39;[...]&#39;
LIMIT 10;"><pre lang="postgresql"><code>-- Find similar science documents and include label information
SELECT d.*, array_agg(l.name) as label_names
FROM documents d
JOIN label_definitions l ON l.id = ANY(d.labels)
WHERE d.labels &amp;&amp; ARRAY[1]  -- Science label
GROUP BY d.id, d.embedding, d.labels, d.status, d.created_at
ORDER BY d.embedding &lt;=&gt; &#39;[...]&#39;
LIMIT 10;
</code></pre></div>
</li>
<li>
<p dir="auto">You can also convert between label names and IDs when filtering:</p>
<div data-snippet-clipboard-copy-content="-- Find documents with specific label names
SELECT d.*
FROM documents d
WHERE d.labels &amp;&amp; (
    SELECT array_agg(id)
    FROM label_definitions
    WHERE name IN (&#39;science&#39;, &#39;business&#39;)
)
ORDER BY d.embedding &lt;=&gt; &#39;[...]&#39;
LIMIT 10;"><pre lang="postgresql"><code>-- Find documents with specific label names
SELECT d.*
FROM documents d
WHERE d.labels &amp;&amp; (
    SELECT array_agg(id)
    FROM label_definitions
    WHERE name IN (&#39;science&#39;, &#39;business&#39;)
)
ORDER BY d.embedding &lt;=&gt; &#39;[...]&#39;
LIMIT 10;
</code></pre></div>
</li>
</ol>
<p dir="auto">This approach gives you the performance benefits of integer-based label filtering while still allowing you to work with semantically meaningful labels in your application.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">Arbitrary WHERE Clause Filtering</h3><a id="user-content-arbitrary-where-clause-filtering" aria-label="Permalink: Arbitrary WHERE Clause Filtering" href="#arbitrary-where-clause-filtering"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You can also use any PostgreSQL WHERE clause with vector search, but these conditions will be applied as post-filtering:</p>
<div data-snippet-clipboard-copy-content="-- Find similar documents with specific status and date range
SELECT * FROM documents
WHERE status = &#39;active&#39; AND created_at &gt; &#39;2024-01-01&#39;
ORDER BY embedding &lt;=&gt; &#39;[...]&#39;
LIMIT 10;"><pre lang="postgresql"><code>-- Find similar documents with specific status and date range
SELECT * FROM documents
WHERE status = &#39;active&#39; AND created_at &gt; &#39;2024-01-01&#39;
ORDER BY embedding &lt;=&gt; &#39;[...]&#39;
LIMIT 10;
</code></pre></div>
<p dir="auto">For these arbitrary conditions, the vector search happens first, and then the WHERE conditions are applied to the results. For best performance with frequently used filters, consider using the label-based approach described above.</p>

<p dir="auto">The StreamingDiskANN index comes with <strong>smart defaults</strong> but also the ability to customize its behavior. There are two types of parameters: index build-time parameters that are specified when an index is created and query-time parameters that can be tuned when querying an index.</p>
<p dir="auto">We suggest setting the index build-time paramers for major changes to index operations while query-time parameters can be used to tune the accuracy/performance tradeoff for individual queries.</p>
<p dir="auto">We expect most people to tune the query-time parameters (if any) and leave the index build time parameters set to default.</p>
<div dir="auto"><h3 tabindex="-1" dir="auto">StreamingDiskANN index build-time parameters</h3><a id="user-content-streamingdiskann-index-build-time-parameters" aria-label="Permalink: StreamingDiskANN index build-time parameters" href="#streamingdiskann-index-build-time-parameters"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The StreamingDiskANN index build process can be memory-intensive. You may need to increase the <code>maintenance_work_mem</code> parameter to improve build performance. For example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="SET maintenance_work_mem = &#39;2GB&#39;;"><pre><span>SET</span> maintenance_work_mem <span>=</span> <span><span>&#39;</span>2GB<span>&#39;</span></span>;</pre></div>
<p dir="auto">This parameter controls the maximum amount of memory to be used by maintenance operations, including index builds. The default value is typically 64MB, which may be too low for building StreamingDiskANN indexes on large datasets.</p>
<p dir="auto">These parameters can be set when an index is created.</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Parameter name</th>
<th>Description</th>
<th>Default value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>storage_layout</code></td>
<td><code>memory_optimized</code> which uses SBQ to compress vector data or <code>plain</code> which stores data uncompressed</td>
<td>memory_optimized</td>
</tr>
<tr>
<td><code>num_neighbors</code></td>
<td>Sets the maximum number of neighbors per node. Higher values increase accuracy but make the graph traversal slower.</td>
<td>50</td>
</tr>
<tr>
<td><code>search_list_size</code></td>
<td>This is the S parameter used in the greedy search algorithm used during construction. Higher values improve graph quality at the cost of slower index builds.</td>
<td>100</td>
</tr>
<tr>
<td><code>max_alpha</code></td>
<td>Is the alpha parameter in the algorithm. Higher values improve graph quality at the cost of slower index builds.</td>
<td>1.2</td>
</tr>
<tr>
<td><code>num_dimensions</code></td>
<td>The number of dimensions to index. By default, all dimensions are indexed. But you can also index less dimensions to make use of <a href="https://huggingface.co/blog/matryoshka" rel="nofollow">Matryoshka embeddings</a></td>
<td>0 (all dimensions)</td>
</tr>
<tr>
<td><code>num_bits_per_dimension</code></td>
<td>Number of bits used to encode each dimension when using SBQ</td>
<td>2 for less than 900 dimensions, 1 otherwise</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto">An example of how to set the <code>num_neighbors</code> parameter is:</p>
<div dir="auto" data-snippet-clipboard-copy-content="CREATE INDEX document_embedding_idx ON document_embedding
USING diskann (embedding) WITH(num_neighbors=50);"><pre><span>CREATE</span> <span>INDEX</span> <span>document_embedding_idx</span> <span>ON</span> document_embedding
USING diskann (embedding) WITH(num_neighbors<span>=</span><span>50</span>);</pre></div>
<p dir="auto">An example of creating an index with label-based filtering:</p>
<div dir="auto" data-snippet-clipboard-copy-content="CREATE INDEX document_embedding_idx ON document_embedding
USING diskann (embedding vector_cosine_ops, labels);"><pre><span>CREATE</span> <span>INDEX</span> <span>document_embedding_idx</span> <span>ON</span> document_embedding
USING diskann (embedding vector_cosine_ops, labels);</pre></div>
<div dir="auto"><h4 tabindex="-1" dir="auto">Parallel Index Build Parameters</h4><a id="user-content-parallel-index-build-parameters" aria-label="Permalink: Parallel Index Build Parameters" href="#parallel-index-build-parameters"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">pgvectorscale supports parallel index building to improve performance on large datasets. These parameters control parallel build behavior:</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Parameter name</th>
<th>Description</th>
<th>Default value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>diskann.parallel_flush_interval</code></td>
<td>The fraction of total vectors (0.0-1.0) processed before flushing neighbor cache in parallel builds</td>
<td>0.1</td>
</tr>
<tr>
<td><code>diskann.parallel_initial_start_nodes_count</code></td>
<td>The number of initial start nodes to process before starting parallel workers</td>
<td>1024</td>
</tr>
<tr>
<td><code>diskann.min_vectors_for_parallel_build</code></td>
<td>Minimum number of vectors required to enable parallel building</td>
<td>65536</td>
</tr>
<tr>
<td><code>diskann.force_parallel_workers</code></td>
<td>Force a specific number of parallel workers for index builds (-1 for automatic)</td>
<td>-1</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto">Parallel building is automatically enabled when:</p>
<ul dir="auto">
<li>The feature is compiled in (enabled by default)</li>
<li>The table has no labels (label-based filtering not yet supported in parallel)</li>
<li>Using SBQ compression storage layout</li>
<li>The number of vectors meets the <code>min_vectors_for_parallel_build</code> threshold</li>
</ul>
<p dir="auto">You can set these parameters using <code>SET</code> before creating an index:</p>
<div dir="auto" data-snippet-clipboard-copy-content="-- Enable parallel building for smaller datasets
SET diskann.min_vectors_for_parallel_build = 10000;

-- Use 4 parallel workers regardless of PostgreSQL&#39;s automatic determination
SET diskann.force_parallel_workers = 4;

-- Adjust cache flushing frequency for memory usage (flush after processing 5% of vectors)
SET diskann.parallel_flush_interval = 0.05;

CREATE INDEX ON my_table USING diskann (embedding vector_cosine_ops);"><pre><span><span>--</span> Enable parallel building for smaller datasets</span>
<span>SET</span> <span>diskann</span>.<span>min_vectors_for_parallel_build</span> <span>=</span> <span>10000</span>;

<span><span>--</span> Use 4 parallel workers regardless of PostgreSQL&#39;s automatic determination</span>
<span>SET</span> <span>diskann</span>.<span>force_parallel_workers</span> <span>=</span> <span>4</span>;

<span><span>--</span> Adjust cache flushing frequency for memory usage (flush after processing 5% of vectors)</span>
<span>SET</span> <span>diskann</span>.<span>parallel_flush_interval</span> <span>=</span> <span>0</span>.<span>05</span>;

<span>CREATE</span> <span>INDEX</span> <span>ON</span> my_table USING diskann (embedding vector_cosine_ops);</pre></div>
<div dir="auto"><h4 tabindex="-1" dir="auto">StreamingDiskANN query-time parameters</h4><a id="user-content-streamingdiskann-query-time-parameters" aria-label="Permalink: StreamingDiskANN query-time parameters" href="#streamingdiskann-query-time-parameters"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You can also set two parameters to control the accuracy vs. query speed trade-off at query time. We suggest adjusting <code>diskann.query_rescore</code> to fine-tune accuracy.</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Parameter name</th>
<th>Description</th>
<th>Default value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>diskann.query_search_list_size</code></td>
<td>The number of additional candidates considered during the graph search.</td>
<td>100</td>
</tr>
<tr>
<td><code>diskann.query_rescore</code></td>
<td>The number of elements rescored (0 to disable rescoring)</td>
<td>50</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto">You can set the value by using <code>SET</code> before executing a query. For example:</p>
<div dir="auto" data-snippet-clipboard-copy-content="SET diskann.query_rescore = 400;"><pre><span>SET</span> <span>diskann</span>.<span>query_rescore</span> <span>=</span> <span>400</span>;</pre></div>
<p dir="auto">Note the <a href="https://www.postgresql.org/docs/current/sql-set.html" rel="nofollow">SET command</a> applies to the entire session (database connection) from the point of execution. You can use a transaction-local variant using <code>LOCAL</code> which will
be reset after the end of the transaction:</p>
<div dir="auto" data-snippet-clipboard-copy-content="BEGIN;
SET LOCAL diskann.query_search_list_size= 10;
SELECT * FROM document_embedding ORDER BY embedding &lt;=&gt; $1 LIMIT 10
COMMIT;"><pre><span>BEGIN</span>;
<span>SET</span> LOCAL <span>diskann</span>.<span>query_search_list_size</span><span>=</span> <span>10</span>;
<span>SELECT</span> <span>*</span> <span>FROM</span> document_embedding <span>ORDER BY</span> embedding <span>&lt;=&gt;</span> $<span>1</span> <span>LIMIT</span> <span>10</span>
<span>COMMIT</span>;</pre></div>

<ul dir="auto">
<li>Null vectors are not indexed</li>
<li>Null labels are treated as empty arrays</li>
<li>Null values in label arrays are ignored</li>
</ul>

<p dir="auto">pgvectorscale&#39;s diskann index uses relaxed ordering which allows results to be
slightly out of order by distance. This is analogous to using
<a href="https://github.com/pgvector/pgvector?tab=readme-ov-file#iterative-index-scans"><code>iterative scan with relaxed ordering</code></a> with
pgvector&#39;s ivfflat or hnsw indexes.</p>
<p dir="auto">If you need strict ordering you can use a <a href="https://www.postgresql.org/docs/current/queries-with.html#QUERIES-WITH-CTE-MATERIALIZATION" rel="nofollow">materialized CTE</a>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="WITH relaxed_results AS MATERIALIZED (
    SELECT id, embedding &lt;=&gt; &#39;[1,2,3]&#39; AS distance
    FROM items
    WHERE category_id = 123
    ORDER BY distance
    LIMIT 5
) SELECT * FROM relaxed_results ORDER BY distance;"><pre>WITH relaxed_results <span>AS</span> MATERIALIZED (
    <span>SELECT</span> id, embedding <span>&lt;=&gt;</span> <span><span>&#39;</span>[1,2,3]<span>&#39;</span></span> <span>AS</span> distance
    <span>FROM</span> items
    <span>WHERE</span> category_id <span>=</span> <span>123</span>
    <span>ORDER BY</span> distance
    <span>LIMIT</span> <span>5</span>
) <span>SELECT</span> <span>*</span> <span>FROM</span> relaxed_results <span>ORDER BY</span> distance;</pre></div>
<div dir="auto"><h2 tabindex="-1" dir="auto">Index on an UNLOGGED table</h2><a id="user-content-index-on-an-unlogged-table" aria-label="Permalink: Index on an UNLOGGED table" href="#index-on-an-unlogged-table"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Creating an index on an UNLOGGED table is currently not supported.
Trying will yield the error:</p>
<div data-snippet-clipboard-copy-content="ERROR:  ambuildempty: not yet implemented"><pre><code>ERROR:  ambuildempty: not yet implemented
</code></pre></div>

<p dir="auto">pgvectorscale is still at an early stage. Now is a great time to help shape the
direction of this project; we are currently deciding priorities. Have a look at the
list of features we&#39;re thinking of working on. Feel free to comment, expand
the list, or hop on the Discussions forum.</p>

<p dir="auto">Timescale is a PostgreSQL cloud company. To learn more visit the <a href="https://www.timescale.com" rel="nofollow">timescale.com</a>.</p>
<p dir="auto"><a href="https://console.cloud.timescale.com/signup?utm_campaign=vectorlaunch" rel="nofollow">Timescale Cloud</a> is a high-performance, developer focused, cloud platform that provides PostgreSQL services for the most demanding AI, time-series, analytics, and event workloads. Timescale Cloud is ideal for production applications and provides high availability, streaming backups, upgrades over time, roles and permissions, and great security.</p>
</article></div></div>
  </body>
</html>
