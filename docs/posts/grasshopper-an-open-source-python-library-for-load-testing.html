<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://innovation.alteryx.com/introducing-grasshopper-an-open-source-python-library-for-load-testing/">Original</a>
    <h1>Grasshopper – An open-source Python library for load testing</h1>
    
    <div id="readability-page-1" class="page"><div id="site-main">
<article>

    <header>

        

        


        <div>
        <section>

            <ul>
                <li>
                    <a href="https://innovation.alteryx.com/author/jmfiola/">
                        <img src="https://innovation.alteryx.com/content/images/size/w100/2023/04/IMG_5609-1.jpg" alt="Jacob Fiola"/>
                    </a>
                </li>
            </ul>

            <div>
                
                <p><time datetime="2023-04-27">Apr 27, 2023</time>
                        <span><span>•</span> 6 min read</span>
                </p>
            </div>

        </section>
        </div>

            <figure>
                <img srcset="/content/images/size/w300/2023/05/grasshopper_open_source_article_image.png 300w,
                            /content/images/size/w600/2023/05/grasshopper_open_source_article_image.png 600w,
                            /content/images/size/w1000/2023/05/grasshopper_open_source_article_image.png 1000w,
                            /content/images/size/w2000/2023/05/grasshopper_open_source_article_image.png 2000w" sizes="(min-width: 1400px) 1400px, 92vw" src="https://innovation.alteryx.com/content/images/size/w2000/2023/05/grasshopper_open_source_article_image.png" alt="Introducing Grasshopper - An Open Source Python Library for Load Testing"/>
            </figure>

    </header>

    <section>
        <p>We’re excited to announce that a new open-source project has joined the Alteryx open-source ecosystem. Grasshopper is a library for automated load testing, written in Python.</p><h2 id="introduction">Introduction</h2><p>At Alteryx, one of our objectives is to develop innovative tools and frameworks that enhance software testing abilities. As part of this mission, we have designed a user-friendly, open-source framework that enables individuals to optimize their performance testing efforts. This framework is specifically intended to help measure software performance by load testing against an API by generating metrics such as response times, failure rates, and custom trends and reporting those metrics to a timeseries database. Our aim is to help everyone progress on their performance testing journey through this framework.</p><figure><img src="https://innovation.alteryx.com/content/images/2023/04/banner-racecars.png" alt="" loading="lazy" width="1667" height="418" srcset="https://innovation.alteryx.com/content/images/size/w600/2023/04/banner-racecars.png 600w, https://innovation.alteryx.com/content/images/size/w1000/2023/04/banner-racecars.png 1000w, https://innovation.alteryx.com/content/images/size/w1600/2023/04/banner-racecars.png 1600w, https://innovation.alteryx.com/content/images/2023/04/banner-racecars.png 1667w" sizes="(min-width: 720px) 720px"/></figure><p>Our team <em>loved </em>how easy it was to get started with <a href="https://locust.io/?ref=innovation.alteryx.com">Locust</a>, but, it lacked an out-of-the-box solution to measure the timings that span multiple HTTP requests. This was a crucial factor in assessing our software’s performance. Additionally, we were unable to aggregate metrics for a generalized conditional statement or report those metrics to a timeseries database. These features were essential for us to conduct efficient and comprehensive performance testing of our software. As a result, we extended locust to create Grasshopper, which includes all of these necessary capabilities.</p><p>So, we are excited to announce a new addition to our open-source projects: <strong>Grasshopper</strong>, a load-testing Python library. Grasshopper uses <a href="https://locust.io/?ref=innovation.alteryx.com">Locust</a> under the hood, and provides a few key features on top, namely:</p><ul><li>Checks</li><li>Custom Trends</li><li>Timing Thresholds</li><li>Timeseries DB reporting and tagging (namely InfluxDB)</li><li>Integration with PyTest<br/></li></ul><figure><img src="https://innovation.alteryx.com/content/images/2023/05/Screenshot-at-Apr-28-13-09-21.png" alt="" loading="lazy" width="2000" height="852" srcset="https://innovation.alteryx.com/content/images/size/w600/2023/05/Screenshot-at-Apr-28-13-09-21.png 600w, https://innovation.alteryx.com/content/images/size/w1000/2023/05/Screenshot-at-Apr-28-13-09-21.png 1000w, https://innovation.alteryx.com/content/images/size/w1600/2023/05/Screenshot-at-Apr-28-13-09-21.png 1600w, https://innovation.alteryx.com/content/images/2023/05/Screenshot-at-Apr-28-13-09-21.png 2310w" sizes="(min-width: 1200px) 1200px"/><figcaption>An example Grafana dashboard that uses Grasshopper &amp; InfluxDB metrics. To get started with your own dashboard, see the “example” folder in the Grasshopper repository.</figcaption></figure><h2 id="background">Background</h2><p>Recently, our team was presented with a rare opportunity that SDETs often dream of - a chance to pause and evaluate the tooling we were using for our performance testing. After carefully surveying the available options, we chose Locust as the foundation for our solution. This decision was made with the benefit of hindsight, allowing us to incorporate lessons learned from previous experiences into our tooling strategy.</p><h3 id="why-locust"></h3><p>As a performance team with SDETs, we were interested in Locust for a variety of reasons, including:</p><ul><li><strong>it&#39;s Python</strong> - Many of our SDETs had expertise in Python and wanted access to the simplicity of Python and the huge ecosystem of python packages available. Decorators, pytest, and breakpoints to name a few.</li><li><strong>it&#39;s modular</strong> - Locust was built with customizability in mind. If we had some test requirement that it did not initially fulfill, <a href="https://docs.locust.io/en/stable/extending-locust.html?ref=innovation.alteryx.com">we could always add a custom listener</a> or decorator to extend the functionality.</li><li><strong>it&#39;s realistic</strong> -  Locust offered some great features around closely replicating user behavior. For example, one could define a list of tasks for each user to perform, and then put weights on each task to determine how often each will be performed.</li><li><strong>we already had a shared API test library in Python</strong> - Our quality organization had already developed a library for many of the API actions used in functional tests. If we were able to re-use those functions in our performance tests, then that would be huge, as we could maintain both frameworks at once without any duplicated code.</li></ul><h3 id="immediate-benefits"></h3><p>Our team made a significant breakthrough when we integrated Locust with the shared functional API test library. Though there were some details to iron out, we were ultimately successful in making it work. This achievement had a monumental impact on our team&#39;s efficiency and the overall quality of our work. By leveraging the shared library, we were able to eliminate the need for a dedicated set of API actions for performance testing, freeing up our resources to concentrate on more critical tasks. Additionally, our ability to contribute to the shared library garnered enthusiasm and satisfaction from our colleagues in the quality organization.<br/></p><h3 id="but-we-needed-more-time-for-some-innovation">But, we needed more... time for some innovation!</h3><figure><img src="https://innovation.alteryx.com/content/images/2023/04/banner-lightbulb-and-gears.png" alt="" loading="lazy" width="2000" height="501" srcset="https://innovation.alteryx.com/content/images/size/w600/2023/04/banner-lightbulb-and-gears.png 600w, https://innovation.alteryx.com/content/images/size/w1000/2023/04/banner-lightbulb-and-gears.png 1000w, https://innovation.alteryx.com/content/images/size/w1600/2023/04/banner-lightbulb-and-gears.png 1600w, https://innovation.alteryx.com/content/images/size/w2400/2023/04/banner-lightbulb-and-gears.png 2400w" sizes="(min-width: 720px) 720px"/></figure><p>Despite the love for Locust, we identified a number of items that more mature tools and frameworks provide.</p><ul><li>Tag-based suites for trend analysis and other situations where we evaluate a proposed change to the product/configuration</li><li>Custom trends. For example, say you have some timed action that spans multiple HTTP calls. Locust does not have the functionality to keep track of such a timing, so we added this as a decorator that can be wrapped around the method that you care about.</li><li>Checks. Checks validate boolean conditions in the test. For example, a check could validate that a response body has a certain shape. This check is given a name, and is aggregated over time.</li><li>Custom tagging for all metrics (checks, HTTP requests, Custom Trends)</li><li>Data to our timeseries db (influxdb) &amp; dashboards (Grafana). This includes HTTP response times, custom trends, checks, and custom tags.</li><li>Thresholds. For example, you care that the 90th percentile of HTTP requests for a certain request aren’t above x ms.</li><li>Reporting results to other locations (console reports, reportportal, slack, etc.)</li><li>And lastly, what every good testing framework needs – some reusable base classes that take care of the majority of the boilerplate that tests often contain</li></ul><h3 id="life-after-grasshopper">Life After Grasshopper</h3><figure><img src="https://innovation.alteryx.com/content/images/2023/04/banner-thumbs-up.png" alt="" loading="lazy" width="2000" height="501" srcset="https://innovation.alteryx.com/content/images/size/w600/2023/04/banner-thumbs-up.png 600w, https://innovation.alteryx.com/content/images/size/w1000/2023/04/banner-thumbs-up.png 1000w, https://innovation.alteryx.com/content/images/size/w1600/2023/04/banner-thumbs-up.png 1600w, https://innovation.alteryx.com/content/images/size/w2400/2023/04/banner-thumbs-up.png 2400w" sizes="(min-width: 720px) 720px"/></figure><p>Since grasshopper is so easy to get started with, we decided to evangelize this tool directly to our own developers within Alteryx, and have seen lots of success in the process. Now, there are developer teams that independently use this tool, and have the flexibility to extend it to their own specific use cases. This has been a massive win for shifting performance testing left in our software development lifecycle.</p><p>As an added bonus, we were able to reuse the api model library built for functional tests, saving a tremendous amount of work that would ultimately duplicate code. This also drastically speeds up our ability to reproduce cases that a customer has escalated.</p><h2 id="usage"><strong>Usage</strong></h2><h3 id="installation">Installation</h3><p>This package can be installed via pip: <code>pip install locust-grasshopper</code></p><h2 id="further-reading">Further Reading</h2><p>Please refer to the <a href="https://github.com/alteryx/locust-grasshopper?ref=innovation.alteryx.com">project README</a> for the most up-to-date documentation on how to create load tests with Grasshopper. There is also an in-depth example that can be used to get started on your load testing journey!</p><h2 id="future-outlook">Future Outlook</h2><p>In the future, we plan on adding the following functionality to grasshopper:</p><ul><li>slack reporting</li><li>reportportal reporting</li><li>prometheusDB reporting</li></ul><h2 id="contributions">Contributions</h2><p>Special thanks to the team that built Grasshopper: <strong><u>Suzanne Ezell, Jacob Fiola, Logan Michalicek, Simon Stratton, Mykola Solopii, Vijaya Ayyappaneni, and Ashwin Chandrasekar</u></strong>. In addition, we would like to thank <strong><u>Laurie Linz</u></strong>. None of this would have been possible without her support and leadership.</p><p>We would also like extend our thanks the maintainers of <a href="https://locust.io/?ref=innovation.alteryx.com">locust</a> and <a href="https://github.com/pjcalvo/locust-influxdb-listener?ref=innovation.alteryx.com">locust-influxdb-listener</a>. Grasshopper could not exist without the use of these packages.</p><p>If you have ideas for enhancing or improving Grasshopper, open source contributions are welcome. To get started, check out the Grasshopper “contributing” section in the project README.</p><p>If Grasshopper doesn’t quite fit your needs, here are some other load testing tools we evaluated, all open source options (definitively <em>not</em> exhaustive).</p><ul><li><a href="https://k6.io/?ref=innovation.alteryx.com">k6</a> - javascript based; the primary reason that we did not choose k6 was that the code is compiled to <a href="https://go.dev/?ref=innovation.alteryx.com">golang</a> before execution, so debugging was challenging. This also prevented us from using most npm packages in our performance tests.</li><li><a href="https://gatling.io/?ref=innovation.alteryx.com">Gatling</a> - scala based, includes recording feature, nice GUI for watching live tests; we ruled this out because of a lack of scala experience.</li><li><a href="https://jmeter.apache.org/?ref=innovation.alteryx.com">JMeter</a> - java based, fairly mature tool; But a major downside is that it uses a fully domain-specific language. In the end, we decided to go with a tool that could share our API library which was in python</li></ul>
    </section>


</article>
</div></div>
  </body>
</html>
