<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://successfulsoftware.net/2022/04/30/why-isnt-there-a-decent-file-format-for-tabular-data/">Original</a>
    <h1>Why isn’t there a decent file format for tabular data?</h1>
    
    <div id="readability-page-1" class="page"><div>
			
<p>Tabular data is everywhere. I support reading and writing tabular data in various formats in all 3 of my software application. It is an important part of my <a href="https://www.easydatatransform.com">data transformation  software</a>. But all the tabular data formats suck. There doesn’t seem to be anything that is reasonably space efficient, simple and quick to parse and text based (not binary) so you can view and edit it with a standard editor.</p>



<p>Most tabular data currently gets exchanged as: CSV, Tab separated, XML, JSON or Excel. And they are all highly sub-optimal for the job.</p>



<p>CSV is a mess. One quote in the wrong place and the file is invalid. It is difficult to parse efficiently using multiple cores, due to the quoting (you can’t start parsing from part way through a file). Different quoting schemes are in use. You don’t know what encoding it is in. Use of separators and line endings are inconsistent (sometimes comma, sometimes semicolon). Writing a parser to handle all the different dialects is not at all trivial. Microsoft Excel and Apple Numbers don’t even agree on how to interpret some edge cases for CSV. </p>



<p>Tab separated is a bit better than CSV. But can’t store tabs and still has issues with line endings, encodings etc.</p>



<p>XML and JSON are tree structures and not suitable for efficiently storing tabular data (plus other issues).</p>



<p>There is Parquet. It is very efficient with it’s columnar storage and compression. But it is binary, so can’t be viewed or edited with standard tools, which is a pain.</p>



<p>Don’t even get me started on Excel’s proprietary, ghastly binary format.</p>



<p>Why can’t we have a format where:</p>



<ul><li>Encoding is always UTF-8</li><li>Values stored in row major order (row 1, row2 etc)</li><li>Columns are separated by \u001F (ASCII unit separator)</li><li>Rows are separated by \u001E (ASCII record separator)</li><li>Er, that’s the entire specification.</li></ul>



<p>No escaping. If you want to put \u001F or \u001E in your data – tough you can’t. Use a different format.</p>



<p>It would be reasonably compact, efficient to parse and easy to manually edit (Notepad++ shows the unit separator as a ‘US’ symbol). You could write a fast parser for it in minutes. Typing \u001F or \u001E in some editors might be a faff, but it is hardly a showstopper.</p>



<p>It could be called something like “unicode separated value” (hat tip to <em>@fakeunicode</em> on Twitter for the name) or “unit separated value” with file extension .usv. Maybe a different extension could used when values are stored in column major order (column1, column 2 etc).</p>



<p>Is there nothing like this already? Maybe there is and I just haven’t heard of it. If not, shouldn’t there be?</p>



<p>And yes I am aware of the relevant XKCD cartoon ( <a rel="noreferrer noopener" href="https://xkcd.com/927/" target="_blank">https://xkcd.com/927/</a> ).</p>



<p>** Edit 4-May-2022 **</p>



<p>Javascript -&gt; JSON.</p>



<p>It has been pointed at the above will give you a single line of text in an editor, which is not great for human readability. A quick fix for this would be to make the record delimiter a \u001E character followed by an LF character. Any LF that comes immediately after an \u001E would be ignored when parsing. Any LF not immediately after an \u001E is part of the data.</p>
					</div></div>
  </body>
</html>
