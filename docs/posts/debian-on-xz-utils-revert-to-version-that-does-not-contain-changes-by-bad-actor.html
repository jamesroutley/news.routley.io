<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1068024">Original</a>
    <h1>Debian on xz-utils: revert to version that does not contain changes by bad actor</h1>
    
    <div id="readability-page-1" class="page">

<p><a href="https://bugs.debian.org/cgi-bin/version.cgi?absolute=0;info=1;found=xz-utils%2F5.6.1%2Breally5.4.5-1;collapse=1;package=xz-utils"><img alt="version graph" src="https://bugs.debian.org/cgi-bin/version.cgi?height=2;found=xz-utils%2F5.6.1%2Breally5.4.5-1;collapse=1;package=xz-utils;width=2;absolute=0"/></a></p>


<div>
  <p>Reported by: <a href="https://bugs.debian.org/cgi-bin/pkgreport.cgi?submitter=id%40joeyh.name">Joey Hess &lt;id@joeyh.name&gt;</a></p>
  <p>Date: Fri, 29 Mar 2024 20:36:01 UTC</p>

<p>Severity: important</p>
<p>Tags: security</p>

<p>Found in version xz-utils/5.6.1+really5.4.5-1</p>



</div>

<p><a href="mailto:1068024@bugs.debian.org">Reply</a> or <a href="mailto:1068024-subscribe@bugs.debian.org">subscribe</a> to this bug.</p>
<p>Toggle useless messages</p>

<div><hr/><p>
<a name="1"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Jonathan Nieder <jrnieder@gmail.com> -->
<!-- time:1711744564 -->
<strong>Report forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Jonathan Nieder &lt;jrnieder@gmail.com&gt;</code>:</p></div>

<div><hr/><p>
<a name="3"></a>
<!-- request_addr: Joey Hess <id@joeyh.name> -->
<!-- time:1711744564 -->
<strong>Acknowledgement sent</strong>
to <code>Joey Hess &lt;id@joeyh.name&gt;</code>:</p></div>

<hr/><p><a name="5"></a><a name="msg5"></a><a href="#5">Message #5</a> received at submit@bugs.debian.org (<a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1068024;msg=5">full text</a>, <a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1068024;mbox=yes;msg=5">mbox</a>, <a href="mailto:1068024@bugs.debian.org?body=On%20Fri%2C%2029%20Mar%202024%2016%3A25%3A26%20-0400%20Joey%20Hess%20%3Cid%40joeyh.name%3E%20wrote%3A%0A%3E%20Package%3A%20xz-utils%0A%3E%20Version%3A%205.6.1%2Breally5.4.5-1%0A%3E%20Severity%3A%20important%0A%3E%20Tags%3A%20security%0A%3E%20%0A%3E%20I%20count%20a%20minimum%20of%20750%20commits%20or%20contributions%20to%20xz%20by%20Jia%20Tan%2C%20who%0A%3E%20backdoored%20it.%0A%3E%20%0A%3E%20This%20includes%20all%20700%20commits%20made%20after%20they%20merged%20a%20pull%20request%20in%20Jan%207%0A%3E%202023%2C%20at%20which%20point%20they%20appear%20to%20have%20already%20had%20direct%20push%20access%2C%20which%0A%3E%20would%20have%20also%20let%20them%20push%20commits%20with%20forged%20authors.%20Probably%20a%20number%20of%0A%3E%20other%20commits%20before%20that%20point%20as%20well.%0A%3E%20%0A%3E%20Reverting%20the%20backdoored%20version%20to%20a%20previous%20version%20is%20not%20sufficient%20to%0A%3E%20know%20that%20Jia%20Tan%20has%20not%20hidden%20other%20backdoors%20in%20it.%20Version%205.4.5%20still%0A%3E%20contains%20the%20majority%20of%20those%20commits.%0A%3E%20%0A%3E%20Commits%20by%20them%20such%20as%2018d7facd3802b55c287581405c4d49c98708c136%20%0A%3E%20and%20ae5c07b22a6b3766b84f409f1b6b5c100469068a%20show%20that%20they%20were%20deep%0A%3E%20into%20analyzing%20the%20security%20of%20xz.%20They%20were%20well%20placed%20to%20insert%20a%20buffer%0A%3E%20overflow%20that%20could%20allow%20eg%2C%20a%20targeted%20xz%20file%20to%20cause%20arbitrary%20code%0A%3E%20execution.%20The%20impact%20of%20such%20a%20security%20hole%20could%20be%20much%20more%20stealthy%20and%0A%3E%20bad%20than%20the%20known%20backdoor%20since%20it%20would%20allow%20chaining%20xz%20with%20other%0A%3E%20unrelated%20software%20releases%20on%20an%20ongoing%20basis.%0A%3E%20%0A%3E%20The%20package%20should%20be%20reverted%20to%20a%20version%20before%20their%20involvement%2C%0A%3E%20which%20started%20with%20commit%206468f7e41a8e9c611e4ba8d34e2175c5dacdbeb4.%0A%3E%20Or%20their%20early%20commits%20vetted%20and%20revert%20to%20a%20later%20point%2C%20but%20any%20arbitrary%20%0A%3E%20commit%20by%20a%20known%20bad%20and%20malicious%20actor%20almost%20certainly%20has%20less%20value%0A%3E%20than%20the%20risk%20that%20a%20subtle%20change%20go%20unnoticed.%0A%3E%20%0A%3E%20I%27d%20suggest%20reverting%20to%205.3.1.%20Bearing%20in%20mind%20that%20there%20were%20security%0A%3E%20fixes%20after%20that%20point%20for%20ZDI-CAN-16587%20that%20would%20need%20to%20be%20reapplied.%0A%3E%20%0A%3E%20--%20%0A%3E%20see%20shy%20jo%0A&amp;subject=Re%3A%20revert%20to%20version%20that%20does%20not%20contain%20changes%20by%20bad%20actor&amp;In-Reply-To=%3CZgcjtvSjQM59nX_w%40kitenet.net%3E&amp;References=%3CZgcjtvSjQM59nX_w%40kitenet.net%3E">reply</a>):</p>

<pre>[<a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?att=0;bug=1068024;msg=5">Message part 1</a> (text/plain, inline)]</pre>
<pre>Package: xz-utils
Version: 5.6.1+really5.4.5-1
Severity: important
Tags: security

I count a minimum of 750 commits or contributions to xz by Jia Tan, who
backdoored it.

This includes all 700 commits made after they merged a pull request in Jan 7
2023, at which point they appear to have already had direct push access, which
would have also let them push commits with forged authors. Probably a number of
other commits before that point as well.

Reverting the backdoored version to a previous version is not sufficient to
know that Jia Tan has not hidden other backdoors in it. Version 5.4.5 still
contains the majority of those commits.

Commits by them such as 18d7facd3802b55c287581405c4d49c98708c136 
and ae5c07b22a6b3766b84f409f1b6b5c100469068a show that they were deep
into analyzing the security of xz. They were well placed to insert a buffer
overflow that could allow eg, a targeted xz file to cause arbitrary code
execution. The impact of such a security hole could be much more stealthy and
bad than the known backdoor since it would allow chaining xz with other
unrelated software releases on an ongoing basis.

The package should be reverted to a version before their involvement,
which started with commit 6468f7e41a8e9c611e4ba8d34e2175c5dacdbeb4.
Or their early commits vetted and revert to a later point, but any arbitrary 
commit by a known bad and malicious actor almost certainly has less value
than the risk that a subtle change go unnoticed.

I&#39;d suggest reverting to 5.3.1. Bearing in mind that there were security
fixes after that point for ZDI-CAN-16587 that would need to be reapplied.

-- 
see shy jo
</pre>
<pre>[<a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?att=1;bug=1068024;filename=signature.asc;msg=5">signature.asc</a> (application/pgp-signature, inline)]</pre>

<div><hr/><p>
<a name="6"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Jonathan Nieder <jrnieder@gmail.com> -->
<!-- time:1711748163 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Jonathan Nieder &lt;jrnieder@gmail.com&gt;</code>:</p></div>

<div><hr/><p>
<a name="8"></a>
<!-- request_addr: Aurelien Jarno <aurelien@aurel32.net> -->
<!-- time:1711748163 -->
<strong>Acknowledgement sent</strong>
to <code>Aurelien Jarno &lt;aurelien@aurel32.net&gt;</code>:</p></div>

<hr/><p><a name="10"></a><a name="msg10"></a><a href="#10">Message #10</a> received at submit@bugs.debian.org (<a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1068024;msg=10">full text</a>, <a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1068024;mbox=yes;msg=10">mbox</a>, <a href="mailto:1068024@bugs.debian.org?References=%3CZgcjtvSjQM59nX_w%40kitenet.net%3E%0A%20%3CZgczZzqFSq450Nlh%40aurel32.net%3E&amp;In-Reply-To=%3CZgczZzqFSq450Nlh%40aurel32.net%3E&amp;subject=Re%3A%20Bug%231068024%3A%20revert%20to%20version%20that%20does%20not%20contain%20changes%20by%0A%20bad%20actor&amp;body=On%20Fri%2C%2029%20Mar%202024%2022%3A32%3A23%20%2B0100%20Aurelien%20Jarno%20%3Caurelien%40aurel32.net%3E%20wrote%3A%0A%3E%20On%202024-03-29%2016%3A25%2C%20Joey%20Hess%20wrote%3A%0A%3E%20%3E%20I%27d%20suggest%20reverting%20to%205.3.1.%20Bearing%20in%20mind%20that%20there%20were%20security%0A%3E%20%3E%20fixes%20after%20that%20point%20for%20ZDI-CAN-16587%20that%20would%20need%20to%20be%20reapplied.%0A%3E%20%0A%3E%20Note%20that%20reverted%20to%20such%20an%20old%20version%20will%20break%20packages%20that%20use%0A%3E%20new%20symbols%20introduced%20since%20then.%20From%20a%20quick%20look%2C%20this%20is%20at%20least%3A%0A%3E%20-%20dpkg%0A%3E%20-%20erofs-utils%0A%3E%20-%20kmod%0A%3E%20%0A%3E%20Having%20dpkg%20in%20that%20list%20means%20that%20such%20downgrade%20has%20to%20be%20planned%0A%3E%20carefully.%0A%3E%20%0A%3E%20Regards%0A%3E%20Aurelien%0A%3E%20%0A%3E%20--%20%0A%3E%20Aurelien%20Jarno%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20GPG%3A%204096R%2F1DDD8C9B%0A%3E%20aurelien%40aurel32.net%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20http%3A%2F%2Faurel32.net%0A">reply</a>):</p>

<pre>[<a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?att=0;bug=1068024;msg=10">Message part 1</a> (text/plain, inline)]</pre>
<pre>On 2024-03-29 16:25, Joey Hess wrote:
&gt; I&#39;d suggest reverting to 5.3.1. Bearing in mind that there were security
&gt; fixes after that point for ZDI-CAN-16587 that would need to be reapplied.

Note that reverted to such an old version will break packages that use
new symbols introduced since then. From a quick look, this is at least:
- dpkg
- erofs-utils
- kmod

Having dpkg in that list means that such downgrade has to be planned
carefully.

Regards
Aurelien

-- 
Aurelien Jarno                          GPG: 4096R/1DDD8C9B
aurelien@aurel32.net                     <a href="http://aurel32.net">http://aurel32.net</a>
</pre>
<pre>[<a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?att=1;bug=1068024;filename=signature.asc;msg=10">signature.asc</a> (application/pgp-signature, inline)]</pre>

<div><hr/><p>
<a name="11"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Jonathan Nieder <jrnieder@gmail.com> -->
<!-- time:1711748164 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Jonathan Nieder &lt;jrnieder@gmail.com&gt;</code>:</p></div>

<div><hr/><p>
<a name="13"></a>
<!-- request_addr: Aurelien Jarno <aurelien@aurel32.net> -->
<!-- time:1711748164 -->
<strong>Acknowledgement sent</strong>
to <code>Aurelien Jarno &lt;aurelien@aurel32.net&gt;</code>:</p></div>

<div><hr/><p>
<a name="16"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Jonathan Nieder <jrnieder@gmail.com> -->
<!-- time:1711753022 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Jonathan Nieder &lt;jrnieder@gmail.com&gt;</code>:</p></div>

<div><hr/><p>
<a name="18"></a>
<!-- request_addr: Thorsten Glaser <tg@mirbsd.de> -->
<!-- time:1711753022 -->
<strong>Acknowledgement sent</strong>
to <code>Thorsten Glaser &lt;tg@mirbsd.de&gt;</code>:</p></div>

<hr/><p><a name="20"></a><a name="msg20"></a><a href="#20">Message #20</a> received at 1068024@bugs.debian.org (<a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1068024;msg=20">full text</a>, <a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1068024;mbox=yes;msg=20">mbox</a>, <a href="mailto:1068024@bugs.debian.org?subject=Re%3A%20Bug%231068024%3A%20revert%20to%20version%20that%20does%20not%20contain%20changes%20by%0A%20bad%20actor&amp;body=On%20Fri%2C%2029%20Mar%202024%2022%3A47%3A48%20%2B0000%20%28UTC%29%20Thorsten%20Glaser%20%3Ctg%40mirbsd.de%3E%20wrote%3A%0A%3E%20Aurelien%20Jarno%20dixit%3A%0A%3E%20%0A%3E%20%3EHaving%20dpkg%20in%20that%20list%20means%20that%20such%20downgrade%20has%20to%20be%20planned%0A%3E%20%3Ecarefully.%0A%3E%20%0A%3E%20Right.%20Not%20an%20argument%20against%2C%20though.%0A%3E%20Instead%2C%20this%20is%20a%20very%20good%20idea.%0A%3E%20%0A%3E%20What%20symbols%20are%20new%3F%20Can%20we%20somehow%20stub%20them%2C%20or%20at%20least%20where%0A%3E%20those%20are%20used%3F%20Or%20change%20the%20soname%2C%20so%20that%20the%20old%20and%20new-older%0A%3E%20versions%20are%20co%C3%AFnstallable%20for%20during%20the%20upgrade%3F%0A%3E%20%0A%3E%20bye%2C%0A%3E%20%2F%2Fmirabilos%0A%3E%20--%20%0A%3E%20%3Cigli%3E%20exceptions%3A%20a%20truly%20awful%20implementation%20of%20quite%20a%20nice%20idea.%0A%3E%20%3Cigli%3E%20just%20about%20the%20worst%20way%20you%20could%20do%20something%20like%20that%2C%20afaic.%0A%3E%20%3Cigli%3E%20it%27s%20like%20anti-design.%20%20%3Cmirabilos%3E%20that%20too%E2%80%A6%20may%20I%20quote%20you%20on%20that%3F%0A%3E%20%3Cigli%3E%20sure%2C%20tho%20i%20doubt%20anyone%20will%20listen%20%3B%29%0A%3E%20%0A%3E%20%0A&amp;References=%3CZgcjtvSjQM59nX_w%40kitenet.net%3E%20%3CZgcjtvSjQM59nX_w%40kitenet.net%3E%0A%20%3CZgczZzqFSq450Nlh%40aurel32.net%3E%0A%20%3CPine.BSM.4.64L.2403292246190.8237%40herc.mirbsd.org%3E&amp;In-Reply-To=%3CPine.BSM.4.64L.2403292246190.8237%40herc.mirbsd.org%3E">reply</a>):</p>

<pre>Aurelien Jarno dixit:

&gt;Having dpkg in that list means that such downgrade has to be planned
&gt;carefully.

Right. Not an argument against, though.
Instead, this is a very good idea.

What symbols are new? Can we somehow stub them, or at least where
those are used? Or change the soname, so that the old and new-older
versions are coïnstallable for during the upgrade?

bye,
//mirabilos
-- 
&lt;igli&gt; exceptions: a truly awful implementation of quite a nice idea.
&lt;igli&gt; just about the worst way you could do something like that, afaic.
&lt;igli&gt; it&#39;s like anti-design.  &lt;mirabilos&gt; that too… may I quote you on that?
&lt;igli&gt; sure, tho i doubt anyone will listen ;)


</pre>

<div><hr/><p>
<a name="21"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Jonathan Nieder <jrnieder@gmail.com> -->
<!-- time:1711759863 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Jonathan Nieder &lt;jrnieder@gmail.com&gt;</code>:</p></div>

<div><hr/><p>
<a name="23"></a>
<!-- request_addr: Stephan Verbücheln <verbuecheln@posteo.de> -->
<!-- time:1711759863 -->
<strong>Acknowledgement sent</strong>
to <code>Stephan Verbücheln &lt;verbuecheln@posteo.de&gt;</code>:</p></div>

<hr/><p><a name="25"></a><a name="msg25"></a><a href="#25">Message #25</a> received at 1068024@bugs.debian.org (<a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1068024;msg=25">full text</a>, <a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1068024;mbox=yes;msg=25">mbox</a>, <a href="mailto:1068024@bugs.debian.org?subject=Re%3A%20Or%20remove%20xz%20altogether%3F&amp;body=On%20Sat%2C%2030%20Mar%202024%2000%3A48%3A34%20%2B0000%20Stephan%20%3D%3FISO-8859-1%3FQ%3FVerb%3DFCcheln%3F%3D%20%3Cverbuecheln%40posteo.de%3E%20wrote%3A%0A%3E%20Maybe%20the%20people%20who%20criticized%20xz%20back%20in%20the%20day%20for%20being%20an%20amateur%0A%3E%20project%20implementing%20a%20defective%20file%20format%20were%20right%20all%20along%3F%0A%3E%20%0A%3E%20https%3A%2F%2Fwww.nongnu.org%2Flzip%2Fxz_inadequate.html%0A%3E%20%0A%3E%20Regards%0A%3E%20Stephan%0A%3E%20%0A%3E%20%0A&amp;References=%3Ce96cb21e64b1c68d4ec9304802bc7f010bf82535.camel%40posteo.de%3E&amp;In-Reply-To=%3Ce96cb21e64b1c68d4ec9304802bc7f010bf82535.camel%40posteo.de%3E">reply</a>):</p>

<pre>Maybe the people who criticized xz back in the day for being an amateur
project implementing a defective file format were right all along?

<a href="https://www.nongnu.org/lzip/xz_inadequate.html">https://www.nongnu.org/lzip/xz_inadequate.html</a>

Regards
Stephan


</pre>

<div><hr/><p>
<a name="26"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Jonathan Nieder <jrnieder@gmail.com> -->
<!-- time:1711767062 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Jonathan Nieder &lt;jrnieder@gmail.com&gt;</code>:</p></div>

<div><hr/><p>
<a name="28"></a>
<!-- request_addr: Mark-Oliver Wolter <mow@mowny.de> -->
<!-- time:1711767063 -->
<strong>Acknowledgement sent</strong>
to <code>Mark-Oliver Wolter &lt;mow@mowny.de&gt;</code>:</p></div>

<hr/><p><a name="30"></a><a name="msg30"></a><a href="#30">Message #30</a> received at 1068024@bugs.debian.org (<a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1068024;msg=30">full text</a>, <a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1068024;mbox=yes;msg=30">mbox</a>, <a href="mailto:1068024@bugs.debian.org?subject=Re%3A%20Bug%231068024%3A%20revert%20to%20version%20that%20does%20not%20contain%20changes%20by%0A%20bad%20actor&amp;body=On%20Sat%2C%2030%20Mar%202024%2003%3A38%3A39%20%2B0100%20Mark-Oliver%20Wolter%20%3Cmow%40mowny.de%3E%20wrote%3A%0A%3E%20On%20Fri%2C%2029%20Mar%202024%2022%3A32%3A23%20%2B0100%20Aurelien%20Jarno%20%3Caurelien%40aurel32.net%3E%20%0A%3E%20wrote%3A%0A%3E%20%20%3E%20Having%20dpkg%20in%20that%20list%20means%20that%20such%20downgrade%20has%20to%20be%20planned%0A%3E%20%20%3E%20carefully.%0A%3E%20%0A%3E%20Might%20be%20easier%20overall%20to%20spend%20that%20effort%20on%20a%20hard%20switch%20to%20zstd%20%0A%3E%20instead.%0A%3E%20%0A%3E%20mfG%20mow%0A%3E%20%0A%3E%20%0A%3E%20%0A&amp;References=%3CZgcjtvSjQM59nX_w%40kitenet.net%3E%20%3CZgczZzqFSq450Nlh%40aurel32.net%3E%0A%20%3CZgczZzqFSq450Nlh%40aurel32.net%3E%0A%20%3C1b217452-111c-4f93-9323-1d4b335d9605%40mowny.de%3E&amp;In-Reply-To=%3C1b217452-111c-4f93-9323-1d4b335d9605%40mowny.de%3E">reply</a>):</p>

<pre>On Fri, 29 Mar 2024 22:32:23 +0100 Aurelien Jarno &lt;aurelien@aurel32.net&gt; 
wrote:
&gt; Having dpkg in that list means that such downgrade has to be planned
&gt; carefully.

Might be easier overall to spend that effort on a hard switch to zstd 
instead.

mfG mow



</pre>

<div><hr/><p>
<a name="31"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Jonathan Nieder <jrnieder@gmail.com> -->
<!-- time:1711767064 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Jonathan Nieder &lt;jrnieder@gmail.com&gt;</code>:</p></div>

<div><hr/><p>
<a name="33"></a>
<!-- request_addr: Guillem Jover <guillem@debian.org> -->
<!-- time:1711767064 -->
<strong>Acknowledgement sent</strong>
to <code>Guillem Jover &lt;guillem@debian.org&gt;</code>:</p></div>

<hr/><p><a name="35"></a><a name="msg35"></a><a href="#35">Message #35</a> received at 1068024@bugs.debian.org (<a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1068024;msg=35">full text</a>, <a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1068024;mbox=yes;msg=35">mbox</a>, <a href="mailto:1068024@bugs.debian.org?In-Reply-To=%3CZgd9qAG7rqbrMqN2%40thunder.hadrons.org%3E&amp;References=%3CZgcjtvSjQM59nX_w%40kitenet.net%3E%0A%20%3Ce96cb21e64b1c68d4ec9304802bc7f010bf82535.camel%40posteo.de%3E%0A%20%3CZgd9qAG7rqbrMqN2%40thunder.hadrons.org%3E&amp;body=On%20Sat%2C%2030%20Mar%202024%2003%3A49%3A12%20%2B0100%20Guillem%20Jover%20%3Cguillem%40debian.org%3E%20wrote%3A%0A%3E%20On%20Sat%2C%202024-03-30%20at%2000%3A48%3A34%20%2B0000%2C%20Stephan%20Verb%C3%BCcheln%20wrote%3A%0A%3E%20%3E%20Maybe%20the%20people%20who%20criticized%20xz%20back%20in%20the%20day%20for%20being%20an%20amateur%0A%3E%20%3E%20project%20implementing%20a%20defective%20file%20format%20were%20right%20all%20along%3F%0A%3E%20%3E%20%0A%3E%20%3E%20https%3A%2F%2Fwww.nongnu.org%2Flzip%2Fxz_inadequate.html%0A%3E%20%0A%3E%20%2ASigh%2A%2C%20the%20current%20situation%20is%20bad%20enough%2C%20and%20has%20nothing%20to%20do%0A%3E%20with%20the%20xz%20format%20or%20design%2C%20or%20the%20FUD%20and%20propaganda%20from%20that%0A%3E%20link.%20Please%20drop%20it%E2%80%A6%0A%3E%20%0A%3E%20Thanks%2C%0A%3E%20Guillem%0A%3E%20%0A%3E%20%0A&amp;subject=Re%3A%20Bug%231068024%3A%20Or%20remove%20xz%20altogether%3F">reply</a>):</p>

<pre>On Sat, 2024-03-30 at 00:48:34 +0000, Stephan Verbücheln wrote:
&gt; Maybe the people who criticized xz back in the day for being an amateur
&gt; project implementing a defective file format were right all along?
&gt; 
&gt; <a href="https://www.nongnu.org/lzip/xz_inadequate.html">https://www.nongnu.org/lzip/xz_inadequate.html</a>

*Sigh*, the current situation is bad enough, and has nothing to do
with the xz format or design, or the FUD and propaganda from that
link. Please drop it…

Thanks,
Guillem


</pre>

<div><hr/><p>
<a name="36"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Jonathan Nieder <jrnieder@gmail.com> -->
<!-- time:1711786502 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Jonathan Nieder &lt;jrnieder@gmail.com&gt;</code>:</p></div>

<div><hr/><p>
<a name="38"></a>
<!-- request_addr: Pierre Ynard <linkfanel@yahoo.fr> -->
<!-- time:1711786502 -->
<strong>Acknowledgement sent</strong>
to <code>Pierre Ynard &lt;linkfanel@yahoo.fr&gt;</code>:</p></div>

<hr/><p><a name="40"></a><a name="msg40"></a><a href="#40">Message #40</a> received at 1068024@bugs.debian.org (<a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1068024;msg=40">full text</a>, <a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1068024;mbox=yes;msg=40">mbox</a>, <a href="mailto:1068024@bugs.debian.org?In-Reply-To=%3C661269552.4371505.1711786362353%40mail.yahoo.com%3E&amp;References=%3C661269552.4371505.1711786362353.ref%40mail.yahoo.com%3E%0A%20%3C661269552.4371505.1711786362353%40mail.yahoo.com%3E&amp;body=On%20Sat%2C%2030%20Mar%202024%2008%3A12%3A42%20%2B0000%20%28UTC%29%20Pierre%20Ynard%20%3Clinkfanel%40yahoo.fr%3E%20wrote%3A%0A%3E%20%3E%20Might%20be%20easier%20overall%20to%20spend%20that%20effort%20on%20a%20hard%20switch%20to%20zstd%0A%3E%20%3E%20instead.%0A%3E%20%0A%3E%20Good%20point.%20Another%20question%20that%20we%27ll%20probably%20have%20to%20ask%20anyway%0A%3E%20is%2C%20what%20is%20the%20future%20of%20xz-utils%20going%20to%20be%20now%3F%20Regarding%20its%0A%3E%20maintainership%20as%20well%2C%20both%20upstream%20and%20in%20Debian%3F%0A%3E%20%0A%3E%20From%20what%20I%20understand%2C%20this%20package%20has%20been%20NMU%27d%20in%20Debian%20for%20more%0A%3E%20than%2010%20years%20now%20-%20thanks%20to%20Sebastian%20for%20his%20work%20-%20and%20that%20might%0A%3E%20have%20been%20a%20point%20of%20weakness%20which%20was%20exploited%20to%20push%20a%20compromised%0A%3E%20version%20into%20the%20Debian%20archive%2C%20as%20seen%20in%20%231067708.%20To%20quote%20Thorsten%0A%3E%20from%20that%20thread%3A%0A%3E%20%0A%3E%20%3E%20Very%20much%20%2Anot%2A%20a%20fan%20of%20NMUs%20doing%20large%20changes%20such%20as%0A%3E%20%3E%20new%20upstream%20versions.%0A%3E%20%0A%3E%20I%20can%27t%20say%20why%20exactly%20he%20would%20not%20be%20a%20fan%2C%20but%20with%20hindsight%20that%0A%3E%20was%20an%20interesting%20call.%0A%3E%20%0A%3E%20Perhaps%20more%20importantly%2C%20it%20is%20said%20that%20the%20whole%20situation%20started%0A%3E%20with%20the%20lack%20of%20resources%20from%20the%20upstream%20maintainer%20to%20maintain%20the%0A%3E%20project%3A%0A%3E%20%0A%3E%20https%3A%2F%2Fwww.mail-archive.com%2Fxz-devel%40tukaani.org%2Fmsg00567.html%0A%3E%20%0A%3E%20which%20again%2C%20we%20can%20suspect%20at%20this%20point%2C%20was%20exploited%20with%20the%20same%0A%3E%20modus%20operandi%20to%20get%20a%20compromise%20vector%20coopted%20in%2C%20in%20the%20form%20of%20a%0A%3E%20new%20maintainer.%0A%3E%20%0A%3E%20And%20now%20if%20what%20we%20suspect%20is%20true%2C%20that%20relief%20maintainer%20has%20turned%0A%3E%20out%20to%20be%20a%20bad%20actor%2C%20which%20leaves%20upstream%20back%20to%20square%20one%20on%20the%0A%3E%20maintainance%20issue.%20I%20understand%20that%20Lasse%20Collin%20hasn%27t%20been%20able%20to%0A%3E%20weigh%20in%20on%20the%20situation%20yet.%0A%3E%20%0A%3E%20Is%20xz-utils%20going%20to%20be%20maintained%3F%20Will%20we%20want%20to%20keep%20in%20the%20archive%0A%3E%20an%20unmaintained%20low-level%20library%20-%20low-level%20as%20in%2C%20susceptible%20of%0A%3E%20getting%20pulled%20as%20a%20dependency%20in%20lots%20of%20places%20-%20and%20rely%20on%20it%20for%0A%3E%20components%20such%20as%20dpkg%3F%0A%3E%20%0A%3E%20I%27m%20not%20presuming%20the%20answers%20-%20it%27s%20still%20early%20and%20there%20is%20probably%0A%3E%20more%20to%20figure%20out%20yet%20-%20but%20back%20to%20the%20original%20point%2C%20we%20might%20want%0A%3E%20to%20consider%20this%20when%20sketching%20longer-term%20plans.%0A%3E%20%0A%3E%20--%20%0A%3E%20Pierre%20Ynard%0A%3E%20%0A%3E%20%0A&amp;subject=Re%3A%20Bug%231068024%3A%20revert%20to%20version%20that%20does%20not%20contain%20changes%20by%0A%20bad%20actor">reply</a>):</p>

<pre>&gt; Might be easier overall to spend that effort on a hard switch to zstd
&gt; instead.

Good point. Another question that we&#39;ll probably have to ask anyway
is, what is the future of xz-utils going to be now? Regarding its
maintainership as well, both upstream and in Debian?

From what I understand, this package has been NMU&#39;d in Debian for more
than 10 years now - thanks to Sebastian for his work - and that might
have been a point of weakness which was exploited to push a compromised
version into the Debian archive, as seen in #1067708. To quote Thorsten
from that thread:

&gt; Very much *not* a fan of NMUs doing large changes such as
&gt; new upstream versions.

I can&#39;t say why exactly he would not be a fan, but with hindsight that
was an interesting call.

Perhaps more importantly, it is said that the whole situation started
with the lack of resources from the upstream maintainer to maintain the
project:

<a href="https://www.mail-archive.com/xz-devel@tukaani.org/msg00567.html">https://www.mail-archive.com/xz-devel@tukaani.org/msg00567.html</a>

which again, we can suspect at this point, was exploited with the same
modus operandi to get a compromise vector coopted in, in the form of a
new maintainer.

And now if what we suspect is true, that relief maintainer has turned
out to be a bad actor, which leaves upstream back to square one on the
maintainance issue. I understand that Lasse Collin hasn&#39;t been able to
weigh in on the situation yet.

Is xz-utils going to be maintained? Will we want to keep in the archive
an unmaintained low-level library - low-level as in, susceptible of
getting pulled as a dependency in lots of places - and rely on it for
components such as dpkg?

I&#39;m not presuming the answers - it&#39;s still early and there is probably
more to figure out yet - but back to the original point, we might want
to consider this when sketching longer-term plans.

-- 
Pierre Ynard


</pre>

<div><hr/><p>
<a name="41"></a>
<!-- request_addr: debian-bugs-dist@lists.debian.org, Jonathan Nieder <jrnieder@gmail.com> -->
<!-- time:1711803062 -->
<strong>Information forwarded</strong>
to <code>debian-bugs-dist@lists.debian.org, Jonathan Nieder &lt;jrnieder@gmail.com&gt;</code>:</p></div>

<div><hr/><p>
<a name="43"></a>
<!-- request_addr: Joey Hess <id@joeyh.name> -->
<!-- time:1711803062 -->
<strong>Acknowledgement sent</strong>
to <code>Joey Hess &lt;id@joeyh.name&gt;</code>:</p></div>

<hr/><p><a name="45"></a><a name="msg45"></a><a href="#45">Message #45</a> received at 1068024@bugs.debian.org (<a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1068024;msg=45">full text</a>, <a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1068024;mbox=yes;msg=45">mbox</a>, <a href="mailto:1068024@bugs.debian.org?body=On%20Sat%2C%2030%20Mar%202024%2008%3A38%3A19%20-0400%20Joey%20Hess%20%3Cid%40joeyh.name%3E%20wrote%3A%0A%3E%20Aurelien%20Jarno%20wrote%3A%0A%3E%20%3E%20Note%20that%20reverted%20to%20such%20an%20old%20version%20will%20break%20packages%20that%20use%0A%3E%20%3E%20new%20symbols%20introduced%20since%20then.%20From%20a%20quick%20look%2C%20this%20is%20at%20least%3A%0A%3E%20%3E%20-%20dpkg%0A%3E%20%3E%20-%20erofs-utils%0A%3E%20%3E%20-%20kmod%0A%3E%20%3E%20%0A%3E%20%3E%20Having%20dpkg%20in%20that%20list%20means%20that%20such%20downgrade%20has%20to%20be%20planned%0A%3E%20%3E%20carefully.%0A%3E%20%0A%3E%20I%20agree%20this%20would%20be%20a%20challanging%20downgrade.%20I%27ve%20tried%20it%20myself%0A%3E%20experimentally%20and%20once%20a%20downgraded%20liblzma5%20is%20unpacked%2C%20dpkg-deb%20is%20broken%0A%3E%20with%20missing%20symbol%20%27XZ_5.4%27.%0A%3E%20%0A%3E%20Renaming%20liblzma5%20to%20something%20else%20%28liblzma6%3F%29%20and%20making%20dpkg-deb%0A%3E%20depend%20on%20that%20seems%20like%20one%20way%20to%20go%20that%20would%20avoid%20messy%20situations.%0A%3E%20%0A%3E%20%0A%3E%20FWIW%2C%20I%20rebuilt%20xz-utils%205.2.5-2.1~deb11u1%20%28from%20bullseye%29%20on%20sid%0A%3E%20and%20then%20got%20dpkg%20to%20build%20against%20that%20successfully%20after%20a%20few%20minor%0A%3E%20changes%20to%20dpkg%27s%20packaging%3A%0A%3E%20%0A%3E%20---%20debian%2Flibdpkg-dev.install.orig%092024-03-30%2007%3A31%3A46.635365816%20-0400%0A%3E%20%2B%2B%2B%20debian%2Flibdpkg-dev.install%092024-03-30%2007%3A34%3A48.667477725%20-0400%0A%3E%20%40%40%20-1%2C4%20%2B1%2C5%20%40%40%0A%3E%20%20usr%2Finclude%2Fdpkg%2F%2A.h%0A%3E%20-usr%2Flib%2F%2A%2Fpkgconfig%2Flibdpkg.pc%0A%3E%20-usr%2Flib%2F%2A%2Flibdpkg.a%0A%3E%20%2Busr%2Flib%2Fpkgconfig%2Flibdpkg.pc%0A%3E%20%2Busr%2Flib%2Flibdpkg.a%0A%3E%20%20usr%2Fshare%2Faclocal%2Fdpkg-%2A.m4%0A%3E%20%2Busr%2Flib%2Flibdpkg.la%0A%3E%20%0A%3E%20%28And%20after%20disabling%20the%20test%20suite%20since%20changes%20in%20xz%20message%20output%0A%3E%20caused%20a%20test%20failure.%29%0A%3E%20%0A%3E%20--%20%0A%3E%20see%20shy%20jo%0A&amp;subject=Re%3A%20Bug%231068024%3A%20revert%20to%20version%20that%20does%20not%20contain%20changes%20by%0A%20bad%20actor&amp;In-Reply-To=%3CZggHu6gxzO6nwMa5%40kitenet.net%3E&amp;References=%3CZgcjtvSjQM59nX_w%40kitenet.net%3E%0A%20%3CZgczZzqFSq450Nlh%40aurel32.net%3E%0A%20%3CZggHu6gxzO6nwMa5%40kitenet.net%3E">reply</a>):</p>

<pre>[<a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?att=0;bug=1068024;msg=45">Message part 1</a> (text/plain, inline)]</pre>
<pre>Aurelien Jarno wrote:
&gt; Note that reverted to such an old version will break packages that use
&gt; new symbols introduced since then. From a quick look, this is at least:
&gt; - dpkg
&gt; - erofs-utils
&gt; - kmod
&gt; 
&gt; Having dpkg in that list means that such downgrade has to be planned
&gt; carefully.

I agree this would be a challanging downgrade. I&#39;ve tried it myself
experimentally and once a downgraded liblzma5 is unpacked, dpkg-deb is broken
with missing symbol &#39;XZ_5.4&#39;.

Renaming liblzma5 to something else (liblzma6?) and making dpkg-deb
depend on that seems like one way to go that would avoid messy situations.


FWIW, I rebuilt xz-utils 5.2.5-2.1~deb11u1 (from bullseye) on sid
and then got dpkg to build against that successfully after a few minor
changes to dpkg&#39;s packaging:

--- debian/libdpkg-dev.install.orig	2024-03-30 07:31:46.635365816 -0400
+++ debian/libdpkg-dev.install	2024-03-30 07:34:48.667477725 -0400
@@ -1,4 +1,5 @@
 usr/include/dpkg/*.h
-usr/lib/*/pkgconfig/libdpkg.pc
-usr/lib/*/libdpkg.a
+usr/lib/pkgconfig/libdpkg.pc
+usr/lib/libdpkg.a
 usr/share/aclocal/dpkg-*.m4
+usr/lib/libdpkg.la

(And after disabling the test suite since changes in xz message output
caused a test failure.)

-- 
see shy jo
</pre>
<pre>[<a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?att=1;bug=1068024;filename=signature.asc;msg=45">signature.asc</a> (application/pgp-signature, inline)]</pre>

<hr/>
<p>Send a report that <a href="https://bugs.debian.org/cgi-bin/bugspam.cgi?bug=1068024">this bug log contains spam</a>.</p>
<hr/>
<address>Debian bug tracking system administrator &lt;<a href="mailto:owner@bugs.debian.org">owner@bugs.debian.org</a>&gt;.
Last modified:
<!--timestamp-->Sat Mar 30 13:14:43 2024<!--end timestamp-->; 
Machine Name:
<!--machinename-->bembo<!--machinename-->
<p>
<a href="https://www.debian.org/Bugs/">Debian Bug tracking system</a>
</p>
<p>
  Debbugs is free software and licensed under the terms of the GNU
  Public License version 2. The current version can be obtained
  from <a href="https://bugs.debian.org/debbugs-source/">https://bugs.debian.org/debbugs-source/</a>.
</p>
<p>
Copyright © 1999 Darren O. Benham,
1997,2003 nCipher Corporation Ltd,
1994-97 Ian Jackson,
2005-2017 Don Armstrong, and many other contributors.
</p>
</address>



</div>
  </body>
</html>
