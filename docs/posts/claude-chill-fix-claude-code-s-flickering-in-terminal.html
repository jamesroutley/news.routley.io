<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/davidbeesley/claude-chill">Original</a>
    <h1>Claude Chill: Fix Claude Code&#39;s flickering in terminal</h1>
    
    <div id="readability-page-1" class="page"><div data-hpc="true"><article itemprop="text">
<p dir="auto"><a href="https://github.com/davidbeesley/claude-chill/actions/workflows/ci.yml"><img src="https://github.com/davidbeesley/claude-chill/actions/workflows/ci.yml/badge.svg" alt="CI"/></a>
<a href="https://github.com/davidbeesley/claude-chill/blob/master/LICENSE"><img src="https://camo.githubusercontent.com/08cef40a9105b6526ca22088bc514fbfdbc9aac1ddbf8d4e6c750e3a88a44dca/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d4d49542d626c75652e737667" alt="License: MIT" data-canonical-src="https://img.shields.io/badge/License-MIT-blue.svg"/></a>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/cc5b5a35a7692922bcc26c9bf4618440bab7d08028902d13774772ce260ab41f/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c696e75782d737570706f727465642d677265656e"><img src="https://camo.githubusercontent.com/cc5b5a35a7692922bcc26c9bf4618440bab7d08028902d13774772ce260ab41f/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c696e75782d737570706f727465642d677265656e" alt="Linux" data-canonical-src="https://img.shields.io/badge/Linux-supported-green"/></a>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/be5e68576ae4e3209fa508531c7dffae1095514c75275619ce079b7ad227b5e0/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6d61634f532d737570706f727465642d677265656e"><img src="https://camo.githubusercontent.com/be5e68576ae4e3209fa508531c7dffae1095514c75275619ce079b7ad227b5e0/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6d61634f532d737570706f727465642d677265656e" alt="macOS" data-canonical-src="https://img.shields.io/badge/macOS-supported-green"/></a>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/64bcda52ad249d962625ff80a991de71b7589bc759de13ea2b64c77e04569f60/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f57696e646f77732d756e737570706f727465642d726564"><img src="https://camo.githubusercontent.com/64bcda52ad249d962625ff80a991de71b7589bc759de13ea2b64c77e04569f60/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f57696e646f77732d756e737570706f727465642d726564" alt="Windows" data-canonical-src="https://img.shields.io/badge/Windows-unsupported-red"/></a>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/2e68e93283f79a11a0af69c57016856a55712032f997102c496052a6764d8074/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f727573742d323032342d6f72616e6765"><img src="https://camo.githubusercontent.com/2e68e93283f79a11a0af69c57016856a55712032f997102c496052a6764d8074/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f727573742d323032342d6f72616e6765" alt="Rust" data-canonical-src="https://img.shields.io/badge/rust-2024-orange"/></a></p>
<p dir="auto">A PTY proxy that tames Claude Code&#39;s massive terminal updates using VT-based rendering.</p>

<p dir="auto">Claude Code uses synchronized output to update the terminal atomically. It wraps output in sync markers (<code>\x1b[?2026h</code> ... <code>\x1b[?2026l</code>) so the terminal renders everything at once without flicker.</p>
<p dir="auto">The problem: Claude Code sends <em>entire</em> screen redraws in these sync blocks - often thousands of lines. Your terminal receives a 5000-line atomic update when only 20 lines are visible. This causes lag, flicker, and makes scrollback useless since each update clears history.</p>

<p dir="auto">claude-chill sits between your terminal and Claude Code:</p>
<ol dir="auto">
<li><strong>Intercepts sync blocks</strong> - Catches those massive atomic updates</li>
<li><strong>VT-based rendering</strong> - Uses a VT100 emulator to track screen state and renders only the differences</li>
<li><strong>Preserves history</strong> - Accumulates content in a buffer for lookback</li>
<li><strong>Enables lookback</strong> - Press a key to pause Claude and view the full history buffer</li>
</ol>

<div dir="auto" data-snippet-clipboard-copy-content="cargo install --path crates/claude-chill"><pre>cargo install --path crates/claude-chill</pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="claude-chill claude
claude-chill -- claude --verbose   # Use -- for command flags"><pre>claude-chill claude
claude-chill -- claude --verbose   <span><span>#</span> Use -- for command flags</span></pre></div>

<div data-snippet-clipboard-copy-content="$ claude-chill --help
A PTY proxy that tames Claude Code&#39;s massive terminal updates

Usage: claude-chill [OPTIONS] &lt;COMMAND&gt; [ARGS]...

Arguments:
  &lt;COMMAND&gt;  Command to run (e.g., &#34;claude&#34;)
  [ARGS]...  Arguments to pass to the command

Options:
  -H, --history &lt;HISTORY_LINES&gt;
          Max lines stored for lookback (default: 100000)
  -k, --lookback-key &lt;LOOKBACK_KEY&gt;
          Key to toggle lookback mode, quote to prevent glob expansion (default: &#34;[ctrl][6]&#34;)
  -a, --auto-lookback-timeout &lt;AUTO_LOOKBACK_TIMEOUT&gt;
          Auto-lookback timeout in ms, 0 to disable (default: 5000)
  -h, --help
          Print help
  -V, --version
          Print version"><pre><code>$ claude-chill --help
A PTY proxy that tames Claude Code&#39;s massive terminal updates

Usage: claude-chill [OPTIONS] &lt;COMMAND&gt; [ARGS]...

Arguments:
  &lt;COMMAND&gt;  Command to run (e.g., &#34;claude&#34;)
  [ARGS]...  Arguments to pass to the command

Options:
  -H, --history &lt;HISTORY_LINES&gt;
          Max lines stored for lookback (default: 100000)
  -k, --lookback-key &lt;LOOKBACK_KEY&gt;
          Key to toggle lookback mode, quote to prevent glob expansion (default: &#34;[ctrl][6]&#34;)
  -a, --auto-lookback-timeout &lt;AUTO_LOOKBACK_TIMEOUT&gt;
          Auto-lookback timeout in ms, 0 to disable (default: 5000)
  -h, --help
          Print help
  -V, --version
          Print version
</code></pre></div>

<div dir="auto" data-snippet-clipboard-copy-content="# Basic usage
claude-chill claude

# Pass arguments to claude
claude-chill -- claude --verbose

# Custom history size
claude-chill -H 50000 claude

# Custom lookback key
claude-chill -k &#34;[f12]&#34; claude

# Disable auto-lookback (see below)
claude-chill -a 0 claude

# Combine options with claude arguments
claude-chill -H 50000 -a 0 -- claude --verbose"><pre><span><span>#</span> Basic usage</span>
claude-chill claude

<span><span>#</span> Pass arguments to claude</span>
claude-chill -- claude --verbose

<span><span>#</span> Custom history size</span>
claude-chill -H 50000 claude

<span><span>#</span> Custom lookback key</span>
claude-chill -k <span><span>&#34;</span>[f12]<span>&#34;</span></span> claude

<span><span>#</span> Disable auto-lookback (see below)</span>
claude-chill -a 0 claude

<span><span>#</span> Combine options with claude arguments</span>
claude-chill -H 50000 -a 0 -- claude --verbose</pre></div>

<p dir="auto">Press <code>Ctrl+6</code> (or your configured key) to enter lookback mode:</p>
<ol dir="auto">
<li><strong>Claude pauses</strong> - Output from Claude is cached, input is blocked</li>
<li><strong>History dumps</strong> - The full history buffer is written to your terminal</li>
<li><strong>Scroll freely</strong> - Use your terminal&#39;s scrollback to review everything</li>
<li><strong>Exit</strong> - Press the lookback key again or <code>Ctrl+C</code> to resume</li>
</ol>
<p dir="auto">When you exit lookback mode, any cached output is processed and the current state is displayed.</p>

<p dir="auto">After 5 seconds of idle (no new renders), the full history is automatically dumped to your terminal so you can scroll back without pressing any keys. This is useful for reviewing Claude&#39;s output after it finishes working.</p>
<p dir="auto"><strong>Note:</strong> The auto-lookback causes a brief screen flicker during the transition as it clears the screen and writes the history buffer. Disable with <code>-a 0</code> or adjust the timeout with <code>-a 10000</code> (10 seconds).</p>

<p dir="auto">Create <code>~/.config/claude-chill.toml</code>:</p>
<div dir="auto" data-snippet-clipboard-copy-content="history_lines = 100000          # Max lines stored for lookback
lookback_key = &#34;[ctrl][6]&#34;      # Key to toggle lookback mode
refresh_rate = 20               # Rendering FPS
auto_lookback_timeout_ms = 5000 # Auto-lookback after 5s idle (0 to disable)"><pre><span>history_lines</span> = <span>100000</span>          <span><span>#</span> Max lines stored for lookback</span>
<span>lookback_key</span> = <span><span>&#34;</span>[ctrl][6]<span>&#34;</span></span>      <span><span>#</span> Key to toggle lookback mode</span>
<span>refresh_rate</span> = <span>20</span>               <span><span>#</span> Rendering FPS</span>
<span>auto_lookback_timeout_ms</span> = <span>5000</span> <span><span>#</span> Auto-lookback after 5s idle (0 to disable)</span></pre></div>
<p dir="auto">Note: History is cleared on full screen redraws, so lookback shows output since Claude&#39;s last full render.</p>

<p dir="auto"><code>[modifier][key]</code> - Examples: <code>[f12]</code>, <code>[ctrl][g]</code>, <code>[ctrl][shift][j]</code></p>
<p dir="auto">Modifiers: <code>[ctrl]</code>, <code>[shift]</code>, <code>[alt]</code></p>
<p dir="auto">Keys: <code>[a]</code>-<code>[z]</code>, <code>[f1]</code>-<code>[f12]</code>, <code>[pageup]</code>, <code>[pagedown]</code>, <code>[home]</code>, <code>[end]</code>, <code>[enter]</code>, <code>[tab]</code>, <code>[space]</code>, <code>[esc]</code></p>
<p dir="auto"><strong>Note:</strong> Quote the key value on the command line to prevent shell glob expansion: <code>-k &#34;[ctrl][7]&#34;</code></p>

<p dir="auto"><code>Ctrl+6</code> sends 0x1E, a control character not frequently used by terminals, signals, or shells. Avoid <code>Ctrl+letter</code> hotkeys - terminals can&#39;t distinguish <code>Ctrl+J</code> from <code>Ctrl+Shift+J</code>.</p>

<p dir="auto">claude-chill creates a pseudo-terminal (PTY) and spawns Claude Code as a child process. It then acts as a transparent proxy between your terminal and Claude:</p>
<div data-snippet-clipboard-copy-content="┌──────────────┐     ┌──────────────┐     ┌──────────────┐
│   Terminal   │◄───►│ claude-chill │◄───►│  Claude Code │
│   (stdin/    │     │   (proxy)    │     │   (child)    │
│    stdout)   │     │              │     │              │
└──────────────┘     └──────────────┘     └──────────────┘"><pre><code>┌──────────────┐     ┌──────────────┐     ┌──────────────┐
│   Terminal   │◄───►│ claude-chill │◄───►│  Claude Code │
│   (stdin/    │     │   (proxy)    │     │   (child)    │
│    stdout)   │     │              │     │              │
└──────────────┘     └──────────────┘     └──────────────┘
</code></pre></div>
<ol dir="auto">
<li><strong>Input handling</strong>: Keystrokes pass through to Claude, except for the lookback key which toggles lookback mode</li>
<li><strong>Output processing</strong>: Scans output for sync block markers. Non-sync output passes through directly</li>
<li><strong>VT emulation</strong>: Feeds output through a VT100 emulator to track the virtual screen state</li>
<li><strong>Differential rendering</strong>: Compares current screen to previous and emits only the changes</li>
<li><strong>History tracking</strong>: Maintains a buffer of output for lookback mode since the last full redraw</li>
<li><strong>Signal forwarding</strong>: Window resize (SIGWINCH), interrupt (SIGINT), and terminate (SIGTERM) signals are forwarded to Claude</li>
</ol>

<p dir="auto">This tool was developed for personal convenience. It works for me on Linux and macOS, but it hasn&#39;t been extensively tested across different terminals or edge cases. Don&#39;t use it to send anyone to space, perform surgery, or run critical infrastructure. If it breaks, you get to keep both pieces.</p>

<p dir="auto">See <a href="https://github.com/davidbeesley/claude-chill/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a>.</p>

<p dir="auto">MIT</p>
</article></div></div>
  </body>
</html>
