<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://spritely.institute/news/introducing-ocapn-interoperable-capabilities-over-the-network.html">Original</a>
    <h1>OCapN, Interoperable Capabilities over the Network</h1>
    
    <div id="readability-page-1" class="page"><div><p><img src="https://spritely.institute/files/talks/static/ocapn-handoff-wip1.gif" alt="Step-by-step walkthrough to perform a OCapN Third Party Handoff"/></p><p><a href="https://ocapn.org/">OCapN (<strong>O</strong>bject <strong>Cap</strong>ability <strong>N</strong>etwork)</a> is a new
protocol to add support for secure, seamless, and distributed (often
peer-to-peer) communication for networked applications.</p><p>OCapN was originally developed as part of
<a href="https://spritely.institute/goblins/">Goblins</a>, our distributed object
programming environment. But OCapN is no longer just for Goblins! Thanks to the
support of a grant from <a href="https://nlnet.nl/">NLnet</a>, we have documented OCapN&#39;s
functionality as a set of specifications so that OCapN&#39;s technology can be
incorporated into any programming language environment. We have been working
with colleagues across several partner projects and organizations to shape
these documents following a consensus-based review process.</p><p>Without OCapN, building networked applications such as social networks, chat
rooms and online virtual worlds otherwise would have to manually solve many
problems which OCapN handles automatically as part of its design. OCapN
simplifies building otherwise complicated peer-to-peer systems and has many
useful features:</p><ul><li><p><strong>Intuitive distributed programming:</strong> allows for networked programming
such that it doesn&#39;t matter where objects live: they can be fully local or
distributed over the network.  Performing asynchronous operations against
networked objects is the same as asynchronous programming against local
ones.</p></li><li><p><strong>Object capability security:</strong> makes complicated secure systems simpler to
reason about following the principle of &#34;if you don&#39;t have it, you can&#39;t
use it.&#34;</p></li><li><p><strong>Promise Pipelining:</strong> enables sending messages to a promise&#39;s potentially
settled output. This streamlines reasoning about promises, and cuts down on
round trips across the network.</p></li><li><p><strong>Distributed Garbage Collection:</strong> powers garbage collection across
multiple devices. While programming languages may sufficiently handle garbage
collection within a local machine, when references to objects are scattered
across a network, the network itself must also explicitly support garbage
collection of obsolete objects.</p></li><li><p><strong>Certificate-Based Third-Party Handoffs:</strong> provide a mechanism by which two
machines can securely reference objects on a third. Connections between
machines that potentially span across networks necessitate the free sharing
of object references, even those which exist on machines outside that
connection. Third-party handoffs enable such references to be intuitively
and securely shared within Goblins, without needing to consider the network.</p></li></ul><h2>NLnet Grant</h2><p>Jessica Tallon has been working with Spritely on an
<a href="https://nlnet.nl/project/SpritelyOCapN">NLnet grant-funded initiative</a> for the
past year, with a focus on improving OCapN support in both Goblins
implementations and initiating the standardization push for OCapN. Below,
Jessica delivers her personal account of her efforts to develop, grow, and
refine open standards for the protocol to ensure solid foundations and
interoperability across the OCapN ecosystem over the course of the grant.</p><h3>Milestone 1: Racket Goblins &lt;-&gt; Guile Goblins Interoperability</h3><p>When I started on this grant work in late 2022, Racket Goblins had a mature OCapN
implementation, but Guile Goblins had none. This meant the two implementations
couldn&#39;t interoperate (send messages to each other) at all.</p><p>At the start of 2023, I completed this milestone, adding comprehensive OCapN
support to Guile Goblins and a protocol to enable streamlined communication with
its Racket counterpart.</p><p>To assess the boundaries of OCapN coverage, the team and I ported a simple and
minimalist chat application used internally for testing from Racket Goblins to
Guile Goblins.</p><p><img src="https://spritely.institute/files/talks/static/goblin-chat-interop.gif" alt="Step-by-step walkthrough to perform a OCapN Third Party Handoff"/></p><p>The evaluation was successful, meaning that Goblins objects written in Guile
scheme can send messages with those written in Racket scheme and vice versa
over OCapN.</p><h3>Milestone 2: Start the OCapN Pre-standardization Group</h3><p>Although we&#39;ve made significant additions to the OCapN standard â€” such as
certificate-based third-party handoffs â€” through our work on its Goblins
implementation, it&#39;s important to note that the protocol wasn&#39;t invented at
Spritely; we&#39;ve drawn from and built upon the contributions of many others
(<a href="https://erights.org">the E programming language</a>,
<a href="https://agoric.com">Agoric</a>, and <a href="https://capnproto.org">Cap&#39;n Proto</a> to name
a few) and is actively being shaped by input from many developers of those
projects.</p><p>The OCapN group is comprised of many organizations such as Spritely and Agoric
as well as many independent experts and interested parties. The group&#39;s goal is
to come to consensus on draft documents which define the protocols within
OCapN.</p><p>If you&#39;re interested in joining the group and helping the standardization
effort, or you just want to take a look at our work, please find more info at
<a href="https://ocapn.org">ocapn.org</a></p><h3>Milestone 3: Three draft specifications</h3><p>Part of the standardization effort is to have documents the OCapN group can
develop as the group meets consensus. The initial draft specifications are based
on the Goblins&#39; implementations of OCapN, The OCapN protocol is split into three
documents:</p><ul><li><p><a href="https://github.com/ocapn/ocapn/blob/main/draft-specifications/CapTP%20Specification.md">CapTP</a>:
covers the majority of the protocol including message sending, promises, promise
pipelining, third-party handoffs.</p></li><li><p><a href="https://github.com/ocapn/ocapn/blob/main/draft-specifications/Netlayers.md">Netlayers</a>:
describes how new netlayer types should be defined and documents the ones
currently in use, such as the Tor Onion Services Netlayer. Netlayers are an
abstraction for different transport protocols which CapTP uses to
communicate on, this is because OCapN is designed to be agnostic to the
specific protocol CapTP runs on. While Goblins so far has largely used Tor,
as it provides strong anonymity, other protocols, such as
<a href="https://libp2p.io/">libp2p</a>, <a href="https://ibcprotocol.org/">IBC</a> or carrier
pigeons with little flash drives could be used.</p></li><li><p><a href="https://github.com/ocapn/ocapn/blob/main/draft-specifications/Locators.md">Locators</a>:
defines how representations of nodes (machines) on the network and specific
objects are encoded. The node identity specifications include both in-band
and out-of-band, string-like representations, both of which are needed in
order to bootstrap new connections and to share references within
established connections.</p></li></ul><p>As the OCapN group progresses these standardization efforts, we&#39;ll continue to
update these documents; and on Spritely&#39;s end, our Goblins OCapN implementation.</p><h3>Milestone 4: Test suite</h3><p>One of the main goals of the OCapN standardization effort is to develop an
<a href="http://en.wikipedia.org/wiki/Open_standard">open standard</a> with many
implementations. To ensure all of them interoperate as expected, the
<a href="https://github.com/ocapn/ocapn-test-suite">OCapN test suite</a> verifies that a given
implementation has correctly implemented the protocol according to spec.</p><p>Excitingly, this test suite has already been put to use:
<a href="https://dpwiz.gitlab.io/actors-guild">Alexander Bondarenko&#39;s Haskell implementation of OCapN</a>
has been built against and passes the OCapN test suite!</p><h3>Milestone 5: Both goblins implementations pass test suite</h3><p>Perhaps it goes without saying, but Spritely&#39;s Racket and Guile Goblins&#39; OCapN
implementations should also both pass the test suite. This may seem simple
because the specification documents, and therefore the test suite itself, were
written based on our Goblins&#39; OCapN implementations. However the standard drafts
continued to change, and the test suite along with it, necessitating appropriate
updates to Goblins in the process. In addition, we found and fixed a few bugs
thanks to the new suite.</p><p>As of today, both implementations pass the test suite! ðŸŽ‰</p><p>While we&#39;ve gotten a lot done during the last 12 months, we still have a ways to
go on the road to having an OCapN standard. The higher level work of solidifying
a shared set of definitions for OCapN will be done as a community as the OCapN
group refines the documents until we reach a foundational consensus.</p><p>Once we&#39;ve agreed upon the first version of the specification documents, with
the test suite and Goblins implementations following in lockstep, we plan
to bring these documents to a standards body such as
<a href="https://www.ietf.org">IETF</a> or <a href="https://www.w3.org">W3C</a>.</p><p>We also hope these documents and tools will empower more people to develop OCapN
libraries, tools, and implementations, and grow a rich ecosystem so that more
secure, distributed applications and games can be easily developed which put the
users freedom and privacy first.</p><p>This work was funded through the <a href="https://nlnet.nl/assure">NGI Assure Fund</a>, a
fund established by <a href="https://nlnet.nl/">NLnet</a> with financial support from the
European Commission&#39;s <a href="https://www.ngi.eu/">Next Generation Internet</a> program.
We want to say a big thanks for supporting this work and enabling us to do this
important work.</p></div></div>
  </body>
</html>
