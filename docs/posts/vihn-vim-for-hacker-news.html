<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://qsantos.fr/2024/02/24/vihn-vim-for-hacker-news/">Original</a>
    <h1>ViHN: Vim for Hacker News</h1>
    
    <div id="readability-page-1" class="page"><div id="site-content">

	
<article id="post-3707">

	
<!-- .entry-header -->

	<div>

		<div>

			
<p><strong>tl;dr:</strong> I made <a href="https://github.com/qsantos/ViHN/">ViHN</a> to read Hacker News without having to move my hands away from the keyboard. It’s freely available on <a href="https://addons.mozilla.org/fr/firefox/addon/vihn/">Firefox</a> and <a href="https://chromewebstore.google.com/detail/vihn/cfmccoefeojndmkdmbkgalghikfafdod">Chrome</a>.</p>



<p>This is about <em>yet</em> another Hacker News extension. But other people with my obsession for killing the mouse might enjoy it.</p>



<p>Most of the content of this article is just an ancient<sup data-fn="7ee3bd14-3698-465e-a32e-3a076be63d34"><a href="#7ee3bd14-3698-465e-a32e-3a076be63d34" id="7ee3bd14-3698-465e-a32e-3a076be63d34-link">1</a></sup> talking about the good ol’ times. But you can jump directly to the<a href="#procrastinating-more-efficiently"> description of the extension</a>.</p>



<h2>btw, I use Vim</h2>



<p>I know that I am not the only one who had a keyboard-zealot phase.</p>



<p>When <a href="https://en.wikipedia.org/wiki/GNOME#GNOME_3">GNOME Shell</a> happened, I was forced to go looking for a new window manager. I ended up installing <a href="https://ratpoison.nongnu.org/">Ratpoison</a>. Like the more well-known <a href="https://en.wikipedia.org/wiki/I3_(window_manager)">i3</a>, Ratpoison is a tiling window.</p>





<p>That means that, instead of floating windows you usually move around with the mouse, you split the screen in “tiles” however you like, and assign windows to them. By default, the screen is made of a single tile, so windows are full-screen. Then, you might split it in two halves, to show two windows side-by-side (for instance, a text editor and a Wikipedia page). It might seem pointless since you can also do this with regular (“stacking”) window manager, but the important difference is the workflow.</p>



<p>With a regular window manager, positioning windows can feel somewhat limited. As a beginner, you might use the mouse to arrange some windows so that they display all the information you need in a convenient way. But that takes <em>several seconds</em>. And people like me do not have seconds to waste — we could be using it to read memes on Reddit instead.</p>


<div>
<figure><img decoding="async" width="640" height="360" src="https://qsantos.fr/wp-content/uploads/2024/02/image-1.png" alt=""/><figcaption>Why would you use maximized windows, when you can remind yourself you are <a href="https://knowyourmeme.com/memes/btw-i-use-arch">using Arch, btw</a></figcaption></figure></div>


<p>So we learn the keyboard shortcuts to arrange the current window in the left/right half of the screen. Unfortunately, there are times when you would like to show three windows at the same time. And then, you have to go back to using the mouse. Can you imagine <em>the horror</em>?</p>



<p>With a tiling window manager, we can use keyboard shortcuts to display how many windows in however way we want. Want to display 81 different windows in a 9×9 grid to <s>make pixel art</s> maximize your productivity? Of course, just <em>a few</em> keystrokes.</p>



<p>The real benefit, however, is that no one else will be able to use your computer. You will have switched to another tiling window manager by the time they figure out the previous one.</p>



<p><strong>Note:</strong> However, Ratpoison is a misnomer: since you can still use your mouse to open links in Firefox instead of Tab-Tab-Tab-Tab-Tab-Tab-Tab-Tab-Tab-Tab-Tab-Tab-Return like a normal person<sup data-fn="de9926e0-53de-4582-a4ca-8aaecdeba5d1"><a href="#de9926e0-53de-4582-a4ca-8aaecdeba5d1" id="de9926e0-53de-4582-a4ca-8aaecdeba5d1-link">2</a></sup>. Because of <a href="https://en.wikipedia.org/wiki/Steam_Machine_(computer)#History">Valve</a>, you even have to click on terrorists, instead of <a href="http://www.bay12games.com/dwarves/">just spotting the “g” in the middle of random punctuation</a>. Thankfully, you can live in the TTY, read documents with <a href="https://github.com/kraxel/fbida">fbi</a> and watch videos with <a href="http://caca.zoy.org/wiki/libcaca">libcaca</a>.</p>


<div>
<figure><img decoding="async" width="339" height="250" src="https://qsantos.fr/wp-content/uploads/2024/02/image.png" alt=""/><figcaption>A goblin raid in Dwarf Fortress. They killed a dog!</figcaption></figure></div>


<p>Since, I have strayed from the rightful path, and switched to xfce4<sup data-fn="04330850-3c03-475b-932b-c65cf45a66a6"><a href="#04330850-3c03-475b-932b-c65cf45a66a6" id="04330850-3c03-475b-932b-c65cf45a66a6-link">3</a></sup>. I even tried Visual Code for a while (with Vim key bindings, of course), but I always come back to Vim.</p>



<h2>Hacker News</h2>



<p>When I was younger, and more innocent, I used to kill time by looking for <a href="https://liveoverflow.com/the-origin-of-script-kiddie-hacker-etymology/">script kiddies</a> hideouts with advanced search keywords such as “hacker forum”. I would enjoy watching various people trying to impress each other with technical nonsense.</p>


<div>
<figure><img loading="lazy" decoding="async" width="660" height="484" src="https://qsantos.fr/wp-content/uploads/2024/02/image-2.png" alt=""/><figcaption>Yes, this is exactly, what using a computer was like back then, with 3D interfaces in which you could fly, and everything<sup data-fn="a02649b5-01b4-4c89-bc34-63a4b11dfec3"><a href="#a02649b5-01b4-4c89-bc34-63a4b11dfec3" id="a02649b5-01b4-4c89-bc34-63a4b11dfec3-link">4</a></sup></figcaption></figure></div>


<p>At some point, I stumbled upon Hacker News, which is actually <em>not</em> a hideout for script kiddies<sup data-fn="c4ee4240-0d1d-4c71-996f-f0d338320e10"><a href="#c4ee4240-0d1d-4c71-996f-f0d338320e10" id="c4ee4240-0d1d-4c71-996f-f0d338320e10-link">5</a></sup>. It’s actually a place to promote <a href="https://news.ycombinator.com/item?id=8863#9224">great business ideas</a>, discuss<a href="https://news.ycombinator.com/item?id=3742902#3743050"> major security flaws</a> underpinning infrastructure of geopolitical importance, and explore <a href="https://news.ycombinator.com/item?id=26850630#26850962">advanced technical topics.</a> And <em>not even</em> half the content is about the latest technological fad<sup data-fn="2b8bd7b9-86fb-4a57-8a32-2eb60a200872"><a href="#2b8bd7b9-86fb-4a57-8a32-2eb60a200872" id="2b8bd7b9-86fb-4a57-8a32-2eb60a200872-link">6</a></sup>.</p>


<div>
<figure><img loading="lazy" decoding="async" width="886" height="328" src="https://qsantos.fr/wp-content/uploads/2024/02/image-3.png" alt=""/><figcaption>Hacker News, an actual forum for hackers</figcaption></figure></div>


<p>Unfortunately, it uses that quirky system where the discussion is organized in trees, and people vote for the most interesting comments. In <a href="https://en.wikipedia.org/wiki/PhpBB">older forums</a>, you simply had to read the 3000-message-long thread to find the few insightful remarks. And with 20 messages per page, that would be barely 150 pages to read!</p>



<p>These fancy vote-based forums allow you to skip entire side-discussions of tangentially related concepts. It’s such a shame that you won’t have to learn about the proper way to repair drywall in an American house when you were just curious about the newest JavaScript framework.</p>



<p>In any case, the point is that reading a comment tree involves more than just scrolling done in a linear thread. Instead, you might want to go back up to the parent, skip to the next sibling discussion, hide a sub-tree, upvote or reply to a specific comment.</p>



<p>And as discussed above, I am not going to do all that hard work with a mouse pointer.</p>



<h2>Procrastinating More Efficiently</h2>



<p>At first, I just wrote myself some <a href="https://greasyfork.org/en">user script</a> to use J, K, and other keys to navigate Hacker News comments, after having done something similar for <a href="https://slatestarcodex.com/">SlateStarCodex</a>. That was mostly good enough, but I was not as systematic with code versioning at the time, and the format did not particularly encourage it. So I eventually lost that script.</p>



<p>This led me to <a href="https://github.com/plibither8/refined-hacker-news">Refined Hacker News</a>, which is actually pretty good. Unfortunately, some things are broken, and it can take a while to load. And since it is unmaintained, I did not have any hope of being able to fix the most annoying issue (the extension sometimes not working at all).</p>


<div>
<figure><img loading="lazy" decoding="async" width="871" height="526" src="https://qsantos.fr/wp-content/uploads/2024/02/keyboard-nav.gif" alt=""/><figcaption>Navigating comments with Refined Hacker News</figcaption></figure></div>


<p>So, I finally made <a href="https://github.com/qsantos/ViHN/">my own browser extension</a> for <a href="https://addons.mozilla.org/fr/firefox/addon/vihn/">Firefox</a> and <a href="https://chromewebstore.google.com/detail/vihn/cfmccoefeojndmkdmbkgalghikfafdod">Chrome</a>. It’s called “ViHN”. “Vi” as a shorthand for Vim<sup data-fn="f1c0daed-3036-4112-a14b-36899f744425"><a href="#f1c0daed-3036-4112-a14b-36899f744425" id="f1c0daed-3036-4112-a14b-36899f744425-link">7</a></sup>, and “HN” for “Hacker News”. Get it? I know, it’s very subtle.</p>



<p>It is primarily focused on keyboard-based navigation, should introduce no visible delay, and minimize surprises. Of course, it has many Vim-like key bindings to navigate comments (not just J and K). You can look at the <a href="https://github.com/qsantos/ViHN/blob/master/README.md">README</a> for the list, but I have also included it below to save you a mouse click if you are not using Vimium.</p>



<p>Also, I stole the idea from <a href="https://github.com/bakkot/SlateStarComments">bakkot’s SlateStarComments</a> to quickly find new comments. I never quite liked the idea of trying to remember what comments the user might have seen. This is easily confounded by reloading the page by mistake, not having the time to read everything at that particular time, not using the same browser or computer, and so on. Instead, ViHN shows a list of comments in reverse chronological order. You can go through that list (of course using key bindings), and stop when you get to those you already read.</p>


<div>
<figure><img loading="lazy" decoding="async" width="286" height="301" src="https://qsantos.fr/wp-content/uploads/2024/02/image-5.png" alt=""/><figcaption>Searching recent comments in late SlateStarCodex</figcaption></figure></div>


<p>Among other features, you can quick-reply/edit/delete comments, preview comments when replying/editing, it highlights op.</p>



<p>A less visible feature is that manages requests (votes, favorite, flag, persistent collapse) and spread them in time to avoid the drastic rate limiting of Hacker News. If a request results in a 503 error (non-standard “too many requests”), ViHN will retry it later. This materializes in the form of “…” instead of “favorite”/“flag” in links and spinning arrow for votes<sup data-fn="8e05b88c-04e9-4df6-837a-aa74a6d57406"><a href="#8e05b88c-04e9-4df6-837a-aa74a6d57406" id="8e05b88c-04e9-4df6-837a-aa74a6d57406-link">8</a></sup>.</p>



<p>But this would not be worthy of Hacker News if this was not used as an occasion to bike-shed a particular JavaScript framework. The extension is written is <a href="http://vanilla-js.com/">Vanilla JS</a>. This enables maximal performance with minimum overhead and zero build time.</p>


<div>
<figure><img loading="lazy" decoding="async" width="707" height="330" src="https://qsantos.fr/wp-content/uploads/2024/02/image-6.png" alt=""/><figcaption>Full-featured Vanilla JS bundle</figcaption></figure></div>


<h2>Key bindings</h2>



<p>This section is reproduced from the <a href="https://github.com/qsantos/ViHN/blob/master/README.md">README</a>, and also available in the extension by pressing <kbd>?</kbd> to toggle help.<a href="https://github.com/qsantos/ViHN/#navigate-commentsstories"></a></p>



<h3>Navigate Comments/Stories</h3>



<figure><table><thead><tr><th>Key</th><th>Effect</th></tr></thead><tbody><tr><td><kbd>j</kbd></td><td>Next comment/story</td></tr><tr><td><kbd>k</kbd></td><td>Previous comment/story</td></tr><tr><td><kbd>J</kbd></td><td>Next sibling comment</td></tr><tr><td><kbd>K</kbd></td><td>Previous sibling comment</td></tr><tr><td><kbd>g</kbd></td><td>Go to first story/comment</td></tr><tr><td><kbd>G</kbd></td><td>Go to last story, last root comment or “More” link</td></tr><tr><td><kbd>H</kbd></td><td>Focus on story/comment at the top of the screen (<strong>h</strong>igh)</td></tr><tr><td><kbd>M</kbd></td><td>Focus on story/comment in the <strong>m</strong>iddle of the screen</td></tr><tr><td><kbd>L</kbd></td><td>Focus on story/comment at the bottom of the screen (<strong>l</strong>ow)</td></tr><tr><td><kbd>n</kbd></td><td>Switch to Newest Items</td></tr><tr><td><kbd>h</kbd></td><td>Parent comment/story (see [#follow-links](Follow Links))</td></tr><tr><td><kbd>p</kbd></td><td>Parent comment/story (see [#follow-links](Follow Links))</td></tr></tbody></table></figure>



<p><strong>Note:</strong> You can also select an item by clicking in its bounding box.</p>



<h3><a href="https://github.com/qsantos/ViHN/#follow-links"></a></h3>



<h3>Follow links</h3>



<figure><table><thead><tr><th>Key</th><th>Effect</th></tr></thead><tbody><tr><td><kbd>o</kbd></td><td>Open story link/comment</td></tr><tr><td><kbd>O</kbd></td><td>Open story link/comment in background</td></tr><tr><td><kbd>c</kbd></td><td>Open comment thread</td></tr><tr><td><kbd>C</kbd></td><td>Open comment thread in background</td></tr><tr><td><kbd>b</kbd></td><td>Open both story link and comment thread</td></tr><tr><td><kbd>B</kbd></td><td>Open both story link and comment thread in background</td></tr><tr><td><kbd>h</kbd></td><td>Follow “context” link (go to comment thread, but focus on current comment)</td></tr><tr><td><kbd>p</kbd></td><td>Follow “parent” link (go to parent’s page, and focus on parent comment/story)</td></tr><tr><td><kbd>1</kbd></td><td>Open 1st link in comment (maintain shift to open in background)</td></tr><tr><td><kbd>…</kbd></td><td>…</td></tr><tr><td><kbd>9</kbd></td><td>Open 9th link in comment (maintain shift to open in background)</td></tr><tr><td><kbd>0</kbd></td><td>Open 10th link in comment (maintain shift to open in background)</td></tr></tbody></table></figure>



<p><strong>Note:</strong> When on the “XXX more comments” link, you can hit either of <code>[lLcC]</code> to go to the next page of comments.</p>



<p><strong>Note:</strong> The digits of the numeric keypad work as well to open links in comments. However, this can only open links in foreground.</p>



<p><strong>Note:</strong> When using AZERTY, the key bindings to open links inside comments still work like in QWERTY. Hit the <kbd>1</kbd> key <strong>without</strong> shift (like typing <code>&amp;</code>) to open the 1st link in foreground. Hit the <kbd>1</kbd> key <strong>with</strong> shift (like typing <code>1</code>) to open the 1st link in background. Same for the other link numbers.</p>



<h3><a href="https://github.com/qsantos/ViHN/#actions"></a></h3>



<h3>Actions</h3>



<figure><table><thead><tr><th>Key</th><th>Effect</th></tr></thead><tbody><tr><td><kbd>m</kbd></td><td>Collapse/uncollapse comment tree</td></tr><tr><td><kbd>u</kbd></td><td>Upvote story/comment, or cancel vote</td></tr><tr><td><kbd>d</kbd></td><td>Downvote story/comment, or cancel vote</td></tr><tr><td><kbd>f</kbd></td><td>Favorite/un-favorite story/comment of the current page</td></tr><tr><td><kbd>F</kbd></td><td>Flag/unflag story/comment of the current page</td></tr><tr><td><kbd>r</kbd></td><td>Comment on story, or reply to comment (with preview)</td></tr><tr><td><kbd>e</kbd></td><td>Edit comment (with preview)</td></tr><tr><td><kbd>D</kbd></td><td>Delete comment</td></tr><tr><td><kbd>Ctrl</kbd>+<kbd>Return</kbd></td><td>Submit current form</td></tr></tbody></table></figure>



<h3><a href="https://github.com/qsantos/ViHN/#navigate-newest-items"></a></h3>



<h3>Navigate Newest Items</h3>



<p>In the Newest Items list, the following key bindings are available:</p>



<figure><table><thead><tr><th>Key</th><th>Effect</th></tr></thead><tbody><tr><td><kbd>l</kbd></td><td>Show selected comment/story</td></tr><tr><td><kbd>j</kbd></td><td>Next comment/story</td></tr><tr><td><kbd>k</kbd></td><td>Previous comment/story</td></tr><tr><td><kbd>J</kbd></td><td>Jump 10 down</td></tr><tr><td><kbd>K</kbd></td><td>Jump 10 up</td></tr><tr><td><kbd>g</kbd></td><td>Go to top story/comment</td></tr><tr><td><kbd>G</kbd></td><td>Go to last story/comment</td></tr><tr><td><kbd>n</kbd></td><td>Switch back from Newest Items</td></tr></tbody></table></figure>



		</div><!-- .entry-content -->

	</div><!-- .post-inner -->

	<!-- .section-inner -->

	
	<!-- .pagination-single -->

	
		<!-- .comments-wrapper -->

		
</article><!-- .post -->

</div></div>
  </body>
</html>
