<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/blueloveTH/pocketpy">Original</a>
    <h1>PocketPy: Lightweight(~5000 LOC) Python interpreter for game engines</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text">
<p dir="auto">
<a title="Build" href="https://github.com/blueloveTH/pocketpy/actions/workflows"><img src="https://github.com/blueloveTH/pocketpy/actions/workflows/main.yml/badge.svg"/></a>
<a href="https://github.com/blueloveth/pocketpy/blob/main/LICENSE">
<img alt="GitHub" src="https://camo.githubusercontent.com/2925b0df2fdcdea255cb2cfb7792eaf378e671893c6174ca4775f8ea901d0bfe/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f626c75656c6f766574682f706f636b657470792e7376673f636f6c6f723d626c7565" data-canonical-src="https://img.shields.io/github/license/blueloveth/pocketpy.svg?color=blue"/></a>
<a href="https://github.com/blueloveth/pocketpy/releases">
<img alt="GitHub release" src="https://camo.githubusercontent.com/9ae975dbbcd741c8932b11ac704105d6ec977173729f02fe4690220579ad7a90/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f72656c656173652f626c75656c6f766574682f706f636b657470792e737667" data-canonical-src="https://img.shields.io/github/release/blueloveth/pocketpy.svg"/></a>
<a title="Pub" href="https://pub.dev/packages/pocketpy" rel="nofollow"><img src="https://camo.githubusercontent.com/2510fafdc787473e26cc1c3eadda01c89745ad609964643e0e08c1f88ec7e6b3/68747470733a2f2f696d672e736869656c64732e696f2f7075622f762f706f636b65747079" data-canonical-src="https://img.shields.io/pub/v/pocketpy"/></a>
<a title="Discord" href="https://discord.gg/WWaq72GzXv" rel="nofollow"><img src="https://camo.githubusercontent.com/4bc6149cc8d846ef5371c0c8b1867e229ef0a3bd297e1e88e8e0a92f472b2bdf/68747470733a2f2f696d672e736869656c64732e696f2f646973636f72642f31303438393738303236313331363430333930" data-canonical-src="https://img.shields.io/discord/1048978026131640390"/></a>
</p>
<p dir="auto">PocketPy is a lightweight(~5000 LOC) Python interpreter for game engines.</p>
<p dir="auto"><strong>English |</strong> <a href="https://github.com/blueloveTH/pocketpy/blob/main/README_zh.md"><strong>简体中文</strong></a></p>
<p dir="auto">It is extremely easy to embed. Including a compiler, optimizer and bytecode virtual machine. All of them are available in a single header file <code>pocketpy.h</code>, without external dependencies.</p>
<p dir="auto">Please see <a href="https://pocketpy.dev" rel="nofollow">https://pocketpy.dev</a> for details or try <a href="https://blueloveth.github.io/pocketpy" rel="nofollow">Live Demo</a>.</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/blueloveTH/pocketpy/blob/main/docs/sample.png"><img src="https://github.com/blueloveTH/pocketpy/raw/main/docs/sample.png" alt="sample_img"/></a></p>
<h2 dir="auto"><a id="user-content-features" aria-hidden="true" href="#features"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Features</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Example</th>
<th>Supported</th>
</tr>
</thead>
<tbody>
<tr>
<td>If Else</td>
<td><code>if..else..elif</code></td>
<td>YES</td>
</tr>
<tr>
<td>Loop</td>
<td><code>for/while/break/continue</code></td>
<td>YES</td>
</tr>
<tr>
<td>Function</td>
<td><code>def f(x,*args,y=1):</code></td>
<td>YES</td>
</tr>
<tr>
<td>Subclass</td>
<td><code>class A(B):</code></td>
<td>YES</td>
</tr>
<tr>
<td>List</td>
<td><code>[1, 2, &#39;a&#39;]</code></td>
<td>YES</td>
</tr>
<tr>
<td>ListComp</td>
<td><code>[i for i in range(5)]</code></td>
<td>YES</td>
</tr>
<tr>
<td>Slice</td>
<td><code>a[1:2], a[:2], a[1:]</code></td>
<td>YES</td>
</tr>
<tr>
<td>Tuple</td>
<td><code>(1, 2, &#39;a&#39;)</code></td>
<td>YES</td>
</tr>
<tr>
<td>Dict</td>
<td><code>{&#39;a&#39;: 1, &#39;b&#39;: 2}</code></td>
<td>YES</td>
</tr>
<tr>
<td>F-String</td>
<td><code>f&#39;value is {x}&#39;</code></td>
<td>YES</td>
</tr>
<tr>
<td>Unpacking</td>
<td><code>a, b = 1, 2</code></td>
<td>YES</td>
</tr>
<tr>
<td>Star Unpacking</td>
<td><code>a, *b = [1, 2, 3]</code></td>
<td>NO</td>
</tr>
<tr>
<td>Exception</td>
<td><code>raise/try..catch</code></td>
<td>YES</td>
</tr>
<tr>
<td>Dynamic Code</td>
<td><code>eval()/exec()</code></td>
<td>YES</td>
</tr>
<tr>
<td>Reflection</td>
<td><code>hasattr()/getattr()/setattr()</code></td>
<td>YES</td>
</tr>
<tr>
<td>Import</td>
<td><code>import/from..import</code></td>
<td>YES</td>
</tr>
<tr>
<td>Context Block</td>
<td><code>with &lt;expr&gt; as &lt;id&gt;:</code></td>
<td>YES</td>
</tr>
<tr>
<td>Type Annotation</td>
<td><code>def  f(a: int, b : float = 1)</code></td>
<td>YES</td>
</tr>
</tbody>
</table>
<h2 dir="auto"><a id="user-content-getting-started" aria-hidden="true" href="#getting-started"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Getting Started</h2>
<h4 dir="auto"><a id="user-content-cc" aria-hidden="true" href="#cc"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>C/C++</h4>
<p dir="auto">For C/C++ developers, you can download the <code>pocketpy.h</code> on our GitHub release page.</p>
<p dir="auto"><a href="https://github.com/blueloveTH/pocketpy/releases/latest">https://github.com/blueloveTH/pocketpy/releases/latest</a></p>
<p dir="auto">Check <a href="https://pocketpy.dev/c-api/vm/" rel="nofollow">C-API</a> for references. For further customization, you can use <a href="https://pocketpy.dev/getting-started/cpp/" rel="nofollow">C++ API</a>.</p>
<div dir="auto" data-snippet-clipboard-copy-content="#include &#34;pocketpy.h&#34;

int main(){
    // Create a virtual machine
    VM* vm = pkpy_new_vm(true);
    
    // Hello world!
    pkpy_vm_exec(vm, &#34;print(&#39;Hello world!&#39;)&#34;);

    // Create a list
    pkpy_vm_exec(vm, &#34;a = [1, 2, 3]&#34;);

    // Eval the sum of the list
    char* result = pkpy_vm_eval(vm, &#34;sum(a)&#34;);
    printf(&#34;%s&#34;, result);   // 6

    // Free the resources
    pkpy_delete(result);
    pkpy_delete(vm);
    return 0;
}"><pre>#<span>include</span> <span><span>&#34;</span>pocketpy.h<span>&#34;</span></span>

<span>int</span> <span>main</span>(){
    <span><span>//</span> Create a virtual machine</span>
    VM* vm = <span>pkpy_new_vm</span>(<span>true</span>);
    
    <span><span>//</span> Hello world!</span>
    <span>pkpy_vm_exec</span>(vm, <span><span>&#34;</span>print(&#39;Hello world!&#39;)<span>&#34;</span></span>);

    <span><span>//</span> Create a list</span>
    <span>pkpy_vm_exec</span>(vm, <span><span>&#34;</span>a = [1, 2, 3]<span>&#34;</span></span>);

    <span><span>//</span> Eval the sum of the list</span>
    <span>char</span>* result = <span>pkpy_vm_eval</span>(vm, <span><span>&#34;</span>sum(a)<span>&#34;</span></span>);
    <span>printf</span>(<span><span>&#34;</span>%s<span>&#34;</span></span>, result);   <span><span>//</span> 6</span>

    <span><span>//</span> Free the resources</span>
    <span>pkpy_delete</span>(result);
    <span>pkpy_delete</span>(vm);
    <span>return</span> <span>0</span>;
}</pre></div>
<h4 dir="auto"><a id="user-content-unity-engine" aria-hidden="true" href="#unity-engine"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Unity Engine</h4>
<p dir="auto">PocketPy for Unity can be installed via Unity Asset Store.</p>
<p dir="auto"><a href="https://assetstore.unity.com/packages/slug/241120" rel="nofollow">https://assetstore.unity.com/packages/slug/241120</a></p>
<div dir="auto" data-snippet-clipboard-copy-content="using UnityEngine;

public class Test01 : MonoBehaviour
{
    // Start is called before the first frame update
    void Start()
    {
        // Create a virtual machine
        pkpy.VM vm = new pkpy.VM();

        // Create a list
        vm.exec(&#34;a = [1, 2, 3]&#34;);

        // Eval the sum of the list
        string result = vm.eval(&#34;sum(a)&#34;);
        Debug.Log(result);   // 6

        // Print to the standard output
        vm.exec(&#34;print(a)&#34;);
        pkpy.PyOutput o = vm.read_output();
        Debug.Log(o.stdout); // [1, 2, 3]

        // Create a binding
        vm.bind(&#34;builtins&#34;, &#34;test&#34;, (double x) =&gt; x+1);  
        Debug.Log(vm.eval(&#34;test(3.14)&#34;)); // &#39;4.14&#39;
    }
}"><pre><span>using</span> <span>UnityEngine</span>;

<span>public</span> <span>class</span> <span>Test01</span> : <span>MonoBehaviour</span>
{
    <span><span>//</span> Start is called before the first frame update</span>
    <span>void</span> <span>Start</span>()
    {
        <span><span>//</span> Create a virtual machine</span>
        <span>pkpy</span>.<span>VM</span> <span>vm</span> <span>=</span> <span>new</span> <span>pkpy</span>.<span>VM</span>();

        <span><span>//</span> Create a list</span>
        <span>vm</span>.<span>exec</span>(<span><span>&#34;</span>a = [1, 2, 3]<span>&#34;</span></span>);

        <span><span>//</span> Eval the sum of the list</span>
        <span>string</span> <span>result</span> <span>=</span> <span>vm</span>.<span>eval</span>(<span><span>&#34;</span>sum(a)<span>&#34;</span></span>);
        <span>Debug</span>.<span>Log</span>(<span>result</span>);   <span><span>//</span> 6</span>

        <span><span>//</span> Print to the standard output</span>
        <span>vm</span>.<span>exec</span>(<span><span>&#34;</span>print(a)<span>&#34;</span></span>);
        <span>pkpy</span>.<span>PyOutput</span> <span>o</span> <span>=</span> <span>vm</span>.<span>read_output</span>();
        <span>Debug</span>.<span>Log</span>(<span>o</span>.<span>stdout</span>); <span><span>//</span> [1, 2, 3]</span>

        <span><span>//</span> Create a binding</span>
        <span>vm</span>.<span>bind</span>(<span><span>&#34;</span>builtins<span>&#34;</span></span>, <span><span>&#34;</span>test<span>&#34;</span></span>, (<span>double</span> <span>x</span>) <span>=&gt;</span> <span>x</span><span>+</span><span>1</span>);  
        <span>Debug</span>.<span>Log</span>(<span>vm</span>.<span>eval</span>(<span><span>&#34;</span>test(3.14)<span>&#34;</span></span>)); <span><span>//</span> &#39;4.14&#39;</span>
    }
}</pre></div>
<h4 dir="auto"><a id="user-content-flutter" aria-hidden="true" href="#flutter"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Flutter</h4>
<p dir="auto">Run the following script to install this plugin.</p>

<p dir="auto">See <a href="https://pocketpy.dev/getting-started/flutter/" rel="nofollow">https://pocketpy.dev/getting-started/flutter/</a></p>
<h4 dir="auto"><a id="user-content-pre-compiled-libs" aria-hidden="true" href="#pre-compiled-libs"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Pre-compiled Libs</h4>
<p dir="auto">You can download <code>artifact.zip</code> from <a href="https://github.com/blueloveTH/pocketpy/releases/latest">Github Release</a> page. In this archive, there are pre-compiled libraries for many platforms. The file structure is as follows.</p>
<div data-snippet-clipboard-copy-content="- android/
  - arm64-v8a/
    - libpocketpy.so
  - armeabi-v7a/
    - libpocketpy.so
  - x86_64/
    - libpocketpy.so
- linux/
  - x86_64/
    - pocketpy
    - pocketpy.so
- macos/
  - pocketpy.bundle/
- web/
  - lib/
    - pocketpy.js
    - pocketpy.wasm
- windows/
  - x86_64/
    - pocketpy.dll
    - pocketpy.exe"><pre><code>- android/
  - arm64-v8a/
    - libpocketpy.so
  - armeabi-v7a/
    - libpocketpy.so
  - x86_64/
    - libpocketpy.so
- linux/
  - x86_64/
    - pocketpy
    - pocketpy.so
- macos/
  - pocketpy.bundle/
- web/
  - lib/
    - pocketpy.js
    - pocketpy.wasm
- windows/
  - x86_64/
    - pocketpy.dll
    - pocketpy.exe
</code></pre></div>
<h2 dir="auto"><a id="user-content-contribution" aria-hidden="true" href="#contribution"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Contribution</h2>
<p dir="auto">All kinds of contributions are welcome.</p>
<ul dir="auto">
<li>Submit a Pull Request
<ul dir="auto">
<li>fix a bug</li>
<li>add a new feature</li>
</ul>
</li>
<li>Open an Issue
<ul dir="auto">
<li>any suggestions</li>
<li>any questions</li>
</ul>
</li>
</ul>
<h2 dir="auto"><a id="user-content-reference" aria-hidden="true" href="#reference"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Reference</h2>
<ul dir="auto">
<li>
<p dir="auto"><a href="https://github.com/python/cpython">cpython</a></p>
<p dir="auto">The official implementation of Python programming language.</p>
</li>
<li>
<p dir="auto"><a href="https://www.aosabook.org/en/500L/a-python-interpreter-written-in-python.html" rel="nofollow">byterun</a></p>
<p dir="auto">An excellent learning material. It illustrates how Python&#39;s virtual machine works.</p>
</li>
<li>
<p dir="auto"><a href="https://github.com/ktprime/emhash">emhash</a></p>
<p dir="auto">A very fast and memory efficient c++ flat hash map/set. In our test case, it is 40% faster than <code>std::unordered_map</code>.</p>
</li>
</ul>
<h2 dir="auto"><a id="user-content-license" aria-hidden="true" href="#license"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>License</h2>
<p dir="auto">PocketPy is licensed under the <a href="http://opensource.org/licenses/MIT" rel="nofollow">MIT License</a>.</p>
<p dir="auto">PocketPy uses <a href="https://github.com/ktprime/emhash">emhash</a>(MIT License) to implement Python&#39;s internal <code>__dict__</code> object.</p>
</article>
          </div></div>
  </body>
</html>
