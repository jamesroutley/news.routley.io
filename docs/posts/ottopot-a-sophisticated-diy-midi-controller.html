<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://gerotakke.de/ottopot/">Original</a>
    <h1>Ottopot, a sophisticated DIY MIDI controller</h1>
    
    <div id="readability-page-1" class="page"><article>
<!--
## Todo

- [x] Bilder für Grease-Prozedur
- [x] Bilder vom Dschungel-Gelöt / Schaltplan?
- [x] LED boards
- [ ] Video mit 14bit-Vergleich
- [ ] Video mit bisschen Demo
- [ ] Introduction-Video
- [x] Lila Variante ohne LEDs fertig machen
- [x] Fotos von beiden Varianten
- [x] Links zu Codeberg und Printables
- [x] Publish-Datum von diesem Artikel
 -->
<ol>
<li><a href="#intro">Introduction</a></li>
<li><a href="#features">Features</a></li>
<li><a href="#build">Build</a></li>
<li><a href="#setup">Software Setup</a></li>
<li><a href="#ideas">Ideas</a></li>
<li><a href="#thanks">Thanks</a></li>
</ol>
<h2 id="intro" tabindex="-1">Introduction</h2>
<p><img src="https://gerotakke.de/ottopot/ottopot.jpg" alt="2 ottopot variants, one with LEDs and one without"/></p>
<p>This is the ottopot. It&#39;s a MIDI controller I made with nothing but 8 dials. However, the dials I made in the highest quality that I possibly could. There are 2 things in particular that I haven&#39;t seen in any other similar devices:</p>
<p>If you would like to build your own, I have published the 3D print files, a build documentation and the source code here.</p>
<p>I&#39;m considering this the 0.9 version; I&#39;m currently trying to learn KiCad to make a simple PCB for it so the building process is easier.</p>
<p>Let&#39;s dive into some of the details!</p>
<h2 id="features" tabindex="-1">Features</h2>
<h3 id="14bit-ccs" tabindex="-1">14bit CCs</h3>
<p>I&#39;ve come across this a couple of years ago and I&#39;ve been obsessed with it ever since. Usually you send MIDI control messages with a single CC that can hold a value between 0 to 127, so 7bit. That&#39;s a bit coarse for a lot of applications. 14bit CCs are a clever way of sending 2 CC messages in quick succession where the first one is the coarse value and the second one is the fine value. Since every bit doubles the resolution, this is huge improvement!
Now it feels like it is rather obscure, but I have found software support to be pretty good. Logic and Bitwig both support it; those are the DAWs I use, but from a quick search it seems like Ableton also supports it and probably others as well. With Bitwig I use Moss&#39; generic flexi.</p>
<!-- [Here's](https://youtube.com) a demonstration of the difference between 7bit and 12bit resolution controlling a filter's cutoff frequency with high resonance. -->
<h3 id="1%3A1-mapping" tabindex="-1">1:1 mapping</h3>
<p>With analog pots it feels like you are very much in control of the parameter; every movement on the dial directly translates into a change of the parameter. With typical MIDI controllers using encoders, it feels like there is a disconnect; like there&#39;s a layer of goop between the dial and the parameter. I think that is mostly because the relationship is not 1:1, so one full turn of the dial doesn&#39;t correspond to a full sweep through the parameter&#39;s range. They also often use acceleration so the value change is depending on the speed of your motion, not just the distance.</p>
<h2 id="build" tabindex="-1">Build</h2>
<p>I think you should be familiar with soldering and have a bit of experience with other electronics projects before trying to build an ottopot right now.
It might get quite a bit easier with the next version after I learn KiCad and make a PCB.</p>
<h3 id="materials" tabindex="-1">Materials</h3>
<ul>
<li><a href="https://www.pjrc.com/store/teensy40.html" target="_blank">Teensy 4.0 microcontroller</a></li>
<li><a href="https://eu.mouser.com/ProductDetail/Alpha-Taiwan/RV112FF-40B1-15F-0B20K-0068?qs=1mbolxNpo8eHjovTv0swOQ%3D%3D" target="_blank">8x Alpha RV112FF-40B1-15F-0B20K-0068</a></li>
<li><a href="https://eu.mouser.com/ProductDetail/SparkFun/BOB-13906?qs=wwacUt%252BV97vewLCL4%252Blang%3D%3D" target="_blank">2x 74HC4051 8 channel multiplexer</a></li>
<li>optionally <a href="https://www.duppa.net/shop/rgb-led-ring-small/" target="_blank">8x Duppa RGB LED Ring Small</a>; get the 10cm board to board cables</li>
<li>a bit of perfboard</li>
<li><a href="https://cnckitchen.store/de/products/gewindeeinsatz-threaded-insert-m3-standard-100-stk-pcs" target="_blank">4x M3 threaded inserts</a></li>
<li>4x M3x8 screws (longer is fine, shorter won&#39;t work)</li>
<li>3D printed bottom case, top case and knobs</li>
<li>Micro USB cable (to build into the case)</li>
<li>Some rubber feet to glue on</li>
<li>Lots of wires, soldering iron, wire stripper…</li>
<li>For replacing the grease in the pots: knife, pliers, degreaser, bearing grease (I&#39;m using Shimano premium grease because I have it on hand)</li>
</ul>
<h3 id="replacing-the-grease-on-the-pots-for-lower-turning-resistance" tabindex="-1">Replacing the grease on the pots for lower turning resistance</h3>
<section>
	<a href="https://gerotakke.de/ottopot/open.jpeg" target="_blank"><img src="https://gerotakke.de/ottopot/open.jpeg" alt="Opening a potentiometer"/></a>
	<p>Pry open the small legs that hold the metal part to the plastic base. I found it easiest to start with a utility knife and once they&#39;re opened a little bit, continue with pliers.</p>
</section>
<section>
	<a href="https://gerotakke.de/ottopot/circlet.jpeg" target="_blank"><img src="https://gerotakke.de/ottopot/circlet.jpeg" alt="Removing the circlet"/></a>
	<p>Remove the circlet using a pair of pliers. It&#39;s not easy! I found it helps to use a potentiometer knob to make it easier to hold on to the body.</p>
</section>
<section>
	<a href="https://gerotakke.de/ottopot/degrease.jpeg" target="_blank"><img src="https://gerotakke.de/ottopot/degrease.jpeg" alt="Remove the factory grease"/></a>
	<p>Use degreaser to remove the factory grease from both the shaft as well as the base. That stuff is super sticky, it feels almost like glue. The shaft will turn very easily once the grease is gone. Make sure it is fully gone so the different pots will feel the same.  
Best to do that in a sink and use some paper towels to dry and clean the parts. You can roll the edges of a piece of paper towel and use something like a tooth pick to get inside of the axle hole in the body.</p>
</section>
<section>
	<a href="https://gerotakke.de/ottopot/grease.jpeg" target="_blank"><img src="https://gerotakke.de/ottopot/grease.jpeg" alt="Put new grease on the shaft"/></a>
	<p>Put some new grease on the shaft and the axle hole in the body. I&#39;m using Shimano premium bearing grease and I really like the feel of it, just the right amount of resistance. Though I&#39;m sure any other bearing grease will do the same. I&#39;m putting a little grease on both parts and then insert the shaft and turn it around a couple of times before wiping the excess with a bit of paper towel.</p>
</section>
<section>
	<a href="https://gerotakke.de/ottopot/circlet2.jpeg" target="_blank"><img src="https://gerotakke.de/ottopot/circlet2.jpeg" alt="Reinstall the circlet"/></a>
	<p>Reinstall the circlet with a pair of pliers. Again, I found it helps to use a poti knob as kind of a stand for the shaft.</p>
</section>
<section>
	<a href="https://gerotakke.de/ottopot/wiper.jpeg" target="_blank"><img src="https://gerotakke.de/ottopot/wiper.jpeg" alt="Reinstall the wiper"/></a>
	<p>Put the wiper back on the body. There&#39;s a matching cutout on the wiper that fits into the shaft. The photo shows the orientation which I found to be easiest to make them fit.</p>
</section>
<section>
	<a href="https://gerotakke.de/ottopot/body.jpeg" target="_blank"><img src="https://gerotakke.de/ottopot/body.jpeg" alt="Reinstall the plastic body part"/></a>
	<p>Finally fit the body; there is a longer side which should face in the direction of the pins. Use pliers to bend the legs back over to hold the plastic part in place.</p>
</section>
<section>
	<a href="https://gerotakke.de/ottopot/grease-done.jpeg" target="_blank"><img src="https://gerotakke.de/ottopot/grease-done.jpeg" alt="Finished pot"/></a>
	<p>Done! You should have a pot that feels a lot easier and very nice to turn. Now just do it seven more times 🫠</p>
</section>
<h3 id="3d-printing-the-case-and-knobs" tabindex="-1">3D printing the case and knobs</h3>
<p>I&#39;ve published the models on <a href="https://www.printables.com/model/699247-ottopot-midi-controller" target="_blank">printables</a>.</p>
<h3 id="wiring-up-the-boards-(teensy-%2B-multiplexers)" tabindex="-1">Wiring up the boards (Teensy + multiplexers)</h3>
<p>I&#39;ll try to go over this quickly because I&#39;m planning to do a PCB soon so this will become obsolete.</p>
<section>
	<a href="https://gerotakke.de/ottopot/boards.jpeg" target="_blank"><img src="https://gerotakke.de/ottopot/boards.jpeg" alt="Wired up boards"/></a>
	<p>These are the boards wired together with the bit of perfboard in the middle to splice some wires. Black is ground, red is 3v3, yellow are the multiplexer select pins. Let&#39;s go over the individual connections next; I hope this picture can help with orientation and give you an idea of the dimensions you should aim for to make it fit in the case.</p>
</section>
<ul>
<li>
<p>Solder a black wire from Teensy <code>GND</code> to the perfboard, preparing to run ~5 more wires from that.</p>
</li>
<li>
<p>Solder a red wire from Teensy <code>3v3</code> to the perfboard. There will be ~2 more wires from that.</p>
</li>
<li>
<p>Solder 3 yellow wires from Teensy ports <code>20</code>, <code>21</code> and <code>22</code> to the perfboard. Each one will run to both mux boards, so 2 more wires from each.</p>
</li>
<li>
<p>Solder 3 black wires from the ground pin of the perfboard to these pins on the first mux board: <code>GND</code>, <code>VEE</code>, <code>E</code>.</p>
</li>
<li>
<p>Solder a red wire from the <code>3v3</code> pin of the perfboard to the <code>VCC</code> pin on the first mux board.</p>
</li>
<li>
<p>Solder 3 yellow wires from the yellow wires on the perfboard to the <code>S0</code>, <code>S1</code> and <code>S2</code> pins on the first mux board. Make sure that Teensy pin <code>20</code> goes to <code>S0</code>, <code>21</code> to <code>S1</code> and <code>23</code> to <code>S2</code>. This is the reverse order of the pins on the Teensy.</p>
</li>
<li>
<p>Solder a wire from Teensy pin <code>14 (A0)</code> to the <code>Z</code> pin on the first mux board.</p>
</li>
</ul>
<p>Now for the second mux board, basically the same but we&#39;re using the pins on the right side of the first mux board if possible to save some space:</p>
<ul>
<li>Solder a small black wire from <code>GND</code> from the first mux board to <code>GND</code> on the second one.</li>
<li>Also from <code>VEE</code> to <code>VEE</code></li>
<li>And a red one from <code>VCC</code> to <code>VCC</code></li>
<li>There&#39;s no second <code>E</code> pin so run a black wire from the perfboard ground to <code>E</code> on the second mux.</li>
<li>Again, solder 3 yellow wires from the yellow wires on the perfboard to the <code>S0</code>, <code>S1</code> and <code>S2</code> pins on the second mux board, same as the first one.</li>
<li>Now solder a wire from Teensy pin <code>15 (A1)</code> to the <code>Z</code> pin on the second mux board.</li>
</ul>
<p>These are all the connections in the image above.</p>
<h3 id="preparing-the-led-boards-(optional)" tabindex="-1">Preparing the LED boards (optional)</h3>
<p>Each of the 8 LED boards needs some specific solder bridges. I&#39;ll number them the way they are wired to the multiplexers, so left to right, top to bottom.</p>
<section>
	<a href="https://gerotakke.de/ottopot/pots-top.jpeg" target="_blank"><img src="https://gerotakke.de/ottopot/pots-top.jpeg" alt="Potentiometers from the top with numbers"/></a>
	<p>This is the order of the potentiometers (and LED boards) seen from the top; this will be the order in which to connect the Y-pins on the mux boards as well. Keep in mind we&#39;re working from the bottom so it will be flipped.</p>
</section>
<section>
	<a href="https://gerotakke.de/ottopot/led-board.jpeg" target="_blank"><img src="https://gerotakke.de/ottopot/led-board.jpeg" alt="View of a single LED board with areas for the solder bridges"/></a>
	<p>These are the areas in which we will need to add some solder bridges to set the i2c addresses and the pull-up resistors.</p>
</section>
<section>
	<a href="https://gerotakke.de/ottopot/led-board-1.jpeg" target="_blank"><img src="https://gerotakke.de/ottopot/led-board-1.jpeg" alt="First board with the required bridges"/></a>
	<p>As an example, here&#39;s the first board with all solder bridges we need. This is the only board that will have the bridges for the resistors.  </p>
</section>
<p>Here&#39;s a list of all solder bridges needed on the 8 LED boards:</p>
<ul>
<li>1: Pull-up Resistors. SJ1. SJ6.</li>
<li>2: SJ3. SJ8.</li>
<li>3: SJ1. SJ8.</li>
<li>4: SJ2. SJ5.</li>
<li>5: SJ2. SJ6.</li>
<li>6: SJ2. SJ7.</li>
<li>7: SJ2. SJ8.</li>
<li>8: SJ3. SJ6.</li>
</ul>
<h3 id="wiring-up-the-potentiometers" tabindex="-1">Wiring up the potentiometers</h3>
<p>For this, we will add a long wires to each of the mux boards&#39; <code>Y0</code> - <code>Y7</code> pins. I will use grey wires for the pins on the first mux board and purple wires for the second one. This is important for the order in which they&#39;ll get soldered to the pins on the potentiometers.</p>
<section>
	<a href="https://gerotakke.de/ottopot/wavey-wire.jpeg" target="_blank"><img src="https://gerotakke.de/ottopot/wavey-wire.jpeg" alt="Wavey wire for connecting the pots together"/></a>
	<p>This is how I prepare the wavey wire to connect the `3v3` and `gnd` pins. The loops are about 5-4cm lengths of wire where I each twist the ends together with the next piece. All in all we need 7 pieces because the eighth one will connect to the wire on the mux board.</p>
</section>
<section>
	<a href="https://gerotakke.de/ottopot/3v3-pots.jpeg" target="_blank"><img src="https://gerotakke.de/ottopot/3v3-pots.jpeg" alt="Pots connected together with 3v3 wavey loops"/></a>
	<p>Solder the red wavey wire loop to the leftmost pin on each of the pots except the upper right one. Here&#39;s all the 3v3 pins connected; note that the top right is still open since this is the one that&#39;ll connect to the mux board.  
	Do the same thing with the ground wavey wire and connect it to the third pin from the left on each pot leaving the upper right one loose again.</p>
</section>
<section>
	<a href="https://gerotakke.de/ottopot/one-pot-connections.jpeg" target="_blank"><img src="https://gerotakke.de/ottopot/one-pot-connections.jpeg" alt="Connections on one pot"/></a>
	<p>Now it&#39;s time to solder the `Y0` - `Y7` pins from both mux boards to the pots. This is fiddly stuff.   
	The connections in the orientation from the picture are: 3v3, Y-pin from mux board 2, gnd, Y-pin from mux board 1.  
	It&#39;s pretty important to keep the wires somewhat short so they&#39;ll fit in the case. There will be a picture of everything connected, but
	first let&#39;s go over how the pots are numbered.</p>
</section>
<section>
	<a href="https://gerotakke.de/ottopot/pots-top.jpeg" target="_blank"><img src="https://gerotakke.de/ottopot/pots-top.jpeg" alt="Potentiometers from the top with numbers"/></a>
	<p>This is the order of the potentiometers from the top; this will be the order in which to connect the Y-pins on the mux boards as well.</p>
</section>
<section>
	<a href="https://gerotakke.de/ottopot/pots-bottom.jpeg" target="_blank"><img src="https://gerotakke.de/ottopot/pots-bottom.jpeg" alt="Pots numbered from the bottom"/></a>
	<p>Flipping the board will make it so they are numbered like this. Note that I oriented the pots so the pins point towards the bottom in this orientation.
	Looking at it like this, both `Y0` pins from the mux boards will go to the top right pot, `Y1` to the one left to it and so on.</p>
</section>
<section>
	<a href="https://gerotakke.de/ottopot/all-connections.jpeg" target="_blank"><img src="https://gerotakke.de/ottopot/all-connections.jpeg" alt="All the pots connected"/></a>
	<p>So this is the end result of all the potentiometers connections. The 3v3 and gnd wires on the first potentiometer have been connected to the mux board as well as the wavey wires, connecting all pots together. (For the eagle eyed: please don&#39;t get confused, the mux boards are out of order in this picture. The written documentation is correct, I just messed up the order in the build. Sorry. This is the only picture where you can see the difference.)</p>
</section>
<section>
	<a href="https://gerotakke.de/ottopot/electronics-in-case.jpeg" target="_blank"><img src="https://gerotakke.de/ottopot/electronics-in-case.jpeg" alt="Put it all in the case"/></a>
	<p>If you&#39;re not doing the LED boards, you&#39;re almost done. Otherwise skip to the next section. Put a micro USB cable through the back hole of the bottom case, connect the Teensy and wiggle everything in place so you can close the case. If you&#39;re worried about it, you could use hot glue to fix the boards in place and use 2 cable ties (inside and outside) for strain relief on the cable.</p>
</section>
<h3 id="wiring-up-the-led-boards-(optional)" tabindex="-1">Wiring up the LED boards (optional)</h3>
<section>
	<a href="https://gerotakke.de/ottopot/leds-in-top-case.jpeg" target="_blank"><img src="https://gerotakke.de/ottopot/leds-in-top-case.jpeg" alt="LED boards in the top case"/></a>
	<p>If you use the LED boards, things should look like in this picture now.  
You&#39;ll need to connect all the boards with the supplied short wires to each other and solder one of the connecting wires up to the Teensy pins.  
The order of the wiring doesn&#39;t matter, the solder bridges of the i2c pins are what&#39;s making them match to their potentiometers.
	</p>
</section>
<section>
	<a href="https://gerotakke.de/ottopot/leds-wired.jpeg" target="_blank"><img src="https://gerotakke.de/ottopot/leds-wired.jpeg" alt="LED boards in the top case, wired up"/></a>
	<p>This is how it looks after you attached all the connecting cables between the LED boards. One on the first board is still disconnected, we&#39;ll solder this up
		to the Teensy next.
	</p>
</section>
<section>
	<a href="https://gerotakke.de/ottopot/leds-teensy.jpeg" target="_blank"><img src="https://gerotakke.de/ottopot/leds-teensy.jpeg" alt="LED boards in the top case, wired to the Teensy"/></a>
	<p>
		Connect the red wire to the 5v pin on the Teensy.  
		The blue wire goes to pin 19 (SCL0) on the Teensy.  
		Green wire to pin 18 (SDA0).  
		The black wire goes to the ground pins on the perfboard.  
		Yellow wire goes to the 3v3 pins on the perfboard.  
	</p>
</section>
<p><strong>That wraps up the build!</strong></p>
<h3 id="building-%26-uploading-the-firmware" tabindex="-1">Building &amp; uploading the firmware</h3>
<p>The code is a <a href="https://platformio.org/" target="_blank">platformIO</a> project so you&#39;ll have to have it installed. I&#39;m using platformIO core from the command line but
the VSCode extension should be fine as well.</p>
<h2 id="setup" tabindex="-1">Software Setup</h2>
<h3 id="setup-in-bitwig-studio" tabindex="-1">Setup in Bitwig Studio</h3>
<p>Install <a href="https://www.mossgrabers.de/Software/Bitwig/Bitwig.html" target="_blank">Driven By Moss</a> so you can use its Generic Flexi script. Make sure the Ottopot is connected.</p>
<h3 id="setup-in-logic-pro" tabindex="-1">Setup in Logic Pro</h3>
<p>Open Smart Controls and press Learn Assignment for the first knob, then wiggle the first knob on the ottopot. Logic will pick up that it is a 14bit CC. Sadly you will need to disable the Feedback feature in the assignment settings since Logic doesn&#39;t seem to send usable 14 bit CCs back to the device (only the LSB will be sent, not the MSB). This also means that it will only work with the annoying “pick up after scrolling past” mechanic.</p>
<h2 id="ideas" tabindex="-1">Future goals, ideas</h2>
<ul>
<li>PCB for much easier assembly (hopefully)</li>
<li>“Shift button” for small adjustments (going from 1:1 to something like 1:3)</li>
<li>Forward and back buttons for changing remote pages</li>
</ul>
<h2 id="thanks" tabindex="-1">Thanks</h2>
<p><a href="https://hackaday.io/project/171841-driveralgorithm-for-360-deg-endless-potentiometer">Bjørn</a> and <a href="https://github.com/juanlittledevil/EndlessPotentiometer">Juan</a> for their work on the Endless Potentiometer code.</p>
<p><a href="https://inputlabs.io/">Input Labs</a> for making the Alpakka controller and giving me the confidence that a homemade 3D printed product can easily rival industrially made commercial solutions.</p>
<p>Michael from <a href="https://etsy.com/shop/CapraDesignStands">CapraDesignStands</a> for the advise and in advance for the help with the PCB.</p>
<p><a href="https://www.divergentwaves.co.uk/">Divergent Waves</a> for helping with KiCad and the PCB.</p>
</article></div>
  </body>
</html>
