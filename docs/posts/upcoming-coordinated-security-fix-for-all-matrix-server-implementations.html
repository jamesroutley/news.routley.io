<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://matrix.org/blog/2025/07/security-predisclosure/">Original</a>
    <h1>Upcoming coordinated security fix for all Matrix server implementations</h1>
    
    <div id="readability-page-1" class="page"><div>
        <div>
            <p>Hi all,</p>
<p>Over the last 6 months a major project has been underway by the Element server team and the Matrix.org Foundation security team to investigate “state resets”: scenarios where Matrix’s state resolution algorithm can give unexpected results.  As part of this work we’ve identified two high severity protocol vulnerabilities (CVE-2025-49090; the other not yet allocated a CVE).</p>
<p>Given the security implications of a federation protocol vulnerability, we’ve shared details under embargo over the last 4 weeks with all known active server implementations, and are now aiming for a coordinated security release across all Matrix server implementations on <strong>Tuesday Jul 22nd 2025 at 17:00 UTC</strong>.  If you run a Matrix server in an untrusted federation (e.g. the public federation), please be prepared to upgrade as soon as the patched versions are available.</p>
<p>These vulnerabilities have been addressed via MSCs which have been shared, reviewed and are in the final comment period (disposition merge) with the Spec Core Team and server implementor community, under embargo.  This will result in an off-cycle Matrix spec release (1.16) introducing a new room version (<strong>12</strong>) to address the vulnerabilities in question, requiring a room upgrade of existing rooms.  Having given server and room admins time to upgrade, we are then planning to un-embargo the MSCs and complement tests on Friday Jul 25th 2025 at 17:00 UTC.</p>
<p><strong>CLARIFICATION, Jul 16 17:30 UTC</strong>: Room admins should plan to upgrade rooms at their convenience, similar to previous security-related room version upgrades (e.g. v1 to v2).  Much like installing an operating system patch, sooner is better, but as these are not Critical Severity vulnerabilities, there is no requirement for room admins to upgrade rooms immediately on Jul 22nd. For instance, the Matrix.org Foundation will likely upgrade its public rooms at some point after Jul 25th (having given server admins a chance to upgrade, and having given any server implementations running late a chance to release).  N.B. Only rooms which include users on potentially malicious servers (e.g. publicly joinable rooms on untrusted federations) are vulnerable.</p>
<p><strong>Important information for client developers:</strong></p>
<ul>
<li>
<p>Client developers should review <a href="https://github.com/matrix-org/matrix-spec-proposals/blob/matthew/msc4291/proposals/4291-room-ids-as-hashes.md">MSC4291: “Room IDs as hashes of the create event”</a> to ensure their clients can accept the new proposed format of room IDs, and no longer expects <code>content.predecessor.event_id</code> in <code>m.room.create</code> events.</p>
</li>
<li>
<p>One of the other changes coming in v12 is that room creators will be privileged over other users in the room. Therefore clients which restrict user behaviour based on power level will need to be updated to be aware that room creators effectively have infinite power level. Creators are <strong>not</strong> listed in the users block of the <code>m.room.power_levels</code> event, and are instead defined as the <code>sender</code> field of the <code>m.room.create</code> event, or entries in a new optional <code>additional_creators</code> array field in the <code>content</code> of the create event. Full details will be released in the MSCs when embargo lifts.</p>
</li>
<li>
<p>Finally, clients which use <code>power_level_content_override</code> when creating rooms MUST NOT assign a power level to the room creator, otherwise the <code>/createRoom</code> request will fail.</p>
</li>
</ul>
<p>This has been an exceptionally complicated project to coordinate and its security implications required us to deviate from our usual MSC process and develop the changes under embargo. This and the expedited release of a new stable room version are exceptional choices that are far from ideal, which we’re having to take to keep the ecosystem secure.  To be clear, normal MSC development and process will continue in the open, just as it always has. We’d like to sincerely thank the Matrix server implementor community for their impressive support in preparing the coordinated security releases - both in terms of vital MSC review, and then working together to implement the necessary changes. Matrix’s server heterogeneity has never looked healthier. We’d also like to thank Timo Kösters for helping precipitate the project in the first place.</p>
<p>We’ll follow up with more details next Tuesday (assuming the disclosure timeline doesn’t slip).</p>
<p>Thanks all for your time, patience and understanding while we ship this protocol upgrade (the first coordinated upgrade since <a href="https://matrix.org/blog/2019/03/15/matrix-1-0-https-arewereadyyet-com/">Matrix 1.0</a> back in 2019!)</p>
<p>Matthew</p>

            <div>
                <p>
                    <h2>The Foundation needs you</h2>
                </p>
                <div>
                    <p>
                        The Matrix.org Foundation is a non-profit and only relies
                        on donations to operate. Its core mission is to maintain
                        the Matrix Specification, but it does much more than that.
                    </p>
                    <p>
                        It maintains the matrix.org homeserver and hosts several
                        bridges for free. It fights for our collective rights to
                        digital privacy and dignity.
                    </p>
                    <p><a href="https://matrix.org/support">Support us</a>
                </p></div>
            </div>
        </div>
        
    </div></div>
  </body>
</html>
