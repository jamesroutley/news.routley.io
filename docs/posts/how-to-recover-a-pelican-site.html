<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="http://katrinaeg.com/site-recovery.html">Original</a>
    <h1>How to Recover a Pelican Site</h1>
    
    <div id="readability-page-1" class="page"><div role="content">
<article>
    <h2>How to Recover a Pelican Site</h2>
  	<h6>Written by <a href="https://github.com/author/katrina-ellison-geltman.html">Katrina Ellison Geltman</a> on Sun 23 March 2025.</h6>
	<p>Perhaps you, like me, have lost the original content used to generate a
<a href="https://docs.getpelican.com/en/latest/index.html">Pelican</a> website.
You have the site itself, but without the original settings and Markdown
files, it&#39;s difficult to add any new content.</p>
<p>This article is about how to recover that content.</p>
<h3>Install Python and Pelican</h3>
<div><pre><span></span><code><span>#</span><span> </span><span>Ensure</span><span> </span><span>Python</span><span> </span><span>&gt;=</span><span> </span><span>3.9</span>
<span>python3</span><span> </span><span>--</span><span>version</span>

<span>####</span><span> </span><span>Install</span><span> </span><span>venv</span>
<span>sudo</span><span> </span><span>apt</span><span> </span><span>install</span><span> </span><span>python3</span><span>.12</span><span>-</span><span>venv</span>

<span>#</span><span> </span><span>Install</span><span> </span><span>pelican</span>
<span>.</span><span>/</span><span>pelican</span><span>-</span><span>dev</span><span>-</span><span>env</span><span>/</span><span>bin</span><span>/</span><span>python</span><span> </span><span>-</span><span>m</span><span> </span><span>ensurepip</span><span> </span><span>--</span><span>default</span><span>-</span><span>pip</span>
<span>.</span><span>/</span><span>pelican</span><span>-</span><span>dev</span><span>-</span><span>env</span><span>/</span><span>bin</span><span>/</span><span>python</span><span> </span><span>-</span><span>m</span><span> </span><span>pip</span><span> </span><span>install</span><span> </span><span>&#34;pelican[markdown]&#34;</span>
</code></pre></div>

<h3>Serve Your Site Locally</h3>
<p>When you want to preview your site, run this command in your project&#39;s root
directory, then visit <em>localhost:3333</em> in your browser. It serves everything in
the <em>output/</em> directory.</p>
<div><pre><span></span><code>python3 -m http.server -d output 3333
</code></pre></div>

<h3>Install a Theme</h3>
<p>Download one of the themes shown at <a href="https://pelicanthemes.com/">Pelican Themes</a>
(most of them are available on GitHub). Put it in a directory that&#39;s outside
your <em>content/</em> directory. I chose to make a directory called <em>themes/</em> and put
it there, but you could also keep it completely outside of your site&#39;s code.</p>
<p>Wherever you put it, add it to your <em>pelicanconf.py</em> like this:</p>
<div><pre><span></span><code>THEME = &#39;./themes/foundation-default-colours&#39;
</code></pre></div>

<h3>Add Settings to <em>pelicanconf.py</em></h3>
<p>You will likely need some settings in the file <em>pelicanconf.py</em>. These were mine:</p>
<div><pre><span></span><code>THEME = &#39;./themes/foundation-default-colours&#39;
SITENAME = &#34;Katrina Ellison Geltman&#34;
FOUNDATION_FOOTER_TEXT = &#39; &#39;
FOUNDATION_PYGMENT_THEME = &#39;bw&#39;
MONTH_ARCHIVE_SAVE_AS = &#39;posts/{date:%Y}/{date:%m}/index.html&#39;
STATIC_PATHS = [&#39;images&#39;, &#39;theme/img&#39;]
LINKS = [[&#39;LinkedIn&#39;, &#39;http://www.linkedin.com/in/katrinaellison&#39;],
     [&#39;GitHub&#39;, &#39;http://www.github.com/katrinae&#39;],
     [&#39;SlideShare&#39;, &#39;http://www.slideshare.net/kellison00&#39;]
    ]
FOUNDATION_ALTERNATE_FONTS = &#39;True&#39;
</code></pre></div>

<p>See a full list of <a href="https://docs.getpelican.com/en/latest/settings.html">settings on the Pelican website</a>.</p>
<h3>Generate Input Markdown Files</h3>
<p>I used this script (generated by Copilot) to convert my output HTML files
back to Markdown.</p>
<div><pre><span></span><code><span>import</span><span> </span><span>os</span>
<span>import</span><span> </span><span>html2text</span>

<span># Function to convert HTML file to Markdown</span>
<span>def</span><span> </span><span>convert_html_to_markdown</span><span>(</span><span>html_file_path</span><span>,</span><span> </span><span>markdown_file_path</span><span>):</span>
<span>with</span><span> </span><span>open</span><span>(</span><span>html_file_path</span><span>,</span><span> </span><span>&#39;r&#39;</span><span>,</span><span> </span><span>encoding</span><span>=</span><span>&#39;utf-8&#39;</span><span>)</span><span> </span><span>as</span><span> </span><span>html_file</span><span>:</span>
<span>    </span><span>html_content</span><span> </span><span>=</span><span> </span><span>html_file</span><span>.</span><span>read</span><span>()</span>

<span>markdown_content</span><span> </span><span>=</span><span> </span><span>html2text</span><span>.</span><span>html2text</span><span>(</span><span>html_content</span><span>)</span>

<span>with</span><span> </span><span>open</span><span>(</span><span>markdown_file_path</span><span>,</span><span> </span><span>&#39;w&#39;</span><span>,</span><span> </span><span>encoding</span><span>=</span><span>&#39;utf-8&#39;</span><span>)</span><span> </span><span>as</span><span> </span><span>markdown_file</span><span>:</span>
<span>    </span><span>markdown_file</span><span>.</span><span>write</span><span>(</span><span>markdown_content</span><span>)</span>

<span># Directory containing the HTML files</span>
<span>html_directory</span><span> </span><span>=</span><span> </span><span>&#39;/home/katrina/pelican-dev/katrinae.github.io/&#39;</span>
<span># Directory to save the converted Markdown files</span>
<span>markdown_directory</span><span> </span><span>=</span><span> </span><span>&#39;/home/katrina/pelican-dev/pelican-site/content/&#39;</span>

<span># Ensure the markdown directory exists</span>
<span>os</span><span>.</span><span>makedirs</span><span>(</span><span>markdown_directory</span><span>,</span><span> </span><span>exist_ok</span><span>=</span><span>True</span><span>)</span>

<span># Convert each HTML file in the directory to Markdown</span>
<span>for</span><span> </span><span>html_file_name</span><span> </span><span>in</span><span> </span><span>os</span><span>.</span><span>listdir</span><span>(</span><span>html_directory</span><span>):</span>
<span>if</span><span> </span><span>html_file_name</span><span>.</span><span>endswith</span><span>(</span><span>&#39;.html&#39;</span><span>):</span>
<span>    </span><span>html_file_path</span><span> </span><span>=</span><span> </span><span>os</span><span>.</span><span>path</span><span>.</span><span>join</span><span>(</span><span>html_directory</span><span>,</span><span> </span><span>html_file_name</span><span>)</span>
<span>    </span><span>markdown_file_name</span><span> </span><span>=</span><span> </span><span>os</span><span>.</span><span>path</span><span>.</span><span>splitext</span><span>(</span><span>html_file_name</span><span>)[</span><span>0</span><span>]</span><span> </span><span>+</span><span> </span><span>&#39;.md&#39;</span>
<span>    </span><span>markdown_file_path</span><span> </span><span>=</span><span> </span><span>os</span><span>.</span><span>path</span><span>.</span><span>join</span><span>(</span><span>markdown_directory</span><span>,</span><span> </span><span>markdown_file_name</span><span>)</span>

<span>    </span><span>convert_html_to_markdown</span><span>(</span><span>html_file_path</span><span>,</span><span> </span><span>markdown_file_path</span><span>)</span>
<span>    </span><span>print</span><span>(</span><span>f</span><span>&#39;Converted </span><span>{</span><span>html_file_name</span><span>}</span><span> to </span><span>{</span><span>markdown_file_name</span><span>}</span><span>&#39;</span><span>)</span>
</code></pre></div>

<p>You also have to add some metadata to the beginning of each Markdown file,
like this:</p>
<div><pre><span></span><code><span>Title</span><span>:</span><span> </span><span>How</span><span> </span><span>to</span><span> </span><span>Recover</span><span> </span><span>a</span><span> </span><span>Pelican</span><span> </span><span>Site</span>
<span>Date</span><span>:</span><span> </span><span>Sunday</span><span>,</span><span> </span><span>March</span><span> </span><span>23</span><span> </span><span>2025</span>
<span>Author</span><span>:</span><span> </span><span>Katrina</span><span> </span><span>Ellison</span><span> </span><span>Geltman</span>
<span>Slug</span><span>:</span><span> </span><span>site</span><span>-</span><span>recovery</span>
</code></pre></div>

<p>The <code>slug</code> corresponds to the page&#39;s URL (i.e. <code>site-recovery</code> becomes
<code>site-recovery.html</code>).</p>
<h3>Copy Images</h3>
<p>I put my images in <em>content/images/</em> and then added <code>STATIC_PATHS = [&#39;images&#39;]</code> to my <em>pelicanconf.py</em>. This copies the images to <em>output/images/</em> so they can be
served at <em>images/</em>.</p>
<h3>Generate Output</h3>
<p>When everything is in place, generate output with:</p>
<div><pre><span></span><code>python -m pelican content -s pelicanconf.py
</code></pre></div>

<p>Then compare it to your old output. </p>
</article>

						</div></div>
  </body>
</html>
