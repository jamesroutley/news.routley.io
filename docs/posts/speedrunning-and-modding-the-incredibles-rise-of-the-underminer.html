<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://farlow.dev/2025/05/02/rotu">Original</a>
    <h1>Speedrunning and Modding the Incredibles: Rise of the Underminer</h1>
    
    <div id="readability-page-1" class="page"><div aria-label="Content">
      <div>
        <article itemscope="" itemtype="http://schema.org/BlogPosting">

  

  <div itemprop="articleBody">
    <p>In this post, I‚Äôll talk about reverse engineering and modding rotu in order to
optimize a speedrun. On the way, I‚Äôll answer why cheat code books (remember
those?) and websites have listed incomplete or inaccurate cheat codes for this
game. I‚Äôll also show some of the game‚Äôs debug features and a couple out of
bounds glitches.</p>

<h2 id="background">Background</h2>

<p>My brother and I grew up playing the somewhat niche game <a href="https://en.wikipedia.org/wiki/The_Incredibles:_Rise_of_the_Underminer">The Incredibles: Rise
of the
Underminer</a>
on the GameCube. Since then, it‚Äôs become a tradition to play whenever we‚Äôre at
home for the holidays.</p>

<p>Last year, for fun, we <a href="https://www.youtube.com/watch?v=549aUD5Z9oA">filmed our casual
playthrough</a>. At the time, the
casual run was fast enough for the <a href="https://www.speedrun.com/rotu?h=Glitchless-Co-Op&amp;x=9kvme08k-5lypy1yl.p12er7d1">WR in the Co-Op Glitchless
category</a>
at 1:04:58.</p>

<p>Someone beat us just a short while later. We haven‚Äôt been able to beat it since.
It‚Äôs time to get serious, so let‚Äôs reverse engineer the game to look for
optimizations.</p>

<p>The whole point of rotu is to beat up robots as you progress through 11 levels.
The game ends with a boss fight against <a href="https://disney.fandom.com/wiki/The_Underminer">The
Underminer</a>, the villain
introduced at the end of the first Incredibles film.</p>

<p>Since so much of the game is combat focused, if we can figure out how to
optimize combat, we can shave time off our run.</p>

<h2 id="reverse-engineering">Reverse Engineering</h2>
<p>One way we can learn about the combat system is to statically reverse engineer
the game. A Gamecube iso will include a .dol file, which is the <a href="https://wiibrew.org/wiki/DOL">executable file
format for the GameCube</a>. We can use <a href="https://github.com/Cuyler36/Ghidra-GameCube-Loader">Cuyler36‚Äôs
Ghidra-GameCube-Loader</a> to
load the .dol file into <a href="https://ghidra-sre.org/">Ghidra</a>. This will allow us to see the PowerPC
instructions along with Ghidra‚Äôs attempted C decompilation.</p>

<p>We‚Äôre very lucky that rotu is one of <a href="https://www.retroreversing.com/gamecube-debug-symbols">~10% of GameCube games that shipped with
debug symbols</a>. This
means that we‚Äôre able to read function names. Here‚Äôs an arbitrary example of the
kind of decompilation we‚Äôre working with:</p>

<div><div><pre><code>
<span>/* __thiscall zNPC::zNPCBomber::GetCombatData(void) */</span>

<span>undefined</span> <span>**</span> <span>__thiscall</span> <span>zNPC</span><span>::</span><span>zNPCBomber</span><span>::</span><span>GetCombatData</span><span>(</span><span>zNPCBomber</span> <span>*</span><span>this</span><span>)</span>

<span>{</span>
  <span>int</span> <span>iVar1</span><span>;</span>
  <span>undefined</span> <span>**</span><span>ppuVar2</span><span>;</span>

  <span>iVar1</span> <span>=</span> <span>(</span><span>**</span><span>(</span><span>code</span> <span>**</span><span>)(</span><span>*</span><span>(</span><span>int</span> <span>*</span><span>)(</span><span>this</span> <span>+</span> <span>0xdc</span><span>)</span> <span>+</span> <span>0x100</span><span>))();</span>
  <span>ppuVar2</span> <span>=</span> <span>&amp;</span><span>@</span><span>unnamed</span><span>@</span><span>zNPCBomber_cpp</span><span>@</span><span>::</span><span>bomberEliteCombatInitData</span><span>;</span>
  <span>if</span> <span>(</span><span>iVar1</span> <span>==</span> <span>0</span><span>)</span> <span>{</span>
    <span>ppuVar2</span> <span>=</span> <span>&amp;</span><span>@</span><span>unnamed</span><span>@</span><span>zNPCBomber_cpp</span><span>@</span><span>::</span><span>bomberCombatInitData</span><span>;</span>
  <span>}</span>
  <span>return</span> <span>ppuVar2</span><span>;</span>
<span>}</span>
</code></pre></div></div>

<p>There‚Äôs a lot of code defining the combat system, and it‚Äôs not obvious where we
should start looking. It seems hard to find interesting or exploitable combat
behavior by just reading the code, since there are a lot of interacting
components and the emergent behavior is hard to reason about.</p>

<h2 id="modding">Modding</h2>
<p>I realized that what I actually wanted was a mod that will draw the health of all
the enemies on the screen. That way, we can experiment with ideas in-game and
get immediate feedback on the effect on the enemy‚Äôs health.</p>

<p>The idea is simple in theory. First, we‚Äôll look at Ghidra to find where enemies
are stored in memory. We‚Äôll also find useful functions we can call, like a text
rendering function. Then, we‚Äôll insert a hook into the main render function and
draw text on the screen at the entities‚Äô projected screen coordinates.</p>

<p>To do this in practice, we‚Äôll first set up a <a href="https://github.com/nathanfarlow/rotu/tree/main/tools/lib">C
toolchain</a> so we can
write mods in C against the actual rotu game engine. The toolchain first
compiles C to PowerPC via <a href="https://wiibrew.org/wiki/DevkitPPC">DevkitPPC</a>. Then
it parses the game‚Äôs .dol file to determine which patches to write where, and
finally it outputs an Action Replay code that will write the compiled
instructions of the mod to the right places.</p>

<p>All that‚Äôs left is to write <a href="https://github.com/nathanfarlow/rotu/blob/main/mod/main.c">the
mod</a>! It‚Äôs ergonomic
to be able to leverage existing functions in the game engine, like libc
functions, but more importantly, we can use functions that draw textboxes and
convert world coordinates to screen coordinates.</p>

<h2 id="action-replay">Action Replay</h2>
<p>As mentioned above, the final output of the toolchain is an <a href="https://en.wikipedia.org/wiki/Action_Replay">Action
Replay</a> code. The Action Replay is
a game cheating device that the <a href="https://dolphin-emu.org/">Dolphin emulator</a>
also supports. I chose to use Action Replay codes instead of patching the game
because they‚Äôre easy to share and it makes for a good story. The best docs for
GameCube AR codes are on the <a href="https://github.com/dolphin-emu/dolphin/wiki/GameCube-Action-Replay-Code-Types">Dolphin GitHub
wiki</a>.</p>

<p>In an Action Replay code, each line is an instruction. As I understand, these
instructions get executed ~every frame. For our purposes, we‚Äôll only make use of
the ‚Äúwrite memory‚Äù instructions to write our mod‚Äôs instructions where they need
to go. This works fine in an emulator. No idea if it works on real hardware.</p>

<p>You can see the final AR code
<a href="https://github.com/nathanfarlow/rotu/blob/main/health.txt">here</a>. It‚Äôs
hilarious long: 1.2k lines long at the time of this writing!</p>

<h2 id="results">Results</h2>
<p>Check out the mod in action!</p>

<video autoplay="" loop="" muted="" playsinline="">
  <source src="/assets/2025-05-02-rotu/rotudemo2.mp4" type="video/mp4"/>
</video>

<p>An example subtle observation that is made possible with this method is that
Frozone‚Äôs ice glide does different damage depending on how long he is in contact
with the enemy. It‚Äôs as if it can ‚Äúhit twice‚Äù:</p>

<video autoplay="" loop="" muted="" playsinline="">
  <source src="/assets/2025-05-02-rotu/frozone.mp4" type="video/mp4"/>
</video>

<p>Perhaps the most important observation is just that punching is overpowered. In
particular, the punch damage doubles for sequential punches, up to 4 punches.</p>

<h3 id="mr-i-punch-damage">Mr. I Punch Damage</h3>

<table>
  <thead>
    <tr>
      <th>Upgrade Level</th>
      <th>First punch</th>
      <th>Second punch</th>
      <th>Third punch</th>
      <th>Fourth punch</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Upgrade 1</td>
      <td>5</td>
      <td>10</td>
      <td>15</td>
      <td>20</td>
    </tr>
    <tr>
      <td>Upgrade 2</td>
      <td>7</td>
      <td>15</td>
      <td>22</td>
      <td>30</td>
    </tr>
    <tr>
      <td>Upgrade 3</td>
      <td>10</td>
      <td>20</td>
      <td>30</td>
      <td>40</td>
    </tr>
  </tbody>
</table>

<p><em>Note: Fourth punch does insane damage on frozen enemies. It one-hits frozen enforcers (100 hp).</em></p>

<h3 id="frozone-punch-damage">Frozone Punch Damage</h3>

<table>
  <thead>
    <tr>
      <th>Upgrade Level</th>
      <th>First punch</th>
      <th>Second punch</th>
      <th>Third punch</th>
      <th>Fourth punch</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Upgrade 1</td>
      <td>3</td>
      <td>5</td>
      <td>8</td>
      <td>15</td>
    </tr>
    <tr>
      <td>Upgrade 2</td>
      <td>4</td>
      <td>7</td>
      <td>12</td>
      <td>22</td>
    </tr>
    <tr>
      <td>Upgrade 3</td>
      <td>6</td>
      <td>10</td>
      <td>16</td>
      <td>30</td>
    </tr>
  </tbody>
</table>

<h3 id="mr-i-slam-damage">Mr. I Slam Damage</h3>

<table>
  <thead>
    <tr>
      <th>Upgrade Level</th>
      <th>Damage</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Upgrade 1</td>
      <td>20</td>
    </tr>
    <tr>
      <td>Upgrade 2</td>
      <td>30</td>
    </tr>
    <tr>
      <td>Upgrade 3</td>
      <td>40</td>
    </tr>
  </tbody>
</table>

<p><em>Note: Sometimes does double damage if you collide with bot while slamming.</em></p>

<h3 id="frozone-ice-glide-damage">Frozone Ice Glide Damage</h3>

<table>
  <thead>
    <tr>
      <th>Upgrade Level</th>
      <th>Damage</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Upgrade 1</td>
      <td>15</td>
    </tr>
    <tr>
      <td>Upgrade 2</td>
      <td>22</td>
    </tr>
    <tr>
      <td>Upgrade 3</td>
      <td>30</td>
    </tr>
  </tbody>
</table>

<p><em>Note: Often ‚Äúhits twice‚Äù on large enemies.</em></p>

<h2 id="side-quest-cheat-codes">Side Quest: Cheat Codes</h2>

<p>The game has a cheat code entry screen accessible from the pause menu. While not
useful for speedrunning, it has always been a curiousity to me.</p>

<p><img src="https://farlow.dev/assets/2025-05-02-rotu/secrets.png" alt="Out of bounds glitch 1"/></p>

<p>Many years ago at a scholastic book fair at my elementary school, I bought a
<a href="https://archive.org/details/secretcodesforco00hlei/mode/2up">book of video game cheat
codes</a>. It listed
off several codes for the game. Later, I learned that it was an incomplete set
and I could find more online. However, some of the online codes didn‚Äôt work. For
example, take a look at <a href="https://www.cheatcc.com/articles/the-incredibles-rise-of-the-underminer-cheats-codes-cheat-codes-walkthrough-guide-faq-unlockables-for-playstation-2-ps2-psx2/">this
website</a>
that lists some of the codes as ‚Äúunknown‚Äù. One example of such a code is ‚ÄúNUKE‚Äù.
When entered, the game reports ‚ÄúCHEAT INCORRECT‚Äù. Where did these incorrect
codes come from?</p>

<p>My best guess is that the people hunting for cheat codes in the early days just
ran <code>strings</code> on the iso. You‚Äôll see that these cheat codes aren‚Äôt hard to find,
especially if you already know one:</p>

<div><div><pre><code>$ strings rotu.iso | grep -i inahurry -C 10
FMV\Promo14
DoneA
DoneB
EgoProblem
FrozBoom
FrozMaster
FrozProf
Headroom
HUDBeGone
ICantHearYou
InAHurry
LevelLocksmith
Maximillion
MrIBoom
MrIMaster
MrIProf
Nuke
RollCall
Shameless
ShowMe
ThisIsTooEasy
</code></pre></div></div>

<p>You‚Äôll see that ‚ÄúNUKE‚Äù is among the ones listed. So why isn‚Äôt it accepted? I did
a bit of rev work to learn that it‚Äôs locked behind a developer flag. When dev
mode is enabled, these codes work. When activated, ‚ÄúNUKE‚Äù will allow for
unlimited super moves. I didn‚Äôt dig too far into what the other dev cheats, but
it‚Äôs nice to get some closure :)</p>

<p>Here‚Äôs an Action Replay code to enable dev mode:</p>


<p>Some others dev cheat codes haven‚Äôt been documented by any site that I know of
include ‚ÄúCA‚Äù, ‚ÄúCB‚Äù, ‚ÄúCC‚Äù, ‚Ä¶ to warp to checkpoints in a level, and ‚ÄúX‚Äù ‚ÄúXX‚Äù
‚ÄúXXX‚Äù ‚Ä¶ to give different amounts of XP to the player. I would guess that
those looking at the output of <code>strings</code> would miss this in the noise of the
other random strings they were seeing.</p>

<p>Perhaps more importantly, when dev mode is enabled, <em>you can hit</em> <code>L+R+dpad down</code> <em>to fly!</em></p>

<p><code>L+R+X</code> enables a debug overlay that includes information like player position
and FPS.</p>

<video autoplay="" loop="" muted="" playsinline="">
  <source src="/assets/2025-05-02-rotu/rotufly.mp4" type="video/mp4"/>
</video>

<p>Something else caught my eye while reversing various cheat codes. I learned that
if you hold L+R in the pause screen and type in a sequence of X+Y, then it will
enable some cheats. Unfortunately it looks like the implementation of those
cheats was removed from rotu entirely. I was informed by
<a href="https://x.com/hoongoons">hoongoons</a> that these kind of codes are present in
other games using the same engine.</p>

<h2 id="misc-out-of-bounds-glitches">Misc Out of Bounds Glitches</h2>

<p>We came across a couple out of bounds glitches while practicing (read: goofing
around). Most of these involve weird logic around respawning a character while
the alive character is not on the ground. It‚Äôs not obvious that any of these
exact examples will save time, but the technique could be useful to others.</p>

<iframe width="100%" height="500" src="https://www.youtube.com/embed/NtbP7gEaORY" title="Out of Bounds Skip - Heavy Metal Level" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<p><img src="https://farlow.dev/assets/2025-05-02-rotu/oob1.png" alt="Out of bounds glitch 1"/></p>

<p><img src="https://farlow.dev/assets/2025-05-02-rotu/oob2.png" alt="Out of bounds glitch 2"/></p>

<h2 id="conclusion">Conclusion</h2>

<p>I had a lot of fun doing this rev work, but we still haven‚Äôt made much progress
toward reclaiming our record. Maybe by publishing this research, others in the
very tiny rotu speedrunning community can build off of it. Thanks for reading! All the code can be found <a href="https://github.com/nathanfarlow/rotu">here</a>. üê™</p>

  </div>

  
</article>

      </div>
    </div></div>
  </body>
</html>
