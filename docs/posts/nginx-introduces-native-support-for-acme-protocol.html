<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.nginx.org/blog/native-support-for-acme-protocol">Original</a>
    <h1>Nginx Introduces Native Support for Acme Protocol</h1>
    
    <div id="readability-page-1" class="page"><div>
<p>We are very excited to announce the preview release of <a href="https://github.com/nginx/nginx-acme" target="_blank" rel="noreferrer noopener">ACME support in NGINX</a>. The implementation introduces a new module <code>ngx_http_acme_module</code> that provides built-in directives for requesting, installing, and renewing certificates directly from NGINX configuration. The ACME support leverages our <a href="https://github.com/nginx/ngx-rust" target="_blank" rel="noreferrer noopener">NGINX-Rust SDK</a> and is available as a Rust-based dynamic module for both NGINX Open Source users as well as enterprise NGINX One customers using NGINX Plus.</p>



<p>NGINX’s native support for ACME brings a variety of benefits that simplify and enhance the overall SSL/TLS certificate management process. Being able to <a href="https://nginx.org/en/docs/http/ngx_http_acme_module.html" data-type="link" data-id="https://nginx.org/en/docs/http/ngx_http_acme_module.html" target="_blank" rel="noreferrer noopener">configure ACME directly using NGINX directives</a> drastically reduces manual errors and eliminates much of the ongoing overhead traditionally associated with managing SSL/TLS certificates. It also reduces reliance on external tools like Certbot, creating a more secure and streamlined workflow with fewer vulnerabilities and a smaller attack surface. Additionally, unlike existing external tools which can be prone to platform-specific limitations, a native implementation ensures greater portability and platform independence, making it a versatile and reliable solution for modern, evolving web infrastructures. </p>



<h2>What is ACME? </h2>



<p>The <a href="https://www.rfc-editor.org/rfc/rfc8555.html" data-type="link" data-id="https://www.rfc-editor.org/rfc/rfc8555.html" target="_blank" rel="noreferrer noopener">ACME protocol</a> (Automated Certificate Management Environment) is a communications protocol primarily designed to automate the process of issuing, validating, renewing, and revoking digital security certificates (e.g., SSL/TLS certificates). It allows clients to interact with a Certificate Authority (CA) without requiring manual intervention, simplifying the deployment of secure websites and other services that rely on HTTPS. </p>



<p>The ACME protocol was initially developed by the <strong>Internet Security Research Group (ISRG)</strong> as part of the <strong>Let’s Encrypt</strong> initiative in late 2015, offering free, automated SSL/TLS certificates. Before ACME, obtaining TLS certificates was often a manual, costly, and error-prone process. ACME revolutionized this by providing open-source, automated workflows for certificate management. </p>



<p><a href="https://datatracker.ietf.org/doc/html/rfc8555/" target="_blank" rel="noreferrer noopener">ACMEv2</a> is an updated version of the original ACME protocol. It added support for new challenges, expanded authentication methods, wildcard certificates, and other enhancements to improve flexibility and security. </p>



<h2>NGINX ACME Workflow </h2>



<p>The ACME workflow with NGINX can be broken into 4 steps:</p>



<ol>
<li>Setting up the ACME Server</li>



<li>Allocating Shared Memory</li>



<li>Configuring Challenges</li>



<li>Certificate Issue and Renewal</li>
</ol>



<h3>Setting up the ACME Server</h3>



<p>To enable ACME functionality, the first (and the only mandatory step) is to specify the directory URL of the ACME server.  </p>



<p>Additional information regarding how to contact the client in case of certificate-related issues or where to store module data can also be provided, as shown. </p>



<pre><code><mark>acme_issuer</mark> <strong>letsencrypt</strong> { 
 

    <mark>uri</mark>         https://acme-v02.api.letsencrypt.org/directory; 

    # <mark>contact</mark>   admin@example.test; 

    <mark>state_path</mark>  /var/cache/nginx/acme-letsencrypt; 

 
    accept_terms_of_service; 
}</code></pre>



<h3>Allocating Shared Memory </h3>



<p>The implementation also provides an optional directive <code>acme_shared_zone</code> to store certificates, private keys, and challenge data for all the configured certificate issuers. The zone has a default size of 256K, which can be increased as required. </p>



<pre><code><mark>acme_shared_zone</mark> zone=acme_shared:1M; </code></pre>



<h3>Configuring Challenges </h3>



<p>The current preview implementation supports HTTP-01 challenges to verify the client’s domain ownership. It requires defining a listener on port 80 in the nginx configuration to process ACME HTTP-01 challenges: </p>



<pre><code><mark>server</mark> { 

    # listener on port 80 is required to process ACME HTTP-01 challenges 
    <mark>listen</mark> <mark>80</mark>; 

    <mark>location</mark> / { 

        #Serve a basic 404 response while listening for challenges 
       <mark> return 404</mark>; 
    } 
}</code></pre>



<p>Support for other challenges (TLS-ALPN, DNS -01) is planned in <a href="https://github.com/nginx/nginx-acme/issues" target="_blank" rel="noreferrer noopener">future</a>.  </p>



<h3>Certificate Issuance and Renewal</h3>



<p>Use the <code>acme_certificate</code> directive in the respective server block in your NGINX configuration to automate the issuance/renewal of TLS certificates. The directive requires the list of identifiers(domains) for which the certificates need to be dynamically issued. The list of identifiers can be defined using the <a href="https://nginx.org/en/docs/http/server_names.html" target="_blank" rel="noreferrer noopener"><code>server_name</code></a> directive.  </p>



<p>The snippet below shows how to configure the server block for issuing/renewing SSL certificate for “.example.domain” domain using the previously defined <code>letsencrypt</code> ACME certificate issuer. </p>



<pre><code><mark>server</mark> { 

    <mark>listen</mark> 443 ssl; 

    <mark>server_name</mark>  .example.com; 

    <strong><mark>acme_certificate</mark> letsencrypt; </strong>

    <mark>ssl_certificate</mark>       $acme_certificate; 
    <mark>ssl_certificate_key</mark>   $acme_certificate_key; 
    <mark>ssl_certificate_cache</mark> max=2; 
}</code></pre>



<p>Note that not all values accepted by <code><a href="https://nginx.org/en/docs/http/server_names.html" target="_blank" rel="noreferrer noopener">server_name</a></code> directive are valid identifiers. Wildcards are not supported in this initial implementation. Regular expressions are not supported. </p>



<p>Use the <code>$acme_certificate</code> and <code>$acme_certificate_key</code> variables in the module to pass the SSL certificate and key information for the associated domain.  </p>



<h2>Why It All Matters? </h2>



<p>The rapid rise of HTTPS adoption globally has been driven largely by ACME protocol, making secure web connections a standard expectation. ACME modernizes the way TLS/SSL certificates are issued, renewed, and managed by automating the entire process, eliminating manual effort and reducing costs associated with certificate lifecycle management. Beyond the web, the growth of IoT devices and edge computing positions ACME to play a critical role in automating security for APIs, devices, and edge compute infrastructures. </p>



<p>NGINX’s native support for ACME underscores the protocol’s importance for the future of web security, automation, and scalability. ACME is expected to remain the backbone of certificate automation across the internet and beyond for foreseeable future. With security becoming a baseline for web standards, we’ll continue seeing requirements for evolving deployment models and security needs, pushing improvements in ACME.  </p>



<p>Looking ahead, we are committed to evolving our implementation to align with the needs of our users and customers, meeting them where they are today and building capabilities for where they are headed in the future. </p>



<h2>How to Get Started</h2>



<p><a href="https://github.com/nginx/nginx-acme" target="_blank" rel="noreferrer noopener">Get started</a> with the native ACME implementation in NGINX today. If you are an open source user, pre-built packages are available <a href="https://nginx.org/en/linux_packages.html" target="_blank" rel="noreferrer noopener">here</a>. If you are an enterprise NGINX One customer using NGINX Plus, pre-built packages are available as a F5 supported <a href="https://docs.nginx.com/nginx/admin-guide/dynamic-modules/dynamic-modules/" target="_blank" rel="noreferrer noopener">dynamic module</a>. For more information on the module, refer to the <a href="https://nginx.org/en/docs/http/ngx_http_acme_module.html" target="_blank" rel="noreferrer noopener">NGINX Docs</a>. </p>



<h3>Community Feedback </h3>



<p>As always, your feedback is invaluable in shaping the future development of NGINX. If you have suggestions, encounter issues, or want to request additional features, please share them through <a href="https://github.com/nginx/nginx-acme/issues" target="_blank" rel="noreferrer noopener">GitHub Issues</a>. We can’t wait for you to try it out.</p>



<figure><a href="https://community.nginx.org" target="_blank" rel=" noreferrer noopener"><img decoding="async" width="1024" height="261" src="https://nginxblog-8de1046ff5a84f2c-endpoint.azureedge.net/blobnginxbloga72cde487e/wp-content/uploads/2024/09/Forum-CTA-banner-v1-1024x261.png" alt="NGINX Community Forum" srcset="https://nginxblog-8de1046ff5a84f2c-endpoint.azureedge.net/blobnginxbloga72cde487e/wp-content/uploads/2024/09/Forum-CTA-banner-v1-1024x261.png 1024w, https://nginxblog-8de1046ff5a84f2c-endpoint.azureedge.net/blobnginxbloga72cde487e/wp-content/uploads/2024/09/Forum-CTA-banner-v1-300x77.png 300w, https://nginxblog-8de1046ff5a84f2c-endpoint.azureedge.net/blobnginxbloga72cde487e/wp-content/uploads/2024/09/Forum-CTA-banner-v1-768x196.png 768w, https://nginxblog-8de1046ff5a84f2c-endpoint.azureedge.net/blobnginxbloga72cde487e/wp-content/uploads/2024/09/Forum-CTA-banner-v1.png 1363w" sizes="(max-width: 1024px) 100vw, 1024px"/></a></figure>
</div></div>
  </body>
</html>
