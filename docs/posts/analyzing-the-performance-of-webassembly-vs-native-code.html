<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://ar5iv.labs.arxiv.org/html/1901.09056">Original</a>
    <h1>Analyzing the Performance of WebAssembly vs. Native Code</h1>
    
    <div id="readability-page-1" class="page"><div>
<div>
<article>
<p id="p1.1">spacing=nonfrench

 




























<span id="p1.1.1" lang="en"></span></p>



<div>
<h6>Abstract</h6>
<p id="id3.3"><span id="id3.3.3" lang="en">All major web browsers now support WebAssembly, a low-level bytecode
intended to serve as a compilation target for code written in
languages like C and C++. A key goal of WebAssembly is performance
parity with native code; previous work reports near parity, with many applications
compiled to WebAssembly running on average <math id="id1.1.1.m1.1" alttext="10\%" display="inline"><semantics id="id1.1.1.m1.1a"><mrow id="id1.1.1.m1.1.1" xref="id1.1.1.m1.1.1.cmml"><mn id="id1.1.1.m1.1.1.2" xref="id1.1.1.m1.1.1.2.cmml">10</mn><mo id="id1.1.1.m1.1.1.1" xref="id1.1.1.m1.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="id1.1.1.m1.1b"><apply id="id1.1.1.m1.1.1.cmml" xref="id1.1.1.m1.1.1"><csymbol cd="latexml" id="id1.1.1.m1.1.1.1.cmml" xref="id1.1.1.m1.1.1.1">percent</csymbol><cn type="integer" id="id1.1.1.m1.1.1.2.cmml" xref="id1.1.1.m1.1.1.2">10</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="id1.1.1.m1.1c">10\%</annotation></semantics></math> slower than native
code. However, this evaluation was limited to a suite of scientific
kernels, each consisting of roughly 100 lines of code. Running more
substantial applications was not possible because compiling code to
WebAssembly is only part of the puzzle: standard Unix APIs are not
available in the web browser environment. To address this challenge,
we build <span id="id3.3.3.1">Browsix-Wasm</span>, a significant extension
to <span id="id3.3.3.2">Browsix</span>¬†<cite>[<a href="#bib.bib29" title="">29</a>]</cite> that, for the first time, makes
it possible to run unmodified WebAssembly-compiled Unix applications
directly inside the browser. We then use <span id="id3.3.3.3">Browsix-Wasm</span> to conduct the
first large-scale evaluation of the performance of WebAssembly
vs. native. Across the SPEC CPU suite of benchmarks, we find a
substantial performance gap: applications compiled to WebAssembly run
slower by an average of 45% (Firefox) to 55% (Chrome), with peak
slowdowns of <math id="id2.2.2.m2.1" alttext="2.08\times" display="inline"><semantics id="id2.2.2.m2.1a"><mrow id="id2.2.2.m2.1b"><mn id="id2.2.2.m2.1.1">2.08</mn><mo lspace="0.222em" id="id2.2.2.m2.1.2">√ó</mo></mrow><annotation encoding="application/x-tex" id="id2.2.2.m2.1c">2.08\times</annotation></semantics></math> (Firefox) and <math id="id3.3.3.m3.1" alttext="2.5\times" display="inline"><semantics id="id3.3.3.m3.1a"><mrow id="id3.3.3.m3.1b"><mn id="id3.3.3.m3.1.1">2.5</mn><mo lspace="0.222em" id="id3.3.3.m3.1.2">√ó</mo></mrow><annotation encoding="application/x-tex" id="id3.3.3.m3.1c">2.5\times</annotation></semantics></math> (Chrome). We
identify the causes of this performance degradation, some of which are
due to missing optimizations and code generation issues, while others
are inherent to the WebAssembly platform.</span></p>
</div>
<section id="S1" lang="en">
<h2>
<span>1 </span>Introduction</h2>

<p id="S1.p1.1">Web browsers have become the most popular platform for running user-facing
applications, and until recently, JavaScript was the only programming language
supported by all major web browsers. Beyond its many quirks
and pitfalls from the perspective of programming language design, JavaScript is
also notoriously difficult to compile efficiently¬†<cite>[<a href="#bib.bib12" title="">12</a>, <a href="#bib.bib17" title="">17</a>, <a href="#bib.bib31" title="">31</a>, <a href="#bib.bib30" title="">30</a>]</cite>. Applications
written in or compiled to JavaScript typically run much slower than
their native counterparts. To address this situation, a group of
browser vendors jointly developed <em id="S1.p1.1.1">WebAssembly</em>.</p>
<p id="S1.p2.1">WebAssembly is a low-level, statically typed language that does not require
garbage collection, and supports interoperability with JavaScript. The goal of
WebAssembly is to serve as a universal compiler target that can run in a
browser¬†<cite>[<a href="#bib.bib16" title="">16</a>, <a href="#bib.bib15" title="">15</a>, <a href="#bib.bib18" title="">18</a>]</cite>. Towards this end, WebAssembly is designed to be fast to compile
and run, to be portable across browsers and architectures, and to provide
formal guarantees of type and memory safety. Prior attempts at
running code at native speed in the
browser¬†<cite>[<a href="#bib.bib13" title="">13</a>, <a href="#bib.bib14" title="">14</a>, <a href="#bib.bib4" title="">4</a>, <a href="#bib.bib38" title="">38</a>]</cite>, which we discuss in related
work, do not satisfy all of these criteria.</p>
<p id="S1.p3.1">WebAssembly is now supported by all major
browsers¬†<cite>[<a href="#bib.bib34" title="">34</a>, <a href="#bib.bib8" title="">8</a>]</cite> and has been swiftly adopted by
several programming languages. There are now backends for C, C++, C#, Go, and
Rust¬†<cite>[<a href="#bib.bib39" title="">39</a>, <a href="#bib.bib24" title="">24</a>, <a href="#bib.bib2" title="">2</a>, <a href="#bib.bib1" title="">1</a>]</cite> that target
WebAssembly. A curated list currently includes more than a dozen
others¬†<cite>[<a href="#bib.bib10" title="">10</a>]</cite>. Today, code written in these languages can be
safely executed in browser sandboxes across any modern device once compiled to
WebAssembly.</p>
<p id="S1.p4.2">A major goal of WebAssembly is to be faster than JavaScript. For example, the paper
that introduced WebAssembly¬†<cite>[<a href="#bib.bib18" title="">18</a>]</cite> showed that when a C
program is compiled to WebAssembly instead of JavaScript (<span id="S1.p4.2.1">asm.js</span>), it runs 34%
faster in Google Chrome. That paper also showed that the performance of WebAssembly
is competitive with native code: of the 24 benchmarks evaluated, the running
time of seven benchmarks using WebAssembly is within 10% of native code, and
almost all of them are less than <math id="S1.p4.1.m1.1" alttext="2\times" display="inline"><semantics id="S1.p4.1.m1.1a"><mrow id="S1.p4.1.m1.1b"><mn id="S1.p4.1.m1.1.1">2</mn><mo lspace="0.222em" id="S1.p4.1.m1.1.2">√ó</mo></mrow><annotation encoding="application/x-tex" id="S1.p4.1.m1.1c">2\times</annotation></semantics></math> slower than native code.
Figure¬†<a href="#S1.F1" title="Figure 1 ‚Ä£ The Challenge of Benchmarking WebAssembly ‚Ä£ 1 Introduction ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>1</span></a> shows that WebAssembly implementations have
continuously improved with respect to these benchmarks.
In 2017, only seven benchmarks performed within 1.1<math id="S1.p4.2.m2.1" alttext="\times" display="inline"><semantics id="S1.p4.2.m2.1a"><mo id="S1.p4.2.m2.1.1" xref="S1.p4.2.m2.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S1.p4.2.m2.1b"><times id="S1.p4.2.m2.1.1.cmml" xref="S1.p4.2.m2.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S1.p4.2.m2.1c">\times</annotation></semantics></math> of native,
but by 2019, this number increased to 13.</p>
<p id="S1.p5.1">These results appear promising, but they beg the question: <em id="S1.p5.1.1">are these
24 benchmarks representative of WebAssembly‚Äôs intended use cases</em>?</p>
<section id="S1.SS0.SSS0.Px1">
<h5>The Challenge of Benchmarking WebAssembly</h5>

<p id="S1.SS0.SSS0.Px1.p1.1">The aforementioned suite of 24 benchmarks is the PolybenchC benchmark
suite¬†<cite>[<a href="#bib.bib5" title="">5</a>]</cite>, which is designed to measure the effect of
polyhedral loop optimizations in compilers. All the benchmarks in the
suite are small scientific computing kernels rather than full
applications (e.g., matrix multiplication and LU Decomposition); each is
roughly 100 LOC. While WebAssembly is designed to accelerate scientific
kernels on the Web, it is also explicitly designed for a much richer set
of full applications.</p>
<p id="S1.SS0.SSS0.Px1.p2.1">The WebAssembly documentation highlights several intended use
cases¬†<cite>[<a href="#bib.bib7" title="">7</a>]</cite>, including scientific kernels, image editing,
video editing, image recognition, scientific visualization, simulations,
programming language interpreters, virtual machines, and POSIX applications.
Therefore, WebAssembly‚Äôs strong performance on the scientific kernels in PolybenchC
do not imply that it will perform well given a different kind of application.</p>
<p id="S1.SS0.SSS0.Px1.p3.1">We argue that a more comprehensive evaluation of WebAssembly should rely on an
established benchmark suite of large programs, such as the SPEC CPU benchmark
suites. In fact, the SPEC CPU 2006 and 2017 suite of
benchmarks include several applications that fall under the intended use cases of
WebAssembly: eight benchmarks are scientific applications (e.g., <span id="S1.SS0.SSS0.Px1.p3.1.1">433.milc</span>,
<span id="S1.SS0.SSS0.Px1.p3.1.2">444.namd</span>, <span id="S1.SS0.SSS0.Px1.p3.1.3">447.dealII</span>, <span id="S1.SS0.SSS0.Px1.p3.1.4">450.soplex</span>, and
<span id="S1.SS0.SSS0.Px1.p3.1.5">470.lbm</span>), two benchmarks involve image and video processing
(<span id="S1.SS0.SSS0.Px1.p3.1.6">464.h264ref</span> and <span id="S1.SS0.SSS0.Px1.p3.1.7">453.povray</span>), and all of the benchmarks are POSIX
applications.</p>
<p id="S1.SS0.SSS0.Px1.p4.1">Unfortunately, it is not possible to simply compile a sophisticated
native program to WebAssembly. Native programs, including the programs in
the SPEC CPU suites, require operating system services, such as a
filesystem, synchronous I/O, and processes, which WebAssembly and the
browser do not provide. The SPEC benchmarking harness itself requires
a file system, a shell, the ability to spawn processes, and other Unix
facilities. To overcome these limitations when porting native
applications to the web, many programmers painstakingly modify their
programs to avoid or mimic missing operating system
services. Modifying well-known benchmarks, such as SPEC CPU, would not
only be time consuming but would also pose a serious threat to
validity.</p>
<figure id="S1.F1"><img src="https://ar5iv.labs.arxiv.org/html/1901.09056/assets/x1.png" id="S1.F1.g1" width="461" height="346" alt="Refer to caption"/>
<figcaption><span><span id="S1.F1.12.6.1">Figure 1</span>: </span><span id="S1.F1.10.5">Number of PolyBenchC benchmarks performing within
<math id="S1.F1.6.1.m1.1" alttext="x" display="inline"><semantics id="S1.F1.6.1.m1.1b"><mi id="S1.F1.6.1.m1.1.1" xref="S1.F1.6.1.m1.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="S1.F1.6.1.m1.1c"><ci id="S1.F1.6.1.m1.1.1.cmml" xref="S1.F1.6.1.m1.1.1">ùë•</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.F1.6.1.m1.1d">x</annotation></semantics></math><math id="S1.F1.7.2.m2.1" alttext="\times" display="inline"><semantics id="S1.F1.7.2.m2.1b"><mo id="S1.F1.7.2.m2.1.1" xref="S1.F1.7.2.m2.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S1.F1.7.2.m2.1c"><times id="S1.F1.7.2.m2.1.1.cmml" xref="S1.F1.7.2.m2.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S1.F1.7.2.m2.1d">\times</annotation></semantics></math> of native. In 2017¬†<cite>[<a href="#bib.bib18" title="">18</a>]</cite>,
seven benchmarks performed within 1.1<math id="S1.F1.8.3.m3.1" alttext="\times" display="inline"><semantics id="S1.F1.8.3.m3.1b"><mo id="S1.F1.8.3.m3.1.1" xref="S1.F1.8.3.m3.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S1.F1.8.3.m3.1c"><times id="S1.F1.8.3.m3.1.1.cmml" xref="S1.F1.8.3.m3.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S1.F1.8.3.m3.1d">\times</annotation></semantics></math> of native.
In April 2018, we found that 11 performed within 1.1<math id="S1.F1.9.4.m4.1" alttext="\times" display="inline"><semantics id="S1.F1.9.4.m4.1b"><mo id="S1.F1.9.4.m4.1.1" xref="S1.F1.9.4.m4.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S1.F1.9.4.m4.1c"><times id="S1.F1.9.4.m4.1.1.cmml" xref="S1.F1.9.4.m4.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S1.F1.9.4.m4.1d">\times</annotation></semantics></math> of native. In
May 2019, 13 performed with 1.1<math id="S1.F1.10.5.m5.1" alttext="\times" display="inline"><semantics id="S1.F1.10.5.m5.1b"><mo id="S1.F1.10.5.m5.1.1" xref="S1.F1.10.5.m5.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S1.F1.10.5.m5.1c"><times id="S1.F1.10.5.m5.1.1.cmml" xref="S1.F1.10.5.m5.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S1.F1.10.5.m5.1d">\times</annotation></semantics></math> of native.</span></figcaption>
</figure>
<p id="S1.SS0.SSS0.Px1.p5.1">The standard approach to running these applications today is to use
Emscripten, a toolchain for compiling C and C++ to
WebAssembly¬†<cite>[<a href="#bib.bib39" title="">39</a>]</cite>. Unfortunately, Emscripten only supports
the most trivial system calls and does not scale up to large-scale
applications. For example, to enable applications to use synchronous
I/O, the default Emscripten <span id="S1.SS0.SSS0.Px1.p5.1.1">MEMFS</span> filesystem loads the entire
filesystem image into memory before the program begins executing. For
SPEC, these files are too large to fit into memory.</p>
<p id="S1.SS0.SSS0.Px1.p6.1">A promising alternative is to use <span id="S1.SS0.SSS0.Px1.p6.1.1">Browsix</span>, a framework that enables
running unmodified, full-featured Unix applications in the
browser¬†<cite>[<a href="#bib.bib28" title="">28</a>, <a href="#bib.bib29" title="">29</a>]</cite>. <span id="S1.SS0.SSS0.Px1.p6.1.2">Browsix</span> implements
a Unix-compatible kernel in JavaScript, with full support for
processes, files, pipes, blocking I/O, and other Unix features.
Moreover, it includes a C/C++ compiler (based on Emscripten)
that allows programs to run in the browser
unmodified. The <span id="S1.SS0.SSS0.Px1.p6.1.3">Browsix</span> case studies include complex applications,
such as <span id="S1.SS0.SSS0.Px1.p6.1.4">L<span id="S1.SS0.SSS0.Px1.p6.1.4.1">a</span>T<span id="S1.SS0.SSS0.Px1.p6.1.4.2">e</span>X</span>, which runs entirely in the browser without any
source code modifications.</p>
<p id="S1.SS0.SSS0.Px1.p7.1">Unfortunately, <span id="S1.SS0.SSS0.Px1.p7.1.1">Browsix</span> is a JavaScript-only solution, since it was
built before the release of
WebAssembly. Moreover, <span id="S1.SS0.SSS0.Px1.p7.1.2">Browsix</span> suffers from high performance overhead,
which would be a significant confounder while benchmarking. Using <span id="S1.SS0.SSS0.Px1.p7.1.3">Browsix</span>,
it would be difficult to tease apart the poorly performing benchmarks
from performance degradation introduced by <span id="S1.SS0.SSS0.Px1.p7.1.4">Browsix</span>.</p>
</section>
<section id="S1.SSx1">
<h3>Contributions</h3>

<div id="S1.SSx1.p1">
<ul id="S1.I1">
<li id="S1.I1.i1">
<span>‚Ä¢</span> 
<p id="S1.I1.i1.p1.1"><span id="S1.I1.i1.p1.1.1">Browsix-Wasm<span id="S1.I1.i1.p1.1.1.1">:</span></span> We develop <span id="S1.I1.i1.p1.1.2">Browsix-Wasm</span>, a significant
extension to and enhancement of <span id="S1.I1.i1.p1.1.3">Browsix</span> that allows us to
compile Unix programs to WebAssembly and run them in the browser with
no modifications. In
addition to integrating functional extensions, <span id="S1.I1.i1.p1.1.4">Browsix-Wasm</span> incorporates performance optimizations that drastically improve its
performance, ensuring that CPU-intensive applications operate with
virtually no overhead imposed by <span id="S1.I1.i1.p1.1.5">Browsix-Wasm</span> (<math id="S1.I1.i1.p1.1.m1.1" alttext="\S\ref{sec:browsix_wasm}" display="inline"><semantics id="S1.I1.i1.p1.1.m1.1a"><mrow id="S1.I1.i1.p1.1.m1.1.1" xref="S1.I1.i1.p1.1.m1.1.1.cmml"><mi mathvariant="normal" id="S1.I1.i1.p1.1.m1.1.1.2" xref="S1.I1.i1.p1.1.m1.1.1.2.cmml">¬ß</mi><mo lspace="0em" rspace="0em" id="S1.I1.i1.p1.1.m1.1.1.1" xref="S1.I1.i1.p1.1.m1.1.1.1.cmml">‚Äã</mo><mtext id="S1.I1.i1.p1.1.m1.1.1.3" xref="S1.I1.i1.p1.1.m1.1.1.3c.cmml"><a href="#S2" title="2 From Browsix to Browsix-Wasm ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>2</span></a></mtext></mrow><annotation-xml encoding="MathML-Content" id="S1.I1.i1.p1.1.m1.1b"><apply id="S1.I1.i1.p1.1.m1.1.1.cmml" xref="S1.I1.i1.p1.1.m1.1.1"><times id="S1.I1.i1.p1.1.m1.1.1.1.cmml" xref="S1.I1.i1.p1.1.m1.1.1.1"></times><ci id="S1.I1.i1.p1.1.m1.1.1.2.cmml" xref="S1.I1.i1.p1.1.m1.1.1.2">¬ß</ci><ci id="S1.I1.i1.p1.1.m1.1.1.3c.cmml" xref="S1.I1.i1.p1.1.m1.1.1.3"><mtext id="S1.I1.i1.p1.1.m1.1.1.3.cmml" xref="S1.I1.i1.p1.1.m1.1.1.3"><a href="#S2" title="2 From Browsix to Browsix-Wasm ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>2</span></a></mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.I1.i1.p1.1.m1.1c">\S\ref{sec:browsix_wasm}</annotation></semantics></math>).</p>
</li>
<li id="S1.I1.i2">
<span>‚Ä¢</span> 
<p id="S1.I1.i2.p1.1"><span id="S1.I1.i2.p1.1.1">Browsix-SPEC<span id="S1.I1.i2.p1.1.1.1">:</span></span> We develop <span id="S1.I1.i2.p1.1.2">Browsix-SPEC</span>, a harness
that extends <span id="S1.I1.i2.p1.1.3">Browsix-Wasm</span> to allow automated collection of detailed
timing and hardware on-chip performance counter information in order
to perform detailed measurements of application performance (<math id="S1.I1.i2.p1.1.m1.1" alttext="\S\ref{sec:system:bench-setup}" display="inline"><semantics id="S1.I1.i2.p1.1.m1.1a"><mrow id="S1.I1.i2.p1.1.m1.1.1" xref="S1.I1.i2.p1.1.m1.1.1.cmml"><mi mathvariant="normal" id="S1.I1.i2.p1.1.m1.1.1.2" xref="S1.I1.i2.p1.1.m1.1.1.2.cmml">¬ß</mi><mo lspace="0em" rspace="0em" id="S1.I1.i2.p1.1.m1.1.1.1" xref="S1.I1.i2.p1.1.m1.1.1.1.cmml">‚Äã</mo><mtext id="S1.I1.i2.p1.1.m1.1.1.3" xref="S1.I1.i2.p1.1.m1.1.1.3c.cmml"><a href="#S3" title="3 Browsix-SPEC ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>3</span></a></mtext></mrow><annotation-xml encoding="MathML-Content" id="S1.I1.i2.p1.1.m1.1b"><apply id="S1.I1.i2.p1.1.m1.1.1.cmml" xref="S1.I1.i2.p1.1.m1.1.1"><times id="S1.I1.i2.p1.1.m1.1.1.1.cmml" xref="S1.I1.i2.p1.1.m1.1.1.1"></times><ci id="S1.I1.i2.p1.1.m1.1.1.2.cmml" xref="S1.I1.i2.p1.1.m1.1.1.2">¬ß</ci><ci id="S1.I1.i2.p1.1.m1.1.1.3c.cmml" xref="S1.I1.i2.p1.1.m1.1.1.3"><mtext id="S1.I1.i2.p1.1.m1.1.1.3.cmml" xref="S1.I1.i2.p1.1.m1.1.1.3"><a href="#S3" title="3 Browsix-SPEC ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>3</span></a></mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.I1.i2.p1.1.m1.1c">\S\ref{sec:system:bench-setup}</annotation></semantics></math>).</p>
</li>
<li id="S1.I1.i3">
<span>‚Ä¢</span> 
<p id="S1.I1.i3.p1.4"><span id="S1.I1.i3.p1.4.1">Performance Analysis of WebAssembly:</span> Using
<span id="S1.I1.i3.p1.4.2">Browsix-Wasm</span> and <span id="S1.I1.i3.p1.4.3">Browsix-SPEC</span>, we conduct the first comprehensive
performance analysis of WebAssembly using the SPEC
CPU benchmark suite (both 2006 and 2017). This evaluation confirms
that WebAssembly does run faster than JavaScript (on average 1.3<math id="S1.I1.i3.p1.1.m1.1" alttext="\times" display="inline"><semantics id="S1.I1.i3.p1.1.m1.1a"><mo id="S1.I1.i3.p1.1.m1.1.1" xref="S1.I1.i3.p1.1.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S1.I1.i3.p1.1.m1.1b"><times id="S1.I1.i3.p1.1.m1.1.1.cmml" xref="S1.I1.i3.p1.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S1.I1.i3.p1.1.m1.1c">\times</annotation></semantics></math>
faster across SPEC CPU). However, contrary to prior work, we find
a substantial gap between
WebAssembly and native performance: code compiled to WebAssembly
runs on average 1.55<math id="S1.I1.i3.p1.2.m2.1" alttext="\times" display="inline"><semantics id="S1.I1.i3.p1.2.m2.1a"><mo id="S1.I1.i3.p1.2.m2.1.1" xref="S1.I1.i3.p1.2.m2.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S1.I1.i3.p1.2.m2.1b"><times id="S1.I1.i3.p1.2.m2.1.1.cmml" xref="S1.I1.i3.p1.2.m2.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S1.I1.i3.p1.2.m2.1c">\times</annotation></semantics></math> slower
in Chrome and
1.45<math id="S1.I1.i3.p1.3.m3.1" alttext="\times" display="inline"><semantics id="S1.I1.i3.p1.3.m3.1a"><mo id="S1.I1.i3.p1.3.m3.1.1" xref="S1.I1.i3.p1.3.m3.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S1.I1.i3.p1.3.m3.1b"><times id="S1.I1.i3.p1.3.m3.1.1.cmml" xref="S1.I1.i3.p1.3.m3.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S1.I1.i3.p1.3.m3.1c">\times</annotation></semantics></math> slower in Firefox than native code (<math id="S1.I1.i3.p1.4.m4.1" alttext="\S\ref{sec:eval}" display="inline"><semantics id="S1.I1.i3.p1.4.m4.1a"><mrow id="S1.I1.i3.p1.4.m4.1.1" xref="S1.I1.i3.p1.4.m4.1.1.cmml"><mi mathvariant="normal" id="S1.I1.i3.p1.4.m4.1.1.2" xref="S1.I1.i3.p1.4.m4.1.1.2.cmml">¬ß</mi><mo lspace="0em" rspace="0em" id="S1.I1.i3.p1.4.m4.1.1.1" xref="S1.I1.i3.p1.4.m4.1.1.1.cmml">‚Äã</mo><mtext id="S1.I1.i3.p1.4.m4.1.1.3" xref="S1.I1.i3.p1.4.m4.1.1.3c.cmml"><a href="#S4" title="4 Evaluation ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>4</span></a></mtext></mrow><annotation-xml encoding="MathML-Content" id="S1.I1.i3.p1.4.m4.1b"><apply id="S1.I1.i3.p1.4.m4.1.1.cmml" xref="S1.I1.i3.p1.4.m4.1.1"><times id="S1.I1.i3.p1.4.m4.1.1.1.cmml" xref="S1.I1.i3.p1.4.m4.1.1.1"></times><ci id="S1.I1.i3.p1.4.m4.1.1.2.cmml" xref="S1.I1.i3.p1.4.m4.1.1.2">¬ß</ci><ci id="S1.I1.i3.p1.4.m4.1.1.3c.cmml" xref="S1.I1.i3.p1.4.m4.1.1.3"><mtext id="S1.I1.i3.p1.4.m4.1.1.3.cmml" xref="S1.I1.i3.p1.4.m4.1.1.3"><a href="#S4" title="4 Evaluation ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>4</span></a></mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.I1.i3.p1.4.m4.1c">\S\ref{sec:eval}</annotation></semantics></math>).</p>
</li>
<li id="S1.I1.i4">
<span>‚Ä¢</span> 
<div id="S1.I1.i4.p1">
<p id="S1.I1.i4.p1.2"><span id="S1.I1.i4.p1.2.1">Root Cause Analysis and Advice for Implementers:</span> We
conduct a forensic analysis with the aid of performance counter
results to identify the root causes of this performance gap. We find
the following results:</p>
<ol id="S1.I1.i4.I1">
<li id="S1.I1.i4.I1.i1">
<span>1.</span> 
<p id="S1.I1.i4.I1.i1.p1.4">The instructions produced by WebAssembly have more
loads and stores than native code (2.02<math id="S1.I1.i4.I1.i1.p1.1.m1.1" alttext="\times" display="inline"><semantics id="S1.I1.i4.I1.i1.p1.1.m1.1a"><mo id="S1.I1.i4.I1.i1.p1.1.m1.1.1" xref="S1.I1.i4.I1.i1.p1.1.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S1.I1.i4.I1.i1.p1.1.m1.1b"><times id="S1.I1.i4.I1.i1.p1.1.m1.1.1.cmml" xref="S1.I1.i4.I1.i1.p1.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S1.I1.i4.I1.i1.p1.1.m1.1c">\times</annotation></semantics></math> more loads and
2.30<math id="S1.I1.i4.I1.i1.p1.2.m2.1" alttext="\times" display="inline"><semantics id="S1.I1.i4.I1.i1.p1.2.m2.1a"><mo id="S1.I1.i4.I1.i1.p1.2.m2.1.1" xref="S1.I1.i4.I1.i1.p1.2.m2.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S1.I1.i4.I1.i1.p1.2.m2.1b"><times id="S1.I1.i4.I1.i1.p1.2.m2.1.1.cmml" xref="S1.I1.i4.I1.i1.p1.2.m2.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S1.I1.i4.I1.i1.p1.2.m2.1c">\times</annotation></semantics></math> more stores in Chrome; 1.92<math id="S1.I1.i4.I1.i1.p1.3.m3.1" alttext="\times" display="inline"><semantics id="S1.I1.i4.I1.i1.p1.3.m3.1a"><mo id="S1.I1.i4.I1.i1.p1.3.m3.1.1" xref="S1.I1.i4.I1.i1.p1.3.m3.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S1.I1.i4.I1.i1.p1.3.m3.1b"><times id="S1.I1.i4.I1.i1.p1.3.m3.1.1.cmml" xref="S1.I1.i4.I1.i1.p1.3.m3.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S1.I1.i4.I1.i1.p1.3.m3.1c">\times</annotation></semantics></math> more loads and
2.16<math id="S1.I1.i4.I1.i1.p1.4.m4.1" alttext="\times" display="inline"><semantics id="S1.I1.i4.I1.i1.p1.4.m4.1a"><mo id="S1.I1.i4.I1.i1.p1.4.m4.1.1" xref="S1.I1.i4.I1.i1.p1.4.m4.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S1.I1.i4.I1.i1.p1.4.m4.1b"><times id="S1.I1.i4.I1.i1.p1.4.m4.1.1.cmml" xref="S1.I1.i4.I1.i1.p1.4.m4.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S1.I1.i4.I1.i1.p1.4.m4.1c">\times</annotation></semantics></math> more stores in Firefox). We attribute this to reduced
availability of registers, a sub-optimal register allocator, and a
failure to effectively exploit a wider range of x86 addressing
modes.</p>
</li>
<li id="S1.I1.i4.I1.i2">
<span>2.</span> 
<p id="S1.I1.i4.I1.i2.p1.1">The instructions produced by WebAssembly
have more branches, because WebAssembly requires several dynamic safety checks.</p>
</li>
<li id="S1.I1.i4.I1.i3">
<span>3.</span> 
<p id="S1.I1.i4.I1.i3.p1.1">Since WebAssembly generates more instructions, it leads to more L1 instruction cache misses.</p>
</li>
</ol>
<p id="S1.I1.i4.p1.1">We provide guidance to help WebAssembly
implementers focus their optimization efforts in order to close
the performance gap between WebAssembly and native code (<math id="S1.I1.i4.p1.1.m1.2" alttext="\S\ref{sec:ex},\ref{sec:spec}" display="inline"><semantics id="S1.I1.i4.p1.1.m1.2a"><mrow id="S1.I1.i4.p1.1.m1.2.2.1" xref="S1.I1.i4.p1.1.m1.2.2.2.cmml"><mrow id="S1.I1.i4.p1.1.m1.2.2.1.1" xref="S1.I1.i4.p1.1.m1.2.2.1.1.cmml"><mi mathvariant="normal" id="S1.I1.i4.p1.1.m1.2.2.1.1.2" xref="S1.I1.i4.p1.1.m1.2.2.1.1.2.cmml">¬ß</mi><mo lspace="0em" rspace="0em" id="S1.I1.i4.p1.1.m1.2.2.1.1.1" xref="S1.I1.i4.p1.1.m1.2.2.1.1.1.cmml">‚Äã</mo><mtext id="S1.I1.i4.p1.1.m1.2.2.1.1.3" xref="S1.I1.i4.p1.1.m1.2.2.1.1.3c.cmml"><a href="#S5" title="5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>5</span></a></mtext></mrow><mo id="S1.I1.i4.p1.1.m1.2.2.1.2" xref="S1.I1.i4.p1.1.m1.2.2.2.cmml">,</mo><mtext id="S1.I1.i4.p1.1.m1.1.1" xref="S1.I1.i4.p1.1.m1.1.1c.cmml"><a href="#S6" title="6 Performance Analysis ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>6</span></a></mtext></mrow><annotation-xml encoding="MathML-Content" id="S1.I1.i4.p1.1.m1.2b"><list id="S1.I1.i4.p1.1.m1.2.2.2.cmml" xref="S1.I1.i4.p1.1.m1.2.2.1"><apply id="S1.I1.i4.p1.1.m1.2.2.1.1.cmml" xref="S1.I1.i4.p1.1.m1.2.2.1.1"><times id="S1.I1.i4.p1.1.m1.2.2.1.1.1.cmml" xref="S1.I1.i4.p1.1.m1.2.2.1.1.1"></times><ci id="S1.I1.i4.p1.1.m1.2.2.1.1.2.cmml" xref="S1.I1.i4.p1.1.m1.2.2.1.1.2">¬ß</ci><ci id="S1.I1.i4.p1.1.m1.2.2.1.1.3c.cmml" xref="S1.I1.i4.p1.1.m1.2.2.1.1.3"><mtext id="S1.I1.i4.p1.1.m1.2.2.1.1.3.cmml" xref="S1.I1.i4.p1.1.m1.2.2.1.1.3"><a href="#S5" title="5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>5</span></a></mtext></ci></apply><ci id="S1.I1.i4.p1.1.m1.1.1c.cmml" xref="S1.I1.i4.p1.1.m1.1.1"><mtext id="S1.I1.i4.p1.1.m1.1.1.cmml" xref="S1.I1.i4.p1.1.m1.1.1"><a href="#S6" title="6 Performance Analysis ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>6</span></a></mtext></ci></list></annotation-xml><annotation encoding="application/x-tex" id="S1.I1.i4.p1.1.m1.2c">\S\ref{sec:ex},\ref{sec:spec}</annotation></semantics></math>).</p>
</div>
</li>
</ul>
</div>

<figure id="S1.F2"><img src="https://ar5iv.labs.arxiv.org/html/1901.09056/assets/x2.png" id="S1.F2.g1" width="484" height="150" alt="Refer to caption"/>
<figcaption><span><span id="S1.F2.3.1.1">Figure 2</span>: </span><span id="S1.F2.4.2">The framework for running SPEC benchmarks in browsers.
<span id="S1.F2.4.2.1">Bold</span> components are new or heavily modified
(¬ß<a href="#S3" title="3 Browsix-SPEC ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>3</span></a>).</span></figcaption>
</figure>
</section>
</section>
<section id="S2" lang="en">
<h2>
<span>2 </span>From <span id="S2.1.1">Browsix</span> to <span id="S2.2.2">Browsix-Wasm</span>
</h2>

<p id="S2.p1.1"><span id="S2.p1.1.1">Browsix</span>¬†<cite>[<a href="#bib.bib29" title="">29</a>]</cite> mimics a Unix kernel within the browser and
includes a compiler (based on Emscripten¬†<cite>[<a href="#bib.bib39" title="">39</a>, <a href="#bib.bib33" title="">33</a>]</cite>)
that compiles native programs to JavaScript. Together, they allow native
programs (in C, C++, and Go) to run in the browser and freely use operating
system services, such as pipes, processes, and a filesystem. However, <span id="S2.p1.1.2">Browsix</span> has two major limitations that we must overcome. First, <span id="S2.p1.1.3">Browsix</span> compiles
native code to JavaScript and not WebAssembly. Second, the <span id="S2.p1.1.4">Browsix</span> kernel has
significant performance issues. In particular, several common system calls have
very high overhead in <span id="S2.p1.1.5">Browsix</span>, which makes it hard to compare the performance
of a program running in <span id="S2.p1.1.6">Browsix</span> to that of a program running natively. We address
these limitations by building a new in-browser kernel called <span id="S2.p1.1.7">Browsix-Wasm</span>,
which supports WebAssembly programs and eliminates the performance bottlenecks of
<span id="S2.p1.1.8">Browsix</span>.</p>
<section id="S2.SS0.SSS0.Px1">
<h5>Emscripten Runtime Modifications</h5>

<p id="S2.SS0.SSS0.Px1.p1.1"><span id="S2.SS0.SSS0.Px1.p1.1.1">Browsix</span> modifies the Emscripten compiler to allow processes (which run in
WebWorkers) to communicate with the <span id="S2.SS0.SSS0.Px1.p1.1.2">Browsix</span> kernel (which runs on the main
thread of a page). Since <span id="S2.SS0.SSS0.Px1.p1.1.3">Browsix</span> compiles native programs to JavaScript, this
is relatively straightforward: each process‚Äô memory is a buffer that is shared
with the kernel (a <span id="S2.SS0.SSS0.Px1.p1.1.4">SharedArrayBuffer</span>), thus system calls can directly
read and write process memory. However, this approach has two significant
drawbacks. First, it precludes growing the heap on-demand; the shared memory
must be sized large enough to meet the high-water-mark heap size of the
application for the entire life of the process. Second, JavaScript contexts
(like the main context and each web worker context) have a fixed limit on their
heap sizes, which is currently approximately 2.2 GB in Google
Chrome¬†<cite>[<a href="#bib.bib6" title="">6</a>]</cite>. This cap imposes a serious limitation on running
multiple processes: if each process reserves a 500 MB heap, <span id="S2.SS0.SSS0.Px1.p1.1.5">Browsix</span> would only
be able to run at most four concurrent processes.
A deeper problem is that WebAssembly memory cannot be shared across WebWorkers and
does not support the <span id="S2.SS0.SSS0.Px1.p1.1.6">Atomic</span> API, which <span id="S2.SS0.SSS0.Px1.p1.1.7">Browsix</span> processes use to wait
for system calls.</p>
<p id="S2.SS0.SSS0.Px1.p2.1"><span id="S2.SS0.SSS0.Px1.p2.1.1">Browsix-Wasm</span> uses a different approach to process-kernel communication that is
also faster than the <span id="S2.SS0.SSS0.Px1.p2.1.2">Browsix</span> approach. <span id="S2.SS0.SSS0.Px1.p2.1.3">Browsix-Wasm</span> modifies the Emscripten runtime
system to create an auxiliary buffer (of 64MB) for each process that is shared with the
kernel, but is distinct from process memory. Since this auxiliary buffer
is a <span id="S2.SS0.SSS0.Px1.p2.1.4">SharedArrayBuffer</span> the <span id="S2.SS0.SSS0.Px1.p2.1.5">Browsix-Wasm</span> process and kernel
can use <span id="S2.SS0.SSS0.Px1.p2.1.6">Atomic</span> API for communication.
When a system call references
strings or buffers in the process‚Äôs heap (e.g., <span id="S2.SS0.SSS0.Px1.p2.1.7">writev</span> or
<span id="S2.SS0.SSS0.Px1.p2.1.8">stat</span>), its runtime system copies data from the process memory to the
shared buffer and sends a message to the kernel with locations of the copied
data in auxiliary memory.
Similarly, when a system call writes data to the auxiliary
buffer (e.g., <span id="S2.SS0.SSS0.Px1.p2.1.9">read</span>), its runtime system copies the data from
the shared buffer to the process memory at the memory specified.
Moreover, if a system call specifies a buffer in process memory
for the kernel to write to (e.g., <span id="S2.SS0.SSS0.Px1.p2.1.10">read</span>), the runtime allocates a
corresponding buffer in auxiliary memory and passes it to the kernel.
In case the system call is either reading
or writing data of size more than 64MB, <span id="S2.SS0.SSS0.Px1.p2.1.11">Browsix-Wasm</span> divides this call into
several calls such that each call only reads or writes at maximum 64MB
of data. The cost of these memory copy operations is dwarfed by the overall cost of
the system call invocation, which involves sending a message between process
and kernel JavaScript contexts. We show in ¬ß<a href="#S4.SS2.SSS1" title="4.2.1 Browsix-Wasm Overhead ‚Ä£ 4.2 SPEC Benchmarks ‚Ä£ 4 Evaluation ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>4.2.1</span></a> that
<span id="S2.SS0.SSS0.Px1.p2.1.12">Browsix-Wasm</span> has negligible overhead.</p>
</section>
<section id="S2.SS0.SSS0.Px2">
<h5>Performance Optimization</h5>

<p id="S2.SS0.SSS0.Px2.p1.1">While building <span id="S2.SS0.SSS0.Px2.p1.1.1">Browsix-Wasm</span> and doing our preliminary performance evaluation,
we discovered several performance issues in parts of the <span id="S2.SS0.SSS0.Px2.p1.1.2">Browsix</span> kernel.
Left unresolved, these performance issues would be a threat to the validity
of a performance comparison between WebAssembly and native code.
The most serious case was in the shared filesystem
component included with <span id="S2.SS0.SSS0.Px2.p1.1.3">Browsix</span>/<span id="S2.SS0.SSS0.Px2.p1.1.4">Browsix-Wasm</span>, <span id="S2.SS0.SSS0.Px2.p1.1.5">BrowserFS</span>. Originally,
on each append operation on a file, <span id="S2.SS0.SSS0.Px2.p1.1.6">BrowserFS</span> would allocate a new,
larger buffer, copying the previous and new contents into the new
buffer. Small appends could impose substantial performance
degradation. Now, whenever a buffer backing a file requires additional
space, <span id="S2.SS0.SSS0.Px2.p1.1.7">BrowserFS</span> grows the buffer by at least 4 KB. This change
alone decreased the time the <span id="S2.SS0.SSS0.Px2.p1.1.8">464.h264ref</span> benchmark spent in
<span id="S2.SS0.SSS0.Px2.p1.1.9">Browsix</span> from 25 seconds to under 1.5 seconds. We made a series of
improvements that reduce overhead throughout <span id="S2.SS0.SSS0.Px2.p1.1.10">Browsix-Wasm</span>. Similar, if
less dramatic, improvements were made to reduce the number of
allocations and the amount of copying in the kernel implementation of
pipes.</p>
</section>
</section>
<section id="S3" lang="en">
<h2>
<span>3 </span><span id="S3.1.1">Browsix-SPEC</span>
</h2>

<p id="S3.p1.1">To reliably execute WebAssembly benchmarks while capturing performance counter data, we developed <span id="S3.p1.1.1">Browsix-SPEC</span>.
<span id="S3.p1.1.2">Browsix-SPEC</span> works with <span id="S3.p1.1.3">Browsix-Wasm</span> to manage spawning browser instances, serving benchmark assets (e.g., the compiled WebAssembly programs and test inputs), spawning <span id="S3.p1.1.4">perf</span> processes to record performance counter data, and validating benchmark outputs.</p>
<p id="S3.p2.1">We use <span id="S3.p2.1.1">Browsix-SPEC</span> to run three benchmark suites to evaluate WebAssembly‚Äôs performance: SPEC CPU2006, SPEC CPU2017, and PolyBenchC.
These benchmarks are compiled to native code using Clang 4.0, and WebAssembly using <span id="S3.p2.1.2">Browsix-Wasm</span>.
We made no modifications to Chrome or Firefox, and the browsers are run with their standard sandboxing and isolation features enabled.
<span id="S3.p2.1.3">Browsix-Wasm</span> is built on top of standard web platform features and requires no direct access to host resources ‚Äì instead, benchmarks make standard HTTP requests to <span id="S3.p2.1.4">Browsix-SPEC</span>.</p>
<section id="S3.SS1">
<h3>
<span>3.1 </span><span id="S3.SS1.1.1">Browsix-SPEC</span> Benchmark Execution</h3>

<p id="S3.SS1.p1.1">Figure¬†<a href="#S1.F2" title="Figure 2 ‚Ä£ Contributions ‚Ä£ 1 Introduction ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>2</span></a> illustrates the key pieces of <span id="S3.SS1.p1.1.1">Browsix-SPEC</span> in play when running a benchmark, such as <span id="S3.SS1.p1.1.2">401.bzip2</span> in Chrome.
First (1), the <span id="S3.SS1.p1.1.3">Browsix-SPEC</span> benchmark harness launches a new browser instance using a WebBrowser automation tool, Selenium.
(2) The browser loads the page‚Äôs HTML, harness JS, and <span id="S3.SS1.p1.1.4">Browsix-Wasm</span> kernel JS over HTTP from the benchmark harness.
(3) The harness JS initializes the <span id="S3.SS1.p1.1.5">Browsix-Wasm</span> kernel and starts a new <span id="S3.SS1.p1.1.6">Browsix-Wasm</span> process executing the <span id="S3.SS1.p1.1.7">runspec</span> shell script (not shown in Figure <a href="#S1.F2" title="Figure 2 ‚Ä£ Contributions ‚Ä£ 1 Introduction ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>2</span></a>).
<span id="S3.SS1.p1.1.8">runspec</span> in turn spawns the standard <span id="S3.SS1.p1.1.9">specinvoke</span> (not shown), compiled from the C sources provided in SPEC 2006.
<span id="S3.SS1.p1.1.10">specinvoke</span> reads the <span id="S3.SS1.p1.1.11">speccmds.cmd</span> file from the <span id="S3.SS1.p1.1.12">Browsix-Wasm</span> filesystem and starts <span id="S3.SS1.p1.1.13">401.bzip2</span> with the appropriate arguments.
(4) After the WebAssembly module has been instantiated but before the benchmark‚Äôs <span id="S3.SS1.p1.1.14">main</span> function is invoked, the <span id="S3.SS1.p1.1.15">Browsix-Wasm</span> userspace runtime does an XHR request to <span id="S3.SS1.p1.1.16">Browsix-SPEC</span> to begin recording performance counter stats.
(5) The benchmark harness finds the Chrome thread corresponding to the Web Worker <span id="S3.SS1.p1.1.17">401.bzip2</span> process and attaches <span id="S3.SS1.p1.1.18">perf</span> to the process.
(6) At the end of the benchmark, the <span id="S3.SS1.p1.1.19">Browsix-Wasm</span> userspace runtime does a final XHR to the benchmark harness to end the <span id="S3.SS1.p1.1.20">perf record</span> process.
When the <span id="S3.SS1.p1.1.21">runspec</span> program exits (after potentially invoking the test binary several times), the harness JS POSTs (7) a <span id="S3.SS1.p1.1.22">tar</span> archive of the SPEC results directory to <span id="S3.SS1.p1.1.23">Browsix-SPEC</span>.
After <span id="S3.SS1.p1.1.24">Browsix-SPEC</span> receives the full results archive, it unpacks the results to a temporary directory and validates the output using the <span id="S3.SS1.p1.1.25">cmp</span> tool provided with SPEC 2006.
Finally, <span id="S3.SS1.p1.1.26">Browsix-SPEC</span> kills the browser process and records the benchmark results.</p>
<figure id="S3.F3">
<div>
<div>
<figure id="S3.F3.sf1"><img src="https://ar5iv.labs.arxiv.org/html/1901.09056/assets/x3.png" id="S3.F3.sf1.g1" width="461" height="346" alt="Refer to caption"/>
<figcaption><span><span id="S3.F3.sf1.2.1.1">(a)</span> </span><span id="S3.F3.sf1.3.2">
</span></figcaption>
</figure>
</div>
<div>
<figure id="S3.F3.sf2"><img src="https://ar5iv.labs.arxiv.org/html/1901.09056/assets/x4.png" id="S3.F3.sf2.g1" width="461" height="346" alt="Refer to caption"/>
<figcaption><span><span id="S3.F3.sf2.2.1.1">(b)</span> </span><span id="S3.F3.sf2.3.2">
</span></figcaption>
</figure>
</div>
</div>
<figcaption><span><span id="S3.F3.4.1.1">Figure 3</span>: </span><span id="S3.F3.5.2">The performance of the PolyBenchC and the SPEC CPU
benchmarks compiled to WebAssembly (executed in Chrome and Firefox)
relative to native, using <span id="S3.F3.5.2.1">Browsix-Wasm</span> and <span id="S3.F3.5.2.2">Browsix-SPEC</span>. The SPEC
CPU benchmarks exhibit higher overhead overall than the PolyBenchC
suite, indicating a significant performance gap exists between
WebAssembly and native.</span></figcaption>
</figure>
</section>
</section>
<section id="S4" lang="en">
<h2>
<span>4 </span>Evaluation</h2>

<p id="S4.p1.1">We use <span id="S4.p1.1.1">Browsix-Wasm</span> and <span id="S4.p1.1.2">Browsix-SPEC</span> to evaluate the performance of WebAssembly
using three benchmark suites: SPEC CPU2006, SPEC CPU2017, and PolyBenchC. We
include PolybenchC benchmarks for comparison with the original WebAssembly
paper¬†<cite>[<a href="#bib.bib18" title="">18</a>]</cite>, but argue that these benchmarks do not represent typical
workloads. The SPEC benchmarks are representative and require <span id="S4.p1.1.3">Browsix-Wasm</span> to
run successfully. We run all benchmarks on a 6-Core Intel Xeon E5-1650 v3 CPU with
hyperthreading and 64 GB of RAM running Ubuntu 16.04 with Linux kernel v4.4.0.
We run all benchmarks using two state-of-the-art browsers: Google Chrome 74.0
and Mozilla Firefox 66.0. We compile benchmarks to native code using Clang
4.0 and
to WebAssembly using <span id="S4.p1.1.4">Browsix-Wasm</span> (which is based on Emscripten with Clang 4.0).
Each benchmark was executed five times. We report the average of all running
times and the standard error. The execution time measured is the difference
between wall clock time when the program starts, i.e. after WebAssembly JIT compilation
concludes, and when the program ends.</p>
<section id="S4.SS1">
<h3>
<span>4.1 </span>PolyBenchC Benchmarks</h3>

<p id="S4.SS1.p1.1">Haas et al.¬†<cite>[<a href="#bib.bib18" title="">18</a>]</cite> used PolybenchC to benchmark WebAssembly
implementations because the PolybenchC benchmarks do not make system calls.
As we have already argued, the PolybenchC benchmarks are small
scientific kernels that are typically used to benchmark polyhedral optimization
techniques, and do not represent larger applications. Nevertheless, it is still
valuable for us to run PolybenchC with <span id="S4.SS1.p1.1.1">Browsix-Wasm</span>, because it demonstrates
that our infrastructure for system calls does not have any overhead.
Figure¬†<a href="#S3.F3.sf1" title="In Figure 3 ‚Ä£ 3.1 Browsix-SPEC Benchmark Execution ‚Ä£ 3 Browsix-SPEC ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>3(a)</span></a> shows the execution
time of the PolyBenchC benchmarks in <span id="S4.SS1.p1.1.2">Browsix-Wasm</span> and when run natively.
We are able to reproduce the majority of the results from the original
WebAssembly paper¬†<cite>[<a href="#bib.bib18" title="">18</a>]</cite>. We find that
<span id="S4.SS1.p1.1.3">Browsix-Wasm</span> imposes a very low overhead: an average of 0.2% and a maximum of 1.2%.</p>
</section>
<section id="S4.SS2">
<h3>
<span>4.2 </span>SPEC Benchmarks</h3>

<p id="S4.SS2.p1.1">We now evaluate <span id="S4.SS2.p1.1.1">Browsix-Wasm</span> using the C/C++ benchmarks from SPEC CPU2006 and
SPEC CPU2017 (the new C/C++ benchmarks and the speed benchmarks), which use
system calls extensively. We exclude four data points that either do not
compile to WebAssembly or allocate more memory than
WebAssembly allows.
Table¬†<a href="#S4.T1" title="Table 1 ‚Ä£ 4.2 SPEC Benchmarks ‚Ä£ 4 Evaluation ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>1</span></a>
shows the absolute execution times of the SPEC benchmarks when running
with <span id="S4.SS2.p1.1.2">Browsix-Wasm</span> in both Chrome and Firefox, and when running natively.</p>
<p id="S4.SS2.p2.6">WebAssembly performs worse than native for all benchmarks except for <span id="S4.SS2.p2.6.1">429.mcf</span>
and <span id="S4.SS2.p2.6.2">433.milc</span>.
In Chrome, WebAssembly‚Äôs maximum overhead is
2.5<math id="S4.SS2.p2.1.m1.1" alttext="\times" display="inline"><semantics id="S4.SS2.p2.1.m1.1a"><mo id="S4.SS2.p2.1.m1.1.1" xref="S4.SS2.p2.1.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.1.m1.1b"><times id="S4.SS2.p2.1.m1.1.1.cmml" xref="S4.SS2.p2.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.1.m1.1c">\times</annotation></semantics></math> over native and 7 out of 15 benchmarks
have a running time within 1.5<math id="S4.SS2.p2.2.m2.1" alttext="\times" display="inline"><semantics id="S4.SS2.p2.2.m2.1a"><mo id="S4.SS2.p2.2.m2.1.1" xref="S4.SS2.p2.2.m2.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.2.m2.1b"><times id="S4.SS2.p2.2.m2.1.1.cmml" xref="S4.SS2.p2.2.m2.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.2.m2.1c">\times</annotation></semantics></math> of native.
In Firefox, WebAssembly is within 2.08<math id="S4.SS2.p2.3.m3.1" alttext="\times" display="inline"><semantics id="S4.SS2.p2.3.m3.1a"><mo id="S4.SS2.p2.3.m3.1.1" xref="S4.SS2.p2.3.m3.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.3.m3.1b"><times id="S4.SS2.p2.3.m3.1.1.cmml" xref="S4.SS2.p2.3.m3.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.3.m3.1c">\times</annotation></semantics></math> of native and performs within 1.5<math id="S4.SS2.p2.4.m4.1" alttext="\times" display="inline"><semantics id="S4.SS2.p2.4.m4.1a"><mo id="S4.SS2.p2.4.m4.1.1" xref="S4.SS2.p2.4.m4.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.4.m4.1b"><times id="S4.SS2.p2.4.m4.1.1.cmml" xref="S4.SS2.p2.4.m4.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.4.m4.1c">\times</annotation></semantics></math> of native for 7 out of 15 benchmarks.
On average, WebAssembly
is 1.55<math id="S4.SS2.p2.5.m5.1" alttext="\times" display="inline"><semantics id="S4.SS2.p2.5.m5.1a"><mo id="S4.SS2.p2.5.m5.1.1" xref="S4.SS2.p2.5.m5.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.5.m5.1b"><times id="S4.SS2.p2.5.m5.1.1.cmml" xref="S4.SS2.p2.5.m5.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.5.m5.1c">\times</annotation></semantics></math> slower than
native in Chrome, and 1.45<math id="S4.SS2.p2.6.m6.1" alttext="\times" display="inline"><semantics id="S4.SS2.p2.6.m6.1a"><mo id="S4.SS2.p2.6.m6.1.1" xref="S4.SS2.p2.6.m6.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.6.m6.1b"><times id="S4.SS2.p2.6.m6.1.1.cmml" xref="S4.SS2.p2.6.m6.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.6.m6.1c">\times</annotation></semantics></math> slower than native in Firefox.
Table¬†<a href="#S4.T2" title="Table 2 ‚Ä£ 4.2 SPEC Benchmarks ‚Ä£ 4 Evaluation ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>2</span></a> shows the time required to compile the SPEC
benchmarks using Clang and Chrome. (To the best of our knowledge, Firefox cannot
report WebAssembly compile times.) In all cases, the compilation time is negligible compared
to the execution time. However, the Clang compiler is orders of magnitude slower
than the WebAssembly compiler. Finally, note that Clang compiles benchmarks from C++
source code, whereas Chrome compiles WebAssembly, which is a simpler format than C++.</p>
<figure id="S4.T1">
<table id="S4.T1.49">
<tbody>
<tr id="S4.T1.49.50.1">
<td id="S4.T1.49.50.1.1"><span id="S4.T1.49.50.1.1.1">Benchmark</span></td>
<td id="S4.T1.49.50.1.2"><span id="S4.T1.49.50.1.2.1">Native</span></td>
<th id="S4.T1.49.50.1.3">
<span id="S4.T1.49.50.1.3.1"></span><span id="S4.T1.49.50.1.3.2"> <span id="S4.T1.49.50.1.3.2.1">
<span id="S4.T1.49.50.1.3.2.1.1">
<span id="S4.T1.49.50.1.3.2.1.1.1">
<span id="S4.T1.49.50.1.3.2.1.1.1.1"><span id="S4.T1.49.50.1.3.2.1.1.1.1.1">Google</span></span></span>
<span id="S4.T1.49.50.1.3.2.1.1.2">
<span id="S4.T1.49.50.1.3.2.1.1.2.1"><span id="S4.T1.49.50.1.3.2.1.1.2.1.1">Chrome</span></span></span>
</span></span><span id="S4.T1.49.50.1.3.2.2"></span></span>
</th>
<th id="S4.T1.49.50.1.4">
<span id="S4.T1.49.50.1.4.1"></span><span id="S4.T1.49.50.1.4.2"> <span id="S4.T1.49.50.1.4.2.1">
<span id="S4.T1.49.50.1.4.2.1.1">
<span id="S4.T1.49.50.1.4.2.1.1.1">
<span id="S4.T1.49.50.1.4.2.1.1.1.1"><span id="S4.T1.49.50.1.4.2.1.1.1.1.1">Mozilla</span></span></span>
<span id="S4.T1.49.50.1.4.2.1.1.2">
<span id="S4.T1.49.50.1.4.2.1.1.2.1"><span id="S4.T1.49.50.1.4.2.1.1.2.1.1">Firefox</span></span></span>
</span></span><span id="S4.T1.49.50.1.4.2.2"></span></span>
</th>
</tr>
<tr id="S4.T1.3.3">
<td id="S4.T1.3.3.4"><span id="S4.T1.3.3.4.1">401.bzip2</span></td>
<td id="S4.T1.1.1.1">
<span id="S4.T1.1.1.1.1">370 </span><math id="S4.T1.1.1.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.1.1.1.m1.1a"><mo mathsize="90%" id="S4.T1.1.1.1.m1.1.1" xref="S4.T1.1.1.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.1.1.1.m1.1b"><csymbol cd="latexml" id="S4.T1.1.1.1.m1.1.1.cmml" xref="S4.T1.1.1.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.1.1.1.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.1.1.1.2"> 0.6</span>
</td>
<td id="S4.T1.2.2.2">
<span id="S4.T1.2.2.2.1">864 </span><math id="S4.T1.2.2.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.2.2.2.m1.1a"><mo mathsize="90%" id="S4.T1.2.2.2.m1.1.1" xref="S4.T1.2.2.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.2.2.2.m1.1b"><csymbol cd="latexml" id="S4.T1.2.2.2.m1.1.1.cmml" xref="S4.T1.2.2.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.2.2.2.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.2.2.2.2"> 6.4</span>
</td>
<td id="S4.T1.3.3.3">
<span id="S4.T1.3.3.3.1">730 </span><math id="S4.T1.3.3.3.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.3.3.3.m1.1a"><mo mathsize="90%" id="S4.T1.3.3.3.m1.1.1" xref="S4.T1.3.3.3.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.3.3.3.m1.1b"><csymbol cd="latexml" id="S4.T1.3.3.3.m1.1.1.cmml" xref="S4.T1.3.3.3.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.3.3.3.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.3.3.3.2"> 1.3</span>
</td>
</tr>
<tr id="S4.T1.6.6">
<td id="S4.T1.6.6.4"><span id="S4.T1.6.6.4.1">429.mcf</span></td>
<td id="S4.T1.4.4.1">
<span id="S4.T1.4.4.1.1">221 </span><math id="S4.T1.4.4.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.4.4.1.m1.1a"><mo mathsize="90%" id="S4.T1.4.4.1.m1.1.1" xref="S4.T1.4.4.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.4.4.1.m1.1b"><csymbol cd="latexml" id="S4.T1.4.4.1.m1.1.1.cmml" xref="S4.T1.4.4.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.4.4.1.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.4.4.1.2"> 0.1</span>
</td>
<td id="S4.T1.5.5.2">
<span id="S4.T1.5.5.2.1">180 </span><math id="S4.T1.5.5.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.5.5.2.m1.1a"><mo mathsize="90%" id="S4.T1.5.5.2.m1.1.1" xref="S4.T1.5.5.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.5.5.2.m1.1b"><csymbol cd="latexml" id="S4.T1.5.5.2.m1.1.1.cmml" xref="S4.T1.5.5.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.5.5.2.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.5.5.2.2"> 0.9</span>
</td>
<td id="S4.T1.6.6.3">
<span id="S4.T1.6.6.3.1">184 </span><math id="S4.T1.6.6.3.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.6.6.3.m1.1a"><mo mathsize="90%" id="S4.T1.6.6.3.m1.1.1" xref="S4.T1.6.6.3.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.6.6.3.m1.1b"><csymbol cd="latexml" id="S4.T1.6.6.3.m1.1.1.cmml" xref="S4.T1.6.6.3.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.6.6.3.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.6.6.3.2"> 0.6</span>
</td>
</tr>
<tr id="S4.T1.9.9">
<td id="S4.T1.9.9.4"><span id="S4.T1.9.9.4.1">433.milc</span></td>
<td id="S4.T1.7.7.1">
<span id="S4.T1.7.7.1.1">375 </span><math id="S4.T1.7.7.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.7.7.1.m1.1a"><mo mathsize="90%" id="S4.T1.7.7.1.m1.1.1" xref="S4.T1.7.7.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.7.7.1.m1.1b"><csymbol cd="latexml" id="S4.T1.7.7.1.m1.1.1.cmml" xref="S4.T1.7.7.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.7.7.1.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.7.7.1.2"> 2.6</span>
</td>
<td id="S4.T1.8.8.2">
<span id="S4.T1.8.8.2.1">369 </span><math id="S4.T1.8.8.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.8.8.2.m1.1a"><mo mathsize="90%" id="S4.T1.8.8.2.m1.1.1" xref="S4.T1.8.8.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.8.8.2.m1.1b"><csymbol cd="latexml" id="S4.T1.8.8.2.m1.1.1.cmml" xref="S4.T1.8.8.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.8.8.2.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.8.8.2.2"> 0.5</span>
</td>
<td id="S4.T1.9.9.3">
<span id="S4.T1.9.9.3.1">378 </span><math id="S4.T1.9.9.3.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.9.9.3.m1.1a"><mo mathsize="90%" id="S4.T1.9.9.3.m1.1.1" xref="S4.T1.9.9.3.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.9.9.3.m1.1b"><csymbol cd="latexml" id="S4.T1.9.9.3.m1.1.1.cmml" xref="S4.T1.9.9.3.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.9.9.3.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.9.9.3.2"> 0.6</span>
</td>
</tr>
<tr id="S4.T1.12.12">
<td id="S4.T1.12.12.4"><span id="S4.T1.12.12.4.1">444.namd</span></td>
<td id="S4.T1.10.10.1">
<span id="S4.T1.10.10.1.1">271 </span><math id="S4.T1.10.10.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.10.10.1.m1.1a"><mo mathsize="90%" id="S4.T1.10.10.1.m1.1.1" xref="S4.T1.10.10.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.10.10.1.m1.1b"><csymbol cd="latexml" id="S4.T1.10.10.1.m1.1.1.cmml" xref="S4.T1.10.10.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.10.10.1.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.10.10.1.2"> 0.8</span>
</td>
<td id="S4.T1.11.11.2">
<span id="S4.T1.11.11.2.1">369 </span><math id="S4.T1.11.11.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.11.11.2.m1.1a"><mo mathsize="90%" id="S4.T1.11.11.2.m1.1.1" xref="S4.T1.11.11.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.11.11.2.m1.1b"><csymbol cd="latexml" id="S4.T1.11.11.2.m1.1.1.cmml" xref="S4.T1.11.11.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.11.11.2.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.11.11.2.2"> 9.1</span>
</td>
<td id="S4.T1.12.12.3">
<span id="S4.T1.12.12.3.1">373 </span><math id="S4.T1.12.12.3.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.12.12.3.m1.1a"><mo mathsize="90%" id="S4.T1.12.12.3.m1.1.1" xref="S4.T1.12.12.3.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.12.12.3.m1.1b"><csymbol cd="latexml" id="S4.T1.12.12.3.m1.1.1.cmml" xref="S4.T1.12.12.3.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.12.12.3.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.12.12.3.2"> 1.8</span>
</td>
</tr>
<tr id="S4.T1.15.15">
<td id="S4.T1.15.15.4"><span id="S4.T1.15.15.4.1">445.gobmk</span></td>
<td id="S4.T1.13.13.1">
<span id="S4.T1.13.13.1.1">352 </span><math id="S4.T1.13.13.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.13.13.1.m1.1a"><mo mathsize="90%" id="S4.T1.13.13.1.m1.1.1" xref="S4.T1.13.13.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.13.13.1.m1.1b"><csymbol cd="latexml" id="S4.T1.13.13.1.m1.1.1.cmml" xref="S4.T1.13.13.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.13.13.1.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.13.13.1.2"> 2.1</span>
</td>
<td id="S4.T1.14.14.2">
<span id="S4.T1.14.14.2.1">537 </span><math id="S4.T1.14.14.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.14.14.2.m1.1a"><mo mathsize="90%" id="S4.T1.14.14.2.m1.1.1" xref="S4.T1.14.14.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.14.14.2.m1.1b"><csymbol cd="latexml" id="S4.T1.14.14.2.m1.1.1.cmml" xref="S4.T1.14.14.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.14.14.2.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.14.14.2.2"> 0.8</span>
</td>
<td id="S4.T1.15.15.3">
<span id="S4.T1.15.15.3.1">549 </span><math id="S4.T1.15.15.3.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.15.15.3.m1.1a"><mo mathsize="90%" id="S4.T1.15.15.3.m1.1.1" xref="S4.T1.15.15.3.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.15.15.3.m1.1b"><csymbol cd="latexml" id="S4.T1.15.15.3.m1.1.1.cmml" xref="S4.T1.15.15.3.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.15.15.3.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.15.15.3.2"> 3.3</span>
</td>
</tr>
<tr id="S4.T1.18.18">
<td id="S4.T1.18.18.4"><span id="S4.T1.18.18.4.1">450.soplex</span></td>
<td id="S4.T1.16.16.1">
<span id="S4.T1.16.16.1.1">179 </span><math id="S4.T1.16.16.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.16.16.1.m1.1a"><mo mathsize="90%" id="S4.T1.16.16.1.m1.1.1" xref="S4.T1.16.16.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.16.16.1.m1.1b"><csymbol cd="latexml" id="S4.T1.16.16.1.m1.1.1.cmml" xref="S4.T1.16.16.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.16.16.1.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.16.16.1.2"> 3.7</span>
</td>
<td id="S4.T1.17.17.2">
<span id="S4.T1.17.17.2.1">265 </span><math id="S4.T1.17.17.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.17.17.2.m1.1a"><mo mathsize="90%" id="S4.T1.17.17.2.m1.1.1" xref="S4.T1.17.17.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.17.17.2.m1.1b"><csymbol cd="latexml" id="S4.T1.17.17.2.m1.1.1.cmml" xref="S4.T1.17.17.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.17.17.2.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.17.17.2.2"> 1.2</span>
</td>
<td id="S4.T1.18.18.3">
<span id="S4.T1.18.18.3.1">238 </span><math id="S4.T1.18.18.3.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.18.18.3.m1.1a"><mo mathsize="90%" id="S4.T1.18.18.3.m1.1.1" xref="S4.T1.18.18.3.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.18.18.3.m1.1b"><csymbol cd="latexml" id="S4.T1.18.18.3.m1.1.1.cmml" xref="S4.T1.18.18.3.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.18.18.3.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.18.18.3.2"> 0.5</span>
</td>
</tr>
<tr id="S4.T1.21.21">
<td id="S4.T1.21.21.4"><span id="S4.T1.21.21.4.1">453.povray</span></td>
<td id="S4.T1.19.19.1">
<span id="S4.T1.19.19.1.1">110 </span><math id="S4.T1.19.19.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.19.19.1.m1.1a"><mo mathsize="90%" id="S4.T1.19.19.1.m1.1.1" xref="S4.T1.19.19.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.19.19.1.m1.1b"><csymbol cd="latexml" id="S4.T1.19.19.1.m1.1.1.cmml" xref="S4.T1.19.19.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.19.19.1.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.19.19.1.2"> 1.9</span>
</td>
<td id="S4.T1.20.20.2">
<span id="S4.T1.20.20.2.1">275 </span><math id="S4.T1.20.20.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.20.20.2.m1.1a"><mo mathsize="90%" id="S4.T1.20.20.2.m1.1.1" xref="S4.T1.20.20.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.20.20.2.m1.1b"><csymbol cd="latexml" id="S4.T1.20.20.2.m1.1.1.cmml" xref="S4.T1.20.20.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.20.20.2.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.20.20.2.2"> 1.3</span>
</td>
<td id="S4.T1.21.21.3">
<span id="S4.T1.21.21.3.1">229 </span><math id="S4.T1.21.21.3.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.21.21.3.m1.1a"><mo mathsize="90%" id="S4.T1.21.21.3.m1.1.1" xref="S4.T1.21.21.3.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.21.21.3.m1.1b"><csymbol cd="latexml" id="S4.T1.21.21.3.m1.1.1.cmml" xref="S4.T1.21.21.3.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.21.21.3.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.21.21.3.2"> 1.5</span>
</td>
</tr>
<tr id="S4.T1.24.24">
<td id="S4.T1.24.24.4"><span id="S4.T1.24.24.4.1">458.sjeng</span></td>
<td id="S4.T1.22.22.1">
<span id="S4.T1.22.22.1.1">358 </span><math id="S4.T1.22.22.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.22.22.1.m1.1a"><mo mathsize="90%" id="S4.T1.22.22.1.m1.1.1" xref="S4.T1.22.22.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.22.22.1.m1.1b"><csymbol cd="latexml" id="S4.T1.22.22.1.m1.1.1.cmml" xref="S4.T1.22.22.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.22.22.1.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.22.22.1.2"> 1.4</span>
</td>
<td id="S4.T1.23.23.2">
<span id="S4.T1.23.23.2.1">602 </span><math id="S4.T1.23.23.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.23.23.2.m1.1a"><mo mathsize="90%" id="S4.T1.23.23.2.m1.1.1" xref="S4.T1.23.23.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.23.23.2.m1.1b"><csymbol cd="latexml" id="S4.T1.23.23.2.m1.1.1.cmml" xref="S4.T1.23.23.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.23.23.2.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.23.23.2.2"> 2.5</span>
</td>
<td id="S4.T1.24.24.3">
<span id="S4.T1.24.24.3.1">580 </span><math id="S4.T1.24.24.3.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.24.24.3.m1.1a"><mo mathsize="90%" id="S4.T1.24.24.3.m1.1.1" xref="S4.T1.24.24.3.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.24.24.3.m1.1b"><csymbol cd="latexml" id="S4.T1.24.24.3.m1.1.1.cmml" xref="S4.T1.24.24.3.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.24.24.3.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.24.24.3.2"> 2.0</span>
</td>
</tr>
<tr id="S4.T1.27.27">
<td id="S4.T1.27.27.4"><span id="S4.T1.27.27.4.1">462.libquantum</span></td>
<td id="S4.T1.25.25.1">
<span id="S4.T1.25.25.1.1">330 </span><math id="S4.T1.25.25.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.25.25.1.m1.1a"><mo mathsize="90%" id="S4.T1.25.25.1.m1.1.1" xref="S4.T1.25.25.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.25.25.1.m1.1b"><csymbol cd="latexml" id="S4.T1.25.25.1.m1.1.1.cmml" xref="S4.T1.25.25.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.25.25.1.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.25.25.1.2"> 0.8</span>
</td>
<td id="S4.T1.26.26.2">
<span id="S4.T1.26.26.2.1">444 </span><math id="S4.T1.26.26.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.26.26.2.m1.1a"><mo mathsize="90%" id="S4.T1.26.26.2.m1.1.1" xref="S4.T1.26.26.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.26.26.2.m1.1b"><csymbol cd="latexml" id="S4.T1.26.26.2.m1.1.1.cmml" xref="S4.T1.26.26.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.26.26.2.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.26.26.2.2"> 0.2</span>
</td>
<td id="S4.T1.27.27.3">
<span id="S4.T1.27.27.3.1">385 </span><math id="S4.T1.27.27.3.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.27.27.3.m1.1a"><mo mathsize="90%" id="S4.T1.27.27.3.m1.1.1" xref="S4.T1.27.27.3.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.27.27.3.m1.1b"><csymbol cd="latexml" id="S4.T1.27.27.3.m1.1.1.cmml" xref="S4.T1.27.27.3.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.27.27.3.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.27.27.3.2"> 0.8</span>
</td>
</tr>
<tr id="S4.T1.30.30">
<td id="S4.T1.30.30.4"><span id="S4.T1.30.30.4.1">464.h264ref</span></td>
<td id="S4.T1.28.28.1">
<span id="S4.T1.28.28.1.1">389 </span><math id="S4.T1.28.28.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.28.28.1.m1.1a"><mo mathsize="90%" id="S4.T1.28.28.1.m1.1.1" xref="S4.T1.28.28.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.28.28.1.m1.1b"><csymbol cd="latexml" id="S4.T1.28.28.1.m1.1.1.cmml" xref="S4.T1.28.28.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.28.28.1.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.28.28.1.2"> 0.7</span>
</td>
<td id="S4.T1.29.29.2">
<span id="S4.T1.29.29.2.1">807 </span><math id="S4.T1.29.29.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.29.29.2.m1.1a"><mo mathsize="90%" id="S4.T1.29.29.2.m1.1.1" xref="S4.T1.29.29.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.29.29.2.m1.1b"><csymbol cd="latexml" id="S4.T1.29.29.2.m1.1.1.cmml" xref="S4.T1.29.29.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.29.29.2.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.29.29.2.2"> 11.0</span>
</td>
<td id="S4.T1.30.30.3">
<span id="S4.T1.30.30.3.1">733 </span><math id="S4.T1.30.30.3.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.30.30.3.m1.1a"><mo mathsize="90%" id="S4.T1.30.30.3.m1.1.1" xref="S4.T1.30.30.3.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.30.30.3.m1.1b"><csymbol cd="latexml" id="S4.T1.30.30.3.m1.1.1.cmml" xref="S4.T1.30.30.3.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.30.30.3.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.30.30.3.2"> 2.4</span>
</td>
</tr>
<tr id="S4.T1.33.33">
<td id="S4.T1.33.33.4"><span id="S4.T1.33.33.4.1">470.lbm</span></td>
<td id="S4.T1.31.31.1">
<span id="S4.T1.31.31.1.1">209 </span><math id="S4.T1.31.31.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.31.31.1.m1.1a"><mo mathsize="90%" id="S4.T1.31.31.1.m1.1.1" xref="S4.T1.31.31.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.31.31.1.m1.1b"><csymbol cd="latexml" id="S4.T1.31.31.1.m1.1.1.cmml" xref="S4.T1.31.31.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.31.31.1.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.31.31.1.2"> 1.1</span>
</td>
<td id="S4.T1.32.32.2">
<span id="S4.T1.32.32.2.1">248 </span><math id="S4.T1.32.32.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.32.32.2.m1.1a"><mo mathsize="90%" id="S4.T1.32.32.2.m1.1.1" xref="S4.T1.32.32.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.32.32.2.m1.1b"><csymbol cd="latexml" id="S4.T1.32.32.2.m1.1.1.cmml" xref="S4.T1.32.32.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.32.32.2.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.32.32.2.2"> 0.3</span>
</td>
<td id="S4.T1.33.33.3">
<span id="S4.T1.33.33.3.1">249 </span><math id="S4.T1.33.33.3.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.33.33.3.m1.1a"><mo mathsize="90%" id="S4.T1.33.33.3.m1.1.1" xref="S4.T1.33.33.3.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.33.33.3.m1.1b"><csymbol cd="latexml" id="S4.T1.33.33.3.m1.1.1.cmml" xref="S4.T1.33.33.3.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.33.33.3.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.33.33.3.2"> 0.5</span>
</td>
</tr>
<tr id="S4.T1.36.36">
<td id="S4.T1.36.36.4"><span id="S4.T1.36.36.4.1">473.astar</span></td>
<td id="S4.T1.34.34.1">
<span id="S4.T1.34.34.1.1">299 </span><math id="S4.T1.34.34.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.34.34.1.m1.1a"><mo mathsize="90%" id="S4.T1.34.34.1.m1.1.1" xref="S4.T1.34.34.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.34.34.1.m1.1b"><csymbol cd="latexml" id="S4.T1.34.34.1.m1.1.1.cmml" xref="S4.T1.34.34.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.34.34.1.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.34.34.1.2"> 0.5</span>
</td>
<td id="S4.T1.35.35.2">
<span id="S4.T1.35.35.2.1">474 </span><math id="S4.T1.35.35.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.35.35.2.m1.1a"><mo mathsize="90%" id="S4.T1.35.35.2.m1.1.1" xref="S4.T1.35.35.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.35.35.2.m1.1b"><csymbol cd="latexml" id="S4.T1.35.35.2.m1.1.1.cmml" xref="S4.T1.35.35.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.35.35.2.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.35.35.2.2"> 3.5</span>
</td>
<td id="S4.T1.36.36.3">
<span id="S4.T1.36.36.3.1">408 </span><math id="S4.T1.36.36.3.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.36.36.3.m1.1a"><mo mathsize="90%" id="S4.T1.36.36.3.m1.1.1" xref="S4.T1.36.36.3.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.36.36.3.m1.1b"><csymbol cd="latexml" id="S4.T1.36.36.3.m1.1.1.cmml" xref="S4.T1.36.36.3.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.36.36.3.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.36.36.3.2"> 1.0</span>
</td>
</tr>
<tr id="S4.T1.39.39">
<td id="S4.T1.39.39.4"><span id="S4.T1.39.39.4.1">482.sphinx3</span></td>
<td id="S4.T1.37.37.1">
<span id="S4.T1.37.37.1.1">381 </span><math id="S4.T1.37.37.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.37.37.1.m1.1a"><mo mathsize="90%" id="S4.T1.37.37.1.m1.1.1" xref="S4.T1.37.37.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.37.37.1.m1.1b"><csymbol cd="latexml" id="S4.T1.37.37.1.m1.1.1.cmml" xref="S4.T1.37.37.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.37.37.1.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.37.37.1.2"> 7.1</span>
</td>
<td id="S4.T1.38.38.2">
<span id="S4.T1.38.38.2.1">834 </span><math id="S4.T1.38.38.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.38.38.2.m1.1a"><mo mathsize="90%" id="S4.T1.38.38.2.m1.1.1" xref="S4.T1.38.38.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.38.38.2.m1.1b"><csymbol cd="latexml" id="S4.T1.38.38.2.m1.1.1.cmml" xref="S4.T1.38.38.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.38.38.2.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.38.38.2.2"> 1.8</span>
</td>
<td id="S4.T1.39.39.3">
<span id="S4.T1.39.39.3.1">713 </span><math id="S4.T1.39.39.3.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.39.39.3.m1.1a"><mo mathsize="90%" id="S4.T1.39.39.3.m1.1.1" xref="S4.T1.39.39.3.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.39.39.3.m1.1b"><csymbol cd="latexml" id="S4.T1.39.39.3.m1.1.1.cmml" xref="S4.T1.39.39.3.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.39.39.3.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.39.39.3.2"> 3.6</span>
</td>
</tr>
<tr id="S4.T1.42.42">
<td id="S4.T1.42.42.4"><span id="S4.T1.42.42.4.1">641.leela_s</span></td>
<td id="S4.T1.40.40.1">
<span id="S4.T1.40.40.1.1">466 </span><math id="S4.T1.40.40.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.40.40.1.m1.1a"><mo mathsize="90%" id="S4.T1.40.40.1.m1.1.1" xref="S4.T1.40.40.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.40.40.1.m1.1b"><csymbol cd="latexml" id="S4.T1.40.40.1.m1.1.1.cmml" xref="S4.T1.40.40.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.40.40.1.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.40.40.1.2"> 2.7</span>
</td>
<td id="S4.T1.41.41.2">
<span id="S4.T1.41.41.2.1">825 </span><math id="S4.T1.41.41.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.41.41.2.m1.1a"><mo mathsize="90%" id="S4.T1.41.41.2.m1.1.1" xref="S4.T1.41.41.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.41.41.2.m1.1b"><csymbol cd="latexml" id="S4.T1.41.41.2.m1.1.1.cmml" xref="S4.T1.41.41.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.41.41.2.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.41.41.2.2"> 4.6</span>
</td>
<td id="S4.T1.42.42.3">
<span id="S4.T1.42.42.3.1">717 </span><math id="S4.T1.42.42.3.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.42.42.3.m1.1a"><mo mathsize="90%" id="S4.T1.42.42.3.m1.1.1" xref="S4.T1.42.42.3.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.42.42.3.m1.1b"><csymbol cd="latexml" id="S4.T1.42.42.3.m1.1.1.cmml" xref="S4.T1.42.42.3.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.42.42.3.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.42.42.3.2"> 1.2</span>
</td>
</tr>
<tr id="S4.T1.45.45">
<td id="S4.T1.45.45.4"><span id="S4.T1.45.45.4.1">644.nab_s</span></td>
<td id="S4.T1.43.43.1">
<span id="S4.T1.43.43.1.1">2476 </span><math id="S4.T1.43.43.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.43.43.1.m1.1a"><mo mathsize="90%" id="S4.T1.43.43.1.m1.1.1" xref="S4.T1.43.43.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.43.43.1.m1.1b"><csymbol cd="latexml" id="S4.T1.43.43.1.m1.1.1.cmml" xref="S4.T1.43.43.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.43.43.1.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.43.43.1.2"> 11</span>
</td>
<td id="S4.T1.44.44.2">
<span id="S4.T1.44.44.2.1">3639 </span><math id="S4.T1.44.44.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.44.44.2.m1.1a"><mo mathsize="90%" id="S4.T1.44.44.2.m1.1.1" xref="S4.T1.44.44.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.44.44.2.m1.1b"><csymbol cd="latexml" id="S4.T1.44.44.2.m1.1.1.cmml" xref="S4.T1.44.44.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.44.44.2.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.44.44.2.2"> 5.6</span>
</td>
<td id="S4.T1.45.45.3">
<span id="S4.T1.45.45.3.1">3829 </span><math id="S4.T1.45.45.3.m1.1" alttext="\pm" display="inline"><semantics id="S4.T1.45.45.3.m1.1a"><mo mathsize="90%" id="S4.T1.45.45.3.m1.1.1" xref="S4.T1.45.45.3.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T1.45.45.3.m1.1b"><csymbol cd="latexml" id="S4.T1.45.45.3.m1.1.1.cmml" xref="S4.T1.45.45.3.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.45.45.3.m1.1c">\pm</annotation></semantics></math><span id="S4.T1.45.45.3.2"> 6.7</span>
</td>
</tr>
<tr id="S4.T1.47.47">
<td id="S4.T1.47.47.3"><span id="S4.T1.47.47.3.1">Slowdown: geomean</span></td>
<td id="S4.T1.47.47.4"><span id="S4.T1.47.47.4.1">‚Äì</span></td>
<td id="S4.T1.46.46.1"><span id="S4.T1.46.46.1.1">1.55<math id="S4.T1.46.46.1.1.m1.1" alttext="\times" display="inline"><semantics id="S4.T1.46.46.1.1.m1.1a"><mo id="S4.T1.46.46.1.1.m1.1.1" xref="S4.T1.46.46.1.1.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S4.T1.46.46.1.1.m1.1b"><times id="S4.T1.46.46.1.1.m1.1.1.cmml" xref="S4.T1.46.46.1.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.46.46.1.1.m1.1c">\times</annotation></semantics></math></span></td>
<td id="S4.T1.47.47.2"><span id="S4.T1.47.47.2.1">1.45<math id="S4.T1.47.47.2.1.m1.1" alttext="\times" display="inline"><semantics id="S4.T1.47.47.2.1.m1.1a"><mo id="S4.T1.47.47.2.1.m1.1.1" xref="S4.T1.47.47.2.1.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S4.T1.47.47.2.1.m1.1b"><times id="S4.T1.47.47.2.1.m1.1.1.cmml" xref="S4.T1.47.47.2.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.47.47.2.1.m1.1c">\times</annotation></semantics></math></span></td>
</tr>
<tr id="S4.T1.49.49">
<td id="S4.T1.49.49.3"><span id="S4.T1.49.49.3.1">Slowdown: median</span></td>
<td id="S4.T1.49.49.4"><span id="S4.T1.49.49.4.1">‚Äì</span></td>
<td id="S4.T1.48.48.1"><span id="S4.T1.48.48.1.1">1.53<math id="S4.T1.48.48.1.1.m1.1" alttext="\times" display="inline"><semantics id="S4.T1.48.48.1.1.m1.1a"><mo id="S4.T1.48.48.1.1.m1.1.1" xref="S4.T1.48.48.1.1.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S4.T1.48.48.1.1.m1.1b"><times id="S4.T1.48.48.1.1.m1.1.1.cmml" xref="S4.T1.48.48.1.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.48.48.1.1.m1.1c">\times</annotation></semantics></math></span></td>
<td id="S4.T1.49.49.2"><span id="S4.T1.49.49.2.1">1.54<math id="S4.T1.49.49.2.1.m1.1" alttext="\times" display="inline"><semantics id="S4.T1.49.49.2.1.m1.1a"><mo id="S4.T1.49.49.2.1.m1.1.1" xref="S4.T1.49.49.2.1.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S4.T1.49.49.2.1.m1.1b"><times id="S4.T1.49.49.2.1.m1.1.1.cmml" xref="S4.T1.49.49.2.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.49.49.2.1.m1.1c">\times</annotation></semantics></math></span></td>
</tr>
</tbody>
</table>
<figcaption><span>Table 1: </span>Detailed breakdown of SPEC CPU benchmarks execution times
(of 5 runs) for native (Clang) and WebAssembly (Chrome and Firefox); all times are in seconds. The median slowdown of WebAssembly is
<math id="S4.T1.52.m1.1" alttext="1.53\times" display="inline"><semantics id="S4.T1.52.m1.1b"><mrow id="S4.T1.52.m1.1c"><mn id="S4.T1.52.m1.1.1">1.53</mn><mo lspace="0.222em" id="S4.T1.52.m1.1.2">√ó</mo></mrow><annotation encoding="application/x-tex" id="S4.T1.52.m1.1d">1.53\times</annotation></semantics></math> for Chrome and <math id="S4.T1.53.m2.1" alttext="1.54\times" display="inline"><semantics id="S4.T1.53.m2.1b"><mrow id="S4.T1.53.m2.1c"><mn id="S4.T1.53.m2.1.1">1.54</mn><mo lspace="0.222em" id="S4.T1.53.m2.1.2">√ó</mo></mrow><annotation encoding="application/x-tex" id="S4.T1.53.m2.1d">1.54\times</annotation></semantics></math> for Firefox.
</figcaption>
</figure>
<figure id="S4.T2">
<table id="S4.T2.30">
<tbody>
<tr id="S4.T2.30.31.1">
<td id="S4.T2.30.31.1.1"><span id="S4.T2.30.31.1.1.1">Benchmark</span></td>
<td id="S4.T2.30.31.1.2"><span id="S4.T2.30.31.1.2.1">Clang 4.0</span></td>
<th id="S4.T2.30.31.1.3">
<span id="S4.T2.30.31.1.3.1"></span><span id="S4.T2.30.31.1.3.2"> <span id="S4.T2.30.31.1.3.2.1">
<span id="S4.T2.30.31.1.3.2.1.1">
<span id="S4.T2.30.31.1.3.2.1.1.1">
<span id="S4.T2.30.31.1.3.2.1.1.1.1"><span id="S4.T2.30.31.1.3.2.1.1.1.1.1">Google Chrome</span></span></span>
</span></span><span id="S4.T2.30.31.1.3.2.2"></span></span>
</th>
</tr>
<tr id="S4.T2.2.2">
<td id="S4.T2.2.2.3"><span id="S4.T2.2.2.3.1">401.bzip2</span></td>
<td id="S4.T2.1.1.1">1.9 <math id="S4.T2.1.1.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.1.1.1.m1.1a"><mo id="S4.T2.1.1.1.m1.1.1" xref="S4.T2.1.1.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.1.1.1.m1.1b"><csymbol cd="latexml" id="S4.T2.1.1.1.m1.1.1.cmml" xref="S4.T2.1.1.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.1.1.1.m1.1c">\pm</annotation></semantics></math> 0.018</td>
<td id="S4.T2.2.2.2">0.53 <math id="S4.T2.2.2.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.2.2.2.m1.1a"><mo id="S4.T2.2.2.2.m1.1.1" xref="S4.T2.2.2.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.2.2.2.m1.1b"><csymbol cd="latexml" id="S4.T2.2.2.2.m1.1.1.cmml" xref="S4.T2.2.2.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.2.2.2.m1.1c">\pm</annotation></semantics></math> 0.005</td>
</tr>
<tr id="S4.T2.4.4">
<td id="S4.T2.4.4.3"><span id="S4.T2.4.4.3.1">429.mcf</span></td>
<td id="S4.T2.3.3.1">0.3 <math id="S4.T2.3.3.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.3.3.1.m1.1a"><mo id="S4.T2.3.3.1.m1.1.1" xref="S4.T2.3.3.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.3.3.1.m1.1b"><csymbol cd="latexml" id="S4.T2.3.3.1.m1.1.1.cmml" xref="S4.T2.3.3.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.3.3.1.m1.1c">\pm</annotation></semantics></math> 0.003</td>
<td id="S4.T2.4.4.2">0.15 <math id="S4.T2.4.4.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.4.4.2.m1.1a"><mo id="S4.T2.4.4.2.m1.1.1" xref="S4.T2.4.4.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.4.4.2.m1.1b"><csymbol cd="latexml" id="S4.T2.4.4.2.m1.1.1.cmml" xref="S4.T2.4.4.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.4.4.2.m1.1c">\pm</annotation></semantics></math> 0.005</td>
</tr>
<tr id="S4.T2.6.6">
<td id="S4.T2.6.6.3"><span id="S4.T2.6.6.3.1">433.milc</span></td>
<td id="S4.T2.5.5.1">2.2 <math id="S4.T2.5.5.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.5.5.1.m1.1a"><mo id="S4.T2.5.5.1.m1.1.1" xref="S4.T2.5.5.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.5.5.1.m1.1b"><csymbol cd="latexml" id="S4.T2.5.5.1.m1.1.1.cmml" xref="S4.T2.5.5.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.5.5.1.m1.1c">\pm</annotation></semantics></math> 0.02</td>
<td id="S4.T2.6.6.2">0.3 <math id="S4.T2.6.6.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.6.6.2.m1.1a"><mo id="S4.T2.6.6.2.m1.1.1" xref="S4.T2.6.6.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.6.6.2.m1.1b"><csymbol cd="latexml" id="S4.T2.6.6.2.m1.1.1.cmml" xref="S4.T2.6.6.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.6.6.2.m1.1c">\pm</annotation></semantics></math> 0.003</td>
</tr>
<tr id="S4.T2.8.8">
<td id="S4.T2.8.8.3"><span id="S4.T2.8.8.3.1">444.namd</span></td>
<td id="S4.T2.7.7.1">4.6 <math id="S4.T2.7.7.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.7.7.1.m1.1a"><mo id="S4.T2.7.7.1.m1.1.1" xref="S4.T2.7.7.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.7.7.1.m1.1b"><csymbol cd="latexml" id="S4.T2.7.7.1.m1.1.1.cmml" xref="S4.T2.7.7.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.7.7.1.m1.1c">\pm</annotation></semantics></math> 0.02</td>
<td id="S4.T2.8.8.2">0.78 <math id="S4.T2.8.8.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.8.8.2.m1.1a"><mo id="S4.T2.8.8.2.m1.1.1" xref="S4.T2.8.8.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.8.8.2.m1.1b"><csymbol cd="latexml" id="S4.T2.8.8.2.m1.1.1.cmml" xref="S4.T2.8.8.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.8.8.2.m1.1c">\pm</annotation></semantics></math> 0.004</td>
</tr>
<tr id="S4.T2.10.10">
<td id="S4.T2.10.10.3"><span id="S4.T2.10.10.3.1">445.gobmk</span></td>
<td id="S4.T2.9.9.1">12.1 <math id="S4.T2.9.9.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.9.9.1.m1.1a"><mo id="S4.T2.9.9.1.m1.1.1" xref="S4.T2.9.9.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.9.9.1.m1.1b"><csymbol cd="latexml" id="S4.T2.9.9.1.m1.1.1.cmml" xref="S4.T2.9.9.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.9.9.1.m1.1c">\pm</annotation></semantics></math> 0.2</td>
<td id="S4.T2.10.10.2">1.4 <math id="S4.T2.10.10.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.10.10.2.m1.1a"><mo id="S4.T2.10.10.2.m1.1.1" xref="S4.T2.10.10.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.10.10.2.m1.1b"><csymbol cd="latexml" id="S4.T2.10.10.2.m1.1.1.cmml" xref="S4.T2.10.10.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.10.10.2.m1.1c">\pm</annotation></semantics></math> 0.014</td>
</tr>
<tr id="S4.T2.12.12">
<td id="S4.T2.12.12.3"><span id="S4.T2.12.12.3.1">450.soplex</span></td>
<td id="S4.T2.11.11.1">6.9 <math id="S4.T2.11.11.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.11.11.1.m1.1a"><mo id="S4.T2.11.11.1.m1.1.1" xref="S4.T2.11.11.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.11.11.1.m1.1b"><csymbol cd="latexml" id="S4.T2.11.11.1.m1.1.1.cmml" xref="S4.T2.11.11.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.11.11.1.m1.1c">\pm</annotation></semantics></math> 0.01</td>
<td id="S4.T2.12.12.2">1.2 <math id="S4.T2.12.12.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.12.12.2.m1.1a"><mo id="S4.T2.12.12.2.m1.1.1" xref="S4.T2.12.12.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.12.12.2.m1.1b"><csymbol cd="latexml" id="S4.T2.12.12.2.m1.1.1.cmml" xref="S4.T2.12.12.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.12.12.2.m1.1c">\pm</annotation></semantics></math> 0.009</td>
</tr>
<tr id="S4.T2.14.14">
<td id="S4.T2.14.14.3"><span id="S4.T2.14.14.3.1">453.povray</span></td>
<td id="S4.T2.13.13.1">15.3 <math id="S4.T2.13.13.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.13.13.1.m1.1a"><mo id="S4.T2.13.13.1.m1.1.1" xref="S4.T2.13.13.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.13.13.1.m1.1b"><csymbol cd="latexml" id="S4.T2.13.13.1.m1.1.1.cmml" xref="S4.T2.13.13.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.13.13.1.m1.1c">\pm</annotation></semantics></math> 0.03</td>
<td id="S4.T2.14.14.2">1.2 <math id="S4.T2.14.14.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.14.14.2.m1.1a"><mo id="S4.T2.14.14.2.m1.1.1" xref="S4.T2.14.14.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.14.14.2.m1.1b"><csymbol cd="latexml" id="S4.T2.14.14.2.m1.1.1.cmml" xref="S4.T2.14.14.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.14.14.2.m1.1c">\pm</annotation></semantics></math> 0.012</td>
</tr>
<tr id="S4.T2.16.16">
<td id="S4.T2.16.16.3"><span id="S4.T2.16.16.3.1">458.sjeng</span></td>
<td id="S4.T2.15.15.1">1.9 <math id="S4.T2.15.15.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.15.15.1.m1.1a"><mo id="S4.T2.15.15.1.m1.1.1" xref="S4.T2.15.15.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.15.15.1.m1.1b"><csymbol cd="latexml" id="S4.T2.15.15.1.m1.1.1.cmml" xref="S4.T2.15.15.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.15.15.1.m1.1c">\pm</annotation></semantics></math> 0.01</td>
<td id="S4.T2.16.16.2">0.35 <math id="S4.T2.16.16.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.16.16.2.m1.1a"><mo id="S4.T2.16.16.2.m1.1.1" xref="S4.T2.16.16.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.16.16.2.m1.1b"><csymbol cd="latexml" id="S4.T2.16.16.2.m1.1.1.cmml" xref="S4.T2.16.16.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.16.16.2.m1.1c">\pm</annotation></semantics></math> 0.001</td>
</tr>
<tr id="S4.T2.18.18">
<td id="S4.T2.18.18.3"><span id="S4.T2.18.18.3.1">462.libquantum</span></td>
<td id="S4.T2.17.17.1">6.9 <math id="S4.T2.17.17.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.17.17.1.m1.1a"><mo id="S4.T2.17.17.1.m1.1.1" xref="S4.T2.17.17.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.17.17.1.m1.1b"><csymbol cd="latexml" id="S4.T2.17.17.1.m1.1.1.cmml" xref="S4.T2.17.17.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.17.17.1.m1.1c">\pm</annotation></semantics></math> 0.03</td>
<td id="S4.T2.18.18.2">0.15 <math id="S4.T2.18.18.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.18.18.2.m1.1a"><mo id="S4.T2.18.18.2.m1.1.1" xref="S4.T2.18.18.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.18.18.2.m1.1b"><csymbol cd="latexml" id="S4.T2.18.18.2.m1.1.1.cmml" xref="S4.T2.18.18.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.18.18.2.m1.1c">\pm</annotation></semantics></math> 0.002</td>
</tr>
<tr id="S4.T2.20.20">
<td id="S4.T2.20.20.3"><span id="S4.T2.20.20.3.1">464.h264ref</span></td>
<td id="S4.T2.19.19.1">10.3 <math id="S4.T2.19.19.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.19.19.1.m1.1a"><mo id="S4.T2.19.19.1.m1.1.1" xref="S4.T2.19.19.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.19.19.1.m1.1b"><csymbol cd="latexml" id="S4.T2.19.19.1.m1.1.1.cmml" xref="S4.T2.19.19.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.19.19.1.m1.1c">\pm</annotation></semantics></math> 0.06</td>
<td id="S4.T2.20.20.2">1.0 <math id="S4.T2.20.20.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.20.20.2.m1.1a"><mo id="S4.T2.20.20.2.m1.1.1" xref="S4.T2.20.20.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.20.20.2.m1.1b"><csymbol cd="latexml" id="S4.T2.20.20.2.m1.1.1.cmml" xref="S4.T2.20.20.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.20.20.2.m1.1c">\pm</annotation></semantics></math> 0.03</td>
</tr>
<tr id="S4.T2.22.22">
<td id="S4.T2.22.22.3"><span id="S4.T2.22.22.3.1">470.lbm</span></td>
<td id="S4.T2.21.21.1">0.3 <math id="S4.T2.21.21.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.21.21.1.m1.1a"><mo id="S4.T2.21.21.1.m1.1.1" xref="S4.T2.21.21.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.21.21.1.m1.1b"><csymbol cd="latexml" id="S4.T2.21.21.1.m1.1.1.cmml" xref="S4.T2.21.21.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.21.21.1.m1.1c">\pm</annotation></semantics></math> 0.001</td>
<td id="S4.T2.22.22.2">0.14 <math id="S4.T2.22.22.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.22.22.2.m1.1a"><mo id="S4.T2.22.22.2.m1.1.1" xref="S4.T2.22.22.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.22.22.2.m1.1b"><csymbol cd="latexml" id="S4.T2.22.22.2.m1.1.1.cmml" xref="S4.T2.22.22.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.22.22.2.m1.1c">\pm</annotation></semantics></math> 0.004</td>
</tr>
<tr id="S4.T2.24.24">
<td id="S4.T2.24.24.3"><span id="S4.T2.24.24.3.1">473.astar</span></td>
<td id="S4.T2.23.23.1">0.73 <math id="S4.T2.23.23.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.23.23.1.m1.1a"><mo id="S4.T2.23.23.1.m1.1.1" xref="S4.T2.23.23.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.23.23.1.m1.1b"><csymbol cd="latexml" id="S4.T2.23.23.1.m1.1.1.cmml" xref="S4.T2.23.23.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.23.23.1.m1.1c">\pm</annotation></semantics></math> 0.005</td>
<td id="S4.T2.24.24.2">0.24 <math id="S4.T2.24.24.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.24.24.2.m1.1a"><mo id="S4.T2.24.24.2.m1.1.1" xref="S4.T2.24.24.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.24.24.2.m1.1b"><csymbol cd="latexml" id="S4.T2.24.24.2.m1.1.1.cmml" xref="S4.T2.24.24.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.24.24.2.m1.1c">\pm</annotation></semantics></math> 0.004</td>
</tr>
<tr id="S4.T2.26.26">
<td id="S4.T2.26.26.3"><span id="S4.T2.26.26.3.1">482.sphinx3</span></td>
<td id="S4.T2.25.25.1">3.0 <math id="S4.T2.25.25.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.25.25.1.m1.1a"><mo id="S4.T2.25.25.1.m1.1.1" xref="S4.T2.25.25.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.25.25.1.m1.1b"><csymbol cd="latexml" id="S4.T2.25.25.1.m1.1.1.cmml" xref="S4.T2.25.25.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.25.25.1.m1.1c">\pm</annotation></semantics></math> 0.04</td>
<td id="S4.T2.26.26.2">0.48 <math id="S4.T2.26.26.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.26.26.2.m1.1a"><mo id="S4.T2.26.26.2.m1.1.1" xref="S4.T2.26.26.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.26.26.2.m1.1b"><csymbol cd="latexml" id="S4.T2.26.26.2.m1.1.1.cmml" xref="S4.T2.26.26.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.26.26.2.m1.1c">\pm</annotation></semantics></math> 0.007</td>
</tr>
<tr id="S4.T2.28.28">
<td id="S4.T2.28.28.3"><span id="S4.T2.28.28.3.1">641.leela_s</span></td>
<td id="S4.T2.27.27.1">4.3 <math id="S4.T2.27.27.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.27.27.1.m1.1a"><mo id="S4.T2.27.27.1.m1.1.1" xref="S4.T2.27.27.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.27.27.1.m1.1b"><csymbol cd="latexml" id="S4.T2.27.27.1.m1.1.1.cmml" xref="S4.T2.27.27.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.27.27.1.m1.1c">\pm</annotation></semantics></math> 0.05</td>
<td id="S4.T2.28.28.2">0.74 <math id="S4.T2.28.28.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.28.28.2.m1.1a"><mo id="S4.T2.28.28.2.m1.1.1" xref="S4.T2.28.28.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.28.28.2.m1.1b"><csymbol cd="latexml" id="S4.T2.28.28.2.m1.1.1.cmml" xref="S4.T2.28.28.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.28.28.2.m1.1c">\pm</annotation></semantics></math>0.003</td>
</tr>
<tr id="S4.T2.30.30">
<td id="S4.T2.30.30.3"><span id="S4.T2.30.30.3.1">644.nab_s</span></td>
<td id="S4.T2.29.29.1">4.1 <math id="S4.T2.29.29.1.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.29.29.1.m1.1a"><mo id="S4.T2.29.29.1.m1.1.1" xref="S4.T2.29.29.1.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.29.29.1.m1.1b"><csymbol cd="latexml" id="S4.T2.29.29.1.m1.1.1.cmml" xref="S4.T2.29.29.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.29.29.1.m1.1c">\pm</annotation></semantics></math> 0.03</td>
<td id="S4.T2.30.30.2">0.41 <math id="S4.T2.30.30.2.m1.1" alttext="\pm" display="inline"><semantics id="S4.T2.30.30.2.m1.1a"><mo id="S4.T2.30.30.2.m1.1.1" xref="S4.T2.30.30.2.m1.1.1.cmml">¬±</mo><annotation-xml encoding="MathML-Content" id="S4.T2.30.30.2.m1.1b"><csymbol cd="latexml" id="S4.T2.30.30.2.m1.1.1.cmml" xref="S4.T2.30.30.2.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.30.30.2.m1.1c">\pm</annotation></semantics></math>0.001</td>
</tr>
</tbody>
</table>
<figcaption><span><span id="S4.T2.32.1.1">Table 2</span>: </span><span id="S4.T2.33.2">Compilation times of SPEC CPU benchmarks
(average of 5 runs) for Clang 4.0 and WebAssembly (Chrome); all times are in seconds.
</span></figcaption>
</figure>
<section id="S4.SS2.SSS1">
<h4>
<span>4.2.1 </span><span id="S4.SS2.SSS1.1.1">Browsix-Wasm</span> Overhead</h4>

<p id="S4.SS2.SSS1.p1.1">It is important to rule out the possibility that the slowdown that we report is
due to poor performance in our implementation of <span id="S4.SS2.SSS1.p1.1.1">Browsix-Wasm</span>. In particular,
<span id="S4.SS2.SSS1.p1.1.2">Browsix-Wasm</span> implements system calls without modifying the browser, and
system calls involve copying data (¬ß<a href="#S2" title="2 From Browsix to Browsix-Wasm ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>2</span></a>), which may be
costly. To quantify the overhead of <span id="S4.SS2.SSS1.p1.1.3">Browsix-Wasm</span>, we instrumented its system
calls to measure all time spent in <span id="S4.SS2.SSS1.p1.1.4">Browsix-Wasm</span>.
Figure¬†<a href="#S4.F4" title="Figure 4 ‚Ä£ 4.2.1 Browsix-Wasm Overhead ‚Ä£ 4.2 SPEC Benchmarks ‚Ä£ 4 Evaluation ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>4</span></a> shows the percentage of time spent in
<span id="S4.SS2.SSS1.p1.1.5">Browsix-Wasm</span> in Firefox using the SPEC benchmarks. For 14 of the 15
benchmarks, the overhead is less than 0.5%. The maximum overhead is 1.2%.
On average, the overhead of <span id="S4.SS2.SSS1.p1.1.6">Browsix-Wasm</span> is only 0.2%. Therefore, we conclude that <span id="S4.SS2.SSS1.p1.1.7">Browsix-Wasm</span> has negligible overhead and
does not substantially affect the performance counter results of programs executed in
WebAssembly.</p>
<figure id="S4.F4"><img src="https://ar5iv.labs.arxiv.org/html/1901.09056/assets/x5.png" id="S4.F4.g1" width="461" height="346" alt="Refer to caption"/>
<figcaption><span><span id="S4.F4.4.1.1">Figure 4</span>: </span><span id="S4.F4.5.2">Time spent (in %) in <span id="S4.F4.5.2.1">Browsix-Wasm</span> calls in Firefox for
SPEC benchmarks compiled to WebAssembly. <span id="S4.F4.5.2.2">Browsix-Wasm</span> imposes a
mean overhead of only 0.2%.</span></figcaption>
</figure>
</section>
<section id="S4.SS2.SSS2">
<h4>
<span>4.2.2 </span>Comparison of WebAssembly and <span id="S4.SS2.SSS2.1.1">asm.js</span>
</h4>

<p id="S4.SS2.SSS2.p1.2">A key claim in the original work on WebAssembly was that it is significantly
faster than <span id="S4.SS2.SSS2.p1.2.1">asm.js</span>. We now test that claim using the SPEC
benchmarks. For this comparison, we modified <span id="S4.SS2.SSS2.p1.2.2">Browsix-Wasm</span> to also support
processes compiled to <span id="S4.SS2.SSS2.p1.2.3">asm.js</span>. The alternative would have been to benchmark
the <span id="S4.SS2.SSS2.p1.2.4">asm.js</span> processes using the original <span id="S4.SS2.SSS2.p1.2.5">Browsix</span>. However, as we discussed
earlier, <span id="S4.SS2.SSS2.p1.2.6">Browsix</span> has performance problems that would have been a threat to
the validity of our results.
Figure¬†<a href="#S4.F5" title="Figure 5 ‚Ä£ 4.2.2 Comparison of WebAssembly and asm.js ‚Ä£ 4.2 SPEC Benchmarks ‚Ä£ 4 Evaluation ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>5</span></a> shows the speedup of the SPEC benchmarks
using WebAssembly, relative to their running time using <span id="S4.SS2.SSS2.p1.2.7">asm.js</span> using both
Chrome and Firefox. WebAssembly outperforms <span id="S4.SS2.SSS2.p1.2.8">asm.js</span> in both browsers: the mean
speedup is 1.54<math id="S4.SS2.SSS2.p1.1.m1.1" alttext="\times" display="inline"><semantics id="S4.SS2.SSS2.p1.1.m1.1a"><mo id="S4.SS2.SSS2.p1.1.m1.1.1" xref="S4.SS2.SSS2.p1.1.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p1.1.m1.1b"><times id="S4.SS2.SSS2.p1.1.m1.1.1.cmml" xref="S4.SS2.SSS2.p1.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p1.1.m1.1c">\times</annotation></semantics></math> in Chrome and 1.39<math id="S4.SS2.SSS2.p1.2.m2.1" alttext="\times" display="inline"><semantics id="S4.SS2.SSS2.p1.2.m2.1a"><mo id="S4.SS2.SSS2.p1.2.m2.1.1" xref="S4.SS2.SSS2.p1.2.m2.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p1.2.m2.1b"><times id="S4.SS2.SSS2.p1.2.m2.1.1.cmml" xref="S4.SS2.SSS2.p1.2.m2.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p1.2.m2.1c">\times</annotation></semantics></math> in Firefox.</p>
<p id="S4.SS2.SSS2.p2.2">Since the performance difference between Chrome and Firefox is substantial, in
Figure¬†<a href="#S4.F6" title="Figure 6 ‚Ä£ 4.2.2 Comparison of WebAssembly and asm.js ‚Ä£ 4.2 SPEC Benchmarks ‚Ä£ 4 Evaluation ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>6</span></a> we show the speedup of each
benchmark by selecting the best-performing browser for WebAssembly and the
best-performing browser of <span id="S4.SS2.SSS2.p2.2.1">asm.js</span> (i.e., they may be different browsers).
These results show that WebAssembly consistently performs better than <span id="S4.SS2.SSS2.p2.2.2">asm.js</span>,
with a mean speedup of 1.3<math id="S4.SS2.SSS2.p2.1.m1.1" alttext="\times" display="inline"><semantics id="S4.SS2.SSS2.p2.1.m1.1a"><mo id="S4.SS2.SSS2.p2.1.m1.1.1" xref="S4.SS2.SSS2.p2.1.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p2.1.m1.1b"><times id="S4.SS2.SSS2.p2.1.m1.1.1.cmml" xref="S4.SS2.SSS2.p2.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p2.1.m1.1c">\times</annotation></semantics></math>. Haas et al.¬†<cite>[<a href="#bib.bib18" title="">18</a>]</cite>
also found that WebAssembly gives a mean speedup of 1.3<math id="S4.SS2.SSS2.p2.2.m2.1" alttext="\times" display="inline"><semantics id="S4.SS2.SSS2.p2.2.m2.1a"><mo id="S4.SS2.SSS2.p2.2.m2.1.1" xref="S4.SS2.SSS2.p2.2.m2.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p2.2.m2.1b"><times id="S4.SS2.SSS2.p2.2.m2.1.1.cmml" xref="S4.SS2.SSS2.p2.2.m2.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p2.2.m2.1c">\times</annotation></semantics></math> over <span id="S4.SS2.SSS2.p2.2.3">asm.js</span> using
PolyBenchC.</p>
<figure id="S4.F5"><img src="https://ar5iv.labs.arxiv.org/html/1901.09056/assets/x6.png" id="S4.F5.g1" width="461" height="346" alt="Refer to caption"/>
<figcaption><span><span id="S4.F5.9.3.1">Figure 5</span>: </span><span id="S4.F5.4.2">Relative time of <span id="S4.F5.4.2.1">asm.js</span> to
WebAssembly for Chrome and Firefox. WebAssembly is 1.54<math id="S4.F5.3.1.m1.1" alttext="\times" display="inline"><semantics id="S4.F5.3.1.m1.1b"><mo id="S4.F5.3.1.m1.1.1" xref="S4.F5.3.1.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S4.F5.3.1.m1.1c"><times id="S4.F5.3.1.m1.1.1.cmml" xref="S4.F5.3.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S4.F5.3.1.m1.1d">\times</annotation></semantics></math> faster than <span id="S4.F5.4.2.2">asm.js</span> in Chrome and 1.39<math id="S4.F5.4.2.m2.1" alttext="\times" display="inline"><semantics id="S4.F5.4.2.m2.1b"><mo id="S4.F5.4.2.m2.1.1" xref="S4.F5.4.2.m2.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S4.F5.4.2.m2.1c"><times id="S4.F5.4.2.m2.1.1.cmml" xref="S4.F5.4.2.m2.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S4.F5.4.2.m2.1d">\times</annotation></semantics></math> faster
than <span id="S4.F5.4.2.3">asm.js</span> in Firefox.</span></figcaption>
</figure>
<figure id="S4.F6"><img src="https://ar5iv.labs.arxiv.org/html/1901.09056/assets/x7.png" id="S4.F6.g1" width="461" height="346" alt="Refer to caption"/>
<figcaption><span><span id="S4.F6.7.2.1">Figure 6</span>: </span><span id="S4.F6.2.1">Relative <em id="S4.F6.2.1.1">best</em> time of <span id="S4.F6.2.1.2">asm.js</span> to the best
time of WebAssembly. WebAssembly is 1.3<math id="S4.F6.2.1.m1.1" alttext="\times" display="inline"><semantics id="S4.F6.2.1.m1.1b"><mo id="S4.F6.2.1.m1.1.1" xref="S4.F6.2.1.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S4.F6.2.1.m1.1c"><times id="S4.F6.2.1.m1.1.1.cmml" xref="S4.F6.2.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S4.F6.2.1.m1.1d">\times</annotation></semantics></math> faster than <span id="S4.F6.2.1.3">asm.js</span>.</span></figcaption>
</figure>
</section>
</section>
</section>
<section id="S5" lang="en">
<h2>
<span>5 </span>Case Study: Matrix Multiplication</h2>

<p id="S5.p1.4">In this section, we illustrate the performance differences between
WebAssembly and native code using a C function that performs matrix
multiplication, as shown in Figure¬†<a href="#S5.F7.sf1" title="In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>7(a)</span></a>. Three matrices
are provided as arguments to the function, and the results of
<span id="S5.p1.4.1">A</span> (<math id="S5.p1.1.m1.1" alttext="N_{I}\times N_{K}" display="inline"><semantics id="S5.p1.1.m1.1a"><mrow id="S5.p1.1.m1.1.1" xref="S5.p1.1.m1.1.1.cmml"><msub id="S5.p1.1.m1.1.1.2" xref="S5.p1.1.m1.1.1.2.cmml"><mi id="S5.p1.1.m1.1.1.2.2" xref="S5.p1.1.m1.1.1.2.2.cmml">N</mi><mi id="S5.p1.1.m1.1.1.2.3" xref="S5.p1.1.m1.1.1.2.3.cmml">I</mi></msub><mo lspace="0.222em" rspace="0.222em" id="S5.p1.1.m1.1.1.1" xref="S5.p1.1.m1.1.1.1.cmml">√ó</mo><msub id="S5.p1.1.m1.1.1.3" xref="S5.p1.1.m1.1.1.3.cmml"><mi id="S5.p1.1.m1.1.1.3.2" xref="S5.p1.1.m1.1.1.3.2.cmml">N</mi><mi id="S5.p1.1.m1.1.1.3.3" xref="S5.p1.1.m1.1.1.3.3.cmml">K</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="S5.p1.1.m1.1b"><apply id="S5.p1.1.m1.1.1.cmml" xref="S5.p1.1.m1.1.1"><times id="S5.p1.1.m1.1.1.1.cmml" xref="S5.p1.1.m1.1.1.1"></times><apply id="S5.p1.1.m1.1.1.2.cmml" xref="S5.p1.1.m1.1.1.2"><csymbol cd="ambiguous" id="S5.p1.1.m1.1.1.2.1.cmml" xref="S5.p1.1.m1.1.1.2">subscript</csymbol><ci id="S5.p1.1.m1.1.1.2.2.cmml" xref="S5.p1.1.m1.1.1.2.2">ùëÅ</ci><ci id="S5.p1.1.m1.1.1.2.3.cmml" xref="S5.p1.1.m1.1.1.2.3">ùêº</ci></apply><apply id="S5.p1.1.m1.1.1.3.cmml" xref="S5.p1.1.m1.1.1.3"><csymbol cd="ambiguous" id="S5.p1.1.m1.1.1.3.1.cmml" xref="S5.p1.1.m1.1.1.3">subscript</csymbol><ci id="S5.p1.1.m1.1.1.3.2.cmml" xref="S5.p1.1.m1.1.1.3.2">ùëÅ</ci><ci id="S5.p1.1.m1.1.1.3.3.cmml" xref="S5.p1.1.m1.1.1.3.3">ùêæ</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.p1.1.m1.1c">N_{I}\times N_{K}</annotation></semantics></math>) and <span id="S5.p1.4.2">B</span> (<math id="S5.p1.2.m2.1" alttext="N_{K}\times N_{J}" display="inline"><semantics id="S5.p1.2.m2.1a"><mrow id="S5.p1.2.m2.1.1" xref="S5.p1.2.m2.1.1.cmml"><msub id="S5.p1.2.m2.1.1.2" xref="S5.p1.2.m2.1.1.2.cmml"><mi id="S5.p1.2.m2.1.1.2.2" xref="S5.p1.2.m2.1.1.2.2.cmml">N</mi><mi id="S5.p1.2.m2.1.1.2.3" xref="S5.p1.2.m2.1.1.2.3.cmml">K</mi></msub><mo lspace="0.222em" rspace="0.222em" id="S5.p1.2.m2.1.1.1" xref="S5.p1.2.m2.1.1.1.cmml">√ó</mo><msub id="S5.p1.2.m2.1.1.3" xref="S5.p1.2.m2.1.1.3.cmml"><mi id="S5.p1.2.m2.1.1.3.2" xref="S5.p1.2.m2.1.1.3.2.cmml">N</mi><mi id="S5.p1.2.m2.1.1.3.3" xref="S5.p1.2.m2.1.1.3.3.cmml">J</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="S5.p1.2.m2.1b"><apply id="S5.p1.2.m2.1.1.cmml" xref="S5.p1.2.m2.1.1"><times id="S5.p1.2.m2.1.1.1.cmml" xref="S5.p1.2.m2.1.1.1"></times><apply id="S5.p1.2.m2.1.1.2.cmml" xref="S5.p1.2.m2.1.1.2"><csymbol cd="ambiguous" id="S5.p1.2.m2.1.1.2.1.cmml" xref="S5.p1.2.m2.1.1.2">subscript</csymbol><ci id="S5.p1.2.m2.1.1.2.2.cmml" xref="S5.p1.2.m2.1.1.2.2">ùëÅ</ci><ci id="S5.p1.2.m2.1.1.2.3.cmml" xref="S5.p1.2.m2.1.1.2.3">ùêæ</ci></apply><apply id="S5.p1.2.m2.1.1.3.cmml" xref="S5.p1.2.m2.1.1.3"><csymbol cd="ambiguous" id="S5.p1.2.m2.1.1.3.1.cmml" xref="S5.p1.2.m2.1.1.3">subscript</csymbol><ci id="S5.p1.2.m2.1.1.3.2.cmml" xref="S5.p1.2.m2.1.1.3.2">ùëÅ</ci><ci id="S5.p1.2.m2.1.1.3.3.cmml" xref="S5.p1.2.m2.1.1.3.3">ùêΩ</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.p1.2.m2.1c">N_{K}\times N_{J}</annotation></semantics></math>) are
stored in <span id="S5.p1.4.3">C</span> (<math id="S5.p1.3.m3.1" alttext="N_{I}\times N_{J}" display="inline"><semantics id="S5.p1.3.m3.1a"><mrow id="S5.p1.3.m3.1.1" xref="S5.p1.3.m3.1.1.cmml"><msub id="S5.p1.3.m3.1.1.2" xref="S5.p1.3.m3.1.1.2.cmml"><mi id="S5.p1.3.m3.1.1.2.2" xref="S5.p1.3.m3.1.1.2.2.cmml">N</mi><mi id="S5.p1.3.m3.1.1.2.3" xref="S5.p1.3.m3.1.1.2.3.cmml">I</mi></msub><mo lspace="0.222em" rspace="0.222em" id="S5.p1.3.m3.1.1.1" xref="S5.p1.3.m3.1.1.1.cmml">√ó</mo><msub id="S5.p1.3.m3.1.1.3" xref="S5.p1.3.m3.1.1.3.cmml"><mi id="S5.p1.3.m3.1.1.3.2" xref="S5.p1.3.m3.1.1.3.2.cmml">N</mi><mi id="S5.p1.3.m3.1.1.3.3" xref="S5.p1.3.m3.1.1.3.3.cmml">J</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="S5.p1.3.m3.1b"><apply id="S5.p1.3.m3.1.1.cmml" xref="S5.p1.3.m3.1.1"><times id="S5.p1.3.m3.1.1.1.cmml" xref="S5.p1.3.m3.1.1.1"></times><apply id="S5.p1.3.m3.1.1.2.cmml" xref="S5.p1.3.m3.1.1.2"><csymbol cd="ambiguous" id="S5.p1.3.m3.1.1.2.1.cmml" xref="S5.p1.3.m3.1.1.2">subscript</csymbol><ci id="S5.p1.3.m3.1.1.2.2.cmml" xref="S5.p1.3.m3.1.1.2.2">ùëÅ</ci><ci id="S5.p1.3.m3.1.1.2.3.cmml" xref="S5.p1.3.m3.1.1.2.3">ùêº</ci></apply><apply id="S5.p1.3.m3.1.1.3.cmml" xref="S5.p1.3.m3.1.1.3"><csymbol cd="ambiguous" id="S5.p1.3.m3.1.1.3.1.cmml" xref="S5.p1.3.m3.1.1.3">subscript</csymbol><ci id="S5.p1.3.m3.1.1.3.2.cmml" xref="S5.p1.3.m3.1.1.3.2">ùëÅ</ci><ci id="S5.p1.3.m3.1.1.3.3.cmml" xref="S5.p1.3.m3.1.1.3.3">ùêΩ</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.p1.3.m3.1c">N_{I}\times N_{J}</annotation></semantics></math>), where <math id="S5.p1.4.m4.3" alttext="N_{I},N_{K},N_{J}" display="inline"><semantics id="S5.p1.4.m4.3a"><mrow id="S5.p1.4.m4.3.3.3" xref="S5.p1.4.m4.3.3.4.cmml"><msub id="S5.p1.4.m4.1.1.1.1" xref="S5.p1.4.m4.1.1.1.1.cmml"><mi id="S5.p1.4.m4.1.1.1.1.2" xref="S5.p1.4.m4.1.1.1.1.2.cmml">N</mi><mi id="S5.p1.4.m4.1.1.1.1.3" xref="S5.p1.4.m4.1.1.1.1.3.cmml">I</mi></msub><mo id="S5.p1.4.m4.3.3.3.4" xref="S5.p1.4.m4.3.3.4.cmml">,</mo><msub id="S5.p1.4.m4.2.2.2.2" xref="S5.p1.4.m4.2.2.2.2.cmml"><mi id="S5.p1.4.m4.2.2.2.2.2" xref="S5.p1.4.m4.2.2.2.2.2.cmml">N</mi><mi id="S5.p1.4.m4.2.2.2.2.3" xref="S5.p1.4.m4.2.2.2.2.3.cmml">K</mi></msub><mo id="S5.p1.4.m4.3.3.3.5" xref="S5.p1.4.m4.3.3.4.cmml">,</mo><msub id="S5.p1.4.m4.3.3.3.3" xref="S5.p1.4.m4.3.3.3.3.cmml"><mi id="S5.p1.4.m4.3.3.3.3.2" xref="S5.p1.4.m4.3.3.3.3.2.cmml">N</mi><mi id="S5.p1.4.m4.3.3.3.3.3" xref="S5.p1.4.m4.3.3.3.3.3.cmml">J</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="S5.p1.4.m4.3b"><list id="S5.p1.4.m4.3.3.4.cmml" xref="S5.p1.4.m4.3.3.3"><apply id="S5.p1.4.m4.1.1.1.1.cmml" xref="S5.p1.4.m4.1.1.1.1"><csymbol cd="ambiguous" id="S5.p1.4.m4.1.1.1.1.1.cmml" xref="S5.p1.4.m4.1.1.1.1">subscript</csymbol><ci id="S5.p1.4.m4.1.1.1.1.2.cmml" xref="S5.p1.4.m4.1.1.1.1.2">ùëÅ</ci><ci id="S5.p1.4.m4.1.1.1.1.3.cmml" xref="S5.p1.4.m4.1.1.1.1.3">ùêº</ci></apply><apply id="S5.p1.4.m4.2.2.2.2.cmml" xref="S5.p1.4.m4.2.2.2.2"><csymbol cd="ambiguous" id="S5.p1.4.m4.2.2.2.2.1.cmml" xref="S5.p1.4.m4.2.2.2.2">subscript</csymbol><ci id="S5.p1.4.m4.2.2.2.2.2.cmml" xref="S5.p1.4.m4.2.2.2.2.2">ùëÅ</ci><ci id="S5.p1.4.m4.2.2.2.2.3.cmml" xref="S5.p1.4.m4.2.2.2.2.3">ùêæ</ci></apply><apply id="S5.p1.4.m4.3.3.3.3.cmml" xref="S5.p1.4.m4.3.3.3.3"><csymbol cd="ambiguous" id="S5.p1.4.m4.3.3.3.3.1.cmml" xref="S5.p1.4.m4.3.3.3.3">subscript</csymbol><ci id="S5.p1.4.m4.3.3.3.3.2.cmml" xref="S5.p1.4.m4.3.3.3.3.2">ùëÅ</ci><ci id="S5.p1.4.m4.3.3.3.3.3.cmml" xref="S5.p1.4.m4.3.3.3.3.3">ùêΩ</ci></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S5.p1.4.m4.3c">N_{I},N_{K},N_{J}</annotation></semantics></math> are
constants defined in the program.</p>
<p id="S5.p2.2">In WebAssembly, this function is <math id="S5.p2.1.m1.1" alttext="2\times" display="inline"><semantics id="S5.p2.1.m1.1a"><mrow id="S5.p2.1.m1.1b"><mn id="S5.p2.1.m1.1.1">2</mn><mo lspace="0.222em" id="S5.p2.1.m1.1.2">√ó</mo></mrow><annotation encoding="application/x-tex" id="S5.p2.1.m1.1c">2\times</annotation></semantics></math>‚Äì<math id="S5.p2.2.m2.1" alttext="3.4\times" display="inline"><semantics id="S5.p2.2.m2.1a"><mrow id="S5.p2.2.m2.1b"><mn id="S5.p2.2.m2.1.1">3.4</mn><mo lspace="0.222em" id="S5.p2.2.m2.1.2">√ó</mo></mrow><annotation encoding="application/x-tex" id="S5.p2.2.m2.1c">3.4\times</annotation></semantics></math> slower than native in both
Chrome and Firefox with a variety of matrix sizes
(Figure¬†<a href="#S5.F8" title="Figure 8 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>8</span></a>). We compiled the function with <span id="S5.p2.2.1">-O2</span> and
disabled automatic vectorization, since WebAssembly does not support vectorized
instructions.</p>
<figure id="S5.F7">
<div>
<div>
<figure id="S5.F7.fig1">
<div>
<div>
<figure id="S5.F7.sf1">
<div id="S5.F7.sf1.2">

<p><span id="lstnumberx1.1">void</span><span id="lstnumberx1.2"> </span><span id="lstnumberx1.3">matmul</span><span id="lstnumberx1.4"> </span><span id="lstnumberx1.5">(</span><span id="lstnumberx1.6">int</span><span id="lstnumberx1.7"> </span><span id="lstnumberx1.8">C</span><span id="lstnumberx1.9">[</span><span id="lstnumberx1.10">NI</span><span id="lstnumberx1.11">][</span><span id="lstnumberx1.12">NJ</span><span id="lstnumberx1.13">],</span>
</p>
<p><span id="lstnumberx2.1">             </span><span id="lstnumberx2.2">int</span><span id="lstnumberx2.3"> </span><span id="lstnumberx2.4">A</span><span id="lstnumberx2.5">[</span><span id="lstnumberx2.6">NI</span><span id="lstnumberx2.7">][</span><span id="lstnumberx2.8">NK</span><span id="lstnumberx2.9">],</span>
</p>
<p><span id="lstnumberx3.1">             </span><span id="lstnumberx3.2">int</span><span id="lstnumberx3.3"> </span><span id="lstnumberx3.4">B</span><span id="lstnumberx3.5">[</span><span id="lstnumberx3.6">NK</span><span id="lstnumberx3.7">][</span><span id="lstnumberx3.8">NJ</span><span id="lstnumberx3.9">])</span><span id="lstnumberx3.10"> </span><span id="lstnumberx3.11">{</span>
</p>
<p><span id="lstnumberx4.1">  </span><span id="lstnumberx4.2">for</span><span id="lstnumberx4.3"> </span><span id="lstnumberx4.4">(</span><span id="lstnumberx4.5">int</span><span id="lstnumberx4.6"> </span><span id="lstnumberx4.7">i</span><span id="lstnumberx4.8"> </span><span id="lstnumberx4.9">=</span><span id="lstnumberx4.10"> </span><span id="lstnumberx4.11">0;</span><span id="lstnumberx4.12"> </span><span id="lstnumberx4.13">i</span><span id="lstnumberx4.14"> </span><span id="lstnumberx4.15">&lt;</span><span id="lstnumberx4.16"> </span><span id="lstnumberx4.17">NI</span><span id="lstnumberx4.18">;</span><span id="lstnumberx4.19"> </span><span id="lstnumberx4.20">i</span><span id="lstnumberx4.21">++)</span><span id="lstnumberx4.22"> </span><span id="lstnumberx4.23">{</span>
</p>
<p><span id="lstnumberx5.1">    </span><span id="lstnumberx5.2">for</span><span id="lstnumberx5.3"> </span><span id="lstnumberx5.4">(</span><span id="lstnumberx5.5">int</span><span id="lstnumberx5.6"> </span><span id="lstnumberx5.7">k</span><span id="lstnumberx5.8"> </span><span id="lstnumberx5.9">=</span><span id="lstnumberx5.10"> </span><span id="lstnumberx5.11">0;</span><span id="lstnumberx5.12"> </span><span id="lstnumberx5.13">k</span><span id="lstnumberx5.14"> </span><span id="lstnumberx5.15">&lt;</span><span id="lstnumberx5.16"> </span><span id="lstnumberx5.17">NK</span><span id="lstnumberx5.18">;</span><span id="lstnumberx5.19"> </span><span id="lstnumberx5.20">k</span><span id="lstnumberx5.21">++)</span><span id="lstnumberx5.22"> </span><span id="lstnumberx5.23">{</span>
</p>
<p><span id="lstnumberx6.1">      </span><span id="lstnumberx6.2">for</span><span id="lstnumberx6.3"> </span><span id="lstnumberx6.4">(</span><span id="lstnumberx6.5">int</span><span id="lstnumberx6.6"> </span><span id="lstnumberx6.7">j</span><span id="lstnumberx6.8"> </span><span id="lstnumberx6.9">=</span><span id="lstnumberx6.10"> </span><span id="lstnumberx6.11">0;</span><span id="lstnumberx6.12"> </span><span id="lstnumberx6.13">k</span><span id="lstnumberx6.14"> </span><span id="lstnumberx6.15">&lt;</span><span id="lstnumberx6.16"> </span><span id="lstnumberx6.17">NJ</span><span id="lstnumberx6.18">;</span><span id="lstnumberx6.19"> </span><span id="lstnumberx6.20">j</span><span id="lstnumberx6.21">++)</span><span id="lstnumberx6.22"> </span><span id="lstnumberx6.23">{</span>
</p>
<p><span id="lstnumberx7.1">        </span><span id="lstnumberx7.2">C</span><span id="lstnumberx7.3">[</span><span id="lstnumberx7.4">i</span><span id="lstnumberx7.5">][</span><span id="lstnumberx7.6">j</span><span id="lstnumberx7.7">]</span><span id="lstnumberx7.8"> </span><span id="lstnumberx7.9">+=</span><span id="lstnumberx7.10"> </span><span id="lstnumberx7.11">A</span><span id="lstnumberx7.12">[</span><span id="lstnumberx7.13">i</span><span id="lstnumberx7.14">][</span><span id="lstnumberx7.15">k</span><span id="lstnumberx7.16">]</span><span id="lstnumberx7.17"> </span><span id="lstnumberx7.18">*</span><span id="lstnumberx7.19"> </span><span id="lstnumberx7.20">B</span><span id="lstnumberx7.21">[</span><span id="lstnumberx7.22">k</span><span id="lstnumberx7.23">][</span><span id="lstnumberx7.24">j</span><span id="lstnumberx7.25">];</span>
</p>
<p><span id="lstnumberx8.1">      </span><span id="lstnumberx8.2">}</span>
</p>
<p><span id="lstnumberx9.1">    </span><span id="lstnumberx9.2">}</span>
</p>
<p><span id="lstnumberx10.1">  </span><span id="lstnumberx10.2">}</span>
</p>
<p><span id="lstnumberx11.1">}</span>
</p>
</div>
<figcaption><span><span id="S5.F7.sf1.4.1.1">(a)</span> </span><span id="S5.F7.sf1.5.2">matmul<span id="S5.F7.sf1.5.2.1"> source code in C.</span></span></figcaption>
</figure>
</div>

<div>
<figure id="S5.F7.sf2">
<div id="S5.F7.sf2.2">

<p><span id="lstnumberx12.1">xor</span><span id="lstnumberx12.2">  </span><span id="lstnumberx12.3">r8d</span><span id="lstnumberx12.4">,</span><span id="lstnumberx12.5"> </span><span id="lstnumberx12.6">r8d</span><span id="lstnumberx12.7">           </span>
</p>
<p><span id="lstnumberx13.1">L1</span><span id="lstnumberx13.2">:</span><span id="lstnumberx13.3">                     </span>
</p>
<p><span id="lstnumberx14.1">  </span><span id="lstnumberx14.2">mov</span><span id="lstnumberx14.3">  </span><span id="lstnumberx14.4">r10</span><span id="lstnumberx14.5">,</span><span id="lstnumberx14.6"> </span><span id="lstnumberx14.7">rdx</span>
</p>
<p><span id="lstnumberx15.1">  </span><span id="lstnumberx15.2">xor</span><span id="lstnumberx15.3">  </span><span id="lstnumberx15.4">r9d</span><span id="lstnumberx15.5">,</span><span id="lstnumberx15.6"> </span><span id="lstnumberx15.7">r9d</span><span id="lstnumberx15.8">         </span>
</p>
<p><span id="lstnumberx16.1">  </span><span id="lstnumberx16.2">L2</span><span id="lstnumberx16.3">:</span><span id="lstnumberx16.4">                   </span>
</p>
<p><span id="lstnumberx17.1">    </span><span id="lstnumberx17.2">imul</span><span id="lstnumberx17.3">  </span><span id="lstnumberx17.4">rax</span><span id="lstnumberx17.5">,</span><span id="lstnumberx17.6"> </span><span id="lstnumberx17.7">4*</span><span id="lstnumberx17.8">NK</span><span id="lstnumberx17.9">,</span><span id="lstnumberx17.10"> </span><span id="lstnumberx17.11">r8</span>
</p>
<p><span id="lstnumberx18.1">    </span><span id="lstnumberx18.2">add</span><span id="lstnumberx18.3">   </span><span id="lstnumberx18.4">rax</span><span id="lstnumberx18.5">,</span><span id="lstnumberx18.6"> </span><span id="lstnumberx18.7">rsi</span>
</p>
<p><span id="lstnumberx19.1">    </span><span id="lstnumberx19.2">lea</span><span id="lstnumberx19.3">   </span><span id="lstnumberx19.4">r11</span><span id="lstnumberx19.5">,</span><span id="lstnumberx19.6"> </span><span id="lstnumberx19.7">[</span><span id="lstnumberx19.8">rax</span><span id="lstnumberx19.9"> </span><span id="lstnumberx19.10">+</span><span id="lstnumberx19.11"> </span><span id="lstnumberx19.12">r9</span><span id="lstnumberx19.13">*4]</span>
</p>
<p><span id="lstnumberx20.1">    </span><span id="lstnumberx20.2">mov</span><span id="lstnumberx20.3">   </span><span id="lstnumberx20.4">rcx</span><span id="lstnumberx20.5">,</span><span id="lstnumberx20.6"> </span><span id="lstnumberx20.7">-</span><span id="lstnumberx20.8">NJ</span><span id="lstnumberx20.9">     </span>
</p>
<p><span id="lstnumberx21.1">    </span><span id="lstnumberx21.2">L3</span><span id="lstnumberx21.3">:</span><span id="lstnumberx21.4">                 </span>
</p>
<p><span id="lstnumberx22.1">      </span><span id="lstnumberx22.2">mov</span><span id="lstnumberx22.3">   </span><span id="lstnumberx22.4">eax</span><span id="lstnumberx22.5">,</span><span id="lstnumberx22.6"> </span><span id="lstnumberx22.7">[</span><span id="lstnumberx22.8">r11</span><span id="lstnumberx22.9">]</span>
</p>
<p><span id="lstnumberx23.1">      </span><span id="lstnumberx23.2">mov</span><span id="lstnumberx23.3">   </span><span id="lstnumberx23.4">ebx</span><span id="lstnumberx23.5">,</span><span id="lstnumberx23.6"> </span><span id="lstnumberx23.7">[</span><span id="lstnumberx23.8">r10</span><span id="lstnumberx23.9"> </span><span id="lstnumberx23.10">+</span><span id="lstnumberx23.11"> </span><span id="lstnumberx23.12">rcx</span><span id="lstnumberx23.13">*4</span><span id="lstnumberx23.14"> </span><span id="lstnumberx23.15">+</span><span id="lstnumberx23.16"> </span><span id="lstnumberx23.17">4400]</span>
</p>
<p><span id="lstnumberx24.1">      </span><span id="lstnumberx24.2">imul</span><span id="lstnumberx24.3">  </span><span id="lstnumberx24.4">ebx</span><span id="lstnumberx24.5">,</span><span id="lstnumberx24.6"> </span><span id="lstnumberx24.7">eax</span>
</p>
<p><span id="lstnumberx25.1">      </span><span id="lstnumberx25.2">add</span><span id="lstnumberx25.3">   </span><span id="lstnumberx25.4">[</span><span id="lstnumberx25.5">rdi</span><span id="lstnumberx25.6"> </span><span id="lstnumberx25.7">+</span><span id="lstnumberx25.8"> </span><span id="lstnumberx25.9">rcx</span><span id="lstnumberx25.10">*4</span><span id="lstnumberx25.11"> </span><span id="lstnumberx25.12">+</span><span id="lstnumberx25.13"> </span><span id="lstnumberx25.14">4*</span><span id="lstnumberx25.15">NJ</span><span id="lstnumberx25.16">],</span><span id="lstnumberx25.17"> </span><span id="lstnumberx25.18">ebx</span><span id="lstnumberx25.19"> </span><span id="lstnumberx25.20"></span>
</p>
<p><span id="lstnumberx26.1">      </span><span id="lstnumberx26.2">add</span><span id="lstnumberx26.3">   </span><span id="lstnumberx26.4">rcx</span><span id="lstnumberx26.5">,</span><span id="lstnumberx26.6"> </span><span id="lstnumberx26.7">1</span><span id="lstnumberx26.8">      </span>
</p>
<p><span id="lstnumberx27.1">    </span><span id="lstnumberx27.2">jne</span><span id="lstnumberx27.3"> </span><span id="lstnumberx27.4">L3</span><span id="lstnumberx27.5">              </span>
</p>

<p><span id="lstnumberx29.1">    </span><span id="lstnumberx29.2">add</span><span id="lstnumberx29.3">   </span><span id="lstnumberx29.4">r9</span><span id="lstnumberx29.5">,</span><span id="lstnumberx29.6">  </span><span id="lstnumberx29.7">1</span><span id="lstnumberx29.8">        </span>
</p>
<p><span id="lstnumberx30.1">    </span><span id="lstnumberx30.2">add</span><span id="lstnumberx30.3">   </span><span id="lstnumberx30.4">r10</span><span id="lstnumberx30.5">,</span><span id="lstnumberx30.6"> </span><span id="lstnumberx30.7">4*</span><span id="lstnumberx30.8">NK</span>
</p>
<p><span id="lstnumberx31.1">    </span><span id="lstnumberx31.2">cmp</span><span id="lstnumberx31.3">   </span><span id="lstnumberx31.4">r9</span><span id="lstnumberx31.5">,</span><span id="lstnumberx31.6">  </span><span id="lstnumberx31.7">NK</span>
</p>
<p><span id="lstnumberx32.1">  </span><span id="lstnumberx32.2">jne</span><span id="lstnumberx32.3"> </span><span id="lstnumberx32.4">L2</span><span id="lstnumberx32.5">                </span>
</p>

<p><span id="lstnumberx34.1">  </span><span id="lstnumberx34.2">add</span><span id="lstnumberx34.3">  </span><span id="lstnumberx34.4">r8</span><span id="lstnumberx34.5">,</span><span id="lstnumberx34.6">  </span><span id="lstnumberx34.7">1</span><span id="lstnumberx34.8">           </span>
</p>
<p><span id="lstnumberx35.1">  </span><span id="lstnumberx35.2">add</span><span id="lstnumberx35.3">  </span><span id="lstnumberx35.4">rdi</span><span id="lstnumberx35.5">,</span><span id="lstnumberx35.6"> </span><span id="lstnumberx35.7">4*</span><span id="lstnumberx35.8">NJ</span>
</p>
<p><span id="lstnumberx36.1">  </span><span id="lstnumberx36.2">cmp</span><span id="lstnumberx36.3">  </span><span id="lstnumberx36.4">r8</span><span id="lstnumberx36.5">,</span><span id="lstnumberx36.6">  </span><span id="lstnumberx36.7">NI</span>
</p>
<p><span id="lstnumberx37.1">jne</span><span id="lstnumberx37.2"> </span><span id="lstnumberx37.3">L1</span><span id="lstnumberx37.4">                  </span>
</p>
<p><span id="lstnumberx38.1">pop</span><span id="lstnumberx38.2">  </span><span id="lstnumberx38.3">rbx</span>
</p>
<p><span id="lstnumberx39.1">ret</span>
</p>
</div>
<figcaption><span><span id="S5.F7.sf2.4.1.1">(b)</span> </span><span id="S5.F7.sf2.5.2">Native x86-64 code for <span id="S5.F7.sf2.5.2.1">matmul</span> generated by Clang.</span></figcaption>
</figure>
</div>
</div>
</figure>
</div>

<div>
<figure id="S5.F7.sf3">
<div id="S5.F7.sf3.2">

<p><span>1</span><span id="lstnumberx40.1">mov</span><span id="lstnumberx40.2"> </span><span id="lstnumberx40.3">[</span><span id="lstnumberx40.4">rbp</span><span id="lstnumberx40.5">-0</span><span id="lstnumberx40.6">x28</span><span id="lstnumberx40.7">],</span><span id="lstnumberx40.8">rax</span><span id="lstnumberx40.9">                    </span><span id="lstnumberx40.10"></span>
</p>
<p><span>2</span><span id="lstnumberx41.1">mov</span><span id="lstnumberx41.2"> </span><span id="lstnumberx41.3">[</span><span id="lstnumberx41.4">rbp</span><span id="lstnumberx41.5">-0</span><span id="lstnumberx41.6">x20</span><span id="lstnumberx41.7">],</span><span id="lstnumberx41.8">rdx</span><span id="lstnumberx41.9">                    </span><span id="lstnumberx41.10"></span>
</p>
<p><span>3</span><span id="lstnumberx42.1">mov</span><span id="lstnumberx42.2"> </span><span id="lstnumberx42.3">[</span><span id="lstnumberx42.4">rbp</span><span id="lstnumberx42.5">-0</span><span id="lstnumberx42.6">x18</span><span id="lstnumberx42.7">],</span><span id="lstnumberx42.8">rcx</span><span id="lstnumberx42.9">                    </span><span id="lstnumberx42.10"></span>
</p>
<p><span>4</span><span id="lstnumberx43.1">xor</span><span id="lstnumberx43.2"> </span><span id="lstnumberx43.3">edi</span><span id="lstnumberx43.4">,</span><span id="lstnumberx43.5">edi</span><span id="lstnumberx43.6">               </span>
</p>
<p><span>5</span><span id="lstnumberx44.1">jmp</span><span id="lstnumberx44.2"> </span><span id="lstnumberx44.3">L1</span><span id="lstnumberx44.4">‚Äô</span><span id="lstnumberx44.5">                               </span><span id="lstnumberx44.6"></span>
</p>
<p><span>6</span><span id="lstnumberx45.1">L1</span><span id="lstnumberx45.2">:</span><span id="lstnumberx45.3">                       </span>
</p>
<p><span>7</span><span id="lstnumberx46.1">  </span><span id="lstnumberx46.2">mov</span><span id="lstnumberx46.3"> </span><span id="lstnumberx46.4">ecx</span><span id="lstnumberx46.5">,[</span><span id="lstnumberx46.6">rbp</span><span id="lstnumberx46.7">-0</span><span id="lstnumberx46.8">x18</span><span id="lstnumberx46.9">]</span><span id="lstnumberx46.10">                </span><span id="lstnumberx46.11"></span><span id="lstnumberx46.12"> </span><span id="lstnumberx46.13"></span>
</p>
<p><span>8</span><span id="lstnumberx47.1">  </span><span id="lstnumberx47.2">mov</span><span id="lstnumberx47.3"> </span><span id="lstnumberx47.4">edx</span><span id="lstnumberx47.5">,[</span><span id="lstnumberx47.6">rbp</span><span id="lstnumberx47.7">-0</span><span id="lstnumberx47.8">x20</span><span id="lstnumberx47.9">]</span><span id="lstnumberx47.10">                </span><span id="lstnumberx47.11"></span>
</p>
<p><span>9</span><span id="lstnumberx48.1">  </span><span id="lstnumberx48.2">mov</span><span id="lstnumberx48.3"> </span><span id="lstnumberx48.4">eax</span><span id="lstnumberx48.5">,[</span><span id="lstnumberx48.6">rbp</span><span id="lstnumberx48.7">-0</span><span id="lstnumberx48.8">x28</span><span id="lstnumberx48.9">]</span><span id="lstnumberx48.10">                </span><span id="lstnumberx48.11"></span>
</p>
<p><span>10</span><span id="lstnumberx49.1">  </span><span id="lstnumberx49.2">L1</span><span id="lstnumberx49.3">‚Äô:</span>
</p>
<p><span>11</span><span id="lstnumberx50.1">  </span><span id="lstnumberx50.2">imul</span><span id="lstnumberx50.3"> </span><span id="lstnumberx50.4">r8d</span><span id="lstnumberx50.5">,</span><span id="lstnumberx50.6">edi</span><span id="lstnumberx50.7">,0</span><span id="lstnumberx50.8">x1130</span>
</p>
<p><span>12</span><span id="lstnumberx51.1">  </span><span id="lstnumberx51.2">add</span><span id="lstnumberx51.3"> </span><span id="lstnumberx51.4">r8d</span><span id="lstnumberx51.5">,</span><span id="lstnumberx51.6">eax</span>
</p>
<p><span>13</span><span id="lstnumberx52.1">  </span><span id="lstnumberx52.2">imul</span><span id="lstnumberx52.3"> </span><span id="lstnumberx52.4">r9d</span><span id="lstnumberx52.5">,</span><span id="lstnumberx52.6">edi</span><span id="lstnumberx52.7">,0</span><span id="lstnumberx52.8">x12c0</span>
</p>
<p><span>14</span><span id="lstnumberx53.1">  </span><span id="lstnumberx53.2">add</span><span id="lstnumberx53.3"> </span><span id="lstnumberx53.4">r9d</span><span id="lstnumberx53.5">,</span><span id="lstnumberx53.6">edx</span>
</p>
<p><span>15</span><span id="lstnumberx54.1">  </span><span id="lstnumberx54.2">xor</span><span id="lstnumberx54.3"> </span><span id="lstnumberx54.4">r11d</span><span id="lstnumberx54.5">,</span><span id="lstnumberx54.6">r11d</span><span id="lstnumberx54.7">           </span>
</p>
<p><span>16</span><span id="lstnumberx55.1">  </span><span id="lstnumberx55.2">jmp</span><span id="lstnumberx55.3"> </span><span id="lstnumberx55.4">L2</span><span id="lstnumberx55.5">‚Äô</span><span id="lstnumberx55.6">                           </span><span id="lstnumberx55.7"></span>
</p>
<p><span>17</span><span id="lstnumberx56.1">  </span><span id="lstnumberx56.2">L2</span><span id="lstnumberx56.3">:</span><span id="lstnumberx56.4">                     </span>
</p>
<p><span>18</span><span id="lstnumberx57.1">    </span><span id="lstnumberx57.2">mov</span><span id="lstnumberx57.3"> </span><span id="lstnumberx57.4">ecx</span><span id="lstnumberx57.5">,[</span><span id="lstnumberx57.6">rbp</span><span id="lstnumberx57.7">-0</span><span id="lstnumberx57.8">x18</span><span id="lstnumberx57.9">]</span><span id="lstnumberx57.10">            </span><span id="lstnumberx57.11"></span>
</p>
<p><span>19</span><span id="lstnumberx58.1">    </span><span id="lstnumberx58.2">L2</span><span id="lstnumberx58.3">‚Äô:</span>
</p>
<p><span>20</span><span id="lstnumberx59.1">    </span><span id="lstnumberx59.2">imul</span><span id="lstnumberx59.3"> </span><span id="lstnumberx59.4">r12d</span><span id="lstnumberx59.5">,</span><span id="lstnumberx59.6">r11d</span><span id="lstnumberx59.7">,0</span><span id="lstnumberx59.8">x1130</span>
</p>
<p><span>21</span><span id="lstnumberx60.1">    </span><span id="lstnumberx60.2">lea</span><span id="lstnumberx60.3"> </span><span id="lstnumberx60.4">r14d</span><span id="lstnumberx60.5">,[</span><span id="lstnumberx60.6">r9</span><span id="lstnumberx60.7">+</span><span id="lstnumberx60.8">r11</span><span id="lstnumberx60.9">*4]</span>
</p>
<p><span>22</span><span id="lstnumberx61.1">    </span><span id="lstnumberx61.2">add</span><span id="lstnumberx61.3"> </span><span id="lstnumberx61.4">r12d</span><span id="lstnumberx61.5">,</span><span id="lstnumberx61.6">ecx</span>
</p>
<p><span>23</span><span id="lstnumberx62.1">    </span><span id="lstnumberx62.2">xor</span><span id="lstnumberx62.3"> </span><span id="lstnumberx62.4">esi</span><span id="lstnumberx62.5">,</span><span id="lstnumberx62.6">esi</span><span id="lstnumberx62.7">           </span>
</p>
<p><span>24</span><span id="lstnumberx63.1">    </span><span id="lstnumberx63.2">mov</span><span id="lstnumberx63.3"> </span><span id="lstnumberx63.4">r15d</span><span id="lstnumberx63.5">,</span><span id="lstnumberx63.6">esi</span>
</p>
<p><span>25</span><span id="lstnumberx64.1">    </span><span id="lstnumberx64.2">jmp</span><span id="lstnumberx64.3"> </span><span id="lstnumberx64.4">L3</span><span id="lstnumberx64.5">‚Äô</span><span id="lstnumberx64.6">                       </span><span id="lstnumberx64.7"></span>
</p>
<p><span>26</span><span id="lstnumberx65.1">    </span><span id="lstnumberx65.2">L3</span><span id="lstnumberx65.3">:</span><span id="lstnumberx65.4">                   </span>
</p>
<p><span>27</span><span id="lstnumberx66.1">      </span><span id="lstnumberx66.2">mov</span><span id="lstnumberx66.3"> </span><span id="lstnumberx66.4">r15d</span><span id="lstnumberx66.5">,</span><span id="lstnumberx66.6">eax</span><span id="lstnumberx66.7">           </span><span id="lstnumberx66.8"></span>
</p>
<p><span>28</span><span id="lstnumberx67.1">      </span><span id="lstnumberx67.2">L3</span><span id="lstnumberx67.3">‚Äô:</span>
</p>
<p><span>29</span><span id="lstnumberx68.1">      </span><span id="lstnumberx68.2">lea</span><span id="lstnumberx68.3"> </span><span id="lstnumberx68.4">eax</span><span id="lstnumberx68.5">,[</span><span id="lstnumberx68.6">r15</span><span id="lstnumberx68.7">+0</span><span id="lstnumberx68.8">x1</span><span id="lstnumberx68.9">]</span><span id="lstnumberx68.10">   </span>
</p>
<p><span>30</span><span id="lstnumberx69.1">      </span><span id="lstnumberx69.2">lea</span><span id="lstnumberx69.3"> </span><span id="lstnumberx69.4">edx</span><span id="lstnumberx69.5">,[</span><span id="lstnumberx69.6">r8</span><span id="lstnumberx69.7">+</span><span id="lstnumberx69.8">r15</span><span id="lstnumberx69.9">*4]</span>
</p>
<p><span>31</span><span id="lstnumberx70.1">      </span><span id="lstnumberx70.2">lea</span><span id="lstnumberx70.3"> </span><span id="lstnumberx70.4">r15d</span><span id="lstnumberx70.5">,[</span><span id="lstnumberx70.6">r12</span><span id="lstnumberx70.7">+</span><span id="lstnumberx70.8">r15</span><span id="lstnumberx70.9">*4]</span>
</p>
<p><span>32</span><span id="lstnumberx71.1">      </span><span id="lstnumberx71.2">mov</span><span id="lstnumberx71.3"> </span><span id="lstnumberx71.4">esi</span><span id="lstnumberx71.5">,[</span><span id="lstnumberx71.6">rbx</span><span id="lstnumberx71.7">+</span><span id="lstnumberx71.8">r14</span><span id="lstnumberx71.9">*1]</span>
</p>
<p><span>33</span><span id="lstnumberx72.1">      </span><span id="lstnumberx72.2">mov</span><span id="lstnumberx72.3"> </span><span id="lstnumberx72.4">r15d</span><span id="lstnumberx72.5">,[</span><span id="lstnumberx72.6">rbx</span><span id="lstnumberx72.7">+</span><span id="lstnumberx72.8">r15</span><span id="lstnumberx72.9">*1]</span>
</p>
<p><span>34</span><span id="lstnumberx73.1">      </span><span id="lstnumberx73.2">imul</span><span id="lstnumberx73.3"> </span><span id="lstnumberx73.4">r15d</span><span id="lstnumberx73.5">,</span><span id="lstnumberx73.6">esi</span>
</p>
<p><span>35</span><span id="lstnumberx74.1">      </span><span id="lstnumberx74.2">mov</span><span id="lstnumberx74.3"> </span><span id="lstnumberx74.4">ecx</span><span id="lstnumberx74.5">,[</span><span id="lstnumberx74.6">rbx</span><span id="lstnumberx74.7">+</span><span id="lstnumberx74.8">rdx</span><span id="lstnumberx74.9">*1]</span><span id="lstnumberx74.10">   </span><span id="lstnumberx74.11"></span>
</p>
<p><span>36</span><span id="lstnumberx75.1">      </span><span id="lstnumberx75.2">add</span><span id="lstnumberx75.3"> </span><span id="lstnumberx75.4">ecx</span><span id="lstnumberx75.5">,</span><span id="lstnumberx75.6">r15d</span>
</p>
<p><span>37</span><span id="lstnumberx76.1">      </span><span id="lstnumberx76.2">mov</span><span id="lstnumberx76.3"> </span><span id="lstnumberx76.4">[</span><span id="lstnumberx76.5">rbx</span><span id="lstnumberx76.6">+</span><span id="lstnumberx76.7">rdx</span><span id="lstnumberx76.8">*1],</span><span id="lstnumberx76.9">ecx</span><span id="lstnumberx76.10">    </span><span id="lstnumberx76.11"></span>
</p>
<p><span>38</span><span id="lstnumberx77.1">      </span><span id="lstnumberx77.2">cmp</span><span id="lstnumberx77.3"> </span><span id="lstnumberx77.4">eax</span><span id="lstnumberx77.5">,</span><span id="lstnumberx77.6">NJ</span><span id="lstnumberx77.7">          </span>
</p>
<p><span>39</span><span id="lstnumberx78.1">    </span><span id="lstnumberx78.2">jnz</span><span id="lstnumberx78.3"> </span><span id="lstnumberx78.4">L3</span><span id="lstnumberx78.5">                </span>
</p>
<p><span>40</span><span id="lstnumberx79.1">  </span><span id="lstnumberx79.2">add</span><span id="lstnumberx79.3"> </span><span id="lstnumberx79.4">r11</span><span id="lstnumberx79.5">,0</span><span id="lstnumberx79.6">x1</span><span id="lstnumberx79.7">             </span>
</p>
<p><span>41</span><span id="lstnumberx80.1">  </span><span id="lstnumberx80.2">cmp</span><span id="lstnumberx80.3"> </span><span id="lstnumberx80.4">r11d</span><span id="lstnumberx80.5">,</span><span id="lstnumberx80.6">NK</span><span id="lstnumberx80.7">             </span>
</p>
<p><span>42</span><span id="lstnumberx81.1">  </span><span id="lstnumberx81.2">jnz</span><span id="lstnumberx81.3"> </span><span id="lstnumberx81.4">L2</span><span id="lstnumberx81.5">                  </span>
</p>
<p><span>43</span><span id="lstnumberx82.1">add</span><span id="lstnumberx82.2"> </span><span id="lstnumberx82.3">edi</span><span id="lstnumberx82.4">,0</span><span id="lstnumberx82.5">x1</span><span id="lstnumberx82.6">               </span>
</p>
<p><span>44</span><span id="lstnumberx83.1">cmp</span><span id="lstnumberx83.2"> </span><span id="lstnumberx83.3">edi</span><span id="lstnumberx83.4">,</span><span id="lstnumberx83.5">NI</span><span id="lstnumberx83.6">                </span>
</p>
<p><span>45</span><span id="lstnumberx84.1">jnz</span><span id="lstnumberx84.2"> </span><span id="lstnumberx84.3">L1</span><span id="lstnumberx84.4">                    </span>
</p>
<p><span>46</span><span id="lstnumberx85.1">retl</span>
</p>
</div>
<figcaption><span><span id="S5.F7.sf3.4.1.1">(c)</span> </span><span id="S5.F7.sf3.5.2">x86-64 code JITed by Chrome from WebAssembly <span id="S5.F7.sf3.5.2.1">matmul</span>.</span></figcaption>
</figure>
</div>
</div>
<figcaption><span><span id="S5.F7.3.1.1">Figure 7</span>: </span><span id="S5.F7.4.2">Native code for <span id="S5.F7.4.2.1">matmul</span> is shorter, has less register pressure, and fewer branches than the code JITed by Chrome.
¬ß<a href="#S6" title="6 Performance Analysis ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>6</span></a> shows that these inefficiencies are pervasive, reducing performance across the SPEC CPU benchmark suites.</span></figcaption>
</figure>
<figure id="S5.F8"><img src="https://ar5iv.labs.arxiv.org/html/1901.09056/assets/x8.png" id="S5.F8.g1" width="207" height="155" alt="Refer to caption"/>
<figcaption><span><span id="S5.F8.6.3.1">Figure 8</span>: </span><span id="S5.F8.4.2">Performance of WebAssembly in Chrome and Firefox for
different matrix sizes relative to native code. WebAssembly is always
between 2<math id="S5.F8.3.1.m1.1" alttext="\times" display="inline"><semantics id="S5.F8.3.1.m1.1b"><mo id="S5.F8.3.1.m1.1.1" xref="S5.F8.3.1.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S5.F8.3.1.m1.1c"><times id="S5.F8.3.1.m1.1.1.cmml" xref="S5.F8.3.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S5.F8.3.1.m1.1d">\times</annotation></semantics></math> to 3.4<math id="S5.F8.4.2.m2.1" alttext="\times" display="inline"><semantics id="S5.F8.4.2.m2.1b"><mo id="S5.F8.4.2.m2.1.1" xref="S5.F8.4.2.m2.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S5.F8.4.2.m2.1c"><times id="S5.F8.4.2.m2.1.1.cmml" xref="S5.F8.4.2.m2.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S5.F8.4.2.m2.1d">\times</annotation></semantics></math> slower than native. </span></figcaption>
</figure>
<p id="S5.p3.1">Figure¬†<a href="#S5.F7.sf2" title="In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>7(b)</span></a> shows native code generated for the <span id="S5.p3.1.1">matmul</span>
function by <span id="S5.p3.1.2">clang-4.0</span>.
Arguments are passed to the function in the <span id="S5.p3.1.3">rdi</span>, <span id="S5.p3.1.4">rsi</span>, and
<span id="S5.p3.1.5">rdx</span> registers, as specified in the System V AMD64 ABI calling
convention¬†<cite>[<a href="#bib.bib9" title="">9</a>]</cite>.
Lines¬†<a href="#lstnumberx13" title="In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>7(b)</span></a> -¬†<a href="#lstnumberx37" title="In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>7(b)</span></a> are the
body of the first loop with iterator <span id="S5.p3.1.6">i</span> stored in <span id="S5.p3.1.7">r8d</span>.
Lines¬†<a href="#lstnumberx16" title="In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>7(b)</span></a> -¬†<a href="#lstnumberx32" title="In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>7(b)</span></a> contain
the body of the second loop with iterator <span id="S5.p3.1.8">k</span> stored in <span id="S5.p3.1.9">r9d</span>.
Lines¬†<a href="#lstnumberx21" title="In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>7(b)</span></a> -¬†<a href="#lstnumberx27" title="In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>7(b)</span></a> comprise
the body of the third loop with iterator <span id="S5.p3.1.10">j</span> stored in <span id="S5.p3.1.11">rcx</span>.
Clang is able to eliminate a <span id="S5.p3.1.12">cmp</span> instruction in the inner loop by
initializing <span id="S5.p3.1.13">rcx</span> with <math id="S5.p3.1.m1.1" alttext="-N_{J}" display="inline"><semantics id="S5.p3.1.m1.1a"><mrow id="S5.p3.1.m1.1.1" xref="S5.p3.1.m1.1.1.cmml"><mo id="S5.p3.1.m1.1.1a" xref="S5.p3.1.m1.1.1.cmml">‚àí</mo><msub id="S5.p3.1.m1.1.1.2" xref="S5.p3.1.m1.1.1.2.cmml"><mi id="S5.p3.1.m1.1.1.2.2" xref="S5.p3.1.m1.1.1.2.2.cmml">N</mi><mi id="S5.p3.1.m1.1.1.2.3" xref="S5.p3.1.m1.1.1.2.3.cmml">J</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="S5.p3.1.m1.1b"><apply id="S5.p3.1.m1.1.1.cmml" xref="S5.p3.1.m1.1.1"><minus id="S5.p3.1.m1.1.1.1.cmml" xref="S5.p3.1.m1.1.1"></minus><apply id="S5.p3.1.m1.1.1.2.cmml" xref="S5.p3.1.m1.1.1.2"><csymbol cd="ambiguous" id="S5.p3.1.m1.1.1.2.1.cmml" xref="S5.p3.1.m1.1.1.2">subscript</csymbol><ci id="S5.p3.1.m1.1.1.2.2.cmml" xref="S5.p3.1.m1.1.1.2.2">ùëÅ</ci><ci id="S5.p3.1.m1.1.1.2.3.cmml" xref="S5.p3.1.m1.1.1.2.3">ùêΩ</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.p3.1.m1.1c">-N_{J}</annotation></semantics></math>, incrementing <span id="S5.p3.1.14">rcx</span> on each
iteration at line¬†<a href="#lstnumberx26" title="In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>7(b)</span></a>, and using <span id="S5.p3.1.15">jne</span> to test
the zero flag of the status register, which is set to 1 when <span id="S5.p3.1.16">rcx</span> becomes 0.</p>
<p id="S5.p4.1">Figure¬†<a href="#S5.F7.sf3" title="In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>7(c)</span></a> shows x86-64 code JITed by Chrome for the WebAssembly compiled
version of <span id="S5.p4.1.1">matmul</span>.
This code has been modified slightly ‚Äì <span id="S5.p4.1.2">nop</span>s in the generated code
have been removed for presentation.
Function arguments are passed in the <span id="S5.p4.1.3">rax</span>, <span id="S5.p4.1.4">rcx</span>, and <span id="S5.p4.1.5">rdx</span>
registers, following Chrome‚Äôs calling convention. At lines¬†<a href="#lstnumberx40" title="line 1In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>1</span></a>‚Äì¬†<a href="#lstnumberx42" title="line 3In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>3</span></a>, the contents
of registers <span id="S5.p4.1.6">rax</span>, <span id="S5.p4.1.7">rdx</span>, and <span id="S5.p4.1.8">rcx</span> are stored on the stack,
due to registers spills at lines¬†<a href="#lstnumberx46" title="line 7In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>7</span></a> -¬†<a href="#lstnumberx48" title="line 9In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>9</span></a>.
Lines¬†<a href="#lstnumberx46" title="line 7In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>7</span></a>‚Äì<a href="#lstnumberx84" title="line 45In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>45</span></a> are the body of the
first loop with iterator <span id="S5.p4.1.9">i</span> stored in <span id="S5.p4.1.10">edi</span>.
Lines¬†<a href="#lstnumberx57" title="line 18In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>18</span></a>‚Äì<a href="#lstnumberx81" title="line 42In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>42</span></a> contain the body of
second loop with iterator <span id="S5.p4.1.11">k</span> stored in <span id="S5.p4.1.12">r11</span>.
Lines¬†<a href="#lstnumberx66" title="line 27In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>27</span></a>‚Äì<a href="#lstnumberx78" title="line 39In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>39</span></a> are the body
of the third loop with iterator <span id="S5.p4.1.13">j</span> stored in <span id="S5.p4.1.14">eax</span>.
To avoid memory loads due to register spilling at lines¬†<a href="#lstnumberx46" title="line 7In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>7</span></a>‚Äì¬†<a href="#lstnumberx48" title="line 9In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>9</span></a>
in the first iteration of the first loop, an extra jump is generated at
line¬†<a href="#lstnumberx44" title="line 5In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>5</span></a>.
Similarly, extra jumps are generated for the second and third loops at
line¬†<a href="#lstnumberx55" title="line 16In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>16</span></a> and line¬†<a href="#lstnumberx64" title="line 25In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>25</span></a>
respectively.</p>
<section id="S5.SS1">
<h3>
<span>5.1 </span>Differences</h3>

<p id="S5.SS1.p1.1">The native code JITed by Chrome has more instructions, suffers from
increased register pressure, and has extra branches compared to
Clang-generated native code.</p>
<section id="S5.SS1.SSS1">
<h4>
<span>5.1.1 </span>Increased Code Size</h4>

<p id="S5.SS1.SSS1.p1.1">The number of instructions in the code generated by Chrome (Figure¬†<a href="#S5.F7.sf3" title="In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>7(c)</span></a>)
is 53, including <span id="S5.SS1.SSS1.p1.1.1">nop</span>s, while clang generated code (Figure¬†<a href="#S5.F7.sf2" title="In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>7(b)</span></a>)
consists of only 28 instructions.
The poor instruction selection algorithm of Chrome is one of the
reasons for increased code size.</p>
<p id="S5.SS1.SSS1.p2.1">Additionally, Chrome does not take advantage of all available memory
addressing modes for x86 instructions.
In Figure¬†<a href="#S5.F7.sf2" title="In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>7(b)</span></a> Clang uses the <span id="S5.SS1.SSS1.p2.1.1">add</span> instruction at
line¬†<a href="#lstnumberx25" title="In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>7(b)</span></a> with register addressing mode, loading
from and writing to a memory address in the same operation.
Chrome on the other hand loads the address in <span id="S5.SS1.SSS1.p2.1.2">ecx</span>, adds the
operand to <span id="S5.SS1.SSS1.p2.1.3">ecx</span>, finally storing <span id="S5.SS1.SSS1.p2.1.4">ecx</span> at the address,
requiring 3 instructions rather than one on
lines¬†<a href="#lstnumberx74" title="line 35In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>35</span></a><math id="S5.SS1.SSS1.p2.1.m1.1" alttext="-" display="inline"><semantics id="S5.SS1.SSS1.p2.1.m1.1a"><mo id="S5.SS1.SSS1.p2.1.m1.1.1" xref="S5.SS1.SSS1.p2.1.m1.1.1.cmml">‚àí</mo><annotation-xml encoding="MathML-Content" id="S5.SS1.SSS1.p2.1.m1.1b"><minus id="S5.SS1.SSS1.p2.1.m1.1.1.cmml" xref="S5.SS1.SSS1.p2.1.m1.1.1"></minus></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.SSS1.p2.1.m1.1c">-</annotation></semantics></math><a href="#lstnumberx76" title="line 37In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>37</span></a>.</p>
</section>
<section id="S5.SS1.SSS2">
<h4>
<span>5.1.2 </span>Increased Register Pressure</h4>

<p id="S5.SS1.SSS2.p1.1">Code generated by Clang in Figure¬†<a href="#S5.F7.sf2" title="In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>7(b)</span></a> does not generate any spills and uses only 10 registers.
On the other hand, the code generated by Chrome (Figure¬†<a href="#S5.F7.sf3" title="In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>7(c)</span></a>) uses 13 general purpose registers ‚Äì
all available registers (<span id="S5.SS1.SSS2.p1.1.1">r13</span> and <span id="S5.SS1.SSS2.p1.1.2">r10</span> are reserved by V8).
As described in Section¬†<a href="#S5.SS1.SSS1" title="5.1.1 Increased Code Size ‚Ä£ 5.1 Differences ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>5.1.1</span></a>, eschewing the use of the register addressing
mode of the <span id="S5.SS1.SSS2.p1.1.3">add</span> instruction requires the use of a temporary register.
All of this register inefficiency compounds, introducing three register spills to the stack at lines 1‚Äì3. Values stored on the stack are loaded again into registers at lines¬†<a href="#lstnumberx46" title="line 7In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>7</span></a>‚Äì<a href="#lstnumberx48" title="line 9In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>9</span></a> and
line¬†<a href="#lstnumberx57" title="line 18In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>18</span></a>.</p>
</section>
<section id="S5.SS1.SSS3">
<h4>
<span>5.1.3 </span>Extra Branches</h4>

<p id="S5.SS1.SSS3.p1.1">Clang (Figure¬†<a href="#S5.F7.sf2" title="In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>7(b)</span></a>) generates code with a single branch per loop by
inverting the loop counter (line¬†<a href="#lstnumberx26" title="In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>7(b)</span></a>).
In contrast, Chrome (Figure¬†<a href="#S5.F7.sf3" title="In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>7(c)</span></a>) generates more straightforward code,
which requires a conditional jump at the start of the loop.
In addition, Chrome generates extra jumps to avoid memory loads due to
register spills in the first iteration of a loop. For example, the jump at
line¬†<a href="#lstnumberx44" title="line 5In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>5</span></a> avoids the spills
at lines¬†<a href="#lstnumberx46" title="line 7In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>7</span></a>‚Äì¬†<a href="#lstnumberx48" title="line 9In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>9</span></a>.</p>
</section>
</section>
</section>
<section id="S6" lang="en">
<h2>
<span>6 </span>Performance Analysis</h2>

<figure id="S6.T3">
<table id="S6.T3.4">
<tbody><tr id="S6.T3.4.1">
<td id="S6.T3.4.1.1"><span id="S6.T3.4.1.1.1">perf<span id="S6.T3.4.1.1.1.1"> Event</span></span></td>
<td id="S6.T3.4.1.2"><span id="S6.T3.4.1.2.1">Wasm Summary</span></td>
</tr>
<tr id="S6.T3.4.2">
<td id="S6.T3.4.2.1">
<span id="S6.T3.4.2.1.1">all-loads-retired (r81d0)</span><span id="S6.T3.4.2.1.2"> (Figure¬†</span><a href="#S6.F9.sf1" title="In Figure 9 ‚Ä£ 6 Performance Analysis ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>9(a)</span></a><span id="S6.T3.4.2.1.3">)</span>
</td>
<td id="S6.T3.4.2.2"><span id="S6.T3.4.2.2.1">Increased register</span></td>
</tr>
<tr id="S6.T3.4.3">
<td id="S6.T3.4.3.1">
<span id="S6.T3.4.3.1.1">all-stores-retired (r82d0)</span><span id="S6.T3.4.3.1.2"> (Figure¬†</span><a href="#S6.F9.sf2" title="In Figure 9 ‚Ä£ 6 Performance Analysis ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>9(b)</span></a><span id="S6.T3.4.3.1.3">)</span>
</td>
<td id="S6.T3.4.3.2"><span id="S6.T3.4.3.2.1">pressure</span></td>
</tr>
<tr id="S6.T3.4.4">
<td id="S6.T3.4.4.1">
<span id="S6.T3.4.4.1.1">branches-retired (r00c4)</span><span id="S6.T3.4.4.1.2"> (Figure¬†</span><a href="#S6.F9.sf3" title="In Figure 9 ‚Ä£ 6 Performance Analysis ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>9(c)</span></a><span id="S6.T3.4.4.1.3">)</span>
</td>
<td id="S6.T3.4.4.2"><span id="S6.T3.4.4.2.1">More branch</span></td>
</tr>
<tr id="S6.T3.4.5">
<td id="S6.T3.4.5.1">
<span id="S6.T3.4.5.1.1">conditional-branches (r01c4)</span><span id="S6.T3.4.5.1.2"> (Figure¬†</span><a href="#S6.F9.sf4" title="In Figure 9 ‚Ä£ 6 Performance Analysis ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>9(d)</span></a><span id="S6.T3.4.5.1.3">)</span>
</td>
<td id="S6.T3.4.5.2"><span id="S6.T3.4.5.2.1">statements</span></td>
</tr>
<tr id="S6.T3.4.6">
<td id="S6.T3.4.6.1">
<span id="S6.T3.4.6.1.1">instructions-retired (r1c0)</span><span id="S6.T3.4.6.1.2"> (Figure¬†</span><a href="#S6.F9.sf5" title="In Figure 9 ‚Ä£ 6 Performance Analysis ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>9(e)</span></a><span id="S6.T3.4.6.1.3">)</span>
</td>
<td id="S6.T3.4.6.2"><span id="S6.T3.4.6.2.1">Increased code size</span></td>
</tr>
<tr id="S6.T3.4.7">
<td id="S6.T3.4.7.1">
<span id="S6.T3.4.7.1.1">cpu-cycles</span><span id="S6.T3.4.7.1.2"> (Figure¬†</span><a href="#S6.F9.sf6" title="In Figure 9 ‚Ä£ 6 Performance Analysis ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>9(f)</span></a><span id="S6.T3.4.7.1.3">)</span>
</td>
<td id="S6.T3.4.7.2"></td>
</tr>
<tr id="S6.T3.4.8">
<td id="S6.T3.4.8.1">
<span id="S6.T3.4.8.1.1">L1-icache-load-misses</span><span id="S6.T3.4.8.1.2"> (Figure¬†</span><a href="#S6.F10" title="Figure 10 ‚Ä£ 6.3 Increased Code Size ‚Ä£ 6 Performance Analysis ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>10</span></a><span id="S6.T3.4.8.1.3">)</span>
</td>
<td id="S6.T3.4.8.2"></td>
</tr>
</tbody></table>
<figcaption><span><span id="S6.T3.8.2.1">Table 3</span>: </span><span id="S6.T3.2.1">
Performance counters highlight
specific issues with WebAssembly code generation. When a raw PMU
event descriptor is used, it is indicated by <math id="S6.T3.2.1.m1.1" alttext="\texttt{r}n" display="inline"><semantics id="S6.T3.2.1.m1.1b"><mrow id="S6.T3.2.1.m1.1.1" xref="S6.T3.2.1.m1.1.1.cmml"><mtext id="S6.T3.2.1.m1.1.1.2" xref="S6.T3.2.1.m1.1.1.2a.cmml">r</mtext><mo lspace="0em" rspace="0em" id="S6.T3.2.1.m1.1.1.1" xref="S6.T3.2.1.m1.1.1.1.cmml">‚Äã</mo><mi id="S6.T3.2.1.m1.1.1.3" xref="S6.T3.2.1.m1.1.1.3.cmml">n</mi></mrow><annotation-xml encoding="MathML-Content" id="S6.T3.2.1.m1.1c"><apply id="S6.T3.2.1.m1.1.1.cmml" xref="S6.T3.2.1.m1.1.1"><times id="S6.T3.2.1.m1.1.1.1.cmml" xref="S6.T3.2.1.m1.1.1.1"></times><ci id="S6.T3.2.1.m1.1.1.2a.cmml" xref="S6.T3.2.1.m1.1.1.2"><mtext id="S6.T3.2.1.m1.1.1.2.cmml" xref="S6.T3.2.1.m1.1.1.2">r</mtext></ci><ci id="S6.T3.2.1.m1.1.1.3.cmml" xref="S6.T3.2.1.m1.1.1.3">ùëõ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.T3.2.1.m1.1d">\texttt{r}n</annotation></semantics></math>.</span></figcaption>
</figure>
<figure id="S6.F9">
<div>
<div>
<figure id="S6.F9.sf1"><svg id="S6.F9.sf1.pic1" height="225.22" overflow="visible" version="1.1" width="297.22"><g transform="translate(0,225.22) matrix(1 0 0 -1 0 0) translate(148.61,0) translate(0,112.61) matrix(1.0 0.0 0.0 1.0 -144 -108)" fill="#000000" stroke="#000000" stroke-width="0.4pt"><foreignObject height="156.1pt" width="208.1pt" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible"><img src="https://ar5iv.labs.arxiv.org/html/1901.09056/assets/x9.png" id="S6.F9.sf1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.g1" width="222" height="166" alt="Refer to caption"/></foreignObject></g></svg>
<figcaption><span><span id="S6.F9.sf1.3.1.1">(a)</span> </span><span id="S6.F9.sf1.4.2">all-loads-retired</span></figcaption>
</figure>
</div>
<div>
<figure id="S6.F9.sf2"><svg id="S6.F9.sf2.pic1" height="225.22" overflow="visible" version="1.1" width="297.22"><g transform="translate(0,225.22) matrix(1 0 0 -1 0 0) translate(148.61,0) translate(0,112.61) matrix(1.0 0.0 0.0 1.0 -144 -108)" fill="#000000" stroke="#000000" stroke-width="0.4pt"><foreignObject height="156.1pt" width="208.1pt" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible"><img src="https://ar5iv.labs.arxiv.org/html/1901.09056/assets/x10.png" id="S6.F9.sf2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.g1" width="222" height="166" alt="Refer to caption"/></foreignObject></g></svg>
<figcaption><span><span id="S6.F9.sf2.3.1.1">(b)</span> </span><span id="S6.F9.sf2.4.2">all-stores-retired</span></figcaption>
</figure>
</div>
<div>
<figure id="S6.F9.sf3"><svg id="S6.F9.sf3.pic1" height="225.22" overflow="visible" version="1.1" width="297.22"><g transform="translate(0,225.22) matrix(1 0 0 -1 0 0) translate(148.61,0) translate(0,112.61) matrix(1.0 0.0 0.0 1.0 -144 -108)" fill="#000000" stroke="#000000" stroke-width="0.4pt"><foreignObject height="156.1pt" width="208.1pt" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible"><img src="https://ar5iv.labs.arxiv.org/html/1901.09056/assets/x11.png" id="S6.F9.sf3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.g1" width="222" height="166" alt="Refer to caption"/></foreignObject></g></svg>
<figcaption><span><span id="S6.F9.sf3.3.1.1">(c)</span> </span><span id="S6.F9.sf3.4.2">branch-instructions-retired</span></figcaption>
</figure>
</div>

<div>
<figure id="S6.F9.sf4"><svg id="S6.F9.sf4.pic1" height="225.22" overflow="visible" version="1.1" width="297.22"><g transform="translate(0,225.22) matrix(1 0 0 -1 0 0) translate(148.61,0) translate(0,112.61) matrix(1.0 0.0 0.0 1.0 -144 -108)" fill="#000000" stroke="#000000" stroke-width="0.4pt"><foreignObject height="156.1pt" width="208.1pt" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible"><img src="https://ar5iv.labs.arxiv.org/html/1901.09056/assets/x12.png" id="S6.F9.sf4.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.g1" width="222" height="166" alt="Refer to caption"/></foreignObject></g></svg>
<figcaption><span><span id="S6.F9.sf4.3.1.1">(d)</span> </span><span id="S6.F9.sf4.4.2">conditional-branches</span></figcaption>
</figure>
</div>
<div>
<figure id="S6.F9.sf5"><svg id="S6.F9.sf5.pic1" height="225.22" overflow="visible" version="1.1" width="297.22"><g transform="translate(0,225.22) matrix(1 0 0 -1 0 0) translate(148.61,0) translate(0,112.61) matrix(1.0 0.0 0.0 1.0 -144 -108)" fill="#000000" stroke="#000000" stroke-width="0.4pt"><foreignObject height="156.1pt" width="208.1pt" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible"><img src="https://ar5iv.labs.arxiv.org/html/1901.09056/assets/x13.png" id="S6.F9.sf5.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.g1" width="222" height="166" alt="Refer to caption"/></foreignObject></g></svg>
<figcaption><span><span id="S6.F9.sf5.3.1.1">(e)</span> </span><span id="S6.F9.sf5.4.2">instructions-retired</span></figcaption>
</figure>
</div>
<div>
<figure id="S6.F9.sf6"><svg id="S6.F9.sf6.pic1" height="225.22" overflow="visible" version="1.1" width="297.22"><g transform="translate(0,225.22) matrix(1 0 0 -1 0 0) translate(148.61,0) translate(0,112.61) matrix(1.0 0.0 0.0 1.0 -144 -108)" fill="#000000" stroke="#000000" stroke-width="0.4pt"><foreignObject height="156.1pt" width="208.1pt" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible"><img src="https://ar5iv.labs.arxiv.org/html/1901.09056/assets/x14.png" id="S6.F9.sf6.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.g1" width="222" height="166" alt="Refer to caption"/></foreignObject></g></svg>
<figcaption><span><span id="S6.F9.sf6.3.1.1">(f)</span> </span><span id="S6.F9.sf6.4.2">cpu-cycles</span></figcaption>
</figure>
</div>
</div>
<figcaption><span><span id="S6.F9.2.1.1">Figure 9</span>: </span><span id="S6.F9.3.2">Processor performance counter samples for WebAssembly relative to
native code.</span></figcaption>
</figure>
<p id="S6.p1.1">We use <span id="S6.p1.1.1">Browsix-SPEC</span> to record measurements from all supported performance
counters on our system for the SPEC CPU benchmarks compiled
to WebAssembly and executed in Chrome and Firefox, and
the SPEC CPU benchmarks compiled to native code
(Section¬†<a href="#S3" title="3 Browsix-SPEC ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>3</span></a>).</p>
<p id="S6.p2.1">Table¬†<a href="#S6.T3" title="Table 3 ‚Ä£ 6 Performance Analysis ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>3</span></a> lists the performance counters we use
here, along with a summary of the impact of <span id="S6.p2.1.1">Browsix-Wasm</span> performance
on these counters compared to native. We use these results to explain
the performance overhead of WebAssembly over native code. Our analysis
shows that the inefficiences described in Section¬†<a href="#S5" title="5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>5</span></a>
are pervasive and translate to reduced performance across the SPEC CPU
benchmark suite.</p>
<section id="S6.SS1">
<h3>
<span>6.1 </span>Increased Register Pressure</h3>

<p id="S6.SS1.p1.1">This section focuses on two performance counters that show the effect
of increased register pressure. Figure¬†<a href="#S6.F9.sf1" title="In Figure 9 ‚Ä£ 6 Performance Analysis ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>9(a)</span></a>
presents the number of <em id="S6.SS1.p1.1.1">load</em> instructions retired by WebAssembly-compiled
SPEC benchmarks in Chrome and Firefox, relative to the number of load
instructions retired in native code. Similarly,
Figure¬†<a href="#S6.F9.sf2" title="In Figure 9 ‚Ä£ 6 Performance Analysis ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>9(b)</span></a> shows the number of <em id="S6.SS1.p1.1.2">store</em>
instructions retired. Note that a ‚Äúretired‚Äù instruction is an
instruction which leaves the instruction pipeline and its results are
correct and visible in the architectural state (that is, not
speculative).</p>
<p id="S6.SS1.p2.4">Code generated by Chrome has 2.02<math id="S6.SS1.p2.1.m1.1" alttext="\times" display="inline"><semantics id="S6.SS1.p2.1.m1.1a"><mo id="S6.SS1.p2.1.m1.1.1" xref="S6.SS1.p2.1.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S6.SS1.p2.1.m1.1b"><times id="S6.SS1.p2.1.m1.1.1.cmml" xref="S6.SS1.p2.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.SS1.p2.1.m1.1c">\times</annotation></semantics></math> more load
instructions retired and 2.30<math id="S6.SS1.p2.2.m2.1" alttext="\times" display="inline"><semantics id="S6.SS1.p2.2.m2.1a"><mo id="S6.SS1.p2.2.m2.1.1" xref="S6.SS1.p2.2.m2.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S6.SS1.p2.2.m2.1b"><times id="S6.SS1.p2.2.m2.1.1.cmml" xref="S6.SS1.p2.2.m2.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.SS1.p2.2.m2.1c">\times</annotation></semantics></math> more store instructions retired than native code.
Code generated by Firefox has 1.92<math id="S6.SS1.p2.3.m3.1" alttext="\times" display="inline"><semantics id="S6.SS1.p2.3.m3.1a"><mo id="S6.SS1.p2.3.m3.1.1" xref="S6.SS1.p2.3.m3.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S6.SS1.p2.3.m3.1b"><times id="S6.SS1.p2.3.m3.1.1.cmml" xref="S6.SS1.p2.3.m3.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.SS1.p2.3.m3.1c">\times</annotation></semantics></math> more load instructions
retired and 2.16<math id="S6.SS1.p2.4.m4.1" alttext="\times" display="inline"><semantics id="S6.SS1.p2.4.m4.1a"><mo id="S6.SS1.p2.4.m4.1.1" xref="S6.SS1.p2.4.m4.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S6.SS1.p2.4.m4.1b"><times id="S6.SS1.p2.4.m4.1.1.cmml" xref="S6.SS1.p2.4.m4.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.SS1.p2.4.m4.1c">\times</annotation></semantics></math> more store instructions retired than native
code.
These results show that the WebAssembly-compiled SPEC CPU
benchmarks suffer from increased register pressure and thus
increased memory references. Below, we outline the reasons
for this increased register pressure.</p>
<section id="S6.SS1.SSS1">
<h4>
<span>6.1.1 </span>Reserved Registers</h4>

<p id="S6.SS1.SSS1.p1.1">In Chrome,
<span id="S6.SS1.SSS1.p1.1.1">matmul</span> generates three register spills but does not use two
x86-64 registers: <span id="S6.SS1.SSS1.p1.1.2">r13</span> and <span id="S6.SS1.SSS1.p1.1.3">r10</span>
(Figure¬†<a href="#S5.F7.sf3" title="In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>7(c)</span></a>, lines¬†<a href="#lstnumberx46" title="line 7In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>7</span></a>‚Äì¬†<a href="#lstnumberx48" title="line 9In Figure 7 ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>9</span></a>).
This occurs because Chrome reserves these two registers.
For the JavaScript garbage collector, Chrome reserves <span id="S6.SS1.SSS1.p1.1.4">r13</span> to
point to an array of GC roots at all times. In addition, Chrome
uses <span id="S6.SS1.SSS1.p1.1.5">r10</span> and <span id="S6.SS1.SSS1.p1.1.6">xmm13</span> as dedicated scratch registers.
Similarly, Firefox reserves <span id="S6.SS1.SSS1.p1.1.7">r15</span> as a pointer to the start of the heap,
and <span id="S6.SS1.SSS1.p1.1.8">r11</span> and <span id="S6.SS1.SSS1.p1.1.9">xmm15</span> are JavaScript scratch registers.
None of these registers are available to WebAssembly code.</p>
</section>
<section id="S6.SS1.SSS2">
<h4>
<span>6.1.2 </span>Poor Register Allocation</h4>

<p id="S6.SS1.SSS2.p1.1">Beyond a reduced set of registers available to allocate, both Chrome
and Firefox do a poor job of allocating the registers they have. For
example, the code generated by Chrome for <span id="S6.SS1.SSS2.p1.1.1">matmul</span> uses
12 registers while the native code generated by Clang only uses 10
registers (Section¬†<a href="#S5.SS1.SSS2" title="5.1.2 Increased Register Pressure ‚Ä£ 5.1 Differences ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>5.1.2</span></a>). This increased register
usage‚Äîin both Firefox and Chrome‚Äîis because of their use of fast
but not particularly effective register allocators. Chrome and Firefox
both use a linear scan register
allocator¬†<cite>[<a href="#bib.bib36" title="">36</a>]</cite>, while Clang uses a
greedy graph-coloring register allocator¬†<cite>[<a href="#bib.bib3" title="">3</a>]</cite>, which consistently generates better code.</p>
</section>
<section id="S6.SS1.SSS3">
<h4>
<span>6.1.3 </span>x86 Addressing Modes</h4>

<p id="S6.SS1.SSS3.p1.1">The x86-64 instruction set offers several addressing modes for each
operand, including a <em id="S6.SS1.SSS3.p1.1.1">register</em> mode, where the instruction reads
data from register or writes data to a register, and memory address
modes like <em id="S6.SS1.SSS3.p1.1.2">register indirect</em> or <em id="S6.SS1.SSS3.p1.1.3">direct offset</em>
addressing, where the operand resides in a memory address and the
instruction can read from or write to that address. A code generator
could avoid unnecessary register pressure by using the latter
modes. However, Chrome does not take advantage of these modes. For
example, the code generated by Chrome for <span id="S6.SS1.SSS3.p1.1.4">matmul</span> does not use
the register indirect addressing mode for the <span id="S6.SS1.SSS3.p1.1.5">add</span> instruction
(Section¬†<a href="#S5.SS1.SSS2" title="5.1.2 Increased Register Pressure ‚Ä£ 5.1 Differences ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>5.1.2</span></a>), creating unnecessary register
pressure.</p>
</section>
</section>
<section id="S6.SS2">
<h3>
<span>6.2 </span>Extra Branch Instructions</h3>

<p id="S6.SS2.p1.4">This section focuses on two performance counters that measure the number of branch instructions
executed.
Figure¬†<a href="#S6.F9.sf3" title="In Figure 9 ‚Ä£ 6 Performance Analysis ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>9(c)</span></a> shows the number of branch
instructions retired by WebAssembly,
relative to the number of branch instructions
retired in native code. Similarly, Figure¬†<a href="#S6.F9.sf4" title="In Figure 9 ‚Ä£ 6 Performance Analysis ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>9(d)</span></a>
shows the number of <em id="S6.SS2.p1.4.1">conditional</em> branch instructions retired.
In Chrome, there are <math id="S6.SS2.p1.1.m1.1" alttext="1.75\times" display="inline"><semantics id="S6.SS2.p1.1.m1.1a"><mrow id="S6.SS2.p1.1.m1.1b"><mn id="S6.SS2.p1.1.m1.1.1">1.75</mn><mo lspace="0.222em" id="S6.SS2.p1.1.m1.1.2">√ó</mo></mrow><annotation encoding="application/x-tex" id="S6.SS2.p1.1.m1.1c">1.75\times</annotation></semantics></math> and <math id="S6.SS2.p1.2.m2.1" alttext="1.65\times" display="inline"><semantics id="S6.SS2.p1.2.m2.1a"><mrow id="S6.SS2.p1.2.m2.1b"><mn id="S6.SS2.p1.2.m2.1.1">1.65</mn><mo lspace="0.222em" id="S6.SS2.p1.2.m2.1.2">√ó</mo></mrow><annotation encoding="application/x-tex" id="S6.SS2.p1.2.m2.1c">1.65\times</annotation></semantics></math> more unconditional
and conditional branch instructions retired respectively, whereas in Firefox, there
are <math id="S6.SS2.p1.3.m3.1" alttext="1.65\times" display="inline"><semantics id="S6.SS2.p1.3.m3.1a"><mrow id="S6.SS2.p1.3.m3.1b"><mn id="S6.SS2.p1.3.m3.1.1">1.65</mn><mo lspace="0.222em" id="S6.SS2.p1.3.m3.1.2">√ó</mo></mrow><annotation encoding="application/x-tex" id="S6.SS2.p1.3.m3.1c">1.65\times</annotation></semantics></math> and <math id="S6.SS2.p1.4.m4.1" alttext="1.62\times" display="inline"><semantics id="S6.SS2.p1.4.m4.1a"><mrow id="S6.SS2.p1.4.m4.1b"><mn id="S6.SS2.p1.4.m4.1.1">1.62</mn><mo lspace="0.222em" id="S6.SS2.p1.4.m4.1.2">√ó</mo></mrow><annotation encoding="application/x-tex" id="S6.SS2.p1.4.m4.1c">1.62\times</annotation></semantics></math> more retired.
These results show that all the SPEC CPU benchmarks incur extra branches, and
we explain why below.</p>
<section id="S6.SS2.SSS1">
<h4>
<span>6.2.1 </span>Extra Jump Statements for Loops</h4>

<p id="S6.SS2.SSS1.p1.1">As with <span id="S6.SS2.SSS1.p1.1.1">matmul</span> (Section¬†<a href="#S5.SS1.SSS3" title="5.1.3 Extra Branches ‚Ä£ 5.1 Differences ‚Ä£ 5 Case Study: Matrix Multiplication ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>5.1.3</span></a>), Chrome
generates unnecessary jump statements for loops, leading to
significantly more branch instructions than Firefox.</p>
</section>
<section id="S6.SS2.SSS2">
<h4>
<span>6.2.2 </span>Stack Overflow Checks Per Function Call</h4>

<p id="S6.SS2.SSS2.p1.1">A WebAssembly program tracks the current stack size with a global variable
that it increases on every function call. The programmer can define
the maximum stack size for the program. To ensure that a program does
not overflow the stack, both Chrome and Firefox add stack checks at
the start of each function to detect if the current stack size is less
than the maximum stack size. These checks includes extra comparison
and conditional jump instructions, which must be executed on every
function call.</p>
</section>
<section id="S6.SS2.SSS3">
<h4>
<span>6.2.3 </span>Function Table Indexing Checks</h4>

<p id="S6.SS2.SSS3.p1.1">WebAssembly dynamically checks all indirect calls to ensure that the target is a
valid function and that the function‚Äôs type at runtime is the same as the type
specified at the call site. In a WebAssembly module, the function table stores
the list of functions and their types, and the code generated by WebAssembly
uses the function table to implement these checks.
These checks are required when calling function
pointers and virtual functions in C/C++. The checks lead to extra comparison
and conditional jump instructions, which are executed before every indirect
function call.</p>
</section>
</section>
<section id="S6.SS3">
<h3>
<span>6.3 </span>Increased Code Size</h3>

<p id="S6.SS3.p1.1">The code generated by Chrome and Firefox is considerably larger than
the code generated by Clang.
We use three performance counters to measure this effect. (i)
Figure¬†<a href="#S6.F9.sf5" title="In Figure 9 ‚Ä£ 6 Performance Analysis ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>9(e)</span></a> shows the number of
<em id="S6.SS3.p1.1.1">instructions retired</em> by benchmarks compiled to WebAssembly and
executed in Chrome and Firefox relative to the number of instructions
retired in native code. Similarly, Figure¬†<a href="#S6.F9.sf6" title="In Figure 9 ‚Ä£ 6 Performance Analysis ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>9(f)</span></a> shows
the relative number of <em id="S6.SS3.p1.1.2">CPU cycles</em> spent by benchmarks compiled to
WebAssembly, and Figure¬†<a href="#S6.F10" title="Figure 10 ‚Ä£ 6.3 Increased Code Size ‚Ä£ 6 Performance Analysis ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>10</span></a> shows the relative number of
<em id="S6.SS3.p1.1.3">L1 instruction cache load misses</em>.</p>
<p id="S6.SS3.p2.4">Figure¬†<a href="#S6.F9.sf5" title="In Figure 9 ‚Ä£ 6 Performance Analysis ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>9(e)</span></a> shows that Chrome executes
an average of 1.80<math id="S6.SS3.p2.1.m1.1" alttext="\times" display="inline"><semantics id="S6.SS3.p2.1.m1.1a"><mo id="S6.SS3.p2.1.m1.1.1" xref="S6.SS3.p2.1.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S6.SS3.p2.1.m1.1b"><times id="S6.SS3.p2.1.m1.1.1.cmml" xref="S6.SS3.p2.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p2.1.m1.1c">\times</annotation></semantics></math> more instructions than native code and Firefox executes an average of 1.75<math id="S6.SS3.p2.2.m2.1" alttext="\times" display="inline"><semantics id="S6.SS3.p2.2.m2.1a"><mo id="S6.SS3.p2.2.m2.1.1" xref="S6.SS3.p2.2.m2.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S6.SS3.p2.2.m2.1b"><times id="S6.SS3.p2.2.m2.1.1.cmml" xref="S6.SS3.p2.2.m2.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p2.2.m2.1c">\times</annotation></semantics></math> more
instructions than native code. Due to poor instruction
selection, a poor register allocator generating more register spills
(Section¬†<a href="#S6.SS1" title="6.1 Increased Register Pressure ‚Ä£ 6 Performance Analysis ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>6.1</span></a>), and extra branch
statements (Section¬†<a href="#S6.SS2" title="6.2 Extra Branch Instructions ‚Ä£ 6 Performance Analysis ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>6.2</span></a>), the size of generated
code for WebAssembly is greater than native code, leading to more
instructions being executed. This increase in the number of
instructions executed leads to increased L1 instruction cache misses
in Figure¬†<a href="#S6.F10" title="Figure 10 ‚Ä£ 6.3 Increased Code Size ‚Ä£ 6 Performance Analysis ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>10</span></a>. On average, Chrome suffers
2.83<math id="S6.SS3.p2.3.m3.1" alttext="\times" display="inline"><semantics id="S6.SS3.p2.3.m3.1a"><mo id="S6.SS3.p2.3.m3.1.1" xref="S6.SS3.p2.3.m3.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S6.SS3.p2.3.m3.1b"><times id="S6.SS3.p2.3.m3.1.1.cmml" xref="S6.SS3.p2.3.m3.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p2.3.m3.1c">\times</annotation></semantics></math> more I-cache misses than native code,
and Firefox suffers from 2.04<math id="S6.SS3.p2.4.m4.1" alttext="\times" display="inline"><semantics id="S6.SS3.p2.4.m4.1a"><mo id="S6.SS3.p2.4.m4.1.1" xref="S6.SS3.p2.4.m4.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S6.SS3.p2.4.m4.1b"><times id="S6.SS3.p2.4.m4.1.1.cmml" xref="S6.SS3.p2.4.m4.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p2.4.m4.1c">\times</annotation></semantics></math> more L1 instruction cache misses
than native code. More cache misses means that more CPU cycles are
spent waiting for the instruction to be fetched.</p>
<p id="S6.SS3.p3.5">We note one anomaly: although <span id="S6.SS3.p3.5.1">429.mcf</span> has 1.6<math id="S6.SS3.p3.1.m1.1" alttext="\times" display="inline"><semantics id="S6.SS3.p3.1.m1.1a"><mo id="S6.SS3.p3.1.m1.1.1" xref="S6.SS3.p3.1.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S6.SS3.p3.1.m1.1b"><times id="S6.SS3.p3.1.m1.1.1.cmml" xref="S6.SS3.p3.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p3.1.m1.1c">\times</annotation></semantics></math> more
instructions retired in Chrome than native code and 1.5<math id="S6.SS3.p3.2.m2.1" alttext="\times" display="inline"><semantics id="S6.SS3.p3.2.m2.1a"><mo id="S6.SS3.p3.2.m2.1.1" xref="S6.SS3.p3.2.m2.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S6.SS3.p3.2.m2.1b"><times id="S6.SS3.p3.2.m2.1.1.cmml" xref="S6.SS3.p3.2.m2.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p3.2.m2.1c">\times</annotation></semantics></math> more
instructions retired in Firefox than native code, it runs <em id="S6.SS3.p3.5.2">faster</em>
than native code. Figure¬†<a href="#S3.F3.sf2" title="In Figure 3 ‚Ä£ 3.1 Browsix-SPEC Benchmark Execution ‚Ä£ 3 Browsix-SPEC ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>3(b)</span></a> shows that its
slowdown relative to native is 0.81<math id="S6.SS3.p3.3.m3.1" alttext="\times" display="inline"><semantics id="S6.SS3.p3.3.m3.1a"><mo id="S6.SS3.p3.3.m3.1.1" xref="S6.SS3.p3.3.m3.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S6.SS3.p3.3.m3.1b"><times id="S6.SS3.p3.3.m3.1.1.cmml" xref="S6.SS3.p3.3.m3.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p3.3.m3.1c">\times</annotation></semantics></math> in Chrome and 0.83<math id="S6.SS3.p3.4.m4.1" alttext="\times" display="inline"><semantics id="S6.SS3.p3.4.m4.1a"><mo id="S6.SS3.p3.4.m4.1.1" xref="S6.SS3.p3.4.m4.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S6.SS3.p3.4.m4.1b"><times id="S6.SS3.p3.4.m4.1.1.cmml" xref="S6.SS3.p3.4.m4.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p3.4.m4.1c">\times</annotation></semantics></math> in Firefox.
The reason for this anomaly is
attributable directly to its lower number of L1 instruction cache
misses. <span id="S6.SS3.p3.5.3">429.mcf</span> contains a main loop and most of the instructions in the loop fit in the L1 instruction cache. Similarly,
<span id="S6.SS3.p3.5.4">433.milc</span> performance is better due to fewer L1 instruction cache misses. In <span id="S6.SS3.p3.5.5">450.soplex</span> there are 4.6<math id="S6.SS3.p3.5.m5.1" alttext="\times" display="inline"><semantics id="S6.SS3.p3.5.m5.1a"><mo id="S6.SS3.p3.5.m5.1.1" xref="S6.SS3.p3.5.m5.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S6.SS3.p3.5.m5.1b"><times id="S6.SS3.p3.5.m5.1.1.cmml" xref="S6.SS3.p3.5.m5.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p3.5.m5.1c">\times</annotation></semantics></math> more L1 instruction cache misses in Chrome and Firefox than native because of several virtual functions being executed, leading to more indirect function calls.</p>
<figure id="S6.F10"><svg id="S6.F10.pic1" height="11.22" overflow="visible" version="1.1" width="11.22"><g transform="translate(0,11.22) matrix(1 0 0 -1 0 0) translate(5.61,0) translate(0,5.61) matrix(1.0 0.0 0.0 1.0 -1 -1)" fill="#000000" stroke="#000000" stroke-width="0.4pt"><foreignObject height="1.4pt" width="1.4pt" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible"><img src="" id="S6.F10.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.g1" alt="Refer to caption"/></foreignObject></g></svg>
<figcaption><span><span id="S6.F10.8.3.1">Figure 10</span>: </span><span id="S6.F10.4.2"> <span id="S6.F10.4.2.1">L1-icache-load-misses</span> samples counted for SPEC
CPU compiled to WebAssembly executed in Chrome and Firefox, relative
to native. <span id="S6.F10.4.2.2">458.sjeng</span> not shown in the graph exhibits 26.5<math id="S6.F10.3.1.m1.1" alttext="\times" display="inline"><semantics id="S6.F10.3.1.m1.1b"><mo id="S6.F10.3.1.m1.1.1" xref="S6.F10.3.1.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S6.F10.3.1.m1.1c"><times id="S6.F10.3.1.m1.1.1.cmml" xref="S6.F10.3.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.F10.3.1.m1.1d">\times</annotation></semantics></math> more L1 instruction cache misses in Chrome and 18.6<math id="S6.F10.4.2.m2.1" alttext="\times" display="inline"><semantics id="S6.F10.4.2.m2.1b"><mo id="S6.F10.4.2.m2.1.1" xref="S6.F10.4.2.m2.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S6.F10.4.2.m2.1c"><times id="S6.F10.4.2.m2.1.1.cmml" xref="S6.F10.4.2.m2.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.F10.4.2.m2.1d">\times</annotation></semantics></math> more in Firefox.
The increased code size generated for WebAssembly leads to
more instruction cache misses.
</span></figcaption>
</figure>
<figure id="S6.T4">
<table id="S6.T4.14">
<tbody><tr id="S6.T4.14.15">
<td id="S6.T4.14.15.1"><span id="S6.T4.14.15.1.1">Performance Counter</span></td>
<td id="S6.T4.14.15.2"><span id="S6.T4.14.15.2.1">Chrome</span></td>
<td id="S6.T4.14.15.3"><span id="S6.T4.14.15.3.1">Firefox</span></td>
</tr>
<tr id="S6.T4.2.2">
<td id="S6.T4.2.2.3"><span id="S6.T4.2.2.3.1">all-loads-retired</span></td>
<td id="S6.T4.1.1.1">2.02<math id="S6.T4.1.1.1.m1.1" alttext="\times" display="inline"><semantics id="S6.T4.1.1.1.m1.1a"><mo id="S6.T4.1.1.1.m1.1.1" xref="S6.T4.1.1.1.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S6.T4.1.1.1.m1.1b"><times id="S6.T4.1.1.1.m1.1.1.cmml" xref="S6.T4.1.1.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.T4.1.1.1.m1.1c">\times</annotation></semantics></math>
</td>
<td id="S6.T4.2.2.2">1.92<math id="S6.T4.2.2.2.m1.1" alttext="\times" display="inline"><semantics id="S6.T4.2.2.2.m1.1a"><mo id="S6.T4.2.2.2.m1.1.1" xref="S6.T4.2.2.2.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S6.T4.2.2.2.m1.1b"><times id="S6.T4.2.2.2.m1.1.1.cmml" xref="S6.T4.2.2.2.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.T4.2.2.2.m1.1c">\times</annotation></semantics></math>
</td>
</tr>
<tr id="S6.T4.4.4">
<td id="S6.T4.4.4.3"><span id="S6.T4.4.4.3.1">all-stores-retired</span></td>
<td id="S6.T4.3.3.1">2.30<math id="S6.T4.3.3.1.m1.1" alttext="\times" display="inline"><semantics id="S6.T4.3.3.1.m1.1a"><mo id="S6.T4.3.3.1.m1.1.1" xref="S6.T4.3.3.1.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S6.T4.3.3.1.m1.1b"><times id="S6.T4.3.3.1.m1.1.1.cmml" xref="S6.T4.3.3.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.T4.3.3.1.m1.1c">\times</annotation></semantics></math>
</td>
<td id="S6.T4.4.4.2">2.16<math id="S6.T4.4.4.2.m1.1" alttext="\times" display="inline"><semantics id="S6.T4.4.4.2.m1.1a"><mo id="S6.T4.4.4.2.m1.1.1" xref="S6.T4.4.4.2.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S6.T4.4.4.2.m1.1b"><times id="S6.T4.4.4.2.m1.1.1.cmml" xref="S6.T4.4.4.2.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.T4.4.4.2.m1.1c">\times</annotation></semantics></math>
</td>
</tr>
<tr id="S6.T4.6.6">
<td id="S6.T4.6.6.3"><span id="S6.T4.6.6.3.1">branch-instructions-retired</span></td>
<td id="S6.T4.5.5.1">1.75<math id="S6.T4.5.5.1.m1.1" alttext="\times" display="inline"><semantics id="S6.T4.5.5.1.m1.1a"><mo id="S6.T4.5.5.1.m1.1.1" xref="S6.T4.5.5.1.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S6.T4.5.5.1.m1.1b"><times id="S6.T4.5.5.1.m1.1.1.cmml" xref="S6.T4.5.5.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.T4.5.5.1.m1.1c">\times</annotation></semantics></math>
</td>
<td id="S6.T4.6.6.2">1.65<math id="S6.T4.6.6.2.m1.1" alttext="\times" display="inline"><semantics id="S6.T4.6.6.2.m1.1a"><mo id="S6.T4.6.6.2.m1.1.1" xref="S6.T4.6.6.2.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S6.T4.6.6.2.m1.1b"><times id="S6.T4.6.6.2.m1.1.1.cmml" xref="S6.T4.6.6.2.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.T4.6.6.2.m1.1c">\times</annotation></semantics></math>
</td>
</tr>
<tr id="S6.T4.8.8">
<td id="S6.T4.8.8.3"><span id="S6.T4.8.8.3.1">conditional-branches</span></td>
<td id="S6.T4.7.7.1">1.65<math id="S6.T4.7.7.1.m1.1" alttext="\times" display="inline"><semantics id="S6.T4.7.7.1.m1.1a"><mo id="S6.T4.7.7.1.m1.1.1" xref="S6.T4.7.7.1.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S6.T4.7.7.1.m1.1b"><times id="S6.T4.7.7.1.m1.1.1.cmml" xref="S6.T4.7.7.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.T4.7.7.1.m1.1c">\times</annotation></semantics></math>
</td>
<td id="S6.T4.8.8.2">1.62<math id="S6.T4.8.8.2.m1.1" alttext="\times" display="inline"><semantics id="S6.T4.8.8.2.m1.1a"><mo id="S6.T4.8.8.2.m1.1.1" xref="S6.T4.8.8.2.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S6.T4.8.8.2.m1.1b"><times id="S6.T4.8.8.2.m1.1.1.cmml" xref="S6.T4.8.8.2.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.T4.8.8.2.m1.1c">\times</annotation></semantics></math>
</td>
</tr>
<tr id="S6.T4.10.10">
<td id="S6.T4.10.10.3"><span id="S6.T4.10.10.3.1">instructions-retired</span></td>
<td id="S6.T4.9.9.1">1.80<math id="S6.T4.9.9.1.m1.1" alttext="\times" display="inline"><semantics id="S6.T4.9.9.1.m1.1a"><mo id="S6.T4.9.9.1.m1.1.1" xref="S6.T4.9.9.1.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S6.T4.9.9.1.m1.1b"><times id="S6.T4.9.9.1.m1.1.1.cmml" xref="S6.T4.9.9.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.T4.9.9.1.m1.1c">\times</annotation></semantics></math>
</td>
<td id="S6.T4.10.10.2">1.75<math id="S6.T4.10.10.2.m1.1" alttext="\times" display="inline"><semantics id="S6.T4.10.10.2.m1.1a"><mo id="S6.T4.10.10.2.m1.1.1" xref="S6.T4.10.10.2.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S6.T4.10.10.2.m1.1b"><times id="S6.T4.10.10.2.m1.1.1.cmml" xref="S6.T4.10.10.2.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.T4.10.10.2.m1.1c">\times</annotation></semantics></math>
</td>
</tr>
<tr id="S6.T4.12.12">
<td id="S6.T4.12.12.3"><span id="S6.T4.12.12.3.1">cpu-cycles</span></td>
<td id="S6.T4.11.11.1">1.54<math id="S6.T4.11.11.1.m1.1" alttext="\times" display="inline"><semantics id="S6.T4.11.11.1.m1.1a"><mo id="S6.T4.11.11.1.m1.1.1" xref="S6.T4.11.11.1.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S6.T4.11.11.1.m1.1b"><times id="S6.T4.11.11.1.m1.1.1.cmml" xref="S6.T4.11.11.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.T4.11.11.1.m1.1c">\times</annotation></semantics></math>
</td>
<td id="S6.T4.12.12.2">1.38<math id="S6.T4.12.12.2.m1.1" alttext="\times" display="inline"><semantics id="S6.T4.12.12.2.m1.1a"><mo id="S6.T4.12.12.2.m1.1.1" xref="S6.T4.12.12.2.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S6.T4.12.12.2.m1.1b"><times id="S6.T4.12.12.2.m1.1.1.cmml" xref="S6.T4.12.12.2.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.T4.12.12.2.m1.1c">\times</annotation></semantics></math>
</td>
</tr>
<tr id="S6.T4.14.14">
<td id="S6.T4.14.14.3"><span id="S6.T4.14.14.3.1">L1-icache-load-misses</span></td>
<td id="S6.T4.13.13.1">2.83<math id="S6.T4.13.13.1.m1.1" alttext="\times" display="inline"><semantics id="S6.T4.13.13.1.m1.1a"><mo id="S6.T4.13.13.1.m1.1.1" xref="S6.T4.13.13.1.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S6.T4.13.13.1.m1.1b"><times id="S6.T4.13.13.1.m1.1.1.cmml" xref="S6.T4.13.13.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.T4.13.13.1.m1.1c">\times</annotation></semantics></math>
</td>
<td id="S6.T4.14.14.2">2.04<math id="S6.T4.14.14.2.m1.1" alttext="\times" display="inline"><semantics id="S6.T4.14.14.2.m1.1a"><mo id="S6.T4.14.14.2.m1.1.1" xref="S6.T4.14.14.2.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S6.T4.14.14.2.m1.1b"><times id="S6.T4.14.14.2.m1.1.1.cmml" xref="S6.T4.14.14.2.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.T4.14.14.2.m1.1c">\times</annotation></semantics></math>
</td>
</tr>
</tbody></table>
<figcaption><span><span id="S6.T4.16.1.1">Table 4</span>: </span><span id="S6.T4.17.2">The geomean of performance counter increases for the SPEC benchmarks using WebAssembly.</span></figcaption>
</figure>
</section>
<section id="S6.SS4">
<h3>
<span>6.4 </span>Discussion</h3>

<p id="S6.SS4.p1.1">It is worth asking if the performance issues identified here are
fundamental. We believe that two of the identified issues are not:
that is, they could be ameliorated by improved implementations.
WebAssembly implementations today use register allocators
(¬ß<a href="#S6.SS1.SSS2" title="6.1.2 Poor Register Allocation ‚Ä£ 6.1 Increased Register Pressure ‚Ä£ 6 Performance Analysis ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>6.1.2</span></a>) and code generators (¬ß<a href="#S6.SS2.SSS1" title="6.2.1 Extra Jump Statements for Loops ‚Ä£ 6.2 Extra Branch Instructions ‚Ä£ 6 Performance Analysis ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>6.2.1</span></a>)
that perform worse than Clang‚Äôs counterparts. However, an offline
compiler like Clang can spend considerably more time to generate
better code, whereas WebAssembly compilers must be fast enough to run
online. Therefore, solutions adopted by other JITs, such as
further optimizing hot code, are likely applicable
here¬†<cite>[<a href="#bib.bib19" title="">19</a>, <a href="#bib.bib32" title="">32</a>]</cite>.</p>
<p id="S6.SS4.p2.1">The four other issues that we have identified appear to arise from the
design constraints of WebAssembly: the stack
overflow checks (¬ß<a href="#S6.SS2.SSS2" title="6.2.2 Stack Overflow Checks Per Function Call ‚Ä£ 6.2 Extra Branch Instructions ‚Ä£ 6 Performance Analysis ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>6.2.2</span></a>), indirect call checks
(¬ß<a href="#S6.SS2.SSS3" title="6.2.3 Function Table Indexing Checks ‚Ä£ 6.2 Extra Branch Instructions ‚Ä£ 6 Performance Analysis ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>6.2.3</span></a>), and reserved registers (¬ß<a href="#S6.SS1.SSS1" title="6.1.1 Reserved Registers ‚Ä£ 6.1 Increased Register Pressure ‚Ä£ 6 Performance Analysis ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>6.1.1</span></a>)
have a runtime cost and lead to increased code
size (¬ß<a href="#S6.SS3" title="6.3 Increased Code Size ‚Ä£ 6 Performance Analysis ‚Ä£ Not So Fast: Analyzing the Performance of WebAssembly vs. Native Code"><span>6.3</span></a>). Unfortunately, these checks are
necessary for WebAssembly‚Äôs safety guarantees. A redesigned WebAssembly, with richer
types for memory and function pointers¬†<cite>[<a href="#bib.bib23" title="">23</a>]</cite>, might be able to perform
some of these checks at compile time, but that could complicate
the implementation of compilers that produce WebAssembly.
Finally, a WebAssembly implementation in a browser must interoperate with a
high-performance JavaScript implementation, which may impose its own
constraints. For example, current JavaScript implementations reserve
a few registers for their own use, which increases register pressure
on WebAssembly.

</p>
</section>
</section>
<section id="S7" lang="en">
<h2>
<span>7 </span>Related Work</h2>

<section id="S7.SS0.SSS0.Px1">
<h5>Precursors to WebAssembly</h5>

<p id="S7.SS0.SSS0.Px1.p1.1">There have been several attempts to execute native code in browsers, but none
of them met all the design criteria of WebAssembly.</p>
<p id="S7.SS0.SSS0.Px1.p2.1">ActiveX¬†<cite>[<a href="#bib.bib13" title="">13</a>]</cite> allows web pages to embed signed x86 libraries,
however these binaries have unrestricted access to the Windows API.
In contrast, WebAssembly modules are sandboxed. ActiveX is now a deprecated
technology.</p>
<p id="S7.SS0.SSS0.Px1.p3.1">Native Client¬†<cite>[<a href="#bib.bib37" title="">37</a>, <a href="#bib.bib11" title="">11</a>]</cite> (NaCl)
adds a module to a web application that contains platform specific
machine code. NaCl introduced sandboxing techniques to execute platform
specific machine code at near native speed. Since NaCl relies on static
validation of machine code, it requires code generators to follow certain
patterns, hence, supporting only a subset of the x86, ARM, and MIPS instructions sets in
the browser. To address the inherent portability issue of NaCl, Portable NaCl
(PNaCl)¬†<cite>[<a href="#bib.bib14" title="">14</a>]</cite> uses LLVM Bitcode as a binary format. However, PNaCl does not
provide significant improvement in compactness over NaCl and still exposes
compiler and/or platform-specific details such as the call stack layout. Both
have been deprecated in favor of WebAssembly.</p>
<p id="S7.SS0.SSS0.Px1.p4.1"><span id="S7.SS0.SSS0.Px1.p4.1.1">asm.js</span> is a subset of JavaScript
designed to be compiled efficiently to native code. <span id="S7.SS0.SSS0.Px1.p4.1.2">asm.js</span> uses type coercions
to avoid the dynamic type system of JavaScript. Since <span id="S7.SS0.SSS0.Px1.p4.1.3">asm.js</span> is a subset of JavaScript,
adding all native features to <span id="S7.SS0.SSS0.Px1.p4.1.4">asm.js</span> such as 64-bit integers will first require extending
JavaScript. Compared to <span id="S7.SS0.SSS0.Px1.p4.1.5">asm.js</span>, WebAssembly provides several improvements:
¬†(i) WebAssembly binaries are compact due to its lightweight representation compared to
JavaScript source, (ii) WebAssembly is more straightforward to validate,
(iii) WebAssembly provides formal guarantees of type safety and isolation, and
(iv) WebAssembly has been shown to provide better performance than <span id="S7.SS0.SSS0.Px1.p4.1.6">asm.js</span>.</p>
<p id="S7.SS0.SSS0.Px1.p5.1">WebAssembly is a stack machine, which is similar to the Java Virtual
Machine¬†<cite>[<a href="#bib.bib21" title="">21</a>]</cite> and the Common Language Runtime¬†<cite>[<a href="#bib.bib25" title="">25</a>]</cite>. However, WebAssembly
is very different from these platforms. For example WebAssembly does not support objects
and does not support unstructured control flow.</p>
<p id="S7.SS0.SSS0.Px1.p6.1">The WebAssembly specification defines its operational semantics and type system.
This proof was mechanized using the
Isabelle theorem prover, and that mechanization effort found and addressed a
number of issues in the specification¬†<cite>[<a href="#bib.bib35" title="">35</a>]</cite>.
RockSalt¬†<cite>[<a href="#bib.bib22" title="">22</a>]</cite> is a similar verification effort for NaCl.
It implements the NaCl verification toolchain in Coq, along with a proof of
correctness with respect to a model of the subset of x86 instructions that
NaCl supports.</p>
</section>
<section id="S7.SS0.SSS0.Px2">
<h5>Analysis of SPEC Benchmarks using performance counters</h5>

<p id="S7.SS0.SSS0.Px2.p1.1">Several papers use performance counters to analyze the SPEC
benchmarks. Panda et al.¬†<cite>[<a href="#bib.bib26" title="">26</a>]</cite> analyze the
SPEC CPU2017 benchmarks, applying statistical techniques to identify similarities
among benchmarks. Phansalkar et al. perform a similar study on SPEC
CPU2006¬†<cite>[<a href="#bib.bib27" title="">27</a>]</cite>. Limaye and Adegija
identify workload differences between
SPEC CPU2006 and SPEC CPU2017¬†<cite>[<a href="#bib.bib20" title="">20</a>]</cite>.</p>
</section>
</section>
<section id="S8" lang="en">
<h2>
<span>8 </span>Conclusions</h2>

<p id="S8.p1.4">This paper performs the first comprehensive performance analysis of
WebAssembly. We develop <span id="S8.p1.4.1">Browsix-Wasm</span>, a significant extension of
<span id="S8.p1.4.2">Browsix</span>, and <span id="S8.p1.4.3">Browsix-SPEC</span>, a harness that enables detailed
performance analysis, to let us run the SPEC CPU2006 and CPU2017
benchmarks as WebAssembly in Chrome and Firefox. We find that the mean
slowdown of WebAssembly vs. native across SPEC benchmarks is 1.55<math id="S8.p1.1.m1.1" alttext="\times" display="inline"><semantics id="S8.p1.1.m1.1a"><mo id="S8.p1.1.m1.1.1" xref="S8.p1.1.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S8.p1.1.m1.1b"><times id="S8.p1.1.m1.1.1.cmml" xref="S8.p1.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S8.p1.1.m1.1c">\times</annotation></semantics></math> for Chrome and 1.45<math id="S8.p1.2.m2.1" alttext="\times" display="inline"><semantics id="S8.p1.2.m2.1a"><mo id="S8.p1.2.m2.1.1" xref="S8.p1.2.m2.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S8.p1.2.m2.1b"><times id="S8.p1.2.m2.1.1.cmml" xref="S8.p1.2.m2.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S8.p1.2.m2.1c">\times</annotation></semantics></math>
for Firefox, with peak slowdowns of
2.5<math id="S8.p1.3.m3.1" alttext="\times" display="inline"><semantics id="S8.p1.3.m3.1a"><mo id="S8.p1.3.m3.1.1" xref="S8.p1.3.m3.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S8.p1.3.m3.1b"><times id="S8.p1.3.m3.1.1.cmml" xref="S8.p1.3.m3.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S8.p1.3.m3.1c">\times</annotation></semantics></math> in Chrome and 2.08<math id="S8.p1.4.m4.1" alttext="\times" display="inline"><semantics id="S8.p1.4.m4.1a"><mo id="S8.p1.4.m4.1.1" xref="S8.p1.4.m4.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S8.p1.4.m4.1b"><times id="S8.p1.4.m4.1.1.cmml" xref="S8.p1.4.m4.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S8.p1.4.m4.1c">\times</annotation></semantics></math> in Firefox. We identify the
causes of these performance gaps, providing actionable guidance for
future optimization efforts.</p>
<section id="S8.SS0.SSS0.Px1">
<h5>Acknowledgements</h5>

<p id="S8.SS0.SSS0.Px1.p1.1">We thank the reviewers and our shepherd, Eric
Eide, for their constructive feedback. This work was partially supported
by NSF grants 1439008 and 1413985.</p>

</section>
</section>
<section id="bib" lang="en">
<h2>References</h2>

<ul>
<li id="bib.bib1">
<span>[1]</span>
<span>
Blazor.

</span>
<span><a target="_blank" href="https://blazor.net/" title="">https://blazor.net/</a>.

</span>
<span>[Online; accessed 5-January-2019].

</span>
</li>
<li id="bib.bib2">
<span>[2]</span>
<span>
Compiling from Rust to WebAssembly.

</span>
<span><a target="_blank" href="https://developer.mozilla.org/en-US/docs/WebAssembly/Rust_to_wasm" title="">https://developer.mozilla.org/en-US/docs/WebAssembly/Rust_to_wasm</a>.

</span>
<span>[Online; accessed 5-January-2019].

</span>
</li>
<li id="bib.bib3">
<span>[3]</span>
<span>
LLVM Reference Manual.

</span>
<span><a target="_blank" href="https://llvm.org/docs/CodeGenerator.html" title="">https://llvm.org/docs/CodeGenerator.html</a>.

</span>
</li>
<li id="bib.bib4">
<span>[4]</span>
<span>
NaCl and PNaCl.

</span>
<span><a target="_blank" href="https://developer.chrome.com/native-client/nacl-and-pnacl" title="">https://developer.chrome.com/native-client/nacl-and-pnacl</a>.

</span>
<span>[Online; accessed 5-January-2019].

</span>
</li>
<li id="bib.bib5">
<span>[5]</span>
<span>
PolyBenchC: the polyhedral benchmark suite.

</span>
<span><a target="_blank" href="http://web.cs.ucla.edu/~pouchet/software/polybench/" title="">http://web.cs.ucla.edu/~pouchet/software/polybench/</a>.

</span>
<span>[Online; accessed 14-March-2017].

</span>
</li>
<li id="bib.bib6">
<span>[6]</span>
<span>
Raise Chrome JS heap limit? - Stack Overflow.

</span>
<span><a target="_blank" href="https://stackoverflow.com/questions/43643406/raise-chrome-js-heap-limit" title="">https://stackoverflow.com/questions/43643406/raise-chrome-js-heap-limit</a>.

</span>
<span>[Online; accessed 5-January-2019].

</span>
</li>
<li id="bib.bib7">
<span>[7]</span>
<span>
Use cases.

</span>
<span><a target="_blank" href="https://webassembly.org/docs/use-cases/" title="">https://webassembly.org/docs/use-cases/</a>.

</span>
</li>
<li id="bib.bib8">
<span>[8]</span>
<span>
WebAssembly.

</span>
<span><a target="_blank" href="https://webassembly.org/" title="">https://webassembly.org/</a>.

</span>
<span>[Online; accessed 5-January-2019].

</span>
</li>
<li id="bib.bib9">
<span>[9]</span>
<span>
System V Application Binary Interface AMD64 Architecture Processor
Supplement.

</span>
<span><a target="_blank" href="https://software.intel.com/sites/default/files/article/402129/mpx-linux64-abi.pdf" title="">https://software.intel.com/sites/default/files/article/402129/mpx-linux64-abi.pdf</a>,
2013.

</span>
</li>
<li id="bib.bib10">
<span>[10]</span>
<span>
Steve Akinyemi.

</span>
<span>A curated list of languages that compile directly to or have their
VMs in WebAssembly.

</span>
<span><a target="_blank" href="https://github.com/appcypher/awesome-wasm-langs" title="">https://github.com/appcypher/awesome-wasm-langs</a>.

</span>
<span>[Online; accessed 5-January-2019].

</span>
</li>
<li id="bib.bib11">
<span>[11]</span>
<span>
Jason Ansel, Petr Marchenko, √ölfar Erlingsson, Elijah Taylor, Brad Chen,
Derek¬†L. Schuff, David Sehr, Cliff¬†L. Biffle, and Bennet Yee.

</span>
<span>Language-independent Sandboxing of Just-in-time Compilation and
Self-modifying Code.

</span>
<span>In <span id="bib.bib11.1.1">Proceedings of the 32nd ACM SIGPLAN Conference on
Programming Language Design and Implementation</span>, PLDI ‚Äô11, pages 355‚Äì366.
ACM, 2011.

</span>
</li>
<li id="bib.bib12">
<span>[12]</span>
<span>
Michael Bebenita, Florian Brandner, Manuel Fahndrich, Francesco Logozzo,
Wolfram Schulte, Nikolai Tillmann, and Herman Venter.

</span>
<span>SPUR: A Trace-based JIT Compiler for CIL.

</span>
<span>In <span id="bib.bib12.1.1">Proceedings of the ACM International Conference on Object
Oriented Programming Systems Languages and Applications</span>, OOPSLA ‚Äô10, pages
708‚Äì725. ACM, 2010.

</span>
</li>
<li id="bib.bib13">
<span>[13]</span>
<span>
David¬†A Chappell.

</span>
<span><span id="bib.bib13.1.1">Understanding ActiveX and OLE</span>.

</span>
<span>Microsoft Press, 1996.

</span>
</li>
<li id="bib.bib14">
<span>[14]</span>
<span>
Alan Donovan, Robert Muth, Brad Chen, and David Sehr.

</span>
<span>PNaCl: Portable Native Client Executables.

</span>
<span><a target="_blank" href="https://css.csail.mit.edu/6.858/2012/readings/pnacl.pdf" title="">https://css.csail.mit.edu/6.858/2012/readings/pnacl.pdf</a>, 2010.

</span>
</li>
<li id="bib.bib15">
<span>[15]</span>
<span>
Brendan Eich.

</span>
<span>From ASM.JS to WebAssembly.

</span>
<span><a target="_blank" href="https://brendaneich.com/2015/06/from-asm-js-to-webassembly/" title="">https://brendaneich.com/2015/06/from-asm-js-to-webassembly/</a>,
2015.

</span>
<span>[Online; accessed 5-January-2019].

</span>
</li>
<li id="bib.bib16">
<span>[16]</span>
<span>
Eric Elliott.

</span>
<span>What is WebAssembly?

</span>
<span><a target="_blank" href="https://tinyurl.com/o5h6daj" title="">https://tinyurl.com/o5h6daj</a>, 2015.

</span>
<span>[Online; accessed 5-January-2019].

</span>
</li>
<li id="bib.bib17">
<span>[17]</span>
<span>
Andreas Gal, Brendan Eich, Mike Shaver, David Anderson, David Mandelin,
Mohammad¬†R. Haghighat, Blake Kaplan, Graydon Hoare, Boris Zbarsky, Jason
Orendorff, Jesse Ruderman, Edwin¬†W. Smith, Rick Reitmaier, Michael Bebenita,
Mason Chang, and Michael Franz.

</span>
<span>Trace-based Just-in-time Type Specialization for Dynamic Languages.

</span>
<span>In <span id="bib.bib17.1.1">Proceedings of the 30th ACM SIGPLAN Conference on
Programming Language Design and Implementation</span>, PLDI ‚Äô09, pages 465‚Äì478.
ACM, 2009.

</span>
</li>
<li id="bib.bib18">
<span>[18]</span>
<span>
Andreas Haas, Andreas Rossberg, Derek¬†L. Schuff, Ben¬†L. Titzer, Michael Holman,
Dan Gohman, Luke Wagner, Alon Zakai, and JF¬†Bastien.

</span>
<span>Bringing the Web Up to Speed with WebAssembly.

</span>
<span>In <span id="bib.bib18.1.1">Proceedings of the 38th ACM SIGPLAN Conference on
Programming Language Design and Implementation</span>, PLDI 2017, pages 185‚Äì200.
ACM, 2017.

</span>
</li>
<li id="bib.bib19">
<span>[19]</span>
<span>
Thomas Kotzmann, Christian Wimmer, Hanspeter M√∂ssenb√∂ck, Thomas
Rodriguez, Kenneth Russell, and David Cox.

</span>
<span>Design of the Java HotSpot Client Compiler for Java 6.

</span>
<span><span id="bib.bib19.1.1">ACM Trans. Archit. Code Optim.</span>, 5(1):7:1‚Äì7:32, 2008.

</span>
</li>
<li id="bib.bib20">
<span>[20]</span>
<span>
Ankur Limaye and Tosiron Adegbija.

</span>
<span>A Workload Characterization of the SPEC CPU2017 Benchmark Suite.

</span>
<span>In <span id="bib.bib20.1.1">2018 IEEE International Symposium on Performance Analysis of
Systems and Software (ISPASS)</span>, pages 149‚Äì158, 2018.

</span>
</li>
<li id="bib.bib21">
<span>[21]</span>
<span>
Tim Lindholm, Frank Yellin, Gilad Bracha, and Alex Buckley.

</span>
<span><span id="bib.bib21.1.1">The Java Virtual Machine Specification, Java SE 8 Edition</span>.

</span>
<span>Addison-Wesley Professional, 1st edition, 2014.

</span>
</li>
<li id="bib.bib22">
<span>[22]</span>
<span>
Greg Morrisett, Gang Tan, Joseph Tassarotti, Jean-Baptiste Tristan, and Edward
Gan.

</span>
<span>RockSalt: Better, Faster, Stronger SFI for the x86.

</span>
<span>In <span id="bib.bib22.1.1">Proceedings of the 33rd ACM SIGPLAN Conference on
Programming Language Design and Implementation</span>, PLDI ‚Äô12, pages 395‚Äì404.
ACM, 2012.

</span>
</li>
<li id="bib.bib23">
<span>[23]</span>
<span>
Greg Morrisett, David Walker, Karl Crary, and Neal Glew.

</span>
<span>From System F to Typed Assembly Language.

</span>
<span><span id="bib.bib23.1.1">ACM Trans. Program. Lang. Syst.</span>, 21(3):527‚Äì568, 1999.

</span>
</li>
<li id="bib.bib24">
<span>[24]</span>
<span>
Richard Musiol.

</span>
<span>A compiler from Go to JavaScript for running Go code in a
browser.

</span>
<span><a target="_blank" href="https://github.com/gopherjs/gopherjs" title="">https://github.com/gopherjs/gopherjs</a>, 2016.

</span>
<span>[Online; accessed 5-January-2019].

</span>
</li>
<li id="bib.bib25">
<span>[25]</span>
<span>
George¬†C. Necula, Scott McPeak, Shree¬†P. Rahul, and Westley Weimer.

</span>
<span>CIL: Intermediate Language and Tools for Analysis and Transformation
of C Programs.

</span>
<span>In R.¬†Nigel Horspool, editor, <span id="bib.bib25.1.1">Compiler Construction</span>, pages
213‚Äì228. Springer, 2002.

</span>
</li>
<li id="bib.bib26">
<span>[26]</span>
<span>
Reena Panda, Shuang Song, Joseph Dean, and Lizy¬†K. John.

</span>
<span>Wait of a Decade: Did SPEC CPU 2017 Broaden the Performance
Horizon?

</span>
<span>In <span id="bib.bib26.1.1">2018 IEEE International Symposium on High Performance
Computer Architecture (HPCA)</span>, pages 271‚Äì282, 2018.

</span>
</li>
<li id="bib.bib27">
<span>[27]</span>
<span>
Aashish Phansalkar, Ajay Joshi, and Lizy¬†K. John.

</span>
<span>Analysis of Redundancy and Application Balance in the SPEC CPU2006
Benchmark Suite.

</span>
<span>In <span id="bib.bib27.1.1">Proceedings of the 34th Annual International Symposium on
Computer Architecture</span>, ISCA ‚Äô07, pages 412‚Äì423. ACM, 2007.

</span>
</li>
<li id="bib.bib28">
<span>[28]</span>
<span>
Bobby Powers, John Vilk, and Emery¬†D. Berger.

</span>
<span>Browsix: Unix in your browser tab.

</span>
<span><a target="_blank" href="https://browsix.org" title="">https://browsix.org</a>.

</span>
</li>
<li id="bib.bib29">
<span>[29]</span>
<span>
Bobby Powers, John Vilk, and Emery¬†D. Berger.

</span>
<span>Browsix: Bridging the Gap Between Unix and the Browser.

</span>
<span>In <span id="bib.bib29.1.1">Proceedings of the Twenty-Second International Conference on
Architectural Support for Programming Languages and Operating Systems</span>,
ASPLOS ‚Äô17, pages 253‚Äì266. ACM, 2017.

</span>
</li>
<li id="bib.bib30">
<span>[30]</span>
<span>
Gregor Richards, Sylvain Lebresne, Brian Burg, and Jan Vitek.

</span>
<span>An Analysis of the Dynamic Behavior of JavaScript Programs.

</span>
<span>In <span id="bib.bib30.1.1">Proceedings of the 31st ACM SIGPLAN Conference on
Programming Language Design and Implementation</span>, PLDI ‚Äô10, pages 1‚Äì12. ACM,
2010.

</span>
</li>
<li id="bib.bib31">
<span>[31]</span>
<span>
Marija Selakovic and Michael Pradel.

</span>
<span>Performance Issues and Optimizations in JavaScript: An Empirical
Study.

</span>
<span>In <span id="bib.bib31.1.1">Proceedings of the 38th International Conference on Software
Engineering</span>, ICSE ‚Äô16, pages 61‚Äì72. ACM, 2016.

</span>
</li>
<li id="bib.bib32">
<span>[32]</span>
<span>
Toshio Suganuma, Toshiaki Yasue, Motohiro Kawahito, Hideaki Komatsu, and Toshio
Nakatani.

</span>
<span>A Dynamic Optimization Framework for a Java Just-in-time Compiler.

</span>
<span>In <span id="bib.bib32.1.1">Proceedings of the 16th ACM SIGPLAN Conference on
Object-oriented Programming, Systems, Languages, and Applications</span>, OOPSLA
‚Äô01, pages 180‚Äì195. ACM, 2001.

</span>
</li>
<li id="bib.bib33">
<span>[33]</span>
<span>
Luke Wagner.

</span>
<span>asm.js in Firefox Nightly | Luke Wagner‚Äôs Blog.

</span>
<span><a target="_blank" href="https://blog.mozilla.org/luke/2013/03/21/asm-js-in-firefox-nightly/" title="">https://blog.mozilla.org/luke/2013/03/21/asm-js-in-firefox-nightly/</a>.

</span>
<span>[Online; accessed 21-May-2019].

</span>
</li>
<li id="bib.bib34">
<span>[34]</span>
<span>
Luke Wagner.

</span>
<span>A WebAssembly Milestone: Experimental Support in Multiple Browsers.

</span>
<span><a target="_blank" href="https://hacks.mozilla.org/2016/03/a-webassembly-milestone/" title="">https://hacks.mozilla.org/2016/03/a-webassembly-milestone/</a>,
2016.

</span>
<span>[Online; accessed 5-January-2019].

</span>
</li>
<li id="bib.bib35">
<span>[35]</span>
<span>
Conrad Watt.

</span>
<span>Mechanising and Verifying the WebAssembly Specification.

</span>
<span>In <span id="bib.bib35.1.1">Proceedings of the 7th ACM SIGPLAN International Conference
on Certified Programs and Proofs</span>, CPP 2018, pages 53‚Äì65. ACM, 2018.

</span>
</li>
<li id="bib.bib36">
<span>[36]</span>
<span>
Christian Wimmer and Michael Franz.

</span>
<span>Linear Scan Register Allocation on SSA Form.

</span>
<span>In <span id="bib.bib36.1.1">Proceedings of the 8th Annual IEEE/ACM International
Symposium on Code Generation and Optimization</span>, CGO ‚Äô10, pages 170‚Äì179.
ACM, 2010.

</span>
</li>
<li id="bib.bib37">
<span>[37]</span>
<span>
Bennet Yee, David Sehr, Greg Dardyk, Brad Chen, Robert Muth, Tavis Ormandy,
Shiki Okasaka, Neha Narula, and Nicholas Fullagar.

</span>
<span>Native Client: A Sandbox for Portable, Untrusted x86 Native Code.

</span>
<span>In <span id="bib.bib37.1.1">IEEE Symposium on Security and Privacy (Oakland‚Äô09)</span>, IEEE,
2009.

</span>
</li>
<li id="bib.bib38">
<span>[38]</span>
<span>
Alon Zakai.

</span>
<span>asm.js.

</span>
<span><a target="_blank" href="http://asmjs.org/" title="">http://asmjs.org/</a>.

</span>
<span>[Online; accessed 5-January-2019].

</span>
</li>
<li id="bib.bib39">
<span>[39]</span>
<span>
Alon Zakai.

</span>
<span>Emscripten: An LLVM-to-JavaScript Compiler.

</span>
<span>In <span id="bib.bib39.1.1">Proceedings of the ACM International Conference Companion on
Object Oriented Programming Systems Languages and Applications Companion</span>,
OOPSLA ‚Äô11, pages 301‚Äì312. ACM, 2011.

</span>
</li>
</ul>
</section>

</article>
</div>

</div></div>
  </body>
</html>
