<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.kianryan.co.uk/2022-11-28-psion-sidecar-ppp-modem-and-terminal/">Original</a>
    <h1>Getting a Psion 5 palmtop from 1997 online via PPP (and a Raspberry Pi)</h1>
    
    <div id="readability-page-1" class="page"><article role="main">
        <p><img src="https://www.kianryan.co.uk/assets/images/2022/12/02/sidecar_hamsterdance.png" alt="Opera playing The Hamster Dance - De do de do de do de da"/></p>

<p>Creating the PiRS232 and playing with the Pi over serial has been leading towards an idea - I wanted to create a small, 
battery powered device, a <em>sidecar</em> that I could carry with my Psion and use as portable Linux terminal.  I also managed 
to turn it into an Internet gateway, leading to some interesting experiences.</p>

<p>The idea was straightforward: take a Pi Zero, add an RS232 board that already handles the null modem side, add a Lipo battery, 
power management and charging, and print a case for it.  It’s taken a few months from initial idea 
to final design, but I’m happy the result, it’s usable and practical, and you can build one too.</p>

<p>Parts:</p>

<ul>
  <li><a href="https://www.raspberrypi.com/products/raspberry-pi-zero/">Raspberry Pi Zero</a></li>
  <li><a href="https://shop.pimoroni.com/products/lipo-amigo?variant=39779302539347">Pimoroni LiPo Amigo Pro</a><sup id="fnref:1" role="doc-noteref"><a href="#fn:1" rel="footnote">1</a></sup></li>
  <li><a href="https://shop.pimoroni.com/products/lipo-shim?variant=23979864391">Pimoroni LiPo SHIM for Raspberry Pi</a></li>
  <li><a href="https://www.kianryan.co.uk/2022-11-25-rs232-null-modem-hat-pi-zero/">PiRS232 board</a></li>
  <li><a href="https://shop.pimoroni.com/products/lithium-ion-battery-pack?variant=23417820359">2200mah LiPo Battery with JST connector</a></li>
  <li>Double ended JST connector</li>
  <li>2 x 20 “long” male header</li>
  <li><a href="https://www.printables.com/model/327193-sidecar-for-psion-lipo-powered-ppp-wifi-modem-and-">Printed case parts available on Printables</a></li>
  <li>3 sets of M2.5 10mm Nylon stand-offs, screws and nuts</li>
  <li>3 x M2.5 x 5mm “computer screws”</li>
  <li>2 x M3 brass inserts</li>
  <li>2 x M3 round head hex nut 10mm bolts</li>
</ul>

<h2 id="printing">Printing</h2>

<p><img src="https://www.kianryan.co.uk/assets/images/2022/12/02/sidecar_final.jpg" alt="Sidecar for Psion"/></p>

<p>The final case was printed in <a href="https://colorfabb.com/ngen-silver-metallic">ColorFabb NGen Silver Metallic</a> on a <a href="https://www.kianryan.co.uk/2022-05-30-making-changes-to-our-little-prusa-mini/">Prusa Mini</a>.  It’s durable, but a little tricky to print.  All the prototypes have 
been printed in <a href="https://eu.polymaker.com/product/polyterra-pla/">PolyTerra PLA Cotton White</a>, which is is a pleasure to print with, dimensionally very stable and the matt 
surface allows you to sketch changes directly on to the surface.  All parts are printed flat on the bed with 
the exception of the lid, which is printed end on, with the button hole towards the bed.  Sparingly use paint on supports 
for the button guides and the case clip and set the clipping tight.</p>

<p><img src="https://www.kianryan.co.uk/assets/images/2022/12/02/sidecar_prototypes.jpg" alt="Sidecar, many prototypes"/></p>

<p>There were a few iterations of the case.  This version works in a range of materials.</p>

<h2 id="build">Build</h2>

<p><img src="https://www.kianryan.co.uk/assets/images/2022/12/02/sidecar_open.jpg" alt="Sidecar, lid off, guts open"/></p>

<p>The build is pretty straightforward and only requires through hole soldering.</p>

<p>To build:</p>
<ul>
  <li>Solder the long male header to the Pi Zero.</li>
  <li>Solder the Lipo shim as close as possible to the Pi.</li>
  <li>Screw the nylon stand offs on the three sides still available to you.  Add nuts to the underside.</li>
  <li>Add the PiRS232 board to the top and screw in the nylon screws.</li>
  <li>You can’t add the 4th corner, since the Lipo Shim gets in the way.</li>
  <li>Connect the JST from your board stack to your LiPo Amigo Pro “device” connection, then connect the battery to “battery”.</li>
</ul>

<p>You should now have a functional “stack” of boards that will run from either LiPo or USB-C (via the Amigo).  When seated 
in the case you should have something that looks like the below image.  The ports should align.</p>

<p><img src="https://www.kianryan.co.uk/assets/images/2022/12/02/sidecar_stack.jpg" alt="Sidecar, seated in case"/></p>

<p>At this point follow the instructions on getting a <a href="https://www.kianryan.co.uk/2022-06-13-connecting-a-psion-to-a-raspberry-pi-with-serial/">Psion 5MX to talk to Raspberry Pi with Serial</a>. 
These instructions will work on the Pi irrespective of what you intend to connect it to.  This will get your Pi outputting 
your console over serial with RTS/CTS hardware flow control.  Do this before fitting in to the case.</p>

<p>The threads from the stand-offs mate with the holes in the case, but too much makes it difficult to fit. Trim them down to 2mm with a knife. 
Slide the D-Sub 9 connector through the hole in the front and then angle the board down and under the shelf until the stand-offs lock in the holes.</p>

<p>The Amigo Pro is screwed in to the “shelf” piece, which is then rested on the PiRS232 and screwed in to the case.  The shelf 
should sit flat on the PCB and obscure no components.</p>

<p>The brass inserts are added to the main case by using a soldering iron.  Once the inserts are added, rest the button on the 
underside of the lid.  The button should move freely.  If it does not, trim the button. When fitted, the button should sit on the 
power button of the Amigo and freely move up and down. The clip on the back of the case fits snugly against over the back wall. 
If it does not, add a small piece of tape to increase the friction.  Secure the lid with the two hex bolts.  Do not over-tighten.</p>

<h2 id="setting-up-ppp">Setting up PPP</h2>

<p>At this point, you should have your device talking to the Pi, over Serial, with RTS/CTS hardware flow control.</p>

<p>If your client device can support PPP, we can go a step further, and provide a PPP service on the Pi for your RS232 device. 
This will allow your device to use the Pi both as a Linux terminal, and as a gateway to use it’s own software to the outside world.</p>

<p>There’s security implications to this.  It’s not the 1980s or 1990s.  Exercise some caution.</p>

<p>We’re going to run the PPP service over serial, so please ensure you have a working a working RS232 serial terminal connection with 
RTS/CTS before continuing.  We will also be disabling the serial console, since we’ll be the serial port for the PPP service.</p>

<p>Install PPP on the Pi if not already installed:</p>



<p>Edit /etc/rc.local and add the following lines before “exit 0”:</p>

<div><div><pre><code><span>stty</span> <span>-F</span> /dev/ttyAMA0 raw
<span>sudo </span>pppd /dev/ttyAMA0 115200 10.0.0.1:10.0.0.2 proxyarp <span>local </span>noauth nodetach dump crtscts passive persist maxfail 0 holdoff 1 &amp;
</code></pre></div></div>

<p>On startup, this will start our PPP service with hardware flow control, and noauth on the serial port.</p>

<p>Finally, start <code>raspi-config</code>, disable the terminal being available over serial but leave serial enabled.</p>

<p><img src="https://www.kianryan.co.uk/assets/images/2022/12/02/sidecar_serial.png" alt="Serial config in raspi-config"/></p>

<p>Reboot the Pi.</p>

<h2 id="setting-up-the-psion">Setting up the Psion</h2>

<p>We’re going to use the Psion 5MX as the client, but any PPP client that supports RTS/CTS should work here.  If your client 
requires different settings, adjust the parameters in rc.local and reboot the Pi.</p>

<h3 id="modem-control-panel">Modem Control Panel</h3>

<p>First set-up the modem configuration:</p>

<p>Select the “Direct Cable Connection” profile.</p>

<h4 id="modem-tab">Modem Tab</h4>

<p><strong>Speed:</strong> 115200 baud</p>

<p><img src="https://www.kianryan.co.uk/assets/images/2022/12/02/modem1.gif" alt="Modem configuration of Psion 5MX - Modem"/></p>

<h4 id="advanced-tab">Advanced Tab</h4>

<p><strong>Terminal Detect</strong> OFF</p>

<p><img src="https://www.kianryan.co.uk/assets/images/2022/12/02/modem2.gif" alt="Modem configuration of Psion 5MX - Advanced"/></p>

<h3 id="internet-control-panel">Internet Control Panel</h3>

<p>Next set up the internet configuration:</p>

<p>Create a <strong>new</strong> profile, named “Sidecar”.</p>

<h4 id="service-tab">Service Tab</h4>

<p>Connection Type: Direct</p>

<p><img src="https://www.kianryan.co.uk/assets/images/2022/12/02/internet1.gif" alt="Internet configuration of Psion 5MX - Service"/></p>

<h4 id="account-tab">Account Tab</h4>

<p>Manual Login: True</p>

<p><img src="https://www.kianryan.co.uk/assets/images/2022/12/02/internet2.gif" alt="Internet configuration of Psion 5MX - Account"/></p>

<h4 id="addresses-tab">Addresses Tab</h4>

<p><strong>Get IP address from server:</strong> False</p>

<p><img src="https://www.kianryan.co.uk/assets/images/2022/12/02/internet3.gif" alt="Internet configuration of Psion 5MX - Addresses"/></p>

<h4 id="advanced-tab-1">Advanced Tab</h4>

<p><strong>Enable PPP extensions:</strong> False</p>

<p><img src="https://www.kianryan.co.uk/assets/images/2022/12/02/internet4.gif" alt="Internet configuration of Psion 5MX - Advanced"/></p>

<h2 id="using-the-sidecar">Using the Sidecar</h2>

<p>First up, the <a href="https://web.archive.org/web/20070629220110/http:/www.iota.demon.co.uk/psion/hermes/hermes.html">Hermes client</a> can use Telnet to connect to clients.  Change to TCP/IP and connect to 10.0.0.1 on Port 23:</p>

<p><img src="https://www.kianryan.co.uk/assets/images/2022/12/02/t_local.gif" alt="Configuring Hermes to connect to the Pi via Telnet"/></p>

<p>Hermes will tell you it’s connecting to the Internet and then hopefully present you with your terminal login:</p>

<p><img src="https://www.kianryan.co.uk/assets/images/2022/12/02/t_local2.gif" alt="Hermes opening Internet"/></p>

<p>This is very similar to the serial experience, but I found it handled non-ANSI characters better out of the box than serial.</p>

<p>You can also connect to telnet services directly, such as the <a href="https://discworld.starturtle.net/">Discworld MUD</a>, but I 
found it a better experience to use telnet from the Pi to the MUD.  A <a href="https://en.wikipedia.org/wiki/MUD">MUD (multi-user dungeon)</a> is an hybrid of MMORPG and 
text adventure.  There’s a great write-up about the Discworld MUD on <a href="https://www.theguardian.com/games/2022/sep/28/we-can-continue-pratchetts-efforts-the-gamers-keeping-discworld-alive">the Guardian</a>.</p>

<p><img src="https://www.kianryan.co.uk/assets/images/2022/12/02/discmud.gif" alt="Briefly playing the Discworld MUD"/></p>

<p>But we could do this with the serial approach.  The real power of PPP is that we can use web applications directly on 
the Psion.  E-mail is a sticky point as modern e-mail servers, rightly, insist on encryption.  The built in e-mail client 
works with POP only and doesn’t support encryption.  <a href="http://www.ericlindsay.com/epoc/sinet5.htm">Eric Lindsay lists a IMAP plugin for the Psion</a>, and 
a local IMAP or POP relay on the Pi might be a good way to get around this … for another day.</p>

<p><img src="https://www.kianryan.co.uk/assets/images/2022/12/02/pop.gif" alt="Email client"/></p>

<p>So what about web browsing?  <a href="https://get.geo.opera.com/pub/opera/psion/">Opera still make available the Psion version of the browser for download.</a> Unfortunately, it’s only usable for 30 user days and they haven’t provided an unlock code with the download.  If you can help with that, <a href="mailto:kian@orangetentacle.co.uk">please get in touch</a>. But it’s enough time to have fun with.</p>

<p>Our first port of call is straight to Google.  The home page loads, but that’s about it. We can search, but very few results 
will load.  Our browser doesn’t understand SSL, and with the push for <em>everything</em> to be served secure, suddenly a lot 
of the internet is no longer open to us.  Let alone issues with HTML5, CSS and Javascript.</p>

<p><img src="https://www.kianryan.co.uk/assets/images/2022/12/02/sidecar_google.jpg" alt="Google in Opera for Psion - Mostly Broken"/></p>

<p>Lucky for us, there are a number of services set up for people who want to browse the internet on <em>cough</em> <em>senior</em> devices.</p>

<p><a href="http://frogfind.com/">FrogFind</a> returns results from <a href="https://duckduckgo.com/">DuckDuckGo</a> and then reduces the complexity of pages before serving them to you over bare, unsecure HTTP.</p>

<p><img src="https://www.kianryan.co.uk/assets/images/2022/12/02/frogfind.gif" alt="FrogFind - Search Engine and HTTP Proxy"/></p>

<p>This is great for services like <a href="https://en.wikipedia.org/wiki/Main_Page">Wikipedia</a>, which now <a href="https://diff.wikimedia.org/2015/06/12/securing-wikimedia-sites-with-https/">(for good reason)</a>, insist on serving all their content over HTTPS only.  But we’re only browsing, so it’s fine.  Just be aware that you’re browsing on an unsecure device.</p>

<p><img src="https://www.kianryan.co.uk/assets/images/2022/12/02/h2g2.gif" alt="Wikipedia HitchHiker&#39;s Guide To The Galaxy Served on a Psion - Douglas would have liked this"/></p>

<p><a href="https://theoldnet.com/">The Old Net</a> provides a range of services, but most useful for us is a search engine and HTTP proxy for <a href="https://archive.org/web/">The 
Wayback Machine</a>, so we can find and display old sites.</p>

<p><img src="https://www.kianryan.co.uk/assets/images/2022/12/02/theoldnet.gif" alt="The Old Net - Search Engine and HTTP Proxy"/></p>

<p>It’s pretty much an obligatory pilgrimage to return to the 1996 version of the Space Jam site.  It renders pretty well here, given 
how many images are on the site.</p>

<p><img src="https://www.kianryan.co.uk/assets/images/2022/12/02/spacejam.gif" alt="Opera showing Space Jam from 1996"/></p>

<p>Opera is really, quite responsive.</p>

<h2 id="whats-next">What’s next?</h2>

<p>I started this project as a companion for my Psion 5MX, but I’ve got a Psion 3a and an Atari STE that I /should/ also be able to get online. 
I’m part of the way there with the 3a <a href="https://dqydj.com/connect-psion-series-3a-internet/">following the approach here</a>. 
It’s fun pushing the boundaries of these devices, and modern, broadband internet is definitely a frontier these devices 
were not designed for.  I would love to see if other people build versions of the Sidecar, and the devices they pair it with.</p>

<hr/>


      </article></div>
  </body>
</html>
