<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://skilldeliver.com/your-supabase-is-public">Original</a>
    <h1>Your Supabase Is Public</h1>
    
    <div id="readability-page-1" class="page"><div data-color-mode="auto" data-light-theme="light" data-dark-theme="dark"><p>I was chatting with a close friend of mine and he sent me a link to his new SaaS that he&#39;s developing. Of course when a friend sends me their new project my natural tendency is to try hack it.</p>
<p>First simple step: inspecting, checking if there&#39;s something interesting.</p>
<p><img src="https://skilldeliver.com/supabase-network-inspector.png" alt="Supabase credentials exposed in network inspector"/></p>
<p>Voila, there is. A Supabase URL and anon key.</p>
<p>What makes it particularly easy is when they&#39;re using Supabase. It&#39;s so common from my side that every time I get access to a Supabase anon key just from inspecting the website and doing a simple curl request to check the tables everything is always unprotected and I get access to the whole database.</p>
<blockquote>
<p>This is the third time I&#39;ve discovered this and one of them was a seed stage startup ðŸ’€</p>
</blockquote>
<p>With this endpoint you can fetch the OpenAPI schema to see what&#39;s exposed:</p>
<div><pre><span>curl</span> <span>-X</span> GET <span>\</span>
  <span>&#39;https://your-project.supabase.co/rest/v1/?apikey=your-anon-key&#39;</span> <span>\</span>
  <span>-H</span> <span>&#34;Accept: application/openapi+json&#34;</span></pre></div><p>But the schema itself isn&#39;t that interesting. The interesting part is checking if they&#39;ve created a users table and have an endpoint for it. And in my case it was something like this:</p>
<div><pre><span>curl</span> <span>-X</span> GET <span>\</span>
  <span>&#39;https://your-project.supabase.co/rest/v1/users&#39;</span> <span>\</span>
  <span>-H</span> <span>&#34;apikey: your-anon-key&#34;</span> <span>\</span>
  <span>-H</span> <span>&#34;Authorization: Bearer your-anon-key&#34;</span></pre></div><p>And if you&#39;re lucky (which happens way too often) this returns a nice JSON with all the users names, nicknames, emails, passwords hashes and whatever else they decided to store.</p>
<p>I&#39;ve never used Supabase for a production app but I think what&#39;s happening is people are creating additional public users tables and not setting proper RLS for them. The anon key is designed to be public but if you are not careful that anon key becomes a master key to your entire database.</p>
<p>I&#39;m not going to blame the vibe-coding wave entirely. Maybe I&#39;ll put the blame on Supabase instead? Maybe it can be simple <code>if check</code> if they create users table there should be a massive red warning popup explaining that everything in this table will be public unless RLS is enabled.</p>
<p><img src="https://skilldeliver.com/supabase-rls-warning.png" alt="Supabase RLS warning"/></p>
<p>And in the spirit of <a href="https://lovable.dev/blog/series-b" target="_blank">Lovable announcing their $330 million Series B</a> and knowing they also use Supabase. I&#39;m starting to wonder what percentage of users actually make this mistake. With over 100,000 projects being created daily on platforms like Lovable, how many of those have exposed databases?</p>
<p>Again, you can take the stance that this is a skill issue on the users part but I&#39;m not sure about that. You can design a system in a way that prevents this type of stuff from happening.</p>
<p>As an example <a href="https://pocketbase.io/" target="_blank">Pocketbase</a> handles this much better. It has a default <code>_pb_users_auth_</code> collection that you can easily extend with new fields, and most importantly, it has default proper access control checks like <code>id = @request.auth.id</code> already configured. You literally have to go out of your way to make it insecure.</p>
<p><img src="https://skilldeliver.com/pocketbase-access-control.png" alt="Pocketbase default access control"/></p>
<h2 id="i-need-a-conclusion"><a aria-hidden="true" tabindex="-1" href="#i-need-a-conclusion"><svg viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>I need a conclusion?</h2>
<p>So I guess here the place where I need to say something smart or LLM generated conclusion - but I don&#39;t have. Merry Christmas! ðŸŽ„</p>
</div></div>
  </body>
</html>
