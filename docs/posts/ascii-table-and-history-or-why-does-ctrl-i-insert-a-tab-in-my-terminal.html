<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://bestasciitable.com">Original</a>
    <h1>ASCII table and history – Or, why does Ctrl&#43;i insert a Tab in my terminal?</h1>
    
    <div id="readability-page-1" class="page"><div>
			<p>To understand why Control+i inserts a Tab in your terminal you need to understand
			ASCII, and to understand ASCII you need know a bit about its history and the world it
			was developed in. Please bear with me.</p>

			<h3 id="teleprinters">Teleprinters</h3>
			<p>Teleprinters evolved from the telegraph. Connect a printer and keyboard to a
			telegraph and you’ve got a teleprinter. Early versions were called “printing
			telegraphs”.</p>

			<p>Most teleprinters communicated using the ITA2 protocol. For the most part this would
			just encode the alphabet, but there are a few control codes: WRU (“Who R U”) would cause
			the receiving teleprinter to send back its identification, BEL would ring a bell, and it
			had the familiar CR (Carriage Return) and LF (Line Feed).</p>

			<p>This is all early 20th century stuff. There are no electronic computers; it’s all
			mechanical working with punched tape. ITA2 (and codes like it) were mechanically
			efficient; common letters such as “e” and “t” required only a single hole to be
			punched.</p>

			<p>These 5-bit codes could only encode 32 characters, which is not even enough for just
			English. The solution was to add the FIGS and LTRS codes, which would switch between
			“figures” and “letters” mode. “FIGS R W” would produce “42”. This worked, but typo’ing a
			FIGS or LTRS (or losing one in line noise) would result in gibberish. Not ideal.</p>

			<h3 id="terminals">Terminals</h3>
			<p>In the 1950s teleprinters started to get connected to computers, rather than other
			teleprinters. ITA2 was designed for mechanical machines and was awkward to use. ASCII
			was designed specifically for computer use and published in 1962. Teleprinters used with
			computers were called <em>terminals</em> (as in “end of a connection”, like “train
			terminal”). Teleprinters were also called
			“<strong>T</strong>ele<strong>TY</strong>pewriter”, or TTY for short, and you can still
			find names like /dev/tty or /bin/stty on modern systems.</p>

			<p>People really programmed computers using teleprinters. Here’s a
			<a href="https://www.youtube.com/watch?v=qv5b1Xowxdk" target="_blank">video of a teleprinter in action</a>,
			and here’s a somewhat cheesy (but interesting and cute) video which explains how they
			<a href="https://www.youtube.com/watch?v=XV-7J5y1TQc" target="_blank">were used to program a PDP 11/10</a>.</p>

			<p>A terminal would connect to a computer with a serial port
			(<a href="https://en.wikipedia.org/wiki/RS-232" target="_blank">RS-232</a>),
			which simply transfers bytes back and forth. A terminal is more akin to a monitor with a
			keyboard, rather than a computer on its own. A modern monitor connected with HDMI is
			told “draw this pixel in this colour”, in the 1960s the computer merely said “here are a
			bunch of characters”.</p>

			<p>If you’re wondering what a “shell” is: a shell is a program to interact with your
			computer. It provides a commandline, runs programs, and displays the result. The
			terminal just displays characters. It’s the difference between a TV and a DVD
			player.</p>

			<p>Teleprinters needed some way to communicate events such as “stop sending me data” or
			“end of transmission”. This is what control characters are for. The exact meaning of
			control characters has varied greatly over the years (which is why extensive
			<a href="https://en.wikipedia.org/wiki/Termcap" target="_blank">termcap databases</a>
			are required). ASCII is more than just a character set; it’s a way to communicate
			between a terminal and a computer.</p>

			<p>An additional method to communicate are
			<a href="https://en.wikipedia.org/wiki/ANSI_escape_code" target="_blank">escape sequences</a>.
			This is a list of characters starting with the ESC control character (0x1b). For example
			F1 is <code>&lt;Esc&gt;OP</code> and the left arrow is <code>&lt;Esc&gt;[OD</code>.
			Computers can give instructions to terminals, too: <code>&lt;Esc&gt;[2C</code> is move
			the cursor 2 positions forward and <code>&lt;Esc&gt;[4m</code> underlines all subsequent
			text. This is also how the Alt key works: Alt+a is <code>&lt;Esc&gt;a</code>.</p>

			<h3 id="modern">Modern systems and ASCII properties</h3>
			<p>All of this matters because modern terminals operate on the same principles as those
			of the 1960s. If you’re opening three xterm or iTerm2 windows then you’re emulating
			three terminals connecting to a “mainframe”.</p>

			<p>If you look at the ASCII table above then there are some interesting properties: in
			the 1<sup>st</sup> column you can see how the left two bits are always set to zero, and
			that the other 5 bits count to 31 (32 characters in total; it starts at 0). The
			2<sup>nd</sup> column repeats this pattern but with the 6<sup>th</sup> bit set to 1
			(remember, read binary numbers from right-to-left, so that’s 6<sup>th</sup> counting
			from the right). The 3<sup>rd</sup> column repeats this pattern again with the
			7<sup>th</sup> bit set, and the final column has both bits set.</p>

			<p>The interesting part here is that the letters A-Z and some punctuation map directly
			to the control characters in the 1<sup>st</sup> column. All that’s needed is removing
			one bit, and that’s exactly what the Control key did: clear the 7<sup>th</sup> bit.
			Lowercase and uppercase letters align in the 3<sup>rd</sup> and 4<sup>th</sup> columns,
			and this is what the Shift key did: clear the 6<sup>th</sup> bit.</p>

			<p>Pressing Control+i (lowercase) would mean sending “)”, which is not very useful. So
			most terminals interpret this as Control+I (uppercase), which sends HT. DEL is last is
			so all bits are set to 1. This is how you “deleted” a character in punch tapes: punch
			all the holes!</p>

			<p>This is kind of neat and well designed, but for us it means:</p>
			<ul>
				<li>There is no way to see if the user pressed only Control or Shift, because from a
					terminal’s perspective all they do is modify a bit for the typed character.</li>

				<li>There is no way to distinguish between the Tab key and Control+i. It’s not just
					‘the same’ as Tab, Control+i <em>is</em> Tab.</li>

				<li>There is no way to distinguish between Control+a and Control+Shift+a.</li>

				<li>Sending Control with a character from the 2<sup>nd</sup> column is useless.
					Control clears the 7<sup>th</sup> bit, but this is already 0, so Control+# will
					just send “#”.</li>
			</ul>

			<p>The world has not completely stood still and there have been improvements since the
			1960s, but terminals are still fundamentally ASCII-based text interfaces, and programs
			running inside a terminal – like a shell or Vim – still have very limited facilities for
			modern key events. Non-terminal programs don’t have these problems as they’re not
			restricted to a 1960s text interface.</p>

			<p>Note: for brevity’s sake many
			aspects have been omitted in the above: ITA2 was derived from Murray code, the 1967
			ASCII spec changed many aspects (1962 ASCII only had uppercase), there were other
			encodings (e.g. EBCDIC), graphical terminals such as the Tektronix 4014 (which xterm can
			emulate), ioctls, etc.
			References and further reading:
				<a href="https://warehouse.sr-ix.com/Archive/CharCodeHist/index.html" target="_blank">An annotated history of some character codes</a>,
				<a href="https://www.aivosto.com/articles/charsets-7bit.html" target="_blank">7-bit character sets</a>,
				<a href="https://www.aivosto.com/articles/control-characters.html" target="_blank">Control characters in ASCII and Unicode</a>,
				<a href="http://www.linusakesson.net/programming/tty/" target="_blank">The TTY demystified</a>
			</p>
		</div></div>
  </body>
</html>
