<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.righto.com/2024/03/idt-gate-array.html">Original</a>
    <h1>An unusual 7400-series chip implemented with a gate array</h1>
    
    <div id="readability-page-1" class="page"><div id="post-body-8127698329536141060" itemprop="description articleBody">
<p>When I look inside a chip from the popular 7400 series, I know what to expect: a fairly simple die,
implemented in a straightforward, cost-effective way.
However, when I looked inside a military-grade chip built by Integrated Device Technology (IDT)<span id="fnref:idt"><a href="#fn:idt">4</a></span>
I found a very unexpected layout: over 1500 transistors in an orderly matrix.
Even stranger, most of the die is wasted: less than 20% of these transistors are used, forming scattered circuits connected by thin metal wires.</p>
<p>In this blog post, I look at this chip in detail, describe its gates, and explain how it implements the &#34;1-of-4&#34; decoder
function. I also discuss why it sometimes makes sense to build chips with a
gate array design such as this, despite the inefficiency.</p>
<p><a href="https://static.righto.com/images/idt-gate-array/package.jpg"><img alt="A photo of the tiny silicon die in its package.  This chip is the IDT 54FCT139ALB dual 1-of-4 decoder.  Click this image (or any other) for a larger version." height="351" src="https://static.righto.com/images/idt-gate-array/package-w350.jpg" title="A photo of the tiny silicon die in its package.  This chip is the IDT 54FCT139ALB dual 1-of-4 decoder.  Click this image (or any other) for a larger version." width="350"/></a></p><p>A photo of the tiny silicon die in its package.  This chip is the IDT 54FCT139ALB dual 1-of-4 decoder.  Click this image (or any other) for a larger version.</p>
<p>In the photo below, you can see the silicon die in more detail, with the silicon appearing pink.
The main circuitry is implemented in the nine rows that form the gate array, a grid of 1584 transistors.
The tiny dark rectangles are transistors of two types, NMOS and PMOS, that work together to implement CMOS logic circuits.
At this scale, the metal wiring is visible as faint gray lines and smudges, but most of the transistors are unconnected.
Surrounding the gate array are 22 input/output (I/O) blocks each with a square bond pad. As with the transistors, many of these I/O blocks
are unused. Fourteen of these bond pads have tiny metal bond wires (the thick black lines) that connect the silicon die
to the chip&#39;s external pins. 
Finally, the pairs of bond wires at the center left and center right provide ground and power connections for the chip.</p>
<p><a href="https://static.righto.com/images/idt-gate-array/decoder.jpg"><img alt="Closeup die photo." height="572" src="https://static.righto.com/images/idt-gate-array/decoder-w600.jpg" title="Closeup die photo." width="600"/></a></p><p>Closeup die photo.</p>
<p>The photo below zooms in on three rows of circuitry in the chip.
The large dark rectangles are pairs of transistors, with two lines of transistors in each row of circuitry.
At the top and bottom of each row, the thick horizontal white lines are metal wiring that provides power and ground.
In each row, one line of transistors holds PMOS transistors, next to the power wiring, while the other line holds NMOS transistors, next to the
ground wiring.
(The orientation flips in each successive row, so it isn&#39;t obvious which transistors are which unless you check the power
connections at the end of the row.)</p>
<p><a href="https://static.righto.com/images/idt-gate-array/closeup.jpg"><img alt="A closeup of the die." height="600" src="https://static.righto.com/images/idt-gate-array/closeup-w600.jpg" title="A closeup of the die." width="600"/></a></p><p>A closeup of the die.</p>
<p>The transistors are wired into gates by the metal layers, the white lines.
The gates are connected by horizontal and vertical wiring using the wiring channels between the rows.
This wiring style is very similar to <a href="https://www.righto.com/2024/01/intel-386-standard-cells.html">standard-cell logic</a>.
However, unlike standard-cell logic, the underlying transistor grid is fixed, resulting in wasted transistors.
In the image above, most of the transistors in the middle row are used, while the top row is unused and the bottom
row is mostly unused.</p>
<p>The diagram below shows the structure of one of the transistor blocks, which contains two tall, thin MOS transistors.
The vertical metal contacts connect to the sources and drains of the transistors, with the two transistors sharing the middle
contact.
(On an integrated circuit, the source and drain of a transistor are identical, so it is arbitrary which side is the source
and which is the drain.)
The short horizontal metal contacts at the top connect to the gates of the two transistors; the gates are made of polysilicon,
which is barely visible in the die photo.
The gates partition the active silicon (green), forming the transistors.
The gate width is approximately 1 µm.</p>
<p><a href="https://static.righto.com/images/idt-gate-array/two-transistors.jpg"><img alt="A block of two transistors as they appear on the die, along with a diagram showing the structure. The bar indicates a length of 10 µm." height="391" src="https://static.righto.com/images/idt-gate-array/two-transistors-w400.jpg" title="A block of two transistors as they appear on the die, along with a diagram showing the structure. The bar indicates a length of 10 µm." width="400"/></a></p><p>A block of two transistors as they appear on the die, along with a diagram showing the structure. The bar indicates a length of 10 µm.</p>

<p>In this section, I&#39;ll explain the construction of one of the NAND gates on the die.
The NAND gate below uses four transistors, two NMOS transistors on the top and two PMOS transistors on the bottom.
The white lines are the metal wiring, forming two layers. Most of the wiring (including power and ground) is in the lower (M1) layer. The slightly wider
and darker vertical segments are the upper (M2) layer. The circles connect the metal layers when they join, or connect the
metal layer to the underlying silicon or polysilicon.
With two metal layers, it&#39;s a bit tricky to see how the wiring is connected.
The A and B inputs each connect to two transistor gates.
The transistor group at the top is connected to ground on the right, with the output on the left.
The transistor group on the bottom is connected to Vcc on the left and right, with the output in the middle.
This has the effect of putting the upper transistors in series and the lower transistors in parallel.</p>
<p><a href="https://static.righto.com/images/idt-gate-array/nand-die.jpg"><img alt="A NAND gate on the die." height="422" src="https://static.righto.com/images/idt-gate-array/nand-die-w220.jpg" title="A NAND gate on the die." width="220"/></a></p><p>A NAND gate on the die.</p>
<p>Below, I&#39;ve drawn the schematic of the NAND gate. On the left, the layout of the schematic matches the die layout above.
On the right, I&#39;ve redrawn the schematic with a more traditional layout.
To understand its operation, note that a PMOS transistor (top on the right schematic) turns on when the input is low, while an NMOS transistor (bottom on the right)
turns on when the input is high.
When both inputs are high, the two NMOS transistors turn on, connecting ground to the output, pulling it low.
When either input is low, one of the PMOS transistors turns on, pulling the output high.
Thus, the circuit implements the NAND function.
The NMOS and PMOS transistors operate in a complementary fashion, giving CMOS (Complementary MOS) its name.</p>
<p><a href="https://static.righto.com/images/idt-gate-array/nand-schematic.jpg"><img alt="Schematic of a NAND gate." height="265" src="https://static.righto.com/images/idt-gate-array/nand-schematic-w600.jpg" title="Schematic of a NAND gate." width="600"/></a></p><p>Schematic of a NAND gate.</p>

<p>In this section, I&#39;ll explain the layout of one of the NOR gates on the die, shown below.
This gate is twice as large as the previous NAND gate so it can provide twice the output current.<span id="fnref:scaling"><a href="#fn:scaling">1</a></span>
The NOR gate uses eight transistors, four PMOS transistors in the upper half and four NMOS transistors in the lower half.
(Note that Vcc and ground are flipped compared to the previous gate, as are the NMOS and PMOS transistors.)
The two transistors in each block are wired in parallel to produce more current for
the output.
(<code>A out</code> is the same signal as <code>A in</code>, exiting the block at the top to connect to other circuitry.)</p>
<p><a href="https://static.righto.com/images/idt-gate-array/nor-i-die.jpg"><img alt="A NOR gate on the die." height="461" src="https://static.righto.com/images/idt-gate-array/nor-i-die-w350.jpg" title="A NOR gate on the die." width="350"/></a></p><p>A NOR gate on the die.</p>
<p>The schematic below shows the wiring of the eight transistors. The schematic layout corresponds to the physical layout to
make it easier to map between the image and the schematic.
The upper transistor groups are wired in series, while the lower transistor groups are wired in parallel.</p>
<p><a href="https://static.righto.com/images/idt-gate-array/nor-die-schematic.jpg"><img alt="Schematic corresponding to the gate above." height="303" src="https://static.righto.com/images/idt-gate-array/nor-die-schematic-w500.jpg" title="Schematic corresponding to the gate above." width="500"/></a></p><p>Schematic corresponding to the gate above.</p>
<p>The schematic below has been redrawn to make the functionality clearer, and the parallel transistors have been removed.
If either input is high, one of the NMOS transistors on the bottom will turn on and pull the input low.
If both inputs are low, the two PMOS transistors will turn on and pull the input high.
This provides the desired NOR function.</p>
<p><a href="https://static.righto.com/images/idt-gate-array/nor-schematic.jpg"><img alt="Simplified NOR gate schematic." height="297" src="https://static.righto.com/images/idt-gate-array/nor-schematic-w300.jpg" title="Simplified NOR gate schematic." width="300"/></a></p><p>Simplified NOR gate schematic.</p>
<p>Note that the NAND and NOR gates have similar but opposite schematics. In the NAND gate, the NMOS transistors are in series
while the PMOS transistors are in parallel. In the NOR gate, the roles of the transistors are swapped.</p>

<p>The chip I examined is a &#34;dual 1-of-4 decoder with enable&#34;.<span id="fnref:part-number"><a href="#fn:part-number">2</a></span>
The decoding function takes a two-bit input and selects one of four output lines depending on the binary value.
The enable line must be low to activate this operation; otherwise all four output lines are disabled.
The chip contains two of these decoders, which is why it is called a dual decoder.
In total, the chip contains 18 logic gates,<span id="fnref:datasheet"><a href="#fn:datasheet">3</a></span> so it is very simple, even by 1990s standards.</p>
<p>I reverse-engineered the chip and created the schematic below, showing one of the dual units.
Each NAND gate matches one of the four input possibilities to drive one of the four outputs.
The NOR gates support the <code>ENABLE</code> signal, blocking the outputs unless <code>ENABLE</code> is active (i.e. low).</p>
<p><a href="https://static.righto.com/images/idt-gate-array/schematic.jpg"><img alt="Reverse-engineered schematic of half the chip." height="518" src="https://static.righto.com/images/idt-gate-array/schematic-w600.jpg" title="Reverse-engineered schematic of half the chip." width="600"/></a></p><p>Reverse-engineered schematic of half the chip.</p>
<p>The chip uses a general-purpose I/O block (below) for each pin, that can be used as an input or an output depending on how it
is wired.
Each block contains two large drive transistors: an NMOS transistor to pull the output low and a PMOS transistor to pull the output high.
The I/O block has separate control lines for the two output transistors.
(At the bottom of the image below, two thin metal wires drive the high-side and low-side transistors.)
This permits tri-state logic: if neither transistor is energized, the output is left floating.
The gate array drives the output transistors with
high-current inverter, constructed from multiple transistors in parallel.
(This is why the schematic shows more inverters than may seem necessary.)</p>
<p><a href="https://static.righto.com/images/idt-gate-array/pin-die.jpg"><img alt="One of the 22 I/O blocks on the die. Each I/O block is associated with a bond pad, where a bond wire can be connected to an external pin." height="593" src="https://static.righto.com/images/idt-gate-array/pin-die-w380.jpg" title="One of the 22 I/O blocks on the die. Each I/O block is associated with a bond pad, where a bond wire can be connected to an external pin." width="380"/></a></p><p>One of the 22 I/O blocks on the die. Each I/O block is associated with a bond pad, where a bond wire can be connected to an external pin.</p>
<p>When used as an input, the pad is wired to the surrounding circuitry slightly differently, connecting to input protection
diodes (not shown on the schematic).
Thus, the functionality of the I/O blocks can be changed by modifying the metal layers, without changing the underlying
silicon.</p>
<h2>Some 7400-series history</h2>
<p>The earliest logic integrated circuits used resistors and transistors internally, so they were called RTL (Resistor Transistor
Logic), but RTL had significant performance problems.
RTL was rapidly replaced by Diode Transistor Logic (DTL) and then Transistor Transistor Logic (TTL).
In <a href="https://www.computerhistory.org/siliconengine/standard-logic-ic-families-introduced/">1964</a>, Texas Instruments created a
line of TTL integrated circuits for military applications called the SN5400 series.
This was shortly followed by the commercial-grade SN7400 series.</p>
<p>The 7400 series of integrated circuits was inexpensive, fast, and easy to use.
The line started with simple logic circuits such as four NAND gates on a chip, and moved into more complex chips such
as counters, shift registers, and ALUs.
The 7400 series became very popular in the 1970s and 1980s, used by electronics hobbyists and
high-performance minicomputers alike.
These chips became essential building blocks and &#34;glue&#34; logic for microcomputers, heavily used in the
<a href="https://downloads.reactivemicro.com/Apple%20II%20Items/Hardware/II_&amp;_II+/Schematic/Apple%20II%20Schematics.pdf">Apple II</a> for
instance.</p>
<p>The original 7400 series branched into <a href="https://en.wikipedia.org/wiki/7400-series_integrated_circuits#Families">dozens of families</a> with different performance characteristics but the same functionality.
The
74LS (low-power Schottky) family, for instance, became very popular as it both improved speed and reduced power consumption.
In the mid-1970s, 7400-series chips were introduced that used CMOS circuitry instead of TTL for dramatically lower power consumption.
This CMOS family, the 74C series, was followed by numerous other CMOS families.</p>
<p>That brings us to the chip I examined, a member of IDT&#39;s 74FCT (Fast CMOS TTL-compatible) line of chips, introduced in the mid-1980s.
(Specifically, it is in the 54FCT family because it handles a wider temperature range.)
These chips used advanced CMOS technology to provide high speed, low power consumption, and
as a military option, radiation tolerance.</p>
<h2>Conclusions</h2>
<p>Why would you make a chip in this inefficient way, using a gate array that wastes most of the die area?
The motivation is that most of the design cost can be shared across
many different part types.
Each step of integrated circuit processing requires an expensive mask for photolithography.
With a gate array, all chip types use the same underlying silicon and transistors, with custom masks just for the two
metal layers.
In comparison, a fully custom chip might require eight custom masks, which costs much more.
The tradeoff is that gate array chips are larger so the manufacturing cost is higher per device.<span id="fnref:manufacturing"><a href="#fn:manufacturing">5</a></span>
Thus, a gate array design is better when selling chips in relatively small quantities, while a custom design is
cheaper when mass-producing chips.<span id="fnref:gate-array"><a href="#fn:gate-array">6</a></span>
IDT focused on the high-performance and military market rather than the commodity chip market, so gate arrays were a
good fit.</p>
<p>One last thing. The packaging of this chip is very interesting since it is mounted on a multi-chip module.
The module also contains two Atmel EEPROMs. Presumably the decoder chip decodes address bits
to select one of the EEPROMs.</p>
<p><a href="https://static.righto.com/images/idt-gate-array/mcm.jpg"><img alt="The multi-chip module containing the decoder chip along with an AT28HC64 EPROM on either side." height="198" src="https://static.righto.com/images/idt-gate-array/mcm-w600.jpg" title="The multi-chip module containing the decoder chip along with an AT28HC64 EPROM on either side." width="600"/></a></p><p>The multi-chip module containing the decoder chip along with an AT28HC64 EPROM on either side.</p>
<p>Thanks to Don S. for providing the chip.
Follow me on Twitter <a href="https://twitter.com/kenshirriff">@kenshirriff</a> or <a href="https://www.righto.com/feeds/posts/default">RSS</a> for updates.
I&#39;ve also started experimenting with Mastodon recently as <a href="https://oldbytes.space/@kenshirriff">@oldbytes.space@kenshirriff</a>.</p>
<h2>Notes and references</h2>


</div></div>
  </body>
</html>
