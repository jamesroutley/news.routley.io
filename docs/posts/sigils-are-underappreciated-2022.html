<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://raku-advent.blog/2022/12/20/sigils/">Original</a>
    <h1>Sigils are underappreciated (2022)</h1>
    
    <div id="readability-page-1" class="page"><div>
		<p>Sigils â€“ those odd, non-alphabetic prefix characters that many programmers associate with Bash scripting; the <span>â€‰<code>$</code>â€‰</span> in <span>â€‰<code>echo $USER</code>â€‰</span> â€“ have a bit of a bad reputation. Some programmers view them as â€œold fashionedâ€, perhaps because sigils are used in several languages that first gained popularity last millennium (e.g. <a href="https://en.wikipedia.org/wiki/BASIC">BASIC</a>, <a href="https://en.wikipedia.org/wiki/Bash_(Unix_shell)">Bash</a>, <a href="https://en.wikipedia.org/wiki/Perl">Perl</a>, and <a href="https://en.wikipedia.org/wiki/PHP">PHP</a>). Other programmers just <a href="https://wiki.c2.com/?TheProblemWithSigils">view sigils as rather pointless</a>, as â€œjust a way of encoding type informationâ€ in variable names â€“ basically a glorified version of <a href="https://en.wikipedia.org/wiki/Hungarian_notation#Systems_Hungarian_vs._Apps_Hungarian">systems Hungarian notation</a> (which isnâ€™t even the <a href="https://www.joelonsoftware.com/2005/05/11/making-wrong-code-look-wrong/">good kind of Hungarian notation</a>).</p>
<p>Maybe sigils served a purpose in the bad old days, these critics say, but modern IDEs and editors give us <a href="https://code.visualstudio.com/docs/languages/typescript#_hover-information">all the type information we could want</a>, and these tools made sigils obsolete. Now that we have VS Code, we donâ€™t have any reason to take the risk that someone might use sigils to write code that bears a <a href="https://rachelbythebay.com/w/2011/10/02/linenoise/">suspicious resemblance to line noise</a>, or perhaps to an <a href="https://en.wikipedia.org/wiki/Grawlix">extremely angry</a> comic strip character.</p>
<figure><img loading="lazy" data-attachment-id="2474" data-permalink="https://raku-advent.blog/2022/12/20/sigils/grawlix-3/" data-orig-file="https://rakuadventcalendar.files.wordpress.com/2021/12/grawlix-1812061347-e1671333426773.png" data-orig-size="964,547" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="grawlix" data-image-description="" data-image-caption="" data-medium-file="https://rakuadventcalendar.files.wordpress.com/2021/12/grawlix-1812061347-e1671333426773.png?w=300" data-large-file="https://rakuadventcalendar.files.wordpress.com/2021/12/grawlix-1812061347-e1671333426773.png?w=750" src="https://rakuadventcalendar.files.wordpress.com/2021/12/grawlix-1812061347-e1671333426773.png?w=433&amp;h=246" alt="A cropped panel of a newspaper comic showing one character&#39;s head.  A speech bubble from that head has the text &#39;Awwwâ€¦ ?%$Xâ˜¹#Â©!!!&#39;" width="433" height="246" srcset="https://rakuadventcalendar.files.wordpress.com/2021/12/grawlix-1812061347-e1671333426773.png?w=433&amp;h=246 433w, https://rakuadventcalendar.files.wordpress.com/2021/12/grawlix-1812061347-e1671333426773.png?w=866&amp;h=492 866w, https://rakuadventcalendar.files.wordpress.com/2021/12/grawlix-1812061347-e1671333426773.png?w=150&amp;h=85 150w, https://rakuadventcalendar.files.wordpress.com/2021/12/grawlix-1812061347-e1671333426773.png?w=300&amp;h=170 300w, https://rakuadventcalendar.files.wordpress.com/2021/12/grawlix-1812061347-e1671333426773.png?w=768&amp;h=436 768w" sizes="(max-width: 433px) 100vw, 433px"/><figcaption>This is a family-friendly post, I swear!</figcaption></figure>
<p>Or so they say. But I disagree â€“ as do <a href="https://hillelwayne.com/">many</a> of the <a href="https://perl6advent.wordpress.com/2017/12/02/perl-6-sigils-variables-and-containers/">hackers</a> whose <a href="https://stackoverflow.com/a/62142436/">perspectives</a> and <a href="https://www.youtube.com/watch?v=pvDZUlNHGCw">insights</a> I <a href="https://twitter.com/jnthnwrthngtn/status/1306890858072023041">value most</a>.</p>
<p>This post represents my attempt to convince you that sigils are a powerful tool for writing clear, expressive code. No, strike that, Iâ€™ll go further â€“ this post is my argument that <strong>sigils are a powerful tool for clear communication</strong> in general; sigils being useful for programming is just an application of the more general rule.</p>
<p>To investigate this claim, weâ€™ll start with three <em>non</em>-programming situations where sigils let us communicate more clearly and expressively. Second, weâ€™ll use these examples to dig into how sigils work: Where does their expressive power come from? And what makes particular sigils good or bad at their job?</p>
<p>Once weâ€™ve wrestled with sigils in general, weâ€™ll turn to the specific case of programming-language sigils. Weâ€™ll investigate whether the general power of sigils carries over to the project of writing clear, expressive code, where our goal is to express ourselves in ways that our computer and our readers can both understand. Weâ€™ll also consider the unique challenges â€“ and extra powers â€“ that are relevant to programming-language sigils. And weâ€™ll examine some sigils in action, to judge how helpful they really are.</p>
<p>By the time you reach the end of this post, I believe that youâ€™ll have a better understanding of how sigils work, a new mental tool to apply to your communication (programming and non-programming), and â€“ just possibly â€“ a bit more appreciation for <a href="https://developers.slashdot.org/story/16/07/14/1349207/the-slashdot-interview-with-larry-wall#:~:text=A%20common,swearing">the languages that seem like theyâ€™re swearing at you</a>.</p>
<h4><a id="sigils-three-non-programming-sigils-that-aid-clarity" href="#three-non-programming-sigils-that-aid-clarity" aria-hidden="true"></a>Three non-programming sigils that aid clarity</h4>

<h5><a id="sigils-1-chatting-about-sigils" href="#1-chatting-about-sigils" aria-hidden="true"></a>1. Chatting about sigils</h5>
<p>If youâ€™ve ever talked with programmers online, youâ€™ve probably seen someone say something like</p>
<blockquote><p>We had that problem at <span>â€‰<code>$day_job</code>â€‰</span>: our code was a mess, but everyone thought <span>â€‰<code>$framework</code>â€‰</span> would magically fix it.</p></blockquote>
<p>I donâ€™t mean that youâ€™ve seen someone express that sentiment (<small>though, letâ€™s face it, you probably have</small>). Instead, I mean that youâ€™ve probably seen someone use terms like <span>â€‰<code>$day_job</code>â€‰</span> or <span>â€‰<code>$framework</code>â€‰</span>. And, even if you havenâ€™t, you can probably tell what they mean.</p>
<p>In both cases, the <span>â€‰<code>$</code>â€‰</span> sigil marks a placeholder word â€“ in <span>â€‰<code>$day_job</code>â€‰</span>, probably because the speaker doesnâ€™t want to reveal where they work; in <span>â€‰<code>$framework</code>â€‰</span>, to avoid turning the conversation into a debate about the merits of a particular framework. Of course, neither sigil is indispensable; you could reword the sentence to use phrases like â€œat my day jobâ€ or â€œa new frameworkâ€.</p>
<p>So using a sigil saves us a couple of words, which you might view as a trivial benefit. But, in the context of synchronous communication, it really isnâ€™t trivial â€“ anything that reduces the time that an entire team spends looking a <span>â€‰<code>$bossÂ isÂ typing...</code>â€‰</span> message (see what I did there?) is a clear win.</p>
<p>The more important benefit of the sigil is increased clarity: â€œa new frameworkâ€ communicates that the speaker is talking about some indefinite framework, no more. If you want to know which framework, itâ€™d be natural to ask. In contrast, <span>â€‰<code>$framework</code>â€‰</span> communicates that the speaker has consciously decided to omit the name of the framework. Someone might still ask, but theyâ€™d be aware that theyâ€™re asking for a detail that was deliberately withheld.</p>
<h5><a id="sigils-2-now-that-you-mention-it" href="#2-now-that-you-mention-it" aria-hidden="true"></a>2. Now that you mention itâ€¦</h5>
<p>And, of course, if sigils can communicate something to humans, they can also communicate something to computers. Which brings us to the way that <em>everyone</em> uses sigils these days (even if they donâ€™t know the term): mentions and/or hashtags</p>
<figure><a href="https://xkcd.com/1306/"></a></figure>
<p>Every time a programmer <span>â€‰<code>@</code>â€‰</span>s someone on GitHub â€“ for that matter, every time someone describes themselves as <span>â€‰<code>#blessed</code>â€‰</span> or tags a post as <span>â€‰<code>#nofilter</code>â€‰</span> â€“ theyâ€™re using a sigil.</p>

<h6><a id="sigils-maybe-you-have-a-reaction-to-that" href="#maybe-you-have-a-reaction-to-that" aria-hidden="true"></a>Maybe you have a reaction to that?</h6>
<p>While weâ€™re on the subject of hashtags and @mentions, letâ€™s briefly digress to something that isnâ€™t technically a sigil but thatâ€™s closely related: <a href="https://www.makeuseof.com/how-to-react-to-messages-in-iphone/">reactions</a> â€“ those emoji-style responses to <a href="https://9to5google.com/2022/09/28/apple-imessage-reactions-android/">SMS messages</a>, <a href="https://github.blog/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/">GitHub issues</a>, and <a href="https://slack.com/help/articles/202931348-Use-emoji-and-reactions">Slack chats</a>. Love them or <a href="https://slate.com/human-interest/2019/05/iphone-reactions-group-texts-chats-bad.html">hate them</a>, Iâ€™m sure youâ€™ve seen them.</p>
<p>Theyâ€™re not sigils (theyâ€™re used alone, not as a prefix to a word). But theyâ€™re worth talking about here because â€“ like sigils â€“ they take advantage of an inherent element of human nature: weâ€™re visual, and think in symbols. GitHub could trivially replace all of their reactions with words. In fact, they list the word equivalent of each symbol: ğŸ‘Â â‡’Â +1; ğŸ‘Â â‡’Â -1; ğŸ˜€Â â‡’Â smile; ğŸ˜•Â â‡’Â confused; <span>â™¥</span>Â â‡’Â heart; and ğŸ‰Â â‡’Â tada. So why does GitHub use symbols instead of the equivalent words?</p>
<p>Because when you react to project milestone with ğŸ‰, thatâ€™s a <em>better</em> way to communicate excitement/congratulations than using words â€“ and much better than saying â€œtadaâ€. Similarly, symbols like ğŸ‘ and ğŸ‘ are direct ways to communicate approval or disapproval to someone who understands the symbol. Of course, some cultures ascribe <a href="https://www.rw-3.com/blog/im-sorry-was-that-rude-hand-gestures-around-the-world">a very different meaning</a> to a thumbs up gesture; Iâ€™m not at all claiming that ğŸ‘ magically avoids ambiguity.</p>
<p>But if someone does understand ğŸ‘, then they understand it directly as a single symbol. Theyâ€™re not translating ğŸ‘ into the words â€œI approve and/or agreeâ€ any more than a math-literate person translates â€œa Ã· (b Ã— c)â€ into the words â€œthe quotient of â€˜aâ€™ divided by the product of â€˜bâ€™ and â€˜câ€™â€. In both cases, theyâ€™re reasoning with the symbols directly; no translation needed. (See also the <a href="https://en.wikipedia.org/wiki/APL_(programming_language)#Derivative_languages">APL-family programming languages</a>, which take the insight about the power of symbolic reasoning to <a href="https://code.jsoftware.com/wiki/Articles/APL_--_a_Glimpse_of_Heaven#Is_the_language_readable.3F">its (il)logical extreme</a>.)</p>
<h5><a id="sigils-3-in-email-tags--folders--but-sigils-are-my-secret-weapon" href="#3-in-email-tags--folders--but-sigils-are-my-secret-weapon" aria-hidden="true"></a>3. In email, tags &gt; folders â€“ but sigils are my secret weapon</h5>
<p>So far, weâ€™ve discussed two non-programming examples where youâ€™ve probably already encountered the power of sigils and symbolic communication. For our third example, lets look at a context that wonâ€™t be as familiar to you: the system I use to manage my email inbox.</p>
<p>For the past decade, I essentially didnâ€™t organize my emails. Instead, I followed the recommendation of a <a href="https://people.ucsc.edu/~swhittak/papers/chi2011_refinding_email_camera_ready.pdf">2011 study of email re-finding</a>: dump everything into a single Archive and get better at searching. Maybe that was correct at the time or maybe I just wanted an excuse to hit the <span>â€‰<code>Archive All</code>â€‰</span> button. But by last year, that system had clearly stopped working â€“ between my different projects, committees, mailing lists, and patchlists, I simply get too much relevant email to be able to effectively search a single Archive.</p>
<p>So I turned to <a href="https://www.thunderbird.net/en-US/">Thunderbird</a> filters. But unlike many people, Iâ€™m not using filters to make emails skip my inbox; I like to see the stream of incoming messages. Instead, I use filters to programmatically apply labels to incoming emails (e.g., emails from/to the Raku Steering Council are labeled â€œRSCâ€). And when I archive emails, other filters move the email to the correct folder based on their labels.</p>
<p>But this left me with a decision: should my labels have folder semantics (each email is in exactly one folder) or tag semantics (emails can have any number of tags, including zero)? The issue is a fairly <a href="https://www.obsidianroundup.org/yet-another-hot-take-on-folders-versus-tags/">contentious one</a> â€“ itâ€™s been debated for years, but that post still generated <a href="https://news.ycombinator.com/item?id=30063301">140+ comments of debate</a>. The merits of the two approaches arenâ€™t relevant here; Iâ€™ll just say that I eventually decided to use some of both.</p>
<p>Specifically, I decided to give four labels folder semantics: <span>â€‰<code>Work</code>â€‰</span>, <span>â€‰<code>Life</code>â€‰</span>, <span>â€‰<code>List</code>â€‰</span>, and <span>â€‰<code>Bulk</code>â€‰</span>. Every email in my inbox should be automatically assigned exactly one of these labels â€“ if it has more or less than one, something has gone wrong and I need to fix my filtering rules. And when an email is archived, it should be moved to a folder that corresponds to one of these folder-labels.</p>
<p>But every label other than those four gets tag semantics: theyâ€™re optional, and emails can have any number of these tag-labels. Examples include <span>â€‰<code>Raku</code>â€‰</span>, <span>â€‰<code>RSC</code>â€‰</span>, <span>â€‰<code>TPRC</code>â€‰</span>, <span>â€‰<code>Family</code>â€‰</span>, <span>â€‰<code>Rust</code>â€‰</span>, <span>â€‰<code>conference</code>â€‰</span>, <span>â€‰<code>guix</code>â€‰</span>, and <span>â€‰<code>blogs</code>â€‰</span>.</p>
<p>So far, so good â€“ but also irrelevant to sigils. How do sigils come into this picture?</p>
<p>Well, I wound up with two different <em>types</em> of labels (folder-labels and tag-labels), each with different semantics. Further, I need to be able to quickly distinguish between the two types of labels so that I can notice emails that donâ€™t have exactly one folder-label.</p>
<p>This is a job for sigils. I added the <span>â€‰<code>â‹„</code>â€‰</span> sigil to my folder-semantic labels (<span>â€‰<code>â‹„Work</code>â€‰</span>, <span>â€‰<code>â‹„Life</code>â€‰</span>, <span>â€‰<code>â‹„List</code>â€‰</span>, and <span>â€‰<code>â‹„Bulk</code>â€‰</span>) and the <span>â€‰<code>â€¢</code>â€‰</span> sigil to my tag-semantic labels (e.g., <span>â€‰<code>â€¢Raku</code>â€‰</span> or <span>â€‰<code>â€¢Family</code>â€‰</span>). Now, if I see an email thatâ€™s labeled <span>â€‰<code>â‹„Work,Â â€¢Raku,Â â€¢rainbow-butterfly,Â â€¢RSC</code>â€‰</span>, I can instantly see that it has just one folder-semantic label. But if I saw one with <span>â€‰<code>â€¢Family,Â â€¢Parents,Â â€¢conference</code>â€‰</span>, Iâ€™d know that it was missing its folder-semantic label.</p>
<h6><a id="sigils-why-do-the-sigils-in-work-and-raku-matter" href="#why-do-the-sigils-in-work-and-raku-matter" aria-hidden="true"></a>Why do the sigils in â‹„Work and â€¢Raku matter?</h6>
<p>Using <span>â€‰<code>â‹„Work</code>â€‰</span> and <span>â€‰<code>â€¢Raku</code>â€‰</span> solves a problem â€“ one without similarly good, non-sigil solutions. When we were talking about <span>â€‰<code>$day_job</code>â€‰</span>, the sigil was helpful but not essential: saying â€œmy day jobâ€ would work maybe 90% as well.</p>
<p>But here, there isnâ€™t a similar 90% solution. We canâ€™t leave the folder-labels and tag-labels undifferentiated; thatâ€™s a recipe for confusion. What about the use-your-words approach we employed with <span>â€‰<code>$day_job</code>â€‰</span>? The equivalent substitution here would be to use labels like <span>â€‰<code>primary_Work</code>â€‰</span> in place of <span>â€‰<code>â‹„Work</code>â€‰</span>. But even though <span>â€‰<code>primary_Work</code>â€‰</span> does communicate that label has folder semantics, the substitution costs far more than the 10% we estimated for <span>â€‰<code>$day_job</code>â€‰</span>.</p>
<p>Indeed, <span>â€‰<code>primary_Work</code>â€‰</span> is a poor substitute for <span>â€‰<code>â‹„Work</code>â€‰</span> for exactly the same reason that â€œconfusedâ€ is a poor substitute for ğŸ˜•: in both cases, switching from a symbol to text dramatically ups the cognitive load involved and correspondingly slows reading. Put differently, <span>â€‰<code>â‹„Work</code>â€‰</span> is (mentally) pronounced â€œworkâ€, not â€œprimary workâ€.</p>

<p><span>â€‰<code>â‹„Work</code>â€‰</span> conveys information symbolically, which makes understanding that info easier and faster. In turn, faster understanding means that reading <span>â€‰<code>â‹„Work,â€‰â€¢Raku,â€‰â€¢rainbow-butterfly,â€‰â€¢RSC</code>â€‰</span> in a glance is practical, but reading <span>â€‰<code>primary_Work,â€‰secondary_Raku,Â secondary_rainbow-butterfly,â€‰secondary_RSC</code>â€‰</span> isnâ€™t. Thereâ€™s far more than a 10% improvement in the readability of <span>â€‰<code>â‹„Work</code>â€‰</span>, and that difference is 100% sigils.</p>
<h4><a id="sigils-learning-from-non-programming-sigils" href="#learning-from-non-programming-sigils" aria-hidden="true"></a>Learning from non-programming sigils</h4>
<p>Weâ€™ve looked at 3Â½ examples where sigils helped in non-programming contexts: chat messages, hashtags, and email labels (plus Â½ credit for emoji reactions). In each case, using sigils lets us communicate more clearly. But can we generalize from these examples into an explanation for sigilsâ€™ power?</p>
<p>I think so. Sigils are powerful because they use <strong>semantically dense symbols</strong> to <strong>quickly and easily</strong> communicate <strong>meaningful, low-context information</strong> to the reader. That was a mouthful, so letâ€™s unpack it, one term at a time.</p>
<h5><a id="sigils-2-sigils-use-semantically-dense-symbols" href="#2-sigils-use-semantically-dense-symbols" aria-hidden="true"></a>2. Sigils use semantically dense symbols</h5>
<p>The defining feature of sigils is that theyâ€™re symbolic: <span>â€‰<code>â‹„Work</code>â€‰</span> uses a sigil; <span>â€‰<code>primary_Work</code>â€‰</span> doesnâ€™t. The symbolic nature of sigils is key to their power: because they encode an entire phraseâ€™s worth of information into a single glyph, they have a much higher <a href="https://news.ycombinator.com/item?id=13571159">semantic density</a>. Put differently, they let you say more, with less.</p>
<p>Recognizing value of code that packs a lot of meaning into a small package isnâ€™t a novel insight, of course. And neither is the observation that symbols are extraordinarily good at concise communication. <a href="https://hillelwayne.com/">Hillel Wayne</a> made a similar point a couple of years ago:</p>

<p>Indeed, APL programmers have been practically shouting this insight from the rooftops for over 30 years: <a href="https://en.wikipedia.org/wiki/Kenneth_E._Iverson">Ken Iverson</a>, the designer of APL, opened his famous 1979 Turing Award talk, <a href="https://www.jsoftware.com/papers/tot.htm">Notation as a Tool of Thought</a>, with exactly this point:</p>
<blockquote><p>The quantity of meaning compressed into small space by algebraic signs, is another circumstance that facilitates the reasonings we are accustomed to carry on by their aid.</p></blockquote>
<p>But those werenâ€™t Iversonâ€™s words: he was quoting a <a href="https://books.google.com/books?id=b4Y_AAAAcAAJ&amp;vq=compressed&amp;pg=PA6#v=snippet&amp;q=compressed&amp;f=false">book published in <strong>1826</strong></a> by <a href="https://en.wikipedia.org/wiki/Charles_Babbage">Charles Babbage</a> (the â€œfather of the computerâ€, if thatâ€™s even a meaningful title). And then, just to complete the cycle of quotation â€“ and drive home the point that a focus on semantic density is widespread â€“ <a href="https://en.wikipedia.org/wiki/Paul_Graham_(programmer">Paul Graham</a> quoted Iverson (quoting Babbage) in his 2002 essay <a href="http://www.paulgraham.com/power.html">Succinctness is Power</a>.</p>
<p>I might not value succinctness <em>quite</em> as highly as Grahamâ€™s essay did, but itâ€™s hard to deny that sigilsâ€™ expressive concision provides quite a bit of power. And, indeed, we can see evidence of that expressive power in one of the non-programming sigils we discussed: The hashtag is so expressive that itâ€™s even starting to make its way <a href="https://www.tintup.com/blog/how-hashtags-changed-the-way-we-talk/">into spoken language</a>.</p>
<h5><a id="sigils-2-sigils-can-be-used-quickly-and-easily" href="#2-sigils-can-be-used-quickly-and-easily" aria-hidden="true"></a>2. Sigils can be used quickly and easily</h5>
<p>Given the immense power of symbols to create expressive, semantically dense code, why shouldnâ€™t we use them for everything? Should everyone be programming APL? Is there such a thing as code thatâ€™s <em>too</em> semantically dense?</p>
<figure><img data-attachment-id="2416" data-permalink="https://raku-advent.blog/2022/12/20/sigils/apl-code/" data-orig-file="https://rakuadventcalendar.files.wordpress.com/2021/12/apl-code.jpg" data-orig-size="2835,1353" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="APL-code" data-image-description="" data-image-caption="" data-medium-file="https://rakuadventcalendar.files.wordpress.com/2021/12/apl-code.jpg?w=300" data-large-file="https://rakuadventcalendar.files.wordpress.com/2021/12/apl-code.jpg?w=750" src="https://rakuadventcalendar.files.wordpress.com/2021/12/apl-code.jpg?w=750" alt="A page of APL code.  The code contains almost entirely symbols and is impossible to read for anyone unfamiliar with APL" srcset="https://rakuadventcalendar.files.wordpress.com/2021/12/apl-code.jpg?w=750 750w, https://rakuadventcalendar.files.wordpress.com/2021/12/apl-code.jpg?w=1500 1500w, https://rakuadventcalendar.files.wordpress.com/2021/12/apl-code.jpg?w=150 150w, https://rakuadventcalendar.files.wordpress.com/2021/12/apl-code.jpg?w=300 300w, https://rakuadventcalendar.files.wordpress.com/2021/12/apl-code.jpg?w=768 768w, https://rakuadventcalendar.files.wordpress.com/2021/12/apl-code.jpg?w=1024 1024w" sizes="(max-width: 750px) 100vw, 750px"/><figcaption>Why, yes, yes it is.</figcaption></figure>
<p>Despite <a href="https://www.arraycast.com/episode-4-daniels-email">my admiration for APL</a>, I think it gets the balance wrong. I appreciate symbols, but I also like words (I know, youâ€™re <a href="https://www.quora.com/What-is-the-origin-of-the-phrase-I-am-shocked-shocked">shocked, <em>shocked</em> to learn</a> that about the person responsible for the ~2.5k words youâ€™ve just read). So a few words in defense of words: although symbols offer tremendous semantic density, they sacrifice flexibility; symbols are best when they play a supporting role to words. Theyâ€™re the punctuation, while words are, well, the words.</p>
<p>Another downside to fully embracing symbols can be seen in APLâ€™s <a href="https://docs.dyalog.com/latest/ReferenceCard.pdf">overwhelming number of symbols</a>. The problem with APLâ€™s symbolic abundance isnâ€™t the learning curve â€“ that takes time, but veteran APLers have long mastered the vocabulary. Instead, the problem with APLâ€™s extremely large symbol vocabulary is that it crowds out user-created vocabulary.</p>
<p>This leaves little space for users to <a href="https://www.youtube.com/watch?v=_ahvzDzKdB0">grow their language</a> or to <a href="https://en.wikipedia.org/wiki/Language-oriented_programming">solve specific problems with specific languages</a>; that is, it discourages <a href="https://en.wikipedia.org/wiki/Domain-specific_language">DSL</a>s. And, indeed, some of the best APL programmers <a href="https://www.sacrideo.us/source-code-readability-elegance-and-complexity/">arenâ€™t a fan of DSLs</a>. I respect this view but respectfully <a href="https://beautifulracket.com/appendix/why-lop-why-racket.html">disagree</a>.</p>

<p>So, if we donâ€™t want to fully embrace symbols, APL-style, where should we draw the line with sigils?</p>
<p>Well, we want our sigils to be both memorable and quickly recognizable. This will both help new users learn them faster and allow experienced users to read sigils without expending any cognitive effort.</p>
<p>Or, put slightly differently, good sigils should be <em>easy</em> to use â€“ but <em>easy</em> in the very specific sense from <a href="https://en.wikipedia.org/wiki/Rich_Hickey">Rich Hickey</a>â€™s <a href="https://www.youtube.com/watch?v=SxdOUGdseq4">Simple Made Easy</a> talk. Hickey distinguishes between â€œsimpleâ€ (an objective measure of how intertwined/â€œcomplectedâ€ something is) from â€œeasyâ€ (a subjective measure of how familiar and practiced/â€œnear to handâ€ something is).</p>

<p>Hickey distinguish between <em>simple</em> and <em>easy</em> to argue in favor of simplicity. In general, I agree. But in the specific case of sigils (or symbols more broadly) I think that making them <em>easy</em> â€“ in the â€œnear to handâ€ sense â€“ is crucially important. Being easy matters because sigils derive much of their power from their ability to communicate to experienced readers almost for free.</p>
<p>For example, when I see <span>â€‰<code>@codesections</code>â€‰</span>, I perceive that Iâ€™ve been mentioned without devoting any conscious thought to the <span>â€‰<code>@</code>â€‰</span>. The <span>â€‰<code>@</code>â€‰</span> communicates to me in same way that the capital letters in â€œthe White Houseâ€ communicates that weâ€™re talking about the U.S. president without me ever thinking â€œoh, capital W means a proper nounâ€. But sigils can only get that meaning-for-free effect when the sigils are very near to hand indeed.</p>
<p>One way to make sigils easy is to make them visually distinct. The sigils weâ€™ve seen <span>â€‰<code>$</code>â€‰</span>, <span>â€‰<code>#,</code>â€‰</span> <span>â€‰<code>@,</code>â€‰</span> <span>â€‰<code>â‹„,</code>â€‰</span> and <span>â€‰<code>â€¢</code>â€‰</span> pass this bar. In contrast, using <a href="https://www.compart.com/en/unicode/U+1F600">ğŸ˜€</a>, <a href="https://www.compart.com/en/unicode/U+1F603">ğŸ˜ƒ</a>, and <a href="https://www.compart.com/en/unicode/U+1F604">ğŸ˜„</a> as sigils would never be easy.</p>
<p>Additionally, sigils are easier to use if users read them frequently. So there probably shouldnâ€™t be many sigils and every sigil should be used often. For an example of this done well, consider social mediaâ€™s use of <span>â€‰<code>#</code>â€‰</span> and <span>â€‰<code>@</code>â€‰</span> â€“ just two sigils, both used daily. The same goes for my <span>â€‰<code>â‹„</code>â€‰</span> and <span>â€‰<code>â€¢</code>â€‰</span> sigils: theyâ€™re applied to all my emails, so I use both every day.</p>
<p>Finally, sigils will be easier to use if users practice using them, so sigils should be convenient to type. Of course, since â€œeasyâ€ is a subjective question, â€œconvenient to typeâ€ depends on the sigilâ€™s users. So <span>â€‰<code>â‹„</code>â€‰</span> and <span>â€‰<code>â€¢</code>â€‰</span> were good sigils for their target user â€“ me â€“ because the <a href="https://wiki.archlinux.org/title/Xorg/Keyboard_configuration#Configuring_compose_key">compose key</a> lets me type them painlessly. But theyâ€™d be the wrong sigil to choose for a user group that finds typing non-<a href="https://en.wikipedia.org/wiki/ASCII">ASCII</a> characters difficult. That description probably applies to enough programmers that, at least right now, programming sigils are probably better off sticking to ASCII â€¦ even though that is a bit â˜¹.</p>
<p>When sigils follow those rules â€“ theyâ€™re visually distinct, few in number, and read and used frequently â€“ theyâ€™re able to communicate practically for free. Which is pretty powerful.</p>
<h5><a id="sigils-3-sigils-must-communicate-meaningful-low-context-information" href="#3-sigils-must-communicate-meaningful-low-context-information" aria-hidden="true"></a>3. Sigils must communicate meaningful, low-context information</h5>
<p>Earlier, we said that sigils have high semantic density because theyâ€™re short. But, of course, that implicitly assumes that they convey <em>some</em> useful meaning. If they donâ€™t mean anything, then they really are low-semantic-density characters that just get in the way â€“ that is, line noise.</p>
<p>Going back to our starting example, if someone said</p>
<blockquote><p>We had that problem at $day_job: our $code was a $mess, but everyone thought $framework would $magically fix it.</p></blockquote>
<p>â€¦then thatâ€™s not using sigils, itâ€™s just being confusing.</p>
<p>Moreover, sigils should do more than communicate some useful info; they should communicate that information in a <em>low-context</em> way. By <em>low-context</em>, I mean that the reader should be able to grasp the sigilâ€™s full meaning using purely <a href="https://www.inner-product.com/posts/fp-what-and-why/#what-functional-programming-is">local reasoning</a>. When a word has a good sigil â€“ like <span>â€‰<code>â‹„Work</code>â€‰</span> â€“ you can look at the sigiled-word in isolation and fully grasp its meaning.</p>
<p>In contrast, consider GitHubâ€™s #-sigiled issues and pull requests (e.g., <span>â€‰<code>#1066</code>â€‰</span>). I view these as miserable sigils. But the problem isnâ€™t that <span>â€‰<code>#1066</code>â€‰</span> fails to communicate useful information: it communicates that <span>â€‰<code>1066</code>â€‰</span> refers to an issue or PR in the current repo (and not, say, a year). And, by cross referencing that number with a list of the issues and PRs, you can learn what it was about. But that info requires cross referencing with data outside the immediate context â€“ that is, data thatâ€™s not <em>locally</em> available.</p>
<p>Relying on external context tanks the sigilâ€™s usefulness because humans <em>really struggle</em> to <a href="https://en.wikipedia.org/wiki/The_Magical_Number_Seven,_Plus_or_Minus_Two">remember more than a few things at a time</a> â€“ a fact of which programmers are <a href="https://medium.com/@avmnusng/software-development-the-magical-number-seven-plus-or-minus-two-9d1de54447d6">frequently and forcibly reminded</a> whenever we try to exceed that threshold. So we <strong>really</strong> donâ€™t want sigils that require the reader to keep additional, non-local context in their short-term memory.</p>
<p>A good sigil should avoid that; itâ€™s meaning should be immediately and locally clear.</p>
<h4><a id="sigils-programming-language-sigils" href="#programming-language-sigils" aria-hidden="true"></a>Programming language sigils</h4>
<p>Sigils for programming languages are a lot like sigils in other contexts. They use a single symbol to say a lot, concisely; to do so, they must convey low-context information thatâ€™s easy to understand. But programming differs from other communication contexts in one fundamental respect, and this difference means that programming sigils face unique challenges and opportunities.</p>
<p>The key difference between programming and other forms of communication is that code always has <a href="https://cs.ucdavis.edu/news/coding-two-audiences-humans-computers#:~:text=%E2%80%9CWhen,consumption">two audiences: human readers and the computer</a>. Some programmers aim to write for people to read, and <a href="https://web.mit.edu/6.001/6.037/sicp.pdf#page=22">only incidentally for the computer</a>; others might be happier writing in <a href="https://www.cs.utah.edu/~elb/folklore/mel.html">unadorned hexadecimal numbers</a>, with no human readers at all. Nevertheless, as <a href="https://en.wikipedia.org/wiki/Donald_Knuth">Donald Knuth</a> <a href="https://www.goodreads.com/work/quotes/108081-selected-papers-on-computer-science-center-for-the-study-of-language-an">observed</a>, programs must always be written <em>both</em> for computers to execute and for humans to understand.</p>
<p>This duality applies just as strongly to sigils: when an author puts a sigil in their code, theyâ€™re simultaneously communicating to the compiler and to readers of that code. And since the human readers depend on their ability to accurately model the computer, the semantics given to sigils must at all costs avoid giving inconsistent messages to those two audiences.</p>
<p>But thereâ€™s a subtle-but-crucial nuance: often, the information that a sigil is communicating to the reader is <em>about</em> information that it conveyed to the computer. As an analogy, think back to the hashtag and @mention sigils. Using <span>â€‰<code>#</code>â€‰</span> tells readers that the following word is a hashtag â€“ but the following word only is a hashtag because the <span>â€‰<code>#</code>â€‰</span> told computers to treat it that way. The <span>â€‰<code>#</code>â€‰</span> didnâ€™t communicate inconsistently; it communicated something to the computer that caused a change and simultaneously communicated that change to readers. This same pattern plays out in many programming sigils and is a key source of their expressive power.</p>
<p>The three-way conversation between the author, computer, and reader works in the other direction as well: just as the code author is communicating with both reader and computer, the computer can communicate with author and reader. (Sadly, this symmetry doesnâ€™t extend to the reader communicating back in time to the author, though that would <a href="https://www.commitstrip.com/en/2016/01/18/what-idiot-wrote-this-code/">greatly simplify software maintenance</a>.)</p>
<p>One consequence of the computerÂ â†’Â author communication is that the computer intervene if the author tries to use an invalid sigil. Thus, even the weakest version of sigils wouldnâ€™t reduce down to Hungarian notation â€“ at worst, it would be <em>compiler verified</em> Hungarian notation.</p>
<p>But encoding a variableâ€™s type isnâ€™t a good use for sigils, anyway, due to the computerÂ â†’Â reader communication. Specifically, the computer can communicate type info to the reader, and the sigil-skeptics are correct that IDEs/editors have gotten <a href="https://code.visualstudio.com/docs/languages/typescript#_hover-information">pretty good</a> at doing so. But what those skeptics seem to miss is that sigils can communicate far more meaningful sorts of information anyway. Using a sigil just to denote the type would be a waste of a perfectly good sigil, so IDE-supplied type info is entirely <a href="https://foto.wuestenigel.com/wp-content/uploads/api/it-is-completely-irrelephant.jpeg">irrelephant</a>.</p>
<p>If a sigil shouldnâ€™t convey type info, what should a sigil communicate? Well, that question is unanswerable in the abstract â€“ it depends on the needs of the particular programming language that supplies the sigil. Iâ€™ll discuss the language Iâ€™m most familiar with, Raku â€“ which you must have expected would <em>eventually</em> make an appearance on this <a href="https://raku-advent.blog/">Raku Advent Calendar</a> post.</p>
<h4><a id="sigils-how-raku-uses-sigils" href="#how-raku-uses-sigils" aria-hidden="true"></a>How Raku uses sigils</h4>
<p>This isnâ€™t the time or place to introduce you to Raku, but in case youâ€™re not familiar with it, Iâ€™ll just say that you should be able to follow everything below without any Raku-specific knowledge. Well, and that Raku is, by far, my favorite programming language; I believe itâ€™s pretty much the <a href="https://archive.fosdem.org/2021/schedule/event/programming_lang_for_free_software/">ideal language for writing free software</a> â€“ in large part because Raku provides the expressive power needed for a small team to keep up with a much larger big-tech team. And some of that power comes from Rakuâ€™s sigils.</p>
<h5><a id="sigils-1-raku-without-sigils" href="#1-raku-without-sigils" aria-hidden="true"></a>1. Raku without sigils</h5>
<p>Before we look at Rakuâ€™s sigils, Iâ€™ll mention that you can write Raku without any sigils at all; theyâ€™re a feature, not a requirement. For example, the JavaScript code <span>â€‰<code>const foo = 42</code>â€‰</span> can be written in Raku as <span>â€‰<code>my \foo = 42</code>â€‰</span>. Rakoons choose to use these sigils because they â€“ we â€“ believe that they make for clearer code. Letâ€™s take a look at why.</p>
<h5><a id="sigils-2-raku-with-sigils" href="#2-raku-with-sigils" aria-hidden="true"></a>2. Raku with sigils</h5>
<p>Raku provides sigils that let you communicate (to the computer and the reader) what interface a variable supports â€“ that is, how you can use that variable. Raku has four sigils; hereâ€™s what each communicates:</p>
<ul>
<li><span>â€‰<code>@</code>â€‰</span> says â€œUse me with an array-like interfaceâ€</li>
<li><span>â€‰<code>%</code>â€‰</span> says â€œUse me with a hash-like interfaceâ€</li>
<li><span>â€‰<code>&amp;</code>â€‰</span> says â€œUse me with a function-like interfaceâ€</li>
<li><span>â€‰<code>$</code>â€‰</span> says â€œI wonâ€™t tell you what interface you can use, but treat me as a single itemâ€</li>
</ul>


<p>What does it mean to treat a variable as a single entity? Well, imagine Iâ€™ve got a grocery list with five ingredients on it. Saying that Iâ€™ve got one thing (a list) is true, but saying that Iâ€™ve got five things (the foods) is also true <a href="https://www.youtube.com/watch?v=pSOBeD1GC_Y">from a certain point of view</a>. Using <span>â€‰<code>$</code>â€‰</span> versus <span>â€‰<code>@</code>â€‰</span> or <span>â€‰<code>%</code>â€‰</span> expresses this difference in Raku. Thus, if I use <span>â€‰<code>@grocery-list</code>â€‰</span> with a <a href="https://docs.raku.org/syntax/for"><span>â€‰<code>for</code>â€‰</span></a> loop, the body of the loop will be executed five times. But if I use <span>â€‰<code>$grocery-list</code>â€‰</span>, the loop will get executed just once (with the list as its argument).</p>
<p>This matters for more than just <span>â€‰<code>for</code>â€‰</span> loops; Raku has many places where it can operate on <em>either</em> an entire collection or on each item in a collection (this often comes up with <a href="https://en.wikipedia.org/wiki/Variadic_function">variadic functions</a>). The sigil tells Raku how to behave in those cases: it treats <span>â€‰<code>$grocery-list</code>â€‰</span> as one item, but operates on each food in <span>â€‰<code>@grocery-list</code>â€‰</span>. We can temporarily opt into the other behavior if needed, but the sigil provides a reminder to keep us and Raku on the same page.</p>
<h6><a id="sigils-bonus-powers-and-defaults" href="#bonus-powers-and-defaults" aria-hidden="true"></a>Bonus powers and defaults</h6>
<p>Rakuâ€™s sigils have a couple of extra powers that arenâ€™t directly part of their interface â€“ theyâ€™re just bonus perks.</p>
<p>The first of these perks is <a href="https://docs.raku.org/language/quoting#Interpolation:_qq">interpolation</a>. In Raku, every sigiled variable is eligible for interpolation in the <a href="https://docs.raku.org/language/quoting#___top">right sort of string</a>. The exact details depend on the sigil and arenâ€™t worth getting into here (mostly based on how the characters are typically used in strings â€“ itâ€™s kind of nice that â€œ<a href="mailto:daniel@codesections.com">daniel@codesections.com</a>â€ <em>doesnâ€™t</em> interpolate by default). You can selectively enable/disable interpolation for specific sigials or temporarily enable interpolation in strings that normally donâ€™t allow it with <a href="https://docs.raku.org/language/quoting#Unquoting"><span>â€‰<code>\qq[ ]</code>â€‰</span></a> (like JavaScriptâ€™s <span>â€‰<code>${ }</code>â€‰</span>). Between this, its Unicode support, and <a href="https://docs.raku.org/language/regexes">rationalized regex DSL</a> system, Iâ€™m prepared to confidently claim that Rakuâ€™s text manipulation facilities significantly outdo any language Iâ€™ve tried.</p>
<p>The second perk is a bit of <a href="https://en.wikipedia.org/wiki/Syntactic_sugar">syntax sugar</a> that only applies to <span>â€‰<code>&amp;</code>â€‰</span>-sigiled variables but thatâ€™s responsible for a fair bit of Rakuâ€™s distinctive look. We already said that you can invoke <span>â€‰<code>&amp;</code>â€‰</span>-sigiled variables with syntax like <span>â€‰<code>&amp;foo()</code>â€‰</span>. But due to sugar associated with <span>â€‰<code>&amp;</code>â€‰</span>, you can also invoke them with by omitting both the <span>â€‰<code>&amp;</code>â€‰</span> and the parentheses. Thus, in Raku code, you typically only see a <span>â€‰<code>&amp;</code>â€‰</span> when someone is doing something with a function other than calling it (such as passing it to a <a href="https://en.wikipedia.org/wiki/Higher-order_function">higher order function</a>). Iâ€™ve previously blogged about how you can write Raku with extra parens to give it a syntax and semantics <a href="https://www.codesections.com/blog/raku-lisp-impression/">surprisingly close to lispâ€™s</a>, so itâ€™s only fair to point out that, thanks to this <span>â€‰<code>&amp;</code>â€‰</span> perk, itâ€™s possible to write Raku with basically no parentheses at all.</p>
<p>Finally, the <span>â€‰<code>@</code>â€‰</span> and <span>â€‰<code>%</code>â€‰</span> sigils provide a default type. Iâ€™ve mentioned a few times that <span>â€‰<code>@</code>â€‰</span> does <em>not</em> mean that a variable is an <span>â€‰<code>Array</code>â€‰</span>, just that it provides an array-like interface. New Rakoons sometimes get confused about this, maybe because many <span>â€‰<code>@</code>â€‰</span>-sigiled variables you see (especially starting out) happen to be <span>â€‰<code>Array</code>â€‰</span>s, and many of the <span>â€‰<code>%</code>â€‰</span>-sigiled variables happen to be <span>â€‰<code>Hash</code>â€‰</span>s. Thatâ€™s not too surprising; ordered-mutable-list and key-value-hashmap are both useful, general abstractions â€“ thereâ€™s a reason JavaScript was able to survive so many years with just hashes and objects.</p>
<p>To support the common use case of <span>â€‰<code>@</code>â€‰</span>-sigiled variables being <span>â€‰<code>Array</code>â€‰</span>s and <span>â€‰<code>%</code>â€‰</span>-sigiled variables being <span>â€‰<code>Hash</code>â€‰</span>es, Raku provides them as default types when you declare a variable with <span>â€‰<code>@</code>â€‰</span> or <span>â€‰<code>%</code>â€‰</span>. That is, when you assign into an uninitialized <span>â€‰<code>@</code>â€‰</span>-sigiled variable, Raku provides a default <span>â€‰<code>Array</code>â€‰</span> (and the same for <span>â€‰<code>%</code>â€‰</span> and <span>â€‰<code>Hash</code>â€‰</span>). So we can write <span>â€‰<code>my @a = 1, 2</code>â€‰</span> to create an <span>â€‰<code>Array</code>â€‰</span> with <span>â€‰<code>1</code>â€‰</span> and <span>â€‰<code>2</code>â€‰</span>; or we can write <span>â€‰<code>my %h = k =&gt; &#34;v&#34;</code>â€‰</span> to create a <span>â€‰<code>Hash</code>â€‰</span>. But this is just a default â€“ youâ€™re entirely free to bind any type that provides the correct interface.</p>

<p>At this point, weâ€™ve covered powers that the four Raku sigils provide. Hereâ€™s a table with a summary before we move on:</p>
<table>
<thead>
<tr>
<th>sigil</th>
<th>@</th>
<th>%</th>
<th>&amp;</th>
<th>$</th>
</tr>
</thead>
<tbody>
<tr>
<td>Interface</td>
<td><a href="https://docs.raku.org/type/Positional">Positional</a></td>
<td><a href="https://docs.raku.org/type/Associative">Associative</a></td>
<td><a href="https://docs.raku.org/type/Callable">Callable</a></td>
<td><a href="https://docs.raku.org/type/Scalar">Scalar</a></td>
</tr>
<tr>
<td>Default</td>
<td><a href="https://docs.raku.org/type/Array">Array</a></td>
<td><a href="https://docs.raku.org/type/Hash">Hash</a></td>
<td>(none)</td>
<td>(none)</td>
</tr>
<tr>
<td>Iteration</td>
<td>One at a time; fixedÂ order</td>
<td>One pair at a time; randomÂ order</td>
<td>Entire container</td>
<td>Entire container</td>
</tr>
<tr>
<td>Guarantee</td>
<td><a href="https://docs.raku.org/language/subscripts#Positional_subscripting">Positional indexing</a></td>
<td><a href="https://docs.raku.org/language/subscripts#Associative_subscripting">Associative indexing</a></td>
<td><a href="https://docs.raku.org/language/operators#postcircumfix_(_)">invokable</a></td>
<td>(none)</td>
</tr>
</tbody>
</table>
<h5><a id="sigils-3-raku-sigils-in-practice" href="#3-raku-sigils-in-practice" aria-hidden="true"></a>3. Raku sigils in practice</h5>
<p>To really judge their power, letâ€™s look at Rakuâ€™s sigils in a more practical setting. Imagine that weâ€™re working with <a href="https://fivethirtyeight.com/">FiveThirtyEight</a>â€™s World Cup predictions â€“ specifically, their pre-game prediction of the final:</p>
<figure><img data-attachment-id="2430" data-permalink="https://raku-advent.blog/2022/12/20/sigils/538_2022-world-cup/" data-orig-file="https://rakuadventcalendar.files.wordpress.com/2021/12/538_2022-world-cup.png" data-orig-size="518,350" data-comments-opened="1" data-image-meta="{&#34;aperture&#34;:&#34;0&#34;,&#34;credit&#34;:&#34;&#34;,&#34;camera&#34;:&#34;&#34;,&#34;caption&#34;:&#34;&#34;,&#34;created_timestamp&#34;:&#34;0&#34;,&#34;copyright&#34;:&#34;&#34;,&#34;focal_length&#34;:&#34;0&#34;,&#34;iso&#34;:&#34;0&#34;,&#34;shutter_speed&#34;:&#34;0&#34;,&#34;title&#34;:&#34;&#34;,&#34;orientation&#34;:&#34;0&#34;}" data-image-title="538_2022-World-Cup" data-image-description="" data-image-caption="" data-medium-file="https://rakuadventcalendar.files.wordpress.com/2021/12/538_2022-world-cup.png?w=300" data-large-file="https://rakuadventcalendar.files.wordpress.com/2021/12/538_2022-world-cup.png?w=518" src="https://rakuadventcalendar.files.wordpress.com/2021/12/538_2022-world-cup.png?w=750" alt="A depiction of Five Thirty Eight&#39;s prediction for the World Cup final.  It assigns Argentina a 53% chance of victory and France a 47% chance" srcset="https://rakuadventcalendar.files.wordpress.com/2021/12/538_2022-world-cup.png 518w, https://rakuadventcalendar.files.wordpress.com/2021/12/538_2022-world-cup.png?w=150 150w, https://rakuadventcalendar.files.wordpress.com/2021/12/538_2022-world-cup.png?w=300 300w" sizes="(max-width: 518px) 100vw, 518px"/></figure>
<p>Where would we start? Our data consists of two keyâ€“value pairs. Letâ€™s represent them with two of Rakuâ€™s <a href="https://docs.raku.org/type/Pair"><span>â€‰<code>Pair</code>â€‰</span></a>s: <span>â€‰<code>Argentina =&gt; .53</code>â€‰</span> and <span>â€‰<code>France =&gt; .47</code>â€‰</span>. Next, weâ€™ll want to store these pairs into a variable. But what sigil should we use?</p>
<p>Well, we could use no sigil at all, but that would sacrifice all the perks that come with sigils in Raku. No thanks. Or we could use a <span>â€‰<code>&amp;</code>â€‰</span>-sigiled variable by writing <span>â€‰<code>my &amp;f = {(Argentina =&gt; .53, France =&gt; .47)}</code>â€‰</span>. But this would be a pretty odd â€“ ok, bizarre â€“ choice. By using <span>â€‰<code>&amp;</code>â€‰</span> we get a function that takes no arguments and, when invoked, returns the two pairs â€“ which seems strictly inferior to working with the two pairs directly. I mention the possibility of using <span>â€‰<code>&amp;</code>â€‰</span> only to emphasize that itâ€™s our choice: we choose the sigil (and thus the semantics).</p>
<p>With those two out of the way, letâ€™s consider the three viable options: <span>â€‰<code>@</code>â€‰</span>, <span>â€‰<code>%</code>â€‰</span>, and <span>â€‰<code>$</code>â€‰</span>.</p>
<p>Using the <span>â€‰<code>@</code>â€‰</span> sigil creates an <span>â€‰<code>Array</code>â€‰</span> containing two <span>â€‰<code>Pairs</code>â€‰</span>; we could do that with <span>â€‰<code>myÂ @winâ€‘predictions =Â ArgentinaÂ =&gt;Â .53,Â FranceÂ =&gt;Â .47</code>â€‰</span>. This keeps the pairs in order, so it might be a good choice if we care about order (maybe weâ€™re planning to display teams ranked by win chance?). The @-sigiled <span>â€‰<code>Array</code>â€‰</span> also lets us iterate through the teams one at a time.</p>
<p>Alternately, using the <span>â€‰<code>%</code>â€‰</span> sigil (<span>â€‰<code>myÂ %winâ€‘predictionsÂ = ArgentinaÂ =&gt;Â .53,Â FranceÂ =&gt;Â .47</code>â€‰</span>) gives us a <span>â€‰<code>Hash</code>â€‰</span> with team names for our keys and predicted odds as our values, which lets us access a teamâ€™s odds by providing their name: e.g., <span>â€‰<code>%winâ€‘predictions&lt;France&gt;</code>â€‰</span> returns <span>â€‰<code>.53</code>â€‰</span>. This might be the way to go if weâ€™ll need to access an arbitrary teamâ€™s odds of winning (maybe weâ€™re building a search box where you can enter a name to see that teamâ€™s predicted odds). The %-sigiled <span>â€‰<code>Hash</code>â€‰</span> still lets us iterate through the teams one at a time but this time in a random order.</p>
<p>What about the <span>â€‰<code>$</code>â€‰</span> sigil? Well, we actually have a few options. <span>â€‰<code>$</code>â€‰</span> tells Raku (and the reader) that weâ€™re treating the predictions as a single item (not a collection). This means that <span>â€‰<code>myÂ $winâ€‘predictionsÂ =Â ArgentinaÂ =&gt;Â .53,Â FranceÂ =&gt;Â .47</code>â€‰</span> isnâ€™t the syntax we want â€“ since <span>â€‰<code>$</code>â€‰</span>-sigiled variables are always a single item, that would assign the pair <span>â€‰<code>Argentina =&gt; .53</code>â€‰</span> to <span>â€‰<code>$winâ€‘predictions</code>â€‰</span> and discard the second pair. (If we did this, Raku helpfully warns that we might not have meant to.)</p>
<p>To store both <span>â€‰<code>Pair</code>â€‰</span>s in <span>â€‰<code>$win-predictions</code>â€‰</span>, weâ€™ll need to group them in some way. For example, we could group them with square brackets, which <a href="https://docs.raku.org/language/syntax#Array_literals">creates an <span>â€‰<code>Array</code>â€‰</span></a>. Or we could group them with curly brackets, which <a href="https://docs.raku.org/language/syntax#Hash_literals">creates a</a>. These two options would look like <span>â€‰<code>myÂ $winâ€‘predictionsÂ = [ArgentinaÂ =&gt;Â .53,Â FranceÂ =&gt;Â .47]</code>â€‰</span> and <span>â€‰<code>myÂ $winâ€‘predictionsÂ = {ArgentinaÂ =&gt;Â .53,Â FranceÂ =&gt;Â .47}</code>â€‰</span>, respectively.</p>
<p>But hold on, if we end up storing an <span>â€‰<code>Array</code>â€‰</span> or <span>â€‰<code>Hash</code>â€‰</span> in our <span>â€‰<code>$</code>â€‰</span>-sigiled variable, how is using <span>â€‰<code>$</code>â€‰</span> different from using the <span>â€‰<code>@</code>â€‰</span> or <span>â€‰<code>%</code>â€‰</span> sigils?</p>
<p>Itâ€™s different that the <span>â€‰<code>$</code>â€‰</span> communicates to Raku and to readers that weâ€™re treating the entire <span>â€‰<code>Array</code>â€‰</span>/<span>â€‰<code>Hash</code>â€‰</span> as a <em>single</em> item â€“ and that Raku should too. This has a few effects, most notably that iterating over a <span>â€‰<code>$</code>â€‰</span>-sigiled <span>â€‰<code>Array</code>â€‰</span>/<span>â€‰<code>Hash</code>â€‰</span> will take the entire container at once, rather than one <span>â€‰<code>Pair</code>â€‰</span> at a time.</p>
<p>This â€œitemâ€ semantics might best fit our mental model if weâ€™re thinking of â€œmatchesâ€ as a single entity (instead of collection of teamsâ€“odds pairs). Looking at them this way makes a lot of sense â€“ after all, the statement â€œFrance had a 47% chance to winâ€ doesnâ€™t mean much without knowing that weâ€™re talking about their match against Argentina. If we do use a <span>â€‰<code>$</code>â€‰</span>-sigiled variable, then weâ€™ll still need to decide between using an array or a hash. The considerations here are basically the same as in our choice between <span>â€‰<code>@</code>â€‰</span> and <span>â€‰<code>%</code>â€‰</span>: do we care more about preserving order or about indexing by team name?</p>
<p>In sum, we can pick between three sigils. Choosing <span>â€‰<code>@</code>â€‰</span> communicates that weâ€™re using an ordered array of <span>â€‰<code>Pair</code>â€‰</span>s; choosing <span>â€‰<code>%</code>â€‰</span> communicates that weâ€™re focused on the keyâ€“value relationship; and choosing <span>â€‰<code>$</code>â€‰</span> communicates that weâ€™re treating the match as a single item.</p>
<p>And, crucially, our choice of sigil communicates that entirely locally: every time a reader (which could be us in a few weeks!) sees <span>â€‰<code>win-predictions</code>â€‰</span> with a certain sigil, it tells the reader whether theyâ€™re dealing with an ordered collection, a collection that associates keys with values, or a conceptually single item. Thereâ€™s never a need to scroll up to where the variable was defined â€“ and, as the functional programmers <a href="https://www.inner-product.com/posts/fp-what-and-why/">keep reminding us</a>, itâ€™s far easier to understand code when we can do so without relying on any remote context.</p>
<p>Finally, itâ€™s important to note that the information we get from the sigil is <em>not</em> the variableâ€™s type: <span>â€‰<code>myÂ @posÂ =Â 1,2</code>â€‰</span>, and <span>â€‰<code>myÂ $scalarÂ =Â [1,2]</code>â€‰</span> both create <span>â€‰<code>Array</code>â€‰</span>s and if you (or your IDE) ask <span>â€‰<code>@pos</code>â€‰</span> or <span>â€‰<code>$scalar</code>â€‰</span> for their type, theyâ€™ll both honestly report that theyâ€™re <span>â€‰<code>Array</code>â€‰</span>s. And, as we discussed, <span>â€‰<code>@</code>â€‰</span>â€“ and <span>â€‰<code>%</code>â€‰</span>-sigiled variables arenâ€™t guaranteed to be <span>â€‰<code>Array</code>â€‰</span>s and <span>â€‰<code>Hash</code>â€‰</span>es. The questions â€œwhat type is this variableâ€ and â€œwhat interface does this variable provideâ€ are <a href="https://en.wikipedia.org/wiki/Orthogonality_(programming)">orthogonal</a>: answering one doesnâ€™t answer the other. So Rakuâ€™s sigils definitely arenâ€™t â€œjust a way of encoding type information that could be displayed by an IDEâ€ â€“ theyâ€™re a way to create and document a variableâ€™s interface.</p>
<p>At least in my book, thatâ€™s quite a bit of information for a single character to communicate. Iâ€™m more than happy to conclude that Rakuâ€™s sigils communicate meaningful, low-context information. All in all, I believe weâ€™ve seen that Rakuâ€™s sigils can be pretty powerful â€“ and thatâ€™s <em>without</em> even mentioning Rakuâ€™s <a href="https://docs.raku.org/language/variables#index-entry-Twigil">nine â€œtwigilsâ€ (secondary sigils)</a>!</p>
<h4><a id="sigils-conclusion-and-next-steps" href="#conclusion-and-next-steps" aria-hidden="true"></a>Conclusion and next steps</h4>
<p>If youâ€™ve made it this far, thanks â€“ youâ€™re clearly my kind of weird! â€¦Unless you skipped down to the conclusion in the naive hope that Iâ€™d offer some sort of cogent tl;dr à² _à² </p>
<p>In this post, weâ€™ve talked about sigils generally and seen how â€“ even in non-programming contexts â€“ they can be a powerful tool to concisely communicate with your reader. We also looked at how Raku uses sigils and saw that sigils let Rakoons communicate what interface our variables have both to Raku and to readers of our code.</p>
<p>I hope that Iâ€™ve convinced you that sigils, used thoughtfully, can make communication easier and code more readable. In my ideal world, I also hope to have tempted you into taking a closer look at Raku. Realistically, though, this post wasnâ€™t really optimized for doing so â€“ as cool as sigils are, they might not make my list of Top 10 Raku Features (number 7 will shock you!).</p>
<p>But even if theyâ€™re not my <em>favorite</em> Raku feature, I wanted to talk about sigils â€“ and specifically Rakuâ€™s sigils â€“ because they <em>are</em> a strength of the language. And yet, people sometimes mention sigils as the reason that they or others <a href="https://www.reddit.com/r/rakulang/comments/sd6ls3/rfc_foo_42/#:~:text=And%2C%20vastly,point.">avoid a language</a> â€“ which strikes me as entirely backwards.</p>
<p>So, whether itâ€™s Raku, Bash, Perl, PHP, or any of the <a href="https://rosettacode.org/wiki/Special_characters">other languages that use sigils</a>, I hope youâ€™ll never again pass on a language because it uses a few more <span>â€‰<code>$</code>â€‰</span>s than some others. Sigils can be a powerful tool. <a href="https://en.wikipedia.org/wiki/Sigil_(computer_programming)">According to Wikipedia</a>, the word â€œsigilâ€ derives from the Latin for â€œlittle sign with magical powerâ€. And, yeah, â€œmagical powerâ€ seems about right to me.</p>
<p>Just, you know, not top-ten-level magic.</p>
<hr/>

	</div></div>
  </body>
</html>
