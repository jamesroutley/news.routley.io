<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://inclouds.space/localhost-domains">Original</a>
    <h1>.localhost Domains</h1>
    
    <div id="readability-page-1" class="page"><section>
<p>I’ve found a way to configure private, custom domains for web-apps I have running on my computer. So instead of having to remember and type “localhost:4333”, I can simply navigate to “appname.localhost”. I love it! </p><p>Here’s how the system works:</p><ol><li><p>Each app is set up as a <a href="https://en.wikipedia.org/wiki/Launchd" title="">launchd</a> daemon listening on a unique port. <a href="https://gist.github.com/charlesetc/af42b15d3e5e3a64c1aeddaa54b8f1fd" title="">Here’s an example</a> plist.</p></li><li><p>I configure <a href="https://claude.ai/share/d62b8bdb-622b-4e97-b614-06b6f16ff3e5" title="">/etc/hosts</a> to redirect traffic to these domains to 127.0.0.1 instead.</p></li><li><p>I then run and configure <a href="https://caddyserver.com/docs/" title="">Caddy</a> to redirect traffic from 127.0.0.1 to the right port for the domain.</p></li></ol><p>So, if I’m running an app on port 5050, I will have a corresponding entry in /etc/host:</p><pre><code>127.0.0.1 inclouds.localhost</code></pre><p>and a section in my Caddyfile like this:</p><pre><code>inclouds.localhost {</code></pre><pre><code>    reverse_proxy localhost:5050</code></pre><pre><code>    tls internal</code></pre><pre><code>    encode gzip zstd</code></pre><pre><code>}</code></pre><pre><code><br/></code></pre><p>This is working well but I’d really like to see this process simplified. How cool would it be to install or uninstall apps to .localhost domains with a single command, instead of manually editing three files? But that’s a project for another day. </p><p>Thanks for reading!</p><p>Update: <a href="https://bsky.app/profile/arquipelago.org" title="">cristóbal</a> came up with <a href="https://github.com/tobyshooters/localhost" title="">a command</a> using dnsmasq that makes this even better!</p>
</section></div>
  </body>
</html>
