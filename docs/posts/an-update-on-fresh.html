<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://deno.com/blog/an-update-on-fresh">Original</a>
    <h1>An Update on Fresh</h1>
    
    <div id="readability-page-1" class="page"><div><p><a href="https://fresh.deno.dev" rel="noopener noreferrer">Fresh</a> is a simple web framework based on the latest
web standards that we built and use quite heavily here at Deno. We‚Äôve teased the
next version for quite some time now, but haven‚Äôt yet cut a release. Rest
assured we haven‚Äôt forgotten about it. In fact,
<a href="https://jsr.io/@fresh/core@2.0.0-alpha.29" rel="noopener noreferrer">a pre-release version of Fresh 2</a> is
being used in production here at Deno ‚Äî on our main website as well as on
<a href="https://deno.com/deploy" rel="noopener noreferrer">Deno Deploy</a>.</p>
<p>Whenever we post an update regarding Deno on any of our social channels, many of
you ask: What about Fresh 2? After all, we have announced plans to start working
on Fresh 2 <a href="https://github.com/denoland/fresh/issues/2363" rel="noopener noreferrer">a long while ago</a> and
it isn‚Äôt out yet a year later. So this blog post is an update on where we‚Äôre at.</p>
<ul>
<li><a href="#why-fresh-2">Why Fresh 2?</a></li>
<li><a href="#why-the-delay">Why the delay?</a></li>
<li><a href="#where-is-fresh-2-now">Where is Fresh 2 now?</a></li>
<li><a href="#what-does-fresh-2-bring">What does Fresh 2 bring?</a></li>
<li><a href="#how-to-get-fresh-2-alpha">How to get Fresh 2 alpha</a></li>
<li><a href="#coming-soon">Coming soon</a></li>
</ul>
<h2 id="why-fresh-2"><a aria-hidden="true" tabindex="-1" href="#why-fresh-2"><svg viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Why Fresh 2?</h2>
<p>The first version of Fresh was originally created as a simple way to build
websites leveraging the latest web technologies available in Deno. It quickly
rose in popularity among Deno users, so much so that
<a href="https://deno.com/blog/fresh-is-stable" rel="noopener noreferrer">Fresh 1.0</a> became one of the
<a href="https://www.star-history.com/blog/star-history-yearly-pick-2022-frontend#fresh" rel="noopener noreferrer">top starred GitHub frontend projects that year</a>.
Since then, we pushed many improvements, like becoming faster, new features like
<a href="https://fresh.deno.dev/docs/concepts/partials" rel="noopener noreferrer">Partials</a> and a lot of polish.</p>
<p>However, as the needs of Fresh projects grew, we encountered new challenges.
Projects with larger islands, more routes, more assets, as well as a desire to
extend aspects of Fresh were pushing the limits of the Fresh 1 code base. Adding
new features became harder and harder and it was obvious that we needed a better
foundation to make Fresh advance.</p>
<p>This is a normal part of the evolution of a software project; you try an
approach, see what works and what doesn‚Äôt, and iterate from there. We got to
work and, with all the learnings from Fresh, built a new architecture for
Fresh 2.</p>
<h2 id="why-the-delay"><a aria-hidden="true" tabindex="-1" href="#why-the-delay"><svg viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Why the delay?</h2>
<p>Building a truly next-generation framework sometimes means reinforcing the
underlying foundations first. To make Fresh 2.0 faster, more extensible, and
more delightful to use than ever before, we dedicated significant effort to
enhancing the core Deno platform and our JavaScript registry, JSR. While this
foundational work was time-intensive, it was crucial for the advanced features
and stability we‚Äôre now bringing to Fresh 2.</p>
<p>Things were going very well during the initial development of Fresh 2.
Nevertheless, looking at the issue tracker and questions asked in our Discord
channel, made it clear that the majority of issues couldn‚Äôt be fixed in Fresh
itself. They needed to be fixed in Deno as they were caused by underlying
technologies such as <code>http:</code> specifiers and Node compatibility. In order to
deliver on the ambitious goals we had for Fresh 2, we had to take a step back
and ensure these foundational pieces were robust.</p>
<h3 id="ecosystem-compatibility"><a aria-hidden="true" tabindex="-1" href="#ecosystem-compatibility"><svg viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Ecosystem compatibility</h3>
<p>We always wanted to support third-party npm packages directly and seamlessly in
Fresh. To truly realize this, it became vital to first enhance core aspects of
Deno itself. Focus temporarily shifted to contribute directly to
<a href="https://deno.com/2" rel="noopener noreferrer">the Deno 2 release</a>, building the critical groundwork <em>for</em>
Fresh 2 to thrive, particularly around Node and npm compatibility. This
groundwork directly enables a smoother experience with a wider range of packages
in Fresh 2, and we were able to resolve many related compatibility issues as a
result. However, this work remains ongoing.</p>
<h3 id="simplifying-via-jsr-and-deno-deploy"><a aria-hidden="true" tabindex="-1" href="#simplifying-via-jsr-and-deno-deploy"><svg viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Simplifying via JSR and Deno Deploy</h3>
<p>One issue that users encountered frequently was with import maps or duplicate
dependencies in their code. This was another issue better served by addressing
underlying technologies. While we migrated <a href="https://jsr.io/@fresh" rel="noopener noreferrer">Fresh</a> to
<a href="https://jsr.io" rel="noopener noreferrer">JSR</a>, we focuesd on JSR to improve its usability, which in turn
simplifies dependency management for Fresh projects.</p>
<p>After that, attention was turned to work on the next iteration of Deno Deploy,
which will include a build step (more details about this in a future blog post).
We used Fresh and Fresh 2 as a test case with the next version of Deno Deploy,
aiming to build the best possible deployment experience. Whilst these projects
took the bulk of my engineering efforts, they also lay the foundation for a
better Fresh.</p>
<h2 id="where-is-fresh-2-now"><a aria-hidden="true" tabindex="-1" href="#where-is-fresh-2-now"><svg viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Where is Fresh 2 now?</h2>
<p>Whilst work on these foundational projects was going full steam ahead, we made
sure to switch our own projects to the alpha version of Fresh 2. This gave us
ample time to battle test it more.</p>
<p>Fresh 2 is already powering deno.com and Deno Deploy in production, but we‚Äôre
still putting the final touches on the plugin system, bundler integration, and
overall developer experience. Our target for the Fresh 2.0 stable release is
<strong>late Q3 2025 (likely September)</strong>. This timeline allows us to diligently
incorporate community feedback from the alpha and ensure the high level of
polish we‚Äôre committed to. We‚Äôll provide more precise date estimates as we get
closer and hit our internal milestones.</p>
<h2 id="what-does-fresh-2-bring"><a aria-hidden="true" tabindex="-1" href="#what-does-fresh-2-bring"><svg viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>What does Fresh 2 bring?</h2>
<p>Fresh 2 in makes the framework much more extensible, faster and easier to work
with. The core API has been simplified to resemble similar APIs as you might
know already from other frameworks like <code>express</code> or <code>koa</code>.</p>
<p>This next major version will introduce Express/Hono-like APIs, true async
components, and a new plugin system for creating and sharing Fresh middleware.</p>
<div><pre><span>const</span> app <span>=</span> <span>new</span> <span>App</span><span>(</span><span>)</span><span>;</span>


app<span>.</span><span>use</span><span>(</span><span>(</span><span>ctx</span><span>)</span> <span>=&gt;</span> <span>{</span>
  <span>console</span><span>.</span><span>log</span><span>(</span><span><span>`</span><span>Here is a cool request: </span><span><span>${</span>ctx<span>.</span><span>url</span><span>}</span></span><span>`</span></span><span>)</span><span>;</span>
  <span>return</span> ctx<span>.</span><span>next</span><span>(</span><span>)</span><span>;</span>
<span>}</span><span>)</span><span>;</span>


app<span>.</span><span>get</span><span>(</span><span>(</span><span>ctx</span><span>)</span> <span>=&gt;</span> <span>{</span>
  <span>return</span> <span>new</span> <span>Response</span><span>(</span><span>&#34;it works!&#34;</span><span>)</span><span>;</span>
<span>}</span><span>)</span><span>;</span>


<span>await</span> app<span>.</span><span>listen</span><span>(</span><span>)</span><span>;</span></pre></div><p>Adding custom middlewares, routes or other things is much easier with this. The
signature of middlewares and handlers are the exact same, so you don‚Äôt need
different types for them anymore either.</p>
<div><pre>

<span>const</span> <span>foo</span> <span>=</span> <span>(</span><span><span>req</span><span>:</span> <span>Request</span><span>,</span> <span>ctx</span><span>:</span> <span>FreshContext</span></span><span>)</span> <span>=&gt;</span> <span>new</span> <span>Response</span><span>(</span><span>&#34;hello&#34;</span><span>)</span><span>;</span>


<span>const</span> <span>foo</span> <span>=</span> <span>(</span><span><span>ctx</span><span>:</span> <span>FreshContext</span></span><span>)</span> <span>=&gt;</span> <span>new</span> <span>Response</span><span>(</span><span>&#34;hello&#34;</span><span>)</span><span>;</span></pre></div><p>Fresh 2 also ships with support for the <code>precompile</code> JSX transform in Deno out
of the box. This significantly speeds up rendering. And much more‚Ä¶</p>
<h2 id="how-to-get-fresh-2-alpha"><a aria-hidden="true" tabindex="-1" href="#how-to-get-fresh-2-alpha"><svg viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>How to get Fresh 2 alpha</h2>
<p>Fresh 2.0 is currently available as an alpha release. While this means there
might still be some evolving APIs or occasional rough edges as we iterate based
on feedback, we‚Äôre incredibly excited about its current capabilities. In fact,
we‚Äôre already battle-testing it in production on deno.com and Deno Deploy! We
encourage you to try it for new projects or in development environments, and
your feedback during this phase is invaluable as we progress towards stability.</p>
<p>To get the best experience with Fresh 2.0 alpha, we also recommend using it with
the <strong>newly released Deno 2.3!</strong> This version includes features like
<a href="https://deno.com/blog/v2.3#improved-deno-compile" rel="noopener noreferrer">improved <code>deno compile</code></a> and
<a href="https://deno.com/blog/v2.3#local-npm-packages" rel="noopener noreferrer">local npm packages</a> which further streamline
your Fresh development workflow. <a href="https://deno.com/blog/v2.3" rel="noopener noreferrer">Learn more about Deno 2.3 here.</a></p>
<h3 id="from-scratch"><a aria-hidden="true" tabindex="-1" href="#from-scratch"><svg viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>From scratch</h3>
<p>You can run Fresh‚Äôs scaffolding script in your terminal with this command:</p>
<div><pre>$ deno run <span>-Ar</span> jsr:@fresh/init@2.0.0-alpha.33
 üçã Fresh: The next-gen web framework.

Project Name: fresh-project
Set up Tailwind CSS <span>for</span> styling? <span>[</span>y/N<span>]</span> y
Do you use VS Code? <span>[</span>y/N<span>]</span> y

Project initialized<span>!</span>

Enter your project directory using <span>cd</span> fresh-project.
Run deno task start to start the project. CTRL-C to stop.

Stuck? Join our Discord https://discord.gg/deno</pre></div><p>Going into your newly created Fresh project then running <code>deno task dev</code> and
pointing your browser to <code>localhost:8000</code>:</p>
<p><img src="https://deno.com/blog/an-update-on-fresh/fresh.webp" alt="New Fresh project" title=""/></p>
<h3 id="upgrading-an-existing-fresh-project"><a aria-hidden="true" tabindex="-1" href="#upgrading-an-existing-fresh-project"><svg viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Upgrading an existing Fresh project</h3>
<p>If you already have an existing Fresh project, you can upgrade to Fresh
2.0.0-alpha.33 from your command line:</p>
<div><pre>$ deno run <span>-Ar</span> jsr:@fresh/update@2.0.0-alpha.33</pre></div><p>This will apply most API changes made in Fresh 2 automatically, like updating
<code>$fresh/server.ts</code> imports to <code>fresh</code>.</p>
<p>For more details on migrating an existing Fresh project to Fresh 2,
<a href="https://fresh.deno.dev/docs/canary/examples/migration-guide" rel="noopener noreferrer">check out our migration guide.</a></p>
<h2 id="coming-soon"><a aria-hidden="true" tabindex="-1" href="#coming-soon"><svg viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Coming soon</h2>
<p>Fresh 2 has been a joy to work with at Deno, and we‚Äôre excited to bring this
much simpler and extensible version of Fresh to you as we approach the stable
release later this year. Your feedback on the alpha versions is crucial, so
please give it a try and let us know what you think!</p>
<blockquote>
<p><strong>üö®Ô∏è <a href="https://deno.com/blog/v2.3" rel="noopener noreferrer">Deno 2.3 released!</a> üö®Ô∏è</strong></p>
<ul>
<li><a href="https://deno.com/blog/v2.3#improved-deno-compile" rel="noopener noreferrer">Improved <code>deno compile</code></a></li>
<li><a href="https://deno.com/blog/v2.3#local-npm-packages" rel="noopener noreferrer">Local npm packages</a></li>
<li><a href="https://deno.com/blog/v2.3#more-robust-opentelemetry-support" rel="noopener noreferrer">OTel event recording &amp; tracing in distributed services and more</a></li>
</ul>
</blockquote>
</div></div>
  </body>
</html>
