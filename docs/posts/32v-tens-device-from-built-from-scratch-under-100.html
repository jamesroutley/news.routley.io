<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://littlemountainman.github.io/2025/11/17/tens/">Original</a>
    <h1>Show HN: 32V TENS device from built from scratch under $100</h1>
    
    <div id="readability-page-1" class="page"><div>
      <div>
      <div>

  

  <article>
  

<p>I‚Äôve always been fascinated by the intersection of electronics and the human body ‚Äîhow a few carefully shaped pulses can interact with nerves and muscles. Recently, I built a monophasic TENS (Transcutaneous Electrical Nerve Stimulation) device for a family member, specifically tailored for the hand.</p>

<center>
	<img src="https://littlemountainman.github.io/assets/tens_pcb.png"/>
</center>

<h2 id="-power-stage">üîã Power Stage</h2>

<p>The heart of any stimulator is its power supply. I started with a <strong>3.7V LiPo battery</strong> as the energy source, managed by the <strong>MCP73831 charger IC</strong>. This gave me a simple USB-C charging interface and safe single-cell management.</p>

<p>From there, I needed two rails:</p>

<ul>
  <li><strong>+3.3V logic rail</strong> for the microcontroller and digital circuitry</li>
  <li><strong>High-voltage rail (~32V)</strong> for the stimulation pulses</li>
</ul>

<p>The <strong>TPS55340 boost converter</strong> handled the heavy lifting, stepping the battery voltage up to 32V. Careful selection of inductors (100 ¬µH for the boost stage).</p>

<p>While the boost converter gave me the high-voltage stimulation rail, the digital brain needed a clean and stable <strong>3.3V supply</strong>. For that, I used the <strong>TPS63001 buck‚Äëboost converter</strong> from TI.</p>

<p>Why this choice?</p>

<ul>
  <li>The hand‚Äëheld device runs from a single Li-ion cell, which can swing from <strong>4.2V (fully charged)</strong> down to <strong>~3.0V (discharged)</strong>.</li>
  <li>A simple LDO wouldn‚Äôt cut it, because once the battery dips below 3.3V, the logic rail would collapse.</li>
  <li>The TPS63001 solves this by <strong>buck‚Äëboosting</strong>: it can step voltage up or down as needed, keeping the microcontroller happy at 3.3V across the entire discharge curve.</li>
</ul>

<p>This ensured the ATmega32U4 and other logic devices always had a reliable rail, independent of battery state.</p>

<h2 id="control-stage">Control Stage</h2>

<p>For brains, I went with the <strong>ATmega32U4</strong>. It‚Äôs a familiar workhorse, USB-capable, and has enough timers and PWM channels to generate the stimulation waveforms.</p>

<p>Key features in the control block:</p>

<ul>
  <li><strong>10bit PWM outputs</strong> mapped to finger electrodes (Thumb, Index, Middle, Ring, Pinky)</li>
  <li><strong>ADC inputs</strong> reserved for sensing or feedback (though not strictly necessary in monophasic mode)</li>
  <li><strong>Internal clock</strong> for stable timing</li>
  <li><strong>Reset and ISP header (TC2030)</strong> for easy firmware flashing</li>
</ul>

<p>I wrote firmware to generate monophasic pulses with adjustable frequency and duty cycle. The microcontroller essentially acts as a programmable waveform generator, with parameters tuned for therapeutic comfort.</p>

<h2 id="output-stage">Output Stage</h2>

<p>The output stage is where the magic happens. Here, the boosted 32V rail is gated by <strong>N-Channel MOSFET (DMN6075S)</strong> controlled by the MCU and <strong>BJTs (FZT853, MMBT2222)</strong> to deliver a limited controlled current. Inspired by this: https://electronics.stackexchange.com/questions/288388/help-dimensioning-resistors-in-a-two-npn-transistor-current-limiter-circuit</p>

<p>Each electrode channel is tied to a finger pad, with the palm serving as a common ground. The design ensures that current flows in a monophasic fashion‚Äîone direction only‚Äîavoiding the complexity of biphasic balancing but still effective for localized stimulation.</p>

<h2 id="electrode-layout">Electrode Layout</h2>

<p>The electrodes were arranged to match the hand anatomy:</p>

<ul>
  <li>Thumb, Index, Middle, Ring, Pinky each get their own channel, which are ‚Äúon‚Äù</li>
  <li>Palm is the common ground reference, which gets switched via the MOSFET and the MCU at a certain frequency, e.g. 14Hz.</li>
</ul>

<p>This layout allows selective stimulation of different fingers, useful for rehabilitation exercises.</p>

<center>
	<img src="https://littlemountainman.github.io/assets/tens_pcb2d.png"/>
</center>

<h2 id="-putting-it-all-together">üß© Putting It All Together</h2>

<p>So the blocks look like this:</p>

<table>
  <thead>
    <tr>
      <th>Block</th>
      <th>Key Components</th>
      <th>Function</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Power</td>
      <td>MCP73831, TPS55340, TPS63001</td>
      <td>Battery charging, boost to 32V, 3.3V rail</td>
    </tr>
    <tr>
      <td>Control</td>
      <td>ATmega32U4, crystal, ISP header</td>
      <td>Generate PWM pulses, manage timing</td>
    </tr>
    <tr>
      <td>Output</td>
      <td>MOSFETs, BJTs, TVS diodes</td>
      <td>Gate high-voltage pulses to electrodes</td>
    </tr>
    <tr>
      <td>Electrodes</td>
      <td>Finger pads + palm ground</td>
      <td>Deliver stimulation to hand muscles</td>
    </tr>
  </tbody>
</table>

<h2 id="reflections">Reflections</h2>

<p>This project was equal parts electronics design and human-centered engineering. The monophasic approach kept things simple, and by breaking the design into clear blocks‚Äîpower, control, output‚Äî I could iterate quickly.</p>

<p>Most importantly, it‚Äôs not just a gadget. Total cost for the project is &lt; $100.</p>

  </article>

  



  <!-- mathjax -->
  
  
  <!-- disqus comments -->

      </div>
      
    </div>
  
     
    

    
  
    

</div></div>
  </body>
</html>
