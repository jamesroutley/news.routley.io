<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://blog.lyc8503.net/en/post/asn-5-worldwide-servers/">Original</a>
    <h1>How to Get a North Korea / Antarctica VPS</h1>
    
    <div id="readability-page-1" class="page"><div itemprop="articleBody"><p>This article is currently an experimental machine translation and may contain errors. If anything is unclear, please refer to the original Chinese version. I am continuously working to improve the translation.</p><h2 id="Introduction"><a href="#Introduction" title="Introduction"></a>Introduction</h2><p>This blog post should be the final part of the <em>‚ÄúRunning Your Own ISP at Home‚Äù</em> series, and we‚Äôre going to talk about how to modify the geolocation of the IP addresses we announce.</p><p>By tweaking IP geolocation, you can:</p><ul><li>Display absurd IP locations on various platforms ‚Äî for example, Antarctica (which barely has internet infrastructure), North Korea (which isn‚Äôt connected to the global internet), or some obscure tiny country with only tens of thousands of people</li><li>Use a single VPS to obtain IP addresses from all over the world, <del>show off on probe networks</del> and achieve a weird kind of ‚ÄúAll In One‚Äù status (yep, even this is All In One now)</li><li>Unlock region-locked streaming services ‚Äî see <a target="_blank" rel="noopener" href="https://hostloc.com/thread-1247865-1-1.html">this hostloc thread</a></li><li><del>Run a one-man IDC selling VPSes from all corners of the globe</del> ‚Äî I found one called GlobalVM, but haven‚Äôt tried it, so no recommendation. Feel free to search on your own.</li></ul><p>This article will mainly focus on modifying IP geolocation and using WARP to get a corresponding-region IPv4 address. Unlocking streaming content and running an IDC won‚Äôt be covered in depth ‚Äî refer to the link above if interested.</p><h2 id="Prerequisites"><a href="#Prerequisites" title="Prerequisites"></a>Prerequisites</h2><p>This is probably common knowledge for many, but for completeness, let‚Äôs go over it briefly.</p><h3 id="IP-Databases"><a href="#IP-Databases" title="IP Databases"></a>IP Databases</h3><p>IP database providers compile mappings from <code>IP ‚Üí geographical location</code> using methods like network scanning and WHOIS lookups. They also include data such as IP threat scores and type (residential, server, or VPN). These databases are sold to users ‚Äî typically websites ‚Äî which then query them in the backend to display location info and perform risk assessment. A handy tool for querying multiple geolocation databases at once: <a target="_blank" rel="noopener" href="https://iplark.com/">https://iplark.com/</a></p><p>Popular IP databases include Maxmind, IPInfo, and DB-IP. Smaller databases often sync data from larger ones.</p><h3 id="WARP"><a href="#WARP" title="WARP"></a>WARP</h3><p>WARP is a WireGuard-based VPN service provided by Cloudflare. While they offer an official Linux client, most people use native WireGuard to connect. WARP can provide your server with both IPv4 and IPv6 addresses, commonly used to add IPv4 connectivity to IPv6-only VPSes (or vice versa). One key feature of WARP is that <strong>the public IP it assigns will have the same geolocation as the IP you‚Äôre connecting from</strong> ‚Äî we‚Äôll use this property later. For a detailed WARP setup guide, check out: <a target="_blank" rel="noopener" href="https://p3terx.com/archives/use-cloudflare-warp-to-add-extra-ipv4-or-ipv6-network-support-to-vps-servers-for-free.html">https://p3terx.com/archives/use-cloudflare-warp-to-add-extra-ipv4-or-ipv6-network-support-to-vps-servers-for-free.html</a></p><h2 id="Submitting-Geolocation-Correction-Requests"><a href="#Submitting-Geolocation-Correction-Requests" title="Submitting Geolocation Correction Requests"></a>Submitting Geolocation Correction Requests</h2><p>In reality, the ‚Äúlocation‚Äù of an IP is inherently fuzzy. For instance, my <code>2a14:7c0:4d00::/40</code> block was originally allocated to Israel. But later, I bought parts of this range and announced them via BGP in Germany, the US, and Singapore (see previous article on <a href="https://blog.lyc8503.net/post/asn-4-anycast-network/">Anycast networks</a>). Meanwhile, I‚Äôm physically located in mainland China. As the owner of this IP block, I can also freely edit the <code>country</code> field in the WHOIS database ‚Äî and I set it to KP (North Korea).</p><p>Because of this ambiguity, it‚Äôs nearly impossible to precisely determine an IP‚Äôs location using any single technical method. As a result, almost all geolocation databases accept public/user-submitted correction requests.</p><h3 id="Preparation"><a href="#Preparation" title="Preparation"></a>Preparation</h3><p>Before submitting any requests, let‚Äôs do a little prep work.</p><p>IP databases collect IP ranges from global routing tables. Previously, we were announcing the entire <code>2a14:7c0:4d00::/40</code> block without subdividing it in RIPE NCC, which makes it harder for databases to process smaller segments. So let‚Äôs fix that.</p><p>Log in to the RIPE Database, go to <code>My Resources ‚Üí IPv6 ‚Üí Create assignment</code>, and fill out the form to create a new <code>inet6num</code> (which represents an IPv6 address block):</p><ul><li><code>inet6num</code>: Enter a subnet. The smallest allowed is <code>/48</code>, so I entered <code>2a14:7c0:4d00::/48</code>. If you only own a <code>/48</code>, you can‚Äôt subdivide further ‚Äî you can only edit the LIR-assigned block.</li><li><code>netname</code>: Pick a name you like</li><li><code>country</code>: Choose the country/region you want this IP block to appear in</li><li><code>admin-c</code> &amp; <code>tech-c</code>: Fill in two contact objects ‚Äî use the ones you created earlier</li><li><code>status</code>: Select <code>ASSIGNED</code> to indicate it‚Äôs assigned</li></ul><p><img src="https://blog.lyc8503.net/en/post/asn-5-worldwide-servers/inet6num.png" alt="Form for creating a new inet6num"/><span>Form for creating a new inet6num</span></p><p>After creation, you can see all your subnets under ‚ÄúMy Resources‚Äù:</p><p><img src="https://blog.lyc8503.net/en/post/asn-5-worldwide-servers/specific-inet6.png" alt="Viewing subnets under the LIR-assigned block"/><span>Viewing subnets under the LIR-assigned block</span></p><p>Next, update the BIRD configuration from our <a href="https://blog.lyc8503.net/post/asn-2-bgp-session/">previous article</a>, changing <code>2a14:7c0:4d00::/40</code> to <code>2a14:7c0:4d00::/48</code>, then restart BIRD.</p><p>After some time, use BGP Tools to verify that <code>2a14:7c0:4d00::/48</code> is now visible. The old <code>/40</code> page should return 404.</p><h3 id="Submitting-Correction-Requests"><a href="#Submitting-Correction-Requests" title="Submitting Correction Requests"></a>Submitting Correction Requests</h3><p>You can submit geolocation correction requests to common IP databases: <a target="_blank" rel="noopener" href="https://www.maxmind.com/en/geoip-location-correction">Maxmind</a>, <a target="_blank" rel="noopener" href="https://ipinfo.io/corrections">IPInfo</a>, <a target="_blank" rel="noopener" href="https://support.google.com/websearch/workflow/9308722?hl=en">Google</a></p><p>If asked for justification, write something like ‚ÄúDue to incorrect IP geolocation, I/my clients cannot access region-restricted websites‚Äù (in English). Avoid mentioning use for anonymous proxies ‚Äî that might violate their correction policies.</p><p>Each database has its own review process. Some involve manual checks, and changes usually take 3 days to 2 weeks to go live. Most offer online lookup tools (like <a target="_blank" rel="noopener" href="https://www.maxmind.com/en/geoip-web-services-demo">Maxmind‚Äôs Demo</a>) ‚Äî you can use them to check progress, or use IPLark for batch queries.</p><p>In my test, IPInfo accepted my request within a week. Maxmind didn‚Äôt respond after two weeks, so I followed up via their <a target="_blank" rel="noopener" href="https://www.maxmind.com/en/contact-corrections">contact form</a>, and they finally approved it. (Wait a bit first ‚Äî only reach out after multiple failed submissions.)</p><p>(p.s. Recently, Maxmind has been rejecting requests to set location to Antarctica (AQ) ‚Äî <del>probably too many people trying to go there</del>. That‚Äôs why this article uses North Korea as an example. If you really want an Antarctica IP, try the geofeed method at the end to bypass manual review.)</p><p>Below is for reference only ‚Äî feel free to <del>make up</del> craft your own justification:</p><blockquote><p>Q: Hello, I am the network operator and owner of AS214775. I found out that my IP address segment 2a14:7c0:4d00::/40 is incorrectly localized to Israel, causing me to be denied access to other websites. I have tried several times to submit data corrections using the data correction form, but no response. I have corrected the country of my IP segment in the RIPE NCC database, and some other databases such as ipinfo.io have been synchronized, but Maxmind keeps locating my IP segment to Israel. I would like to politely ask why MaxMind has not responded to my correction request?</p><p>A: Thank you for your email. This will be updated in Tuesday‚Äôs release of the database.</p></blockquote><h2 id="Using-WARP-to-Get-a-Region-Matched-IPv4"><a href="#Using-WARP-to-Get-a-Region-Matched-IPv4" title="Using WARP to Get a Region-Matched IPv4"></a>Using WARP to Get a Region-Matched IPv4</h2><p>Cloudflare uses Maxmind‚Äôs database, so as long as Maxmind reflects your desired location, WARP will follow suit. Note that Cloudflare may lag behind Maxmind by 1‚Äì2 weeks. If Maxmind shows the correct location but Cloudflare hasn‚Äôt updated, just wait a little longer.</p><p>WARP assigns IPv4 (and IPv6) addresses based on your connection IP‚Äôs geolocation. The IPv4 address not only allows access to IPv4-only sites, but its geolocation is maintained by Cloudflare ‚Äî highly accurate and consistent across databases, much more reliable than manually submitting corrections everywhere.</p><p>We‚Äôve already introduced WARP, so let‚Äôs jump straight into setup using <a target="_blank" rel="noopener" href="https://p3terx.com/archives/use-cloudflare-warp-to-add-extra-ipv4-or-ipv6-network-support-to-vps-servers-for-free.html">this guide</a>:</p><figure><table><tbody><tr><td><pre><span>1</span></pre></td><td><pre><span></span></pre></td></tr></tbody></table></figure><hr/><p>Now test your VPS‚Äôs IPv4 geolocation using Cloudflare‚Äôs <code>/cdn-cgi/trace</code> endpoint (available on any site behind CF). <code>ip=104.28.212.208</code> means we got that IP, <code>colo=DUS</code> means we‚Äôre connecting via the DUS (D√ºsseldorf Airport) data center (<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/International_Air_Transport_Association_airport_code">IATA code</a>), <code>loc=IL</code> means geolocation is IL (Israel) (<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2">country code</a>), and <code>warp=on</code> confirms WARP is active:</p><p><del>We did successfully change our location, but <code>loc=IL</code> means Cloudflare hasn‚Äôt picked up Maxmind‚Äôs update yet ‚Äî let‚Äôs wait a bit longer</del></p><figure><table><tbody><tr><td><pre><span>1</span></pre></td><td><pre><span>root@s39230 ~ </span></pre></td></tr></tbody></table></figure><p>After nearly ten real-world days, Cloudflare WARP finally updated its database! Even slower than Cloudflare‚Äôs other services‚Ä¶ At this point, it had been about two weeks since Maxmind updated, and a full month since my first correction request ‚Äî almost missed the deadline before my server expired (thankfully, it didn‚Äôt).</p><p>Retest, and now we see the new IP <code>104.28.197.243</code> returns <code>loc=KP</code>, and Bilibili‚Äôs API shows North Korea:</p><figure><table><tbody><tr><td><pre><span>1</span></pre></td><td><pre><span>root@s39230 ~ </span></pre></td></tr></tbody></table></figure><p>Let‚Äôs check our own IPv6 and WARP-assigned IPv4 using IPLark:</p><p><img src="https://blog.lyc8503.net/en/post/asn-5-worldwide-servers/iplark_self.png" alt="Our IPv6 is only recognized as North Korea by Maxmind ‚Äî others think it‚Äôs Antarctica or Germany ‚Äî all over the place (but 80% of sites rely on Maxmind anyway)"/><span>Our IPv6 is only recognized as North Korea by Maxmind ‚Äî others think it‚Äôs Antarctica or Germany ‚Äî all over the place (but 80% of sites rely on Maxmind anyway)</span></p><p><img src="https://blog.lyc8503.net/en/post/asn-5-worldwide-servers/iplark_warp.png" alt="WARP-assigned IPv4 is consistently shown as North Korea"/><span>WARP-assigned IPv4 is consistently shown as North Korea</span></p><p><del>Now just set up a proxy on this VPS, and you can proudly flaunt your North Korean IP across the web.</del> (If you‚Äôve read this far, I assume you know how to set up a proxy.)</p><p><img src="https://blog.lyc8503.net/en/post/asn-5-worldwide-servers/bili.png" alt="Final proof: a real Bilibili comment screenshot ü§£"/><span>Final proof: a real Bilibili comment screenshot ü§£</span></p><h2 id="Optional-Geofeed-and-Preventing-Reversion"><a href="#Optional-Geofeed-and-Preventing-Reversion" title="Optional: Geofeed and Preventing Reversion"></a>Optional: Geofeed and Preventing Reversion</h2><p>Lastly, the promised ‚ÄúLight Up the Globe‚Äù trick. For large providers with IPs all over the world, manually submitting corrections isn‚Äôt practical.</p><p>That‚Äôs where <strong>Geofeed</strong> comes in ‚Äî a standard allowing bulk geolocation submissions: <a target="_blank" rel="noopener" href="https://docs.ipdata.co/docs/publishing-a-geofeed">https://docs.ipdata.co/docs/publishing-a-geofeed</a>. Besides submitting your Geofeed via support ticket to Maxmind, you can also embed the Geofeed URL in the <code>inet6num</code> object in WHOIS, allowing databases to automatically crawl and update your IP locations. With this, you can get IPs from all sorts of bizarre countries, <del>show off on probe dashboards</del> and achieve ‚ÄúLight Up the Globe‚Äù status.</p><p>IP geolocation isn‚Äôt set-and-forget ‚Äî databases may re-scan and revert your location. To reduce this risk, block ICMP (ping) and common ports via firewall to avoid scanning. Also, avoid using your server‚Äôs native IPv6 to browse the web ‚Äî stick to WARP-assigned IPv4. Some providers (cough Google cough) may even use client-side (mobile) location to correct server IP geolocation. See <a target="_blank" rel="noopener" href="https://hostloc.com/thread-1247865-1-1.html">this article</a> for details.</p><h2 id="Conclusion"><a href="#Conclusion" title="Conclusion"></a>Conclusion</h2><p>Finally‚Ä¶ This series began planning in June 2024, went through countless hurdles and waiting periods, and now wraps up just before December. If I waited any longer, my ASN and server would‚Äôve expired (quietly).</p><p>We‚Äôve explored setting up and maintaining an autonomous system on the Internet, configured BGP, peers, Anycast, and now IP geolocation spoofing ‚Äî satisfying some bizarre curiosities, <del>and gaining a new appreciation for ISPs and one-man IDCs (or not)</del>.</p><p>I might try DN42 next, or maybe not. For now, this series ends here. See you in the next blog post~ o/</p></div></div>
  </body>
</html>
