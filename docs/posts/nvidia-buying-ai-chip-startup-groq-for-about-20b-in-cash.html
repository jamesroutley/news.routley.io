<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.cnbc.com/2025/12/24/nvidia-buying-ai-chip-startup-groq-for-about-20-billion-biggest-deal.html">Original</a>
    <h1>Nvidia buying AI chip startup Groq for about $20B in cash</h1>
    
    <div id="readability-page-1" class="page"><p>DISCLOSURE: If you buy through affiliate links, I may earn a small commission. <a href="https://www.cnbc.com/blog/disclosures">(disclosures)</a></p><div><p>TS has pretty good types and can do exhaustive pattern matching. Here&#39;s an example of doing so with classes and instanceof - smth I didn&#39;t think was possible (and neither did my AI).</p>
<p>See the full code and run it - <a href="https://www.typescriptlang.org/play/?ssl=63&amp;ssc=2&amp;pln=32&amp;pc=1#code/MYGwhgzhAEAiD2BzaBvAUNaEAOBTMA1gBQCUqGm0w8AdhPCLgHQhJEBEARmAE4HskA3BQC+aMWlCQYAYTAAXcphz5iZdJSq16jFm3YBZXAHd4A4ZjESpUaAGUahXEqx5CpF5mp0GzVog4ACQBLKHNRcTQ0ADMAVxpgeWDaaABbBWAAC2CaAJzsWPkALjgkaAAfaDlFSocnEhKAN3hggBMXYOiifMLoHIh5MATceGjSxHUKTB75JhV3EinoHlx5WJ4aC2gRaFwQCGdO7poCxX7B4dGqhUnNGbm3NSWVtY2tiS9tRVwAD0ywWIDYKNXAlGi4EE8aAAXj6J0KW28Oj8bAABnZMvBYiB2jR4IpEKtoJlcCsAITQADi+OgABIUAApOwAeQAcnN5DwcohOgBPIi-f6ApIgkgiVFCSJoeS8vDQVn4gCCMnAUAAjDCXAQcq0SuwFfJlaqIGr2AAaaAUMAlAZc3LCCQyuUGo3SABMmo00G1NF10H1SpV7vNlsw1qwnO5DqicQSSRS6XkWW5AHVgvJMgqg1BjqcSghkJVqhV7I4CM5Ki7syaS1XjW6GtBmm0OmNc71zkNgCMxgXbpR7vM1FtMC91ptRLt9oc2zM4QMuz3rvJ+9N4bMh6QR8tVuP3lODn1Z+v5xdu1c6uXV3DTg9VFvnru3pO9ofOtB27Mfe1ob--XXpFNa8kV8PQAlRAD1RKel7jAcVJU0Mdn0sCgAHpUO2A8Zw-e5vxhP8A0Nas3QEFx0MoEDdH8IgIMDetoJQWD4K2cjRyfCdMHIj4tDob4-gBIEQTBCFSU1GZEW0UDqPRTFsVxGlCUUElySpGl6SZNkOTtHlon5QUBJFXAxQlB0gA">TS Playground</a>.</p>
<h2 id="whats-exhaustive-pattern-matching">What&#39;s exhaustive pattern matching?</h2>
<p>Exhaustive pattern matching is when the type system can tell if there are unhandled cases. This is useful to catch bugs at compile time instead of runtime.</p>
<p>In TypeScript, we can do exhaustive pattern matching in a few ways but a common one is to use the <code>never</code> type to declare a variable as a type that should never be hit. This way the type system will raise errors if that type could be hit during runtime (at least according to the types).</p>
<h2 id="narrowing-classes-with-instanceof">Narrowing Classes with instanceof</h2>
<p>We can narrow on possible classes by using <code>instanceof</code>.</p>
<pre><code>class Dog {
  speak() {
    console.log(&#34;bark&#34;);
  }
}

class Cat {
  speak() {
    console.log(&#34;Mewo&#34;);
  }
}

class Snake {
  speak() {
    console.log(&#34;Hiss&#34;);
  }
}

function matching(input: Dog | Cat | Snake): void {
  if(input instanceof Dog) {
    input.speak()
    return;
  } else if(input instanceof Cat) {
    input.speak()
    return;
  }

  const exhaustive: never = input;
  console.log(`Should not get here! Got ${JSON.stringify(exhaustive)}`);
}
</code></pre>
<h2 id="narrowing-classes-and-types">Narrowing classes and types</h2>
<p>We can combine these with lean type discriminators as well. Note that I had to narrow out the classes in order to reach the discriminators as before that the type system doesn&#39;t know if <code>kind</code> should exist on the input or not.</p>
<pre><code>type NotAClass1 = {
  kind: &#34;NotAClass1&#34;, 
  a: string;
}

type NotAClass2 = {
  kind: &#34;NotAClass2&#34;, 
  a: string;
}

function matchingWithNoClass(input: Dog | Cat | Snake | NotAClass1 | NotAClass2): void {
  if (input instanceof Dog) {
    input.speak();
    return;
  } else if (input instanceof Cat) {
    input.speak();
    return;
  } else if (input instanceof Snake) {
    input.speak();
    return;
  } else if (input.kind === &#34;NotAClass1&#34;) {
    console.log(`NotAClass1: ${input.a}`);
    return;
  }
  // } else if (input.kind === &#34;NotAClass2&#34;) {
  //   console.log(`NotAClass2: ${input.a}`);
  //   return;
  // }

  const exhaustive: never = input;
  console.log(`Should not get here! Got ${JSON.stringify(exhaustive)}`);
}
</code></pre>
<h2 id="next">Next</h2>
<p>So now you know - you can discriminate classes ergonomically in TS.</p>
<p>If you liked this post, you might also like:</p>
<ul>
<li><a href="https://hamy.xyz/blog/2025-07_typescript-result-types">TypeScript Result Types - and Why You Should Use Them</a></li>
<li><a href="https://hamy.xyz/blog/2025-05_typescript-branded-types">What are Branded Types? (And When You Should Use Them) in TypeScript</a></li>
<li><a href="https://hamy.xyz/blog/2025-05_typescript-errors-vs-exceptions-benchmarks">TypeScript - Errors as Values vs Exceptions Performance Benchmarks</a></li>
</ul>
</div></div>
  </body>
</html>
