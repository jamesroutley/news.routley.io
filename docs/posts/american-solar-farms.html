<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://tech.marksblogg.com/american-solar-farms.html">Original</a>
    <h1>American solar farms</h1>
    
    <div id="readability-page-1" class="page"><div id="article_text">
            <p>Last week, Jake Stid, a postdoctoral research associate at Michigan State University, <a href="https://www.linkedin.com/posts/jake-stid-38bb23131_solars-footprint-is-central-to-discussions-activity-7378531783019167744-CIlL/">announced</a> Ground-Mounted Solar Energy in the United States (GM-SEUS). This is a 15K-array, 2.9M-panel dataset of utility and commercial-grade solar farms across the lower 48 states plus the District of Columbia. This dataset was constructed by a team of researchers including alumni from NOAA, NASA and the USGS.</p>
<p>Below is a heatmap of the assets catalogued in this dataset.</p>
<p><a href="https://debamitro.github.io/blog/how-i-built-my-own-tool-for-disk-space-cleanup/theme/images/gmseus/45vpffTdeU.jpg">
<img alt="US Solar Farms" src="https://debamitro.github.io/blog/how-i-built-my-own-tool-for-disk-space-cleanup/theme/images/gmseus/45vpffTdeU.jpg"/>
</a></p><p>GM-SEUS is broken up into two datasets, one for arrays and another panels. Below you can see a solar farm with the array outlined in red and the panels covered purple.</p>
<p><a href="https://debamitro.github.io/blog/how-i-built-my-own-tool-for-disk-space-cleanup/theme/images/gmseus/qgis-bin_WjbnWSLWy8.jpg">
<img alt="US Solar Farms" src="https://debamitro.github.io/blog/how-i-built-my-own-tool-for-disk-space-cleanup/theme/images/gmseus/qgis-bin_WjbnWSLWy8.jpg"/>
</a></p><p>In this post, I&#39;ll explore GM-SEUS&#39;s Solar Farm dataset.</p>
<div id="my-workstation">
<h2>My Workstation</h2>
<p>I&#39;m using a 5.7 GHz AMD Ryzen 9 9950X CPU. It has 16 cores and 32 threads and 1.2 MB of L1, 16 MB of L2 and 64 MB of L3 cache. It has a liquid cooler attached and is housed in a spacious, full-sized Cooler Master HAF 700 computer case.</p>
<p>The system has 96 GB of DDR5 RAM clocked at 4,800 MT/s and a 5th-generation, Crucial T700 4 TB NVMe M.2 SSD which can read at speeds up to 12,400 MB/s. There is a heatsink on the SSD to help keep its temperature down. This is my system&#39;s C drive.</p>
<p>The system is powered by a 1,200-watt, fully modular Corsair Power Supply and is sat on an ASRock X870E Nova 90 Motherboard.</p>
<p>I&#39;m running Ubuntu 24 LTS via Microsoft&#39;s Ubuntu for Windows on Windows 11 Pro. In case you&#39;re wondering why I don&#39;t run a Linux-based desktop as my primary work environment, I&#39;m still using an Nvidia GTX 1080 GPU which has better driver support on Windows and ArcGIS Pro only supports Windows natively.</p>
</div>
<div id="installing-prerequisites">
<h2>Installing Prerequisites</h2>
<p>I&#39;ll use GDAL 3.9.3 and a few other tools to help analyse the data in this post.</p>
<div><pre><span></span>$<span> </span>sudo<span> </span>add-apt-repository<span> </span>ppa:ubuntugis/ubuntugis-unstable
$<span> </span>sudo<span> </span>apt<span> </span>update
$<span> </span>sudo<span> </span>apt<span> </span>install<span> </span><span>\</span>
<span>    </span>gdal-bin<span> </span><span>\</span>
<span>    </span>jq
</pre></div>
<p>I&#39;ll use DuckDB v1.4.1, along with its <a href="https://github.com/isaacbrodsky/h3-duckdb">H3</a>, <a href="https://duckdb.org/docs/extensions/json">JSON</a>, <a href="https://community-extensions.duckdb.org/extensions/lindel.html">Lindel</a>, <a href="https://duckdb.org/docs/data/parquet/overview">Parquet</a> and <a href="https://duckdb.org/docs/extensions/spatial.html">Spatial</a> extensions, in this post.</p>
<div><pre><span></span>$<span> </span><span>cd</span><span> </span>~
$<span> </span>wget<span> </span>-c<span> </span>https://github.com/duckdb/duckdb/releases/download/v1.4.1/duckdb_cli-linux-amd64.zip
$<span> </span>unzip<span> </span>-j<span> </span>duckdb_cli-linux-amd64.zip
$<span> </span>chmod<span> </span>+x<span> </span>duckdb
$<span> </span>~/duckdb
</pre></div>
<div><pre><span></span><span>INSTALL</span><span> </span><span>h3</span><span> </span><span>FROM</span><span> </span><span>community</span><span>;</span>
<span>INSTALL</span><span> </span><span>lindel</span><span> </span><span>FROM</span><span> </span><span>community</span><span>;</span>
<span>INSTALL</span><span> </span><span>json</span><span>;</span>
<span>INSTALL</span><span> </span><span>parquet</span><span>;</span>
<span>INSTALL</span><span> </span><span>spatial</span><span>;</span>
</pre></div>
<p>I&#39;ll set up DuckDB to load every installed extension each time it launches.</p>

<div><pre><span></span>.timer on
.width 180
LOAD h3;
LOAD lindel;
LOAD json;
LOAD parquet;
LOAD spatial;
</pre></div>
<p>The maps in this post were mostly rendered with <a href="https://www.qgis.org/en/site/forusers/download.html">QGIS</a> version 3.44. QGIS is a desktop application that runs on Windows, macOS and Linux. The application has grown in popularity in recent years and has ~15M application launches from users all around the world each month.</p>
<p>I used QGIS&#39; <a href="https://github.com/marklit/tile_plus">Tile+ plugin</a> to add basemaps from Esri to the maps in this post.</p>
</div>
<div id="analysis-ready-data">
<h2>Analysis-Ready Data</h2>
<p>I&#39;ll download a dataset containing the US CENSUS State codes. This will let me map the state ID in the arrays dataset to their state name.</p>
<div><pre><span></span>$<span> </span>wget<span> </span>https://gist.github.com/a8dx/2340f9527af64f8ef8439366de981168/raw/81d876daea10eab5c2675811c39bcd18a79a9212/US_State_Bounding_Boxes.csv
</pre></div>
<p>I&#39;ll download the ZIP file of deliverables for GM-SEUS.</p>
<div><pre><span></span>$<span> </span>wget<span> </span>-O<span> </span>GMSEUS_v1_0.zip<span> </span><span>\</span>
<span>    </span><span>&#39;https://zenodo.org/records/14827819/files/GMSEUS_v1_0.zip?download=1&#39;</span>
$<span> </span>unzip<span> </span>GMSEUS_v1_0.zip
</pre></div>
<p>I&#39;ll extract the projection used. This proj4 string will be used to below to re-project the data into EPSG:4326.</p>
<div><pre><span></span>$<span> </span>gdalsrsinfo<span> </span><span>\</span>
<span>    </span>-o<span> </span>proj4<span> </span><span>\</span>
<span>    </span>GMSEUS_v1_0/GPKG/GMSEUS_Arrays_Final.gpkg
</pre></div>
<div><pre><span></span>+proj=aea +lat_0=37.5 +lon_0=-96 +lat_1=29.5 +lat_2=45.5 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs
</pre></div>
<p>I&#39;ll use DuckDB to clean up the values and produce both a geometry field and a bounding box for each feature in this dataset. This will make working with this dataset remotely, such as from AWS S3, much easier.</p>

<p>This following produced a ZStandard-compressed, spatially-sorted Parquet file of the arrays dataset. I dropped the Z dimension as it was unused. The unknown values have been turned into NULLs. The original GPKG file was 108 MB and the resulting Parquet file is 37 MB.</p>
<div><pre><span></span><span>COPY</span><span> </span><span>(</span>
<span>   </span><span>WITH</span><span> </span><span>a</span><span> </span><span>AS</span><span> </span><span>(</span>
<span>       </span><span>SELECT</span><span> </span><span>*</span><span> </span><span>EXCLUDE</span><span>(</span><span>geom</span><span>),</span>
<span>              </span><span>ST_FORCE2D</span><span>(</span>
<span>                </span><span>ST_FLIPCOORDINATES</span><span>(</span>
<span>                  </span><span>ST_TRANSFORM</span><span>(</span>
<span>                      </span><span>geom</span><span>,</span>
<span>                      </span><span>&#39;+proj=aea +lat_0=37.5 +lon_0=-96 +lat_1=29.5 +lat_2=45.5 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs&#39;</span><span>,</span>
<span>                      </span><span>&#39;EPSG:4326&#39;</span><span>)))</span><span> </span><span>geometry</span>
<span>       </span><span>FROM</span><span>   </span><span>ST_READ</span><span>(</span><span>&#39;GMSEUS_v1_0/GPKG/GMSEUS_Arrays_Final.gpkg&#39;</span><span>)</span>
<span>   </span><span>)</span>
<span>   </span><span>SELECT</span><span>   </span><span>a</span><span>.</span><span>*</span><span> </span><span>EXCLUDE</span><span> </span><span>(</span><span>geometry</span><span>,</span>
<span>                         </span><span>tilt</span><span>,</span>
<span>                         </span><span>tiltEst</span><span>,</span>
<span>                         </span><span>instYr</span><span>,</span>
<span>                         </span><span>instYrLT</span><span>,</span>
<span>                         </span><span>effInit</span><span>,</span>
<span>                         </span><span>avgAzimuth</span><span>,</span>
<span>                         </span><span>avgLength</span><span>,</span>
<span>                         </span><span>avgSpace</span><span>,</span>
<span>                         </span><span>avgWidth</span><span>),</span>
<span>            </span><span>{</span><span>&#39;xmin&#39;</span><span>:</span><span> </span><span>ST_XMIN</span><span>(</span><span>ST_EXTENT</span><span>(</span><span>geometry</span><span>)),</span>
<span>             </span><span>&#39;ymin&#39;</span><span>:</span><span> </span><span>ST_YMIN</span><span>(</span><span>ST_EXTENT</span><span>(</span><span>geometry</span><span>)),</span>
<span>             </span><span>&#39;xmax&#39;</span><span>:</span><span> </span><span>ST_XMAX</span><span>(</span><span>ST_EXTENT</span><span>(</span><span>geometry</span><span>)),</span>
<span>             </span><span>&#39;ymax&#39;</span><span>:</span><span> </span><span>ST_YMAX</span><span>(</span><span>ST_EXTENT</span><span>(</span><span>geometry</span><span>))</span><span>}</span><span> </span><span>AS</span><span> </span><span>bbox</span><span>,</span>
<span>             </span><span>ST_ASWKB</span><span>(</span><span>geometry</span><span>)</span><span> </span><span>geometry</span><span>,</span>
<span>             </span><span>CASE</span><span> </span><span>WHEN</span><span> </span><span>instYr</span><span>::</span><span>INT</span><span>     </span><span>=</span><span> </span><span>-</span><span>9999</span><span> </span><span>THEN</span><span> </span><span>NULL</span><span> </span><span>ELSE</span><span> </span><span>instYr</span><span>::</span><span>INT</span><span>   </span><span>END</span><span> </span><span>AS</span><span> </span><span>instYr</span><span>,</span>
<span>             </span><span>CASE</span><span> </span><span>WHEN</span><span> </span><span>instYrLT</span><span>::</span><span>INT</span><span>   </span><span>=</span><span> </span><span>-</span><span>9999</span><span> </span><span>THEN</span><span> </span><span>NULL</span><span> </span><span>ELSE</span><span> </span><span>instYrLT</span><span>::</span><span>INT</span><span> </span><span>END</span><span> </span><span>AS</span><span> </span><span>instYrLT</span><span>,</span>
<span>             </span><span>CASE</span><span> </span><span>WHEN</span><span> </span><span>numRow</span><span>::</span><span>INT</span><span>     </span><span>=</span><span> </span><span>-</span><span>9999</span><span> </span><span>THEN</span><span> </span><span>NULL</span><span> </span><span>ELSE</span><span> </span><span>numRow</span><span>::</span><span>INT</span><span>   </span><span>END</span><span> </span><span>AS</span><span> </span><span>numRow</span><span>,</span>
<span>             </span><span>CASE</span><span> </span><span>WHEN</span><span> </span><span>tilt</span><span>::</span><span>INT</span><span>       </span><span>=</span><span> </span><span>-</span><span>9999</span><span> </span><span>THEN</span><span> </span><span>NULL</span><span> </span><span>ELSE</span><span> </span><span>tilt</span><span>::</span><span>INT</span><span>     </span><span>END</span><span> </span><span>AS</span><span> </span><span>tilt</span><span>,</span>
<span>             </span><span>CASE</span><span> </span><span>WHEN</span><span> </span><span>tiltEst</span><span>::</span><span>INT</span><span>    </span><span>=</span><span> </span><span>-</span><span>9999</span><span> </span><span>THEN</span><span> </span><span>NULL</span><span> </span><span>ELSE</span><span> </span><span>tiltEst</span><span>::</span><span>INT</span><span>  </span><span>END</span><span> </span><span>AS</span><span> </span><span>tiltEst</span><span>,</span>
<span>             </span><span>CASE</span><span> </span><span>WHEN</span><span> </span><span>effInit</span><span>::</span><span>INT</span><span>    </span><span>=</span><span> </span><span>-</span><span>9999</span><span> </span><span>THEN</span><span> </span><span>NULL</span><span> </span><span>ELSE</span><span> </span><span>effInit</span><span>       </span><span>END</span><span> </span><span>AS</span><span> </span><span>effInit</span><span>,</span>
<span>             </span><span>CASE</span><span> </span><span>WHEN</span><span> </span><span>avgAzimuth</span><span>::</span><span>INT</span><span> </span><span>=</span><span> </span><span>-</span><span>9999</span><span> </span><span>THEN</span><span> </span><span>NULL</span><span> </span><span>ELSE</span><span> </span><span>avgAzimuth</span><span>    </span><span>END</span><span> </span><span>AS</span><span> </span><span>avgAzimuth</span><span>,</span>
<span>             </span><span>CASE</span><span> </span><span>WHEN</span><span> </span><span>avgLength</span><span>::</span><span>INT</span><span>  </span><span>=</span><span> </span><span>-</span><span>9999</span><span> </span><span>THEN</span><span> </span><span>NULL</span><span> </span><span>ELSE</span><span> </span><span>avgLength</span><span>     </span><span>END</span><span> </span><span>AS</span><span> </span><span>avgLength</span><span>,</span>
<span>             </span><span>CASE</span><span> </span><span>WHEN</span><span> </span><span>avgSpace</span><span>::</span><span>INT</span><span>   </span><span>=</span><span> </span><span>-</span><span>9999</span><span> </span><span>THEN</span><span> </span><span>NULL</span><span> </span><span>ELSE</span><span> </span><span>avgSpace</span><span>      </span><span>END</span><span> </span><span>AS</span><span> </span><span>avgSpace</span><span>,</span>
<span>             </span><span>CASE</span><span> </span><span>WHEN</span><span> </span><span>avgWidth</span><span>::</span><span>INT</span><span>   </span><span>=</span><span> </span><span>-</span><span>9999</span><span> </span><span>THEN</span><span> </span><span>NULL</span><span> </span><span>ELSE</span><span> </span><span>avgWidth</span><span>      </span><span>END</span><span> </span><span>AS</span><span> </span><span>avgWidth</span><span>,</span>
<span>             </span><span>b</span><span>.</span><span>NAME</span><span> </span><span>state_name</span>
<span>   </span><span>FROM</span><span>     </span><span>a</span>
<span>   </span><span>JOIN</span><span>     </span><span>&#39;US_State_Bounding_Boxes.csv&#39;</span><span> </span><span>b</span><span> </span><span>ON</span><span> </span><span>a</span><span>.</span><span>STATEFP</span><span> </span><span>=</span><span> </span><span>b</span><span>.</span><span>STATEFP</span>
<span>   </span><span>ORDER</span><span> </span><span>BY</span><span> </span><span>HILBERT_ENCODE</span><span>([</span><span>ST_Y</span><span>(</span><span>ST_CENTROID</span><span>(</span><span>geometry</span><span>)),</span>
<span>                            </span><span>ST_X</span><span>(</span><span>ST_CENTROID</span><span>(</span><span>geometry</span><span>))]::</span><span>double</span><span>[</span><span>2</span><span>])</span>
<span>)</span><span> </span><span>TO</span><span> </span><span>&#39;arrays.parquet&#39;</span><span> </span><span>(</span>
<span>   </span><span>FORMAT</span><span>            </span><span>&#39;PARQUET&#39;</span><span>,</span>
<span>   </span><span>CODEC</span><span>             </span><span>&#39;ZSTD&#39;</span><span>,</span>
<span>   </span><span>COMPRESSION_LEVEL</span><span> </span><span>22</span><span>,</span>
<span>   </span><span>ROW_GROUP_SIZE</span><span>    </span><span>15000</span><span>);</span>
</pre></div>
<p>The original GPKG file for the panels dataset was 1.1 GB and the resulting Parquet file is 334 MB.</p>
<div><pre><span></span><span>COPY</span><span> </span><span>(</span>
<span>   </span><span>WITH</span><span> </span><span>a</span><span> </span><span>AS</span><span> </span><span>(</span>
<span>       </span><span>SELECT</span><span> </span><span>*</span><span> </span><span>EXCLUDE</span><span>(</span><span>geom</span><span>),</span>
<span>              </span><span>ST_FORCE2D</span><span>(</span>
<span>                </span><span>ST_FLIPCOORDINATES</span><span>(</span>
<span>                  </span><span>ST_TRANSFORM</span><span>(</span>
<span>                      </span><span>geom</span><span>,</span>
<span>                      </span><span>&#39;+proj=aea +lat_0=37.5 +lon_0=-96 +lat_1=29.5 +lat_2=45.5 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs&#39;</span><span>,</span>
<span>                      </span><span>&#39;EPSG:4326&#39;</span><span>)))</span><span> </span><span>geometry</span>
<span>       </span><span>FROM</span><span>   </span><span>ST_READ</span><span>(</span><span>&#39;GMSEUS_v1_0/GPKG/GMSEUS_Panels_Final.gpkg&#39;</span><span>)</span>
<span>   </span><span>)</span>
<span>   </span><span>SELECT</span><span>   </span><span>*</span><span> </span><span>EXCLUDE</span><span> </span><span>(</span><span>geometry</span><span>,</span>
<span>                       </span><span>rowSpace</span><span>),</span>
<span>            </span><span>{</span><span>&#39;xmin&#39;</span><span>:</span><span> </span><span>ST_XMIN</span><span>(</span><span>ST_EXTENT</span><span>(</span><span>geometry</span><span>)),</span>
<span>             </span><span>&#39;ymin&#39;</span><span>:</span><span> </span><span>ST_YMIN</span><span>(</span><span>ST_EXTENT</span><span>(</span><span>geometry</span><span>)),</span>
<span>             </span><span>&#39;xmax&#39;</span><span>:</span><span> </span><span>ST_XMAX</span><span>(</span><span>ST_EXTENT</span><span>(</span><span>geometry</span><span>)),</span>
<span>             </span><span>&#39;ymax&#39;</span><span>:</span><span> </span><span>ST_YMAX</span><span>(</span><span>ST_EXTENT</span><span>(</span><span>geometry</span><span>))</span><span>}</span><span> </span><span>AS</span><span> </span><span>bbox</span><span>,</span>
<span>             </span><span>ST_ASWKB</span><span>(</span><span>geometry</span><span>)</span><span> </span><span>geometry</span><span>,</span>
<span>             </span><span>CASE</span><span> </span><span>WHEN</span><span> </span><span>rowSpace</span><span>::</span><span>INT</span><span> </span><span>=</span><span> </span><span>-</span><span>9999</span><span> </span><span>THEN</span><span> </span><span>NULL</span><span> </span><span>ELSE</span><span> </span><span>rowSpace</span><span> </span><span>END</span><span> </span><span>AS</span><span> </span><span>rowSpace</span>
<span>   </span><span>FROM</span><span>     </span><span>a</span>
<span>   </span><span>ORDER</span><span> </span><span>BY</span><span> </span><span>HILBERT_ENCODE</span><span>([</span><span>ST_Y</span><span>(</span><span>ST_CENTROID</span><span>(</span><span>geometry</span><span>)),</span>
<span>                            </span><span>ST_X</span><span>(</span><span>ST_CENTROID</span><span>(</span><span>geometry</span><span>))]::</span><span>double</span><span>[</span><span>2</span><span>])</span>
<span>)</span><span> </span><span>TO</span><span> </span><span>&#39;panels.parquet&#39;</span><span> </span><span>(</span>
<span>   </span><span>FORMAT</span><span>            </span><span>&#39;PARQUET&#39;</span><span>,</span>
<span>   </span><span>CODEC</span><span>             </span><span>&#39;ZSTD&#39;</span><span>,</span>
<span>   </span><span>COMPRESSION_LEVEL</span><span> </span><span>22</span><span>,</span>
<span>   </span><span>ROW_GROUP_SIZE</span><span>    </span><span>15000</span><span>);</span>
</pre></div>
</div>
<div id="solar-arrays">
<h2>Solar Arrays</h2>
<p>The arrays Parquet file has 15,017 rows. Below is an example record.</p>
<div><pre><span></span>$<span> </span><span>echo</span><span> </span><span>&#34;SELECT * EXCLUDE(bbox,</span>
<span>                         geometry),</span>
<span>               bbox::JSON bbox</span>
<span>        FROM   &#39;arrays.parquet&#39;</span>
<span>        LIMIT  1&#34;</span><span> </span><span>\</span>
<span>    </span><span>|</span><span> </span>~/duckdb<span> </span>-json<span> </span><span>\</span>
<span>    </span><span>|</span><span> </span>jq<span> </span>-S<span> </span>.
</pre></div>
<div><pre><span></span><span>[</span>
<span>  </span><span>{</span>
<span>    </span><span>&#34;COUNTYFP&#34;</span><span>:</span><span> </span><span>&#34;019&#34;</span><span>,</span>
<span>    </span><span>&#34;GCR1&#34;</span><span>:</span><span> </span><span>0.6996</span><span>,</span>
<span>    </span><span>&#34;GCR2&#34;</span><span>:</span><span> </span><span>0.614</span><span>,</span>
<span>    </span><span>&#34;STATEFP&#34;</span><span>:</span><span> </span><span>&#34;45&#34;</span><span>,</span>
<span>    </span><span>&#34;Source&#34;</span><span>:</span><span> </span><span>&#34;OSM&#34;</span><span>,</span>
<span>    </span><span>&#34;arrayID&#34;</span><span>:</span><span> </span><span>2807</span><span>,</span>
<span>    </span><span>&#34;avgAzimuth&#34;</span><span>:</span><span> </span><span>170.63</span><span>,</span>
<span>    </span><span>&#34;avgLength&#34;</span><span>:</span><span> </span><span>47.76166666666666</span><span>,</span>
<span>    </span><span>&#34;avgSpace&#34;</span><span>:</span><span> </span><span>3.003333333333333</span><span>,</span>
<span>    </span><span>&#34;avgWidth&#34;</span><span>:</span><span> </span><span>4.776666666666666</span><span>,</span>
<span>    </span><span>&#34;bbox&#34;</span><span>:</span><span> </span><span>{</span>
<span>      </span><span>&#34;xmax&#34;</span><span>:</span><span> </span><span>-79.97229830431786</span><span>,</span>
<span>      </span><span>&#34;xmin&#34;</span><span>:</span><span> </span><span>-79.97325770533094</span><span>,</span>
<span>      </span><span>&#34;ymax&#34;</span><span>:</span><span> </span><span>32.87833627192598</span><span>,</span>
<span>      </span><span>&#34;ymin&#34;</span><span>:</span><span> </span><span>32.87808294640646</span>
<span>    </span><span>},</span>
<span>    </span><span>&#34;capMW&#34;</span><span>:</span><span> </span><span>0.246</span><span>,</span>
<span>    </span><span>&#34;capMWest&#34;</span><span>:</span><span> </span><span>0.246</span><span>,</span>
<span>    </span><span>&#34;effInit&#34;</span><span>:</span><span> </span><span>0.197963503102977</span><span>,</span>
<span>    </span><span>&#34;instYr&#34;</span><span>:</span><span> </span><span>2021</span><span>,</span>
<span>    </span><span>&#34;instYrLT&#34;</span><span>:</span><span> </span><span>2021</span><span>,</span>
<span>    </span><span>&#34;latitude&#34;</span><span>:</span><span> </span><span>32.87818725544087</span><span>,</span>
<span>    </span><span>&#34;longitude&#34;</span><span>:</span><span> </span><span>-79.97276617375104</span><span>,</span>
<span>    </span><span>&#34;modType&#34;</span><span>:</span><span> </span><span>&#34;c-si&#34;</span><span>,</span>
<span>    </span><span>&#34;mount&#34;</span><span>:</span><span> </span><span>&#34;fixed_axis&#34;</span><span>,</span>
<span>    </span><span>&#34;nativeID&#34;</span><span>:</span><span> </span><span>&#34;9324&#34;</span><span>,</span>
<span>    </span><span>&#34;newBound&#34;</span><span>:</span><span> </span><span>1</span><span>,</span>
<span>    </span><span>&#34;numRow&#34;</span><span>:</span><span> </span><span>6.0</span><span>,</span>
<span>    </span><span>&#34;numRow_1&#34;</span><span>:</span><span> </span><span>6</span><span>,</span>
<span>    </span><span>&#34;state_name&#34;</span><span>:</span><span> </span><span>&#34;South Carolina&#34;</span><span>,</span>
<span>    </span><span>&#34;tilt&#34;</span><span>:</span><span> </span><span>30</span><span>,</span>
<span>    </span><span>&#34;tiltEst&#34;</span><span>:</span><span> </span><span>30</span><span>,</span>
<span>    </span><span>&#34;totArea&#34;</span><span>:</span><span> </span><span>1779.0</span><span>,</span>
<span>    </span><span>&#34;totRowArea&#34;</span><span>:</span><span> </span><span>1244.93</span><span>,</span>
<span>    </span><span>&#34;version&#34;</span><span>:</span><span> </span><span>&#34;v1.0&#34;</span>
<span>  </span><span>}</span>
<span>]</span>
</pre></div>
<p>Below are the field names, data types, percentages of NULLs per column, number of unique values and minimum and maximum values for each column.</p>

<div><pre><span></span><span>SELECT</span><span>   </span><span>column_name</span><span>,</span>
<span>         </span><span>column_type</span><span>,</span>
<span>         </span><span>null_percentage</span><span>,</span>
<span>         </span><span>approx_unique</span><span>,</span>
<span>         </span><span>min</span><span>,</span>
<span>         </span><span>max</span>
<span>FROM</span><span>     </span><span>(</span><span>SUMMARIZE</span>
<span>          </span><span>FROM</span><span> </span><span>READ_PARQUET</span><span>(</span><span>&#39;arrays.parquet&#39;</span><span>))</span>
<span>WHERE</span><span>    </span><span>column_name</span><span> </span><span>!=</span><span> </span><span>&#39;geometry&#39;</span>
<span>AND</span><span>      </span><span>column_name</span><span> </span><span>!=</span><span> </span><span>&#39;bbox&#39;</span>
<span>ORDER</span><span> </span><span>BY</span><span> </span><span>1</span><span>;</span>
</pre></div>
<div><pre><span></span>┌─────────────┬─────────────┬─────────────────┬───────────────┬─────────────────────┬────────────────────┐
│ column_name │ column_type │ null_percentage │ approx_unique │         min         │        max         │
│   varchar   │   varchar   │  decimal(9,2)   │     int64     │       varchar       │      varchar       │
├─────────────┼─────────────┼─────────────────┼───────────────┼─────────────────────┼────────────────────┤
│ COUNTYFP    │ VARCHAR     │            0.00 │           235 │ 001                 │ 810                │
│ GCR1        │ DOUBLE      │            0.00 │          5057 │ 0.1047              │ 1.0                │
│ GCR2        │ DOUBLE      │            0.00 │          5013 │ 0.1245              │ 0.988              │
│ STATEFP     │ VARCHAR     │            0.00 │            49 │ 01                  │ 56                 │
│ Source      │ VARCHAR     │            0.00 │             6 │ CCVPV               │ USPVDB             │
│ arrayID     │ BIGINT      │            0.00 │         13155 │ 1                   │ 15017              │
│ avgAzimuth  │ DOUBLE      │           32.84 │          4295 │ 25.0                │ 269.27             │
│ avgLength   │ DOUBLE      │           39.79 │          8358 │ 4.02                │ 449.5004           │
│ avgSpace    │ DOUBLE      │           39.79 │          8623 │ 0.024               │ 20.0               │
│ avgWidth    │ DOUBLE      │           39.79 │          9185 │ 0.67625             │ 29.80222222222222  │
│ capMW       │ DOUBLE      │            0.00 │          5280 │ 0.001250225184651   │ 1051.703           │
│ capMWest    │ DOUBLE      │            0.00 │          7863 │ 0.004               │ 3170.1             │
│ effInit     │ DOUBLE      │            0.49 │            39 │ 0.132210289727273   │ 0.205484167047619  │
│ instYr      │ INTEGER     │            0.00 │            24 │ 1985                │ 2024               │
│ instYrLT    │ INTEGER     │            0.24 │            17 │ 2009                │ 2023               │
│ latitude    │ DOUBLE      │            0.00 │         16986 │ 25.53796582594631   │ 48.99547137225406  │
│ longitude   │ DOUBLE      │            0.00 │         15656 │ -124.10440474967092 │ -67.15066374183608 │
│ modType     │ VARCHAR     │            0.00 │             3 │ c-si                │ thin-film          │
│ mount       │ VARCHAR     │            0.00 │            10 │ dual_axis           │ unknown            │
│ nativeID    │ VARCHAR     │            0.00 │         15141 │ 1                   │ York Solar         │
│ newBound    │ BIGINT      │            0.00 │             2 │ 0                   │ 1                  │
│ numRow      │ DOUBLE      │            0.00 │          1461 │ 0.0                 │ 56782.0            │
│ numRow_1    │ INTEGER     │            0.00 │          1117 │ 0                   │ 56782              │
│ state_name  │ VARCHAR     │            0.00 │            57 │ Alabama             │ Wyoming            │
│ tilt        │ INTEGER     │           55.46 │            47 │ 0                   │ 83                 │
│ tiltEst     │ INTEGER     │           55.46 │            30 │ 10                  │ 43                 │
│ totArea     │ DOUBLE      │            0.00 │         13182 │ 54.0                │ 13735113.0         │
│ totRowArea  │ DOUBLE      │            0.00 │         15396 │ 44.97               │ 7223924.662        │
│ version     │ VARCHAR     │            0.00 │             1 │ v1.0                │ v1.0               │
├─────────────┴─────────────┴─────────────────┴───────────────┴─────────────────────┴────────────────────┤
│ 29 rows                                                                                      6 columns │
└────────────────────────────────────────────────────────────────────────────────────────────────────────┘
</pre></div>
<p>I&#39;ll generate a heatmap of the asset locations in this dataset.</p>
<div><pre><span></span><span>CREATE</span><span> </span><span>OR</span><span> </span><span>REPLACE</span><span> </span><span>TABLE</span><span> </span><span>h3_4_stats</span><span> </span><span>AS</span>
<span>    </span><span>SELECT</span><span>   </span><span>H3_LATLNG_TO_CELL</span><span>(</span>
<span>                </span><span>bbox</span><span>.</span><span>ymin</span><span>,</span>
<span>                </span><span>bbox</span><span>.</span><span>xmin</span><span>,</span><span> </span><span>4</span><span>)</span><span> </span><span>AS</span><span> </span><span>h3_4</span><span>,</span>
<span>             </span><span>COUNT</span><span>(</span><span>*</span><span>)</span><span> </span><span>num_buildings</span>
<span>    </span><span>FROM</span><span>     </span><span>READ_PARQUET</span><span>(</span><span>&#39;arrays.parquet&#39;</span><span>)</span>
<span>    </span><span>WHERE</span><span>    </span><span>bbox</span><span>.</span><span>xmin</span><span> </span><span>BETWEEN</span><span> </span><span>-</span><span>178</span><span>.</span><span>5</span><span> </span><span>AND</span><span> </span><span>178</span><span>.</span><span>5</span>
<span>    </span><span>GROUP</span><span> </span><span>BY</span><span> </span><span>1</span><span>;</span>

<span>COPY</span><span> </span><span>(</span>
<span>    </span><span>SELECT</span><span> </span><span>ST_ASWKB</span><span>(</span><span>H3_CELL_TO_BOUNDARY_WKT</span><span>(</span><span>h3_4</span><span>)::</span><span>geometry</span><span>)</span><span> </span><span>geometry</span><span>,</span>
<span>           </span><span>num_buildings</span>
<span>    </span><span>FROM</span><span>   </span><span>h3_4_stats</span>
<span>)</span><span> </span><span>TO</span><span> </span><span>&#39;h3_4_stats.gpkg&#39;</span>
<span>  </span><span>WITH</span><span> </span><span>(</span><span>FORMAT</span><span> </span><span>GDAL</span><span>,</span>
<span>        </span><span>DRIVER</span><span> </span><span>&#39;GPKG&#39;</span><span>,</span>
<span>        </span><span>LAYER_CREATION_OPTIONS</span><span> </span><span>&#39;WRITE_BBOX=YES&#39;</span><span>);</span>
</pre></div>
<p><a href="https://debamitro.github.io/blog/how-i-built-my-own-tool-for-disk-space-cleanup/theme/images/gmseus/45vpffTdeU.jpg">
<img alt="US Solar Farms" src="https://debamitro.github.io/blog/how-i-built-my-own-tool-for-disk-space-cleanup/theme/images/gmseus/45vpffTdeU.jpg"/>
</a></p><p>Normally I would produce a Parquet file as even with 10s of thousands of records it&#39;ll generate in seconds versus a minute or so with GPKG. But ArcGIS Pro 3.5 didn&#39;t want to open the Parquet file I generated. QGIS 3.44 was fine with it but I wanted to use Esri&#39;s Nova basemap for the rendering below.</p>
<p>ArcGIS Pro 3.6 should be released sometime in the next few weeks so I&#39;ll re-examine this issue when it&#39;s out.</p>
<p>Below is the relationship between the sources of data and the installation year.</p>
<div><pre><span></span><span>PIVOT</span><span>    </span><span>&#39;arrays.parquet&#39;</span>
<span>ON</span><span>       </span><span>Source</span>
<span>USING</span><span>    </span><span>COUNT</span><span>(</span><span>*</span><span>)</span>
<span>GROUP</span><span> </span><span>BY</span><span> </span><span>instYr</span>
<span>ORDER</span><span> </span><span>BY</span><span> </span><span>instYr</span><span>;</span>
</pre></div>
<div><pre><span></span>┌────────┬───────┬───────┬───────────────┬───────┬───────┬────────┐
│ instYr │ CCVPV │ CWSD  │ GMSEUSgeorect │  OSM  │  SAM  │ USPVDB │
│ int32  │ int64 │ int64 │     int64     │ int64 │ int64 │ int64  │
├────────┼───────┼───────┼───────────────┼───────┼───────┼────────┤
│   1985 │     0 │     0 │             0 │     0 │     0 │      1 │
│   1986 │     0 │     0 │             0 │     1 │     0 │      0 │
│   2002 │     0 │     0 │             0 │     0 │     0 │      1 │
│   2005 │     0 │     0 │             0 │    26 │     0 │      0 │
│   2006 │     0 │     0 │             0 │     2 │     0 │      1 │
│   2007 │     0 │     0 │             0 │    44 │     0 │      5 │
│   2008 │     0 │     0 │             0 │    58 │     1 │     11 │
│   2009 │     5 │     0 │             0 │    10 │     5 │     19 │
│   2010 │    20 │     0 │             0 │    71 │    20 │     37 │
│   2011 │    24 │     0 │             2 │   193 │    30 │    102 │
│   2012 │    59 │     0 │             2 │   267 │    88 │    157 │
│   2013 │    83 │     0 │             3 │   259 │    82 │    209 │
│   2014 │   102 │     0 │             1 │   335 │   119 │    291 │
│   2015 │   107 │     3 │             0 │   532 │   125 │    320 │
│   2016 │   145 │     1 │             2 │   564 │   170 │    412 │
│   2017 │   135 │     0 │             1 │   661 │   167 │    476 │
│   2018 │    66 │    34 │             4 │   644 │   210 │    414 │
│   2019 │    28 │    39 │             6 │   467 │   178 │    453 │
│   2020 │    10 │    75 │             1 │   437 │   186 │    496 │
│   2021 │     5 │    33 │             6 │   406 │   241 │    446 │
│   2022 │     1 │   173 │             3 │   231 │   354 │    166 │
│   2023 │     0 │     0 │             3 │   176 │   722 │    134 │
│   2024 │     0 │     0 │             0 │    31 │  1571 │      0 │
├────────┴───────┴───────┴───────────────┴───────┴───────┴────────┤
│ 23 rows                                               7 columns │
└─────────────────────────────────────────────────────────────────┘
</pre></div>
<p>Below is the relationship between the mount and mod type.</p>
<div><pre><span></span><span>PIVOT</span><span>    </span><span>&#39;arrays.parquet&#39;</span>
<span>ON</span><span>       </span><span>modType</span>
<span>USING</span><span>    </span><span>COUNT</span><span>(</span><span>*</span><span>)</span>
<span>GROUP</span><span> </span><span>BY</span><span> </span><span>mount</span>
<span>ORDER</span><span> </span><span>BY</span><span> </span><span>mount</span><span>;</span>
</pre></div>
<div><pre><span></span>┌─────────────┬───────┬───────┬───────────┐
│    mount    │ c-si  │  csp  │ thin-film │
│   varchar   │ int64 │ int64 │   int64   │
├─────────────┼───────┼───────┼───────────┤
│ dual_axis   │   301 │    18 │         1 │
│ fixed_axis  │  6057 │    32 │       208 │
│ mixed       │     2 │     0 │         0 │
│ mixed_df    │   189 │     7 │         0 │
│ mixed_dfs   │    94 │     0 │         0 │
│ mixed_ds    │    38 │     1 │         0 │
│ mixed_fs    │    60 │     0 │         1 │
│ single_axis │  2876 │    11 │       231 │
│ unknown     │  4885 │     5 │         0 │
└─────────────┴───────┴───────┴───────────┘
</pre></div>
<p>Below are the array capacity counts rounded to the neared 100 MW and broken down by source.</p>
<div><pre><span></span><span>WITH</span><span> </span><span>a</span><span> </span><span>AS</span><span> </span><span>(</span>
<span>    </span><span>SELECT</span><span>   </span><span>Source</span><span>,</span>
<span>             </span><span>ROUND</span><span>(</span><span>capMW</span><span> </span><span>/</span><span> </span><span>100</span><span>)</span><span> </span><span>*</span><span> </span><span>100</span><span> </span><span>AS</span><span> </span><span>capacity</span><span>,</span>
<span>             </span><span>COUNT</span><span>(</span><span>*</span><span>)</span><span> </span><span>num_recs</span>
<span>    </span><span>FROM</span><span>     </span><span>&#39;arrays.parquet&#39;</span>
<span>    </span><span>GROUP</span><span> </span><span>BY</span><span> </span><span>1</span><span>,</span><span> </span><span>2</span>
<span>)</span>
<span>PIVOT</span><span>    </span><span>a</span>
<span>ON</span><span>       </span><span>Source</span>
<span>USING</span><span>    </span><span>SUM</span><span>(</span><span>num_recs</span><span>)</span>
<span>GROUP</span><span> </span><span>BY</span><span> </span><span>capacity</span>
<span>ORDER</span><span> </span><span>BY</span><span> </span><span>capacity</span><span>;</span>
</pre></div>
<div><pre><span></span>┌──────────┬────────┬────────┬───────────────┬────────┬────────┬────────┐
│ capacity │ CCVPV  │  CWSD  │ GMSEUSgeorect │  OSM   │  SAM   │ USPVDB │
│  double  │ int128 │ int128 │    int128     │ int128 │ int128 │ int128 │
├──────────┼────────┼────────┼───────────────┼────────┼────────┼────────┤
│      0.0 │    790 │    356 │            33 │   5295 │   4022 │   3669 │
│    100.0 │   NULL │      2 │          NULL │     67 │    143 │    350 │
│    200.0 │   NULL │   NULL │             1 │     22 │     49 │     73 │
│    300.0 │   NULL │   NULL │          NULL │     17 │     21 │     49 │
│    400.0 │   NULL │   NULL │          NULL │      6 │     13 │      7 │
│    500.0 │   NULL │   NULL │          NULL │      4 │     11 │      2 │
│    600.0 │   NULL │   NULL │          NULL │      2 │      3 │   NULL │
│    700.0 │   NULL │   NULL │          NULL │      1 │      3 │   NULL │
│    800.0 │   NULL │   NULL │          NULL │   NULL │      2 │      1 │
│    900.0 │   NULL │   NULL │          NULL │   NULL │      1 │   NULL │
│   1000.0 │   NULL │   NULL │          NULL │   NULL │      1 │   NULL │
│   1100.0 │   NULL │   NULL │          NULL │      1 │   NULL │   NULL │
├──────────┴────────┴────────┴───────────────┴────────┴────────┴────────┤
│ 12 rows                                                     7 columns │
└───────────────────────────────────────────────────────────────────────┘
</pre></div>
</div>
<div id="solar-panels">
<h2>Solar Panels</h2>
<p>The panels Parquet file has 2,917,782 rows. Below is an example record.</p>
<div><pre><span></span>$<span> </span><span>echo</span><span> </span><span>&#34;SELECT * EXCLUDE(bbox,</span>
<span>                         geometry),</span>
<span>               bbox::JSON bbox</span>
<span>        FROM   &#39;panels.parquet&#39;</span>
<span>        LIMIT  1&#34;</span><span> </span><span>\</span>
<span>    </span><span>|</span><span> </span>~/duckdb<span> </span>-json<span> </span><span>\</span>
<span>    </span><span>|</span><span> </span>jq<span> </span>-S<span> </span>.
</pre></div>
<div><pre><span></span><span>[</span>
<span>  </span><span>{</span>
<span>    </span><span>&#34;Source&#34;</span><span>:</span><span> </span><span>&#34;gmseus&#34;</span><span>,</span>
<span>    </span><span>&#34;arrayID&#34;</span><span>:</span><span> </span><span>2807.0</span><span>,</span>
<span>    </span><span>&#34;bbox&#34;</span><span>:</span><span> </span><span>{</span>
<span>      </span><span>&#34;xmax&#34;</span><span>:</span><span> </span><span>-79.97312295800064</span><span>,</span>
<span>      </span><span>&#34;xmin&#34;</span><span>:</span><span> </span><span>-79.97325770533483</span><span>,</span>
<span>      </span><span>&#34;ymax&#34;</span><span>:</span><span> </span><span>32.87833627193374</span><span>,</span>
<span>      </span><span>&#34;ymin&#34;</span><span>:</span><span> </span><span>32.87830393275682</span>
<span>    </span><span>},</span>
<span>    </span><span>&#34;panelID&#34;</span><span>:</span><span> </span><span>2620732</span><span>,</span>
<span>    </span><span>&#34;rowArea&#34;</span><span>:</span><span> </span><span>29.1</span><span>,</span>
<span>    </span><span>&#34;rowAzimuth&#34;</span><span>:</span><span> </span><span>174.62</span><span>,</span>
<span>    </span><span>&#34;rowLength&#34;</span><span>:</span><span> </span><span>12.77</span><span>,</span>
<span>    </span><span>&#34;rowMount&#34;</span><span>:</span><span> </span><span>&#34;fixed_axis&#34;</span><span>,</span>
<span>    </span><span>&#34;rowSpace&#34;</span><span>:</span><span> </span><span>8.42</span><span>,</span>
<span>    </span><span>&#34;rowWidth&#34;</span><span>:</span><span> </span><span>3.0</span><span>,</span>
<span>    </span><span>&#34;version&#34;</span><span>:</span><span> </span><span>&#34;v1.0&#34;</span>
<span>  </span><span>}</span>
<span>]</span>
</pre></div>
<p>Below are the field names, data types, percentages of NULLs per column, number of unique values and minimum and maximum values for each column.</p>

<div><pre><span></span><span>SELECT</span><span>   </span><span>column_name</span><span>,</span>
<span>         </span><span>column_type</span><span>,</span>
<span>         </span><span>null_percentage</span><span>,</span>
<span>         </span><span>approx_unique</span><span>,</span>
<span>         </span><span>min</span><span>,</span>
<span>         </span><span>max</span>
<span>FROM</span><span>     </span><span>(</span><span>SUMMARIZE</span>
<span>          </span><span>FROM</span><span> </span><span>READ_PARQUET</span><span>(</span><span>&#39;panels.parquet&#39;</span><span>))</span>
<span>WHERE</span><span>    </span><span>column_name</span><span> </span><span>!=</span><span> </span><span>&#39;geometry&#39;</span>
<span>AND</span><span>      </span><span>column_name</span><span> </span><span>!=</span><span> </span><span>&#39;bbox&#39;</span>
<span>ORDER</span><span> </span><span>BY</span><span> </span><span>1</span><span>;</span>
</pre></div>
<div><pre><span></span>┌─────────────┬─────────────┬─────────────────┬───────────────┬───────────────┬─────────────┐
│ column_name │ column_type │ null_percentage │ approx_unique │      min      │     max     │
│   varchar   │   varchar   │  decimal(9,2)   │     int64     │    varchar    │   varchar   │
├─────────────┼─────────────┼─────────────────┼───────────────┼───────────────┼─────────────┤
│ Source      │ VARCHAR     │            0.00 │             3 │ CCVPV         │ gmseus      │
│ arrayID     │ DOUBLE      │            0.08 │          9451 │ 1.0           │ 15017.0     │
│ panelID     │ BIGINT      │            0.00 │       2703164 │ 1             │ 2917782     │
│ rowArea     │ DOUBLE      │            0.00 │         88974 │ 15.01         │ 1999.76     │
│ rowAzimuth  │ DOUBLE      │            0.00 │         14901 │ 90.0          │ 270.0       │
│ rowLength   │ DOUBLE      │            0.00 │         26759 │ 4.02          │ 530.05      │
│ rowMount    │ VARCHAR     │            0.00 │             3 │ dual_axis     │ single_axis │
│ rowSpace    │ DOUBLE      │            0.17 │         13376 │ 7.4765186e-08 │ 20.0        │
│ rowWidth    │ DOUBLE      │            0.00 │          1863 │ 0.45          │ 102.14      │
│ version     │ VARCHAR     │            0.00 │             1 │ v1.0          │ v1.0        │
├─────────────┴─────────────┴─────────────────┴───────────────┴───────────────┴─────────────┤
│ 10 rows                                                                         6 columns │
└───────────────────────────────────────────────────────────────────────────────────────────┘
</pre></div>
<p>Below is the relationship between the sources of data and the row mount.</p>
<div><pre><span></span><span>PIVOT</span><span>    </span><span>&#39;panels.parquet&#39;</span>
<span>ON</span><span>       </span><span>Source</span>
<span>USING</span><span>    </span><span>COUNT</span><span>(</span><span>*</span><span>)</span>
<span>GROUP</span><span> </span><span>BY</span><span> </span><span>rowMount</span>
<span>ORDER</span><span> </span><span>BY</span><span> </span><span>rowMount</span><span>;</span>
</pre></div>
<div><pre><span></span>┌─────────────┬────────┬────────┬─────────┐
│  rowMount   │ CCVPV  │  OSM   │ gmseus  │
│   varchar   │ int64  │ int64  │  int64  │
├─────────────┼────────┼────────┼─────────┤
│ dual_axis   │     44 │   5975 │   80225 │
│ fixed_axis  │  13344 │ 118639 │  163512 │
│ single_axis │ 189699 │ 743371 │ 1602973 │
└─────────────┴────────┴────────┴─────────┘
</pre></div>
<p>Of the 15,017 arrays in this dataset, only 5,358 have any panels in them.</p>
<div><pre><span></span><span>.</span><span>maxrows</span><span> </span><span>20</span>

<span>SELECT</span><span>   </span><span>a</span><span>.</span><span>arrayID</span><span>,</span>
<span>         </span><span>COUNT</span><span>(</span><span>DISTINCT</span><span> </span><span>b</span><span>.</span><span>panelID</span><span>)</span>
<span>FROM</span><span>     </span><span>READ_PARQUET</span><span>(</span><span>&#39;arrays.parquet&#39;</span><span>)</span><span> </span><span>a</span>
<span>JOIN</span><span>     </span><span>READ_PARQUET</span><span>(</span><span>&#39;panels.parquet&#39;</span><span>)</span><span> </span><span>b</span>
<span>ON</span><span>       </span><span>ST_COVERS</span><span>(</span><span>a</span><span>.</span><span>geometry</span><span>,</span><span> </span><span>b</span><span>.</span><span>geometry</span><span>)</span>
<span>GROUP</span><span> </span><span>BY</span><span> </span><span>a</span><span>.</span><span>arrayID</span>
<span>ORDER</span><span> </span><span>BY</span><span> </span><span>2</span><span> </span><span>DESC</span><span>;</span>
</pre></div>
<div><pre><span></span>┌─────────┬───────────────────────────┐
│ arrayID │ count(DISTINCT b.panelID) │
│  int64  │           int64           │
├─────────┼───────────────────────────┤
│   11958 │                     56762 │
│   14225 │                     51140 │
│   12162 │                     43741 │
│   12433 │                     37304 │
│   14461 │                     31898 │
│   13229 │                     30093 │
│    6589 │                     27080 │
│   13329 │                     25120 │
│   12597 │                     24054 │
│   12224 │                     23449 │
│      ·  │                         · │
│      ·  │                         · │
│      ·  │                         · │
│    1792 │                         1 │
│    2286 │                         1 │
│     863 │                         1 │
│    1816 │                         1 │
│    8997 │                         1 │
│   12358 │                         1 │
│    6564 │                         1 │
│    3845 │                         1 │
│    6574 │                         1 │
│     991 │                         1 │
├─────────┴───────────────────────────┤
│ 5358 rows (20 shown)      2 columns │
└─────────────────────────────────────┘
</pre></div>
<p>Below is a solar farm in Nevada where some arrays have panels and others do not.</p>
<p><a href="https://debamitro.github.io/blog/how-i-built-my-own-tool-for-disk-space-cleanup/theme/images/gmseus/qgis-bin_qWE8hm28IE.jpg">
<img alt="US Solar Farms" src="https://debamitro.github.io/blog/how-i-built-my-own-tool-for-disk-space-cleanup/theme/images/gmseus/qgis-bin_qWE8hm28IE.jpg"/>
</a></p><p>I was interested in seeing the solar farm with 56K panels. Below are its coordinates.</p>
<div><pre><span></span><span>SELECT</span><span> </span><span>ST_CENTROID</span><span>(</span><span>geometry</span><span>)</span>
<span>FROM</span><span>   </span><span>&#39;arrays.parquet&#39;</span>
<span>WHERE</span><span>  </span><span>arrayID</span><span> </span><span>=</span><span> </span><span>11958</span><span>;</span>
</pre></div>
<div><pre><span></span>┌────────────────────────────────────────────────┐
│             st_centroid(geometry)              │
│                    geometry                    │
├────────────────────────────────────────────────┤
│ POINT (-115.34248808114013 35.611919498003175) │
└────────────────────────────────────────────────┘
</pre></div>
<p>Even this has arrays without marked panels.</p>
<p><a href="https://debamitro.github.io/blog/how-i-built-my-own-tool-for-disk-space-cleanup/theme/images/gmseus/qgis-bin_9TpwvNOgbF.jpg">
<img alt="US Solar Farms" src="https://debamitro.github.io/blog/how-i-built-my-own-tool-for-disk-space-cleanup/theme/images/gmseus/qgis-bin_9TpwvNOgbF.jpg"/>
</a></p><p>I&#39;m looking forward to v2 of this dataset with better panel detection. It&#39;ll be great to get a good approximation of how many are deployed in the US.</p>
</div>

        </div><p>
            Thank you for taking the time to read this post. I offer both consulting and hands-on development services to clients in North America and Europe. If you&#39;d like to discuss how my offerings can help your business please contact me via <a href="https://uk.linkedin.com/in/marklitwintschik/">LinkedIn</a>.
        </p></div>
  </body>
</html>
