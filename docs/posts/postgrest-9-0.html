<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://postgrest.org/en/v9.0/releases/v9.0.0.html">Original</a>
    <h1>PostgREST 9.0</h1>
    
    <div id="readability-page-1" class="page"><div role="main" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div id="postgrest-9-0-0">

<p>This major version is released with PostgreSQL 14 compatibility and is accompanied with new features and bug fixes. You can look at the detailed changelog and download the pre-compiled binaries on the <a href="https://github.com/PostgREST/postgrest/releases/tag/v9.0.0">GitHub release page</a>.</p>
<div id="features">
<h2>Features<a href="#features" title="Permalink to this headline">¶</a></h2>
<div id="postgresql-14-compatibility">
<h3>PostgreSQL 14 compatibility<a href="#postgresql-14-compatibility" title="Permalink to this headline">¶</a></h3>
<p>PostgreSQL 14 Beta 1 tightened its GUC naming scheme making it impossible to use multiple dots (<code><span>.</span></code>) and dashes (<code><span>-</span></code>) on custom GUC parameters, this caused our <a href="https://postgrest.org/en/v8.0/api.html#accessing-request-headers-cookies-and-jwt-claims">old HTTP Context</a> to fail across all requests. Thankfully, <a href="https://github.com/robertsosinski">@robertsosinski</a> got the PostgreSQL team to reconsider allowing multiple dots in the GUC name, allowing us to avoid a major breaking change. You can see the full discussion <a href="https://www.postgresql.org/message-id/17045-6a4a9f0d1513f72b%40postgresql.org">here</a>.</p>
<p>Still, dashes cannot be used on PostgreSQL 14 custom GUC parameters, so we changed our HTTP Context <a href="https://postgrest.org/en/v9.0/api.html#guc-req-headers-cookies-claims"><span>to namespace using a mix of dots and JSON</span></a>. On older PostgreSQL versions we still use the <a href="https://postgrest.org/en/v9.0/api.html#guc-legacy-names"><span>Legacy GUC variable names</span></a>. If you wish to use the new JSON GUCs on these versions, set the <a href="https://postgrest.org/en/v9.0/configuration.html#db-use-legacy-gucs"><span>db-use-legacy-gucs</span></a> config option to false.</p>
</div>
<div id="resource-embedding-with-top-level-filtering">
<h3>Resource Embedding with Top-level Filtering<a href="#resource-embedding-with-top-level-filtering" title="Permalink to this headline">¶</a></h3>
<p>Historically, Resource Embedding was always done with a query that included the equivalent of a <code><span>LEFT</span> <span>JOIN</span></code>, which meant you could not
exclude any of the top-level resource rows. You can now use <a href="https://postgrest.org/en/v9.0/api.html#embedding-top-level-filter"><span>Embedding with Top-level Filtering</span></a> to do the equivalent of an <code><span>INNER</span> <span>JOIN</span></code>, thus you can filter the top-level resource rows with any of the available operators.</p>
</div>
<div id="partitioned-tables">
<h3>Partitioned Tables<a href="#partitioned-tables" title="Permalink to this headline">¶</a></h3>
<p>Partitioned tables now integrate with all the feature set. You can <a href="https://postgrest.org/en/v9.0/api.html#embedding-partitioned-tables"><span>embed partitioned tables</span></a>, UPSERT, INSERT(with a correctly generated Location header) and make OPTIONS requests on them. They’re also included in the generated OpenAPI.</p>
</div>

<div id="horizontal-filtering">
<h3>Horizontal Filtering<a href="#horizontal-filtering" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>The <code><span>unknown</span></code> value for three-valued logic can now be used on the <code><span>is</span></code> <a href="https://postgrest.org/en/v9.0/api.html#operators"><span>operator</span></a>.</p></li>
<li><p>Escaping double quotes(<code><span>&#34;</span></code>) in double-quoted surrounded strings is now possible by using backslashes, e.g. <code><span>?col=in.(&#34;Double\&#34;Quote&#34;)</span></code>. Backslashes can be escaped with a preceding backslash, e.g. <code><span>?col=in.(&#34;Back\\slash&#34;)</span></code>. See <a href="https://postgrest.org/en/v9.0/api.html#reserved-chars"><span>Reserved characters</span></a>.</p></li>
</ul>
</div>

<div id="error-messages">
<h3>Error messages<a href="#error-messages" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p><a href="https://postgrest.org/en/v9.0/api.html#embed-disamb"><span>Embedding Disambiguation</span></a> now shows an improved error message that includes relevant hints for clearing out the ambiguous embedding.</p></li>
</ul>
</div>

</div>
<div id="bug-fixes">
<h2>Bug fixes<a href="#bug-fixes" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Correct RPC return type handling for RETURNS TABLE with a single column (<a href="https://github.com/PostgREST/postgrest/pull/1930">#1930</a>).</p></li>
<li><p>Schema Cache query failing with <code><span>standard_conforming_strings</span> <span>=</span> <span>off</span></code> (<a href="https://github.com/PostgREST/postgrest/issues/1992">#1992</a>).</p></li>
<li><p>OpenAPI missing default values for String types (<a href="https://github.com/PostgREST/postgrest/issues/1871">#1871</a>).</p></li>
</ul>
</div>
<div id="breaking-changes">
<h2>Breaking changes<a href="#breaking-changes" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Dropped support for PostgreSQL 9.5 as it already reached its end-of-life according to <a href="https://www.postgresql.org/support/versioning/">PostgreSQL versioning policy</a>.</p></li>
<li><p>Partitions of a <a href="https://www.postgresql.org/docs/current/ddl-partitioning.html#DDL-PARTITIONING-DECLARATIVE">partitioned table</a> are no longer included in the <a href="https://postgrest.org/en/v9.0/schema_cache.html#schema-cache"><span>Schema Cache</span></a>. This is so errors are not generated when doing resource embedding on partitioned tables.</p></li>
<li><p>Dropped support for doing <a href="https://postgrest.org/en/v9.0/api.html#hint-disamb"><span>Hint Disambiguation</span></a> using dots instead of exclamation marks, e.g. doing <code><span>select=*,projects.client_id(*)</span></code> instead of <code><span>select=*,projects!client_id(*)</span></code>). Using dots was undocumented and deprecated back in <a href="https://github.com/PostgREST/postgrest/releases/tag/v6.0.2">v6.0.2</a>.</p></li>
</ul>
</div>

</div>


           </div>
           
          </div></div>
  </body>
</html>
