<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://github.com/satwikkansal/wtfpython">Original</a>
    <h1>WTFPython: Exploring and understanding Python through surprising snippets</h1>
    
    <div id="readability-page-1" class="page"><div data-target="readme-toc.content">
            <article itemprop="text"><p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://commoncog.com/satwikkansal/wtfpython/blob/master/images/logo.png"><img src="https://commoncog.com/satwikkansal/wtfpython/raw/master/images/logo.png" alt=""/></a></p>

<p dir="auto">Exploring and understanding Python through surprising snippets.</p>
<p dir="auto">Translations: <a href="https://github.com/robertparley/wtfpython-cn">Chinese 中文</a> | <a href="https://github.com/vuduclyunitn/wtfptyhon-vi">Vietnamese Tiếng Việt</a> | <a href="https://web.archive.org/web/20220511161045/https://github.com/JoseDeFreitas/wtfpython-es" rel="nofollow">Spanish Español</a> | <a href="https://github.com/buttercrab/wtfpython-ko">Korean 한국어</a> | <a href="https://github.com/satwikkansal/wtfpython/issues/new?title=Add%20translation%20for%20%5BLANGUAGE%5D&amp;body=Expected%20time%20to%20finish:%20%5BX%5D%20weeks.%20I%27ll%20start%20working%20on%20it%20from%20%5BY%5D.">Add translation</a></p>
<p dir="auto">Other modes: <a href="https://colab.research.google.com/github/satwikkansal/wtfpython/blob/master/irrelevant/wtf.ipynb" rel="nofollow">Interactive</a> | <a href="https://pypi.python.org/pypi/wtfpython" rel="nofollow">CLI</a></p>
<p dir="auto">Python, being a beautifully designed high-level and interpreter-based programming language, provides us with many features for the programmer&#39;s comfort. But sometimes, the outcomes of a Python snippet may not seem obvious at first sight.</p>
<p dir="auto">Here&#39;s a fun project attempting to explain what exactly is happening under the hood for some counter-intuitive snippets and lesser-known features in Python.</p>
<p dir="auto">While some of the examples you see below may not be WTFs in the truest sense, but they&#39;ll reveal some of the interesting parts of Python that you might be unaware of. I find it a nice way to learn the internals of a programming language, and I believe that you&#39;ll find it interesting too!</p>
<p dir="auto">If you&#39;re an experienced Python programmer, you can take it as a challenge to get most of them right in the first attempt. You may have already experienced some of them before, and I might be able to revive sweet old memories of yours! <g-emoji alias="sweat_smile" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f605.png">😅</g-emoji></p>
<p dir="auto">PS: If you&#39;re a returning reader, you can learn about the new modifications <a href="https://github.com/satwikkansal/wtfpython/releases/">here</a> (the examples marked with asterisk are the ones added in the latest major revision).</p>
<p dir="auto">So, here we go...</p>



<ul dir="auto">
<li><a href="#structure-of-the-examples">Structure of the Examples</a>
<ul dir="auto">
<li><a href="#-some-fancy-title"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Some fancy Title</a></li>
</ul>
</li>
<li><a href="#usage">Usage</a></li>
<li><a href="#-examples"><g-emoji alias="eyes" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f440.png">👀</g-emoji> Examples</a>
<ul dir="auto">
<li><a href="#section-strain-your-brain">Section: Strain your brain!</a>
<ul dir="auto">
<li><a href="#-first-things-first-"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> First things first! *</a></li>
<li><a href="#-strings-can-be-tricky-sometimes"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Strings can be tricky sometimes</a></li>
<li><a href="#-be-careful-with-chained-operations"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Be careful with chained operations</a></li>
<li><a href="#-how-not-to-use-is-operator"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> How not to use <code>is</code> operator</a></li>
<li><a href="#-hash-brownies"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Hash brownies</a></li>
<li><a href="#-deep-down-were-all-the-same"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Deep down, we&#39;re all the same.</a></li>
<li><a href="#-disorder-within-order-"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Disorder within order *</a></li>
<li><a href="#-keep-trying-"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Keep trying... *</a></li>
<li><a href="#-for-what"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> For what?</a></li>
<li><a href="#-evaluation-time-discrepancy"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Evaluation time discrepancy</a></li>
<li><a href="#-is-not--is-not-is-not-"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> <code>is not ...</code> is not <code>is (not ...)</code></a></li>
<li><a href="#-a-tic-tac-toe-where-x-wins-in-the-first-attempt"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> A tic-tac-toe where X wins in the first attempt!</a></li>
<li><a href="#-schr%C3%B6dingers-variable-"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Schrödinger&#39;s variable</a></li>
<li><a href="#-the-chicken-egg-problem-"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> The chicken-egg problem *</a></li>
<li><a href="#-subclass-relationships"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Subclass relationships</a></li>
<li><a href="#-methods-equality-and-identity"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Methods equality and identity</a></li>
<li><a href="#-all-true-ation-"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> All-true-ation *</a></li>
<li><a href="#-the-surprising-comma"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> The surprising comma</a></li>
<li><a href="#-strings-and-the-backslashes"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Strings and the backslashes</a></li>
<li><a href="#-not-knot"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> not knot!</a></li>
<li><a href="#-half-triple-quoted-strings"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Half triple-quoted strings</a></li>
<li><a href="#-whats-wrong-with-booleans"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> What&#39;s wrong with booleans?</a></li>
<li><a href="#-class-attributes-and-instance-attributes"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Class attributes and instance attributes</a></li>
<li><a href="#-yielding-none"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> yielding None</a></li>
<li><a href="#-yielding-from-return-"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Yielding from... return! *</a></li>
<li><a href="#-nan-reflexivity-"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Nan-reflexivity *</a></li>
<li><a href="#-mutating-the-immutable"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Mutating the immutable!</a></li>
<li><a href="#-the-disappearing-variable-from-outer-scope"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> The disappearing variable from outer scope</a></li>
<li><a href="#-the-mysterious-key-type-conversion"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> The mysterious key type conversion</a></li>
<li><a href="#-lets-see-if-you-can-guess-this"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Let&#39;s see if you can guess this?</a></li>
</ul>
</li>
<li><a href="#section-slippery-slopes">Section: Slippery Slopes</a>
<ul dir="auto">
<li><a href="#-modifying-a-dictionary-while-iterating-over-it"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Modifying a dictionary while iterating over it</a></li>
<li><a href="#-stubborn-del-operation"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Stubborn <code>del</code> operation</a></li>
<li><a href="#-the-out-of-scope-variable"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> The out of scope variable</a></li>
<li><a href="#-deleting-a-list-item-while-iterating"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Deleting a list item while iterating</a></li>
<li><a href="#-lossy-zip-of-iterators-"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Lossy zip of iterators *</a></li>
<li><a href="#-loop-variables-leaking-out"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Loop variables leaking out!</a></li>
<li><a href="#-beware-of-default-mutable-arguments"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Beware of default mutable arguments!</a></li>
<li><a href="#-catching-the-exceptions"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Catching the Exceptions</a></li>
<li><a href="#-same-operands-different-story"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Same operands, different story!</a></li>
<li><a href="#-name-resolution-ignoring-class-scope"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Name resolution ignoring class scope</a></li>
<li><a href="#-rounding-like-a-banker-"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Rounding like a banker *</a></li>
<li><a href="#-needles-in-a-haystack-"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Needles in a Haystack *</a></li>
<li><a href="#-splitsies-"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Splitsies *</a></li>
<li><a href="#-wild-imports-"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Wild imports *</a></li>
<li><a href="#-all-sorted-"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> All sorted? *</a></li>
<li><a href="#-midnight-time-doesnt-exist"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Midnight time doesn&#39;t exist?</a></li>
</ul>
</li>
<li><a href="#section-the-hidden-treasures">Section: The Hidden treasures!</a>
<ul dir="auto">
<li><a href="#-okay-python-can-you-make-me-fly"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Okay Python, Can you make me fly?</a></li>
<li><a href="#-goto-but-why"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> <code>goto</code>, but why?</a></li>
<li><a href="#-brace-yourself"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Brace yourself!</a></li>
<li><a href="#-lets-meet-friendly-language-uncle-for-life"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Let&#39;s meet Friendly Language Uncle For Life</a></li>
<li><a href="#-even-python-understands-that-love-is-complicated"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Even Python understands that love is complicated</a></li>
<li><a href="#-yes-it-exists"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Yes, it exists!</a></li>
<li><a href="#-ellipsis-"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Ellipsis *</a></li>
<li><a href="#-inpinity"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Inpinity</a></li>
<li><a href="#-lets-mangle"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Let&#39;s mangle</a></li>
</ul>
</li>
<li><a href="#section-appearances-are-deceptive">Section: Appearances are deceptive!</a>
<ul dir="auto">
<li><a href="#-skipping-lines"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Skipping lines?</a></li>
<li><a href="#-teleportation"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Teleportation</a></li>
<li><a href="#-well-something-is-fishy"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Well, something is fishy...</a></li>
</ul>
</li>
<li><a href="#section-miscellaneous">Section: Miscellaneous</a>
<ul dir="auto">
<li><a href="#--is-faster"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> <code>+=</code> is faster</a></li>
<li><a href="#-lets-make-a-giant-string"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Let&#39;s make a giant string!</a></li>
<li><a href="#-slowing-down-dict-lookups-"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Slowing down <code>dict</code> lookups *</a></li>
<li><a href="#-bloating-instance-dicts-"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Bloating instance <code>dict</code>s *</a></li>
<li><a href="#-minor-ones-"><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Minor Ones *</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#contributing">Contributing</a></li>
<li><a href="#acknowledgements">Acknowledgements</a></li>
<li><a href="#-license"><g-emoji alias="mortar_board" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f393.png">🎓</g-emoji> License</a>
<ul dir="auto">
<li><a href="#surprise-your-friends-as-well">Surprise your friends as well!</a></li>
<li><a href="#more-content-like-this">More content like this?</a></li>
</ul>
</li>
</ul>


<p dir="auto">All the examples are structured like below:</p>
<blockquote>
<h3 dir="auto"><a id="user-content--some-fancy-title" aria-hidden="true" href="#-some-fancy-title"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Some fancy Title</h3>
<div data-snippet-clipboard-copy-content="# Set up the code.
# Preparation for the magic..."><pre><span># Set up the code.</span>
<span># Preparation for the magic...</span></pre></div>
<p dir="auto"><strong>Output (Python version(s)):</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; triggering_statement
Some unexpected output"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>triggering_statement</span>
<span>Some</span> <span>unexpected</span> <span>output</span></pre></div>
<p dir="auto">(Optional): One line describing the unexpected output.</p>
<h4 dir="auto"><a id="user-content--explanation" aria-hidden="true" href="#-explanation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>Brief explanation of what&#39;s happening and why is it happening.</li>
</ul>
<div data-snippet-clipboard-copy-content="# Set up code
# More examples for further clarification (if necessary)"><pre><span># Set up code</span>
<span># More examples for further clarification (if necessary)</span></pre></div>
<p dir="auto"><strong>Output (Python version(s)):</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; trigger # some example that makes it easy to unveil the magic
# some justified output"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>trigger</span> <span># some example that makes it easy to unveil the magic</span>
<span># some justified output</span></pre></div>
</blockquote>
<p dir="auto"><strong>Note:</strong> All the examples are tested on Python 3.5.2 interactive interpreter, and they should work for all the Python versions unless explicitly specified before the output.</p>

<p dir="auto">A nice way to get the most out of these examples, in my opinion, is to read them in sequential order, and for every example:</p>
<ul dir="auto">
<li>Carefully read the initial code for setting up the example. If you&#39;re an experienced Python programmer, you&#39;ll successfully anticipate what&#39;s going to happen next most of the time.</li>
<li>Read the output snippets and,
<ul dir="auto">
<li>Check if the outputs are the same as you&#39;d expect.</li>
<li>Make sure if you know the exact reason behind the output being the way it is.
<ul dir="auto">
<li>If the answer is no (which is perfectly okay), take a deep breath, and read the explanation (and if you still don&#39;t understand, shout out! and create an issue <a href="https://github.com/satwikkansal/wtfpython/issues/new">here</a>).</li>
<li>If yes, give a gentle pat on your back, and you may skip to the next example.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p dir="auto">PS: You can also read WTFPython at the command line using the <a href="https://pypi.python.org/pypi/wtfpython" rel="nofollow">pypi package</a>,</p>
<div data-snippet-clipboard-copy-content="$ pip install wtfpython -U
$ wtfpython"><pre>$ pip install wtfpython -U
$ wtfpython</pre></div>
<hr/>

<h2 dir="auto"><a id="user-content-section-strain-your-brain" aria-hidden="true" href="#section-strain-your-brain"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Section: Strain your brain!</h2>
<h3 dir="auto"><a id="user-content--first-things-first-" aria-hidden="true" href="#-first-things-first-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> First things first! *</h3>


<p dir="auto">For some reason, the Python 3.8&#39;s &#34;Walrus&#34; operator (<code>:=</code>) has become quite popular. Let&#39;s check it out,</p>
<p dir="auto">1.</p>
<div data-snippet-clipboard-copy-content="# Python version 3.8+

&gt;&gt;&gt; a = &#34;wtf_walrus&#34;
&gt;&gt;&gt; a
&#39;wtf_walrus&#39;

&gt;&gt;&gt; a := &#34;wtf_walrus&#34;
File &#34;&lt;stdin&gt;&#34;, line 1
    a := &#34;wtf_walrus&#34;
      ^
SyntaxError: invalid syntax

&gt;&gt;&gt; (a := &#34;wtf_walrus&#34;) # This works though
&#39;wtf_walrus&#39;
&gt;&gt;&gt; a
&#39;wtf_walrus&#39;"><pre><span># Python version 3.8+</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>=</span> <span>&#34;wtf_walrus&#34;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>a</span>
<span>&#39;wtf_walrus&#39;</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>:=</span> <span>&#34;wtf_walrus&#34;</span>
<span>File</span> <span>&#34;&lt;stdin&gt;&#34;</span>, <span>line</span> <span>1</span>
    <span>a</span> <span>:=</span> <span>&#34;wtf_walrus&#34;</span>
      <span>^</span>
<span>SyntaxError</span>: <span>invalid</span> <span>syntax</span>

<span>&gt;&gt;</span><span>&gt;</span> (<span>a</span> <span>:=</span> <span>&#34;wtf_walrus&#34;</span>) <span># This works though</span>
<span>&#39;wtf_walrus&#39;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>a</span>
<span>&#39;wtf_walrus&#39;</span></pre></div>
<p dir="auto">2 .</p>
<div data-snippet-clipboard-copy-content="# Python version 3.8+

&gt;&gt;&gt; a = 6, 9
&gt;&gt;&gt; a
(6, 9)

&gt;&gt;&gt; (a := 6, 9)
(6, 9)
&gt;&gt;&gt; a
6

&gt;&gt;&gt; a, b = 6, 9 # Typical unpacking
&gt;&gt;&gt; a, b
(6, 9)
&gt;&gt;&gt; (a, b = 16, 19) # Oops
  File &#34;&lt;stdin&gt;&#34;, line 1
    (a, b = 16, 19)
          ^
SyntaxError: invalid syntax

&gt;&gt;&gt; (a, b := 16, 19) # This prints out a weird 3-tuple
(6, 16, 19)

&gt;&gt;&gt; a # a is still unchanged?
6

&gt;&gt;&gt; b
16"><pre><span># Python version 3.8+</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>=</span> <span>6</span>, <span>9</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>a</span>
(<span>6</span>, <span>9</span>)

<span>&gt;&gt;</span><span>&gt;</span> (<span>a</span> <span>:=</span> <span>6</span>, <span>9</span>)
(<span>6</span>, <span>9</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>a</span>
<span>6</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>a</span>, <span>b</span> <span>=</span> <span>6</span>, <span>9</span> <span># Typical unpacking</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>a</span>, <span>b</span>
(<span>6</span>, <span>9</span>)
<span>&gt;&gt;</span><span>&gt;</span> (<span>a</span>, <span>b</span> <span>=</span> <span>16</span>, <span>19</span>) <span># Oops</span>
  <span>File</span> <span>&#34;&lt;stdin&gt;&#34;</span>, <span>line</span> <span>1</span>
    (<span>a</span>, <span>b</span> <span>=</span> <span>16</span>, <span>19</span>)
          <span>^</span>
<span>SyntaxError</span>: <span>invalid</span> <span>syntax</span>

<span>&gt;&gt;</span><span>&gt;</span> (<span>a</span>, <span>b</span> <span>:=</span> <span>16</span>, <span>19</span>) <span># This prints out a weird 3-tuple</span>
(<span>6</span>, <span>16</span>, <span>19</span>)

<span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span># a is still unchanged?</span>
<span>6</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>b</span>
<span>16</span></pre></div>
<h4 dir="auto"><a id="user-content--explanation-1" aria-hidden="true" href="#-explanation-1"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation</h4>
<p dir="auto"><strong>Quick walrus operator refresher</strong></p>
<p dir="auto">The Walrus operator (<code>:=</code>) was introduced in Python 3.8, it can be useful in situations where you&#39;d want to assign values to variables within an expression.</p>
<div data-snippet-clipboard-copy-content="def some_func():
        # Assume some expensive computation here
        # time.sleep(1000)
        return 5

# So instead of,
if some_func():
        print(some_func()) # Which is bad practice since computation is happening twice

# or
a = some_func()
if a:
    print(a)

# Now you can concisely write
if a := some_func():
        print(a)"><pre><span>def</span> <span>some_func</span>():
        <span># Assume some expensive computation here</span>
        <span># time.sleep(1000)</span>
        <span>return</span> <span>5</span>

<span># So instead of,</span>
<span>if</span> <span>some_func</span>():
        <span>print</span>(<span>some_func</span>()) <span># Which is bad practice since computation is happening twice</span>

<span># or</span>
<span>a</span> <span>=</span> <span>some_func</span>()
<span>if</span> <span>a</span>:
    <span>print</span>(<span>a</span>)

<span># Now you can concisely write</span>
<span>if</span> <span>a</span> <span>:=</span> <span>some_func</span>():
        <span>print</span>(<span>a</span>)</pre></div>
<p dir="auto"><strong>Output (&gt; 3.8):</strong></p>
<div data-snippet-clipboard-copy-content="5
5
5"><pre><span>5</span>
<span>5</span>
<span>5</span></pre></div>
<p dir="auto">This saved one line of code, and implicitly prevented invoking <code>some_func</code> twice.</p>
<ul dir="auto">
<li>
<p dir="auto">Unparenthesized &#34;assignment expression&#34; (use of walrus operator), is restricted at the top level, hence the <code>SyntaxError</code> in the <code>a := &#34;wtf_walrus&#34;</code> statement of the first snippet. Parenthesizing it worked as expected and assigned <code>a</code>.</p>
</li>
<li>
<p dir="auto">As usual, parenthesizing of an expression containing <code>=</code> operator is not allowed. Hence the syntax error in <code>(a, b = 6, 9)</code>.</p>
</li>
<li>
<p dir="auto">The syntax of the Walrus operator is of the form <code>NAME:= expr</code>, where <code>NAME</code> is a valid identifier, and <code>expr</code> is a valid expression. Hence, iterable packing and unpacking are not supported which means,</p>
<ul dir="auto">
<li>
<p dir="auto"><code>(a := 6, 9)</code> is equivalent to <code>((a := 6), 9)</code> and ultimately <code>(a, 9) </code> (where <code>a</code>&#39;s value is 6&#39;)</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; (a := 6, 9) == ((a := 6), 9)
True
&gt;&gt;&gt; x = (a := 696, 9)
&gt;&gt;&gt; x
(696, 9)
&gt;&gt;&gt; x[0] is a # Both reference same memory location
True"><pre><span>&gt;&gt;</span><span>&gt;</span> (<span>a</span> <span>:=</span> <span>6</span>, <span>9</span>) <span>==</span> ((<span>a</span> <span>:=</span> <span>6</span>), <span>9</span>)
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>x</span> <span>=</span> (<span>a</span> <span>:=</span> <span>696</span>, <span>9</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>x</span>
(<span>696</span>, <span>9</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>x</span>[<span>0</span>] <span>is</span> <span>a</span> <span># Both reference same memory location</span>
<span>True</span></pre></div>
</li>
<li>
<p dir="auto">Similarly, <code>(a, b := 16, 19)</code> is equivalent to <code>(a, (b := 16), 19)</code> which is nothing but a 3-tuple.</p>
</li>
</ul>
</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--strings-can-be-tricky-sometimes" aria-hidden="true" href="#-strings-can-be-tricky-sometimes"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Strings can be tricky sometimes</h3>

<p dir="auto">1.</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; a = &#34;some_string&#34;
&gt;&gt;&gt; id(a)
140420665652016
&gt;&gt;&gt; id(&#34;some&#34; + &#34;_&#34; + &#34;string&#34;) # Notice that both the ids are same.
140420665652016"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>=</span> <span>&#34;some_string&#34;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>id</span>(<span>a</span>)
<span>140420665652016</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>id</span>(<span>&#34;some&#34;</span> <span>+</span> <span>&#34;_&#34;</span> <span>+</span> <span>&#34;string&#34;</span>) <span># Notice that both the ids are same.</span>
<span>140420665652016</span></pre></div>
<p dir="auto">2.</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; a = &#34;wtf&#34;
&gt;&gt;&gt; b = &#34;wtf&#34;
&gt;&gt;&gt; a is b
True

&gt;&gt;&gt; a = &#34;wtf!&#34;
&gt;&gt;&gt; b = &#34;wtf!&#34;
&gt;&gt;&gt; a is b
False
"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>=</span> <span>&#34;wtf&#34;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>b</span> <span>=</span> <span>&#34;wtf&#34;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>is</span> <span>b</span>
<span>True</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>=</span> <span>&#34;wtf!&#34;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>b</span> <span>=</span> <span>&#34;wtf!&#34;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>is</span> <span>b</span>
<span>False</span></pre></div>
<p dir="auto">3.</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; a, b = &#34;wtf!&#34;, &#34;wtf!&#34;
&gt;&gt;&gt; a is b # All versions except 3.7.x
True

&gt;&gt;&gt; a = &#34;wtf!&#34;; b = &#34;wtf!&#34;
&gt;&gt;&gt; a is b # This will print True or False depending on where you&#39;re invoking it (python shell / ipython / as a script)
False"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>a</span>, <span>b</span> <span>=</span> <span>&#34;wtf!&#34;</span>, <span>&#34;wtf!&#34;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>is</span> <span>b</span> <span># All versions except 3.7.x</span>
<span>True</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>=</span> <span>&#34;wtf!&#34;</span>; <span>b</span> <span>=</span> <span>&#34;wtf!&#34;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>is</span> <span>b</span> <span># This will print True or False depending on where you&#39;re invoking it (python shell / ipython / as a script)</span>
<span>False</span></pre></div>
<div data-snippet-clipboard-copy-content="# This time in file some_file.py
a = &#34;wtf!&#34;
b = &#34;wtf!&#34;
print(a is b)

# prints True when the module is invoked!"><pre><span># This time in file some_file.py</span>
<span>a</span> <span>=</span> <span>&#34;wtf!&#34;</span>
<span>b</span> <span>=</span> <span>&#34;wtf!&#34;</span>
<span>print</span>(<span>a</span> <span>is</span> <span>b</span>)

<span># prints True when the module is invoked!</span></pre></div>
<p dir="auto">4.</p>
<p dir="auto"><strong>Output (&lt; Python3.7 )</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; &#39;a&#39; * 20 is &#39;aaaaaaaaaaaaaaaaaaaa&#39;
True
&gt;&gt;&gt; &#39;a&#39; * 21 is &#39;aaaaaaaaaaaaaaaaaaaaa&#39;
False"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>&#39;a&#39;</span> <span>*</span> <span>20</span> <span>is</span> <span>&#39;aaaaaaaaaaaaaaaaaaaa&#39;</span>
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>&#39;a&#39;</span> <span>*</span> <span>21</span> <span>is</span> <span>&#39;aaaaaaaaaaaaaaaaaaaaa&#39;</span>
<span>False</span></pre></div>
<p dir="auto">Makes sense, right?</p>
<h4 dir="auto"><a id="user-content--explanation-2" aria-hidden="true" href="#-explanation-2"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>The behavior in first and second snippets is due to a CPython optimization (called string interning) that tries to use existing immutable objects in some cases rather than creating a new object every time.</li>
<li>After being &#34;interned,&#34; many variables may reference the same string object in memory (saving memory thereby).</li>
<li>In the snippets above, strings are implicitly interned. The decision of when to implicitly intern a string is implementation-dependent. There are some rules that can be used to guess if a string will be interned or not:
<ul dir="auto">
<li>All length 0 and length 1 strings are interned.</li>
<li>Strings are interned at compile time (<code>&#39;wtf&#39;</code> will be interned but <code>&#39;&#39;.join([&#39;w&#39;, &#39;t&#39;, &#39;f&#39;])</code> will not be interned)</li>
<li>Strings that are not composed of ASCII letters, digits or underscores, are not interned. This explains why <code>&#39;wtf!&#39;</code> was not interned due to <code>!</code>. CPython implementation of this rule can be found <a href="https://github.com/python/cpython/blob/3.6/Objects/codeobject.c#L19">here</a>
<a target="_blank" rel="noopener noreferrer" href="https://commoncog.com/satwikkansal/wtfpython/blob/master/images/string-intern/string_intern.png"><img src="https://commoncog.com/satwikkansal/wtfpython/raw/master/images/string-intern/string_intern.png" alt="image"/></a></li>
</ul>
</li>
<li>When <code>a</code> and <code>b</code> are set to <code>&#34;wtf!&#34;</code> in the same line, the Python interpreter creates a new object, then references the second variable at the same time. If you do it on separate lines, it doesn&#39;t &#34;know&#34; that there&#39;s already <code>&#34;wtf!&#34;</code> as an object (because <code>&#34;wtf!&#34;</code> is not implicitly interned as per the facts mentioned above). It&#39;s a compile-time optimization. This optimization doesn&#39;t apply to 3.7.x versions of CPython (check this <a href="https://github.com/satwikkansal/wtfpython/issues/100" data-hovercard-type="issue" data-hovercard-url="/satwikkansal/wtfpython/issues/100/hovercard">issue</a> for more discussion).</li>
<li>A compile unit in an interactive environment like IPython consists of a single statement, whereas it consists of the entire module in case of modules. <code>a, b = &#34;wtf!&#34;, &#34;wtf!&#34;</code> is single statement, whereas <code>a = &#34;wtf!&#34;; b = &#34;wtf!&#34;</code> are two statements in a single line. This explains why the identities are different in <code>a = &#34;wtf!&#34;; b = &#34;wtf!&#34;</code>, and also explain why they are same when invoked in <code>some_file.py</code></li>
<li>The abrupt change in the output of the fourth snippet is due to a <a href="https://en.wikipedia.org/wiki/Peephole_optimization" rel="nofollow">peephole optimization</a> technique known as Constant folding. This means the expression <code>&#39;a&#39;*20</code> is replaced by <code>&#39;aaaaaaaaaaaaaaaaaaaa&#39;</code> during compilation to save a  few clock cycles during runtime. Constant folding only occurs for strings having a length of less than 21. (Why? Imagine the size of <code>.pyc</code> file generated as a result of the expression <code>&#39;a&#39;*10**10</code>). <a href="https://github.com/python/cpython/blob/3.6/Python/peephole.c#L288">Here&#39;s</a> the implementation source for the same.</li>
<li>Note: In Python 3.7, Constant folding was moved out from peephole optimizer to the new AST optimizer with some change in logic as well, so the fourth snippet doesn&#39;t work for Python 3.7. You can read more about the change <a href="https://bugs.python.org/issue11549" rel="nofollow">here</a>.</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--be-careful-with-chained-operations" aria-hidden="true" href="#-be-careful-with-chained-operations"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Be careful with chained operations</h3>

<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; (False == False) in [False] # makes sense
False
&gt;&gt;&gt; False == (False in [False]) # makes sense
False
&gt;&gt;&gt; False == False in [False] # now what?
True

&gt;&gt;&gt; True is False == False
False
&gt;&gt;&gt; False is False is False
True

&gt;&gt;&gt; 1 &gt; 0 &lt; 1
True
&gt;&gt;&gt; (1 &gt; 0) &lt; 1
False
&gt;&gt;&gt; 1 &gt; (0 &lt; 1)
False"><pre><span>&gt;&gt;</span><span>&gt;</span> (<span>False</span> <span>==</span> <span>False</span>) <span>in</span> [<span>False</span>] <span># makes sense</span>
<span>False</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>False</span> <span>==</span> (<span>False</span> <span>in</span> [<span>False</span>]) <span># makes sense</span>
<span>False</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>False</span> <span>==</span> <span>False</span> <span>in</span> [<span>False</span>] <span># now what?</span>
<span>True</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>True</span> <span>is</span> <span>False</span> <span>==</span> <span>False</span>
<span>False</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>False</span> <span>is</span> <span>False</span> <span>is</span> <span>False</span>
<span>True</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>1</span> <span>&gt;</span> <span>0</span> <span>&lt;</span> <span>1</span>
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> (<span>1</span> <span>&gt;</span> <span>0</span>) <span>&lt;</span> <span>1</span>
<span>False</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>1</span> <span>&gt;</span> (<span>0</span> <span>&lt;</span> <span>1</span>)
<span>False</span></pre></div>
<h4 dir="auto"><a id="user-content--explanation-3" aria-hidden="true" href="#-explanation-3"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<p dir="auto">As per <a href="https://docs.python.org/3/reference/expressions.html#membership-test-operations" rel="nofollow">https://docs.python.org/3/reference/expressions.html#membership-test-operations</a></p>
<blockquote>
<p dir="auto">Formally, if a, b, c, ..., y, z are expressions and op1, op2, ..., opN are comparison operators, then a op1 b op2 c ... y opN z is equivalent to a op1 b and b op2 c and ... y opN z, except that each expression is evaluated at most once.</p>
</blockquote>
<p dir="auto">While such behavior might seem silly to you in the above examples, it&#39;s fantastic with stuff like <code>a == b == c</code> and <code>0 &lt;= x &lt;= 100</code>.</p>
<ul dir="auto">
<li><code>False is False is False</code> is equivalent to <code>(False is False) and (False is False)</code></li>
<li><code>True is False == False</code> is equivalent to <code>True is False and False == False</code> and since the first part of the statement (<code>True is False</code>) evaluates to <code>False</code>, the overall expression evaluates to <code>False</code>.</li>
<li><code>1 &gt; 0 &lt; 1</code> is equivalent to <code>1 &gt; 0 and 0 &lt; 1</code> which evaluates to <code>True</code>.</li>
<li>The expression <code>(1 &gt; 0) &lt; 1</code> is equivalent to <code>True &lt; 1</code> and
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; int(True)
1
&gt;&gt;&gt; True + 1 #not relevant for this example, but just for fun
2"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>int</span>(<span>True</span>)
<span>1</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>True</span> <span>+</span> <span>1</span> <span>#not relevant for this example, but just for fun</span>
<span>2</span></pre></div>
So, <code>1 &lt; 1</code> evaluates to <code>False</code></li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--how-not-to-use-is-operator" aria-hidden="true" href="#-how-not-to-use-is-operator"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> How not to use <code>is</code> operator</h3>

<p dir="auto">The following is a very famous example present all over the internet.</p>
<p dir="auto">1.</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; a = 256
&gt;&gt;&gt; b = 256
&gt;&gt;&gt; a is b
True

&gt;&gt;&gt; a = 257
&gt;&gt;&gt; b = 257
&gt;&gt;&gt; a is b
False"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>=</span> <span>256</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>b</span> <span>=</span> <span>256</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>is</span> <span>b</span>
<span>True</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>=</span> <span>257</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>b</span> <span>=</span> <span>257</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>is</span> <span>b</span>
<span>False</span></pre></div>
<p dir="auto">2.</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; a = []
&gt;&gt;&gt; b = []
&gt;&gt;&gt; a is b
False

&gt;&gt;&gt; a = tuple()
&gt;&gt;&gt; b = tuple()
&gt;&gt;&gt; a is b
True"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>=</span> []
<span>&gt;&gt;</span><span>&gt;</span> <span>b</span> <span>=</span> []
<span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>is</span> <span>b</span>
<span>False</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>=</span> <span>tuple</span>()
<span>&gt;&gt;</span><span>&gt;</span> <span>b</span> <span>=</span> <span>tuple</span>()
<span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>is</span> <span>b</span>
<span>True</span></pre></div>
<p dir="auto">3.
<strong>Output</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; a, b = 257, 257
&gt;&gt;&gt; a is b
True"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>a</span>, <span>b</span> <span>=</span> <span>257</span>, <span>257</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>is</span> <span>b</span>
<span>True</span></pre></div>
<p dir="auto"><strong>Output (Python 3.7.x specifically)</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; a, b = 257, 257
&gt;&gt;&gt; a is b
False"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>a</span>, <span>b</span> <span>=</span> <span>257</span>, <span>257</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>is</span> <span>b</span>
<span>False</span></pre></div>
<h4 dir="auto"><a id="user-content--explanation-4" aria-hidden="true" href="#-explanation-4"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<p dir="auto"><strong>The difference between <code>is</code> and <code>==</code></strong></p>
<ul dir="auto">
<li><code>is</code> operator checks if both the operands refer to the same object (i.e., it checks if the identity of the operands matches or not).</li>
<li><code>==</code> operator compares the values of both the operands and checks if they are the same.</li>
<li>So <code>is</code> is for reference equality and <code>==</code> is for value equality. An example to clear things up,
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; class A: pass
&gt;&gt;&gt; A() is A() # These are two empty objects at two different memory locations.
False"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>class</span> <span>A</span>: <span>pass</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>A</span>() <span>is</span> <span>A</span>() <span># These are two empty objects at two different memory locations.</span>
<span>False</span></pre></div>
</li>
</ul>
<p dir="auto"><strong><code>256</code> is an existing object but <code>257</code> isn&#39;t</strong></p>
<p dir="auto">When you start up python the numbers from <code>-5</code> to <code>256</code> will be allocated. These numbers are used a lot, so it makes sense just to have them ready.</p>
<p dir="auto">Quoting from <a href="https://docs.python.org/3/c-api/long.html" rel="nofollow">https://docs.python.org/3/c-api/long.html</a></p>
<blockquote>
<p dir="auto">The current implementation keeps an array of integer objects for all integers between -5 and 256, when you create an int in that range you just get back a reference to the existing object. So it should be possible to change the value of 1. I suspect the behavior of Python, in this case, is undefined. :-)</p>
</blockquote>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; id(256)
10922528
&gt;&gt;&gt; a = 256
&gt;&gt;&gt; b = 256
&gt;&gt;&gt; id(a)
10922528
&gt;&gt;&gt; id(b)
10922528
&gt;&gt;&gt; id(257)
140084850247312
&gt;&gt;&gt; x = 257
&gt;&gt;&gt; y = 257
&gt;&gt;&gt; id(x)
140084850247440
&gt;&gt;&gt; id(y)
140084850247344"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>id</span>(<span>256</span>)
<span>10922528</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>=</span> <span>256</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>b</span> <span>=</span> <span>256</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>id</span>(<span>a</span>)
<span>10922528</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>id</span>(<span>b</span>)
<span>10922528</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>id</span>(<span>257</span>)
<span>140084850247312</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>x</span> <span>=</span> <span>257</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>y</span> <span>=</span> <span>257</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>id</span>(<span>x</span>)
<span>140084850247440</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>id</span>(<span>y</span>)
<span>140084850247344</span></pre></div>
<p dir="auto">Here the interpreter isn&#39;t smart enough while executing <code>y = 257</code> to recognize that we&#39;ve already created an integer of the value <code>257,</code> and so it goes on to create another object in the memory.</p>
<p dir="auto">Similar optimization applies to other <strong>immutable</strong> objects like empty tuples as well. Since lists are mutable, that&#39;s why <code>[] is []</code> will return <code>False</code> and <code>() is ()</code> will return <code>True</code>. This explains our second snippet. Let&#39;s move on to the third one,</p>
<p dir="auto"><strong>Both <code>a</code> and <code>b</code> refer to the same object when initialized with same value in the same line.</strong></p>
<p dir="auto"><strong>Output</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; a, b = 257, 257
&gt;&gt;&gt; id(a)
140640774013296
&gt;&gt;&gt; id(b)
140640774013296
&gt;&gt;&gt; a = 257
&gt;&gt;&gt; b = 257
&gt;&gt;&gt; id(a)
140640774013392
&gt;&gt;&gt; id(b)
140640774013488"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>a</span>, <span>b</span> <span>=</span> <span>257</span>, <span>257</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>id</span>(<span>a</span>)
<span>140640774013296</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>id</span>(<span>b</span>)
<span>140640774013296</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>=</span> <span>257</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>b</span> <span>=</span> <span>257</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>id</span>(<span>a</span>)
<span>140640774013392</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>id</span>(<span>b</span>)
<span>140640774013488</span></pre></div>
<ul dir="auto">
<li>
<p dir="auto">When a and b are set to <code>257</code> in the same line, the Python interpreter creates a new object, then references the second variable at the same time. If you do it on separate lines, it doesn&#39;t &#34;know&#34; that there&#39;s already <code>257</code> as an object.</p>
</li>
<li>
<p dir="auto">It&#39;s a compiler optimization and specifically applies to the interactive environment. When you enter two lines in a live interpreter, they&#39;re compiled separately, therefore optimized separately. If you were to try this example in a <code>.py</code> file, you would not see the same behavior, because the file is compiled all at once. This optimization is not limited to integers, it works for other immutable data types like strings (check the &#34;Strings are tricky example&#34;) and floats as well,</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; a, b = 257.0, 257.0
&gt;&gt;&gt; a is b
True"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>a</span>, <span>b</span> <span>=</span> <span>257.0</span>, <span>257.0</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>is</span> <span>b</span>
<span>True</span></pre></div>
</li>
<li>
<p dir="auto">Why didn&#39;t this work for Python 3.7? The abstract reason is because such compiler optimizations are implementation specific (i.e. may change with version, OS, etc). I&#39;m still figuring out what exact implementation change cause the issue, you can check out this <a href="https://github.com/satwikkansal/wtfpython/issues/100" data-hovercard-type="issue" data-hovercard-url="/satwikkansal/wtfpython/issues/100/hovercard">issue</a> for updates.</p>
</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--hash-brownies" aria-hidden="true" href="#-hash-brownies"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Hash brownies</h3>

<p dir="auto">1.</p>
<div data-snippet-clipboard-copy-content="some_dict = {}
some_dict[5.5] = &#34;JavaScript&#34;
some_dict[5.0] = &#34;Ruby&#34;
some_dict[5] = &#34;Python&#34;"><pre><span>some_dict</span> <span>=</span> {}
<span>some_dict</span>[<span>5.5</span>] <span>=</span> <span>&#34;JavaScript&#34;</span>
<span>some_dict</span>[<span>5.0</span>] <span>=</span> <span>&#34;Ruby&#34;</span>
<span>some_dict</span>[<span>5</span>] <span>=</span> <span>&#34;Python&#34;</span></pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; some_dict[5.5]
&#34;JavaScript&#34;
&gt;&gt;&gt; some_dict[5.0] # &#34;Python&#34; destroyed the existence of &#34;Ruby&#34;?
&#34;Python&#34;
&gt;&gt;&gt; some_dict[5] 
&#34;Python&#34;

&gt;&gt;&gt; complex_five = 5 + 0j
&gt;&gt;&gt; type(complex_five)
complex
&gt;&gt;&gt; some_dict[complex_five]
&#34;Python&#34;"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>some_dict</span>[<span>5.5</span>]
<span>&#34;JavaScript&#34;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>some_dict</span>[<span>5.0</span>] <span># &#34;Python&#34; destroyed the existence of &#34;Ruby&#34;?</span>
<span>&#34;Python&#34;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>some_dict</span>[<span>5</span>] 
<span>&#34;Python&#34;</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>complex_five</span> <span>=</span> <span>5</span> <span>+</span> <span>0j</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>type</span>(<span>complex_five</span>)
<span>complex</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>some_dict</span>[<span>complex_five</span>]
<span>&#34;Python&#34;</span></pre></div>
<p dir="auto">So, why is Python all over the place?</p>
<h4 dir="auto"><a id="user-content--explanation-5" aria-hidden="true" href="#-explanation-5"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation</h4>
<ul dir="auto">
<li>
<p dir="auto">Uniqueness of keys in a Python dictionary is by <em>equivalence</em>, not identity. So even though <code>5</code>, <code>5.0</code>, and <code>5 + 0j</code> are distinct objects of different types, since they&#39;re equal, they can&#39;t both be in the same <code>dict</code> (or <code>set</code>). As soon as you insert any one of them, attempting to look up any distinct but equivalent key will succeed with the original mapped value (rather than failing with a <code>KeyError</code>):</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; 5 == 5.0 == 5 + 0j
True
&gt;&gt;&gt; 5 is not 5.0 is not 5 + 0j
True
&gt;&gt;&gt; some_dict = {}
&gt;&gt;&gt; some_dict[5.0] = &#34;Ruby&#34;
&gt;&gt;&gt; 5.0 in some_dict
True
&gt;&gt;&gt; (5 in some_dict) and (5 + 0j in some_dict)
True"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>5</span> <span>==</span> <span>5.0</span> <span>==</span> <span>5</span> <span>+</span> <span>0j</span>
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>5</span> <span>is</span> <span>not</span> <span>5.0</span> <span>is</span> <span>not</span> <span>5</span> <span>+</span> <span>0j</span>
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>some_dict</span> <span>=</span> {}
<span>&gt;&gt;</span><span>&gt;</span> <span>some_dict</span>[<span>5.0</span>] <span>=</span> <span>&#34;Ruby&#34;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>5.0</span> <span>in</span> <span>some_dict</span>
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> (<span>5</span> <span>in</span> <span>some_dict</span>) <span>and</span> (<span>5</span> <span>+</span> <span>0j</span> <span>in</span> <span>some_dict</span>)
<span>True</span></pre></div>
</li>
<li>
<p dir="auto">This applies when setting an item as well. So when you do <code>some_dict[5] = &#34;Python&#34;</code>, Python finds the existing item with equivalent key <code>5.0 -&gt; &#34;Ruby&#34;</code>, overwrites its value in place, and leaves the original key alone.</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; some_dict
{5.0: &#39;Ruby&#39;}
&gt;&gt;&gt; some_dict[5] = &#34;Python&#34;
&gt;&gt;&gt; some_dict
{5.0: &#39;Python&#39;}"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>some_dict</span>
{<span>5.0</span>: <span>&#39;Ruby&#39;</span>}
<span>&gt;&gt;</span><span>&gt;</span> <span>some_dict</span>[<span>5</span>] <span>=</span> <span>&#34;Python&#34;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>some_dict</span>
{<span>5.0</span>: <span>&#39;Python&#39;</span>}</pre></div>
</li>
<li>
<p dir="auto">So how can we update the key to <code>5</code> (instead of <code>5.0</code>)? We can&#39;t actually do this update in place, but what we can do is first delete the key (<code>del some_dict[5.0]</code>), and then set it (<code>some_dict[5]</code>) to get the integer <code>5</code> as the key instead of floating <code>5.0</code>, though this should be needed in rare cases.</p>
</li>
<li>
<p dir="auto">How did Python find <code>5</code> in a dictionary containing <code>5.0</code>? Python does this in constant time without having to scan through every item by using hash functions. When Python looks up a key <code>foo</code> in a dict, it first computes <code>hash(foo)</code> (which runs in constant-time). Since in Python it is required that objects that compare equal also have the same hash value (<a href="https://docs.python.org/3/reference/datamodel.html#object.__hash__" rel="nofollow">docs</a> here), <code>5</code>, <code>5.0</code>, and <code>5 + 0j</code> have the same hash value.</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; 5 == 5.0 == 5 + 0j
True
&gt;&gt;&gt; hash(5) == hash(5.0) == hash(5 + 0j)
True"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>5</span> <span>==</span> <span>5.0</span> <span>==</span> <span>5</span> <span>+</span> <span>0j</span>
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>hash</span>(<span>5</span>) <span>==</span> <span>hash</span>(<span>5.0</span>) <span>==</span> <span>hash</span>(<span>5</span> <span>+</span> <span>0j</span>)
<span>True</span></pre></div>
<p dir="auto"><strong>Note:</strong> The inverse is not necessarily true: Objects with equal hash values may themselves be unequal. (This causes what&#39;s known as a <a href="https://en.wikipedia.org/wiki/Collision_(computer_science)" rel="nofollow">hash collision</a>, and degrades the constant-time performance that hashing usually provides.)</p>
</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--deep-down-were-all-the-same" aria-hidden="true" href="#-deep-down-were-all-the-same"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Deep down, we&#39;re all the same.</h3>

<div data-snippet-clipboard-copy-content="class WTF:
  pass"><pre><span>class</span> <span>WTF</span>:
  <span>pass</span></pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; WTF() == WTF() # two different instances can&#39;t be equal
False
&gt;&gt;&gt; WTF() is WTF() # identities are also different
False
&gt;&gt;&gt; hash(WTF()) == hash(WTF()) # hashes _should_ be different as well
True
&gt;&gt;&gt; id(WTF()) == id(WTF())
True"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>WTF</span>() <span>==</span> <span>WTF</span>() <span># two different instances can&#39;t be equal</span>
<span>False</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>WTF</span>() <span>is</span> <span>WTF</span>() <span># identities are also different</span>
<span>False</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>hash</span>(<span>WTF</span>()) <span>==</span> <span>hash</span>(<span>WTF</span>()) <span># hashes _should_ be different as well</span>
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>id</span>(<span>WTF</span>()) <span>==</span> <span>id</span>(<span>WTF</span>())
<span>True</span></pre></div>
<h4 dir="auto"><a id="user-content--explanation-6" aria-hidden="true" href="#-explanation-6"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>
<p dir="auto">When <code>id</code> was called, Python created a <code>WTF</code> class object and passed it to the <code>id</code> function. The <code>id</code> function takes its <code>id</code> (its memory location), and throws away the object. The object is destroyed.</p>
</li>
<li>
<p dir="auto">When we do this twice in succession, Python allocates the same memory location to this second object as well. Since (in CPython) <code>id</code> uses the memory location as the object id, the id of the two objects is the same.</p>
</li>
<li>
<p dir="auto">So, the object&#39;s id is unique only for the lifetime of the object. After the object is destroyed, or before it is created, something else can have the same id.</p>
</li>
<li>
<p dir="auto">But why did the <code>is</code> operator evaluated to <code>False</code>? Let&#39;s see with this snippet.</p>
<div data-snippet-clipboard-copy-content="class WTF(object):
  def __init__(self): print(&#34;I&#34;)
  def __del__(self): print(&#34;D&#34;)"><pre><span>class</span> <span>WTF</span>(<span>object</span>):
  <span>def</span> <span>__init__</span>(<span>self</span>): <span>print</span>(<span>&#34;I&#34;</span>)
  <span>def</span> <span>__del__</span>(<span>self</span>): <span>print</span>(<span>&#34;D&#34;</span>)</pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; WTF() is WTF()
I
I
D
D
False
&gt;&gt;&gt; id(WTF()) == id(WTF())
I
D
I
D
True"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>WTF</span>() <span>is</span> <span>WTF</span>()
<span>I</span>
<span>I</span>
<span>D</span>
<span>D</span>
<span>False</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>id</span>(<span>WTF</span>()) <span>==</span> <span>id</span>(<span>WTF</span>())
<span>I</span>
<span>D</span>
<span>I</span>
<span>D</span>
<span>True</span></pre></div>
<p dir="auto">As you may observe, the order in which the objects are destroyed is what made all the difference here.</p>
</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--disorder-within-order-" aria-hidden="true" href="#-disorder-within-order-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Disorder within order *</h3>

<div data-snippet-clipboard-copy-content="from collections import OrderedDict

dictionary = dict()
dictionary[1] = &#39;a&#39;; dictionary[2] = &#39;b&#39;;

ordered_dict = OrderedDict()
ordered_dict[1] = &#39;a&#39;; ordered_dict[2] = &#39;b&#39;;

another_ordered_dict = OrderedDict()
another_ordered_dict[2] = &#39;b&#39;; another_ordered_dict[1] = &#39;a&#39;;

class DictWithHash(dict):
    &#34;&#34;&#34;
    A dict that also implements __hash__ magic.
    &#34;&#34;&#34;
    __hash__ = lambda self: 0

class OrderedDictWithHash(OrderedDict):
    &#34;&#34;&#34;
    An OrderedDict that also implements __hash__ magic.
    &#34;&#34;&#34;
    __hash__ = lambda self: 0"><pre><span>from</span> <span>collections</span> <span>import</span> <span>OrderedDict</span>

<span>dictionary</span> <span>=</span> <span>dict</span>()
<span>dictionary</span>[<span>1</span>] <span>=</span> <span>&#39;a&#39;</span>; <span>dictionary</span>[<span>2</span>] <span>=</span> <span>&#39;b&#39;</span>;

<span>ordered_dict</span> <span>=</span> <span>OrderedDict</span>()
<span>ordered_dict</span>[<span>1</span>] <span>=</span> <span>&#39;a&#39;</span>; <span>ordered_dict</span>[<span>2</span>] <span>=</span> <span>&#39;b&#39;</span>;

<span>another_ordered_dict</span> <span>=</span> <span>OrderedDict</span>()
<span>another_ordered_dict</span>[<span>2</span>] <span>=</span> <span>&#39;b&#39;</span>; <span>another_ordered_dict</span>[<span>1</span>] <span>=</span> <span>&#39;a&#39;</span>;

<span>class</span> <span>DictWithHash</span>(<span>dict</span>):
    <span>&#34;&#34;&#34;</span>
<span>    A dict that also implements __hash__ magic.</span>
<span>    &#34;&#34;&#34;</span>
    <span>__hash__</span> <span>=</span> <span>lambda</span> <span>self</span>: <span>0</span>

<span>class</span> <span>OrderedDictWithHash</span>(<span>OrderedDict</span>):
    <span>&#34;&#34;&#34;</span>
<span>    An OrderedDict that also implements __hash__ magic.</span>
<span>    &#34;&#34;&#34;</span>
    <span>__hash__</span> <span>=</span> <span>lambda</span> <span>self</span>: <span>0</span></pre></div>
<p dir="auto"><strong>Output</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; dictionary == ordered_dict # If a == b
True
&gt;&gt;&gt; dictionary == another_ordered_dict # and b == c
True
&gt;&gt;&gt; ordered_dict == another_ordered_dict # then why isn&#39;t c == a ??
False

# We all know that a set consists of only unique elements,
# let&#39;s try making a set of these dictionaries and see what happens...

&gt;&gt;&gt; len({dictionary, ordered_dict, another_ordered_dict})
Traceback (most recent call last):
  File &#34;&lt;stdin&gt;&#34;, line 1, in &lt;module&gt;
TypeError: unhashable type: &#39;dict&#39;

# Makes sense since dict don&#39;t have __hash__ implemented, let&#39;s use
# our wrapper classes.
&gt;&gt;&gt; dictionary = DictWithHash()
&gt;&gt;&gt; dictionary[1] = &#39;a&#39;; dictionary[2] = &#39;b&#39;;
&gt;&gt;&gt; ordered_dict = OrderedDictWithHash()
&gt;&gt;&gt; ordered_dict[1] = &#39;a&#39;; ordered_dict[2] = &#39;b&#39;;
&gt;&gt;&gt; another_ordered_dict = OrderedDictWithHash()
&gt;&gt;&gt; another_ordered_dict[2] = &#39;b&#39;; another_ordered_dict[1] = &#39;a&#39;;
&gt;&gt;&gt; len({dictionary, ordered_dict, another_ordered_dict})
1
&gt;&gt;&gt; len({ordered_dict, another_ordered_dict, dictionary}) # changing the order
2"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>dictionary</span> <span>==</span> <span>ordered_dict</span> <span># If a == b</span>
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>dictionary</span> <span>==</span> <span>another_ordered_dict</span> <span># and b == c</span>
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>ordered_dict</span> <span>==</span> <span>another_ordered_dict</span> <span># then why isn&#39;t c == a ??</span>
<span>False</span>

<span># We all know that a set consists of only unique elements,</span>
<span># let&#39;s try making a set of these dictionaries and see what happens...</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>len</span>({<span>dictionary</span>, <span>ordered_dict</span>, <span>another_ordered_dict</span>})
<span>Traceback</span> (<span>most</span> <span>recent</span> <span>call</span> <span>last</span>):
  <span>File</span> <span>&#34;&lt;stdin&gt;&#34;</span>, <span>line</span> <span>1</span>, <span>in</span> <span>&lt;</span><span>module</span><span>&gt;</span>
<span>TypeError</span>: <span>unhashable</span> <span>type</span>: <span>&#39;dict&#39;</span>

<span># Makes sense since dict don&#39;t have __hash__ implemented, let&#39;s use</span>
<span># our wrapper classes.</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>dictionary</span> <span>=</span> <span>DictWithHash</span>()
<span>&gt;&gt;</span><span>&gt;</span> <span>dictionary</span>[<span>1</span>] <span>=</span> <span>&#39;a&#39;</span>; <span>dictionary</span>[<span>2</span>] <span>=</span> <span>&#39;b&#39;</span>;
<span>&gt;&gt;</span><span>&gt;</span> <span>ordered_dict</span> <span>=</span> <span>OrderedDictWithHash</span>()
<span>&gt;&gt;</span><span>&gt;</span> <span>ordered_dict</span>[<span>1</span>] <span>=</span> <span>&#39;a&#39;</span>; <span>ordered_dict</span>[<span>2</span>] <span>=</span> <span>&#39;b&#39;</span>;
<span>&gt;&gt;</span><span>&gt;</span> <span>another_ordered_dict</span> <span>=</span> <span>OrderedDictWithHash</span>()
<span>&gt;&gt;</span><span>&gt;</span> <span>another_ordered_dict</span>[<span>2</span>] <span>=</span> <span>&#39;b&#39;</span>; <span>another_ordered_dict</span>[<span>1</span>] <span>=</span> <span>&#39;a&#39;</span>;
<span>&gt;&gt;</span><span>&gt;</span> <span>len</span>({<span>dictionary</span>, <span>ordered_dict</span>, <span>another_ordered_dict</span>})
<span>1</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>len</span>({<span>ordered_dict</span>, <span>another_ordered_dict</span>, <span>dictionary</span>}) <span># changing the order</span>
<span>2</span></pre></div>
<p dir="auto">What is going on here?</p>
<h4 dir="auto"><a id="user-content--explanation-7" aria-hidden="true" href="#-explanation-7"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>
<p dir="auto">The reason why intransitive equality didn&#39;t hold among <code>dictionary</code>, <code>ordered_dict</code> and <code>another_ordered_dict</code> is because of the way <code>__eq__</code> method is implemented in <code>OrderedDict</code> class. From the <a href="https://docs.python.org/3/library/collections.html#ordereddict-objects" rel="nofollow">docs</a></p>
<blockquote>
<p dir="auto">Equality tests between OrderedDict objects are order-sensitive and are implemented as <code>list(od1.items())==list(od2.items())</code>. Equality tests between <code>OrderedDict</code> objects and other Mapping objects are order-insensitive like regular dictionaries.</p>
</blockquote>
</li>
<li>
<p dir="auto">The reason for this equality in behavior is that it allows <code>OrderedDict</code> objects to be directly substituted anywhere a regular dictionary is used.</p>
</li>
<li>
<p dir="auto">Okay, so why did changing the order affect the length of the generated <code>set</code> object? The answer is the lack of intransitive equality only. Since sets are &#34;unordered&#34; collections of unique elements, the order in which elements are inserted shouldn&#39;t matter. But in this case, it does matter. Let&#39;s break it down a bit,</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; some_set = set()
&gt;&gt;&gt; some_set.add(dictionary) # these are the mapping objects from the snippets above
&gt;&gt;&gt; ordered_dict in some_set
True
&gt;&gt;&gt; some_set.add(ordered_dict)
&gt;&gt;&gt; len(some_set)
1
&gt;&gt;&gt; another_ordered_dict in some_set
True
&gt;&gt;&gt; some_set.add(another_ordered_dict)
&gt;&gt;&gt; len(some_set)
1

&gt;&gt;&gt; another_set = set()
&gt;&gt;&gt; another_set.add(ordered_dict)
&gt;&gt;&gt; another_ordered_dict in another_set
False
&gt;&gt;&gt; another_set.add(another_ordered_dict)
&gt;&gt;&gt; len(another_set)
2
&gt;&gt;&gt; dictionary in another_set
True
&gt;&gt;&gt; another_set.add(another_ordered_dict)
&gt;&gt;&gt; len(another_set)
2"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>some_set</span> <span>=</span> <span>set</span>()
<span>&gt;&gt;</span><span>&gt;</span> <span>some_set</span>.<span>add</span>(<span>dictionary</span>) <span># these are the mapping objects from the snippets above</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>ordered_dict</span> <span>in</span> <span>some_set</span>
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>some_set</span>.<span>add</span>(<span>ordered_dict</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>len</span>(<span>some_set</span>)
<span>1</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>another_ordered_dict</span> <span>in</span> <span>some_set</span>
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>some_set</span>.<span>add</span>(<span>another_ordered_dict</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>len</span>(<span>some_set</span>)
<span>1</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>another_set</span> <span>=</span> <span>set</span>()
<span>&gt;&gt;</span><span>&gt;</span> <span>another_set</span>.<span>add</span>(<span>ordered_dict</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>another_ordered_dict</span> <span>in</span> <span>another_set</span>
<span>False</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>another_set</span>.<span>add</span>(<span>another_ordered_dict</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>len</span>(<span>another_set</span>)
<span>2</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>dictionary</span> <span>in</span> <span>another_set</span>
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>another_set</span>.<span>add</span>(<span>another_ordered_dict</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>len</span>(<span>another_set</span>)
<span>2</span></pre></div>
<p dir="auto">So the inconsistency is due to <code>another_ordered_dict in another_set</code> being <code>False</code> because <code>ordered_dict</code> was already present in <code>another_set</code> and as observed before, <code>ordered_dict == another_ordered_dict</code> is <code>False</code>.</p>
</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--keep-trying-" aria-hidden="true" href="#-keep-trying-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Keep trying... *</h3>

<div data-snippet-clipboard-copy-content="def some_func():
    try:
        return &#39;from_try&#39;
    finally:
        return &#39;from_finally&#39;

def another_func(): 
    for _ in range(3):
        try:
            continue
        finally:
            print(&#34;Finally!&#34;)

def one_more_func(): # A gotcha!
    try:
        for i in range(3):
            try:
                1 / i
            except ZeroDivisionError:
                # Let&#39;s throw it here and handle it outside for loop
                raise ZeroDivisionError(&#34;A trivial divide by zero error&#34;)
            finally:
                print(&#34;Iteration&#34;, i)
                break
    except ZeroDivisionError as e:
        print(&#34;Zero division error occurred&#34;, e)"><pre><span>def</span> <span>some_func</span>():
    <span>try</span>:
        <span>return</span> <span>&#39;from_try&#39;</span>
    <span>finally</span>:
        <span>return</span> <span>&#39;from_finally&#39;</span>

<span>def</span> <span>another_func</span>(): 
    <span>for</span> <span>_</span> <span>in</span> <span>range</span>(<span>3</span>):
        <span>try</span>:
            <span>continue</span>
        <span>finally</span>:
            <span>print</span>(<span>&#34;Finally!&#34;</span>)

<span>def</span> <span>one_more_func</span>(): <span># A gotcha!</span>
    <span>try</span>:
        <span>for</span> <span>i</span> <span>in</span> <span>range</span>(<span>3</span>):
            <span>try</span>:
                <span>1</span> <span>/</span> <span>i</span>
            <span>except</span> <span>ZeroDivisionError</span>:
                <span># Let&#39;s throw it here and handle it outside for loop</span>
                <span>raise</span> <span>ZeroDivisionError</span>(<span>&#34;A trivial divide by zero error&#34;</span>)
            <span>finally</span>:
                <span>print</span>(<span>&#34;Iteration&#34;</span>, <span>i</span>)
                <span>break</span>
    <span>except</span> <span>ZeroDivisionError</span> <span>as</span> <span>e</span>:
        <span>print</span>(<span>&#34;Zero division error occurred&#34;</span>, <span>e</span>)</pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; some_func()
&#39;from_finally&#39;

&gt;&gt;&gt; another_func()
Finally!
Finally!
Finally!

&gt;&gt;&gt; 1 / 0
Traceback (most recent call last):
  File &#34;&lt;stdin&gt;&#34;, line 1, in &lt;module&gt;
ZeroDivisionError: division by zero

&gt;&gt;&gt; one_more_func()
Iteration 0
"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>some_func</span>()
<span>&#39;from_finally&#39;</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>another_func</span>()
<span>Finally</span>!
<span>Finally</span>!
<span>Finally</span>!

<span>&gt;&gt;</span><span>&gt;</span> <span>1</span> <span>/</span> <span>0</span>
<span>Traceback</span> (<span>most</span> <span>recent</span> <span>call</span> <span>last</span>):
  <span>File</span> <span>&#34;&lt;stdin&gt;&#34;</span>, <span>line</span> <span>1</span>, <span>in</span> <span>&lt;</span><span>module</span><span>&gt;</span>
<span>ZeroDivisionError</span>: <span>division</span> <span>by</span> <span>zero</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>one_more_func</span>()
<span>Iteration</span> <span>0</span></pre></div>
<h4 dir="auto"><a id="user-content--explanation-8" aria-hidden="true" href="#-explanation-8"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>When a <code>return</code>, <code>break</code> or <code>continue</code> statement is executed in the <code>try</code> suite of a &#34;try…finally&#34; statement, the <code>finally</code> clause is also executed on the way out.</li>
<li>The return value of a function is determined by the last <code>return</code> statement executed. Since the <code>finally</code> clause always executes, a <code>return</code> statement executed in the <code>finally</code> clause will always be the last one executed.</li>
<li>The caveat here is, if the finally clause executes a <code>return</code> or <code>break</code> statement, the temporarily saved exception is discarded.</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--for-what" aria-hidden="true" href="#-for-what"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> For what?</h3>

<div data-snippet-clipboard-copy-content="some_string = &#34;wtf&#34;
some_dict = {}
for i, some_dict[i] in enumerate(some_string):
    i = 10"><pre><span>some_string</span> <span>=</span> <span>&#34;wtf&#34;</span>
<span>some_dict</span> <span>=</span> {}
<span>for</span> <span>i</span>, <span>some_dict</span>[<span>i</span>] <span>in</span> <span>enumerate</span>(<span>some_string</span>):
    <span>i</span> <span>=</span> <span>10</span></pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; some_dict # An indexed dict appears.
{0: &#39;w&#39;, 1: &#39;t&#39;, 2: &#39;f&#39;}"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>some_dict</span> <span># An indexed dict appears.</span>
{<span>0</span>: <span>&#39;w&#39;</span>, <span>1</span>: <span>&#39;t&#39;</span>, <span>2</span>: <span>&#39;f&#39;</span>}</pre></div>
<h4 dir="auto"><a id="user-content--explanation-9" aria-hidden="true" href="#-explanation-9"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>
<p dir="auto">A <code>for</code> statement is defined in the <a href="https://docs.python.org/3/reference/grammar.html" rel="nofollow">Python grammar</a> as:</p>
<div data-snippet-clipboard-copy-content="for_stmt: &#39;for&#39; exprlist &#39;in&#39; testlist &#39;:&#39; suite [&#39;else&#39; &#39;:&#39; suite]"><pre><code>for_stmt: &#39;for&#39; exprlist &#39;in&#39; testlist &#39;:&#39; suite [&#39;else&#39; &#39;:&#39; suite]
</code></pre></div>
<p dir="auto">Where <code>exprlist</code> is the assignment target. This means that the equivalent of <code>{exprlist} = {next_value}</code> is <strong>executed for each item</strong> in the iterable.
An interesting example that illustrates this:</p>
<div data-snippet-clipboard-copy-content="for i in range(4):
    print(i)
    i = 10"><pre><span>for</span> <span>i</span> <span>in</span> <span>range</span>(<span>4</span>):
    <span>print</span>(<span>i</span>)
    <span>i</span> <span>=</span> <span>10</span></pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="0
1
2
3"><pre><code>0
1
2
3
</code></pre></div>
<p dir="auto">Did you expect the loop to run just once?</p>
<p dir="auto"><strong><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</strong></p>
<ul dir="auto">
<li>The assignment statement <code>i = 10</code> never affects the iterations of the loop because of the way for loops work in Python. Before the beginning of every iteration, the next item provided by the iterator (<code>range(4)</code> in this case) is unpacked and assigned the target list variables (<code>i</code> in this case).</li>
</ul>
</li>
<li>
<p dir="auto">The <code>enumerate(some_string)</code> function yields a new value <code>i</code> (a counter going up) and a character from the <code>some_string</code> in each iteration. It then sets the (just assigned) <code>i</code> key of the dictionary <code>some_dict</code> to that character. The unrolling of the loop can be simplified as:</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; i, some_dict[i] = (0, &#39;w&#39;)
&gt;&gt;&gt; i, some_dict[i] = (1, &#39;t&#39;)
&gt;&gt;&gt; i, some_dict[i] = (2, &#39;f&#39;)
&gt;&gt;&gt; some_dict"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>i</span>, <span>some_dict</span>[<span>i</span>] <span>=</span> (<span>0</span>, <span>&#39;w&#39;</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>i</span>, <span>some_dict</span>[<span>i</span>] <span>=</span> (<span>1</span>, <span>&#39;t&#39;</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>i</span>, <span>some_dict</span>[<span>i</span>] <span>=</span> (<span>2</span>, <span>&#39;f&#39;</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>some_dict</span></pre></div>
</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--evaluation-time-discrepancy" aria-hidden="true" href="#-evaluation-time-discrepancy"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Evaluation time discrepancy</h3>

<p dir="auto">1.</p>
<div data-snippet-clipboard-copy-content="array = [1, 8, 15]
# A typical generator expression
gen = (x for x in array if array.count(x) &gt; 0)
array = [2, 8, 22]"><pre><span>array</span> <span>=</span> [<span>1</span>, <span>8</span>, <span>15</span>]
<span># A typical generator expression</span>
<span>gen</span> <span>=</span> (<span>x</span> <span>for</span> <span>x</span> <span>in</span> <span>array</span> <span>if</span> <span>array</span>.<span>count</span>(<span>x</span>) <span>&gt;</span> <span>0</span>)
<span>array</span> <span>=</span> [<span>2</span>, <span>8</span>, <span>22</span>]</pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; print(list(gen)) # Where did the other values go?
[8]"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>print</span>(<span>list</span>(<span>gen</span>)) <span># Where did the other values go?</span>
[<span>8</span>]</pre></div>
<p dir="auto">2.</p>
<div data-snippet-clipboard-copy-content="array_1 = [1,2,3,4]
gen_1 = (x for x in array_1)
array_1 = [1,2,3,4,5]

array_2 = [1,2,3,4]
gen_2 = (x for x in array_2)
array_2[:] = [1,2,3,4,5]"><pre><span>array_1</span> <span>=</span> [<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span>]
<span>gen_1</span> <span>=</span> (<span>x</span> <span>for</span> <span>x</span> <span>in</span> <span>array_1</span>)
<span>array_1</span> <span>=</span> [<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span>,<span>5</span>]

<span>array_2</span> <span>=</span> [<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span>]
<span>gen_2</span> <span>=</span> (<span>x</span> <span>for</span> <span>x</span> <span>in</span> <span>array_2</span>)
<span>array_2</span>[:] <span>=</span> [<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span>,<span>5</span>]</pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; print(list(gen_1))
[1, 2, 3, 4]

&gt;&gt;&gt; print(list(gen_2))
[1, 2, 3, 4, 5]"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>print</span>(<span>list</span>(<span>gen_1</span>))
[<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>]

<span>&gt;&gt;</span><span>&gt;</span> <span>print</span>(<span>list</span>(<span>gen_2</span>))
[<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>, <span>5</span>]</pre></div>
<p dir="auto">3.</p>
<div data-snippet-clipboard-copy-content="array_3 = [1, 2, 3]
array_4 = [10, 20, 30]
gen = (i + j for i in array_3 for j in array_4)

array_3 = [4, 5, 6]
array_4 = [400, 500, 600]"><pre><span>array_3</span> <span>=</span> [<span>1</span>, <span>2</span>, <span>3</span>]
<span>array_4</span> <span>=</span> [<span>10</span>, <span>20</span>, <span>30</span>]
<span>gen</span> <span>=</span> (<span>i</span> <span>+</span> <span>j</span> <span>for</span> <span>i</span> <span>in</span> <span>array_3</span> <span>for</span> <span>j</span> <span>in</span> <span>array_4</span>)

<span>array_3</span> <span>=</span> [<span>4</span>, <span>5</span>, <span>6</span>]
<span>array_4</span> <span>=</span> [<span>400</span>, <span>500</span>, <span>600</span>]</pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; print(list(gen))
[401, 501, 601, 402, 502, 602, 403, 503, 603]"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>print</span>(<span>list</span>(<span>gen</span>))
[<span>401</span>, <span>501</span>, <span>601</span>, <span>402</span>, <span>502</span>, <span>602</span>, <span>403</span>, <span>503</span>, <span>603</span>]</pre></div>
<h4 dir="auto"><a id="user-content--explanation-10" aria-hidden="true" href="#-explanation-10"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation</h4>
<ul dir="auto">
<li>
<p dir="auto">In a <a href="https://wiki.python.org/moin/Generators" rel="nofollow">generator</a> expression, the <code>in</code> clause is evaluated at declaration time, but the conditional clause is evaluated at runtime.</p>
</li>
<li>
<p dir="auto">So before runtime, <code>array</code> is re-assigned to the list <code>[2, 8, 22]</code>, and since out of <code>1</code>, <code>8</code> and <code>15</code>, only the count of <code>8</code> is greater than <code>0</code>, the generator only yields <code>8</code>.</p>
</li>
<li>
<p dir="auto">The differences in the output of <code>g1</code> and <code>g2</code> in the second part is due the way variables <code>array_1</code> and <code>array_2</code> are re-assigned values.</p>
</li>
<li>
<p dir="auto">In the first case, <code>array_1</code> is bound to the new object <code>[1,2,3,4,5]</code> and since the <code>in</code> clause is evaluated at the declaration time it still refers to the old object <code>[1,2,3,4]</code> (which is not destroyed).</p>
</li>
<li>
<p dir="auto">In the second case, the slice assignment to <code>array_2</code> updates the same old object <code>[1,2,3,4]</code> to <code>[1,2,3,4,5]</code>. Hence both the <code>g2</code> and <code>array_2</code> still have reference to the same object (which has now been updated to <code>[1,2,3,4,5]</code>).</p>
</li>
<li>
<p dir="auto">Okay, going by the logic discussed so far, shouldn&#39;t be the value of <code>list(gen)</code> in the third snippet be <code>[11, 21, 31, 12, 22, 32, 13, 23, 33]</code>? (because <code>array_3</code> and <code>array_4</code> are going to behave just like <code>array_1</code>). The reason why (only) <code>array_4</code> values got updated is explained in <a href="https://www.python.org/dev/peps/pep-0289/#the-details" rel="nofollow">PEP-289</a></p>
<blockquote>
<p dir="auto">Only the outermost for-expression is evaluated immediately, the other expressions are deferred until the generator is run.</p>
</blockquote>
</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--is-not--is-not-is-not-" aria-hidden="true" href="#-is-not--is-not-is-not-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> <code>is not ...</code> is not <code>is (not ...)</code></h3>

<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; &#39;something&#39; is not None
True
&gt;&gt;&gt; &#39;something&#39; is (not None)
False"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>&#39;something&#39;</span> <span>is</span> <span>not</span> <span>None</span>
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>&#39;something&#39;</span> <span>is</span> (<span>not</span> <span>None</span>)
<span>False</span></pre></div>
<h4 dir="auto"><a id="user-content--explanation-11" aria-hidden="true" href="#-explanation-11"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation</h4>
<ul dir="auto">
<li><code>is not</code> is a single binary operator, and has behavior different than using <code>is</code> and <code>not</code> separated.</li>
<li><code>is not</code> evaluates to <code>False</code> if the variables on either side of the operator point to the same object and <code>True</code> otherwise.</li>
<li>In the example, <code>(not None)</code> evaluates to <code>True</code> since the value <code>None</code> is <code>False</code> in a boolean context, so the expression becomes <code>&#39;something&#39; is True</code>.</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--a-tic-tac-toe-where-x-wins-in-the-first-attempt" aria-hidden="true" href="#-a-tic-tac-toe-where-x-wins-in-the-first-attempt"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> A tic-tac-toe where X wins in the first attempt!</h3>

<div data-snippet-clipboard-copy-content="# Let&#39;s initialize a row
row = [&#34;&#34;] * 3 #row i[&#39;&#39;, &#39;&#39;, &#39;&#39;]
# Let&#39;s make a board
board = [row] * 3"><pre><span># Let&#39;s initialize a row</span>
<span>row</span> <span>=</span> [<span>&#34;&#34;</span>] <span>*</span> <span>3</span> <span>#row i[&#39;&#39;, &#39;&#39;, &#39;&#39;]</span>
<span># Let&#39;s make a board</span>
<span>board</span> <span>=</span> [<span>row</span>] <span>*</span> <span>3</span></pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; board
[[&#39;&#39;, &#39;&#39;, &#39;&#39;], [&#39;&#39;, &#39;&#39;, &#39;&#39;], [&#39;&#39;, &#39;&#39;, &#39;&#39;]]
&gt;&gt;&gt; board[0]
[&#39;&#39;, &#39;&#39;, &#39;&#39;]
&gt;&gt;&gt; board[0][0]
&#39;&#39;
&gt;&gt;&gt; board[0][0] = &#34;X&#34;
&gt;&gt;&gt; board
[[&#39;X&#39;, &#39;&#39;, &#39;&#39;], [&#39;X&#39;, &#39;&#39;, &#39;&#39;], [&#39;X&#39;, &#39;&#39;, &#39;&#39;]]"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>board</span>
[[<span>&#39;&#39;</span>, <span>&#39;&#39;</span>, <span>&#39;&#39;</span>], [<span>&#39;&#39;</span>, <span>&#39;&#39;</span>, <span>&#39;&#39;</span>], [<span>&#39;&#39;</span>, <span>&#39;&#39;</span>, <span>&#39;&#39;</span>]]
<span>&gt;&gt;</span><span>&gt;</span> <span>board</span>[<span>0</span>]
[<span>&#39;&#39;</span>, <span>&#39;&#39;</span>, <span>&#39;&#39;</span>]
<span>&gt;&gt;</span><span>&gt;</span> <span>board</span>[<span>0</span>][<span>0</span>]
<span>&#39;&#39;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>board</span>[<span>0</span>][<span>0</span>] <span>=</span> <span>&#34;X&#34;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>board</span>
[[<span>&#39;X&#39;</span>, <span>&#39;&#39;</span>, <span>&#39;&#39;</span>], [<span>&#39;X&#39;</span>, <span>&#39;&#39;</span>, <span>&#39;&#39;</span>], [<span>&#39;X&#39;</span>, <span>&#39;&#39;</span>, <span>&#39;&#39;</span>]]</pre></div>
<p dir="auto">We didn&#39;t assign three <code>&#34;X&#34;</code>s, did we?</p>
<h4 dir="auto"><a id="user-content--explanation-12" aria-hidden="true" href="#-explanation-12"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<p dir="auto">When we initialize <code>row</code> variable, this visualization explains what happens in the memory</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://commoncog.com/satwikkansal/wtfpython/blob/master/images/tic-tac-toe/after_row_initialized.png"><img src="https://commoncog.com/satwikkansal/wtfpython/raw/master/images/tic-tac-toe/after_row_initialized.png" alt="image"/></a></p>
<p dir="auto">And when the <code>board</code> is initialized by multiplying the <code>row</code>, this is what happens inside the memory (each of the elements <code>board[0]</code>, <code>board[1]</code> and <code>board[2]</code> is a reference to the same list referred by <code>row</code>)</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://commoncog.com/satwikkansal/wtfpython/blob/master/images/tic-tac-toe/after_board_initialized.png"><img src="https://commoncog.com/satwikkansal/wtfpython/raw/master/images/tic-tac-toe/after_board_initialized.png" alt="image"/></a></p>
<p dir="auto">We can avoid this scenario here by not using <code>row</code> variable to generate <code>board</code>. (Asked in <a href="https://github.com/satwikkansal/wtfpython/issues/68" data-hovercard-type="issue" data-hovercard-url="/satwikkansal/wtfpython/issues/68/hovercard">this</a> issue).</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; board = [[&#39;&#39;]*3 for _ in range(3)]
&gt;&gt;&gt; board[0][0] = &#34;X&#34;
&gt;&gt;&gt; board
[[&#39;X&#39;, &#39;&#39;, &#39;&#39;], [&#39;&#39;, &#39;&#39;, &#39;&#39;], [&#39;&#39;, &#39;&#39;, &#39;&#39;]]"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>board</span> <span>=</span> [[<span>&#39;&#39;</span>]<span>*</span><span>3</span> <span>for</span> <span>_</span> <span>in</span> <span>range</span>(<span>3</span>)]
<span>&gt;&gt;</span><span>&gt;</span> <span>board</span>[<span>0</span>][<span>0</span>] <span>=</span> <span>&#34;X&#34;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>board</span>
[[<span>&#39;X&#39;</span>, <span>&#39;&#39;</span>, <span>&#39;&#39;</span>], [<span>&#39;&#39;</span>, <span>&#39;&#39;</span>, <span>&#39;&#39;</span>], [<span>&#39;&#39;</span>, <span>&#39;&#39;</span>, <span>&#39;&#39;</span>]]</pre></div>
<hr/>
<h3 dir="auto"><a id="user-content--schrödingers-variable-" aria-hidden="true" href="#-schrödingers-variable-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Schrödinger&#39;s variable *</h3>

<div data-snippet-clipboard-copy-content="funcs = []
results = []
for x in range(7):
    def some_func():
        return x
    funcs.append(some_func)
    results.append(some_func())  # note the function call here

funcs_results = [func() for func in funcs]"><pre><span>funcs</span> <span>=</span> []
<span>results</span> <span>=</span> []
<span>for</span> <span>x</span> <span>in</span> <span>range</span>(<span>7</span>):
    <span>def</span> <span>some_func</span>():
        <span>return</span> <span>x</span>
    <span>funcs</span>.<span>append</span>(<span>some_func</span>)
    <span>results</span>.<span>append</span>(<span>some_func</span>())  <span># note the function call here</span>

<span>funcs_results</span> <span>=</span> [<span>func</span>() <span>for</span> <span>func</span> <span>in</span> <span>funcs</span>]</pre></div>
<p dir="auto"><strong>Output (Python version):</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; results
[0, 1, 2, 3, 4, 5, 6]
&gt;&gt;&gt; funcs_results
[6, 6, 6, 6, 6, 6, 6]"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>results</span>
[<span>0</span>, <span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>, <span>5</span>, <span>6</span>]
<span>&gt;&gt;</span><span>&gt;</span> <span>funcs_results</span>
[<span>6</span>, <span>6</span>, <span>6</span>, <span>6</span>, <span>6</span>, <span>6</span>, <span>6</span>]</pre></div>
<p dir="auto">The values of <code>x</code> were different in every iteration prior to appending <code>some_func</code> to <code>funcs</code>, but all the functions return 6 when they&#39;re evaluated after the loop completes.</p>
<ol start="2" dir="auto">
<li></li>
</ol>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; powers_of_x = [lambda x: x**i for i in range(10)]
&gt;&gt;&gt; [f(2) for f in powers_of_x]
[512, 512, 512, 512, 512, 512, 512, 512, 512, 512]"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>powers_of_x</span> <span>=</span> [<span>lambda</span> <span>x</span>: <span>x</span><span>**</span><span>i</span> <span>for</span> <span>i</span> <span>in</span> <span>range</span>(<span>10</span>)]
<span>&gt;&gt;</span><span>&gt;</span> [<span>f</span>(<span>2</span>) <span>for</span> <span>f</span> <span>in</span> <span>powers_of_x</span>]
[<span>512</span>, <span>512</span>, <span>512</span>, <span>512</span>, <span>512</span>, <span>512</span>, <span>512</span>, <span>512</span>, <span>512</span>, <span>512</span>]</pre></div>
<h4 dir="auto"><a id="user-content--explanation-13" aria-hidden="true" href="#-explanation-13"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>When defining a function inside a loop that uses the loop variable in its body, the loop function&#39;s closure is bound to the <em>variable</em>, not its <em>value</em>. The function looks up <code>x</code> in the surrounding context, rather than using the value of <code>x</code> at the time the function is created. So all of the functions use the latest value assigned to the variable for computation. We can see that it&#39;s using the <code>x</code> from the surrounding context (i.e. <em>not</em> a local variable) with:</li>
</ul>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; import inspect
&gt;&gt;&gt; inspect.getclosurevars(funcs[0])
ClosureVars(nonlocals={}, globals={&#39;x&#39;: 6}, builtins={}, unbound=set())"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>import</span> <span>inspect</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>inspect</span>.<span>getclosurevars</span>(<span>funcs</span>[<span>0</span>])
<span>ClosureVars</span>(<span>nonlocals</span><span>=</span>{}, <span>globals</span><span>=</span>{<span>&#39;x&#39;</span>: <span>6</span>}, <span>builtins</span><span>=</span>{}, <span>unbound</span><span>=</span><span>set</span>())</pre></div>
<p dir="auto">Since <code>x</code> is a global value, we can change the value that the <code>funcs</code> will lookup and return by updating <code>x</code>:</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; x = 42
&gt;&gt;&gt; [func() for func in funcs]
[42, 42, 42, 42, 42, 42, 42]"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>x</span> <span>=</span> <span>42</span>
<span>&gt;&gt;</span><span>&gt;</span> [<span>func</span>() <span>for</span> <span>func</span> <span>in</span> <span>funcs</span>]
[<span>42</span>, <span>42</span>, <span>42</span>, <span>42</span>, <span>42</span>, <span>42</span>, <span>42</span>]</pre></div>
<ul dir="auto">
<li>To get the desired behavior you can pass in the loop variable as a named variable to the function. <strong>Why does this work?</strong> Because this will define the variable <em>inside</em> the function&#39;s scope. It will no longer go to the surrounding (global) scope to look up the variables value but will create a local variable that stores the value of <code>x</code> at that point in time.</li>
</ul>
<div data-snippet-clipboard-copy-content="funcs = []
for x in range(7):
    def some_func(x=x):
        return x
    funcs.append(some_func)"><pre><span>funcs</span> <span>=</span> []
<span>for</span> <span>x</span> <span>in</span> <span>range</span>(<span>7</span>):
    <span>def</span> <span>some_func</span>(<span>x</span><span>=</span><span>x</span>):
        <span>return</span> <span>x</span>
    <span>funcs</span>.<span>append</span>(<span>some_func</span>)</pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; funcs_results = [func() for func in funcs]
&gt;&gt;&gt; funcs_results
[0, 1, 2, 3, 4, 5, 6]"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>funcs_results</span> <span>=</span> [<span>func</span>() <span>for</span> <span>func</span> <span>in</span> <span>funcs</span>]
<span>&gt;&gt;</span><span>&gt;</span> <span>funcs_results</span>
[<span>0</span>, <span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>, <span>5</span>, <span>6</span>]</pre></div>
<p dir="auto">It is not longer using the <code>x</code> in the global scope:</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; inspect.getclosurevars(funcs[0])
ClosureVars(nonlocals={}, globals={}, builtins={}, unbound=set())"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>inspect</span>.<span>getclosurevars</span>(<span>funcs</span>[<span>0</span>])
<span>ClosureVars</span>(<span>nonlocals</span><span>=</span>{}, <span>globals</span><span>=</span>{}, <span>builtins</span><span>=</span>{}, <span>unbound</span><span>=</span><span>set</span>())</pre></div>
<hr/>
<h3 dir="auto"><a id="user-content--the-chicken-egg-problem-" aria-hidden="true" href="#-the-chicken-egg-problem-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> The chicken-egg problem *</h3>

<p dir="auto">1.</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; isinstance(3, int)
True
&gt;&gt;&gt; isinstance(type, object)
True
&gt;&gt;&gt; isinstance(object, type)
True"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>isinstance</span>(<span>3</span>, <span>int</span>)
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>isinstance</span>(<span>type</span>, <span>object</span>)
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>isinstance</span>(<span>object</span>, <span>type</span>)
<span>True</span></pre></div>
<p dir="auto">So which is the &#34;ultimate&#34; base class? There&#39;s more to the confusion by the way,</p>
<p dir="auto">2.</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; class A: pass
&gt;&gt;&gt; isinstance(A, A)
False
&gt;&gt;&gt; isinstance(type, type)
True
&gt;&gt;&gt; isinstance(object, object)
True"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>class</span> <span>A</span>: <span>pass</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>isinstance</span>(<span>A</span>, <span>A</span>)
<span>False</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>isinstance</span>(<span>type</span>, <span>type</span>)
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>isinstance</span>(<span>object</span>, <span>object</span>)
<span>True</span></pre></div>
<p dir="auto">3.</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; issubclass(int, object)
True
&gt;&gt;&gt; issubclass(type, object)
True
&gt;&gt;&gt; issubclass(object, type)
False"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>issubclass</span>(<span>int</span>, <span>object</span>)
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>issubclass</span>(<span>type</span>, <span>object</span>)
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>issubclass</span>(<span>object</span>, <span>type</span>)
<span>False</span></pre></div>
<h4 dir="auto"><a id="user-content--explanation-14" aria-hidden="true" href="#-explanation-14"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation</h4>
<ul dir="auto">
<li><code>type</code> is a <a href="https://realpython.com/python-metaclasses/" rel="nofollow">metaclass</a> in Python.</li>
<li><strong>Everything</strong> is an <code>object</code> in Python, which includes classes as well as their objects (instances).</li>
<li>class <code>type</code> is the metaclass of class <code>object</code>, and every class (including <code>type</code>) has inherited directly or indirectly from <code>object</code>.</li>
<li>There is no real base class among <code>object</code> and <code>type</code>. The confusion in the above snippets is arising because we&#39;re thinking about these relationships (<code>issubclass</code> and <code>isinstance</code>) in terms of Python classes. The relationship between <code>object</code> and <code>type</code> can&#39;t be reproduced in pure python. To be more precise the following relationships can&#39;t be reproduced in pure Python,
<ul dir="auto">
<li>class A is an instance of class B, and class B is an instance of class A.</li>
<li>class A is an instance of itself.</li>
</ul>
</li>
<li>These relationships between <code>object</code> and <code>type</code> (both being instances of each other as well as themselves) exist in Python because of &#34;cheating&#34; at the implementation level.</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--subclass-relationships" aria-hidden="true" href="#-subclass-relationships"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Subclass relationships</h3>

<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; from collections import Hashable
&gt;&gt;&gt; issubclass(list, object)
True
&gt;&gt;&gt; issubclass(object, Hashable)
True
&gt;&gt;&gt; issubclass(list, Hashable)
False"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>from</span> <span>collections</span> <span>import</span> <span>Hashable</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>issubclass</span>(<span>list</span>, <span>object</span>)
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>issubclass</span>(<span>object</span>, <span>Hashable</span>)
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>issubclass</span>(<span>list</span>, <span>Hashable</span>)
<span>False</span></pre></div>
<p dir="auto">The Subclass relationships were expected to be transitive, right? (i.e., if <code>A</code> is a subclass of <code>B</code>, and <code>B</code> is a subclass of <code>C</code>, the <code>A</code> <em>should</em> a subclass of <code>C</code>)</p>
<h4 dir="auto"><a id="user-content--explanation-15" aria-hidden="true" href="#-explanation-15"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>Subclass relationships are not necessarily transitive in Python. Anyone is allowed to define their own, arbitrary <code>__subclasscheck__</code> in a metaclass.</li>
<li>When <code>issubclass(cls, Hashable)</code> is called, it simply looks for non-Falsey &#34;<code>__hash__</code>&#34; method in <code>cls</code> or anything it inherits from.</li>
<li>Since <code>object</code> is hashable, but <code>list</code> is non-hashable, it breaks the transitivity relation.</li>
<li>More detailed explanation can be found <a href="https://www.naftaliharris.com/blog/python-subclass-intransitivity/" rel="nofollow">here</a>.</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--methods-equality-and-identity" aria-hidden="true" href="#-methods-equality-and-identity"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Methods equality and identity</h3>

<ol dir="auto">
<li></li>
</ol>
<div data-snippet-clipboard-copy-content="class SomeClass:
    def method(self):
        pass

    @classmethod
    def classm(cls):
        pass

    @staticmethod
    def staticm():
        pass"><pre><span>class</span> <span>SomeClass</span>:
    <span>def</span> <span>method</span>(<span>self</span>):
        <span>pass</span>

    <span>@<span>classmethod</span></span>
    <span>def</span> <span>classm</span>(<span>cls</span>):
        <span>pass</span>

    <span>@<span>staticmethod</span></span>
    <span>def</span> <span>staticm</span>():
        <span>pass</span></pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; print(SomeClass.method is SomeClass.method)
True
&gt;&gt;&gt; print(SomeClass.classm is SomeClass.classm)
False
&gt;&gt;&gt; print(SomeClass.classm == SomeClass.classm)
True
&gt;&gt;&gt; print(SomeClass.staticm is SomeClass.staticm)
True"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>print</span>(<span>SomeClass</span>.<span>method</span> <span>is</span> <span>SomeClass</span>.<span>method</span>)
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>print</span>(<span>SomeClass</span>.<span>classm</span> <span>is</span> <span>SomeClass</span>.<span>classm</span>)
<span>False</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>print</span>(<span>SomeClass</span>.<span>classm</span> <span>==</span> <span>SomeClass</span>.<span>classm</span>)
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>print</span>(<span>SomeClass</span>.<span>staticm</span> <span>is</span> <span>SomeClass</span>.<span>staticm</span>)
<span>True</span></pre></div>
<p dir="auto">Accessing <code>classm</code> twice, we get an equal object, but not the <em>same</em> one? Let&#39;s see what happens
with instances of <code>SomeClass</code>:</p>
<ol start="2" dir="auto">
<li></li>
</ol>
<div data-snippet-clipboard-copy-content="o1 = SomeClass()
o2 = SomeClass()"><pre><span>o1</span> <span>=</span> <span>SomeClass</span>()
<span>o2</span> <span>=</span> <span>SomeClass</span>()</pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; print(o1.method == o2.method)
False
&gt;&gt;&gt; print(o1.method == o1.method)
True
&gt;&gt;&gt; print(o1.method is o1.method)
False
&gt;&gt;&gt; print(o1.classm is o1.classm)
False
&gt;&gt;&gt; print(o1.classm == o1.classm == o2.classm == SomeClass.classm)
True
&gt;&gt;&gt; print(o1.staticm is o1.staticm is o2.staticm is SomeClass.staticm)
True"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>print</span>(<span>o1</span>.<span>method</span> <span>==</span> <span>o2</span>.<span>method</span>)
<span>False</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>print</span>(<span>o1</span>.<span>method</span> <span>==</span> <span>o1</span>.<span>method</span>)
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>print</span>(<span>o1</span>.<span>method</span> <span>is</span> <span>o1</span>.<span>method</span>)
<span>False</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>print</span>(<span>o1</span>.<span>classm</span> <span>is</span> <span>o1</span>.<span>classm</span>)
<span>False</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>print</span>(<span>o1</span>.<span>classm</span> <span>==</span> <span>o1</span>.<span>classm</span> <span>==</span> <span>o2</span>.<span>classm</span> <span>==</span> <span>SomeClass</span>.<span>classm</span>)
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>print</span>(<span>o1</span>.<span>staticm</span> <span>is</span> <span>o1</span>.<span>staticm</span> <span>is</span> <span>o2</span>.<span>staticm</span> <span>is</span> <span>SomeClass</span>.<span>staticm</span>)
<span>True</span></pre></div>
<p dir="auto">Accessing<code> classm</code> or <code>method</code> twice, creates equal but not <em>same</em> objects for the same instance of <code>SomeClass</code>.</p>
<h4 dir="auto"><a id="user-content--explanation-16" aria-hidden="true" href="#-explanation-16"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation</h4>
<ul dir="auto">
<li>Functions are <a href="https://docs.python.org/3/howto/descriptor.html" rel="nofollow">descriptors</a>. Whenever a function is accessed as an
attribute, the descriptor is invoked, creating a method object which &#34;binds&#34; the function with the object owning the
attribute. If called, the method calls the function, implicitly passing the bound object as the first argument
(this is how we get <code>self</code> as the first argument, despite not passing it explicitly).</li>
</ul>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; o1.method
&lt;bound method SomeClass.method of &lt;__main__.SomeClass object at ...&gt;&gt;"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>o1</span>.<span>method</span>
<span>&lt;</span><span>bound</span> <span>method</span> <span>SomeClass</span>.<span>method</span> <span>of</span> <span>&lt;</span><span>__main__</span>.<span>SomeClass</span> <span>object</span> <span>at</span> ...<span>&gt;&gt;</span></pre></div>
<ul dir="auto">
<li>Accessing the attribute multiple times creates a method object every time! Therefore <code>o1.method is o1.method</code> is
never truthy. Accessing functions as class attributes (as opposed to instance) does not create methods, however; so
<code>SomeClass.method is SomeClass.method</code> is truthy.</li>
</ul>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; SomeClass.method
&lt;function SomeClass.method at ...&gt;"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>SomeClass</span>.<span>method</span>
<span>&lt;</span><span>function</span> <span>SomeClass</span>.<span>method</span> <span>at</span> ...<span>&gt;</span></pre></div>
<ul dir="auto">
<li><code>classmethod</code> transforms functions into class methods. Class methods are descriptors that, when accessed, create
a method object which binds the <em>class</em> (type) of the object, instead of the object itself.</li>
</ul>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; o1.classm
&lt;bound method SomeClass.classm of &lt;class &#39;__main__.SomeClass&#39;&gt;&gt;"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>o1</span>.<span>classm</span>
<span>&lt;</span><span>bound</span> <span>method</span> <span>SomeClass</span>.<span>classm</span> <span>of</span> <span>&lt;</span><span>class</span> <span>&#39;__main__.SomeClass&#39;</span><span>&gt;&gt;</span></pre></div>
<ul dir="auto">
<li>Unlike functions, <code>classmethod</code>s will create a method also when accessed as class attributes (in which case they
bind the class, not to the type of it). So <code>SomeClass.classm is SomeClass.classm</code> is falsy.</li>
</ul>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; SomeClass.classm
&lt;bound method SomeClass.classm of &lt;class &#39;__main__.SomeClass&#39;&gt;&gt;"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>SomeClass</span>.<span>classm</span>
<span>&lt;</span><span>bound</span> <span>method</span> <span>SomeClass</span>.<span>classm</span> <span>of</span> <span>&lt;</span><span>class</span> <span>&#39;__main__.SomeClass&#39;</span><span>&gt;&gt;</span></pre></div>
<ul dir="auto">
<li>A method object compares equal when both the functions are equal, and the bound objects are the same. So
<code>o1.method == o1.method</code> is truthy, although not the same object in memory.</li>
<li><code>staticmethod</code> transforms functions into a &#34;no-op&#34; descriptor, which returns the function as-is. No method
objects are ever created, so comparison with <code>is</code> is truthy.</li>
</ul>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; o1.staticm
&lt;function SomeClass.staticm at ...&gt;
&gt;&gt;&gt; SomeClass.staticm
&lt;function SomeClass.staticm at ...&gt;"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>o1</span>.<span>staticm</span>
<span>&lt;</span><span>function</span> <span>SomeClass</span>.<span>staticm</span> <span>at</span> ...<span>&gt;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>SomeClass</span>.<span>staticm</span>
<span>&lt;</span><span>function</span> <span>SomeClass</span>.<span>staticm</span> <span>at</span> ...<span>&gt;</span></pre></div>
<ul dir="auto">
<li>Having to create new &#34;method&#34; objects every time Python calls instance methods and having to modify the arguments
every time in order to insert <code>self</code> affected performance badly.
CPython 3.7 <a href="https://bugs.python.org/issue26110" rel="nofollow">solved it</a> by introducing new opcodes that deal with calling methods
without creating the temporary method objects. This is used only when the accessed function is actually called, so the
snippets here are not affected, and still generate methods :)</li>
</ul>
<h3 dir="auto"><a id="user-content--all-true-ation-" aria-hidden="true" href="#-all-true-ation-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> All-true-ation *</h3>

<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; all([True, True, True])
True
&gt;&gt;&gt; all([True, True, False])
False

&gt;&gt;&gt; all([])
True
&gt;&gt;&gt; all([[]])
False
&gt;&gt;&gt; all([[[]]])
True"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>all</span>([<span>True</span>, <span>True</span>, <span>True</span>])
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>all</span>([<span>True</span>, <span>True</span>, <span>False</span>])
<span>False</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>all</span>([])
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>all</span>([[]])
<span>False</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>all</span>([[[]]])
<span>True</span></pre></div>
<p dir="auto">Why&#39;s this True-False alteration?</p>
<h4 dir="auto"><a id="user-content--explanation-17" aria-hidden="true" href="#-explanation-17"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>
<p dir="auto">The implementation of <code>all</code> function is equivalent to</p>
</li>
<li>
<div data-snippet-clipboard-copy-content="def all(iterable):
    for element in iterable:
        if not element:
            return False
    return True"><pre><span>def</span> <span>all</span>(<span>iterable</span>):
    <span>for</span> <span>element</span> <span>in</span> <span>iterable</span>:
        <span>if</span> <span>not</span> <span>element</span>:
            <span>return</span> <span>False</span>
    <span>return</span> <span>True</span></pre></div>
</li>
<li>
<p dir="auto"><code>all([])</code> returns <code>True</code> since the iterable is empty.</p>
</li>
<li>
<p dir="auto"><code>all([[]])</code> returns <code>False</code> because the passed array has one element, <code>[]</code>, and in python, an empty list is falsy.</p>
</li>
<li>
<p dir="auto"><code>all([[[]]])</code> and higher recursive variants are always <code>True</code>. This is because the passed array&#39;s single element (<code>[[...]]</code>) is no longer empty, and lists with values are truthy.</p>
</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--the-surprising-comma" aria-hidden="true" href="#-the-surprising-comma"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> The surprising comma</h3>

<p dir="auto"><strong>Output (&lt; 3.6):</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; def f(x, y,):
...     print(x, y)
...
&gt;&gt;&gt; def g(x=4, y=5,):
...     print(x, y)
...
&gt;&gt;&gt; def h(x, **kwargs,):
  File &#34;&lt;stdin&gt;&#34;, line 1
    def h(x, **kwargs,):
                     ^
SyntaxError: invalid syntax

&gt;&gt;&gt; def h(*args,):
  File &#34;&lt;stdin&gt;&#34;, line 1
    def h(*args,):
                ^
SyntaxError: invalid syntax"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>def</span> <span>f</span>(<span>x</span>, <span>y</span>,):
...     <span>print</span>(<span>x</span>, <span>y</span>)
...
<span>&gt;&gt;</span><span>&gt;</span> <span>def</span> <span>g</span>(<span>x</span><span>=</span><span>4</span>, <span>y</span><span>=</span><span>5</span>,):
...     <span>print</span>(<span>x</span>, <span>y</span>)
...
<span>&gt;&gt;</span><span>&gt;</span> <span>def</span> <span>h</span>(<span>x</span>, <span>**</span><span>kwargs</span>,):
  <span>File</span> <span>&#34;&lt;stdin&gt;&#34;</span>, <span>line</span> <span>1</span>
    <span>def</span> <span>h</span>(<span>x</span>, <span>**</span><span>kwargs</span>,):
                     <span>^</span>
<span>SyntaxError</span>: <span>invalid</span> <span>syntax</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>def</span> <span>h</span>(<span>*</span><span>args</span>,):
  <span>File</span> <span>&#34;&lt;stdin&gt;&#34;</span>, <span>line</span> <span>1</span>
    <span>def</span> <span>h</span>(<span>*</span><span>args</span>,):
                <span>^</span>
<span>SyntaxError</span>: <span>invalid</span> <span>syntax</span></pre></div>
<h4 dir="auto"><a id="user-content--explanation-18" aria-hidden="true" href="#-explanation-18"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>Trailing comma is not always legal in formal parameters list of a Python function.</li>
<li>In Python, the argument list is defined partially with leading commas and partially with trailing commas. This conflict causes situations where a comma is trapped in the middle, and no rule accepts it.</li>
<li><strong>Note:</strong> The trailing comma problem is <a href="https://bugs.python.org/issue9232" rel="nofollow">fixed in Python 3.6</a>. The remarks in <a href="https://bugs.python.org/issue9232#msg248399" rel="nofollow">this</a> post discuss in brief different usages of trailing commas in Python.</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--strings-and-the-backslashes" aria-hidden="true" href="#-strings-and-the-backslashes"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Strings and the backslashes</h3>

<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; print(&#34;\&#34;&#34;)
&#34;

&gt;&gt;&gt; print(r&#34;\&#34;&#34;)
\&#34;

&gt;&gt;&gt; print(r&#34;\&#34;)
File &#34;&lt;stdin&gt;&#34;, line 1
    print(r&#34;\&#34;)
              ^
SyntaxError: EOL while scanning string literal

&gt;&gt;&gt; r&#39;\&#39;&#39; == &#34;\\&#39;&#34;
True"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>print</span>(<span>&#34;<span>\&#34;</span>&#34;</span>)
&#34;

<span>&gt;&gt;</span><span>&gt;</span> <span>print</span>(<span>r&#34;\&#34;&#34;</span>)
\&#34;

<span>&gt;&gt;</span><span>&gt;</span> <span>print</span>(<span>r&#34;<span>\&#34;</span></span>)
<span>File</span> <span>&#34;&lt;stdin&gt;&#34;</span>, <span>line</span> <span>1</span>
    <span>print</span>(r&#34;<span>\&#34;</span>)
              <span>^</span>
<span>SyntaxError</span>: <span>EOL</span> <span>while</span> <span>scanning</span> <span>string</span> <span>literal</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>r&#39;\&#39;&#39;</span> <span>==</span> <span>&#34;<span>\\</span>&#39;&#34;</span>
<span>True</span></pre></div>
<h4 dir="auto"><a id="user-content--explanation-19" aria-hidden="true" href="#-explanation-19"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation</h4>
<ul dir="auto">
<li>In a usual python string, the backslash is used to escape characters that may have a special meaning (like single-quote, double-quote, and the backslash itself).
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; &#34;wt\&#34;f&#34;
&#39;wt&#34;f&#39;"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>&#34;wt<span>\&#34;</span>f&#34;</span>
<span>&#39;wt&#34;f&#39;</span></pre></div>
</li>
<li>In a raw string literal (as indicated by the prefix <code>r</code>),  the backslashes pass themselves as is along with the behavior of escaping the following character.
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; r&#39;wt\&#34;f&#39; == &#39;wt\\&#34;f&#39;
True
&gt;&gt;&gt; print(repr(r&#39;wt\&#34;f&#39;)
&#39;wt\\&#34;f&#39;

&gt;&gt;&gt; print(&#34;\n&#34;)

&gt;&gt;&gt; print(r&#34;\\n&#34;)
&#39;\\n&#39;"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>r&#39;wt\&#34;f&#39;</span> <span>==</span> <span>&#39;wt<span>\\</span>&#34;f&#39;</span>
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>print</span>(<span>repr</span>(<span>r&#39;wt\&#34;f&#39;</span>)
&#39;<span>wt</span>\\&#34;f&#39;

<span>&gt;&gt;</span><span>&gt;</span> <span>print</span>(<span>&#34;<span>\n</span>&#34;</span>)

<span>&gt;&gt;</span><span>&gt;</span> <span>print</span>(<span>r&#34;\\n&#34;</span>)
&#39;\\<span>n</span>&#39;</pre></div>
</li>
<li>This means when a parser encounters a backslash in a raw string, it expects another character following it. And in our case (<code>print(r&#34;\&#34;)</code>), the backslash escaped the trailing quote, leaving the parser without a terminating quote (hence the <code>SyntaxError</code>). That&#39;s why backslashes don&#39;t work at the end of a raw string.</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--not-knot" aria-hidden="true" href="#-not-knot"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> not knot!</h3>

<div data-snippet-clipboard-copy-content="x = True
y = False"><pre><span>x</span> <span>=</span> <span>True</span>
<span>y</span> <span>=</span> <span>False</span></pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; not x == y
True
&gt;&gt;&gt; x == not y
  File &#34;&lt;input&gt;&#34;, line 1
    x == not y
           ^
SyntaxError: invalid syntax"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>not</span> <span>x</span> <span>==</span> <span>y</span>
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>x</span> <span>==</span> <span>not</span> <span>y</span>
  <span>File</span> <span>&#34;&lt;input&gt;&#34;</span>, <span>line</span> <span>1</span>
    <span>x</span> <span>==</span> <span>not</span> <span>y</span>
           <span>^</span>
<span>SyntaxError</span>: <span>invalid</span> <span>syntax</span></pre></div>
<h4 dir="auto"><a id="user-content--explanation-20" aria-hidden="true" href="#-explanation-20"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>Operator precedence affects how an expression is evaluated, and <code>==</code> operator has higher precedence than <code>not</code> operator in Python.</li>
<li>So <code>not x == y</code> is equivalent to <code>not (x == y)</code> which is equivalent to <code>not (True == False)</code> finally evaluating to <code>True</code>.</li>
<li>But <code>x == not y</code> raises a <code>SyntaxError</code> because it can be thought of being equivalent to <code>(x == not) y</code> and not <code>x == (not y)</code> which you might have expected at first sight.</li>
<li>The parser expected the <code>not</code> token to be a part of the <code>not in</code> operator (because both <code>==</code> and <code>not in</code> operators have the same precedence), but after not being able to find an <code>in</code> token following the <code>not</code> token, it raises a <code>SyntaxError</code>.</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--half-triple-quoted-strings" aria-hidden="true" href="#-half-triple-quoted-strings"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Half triple-quoted strings</h3>

<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; print(&#39;wtfpython&#39;&#39;&#39;)
wtfpython
&gt;&gt;&gt; print(&#34;wtfpython&#34;&#34;&#34;)
wtfpython
&gt;&gt;&gt; # The following statements raise `SyntaxError`
&gt;&gt;&gt; # print(&#39;&#39;&#39;wtfpython&#39;)
&gt;&gt;&gt; # print(&#34;&#34;&#34;wtfpython&#34;)
  File &#34;&lt;input&gt;&#34;, line 3
    print(&#34;&#34;&#34;wtfpython&#34;)
                        ^
SyntaxError: EOF while scanning triple-quoted string literal"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>print</span>(<span>&#39;wtfpython&#39;</span><span>&#39;&#39;</span>)
<span>wtfpython</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>print</span>(<span>&#34;wtfpython&#34;</span><span>&#34;&#34;</span>)
<span>wtfpython</span>
<span>&gt;&gt;</span><span>&gt;</span> <span># The following statements raise `SyntaxError`</span>
<span>&gt;&gt;</span><span>&gt;</span> <span># print(&#39;&#39;&#39;wtfpython&#39;)</span>
<span>&gt;&gt;</span><span>&gt;</span> <span># print(&#34;&#34;&#34;wtfpython&#34;)</span>
  <span>File</span> <span>&#34;&lt;input&gt;&#34;</span>, <span>line</span> <span>3</span>
    <span>print</span>(&#34;&#34;&#34;<span>wtfpython</span>&#34;)
                        <span>^</span>
<span>SyntaxError</span>: <span>EOF</span> <span>while</span> <span>scanning</span> <span>triple</span><span>-</span><span>quoted</span> <span>string</span> <span>literal</span></pre></div>
<h4 dir="auto"><a id="user-content--explanation-21" aria-hidden="true" href="#-explanation-21"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>Python supports implicit <a href="https://docs.python.org/3/reference/lexical_analysis.html#string-literal-concatenation" rel="nofollow">string literal concatenation</a>, Example,
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; print(&#34;wtf&#34; &#34;python&#34;)
wtfpython
&gt;&gt;&gt; print(&#34;wtf&#34; &#34;&#34;) # or &#34;wtf&#34;&#34;&#34;
wtf"><pre><code>&gt;&gt;&gt; print(&#34;wtf&#34; &#34;python&#34;)
wtfpython
&gt;&gt;&gt; print(&#34;wtf&#34; &#34;&#34;) # or &#34;wtf&#34;&#34;&#34;
wtf
</code></pre></div>
</li>
<li><code>&#39;&#39;&#39;</code> and <code>&#34;&#34;&#34;</code> are also string delimiters in Python which causes a SyntaxError because the Python interpreter was expecting a terminating triple quote as delimiter while scanning the currently encountered triple quoted string literal.</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--whats-wrong-with-booleans" aria-hidden="true" href="#-whats-wrong-with-booleans"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> What&#39;s wrong with booleans?</h3>

<p dir="auto">1.</p>
<div data-snippet-clipboard-copy-content="# A simple example to count the number of booleans and
# integers in an iterable of mixed data types.
mixed_list = [False, 1.0, &#34;some_string&#34;, 3, True, [], False]
integers_found_so_far = 0
booleans_found_so_far = 0

for item in mixed_list:
    if isinstance(item, int):
        integers_found_so_far += 1
    elif isinstance(item, bool):
        booleans_found_so_far += 1"><pre><span># A simple example to count the number of booleans and</span>
<span># integers in an iterable of mixed data types.</span>
<span>mixed_list</span> <span>=</span> [<span>False</span>, <span>1.0</span>, <span>&#34;some_string&#34;</span>, <span>3</span>, <span>True</span>, [], <span>False</span>]
<span>integers_found_so_far</span> <span>=</span> <span>0</span>
<span>booleans_found_so_far</span> <span>=</span> <span>0</span>

<span>for</span> <span>item</span> <span>in</span> <span>mixed_list</span>:
    <span>if</span> <span>isinstance</span>(<span>item</span>, <span>int</span>):
        <span>integers_found_so_far</span> <span>+=</span> <span>1</span>
    <span>elif</span> <span>isinstance</span>(<span>item</span>, <span>bool</span>):
        <span>booleans_found_so_far</span> <span>+=</span> <span>1</span></pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; integers_found_so_far
4
&gt;&gt;&gt; booleans_found_so_far
0"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>integers_found_so_far</span>
<span>4</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>booleans_found_so_far</span>
<span>0</span></pre></div>
<p dir="auto">2.</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; some_bool = True
&gt;&gt;&gt; &#34;wtf&#34; * some_bool
&#39;wtf&#39;
&gt;&gt;&gt; some_bool = False
&gt;&gt;&gt; &#34;wtf&#34; * some_bool
&#39;&#39;"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>some_bool</span> <span>=</span> <span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>&#34;wtf&#34;</span> <span>*</span> <span>some_bool</span>
<span>&#39;wtf&#39;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>some_bool</span> <span>=</span> <span>False</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>&#34;wtf&#34;</span> <span>*</span> <span>some_bool</span>
<span>&#39;&#39;</span></pre></div>
<p dir="auto">3.</p>
<div data-snippet-clipboard-copy-content="def tell_truth():
    True = False
    if True == False:
        print(&#34;I have lost faith in truth!&#34;)"><pre><span>def</span> <span>tell_truth</span>():
    <span>True</span> <span>=</span> <span>False</span>
    <span>if</span> <span>True</span> <span>==</span> <span>False</span>:
        <span>print</span>(<span>&#34;I have lost faith in truth!&#34;</span>)</pre></div>
<p dir="auto"><strong>Output (&lt; 3.x):</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; tell_truth()
I have lost faith in truth!"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>tell_truth</span>()
<span>I</span> <span>have</span> <span>lost</span> <span>faith</span> <span>in</span> <span>truth</span>!</pre></div>
<h4 dir="auto"><a id="user-content--explanation-22" aria-hidden="true" href="#-explanation-22"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>
<p dir="auto"><code>bool</code> is a subclass of <code>int</code> in Python</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; issubclass(bool, int)
True
&gt;&gt;&gt; issubclass(int, bool)
False"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>issubclass</span>(<span>bool</span>, <span>int</span>)
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>issubclass</span>(<span>int</span>, <span>bool</span>)
<span>False</span></pre></div>
</li>
<li>
<p dir="auto">And thus, <code>True</code> and <code>False</code> are instances of <code>int</code></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; isinstance(True, int)
True
&gt;&gt;&gt; isinstance(False, int)
True"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>isinstance</span>(<span>True</span>, <span>int</span>)
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>isinstance</span>(<span>False</span>, <span>int</span>)
<span>True</span></pre></div>
</li>
<li>
<p dir="auto">The integer value of <code>True</code> is <code>1</code> and that of <code>False</code> is <code>0</code>.</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; int(True)
1
&gt;&gt;&gt; int(False)
0"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>int</span>(<span>True</span>)
<span>1</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>int</span>(<span>False</span>)
<span>0</span></pre></div>
</li>
<li>
<p dir="auto">See this StackOverflow <a href="https://stackoverflow.com/a/8169049/4354153" rel="nofollow">answer</a> for the rationale behind it.</p>
</li>
<li>
<p dir="auto">Initially, Python used to have no <code>bool</code> type (people used 0 for false and non-zero value like 1 for true).  <code>True</code>, <code>False</code>, and a <code>bool</code> type was added in 2.x versions, but, for backward compatibility, <code>True</code> and <code>False</code> couldn&#39;t be made constants. They just were built-in variables, and it was possible to reassign them</p>
</li>
<li>
<p dir="auto">Python 3 was backward-incompatible, the issue was finally fixed, and thus the last snippet won&#39;t work with Python 3.x!</p>
</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--class-attributes-and-instance-attributes" aria-hidden="true" href="#-class-attributes-and-instance-attributes"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Class attributes and instance attributes</h3>

<p dir="auto">1.</p>
<div data-snippet-clipboard-copy-content="class A:
    x = 1

class B(A):
    pass

class C(A):
    pass"><pre><span>class</span> <span>A</span>:
    <span>x</span> <span>=</span> <span>1</span>

<span>class</span> <span>B</span>(<span>A</span>):
    <span>pass</span>

<span>class</span> <span>C</span>(<span>A</span>):
    <span>pass</span></pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; A.x, B.x, C.x
(1, 1, 1)
&gt;&gt;&gt; B.x = 2
&gt;&gt;&gt; A.x, B.x, C.x
(1, 2, 1)
&gt;&gt;&gt; A.x = 3
&gt;&gt;&gt; A.x, B.x, C.x # C.x changed, but B.x didn&#39;t
(3, 2, 3)
&gt;&gt;&gt; a = A()
&gt;&gt;&gt; a.x, A.x
(3, 3)
&gt;&gt;&gt; a.x += 1
&gt;&gt;&gt; a.x, A.x
(4, 3)"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>A</span>.<span>x</span>, <span>B</span>.<span>x</span>, <span>C</span>.<span>x</span>
(<span>1</span>, <span>1</span>, <span>1</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>B</span>.<span>x</span> <span>=</span> <span>2</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>A</span>.<span>x</span>, <span>B</span>.<span>x</span>, <span>C</span>.<span>x</span>
(<span>1</span>, <span>2</span>, <span>1</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>A</span>.<span>x</span> <span>=</span> <span>3</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>A</span>.<span>x</span>, <span>B</span>.<span>x</span>, <span>C</span>.<span>x</span> <span># C.x changed, but B.x didn&#39;t</span>
(<span>3</span>, <span>2</span>, <span>3</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>=</span> <span>A</span>()
<span>&gt;&gt;</span><span>&gt;</span> <span>a</span>.<span>x</span>, <span>A</span>.<span>x</span>
(<span>3</span>, <span>3</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>a</span>.<span>x</span> <span>+=</span> <span>1</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>a</span>.<span>x</span>, <span>A</span>.<span>x</span>
(<span>4</span>, <span>3</span>)</pre></div>
<p dir="auto">2.</p>
<div data-snippet-clipboard-copy-content="class SomeClass:
    some_var = 15
    some_list = [5]
    another_list = [5]
    def __init__(self, x):
        self.some_var = x + 1
        self.some_list = self.some_list + [x]
        self.another_list += [x]"><pre><span>class</span> <span>SomeClass</span>:
    <span>some_var</span> <span>=</span> <span>15</span>
    <span>some_list</span> <span>=</span> [<span>5</span>]
    <span>another_list</span> <span>=</span> [<span>5</span>]
    <span>def</span> <span>__init__</span>(<span>self</span>, <span>x</span>):
        <span>self</span>.<span>some_var</span> <span>=</span> <span>x</span> <span>+</span> <span>1</span>
        <span>self</span>.<span>some_list</span> <span>=</span> <span>self</span>.<span>some_list</span> <span>+</span> [<span>x</span>]
        <span>self</span>.<span>another_list</span> <span>+=</span> [<span>x</span>]</pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; some_obj = SomeClass(420)
&gt;&gt;&gt; some_obj.some_list
[5, 420]
&gt;&gt;&gt; some_obj.another_list
[5, 420]
&gt;&gt;&gt; another_obj = SomeClass(111)
&gt;&gt;&gt; another_obj.some_list
[5, 111]
&gt;&gt;&gt; another_obj.another_list
[5, 420, 111]
&gt;&gt;&gt; another_obj.another_list is SomeClass.another_list
True
&gt;&gt;&gt; another_obj.another_list is some_obj.another_list
True"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>some_obj</span> <span>=</span> <span>SomeClass</span>(<span>420</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>some_obj</span>.<span>some_list</span>
[<span>5</span>, <span>420</span>]
<span>&gt;&gt;</span><span>&gt;</span> <span>some_obj</span>.<span>another_list</span>
[<span>5</span>, <span>420</span>]
<span>&gt;&gt;</span><span>&gt;</span> <span>another_obj</span> <span>=</span> <span>SomeClass</span>(<span>111</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>another_obj</span>.<span>some_list</span>
[<span>5</span>, <span>111</span>]
<span>&gt;&gt;</span><span>&gt;</span> <span>another_obj</span>.<span>another_list</span>
[<span>5</span>, <span>420</span>, <span>111</span>]
<span>&gt;&gt;</span><span>&gt;</span> <span>another_obj</span>.<span>another_list</span> <span>is</span> <span>SomeClass</span>.<span>another_list</span>
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>another_obj</span>.<span>another_list</span> <span>is</span> <span>some_obj</span>.<span>another_list</span>
<span>True</span></pre></div>
<h4 dir="auto"><a id="user-content--explanation-23" aria-hidden="true" href="#-explanation-23"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>Class variables and variables in class instances are internally handled as dictionaries of a class object. If a variable name is not found in the dictionary of the current class, the parent classes are searched for it.</li>
<li>The <code>+=</code> operator modifies the mutable object in-place without creating a new object. So changing the attribute of one instance affects the other instances and the class attribute as well.</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--yielding-none" aria-hidden="true" href="#-yielding-none"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> yielding None</h3>

<div data-snippet-clipboard-copy-content="some_iterable = (&#39;a&#39;, &#39;b&#39;)

def some_func(val):
    return &#34;something&#34;"><pre><span>some_iterable</span> <span>=</span> (<span>&#39;a&#39;</span>, <span>&#39;b&#39;</span>)

<span>def</span> <span>some_func</span>(<span>val</span>):
    <span>return</span> <span>&#34;something&#34;</span></pre></div>
<p dir="auto"><strong>Output (&lt;= 3.7.x):</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; [x for x in some_iterable]
[&#39;a&#39;, &#39;b&#39;]
&gt;&gt;&gt; [(yield x) for x in some_iterable]
&lt;generator object &lt;listcomp&gt; at 0x7f70b0a4ad58&gt;
&gt;&gt;&gt; list([(yield x) for x in some_iterable])
[&#39;a&#39;, &#39;b&#39;]
&gt;&gt;&gt; list((yield x) for x in some_iterable)
[&#39;a&#39;, None, &#39;b&#39;, None]
&gt;&gt;&gt; list(some_func((yield x)) for x in some_iterable)
[&#39;a&#39;, &#39;something&#39;, &#39;b&#39;, &#39;something&#39;]"><pre><span>&gt;&gt;</span><span>&gt;</span> [<span>x</span> <span>for</span> <span>x</span> <span>in</span> <span>some_iterable</span>]
[<span>&#39;a&#39;</span>, <span>&#39;b&#39;</span>]
<span>&gt;&gt;</span><span>&gt;</span> [(<span>yield</span> <span>x</span>) <span>for</span> <span>x</span> <span>in</span> <span>some_iterable</span>]
<span>&lt;</span><span>generator</span> <span>object</span> <span>&lt;</span><span>listcomp</span><span>&gt;</span> <span>at</span> <span>0x7f70b0a4ad58</span><span>&gt;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>list</span>([(<span>yield</span> <span>x</span>) <span>for</span> <span>x</span> <span>in</span> <span>some_iterable</span>])
[<span>&#39;a&#39;</span>, <span>&#39;b&#39;</span>]
<span>&gt;&gt;</span><span>&gt;</span> <span>list</span>((<span>yield</span> <span>x</span>) <span>for</span> <span>x</span> <span>in</span> <span>some_iterable</span>)
[<span>&#39;a&#39;</span>, <span>None</span>, <span>&#39;b&#39;</span>, <span>None</span>]
<span>&gt;&gt;</span><span>&gt;</span> <span>list</span>(<span>some_func</span>((<span>yield</span> <span>x</span>)) <span>for</span> <span>x</span> <span>in</span> <span>some_iterable</span>)
[<span>&#39;a&#39;</span>, <span>&#39;something&#39;</span>, <span>&#39;b&#39;</span>, <span>&#39;something&#39;</span>]</pre></div>
<h4 dir="auto"><a id="user-content--explanation-24" aria-hidden="true" href="#-explanation-24"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>This is a bug in CPython&#39;s handling of <code>yield</code> in generators and comprehensions.</li>
<li>Source and explanation can be found here: <a href="https://stackoverflow.com/questions/32139885/yield-in-list-comprehensions-and-generator-expressions" rel="nofollow">https://stackoverflow.com/questions/32139885/yield-in-list-comprehensions-and-generator-expressions</a></li>
<li>Related bug report: <a href="https://bugs.python.org/issue10544" rel="nofollow">https://bugs.python.org/issue10544</a></li>
<li>Python 3.8+ no longer allows <code>yield</code> inside list comprehension and will throw a <code>SyntaxError</code>.</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--yielding-from-return-" aria-hidden="true" href="#-yielding-from-return-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Yielding from... return! *</h3>

<p dir="auto">1.</p>
<div data-snippet-clipboard-copy-content="def some_func(x):
    if x == 3:
        return [&#34;wtf&#34;]
    else:
        yield from range(x)"><pre><span>def</span> <span>some_func</span>(<span>x</span>):
    <span>if</span> <span>x</span> <span>==</span> <span>3</span>:
        <span>return</span> [<span>&#34;wtf&#34;</span>]
    <span>else</span>:
        <span>yield</span> <span>from</span> <span>range</span>(<span>x</span>)</pre></div>
<p dir="auto"><strong>Output (&gt; 3.3):</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; list(some_func(3))
[]"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>list</span>(<span>some_func</span>(<span>3</span>))
[]</pre></div>
<p dir="auto">Where did the <code>&#34;wtf&#34;</code> go? Is it due to some special effect of <code>yield from</code>? Let&#39;s validate that,</p>
<p dir="auto">2.</p>
<div data-snippet-clipboard-copy-content="def some_func(x):
    if x == 3:
        return [&#34;wtf&#34;]
    else:
        for i in range(x):
          yield i"><pre><span>def</span> <span>some_func</span>(<span>x</span>):
    <span>if</span> <span>x</span> <span>==</span> <span>3</span>:
        <span>return</span> [<span>&#34;wtf&#34;</span>]
    <span>else</span>:
        <span>for</span> <span>i</span> <span>in</span> <span>range</span>(<span>x</span>):
          <span>yield</span> <span>i</span></pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; list(some_func(3))
[]"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>list</span>(<span>some_func</span>(<span>3</span>))
[]</pre></div>
<p dir="auto">The same result, this didn&#39;t work either.</p>
<h4 dir="auto"><a id="user-content--explanation-25" aria-hidden="true" href="#-explanation-25"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>From Python 3.3 onwards, it became possible to use <code>return</code> statement with values inside generators (See <a href="https://www.python.org/dev/peps/pep-0380/" rel="nofollow">PEP380</a>). The <a href="https://www.python.org/dev/peps/pep-0380/#enhancements-to-stopiteration" rel="nofollow">official docs</a> say that,</li>
</ul>
<blockquote>
<p dir="auto">&#34;... <code>return expr</code> in a generator causes <code>StopIteration(expr)</code> to be raised upon exit from the generator.&#34;</p>
</blockquote>
<ul dir="auto">
<li>
<p dir="auto">In the case of <code>some_func(3)</code>, <code>StopIteration</code> is raised at the beginning because of <code>return</code> statement. The <code>StopIteration</code> exception is automatically caught inside the <code>list(...)</code> wrapper and the <code>for</code> loop. Therefore, the above two snippets result in an empty list.</p>
</li>
<li>
<p dir="auto">To get <code>[&#34;wtf&#34;]</code> from the generator <code>some_func</code> we need to catch the <code>StopIteration</code> exception,</p>
<div data-snippet-clipboard-copy-content="try:
    next(some_func(3))
except StopIteration as e:
    some_string = e.value"><pre><span>try</span>:
    <span>next</span>(<span>some_func</span>(<span>3</span>))
<span>except</span> <span>StopIteration</span> <span>as</span> <span>e</span>:
    <span>some_string</span> <span>=</span> <span>e</span>.<span>value</span></pre></div>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; some_string
[&#34;wtf&#34;]"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>some_string</span>
[<span>&#34;wtf&#34;</span>]</pre></div>
</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--nan-reflexivity-" aria-hidden="true" href="#-nan-reflexivity-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Nan-reflexivity *</h3>

<p dir="auto">1.</p>
<div data-snippet-clipboard-copy-content="a = float(&#39;inf&#39;)
b = float(&#39;nan&#39;)
c = float(&#39;-iNf&#39;)  # These strings are case-insensitive
d = float(&#39;nan&#39;)"><pre><span>a</span> <span>=</span> <span>float</span>(<span>&#39;inf&#39;</span>)
<span>b</span> <span>=</span> <span>float</span>(<span>&#39;nan&#39;</span>)
<span>c</span> <span>=</span> <span>float</span>(<span>&#39;-iNf&#39;</span>)  <span># These strings are case-insensitive</span>
<span>d</span> <span>=</span> <span>float</span>(<span>&#39;nan&#39;</span>)</pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; a
inf
&gt;&gt;&gt; b
nan
&gt;&gt;&gt; c
-inf
&gt;&gt;&gt; float(&#39;some_other_string&#39;)
ValueError: could not convert string to float: some_other_string
&gt;&gt;&gt; a == -c # inf==inf
True
&gt;&gt;&gt; None == None # None == None
True
&gt;&gt;&gt; b == d # but nan!=nan
False
&gt;&gt;&gt; 50 / a
0.0
&gt;&gt;&gt; a / a
nan
&gt;&gt;&gt; 23 + b
nan"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>a</span>
<span>inf</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>b</span>
<span>nan</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>c</span>
<span>-</span><span>inf</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>float</span>(<span>&#39;some_other_string&#39;</span>)
<span>ValueError</span>: <span>could</span> <span>not</span> <span>convert</span> <span>string</span> <span>to</span> <span>float</span>: <span>some_other_string</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>==</span> <span>-</span><span>c</span> <span># inf==inf</span>
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>None</span> <span>==</span> <span>None</span> <span># None == None</span>
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>b</span> <span>==</span> <span>d</span> <span># but nan!=nan</span>
<span>False</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>50</span> <span>/</span> <span>a</span>
<span>0.0</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>/</span> <span>a</span>
<span>nan</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>23</span> <span>+</span> <span>b</span>
<span>nan</span></pre></div>
<p dir="auto">2.</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; x = float(&#39;nan&#39;)
&gt;&gt;&gt; y = x / x
&gt;&gt;&gt; y is y # identity holds
True
&gt;&gt;&gt; y == y # equality fails of y
False
&gt;&gt;&gt; [y] == [y] # but the equality succeeds for the list containing y
True"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>x</span> <span>=</span> <span>float</span>(<span>&#39;nan&#39;</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>y</span> <span>=</span> <span>x</span> <span>/</span> <span>x</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>y</span> <span>is</span> <span>y</span> <span># identity holds</span>
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>y</span> <span>==</span> <span>y</span> <span># equality fails of y</span>
<span>False</span>
<span>&gt;&gt;</span><span>&gt;</span> [<span>y</span>] <span>==</span> [<span>y</span>] <span># but the equality succeeds for the list containing y</span>
<span>True</span></pre></div>
<h4 dir="auto"><a id="user-content--explanation-26" aria-hidden="true" href="#-explanation-26"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>
<p dir="auto"><code>&#39;inf&#39;</code> and <code>&#39;nan&#39;</code> are special strings (case-insensitive), which, when explicitly typecast-ed to <code>float</code> type, are used to represent mathematical &#34;infinity&#34; and &#34;not a number&#34; respectively.</p>
</li>
<li>
<p dir="auto">Since according to IEEE standards <code> NaN != NaN</code>, obeying this rule breaks the reflexivity assumption of a collection element in Python i.e. if <code>x</code> is a part of a collection like <code>list</code>, the implementations like comparison are based on the assumption that <code>x == x</code>.  Because of this assumption, the identity is compared first (since it&#39;s faster) while comparing two elements, and the values are compared only when the identities mismatch. The following snippet will make things clearer,</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; x = float(&#39;nan&#39;)
&gt;&gt;&gt; x == x, [x] == [x]
(False, True)
&gt;&gt;&gt; y = float(&#39;nan&#39;)
&gt;&gt;&gt; y == y, [y] == [y]
(False, True)
&gt;&gt;&gt; x == y, [x] == [y]
(False, False)"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>x</span> <span>=</span> <span>float</span>(<span>&#39;nan&#39;</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>x</span> <span>==</span> <span>x</span>, [<span>x</span>] <span>==</span> [<span>x</span>]
(<span>False</span>, <span>True</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>y</span> <span>=</span> <span>float</span>(<span>&#39;nan&#39;</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>y</span> <span>==</span> <span>y</span>, [<span>y</span>] <span>==</span> [<span>y</span>]
(<span>False</span>, <span>True</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>x</span> <span>==</span> <span>y</span>, [<span>x</span>] <span>==</span> [<span>y</span>]
(<span>False</span>, <span>False</span>)</pre></div>
<p dir="auto">Since the identities of <code>x</code> and <code>y</code> are different, the values are considered, which are also different; hence the comparison returns <code>False</code> this time.</p>
</li>
<li>
<p dir="auto">Interesting read: <a href="https://bertrandmeyer.com/2010/02/06/reflexivity-and-other-pillars-of-civilization/" rel="nofollow">Reflexivity, and other pillars of civilization</a></p>
</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--mutating-the-immutable" aria-hidden="true" href="#-mutating-the-immutable"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Mutating the immutable!</h3>

<p dir="auto">This might seem trivial if you know how references work in Python.</p>
<div data-snippet-clipboard-copy-content="some_tuple = (&#34;A&#34;, &#34;tuple&#34;, &#34;with&#34;, &#34;values&#34;)
another_tuple = ([1, 2], [3, 4], [5, 6])"><pre><span>some_tuple</span> <span>=</span> (<span>&#34;A&#34;</span>, <span>&#34;tuple&#34;</span>, <span>&#34;with&#34;</span>, <span>&#34;values&#34;</span>)
<span>another_tuple</span> <span>=</span> ([<span>1</span>, <span>2</span>], [<span>3</span>, <span>4</span>], [<span>5</span>, <span>6</span>])</pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; some_tuple[2] = &#34;change this&#34;
TypeError: &#39;tuple&#39; object does not support item assignment
&gt;&gt;&gt; another_tuple[2].append(1000) #This throws no error
&gt;&gt;&gt; another_tuple
([1, 2], [3, 4], [5, 6, 1000])
&gt;&gt;&gt; another_tuple[2] += [99, 999]
TypeError: &#39;tuple&#39; object does not support item assignment
&gt;&gt;&gt; another_tuple
([1, 2], [3, 4], [5, 6, 1000, 99, 999])"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>some_tuple</span>[<span>2</span>] <span>=</span> <span>&#34;change this&#34;</span>
<span>TypeError</span>: <span>&#39;tuple&#39;</span> <span>object</span> <span>does</span> <span>not</span> <span>support</span> <span>item</span> <span>assignment</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>another_tuple</span>[<span>2</span>].<span>append</span>(<span>1000</span>) <span>#This throws no error</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>another_tuple</span>
([<span>1</span>, <span>2</span>], [<span>3</span>, <span>4</span>], [<span>5</span>, <span>6</span>, <span>1000</span>])
<span>&gt;&gt;</span><span>&gt;</span> <span>another_tuple</span>[<span>2</span>] <span>+=</span> [<span>99</span>, <span>999</span>]
<span>TypeError</span>: <span>&#39;tuple&#39;</span> <span>object</span> <span>does</span> <span>not</span> <span>support</span> <span>item</span> <span>assignment</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>another_tuple</span>
([<span>1</span>, <span>2</span>], [<span>3</span>, <span>4</span>], [<span>5</span>, <span>6</span>, <span>1000</span>, <span>99</span>, <span>999</span>])</pre></div>
<p dir="auto">But I thought tuples were immutable...</p>
<h4 dir="auto"><a id="user-content--explanation-27" aria-hidden="true" href="#-explanation-27"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>
<p dir="auto">Quoting from <a href="https://docs.python.org/3/reference/datamodel.html" rel="nofollow">https://docs.python.org/3/reference/datamodel.html</a></p>
<blockquote>
<p dir="auto">Immutable sequences
An object of an immutable sequence type cannot change once it is created. (If the object contains references to other objects, these other objects may be mutable and may be modified; however, the collection of objects directly referenced by an immutable object cannot change.)</p>
</blockquote>
</li>
<li>
<p dir="auto"><code>+=</code> operator changes the list in-place. The item assignment doesn&#39;t work, but when the exception occurs, the item has already been changed in place.</p>
</li>
<li>
<p dir="auto">There&#39;s also an explanation in <a href="https://docs.python.org/3/faq/programming.html#why-does-a-tuple-i-item-raise-an-exception-when-the-addition-works" rel="nofollow">official Python FAQ</a>.</p>
</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--the-disappearing-variable-from-outer-scope" aria-hidden="true" href="#-the-disappearing-variable-from-outer-scope"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> The disappearing variable from outer scope</h3>

<div data-snippet-clipboard-copy-content="e = 7
try:
    raise Exception()
except Exception as e:
    pass"><pre><span>e</span> <span>=</span> <span>7</span>
<span>try</span>:
    <span>raise</span> <span>Exception</span>()
<span>except</span> <span>Exception</span> <span>as</span> <span>e</span>:
    <span>pass</span></pre></div>
<p dir="auto"><strong>Output (Python 2.x):</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; print(e)
# prints nothing"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>print</span>(<span>e</span>)
<span># prints nothing</span></pre></div>
<p dir="auto"><strong>Output (Python 3.x):</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; print(e)
NameError: name &#39;e&#39; is not defined"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>print</span>(<span>e</span>)
<span>NameError</span>: <span>name</span> <span>&#39;e&#39;</span> <span>is</span> <span>not</span> <span>defined</span></pre></div>
<h4 dir="auto"><a id="user-content--explanation-28" aria-hidden="true" href="#-explanation-28"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>
<p dir="auto">Source: <a href="https://docs.python.org/3/reference/compound_stmts.html#except" rel="nofollow">https://docs.python.org/3/reference/compound_stmts.html#except</a></p>
<p dir="auto">When an exception has been assigned using <code>as</code> target, it is cleared at the end of the <code>except</code> clause. This is as if</p>
<div data-snippet-clipboard-copy-content="except E as N:
    foo"><pre><span>except</span> <span>E</span> <span>as</span> <span>N</span>:
    <span>foo</span></pre></div>
<p dir="auto">was translated into</p>
<div data-snippet-clipboard-copy-content="except E as N:
    try:
        foo
    finally:
        del N"><pre><span>except</span> <span>E</span> <span>as</span> <span>N</span>:
    <span>try</span>:
        <span>foo</span>
    <span>finally</span>:
        <span>del</span> <span>N</span></pre></div>
<p dir="auto">This means the exception must be assigned to a different name to be able to refer to it after the except clause. Exceptions are cleared because, with the traceback attached to them, they form a reference cycle with the stack frame, keeping all locals in that frame alive until the next garbage collection occurs.</p>
</li>
<li>
<p dir="auto">The clauses are not scoped in Python. Everything in the example is present in the same scope, and the variable <code>e</code> got removed due to the execution of the <code>except</code> clause. The same is not the case with functions that have their separate inner-scopes. The example below illustrates this:</p>
<div data-snippet-clipboard-copy-content="def f(x):
    del(x)
    print(x)

x = 5
y = [5, 4, 3]"><pre><span>def</span> <span>f</span>(<span>x</span>):
    <span>del</span>(<span>x</span>)
    <span>print</span>(<span>x</span>)

<span>x</span> <span>=</span> <span>5</span>
<span>y</span> <span>=</span> [<span>5</span>, <span>4</span>, <span>3</span>]</pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; f(x)
UnboundLocalError: local variable &#39;x&#39; referenced before assignment
&gt;&gt;&gt; f(y)
UnboundLocalError: local variable &#39;x&#39; referenced before assignment
&gt;&gt;&gt; x
5
&gt;&gt;&gt; y
[5, 4, 3]"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>f</span>(<span>x</span>)
<span>UnboundLocalError</span>: <span>local</span> <span>variable</span> <span>&#39;x&#39;</span> <span>referenced</span> <span>before</span> <span>assignment</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>f</span>(<span>y</span>)
<span>UnboundLocalError</span>: <span>local</span> <span>variable</span> <span>&#39;x&#39;</span> <span>referenced</span> <span>before</span> <span>assignment</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>x</span>
<span>5</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>y</span>
[<span>5</span>, <span>4</span>, <span>3</span>]</pre></div>
</li>
<li>
<p dir="auto">In Python 2.x, the variable name <code>e</code> gets assigned to <code>Exception()</code> instance, so when you try to print, it prints nothing.</p>
<p dir="auto"><strong>Output (Python 2.x):</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; e
Exception()
&gt;&gt;&gt; print e
# Nothing is printed!"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>e</span>
<span>Exception</span>()
<span>&gt;&gt;</span><span>&gt;</span> <span>print</span> <span>e</span>
<span># Nothing is printed!</span></pre></div>
</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--the-mysterious-key-type-conversion" aria-hidden="true" href="#-the-mysterious-key-type-conversion"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> The mysterious key type conversion</h3>

<div data-snippet-clipboard-copy-content="class SomeClass(str):
    pass

some_dict = {&#39;s&#39;: 42}"><pre><span>class</span> <span>SomeClass</span>(<span>str</span>):
    <span>pass</span>

<span>some_dict</span> <span>=</span> {<span>&#39;s&#39;</span>: <span>42</span>}</pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; type(list(some_dict.keys())[0])
str
&gt;&gt;&gt; s = SomeClass(&#39;s&#39;)
&gt;&gt;&gt; some_dict[s] = 40
&gt;&gt;&gt; some_dict # expected: Two different keys-value pairs
{&#39;s&#39;: 40}
&gt;&gt;&gt; type(list(some_dict.keys())[0])
str"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>type</span>(<span>list</span>(<span>some_dict</span>.<span>keys</span>())[<span>0</span>])
<span>str</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>s</span> <span>=</span> <span>SomeClass</span>(<span>&#39;s&#39;</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>some_dict</span>[<span>s</span>] <span>=</span> <span>40</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>some_dict</span> <span># expected: Two different keys-value pairs</span>
{<span>&#39;s&#39;</span>: <span>40</span>}
<span>&gt;&gt;</span><span>&gt;</span> <span>type</span>(<span>list</span>(<span>some_dict</span>.<span>keys</span>())[<span>0</span>])
<span>str</span></pre></div>
<h4 dir="auto"><a id="user-content--explanation-29" aria-hidden="true" href="#-explanation-29"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>
<p dir="auto">Both the object <code>s</code> and the string <code>&#34;s&#34;</code> hash to the same value because <code>SomeClass</code> inherits the <code>__hash__</code> method of <code>str</code> class.</p>
</li>
<li>
<p dir="auto"><code>SomeClass(&#34;s&#34;) == &#34;s&#34;</code> evaluates to <code>True</code> because <code>SomeClass</code> also inherits <code>__eq__</code> method from <code>str</code> class.</p>
</li>
<li>
<p dir="auto">Since both the objects hash to the same value and are equal, they are represented by the same key in the dictionary.</p>
</li>
<li>
<p dir="auto">For the desired behavior, we can redefine the <code>__eq__</code> method in <code>SomeClass</code></p>
<div data-snippet-clipboard-copy-content="class SomeClass(str):
  def __eq__(self, other):
      return (
          type(self) is SomeClass
          and type(other) is SomeClass
          and super().__eq__(other)
      )

  # When we define a custom __eq__, Python stops automatically inheriting the
  # __hash__ method, so we need to define it as well
  __hash__ = str.__hash__

some_dict = {&#39;s&#39;:42}"><pre><span>class</span> <span>SomeClass</span>(<span>str</span>):
  <span>def</span> <span>__eq__</span>(<span>self</span>, <span>other</span>):
      <span>return</span> (
          <span>type</span>(<span>self</span>) <span>is</span> <span>SomeClass</span>
          <span>and</span> <span>type</span>(<span>other</span>) <span>is</span> <span>SomeClass</span>
          <span>and</span> <span>super</span>().<span>__eq__</span>(<span>other</span>)
      )

  <span># When we define a custom __eq__, Python stops automatically inheriting the</span>
  <span># __hash__ method, so we need to define it as well</span>
  <span>__hash__</span> <span>=</span> <span>str</span>.<span>__hash__</span>

<span>some_dict</span> <span>=</span> {<span>&#39;s&#39;</span>:<span>42</span>}</pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; s = SomeClass(&#39;s&#39;)
&gt;&gt;&gt; some_dict[s] = 40
&gt;&gt;&gt; some_dict
{&#39;s&#39;: 40, &#39;s&#39;: 42}
&gt;&gt;&gt; keys = list(some_dict.keys())
&gt;&gt;&gt; type(keys[0]), type(keys[1])
(__main__.SomeClass, str)"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>s</span> <span>=</span> <span>SomeClass</span>(<span>&#39;s&#39;</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>some_dict</span>[<span>s</span>] <span>=</span> <span>40</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>some_dict</span>
{<span>&#39;s&#39;</span>: <span>40</span>, <span>&#39;s&#39;</span>: <span>42</span>}
<span>&gt;&gt;</span><span>&gt;</span> <span>keys</span> <span>=</span> <span>list</span>(<span>some_dict</span>.<span>keys</span>())
<span>&gt;&gt;</span><span>&gt;</span> <span>type</span>(<span>keys</span>[<span>0</span>]), <span>type</span>(<span>keys</span>[<span>1</span>])
(<span>__main__</span>.<span>SomeClass</span>, <span>str</span>)</pre></div>
</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--lets-see-if-you-can-guess-this" aria-hidden="true" href="#-lets-see-if-you-can-guess-this"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Let&#39;s see if you can guess this?</h3>

<div data-snippet-clipboard-copy-content="a, b = a[b] = {}, 5"><pre><span>a</span>, <span>b</span> <span>=</span> <span>a</span>[<span>b</span>] <span>=</span> {}, <span>5</span></pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; a
{5: ({...}, 5)}"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>a</span>
{<span>5</span>: ({...}, <span>5</span>)}</pre></div>
<h4 dir="auto"><a id="user-content--explanation-30" aria-hidden="true" href="#-explanation-30"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>According to <a href="https://docs.python.org/3/reference/simple_stmts.html#assignment-statements" rel="nofollow">Python language reference</a>, assignment statements have the form
<div data-snippet-clipboard-copy-content="(target_list &#34;=&#34;)+ (expression_list | yield_expression)"><pre><code>(target_list &#34;=&#34;)+ (expression_list | yield_expression)
</code></pre></div>
and</li>
</ul>
<blockquote>
<p dir="auto">An assignment statement evaluates the expression list (remember that this can be a single expression or a comma-separated list, the latter yielding a tuple) and assigns the single resulting object to each of the target lists, from left to right.</p>
</blockquote>
<ul dir="auto">
<li>
<p dir="auto">The <code>+</code> in <code>(target_list &#34;=&#34;)+</code> means there can be <strong>one or more</strong> target lists. In this case, target lists are <code>a, b</code> and <code>a[b]</code> (note the expression list is exactly one, which in our case is <code>{}, 5</code>).</p>
</li>
<li>
<p dir="auto">After the expression list is evaluated, its value is unpacked to the target lists from <strong>left to right</strong>. So, in our case, first the <code>{}, 5</code> tuple is unpacked to <code>a, b</code> and we now have <code>a = {}</code> and <code>b = 5</code>.</p>
</li>
<li>
<p dir="auto"><code>a</code> is now assigned to <code>{}</code>, which is a mutable object.</p>
</li>
<li>
<p dir="auto">The second target list is <code>a[b]</code> (you may expect this to throw an error because both <code>a</code> and <code>b</code> have not been defined in the statements before. But remember, we just assigned <code>a</code> to <code>{}</code> and <code>b</code> to <code>5</code>).</p>
</li>
<li>
<p dir="auto">Now, we are setting the key <code>5</code> in the dictionary to the tuple <code>({}, 5)</code> creating a circular reference (the <code>{...}</code> in the output refers to the same object that <code>a</code> is already referencing). Another simpler example of circular reference could be</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; some_list = some_list[0] = [0]
&gt;&gt;&gt; some_list
[[...]]
&gt;&gt;&gt; some_list[0]
[[...]]
&gt;&gt;&gt; some_list is some_list[0]
True
&gt;&gt;&gt; some_list[0][0][0][0][0][0] == some_list
True"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>some_list</span> <span>=</span> <span>some_list</span>[<span>0</span>] <span>=</span> [<span>0</span>]
<span>&gt;&gt;</span><span>&gt;</span> <span>some_list</span>
[[...]]
<span>&gt;&gt;</span><span>&gt;</span> <span>some_list</span>[<span>0</span>]
[[...]]
<span>&gt;&gt;</span><span>&gt;</span> <span>some_list</span> <span>is</span> <span>some_list</span>[<span>0</span>]
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>some_list</span>[<span>0</span>][<span>0</span>][<span>0</span>][<span>0</span>][<span>0</span>][<span>0</span>] <span>==</span> <span>some_list</span>
<span>True</span></pre></div>
<p dir="auto">Similar is the case in our example (<code>a[b][0]</code> is the same object as <code>a</code>)</p>
</li>
<li>
<p dir="auto">So to sum it up, you can break the example down to</p>
<div data-snippet-clipboard-copy-content="a, b = {}, 5
a[b] = a, b"><pre><span>a</span>, <span>b</span> <span>=</span> {}, <span>5</span>
<span>a</span>[<span>b</span>] <span>=</span> <span>a</span>, <span>b</span></pre></div>
<p dir="auto">And the circular reference can be justified by the fact that <code>a[b][0]</code> is the same object as <code>a</code></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; a[b][0] is a
True"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>a</span>[<span>b</span>][<span>0</span>] <span>is</span> <span>a</span>
<span>True</span></pre></div>
</li>
</ul>
<hr/>
<hr/>
<h2 dir="auto"><a id="user-content-section-slippery-slopes" aria-hidden="true" href="#section-slippery-slopes"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Section: Slippery Slopes</h2>
<h3 dir="auto"><a id="user-content--modifying-a-dictionary-while-iterating-over-it" aria-hidden="true" href="#-modifying-a-dictionary-while-iterating-over-it"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Modifying a dictionary while iterating over it</h3>

<div data-snippet-clipboard-copy-content="x = {0: None}

for i in x:
    del x[i]
    x[i+1] = None
    print(i)"><pre><span>x</span> <span>=</span> {<span>0</span>: <span>None</span>}

<span>for</span> <span>i</span> <span>in</span> <span>x</span>:
    <span>del</span> <span>x</span>[<span>i</span>]
    <span>x</span>[<span>i</span><span>+</span><span>1</span>] <span>=</span> <span>None</span>
    <span>print</span>(<span>i</span>)</pre></div>
<p dir="auto"><strong>Output (Python 2.7- Python 3.5):</strong></p>
<div data-snippet-clipboard-copy-content="0
1
2
3
4
5
6
7"><pre><code>0
1
2
3
4
5
6
7
</code></pre></div>
<p dir="auto">Yes, it runs for exactly <strong>eight</strong> times and stops.</p>
<h4 dir="auto"><a id="user-content--explanation-31" aria-hidden="true" href="#-explanation-31"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>Iteration over a dictionary that you edit at the same time is not supported.</li>
<li>It runs eight times because that&#39;s the point at which the dictionary resizes to hold more keys (we have eight deletion entries, so a resize is needed). This is actually an implementation detail.</li>
<li>How deleted keys are handled and when the resize occurs might be different for different Python implementations.</li>
<li>So for Python versions other than Python 2.7 - Python 3.5, the count might be different from 8 (but whatever the count is, it&#39;s going to be the same every time you run it). You can find some discussion around this <a href="https://github.com/satwikkansal/wtfpython/issues/53" data-hovercard-type="issue" data-hovercard-url="/satwikkansal/wtfpython/issues/53/hovercard">here</a> or in <a href="https://stackoverflow.com/questions/44763802/bug-in-python-dict" rel="nofollow">this</a> StackOverflow thread.</li>
<li>Python 3.7.6 onwards, you&#39;ll see <code>RuntimeError: dictionary keys changed during iteration</code> exception if you try to do this.</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--stubborn-del-operation" aria-hidden="true" href="#-stubborn-del-operation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Stubborn <code>del</code> operation</h3>


<div data-snippet-clipboard-copy-content="class SomeClass:
    def __del__(self):
        print(&#34;Deleted!&#34;)"><pre><span>class</span> <span>SomeClass</span>:
    <span>def</span> <span>__del__</span>(<span>self</span>):
        <span>print</span>(<span>&#34;Deleted!&#34;</span>)</pre></div>
<p dir="auto"><strong>Output:</strong>
1.</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; x = SomeClass()
&gt;&gt;&gt; y = x
&gt;&gt;&gt; del x # this should print &#34;Deleted!&#34;
&gt;&gt;&gt; del y
Deleted!"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>x</span> <span>=</span> <span>SomeClass</span>()
<span>&gt;&gt;</span><span>&gt;</span> <span>y</span> <span>=</span> <span>x</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>del</span> <span>x</span> <span># this should print &#34;Deleted!&#34;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>del</span> <span>y</span>
<span>Deleted</span>!</pre></div>
<p dir="auto">Phew, deleted at last. You might have guessed what saved <code>__del__</code> from being called in our first attempt to delete <code>x</code>. Let&#39;s add more twists to the example.</p>
<p dir="auto">2.</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; x = SomeClass()
&gt;&gt;&gt; y = x
&gt;&gt;&gt; del x
&gt;&gt;&gt; y # check if y exists
&lt;__main__.SomeClass instance at 0x7f98a1a67fc8&gt;
&gt;&gt;&gt; del y # Like previously, this should print &#34;Deleted!&#34;
&gt;&gt;&gt; globals() # oh, it didn&#39;t. Let&#39;s check all our global variables and confirm
Deleted!
{&#39;__builtins__&#39;: &lt;module &#39;__builtin__&#39; (built-in)&gt;, &#39;SomeClass&#39;: &lt;class __main__.SomeClass at 0x7f98a1a5f668&gt;, &#39;__package__&#39;: None, &#39;__name__&#39;: &#39;__main__&#39;, &#39;__doc__&#39;: None}"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>x</span> <span>=</span> <span>SomeClass</span>()
<span>&gt;&gt;</span><span>&gt;</span> <span>y</span> <span>=</span> <span>x</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>del</span> <span>x</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>y</span> <span># check if y exists</span>
<span>&lt;</span><span>__main__</span>.<span>SomeClass</span> <span>instance</span> <span>at</span> <span>0x7f98a1a67fc8</span><span>&gt;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>del</span> <span>y</span> <span># Like previously, this should print &#34;Deleted!&#34;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>globals</span>() <span># oh, it didn&#39;t. Let&#39;s check all our global variables and confirm</span>
<span>Deleted</span>!
{<span>&#39;__builtins__&#39;</span>: <span>&lt;</span><span>module</span> <span>&#39;__builtin__&#39;</span> (<span>built</span><span>-</span><span>in</span>)<span>&gt;</span>, <span>&#39;SomeClass&#39;</span>: <span>&lt;</span><span>class</span> <span>__main__</span>.<span>SomeClass</span> <span>at</span> <span>0x7f98a1a5f668</span><span>&gt;</span>, <span>&#39;__package__&#39;</span>: <span>None</span>, <span>&#39;__name__&#39;</span>: <span>&#39;__main__&#39;</span>, <span>&#39;__doc__&#39;</span>: <span>None</span>}</pre></div>
<p dir="auto">Okay, now it&#39;s deleted <g-emoji alias="confused" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f615.png">😕</g-emoji></p>
<h4 dir="auto"><a id="user-content--explanation-32" aria-hidden="true" href="#-explanation-32"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li><code>del x</code> doesn’t directly call <code>x.__del__()</code>.</li>
<li>When <code>del x</code> is encountered, Python deletes the name <code>x</code> from current scope and decrements by 1 the reference count of the object <code>x</code> referenced. <code>__del__()</code> is called only when the object&#39;s reference count reaches zero.</li>
<li>In the second output snippet, <code>__del__()</code> was not called because the previous statement (<code>&gt;&gt;&gt; y</code>) in the interactive interpreter created another reference to the same object (specifically, the <code>_</code> magic variable which references the result value of the last non <code>None</code> expression on the REPL), thus preventing the reference count from reaching zero when <code>del y</code> was encountered.</li>
<li>Calling <code>globals</code> (or really, executing anything that will have a non <code>None</code> result) caused <code>_</code> to reference the new result, dropping the existing reference. Now the reference count reached 0 and we can see &#34;Deleted!&#34; being printed (finally!).</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--the-out-of-scope-variable" aria-hidden="true" href="#-the-out-of-scope-variable"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> The out of scope variable</h3>

<p dir="auto">1.</p>
<div data-snippet-clipboard-copy-content="a = 1
def some_func():
    return a

def another_func():
    a += 1
    return a"><pre><span>a</span> <span>=</span> <span>1</span>
<span>def</span> <span>some_func</span>():
    <span>return</span> <span>a</span>

<span>def</span> <span>another_func</span>():
    <span>a</span> <span>+=</span> <span>1</span>
    <span>return</span> <span>a</span></pre></div>
<p dir="auto">2.</p>
<div data-snippet-clipboard-copy-content="def some_closure_func():
    a = 1
    def some_inner_func():
        return a
    return some_inner_func()

def another_closure_func():
    a = 1
    def another_inner_func():
        a += 1
        return a
    return another_inner_func()"><pre><span>def</span> <span>some_closure_func</span>():
    <span>a</span> <span>=</span> <span>1</span>
    <span>def</span> <span>some_inner_func</span>():
        <span>return</span> <span>a</span>
    <span>return</span> <span>some_inner_func</span>()

<span>def</span> <span>another_closure_func</span>():
    <span>a</span> <span>=</span> <span>1</span>
    <span>def</span> <span>another_inner_func</span>():
        <span>a</span> <span>+=</span> <span>1</span>
        <span>return</span> <span>a</span>
    <span>return</span> <span>another_inner_func</span>()</pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; some_func()
1
&gt;&gt;&gt; another_func()
UnboundLocalError: local variable &#39;a&#39; referenced before assignment

&gt;&gt;&gt; some_closure_func()
1
&gt;&gt;&gt; another_closure_func()
UnboundLocalError: local variable &#39;a&#39; referenced before assignment"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>some_func</span>()
<span>1</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>another_func</span>()
<span>UnboundLocalError</span>: <span>local</span> <span>variable</span> <span>&#39;a&#39;</span> <span>referenced</span> <span>before</span> <span>assignment</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>some_closure_func</span>()
<span>1</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>another_closure_func</span>()
<span>UnboundLocalError</span>: <span>local</span> <span>variable</span> <span>&#39;a&#39;</span> <span>referenced</span> <span>before</span> <span>assignment</span></pre></div>
<h4 dir="auto"><a id="user-content--explanation-33" aria-hidden="true" href="#-explanation-33"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>
<p dir="auto">When you make an assignment to a variable in scope, it becomes local to that scope. So <code>a</code> becomes local to the scope of <code>another_func</code>, but it has not been initialized previously in the same scope, which throws an error.</p>
</li>
<li>
<p dir="auto">To modify the outer scope variable <code>a</code> in <code>another_func</code>, we have to use the <code>global</code> keyword.</p>
<div data-snippet-clipboard-copy-content="def another_func()
    global a
    a += 1
    return a"><pre><span>def</span> <span>another_func</span>()
    <span>global</span> <span>a</span>
    <span>a</span> <span>+=</span> <span>1</span>
    <span>return</span> <span>a</span></pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; another_func()
2"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>another_func</span>()
<span>2</span></pre></div>
</li>
<li>
<p dir="auto">In <code>another_closure_func</code>, <code>a</code> becomes local to the scope of <code>another_inner_func</code>, but it has not been initialized previously in the same scope, which is why it throws an error.</p>
</li>
<li>
<p dir="auto">To modify the outer scope variable <code>a</code> in <code>another_inner_func</code>, use the <code>nonlocal</code> keyword. The nonlocal statement is used to refer to variables defined in the nearest outer (excluding the global) scope.</p>
<div data-snippet-clipboard-copy-content="def another_func():
    a = 1
    def another_inner_func():
        nonlocal a
        a += 1
        return a
    return another_inner_func()"><pre><span>def</span> <span>another_func</span>():
    <span>a</span> <span>=</span> <span>1</span>
    <span>def</span> <span>another_inner_func</span>():
        <span>nonlocal</span> <span>a</span>
        <span>a</span> <span>+=</span> <span>1</span>
        <span>return</span> <span>a</span>
    <span>return</span> <span>another_inner_func</span>()</pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; another_func()
2"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>another_func</span>()
<span>2</span></pre></div>
</li>
<li>
<p dir="auto">The keywords <code>global</code> and <code>nonlocal</code> tell the python interpreter to not declare new variables and look them up in the corresponding outer scopes.</p>
</li>
<li>
<p dir="auto">Read <a href="https://sebastianraschka.com/Articles/2014_python_scope_and_namespaces.html" rel="nofollow">this</a> short but an awesome guide to learn more about how namespaces and scope resolution works in Python.</p>
</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--deleting-a-list-item-while-iterating" aria-hidden="true" href="#-deleting-a-list-item-while-iterating"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Deleting a list item while iterating</h3>

<div data-snippet-clipboard-copy-content="list_1 = [1, 2, 3, 4]
list_2 = [1, 2, 3, 4]
list_3 = [1, 2, 3, 4]
list_4 = [1, 2, 3, 4]

for idx, item in enumerate(list_1):
    del item

for idx, item in enumerate(list_2):
    list_2.remove(item)

for idx, item in enumerate(list_3[:]):
    list_3.remove(item)

for idx, item in enumerate(list_4):
    list_4.pop(idx)"><pre><span>list_1</span> <span>=</span> [<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>]
<span>list_2</span> <span>=</span> [<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>]
<span>list_3</span> <span>=</span> [<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>]
<span>list_4</span> <span>=</span> [<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>]

<span>for</span> <span>idx</span>, <span>item</span> <span>in</span> <span>enumerate</span>(<span>list_1</span>):
    <span>del</span> <span>item</span>

<span>for</span> <span>idx</span>, <span>item</span> <span>in</span> <span>enumerate</span>(<span>list_2</span>):
    <span>list_2</span>.<span>remove</span>(<span>item</span>)

<span>for</span> <span>idx</span>, <span>item</span> <span>in</span> <span>enumerate</span>(<span>list_3</span>[:]):
    <span>list_3</span>.<span>remove</span>(<span>item</span>)

<span>for</span> <span>idx</span>, <span>item</span> <span>in</span> <span>enumerate</span>(<span>list_4</span>):
    <span>list_4</span>.<span>pop</span>(<span>idx</span>)</pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; list_1
[1, 2, 3, 4]
&gt;&gt;&gt; list_2
[2, 4]
&gt;&gt;&gt; list_3
[]
&gt;&gt;&gt; list_4
[2, 4]"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>list_1</span>
[<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>]
<span>&gt;&gt;</span><span>&gt;</span> <span>list_2</span>
[<span>2</span>, <span>4</span>]
<span>&gt;&gt;</span><span>&gt;</span> <span>list_3</span>
[]
<span>&gt;&gt;</span><span>&gt;</span> <span>list_4</span>
[<span>2</span>, <span>4</span>]</pre></div>
<p dir="auto">Can you guess why the output is <code>[2, 4]</code>?</p>
<h4 dir="auto"><a id="user-content--explanation-34" aria-hidden="true" href="#-explanation-34"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>
<p dir="auto">It&#39;s never a good idea to change the object you&#39;re iterating over. The correct way to do so is to iterate over a copy of the object instead, and <code>list_3[:]</code> does just that.</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; some_list = [1, 2, 3, 4]
&gt;&gt;&gt; id(some_list)
139798789457608
&gt;&gt;&gt; id(some_list[:]) # Notice that python creates new object for sliced list.
139798779601192"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>some_list</span> <span>=</span> [<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>]
<span>&gt;&gt;</span><span>&gt;</span> <span>id</span>(<span>some_list</span>)
<span>139798789457608</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>id</span>(<span>some_list</span>[:]) <span># Notice that python creates new object for sliced list.</span>
<span>139798779601192</span></pre></div>
</li>
</ul>
<p dir="auto"><strong>Difference between <code>del</code>, <code>remove</code>, and <code>pop</code>:</strong></p>
<ul dir="auto">
<li><code>del var_name</code> just removes the binding of the <code>var_name</code> from the local or global namespace (That&#39;s why the <code>list_1</code> is unaffected).</li>
<li><code>remove</code> removes the first matching value, not a specific index, raises <code>ValueError</code> if the value is not found.</li>
<li><code>pop</code> removes the element at a specific index and returns it, raises <code>IndexError</code> if an invalid index is specified.</li>
</ul>
<p dir="auto"><strong>Why the output is <code>[2, 4]</code>?</strong></p>
<ul dir="auto">
<li>The list iteration is done index by index, and when we remove <code>1</code> from <code>list_2</code> or <code>list_4</code>, the contents of the lists are now <code>[2, 3, 4]</code>. The remaining elements are shifted down, i.e., <code>2</code> is at index 0, and <code>3</code> is at index 1. Since the next iteration is going to look at index 1 (which is the <code>3</code>), the <code>2</code> gets skipped entirely. A similar thing will happen with every alternate element in the list sequence.</li>
</ul>
<ul dir="auto">
<li>Refer to this StackOverflow <a href="https://stackoverflow.com/questions/45946228/what-happens-when-you-try-to-delete-a-list-element-while-iterating-over-it" rel="nofollow">thread</a> explaining the example</li>
<li>See also this nice StackOverflow <a href="https://stackoverflow.com/questions/45877614/how-to-change-all-the-dictionary-keys-in-a-for-loop-with-d-items" rel="nofollow">thread</a> for a similar example related to dictionaries in Python.</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--lossy-zip-of-iterators-" aria-hidden="true" href="#-lossy-zip-of-iterators-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Lossy zip of iterators *</h3>

<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; numbers = list(range(7))
&gt;&gt;&gt; numbers
[0, 1, 2, 3, 4, 5, 6]
&gt;&gt;&gt; first_three, remaining = numbers[:3], numbers[3:]
&gt;&gt;&gt; first_three, remaining
([0, 1, 2], [3, 4, 5, 6])
&gt;&gt;&gt; numbers_iter = iter(numbers)
&gt;&gt;&gt; list(zip(numbers_iter, first_three)) 
[(0, 0), (1, 1), (2, 2)]
# so far so good, let&#39;s zip the remaining
&gt;&gt;&gt; list(zip(numbers_iter, remaining))
[(4, 3), (5, 4), (6, 5)]"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>numbers</span> <span>=</span> <span>list</span>(<span>range</span>(<span>7</span>))
<span>&gt;&gt;</span><span>&gt;</span> <span>numbers</span>
[<span>0</span>, <span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>, <span>5</span>, <span>6</span>]
<span>&gt;&gt;</span><span>&gt;</span> <span>first_three</span>, <span>remaining</span> <span>=</span> <span>numbers</span>[:<span>3</span>], <span>numbers</span>[<span>3</span>:]
<span>&gt;&gt;</span><span>&gt;</span> <span>first_three</span>, <span>remaining</span>
([<span>0</span>, <span>1</span>, <span>2</span>], [<span>3</span>, <span>4</span>, <span>5</span>, <span>6</span>])
<span>&gt;&gt;</span><span>&gt;</span> <span>numbers_iter</span> <span>=</span> <span>iter</span>(<span>numbers</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>list</span>(<span>zip</span>(<span>numbers_iter</span>, <span>first_three</span>)) 
[(<span>0</span>, <span>0</span>), (<span>1</span>, <span>1</span>), (<span>2</span>, <span>2</span>)]
<span># so far so good, let&#39;s zip the remaining</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>list</span>(<span>zip</span>(<span>numbers_iter</span>, <span>remaining</span>))
[(<span>4</span>, <span>3</span>), (<span>5</span>, <span>4</span>), (<span>6</span>, <span>5</span>)]</pre></div>
<p dir="auto">Where did element <code>3</code> go from the <code>numbers</code> list?</p>
<h4 dir="auto"><a id="user-content--explanation-35" aria-hidden="true" href="#-explanation-35"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>From Python <a href="https://docs.python.org/3.3/library/functions.html#zip" rel="nofollow">docs</a>, here&#39;s an approximate implementation of zip function,
<div data-snippet-clipboard-copy-content="def zip(*iterables):
    sentinel = object()
    iterators = [iter(it) for it in iterables]
    while iterators:
        result = []
        for it in iterators:
            elem = next(it, sentinel)
            if elem is sentinel: return
            result.append(elem)
        yield tuple(result)"><pre><span>def</span> <span>zip</span>(<span>*</span><span>iterables</span>):
    <span>sentinel</span> <span>=</span> <span>object</span>()
    <span>iterators</span> <span>=</span> [<span>iter</span>(<span>it</span>) <span>for</span> <span>it</span> <span>in</span> <span>iterables</span>]
    <span>while</span> <span>iterators</span>:
        <span>result</span> <span>=</span> []
        <span>for</span> <span>it</span> <span>in</span> <span>iterators</span>:
            <span>elem</span> <span>=</span> <span>next</span>(<span>it</span>, <span>sentinel</span>)
            <span>if</span> <span>elem</span> <span>is</span> <span>sentinel</span>: <span>return</span>
            <span>result</span>.<span>append</span>(<span>elem</span>)
        <span>yield</span> <span>tuple</span>(<span>result</span>)</pre></div>
</li>
<li>So the function takes in arbitrary number of iterable objects, adds each of their items to the <code>result</code> list by calling the <code>next</code> function on them, and stops whenever any of the iterable is exhausted.</li>
<li>The caveat here is when any iterable is exhausted, the existing elements in the <code>result</code> list are discarded. That&#39;s what happened with <code>3</code> in the <code>numbers_iter</code>.</li>
<li>The correct way to do the above using <code>zip</code> would be,
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; numbers = list(range(7))
&gt;&gt;&gt; numbers_iter = iter(numbers)
&gt;&gt;&gt; list(zip(first_three, numbers_iter))
[(0, 0), (1, 1), (2, 2)]
&gt;&gt;&gt; list(zip(remaining, numbers_iter))
[(3, 3), (4, 4), (5, 5), (6, 6)]"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>numbers</span> <span>=</span> <span>list</span>(<span>range</span>(<span>7</span>))
<span>&gt;&gt;</span><span>&gt;</span> <span>numbers_iter</span> <span>=</span> <span>iter</span>(<span>numbers</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>list</span>(<span>zip</span>(<span>first_three</span>, <span>numbers_iter</span>))
[(<span>0</span>, <span>0</span>), (<span>1</span>, <span>1</span>), (<span>2</span>, <span>2</span>)]
<span>&gt;&gt;</span><span>&gt;</span> <span>list</span>(<span>zip</span>(<span>remaining</span>, <span>numbers_iter</span>))
[(<span>3</span>, <span>3</span>), (<span>4</span>, <span>4</span>), (<span>5</span>, <span>5</span>), (<span>6</span>, <span>6</span>)]</pre></div>
The first argument of zip should be the one with fewest elements.</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--loop-variables-leaking-out" aria-hidden="true" href="#-loop-variables-leaking-out"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Loop variables leaking out!</h3>

<p dir="auto">1.</p>
<div data-snippet-clipboard-copy-content="for x in range(7):
    if x == 6:
        print(x, &#39;: for x inside loop&#39;)
print(x, &#39;: x in global&#39;)"><pre><span>for</span> <span>x</span> <span>in</span> <span>range</span>(<span>7</span>):
    <span>if</span> <span>x</span> <span>==</span> <span>6</span>:
        <span>print</span>(<span>x</span>, <span>&#39;: for x inside loop&#39;</span>)
<span>print</span>(<span>x</span>, <span>&#39;: x in global&#39;</span>)</pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="6 : for x inside loop
6 : x in global"><pre><span>6</span> : <span>for</span> <span>x</span> <span>inside</span> <span>loop</span>
<span>6</span> : <span>x</span> <span>in</span> <span>global</span></pre></div>
<p dir="auto">But <code>x</code> was never defined outside the scope of for loop...</p>
<p dir="auto">2.</p>
<div data-snippet-clipboard-copy-content="# This time let&#39;s initialize x first
x = -1
for x in range(7):
    if x == 6:
        print(x, &#39;: for x inside loop&#39;)
print(x, &#39;: x in global&#39;)"><pre><span># This time let&#39;s initialize x first</span>
<span>x</span> <span>=</span> <span>-</span><span>1</span>
<span>for</span> <span>x</span> <span>in</span> <span>range</span>(<span>7</span>):
    <span>if</span> <span>x</span> <span>==</span> <span>6</span>:
        <span>print</span>(<span>x</span>, <span>&#39;: for x inside loop&#39;</span>)
<span>print</span>(<span>x</span>, <span>&#39;: x in global&#39;</span>)</pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="6 : for x inside loop
6 : x in global"><pre><span>6</span> : <span>for</span> <span>x</span> <span>inside</span> <span>loop</span>
<span>6</span> : <span>x</span> <span>in</span> <span>global</span></pre></div>
<p dir="auto">3.</p>
<p dir="auto"><strong>Output (Python 2.x):</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; x = 1
&gt;&gt;&gt; print([x for x in range(5)])
[0, 1, 2, 3, 4]
&gt;&gt;&gt; print(x)
4"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>x</span> <span>=</span> <span>1</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>print</span>([<span>x</span> <span>for</span> <span>x</span> <span>in</span> <span>range</span>(<span>5</span>)])
[<span>0</span>, <span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>]
<span>&gt;&gt;</span><span>&gt;</span> <span>print</span>(<span>x</span>)
<span>4</span></pre></div>
<p dir="auto"><strong>Output (Python 3.x):</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; x = 1
&gt;&gt;&gt; print([x for x in range(5)])
[0, 1, 2, 3, 4]
&gt;&gt;&gt; print(x)
1"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>x</span> <span>=</span> <span>1</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>print</span>([<span>x</span> <span>for</span> <span>x</span> <span>in</span> <span>range</span>(<span>5</span>)])
[<span>0</span>, <span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>]
<span>&gt;&gt;</span><span>&gt;</span> <span>print</span>(<span>x</span>)
<span>1</span></pre></div>
<h4 dir="auto"><a id="user-content--explanation-36" aria-hidden="true" href="#-explanation-36"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>
<p dir="auto">In Python, for-loops use the scope they exist in and leave their defined loop-variable behind. This also applies if we explicitly defined the for-loop variable in the global namespace before. In this case, it will rebind the existing variable.</p>
</li>
<li>
<p dir="auto">The differences in the output of Python 2.x and Python 3.x interpreters for list comprehension example can be explained by following change documented in <a href="https://docs.python.org/3/whatsnew/3.0.html" rel="nofollow">What’s New In Python 3.0</a> changelog:</p>
<blockquote>
<p dir="auto">&#34;List comprehensions no longer support the syntactic form <code>[... for var in item1, item2, ...]</code>. Use <code>[... for var in (item1, item2, ...)]</code> instead. Also, note that list comprehensions have different semantics: they are closer to syntactic sugar for a generator expression inside a <code>list()</code> constructor, and in particular, the loop control variables are no longer leaked into the surrounding scope.&#34;</p>
</blockquote>
</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--beware-of-default-mutable-arguments" aria-hidden="true" href="#-beware-of-default-mutable-arguments"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Beware of default mutable arguments!</h3>

<div data-snippet-clipboard-copy-content="def some_func(default_arg=[]):
    default_arg.append(&#34;some_string&#34;)
    return default_arg"><pre><span>def</span> <span>some_func</span>(<span>default_arg</span><span>=</span>[]):
    <span>default_arg</span>.<span>append</span>(<span>&#34;some_string&#34;</span>)
    <span>return</span> <span>default_arg</span></pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; some_func()
[&#39;some_string&#39;]
&gt;&gt;&gt; some_func()
[&#39;some_string&#39;, &#39;some_string&#39;]
&gt;&gt;&gt; some_func([])
[&#39;some_string&#39;]
&gt;&gt;&gt; some_func()
[&#39;some_string&#39;, &#39;some_string&#39;, &#39;some_string&#39;]"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>some_func</span>()
[<span>&#39;some_string&#39;</span>]
<span>&gt;&gt;</span><span>&gt;</span> <span>some_func</span>()
[<span>&#39;some_string&#39;</span>, <span>&#39;some_string&#39;</span>]
<span>&gt;&gt;</span><span>&gt;</span> <span>some_func</span>([])
[<span>&#39;some_string&#39;</span>]
<span>&gt;&gt;</span><span>&gt;</span> <span>some_func</span>()
[<span>&#39;some_string&#39;</span>, <span>&#39;some_string&#39;</span>, <span>&#39;some_string&#39;</span>]</pre></div>
<h4 dir="auto"><a id="user-content--explanation-37" aria-hidden="true" href="#-explanation-37"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>
<p dir="auto">The default mutable arguments of functions in Python aren&#39;t really initialized every time you call the function. Instead, the recently assigned value to them is used as the default value. When we explicitly passed <code>[]</code> to <code>some_func</code> as the argument, the default value of the <code>default_arg</code> variable was not used, so the function returned as expected.</p>
<div data-snippet-clipboard-copy-content="def some_func(default_arg=[]):
    default_arg.append(&#34;some_string&#34;)
    return default_arg"><pre><span>def</span> <span>some_func</span>(<span>default_arg</span><span>=</span>[]):
    <span>default_arg</span>.<span>append</span>(<span>&#34;some_string&#34;</span>)
    <span>return</span> <span>default_arg</span></pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; some_func.__defaults__ #This will show the default argument values for the function
([],)
&gt;&gt;&gt; some_func()
&gt;&gt;&gt; some_func.__defaults__
([&#39;some_string&#39;],)
&gt;&gt;&gt; some_func()
&gt;&gt;&gt; some_func.__defaults__
([&#39;some_string&#39;, &#39;some_string&#39;],)
&gt;&gt;&gt; some_func([])
&gt;&gt;&gt; some_func.__defaults__
([&#39;some_string&#39;, &#39;some_string&#39;],)"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>some_func</span>.<span>__defaults__</span> <span>#This will show the default argument values for the function</span>
([],)
<span>&gt;&gt;</span><span>&gt;</span> <span>some_func</span>()
<span>&gt;&gt;</span><span>&gt;</span> <span>some_func</span>.<span>__defaults__</span>
([<span>&#39;some_string&#39;</span>],)
<span>&gt;&gt;</span><span>&gt;</span> <span>some_func</span>()
<span>&gt;&gt;</span><span>&gt;</span> <span>some_func</span>.<span>__defaults__</span>
([<span>&#39;some_string&#39;</span>, <span>&#39;some_string&#39;</span>],)
<span>&gt;&gt;</span><span>&gt;</span> <span>some_func</span>([])
<span>&gt;&gt;</span><span>&gt;</span> <span>some_func</span>.<span>__defaults__</span>
([<span>&#39;some_string&#39;</span>, <span>&#39;some_string&#39;</span>],)</pre></div>
</li>
<li>
<p dir="auto">A common practice to avoid bugs due to mutable arguments is to assign <code>None</code> as the default value and later check if any value is passed to the function corresponding to that argument. Example:</p>
<div data-snippet-clipboard-copy-content="def some_func(default_arg=None):
    if default_arg is None:
        default_arg = []
    default_arg.append(&#34;some_string&#34;)
    return default_arg"><pre><span>def</span> <span>some_func</span>(<span>default_arg</span><span>=</span><span>None</span>):
    <span>if</span> <span>default_arg</span> <span>is</span> <span>None</span>:
        <span>default_arg</span> <span>=</span> []
    <span>default_arg</span>.<span>append</span>(<span>&#34;some_string&#34;</span>)
    <span>return</span> <span>default_arg</span></pre></div>
</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--catching-the-exceptions" aria-hidden="true" href="#-catching-the-exceptions"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Catching the Exceptions</h3>

<div data-snippet-clipboard-copy-content="some_list = [1, 2, 3]
try:
    # This should raise an ``IndexError``
    print(some_list[4])
except IndexError, ValueError:
    print(&#34;Caught!&#34;)

try:
    # This should raise a ``ValueError``
    some_list.remove(4)
except IndexError, ValueError:
    print(&#34;Caught again!&#34;)"><pre><span>some_list</span> <span>=</span> [<span>1</span>, <span>2</span>, <span>3</span>]
<span>try</span>:
    <span># This should raise an ``IndexError``</span>
    <span>print</span>(<span>some_list</span>[<span>4</span>])
<span>except</span> <span>IndexError</span>, <span>ValueError</span>:
    <span>print</span>(<span>&#34;Caught!&#34;</span>)

<span>try</span>:
    <span># This should raise a ``ValueError``</span>
    <span>some_list</span>.<span>remove</span>(<span>4</span>)
<span>except</span> <span>IndexError</span>, <span>ValueError</span>:
    <span>print</span>(<span>&#34;Caught again!&#34;</span>)</pre></div>
<p dir="auto"><strong>Output (Python 2.x):</strong></p>
<div data-snippet-clipboard-copy-content="Caught!

ValueError: list.remove(x): x not in list"><pre><span>Caught</span>!

<span>ValueError</span>: <span>list</span>.<span>remove</span>(<span>x</span>): <span>x</span> <span>not</span> <span>in</span> <span>list</span></pre></div>
<p dir="auto"><strong>Output (Python 3.x):</strong></p>
<div data-snippet-clipboard-copy-content="  File &#34;&lt;input&gt;&#34;, line 3
    except IndexError, ValueError:
                     ^
SyntaxError: invalid syntax"><pre>  <span>File</span> <span>&#34;&lt;input&gt;&#34;</span>, <span>line</span> <span>3</span>
    <span>except</span> <span>IndexError</span>, <span>ValueError</span>:
                     <span>^</span>
<span>SyntaxError</span>: <span>invalid</span> <span>syntax</span></pre></div>
<h4 dir="auto"><a id="user-content--explanation-38" aria-hidden="true" href="#-explanation-38"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation</h4>
<ul dir="auto">
<li>
<p dir="auto">To add multiple Exceptions to the except clause, you need to pass them as parenthesized tuple as the first argument. The second argument is an optional name, which when supplied will bind the Exception instance that has been raised. Example,</p>
<div data-snippet-clipboard-copy-content="some_list = [1, 2, 3]
try:
   # This should raise a ``ValueError``
   some_list.remove(4)
except (IndexError, ValueError), e:
   print(&#34;Caught again!&#34;)
   print(e)"><pre><span>some_list</span> <span>=</span> [<span>1</span>, <span>2</span>, <span>3</span>]
<span>try</span>:
   <span># This should raise a ``ValueError``</span>
   <span>some_list</span>.<span>remove</span>(<span>4</span>)
<span>except</span> (<span>IndexError</span>, <span>ValueError</span>), <span>e</span>:
   <span>print</span>(<span>&#34;Caught again!&#34;</span>)
   <span>print</span>(<span>e</span>)</pre></div>
<p dir="auto"><strong>Output (Python 2.x):</strong></p>
<div data-snippet-clipboard-copy-content="Caught again!
list.remove(x): x not in list"><pre><code>Caught again!
list.remove(x): x not in list
</code></pre></div>
<p dir="auto"><strong>Output (Python 3.x):</strong></p>
<div data-snippet-clipboard-copy-content="  File &#34;&lt;input&gt;&#34;, line 4
    except (IndexError, ValueError), e:
                                     ^
IndentationError: unindent does not match any outer indentation level"><pre>  <span>File</span> <span>&#34;&lt;input&gt;&#34;</span>, <span>line</span> <span>4</span>
    <span>except</span> (<span>IndexError</span>, <span>ValueError</span>), <span>e</span>:
                                     <span>^</span>
<span>IndentationError</span>: <span>unindent</span> <span>does</span> <span>not</span> <span>match</span> <span>any</span> <span>outer</span> <span>indentation</span> <span>level</span></pre></div>
</li>
<li>
<p dir="auto">Separating the exception from the variable with a comma is deprecated and does not work in Python 3; the correct way is to use <code>as</code>. Example,</p>
<div data-snippet-clipboard-copy-content="some_list = [1, 2, 3]
try:
    some_list.remove(4)

except (IndexError, ValueError) as e:
    print(&#34;Caught again!&#34;)
    print(e)"><pre><span>some_list</span> <span>=</span> [<span>1</span>, <span>2</span>, <span>3</span>]
<span>try</span>:
    <span>some_list</span>.<span>remove</span>(<span>4</span>)

<span>except</span> (<span>IndexError</span>, <span>ValueError</span>) <span>as</span> <span>e</span>:
    <span>print</span>(<span>&#34;Caught again!&#34;</span>)
    <span>print</span>(<span>e</span>)</pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="Caught again!
list.remove(x): x not in list"><pre><code>Caught again!
list.remove(x): x not in list
</code></pre></div>
</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--same-operands-different-story" aria-hidden="true" href="#-same-operands-different-story"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Same operands, different story!</h3>

<p dir="auto">1.</p>
<div data-snippet-clipboard-copy-content="a = [1, 2, 3, 4]
b = a
a = a + [5, 6, 7, 8]"><pre><span>a</span> <span>=</span> [<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>]
<span>b</span> <span>=</span> <span>a</span>
<span>a</span> <span>=</span> <span>a</span> <span>+</span> [<span>5</span>, <span>6</span>, <span>7</span>, <span>8</span>]</pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; a
[1, 2, 3, 4, 5, 6, 7, 8]
&gt;&gt;&gt; b
[1, 2, 3, 4]"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>a</span>
[<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>, <span>5</span>, <span>6</span>, <span>7</span>, <span>8</span>]
<span>&gt;&gt;</span><span>&gt;</span> <span>b</span>
[<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>]</pre></div>
<p dir="auto">2.</p>
<div data-snippet-clipboard-copy-content="a = [1, 2, 3, 4]
b = a
a += [5, 6, 7, 8]"><pre><span>a</span> <span>=</span> [<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>]
<span>b</span> <span>=</span> <span>a</span>
<span>a</span> <span>+=</span> [<span>5</span>, <span>6</span>, <span>7</span>, <span>8</span>]</pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; a
[1, 2, 3, 4, 5, 6, 7, 8]
&gt;&gt;&gt; b
[1, 2, 3, 4, 5, 6, 7, 8]"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>a</span>
[<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>, <span>5</span>, <span>6</span>, <span>7</span>, <span>8</span>]
<span>&gt;&gt;</span><span>&gt;</span> <span>b</span>
[<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>, <span>5</span>, <span>6</span>, <span>7</span>, <span>8</span>]</pre></div>
<h4 dir="auto"><a id="user-content--explanation-39" aria-hidden="true" href="#-explanation-39"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>
<p dir="auto"><code>a += b</code> doesn&#39;t always behave the same way as <code>a = a + b</code>.  Classes <em>may</em> implement the <em><code>op=</code></em> operators differently, and lists do this.</p>
</li>
<li>
<p dir="auto">The expression <code>a = a + [5,6,7,8]</code> generates a new list and sets <code>a</code>&#39;s reference to that new list, leaving <code>b</code> unchanged.</p>
</li>
<li>
<p dir="auto">The expression <code>a += [5,6,7,8]</code> is actually mapped to an &#34;extend&#34; function that operates on the list such that <code>a</code> and <code>b</code> still point to the same list that has been modified in-place.</p>
</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--name-resolution-ignoring-class-scope" aria-hidden="true" href="#-name-resolution-ignoring-class-scope"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Name resolution ignoring class scope</h3>

<p dir="auto">1.</p>
<div data-snippet-clipboard-copy-content="x = 5
class SomeClass:
    x = 17
    y = (x for i in range(10))"><pre><span>x</span> <span>=</span> <span>5</span>
<span>class</span> <span>SomeClass</span>:
    <span>x</span> <span>=</span> <span>17</span>
    <span>y</span> <span>=</span> (<span>x</span> <span>for</span> <span>i</span> <span>in</span> <span>range</span>(<span>10</span>))</pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; list(SomeClass.y)[0]
5"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>list</span>(<span>SomeClass</span>.<span>y</span>)[<span>0</span>]
<span>5</span></pre></div>
<p dir="auto">2.</p>
<div data-snippet-clipboard-copy-content="x = 5
class SomeClass:
    x = 17
    y = [x for i in range(10)]"><pre><span>x</span> <span>=</span> <span>5</span>
<span>class</span> <span>SomeClass</span>:
    <span>x</span> <span>=</span> <span>17</span>
    <span>y</span> <span>=</span> [<span>x</span> <span>for</span> <span>i</span> <span>in</span> <span>range</span>(<span>10</span>)]</pre></div>
<p dir="auto"><strong>Output (Python 2.x):</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; SomeClass.y[0]
17"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>SomeClass</span>.<span>y</span>[<span>0</span>]
<span>17</span></pre></div>
<p dir="auto"><strong>Output (Python 3.x):</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; SomeClass.y[0]
5"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>SomeClass</span>.<span>y</span>[<span>0</span>]
<span>5</span></pre></div>
<h4 dir="auto"><a id="user-content--explanation-40" aria-hidden="true" href="#-explanation-40"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation</h4>
<ul dir="auto">
<li>Scopes nested inside class definition ignore names bound at the class level.</li>
<li>A generator expression has its own scope.</li>
<li>Starting from Python 3.X, list comprehensions also have their own scope.</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--rounding-like-a-banker-" aria-hidden="true" href="#-rounding-like-a-banker-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Rounding like a banker *</h3>
<p dir="auto">Let&#39;s implement a naive function to get the middle element of a list:</p>
<div data-snippet-clipboard-copy-content="def get_middle(some_list):
    mid_index = round(len(some_list) / 2)
    return some_list[mid_index - 1]"><pre><span>def</span> <span>get_middle</span>(<span>some_list</span>):
    <span>mid_index</span> <span>=</span> <span>round</span>(<span>len</span>(<span>some_list</span>) <span>/</span> <span>2</span>)
    <span>return</span> <span>some_list</span>[<span>mid_index</span> <span>-</span> <span>1</span>]</pre></div>
<p dir="auto"><strong>Python 3.x:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; get_middle([1])  # looks good
1
&gt;&gt;&gt; get_middle([1,2,3])  # looks good
2
&gt;&gt;&gt; get_middle([1,2,3,4,5])  # huh?
2
&gt;&gt;&gt; len([1,2,3,4,5]) / 2  # good
2.5
&gt;&gt;&gt; round(len([1,2,3,4,5]) / 2)  # why?
2"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>get_middle</span>([<span>1</span>])  <span># looks good</span>
<span>1</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>get_middle</span>([<span>1</span>,<span>2</span>,<span>3</span>])  <span># looks good</span>
<span>2</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>get_middle</span>([<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span>,<span>5</span>])  <span># huh?</span>
<span>2</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>len</span>([<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span>,<span>5</span>]) <span>/</span> <span>2</span>  <span># good</span>
<span>2.5</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>round</span>(<span>len</span>([<span>1</span>,<span>2</span>,<span>3</span>,<span>4</span>,<span>5</span>]) <span>/</span> <span>2</span>)  <span># why?</span>
<span>2</span></pre></div>
<p dir="auto">It seems as though Python rounded 2.5 to 2.</p>
<h4 dir="auto"><a id="user-content--explanation-41" aria-hidden="true" href="#-explanation-41"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>This is not a float precision error, in fact, this behavior is intentional. Since Python 3.0, <code>round()</code> uses <a href="https://en.wikipedia.org/wiki/Rounding#Round_half_to_even" rel="nofollow">banker&#39;s rounding</a> where .5 fractions are rounded to the nearest <strong>even</strong> number:</li>
</ul>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; round(0.5)
0
&gt;&gt;&gt; round(1.5)
2
&gt;&gt;&gt; round(2.5)
2
&gt;&gt;&gt; import numpy  # numpy does the same
&gt;&gt;&gt; numpy.round(0.5)
0.0
&gt;&gt;&gt; numpy.round(1.5)
2.0
&gt;&gt;&gt; numpy.round(2.5)
2.0"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>round</span>(<span>0.5</span>)
<span>0</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>round</span>(<span>1.5</span>)
<span>2</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>round</span>(<span>2.5</span>)
<span>2</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>import</span> <span>numpy</span>  <span># numpy does the same</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>numpy</span>.<span>round</span>(<span>0.5</span>)
<span>0.0</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>numpy</span>.<span>round</span>(<span>1.5</span>)
<span>2.0</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>numpy</span>.<span>round</span>(<span>2.5</span>)
<span>2.0</span></pre></div>
<ul dir="auto">
<li>This is the recommended way to round .5 fractions as described in <a href="https://en.wikipedia.org/wiki/IEEE_754#Rounding_rules" rel="nofollow">IEEE 754</a>. However, the other way (round away from zero) is taught in school most of the time, so banker&#39;s rounding is likely not that well known. Furthermore, some of the most popular programming languages (for example: JavaScript, Java, C/C++, Ruby, Rust) do not use banker&#39;s rounding either. Therefore, this is still quite special to Python and may result in confusion when rounding fractions.</li>
<li>See the <a href="https://docs.python.org/3/library/functions.html#round" rel="nofollow">round() docs</a> or <a href="https://stackoverflow.com/questions/10825926/python-3-x-rounding-behavior" rel="nofollow">this stackoverflow thread</a> for more information.</li>
<li>Note that <code>get_middle([1])</code> only returned 1 because the index was <code>round(0.5) - 1 = 0 - 1 = -1</code>, returning the last element in the list.</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--needles-in-a-haystack-" aria-hidden="true" href="#-needles-in-a-haystack-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Needles in a Haystack *</h3>

<p dir="auto">I haven&#39;t met even a single experience Pythonist till date who has not come across one or more of the following scenarios,</p>
<p dir="auto">1.</p>
<div data-snippet-clipboard-copy-content="x, y = (0, 1) if True else None, None"><pre><span>x</span>, <span>y</span> <span>=</span> (<span>0</span>, <span>1</span>) <span>if</span> <span>True</span> <span>else</span> <span>None</span>, <span>None</span></pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; x, y  # expected (0, 1)
((0, 1), None)"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>x</span>, <span>y</span>  <span># expected (0, 1)</span>
((<span>0</span>, <span>1</span>), <span>None</span>)</pre></div>
<p dir="auto">2.</p>
<div data-snippet-clipboard-copy-content="t = (&#39;one&#39;, &#39;two&#39;)
for i in t:
    print(i)

t = (&#39;one&#39;)
for i in t:
    print(i)

t = ()
print(t)"><pre><span>t</span> <span>=</span> (<span>&#39;one&#39;</span>, <span>&#39;two&#39;</span>)
<span>for</span> <span>i</span> <span>in</span> <span>t</span>:
    <span>print</span>(<span>i</span>)

<span>t</span> <span>=</span> (<span>&#39;one&#39;</span>)
<span>for</span> <span>i</span> <span>in</span> <span>t</span>:
    <span>print</span>(<span>i</span>)

<span>t</span> <span>=</span> ()
<span>print</span>(<span>t</span>)</pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="one
two
o
n
e
tuple()"><pre><span>one</span>
<span>two</span>
<span>o</span>
<span>n</span>
<span>e</span>
<span>tuple</span>()</pre></div>
<p dir="auto">3.</p>
<div data-snippet-clipboard-copy-content="ten_words_list = [
    &#34;some&#34;,
    &#34;very&#34;,
    &#34;big&#34;,
    &#34;list&#34;,
    &#34;that&#34;
    &#34;consists&#34;,
    &#34;of&#34;,
    &#34;exactly&#34;,
    &#34;ten&#34;,
    &#34;words&#34;
]"><pre><code>ten_words_list = [
    &#34;some&#34;,
    &#34;very&#34;,
    &#34;big&#34;,
    &#34;list&#34;,
    &#34;that&#34;
    &#34;consists&#34;,
    &#34;of&#34;,
    &#34;exactly&#34;,
    &#34;ten&#34;,
    &#34;words&#34;
]
</code></pre></div>
<p dir="auto"><strong>Output</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; len(ten_words_list)
9"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>len</span>(<span>ten_words_list</span>)
<span>9</span></pre></div>
<p dir="auto">4. Not asserting strongly enough</p>
<div data-snippet-clipboard-copy-content="a = &#34;python&#34;
b = &#34;javascript&#34;"><pre><span>a</span> <span>=</span> <span>&#34;python&#34;</span>
<span>b</span> <span>=</span> <span>&#34;javascript&#34;</span></pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="# An assert statement with an assertion failure message.
&gt;&gt;&gt; assert(a == b, &#34;Both languages are different&#34;)
# No AssertionError is raised"><pre><span># An assert statement with an assertion failure message.</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>assert</span>(<span>a</span> <span>==</span> <span>b</span>, <span>&#34;Both languages are different&#34;</span>)
<span># No AssertionError is raised</span></pre></div>
<p dir="auto">5.</p>
<div data-snippet-clipboard-copy-content="some_list = [1, 2, 3]
some_dict = {
  &#34;key_1&#34;: 1,
  &#34;key_2&#34;: 2,
  &#34;key_3&#34;: 3
}

some_list = some_list.append(4) 
some_dict = some_dict.update({&#34;key_4&#34;: 4})"><pre><span>some_list</span> <span>=</span> [<span>1</span>, <span>2</span>, <span>3</span>]
<span>some_dict</span> <span>=</span> {
  <span>&#34;key_1&#34;</span>: <span>1</span>,
  <span>&#34;key_2&#34;</span>: <span>2</span>,
  <span>&#34;key_3&#34;</span>: <span>3</span>
}

<span>some_list</span> <span>=</span> <span>some_list</span>.<span>append</span>(<span>4</span>) 
<span>some_dict</span> <span>=</span> <span>some_dict</span>.<span>update</span>({<span>&#34;key_4&#34;</span>: <span>4</span>})</pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; print(some_list)
None
&gt;&gt;&gt; print(some_dict)
None"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>print</span>(<span>some_list</span>)
<span>None</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>print</span>(<span>some_dict</span>)
<span>None</span></pre></div>
<p dir="auto">6.</p>
<div data-snippet-clipboard-copy-content="def some_recursive_func(a):
    if a[0] == 0:
        return
    a[0] -= 1
    some_recursive_func(a)
    return a

def similar_recursive_func(a):
    if a == 0:
        return a
    a -= 1
    similar_recursive_func(a)
    return a"><pre><span>def</span> <span>some_recursive_func</span>(<span>a</span>):
    <span>if</span> <span>a</span>[<span>0</span>] <span>==</span> <span>0</span>:
        <span>return</span>
    <span>a</span>[<span>0</span>] <span>-=</span> <span>1</span>
    <span>some_recursive_func</span>(<span>a</span>)
    <span>return</span> <span>a</span>

<span>def</span> <span>similar_recursive_func</span>(<span>a</span>):
    <span>if</span> <span>a</span> <span>==</span> <span>0</span>:
        <span>return</span> <span>a</span>
    <span>a</span> <span>-=</span> <span>1</span>
    <span>similar_recursive_func</span>(<span>a</span>)
    <span>return</span> <span>a</span></pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; some_recursive_func([5, 0])
[0, 0]
&gt;&gt;&gt; similar_recursive_func(5)
4"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>some_recursive_func</span>([<span>5</span>, <span>0</span>])
[<span>0</span>, <span>0</span>]
<span>&gt;&gt;</span><span>&gt;</span> <span>similar_recursive_func</span>(<span>5</span>)
<span>4</span></pre></div>
<h4 dir="auto"><a id="user-content--explanation-42" aria-hidden="true" href="#-explanation-42"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>
<p dir="auto">For 1, the correct statement for expected behavior is <code>x, y = (0, 1) if True else (None, None)</code>.</p>
</li>
<li>
<p dir="auto">For 2, the correct statement for expected behavior is <code>t = (&#39;one&#39;,)</code> or <code>t = &#39;one&#39;,</code> (missing comma) otherwise the interpreter considers <code>t</code> to be a <code>str</code> and iterates over it character by character.</p>
</li>
<li>
<p dir="auto"><code>()</code> is a special token and denotes empty <code>tuple</code>.</p>
</li>
<li>
<p dir="auto">In 3, as you might have already figured out, there&#39;s a missing comma after 5th element (<code>&#34;that&#34;</code>) in the list. So by implicit string literal concatenation,</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; ten_words_list
[&#39;some&#39;, &#39;very&#39;, &#39;big&#39;, &#39;list&#39;, &#39;thatconsists&#39;, &#39;of&#39;, &#39;exactly&#39;, &#39;ten&#39;, &#39;words&#39;]"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>ten_words_list</span>
[<span>&#39;some&#39;</span>, <span>&#39;very&#39;</span>, <span>&#39;big&#39;</span>, <span>&#39;list&#39;</span>, <span>&#39;thatconsists&#39;</span>, <span>&#39;of&#39;</span>, <span>&#39;exactly&#39;</span>, <span>&#39;ten&#39;</span>, <span>&#39;words&#39;</span>]</pre></div>
</li>
<li>
<p dir="auto">No <code>AssertionError</code> was raised in 4th snippet because instead of asserting the individual expression <code>a == b</code>, we&#39;re asserting entire tuple. The following snippet will clear things up,</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; a = &#34;python&#34;
&gt;&gt;&gt; b = &#34;javascript&#34;
&gt;&gt;&gt; assert a == b
Traceback (most recent call last):
    File &#34;&lt;stdin&gt;&#34;, line 1, in &lt;module&gt;
AssertionError

&gt;&gt;&gt; assert (a == b, &#34;Values are not equal&#34;)
&lt;stdin&gt;:1: SyntaxWarning: assertion is always true, perhaps remove parentheses?

&gt;&gt;&gt; assert a == b, &#34;Values are not equal&#34;
Traceback (most recent call last):
    File &#34;&lt;stdin&gt;&#34;, line 1, in &lt;module&gt;
AssertionError: Values are not equal"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>=</span> <span>&#34;python&#34;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>b</span> <span>=</span> <span>&#34;javascript&#34;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>assert</span> <span>a</span> <span>==</span> <span>b</span>
<span>Traceback</span> (<span>most</span> <span>recent</span> <span>call</span> <span>last</span>):
    <span>File</span> <span>&#34;&lt;stdin&gt;&#34;</span>, <span>line</span> <span>1</span>, <span>in</span> <span>&lt;</span><span>module</span><span>&gt;</span>
<span>AssertionError</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>assert</span> (<span>a</span> <span>==</span> <span>b</span>, <span>&#34;Values are not equal&#34;</span>)
<span>&lt;</span><span>stdin</span><span>&gt;</span>:<span>1</span>: <span>SyntaxWarning</span>: <span>assertion</span> <span>is</span> <span>always</span> <span>true</span>, <span>perhaps</span> <span>remove</span> <span>parentheses</span>?

<span>&gt;&gt;</span><span>&gt;</span> <span>assert</span> <span>a</span> <span>==</span> <span>b</span>, <span>&#34;Values are not equal&#34;</span>
<span>Traceback</span> (<span>most</span> <span>recent</span> <span>call</span> <span>last</span>):
    <span>File</span> <span>&#34;&lt;stdin&gt;&#34;</span>, <span>line</span> <span>1</span>, <span>in</span> <span>&lt;</span><span>module</span><span>&gt;</span>
<span>AssertionError</span>: <span>Values</span> <span>are</span> <span>not</span> <span>equal</span></pre></div>
</li>
<li>
<p dir="auto">As for the fifth snippet, most methods that modify the items of sequence/mapping objects like <code>list.append</code>, <code>dict.update</code>, <code>list.sort</code>, etc. modify the objects in-place and return <code>None</code>. The rationale behind this is to improve performance by avoiding making a copy of the object if the operation can be done in-place (Referred from <a href="https://docs.python.org/3/faq/design.html#why-doesn-t-list-sort-return-the-sorted-list" rel="nofollow">here</a>).</p>
</li>
<li>
<p dir="auto">Last one should be fairly obvious, mutable object (like <code>list</code>) can be altered in the function, and the reassignment of an immutable (<code>a -= 1</code>) is not an alteration of the value.</p>
</li>
<li>
<p dir="auto">Being aware of these nitpicks can save you hours of debugging effort in the long run.</p>
</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--splitsies-" aria-hidden="true" href="#-splitsies-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Splitsies *</h3>

<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; &#39;a&#39;.split()
[&#39;a&#39;]

# is same as
&gt;&gt;&gt; &#39;a&#39;.split(&#39; &#39;)
[&#39;a&#39;]

# but
&gt;&gt;&gt; len(&#39;&#39;.split())
0

# isn&#39;t the same as
&gt;&gt;&gt; len(&#39;&#39;.split(&#39; &#39;))
1"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>&#39;a&#39;</span>.<span>split</span>()
[<span>&#39;a&#39;</span>]

<span># is same as</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>&#39;a&#39;</span>.<span>split</span>(<span>&#39; &#39;</span>)
[<span>&#39;a&#39;</span>]

<span># but</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>len</span>(<span>&#39;&#39;</span>.<span>split</span>())
<span>0</span>

<span># isn&#39;t the same as</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>len</span>(<span>&#39;&#39;</span>.<span>split</span>(<span>&#39; &#39;</span>))
<span>1</span></pre></div>
<h4 dir="auto"><a id="user-content--explanation-43" aria-hidden="true" href="#-explanation-43"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>It might appear at first that the default separator for split is a single space <code>&#39; &#39;</code>, but as per the <a href="https://docs.python.org/3/library/stdtypes.html#str.split" rel="nofollow">docs</a>
<blockquote>
<p dir="auto">If sep is not specified or is <code>None</code>, a different splitting algorithm is applied: runs of consecutive whitespace are regarded as a single separator, and the result will contain no empty strings at the start or end if the string has leading or trailing whitespace. Consequently, splitting an empty string or a string consisting of just whitespace with a None separator returns <code>[]</code>.
If sep is given, consecutive delimiters are not grouped together and are deemed to delimit empty strings (for example, <code>&#39;1,,2&#39;.split(&#39;,&#39;)</code> returns <code>[&#39;1&#39;, &#39;&#39;, &#39;2&#39;]</code>). Splitting an empty string with a specified separator returns <code>[&#39;&#39;]</code>.</p>
</blockquote>
</li>
<li>Noticing how the leading and trailing whitespaces are handled in the following snippet will make things clear,
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; &#39; a &#39;.split(&#39; &#39;)
[&#39;&#39;, &#39;a&#39;, &#39;&#39;]
&gt;&gt;&gt; &#39; a &#39;.split()
[&#39;a&#39;]
&gt;&gt;&gt; &#39;&#39;.split(&#39; &#39;)
[&#39;&#39;]"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>&#39; a &#39;</span>.<span>split</span>(<span>&#39; &#39;</span>)
[<span>&#39;&#39;</span>, <span>&#39;a&#39;</span>, <span>&#39;&#39;</span>]
<span>&gt;&gt;</span><span>&gt;</span> <span>&#39; a &#39;</span>.<span>split</span>()
[<span>&#39;a&#39;</span>]
<span>&gt;&gt;</span><span>&gt;</span> <span>&#39;&#39;</span>.<span>split</span>(<span>&#39; &#39;</span>)
[<span>&#39;&#39;</span>]</pre></div>
</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--wild-imports-" aria-hidden="true" href="#-wild-imports-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Wild imports *</h3>


<div data-snippet-clipboard-copy-content="# File: module.py

def some_weird_name_func_():
    print(&#34;works!&#34;)

def _another_weird_name_func():
    print(&#34;works!&#34;)
"><pre><span># File: module.py</span>

<span>def</span> <span>some_weird_name_func_</span>():
    <span>print</span>(<span>&#34;works!&#34;</span>)

<span>def</span> <span>_another_weird_name_func</span>():
    <span>print</span>(<span>&#34;works!&#34;</span>)</pre></div>
<p dir="auto"><strong>Output</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; from module import *
&gt;&gt;&gt; some_weird_name_func_()
&#34;works!&#34;
&gt;&gt;&gt; _another_weird_name_func()
Traceback (most recent call last):
  File &#34;&lt;stdin&gt;&#34;, line 1, in &lt;module&gt;
NameError: name &#39;_another_weird_name_func&#39; is not defined"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>from</span> <span>module</span> <span>import</span> <span>*</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>some_weird_name_func_</span>()
<span>&#34;works!&#34;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>_another_weird_name_func</span>()
<span>Traceback</span> (<span>most</span> <span>recent</span> <span>call</span> <span>last</span>):
  <span>File</span> <span>&#34;&lt;stdin&gt;&#34;</span>, <span>line</span> <span>1</span>, <span>in</span> <span>&lt;</span><span>module</span><span>&gt;</span>
<span>NameError</span>: <span>name</span> <span>&#39;_another_weird_name_func&#39;</span> <span>is</span> <span>not</span> <span>defined</span></pre></div>
<h4 dir="auto"><a id="user-content--explanation-44" aria-hidden="true" href="#-explanation-44"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>
<p dir="auto">It is often advisable to not use wildcard imports. The first obvious reason for this is, in wildcard imports, the names with a leading underscore don&#39;t get imported. This may lead to errors during runtime.</p>
</li>
<li>
<p dir="auto">Had we used <code>from ... import a, b, c</code> syntax, the above <code>NameError</code> wouldn&#39;t have occurred.</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; from module import some_weird_name_func_, _another_weird_name_func
&gt;&gt;&gt; _another_weird_name_func()
works!"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>from</span> <span>module</span> <span>import</span> <span>some_weird_name_func_</span>, <span>_another_weird_name_func</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>_another_weird_name_func</span>()
<span>works</span>!</pre></div>
</li>
<li>
<p dir="auto">If you really want to use wildcard imports, then you&#39;d have to define the list <code>__all__</code> in your module that will contain a list of public objects that&#39;ll be available when we do wildcard imports.</p>
<div data-snippet-clipboard-copy-content="__all__ = [&#39;_another_weird_name_func&#39;]

def some_weird_name_func_():
    print(&#34;works!&#34;)

def _another_weird_name_func():
    print(&#34;works!&#34;)"><pre><span>__all__</span> <span>=</span> [<span>&#39;_another_weird_name_func&#39;</span>]

<span>def</span> <span>some_weird_name_func_</span>():
    <span>print</span>(<span>&#34;works!&#34;</span>)

<span>def</span> <span>_another_weird_name_func</span>():
    <span>print</span>(<span>&#34;works!&#34;</span>)</pre></div>
<p dir="auto"><strong>Output</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; _another_weird_name_func()
&#34;works!&#34;
&gt;&gt;&gt; some_weird_name_func_()
Traceback (most recent call last):
  File &#34;&lt;stdin&gt;&#34;, line 1, in &lt;module&gt;
NameError: name &#39;some_weird_name_func_&#39; is not defined"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>_another_weird_name_func</span>()
<span>&#34;works!&#34;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>some_weird_name_func_</span>()
<span>Traceback</span> (<span>most</span> <span>recent</span> <span>call</span> <span>last</span>):
  <span>File</span> <span>&#34;&lt;stdin&gt;&#34;</span>, <span>line</span> <span>1</span>, <span>in</span> <span>&lt;</span><span>module</span><span>&gt;</span>
<span>NameError</span>: <span>name</span> <span>&#39;some_weird_name_func_&#39;</span> <span>is</span> <span>not</span> <span>defined</span></pre></div>
</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--all-sorted-" aria-hidden="true" href="#-all-sorted-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> All sorted? *</h3>

<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; x = 7, 8, 9
&gt;&gt;&gt; sorted(x) == x
False
&gt;&gt;&gt; sorted(x) == sorted(x)
True

&gt;&gt;&gt; y = reversed(x)
&gt;&gt;&gt; sorted(y) == sorted(y)
False"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>x</span> <span>=</span> <span>7</span>, <span>8</span>, <span>9</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>sorted</span>(<span>x</span>) <span>==</span> <span>x</span>
<span>False</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>sorted</span>(<span>x</span>) <span>==</span> <span>sorted</span>(<span>x</span>)
<span>True</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>y</span> <span>=</span> <span>reversed</span>(<span>x</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>sorted</span>(<span>y</span>) <span>==</span> <span>sorted</span>(<span>y</span>)
<span>False</span></pre></div>
<h4 dir="auto"><a id="user-content--explanation-45" aria-hidden="true" href="#-explanation-45"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>
<p dir="auto">The <code>sorted</code> method always returns a list, and comparing lists and tuples always returns <code>False</code> in Python.</p>
</li>
<li>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; [] == tuple()
False
&gt;&gt;&gt; x = 7, 8, 9
&gt;&gt;&gt; type(x), type(sorted(x))
(tuple, list)"><pre><span>&gt;&gt;</span><span>&gt;</span> [] <span>==</span> <span>tuple</span>()
<span>False</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>x</span> <span>=</span> <span>7</span>, <span>8</span>, <span>9</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>type</span>(<span>x</span>), <span>type</span>(<span>sorted</span>(<span>x</span>))
(<span>tuple</span>, <span>list</span>)</pre></div>
</li>
<li>
<p dir="auto">Unlike <code>sorted</code>, the <code>reversed</code> method returns an iterator. Why? Because sorting requires the iterator to be either modified in-place or use an extra container (a list), whereas reversing can simply work by iterating from the last index to the first.</p>
</li>
<li>
<p dir="auto">So during comparison <code>sorted(y) == sorted(y)</code>, the first call to <code>sorted()</code> will consume the iterator <code>y</code>, and the next call will just return an empty list.</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; x = 7, 8, 9
&gt;&gt;&gt; y = reversed(x)
&gt;&gt;&gt; sorted(y), sorted(y)
([7, 8, 9], [])"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>x</span> <span>=</span> <span>7</span>, <span>8</span>, <span>9</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>y</span> <span>=</span> <span>reversed</span>(<span>x</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>sorted</span>(<span>y</span>), <span>sorted</span>(<span>y</span>)
([<span>7</span>, <span>8</span>, <span>9</span>], [])</pre></div>
</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--midnight-time-doesnt-exist" aria-hidden="true" href="#-midnight-time-doesnt-exist"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Midnight time doesn&#39;t exist?</h3>

<div data-snippet-clipboard-copy-content="from datetime import datetime

midnight = datetime(2018, 1, 1, 0, 0)
midnight_time = midnight.time()

noon = datetime(2018, 1, 1, 12, 0)
noon_time = noon.time()

if midnight_time:
    print(&#34;Time at midnight is&#34;, midnight_time)

if noon_time:
    print(&#34;Time at noon is&#34;, noon_time)"><pre><span>from</span> <span>datetime</span> <span>import</span> <span>datetime</span>

<span>midnight</span> <span>=</span> <span>datetime</span>(<span>2018</span>, <span>1</span>, <span>1</span>, <span>0</span>, <span>0</span>)
<span>midnight_time</span> <span>=</span> <span>midnight</span>.<span>time</span>()

<span>noon</span> <span>=</span> <span>datetime</span>(<span>2018</span>, <span>1</span>, <span>1</span>, <span>12</span>, <span>0</span>)
<span>noon_time</span> <span>=</span> <span>noon</span>.<span>time</span>()

<span>if</span> <span>midnight_time</span>:
    <span>print</span>(<span>&#34;Time at midnight is&#34;</span>, <span>midnight_time</span>)

<span>if</span> <span>noon_time</span>:
    <span>print</span>(<span>&#34;Time at noon is&#34;</span>, <span>noon_time</span>)</pre></div>
<p dir="auto"><strong>Output (&lt; 3.5):</strong></p>
<div data-snippet-clipboard-copy-content="(&#39;Time at noon is&#39;, datetime.time(12, 0))"><pre>(<span>&#39;Time at noon is&#39;</span>, <span>datetime</span>.<span>time</span>(<span>12</span>, <span>0</span>))</pre></div>
<p dir="auto">The midnight time is not printed.</p>
<h4 dir="auto"><a id="user-content--explanation-46" aria-hidden="true" href="#-explanation-46"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<p dir="auto">Before Python 3.5, the boolean value for <code>datetime.time</code> object was considered to be <code>False</code> if it represented midnight in UTC. It is error-prone when using the <code>if obj:</code> syntax to check if the <code>obj</code> is null or some equivalent of &#34;empty.&#34;</p>
<hr/>
<hr/>
<h2 dir="auto"><a id="user-content-section-the-hidden-treasures" aria-hidden="true" href="#section-the-hidden-treasures"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Section: The Hidden treasures!</h2>
<p dir="auto">This section contains a few lesser-known and interesting things about Python that most beginners like me are unaware of (well, not anymore).</p>
<h3 dir="auto"><a id="user-content--okay-python-can-you-make-me-fly" aria-hidden="true" href="#-okay-python-can-you-make-me-fly"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Okay Python, Can you make me fly?</h3>

<p dir="auto">Well, here you go</p>
<div data-snippet-clipboard-copy-content="import antigravity"><pre><span>import</span> <span>antigravity</span></pre></div>
<p dir="auto"><strong>Output:</strong>
Sshh... It&#39;s a super-secret.</p>
<h4 dir="auto"><a id="user-content--explanation-47" aria-hidden="true" href="#-explanation-47"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li><code>antigravity</code> module is one of the few easter eggs released by Python developers.</li>
<li><code>import antigravity</code> opens up a web browser pointing to the <a href="https://xkcd.com/353/" rel="nofollow">classic XKCD comic</a> about Python.</li>
<li>Well, there&#39;s more to it. There&#39;s <strong>another easter egg inside the easter egg</strong>. If you look at the <a href="https://github.com/python/cpython/blob/master/Lib/antigravity.py#L7-L17">code</a>, there&#39;s a function defined that purports to implement the <a href="https://xkcd.com/426/" rel="nofollow">XKCD&#39;s geohashing algorithm</a>.</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--goto-but-why" aria-hidden="true" href="#-goto-but-why"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> <code>goto</code>, but why?</h3>

<div data-snippet-clipboard-copy-content="from goto import goto, label
for i in range(9):
    for j in range(9):
        for k in range(9):
            print(&#34;I am trapped, please rescue!&#34;)
            if k == 2:
                goto .breakout # breaking out from a deeply nested loop
label .breakout
print(&#34;Freedom!&#34;)"><pre><span>from</span> <span>goto</span> <span>import</span> <span>goto</span>, <span>label</span>
<span>for</span> <span>i</span> <span>in</span> <span>range</span>(<span>9</span>):
    <span>for</span> <span>j</span> <span>in</span> <span>range</span>(<span>9</span>):
        <span>for</span> <span>k</span> <span>in</span> <span>range</span>(<span>9</span>):
            <span>print</span>(<span>&#34;I am trapped, please rescue!&#34;</span>)
            <span>if</span> <span>k</span> <span>==</span> <span>2</span>:
                <span>goto</span> .<span>breakout</span> <span># breaking out from a deeply nested loop</span>
<span>label</span> .<span>breakout</span>
<span>print</span>(<span>&#34;Freedom!&#34;</span>)</pre></div>
<p dir="auto"><strong>Output (Python 2.3):</strong></p>
<div data-snippet-clipboard-copy-content="I am trapped, please rescue!
I am trapped, please rescue!
Freedom!"><pre><span>I</span> <span>am</span> <span>trapped</span>, <span>please</span> <span>rescue</span>!
<span>I</span> <span>am</span> <span>trapped</span>, <span>please</span> <span>rescue</span>!
<span>Freedom</span>!</pre></div>
<h4 dir="auto"><a id="user-content--explanation-48" aria-hidden="true" href="#-explanation-48"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>A working version of <code>goto</code> in Python was <a href="https://mail.python.org/pipermail/python-announce-list/2004-April/002982.html" rel="nofollow">announced</a> as an April Fool&#39;s joke on 1st April 2004.</li>
<li>Current versions of Python do not have this module.</li>
<li>Although it works, but please don&#39;t use it. Here&#39;s the <a href="https://docs.python.org/3/faq/design.html#why-is-there-no-goto" rel="nofollow">reason</a> to why <code>goto</code> is not present in Python.</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--brace-yourself" aria-hidden="true" href="#-brace-yourself"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Brace yourself!</h3>

<p dir="auto">If you are one of the people who doesn&#39;t like using whitespace in Python to denote scopes, you can use the C-style {} by importing,</p>
<div data-snippet-clipboard-copy-content="from __future__ import braces"><pre><span>from</span> __future__ <span>import</span> <span>braces</span></pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="  File &#34;some_file.py&#34;, line 1
    from __future__ import braces
SyntaxError: not a chance"><pre>  <span>File</span> <span>&#34;some_file.py&#34;</span>, <span>line</span> <span>1</span>
    <span>from</span> __future__ <span>import</span> <span>braces</span>
<span>SyntaxError</span>: <span>not</span> <span>a</span> <span>chance</span></pre></div>
<p dir="auto">Braces? No way! If you think that&#39;s disappointing, use Java. Okay, another surprising thing, can you find where&#39;s the <code>SyntaxError</code> raised in <code>__future__</code> module <a href="https://github.com/python/cpython/blob/master/Lib/__future__.py">code</a>?</p>
<h4 dir="auto"><a id="user-content--explanation-49" aria-hidden="true" href="#-explanation-49"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>The <code>__future__</code> module is normally used to provide features from future versions of Python. The &#34;future&#34; in this specific context is however, ironic.</li>
<li>This is an easter egg concerned with the community&#39;s feelings on this issue.</li>
<li>The code is actually present <a href="https://github.com/python/cpython/blob/025eb98dc0c1dc27404df6c544fc2944e0fa9f3a/Python/future.c#L49">here</a> in <code>future.c</code> file.</li>
<li>When the CPython compiler encounters a <a href="https://docs.python.org/3.3/reference/simple_stmts.html#future-statements" rel="nofollow">future statement</a>, it first runs the appropriate code in <code>future.c</code> before treating it as a normal import statement.</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--lets-meet-friendly-language-uncle-for-life" aria-hidden="true" href="#-lets-meet-friendly-language-uncle-for-life"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Let&#39;s meet Friendly Language Uncle For Life</h3>

<p dir="auto"><strong>Output (Python 3.x)</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; from __future__ import barry_as_FLUFL
&gt;&gt;&gt; &#34;Ruby&#34; != &#34;Python&#34; # there&#39;s no doubt about it
  File &#34;some_file.py&#34;, line 1
    &#34;Ruby&#34; != &#34;Python&#34;
              ^
SyntaxError: invalid syntax

&gt;&gt;&gt; &#34;Ruby&#34; &lt;&gt; &#34;Python&#34;
True"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>from</span> __future__ <span>import</span> <span>barry_as_FLUFL</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>&#34;Ruby&#34;</span> <span>!=</span> <span>&#34;Python&#34;</span> <span># there&#39;s no doubt about it</span>
  <span>File</span> <span>&#34;some_file.py&#34;</span>, <span>line</span> <span>1</span>
    <span>&#34;Ruby&#34;</span> <span>!=</span> <span>&#34;Python&#34;</span>
              <span>^</span>
<span>SyntaxError</span>: <span>invalid</span> <span>syntax</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>&#34;Ruby&#34;</span> <span>&lt;&gt;</span> <span>&#34;Python&#34;</span>
<span>True</span></pre></div>
<p dir="auto">There we go.</p>
<h4 dir="auto"><a id="user-content--explanation-50" aria-hidden="true" href="#-explanation-50"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>
<p dir="auto">This is relevant to <a href="https://www.python.org/dev/peps/pep-0401/" rel="nofollow">PEP-401</a> released on April 1, 2009 (now you know, what it means).</p>
</li>
<li>
<p dir="auto">Quoting from the PEP-401</p>
<blockquote>
<p dir="auto">Recognized that the != inequality operator in Python 3.0 was a horrible, finger-pain inducing mistake, the FLUFL reinstates the &lt;&gt; diamond operator as the sole spelling.</p>
</blockquote>
</li>
<li>
<p dir="auto">There were more things that Uncle Barry had to share in the PEP; you can read them <a href="https://www.python.org/dev/peps/pep-0401/" rel="nofollow">here</a>.</p>
</li>
<li>
<p dir="auto">It works well in an interactive environment, but it will raise a <code>SyntaxError</code> when you run via python file (see this <a href="https://github.com/satwikkansal/wtfpython/issues/94" data-hovercard-type="issue" data-hovercard-url="/satwikkansal/wtfpython/issues/94/hovercard">issue</a>). However, you can wrap the statement inside an <code>eval</code> or <code>compile</code> to get it working,</p>
<div data-snippet-clipboard-copy-content="from __future__ import barry_as_FLUFL
print(eval(&#39;&#34;Ruby&#34; &lt;&gt; &#34;Python&#34;&#39;))"><pre><span>from</span> __future__ <span>import</span> <span>barry_as_FLUFL</span>
<span>print</span>(<span>eval</span>(<span>&#39;&#34;Ruby&#34; &lt;&gt; &#34;Python&#34;&#39;</span>))</pre></div>
</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--even-python-understands-that-love-is-complicated" aria-hidden="true" href="#-even-python-understands-that-love-is-complicated"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Even Python understands that love is complicated</h3>

<div data-snippet-clipboard-copy-content="import this"><pre><span>import</span> <span>this</span></pre></div>
<p dir="auto">Wait, what&#39;s <strong>this</strong>? <code>this</code> is love <g-emoji alias="heart" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2764.png">❤️</g-emoji></p>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="The Zen of Python, by Tim Peters

Beautiful is better than ugly.
Explicit is better than implicit.
Simple is better than complex.
Complex is better than complicated.
Flat is better than nested.
Sparse is better than dense.
Readability counts.
Special cases aren&#39;t special enough to break the rules.
Although practicality beats purity.
Errors should never pass silently.
Unless explicitly silenced.
In the face of ambiguity, refuse the temptation to guess.
There should be one-- and preferably only one --obvious way to do it.
Although that way may not be obvious at first unless you&#39;re Dutch.
Now is better than never.
Although never is often better than *right* now.
If the implementation is hard to explain, it&#39;s a bad idea.
If the implementation is easy to explain, it may be a good idea.
Namespaces are one honking great idea -- let&#39;s do more of those!"><pre><code>The Zen of Python, by Tim Peters

Beautiful is better than ugly.
Explicit is better than implicit.
Simple is better than complex.
Complex is better than complicated.
Flat is better than nested.
Sparse is better than dense.
Readability counts.
Special cases aren&#39;t special enough to break the rules.
Although practicality beats purity.
Errors should never pass silently.
Unless explicitly silenced.
In the face of ambiguity, refuse the temptation to guess.
There should be one-- and preferably only one --obvious way to do it.
Although that way may not be obvious at first unless you&#39;re Dutch.
Now is better than never.
Although never is often better than *right* now.
If the implementation is hard to explain, it&#39;s a bad idea.
If the implementation is easy to explain, it may be a good idea.
Namespaces are one honking great idea -- let&#39;s do more of those!
</code></pre></div>
<p dir="auto">It&#39;s the Zen of Python!</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; love = this
&gt;&gt;&gt; this is love
True
&gt;&gt;&gt; love is True
False
&gt;&gt;&gt; love is False
False
&gt;&gt;&gt; love is not True or False
True
&gt;&gt;&gt; love is not True or False; love is love  # Love is complicated
True"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>love</span> <span>=</span> <span>this</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>this</span> <span>is</span> <span>love</span>
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>love</span> <span>is</span> <span>True</span>
<span>False</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>love</span> <span>is</span> <span>False</span>
<span>False</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>love</span> <span>is</span> <span>not</span> <span>True</span> <span>or</span> <span>False</span>
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>love</span> <span>is</span> <span>not</span> <span>True</span> <span>or</span> <span>False</span>; <span>love</span> <span>is</span> <span>love</span>  <span># Love is complicated</span>
<span>True</span></pre></div>
<h4 dir="auto"><a id="user-content--explanation-51" aria-hidden="true" href="#-explanation-51"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li><code>this</code> module in Python is an easter egg for The Zen Of Python (<a href="https://www.python.org/dev/peps/pep-0020" rel="nofollow">PEP 20</a>).</li>
<li>And if you think that&#39;s already interesting enough, check out the implementation of <a href="https://hg.python.org/cpython/file/c3896275c0f6/Lib/this.py" rel="nofollow">this.py</a>. Interestingly, <strong>the code for the Zen violates itself</strong> (and that&#39;s probably the only place where this happens).</li>
<li>Regarding the statement <code>love is not True or False; love is love</code>, ironic but it&#39;s self-explanatory (if not, please see the examples related to <code>is</code> and <code>is not</code> operators).</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--yes-it-exists" aria-hidden="true" href="#-yes-it-exists"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Yes, it exists!</h3>

<p dir="auto"><strong>The <code>else</code> clause for loops.</strong> One typical example might be:</p>
<div data-snippet-clipboard-copy-content="  def does_exists_num(l, to_find):
      for num in l:
          if num == to_find:
              print(&#34;Exists!&#34;)
              break
      else:
          print(&#34;Does not exist&#34;)"><pre>  <span>def</span> <span>does_exists_num</span>(<span>l</span>, <span>to_find</span>):
      <span>for</span> <span>num</span> <span>in</span> <span>l</span>:
          <span>if</span> <span>num</span> <span>==</span> <span>to_find</span>:
              <span>print</span>(<span>&#34;Exists!&#34;</span>)
              <span>break</span>
      <span>else</span>:
          <span>print</span>(<span>&#34;Does not exist&#34;</span>)</pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; some_list = [1, 2, 3, 4, 5]
&gt;&gt;&gt; does_exists_num(some_list, 4)
Exists!
&gt;&gt;&gt; does_exists_num(some_list, -1)
Does not exist"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>some_list</span> <span>=</span> [<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>, <span>5</span>]
<span>&gt;&gt;</span><span>&gt;</span> <span>does_exists_num</span>(<span>some_list</span>, <span>4</span>)
<span>Exists</span>!
<span>&gt;&gt;</span><span>&gt;</span> <span>does_exists_num</span>(<span>some_list</span>, <span>-</span><span>1</span>)
<span>Does</span> <span>not</span> <span>exist</span></pre></div>
<p dir="auto"><strong>The <code>else</code> clause in exception handling.</strong> An example,</p>
<div data-snippet-clipboard-copy-content="try:
    pass
except:
    print(&#34;Exception occurred!!!&#34;)
else:
    print(&#34;Try block executed successfully...&#34;)"><pre><span>try</span>:
    <span>pass</span>
<span>except</span>:
    <span>print</span>(<span>&#34;Exception occurred!!!&#34;</span>)
<span>else</span>:
    <span>print</span>(<span>&#34;Try block executed successfully...&#34;</span>)</pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="Try block executed successfully..."><pre><span>Try</span> <span>block</span> <span>executed</span> <span>successfully</span>...</pre></div>
<h4 dir="auto"><a id="user-content--explanation-52" aria-hidden="true" href="#-explanation-52"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>The <code>else</code> clause after a loop is executed only when there&#39;s no explicit <code>break</code> after all the iterations. You can think of it as a &#34;nobreak&#34; clause.</li>
<li><code>else</code> clause after a try block is also called &#34;completion clause&#34; as reaching the <code>else</code> clause in a <code>try</code> statement means that the try block actually completed successfully.</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--ellipsis-" aria-hidden="true" href="#-ellipsis-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Ellipsis *</h3>

<div data-snippet-clipboard-copy-content="def some_func():
    Ellipsis"><pre><span>def</span> <span>some_func</span>():
    <span>Ellipsis</span></pre></div>
<p dir="auto"><strong>Output</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; some_func()
# No output, No Error

&gt;&gt;&gt; SomeRandomString
Traceback (most recent call last):
  File &#34;&lt;stdin&gt;&#34;, line 1, in &lt;module&gt;
NameError: name &#39;SomeRandomString&#39; is not defined

&gt;&gt;&gt; Ellipsis
Ellipsis"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>some_func</span>()
<span># No output, No Error</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>SomeRandomString</span>
<span>Traceback</span> (<span>most</span> <span>recent</span> <span>call</span> <span>last</span>):
  <span>File</span> <span>&#34;&lt;stdin&gt;&#34;</span>, <span>line</span> <span>1</span>, <span>in</span> <span>&lt;</span><span>module</span><span>&gt;</span>
<span>NameError</span>: <span>name</span> <span>&#39;SomeRandomString&#39;</span> <span>is</span> <span>not</span> <span>defined</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>Ellipsis</span>
<span>Ellipsis</span></pre></div>
<h4 dir="auto"><a id="user-content--explanation-53" aria-hidden="true" href="#-explanation-53"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation</h4>
<ul dir="auto">
<li>In Python, <code>Ellipsis</code> is a globally available built-in object which is equivalent to <code>...</code>.
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; ...
Ellipsis"><pre><span>&gt;&gt;</span><span>&gt;</span> ...
<span>Ellipsis</span></pre></div>
</li>
<li>Ellipsis can be used for several purposes,
<ul dir="auto">
<li>As a placeholder for code that hasn&#39;t been written yet (just like <code>pass</code> statement)</li>
<li>In slicing syntax to represent the full slices in remaining direction</li>
</ul>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; three_dimensional_array = np.arange(8).reshape(2, 2, 2)
array([
    [
        [0, 1],
        [2, 3]
    ],

    [
        [4, 5],
        [6, 7]
    ]
])"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>import</span> <span>numpy</span> <span>as</span> <span>np</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>three_dimensional_array</span> <span>=</span> <span>np</span>.<span>arange</span>(<span>8</span>).<span>reshape</span>(<span>2</span>, <span>2</span>, <span>2</span>)
<span>array</span>([
    [
        [<span>0</span>, <span>1</span>],
        [<span>2</span>, <span>3</span>]
    ],

    [
        [<span>4</span>, <span>5</span>],
        [<span>6</span>, <span>7</span>]
    ]
])</pre></div>
So our <code>three_dimensional_array</code> is an array of array of arrays. Let&#39;s say we want to print the second element (index <code>1</code>) of all the innermost arrays, we can use Ellipsis to bypass all the preceding dimensions
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; three_dimensional_array[:,:,1]
array([[1, 3],
   [5, 7]])
&gt;&gt;&gt; three_dimensional_array[..., 1] # using Ellipsis.
array([[1, 3],
   [5, 7]])"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>three_dimensional_array</span>[:,:,<span>1</span>]
<span>array</span>([[<span>1</span>, <span>3</span>],
   [<span>5</span>, <span>7</span>]])
<span>&gt;&gt;</span><span>&gt;</span> <span>three_dimensional_array</span>[..., <span>1</span>] <span># using Ellipsis.</span>
<span>array</span>([[<span>1</span>, <span>3</span>],
   [<span>5</span>, <span>7</span>]])</pre></div>
Note: this will work for any number of dimensions. You can even select slice in first and last dimension and ignore the middle ones this way (<code>n_dimensional_array[firs_dim_slice, ..., last_dim_slice]</code>)
<ul dir="auto">
<li>In <a href="https://docs.python.org/3/library/typing.html" rel="nofollow">type hinting</a> to indicate only a part of the type (like <code>(Callable[..., int]</code> or <code>Tuple[str, ...]</code>))</li>
<li>You may also use Ellipsis as a default function argument (in the cases when you want to differentiate between the &#34;no argument passed&#34; and &#34;None value passed&#34; scenarios).</li>
</ul>
</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--inpinity" aria-hidden="true" href="#-inpinity"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Inpinity</h3>

<p dir="auto">The spelling is intended. Please, don&#39;t submit a patch for this.</p>
<p dir="auto"><strong>Output (Python 3.x):</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; infinity = float(&#39;infinity&#39;)
&gt;&gt;&gt; hash(infinity)
314159
&gt;&gt;&gt; hash(float(&#39;-inf&#39;))
-314159"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>infinity</span> <span>=</span> <span>float</span>(<span>&#39;infinity&#39;</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>hash</span>(<span>infinity</span>)
<span>314159</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>hash</span>(<span>float</span>(<span>&#39;-inf&#39;</span>))
<span>-</span><span>314159</span></pre></div>
<h4 dir="auto"><a id="user-content--explanation-54" aria-hidden="true" href="#-explanation-54"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>Hash of infinity is 10⁵ x π.</li>
<li>Interestingly, the hash of <code>float(&#39;-inf&#39;)</code> is &#34;-10⁵ x π&#34; in Python 3, whereas &#34;-10⁵ x e&#34; in Python 2.</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--lets-mangle" aria-hidden="true" href="#-lets-mangle"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Let&#39;s mangle</h3>

<p dir="auto">1.</p>
<div data-snippet-clipboard-copy-content="class Yo(object):
    def __init__(self):
        self.__honey = True
        self.bro = True"><pre><span>class</span> <span>Yo</span>(<span>object</span>):
    <span>def</span> <span>__init__</span>(<span>self</span>):
        <span>self</span>.<span>__honey</span> <span>=</span> <span>True</span>
        <span>self</span>.<span>bro</span> <span>=</span> <span>True</span></pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; Yo().bro
True
&gt;&gt;&gt; Yo().__honey
AttributeError: &#39;Yo&#39; object has no attribute &#39;__honey&#39;
&gt;&gt;&gt; Yo()._Yo__honey
True"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>Yo</span>().<span>bro</span>
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>Yo</span>().<span>__honey</span>
<span>AttributeError</span>: <span>&#39;Yo&#39;</span> <span>object</span> <span>has</span> <span>no</span> <span>attribute</span> <span>&#39;__honey&#39;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>Yo</span>().<span>_Yo__honey</span>
<span>True</span></pre></div>
<p dir="auto">2.</p>
<div data-snippet-clipboard-copy-content="class Yo(object):
    def __init__(self):
        # Let&#39;s try something symmetrical this time
        self.__honey__ = True
        self.bro = True"><pre><span>class</span> <span>Yo</span>(<span>object</span>):
    <span>def</span> <span>__init__</span>(<span>self</span>):
        <span># Let&#39;s try something symmetrical this time</span>
        <span>self</span>.<span>__honey__</span> <span>=</span> <span>True</span>
        <span>self</span>.<span>bro</span> <span>=</span> <span>True</span></pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; Yo().bro
True

&gt;&gt;&gt; Yo()._Yo__honey__
Traceback (most recent call last):
  File &#34;&lt;stdin&gt;&#34;, line 1, in &lt;module&gt;
AttributeError: &#39;Yo&#39; object has no attribute &#39;_Yo__honey__&#39;"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>Yo</span>().<span>bro</span>
<span>True</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>Yo</span>().<span>_Yo__honey__</span>
<span>Traceback</span> (<span>most</span> <span>recent</span> <span>call</span> <span>last</span>):
  <span>File</span> <span>&#34;&lt;stdin&gt;&#34;</span>, <span>line</span> <span>1</span>, <span>in</span> <span>&lt;</span><span>module</span><span>&gt;</span>
<span>AttributeError</span>: <span>&#39;Yo&#39;</span> <span>object</span> <span>has</span> <span>no</span> <span>attribute</span> <span>&#39;_Yo__honey__&#39;</span></pre></div>
<p dir="auto">Why did <code>Yo()._Yo__honey</code> work?</p>
<p dir="auto">3.</p>
<div data-snippet-clipboard-copy-content="_A__variable = &#34;Some value&#34;

class A(object):
    def some_func(self):
        return __variable # not initialized anywhere yet"><pre><span>_A__variable</span> <span>=</span> <span>&#34;Some value&#34;</span>

<span>class</span> <span>A</span>(<span>object</span>):
    <span>def</span> <span>some_func</span>(<span>self</span>):
        <span>return</span> <span>__variable</span> <span># not initialized anywhere yet</span></pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; A().__variable
Traceback (most recent call last):
  File &#34;&lt;stdin&gt;&#34;, line 1, in &lt;module&gt;
AttributeError: &#39;A&#39; object has no attribute &#39;__variable&#39;

&gt;&gt;&gt; A().some_func()
&#39;Some value&#39;"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>A</span>().<span>__variable</span>
<span>Traceback</span> (<span>most</span> <span>recent</span> <span>call</span> <span>last</span>):
  <span>File</span> <span>&#34;&lt;stdin&gt;&#34;</span>, <span>line</span> <span>1</span>, <span>in</span> <span>&lt;</span><span>module</span><span>&gt;</span>
<span>AttributeError</span>: <span>&#39;A&#39;</span> <span>object</span> <span>has</span> <span>no</span> <span>attribute</span> <span>&#39;__variable&#39;</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>A</span>().<span>some_func</span>()
<span>&#39;Some value&#39;</span></pre></div>
<h4 dir="auto"><a id="user-content--explanation-55" aria-hidden="true" href="#-explanation-55"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li><a href="https://en.wikipedia.org/wiki/Name_mangling" rel="nofollow">Name Mangling</a> is used to avoid naming collisions between different namespaces.</li>
<li>In Python, the interpreter modifies (mangles) the class member names starting with <code>__</code> (double underscore a.k.a &#34;dunder&#34;) and not ending with more than one trailing underscore by adding <code>_NameOfTheClass</code> in front.</li>
<li>So, to access <code>__honey</code> attribute in the first snippet, we had to append <code>_Yo</code> to the front, which would prevent conflicts with the same name attribute defined in any other class.</li>
<li>But then why didn&#39;t it work in the second snippet? Because name mangling excludes the names ending with double underscores.</li>
<li>The third snippet was also a consequence of name mangling. The name <code>__variable</code> in the statement <code>return __variable</code> was mangled to <code>_A__variable</code>, which also happens to be the name of the variable we declared in the outer scope.</li>
<li>Also, if the mangled name is longer than 255 characters, truncation will happen.</li>
</ul>
<hr/>
<hr/>
<h2 dir="auto"><a id="user-content-section-appearances-are-deceptive" aria-hidden="true" href="#section-appearances-are-deceptive"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Section: Appearances are deceptive!</h2>
<h3 dir="auto"><a id="user-content--skipping-lines" aria-hidden="true" href="#-skipping-lines"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Skipping lines?</h3>

<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; value = 11
&gt;&gt;&gt; valuе = 32
&gt;&gt;&gt; value
11"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>value</span> <span>=</span> <span>11</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>valu</span>е <span>=</span> <span>32</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>value</span>
<span>11</span></pre></div>
<p dir="auto">Wut?</p>
<p dir="auto"><strong>Note:</strong> The easiest way to reproduce this is to simply copy the statements from the above snippet and paste them into your file/shell.</p>
<h4 dir="auto"><a id="user-content--explanation-56" aria-hidden="true" href="#-explanation-56"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation</h4>
<p dir="auto">Some non-Western characters look identical to letters in the English alphabet but are considered distinct by the interpreter.</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; ord(&#39;е&#39;) # cyrillic &#39;e&#39; (Ye)
1077
&gt;&gt;&gt; ord(&#39;e&#39;) # latin &#39;e&#39;, as used in English and typed using standard keyboard
101
&gt;&gt;&gt; &#39;е&#39; == &#39;e&#39;
False

&gt;&gt;&gt; value = 42 # latin e
&gt;&gt;&gt; valuе = 23 # cyrillic &#39;e&#39;, Python 2.x interpreter would raise a `SyntaxError` here
&gt;&gt;&gt; value
42"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>ord</span>(<span>&#39;е&#39;</span>) <span># cyrillic &#39;e&#39; (Ye)</span>
<span>1077</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>ord</span>(<span>&#39;e&#39;</span>) <span># latin &#39;e&#39;, as used in English and typed using standard keyboard</span>
<span>101</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>&#39;е&#39;</span> <span>==</span> <span>&#39;e&#39;</span>
<span>False</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>value</span> <span>=</span> <span>42</span> <span># latin e</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>valu</span>е <span>=</span> <span>23</span> <span># cyrillic &#39;e&#39;, Python 2.x interpreter would raise a `SyntaxError` here</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>value</span>
<span>42</span></pre></div>
<p dir="auto">The built-in <code>ord()</code> function returns a character&#39;s Unicode <a href="https://en.wikipedia.org/wiki/Code_point" rel="nofollow">code point</a>, and different code positions of Cyrillic &#39;e&#39; and Latin &#39;e&#39; justify the behavior of the above example.</p>
<hr/>
<h3 dir="auto"><a id="user-content--teleportation" aria-hidden="true" href="#-teleportation"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Teleportation</h3>

<div data-snippet-clipboard-copy-content="# `pip install numpy` first.
import numpy as np

def energy_send(x):
    # Initializing a numpy array
    np.array([float(x)])

def energy_receive():
    # Return an empty numpy array
    return np.empty((), dtype=np.float).tolist()"><pre><span># `pip install numpy` first.</span>
<span>import</span> <span>numpy</span> <span>as</span> <span>np</span>

<span>def</span> <span>energy_send</span>(<span>x</span>):
    <span># Initializing a numpy array</span>
    <span>np</span>.<span>array</span>([<span>float</span>(<span>x</span>)])

<span>def</span> <span>energy_receive</span>():
    <span># Return an empty numpy array</span>
    <span>return</span> <span>np</span>.<span>empty</span>((), <span>dtype</span><span>=</span><span>np</span>.<span>float</span>).<span>tolist</span>()</pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; energy_send(123.456)
&gt;&gt;&gt; energy_receive()
123.456"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>energy_send</span>(<span>123.456</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>energy_receive</span>()
<span>123.456</span></pre></div>
<p dir="auto">Where&#39;s the Nobel Prize?</p>
<h4 dir="auto"><a id="user-content--explanation-57" aria-hidden="true" href="#-explanation-57"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>Notice that the numpy array created in the <code>energy_send</code> function is not returned, so that memory space is free to reallocate.</li>
<li><code>numpy.empty()</code> returns the next free memory slot without reinitializing it. This memory spot just happens to be the same one that was just freed (usually, but not always).</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--well-something-is-fishy" aria-hidden="true" href="#-well-something-is-fishy"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Well, something is fishy...</h3>

<div data-snippet-clipboard-copy-content="def square(x):
    &#34;&#34;&#34;
    A simple function to calculate the square of a number by addition.
    &#34;&#34;&#34;
    sum_so_far = 0
    for counter in range(x):
        sum_so_far = sum_so_far + x
  return sum_so_far"><pre><span>def</span> <span>square</span>(<span>x</span>):
    <span>&#34;&#34;&#34;</span>
<span>    A simple function to calculate the square of a number by addition.</span>
<span>    &#34;&#34;&#34;</span>
    <span>sum_so_far</span> <span>=</span> <span>0</span>
    <span>for</span> <span>counter</span> <span>in</span> <span>range</span>(<span>x</span>):
        <span>sum_so_far</span> <span>=</span> <span>sum_so_far</span> <span>+</span> <span>x</span>
  <span>return</span> <span>sum_so_far</span></pre></div>
<p dir="auto"><strong>Output (Python 2.x):</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; square(10)
10"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>square</span>(<span>10</span>)
<span>10</span></pre></div>
<p dir="auto">Shouldn&#39;t that be 100?</p>
<p dir="auto"><strong>Note:</strong> If you&#39;re not able to reproduce this, try running the file <a href="https://commoncog.com/satwikkansal/wtfpython/blob/master/mixed_tabs_and_spaces.py">mixed_tabs_and_spaces.py</a> via the shell.</p>
<h4 dir="auto"><a id="user-content--explanation-58" aria-hidden="true" href="#-explanation-58"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation</h4>
<ul dir="auto">
<li>
<p dir="auto"><strong>Don&#39;t mix tabs and spaces!</strong> The character just preceding return is a &#34;tab&#34;,  and the code is indented by multiple of &#34;4 spaces&#34; elsewhere in the example.</p>
</li>
<li>
<p dir="auto">This is how Python handles tabs:</p>
<blockquote>
<p dir="auto">First, tabs are replaced (from left to right) by one to eight spaces such that the total number of characters up to and including the replacement is a multiple of eight &lt;...&gt;</p>
</blockquote>
</li>
<li>
<p dir="auto">So the &#34;tab&#34; at the last line of <code>square</code> function is replaced with eight spaces, and it gets into the loop.</p>
</li>
<li>
<p dir="auto">Python 3 is kind enough to throw an error for such cases automatically.</p>
<p dir="auto"><strong>Output (Python 3.x):</strong></p>
<div data-snippet-clipboard-copy-content="TabError: inconsistent use of tabs and spaces in indentation"><pre><span>TabError</span>: <span>inconsistent</span> <span>use</span> <span>of</span> <span>tabs</span> <span>and</span> <span>spaces</span> <span>in</span> <span>indentation</span></pre></div>
</li>
</ul>
<hr/>
<hr/>
<h2 dir="auto"><a id="user-content-section-miscellaneous" aria-hidden="true" href="#section-miscellaneous"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Section: Miscellaneous</h2>
<h3 dir="auto"><a id="user-content---is-faster" aria-hidden="true" href="#--is-faster"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> <code>+=</code> is faster</h3>

<div data-snippet-clipboard-copy-content="# using &#34;+&#34;, three strings:
&gt;&gt;&gt; timeit.timeit(&#34;s1 = s1 + s2 + s3&#34;, setup=&#34;s1 = &#39; &#39; * 100000; s2 = &#39; &#39; * 100000; s3 = &#39; &#39; * 100000&#34;, number=100)
0.25748300552368164
# using &#34;+=&#34;, three strings:
&gt;&gt;&gt; timeit.timeit(&#34;s1 += s2 + s3&#34;, setup=&#34;s1 = &#39; &#39; * 100000; s2 = &#39; &#39; * 100000; s3 = &#39; &#39; * 100000&#34;, number=100)
0.012188911437988281"><pre><span># using &#34;+&#34;, three strings:</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>timeit</span>.<span>timeit</span>(<span>&#34;s1 = s1 + s2 + s3&#34;</span>, <span>setup</span><span>=</span><span>&#34;s1 = &#39; &#39; * 100000; s2 = &#39; &#39; * 100000; s3 = &#39; &#39; * 100000&#34;</span>, <span>number</span><span>=</span><span>100</span>)
<span>0.25748300552368164</span>
<span># using &#34;+=&#34;, three strings:</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>timeit</span>.<span>timeit</span>(<span>&#34;s1 += s2 + s3&#34;</span>, <span>setup</span><span>=</span><span>&#34;s1 = &#39; &#39; * 100000; s2 = &#39; &#39; * 100000; s3 = &#39; &#39; * 100000&#34;</span>, <span>number</span><span>=</span><span>100</span>)
<span>0.012188911437988281</span></pre></div>
<h4 dir="auto"><a id="user-content--explanation-59" aria-hidden="true" href="#-explanation-59"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li><code>+=</code> is faster than <code>+</code> for concatenating more than two strings because the first string (example, <code>s1</code> for <code>s1 += s2 + s3</code>) is not destroyed while calculating the complete string.</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--lets-make-a-giant-string" aria-hidden="true" href="#-lets-make-a-giant-string"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Let&#39;s make a giant string!</h3>

<div data-snippet-clipboard-copy-content="def add_string_with_plus(iters):
    s = &#34;&#34;
    for i in range(iters):
        s += &#34;xyz&#34;
    assert len(s) == 3*iters

def add_bytes_with_plus(iters):
    s = b&#34;&#34;
    for i in range(iters):
        s += b&#34;xyz&#34;
    assert len(s) == 3*iters

def add_string_with_format(iters):
    fs = &#34;{}&#34;*iters
    s = fs.format(*([&#34;xyz&#34;]*iters))
    assert len(s) == 3*iters

def add_string_with_join(iters):
    l = []
    for i in range(iters):
        l.append(&#34;xyz&#34;)
    s = &#34;&#34;.join(l)
    assert len(s) == 3*iters

def convert_list_to_string(l, iters):
    s = &#34;&#34;.join(l)
    assert len(s) == 3*iters"><pre><span>def</span> <span>add_string_with_plus</span>(<span>iters</span>):
    <span>s</span> <span>=</span> <span>&#34;&#34;</span>
    <span>for</span> <span>i</span> <span>in</span> <span>range</span>(<span>iters</span>):
        <span>s</span> <span>+=</span> <span>&#34;xyz&#34;</span>
    <span>assert</span> <span>len</span>(<span>s</span>) <span>==</span> <span>3</span><span>*</span><span>iters</span>

<span>def</span> <span>add_bytes_with_plus</span>(<span>iters</span>):
    <span>s</span> <span>=</span> <span>b&#34;&#34;</span>
    <span>for</span> <span>i</span> <span>in</span> <span>range</span>(<span>iters</span>):
        <span>s</span> <span>+=</span> <span>b&#34;xyz&#34;</span>
    <span>assert</span> <span>len</span>(<span>s</span>) <span>==</span> <span>3</span><span>*</span><span>iters</span>

<span>def</span> <span>add_string_with_format</span>(<span>iters</span>):
    <span>fs</span> <span>=</span> <span>&#34;{}&#34;</span><span>*</span><span>iters</span>
    <span>s</span> <span>=</span> <span>fs</span>.<span>format</span>(<span>*</span>([<span>&#34;xyz&#34;</span>]<span>*</span><span>iters</span>))
    <span>assert</span> <span>len</span>(<span>s</span>) <span>==</span> <span>3</span><span>*</span><span>iters</span>

<span>def</span> <span>add_string_with_join</span>(<span>iters</span>):
    <span>l</span> <span>=</span> []
    <span>for</span> <span>i</span> <span>in</span> <span>range</span>(<span>iters</span>):
        <span>l</span>.<span>append</span>(<span>&#34;xyz&#34;</span>)
    <span>s</span> <span>=</span> <span>&#34;&#34;</span>.<span>join</span>(<span>l</span>)
    <span>assert</span> <span>len</span>(<span>s</span>) <span>==</span> <span>3</span><span>*</span><span>iters</span>

<span>def</span> <span>convert_list_to_string</span>(<span>l</span>, <span>iters</span>):
    <span>s</span> <span>=</span> <span>&#34;&#34;</span>.<span>join</span>(<span>l</span>)
    <span>assert</span> <span>len</span>(<span>s</span>) <span>==</span> <span>3</span><span>*</span><span>iters</span></pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="# Executed in ipython shell using %timeit for better readability of results.
# You can also use the timeit module in normal python shell/scriptm=, example usage below
# timeit.timeit(&#39;add_string_with_plus(10000)&#39;, number=1000, globals=globals())

&gt;&gt;&gt; NUM_ITERS = 1000
&gt;&gt;&gt; %timeit -n1000 add_string_with_plus(NUM_ITERS)
124 µs ± 4.73 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
&gt;&gt;&gt; %timeit -n1000 add_bytes_with_plus(NUM_ITERS)
211 µs ± 10.5 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
&gt;&gt;&gt; %timeit -n1000 add_string_with_format(NUM_ITERS)
61 µs ± 2.18 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
&gt;&gt;&gt; %timeit -n1000 add_string_with_join(NUM_ITERS)
117 µs ± 3.21 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
&gt;&gt;&gt; l = [&#34;xyz&#34;]*NUM_ITERS
&gt;&gt;&gt; %timeit -n1000 convert_list_to_string(l, NUM_ITERS)
10.1 µs ± 1.06 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)"><pre><span># Executed in ipython shell using %timeit for better readability of results.</span>
<span># You can also use the timeit module in normal python shell/scriptm=, example usage below</span>
<span># timeit.timeit(&#39;add_string_with_plus(10000)&#39;, number=1000, globals=globals())</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>NUM_ITERS</span> <span>=</span> <span>1000</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>%</span><span>timeit</span> <span>-</span><span>n1000</span> <span>add_string_with_plus</span>(<span>NUM_ITERS</span>)
<span>124</span> µ<span>s</span> ± <span>4.73</span> µ<span>s</span> <span>per</span> <span>loop</span> (<span>mean</span> ± <span>std</span>. <span>dev</span>. <span>of</span> <span>7</span> <span>runs</span>, <span>100</span> <span>loops</span> <span>each</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>%</span><span>timeit</span> <span>-</span><span>n1000</span> <span>add_bytes_with_plus</span>(<span>NUM_ITERS</span>)
<span>211</span> µ<span>s</span> ± <span>10.5</span> µ<span>s</span> <span>per</span> <span>loop</span> (<span>mean</span> ± <span>std</span>. <span>dev</span>. <span>of</span> <span>7</span> <span>runs</span>, <span>1000</span> <span>loops</span> <span>each</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>%</span><span>timeit</span> <span>-</span><span>n1000</span> <span>add_string_with_format</span>(<span>NUM_ITERS</span>)
<span>61</span> µ<span>s</span> ± <span>2.18</span> µ<span>s</span> <span>per</span> <span>loop</span> (<span>mean</span> ± <span>std</span>. <span>dev</span>. <span>of</span> <span>7</span> <span>runs</span>, <span>1000</span> <span>loops</span> <span>each</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>%</span><span>timeit</span> <span>-</span><span>n1000</span> <span>add_string_with_join</span>(<span>NUM_ITERS</span>)
<span>117</span> µ<span>s</span> ± <span>3.21</span> µ<span>s</span> <span>per</span> <span>loop</span> (<span>mean</span> ± <span>std</span>. <span>dev</span>. <span>of</span> <span>7</span> <span>runs</span>, <span>1000</span> <span>loops</span> <span>each</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>l</span> <span>=</span> [<span>&#34;xyz&#34;</span>]<span>*</span><span>NUM_ITERS</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>%</span><span>timeit</span> <span>-</span><span>n1000</span> <span>convert_list_to_string</span>(<span>l</span>, <span>NUM_ITERS</span>)
<span>10.1</span> µ<span>s</span> ± <span>1.06</span> µ<span>s</span> <span>per</span> <span>loop</span> (<span>mean</span> ± <span>std</span>. <span>dev</span>. <span>of</span> <span>7</span> <span>runs</span>, <span>1000</span> <span>loops</span> <span>each</span>)</pre></div>
<p dir="auto">Let&#39;s increase the number of iterations by a factor of 10.</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; NUM_ITERS = 10000
&gt;&gt;&gt; %timeit -n1000 add_string_with_plus(NUM_ITERS) # Linear increase in execution time
1.26 ms ± 76.8 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
&gt;&gt;&gt; %timeit -n1000 add_bytes_with_plus(NUM_ITERS) # Quadratic increase
6.82 ms ± 134 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
&gt;&gt;&gt; %timeit -n1000 add_string_with_format(NUM_ITERS) # Linear increase
645 µs ± 24.5 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
&gt;&gt;&gt; %timeit -n1000 add_string_with_join(NUM_ITERS) # Linear increase
1.17 ms ± 7.25 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
&gt;&gt;&gt; l = [&#34;xyz&#34;]*NUM_ITERS
&gt;&gt;&gt; %timeit -n1000 convert_list_to_string(l, NUM_ITERS) # Linear increase
86.3 µs ± 2 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>NUM_ITERS</span> <span>=</span> <span>10000</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>%</span><span>timeit</span> <span>-</span><span>n1000</span> <span>add_string_with_plus</span>(<span>NUM_ITERS</span>) <span># Linear increase in execution time</span>
<span>1.26</span> <span>ms</span> ± <span>76.8</span> µ<span>s</span> <span>per</span> <span>loop</span> (<span>mean</span> ± <span>std</span>. <span>dev</span>. <span>of</span> <span>7</span> <span>runs</span>, <span>1000</span> <span>loops</span> <span>each</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>%</span><span>timeit</span> <span>-</span><span>n1000</span> <span>add_bytes_with_plus</span>(<span>NUM_ITERS</span>) <span># Quadratic increase</span>
<span>6.82</span> <span>ms</span> ± <span>134</span> µ<span>s</span> <span>per</span> <span>loop</span> (<span>mean</span> ± <span>std</span>. <span>dev</span>. <span>of</span> <span>7</span> <span>runs</span>, <span>1000</span> <span>loops</span> <span>each</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>%</span><span>timeit</span> <span>-</span><span>n1000</span> <span>add_string_with_format</span>(<span>NUM_ITERS</span>) <span># Linear increase</span>
<span>645</span> µ<span>s</span> ± <span>24.5</span> µ<span>s</span> <span>per</span> <span>loop</span> (<span>mean</span> ± <span>std</span>. <span>dev</span>. <span>of</span> <span>7</span> <span>runs</span>, <span>1000</span> <span>loops</span> <span>each</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>%</span><span>timeit</span> <span>-</span><span>n1000</span> <span>add_string_with_join</span>(<span>NUM_ITERS</span>) <span># Linear increase</span>
<span>1.17</span> <span>ms</span> ± <span>7.25</span> µ<span>s</span> <span>per</span> <span>loop</span> (<span>mean</span> ± <span>std</span>. <span>dev</span>. <span>of</span> <span>7</span> <span>runs</span>, <span>1000</span> <span>loops</span> <span>each</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>l</span> <span>=</span> [<span>&#34;xyz&#34;</span>]<span>*</span><span>NUM_ITERS</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>%</span><span>timeit</span> <span>-</span><span>n1000</span> <span>convert_list_to_string</span>(<span>l</span>, <span>NUM_ITERS</span>) <span># Linear increase</span>
<span>86.3</span> µ<span>s</span> ± <span>2</span> µ<span>s</span> <span>per</span> <span>loop</span> (<span>mean</span> ± <span>std</span>. <span>dev</span>. <span>of</span> <span>7</span> <span>runs</span>, <span>1000</span> <span>loops</span> <span>each</span>)</pre></div>
<h4 dir="auto"><a id="user-content--explanation-60" aria-hidden="true" href="#-explanation-60"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation</h4>
<ul dir="auto">
<li>
<p dir="auto">You can read more about <a href="https://docs.python.org/3/library/timeit.html" rel="nofollow">timeit</a> or <a href="https://ipython.org/ipython-doc/dev/interactive/magics.html#magic-timeit" rel="nofollow">%timeit</a> on these links. They are used to measure the execution time of code pieces.</p>
</li>
<li>
<p dir="auto">Don&#39;t use <code>+</code> for generating long strings — In Python, <code>str</code> is immutable, so the left and right strings have to be copied into the new string for every pair of concatenations. If you concatenate four strings of length 10, you&#39;ll be copying (10+10) + ((10+10)+10) + (((10+10)+10)+10) = 90 characters instead of just 40 characters. Things get quadratically worse as the number and size of the string increases (justified with the execution times of <code>add_bytes_with_plus</code> function)</p>
</li>
<li>
<p dir="auto">Therefore, it&#39;s advised to use <code>.format.</code> or <code>%</code> syntax (however, they are slightly slower than <code>+</code> for very short strings).</p>
</li>
<li>
<p dir="auto">Or better, if already you&#39;ve contents available in the form of an iterable object, then use <code>&#39;&#39;.join(iterable_object)</code> which is much faster.</p>
</li>
<li>
<p dir="auto">Unlike <code>add_bytes_with_plus</code> because of the <code>+=</code> optimizations discussed in the previous example, <code>add_string_with_plus</code> didn&#39;t show a quadratic increase in execution time. Had the statement been <code>s = s + &#34;x&#34; + &#34;y&#34; + &#34;z&#34;</code> instead of <code>s += &#34;xyz&#34;</code>, the increase would have been quadratic.</p>
<div data-snippet-clipboard-copy-content="def add_string_with_plus(iters):
    s = &#34;&#34;
    for i in range(iters):
        s = s + &#34;x&#34; + &#34;y&#34; + &#34;z&#34;
    assert len(s) == 3*iters

&gt;&gt;&gt; %timeit -n100 add_string_with_plus(1000)
388 µs ± 22.4 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
&gt;&gt;&gt; %timeit -n100 add_string_with_plus(10000) # Quadratic increase in execution time
9 ms ± 298 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)"><pre><span>def</span> <span>add_string_with_plus</span>(<span>iters</span>):
    <span>s</span> <span>=</span> <span>&#34;&#34;</span>
    <span>for</span> <span>i</span> <span>in</span> <span>range</span>(<span>iters</span>):
        <span>s</span> <span>=</span> <span>s</span> <span>+</span> <span>&#34;x&#34;</span> <span>+</span> <span>&#34;y&#34;</span> <span>+</span> <span>&#34;z&#34;</span>
    <span>assert</span> <span>len</span>(<span>s</span>) <span>==</span> <span>3</span><span>*</span><span>iters</span>

<span>&gt;&gt;</span><span>&gt;</span> <span>%</span><span>timeit</span> <span>-</span><span>n100</span> <span>add_string_with_plus</span>(<span>1000</span>)
<span>388</span> µ<span>s</span> ± <span>22.4</span> µ<span>s</span> <span>per</span> <span>loop</span> (<span>mean</span> ± <span>std</span>. <span>dev</span>. <span>of</span> <span>7</span> <span>runs</span>, <span>1000</span> <span>loops</span> <span>each</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>%</span><span>timeit</span> <span>-</span><span>n100</span> <span>add_string_with_plus</span>(<span>10000</span>) <span># Quadratic increase in execution time</span>
<span>9</span> <span>ms</span> ± <span>298</span> µ<span>s</span> <span>per</span> <span>loop</span> (<span>mean</span> ± <span>std</span>. <span>dev</span>. <span>of</span> <span>7</span> <span>runs</span>, <span>100</span> <span>loops</span> <span>each</span>)</pre></div>
</li>
<li>
<p dir="auto">So many ways to format and create a giant string are somewhat in contrast to the <a href="https://www.python.org/dev/peps/pep-0020/" rel="nofollow">Zen of Python</a>, according to which,</p>
<blockquote>
<p dir="auto">There should be one-- and preferably only one --obvious way to do it.</p>
</blockquote>
</li>
</ul>
<hr/>
<h3 dir="auto"><a id="user-content--slowing-down-dict-lookups-" aria-hidden="true" href="#-slowing-down-dict-lookups-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Slowing down <code>dict</code> lookups *</h3>

<div data-snippet-clipboard-copy-content="some_dict = {str(i): 1 for i in range(1_000_000)}
another_dict = {str(i): 1 for i in range(1_000_000)}"><pre><span>some_dict</span> <span>=</span> {<span>str</span>(<span>i</span>): <span>1</span> <span>for</span> <span>i</span> <span>in</span> <span>range</span>(<span>1_000_000</span>)}
<span>another_dict</span> <span>=</span> {<span>str</span>(<span>i</span>): <span>1</span> <span>for</span> <span>i</span> <span>in</span> <span>range</span>(<span>1_000_000</span>)}</pre></div>
<p dir="auto"><strong>Output:</strong></p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; %timeit some_dict[&#39;5&#39;]
28.6 ns ± 0.115 ns per loop (mean ± std. dev. of 7 runs, 10000000 loops each)
&gt;&gt;&gt; some_dict[1] = 1
&gt;&gt;&gt; %timeit some_dict[&#39;5&#39;]
37.2 ns ± 0.265 ns per loop (mean ± std. dev. of 7 runs, 10000000 loops each)

&gt;&gt;&gt; %timeit another_dict[&#39;5&#39;]
28.5 ns ± 0.142 ns per loop (mean ± std. dev. of 7 runs, 10000000 loops each)
&gt;&gt;&gt; another_dict[1]  # Trying to access a key that doesn&#39;t exist
Traceback (most recent call last):
  File &#34;&lt;stdin&gt;&#34;, line 1, in &lt;module&gt;
KeyError: 1
&gt;&gt;&gt; %timeit another_dict[&#39;5&#39;]
38.5 ns ± 0.0913 ns per loop (mean ± std. dev. of 7 runs, 10000000 loops each)"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>%</span><span>timeit</span> <span>some_dict</span>[<span>&#39;5&#39;</span>]
<span>28.6</span> <span>ns</span> ± <span>0.115</span> <span>ns</span> <span>per</span> <span>loop</span> (<span>mean</span> ± <span>std</span>. <span>dev</span>. <span>of</span> <span>7</span> <span>runs</span>, <span>10000000</span> <span>loops</span> <span>each</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>some_dict</span>[<span>1</span>] <span>=</span> <span>1</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>%</span><span>timeit</span> <span>some_dict</span>[<span>&#39;5&#39;</span>]
<span>37.2</span> <span>ns</span> ± <span>0.265</span> <span>ns</span> <span>per</span> <span>loop</span> (<span>mean</span> ± <span>std</span>. <span>dev</span>. <span>of</span> <span>7</span> <span>runs</span>, <span>10000000</span> <span>loops</span> <span>each</span>)

<span>&gt;&gt;</span><span>&gt;</span> <span>%</span><span>timeit</span> <span>another_dict</span>[<span>&#39;5&#39;</span>]
<span>28.5</span> <span>ns</span> ± <span>0.142</span> <span>ns</span> <span>per</span> <span>loop</span> (<span>mean</span> ± <span>std</span>. <span>dev</span>. <span>of</span> <span>7</span> <span>runs</span>, <span>10000000</span> <span>loops</span> <span>each</span>)
<span>&gt;&gt;</span><span>&gt;</span> <span>another_dict</span>[<span>1</span>]  <span># Trying to access a key that doesn&#39;t exist</span>
<span>Traceback</span> (<span>most</span> <span>recent</span> <span>call</span> <span>last</span>):
  <span>File</span> <span>&#34;&lt;stdin&gt;&#34;</span>, <span>line</span> <span>1</span>, <span>in</span> <span>&lt;</span><span>module</span><span>&gt;</span>
<span>KeyError</span>: <span>1</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>%</span><span>timeit</span> <span>another_dict</span>[<span>&#39;5&#39;</span>]
<span>38.5</span> <span>ns</span> ± <span>0.0913</span> <span>ns</span> <span>per</span> <span>loop</span> (<span>mean</span> ± <span>std</span>. <span>dev</span>. <span>of</span> <span>7</span> <span>runs</span>, <span>10000000</span> <span>loops</span> <span>each</span>)</pre></div>
<p dir="auto">Why are same lookups becoming slower?</p>
<h4 dir="auto"><a id="user-content--explanation-61" aria-hidden="true" href="#-explanation-61"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>CPython has a generic dictionary lookup function that handles all types of keys (<code>str</code>, <code>int</code>, any object ...), and a specialized one for the common case of dictionaries composed of <code>str</code>-only keys.</li>
<li>The specialized function (named <code>lookdict_unicode</code> in CPython&#39;s <a href="https://github.com/python/cpython/blob/522691c46e2ae51faaad5bbbce7d959dd61770df/Objects/dictobject.c#L841">source</a>) knows all existing keys (including the looked-up key) are strings, and uses the faster &amp; simpler string comparison to compare keys, instead of calling the <code>__eq__</code> method.</li>
<li>The first time a <code>dict</code> instance is accessed with a non-<code>str</code> key, it&#39;s modified so future lookups use the generic function.</li>
<li>This process is not reversible for the particular <code>dict</code> instance, and the key doesn&#39;t even have to exist in the dictionary. That&#39;s why attempting a failed lookup has the same effect.</li>
</ul>
<h3 dir="auto"><a id="user-content--bloating-instance-dicts-" aria-hidden="true" href="#-bloating-instance-dicts-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Bloating instance <code>dict</code>s *</h3>

<div data-snippet-clipboard-copy-content="import sys

class SomeClass:
    def __init__(self):
        self.some_attr1 = 1
        self.some_attr2 = 2
        self.some_attr3 = 3
        self.some_attr4 = 4


def dict_size(o):
    return sys.getsizeof(o.__dict__)
"><pre><span>import</span> <span>sys</span>

<span>class</span> <span>SomeClass</span>:
    <span>def</span> <span>__init__</span>(<span>self</span>):
        <span>self</span>.<span>some_attr1</span> <span>=</span> <span>1</span>
        <span>self</span>.<span>some_attr2</span> <span>=</span> <span>2</span>
        <span>self</span>.<span>some_attr3</span> <span>=</span> <span>3</span>
        <span>self</span>.<span>some_attr4</span> <span>=</span> <span>4</span>


<span>def</span> <span>dict_size</span>(<span>o</span>):
    <span>return</span> <span>sys</span>.<span>getsizeof</span>(<span>o</span>.<span>__dict__</span>)</pre></div>
<p dir="auto"><strong>Output:</strong> (Python 3.8, other Python 3 versions may vary a little)</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; o1 = SomeClass()
&gt;&gt;&gt; o2 = SomeClass()
&gt;&gt;&gt; dict_size(o1)
104
&gt;&gt;&gt; dict_size(o2)
104
&gt;&gt;&gt; del o1.some_attr1
&gt;&gt;&gt; o3 = SomeClass()
&gt;&gt;&gt; dict_size(o3)
232
&gt;&gt;&gt; dict_size(o1)
232"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>o1</span> <span>=</span> <span>SomeClass</span>()
<span>&gt;&gt;</span><span>&gt;</span> <span>o2</span> <span>=</span> <span>SomeClass</span>()
<span>&gt;&gt;</span><span>&gt;</span> <span>dict_size</span>(<span>o1</span>)
<span>104</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>dict_size</span>(<span>o2</span>)
<span>104</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>del</span> <span>o1</span>.<span>some_attr1</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>o3</span> <span>=</span> <span>SomeClass</span>()
<span>&gt;&gt;</span><span>&gt;</span> <span>dict_size</span>(<span>o3</span>)
<span>232</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>dict_size</span>(<span>o1</span>)
<span>232</span></pre></div>
<p dir="auto">Let&#39;s try again... In a new interpreter:</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; o1 = SomeClass()
&gt;&gt;&gt; o2 = SomeClass()
&gt;&gt;&gt; dict_size(o1)
104  # as expected
&gt;&gt;&gt; o1.some_attr5 = 5
&gt;&gt;&gt; o1.some_attr6 = 6
&gt;&gt;&gt; dict_size(o1)
360
&gt;&gt;&gt; dict_size(o2)
272
&gt;&gt;&gt; o3 = SomeClass()
&gt;&gt;&gt; dict_size(o3)
232"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>o1</span> <span>=</span> <span>SomeClass</span>()
<span>&gt;&gt;</span><span>&gt;</span> <span>o2</span> <span>=</span> <span>SomeClass</span>()
<span>&gt;&gt;</span><span>&gt;</span> <span>dict_size</span>(<span>o1</span>)
<span>104</span>  <span># as expected</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>o1</span>.<span>some_attr5</span> <span>=</span> <span>5</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>o1</span>.<span>some_attr6</span> <span>=</span> <span>6</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>dict_size</span>(<span>o1</span>)
<span>360</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>dict_size</span>(<span>o2</span>)
<span>272</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>o3</span> <span>=</span> <span>SomeClass</span>()
<span>&gt;&gt;</span><span>&gt;</span> <span>dict_size</span>(<span>o3</span>)
<span>232</span></pre></div>
<p dir="auto">What makes those dictionaries become bloated? And why are newly created objects bloated as well?</p>
<h4 dir="auto"><a id="user-content--explanation-62" aria-hidden="true" href="#-explanation-62"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</h4>
<ul dir="auto">
<li>CPython is able to reuse the same &#34;keys&#34; object in multiple dictionaries. This was added in <a href="https://www.python.org/dev/peps/pep-0412/" rel="nofollow">PEP 412</a> with the motivation to reduce memory usage, specifically in dictionaries of instances - where keys (instance attributes) tend to be common to all instances.</li>
<li>This optimization is entirely seamless for instance dictionaries, but it is disabled if certain assumptions are broken.</li>
<li>Key-sharing dictionaries do not support deletion; if an instance attribute is deleted, the dictionary is &#34;unshared&#34;, and key-sharing is disabled for all future instances of the same class.</li>
<li>Additionaly, if the dictionary keys have been resized (because new keys are inserted), they are kept shared <em>only</em> if they are used by a exactly single dictionary (this allows adding many attributes in the <code>__init__</code> of the very first created instance, without causing an &#34;unshare&#34;). If multiple instances exist when a resize happens, key-sharing is disabled for all future instances of the same class: CPython can&#39;t tell if your instances are using the same set of attributes anymore, and decides to bail out on attempting to share their keys.</li>
<li>A small tip, if you aim to lower your program&#39;s memory footprint: don&#39;t delete instance attributes, and make sure to initialize all attributes in your <code>__init__</code>!</li>
</ul>
<h3 dir="auto"><a id="user-content--minor-ones-" aria-hidden="true" href="#-minor-ones-"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><g-emoji alias="arrow_forward" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/25b6.png">▶</g-emoji> Minor Ones *</h3>

<ul dir="auto">
<li>
<p dir="auto"><code>join()</code> is a string operation instead of list operation. (sort of counter-intuitive at first usage)</p>
<p dir="auto"><strong><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</strong> If <code>join()</code> is a method on a string, then it can operate on any iterable (list, tuple, iterators). If it were a method on a list, it&#39;d have to be implemented separately by every type. Also, it doesn&#39;t make much sense to put a string-specific method on a generic <code>list</code> object API.</p>
</li>
<li>
<p dir="auto">Few weird looking but semantically correct statements:</p>
<ul dir="auto">
<li><code>[] = ()</code> is a semantically correct statement (unpacking an empty <code>tuple</code> into an empty <code>list</code>)</li>
<li><code>&#39;a&#39;[0][0][0][0][0]</code> is also a semantically correct statement as strings are <a href="https://docs.python.org/3/glossary.html#term-sequence" rel="nofollow">sequences</a>(iterables supporting element access using integer indices) in Python.</li>
<li><code>3 --0-- 5 == 8</code> and <code>--5 == 5</code> are both semantically correct statements and evaluate to <code>True</code>.</li>
</ul>
</li>
<li>
<p dir="auto">Given that <code>a</code> is a number, <code>++a</code> and <code>--a</code> are both valid Python statements but don&#39;t behave the same way as compared with similar statements in languages like C, C++, or Java.</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; a = 5
&gt;&gt;&gt; a
5
&gt;&gt;&gt; ++a
5
&gt;&gt;&gt; --a
5"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>=</span> <span>5</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>a</span>
<span>5</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>+</span><span>+</span><span>a</span>
<span>5</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>-</span><span>-</span><span>a</span>
<span>5</span></pre></div>
<p dir="auto"><strong><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</strong></p>
<ul dir="auto">
<li>There is no <code>++</code> operator in Python grammar. It is actually two <code>+</code> operators.</li>
<li><code>++a</code> parses as <code>+(+a)</code> which translates to <code>a</code>. Similarly, the output of the statement <code>--a</code> can be justified.</li>
<li>This StackOverflow <a href="https://stackoverflow.com/questions/3654830/why-are-there-no-and-operators-in-python" rel="nofollow">thread</a> discusses the rationale behind the absence of increment and decrement operators in Python.</li>
</ul>
</li>
<li>
<p dir="auto">You must be aware of the Walrus operator in Python. But have you ever heard about <em>the space-invader operator</em>?</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; a = 42
&gt;&gt;&gt; a -=- 1
&gt;&gt;&gt; a
43"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>=</span> <span>42</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>-=</span><span>-</span> <span>1</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>a</span>
<span>43</span></pre></div>
<p dir="auto">It is used as an alternative incrementation operator, together with another one</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; a +=+ 1
&gt;&gt;&gt; a
&gt;&gt;&gt; 44"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>a</span> <span>+=</span><span>+</span> <span>1</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>a</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>44</span></pre></div>
<p dir="auto"><strong><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</strong> This prank comes from <a href="https://twitter.com/raymondh/status/1131103570856632321?lang=en" rel="nofollow">Raymond Hettinger&#39;s tweet</a>. The space invader operator is actually just a malformatted <code>a -= (-1)</code>. Which is equivalent to <code>a = a - (- 1)</code>. Similar for the <code>a += (+ 1)</code> case.</p>
</li>
<li>
<p dir="auto">Python has an undocumented <a href="https://en.wikipedia.org/wiki/Converse_implication" rel="nofollow">converse implication</a> operator.</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; False ** False == True
True
&gt;&gt;&gt; False ** True == False
True
&gt;&gt;&gt; True ** False == True
True
&gt;&gt;&gt; True ** True == True
True"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>False</span> <span>**</span> <span>False</span> <span>==</span> <span>True</span>
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>False</span> <span>**</span> <span>True</span> <span>==</span> <span>False</span>
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>True</span> <span>**</span> <span>False</span> <span>==</span> <span>True</span>
<span>True</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>True</span> <span>**</span> <span>True</span> <span>==</span> <span>True</span>
<span>True</span></pre></div>
<p dir="auto"><strong><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</strong> If you replace <code>False</code> and <code>True</code> by 0 and 1 and do the maths, the truth table is equivalent to a converse implication operator. (<a href="https://github.com/cosmologicon/pywat/blob/master/explanation.md#the-undocumented-converse-implication-operator">Source</a>)</p>
</li>
<li>
<p dir="auto">Since we are talking operators, there&#39;s also <code>@</code> operator for matrix multiplication (don&#39;t worry, this time it&#39;s for real).</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; np.array([2, 2, 2]) @ np.array([7, 8, 8])
46"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>import</span> <span>numpy</span> <span>as</span> <span>np</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>np</span>.<span>array</span>([<span>2</span>, <span>2</span>, <span>2</span>]) @ <span>np</span>.<span>array</span>([<span>7</span>, <span>8</span>, <span>8</span>])
<span>46</span></pre></div>
<p dir="auto"><strong><g-emoji alias="bulb" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png">💡</g-emoji> Explanation:</strong> The <code>@</code> operator was added in Python 3.5 keeping the scientific community in mind. Any object can overload <code>__matmul__</code> magic method to define behavior for this operator.</p>
</li>
<li>
<p dir="auto">From Python 3.8 onwards you can use a typical f-string syntax like <code>f&#39;{some_var=}</code> for quick debugging. Example,</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; some_string = &#34;wtfpython&#34;
&gt;&gt;&gt; f&#39;{some_string=}&#39;
&#34;some_string=&#39;wtfpython&#39;&#34;"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>some_string</span> <span>=</span> <span>&#34;wtfpython&#34;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>f&#39;<span><span>{</span><span>some_string</span><span>=</span><span>}</span></span>&#39;</span>
<span>&#34;some_string=&#39;wtfpython&#39;&#34;</span></pre></div>
</li>
<li>
<p dir="auto">Python uses 2 bytes for local variable storage in functions. In theory, this means that only 65536 variables can be defined in a function. However, python has a handy solution built in that can be used to store more than 2^16 variable names. The following code demonstrates what happens in the stack when more than 65536 local variables are defined (Warning: This code prints around 2^18 lines of text, so be prepared!):</p>
<div data-snippet-clipboard-copy-content="import dis
exec(&#34;&#34;&#34;
def f():
   &#34;&#34;&#34; + &#34;&#34;&#34;
   &#34;&#34;&#34;.join([&#34;X&#34; + str(x) + &#34;=&#34; + str(x) for x in range(65539)]))

f()

print(dis.dis(f))"><pre><span>import</span> <span>dis</span>
<span>exec</span>(<span>&#34;&#34;&#34;</span>
<span>def f():</span>
<span>   &#34;&#34;&#34;</span> <span>+</span> <span>&#34;&#34;&#34;</span>
<span>   &#34;&#34;&#34;</span>.<span>join</span>([<span>&#34;X&#34;</span> <span>+</span> <span>str</span>(<span>x</span>) <span>+</span> <span>&#34;=&#34;</span> <span>+</span> <span>str</span>(<span>x</span>) <span>for</span> <span>x</span> <span>in</span> <span>range</span>(<span>65539</span>)]))

<span>f</span>()

<span>print</span>(<span>dis</span>.<span>dis</span>(<span>f</span>))</pre></div>
</li>
<li>
<p dir="auto">Multiple Python threads won&#39;t run your <em>Python code</em> concurrently (yes, you heard it right!). It may seem intuitive to spawn several threads and let them execute your Python code concurrently, but, because of the <a href="https://wiki.python.org/moin/GlobalInterpreterLock" rel="nofollow">Global Interpreter Lock</a> in Python, all you&#39;re doing is making your threads execute on the same core turn by turn. Python threads are good for IO-bound tasks, but to achieve actual parallelization in Python for CPU-bound tasks, you might want to use the Python <a href="https://docs.python.org/3/library/multiprocessing.html" rel="nofollow">multiprocessing</a> module.</p>
</li>
<li>
<p dir="auto">Sometimes, the <code>print</code> method might not print values immediately. For example,</p>
<div data-snippet-clipboard-copy-content="# File some_file.py
import time

print(&#34;wtfpython&#34;, end=&#34;_&#34;)
time.sleep(3)"><pre><span># File some_file.py</span>
<span>import</span> <span>time</span>

<span>print</span>(<span>&#34;wtfpython&#34;</span>, <span>end</span><span>=</span><span>&#34;_&#34;</span>)
<span>time</span>.<span>sleep</span>(<span>3</span>)</pre></div>
<p dir="auto">This will print the <code>wtfpython</code> after 3 seconds due to the <code>end</code> argument because the output buffer is flushed either after encountering <code>\n</code> or when the program finishes execution. We can force the buffer to flush by passing <code>flush=True</code> argument.</p>
</li>
<li>
<p dir="auto">List slicing with out of the bounds indices throws no errors</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; some_list = [1, 2, 3, 4, 5]
&gt;&gt;&gt; some_list[111:]
[]"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>some_list</span> <span>=</span> [<span>1</span>, <span>2</span>, <span>3</span>, <span>4</span>, <span>5</span>]
<span>&gt;&gt;</span><span>&gt;</span> <span>some_list</span>[<span>111</span>:]
[]</pre></div>
</li>
<li>
<p dir="auto">Slicing an iterable not always creates a new object. For example,</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; some_str = &#34;wtfpython&#34;
&gt;&gt;&gt; some_list = [&#39;w&#39;, &#39;t&#39;, &#39;f&#39;, &#39;p&#39;, &#39;y&#39;, &#39;t&#39;, &#39;h&#39;, &#39;o&#39;, &#39;n&#39;]
&gt;&gt;&gt; some_list is some_list[:] # False expected because a new object is created.
False
&gt;&gt;&gt; some_str is some_str[:] # True because strings are immutable, so making a new object is of not much use.
True"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>some_str</span> <span>=</span> <span>&#34;wtfpython&#34;</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>some_list</span> <span>=</span> [<span>&#39;w&#39;</span>, <span>&#39;t&#39;</span>, <span>&#39;f&#39;</span>, <span>&#39;p&#39;</span>, <span>&#39;y&#39;</span>, <span>&#39;t&#39;</span>, <span>&#39;h&#39;</span>, <span>&#39;o&#39;</span>, <span>&#39;n&#39;</span>]
<span>&gt;&gt;</span><span>&gt;</span> <span>some_list</span> <span>is</span> <span>some_list</span>[:] <span># False expected because a new object is created.</span>
<span>False</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>some_str</span> <span>is</span> <span>some_str</span>[:] <span># True because strings are immutable, so making a new object is of not much use.</span>
<span>True</span></pre></div>
</li>
<li>
<p dir="auto"><code>int(&#39;١٢٣٤٥٦٧٨٩&#39;)</code> returns <code>123456789</code> in Python 3. In Python, Decimal characters include digit characters, and all characters that can be used to form decimal-radix numbers, e.g. U+0660, ARABIC-INDIC DIGIT ZERO. Here&#39;s an <a href="https://chris.improbable.org/2014/8/25/adventures-in-unicode-digits/" rel="nofollow">interesting story</a> related to this behavior of Python.</p>
</li>
<li>
<p dir="auto">You can separate numeric literals with underscores (for better readability) from Python 3 onwards.</p>
<div data-snippet-clipboard-copy-content="&gt;&gt;&gt; six_million = 6_000_000
&gt;&gt;&gt; six_million
6000000
&gt;&gt;&gt; hex_address = 0xF00D_CAFE
&gt;&gt;&gt; hex_address
4027435774"><pre><span>&gt;&gt;</span><span>&gt;</span> <span>six_million</span> <span>=</span> <span>6_000_000</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>six_million</span>
<span>6000000</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>hex_address</span> <span>=</span> <span>0xF00D_CAFE</span>
<span>&gt;&gt;</span><span>&gt;</span> <span>hex_address</span>
<span>4027435774</span></pre></div>
</li>
<li>
<p dir="auto"><code>&#39;abc&#39;.count(&#39;&#39;) == 4</code>. Here&#39;s an approximate implementation of <code>count</code> method, which would make the things more clear</p>
<div data-snippet-clipboard-copy-content="def count(s, sub):
    result = 0
    for i in range(len(s) + 1 - len(sub)):
        result += (s[i:i + len(sub)] == sub)
    return result"><pre><span>def</span> <span>count</span>(<span>s</span>, <span>sub</span>):
    <span>result</span> <span>=</span> <span>0</span>
    <span>for</span> <span>i</span> <span>in</span> <span>range</span>(<span>len</span>(<span>s</span>) <span>+</span> <span>1</span> <span>-</span> <span>len</span>(<span>sub</span>)):
        <span>result</span> <span>+=</span> (<span>s</span>[<span>i</span>:<span>i</span> <span>+</span> <span>len</span>(<span>sub</span>)] <span>==</span> <span>sub</span>)
    <span>return</span> <span>result</span></pre></div>
<p dir="auto">The behavior is due to the matching of empty substring(<code>&#39;&#39;</code>) with slices of length 0 in the original string.</p>
</li>
</ul>
<hr/>
<hr/>

<p dir="auto">A few ways in which you can contribute to wtfpython,</p>
<ul dir="auto">
<li>Suggesting new examples</li>
<li>Helping with translation (See <a href="https://github.com/satwikkansal/wtfpython/issues?q=is%3Aissue+is%3Aopen+label%3Atranslation">issues labeled translation</a>)</li>
<li>Minor corrections like pointing out outdated snippets, typos, formatting errors, etc.</li>
<li>Identifying gaps (things like inadequate explanation, redundant examples, etc.)</li>
<li>Any creative suggestions to make this project more fun and useful</li>
</ul>
<p dir="auto">Please see <a href="https://commoncog.com/satwikkansal/wtfpython/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a> for more details. Feel free to create a new <a href="https://github.com/satwikkansal/wtfpython/issues/new">issue</a> to discuss things.</p>
<p dir="auto">PS: Please don&#39;t reach out with backlinking requests, no links will be added unless they&#39;re highly relevant to the project.</p>

<p dir="auto">The idea and design for this collection were initially inspired by Denys Dovhan&#39;s awesome project <a href="https://github.com/denysdovhan/wtfjs">wtfjs</a>. The overwhelming support by Pythonistas gave it the shape it is in right now.</p>
<h4 dir="auto"><a id="user-content-some-nice-links" aria-hidden="true" href="#some-nice-links"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Some nice Links!</h4>
<ul dir="auto">
<li><a href="https://www.youtube.com/watch?v=sH4XF6pKKmk" rel="nofollow">https://www.youtube.com/watch?v=sH4XF6pKKmk</a></li>
<li><a href="https://www.reddit.com/r/Python/comments/3cu6ej/what_are_some_wtf_things_about_python" rel="nofollow">https://www.reddit.com/r/Python/comments/3cu6ej/what_are_some_wtf_things_about_python</a></li>
<li><a href="https://sopython.com/wiki/Common_Gotchas_In_Python" rel="nofollow">https://sopython.com/wiki/Common_Gotchas_In_Python</a></li>
<li><a href="https://stackoverflow.com/questions/530530/python-2-x-gotchas-and-landmines" rel="nofollow">https://stackoverflow.com/questions/530530/python-2-x-gotchas-and-landmines</a></li>
<li><a href="https://stackoverflow.com/questions/1011431/common-pitfalls-in-python" rel="nofollow">https://stackoverflow.com/questions/1011431/common-pitfalls-in-python</a></li>
<li><a href="https://www.python.org/doc/humor/" rel="nofollow">https://www.python.org/doc/humor/</a></li>
<li><a href="https://github.com/cosmologicon/pywat#the-undocumented-converse-implication-operator">https://github.com/cosmologicon/pywat#the-undocumented-converse-implication-operator</a></li>
<li><a href="https://www.codementor.io/satwikkansal/python-practices-for-efficient-code-performance-memory-and-usability-aze6oiq65" rel="nofollow">https://www.codementor.io/satwikkansal/python-practices-for-efficient-code-performance-memory-and-usability-aze6oiq65</a></li>
<li><a href="https://github.com/wemake-services/wemake-python-styleguide/search?q=wtfpython&amp;type=Issues">https://github.com/wemake-services/wemake-python-styleguide/search?q=wtfpython&amp;type=Issues</a></li>
<li>WFTPython discussion threads on <a href="https://news.ycombinator.com/item?id=21862073" rel="nofollow">Hacker News</a> and <a href="https://www.reddit.com/r/programming/comments/edsh3q/what_the_fck_python_30_exploring_and/" rel="nofollow">Reddit</a>.</li>
</ul>

<p dir="auto"><a href="http://www.wtfpl.net" rel="nofollow"><img src="https://camo.githubusercontent.com/8faf26c628ab8cf2a5c40e4673880fd74f525fe5427983bb4c9f99302af8a1a4/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d575446504c253230322e302d6c69676874677265792e7376673f7374796c653d666c61742d737175617265" alt="WTFPL 2.0" data-canonical-src="https://img.shields.io/badge/License-WTFPL%202.0-lightgrey.svg?style=flat-square"/></a></p>
<p dir="auto">© <a href="https://satwikkansal.xyz" rel="nofollow">Satwik Kansal</a></p>
<h2 dir="auto"><a id="user-content-surprise-your-friends-as-well" aria-hidden="true" href="#surprise-your-friends-as-well"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Surprise your friends as well!</h2>
<p dir="auto">If you like wtfpython, you can use these quick links to share it with your friends,</p>
<p dir="auto"><a href="https://twitter.com/intent/tweet?url=https://github.com/satwikkansal/wtfpython&amp;text=If%20you%20really%20think%20you%20know%20Python,%20think%20once%20more!%20Check%20out%20wtfpython&amp;hashtags=python,wtfpython" rel="nofollow">Twitter</a> | <a href="https://www.linkedin.com/shareArticle?url=https://github.com/satwikkansal&amp;title=What%20the%20f*ck%20Python!&amp;summary=If%20you%20really%20thing%20you%20know%20Python,%20think%20once%20more!" rel="nofollow">Linkedin</a> | <a href="https://www.facebook.com/dialog/share?app_id=536779657179021&amp;display=page&amp;href=https%3A%2F%2Fgithub.com%2Fsatwikkansal%2Fwtfpython&amp;quote=If%20you%20really%20think%20you%20know%20Python%2C%20think%20once%20more!" rel="nofollow">Facebook</a></p>
<h2 dir="auto"><a id="user-content-need-a-pdf-version" aria-hidden="true" href="#need-a-pdf-version"><svg viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Need a pdf version?</h2>
<p dir="auto">I&#39;ve received a few requests for the pdf (and epub) version of wtfpython. You can add your details <a href="https://satwikkansal.xyz/wtfpython-pdf/" rel="nofollow">here</a> to get them as soon as they are finished.</p>
<p dir="auto"><strong>That&#39;s all folks!</strong> For upcoming content like this, you can add your email <a href="https://www.satwikkansal.xyz/content-like-wtfpython/" rel="nofollow">here</a>.</p>
</article>
          </div></div>
  </body>
</html>
