<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>James Routley | Feed</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../styles.css"
      media="screen"
    />
  </head>
  <body>
    <a href="/index.html">Back</a>
    <a href="https://www.faridrener.com/2025/03/15/equals-fstrings.html">Original</a>
    <h1>Python f-strings {expr=}</h1>
    
    <div id="readability-page-1" class="page"><div>
      <div>
        <div>

  

  <article>
    <p>I’ve been learning rust recently, and have loved the ease of the <code>dbg!</code> macro which will print and return the value of a given expression, along with the file and line number of where it was called. Since it returns the value of the expression it can be used inline.</p>

<p>For <a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2024&amp;gist=65b0f0a6325cb1d758810c347ce3b697">example</a>:</p>

<div><div><pre><code><span>fn</span> <span>main</span><span>()</span> <span>{</span>
    <span>let</span> <span>nums</span> <span>=</span> <span>vec!</span><span>[</span><span>1</span><span>,</span> <span>2</span><span>,</span> <span>3</span><span>,</span> <span>4</span><span>,</span> <span>5</span><span>];</span>

    <span>let</span> <span>doubled</span><span>:</span> <span>Vec</span><span>&lt;</span><span>_</span><span>&gt;</span> <span>=</span> <span>nums</span>
        <span>.iter</span><span>()</span>
        <span>.map</span><span>(|</span><span>x</span><span>|</span> <span>dbg!</span><span>(</span><span>x</span> <span>*</span> <span>2</span><span>))</span>
        <span>.collect</span><span>();</span>

    <span>println!</span><span>(</span><span>&#34;Result: {:?}&#34;</span><span>,</span> <span>doubled</span><span>);</span>
<span>}</span>
</code></pre></div></div>
<p>This will output:</p>
<div><div><pre><code>[src/main.rs:6] x * 2 = 2
[src/main.rs:6] x * 2 = 4
[src/main.rs:6] x * 2 = 6
[src/main.rs:6] x * 2 = 8
[src/main.rs:6] x * 2 = 10
Result: [2, 4, 6, 8, 10]
</code></pre></div></div>

<p>It saves you having to make new variables just to debug what is in them, and gives you a nice amount of context.</p>

<p>Recently Jakub showed me that python has something very similar in the form of an <code>fstring</code> with an <code>=</code> specifier like so: <code>f&#34;{expr=}&#34;</code>. This will expand the expression and the value, and shows you which expression was evaluated. It saves you from having to notate your variable names when printing things out.</p>

<p>For example (from the <a href="https://docs.python.org/3/whatsnew/3.8.html#f-strings-support-for-self-documenting-expressions-and-debugging">docs</a>):</p>

<div><div><pre><code><span>&gt;&gt;&gt;</span> <span>from</span> <span>math</span> <span>import</span> <span>cos</span><span>,</span> <span>radians</span>
<span>&gt;&gt;&gt;</span> <span>theta</span> <span>=</span> <span>30</span>
<span>&gt;&gt;&gt;</span> <span>print</span><span>(</span><span>f</span><span>&#39;</span><span>{</span><span>theta</span><span>=</span><span>}</span><span>  </span><span>{</span><span>cos</span><span>(</span><span>radians</span><span>(</span><span>theta</span><span>))</span><span>=</span><span>:</span><span>.</span><span>3</span><span>f</span><span>}</span><span>&#39;</span><span>)</span>
<span>theta</span><span>=</span><span>30</span>  <span>cos</span><span>(</span><span>radians</span><span>(</span><span>theta</span><span>))</span><span>=</span><span>0.866</span>
</code></pre></div></div>

<p>While this doesn’t give you the file and line-number context, it has now become my go-to way of printing things out when I’m doing print debugging in python.</p>

  </article>

</div>

      </div>
    </div></div>
  </body>
</html>
